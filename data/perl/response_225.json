[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1556718121, "post_id": 55936999, "comment_id": 98527024, "body": "Just remove <code>.*</code> from your regex."}, {"owner": {"reputation": 2691, "user_id": 4864063, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100259670624966/picture?type=large", "display_name": "jmcgriz", "link": "https://stackoverflow.com/users/4864063/jmcgriz"}, "edited": false, "score": 0, "creation_date": 1556723854, "post_id": 55936999, "comment_id": 98529921, "body": "If your regex needs to match the full string, <code>[^\\d]+(\\d{4,5}).*</code> is also an option"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556731747, "post_id": 55936999, "comment_id": 98533425, "body": "What do you want to do if there are 6 digits in a row?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1556717344, "post_id": 55937020, "comment_id": 98526719, "body": ".*(\\d{4,5}).* dosent work, it only match 1058 in the string : pe01058pr04"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "reply_to_user": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1556717513, "post_id": 55937020, "comment_id": 98526782, "body": "This won&#39;t work because <code>.*</code> in your regex is greedy and will consume as much as it can and hence will consume the first number and will only give you last match. You can use non-greedy version to get two matches with this regex <code>.*?(\\d{4,5}).*?</code> but why don&#39;t you simply get digits using <code>\\d{4,5}</code> ?"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1556717929, "post_id": 55937020, "comment_id": 98526948, "body": "<code>.*?(\\d{4,5}).*?</code> -- this worked for me. Thank you !"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "reply_to_user": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1556718031, "post_id": 55937020, "comment_id": 98526989, "body": "@kaushikkm: Yes, non-greedy pattern will work as then <code>.*?</code> will just as less as possible but if you see even your regex works <code>.([0-9]{4,5}).</code> to give you your intended matches in group1. But best would be to use <code>\\d{4,5}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556731525, "post_id": 55937020, "comment_id": 98533322, "body": "Using <code>.*?</code> in a pattern for reasons other than optimizations is a red flag. Using two in the same pattern is a huge red flag. These will rarely work as intended. <code>(?&lt;\\d)\\d{4,5}</code> or <code>(?&lt;\\d)\\d{4,5}(?!\\d)</code> (depending on how you want to handle 6 digits) is far safer."}], "tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": false, "score": 2, "last_activity_date": 1556718065, "last_edit_date": 1556718065, "creation_date": 1556717270, "answer_id": 55937020, "question_id": 55936999, "link": "https://stackoverflow.com/questions/55936999/how-to-match-4-or-5-digit-number-in-the-following/55937020#55937020", "title": "How to match 4 or 5 digit number in the following?", "body": "<p>You can just use <code>\\d{4,5}</code> to match either 4 or 5 digits.</p>\n\n<p><strong><a href=\"https://regex101.com/r/X1M5GT/1\" rel=\"nofollow noreferrer\">Regex Demo</a></strong></p>\n\n<p>Also, your regex does match all five and four digits like you want in group1. <a href=\"https://regex101.com/r/X1M5GT/2\" rel=\"nofollow noreferrer\">See this</a> But why don't you simply use <code>\\d{4,5}</code> like I suggested above?a</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1556735993, "last_edit_date": 1556735993, "creation_date": 1556731782, "answer_id": 55940164, "question_id": 55936999, "link": "https://stackoverflow.com/questions/55936999/how-to-match-4-or-5-digit-number-in-the-following/55940164#55940164", "title": "How to match 4 or 5 digit number in the following?", "body": "<pre><code>my ($first_sequence_of_digits) = $string =~ /(\\d+)/;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556735993, "creation_date": 1556717190, "last_edit_date": 1556718114, "question_id": 55936999, "link": "https://stackoverflow.com/questions/55936999/how-to-match-4-or-5-digit-number-in-the-following", "title": "How to match 4 or 5 digit number in the following?", "body": "<p>How to match the number in the below string? </p>\n\n<pre><code>pe01058pr04\npe1234pr03\n</code></pre>\n\n<p>We may get 4 digit or 5 digit as show above.</p>\n\n<p>I tried the below regex: </p>\n\n<pre><code>.*([0-9]{4,5}).*\n</code></pre>\n\n<p>But it matches only 4 digits.</p>\n\n<p>I need 5 digit to be matched for \"pe01058pr04\" --> 01058</p>\n\n<p>I need 4 digit to be matched for \"pe1234pr03\" --> 1234</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556712660, "post_id": 55935937, "comment_id": 98524614, "body": "what is the <code>13</code> here ?."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556712711, "post_id": 55935937, "comment_id": 98524643, "body": "it&#39;s the length of the string divided by two"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556713132, "post_id": 55935937, "comment_id": 98524816, "body": "I removed the fixed number 13. See my updated answer"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1556713084, "last_edit_date": 1556713084, "creation_date": 1556712052, "answer_id": 55935937, "question_id": 55935536, "link": "https://stackoverflow.com/questions/55935536/perl-matching-at-even-positions-and-remove-non-printable-chars/55935937#55935937", "title": "perl - matching at even positions and remove non-printable chars", "body": "<p>You can try split the string into 2 bytes substrings using <a href=\"https://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\"><code>unpack</code></a>:</p>\n\n<pre><code>my $x=\"41424320202020200A200B000C\";\nsay $x;\nsay join '', grep { $_ !~ /00/} unpack \"(A2)*\", $x;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>41424320202020200A200B000C\n41424320202020200A200B0C\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556716823, "post_id": 55936765, "comment_id": 98526475, "body": "great answer.. I was building a regex with alternate matches and you have simplified it.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556727081, "post_id": 55936765, "comment_id": 98531478, "body": "The active locale isn&#39;t consulted unless <code>&#47;l</code> is used, so the last sentence doesn&#39;t make sense."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1556716854, "last_edit_date": 1556716854, "creation_date": 1556716102, "answer_id": 55936765, "question_id": 55935536, "link": "https://stackoverflow.com/questions/55935536/perl-matching-at-even-positions-and-remove-non-printable-chars/55936765#55936765", "title": "perl - matching at even positions and remove non-printable chars", "body": "<blockquote>\n  <p>detect the control chars that could break the string when printed.. i.e remove ascii null \\x00, \\n, \\r, \\f and \\x80 to \\xFF, etc..</p>\n</blockquote>\n\n<p>Building on Hakon's answer (Which only strips out nul bytes, not all the other ones):</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nmy $x=\"41424320202020200A200B000C\";\nsay $x;\nsay grep { chr(hex($_)) =~ /[[:print:]\\t]/ &amp;&amp; hex($_) &lt; 128 } unpack(\"(A2)*\", $x);\n</code></pre>\n\n<p>gives you</p>\n\n<pre><code>41424320202020200A200B000C\n414243202020202020\n</code></pre>\n\n<p>The character class <code>[:print:]</code> inside a character set matches all printable characters including space (but not control characters like newline and linefeed), and I added in tab as well. Then it also checks to make sure the byte is in the ASCII range (Since higher characters are still printable in many locales).</p>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556728983, "post_id": 55939464, "comment_id": 98532288, "body": "can you confirm that it will preserve tabs and spaces..I dont want to strip them.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556729046, "post_id": 55939464, "comment_id": 98532315, "body": "Just add it to the list of chars to keep. (I&#39;ve adjusted the answer)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556729694, "post_id": 55939464, "comment_id": 98532573, "body": "could you please explain on the /a modifier, the solution works in my cygwin, but not sure it will do in my Enterprise Linux"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556729772, "post_id": 55939464, "comment_id": 98532623, "body": "It will work as long as you have Perl 5.14 or newer (for <code>&#47;r</code> and <code>&#47;a</code>). <code>&#47;a</code> causes <code>[:print:]</code> to only match ASCII characters (00..7F)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556730297, "post_id": 55939464, "comment_id": 98532825, "body": "Added alternatives that don&#39;t require 5.14. They&#39;ll work at least as far back as 5.6 (though you&#39;ll need to replace <code>say</code> with <code>print</code> before Perl 5.10)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1556731221, "last_edit_date": 1556731221, "creation_date": 1556728440, "answer_id": 55939464, "question_id": 55935536, "link": "https://stackoverflow.com/questions/55935536/perl-matching-at-even-positions-and-remove-non-printable-chars/55939464#55939464", "title": "perl - matching at even positions and remove non-printable chars", "body": "<pre><code>say unpack(\"H*\", pack(\"H*\", \"41424320202020200A200B000C\") =~ s/[^\\t[:print:]]//arg);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $hex = \"41424320202020200A200B000C\";\nmy $bytes = pack(\"H*\", $hex);\n$bytes =~ s/[^\\t[:print:]]//ag;\n$hex = unpack(\"H*\", $bytes);\nsay $hex;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $hex = \"41424320202020200A200B000C\";\nmy $bytes = pack(\"H*\", $hex);\n$bytes =~ s/[^\\t\\x20-\\x7E]//g;\n$hex = unpack(\"H*\", $bytes);\nsay $hex;\n</code></pre>\n\n<p>Solutions using <code>/a</code> and <code>/r</code> require Perl 5.14+.</p>\n\n<hr>\n\n<p>The above starts with the following string:</p>\n\n<pre><code> 41424320202020200A200B000C\n</code></pre>\n\n<p>It is converted into the following using <code>pack</code>:</p>\n\n<pre><code> ABC\u2420\u2420\u2420\u2420\u2420\u240a\u2420\u240b\u2400\u240c\n</code></pre>\n\n<p>The substitution removes all non-ASCII and all non-printable characters except TAB, leaving us with the following:</p>\n\n<pre><code> ABC\u2420\u2420\u2420\u2420\u2420\u2420\n</code></pre>\n\n<p>It is converted into the following using <code>unpack</code>:</p>\n\n<pre><code> 414243202020202020\n</code></pre>\n\n<hr>\n\n<p>This solution is not only shorter than the previous solutions, it is also faster because it allocates far fewer variables and only starts the regex match once.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556734105, "post_id": 55940003, "comment_id": 98534565, "body": "<a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>. Matches where the last match left off (or at the start of the string if first match). You can imagine every pattern being prefixed by an implicit <code>\\G(?s:.)*?\\K</code>. By using <code>\\G(?s:..)*?\\K</code> instead, we advance by two positions instead of by 1 when looking for a match."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556736645, "post_id": 55940003, "comment_id": 98535551, "body": "is it not redundant then?.. sorry it is little confusing to comprehend..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556736701, "post_id": 55940003, "comment_id": 98535574, "body": "No, it&#39;s what prevents <code>00</code> from being matched in <code>2009</code>, the very problem you asked to solve."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556737031, "post_id": 55940003, "comment_id": 98535730, "body": "For example, using <code>s&#47;\\G(?:..)*?\\K00&#47;&#47;sg</code> instead of <code>s&#47;00&#47;&#47;g</code> would have solved your problem if you just wanted to remove NULs."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556737405, "post_id": 55940003, "comment_id": 98535867, "body": "in that case it would fail for very first occurence right?.. 004142?.. but it succeeds!!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556737484, "post_id": 55940003, "comment_id": 98535896, "body": "Like I mentioned above, <code>\\G</code> matches the start of the string on the first attempt (cause pos=undef=0 then)."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556737535, "post_id": 55940003, "comment_id": 98535915, "body": "both <code>s&#47;(?:..)*?\\K00&#47;&#47;g</code> and <code>s&#47;\\G(?:..)*?\\K00&#47;&#47;g</code> gives the same results for the string <code>&quot;0041004200&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556737600, "post_id": 55940003, "comment_id": 98535943, "body": "And so does <code>s&#47;00&#47;&#47;g</code>. That doesn&#39;t make <code>s&#47;00&#47;&#47;g</code> and <code>s&#47;(?:..)*?\\K00&#47;&#47;g</code> correct."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556737943, "post_id": 55940003, "comment_id": 98536074, "body": "great! - I see the difference for the string &quot;2009&quot; as you mentioned.. so \\G would be faster for my case as it will hop by 2 every time.. right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556738152, "post_id": 55940003, "comment_id": 98536138, "body": "Faster than what? The other solutions that first convert from hex? Yeah, but I wouldn&#39;t use this solution. I shouldn&#39;t have to tell you this; it should be evident how complicated it is just by looking at it. Complicated solutions are hard to read and hard maintain. This makes them error-prone and causes all sorts of problem. (In fact, there were three errors in the initial version of this answer.) The fastest solution is rarely the best, and the simplest solution is usually the best. (Of course, I&#39;d take a fast and simple solution over a slow and simple one.)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1556738900, "post_id": 55940003, "comment_id": 98536412, "body": "yes.. I agree.. thank you for your time to explain all these stuffs.. learned a lot"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1556735544, "last_edit_date": 1556735544, "creation_date": 1556731062, "answer_id": 55940003, "question_id": 55935536, "link": "https://stackoverflow.com/questions/55935536/perl-matching-at-even-positions-and-remove-non-printable-chars/55940003#55940003", "title": "perl - matching at even positions and remove non-printable chars", "body": "<p>It is possible to work directly with the hex form of the characters, but it's far more complicated. I recommend against using this approach. This answer serves to illustrate why this solution wasn't proposed.</p>\n\n<hr>\n\n<p>You wish to exclude all characters except the following:</p>\n\n<ul>\n<li>ASCII printables (20<sub>16</sub> to 7E<sub>16</sub>)</li>\n<li>TAB (09<sub>16</sub>)</li>\n</ul>\n\n<p>That means you wish to exclude the following characters:</p>\n\n<ul>\n<li>00<sub>16</sub> to 08<sub>16</sub></li>\n<li>0A<sub>16</sub> to 1F<sub>16</sub></li>\n<li>7F<sub>16</sub> to FF<sub>16</sub></li>\n</ul>\n\n<p>If we group these by leading digits, we get</p>\n\n<ul>\n<li>00<sub>16</sub> to 08<sub>16</sub>, 0A<sub>16</sub> to 0F<sub>16</sub></li>\n<li>10<sub>16</sub> to 1F<sub>16</sub></li>\n<li>7F<sub>16</sub></li>\n<li>80<sub>16</sub> to FF<sub>16</sub></li>\n</ul>\n\n<p>We can therefore use the following:</p>\n\n<pre><code>$hex =~ s/\\G(?:..)*?\\K(?:0[0-8A-Fa-f]|7F|[189A-Fa-f].)//sg;     # 5.10+\n\n$hex =~ s/\\G((?:..)*?)(?:0[0-8A-Fa-f]|7F|[189A-Fa-f].)/$1/sg;   # Slower\n</code></pre>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "accepted_answer_id": 55939464, "answer_count": 4, "score": 3, "last_activity_date": 1556735544, "creation_date": 1556710051, "question_id": 55935536, "link": "https://stackoverflow.com/questions/55935536/perl-matching-at-even-positions-and-remove-non-printable-chars", "title": "perl - matching at even positions and remove non-printable chars", "body": "<p>I have a hex2string from database table dump that is like </p>\n\n<pre><code>\"41424320202020200A200B000C\"\n</code></pre>\n\n<p>what I want to do is to match at the even positions and detect the control chars that could break the string when printed.. i.e remove ascii null \\x00, \\n, \\r, \\f and \\x80 to \\xFF, etc..</p>\n\n<p>I tried removing ascii null like </p>\n\n<pre><code>perl -e ' $x=\"41424320202020200A200B000C\"; $x=~s/00//g; print \"$x\\n\" '\n</code></pre>\n\n<p>but the result is incorrect as it removed 0 from trailing hex value of space \\x20 and leading 0 of newline \\x0A i.e <code>20 0A</code> to <code>2A</code></p>\n\n<pre><code>414243202020202A2B0C\n</code></pre>\n\n<p>what i wanted is </p>\n\n<pre><code>414243202020202020\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556704289, "post_id": 55934072, "comment_id": 98521476, "body": "@H&#229;konH&#230;gland That&#39;s mainly for ad-hoc template strings in the replacement part. It does not protect against malicious patterns."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556704493, "post_id": 55934072, "comment_id": 98521549, "body": "See also <a href=\"https://stackoverflow.com/q/29107353/2173773\">Using the ee modifier safely with the s/// operator when the right side is input from user</a>"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556704664, "post_id": 55934072, "comment_id": 98521614, "body": "@H&#229;konH&#230;gland Okay, thanks for the reference. :)"}], "answers": [{"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556704548, "post_id": 55934332, "comment_id": 98521573, "body": "Thank you for your nice explanations. :) Thinking in terms of File Manager and searching for string, let&#39;s say, <code>a</code> in <code>&#47;</code> (for <code>root</code> user) could already cause significant load on the system without using regex. However, due to environment and application design, it&#39;s acceptable as inevitable part of the app."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556704571, "post_id": 55934332, "comment_id": 98521585, "body": "Yes, I am interested in protection against Perl code injection via regex. For this purpose, I don&#39;t allow literal spaces and backticks, which I think is enough, correct?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556704673, "post_id": 55934332, "comment_id": 98521617, "body": "@IliaRostovtsev Perl automatically protects against that. You don&#39;t have to do anything. Spaces and backticks aren&#39;t special in regexes anyway."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556704824, "post_id": 55934332, "comment_id": 98521662, "body": "I thought that I could just terminate the regex with substitution, like <code>&#47;&#47;</code> and go <code>; `shutdown -h now`</code>. Are you sure about that you can not do it? Is my <code>quotemeta_dangerous</code> good in your opinion?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556705077, "post_id": 55934332, "comment_id": 98521743, "body": "@IliaRostovtsev I am sure. That&#39;s why I wrote &quot;<i>you can&#39;t do that from user input</i>&quot; in my answer. I don&#39;t think your function is good because 1) it doesn&#39;t increase the security of your code (code injection is not possible and DoS is possible, both with and without your function), so 2) at best it provides a false sense of security, and 3) I find it hard to think about. It&#39;s a chain of string substitutions on code, which always make me feel uneasy. I don&#39;t trust it if it&#39;s not obviously correct."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556705557, "post_id": 55934332, "comment_id": 98521909, "body": "@IliaRostovtsev What about <a href=\"https://stackoverflow.com/questions/2159355/how-can-i-safely-use-regexes-from-user-input/2159523#comment2104292_2159523\">this comment</a>: &quot;<i>Fortunately, <code>(?{ code })</code> causes a compile time error if the regex includes variable interpolation unless you say <code>use re &#39;eval&#39;</code> (for exactly this reason).</i>&quot;"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556706304, "post_id": 55934332, "comment_id": 98522193, "body": "..and one more. From my example, <code>$text_to_find</code> has to be <code>quotemeta</code> using <code>\\Q$text_to_find\\E</code> or it&#39;s okay to go without it for matching and then replacing text in string? :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1556706370, "post_id": 55934332, "comment_id": 98522214, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/192664/discussion-between-melpomene-and-ilia-rostovtsev\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1556704096, "last_edit_date": 1556704096, "creation_date": 1556703701, "answer_id": 55934332, "question_id": 55934072, "link": "https://stackoverflow.com/questions/55934072/perl-regex-as-user-search-input-sanitisation/55934332#55934332", "title": "Perl regex as user search input (sanitisation)", "body": "<ol>\n<li><p>I'm not sure what you mean by <em>terminated</em>. As for running arbitrary Perl code, you can't do that from user input (unless the program enables it explicitly with e.g. <code>eval()</code> or <code>use re 'eval'</code>). If you could just inject Perl code from user input, your function wouldn't protect against it: It lets through e.g. <code>(?{system+qq(rm -rf ~)})</code> in runnable form (runnable, that is, if it were part of the code, not input data).</p>\n\n<p>What you can do with a user input regex is create a DoS: Make it consume a lot of CPU and hang the program. Your function does not protect against that. For example, try:</p>\n\n<pre><code>'aaaaaaaaaa' =~ /(((\\1?[a-z]*)*)*)*[b-z]/\n</code></pre>\n\n<p>Or with an even longer chain of a's. (There are probably ways to shorten this code; I was just throwing random bits together to see whether they finished matching quickly.)</p>\n\n<p>If you want to guard against that, have a look at <a href=\"https://github.com/google/re2/wiki/WhyRE2\" rel=\"nofollow noreferrer\">RE2</a>:</p>\n\n<blockquote>\n  <p>RE2 was designed and implemented with an explicit goal of being able to handle regular expressions from untrusted users without risk.</p>\n</blockquote>\n\n<p>You can <a href=\"https://metacpan.org/pod/re::engine::RE2\" rel=\"nofollow noreferrer\">use it in your code</a> by doing</p>\n\n<pre><code>{\n    use re::engine::RE2 -strict =&gt; 1;\n    # now regexes compiled in this scope will use the RE2 engine\n    ...\n}\n</code></pre></li>\n<li><p>That's easy to answer. There's no danger here; <code>$text_to_replace_with</code> is simply treated as a string.</p>\n\n<p>(If you want to create danger, you need either</p>\n\n<ul>\n<li><code>/e</code> and <code>eval()</code>, or</li>\n<li><code>/ee</code>, which is the same thing.</li>\n</ul>\n\n<p>Technically you don't need <code>/e</code>, but that still leaves a very visible <code>eval()</code> in your code. Again, you can't attack this as a user; you have to code it in.)</p></li>\n</ol>\n"}], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55934332, "answer_count": 1, "score": 1, "last_activity_date": 1556704096, "creation_date": 1556702431, "question_id": 55934072, "link": "https://stackoverflow.com/questions/55934072/perl-regex-as-user-search-input-sanitisation", "title": "Perl regex as user search input (sanitisation)", "body": "<p>I need to make sure that <em>regex</em>, that is passed as <em>user input</em> will not accidentally be <em>terminated</em> and turn into <em>arbitrary</em> Perl code, but at the same time <em>work</em> for basic filtering purposes.</p>\n\n<p><strong>Important!</strong> This part of the code is run in <em>user-jailed</em> mode, meaning that potentially, it can only be self-exploited. Apart from this, UI is only exposed to particular user, and potentially run against limited number of files, thus potential DoS risks are very minimal.</p>\n\n<p>In order to reach my goal, I created custom function that would first quotemeta all, and later un-escape needed only for regex to run characters.</p>\n\n<h3>Example:</h3>\n\n<pre><code># Allow short range of special chars to be left unescaped\n# to let regex work, while at the same time prevent possible\n# command injection or premature regex termination\nmy $mask = $in{'mask'};\nsub quotemeta_dangerous\n{    \n    my ($string) = @_;\n    $string = quotemeta($string);\n    $string =~ s/\\\\\\\\/\\\\/g;\n    $string =~ s/\\\\\\+/+/g;\n    $string =~ s/\\\\\\*/*/g;\n    $string =~ s/\\\\\\$/\\$/g;\n    $string =~ s/\\\\\\^/\\^/g;\n    $string =~ s/\\\\\\(/\\(/g;\n    $string =~ s/\\\\\\)/\\)/g;\n    $string =~ s/\\\\\\{/\\{/g;\n    $string =~ s/\\\\\\}/\\}/g;\n    $string =~ s/\\\\\\[/\\[/g;\n    $string =~ s/\\\\\\]/\\]/g;\n    $string =~ s/\\\\\\?/?/g;\n    $string =~ s/\\\\\\././g;\n    $string =~ s/\\\\\\-/-/g;\n    return $string;\n}\n\nmy $sanitized_mask = quotemeta_dangerous($mask);\nif ($filename =~ /$sanitized_mask/) {\n    # matched\n}\n</code></pre>\n\n<h3>Questions:</h3>\n\n<ol>\n<li><p>Whether my solution above will help me to achieve my goals safely, considering mentioned, <em>important</em> side notes. What are the potential risks that I don't see here? </p></li>\n<li><p>As side, but familiar question, when further running substitutions, does the <em>replace</em> part can be injected/exploited as well, and <em>if it is</em>, how to <em>safely run substitutions</em> in contents on matched files?</p></li>\n</ol>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>$file_contents =~ s/\\Q$text_to_find\\E/$text_to_replace_with/g;\n</code></pre>\n\n<p>Is <code>$text_to_replace_with</code> can be avoided here as security risk, when passed from user as it is?</p>\n"}, {"tags": ["python", "regex", "perl"], "comments": [{"owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "edited": false, "score": 0, "creation_date": 1556691502, "post_id": 55932349, "comment_id": 98517563, "body": "Pufff, that is scary :/"}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1556691519, "post_id": 55932349, "comment_id": 98517567, "body": "Stack Overflow is not a free code writing service, and asking us for a complete rewrite to Python probably makes your question too broad."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556691582, "post_id": 55932349, "comment_id": 98517590, "body": "The <code>map</code> function is used for its side effect on incrementing <code>$v</code>"}], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556692255, "post_id": 55932378, "comment_id": 98517743, "body": "Thank you. So just to clarify <code>@m</code> is an array that has been split on the white space of <code>$m</code> (as given by <code>(split &#47; &#47; @m)</code>, Then <code>maybe_number</code> iterates over each of those elements in <code>@m</code>. Is this correct ?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556692365, "post_id": 55932378, "comment_id": 98517763, "body": "yes, that is correct"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1556691677, "creation_date": 1556691677, "answer_id": 55932378, "question_id": 55932349, "link": "https://stackoverflow.com/questions/55932349/how-to-convert-perl-map-function-to-python/55932378#55932378", "title": "How to Convert Perl Map function to Python?", "body": "<p>map is usually used to transform one list into another; here it is being abused to simply loop over <code>@m</code>.</p>\n\n<p>The code is equivalent to:</p>\n\n<pre><code>for my $maybe_number (@m) {\n    if ($maybe_number =~ /^\\d+$/) {\n        $v += $maybe_number;\n    }\n}\n</code></pre>\n\n<p>summing up all the elements of <code>@m</code> that are just one or more digits.</p>\n\n<p><code>my $x = shift;</code> inside a sub assigns the first argument to the sub to <code>$x</code>.</p>\n\n<p>The last line of length in words finds all sequences of non-whitespace characters and assigns them to <code>@k</code>.  That assignment is placed in scalar context, which returns the number of elements assigned.  So it is counting how many \"words\" (sequences of non-whitespace characters) there are in the sub's argument.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556706353, "post_id": 55933874, "comment_id": 98522206, "body": "Beware: <code>split</code> in scalar context has a nasty side effect in older perls."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556707442, "post_id": 55933874, "comment_id": 98522613, "body": "That should be <code>sum0</code>, not <code>sum</code>, to perfectly replicate the original."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556736808, "post_id": 55933874, "comment_id": 98535621, "body": "@melpomene Thank you, fixed and added comment.  Also added a benchmark, where <code>split</code>&#39;s performance surprises."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1556736578, "last_edit_date": 1592644375, "creation_date": 1556701365, "answer_id": 55933874, "question_id": 55932349, "link": "https://stackoverflow.com/questions/55932349/how-to-convert-perl-map-function-to-python/55933874#55933874", "title": "How to Convert Perl Map function to Python?", "body": "<p>While you've got a full explanation by ysth I can't help it but to rewrite that</p>\n<p>A simple example</p>\n<pre><code>use warnings;\nuse strict;\n\nuse List::Util qw(sum0);    \n\nmy $y = ...    \nmy @M = $y =~ /.../;\n\nmy ($best, $bestseq) = (0, '');\n\nforeach my $m (@M) {\n    (my $new_m = $m) =~ s/\\d+://g;\n    my @w = split ' ', $new_m;         # CHANGED from original\n    my $v = sum0 grep { /^\\d+$/ } @w; \n    if ($v &gt; $best) { \n        $best = $v; \n        $bestseq = $new_m; \n    }\n}\n    \nsub length_in_words {\n    return scalar split ' ', $_[0];\n}\n</code></pre>\n<p>The loop appears to do the following.  Each element of <code>@M</code> array is pruned of <code>\\d+:</code> (consecutive digits followed by <code>:</code>) and then split into words. All words which are numbers only are summed up.  This is used to find the largest (&quot;best&quot;) such sum and to record its element.</p>\n<p>Some comments</p>\n<ul>\n<li><p>A <code>foreach</code> <em>aliases</em> array elements in processing, so if operations change the currently processed element then the array changes as well.</p>\n<p>The original code does not change elements of <code>@M</code> so I first copy <code>$m</code> into a <code>$new_m</code> and work with that.  If this doesn't matter and <code>@M</code> may get changed in this loop, just do <code>$m =~ s/\\d+://g;</code>, and use <code>$m</code> instead of <code>$new_m</code> elsewhere.</p>\n</li>\n<li><p>index <code>$i</code> isn't used so iterate over array elements directly</p>\n</li>\n<li><p><code>$z</code> isn't used, removed</p>\n</li>\n<li><p>that <code>map</code> sums up a filtered (only digits) subset of elements of <code>@m</code></p>\n</li>\n<li><p>original &quot;best&quot; initializes to zero thus use <code>sum0</code>, which gives zero with empty list input</p>\n</li>\n<li><p>original <code>split / /, $m</code> splits the scalar <code>$m</code> by a <em>single</em> whitespace. I strongly suspect that the intention is to parse <code>$m</code> into words, so split by all consecutive whitespace.  Thus I use</p>\n<pre><code>  my @w = split ' ', $new_m;\n</code></pre>\n<p>where <code>' '</code> is a special pattern that splits by any amount of whitespace, and drops leading and trailing spaces as well.  See <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>. I renamed it to <code>@w</code> since it's clearly words.</p>\n</li>\n</ul>\n<p>One more comment: I'd use <code>@words</code>, <code>$val</code> (or such) rather than one-letter names.</p>\n<hr />\n<p>A comment on code used in <code>length_in_words()</code> and efficiency.</p>\n<p>There are various ways to count the number of words in a string, of course.  The benchmark below shows the one chosen here to be fastest</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Benchmark 'cmpthese';\n    \nmy $run_for = shift // 3;  # seconds for each\n\nmy $text = &quot; ah\\n no \\t hi  end &quot;;\n\nsub split_scalar {\n   return scalar split ' ', $_[0];\n}  \n\nsub regex_context {\n    my $wc =()= $_[0] =~ /\\S+/g;\n}   \n\nsub regex_while {\n    my $wc; \n    ++$wc while $_[0] =~ /\\S+/g;\n    return $wc; \n}   \n        \ncmpthese (-$run_for, {\n    split_scalar  =&gt; sub { split_scalar($text) },\n    regex_context =&gt; sub { regex_context($text) },\n    regex_while   =&gt; sub { regex_while($text) },\n}); \n</code></pre>\n<p>Under v5.24.4 on a decent desktop this prints</p>\n<pre>\n                    Rate regex_context regex_while  split_scalar  \nregex_context  1119833/s            --         -7%          -90%\nregex_while    1203020/s            7%          --          -89%\nsplit_scalar  11351365/s          914%        844%            --\n</pre>\n<p>For one, such a huge advantage of using <code>split</code> in scalar context is surprising to me and I'd guess it to be due to specific optimizations in <code>split</code>, from which this use case benefits.</p>\n<p>Even more interestingly, when splitting a string  with 10_000 words the scalar-split way is even far more superior -- it gets to <em>4026 %</em>.</p>\n<p>In my tests this showed consistent results in repeated runs on that desktop and on a server, with v5.16.3 and v5.24.4, with the following slight differences under the older Perl.</p>\n<p>With v5.16 the advantage of <code>split</code> was a little lesser (still a factor of 7 though), and the play on context with <code>=()=</code> in regex wasn't any better than assigning to an array and returning <code>scalar</code> of it (in v5.24 it is, by 30-40%, so I left out the case that generates an array variable).</p>\n<p>However, note that prior to v5.12 the <code>split</code> in scalar context had <a href=\"https://stackoverflow.com/a/44189818/4653379\">surprising (nasty) behavior</a>. Given the code in the question it is possible that this ran (runs?) on an older Perl (what doesn't excuse the shown code), in which case please use a regex based alternative instead <code>split</code>.</p>\n<p>Thanks to <a href=\"https://stackoverflow.com/users/1848654/melpomene\">melpomene</a> for comments.</p>\n"}], "owner": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "closed_date": 1556739228, "accepted_answer_id": 55933874, "answer_count": 2, "score": 1, "last_activity_date": 1556736578, "creation_date": 1556691410, "last_edit_date": 1556726938, "question_id": 55932349, "link": "https://stackoverflow.com/questions/55932349/how-to-convert-perl-map-function-to-python", "closed_reason": "Needs more focus", "title": "How to Convert Perl Map function to Python?", "body": "<p>I want to convert a piece of perl code to python but I am not that familiar with perl at all and its syntax.</p>\n\n<p>In particular, I am just confused about the map operator in perl, and the shift operator in the code below.</p>\n\n<pre><code>(@M) = ($y =~ m/((?:\\d+:ITEM7 \\d+:\\d+ )+(?:\\d+:ITEM7A \\d+:\\d+ )*)(?:\\d+:ITEM8 \\d+:\\d+\\s*)+/g);\n\n$best = 0;\n$bestseq = \"\";\nfor($i = 0; $i &lt; scalar(@M); ++$i) {\n  $m = $M[$i];\n  $m =~ s/\\d+://g;\n  (@m) = (split / /, $m);\n  $v = 0;\n  $z = length_in_words($M[$i]);\n  map { $v += $_ if($_ =~ m/^\\d+$/); } @m;\n  if($v &gt; $best) { $best = $v; $bestseq = $M[$i]; }\n}\n\nsub length_in_words {\n  my $x = shift;\n  my @k;\n  return scalar(@k = $x =~ m/(\\S+)/sg);\n}\n</code></pre>\n\n<p>I know that <code>@M</code> assigns an array based on the python <code>re.findall</code>, but I'm just confused about the map function, and the shift operator with how its applied to the <code>@k</code></p>\n\n<p>How do I solve this problem? </p>\n"}, {"tags": ["linux", "perl", "sockets", "tcp", "client-server"], "comments": [{"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "edited": false, "score": 0, "creation_date": 1556690470, "post_id": 55932207, "comment_id": 98517365, "body": "Shall I post client.pl code as well here?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1556692673, "post_id": 55932207, "comment_id": 98517847, "body": "Your code already have a variable <code>$num_clients</code>. Why can&#39;t you use it?"}, {"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556693377, "post_id": 55932207, "comment_id": 98518033, "body": "Ok. How can I get the client ID? I mean the first client connected should be labeled as 1, second as 2 and so on...How can I achieve this?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1556693605, "post_id": 55932207, "comment_id": 98518084, "body": "<i>&quot;How can I get the client ID&quot;</i> Check out the array <code>@clients</code>. The first index, index 0 will correspond to clinet #1, and so on"}], "answers": [{"tags": [], "owner": {"reputation": 856, "user_id": 271502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02ea5817ec9c96cf366a8cea9f3fcf22?s=128&d=identicon&r=PG", "display_name": "beta0x64", "link": "https://stackoverflow.com/users/271502/beta0x64"}, "is_accepted": false, "score": 1, "last_activity_date": 1556725813, "creation_date": 1556725813, "answer_id": 55938972, "question_id": 55932207, "link": "https://stackoverflow.com/questions/55932207/in-perl-socket-programming-how-to-send-a-data-from-client-and-receive-it-from-se/55938972#55938972", "title": "In perl socket programming how to send a data from client and receive it from server and how to get number of clients processes and client ID?", "body": "<p>Pass it to processit() with the rest of the parameters.</p>\n"}], "owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556877281, "creation_date": 1556690278, "last_edit_date": 1556877281, "question_id": 55932207, "link": "https://stackoverflow.com/questions/55932207/in-perl-socket-programming-how-to-send-a-data-from-client-and-receive-it-from-se", "title": "In perl socket programming how to send a data from client and receive it from server and how to get number of clients processes and client ID?", "body": "<p>How can I get the number of clients connected to the server? If say I have opened 4 terminals and ran client.pl 4 times on localhost for testing purposes, how can I get the client ID and client count at server script? I am using Ubuntu on VirtualBox. I am in multi-threaded environment.</p>\n\n<p>'''</p>\n\n<pre><code>#!/usr/bin/perl\n#server\nuse warnings;\nuse strict;\nuse IO::Socket;\nuse threads;\nuse threads::shared;\n$|++;\nprint \"$$ Server started\\n\";;  # do a \"top -p -H $$\" to monitor server threads\n\nour @clients : shared;\n@clients = ();\n\nmy $server = new IO::Socket::INET(\n    Timeout   =&gt; 7200,\n    Proto     =&gt; \"tcp\",\n    LocalPort =&gt; 9000,\n    Reuse     =&gt; 1,\n    Listen    =&gt; 3\n);\nmy $num_of_client = -1;\n\nwhile (1) {\n    my $client;\n\n    do {\n        $client = $server-&gt;accept;\n    } until ( defined($client) );\n\n    my $peerhost = $client-&gt;peerhost();\n    print \"accepted a client $client, $peerhost, id = \", ++$num_of_client, \"\\n\";\n    my $fileno = fileno $client;\n    push (@clients, $fileno);\n    #spawn a thread here for each client\n    my $thr = threads-&gt;new( \\&amp;processit, $client, $fileno, $peerhost )-&gt;detach(); \n}\n# end of main thread\n\nsub processit {\n     my ($lclient,$lfileno,$lpeer) = @_; #local client\n\n     if($lclient-&gt;connected){\n          # Here you can do your stuff\n          # I use have the server talk to the client\n          # via print $client and while(&lt;$lclient&gt;)\n          print $lclient \"$lpeer-&gt;Welcome to server\\n\";  \n\n          while(&lt;$lclient&gt;){\n             # print $lclient \"$lpeer-&gt;$_\\n\";\n              print \"clients-&gt; @clients\\n\";           \n\n              foreach my $fn (@clients) { \n                  open my $fh, \"&gt;&amp;=$fn\" or warn $! and die;\n                  print $fh  \"$_\"  \n                  }\n\n           }\n\n    }\n\n  #close filehandle before detached thread dies out\n  close( $lclient);\n  #remove multi-echo-clients from echo list\n  @clients = grep {$_ !~ $lfileno} @clients;\n\n}\n__END__\n</code></pre>\n\n<p>'''</p>\n"}, {"tags": ["perl", "testing", "integration-testing", "die"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 2, "creation_date": 1556655455, "post_id": 55927880, "comment_id": 98509853, "body": "Related: <a href=\"https://stackoverflow.com/q/1361518/2404501\">stackoverflow.com/q/1361518/2404501</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1556658915, "post_id": 55927880, "comment_id": 98511095, "body": "And along the same lines but simpler: <a href=\"https://en.wikipedia.org/wiki/%2Fdev%2Ffull\" rel=\"nofollow noreferrer\"><code>&#47;dev&#47;full</code></a> - it&#39;s like <code>&#47;dev&#47;null</code> for reading, but always fails when writing."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1556656239, "creation_date": 1556656239, "answer_id": 55928273, "question_id": 55927880, "link": "https://stackoverflow.com/questions/55927880/what-is-the-easiest-way-to-test-error-handling-when-writing-to-a-file-in-perl/55928273#55928273", "title": "What is the easiest way to test error handling when writing to a file in Perl?", "body": "<p>Working with a bad filehandle will make them both fail</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift || die \"Usage: $0 out-filename\\n\";\n\nopen my $fh, '&gt;', $file  or die \"Can't open $file: $!\";\n\n$fh = \\*10;\n\nsay $fh 'writes ok, ', scalar(localtime)  or warn \"Can't write: $!\";\n\nclose $fh or warn \"Error closing: $!\";\n</code></pre>\n\n<p>Prints </p>\n\n<pre>\nsay() on unopened filehandle 10 at ...\nCan't write: Bad file descriptor at ...\nclose() on unopened filehandle 10 at ...\nError closing: Bad file descriptor at ...\n</pre>\n\n<p>If you don't want to see perl's warnings capture them with <code>$SIG{__WARN__}</code> and print your messages to a file (or <code>STDOUT</code>), for example.</p>\n"}, {"comments": [{"owner": {"reputation": 119287, "user_id": 119280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7efd5c795e9797c30fce4126daaa9c0?s=128&d=identicon&r=PG&f=1", "display_name": "DVK", "link": "https://stackoverflow.com/users/119280/dvk"}, "edited": false, "score": 0, "creation_date": 1556668063, "post_id": 55928607, "comment_id": 98513370, "body": "I like this answer technically; but it does not solve the problem of how to test a <b>good, correct</b> code that I have in a working program, which doesn&#39;t do either of those two things :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1582308012, "post_id": 55928607, "comment_id": 106745786, "body": "I think the idea is to <i>add this</i> to a &quot;good, correct&quot; code, as a test"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1556658118, "creation_date": 1556658118, "answer_id": 55928607, "question_id": 55927880, "link": "https://stackoverflow.com/questions/55927880/what-is-the-easiest-way-to-test-error-handling-when-writing-to-a-file-in-perl/55928607#55928607", "title": "What is the easiest way to test error handling when writing to a file in Perl?", "body": "<p>Riffing on zdim's answer ...</p>\n\n<p>Write to a file handle opened for reading.</p>\n\n<p>Close a file handle that has already been closed.</p>\n"}], "owner": {"reputation": 119287, "user_id": 119280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7efd5c795e9797c30fce4126daaa9c0?s=128&d=identicon&r=PG&f=1", "display_name": "DVK", "link": "https://stackoverflow.com/users/119280/dvk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 55928273, "answer_count": 2, "score": 3, "last_activity_date": 1556658118, "creation_date": 1556654161, "question_id": 55927880, "link": "https://stackoverflow.com/questions/55927880/what-is-the-easiest-way-to-test-error-handling-when-writing-to-a-file-in-perl", "title": "What is the easiest way to test error handling when writing to a file in Perl?", "body": "<p>I have a bog standard Perl file writing code with (hopefully) adequate error handling, of the type:</p>\n\n<pre><code>open(my $fh, \"&gt;\", \"$filename\") or die \"Could not open file $filname for writing: $!\\n\";\n# Some code to get data to write\nprint $fh $data  or die \"Could not write to file $filname: $!\\n\";\nclose $fh  or die \"Could not close file $filname afterwriting: $!\\n\";\n# No I can't use File::Slurp, sorry.\n</code></pre>\n\n<p>(I just wrote this code from memory, pardon any typos or bugs)</p>\n\n<p>It is somewhat easy to test error handling in the first \"die\" line (for example, create a non-writable file with the same name you plan to write).</p>\n\n<h1>How can I test error handling in the second (print) and third (close) \"die\" lines?</h1>\n\n<p>The only way I know of to induce error when closing is to run out of space on filesystem while writing, which is NOT easy to do as a test.</p>\n\n<p>I would prefer integration test type solutions rather than unit test type (which would involve mocking IO methods in Perl).</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 3, "creation_date": 1556645364, "post_id": 55925858, "comment_id": 98505637, "body": "Being a new SO user, I&#39;ll suggest you to please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a> and specifically <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> so it helps others and in turn they can help you back, else your post may be downvoted (although I didn&#39;t downvote your post) and closed."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1556694924, "post_id": 55925858, "comment_id": 98518405, "body": "You are expected to show your attempt at solving this, please show the code you are having trouble with."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1556691689, "last_edit_date": 1556691689, "creation_date": 1556648947, "answer_id": 55926822, "question_id": 55925858, "link": "https://stackoverflow.com/questions/55925858/regex-for-matching-and-extracting-ul-dl-speeds-into-variables/55926822#55926822", "title": "RegEx for matching and extracting UL &amp; DL speeds into variables", "body": "<p>I'm not sure if this would be the correct direction. However, <a href=\"https://regex101.com/r/hMe9yz/1\" rel=\"nofollow noreferrer\">this RegEx</a> might help you to match your UL and DL variables. </p>\n\n<pre><code>(UL:\\s|DL:\\s)([0-9\\.]+)(\\sKiB\\/s|\\sMiB\\/s)\n</code></pre>\n\n<p>It has three capturing groups:</p>\n\n<ul>\n<li>The right one is where your units go, and you can simply add more with an <kbd>|</kbd>.</li>\n<li>The left boundary is similar to the right one.</li>\n<li>In the middle group, only numbers and <kbd>.</kbd> is allowed, without spaces.</li>\n</ul>\n\n<p>You can also reduce boundaries and much simplify this RegEx, if you wish. </p>\n\n<p>You may make sure, if there are other Perl-required checks to follow through. </p>\n\n<p><a href=\"https://i.stack.imgur.com/eGYvp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eGYvp.png\" alt=\"enter image description here\"></a></p>\n\n<p>In case, you had more spaces in between your float numbers and the units, you might work on this <a href=\"https://regex101.com/r/a5OKiX/1\" rel=\"nofollow noreferrer\">RegEx</a>:</p>\n\n<pre><code>(UL:\\s+|DL:|\\s+)([0-9\\.]+)(\\s+KiB\\/s|\\s+MiB\\/s)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/buqT6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/buqT6.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you wish to get the three variables, you might add one matching set for <code>UL</code> and <code>DL</code>, and another set for <code>ETA</code>, maybe similar to <a href=\"https://regex101.com/r/tmTKWw/1\" rel=\"nofollow noreferrer\">this RegEx</a></p>\n\n<pre><code>((UL:\\s+|DL:\\s+)([0-9\\.]+)(\\s+KiB\\/s|\\s+MiB\\/s))|((ETA:\\s+)([0-9hms]+\\s[0-9hms]+))\n</code></pre>\n\n<p>I have added several boundaries, since I'm not really sure, how your possible inputs may look like. You can much simplify, if you wish so. </p>\n\n<p><a href=\"https://i.stack.imgur.com/TpPKN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TpPKN.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 53, "user_id": 11433859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2237cb2bc506f36181939fcd44317c00?s=128&d=identicon&r=PG&f=1", "display_name": "Werdle Sneng", "link": "https://stackoverflow.com/users/11433859/werdle-sneng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556691689, "creation_date": 1556644512, "last_edit_date": 1556650325, "question_id": 55925858, "link": "https://stackoverflow.com/questions/55925858/regex-for-matching-and-extracting-ul-dl-speeds-into-variables", "title": "RegEx for matching and extracting UL &amp; DL speeds into variables", "body": "<p>I'm trying to monitor file transfers. Output is:</p>\n\n<pre><code>Status: Uploading UL: 0.0 KiB/s\n\nStatus: Paused\n\nStatus: Downloading DL: 358.9 KiB/s ETA: 1h 27m\n\nStatus: Stopped\n\nStatus: Uploading UL: 25.8 MiB/s ETA: 25m 30s\n</code></pre>\n\n<p>I'd like to use a perl regex to pull these into <code>$dl_speed</code>, <code>$ul_speed</code> and <code>$eta</code>. </p>\n\n<p>Can you send me on the right way?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1556624256, "post_id": 55918691, "comment_id": 98493925, "body": "You can try put an <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a> block around the <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\"><code>decode()</code></a> call. In this way you can catch the exception"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556653149, "post_id": 55920202, "comment_id": 98508916, "body": "Why would you use two decodes? (And it would be cleaner to use <code>my $data = eval { $j-&gt;decode($_) } or next;</code>) Also, you should probably output which files are failing."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1556625913, "last_edit_date": 1556625913, "creation_date": 1556624595, "answer_id": 55920202, "question_id": 55918691, "link": "https://stackoverflow.com/questions/55918691/how-ignore-malformed-json-string-in-perl/55920202#55920202", "title": "How ignore malformed JSON string in Perl", "body": "<p>Try use <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a> to catch exception from <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\"><code>decode()</code></a> :</p>\n\n<pre><code>perl -MJSON::XS -CS -0777ne'\n   BEGIN { $j = JSON::XS-&gt;new-&gt;relaxed(1) }\n   s/^\\(//;  s/\\)\\z//;\n   eval { $j-&gt;decode($_) };\n   next if $@;\n   CORE::say\n      join \",\",\n         map { join \":\", $_-&gt;{company}, $_-&gt;{time} }\n            @{ $j-&gt;decode($_)-&gt;{Companies} }\n' *.json\n</code></pre>\n\n<p>NOTE: If the files are large you can save time (by not decoding the file twice) by storing the decoded variable in the eval block: <code>eval { $data = $j-&gt;decode($_) }</code> and later use <code>$data-&gt;{Companies}</code></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1556653047, "last_edit_date": 1556653047, "creation_date": 1556652742, "answer_id": 55927596, "question_id": 55918691, "link": "https://stackoverflow.com/questions/55918691/how-ignore-malformed-json-string-in-perl/55927596#55927596", "title": "How ignore malformed JSON string in Perl", "body": "<p>End of string at position 0 means you passed an empty string (or undef?). Simply check if the file (<code>$_</code>) is empty and skip that file.</p>\n\n<pre><code>perl -MJSON::XS -CS -0777ne'\n   BEGIN { $j = JSON::XS-&gt;new-&gt;relaxed(1) }\n   s/^\\(//;  s/\\)\\z//;\n   if (!length($_)) {\n      warn(\"Skipping $ARGV: Empty.\\n\");\n      next;\n   }\n\n   CORE::say\n      join \",\",\n         map { join \":\", $_-&gt;{company}, $_-&gt;{time} }\n            @{ $j-&gt;decode($_)-&gt;{Companies} };\n' *.json\n</code></pre>\n\n<p>You could take it a step further and skips all files that produce any kind of error (allowing you to fix them or process them manually):</p>\n\n<pre><code>perl -MJSON::XS -CS -0777ne'\n   BEGIN { $j = JSON::XS-&gt;new-&gt;relaxed(1) }\n   s/^\\(//;  s/\\)\\z//;\n   if (!length($_)) {\n      warn(\"Skipping $ARGV: Empty.\\n\");\n      next;\n   }\n\n   my $data = eval { $j-&gt;decode($_) };\n   if (!$data) {\n      warn(\"Skipping $ARGV: $@\");\n      next;\n   }\n\n   CORE::say\n      join \",\",\n         map { join \":\", $_-&gt;{company}, $_-&gt;{time} }\n            @{ $data-&gt;{Companies} };\n' *.json\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556653047, "creation_date": 1556619065, "question_id": 55918691, "link": "https://stackoverflow.com/questions/55918691/how-ignore-malformed-json-string-in-perl", "title": "How ignore malformed JSON string in Perl", "body": "<p><br>I have +1000 json files in my folder and when i try to parse data from this +1000 files i get this error after +100 parsing :</p>\n\n<pre><code>malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before \"(end of string)\") at -e line 1.\n</code></pre>\n\n<p>Please how can ignore this error let command parsing all files.\n<br>\nMy command :</p>\n\n<pre><code>perl -MJSON::XS -CS -0777ne'\n   BEGIN { $j = JSON::XS-&gt;new-&gt;relaxed(1) }\n   s/^\\(//;  s/\\)\\z//;\n   CORE::say\n      join \",\",\n         map { join \":\", $_-&gt;{company}, $_-&gt;{time} }\n            @{ $j-&gt;decode($_)-&gt;{Companies} }\n' *.json\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1556636554, "post_id": 55917909, "comment_id": 98501121, "body": "without knowing that dclone is a function, perl parses the code as an indirect object call of a method dclone on a class or object <code>$config-&gt;{Record1}</code>, as if it were <code>$config-&gt;{Record1}-&gt;dclone</code>.  with parens added (<code>dclone($config-&gt;{Record1})</code>), it instead will give a more helpful &quot;Undefined subroutine &amp;main::dclone called&quot; error."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1556616633, "creation_date": 1556616633, "answer_id": 55917909, "question_id": 55917836, "link": "https://stackoverflow.com/questions/55917836/cant-call-method-dclone-on-unblessed-reference/55917909#55917909", "title": "Can&#39;t call method &quot;dclone&quot; on unblessed reference", "body": "<p><code>dclone</code> is not a core function in Perl nor is it provided by the modules you've imported. It is provided by <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a> though. You are likely missing</p>\n\n<pre><code>use Storable 'dclone';\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 805707, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d151d1b9f7299b8502ca7150601ab1fd?s=128&d=identicon&r=PG", "display_name": "Karun", "link": "https://stackoverflow.com/users/805707/karun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 55917909, "answer_count": 1, "score": 0, "last_activity_date": 1556619837, "creation_date": 1556616375, "last_edit_date": 1556619837, "question_id": 55917836, "link": "https://stackoverflow.com/questions/55917836/cant-call-method-dclone-on-unblessed-reference", "title": "Can&#39;t call method &quot;dclone&quot; on unblessed reference", "body": "<p>I am getting the following error.</p>\n\n<pre><code>\"Can't call method \"dclone\" on unblessed reference\"\n</code></pre>\n\n<p>What is meant by \"<strong>unblessed reference</strong>\" and how to correct the same. Please refer the below code.<br><br><strong>Code</strong><br></p>\n\n<pre><code>use strict;                                                                        \nuse warnings;                                                                      \nuse YAML::XS 'LoadFile';                                                           \nuse Data::Dumper;                                                                  \n\nmy $config = LoadFile('config.yml');                                               \nmy $record1 = $config-&gt;{Record1};                                                  \nprint \"record1: $record1\\n\";                                                       \nprint Dumper($config);                                                             \n\n$config-&gt;{Record2} =  dclone $config-&gt;{Record1};                                   \nprint Dumper($config);\n</code></pre>\n\n<p><strong>Following is the output</strong></p>\n\n<pre><code>record1: ARRAY(0x275fa88)\n$VAR1 = {\n          'Record1' =&gt; [\n                         {\n                           'Name' =&gt; 'Karun'\n                         },\n                         {\n                           'Phone' =&gt; 123\n                         }\n                       ]\n        };\nCan't call method \"dclone\" on unblessed reference at p1.pl line 11.\n</code></pre>\n"}, {"tags": ["perl", "symlink-traversal"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556588761, "post_id": 55912436, "comment_id": 98480333, "body": "<code>Cwd::abs_path</code> and <code>Cwd::realpath</code> are the same sub."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556645462, "post_id": 55912811, "comment_id": 98505672, "body": "Still I get: <code>&#47;tmp&#47;perl_script_test&#47;test&#47;..&#47;dir2&#47;link2</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556650736, "post_id": 55912811, "comment_id": 98507979, "body": "That is what you asked for. Are you complaining that it doesn&#39;t produce <code>&#47;tmp&#47;perl_script_test&#47;dir2&#47;link2</code>? There&#39;s no way to know that without performing file system tests because <code>&#47;tmp&#47;perl_script_test&#47;test</code> could be a symlink, and you specifically asked not to resolve any other symlinks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556655107, "post_id": 55912811, "comment_id": 98509703, "body": "You&#39;re two criteria (resolving <code>..</code> and not resolving symlinks) are incompatible."}, {"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556655195, "post_id": 55912811, "comment_id": 98509737, "body": "My code was already giving <code>&#47;tmp&#47;perl_script_test&#47;test&#47;..&#47;dir1&#47;..&#47;dir2&#47;link2</code>. I am looking for absolute path without <code>..&#47;</code>. Sorry deleted by mistake."}, {"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556655267, "post_id": 55912811, "comment_id": 98509771, "body": "Also your code does not work if I execute the script from <code>&#47;tmp&#47;perl_script_test&#47;</code> or <code>&#47;tmp</code>. Yes I am looking for absolute path of symlink&#39;s immediate target without <code>..&#47;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556656091, "post_id": 55912811, "comment_id": 98510083, "body": "Fixed the problem identified in the last comment. Could continue to use File::Spec::Functions, but Path::Tiny is a wrapper for File::Spec::Functions that&#39;s easier to use."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1556657427, "post_id": 55912811, "comment_id": 98510593, "body": "Added to answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1556683434, "last_edit_date": 1556683434, "creation_date": 1556587894, "answer_id": 55912811, "question_id": 55912436, "link": "https://stackoverflow.com/questions/55912436/perl-symlink-immediate-target/55912811#55912811", "title": "perl symlink immediate target", "body": "<p>File::Path's <code>absolute</code> doesn't do any file system checks.</p>\n\n<pre><code>use File::Path qw( file );\n\nmy $link_qfn = file(...);\n\nmy $link_dir_qfn = $link_qfn-&gt;dir;\nmy $target_qfn   = $link_dir_qfn-&gt;file(readlink($link_qfn));\nmy $target_fqfn  = $target_qfn-&gt;absolute;\n\nsay $target_fqfn;\n</code></pre>\n\n<p>Say the CWD is <code>/tmp/perl_script_test/test</code></p>\n\n<pre><code>$link_qfn     ../dir1/link1\n$link_dir_qfn ../dir1\n$target_qfn   ../dir1/../dir2/link2\n$target_fqfn  /tmp/perl_script_test/test/../dir1/../dir2/link2\n</code></pre>\n\n<p>Say the CWD is <code>/tmp/perl_script_test</code></p>\n\n<pre><code>$link_qfn     dir1/link1\n$link_dir_qfn dir1\n$target_qfn   dir1/../dir2/link2\n$target_fqfn  /tmp/perl_script_test/dir1/../dir2/link2\n</code></pre>\n\n<hr>\n\n<p>You've added to the following to your question:</p>\n\n<blockquote>\n  <p>I am looking for absolute path of symlink's immediate target without ../</p>\n</blockquote>\n\n<p>You can't safely do that without possibly resolving symlinks. For example,</p>\n\n<pre><code>/tmp/perl_script_test/dir1/../dir2/link2\n</code></pre>\n\n<p>is not necessarily equivalent to </p>\n\n<pre><code>/tmp/perl_script_test/dir2/link2\n</code></pre>\n\n<p>because</p>\n\n<pre><code>/tmp/perl_script_test/dir1 \n</code></pre>\n\n<p>could be a symlink.</p>\n\n<hr>\n\n<p>The following might be sufficient for you:</p>\n\n<pre><code>use Cwd        qw( real_path );\nuse File::Path qw( dir file );\n\nmy $link_qfn = file(...);\n\nmy $link_dir_qfn    = $link_qfn-&gt;dir;\nmy $target_qfn      = $link_dir_qfn-&gt;file(readlink($link_qfn));\nmy $target_fn       = $target_qfn-&gt;basename;\nmy $target_dir_qfn  = $target_qfn-&gt;dir;\nmy $target_dir_fqfn = dir(real_path($target_dir_qfn));\nmy $target_fqfn     = $target_dir_fqfn-&gt;file($target_fn);\n\nsay $target_fqfn;\n</code></pre>\n\n<p>Say the CWD is <code>/tmp/perl_script_test/test</code></p>\n\n<pre><code>$link_qfn        ../dir1/link1\n$link_dir_qfn    ../dir1\n$target_qfn      ../dir1/../dir2/link2\n$target_fn       link2\n$target_dir_qfn  ../dir1/../dir2\n$target_dir_fqfn /tmp/perl_script_test/dir2\n$target_fqfn     /tmp/perl_script_test/dir2/link2\n</code></pre>\n\n<p>You will only get the above output if none of the following are symlinks:</p>\n\n<pre><code>/tmp\n/tmp/perl_script_test\n/tmp/perl_script_test/test\n/tmp/perl_script_test/dir1\n/tmp/perl_script_test/dir2\n</code></pre>\n\n<p>(You could make it work even if the first two are symlinks, but that would take even more work.)</p>\n"}], "owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556683434, "creation_date": 1556584402, "last_edit_date": 1556655461, "question_id": 55912436, "link": "https://stackoverflow.com/questions/55912436/perl-symlink-immediate-target", "title": "perl symlink immediate target", "body": "<p>I am looking for simple &amp; proper way to obtain <strong>absolute path of symlink's immediate target</strong> (not final target), in <strong><em>perl</em></strong>.</p>\n\n<p>My Example Tree:</p>\n\n<pre><code>|-- dir1\n|   |-- link1 -&gt; ../dir2/link2\n|-- dir2\n|   `-- link2 -&gt; ../dir3/file.txt\n|-- dir3\n|   `-- file.txt\n`-- test\n    `-- script.pl\n</code></pre>\n\n<p>Code1:</p>\n\n<pre><code>my $link = dirname($ARGV[0]).'/'.readlink($ARGV[0]); \nprint rel2abs($link), \"\\n\";\n</code></pre>\n\n<p>Cmd: <code>./script.pl ../dir1/link1</code></p>\n\n<p>Result: <code>/tmp/perl_script_test/test/../dir1/../dir2/link2</code></p>\n\n<p>Expected: <code>/tmp/perl_script_test/dir2/link2</code></p>\n\n<p><strong>I am looking for absolute path of symlink's immediate target without <code>../</code></strong></p>\n\n<p>I tried <code>abs_path()</code>, <code>realpath()</code> but they all give path to final target (<code>file.txt</code>)</p>\n\n<p>Is there any build-in function that does what I want to do I need to split the path and do manual concatenation ?</p>\n\n<p>--</p>\n\n<p>Mohan G </p>\n"}, {"tags": ["regex", "loops", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1556610362, "last_edit_date": 1556610362, "creation_date": 1556575767, "answer_id": 55911451, "question_id": 55911324, "link": "https://stackoverflow.com/questions/55911324/read-all-the-lines-between-a-pattern-match-using-perl/55911451#55911451", "title": "Read all the lines between a pattern match using Perl", "body": "<p>You can use the flip-flop operator. It's value will be 1 for the #start line and will contain E for the #stop line.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @arr;\n\nwhile (&lt;&gt;) {\n    chomp;\n    my $inside = /^#start_loop/ .. /^#stop_loop/;\n    if ($inside) {\n        push @arr, [] if 1 == $inside;\n        undef $inside if 1 == $inside\n                      || $inside =~ /E/;\n        push @{ $arr[-1] }, $_ if $inside;\n    }\n}\n\nuse Data::Dumper; print Dumper \\@arr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1556597358, "creation_date": 1556597358, "answer_id": 55913848, "question_id": 55911324, "link": "https://stackoverflow.com/questions/55911324/read-all-the-lines-between-a-pattern-match-using-perl/55913848#55913848", "title": "Read all the lines between a pattern match using Perl", "body": "<p>Simplified version of choroba's solution:</p>\n\n<pre><code>my @arr;\nwhile (&lt;&gt;) {\n    chomp;\n    my $inside = /^#start_loop/ .. /^#stop_loop/;\n    if    ( $inside == 1   ) { push @arr, [];          }  # Start line\n    elsif ( $inside !~ /E/ ) { push @{ $arr[-1] }, $_; }  # Middle line\n}\n</code></pre>\n\n<p>Without the flip-flop:</p>\n\n<pre><code>my @arr;\nmy $inside;\nwhile (&lt;&gt;) {\n    chomp;\n    if    ( /^#start_loop/ ) { $inside = 1; push @arr, []; }  # Start line\n    elsif ( /^#stop_loop/  ) { $inside = 0;                }  # Stop line\n    elsif ( $inside        ) { push @{ $arr[-1] }, $_;     }  # Middle line\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 10781549, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991393544231190/picture?type=large", "display_name": "Jigar Vaidya", "link": "https://stackoverflow.com/users/10781549/jigar-vaidya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1556610362, "creation_date": 1556575002, "last_edit_date": 1556600750, "question_id": 55911324, "link": "https://stackoverflow.com/questions/55911324/read-all-the-lines-between-a-pattern-match-using-perl", "title": "Read all the lines between a pattern match using Perl", "body": "<p>I want to read a csv file. The csv files is like below,</p>\n\n<pre><code>cat,dog,0\napple,banana,0\n#start_loop\njug,ball,0\ntub, jar,3\n#stop_loop\nphone,bottle,10\n#per head\n#start_loop\ncup,book,7\nlaptop,charger,9\n#stop_loop\n</code></pre>\n\n<p>For above csv, I want to read between the #start and #stop. Also, I want to differentiate two #start_loop 's for ex, the lines from first #start_loop goes to one array and another #start_loop goes to another array.</p>\n\n<p>The expected result would be: </p>\n\n<pre><code>@array1 = {jug ball 0, tub jar 3}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@array2 = { cup book 7, laptop charger 9}\n</code></pre>\n\n<p>How do I solve this problem? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556561865, "post_id": 55908645, "comment_id": 98472878, "body": "Tip: If you&#39;re dealing with dates (not times), then use <code>time_zone =&gt; &#39;floating&#39;</code>. Using the local time zone could give you <a href=\"https://stackoverflow.com/questions/18489927/a-day-without-midnight\">problems</a>."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1556561653, "creation_date": 1556561653, "answer_id": 55908762, "question_id": 55908645, "link": "https://stackoverflow.com/questions/55908645/sort-dates-using-datetime-compare/55908762#55908762", "title": "Sort dates using DateTime-&gt;compare()", "body": "<p><code>%D</code> is equivalent to <code>%m/%d/%y</code>, where <code>%y</code> is a 2-digit year. You want to use the format<code>%m/%d/%Y</code> to support a four digit year. With <code>%D</code> (and <code>%m/%d/%y</code>), all of your input is interpreted as having the year 2020.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1556736583, "last_edit_date": 1556736583, "creation_date": 1556562914, "answer_id": 55909038, "question_id": 55908645, "link": "https://stackoverflow.com/questions/55908645/sort-dates-using-datetime-compare/55909038#55909038", "title": "Sort dates using DateTime-&gt;compare()", "body": "<p>[ <em>This is a comment rather than an answer</em> ]</p>\n\n<p>Using DateTime is overkill here.</p>\n\n<pre><code>sub date_sort {\n    my ( $date1, $date2 ) = @_;\n    $date1 = sprintf '%3$s%1$02s%2$02s', split /\\//, $date1;\n    $date2 = sprintf '%3$s%1$02s%2$02s', split /\\//, $date2;\n    return $date1 cmp $date2;\n}\n\nmy @res = sort { date_sort( $a-&gt;[1], $b-&gt;[1] ) } @dates;\n</code></pre>\n\n<p>Better yet,</p>\n\n<pre><code>use Sort::Key qw( ikeysort );\n\nsub date_key {\n    my ( $date ) = @_;\n    return sprintf '%3$s%1$02s%2$02s', split /\\//, $date;\n}\n\nmy @res = ikeysort { date_key( $_-&gt;[1] ) } @dates;\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 55908762, "answer_count": 2, "score": 1, "last_activity_date": 1556736583, "creation_date": 1556561150, "question_id": 55908645, "link": "https://stackoverflow.com/questions/55908645/sort-dates-using-datetime-compare", "title": "Sort dates using DateTime-&gt;compare()", "body": "<p>I am trying to sort an array of dates chronologically using <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\"><code>DateTime</code></a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Printer;\nuse Date::Time;\nuse DateTime::Format::Strptime;\n\nmy $strp = DateTime::Format::Strptime-&gt;new(\n    pattern   =&gt; '%D',\n    time_zone =&gt; 'America/New_York',\n);\n my @dates = (\n    [1, '5/18/2011'],\n    [2, '6/18/2011'],\n    [3, '6/18/2014'],\n    [4, '6/18/2010'],\n);\n\nmy @res = sort { date_sort( $a-&gt;[1], $b-&gt;[1], $strp ) } @dates;\n\np \\@res;\n\nsub date_sort {\n    my ( $date1, $date2, $strp ) = @_;\n\n    my $dt1 = $strp-&gt;parse_datetime($date1);\n    my $dt2 = $strp-&gt;parse_datetime($date2);\n    return DateTime-&gt;compare($dt1, $dt2);\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>[\n    [0] [\n        [0] 1,\n        [1] \"5/18/2011\"\n    ],\n    [1] [\n        [0] 2,\n        [1] \"6/18/2011\"\n    ],\n    [2] [\n        [0] 3,\n        [1] \"6/18/2014\"\n    ],\n    [3] [\n        [0] 4,\n        [1] \"6/18/2010\"\n    ]\n]\n</code></pre>\n\n<p><strong>Expected output</strong>:</p>\n\n<pre><code>[\n    [0] [\n        [0] 4,\n        [1] \"6/18/2010\"\n    ],\n    [1] [\n        [0] 1,\n        [1] \"5/18/2011\"\n    ],\n    [2] [\n        [0] 2,\n        [1] \"6/18/2011\"\n    ],\n    [3] [\n        [0] 3,\n        [1] \"6/18/2014\"\n    ]\n]\n</code></pre>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556563388, "post_id": 55908523, "comment_id": 98473554, "body": "Judged by <code>ref($value-&gt;{$key})</code> you call this function with two scalars (<code>fun($s1, $s2)</code>), the first one being a hash <i>reference</i> and the second a key in that hashref. I don&#39;t see how the function&#39;s returns make sense though"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1556566194, "creation_date": 1556566194, "answer_id": 55909690, "question_id": 55908523, "link": "https://stackoverflow.com/questions/55908523/can-someone-explain-how-this-reference-function-work-with-this-perl-subroutine/55909690#55909690", "title": "can someone explain how this reference function work with this perl subroutine?", "body": "<p>The first argument is expected to be a reference to a hash.</p>\n\n<p>The second argument is the key of an element of the referenced hash.</p>\n\n<p>If the element's value is a reference to an array, that reference is returned.</p>\n\n<pre><code>my @a = ...;\nmy %h = { key =&gt; \\@a };\nList(\\%h, 'key')   # Returns \\@a\n</code></pre>\n\n<p>If the element's value is a reference to an hash, a reference to an array containing that hash reference is returned.</p>\n\n<pre><code>my %inner = ...;\nmy %h = { key =&gt; \\%inner };\nList(\\%h, 'key')   # Returns [ \\%inner ]\n</code></pre>\n\n<p>Otherwise, returns a reference to an empty hash</p>\n\n<pre><code>my %h = { };\nList(\\%h, 'key')   # Returns []\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11428360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4da0b2280e8c3d7221a94ae5ec2300?s=128&d=identicon&r=PG&f=1", "display_name": "muku", "link": "https://stackoverflow.com/users/11428360/muku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55909690, "answer_count": 1, "score": 0, "last_activity_date": 1556566194, "creation_date": 1556560464, "last_edit_date": 1556560793, "question_id": 55908523, "link": "https://stackoverflow.com/questions/55908523/can-someone-explain-how-this-reference-function-work-with-this-perl-subroutine", "title": "can someone explain how this reference function work with this perl subroutine?", "body": "<p>this is the sub routine which i could not understand , i tried to pass some array and hash as argument but could not figure it out</p>\n\n<pre><code>sub List {\n\n        my $value = shift;\n        my $key = shift; \n\n     if (ref($value-&gt;{$key}) eq ARRAY) {\n\n        $value-&gt;{$key}\n     }\n     elsif (ref($value-&gt;{$key}) eq HASH) {\n        [$value-&gt;{$key}]\n     }\n     else { [\n     ]\n     }\n    }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1556560171, "post_id": 55908129, "comment_id": 98472120, "body": "Two <i>my data is almost but not quite JSON</i> questions from two different people in a row? Weird. This one&#39;s not quite as easy to turn into actual JSON though."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556566212, "post_id": 55908129, "comment_id": 98474661, "body": "That&#39;s not JSON. You can&#39;t have <code>(</code> <code>)</code> in a JSON file."}, {"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556566353, "post_id": 55908129, "comment_id": 98474709, "body": "yes its json files :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556566807, "post_id": 55908129, "comment_id": 98474835, "body": "Either what you posted here does not match your actual files, or your files are not JSON. Which is it?"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1556568153, "post_id": 55908129, "comment_id": 98475378, "body": "Please don&#39;t try to parse JSON yourself.  You have existing tools to take care of it for you.  See the JSON module on CPAN."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556564082, "post_id": 55908570, "comment_id": 98473845, "body": "Yes my file is JSON format, i have +1000 json file in one folder, i want get my desired output from all my json files."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556564461, "post_id": 55908570, "comment_id": 98473990, "body": "@DavidBoe Then provide a sample of one of your raw JSON files."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1556560752, "creation_date": 1556560752, "answer_id": 55908570, "question_id": 55908129, "link": "https://stackoverflow.com/questions/55908129/how-to-get-matches-sequentially-using-perl/55908570#55908570", "title": "How to get matches sequentially using perl", "body": "<p>One way:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse List::Util qw/pairs/;\n\nmy $str = q/\"company\": \"COMPANY_1\",\"time\": \"20DAYS\",\"company\": \"COMPANY_2\",\"time\": \"1DAY\",/;\n\nmy @pairs = $str =~ m/\"company\" \\s* : \\s* \"([^\"]+)\" \\s* ,\n                      \"time\" \\s* : \\s* \"([^\"]+)\"/gx;\nmy @output;\nfor my $pair (pairs @pairs) {\n    push @output, join(':', @$pair);\n}\nsay join(',', @output);\n</code></pre>\n\n<p>If your original data is actually JSON that you're stripping out the <code>{}</code> and <code>[]</code>'s from for some reason, though. it's better to stick with the original data and use <code>JSON::XS</code> or whatever to parse it instead of using regular expressions.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556567198, "post_id": 55909843, "comment_id": 98474993, "body": "The sample input contains <code>},]</code>, which is also not valid in JSON."}, {"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556567602, "post_id": 55909843, "comment_id": 98475142, "body": "i get this error : BEGIN failed--compilation aborted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556567733, "post_id": 55909843, "comment_id": 98475209, "body": "@melpomene, Fixed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556567802, "post_id": 55909843, "comment_id": 98475233, "body": "@DavidBoe, That means an earlier error prevents the program from continuing. Did you perhaps get an error saying you don&#39;t have JSON::XS installed?"}, {"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556567873, "post_id": 55909843, "comment_id": 98475258, "body": "@ikegami same error again : BEGIN failed--compilation aborted."}, {"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556568019, "post_id": 55909843, "comment_id": 98475306, "body": "full error : Can&#39;t locate JSON/XS.pm in @INC (you may need to install the JSON::XS module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.22.1 /usr/local/share/perl/5.22.1 /usr/lib/x86_64-linux-gnu/perl5/5.22 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.22 /usr/share/perl/5.22 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base .). BEGIN failed--compilation aborted."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556568100, "post_id": 55909843, "comment_id": 98475348, "body": "Relevant part of the error message: <b>you may need to install the JSON::XS module</b>. Alternatively, use <code>JSON::PP</code> instead of <code>JSON::XS</code>, which is a core module."}, {"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556574730, "post_id": 55909843, "comment_id": 98477596, "body": "@ikegami please how include id of filename as prefix in outputs, my falenames like this :  <code>file.json?a=a&amp;b=b&amp;c=c&amp;d=123456</code> desired output <code>123456:COMPANY_1:20DAYS,COMPANY_2:1DAY</code>"}, {"owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "edited": false, "score": 0, "creation_date": 1556617856, "post_id": 55909843, "comment_id": 98490628, "body": "@ikegami please how ignore this warning message : <b>malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before &quot;(end of string)&quot;) at -e line 1.</b>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556650632, "post_id": 55909843, "comment_id": 98507929, "body": "<code>join &quot;:&quot;, $prefix, $_-&gt;{company}, $_-&gt;{time}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556650673, "post_id": 55909843, "comment_id": 98507953, "body": "End of string at position 0 means you passed an empty string (or undef?) to <code>-&gt;decode</code>, which isn&#39;t valid JSON."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1556567713, "last_edit_date": 1556567713, "creation_date": 1556567020, "answer_id": 55909843, "question_id": 55908129, "link": "https://stackoverflow.com/questions/55908129/how-to-get-matches-sequentially-using-perl/55909843#55909843", "title": "How to get matches sequentially using perl", "body": "<p>Why bother trying to write your own JSON parser when such things already exist?</p>\n\n<p>Note that what you have isn't JSON &mdash;you have extra parens around the whole and an extra comma at the end of lists&mdash; but we can compensate for those.</p>\n\n<pre><code>perl -MJSON::XS -CS -0777ne'\n   BEGIN { $j = JSON::XS-&gt;new-&gt;relaxed(1) }\n   s/^\\(//;  s/\\)\\z//;\n   CORE::say\n      join \",\",\n         map { join \":\", $_-&gt;{company}, $_-&gt;{time} }\n            @{ $j-&gt;decode($_)-&gt;{Companies} }\n' *.json\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11420222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba777fe134ebb4b3f63ee3afa1675a?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBoe", "link": "https://stackoverflow.com/users/11420222/davidboe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55909843, "answer_count": 2, "score": -1, "last_activity_date": 1556567713, "creation_date": 1556558545, "last_edit_date": 1556565620, "question_id": 55908129, "link": "https://stackoverflow.com/questions/55908129/how-to-get-matches-sequentially-using-perl", "title": "How to get matches sequentially using perl", "body": "<p>i have +1000 json files like this : </p>\n\n<pre><code>({\n  \"Companies\": [\n    {\n      \"company\": \"COMPANY_1\",\n      \"time\": \"20DAYS\"\n    },\n    {\n      \"company\": \"COMPANY_2\",\n      \"time\": \"1DAY\"\n    },\n  ]\n})\n</code></pre>\n\n<p>using perl how can i get like this output :</p>\n\n<pre><code>COMPANY_1:20DAYS,COMPANY_2:1DAY\n</code></pre>\n\n<p>im trying this command</p>\n\n<pre><code>perl -lnE '$x = (split /=/,$ARGV)[4], say \"$x:\", join \",\", /(?&lt;=\"company\":\")[^\"]*/g,/(?&lt;=\"time\":\")[^\"]*/g' file.txt\n</code></pre>\n\n<p>but i get ouput like this :</p>\n\n<pre><code>COMPANY_1,COMPANY_2,1DAY,20DAYS\n</code></pre>\n\n<p>Desired output :</p>\n\n<pre><code>COMPANY_1:20DAYS,COMPANY_2:1DAY\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1556558099, "post_id": 55907991, "comment_id": 98471322, "body": "It looks like you&#39;re trying to parse JSON, I&#39;d suggest a JSON parsing module."}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1556558331, "post_id": 55907991, "comment_id": 98471414, "body": "This is true, however I still would like to know if there is a good way to do this kind of replacement. @AKHolland"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556558924, "post_id": 55908194, "comment_id": 98471668, "body": "I know I could do that, however, I want it to only replace if it is between &#39;:[&#39; and &#39;]&#39; and that&#39;s where I am stuck."}], "tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1556558771, "creation_date": 1556558771, "answer_id": 55908194, "question_id": 55907991, "link": "https://stackoverflow.com/questions/55907991/remove-certain-characters-from-a-regex-group/55908194#55908194", "title": "Remove certain characters from a regex group", "body": "<p>Try Regex: <code>\" *, *\"</code></p>\n\n<p>Replace with: <code>,</code> </p>\n\n<p><a href=\"https://regex101.com/r/fiOyKH/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556559151, "post_id": 55908201, "comment_id": 98471759, "body": "the issue is I&#39;m not creating the json, so I don&#39;t know how close it is to being a proper json, it comes in say 300-500 different forms, and this is the only I currently still have an issue handling. I am trying to parse all of the data into key value pairs and insert them into a table."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556559304, "post_id": 55908201, "comment_id": 98471810, "body": "@MuamerBekti\u0107 Trying to process structured data formats like JSON or HTML with regular expressions is asking for pain and suffering and has all sorts of issues. This is why my answer uses a module that understands the format. It&#39;s just easier and more robust that way. Makes &#39;insert into a table&#39; a lot easier too, because then you can just access the values directly instead of this wierd not-quite-JSON output. Got a <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a> here from the sounds of it."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1556558790, "creation_date": 1556558790, "answer_id": 55908201, "question_id": 55907991, "link": "https://stackoverflow.com/questions/55907991/remove-certain-characters-from-a-regex-group/55908201#55908201", "title": "Remove certain characters from a regex group", "body": "<p>Your text is <em>almost</em> proper JSON, so it's really easy to go the final inch and make it so, and then process that:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say postderef/;\nno warnings qw/experimental::postderef/;\nuse JSON::XS; # Install through your OS package manager or a CPAN client\n\nmy $str = q/\"emailDomains\":[\"google.co.uk\",\"google.com\",\"google.com\",\"google.com\",\"google.co.uk\"]/;\nmy $json = JSON::XS-&gt;new();\n\nmy $obj = $json-&gt;decode(\"{$str}\");\nmy $fixed = $json-&gt;ascii-&gt;encode({emailDomains =&gt;\n                                    join(', ', $obj-&gt;{'emailDomains'}-&gt;@*)});\n$fixed =~ s/^\\{|\\}$//g;\nsay $fixed;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556561183, "post_id": 55908415, "comment_id": 98472565, "body": "Yeah, this works in my current case, but i doubt it would for all the request. The main issue is that i cannot get any modules installed, and that leads to a bump in the road, i have a couple of billion rows of data that i&#39;m parsing and this seems to be the last issue i am having with my data set."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556561773, "post_id": 55908415, "comment_id": 98472849, "body": "@MuamerBekti\u0107 If you have varying input format we&#39;d need to know more about it to suggest the &quot;best&quot; approach (it&#39;s just hard).  I&#39;ve added a regex which may have a specific advantage, depending on the input format."}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556562151, "post_id": 55908415, "comment_id": 98473025, "body": "I can&#39;t seem to get that latest addition working in my perl script it spits &quot;Bareword found where operator expected&quot; out at me. And a big part of the issue is that i don&#39;t know what all the forms could be either. The example i gave was just part of a much longer json string. Then there is another occurrence of this same issue for me with &quot;{&quot;businessLogicTypeList&quot;:[&quot;FILEFORMATID&quot;,&quot;CHECKSUMTYPES&quot;,&quot;W&zwnj;&#8203;AREHOUSETYPEID&quot;,&quot;IMS&zwnj;&#8203;PROXYTYPE&quot;,&quot;IMSLINKT&zwnj;&#8203;YPE&quot;,&quot;FILEDELIVERYST&zwnj;&#8203;ATUSID&quot;]}&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556562363, "post_id": 55908415, "comment_id": 98473115, "body": "@MuamerBekti\u0107  Added another way with regex (but which should have no advantages over the first regex, except that it is shorter and uses lookarounds which you attempted)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556562474, "post_id": 55908415, "comment_id": 98473168, "body": "@MuamerBekti\u0107 &quot;<i>a big part of the issue is that i don&#39;t know what all the forms could be</i>&quot; -- yes, that&#39;s the biggest problem indeed.  You&#39;d need to get an idea of what kinds of variations there can be in data.  (One --painful -- way to do that is to process, see what didn&#39;t work, adjust ... repeat.)"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556562477, "post_id": 55908415, "comment_id": 98473170, "body": "thank you so much for all of the help, however I am still getting the &quot;Bareword found where operator expected&quot; issue with the new regex."}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556562773, "post_id": 55908415, "comment_id": 98473301, "body": "Bareword found where operator expected ... near &quot;s/&quot;,\\s*&quot;/ /gr&quot;. Doesn&#39;t seem to like that? I&#39;m using perl  v5.10.1 if that matters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556563044, "post_id": 55908415, "comment_id": 98473411, "body": "@MuamerBekti\u0107 Huh ... in the regex used in the replacement part of the big regex?  Can you debug that -- tweak it until the error goes away?  For example, change <code>&#47;&quot;,\\s*&quot;&#47;</code> to just <code>&#47;,&#47;</code> etc (Did you copy-paste correctly? Is there some silly typo in my code?)"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556564468, "post_id": 55908415, "comment_id": 98473995, "body": "I tried both and the only thing i changed was $string to my variable name so I&#39;m not sure. And I&#39;ve been messing with it and still get the bareword issue."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556564760, "post_id": 55908415, "comment_id": 98474120, "body": "@MuamerBekti\u0107 I don&#39;t see what could trigger <i>bareword</i>, other than some typo.  Is this the line on which you get that: <code>my $n = $1 =~ s&#47;&quot;,\\s*&quot;&#47; &#47;gr; </code> ?"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556568135, "post_id": 55908415, "comment_id": 98475364, "body": "Sorry i got pulled into something, but yes, it is that line that throws an issue. I am not changing anything in regards to that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1556568465, "post_id": 55908415, "comment_id": 98475516, "body": "@MuamerBekti\u0107 Ahhh!   The v5.10 didn&#39;t have <code>&#47;r</code> modifier yet.  Alright.  Edited"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556570211, "post_id": 55908415, "comment_id": 98476227, "body": "Going to mess with it in the morning. Thank you again so much for the help."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1556599255, "last_edit_date": 1556599255, "creation_date": 1556559796, "answer_id": 55908415, "question_id": 55907991, "link": "https://stackoverflow.com/questions/55907991/remove-certain-characters-from-a-regex-group/55908415#55908415", "title": "Remove certain characters from a regex group", "body": "<p>If your string indeed has the form <code>\"key\":[\"v1\", \"v2\", ... \"vN\"]</code>, you can split off the part that needs to be changed, replace <code>\",\"</code> by a space in it, and re-assemble: </p>\n\n<pre><code>my @parts = split / (\\[\"\\s* | \\s*\\\"]) /x, $string;    #\"\n\n$parts[2] =~ s/\",\\s*\"/ /g;\n\nmy $processed = join '', @parts;\n</code></pre>\n\n<p>The regex pattern for the separator in <code>split</code> is captured since in that case the separators are also in the returned list, what is helpful here for putting the string back together. Then, we need to change the third element of the array.</p>\n\n<p>In this approach, we have to change a specific element in the array so if your format varies, even a little, this may not (or still may) be suitable.</p>\n\n<p>This should of course be processed as JSON, using a module.  If the format isn't sure, as indicated in a comment, it would be best to try to ensure that you have JSON. Picking bits and pieces like above (or below) is a road to madness once requirements slowly start evolving.</p>\n\n<hr>\n\n<p>The same approach can be used in a regex, and this may in fact have an advantage to be able to scoop up and ignore everything preceding the <code>:</code> (with <code>split</code> that part may end up with multiple elements if the format isn't exactly as shown, what then affects everything)</p>\n\n<pre><code>$string =~ s{ :\\[\"\\s*\\K (.*?) ( \"\\] ) }{ \n    my $e = $2; \n    my $n = $1 =~ s/\",\\s*\"/ /gr; \n    $n.$e \n}ex;\n</code></pre>\n\n<p>Here <code>/e</code> modifier makes it so that the replacement side is evaluated as code, where we do the same as with the <code>split</code> above. Notes on regex</p>\n\n<ul>\n<li><p>Have to save away <code>$2</code> first, since it gets reset in the next regex</p></li>\n<li><p>The <code>/r</code> modifier<sup>&dagger;</sup>, which doesn't change its target but rather returns the changed string, is what allows us to use substitution operator on the read-only <code>$1</code> </p></li>\n<li><p>If nothing gets captured for <code>$2</code>, and perhaps for <code>$1</code>, that means that there was no match and the outcome is simply that <code>$string</code> doesn't change, <em>quietly</em>. So if this substitution should always work then you may want to add handling of such unexpected data</p></li>\n<li><p>Don't need a <code>$n</code> above, but can return <code>($1 =~ s/\",\\s*\"/ /gr) . $e</code></p></li>\n</ul>\n\n<p>Or, using lookarounds as attempted</p>\n\n<pre><code>$string =~ s{ (?&lt;=:\\[\") (.+?) (?=\"\\]) }{ $1 =~ s/\",\\s*\"/ /gr }egx;\n</code></pre>\n\n<p>what does reduce the amount of code, but may be trickier to work with later.</p>\n\n<p>While this is a direct answer to the question I think it's least maintainable. </p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp; This useful modifier, for \"non-destructive substitution,\" appeared in v5.14.  In earlier Perl versions we would copy the string and run regex on that, with an idiom</p>\n\n<pre><code>(my $n = $1) =~ s/\",\\s*\"/ /g;\n</code></pre>\n\n<p>In the lookarounds-example we then need a little more</p>\n\n<pre><code>$string =~ s{...}{ (my $n = $1) =~ s/\",\\s*\"/ /g; $n }gr\n</code></pre>\n\n<p>since <code>s/</code> operator returns the number of substitutions made while we need <code>$n</code> to be returned from that whole piece of code in <code>{}</code> (the replacement side), to be used as the replacement.</p>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1556560722, "post_id": 55908481, "comment_id": 98472351, "body": "this seems to do what i want, however i tried to do this in Perl, and this doesn&#39;t seem to work? $msgPayload =~ s/(:&#91;&quot;)|(?!^)\\G([^&quot;]+)&quot;(,)&quot;/$1$2$3/g; unless i&#39;m missing something I&#39;m not sure what is wrong."}], "tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": true, "score": 1, "last_activity_date": 1556560221, "creation_date": 1556560221, "answer_id": 55908481, "question_id": 55907991, "link": "https://stackoverflow.com/questions/55907991/remove-certain-characters-from-a-regex-group/55908481#55908481", "title": "Remove certain characters from a regex group", "body": "<p>You can use this <code>\\G</code> based regex to start the match with <code>:[\"</code> and further captures the values appropriately and replaces matched text so that only comma is retained and doublequotes are removed.</p>\n\n<pre><code>(:\\[\")|(?!^)\\G([^\"]+)\"(,)\"\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/LWUGg2/1\" rel=\"nofollow noreferrer\">Regex Demo</a></strong></p>\n"}], "owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 55908481, "answer_count": 4, "score": 2, "last_activity_date": 1556599255, "creation_date": 1556557938, "last_edit_date": 1556559778, "question_id": 55907991, "link": "https://stackoverflow.com/questions/55907991/remove-certain-characters-from-a-regex-group", "title": "Remove certain characters from a regex group", "body": "<p>I have a string that looks like this (key\":[\"value\",\"value\",\"value\"])</p>\n\n<pre><code>\"emailDomains\":[\"google.co.uk\",\"google.com\",\"google.com\",\"google.com\",\"google.co.uk\"]\n</code></pre>\n\n<p>and I use the following regex to select from the string. (the regex is setup in a way where it wont select a string that looks like this \"key\":[{\"key\":\"value\",\"key\":\"value\"}] )</p>\n\n<pre><code>(?&lt;=:\\[\").*?(?=\"])\n</code></pre>\n\n<p>Resulting Selection:</p>\n\n<pre><code>google.co.uk\",\"google.com\",\"google.com\",\"google.com\",\"google.co.uk\n</code></pre>\n\n<p>I want to remove the \" in that select string, and i was wondering if there was an easy way to do this using the replace command. Desired result...</p>\n\n<pre><code>\"emailDomains\":[\"google.co.uk, google.com, google.com, google.com, google.co.uk\"]\n</code></pre>\n\n<p>How do I solve this problem? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "edited": false, "score": 1, "creation_date": 1556550339, "post_id": 55905684, "comment_id": 98467685, "body": "Use REGEX : <a href=\"https://regex101.com/r/L9fLGX/1\" rel=\"nofollow noreferrer\">regex101.com/r/L9fLGX/1</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1556550890, "post_id": 55905684, "comment_id": 98467964, "body": "<a href=\"https://perldoc.perl.org/File/Basename.html\" rel=\"nofollow noreferrer\">File::Basename</a> is handy."}, {"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "reply_to_user": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "edited": false, "score": 0, "creation_date": 1556550973, "post_id": 55905684, "comment_id": 98468014, "body": "@PhxDev that was wonderful! Thank you. The only question I have is that regex makes 3 items in array per line instead of two. The first value in array is always blank. Not sure why but it works. Let me post a solution"}, {"owner": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "edited": false, "score": 0, "creation_date": 1556551601, "post_id": 55905684, "comment_id": 98468358, "body": "The first element in the array is <code>$0</code> for all the line. And <code>$1</code> for the filemane and <code>$2</code> for the extension.  Please mark my answer as usefull ;)"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556553717, "post_id": 55906365, "comment_id": 98469452, "body": "This all gets lot neater if you use <code>$_</code> instead of <code>$recordLine</code> :-)"}, {"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "edited": false, "score": 0, "creation_date": 1556578339, "post_id": 55906365, "comment_id": 98478404, "body": "This is the regex I ended up using  /(.*)\\.(\\w+)$/"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556605436, "post_id": 55906365, "comment_id": 98484390, "body": "@DaveCross Of course, but this is not <a href=\"https://codereview.stackexchange.com/\">Code Review</a>. ;-)"}], "tags": [], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "is_accepted": true, "score": 2, "last_activity_date": 1556551361, "creation_date": 1556551361, "answer_id": 55906365, "question_id": 55905684, "link": "https://stackoverflow.com/questions/55905684/perl-how-to-get-filename-and-extension/55906365#55906365", "title": "perl how to get filename and extension", "body": "<p>Don't use <code>split</code>.</p>\n\n<p>Use just a regular pattern match:</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\nprint \"Perl Starting ... \\n\\n\"; \n\nopen my $input_filehandle1, , '&lt;', 'test1.txt' or die \"No input Filename Found test1.txt ... \\n\";\n\nwhile (defined(my $recordLine = &lt;$input_filehandle1&gt;))\n{\n    chomp($recordLine);\n\n    if ($recordLine =~ /^(.*)\\.([^.]+)$/) {\n      print \"FileName: $1 ... Ext: $2 ... \\n\";\n    }\n\n}#end while-loop\n\nprint \"\\nPerl End ... \\n\\n\"; \n\n1;\n</code></pre>\n\n<p>Regexper explains the <a href=\"https://regexper.com/#%5E%28.*%29%5C.%28%5B%5E.%5D%2B%29%24\" rel=\"nofollow noreferrer\">regular expression</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "edited": false, "score": 0, "creation_date": 1556577876, "post_id": 55906966, "comment_id": 98478317, "body": "Dave, this is a good answer. It works great as long as I know what the file ext is. If I encounter an ext that I didn&#39;t add then the fileparse won&#39;t work."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1556553601, "creation_date": 1556553601, "answer_id": 55906966, "question_id": 55905684, "link": "https://stackoverflow.com/questions/55905684/perl-how-to-get-filename-and-extension/55906966#55906966", "title": "perl how to get filename and extension", "body": "<p>This is what <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow noreferrer\">File::Basename</a> is for.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse File::Basename;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  my ($name, undef, $ext) = fileparse($_, '.docx');\n\n  say \"Filename: $name ... Ext: $ext\";\n}\n\n__DATA__\ntest word document.docx\namazing c. document.docx\n1. 2. 3.45 document.docx\n</code></pre>\n\n<p>Three things that are worth explaining.</p>\n\n<ol>\n<li>I use the <code>DATA</code> filehandle as this is a demonstration and it's easier than having a separate input file.</li>\n<li><code>fileparse()</code> returns the directory path as the second value. As this data doesn't include directory paths, I've ignored that value (by assigning it to <code>undef</code>).</li>\n<li>The second (and subsequent) parameters to <code>fileparse()</code> are a list of extensions to separate out. You only use one extension in your sample data. If you had more extensions, you could just add them after \".docx\".</li>\n</ol>\n"}], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "accepted_answer_id": 55906365, "answer_count": 2, "score": 0, "last_activity_date": 1556553601, "creation_date": 1556548829, "question_id": 55905684, "link": "https://stackoverflow.com/questions/55905684/perl-how-to-get-filename-and-extension", "title": "perl how to get filename and extension", "body": "<p>I have an input file called test1.txt with hundreds &amp; thousands of file names.</p>\n\n<pre><code>test word document.docx\n...\n...\namazing c. document.docx\n1. 2. 3.45 document.docx\n...\n...\n</code></pre>\n\n<p>What I want to do is get filename and extension out of the string. For majority of the file names there is only one dot so I am able to get filename and ext using dot as a separator. But the problem is that some file names have multiple dots in the filenames. I have no idea how I would get the extention and file name out of that. </p>\n\n<p>Here's my perl code.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Perl Starting ... \\n\\n\"; \n\nopen my $input_filehandle1, , '&lt;', 'test1.txt' or die \"No input Filename Found test1.txt ... \\n\";\n\nwhile (defined(my $recordLine = &lt;$input_filehandle1&gt;))\n{\n    chomp($recordLine);\n\n    my @fields = split(/\\./, $recordLine);\n    my $arrayCount = @fields;\n\n\n    #if the array size is more than 2 then we encountered multiple dots\n    if ($arrayCount &gt; 2)\n    {\n        print \"I dont know how to get filename and ext ... $recordLine ... \\n\";\n    }\n    else\n    {   \n        print \"FileName: $fields[0] ... Ext: $fields[1] ... \\n\";\n    }\n\n}#end while-loop\n\nprint \"\\nPerl End ... \\n\\n\"; \n\n1;\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>Perl Starting ...\n\nFileName: test word document ... Ext: docx ...\nI dont know how to get filename and ext ... amazing c. document.docx ...\nI dont know how to get filename and ext ... 1. 2. 3.45 document.docx ...\n\nPerl End ...\n</code></pre>\n\n<p>What I would like to get</p>\n\n<pre><code>FileName: test word document ... Ext: docx ...\nFileName: amazing c. document ... Ext: docx ...\nFileName: 1. 2. 3.45 document ... Ext: docx ...\n</code></pre>\n"}, {"tags": ["perl", "operator-overloading"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1556542827, "post_id": 55903248, "comment_id": 98463488, "body": "See <a href=\"https://metacpan.org/pod/Iterator::Simple\" rel=\"nofollow noreferrer\"><code>Iterator::Simple</code></a> for an idea about how to implement this <a href=\"https://metacpan.org/release/Iterator-Simple/source/lib/Iterator/Simple.pm\" rel=\"nofollow noreferrer\">(source)</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556559776, "post_id": 55903248, "comment_id": 98471989, "body": "Tip: Don&#39;t use lower-case module names for non-pragma modules."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556559945, "post_id": 55903248, "comment_id": 98472048, "body": "Tip: <code>$class</code> is badly named. For starters, it doesn&#39;t contain a class but an object."}], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1556553744, "post_id": 55904204, "comment_id": 98469465, "body": "thank you, I was entirely unaware that foreach makes a copy of an array first before iterating over its elements. So can I conclude that there&#39;s no way to actually treat an object as an array?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1556554051, "post_id": 55904204, "comment_id": 98469605, "body": "@bluppfisk: I didn&#39;t say anything about <code>foreach</code> copying an array. I said it generates a list of values. That&#39;s not the same thing at all :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1556543750, "creation_date": 1556543750, "answer_id": 55904204, "question_id": 55903248, "link": "https://stackoverflow.com/questions/55903248/perl-overload-so-that-you-can-supply-an-object-to-foreach/55904204#55904204", "title": "Perl overload @{} so that you can supply an object to foreach()", "body": "<p>The problem that you're having here is not the difference between <code>@{...}</code> and <code>&lt;...&gt;</code> but the difference between <code>foreach</code> and <code>while</code>.</p>\n\n<p>A <code>while</code> loop acts a bit like an iterator in as much as its execution looks like this:</p>\n\n<pre><code>while (you can run a piece of code and get back a value) {\n  do something\n}\n</code></pre>\n\n<p>So each time around the loop, it executes the piece of code in the <code>while</code> condition and expects to get a single value back. The code in the <code>while</code> condition is run in scalar context.</p>\n\n<p>A <code>foreach</code> loop, on the other hand, only executes its code once and expects to get a list of values back. The code between parentheses at the start of the loop is executed in list context.</p>\n\n<p>This is why you read a large file a line at a time using:</p>\n\n<pre><code>while (&lt;$file_handle&gt;) {\n  ...\n}\n</code></pre>\n\n<p>This only reads a single record from the file at a time. If you used a <code>foreach</code> loop instead like this:</p>\n\n<pre><code>foreach (&lt;$file_handle&gt;) {\n  ...\n}\n</code></pre>\n\n<p>then you would get all of the records back from the filehandle at once - which, obviously, takes far more memory.</p>\n\n<p>Dereferencing an array reference works like that too. You get all of the values back at the same time. The overridden method (<code>next()</code>) will only be called once and will be expected to return a list of values.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1556555992, "last_edit_date": 1556555992, "creation_date": 1556553106, "answer_id": 55906839, "question_id": 55903248, "link": "https://stackoverflow.com/questions/55903248/perl-overload-so-that-you-can-supply-an-object-to-foreach/55906839#55906839", "title": "Perl overload @{} so that you can supply an object to foreach()", "body": "<p>I show some techniques in <a href=\"https://metacpan.org/pod/Object::Iterate\" rel=\"nofollow noreferrer\">Object::Iterate</a>. Give your object some methods to supply the next value and go from there.</p>\n"}, {"comments": [{"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1556612162, "post_id": 55908489, "comment_id": 98487509, "body": "thanks for the code sample. Could you add a line or two about the problems I might run into? I&#39;m fairly new to Perl (and am also working on an offline system which does not allow to install packages :()"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1556651114, "post_id": 55908489, "comment_id": 98508118, "body": "1) Right now, you don&#39;t even reset the iterator when reaching the end, but that&#39;s easy to fix."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1556651285, "post_id": 55908489, "comment_id": 98508190, "body": "2) The problems stem from leaving loops early (<code>for (1..2) { while (&lt;$o&gt;) { last if ...; ...; } }</code>) or from nesting iterations (<code>while (&lt;$o&gt;) { while (&lt;$o&gt;) { ... } }</code>). It&#39;s hard to create a convincing example, but this happens just often enough in practice to get surprising problems that are hard to debug."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1556561202, "last_edit_date": 1556561202, "creation_date": 1556560303, "answer_id": 55908489, "question_id": 55903248, "link": "https://stackoverflow.com/questions/55903248/perl-overload-so-that-you-can-supply-an-object-to-foreach/55908489#55908489", "title": "Perl overload @{} so that you can supply an object to foreach()", "body": "<p>[ <em>This adds to Dave Cross's answer rather than being an answer on its own</em> ]</p>\n\n<p>Having a single iterator instance per collection cause all kinds of problem. That's why everyone uses <code>keys</code> instead of <code>each</code>, for example. As such, I strongly recommend that your class produces an iterator rather than being one itself, as the following does:</p>\n\n<pre><code>package My::Collection;\n\nuse strict;\nuse warnings;\n\nuse Iterator::Simple qw( iarray );\n\nsub new {\n    my ($class) = @_;\n    my $self = bless({}, $class);\n    $self-&gt;{fields} = [];\n    return $self;\n}\n\nsub add {\n    my ($self, $elem) = @_;\n    push @{ $self-&gt;{fields} }, $elem;\n}\n\nsub iter {\n    my ($self) = @_;\n    return iarray($self-&gt;{fields});\n}\n\n1;\n</code></pre>\n\n<p>Use it as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse My::Collection qw( );\n\nmy $collection = My::Collection-&gt;new();\n$collection-&gt;add(\"Hi\");\n$collection-&gt;add(\"Hello\");\n$collection-&gt;add(\"Yeet\");\n\nmy $iter = $collection-&gt;iter();\nwhile ( my ($item) = $iter-&gt;next() ) {\n   say $item;\n}\n</code></pre>\n\n<p>You can also use either of the following more magical options:</p>\n\n<pre><code>while ( my ($item) = $iter-&gt;() )\n\nwhile ( my ($item) = &lt;$iter&gt; )\n</code></pre>\n"}], "owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 55904204, "answer_count": 3, "score": 7, "last_activity_date": 1558942998, "creation_date": 1556540358, "last_edit_date": 1558942998, "question_id": 55903248, "link": "https://stackoverflow.com/questions/55903248/perl-overload-so-that-you-can-supply-an-object-to-foreach", "title": "Perl overload @{} so that you can supply an object to foreach()", "body": "<p>Is there a way I can make a class overload the array dereferencer in such a way that I can supply an instance of that class to <code>foreach</code> and have a custom function run at every iteration?</p>\n\n<p>I tried:</p>\n\n<ul>\n<li><p>Overloading <code>@{}</code> and assigning it to a sub. However, in this case, the sub is only executed once and is supposed to return a reference to the array you want to iterate over. Almost but not quite what I wanted.</p></li>\n<li><p>Overloading <code>&lt;&gt;</code>. This executes the assigned function with every read attempt. Exactly how I want it, however it works with a <code>while</code> loop and not with <code>foreach</code>.</p></li>\n</ul>\n\n<p><strong>overloading.pl</strong></p>\n\n<pre><code>use overloaded;\n\n$class = overloaded-&gt;new();\n\n$class-&gt;add(\"Hi\");\n$class-&gt;add(\"Hello\");\n$class-&gt;add(\"Yeet\");\n\nforeach $string (@$class) {\n    print(\"NEXT ITEM: \".$string.\"\\n\");\n}\n\nwhile ($item = &lt;$class&gt;) {\n    print(\"NEXT ITEM: \".$item.\"\\n\");\n}\n</code></pre>\n\n<p><strong>overloaded.pm</strong></p>\n\n<pre><code>package overloaded;\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse overload '@{}' =&gt; \\&amp;next, '&lt;&gt;' =&gt; \\&amp;fetchNext;\n\nsub new {\n    my ($class, %args) = @_;\n    $args{fields} = ();\n    $args{pos} = 0;\n    return bless { %args }, $class;\n}\n\nsub add {\n    my ($self, $elem) = @_;\n    push(@{$self-&gt;{fields}}, $elem);\n}\n\nsub fetchNext {\n    my ($self) = @_;\n    print(\"reading next line...\\n\");\n    return $self-&gt;{fields}-&gt;[$self-&gt;{pos}++];\n}\n\nsub next {\n    my ($self) = @_;\n    print (\"getting next array item\\n\");\n    return \\@{$self-&gt;{fields}};\n}\n\n1;\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>$ perl overloading.pl\ngetting next array item\nNEXT ITEM: Hi\nNEXT ITEM: Hello\nNEXT ITEM: Yeet\n\n\nreading next line...\nNEXT ITEM: Hi\nreading next line...\nNEXT ITEM: Hello\nreading next line...\nNEXT ITEM: Yeet\nreading next line...\n</code></pre>\n"}, {"tags": ["perl", "parallel-processing", "multicore", "log4perl"], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": true, "score": 2, "last_activity_date": 1556709055, "creation_date": 1556709055, "answer_id": 55935322, "question_id": 55901492, "link": "https://stackoverflow.com/questions/55901492/using-loglog4perl-with-mce-many-core-engine-perl/55935322#55935322", "title": "Using Log::Log4perl with MCE (Many-core Engine) Perl", "body": "<p>I have found the solution. In case someone also faced this issue they can try this-</p>\n\n<p>You have to initialize 'user_output' and 'user_error'.\nFrom MCE Documentation -</p>\n\n<pre><code>    user_error =&gt; \\&amp;user_error,         ## Default undef\n    user_output =&gt; \\&amp;user_output,       ## Default undef\n\n    # MCE will forward data to user_error/user_output,\n    # when defined, for the following methods.\n\n    # MCE-&gt;sendto(\\*STDERR, \"sent to user_error\\n\");\n    # MCE-&gt;printf(\\*STDERR, \"%s\\n\", \"sent to user_error\");\n    # MCE-&gt;print(\\*STDERR, \"sent to user_error\\n\");\n    # MCE-&gt;say(\\*STDERR, \"sent to user_error\");\n\n    # MCE-&gt;sendto(\\*STDOUT, \"sent to user_output\\n\");\n    # MCE-&gt;printf(\"%s\\n\", \"sent to user_output\");\n    # MCE-&gt;print(\"sent to user_output\\n\");\n    # MCE-&gt;say(\"sent to user_output\");\n</code></pre>\n\n<p>So in my case - </p>\n\n<pre><code>sub initialize_mce {\n     my $mce = MCE-&gt;new(\n        max_workers =&gt; 5,\n        input_data =&gt; \\@input_data,\n        on_post_exit =&gt; \\&amp;on_post_exit,\n        user_begin =&gt; \\&amp;user_begin,\n        user_end   =&gt; \\&amp;user_end,\n        user_func =&gt; \\&amp;run_function,\n        user_output =&gt; sub {\n            $logger-&gt;info($_[0]);            # Log4perl Obj\n        },\n        user_error =&gt; sub {\n            $logger-&gt;error($_[0]);          # Log4perl Obj\n        }\n    );\n}\n</code></pre>\n\n<p>And in others function you just have to 'print' to STDOUT/STDERR\nE.g.-</p>\n\n<pre><code>sub user_begin {                   ## Called once at the beginning\n    my ($self, $e) = @_;\n    $mce-&gt;print(\"Process Id : \".$$.\" start\");\n    # OR to log error \n    $mce-&gt;print(\\*STDERR, \"Exception/Error Found\");\n}\n</code></pre>\n\n<p>I am not sure this is the only way or there is some other efficient way, but for now it get the job done.</p>\n"}], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 55935322, "answer_count": 1, "score": 2, "last_activity_date": 1568472000, "creation_date": 1556533838, "last_edit_date": 1568472000, "question_id": 55901492, "link": "https://stackoverflow.com/questions/55901492/using-loglog4perl-with-mce-many-core-engine-perl", "title": "Using Log::Log4perl with MCE (Many-core Engine) Perl", "body": "<p>I am using MCE for parallel processing for one of my project.\nI am facing issue while logging the output from MCE (for logging I am using Log4perl).</p>\n\n<p>I have gone through the examples provided and found them printing to STDOUT/STDERR or to some log file provided at that time.\nThere is MCE->sendto() and MCE->print() option availble, but I am not sure how to use it with log4perl.</p>\n\n<pre><code>package ABC;\nuse strict;\nuse warnings;\nuse MCE;\n\nsub new {\n    my $class = shift;\n    my ($self) = {@_};\n    return bless $self, $class;\n}\n\nsub initialize_mce {\n     my $mce = MCE-&gt;new(\n        max_workers =&gt; 5,\n        input_data =&gt; \\@input_data,\n        on_post_exit =&gt; \\&amp;on_post_exit,\n        user_begin =&gt; \\&amp;user_begin,\n        user_end   =&gt; \\&amp;user_end,\n        user_func =&gt; \\&amp;run_function\n    );\n\n}\nsub on_post_exit {\n    my ($self, $e) = @_;\n    # I want to write something like this -\n    # I want to log to my global log file using Log4perl which is initialized in some other package and passed to this package\n\n    # $self-&gt;{'logger'}-&gt;info(\"$e-&gt;{wid}: $e-&gt;{pid}: $e-&gt;{status}: $e-&gt;{msg}: $e-&gt;{id}\");\n\n    print \"$e-&gt;{wid}: $e-&gt;{pid}: $e-&gt;{status}: $e-&gt;{msg}: $e-&gt;{id}\\n\";\n}\n\nsub user_begin {                   ## Called once at the beginning\n    my ($self, $e) = @_;\n    print \"$$ start\";\n}\n\nsub user_end {                     ## Called once at the end\n    my $self = shift;\n    #$self-&gt;{'logger'}-&gt;info(\"$$ end\");\n    print \"$$ end\";\n}\n\nsub run_function {\n    my ($self) = @_;\n    my $wid = MCE-&gt;wid;\n    $self-&gt;{'logger'}-&gt;info(\"Running...$wid\");\n    my $input_data = $_;\n    ###\n    #Rest of subroutine \n    ####\n}\n1;\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl", "automation", "scripting"], "comments": [{"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 1, "creation_date": 1556453369, "post_id": 55890000, "comment_id": 98437105, "body": "Yes, of course it&#39;s possible."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556454848, "post_id": 55890000, "comment_id": 98437469, "body": "In Perl you could use for example <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\"><code>File::Find::Rule</code></a> to find all the source files. Then you would have to loop through the files and read each into a string variable, then use a regex to insert the headers, and then overwrite the old file (or preferably take a backup first before overwriting)"}, {"owner": {"reputation": 1219, "user_id": 10755436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c7396ba48c437540b303e6162b623a?s=128&d=identicon&r=PG&f=1", "display_name": "A2LBK", "link": "https://stackoverflow.com/users/10755436/a2lbk"}, "edited": false, "score": 0, "creation_date": 1556460791, "post_id": 55890000, "comment_id": 98439031, "body": "Is it possible to show an example?"}], "answers": [{"comments": [{"owner": {"reputation": 1219, "user_id": 10755436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c7396ba48c437540b303e6162b623a?s=128&d=identicon&r=PG&f=1", "display_name": "A2LBK", "link": "https://stackoverflow.com/users/10755436/a2lbk"}, "edited": false, "score": 0, "creation_date": 1556462074, "post_id": 55891199, "comment_id": 98439403, "body": "That is great! I will hack the small bits to meet all my needs. Regarding backup, how would you conceptually recommend I save them. Do you mean create a temporary folder and dumping in all the source files before changing the actual files? And then just keep that temporary folder as a backup in case something went wrong with running the perl script?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1219, "user_id": 10755436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c7396ba48c437540b303e6162b623a?s=128&d=identicon&r=PG&f=1", "display_name": "A2LBK", "link": "https://stackoverflow.com/users/10755436/a2lbk"}, "edited": false, "score": 0, "creation_date": 1556462440, "post_id": 55891199, "comment_id": 98439493, "body": "You are welcome! <i>&quot;Do you mean create a temporary folder and dumping in all the source files before changing the actual files?&quot;</i> Yes exactly or simply write them to a file with a <code>.bak</code> extension. Just in case something goes wrong, yes!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1556461699, "last_edit_date": 1556461699, "creation_date": 1556461309, "answer_id": 55891199, "question_id": 55890000, "link": "https://stackoverflow.com/questions/55890000/add-automatic-header-comments-for-all-source-files/55891199#55891199", "title": "Add automatic header comments for all source files", "body": "<p>Here is an example in Perl. It does not take backup before overwriting (I would recommend that you try to improve this script and add backup functionality). It also does not add the end of subroutine marker. But it would easy to add that functionality, please try. It also assumes that you want to modify all <code>*.f95</code> files in the current directory and all its sub directories:</p>\n\n<pre><code>use feature qw(say state);\nuse strict;\nuse warnings;\nuse File::Find::Rule;\n\nmy @files = File::Find::Rule-&gt;new-&gt;name('*.f95')-&gt;in('.');\n\nfor my $fn (@files) {\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $txt = do {local $/; &lt;$fh&gt;};\n    close $fh;\n    process_txt( \\$txt );\n    save_txt( $fn, \\$txt );\n}\n\nsub save_txt {\n    my ( $fn, $txt ) = @_;\n\n    open ( my $fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\n    print $fh $$txt;\n    close $fh;\n}\n\nsub process_txt {\n    my ( $txt ) = @_;\n\n    my $i = 1;\n    $$txt =~ s/^(.*(?i:function|subroutine)\\s+)([a-zA-Z_]+)(\\s*\\(.*$)/\n      do_substitution($1, $2, $3, $i++)/egmx;\n}\n\nsub do_substitution {\n    my ( $head, $name, $end, $i ) = @_;\n\n    my $line = $head . $name . $end;\n    $line =~ s/\\s+$//;\n    my $N = length $line;\n    my $cline = '!' . '-' x $N;\n    my $mline = '!  ' . $name;\n    my $snum = \"($i)\";\n    my $M = (length $mline) + (length $snum);\n    my $mspc = ($N &gt; $M) ? (' ' x ($N-$M)) : '  ';\n    $mline = $mline . $mspc . $snum;\n    my $new_txt = join \"\\n\", $cline, $mline, $cline, $line;\n    return $new_txt;\n}\n</code></pre>\n"}], "owner": {"reputation": 1219, "user_id": 10755436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c7396ba48c437540b303e6162b623a?s=128&d=identicon&r=PG&f=1", "display_name": "A2LBK", "link": "https://stackoverflow.com/users/10755436/a2lbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 55891199, "answer_count": 1, "score": 0, "last_activity_date": 1556461699, "creation_date": 1556452456, "last_edit_date": 1556456754, "question_id": 55890000, "link": "https://stackoverflow.com/questions/55890000/add-automatic-header-comments-for-all-source-files", "title": "Add automatic header comments for all source files", "body": "<p>I have a standardized way of writing comments before and after a function. \nFor example before declaring any function I write, </p>\n\n<pre><code> !---------------------------\n !  NAME_OF_FUNC           (no)\n !---------------------------\n</code></pre>\n\n<p>where no is the nth function in a given file containing multiple functions. \nI know that a function e.g begins with (Fortran convention) either subroutine <code>NAME_OF_SUB</code> or function <code>NAME_OF_FUNC</code>. Hence, my end result would be </p>\n\n<pre><code> !---------------------------\n !  NAME_OF_FUNC           (no)\n !---------------------------\n function NAME_OF_FUNC(...)\n\n end function \n !---------------------------\n</code></pre>\n\n<p>Can somebody show an example of how to write a bash script or in any other scripting language a code that can go through all my source files and the standard convention I just showed an example of?</p>\n"}, {"tags": ["perl", "sql-server-2017"], "comments": [{"owner": {"reputation": 2775, "user_id": 212514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ea69157590ddaa2363dd9ad4d7c7d3?s=128&d=identicon&r=PG", "display_name": "user212514", "link": "https://stackoverflow.com/users/212514/user212514"}, "edited": false, "score": 0, "creation_date": 1556423148, "post_id": 55884790, "comment_id": 98431355, "body": "Maybe you can create the connection outside of the <code>foreach</code> and only use the connection repeatedly inside the loop?"}, {"owner": {"reputation": 19, "user_id": 8729304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecc53279826dab2f038487d90f8a4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/8729304/gianluca"}, "reply_to_user": {"reputation": 2775, "user_id": 212514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ea69157590ddaa2363dd9ad4d7c7d3?s=128&d=identicon&r=PG", "display_name": "user212514", "link": "https://stackoverflow.com/users/212514/user212514"}, "edited": false, "score": 0, "creation_date": 1556437785, "post_id": 55884790, "comment_id": 98433664, "body": "I tried it, but inside the foreach i have a method Prepare with doesn\u2019t work if i put the connection outside...the strange thing is that the program worked well with sql 2016, it seems a problem of \u2018memory\u2019 Or \u2018number of connection\u2019 but i don\u2019t understand it. any other suggestions? Thanks!!"}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556442872, "post_id": 55884790, "comment_id": 98434732, "body": "Performing a connect inside a loop is a bad idea. You may have better luck if you use connect_cached() instead, but this sounds like a design problem at heart."}, {"owner": {"reputation": 19, "user_id": 8729304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecc53279826dab2f038487d90f8a4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/8729304/gianluca"}, "reply_to_user": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556465115, "post_id": 55884790, "comment_id": 98440307, "body": "@TFBW - with connect_cached() works well, thanks. I will try to modify the program in order to avoid the connection inside the loop"}], "owner": {"reputation": 19, "user_id": 8729304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecc53279826dab2f038487d90f8a4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/8729304/gianluca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556421816, "creation_date": 1556398410, "last_edit_date": 1592644375, "question_id": 55884790, "link": "https://stackoverflow.com/questions/55884790/connecting-perl-sql-server-2017-problem-with-multiple-connections", "title": "Connecting Perl SQL Server 2017 - problem with multiple connections", "body": "<p>I have a problem with connection (with Perl) to SQL Server 2017, it is strange because it works only for the 2 first records (it's a foreach loop), then it breaks in error (with SQL Server 2016 it works). Anyone know if there is some restriction/particularity with SQL Server 2017 (Express)?</p>\n<p>The code is reported below (which works well only for the 2 first records).</p>\n<pre><code>my $DSN = 'driver={SQL Server};Server=GS PC\\SQLEXPRESS;Database=RedBeryl;Trusted_Connection=yes';\n$dbh = DBI-&gt;connect(&quot;DBI:ODBC:$DSN&quot;,{RaiseError=&gt;1}) or die &quot;$DBI::errstr\\n&quot;;\n</code></pre>\n<p>and this is the error:</p>\n<blockquote>\n<p>DBI connect('driver={SQL\nServer};Server=GS-PC\\SQLEXPRESS;Database=RedBeryl;Trusted_Connection=yes','HASH(0x487ae28)',...)</p>\n<p>failed:     Unable to fetch information about the error at\ndiamond_SQL2017.pl line 291.</p>\n<p>Unable to fetch information about the error</p>\n</blockquote>\n"}, {"tags": ["linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1556380566, "post_id": 55882294, "comment_id": 98423200, "body": "See <code>man perlvar</code> for a better way."}, {"owner": {"reputation": 15, "user_id": 11154687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Ar05.jpg?s=128&g=1", "display_name": "hackerNuB", "link": "https://stackoverflow.com/users/11154687/hackernub"}, "edited": false, "score": 0, "creation_date": 1556381415, "post_id": 55882294, "comment_id": 98423431, "body": "Thank you! Simply removing my last bit of code and replacing with this did the trick."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 15, "user_id": 11154687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Ar05.jpg?s=128&g=1", "display_name": "hackerNuB", "link": "https://stackoverflow.com/users/11154687/hackernub"}, "edited": false, "score": 3, "creation_date": 1556434276, "post_id": 55882294, "comment_id": 98432918, "body": "What about <code>$. </code> ? Please, don&#39;t accept this answer @hackerNuB but have a look at the duplicate question which provides better ways."}], "tags": [], "owner": {"reputation": 6047, "user_id": 5652313, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gra23QkoJiU/AAAAAAAAAAI/AAAAAAAAAAA/3Ztq6gNNllo/photo.jpg?sz=128", "display_name": "Jind\u0159ich", "link": "https://stackoverflow.com/users/5652313/jind%c5%99ich"}, "is_accepted": true, "score": -1, "last_activity_date": 1556380431, "creation_date": 1556380431, "answer_id": 55882294, "question_id": 55882238, "link": "https://stackoverflow.com/questions/55882238/how-do-i-list-the-line-number-of-a-file-with-a-perl-script/55882294#55882294", "title": "How do i list the line number of a file with a perl script?", "body": "<p>You can do something like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $line_n = 1;\nwhile(&lt;FH&gt;){\n    print \"$line_n. $_\";\n    $line_n++;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 11154687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Ar05.jpg?s=128&g=1", "display_name": "hackerNuB", "link": "https://stackoverflow.com/users/11154687/hackernub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1556380385, "accepted_answer_id": 55882294, "answer_count": 1, "score": -2, "last_activity_date": 1556380442, "creation_date": 1556380108, "last_edit_date": 1556380442, "question_id": 55882238, "link": "https://stackoverflow.com/questions/55882238/how-do-i-list-the-line-number-of-a-file-with-a-perl-script", "closed_reason": "Duplicate", "title": "How do i list the line number of a file with a perl script?", "body": "<p>I've made a Perl script to list the contents of a specified file, but I also want to see the line number of the file content, what functions in perl enable this? I've tried looking for an answer on stack but haven't found anything suitable, please redirect &amp; forgive me if this is a duplicate. </p>\n\n<p>This is my code:</p>\n\n<pre><code>    #!/usr/local/bin/perl\n    use warnings;\n    use strict;\n\n    print \"Specify the file you want to look at:\\n\";\n    my $file_name = &lt;STDIN&gt;;\n    chomp $file_name;\n\n    open(FH, '&lt;', $file_name) or die \"Cannot open $file_name: $!\";\n    print \"This is the listed content of: $file_name\\n\";\n\n    while(&lt;FH&gt;){\n    print $_;\n    }\n\n    close(FH);\n\n</code></pre>\n\n<p>This is what happens when I run the script, and this is what I would like it to do.</p>\n\n<pre><code>Actual result                 Wished result\n\nHello                         1. Hello  \nmy                            2. my\nname                          3. name\nis                            4. is\nJanne                         5. Janne\n</code></pre>\n"}, {"tags": ["perl", "format"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556380195, "post_id": 55881740, "comment_id": 98423089, "body": "Thank you for your reply, I discovered that the html code I had above this script made the code return on one line. xd"}, {"owner": {"reputation": 7946, "user_id": 11227781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hW5DF.jpg?s=128&g=1", "display_name": "vurmux", "link": "https://stackoverflow.com/users/11227781/vurmux"}, "reply_to_user": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556380262, "post_id": 55881740, "comment_id": 98423108, "body": "If my answer helped you, I will be appreciated if you will accept it :)"}, {"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556380344, "post_id": 55881740, "comment_id": 98423131, "body": "It was the code above this script what messed it up. Do you know how to prevent earlier html code to mess up with this part of code? I&#39;m totaly new with perl and try to understand why my code didn&#39;t display correct"}, {"owner": {"reputation": 7946, "user_id": 11227781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hW5DF.jpg?s=128&g=1", "display_name": "vurmux", "link": "https://stackoverflow.com/users/11227781/vurmux"}, "reply_to_user": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556380522, "post_id": 55881740, "comment_id": 98423183, "body": "I don&#39;t understand you. It is not messed, they are on different lines. Or there is another HTML code? (Honestly, I nearly don&#39;t know Perl, I use my Python background for it :) )"}, {"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556380971, "post_id": 55881740, "comment_id": 98423309, "body": "Ah ok. I hade some other exercises I made before above this script. After putting the code in a new file without the previous exercises, the code worked perfectly, except for the thing you mentioned in your answer. ;-) I just started learning perl so everything is new to me. ;-)"}, {"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556381021, "post_id": 55881740, "comment_id": 98423325, "body": "I read somewhere I have to start a new CGI, but don&#39;t know how haha"}, {"owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "edited": false, "score": 0, "creation_date": 1556387525, "post_id": 55881740, "comment_id": 98425060, "body": "Maybe I better change my nickname to perldummy haha"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556387577, "post_id": 55881740, "comment_id": 98425074, "body": "Note that there&#39;s a module called Perl6::Form (Perl6-style forms for Perl5) that&#39;s generally preferred over the builtin forms."}], "tags": [], "owner": {"reputation": 7946, "user_id": 11227781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hW5DF.jpg?s=128&g=1", "display_name": "vurmux", "link": "https://stackoverflow.com/users/11227781/vurmux"}, "is_accepted": true, "score": 1, "last_activity_date": 1556376675, "creation_date": 1556376675, "answer_id": 55881740, "question_id": 55880123, "link": "https://stackoverflow.com/questions/55880123/format-multi-lines-dont-show-with-in-perl/55881740#55881740", "title": "Format multi-lines don&#39;t show with @* in Perl", "body": "<p>Just add <code>\\n</code> symbols, which means 'End of the line':</p>\n\n<pre><code>my $name = \"Fred Flinstone\";\nmy $address = \"Cave Stone Road 345\";\nmy $city = \"Cobblestone\";\nmy $state = \"Rock\";\nmy $zip = \"13131\";\n\nprint (\"&lt;span class='titel'&gt;\\n\");\n\n$~ = \"MULTILINE\";\nwrite;\n\nformat MULTILINE =\n===============================\n| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; |\n$name\n| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; |\n$address\n| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;, @&lt; @&lt;&lt;&lt;&lt; |\n$city,           $state, $zip\n===============================\n@*\n.\nprint (\"&lt;/span&gt;\\n\");\nprint (\"&lt;br&gt;&lt;br&gt;\\n\");\n</code></pre>\n\n<p>Will return:</p>\n\n<pre><code>&lt;span class='titel'&gt;\n===============================\n| Fred Flinstone              |\n| Cave Stone Road 345         |\n| Cobblestone      , Ro 13131 |\n===============================\n\n&lt;/span&gt;\n&lt;br&gt;&lt;br&gt;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11384050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4ScXZFC896Q/AAAAAAAAAAI/AAAAAAAACIs/8wVY3YGHx-Y/photo.jpg?sz=128", "display_name": "Perlstudent", "link": "https://stackoverflow.com/users/11384050/perlstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55881740, "answer_count": 1, "score": 1, "last_activity_date": 1556380307, "creation_date": 1556364727, "last_edit_date": 1556380307, "question_id": 55880123, "link": "https://stackoverflow.com/questions/55880123/format-multi-lines-dont-show-with-in-perl", "title": "Format multi-lines don&#39;t show with @* in Perl", "body": "<p>I would like to show this format correctly. I now get everything on one line. I would like to have the outcome on multiple lines printed. Hope somebody can help me out with this.</p>\n\n<pre><code>my $name = \"Fred Flinstone\";\nmy $address = \"Cave Stone Road 345\";\nmy $city = \"Cobblestone\";\nmy $state = \"Rock\";\nmy $zip = \"13131\";\n\nprint (\"&lt;span class='titel'&gt;\");\n\n$~ = \"MULTILINE\";\nwrite;\n\nformat MULTILINE =\n===============================\n| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; |\n$name\n| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; |\n$address\n| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;, @&lt; @&lt;&lt;&lt;&lt; |\n$city,           $state, $zip\n===============================\n@*\n.\n\n\nprint (\"&lt;/span&gt;\");\nprint (\"&lt;br&gt;&lt;br&gt;\");\n</code></pre>\n"}, {"tags": ["regex", "perl", "cpanel"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5052820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sRnNn.jpg?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5052820/mark"}, "edited": false, "score": 0, "creation_date": 1556392771, "post_id": 55873871, "comment_id": 98426407, "body": "Great, it works! I&#39;ve slightly improved on this to allow for a non-match of one of my sub.domains too &quot;john@local.mydomain.co.uk&quot; is now not matched by this:  <b>^(?!(?:john|peter|luke)\\@(?:(local\\.))?domdom\\.co\\.uk\\z)</b>  It appears to partially work however I&#39;m not sure it&#39;s totally syntax correct as it now produces a non-match for john@.mydomain.co.uk (note the .dot between @ and mydomain string). Only john@[server.]mydomain.co.uk should produce a non-match. Any ideas on how I should correct it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 5052820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sRnNn.jpg?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5052820/mark"}, "edited": false, "score": 0, "creation_date": 1556400724, "post_id": 55873871, "comment_id": 98428155, "body": "@Mark, The pattern you provided has a needless set of capture. But otherwise, it will match everything but the six strings it shouldn&#39;t match (the the previously mentioned plus the versions with <code>local.</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1556402014, "last_edit_date": 1556402014, "creation_date": 1556306959, "answer_id": 55873871, "question_id": 55873850, "link": "https://stackoverflow.com/questions/55873850/create-perl-regex-to-not-match-specific-emails/55873871#55873871", "title": "Create Perl Regex to &quot;Not Match&quot; Specific Emails", "body": "<pre><code>^(?!(?:john|peter|luke)\\@mydomain\\.co\\.uk\\z)\n</code></pre>\n\n<p>This matches everything except</p>\n\n<ul>\n<li><code>john@mydomain.co.uk</code></li>\n<li><code>peter@mydomain.co.uk</code></li>\n<li><code>luke@mydomain.co.uk</code></li>\n</ul>\n\n<hr>\n\n<pre><code>^(?!(?:john|peter|luke)\\@(?:local\\.)?mydomain\\.co\\.uk\\z)\n</code></pre>\n\n<p>This matches everything except</p>\n\n<ul>\n<li><code>john@mydomain.co.uk</code></li>\n<li><code>peter@mydomain.co.uk</code></li>\n<li><code>luke@mydomain.co.uk</code></li>\n<li><code>john@local.mydomain.co.uk</code></li>\n<li><code>peter@local.mydomain.co.uk</code></li>\n<li><code>luke@local.mydomain.co.uk</code></li>\n</ul>\n\n<hr>\n\n<p>You can make these case-insensitive by wrapping the whole in <code>(?i:...)</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 5052820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sRnNn.jpg?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5052820/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556412183, "creation_date": 1556306840, "last_edit_date": 1556312674, "question_id": 55873850, "link": "https://stackoverflow.com/questions/55873850/create-perl-regex-to-not-match-specific-emails", "title": "Create Perl Regex to &quot;Not Match&quot; Specific Emails", "body": "<p>To help fight spam, I've set up multiple \"Global Email Filters\" for a domain in cPanel, however these filters now appear to have overridden the cPanel \"Default Address = Discard\" setting that I have in place! So I am now trying to recreate the rule so that non-existant-user@mydomain.co.uk (spam) emails get discarded Eg.</p>\n\n<p>Email To (matches PERL regex):</p>\n\n<p>If Does Not Match This john OR peter OR luke @mydomain.co.uk</p>\n\n<p>Action:</p>\n\n<p>Discard</p>\n\n<p>*So john123@mydomain.co.uk would be a MATCH and be discarded BUT</p>\n\n<p>john@mydomain.co.uk or peter@mydomain.co.uk or luke@mydomain.co.uk would NOT be a match and be accepted for delivery.</p>\n\n<p>I'm hoping you can create this \"PERL\" regex for me.</p>\n\n<p>I've already tried this but it doesn't work - </p>\n\n<pre><code>(?!.*(john|peter|luke@mydomain.co.uk))\n</code></pre>\n"}, {"tags": ["perl", "sublimetext3"], "owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556291203, "creation_date": 1556291203, "question_id": 55870353, "link": "https://stackoverflow.com/questions/55870353/how-to-configure-syntaxfold-plugin-in-sublimetext-to-fold-perl-pod-comment", "title": "How to configure SyntaxFold plugin in SublimeText to fold perl pod comment", "body": "<p>I'm trying to configure my SublimeText to create folding markers for Perl POD (Plain Old Documentation) comments. How do I do this using the SyntaxFold plugin (<a href=\"https://github.com/jamalsenouci/sublimetext-syntaxfold\" rel=\"nofollow noreferrer\">https://github.com/jamalsenouci/sublimetext-syntaxfold</a>)?</p>\n\n<p>I have look at this <a href=\"https://stackoverflow.com/questions/22902305/sublime-code-folding-of-comments-as-in-ace\">Sublime code folding of comments (as in Ace)</a> , but I prefer something creates folding markers for POD comments.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1556269468, "post_id": 55864207, "comment_id": 98388612, "body": "<code>newvar=$(perl -pe &#39;s&#47;.+(Some_Dir\\&#47;)(.+)&#47;$2&#47;&#39; &lt;&lt;&lt; &quot;$initialvar&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1556281224, "post_id": 55864239, "comment_id": 98394836, "body": "Maybe point out that the backtick syntax is discouraged as obsolescent."}], "tags": [], "owner": {"reputation": 1089, "user_id": 10123217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffce4e4e2b34c804341df57e4e1636dd?s=128&d=identicon&r=PG&f=1", "display_name": "danrodlor", "link": "https://stackoverflow.com/users/10123217/danrodlor"}, "is_accepted": false, "score": 2, "last_activity_date": 1556281206, "last_edit_date": 1556281206, "creation_date": 1556269482, "answer_id": 55864239, "question_id": 55864207, "link": "https://stackoverflow.com/questions/55864207/correct-way-to-assign-regex-replace-to-a-variable-in-bash/55864239#55864239", "title": "Correct way to assign regex replace to a variable in bash", "body": "<p>You can use either of the following:</p>\n\n<pre><code>newvar=$(echo \"$initialvar\" | perl -pe 's/.+(Some_Dir\\/)(.+)/\\2/')\nnewvar=`echo \"$initialvar\" | perl -pe 's/.+(Some_Dir\\/)(.+)/\\2/'`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": true, "score": 2, "last_activity_date": 1556281192, "last_edit_date": 1556281192, "creation_date": 1556280436, "answer_id": 55867306, "question_id": 55864207, "link": "https://stackoverflow.com/questions/55864207/correct-way-to-assign-regex-replace-to-a-variable-in-bash/55867306#55867306", "title": "Correct way to assign regex replace to a variable in bash", "body": "<p>As for your question, it seems to consist of two challenges: One being assigning the output of running a command to a BASH variable, and the other being piping the content of a variable to the standard input of a Perl program.</p>\n\n<h1>One</h1>\n\n<pre><code>foo=$(bar)\n</code></pre>\n\n<p>runs <code>bar</code> and saves its output to the BASH variable <code>$foo</code>.</p>\n\n<h1><a href=\"https://stackoverflow.com/questions/6541109/send-string-to-stdin\">The other</a></h1>\n\n<p>Any of</p>\n\n<pre><code>echo \"$foo\" | bar\nbar &lt;(echo \"$foo\")\nbar &lt;&lt;&lt; \"$foo\"\n</code></pre>\n\n<p>runs <code>bar</code> with the content of <code>$foo</code> piped to its standard input</p>\n\n<h1>Combining the two</h1>\n\n<pre><code>baz=$(bar &lt;&lt;&lt; \"$foo\")\n</code></pre>\n\n<p>sets <code>$baz</code> to the value produced by <code>bar</code> having the content of <code>$foo</code> sent to its standard input.</p>\n\n<hr>\n\n<p>Secondly, a few Perl-related suggestions peripherally related to your question:</p>\n\n<p>I might instead use <code>perl -nE</code>:</p>\n\n<ul>\n<li><code>-n</code> will loop through each line like <code>-p</code>, but won't print by default.</li>\n<li><code>-E</code> will evaluate like <code>-e</code>, but with experimental features like <code>say</code> enabled.</li>\n</ul>\n\n<p>You can avoid escaping the slash in <code>Some_Dir/</code> by using another separator, e.g. <code>s!...!...!</code> or <code>m!...!</code>. Instead of replacing with <code>s//</code>, since you're just printing \"Some_Dir/\" if it matches, you might as well go and do that directly:</p>\n\n<pre><code>perl -nE 'say (m!Some_Dir/! ? \"Some_Dir/\" : $_)'\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>newvar=$(perl -nE 'say (m!Some_Dir/! ? \"Some_Dir/\" : $_)' &lt;&lt;&lt; \"$initialvar\")\n</code></pre>\n"}], "owner": {"reputation": 1364, "user_id": 1379826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MQPSd.jpg?s=128&g=1", "display_name": "Sos", "link": "https://stackoverflow.com/users/1379826/sos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "closed_date": 1556281267, "accepted_answer_id": 55867306, "answer_count": 2, "score": 0, "last_activity_date": 1556281314, "creation_date": 1556269341, "question_id": 55864207, "link": "https://stackoverflow.com/questions/55864207/correct-way-to-assign-regex-replace-to-a-variable-in-bash", "closed_reason": "Duplicate", "title": "Correct way to assign regex replace to a variable in bash", "body": "<p>I am trying to assign a variable to the result of a regex substitution in bash. For instance, when I run</p>\n\n<p><code>echo $initialvar | perl -pe 's/.+(Some_Dir\\/)(.+)/\\2/'</code></p>\n\n<p>I get the desired output from the <code>echo</code>. How would I assign a <code>newvar</code> to the resulting output?</p>\n\n<p>I've tried:</p>\n\n<pre><code>newvar= \"$($initialvar | perl -pe 's/.+(Some_Dir\\/)(.+)/\\2/')\"\nnewvar= echo $initialvar | perl -pe 's/.+(Some_Dir\\/)(.+)/\\2/'\n</code></pre>\n\n<p>but none of them work</p>\n"}, {"tags": ["linux", "oracle", "postgresql", "perl", "redhat"], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1556244257, "last_edit_date": 1556244257, "creation_date": 1556243939, "answer_id": 55859827, "question_id": 55859305, "link": "https://stackoverflow.com/questions/55859305/dbd-oracle-1-76-installation-issue/55859827#55859827", "title": "DBD-Oracle-1.76 installation issue", "body": "<p>If you're on Redhat/Fedora/RHEL/CentOS then try this before <code>make</code>:</p>\n\n<pre><code>sudo yum install libaio-devel\n</code></pre>\n\n<p>If Ubuntu (or Debian?) try:</p>\n\n<pre><code>sudo apt install libaio-dev\n</code></pre>\n\n<p>...or <code>sudo apt-get install libaio libaio1 libaio-dev</code></p>\n\n<p>I also needed:</p>\n\n<pre><code>export ORACLE_HOME=/wherever/oracle18-instantclient/instantclient_18_5\nexport LD_LIBRARY_PATH=\"$ORACLE_HOME:/usr/lib/x86_64-linux-gnu/\"\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/26200174/error-while-installing-dbdoracle\">Error while installing DBD::Oracle</a> might be helpful.</p>\n"}], "owner": {"reputation": 314, "user_id": 8461358, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/26284145b73ac0fbf44465d117f7596e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/8461358/abhinav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 55859827, "answer_count": 1, "score": 1, "last_activity_date": 1556244257, "creation_date": 1556239139, "last_edit_date": 1556242117, "question_id": 55859305, "link": "https://stackoverflow.com/questions/55859305/dbd-oracle-1-76-installation-issue", "title": "DBD-Oracle-1.76 installation issue", "body": "<p>I am setting up a new server for <code>POSTGRESQL</code>, so we have to migrate from <code>ORACLE</code> to <code>POSTGRES</code> while installing <code>DBD-Oracle-1.76</code> package. However, we are getting error even though we have exported <code>ORACLE_BASE</code>, <code>ORACLE_HOME</code>, <code>LD_LIBRARY</code>, <code>LD_LIBRARY_PATH</code>. </p>\n\n<p>Here is what I have tried:</p>\n\n<pre><code>make\n\nrm -f blib/arch/auto/DBD/Oracle/Oracle.so\ngcc  -shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -Wl,-z,relro  Oracle.o dbdimp.o oci8.o  -o blib/arch/auto/DBD/Oracle/Oracle.so     \\\n   -L/optware/oracle/12.2.0.1/client_1/lib -lclntsh -ldl -lm -lpthread -lnsl -lirc -limf -lirc -lrt -laio -lresolv -lsvml       \\\n</code></pre>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>/bin/ld: cannot find -laio\n      collect2: error: ld returned 1 exit status\n      make: *** [blib/arch/auto/DBD/Oracle/Oracle.so] Error 1</p>\n</blockquote>\n\n<p>Any ideas? Any help would be greatly appreciated!</p>\n"}, {"tags": ["perl", "indexing", "hash", "hashset"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1556231390, "post_id": 55858370, "comment_id": 98378071, "body": "<code>chomp</code>, <code>chomp</code>, <code>chomp</code>"}, {"owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1556231772, "post_id": 55858370, "comment_id": 98378173, "body": "Yes it works!!! I was sure it was something small and silly like this, thank you for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1556235843, "post_id": 55858801, "comment_id": 98379029, "body": "Just use <code>chomp</code> already, or you will be sad the first time you encounter something like <code>North America</code> in the first dataset."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1556283041, "post_id": 55858801, "comment_id": 98395880, "body": "Don&#39;t use <code>@tmp</code> when you could write <code>my ($code, $index) = split ...</code>."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1556356247, "post_id": 55858801, "comment_id": 98416908, "body": "@Dada ... or go crazy with anonymous arrays <b>;-)</b> ... <code>[split]-&gt;[1]</code>. See my response for an example of this kind of abuse with bonus <code>IO::All</code> madness. Seriously though <code>split</code> and autosplit (<code>-a</code> &amp; <code>@F</code> on the command line) are simple but powerful - like perl.  +1 for the LHS use of <code>()</code> for list context."}], "tags": [], "owner": {"reputation": 69, "user_id": 11370241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48242f71cd27664cbd1ef6174eca424f?s=128&d=identicon&r=PG&f=1", "display_name": "perl_noob", "link": "https://stackoverflow.com/users/11370241/perl-noob"}, "is_accepted": true, "score": 3, "last_activity_date": 1556293925, "last_edit_date": 1556293925, "creation_date": 1556234265, "answer_id": 55858801, "question_id": 55858370, "link": "https://stackoverflow.com/questions/55858370/how-to-use-a-column-of-index-values-to-create-a-new-column-in-a-separate-dataset/55858801#55858801", "title": "How to use a column of index values to create a new column in a separate dataset", "body": "<p>Here ya go. I used a hash ref, because I like them I think your split on \\t was causing the main issue of not being able to map correctly.</p>\n\n<p><code>EDIT: added chomp and ability to deal with space separated language names</code></p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $ds1_map;\n\nopen(my $fh1, \"&lt;\", 'dataset1') || die \"Could not open file dataset1 $!/n\"; \nwhile (my $line = &lt;$fh1&gt; ) {\n    chomp($line);\n    my @tmp = split(/\\s+/, $line);\n    my $i = shift @tmp;\n    my $str = join(' ', @tmp);\n    $ds1_map-&gt;{$i} = $str;\n}\nclose $fh1;\n\nopen(my $fh2, \"&lt;\", 'dataset2') || die \"Could not open file dataset2 $!/n\";\nwhile (my $line = &lt;$fh2&gt;) {\n    chomp($line);\n    my ($code, $index) = split(/\\s+/, $line);\n    if(defined($ds1_map-&gt;{$index})){\n        print \"$code\\t$index\\t$ds1_map-&gt;{$index}\\n\";\n    }\n}\nclose $fh2;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1557441940, "last_edit_date": 1557441940, "creation_date": 1556355736, "answer_id": 55878910, "question_id": 55858370, "link": "https://stackoverflow.com/questions/55858370/how-to-use-a-column-of-index-values-to-create-a-new-column-in-a-separate-dataset/55878910#55878910", "title": "How to use a column of index values to create a new column in a separate dataset", "body": "<p>Here is a way to do it that takes anonymous arrays created by <code>split</code>-ing each line in the reference data file and <code>map</code>-ing their elements into a set of hash keys/values.</p>\n\n<p>NB: I have used <a href=\"https://metacpan.org/pod/IO::All\" rel=\"nofollow noreferrer\"><code>IO::All</code></a> to shorten the script, it may not be efficient to slurp very large files in this way.</p>\n\n<pre><code>use IO::All ;                       \nmy @idx = io-&gt;file(\"dataset1.txt\")-&gt;chomp-&gt;slurp  ;               \nmy @data = io-&gt;file(\"dataset2.txt\")-&gt;chomp-&gt;slurp  ;\n\n# make an index hash_ref with successive elements of split lines           \nmy $index_hr = { map { [split]-&gt;[0] =&gt; [split]-&gt;[1] } @idx };\n\n# print lines where the second element matches index hashref key\nforeach my $line (@data) {                                \n  my $key = (split /\\s+/, $line)[1] ;                              \n  print join \" \", $line, $index_hr-&gt;{$key}, \"\\n\" ;    \n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>4638  3 Europe \n14372 3 Europe \n4464  1 Asia \n3498  2 Australia \n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 55858801, "answer_count": 2, "score": 3, "last_activity_date": 1557441940, "creation_date": 1556230986, "question_id": 55858370, "link": "https://stackoverflow.com/questions/55858370/how-to-use-a-column-of-index-values-to-create-a-new-column-in-a-separate-dataset", "title": "How to use a column of index values to create a new column in a separate dataset", "body": "<p>I have been having trouble with coupling values together between two datasets and I was wondering if someone could help me. I think I am close to a solution so hopefully someone can point out what might be wrong.</p>\n\n<p>So I have two types of datasets. One looks like this, let's call it dataset1:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>1 Asia \r\n2 Australia\r\n3 Europe</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>dataset1 contains my reference set where every number is linked to a value.\nThe other dataset, dataset2, looks something like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>4638  3\r\n14372 3\r\n4464  1\r\n3498  2</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>What I want to do is use the values of the second column from dataset2 and find the associated index value on the dataset1 so that I add a new column like this: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>4638  3 Europe  \r\n14372 3 Europe  \r\n4464  1 Asia\r\n3498  2 Australia</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>What I tried to do is create a hash of the values in the first dataset and use them as reference for the second database like this: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>open($fh, \"&lt;\", $dataset1) || die \"Could not open file $dataset $!/n\"; \r\n\r\nwhile (&lt;$fh&gt;) {\r\n    @tmp = split /\\t/, $_;\r\n    $area{$tmp[0]} = $tmp[1];\r\n}\r\n\r\nopen($fh2, \"&lt;\", $dataset2) || die \"Could not open file $dataset $!/n;\r\n\r\nwhile (&lt;$fh2&gt;) {\r\n   @tmp2 = split /\\t/, $_;\r\n    $code = $tmp2[0];\r\n    $index= $tmp2[1];\r\n    if(defined($area{$index})){\r\n        print \"$code\\t$index\\t$area{$index}\\n\";\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>When I execute the above command, I get no warnings but nothing is printed out. I assume there is an issue with the \"defined\" section but I am not sure how to resolve it. Any help will be greatly appreciated . </p>\n\n<p>Best,\nA.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556230996, "post_id": 55858278, "comment_id": 98377962, "body": "<code>${mod}</code> is presumably <code>${mode}</code>, right? Or do you have both <code>$mod</code> and <code>$mode</code>?"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556232437, "post_id": 55858278, "comment_id": 98378322, "body": "mod is just a variable name."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556299016, "post_id": 55858278, "comment_id": 98404482, "body": "That&#39;s why I&#39;m wondering why you&#39;re doing <code>${mod}</code> instead of <code>$mod</code>."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1556230900, "creation_date": 1556230900, "answer_id": 55858359, "question_id": 55858278, "link": "https://stackoverflow.com/questions/55858278/how-to-assign-a-combination-of-string-and-a-variable-to-another-variable/55858359#55858359", "title": "How to assign a combination of string and a variable to another variable?", "body": "<p><code>.</code> is the string concatenation operator in Perl.</p>\n\n<pre><code>$y = \"bar\";\n$z = \"foo\" . $y;\nprint $z;        # \"foobar\"\n</code></pre>\n\n<p>Some expressions inside pairs of <code>\"</code>double-quotes<code>\"</code> are also interpolated (the interpolation rules can get pretty complicated), so writing a string expression with interpolated variables is another way to concatenate strings.</p>\n\n<pre><code>$y = \"bar\";\n$z = \"foo$y\";\nprint $z;        # \"foobar\";\n\n$z = \"$ybaz\";    # this won't work, looks for a single var named '$ybaz'\n$z = \"${y}baz\";  # but this will. I told you it gets complicated\nprint $z;        # \"barbaz\"\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556374764, "creation_date": 1556374764, "answer_id": 55881479, "question_id": 55858278, "link": "https://stackoverflow.com/questions/55858278/how-to-assign-a-combination-of-string-and-a-variable-to-another-variable/55881479#55881479", "title": "How to assign a combination of string and a variable to another variable?", "body": "<p>Concatenate string by <code>.</code> operator for anything; constant or variable, it may be origially numeric/other type that'd be coerced into string type<br>\nsome mistakes on here;</p>\n\n<pre><code>if (${mod} == \"xyz\") {\n$tmp_var = $mod #(\n$param\n) func_cell \n   (/*AUTO*/);\n} else {\n$tmp_var = $mod  func_cell \n   (/*AUTO*/);\n}\n</code></pre>\n\n<p>if <code>${mod}</code> is meant as scalar/plain variable; it'd be $mod, <code>{}</code> after a variable is mostly to make use a reference<br>\ntest $mod == \"xyz\" will be wrong if meant for string test, as it's operator are <code>eq, ne, lt, gt, le, ge</code><br>\nany <code>== != &gt;= &lt;= &lt; &gt;</code> symbol is for numeric test<br>\nI guess you mean<br>\n<code>$tmp_var = $mod.$func_cell</code><br>\nif the last is simple/scalar variable or </p>\n\n<p><code>$tmp_var = $mod.$func_cell</code><br>\nif as such obtained of subroutine return</p>\n"}], "owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 55858359, "answer_count": 2, "score": 0, "last_activity_date": 1556374764, "creation_date": 1556230177, "question_id": 55858278, "link": "https://stackoverflow.com/questions/55858278/how-to-assign-a-combination-of-string-and-a-variable-to-another-variable", "title": "How to assign a combination of string and a variable to another variable?", "body": "<p>How can I assign a combination of string and a variable to another variable?</p>\n\n<p>For example, I need to prepare a piece of code that I need to write in a file based on the <code>if</code> condition match. Here <code>$mod</code> and <code>$param</code> are variables and rest of them is just plain text that I need to write in a file.</p>\n\n<pre><code>$mode = \"abc\";\n$param = \"parameter\";\nif (${mod} == \"xyz\") {\n$tmp_var = $mod #(\n$param\n) func_cell \n   (/*AUTO*/);\n} else {\n$tmp_var = $mod  func_cell \n   (/*AUTO*/);\n}\n# Here I will write `$tmp_var` inbetween other text in my file.\n</code></pre>\n\n<p>If I run above code, I see <code>syntax errors</code> like <code>(Missing semicolon on previous line?)</code>. I am new to <code>Perl</code>. Can someone help me fixing the syntax?</p>\n"}, {"tags": ["perl", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "edited": false, "score": 0, "creation_date": 1556247718, "post_id": 55858223, "comment_id": 98381191, "body": "What do you mean by &quot;proxy server connection status&quot;? Look at LWP::Protocol::http -&gt; sub request."}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "edited": false, "score": 0, "creation_date": 1556493681, "post_id": 55858223, "comment_id": 98447136, "body": "Well, <code>200 OK</code> is proxy server connection status. You are connecting to a proxy and asking it to get <a href=\"http://example.com\" rel=\"nofollow noreferrer\">example.com</a> for you, in theory it might not even try to get <a href=\"http://example.com\" rel=\"nofollow noreferrer\">example.com</a> and still return <code>200 OK</code> :-)"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1556229809, "creation_date": 1556229809, "question_id": 55858223, "link": "https://stackoverflow.com/questions/55858223/is-it-possible-to-add-some-debug-output-when-lwpuseragent-connected-to-proxy", "title": "Is it possible to add some debug output when LWP::UserAgent connected to proxy?", "body": "<p>I have a very simple example Perl script</p>\n\n<pre><code>$ cat proxy.pl\nuse strict;\nuse warnings;\nuse LWP::UserAgent ();\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(10);\n$ua-&gt;show_progress(1);\n$ua-&gt;proxy([\n    [ 'http' ] =&gt; 'http://142.93.46.194:3128/',\n]);\n$ua-&gt;get('http://example.com');\n</code></pre>\n\n<p>which prints following output</p>\n\n<pre><code>$ perl proxy.pl \n** GET http://example.com ==&gt; 200 OK\n</code></pre>\n\n<p>Any ready-to-use module which adds to debug output one more string which shows proxy server connection status ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1556224645, "post_id": 55857110, "comment_id": 98375810, "body": "Re &quot;<i>is there a point to wrapping this in a list context</i>&quot;, There&#39;s no list or list context here. Parens don&#39;t create lists; parens just change precedence. They have no effect there."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 2, "creation_date": 1556224720, "post_id": 55857110, "comment_id": 98375844, "body": "The comparison operator returns zero in the case where two values are equal, and the right hand side of the statement applies in this case. It&#39;s a fairly standard pattern in Perl."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1556225234, "last_edit_date": 1556225234, "creation_date": 1556225028, "answer_id": 55857355, "question_id": 55857110, "link": "https://stackoverflow.com/questions/55857110/under-what-circumstances-will-this-short-circuit-or-operator-return-the-second-d/55857355#55857355", "title": "Under what circumstances will this Short-Circuit OR operator return the second definition of this sort function?", "body": "<p>I believe you're asking about </p>\n\n<pre><code>$a-&gt;{key3} &lt;=&gt; $b-&gt;{key3} || $a-&gt;{defaultKey} &lt;=&gt; $b-&gt;{defaultKey}\n</code></pre>\n\n<p>In case there's any doubt, this is parsed as</p>\n\n<pre><code>( $a-&gt;{key3} &lt;=&gt; $b-&gt;{key3} ) || ( $a-&gt;{defaultKey} &lt;=&gt; $b-&gt;{defaultKey} )\n</code></pre>\n\n<p>Because <code>||</code> short circuits, its RHS (<code>$a-&gt;{defaultKey} &lt;=&gt; $b-&gt;{defaultKey}</code>) will only be evaluated if its LHS (<code>$a-&gt;{key3} &lt;=&gt; $b-&gt;{key3}</code>) returns false. So your question boils down to the following:</p>\n\n<blockquote>\n  <p><em>When does <code>$a-&gt;{key3} &lt;=&gt; $b-&gt;{key3}</code> return false?</em></p>\n</blockquote>\n\n<p><code>&lt;=&gt;</code> evaluates to </p>\n\n<ul>\n<li>-1 if its LHS is numerically less-than its RHS.</li>\n<li>0 if its LHS is numerically equal to its RHS.</li>\n<li>+1 if its LHS is numerically greater than its RHS.</li>\n</ul>\n\n<p>This means that <code>$a-&gt;{key3} &lt;=&gt; $b-&gt;{key3}</code> evaluates to</p>\n\n<ul>\n<li>-1 if <code>$a-&gt;{key3} &lt; $b-&gt;{key3}</code></li>\n<li>0 if <code>$a-&gt;{key3} == $b-&gt;{key3}</code></li>\n<li>+1 if <code>$a-&gt;{key3} &gt; $b-&gt;{key3}</code></li>\n</ul>\n\n<p>Of these three values, only <code>0</code> is false. This is the only time when the RHS of the <code>||</code> will be evaluated.</p>\n\n<p>This means that <code>$a-&gt;{key3} &lt;=&gt; $b-&gt;{key3} || $a-&gt;{defaultKey} &lt;=&gt; $b-&gt;{defaultKey}</code> evaluates to</p>\n\n<ul>\n<li>-1 if <code>$a-&gt;{key3} &lt; $b-&gt;{key3}</code></li>\n<li>-1 if <code>$a-&gt;{key3} == $b-&gt;{key3} &amp;&amp; $a-&gt;{defaultKey} &lt; $b-&gt;{defaultKey}</code></li>\n<li>0 if <code>$a-&gt;{key3} == $b-&gt;{key3} &amp;&amp; $a-&gt;{defaultKey} == $b-&gt;{defaultKey}</code></li>\n<li>+1 if <code>$a-&gt;{key3} == $b-&gt;{key3} &amp;&amp; $a-&gt;{defaultKey} &gt; $b-&gt;{defaultKey}</code></li>\n<li>+1 if <code>$a-&gt;{key3} &gt; $b-&gt;{key3}</code></li>\n</ul>\n\n<p>When used as a <code>sort</code> compare function, it causes the items to be sorted by <code>key3</code>, with ties broken by <code>defaultKey</code>.</p>\n\n<pre><code>+------------+------------+\n| key3       | defaultKey |\n+------------+------------+\n|          1 |          1 |\n|          1 |          2 |\n|          1 |          3 |\n|          2 |          1 |\n|          2 |          2 |\n|          2 |          3 |\n|          3 |          1 |\n|          3 |          2 |\n|          3 |          3 |\n+------------+------------+\n</code></pre>\n"}], "owner": {"reputation": 21519, "user_id": 639716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NN38X.png?s=128&g=1", "display_name": "pete", "link": "https://stackoverflow.com/users/639716/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55857355, "answer_count": 1, "score": 0, "last_activity_date": 1556225234, "creation_date": 1556223858, "question_id": 55857110, "link": "https://stackoverflow.com/questions/55857110/under-what-circumstances-will-this-short-circuit-or-operator-return-the-second-d", "title": "Under what circumstances will this Short-Circuit OR operator return the second definition of this sort function?", "body": "<p>I'm currently tasked with maintaining a Perl codebase, and I ran across a block like this:</p>\n\n<pre><code>if ($sorttype == 2) {\n    $subsort = ( sub { $a-&gt;{key2} &lt;=&gt; $b-&gt;{key2} } );\n}\nelsif ($sorttype == 3) {\n    $subsort = ( sub { $a-&gt;{key3} &lt;=&gt; $b-&gt;{key3} || $a-&gt;{defaultKey} &lt;=&gt; $b-&gt;{defaultKey} } );\n}\nelsif ($sorttype == 4) {\n    $subsort = ( sub { $b-&gt;{defaultKey} &lt;=&gt; $a-&gt;{defaultKey} } );\n}\nelsif ($sorttype == 5) {\n    $subsort = ( sub { $b-&gt;{key5} cmp $a-&gt;{key5} || $a-&gt;{defaultKey} &lt;=&gt; $b-&gt;{defaultKey} } );\n}\n</code></pre>\n\n<p>where the basic pattern appears to be:</p>\n\n<pre><code>$subsort = ( sub{keyComparison || defaultComparison} );\n</code></pre>\n\n<p><code>$subsort</code> is called later in this manner:</p>\n\n<pre><code>foreach (sort $subsort @dataArray) {\n    my $data = $_;\n    ...\n}\n</code></pre>\n\n<p>I'm not understanding the use of the Short-Circuit OR operator here.<br>\nUnder what possible circumstances, if any, would <code>$subsort</code> be defined by the <code>defaultComparison</code>?</p>\n\n<p>As a side question, is there a point to wrapping this in a list context (e.g., in parentheses)?<br>\nBy which, I mean:</p>\n\n<pre><code>$subsort = ( sub{keyComparison || defaultComparison} );\n\n# versus\n\n$subsort = sub{keyComparison || defaultComparison};\n</code></pre>\n\n<p>Note:<br>\nIf anyone can think of a better title for this question, please edit it (I suspect that if I could think of a better title, my google-fu would not have failed me).</p>\n"}, {"tags": ["perl", "cpan", "cpanm"], "comments": [{"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1556211821, "post_id": 55853606, "comment_id": 98370180, "body": "I don&#39;t have anything helpful to say, except that I also use orepan2, and it works as advertised for me. This sounds crazy, but have you tried something with a shorter version string?  Your tarball name indicates a version of  v1.20190424.1840, but the version in the index is 1.201904241840.  If your version is being truncated, that would explain what you&#39;re experiencing."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556212087, "post_id": 55853606, "comment_id": 98370303, "body": "See also <a href=\"https://stackoverflow.com/q/54768605/2173773\">Is it possible to add multiple versions of a module to a minicpan index?</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1556221905, "post_id": 55853606, "comment_id": 98374796, "body": "@DiabJerius, I&#39;m pretty sure the version in the file name isn&#39;t used at all. The CPAN indexer grabs the version from within the archive and puts it in <code>02packages.details.txt</code>, as orepan2 emulated."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556284453, "post_id": 55853606, "comment_id": 98396765, "body": "@ikegami I&#39;m assuming that the version in the filename is the same as what&#39;s in the archive (that&#39;s actually question for @LawrenceISiden), so if it differs from what&#39;s in the index, that might be an indication that the indexer is somehow mangling it."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556284897, "post_id": 55853606, "comment_id": 98397032, "body": "@ikegami [ran out of edit time] Without knowing the version in the archive, I&#39;m using the version on the filename as a proxy for it."}, {"owner": {"reputation": 8277, "user_id": 270511, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cdb15b84fe2146fa0f381240875081bd?s=128&d=identicon&r=PG", "display_name": "Lawrence I. Siden", "link": "https://stackoverflow.com/users/270511/lawrence-i-siden"}, "edited": false, "score": 0, "creation_date": 1556291988, "post_id": 55853606, "comment_id": 98401090, "body": "In the top-level module, the latest is &quot;$MyProj::MyMod::VERSION = &#39;v1.20190426.1432&#39;;&quot;  So the indexer drops the initial &#39;v&#39; and the second &#39;.&#39; I need to learn more about the version naming rules."}, {"owner": {"reputation": 8277, "user_id": 270511, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cdb15b84fe2146fa0f381240875081bd?s=128&d=identicon&r=PG", "display_name": "Lawrence I. Siden", "link": "https://stackoverflow.com/users/270511/lawrence-i-siden"}, "edited": false, "score": 0, "creation_date": 1556295220, "post_id": 55853606, "comment_id": 98402777, "body": "I tried again, removing the initial &#39;v&#39; from the version number, since I learned that it&#39;s unconventional. Still doesn&#39;t work without &quot;cpanm --mirror /path/to/my/darkpan --mirror-only MyProj::MyModule@1.xxx.yyy&quot;. Notice that I have to give a package name &quot;X::Y&quot;, not a dist name &quot;X-Y&quot;. How does cpan look up a dist in the index?"}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1556299238, "post_id": 55853606, "comment_id": 98404573, "body": "I&#39;ve had no problem with versions with a &#39;v&#39;.  What are the exact versions of the installed and darkpan packages?"}, {"owner": {"reputation": 8277, "user_id": 270511, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cdb15b84fe2146fa0f381240875081bd?s=128&d=identicon&r=PG", "display_name": "Lawrence I. Siden", "link": "https://stackoverflow.com/users/270511/lawrence-i-siden"}, "edited": false, "score": 0, "creation_date": 1557853452, "post_id": 55853606, "comment_id": 98901656, "body": "I got it to work my using vanilla versioning schema. Example: &quot;$My::Package::VERSION = &#39;1.004&#39;. Then I don&#39;t have to specify version number on command line for cpanm to find latest. This is what Dist::Zilla::Plugin::PkgVersion emits by default."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556221815, "post_id": 55855374, "comment_id": 98374755, "body": "No, it&#39;s the message given when asked to install a module and the latest version is already installed. It world otherwise install the latest version"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": -1, "last_activity_date": 1556216073, "creation_date": 1556216073, "answer_id": 55855374, "question_id": 55853606, "link": "https://stackoverflow.com/questions/55853606/cpanm-not-finding-newer-version-in-local-mirror/55855374#55855374", "title": "cpanm not finding newer version in local mirror", "body": "<p>as far as I know, cpanm is right, \u2018up-to-dateness\u2019 is based on the fact that something is installed that fits the minimal version specified... which you didn\u2019t. correct me if i\u2019m wrong, but there is a reinstall option that would do the trick and get any latest it can find</p>\n"}], "owner": {"reputation": 8277, "user_id": 270511, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cdb15b84fe2146fa0f381240875081bd?s=128&d=identicon&r=PG", "display_name": "Lawrence I. Siden", "link": "https://stackoverflow.com/users/270511/lawrence-i-siden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556216073, "creation_date": 1556208898, "question_id": 55853606, "link": "https://stackoverflow.com/questions/55853606/cpanm-not-finding-newer-version-in-local-mirror", "title": "cpanm not finding newer version in local mirror", "body": "<p>I created some proprietary Perl modules I can't share so I put them into a local \"darkpan\" with <a href=\"https://metacpan.org/pod/OrePAN2\" rel=\"nofollow noreferrer\">orepan2</a>. Here is the beginning of 02packages.details.txt.</p>\n\n<pre><code>[~] $ gunzip -c darkpan/modules/02packages.details.txt.gz\nFile:         02packages.details.txt\nURL:          http://www.perl.com/CPAN/modules/02packages.details.txt\nDescription:  DarkPAN\nColumns:      package name, version, path\nIntended-For: Automated fetch routines, namespace documentation.\nWritten-By:   OrePAN2 0.47\nLine-Count:   30\nLast-Updated: Wed Apr 24 15:44:46 2019\n\nMyProj::MyMod            1.201904241840         D/DU/DUMMY/MyProj-MyMod-v1.20190424.1840.tar.gz\n</code></pre>\n\n<p>When I type </p>\n\n<pre><code>cpanm --mirror=file:///path/to/darkpan --mirror-only MyProj::MyMod\n</code></pre>\n\n<p>it responds that MyProj::MyMod is up-to-date even though the version in darktab is newer.  To get it to install, I have to say \"MyProj::MyMod-201904241840\" on the command line.</p>\n\n<p>Why won't cpanm recognize that the version in the darkpan index is newer than the one installed?</p>\n\n<p>Why can't I just say</p>\n\n<pre><code>cpanm --mirror=file:///path/to/darkpan --mirror-only MyProj-MyMod\n</code></pre>\n\n<p>in order to load this as a module and not a single package?</p>\n"}, {"tags": ["perl", "perl-critic", "perl-tidy"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1556210984, "post_id": 55851371, "comment_id": 98369809, "body": "When you ran perltidy, did you tell it to modify your code in place with <a href=\"https://metacpan.org/pod/distribution/Perl-Tidy/bin/perltidy#-b,-backup-and-modify-in-place\" rel=\"nofollow noreferrer\"><code>-backup-and-modify-in-place</code></a>?"}, {"owner": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1556212666, "post_id": 55851371, "comment_id": 98370557, "body": "Yes, I&#39;ve used that. I&#39;ve also written the critic output to a new file and diffed them to make sure it&#39;s working and they are the same."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1556213197, "post_id": 55851371, "comment_id": 98370817, "body": "In that case, I can&#39;t reproduce your problem. Could you add a short, self-contained example that other people can run?"}, {"owner": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1556531569, "post_id": 55851371, "comment_id": 98457747, "body": "I&#39;ve included an example perl file, perlcriticrc and perltidy rc which can be used to recreate the problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1558150900, "post_id": 55851371, "comment_id": 99015571, "body": "On the off-chance, are you using some particular editors or a code management system? See <a href=\"https://github.com/Komodo/KomodoEdit/issues/2829\" rel=\"nofollow noreferrer\">this bug</a> for Komodo.  (I can&#39;t reproduce either)"}, {"owner": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "edited": false, "score": 0, "creation_date": 1558520064, "post_id": 55851371, "comment_id": 99125824, "body": "I&#39;m using VS Code but I get the problem when running on the command line too."}], "answers": [{"comments": [{"owner": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "edited": false, "score": 0, "creation_date": 1557909531, "post_id": 56133622, "comment_id": 98919822, "body": "I&#39;m getting the same problem: <code>perltidy had errors!! at line 1, near &#39;use strict;&#39;.</code>"}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "edited": false, "score": 0, "creation_date": 1557915290, "post_id": 56133622, "comment_id": 98923258, "body": "I&#39;m unable to reproduce your problem with the configuration given in your question, including the addition of <code>[CodeLayout::RequireTidyCode]</code>, using perlcritic v1.130 and perltidy v20170521. The critic complains about a few things, but &quot;perltidy had errors&quot; is not one of them."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 1, "last_activity_date": 1557846652, "creation_date": 1557846652, "answer_id": 56133622, "question_id": 55851371, "link": "https://stackoverflow.com/questions/55851371/perlcritic-not-recognising-code-that-has-been-tidied/56133622#56133622", "title": "Perlcritic not recognising code that has been tidied", "body": "<p>Put ...</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>... at the top of the file, before the package declaration, then you should be good.</p>\n\n<p>Tested against perlcritic v1.130</p>\n"}], "owner": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1557917459, "creation_date": 1556201560, "last_edit_date": 1557917459, "question_id": 55851371, "link": "https://stackoverflow.com/questions/55851371/perlcritic-not-recognising-code-that-has-been-tidied", "title": "Perlcritic not recognising code that has been tidied", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/perlcritic\" rel=\"nofollow noreferrer\">perlcritic</a> with <a href=\"https://metacpan.org/pod/perltidy\" rel=\"nofollow noreferrer\">perltidy</a> and while the other rules are applied, I'm, getting the following error message:</p>\n\n<pre><code>Code is not tidy at line 1, near 'package MyPackage;'.\n</code></pre>\n\n<p>I've run perltidy to tidy the code but I am still getting the problem. In the .perlcriticrc file I've added the following rule with the path to .perltidyrc file.</p>\n\n<pre><code>[CodeLayout::RequireTidyCode]\nperltidyrc = /path/to/.perltidyrc\n</code></pre>\n\n<p>I'm running perlcritic like this:</p>\n\n<pre><code>perlcritic --profile .perlcriticrc file.pm\n</code></pre>\n\n<p>I'm sure that perlcritic is using the rc file as I'm able to turn rules on and off by ammending the file content. I'm also sure that perltidy is using the correct rc file in the same way.</p>\n\n<p>How can I prevent this error without disabling the RequireTidyCode rule?</p>\n\n<p>I've added an example to recreate the problem by cutting the actual files down to the minimum where I'm still getting the error. This is how I'm running it:</p>\n\n<pre><code>cd /tmp\nperltidy -b -nst TestCritic.pm\nperlcritic --profile /tmp/.perlcriticrc /tmp/TestCritic.pm\n</code></pre>\n\n<p>The first line of the critic output is:</p>\n\n<pre><code>Code is not tidy at line 1, near 'package TestCritic;'.\n</code></pre>\n\n<p>These are the files:</p>\n\n<p><strong>TestCritic.pm</strong></p>\n\n<pre><code>package TestCritic;\n\nsub startup {\n    my $self = shift;\n\n    my $config;\n    my $service_name;\n\n    if ( defined $ENV{MYVAR} ) {\n        if ( $ENV{MYVAR} eq 'TESTVAL' ) {\n            $config       = { Config =&gt; { file =&gt; '/tmp/tmp.txt' } };\n            $service_name = 'TestCritic.' . $$;\n        }\n    }\n}\n\n1;\n</code></pre>\n\n<p><strong>.perltidyrc</strong></p>\n\n<pre><code>-pbp\n-lp\n-bar\n-l=120\n-nolc\n-vmll\n-cti=1\n-pt=0\n-vt=0\n-vtc=0\n</code></pre>\n\n<p><strong>.perlcriticrc</strong></p>\n\n<pre><code># Show all errors\nseverity = 1\nverbose = 11\ntheme = core + pbp + bugs + maintenance + cosmetic + complexity + security + tests\nexclude = Subroutines::ProhibitCallsToUndeclaredSubs\n</code></pre>\n\n<p>Versions are:\nperlcritic v1.132\nperltidy v20181120</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["perl", "pipe", "fifo", "rhel5", "overlapped-io"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556214810, "post_id": 55851122, "comment_id": 98371528, "body": "This can be tricky business.  Can you not show us your (relevant) code?"}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1556206021, "post_id": 55851750, "comment_id": 98367322, "body": "I will try it out and come back with results. If it works, I shall accept your answer as solution. One thing - opening with &#39;&lt;&#39; mode seems not to work. It stops reading after reading one line."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1556206903, "post_id": 55851750, "comment_id": 98367824, "body": "Ah\u2014if you read the file in &#39;&lt;&#39; mode, I think you will encounter EOF each time there is no more data in the pipe. You can reset that condition with <code>seek($fh, 0, 1);</code> but perhaps the &#39;+&lt;&#39; mode is a quirky way of avoiding EOF conditions. The last time I had a job like this I used datagram-based sockets instead of a FIFO, so none of this quirkiness was an issue. Maybe you could consider that as an alternative approach."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556207736, "post_id": 55851750, "comment_id": 98368278, "body": "Re &quot;<i>I think you will encounter EOF each time there is no more data in the pipe.</i>&quot;, That&#39;s not true. The read will block (or return error <code>EAGAIN</code> or <code>EWOULDBLOCK</code> on a nonblocking handle). It does return EOF when the writer closes the handle though."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556208428, "post_id": 55851750, "comment_id": 98368644, "body": "Yeah, I&#39;m thinking of the case where you&#39;re chasing the tail of a real file. But do the writers close the FIFO between writes? It&#39;s a named FIFO, so such behaviour is possible. We&#39;d need to see the code."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1556538564, "post_id": 55851750, "comment_id": 98461090, "body": "select on file handle worked like a charm. Now there are no more overlapping data lines in the output. Thanks for sharing your knowledge. I really appreciate that. Answer accepted and up-voted as it was the right thing to do. Cheers."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": true, "score": 1, "last_activity_date": 1556202619, "creation_date": 1556202619, "answer_id": 55851750, "question_id": 55851122, "link": "https://stackoverflow.com/questions/55851122/overlapping-output-while-reading-from-fifo-how-to-fix-avoid-this/55851750#55851750", "title": "overlapping output while reading from fifo: how to fix/avoid this?", "body": "<p>You may have to turn autoflush on for the file to which you are writing. If you're opening the files using the open() function rather than via an OO interface like IO::File, then after you succeed in opening the file (as $fifo, say), you need code like so.</p>\n\n<pre><code>select $fifo;\n$| = 1;\n</code></pre>\n\n<p>Note that select() chooses the output filehandle for prints and such like that don't specify a particular filehandle. If you want to revert back to targeting STDOUT, then <code>select STDOUT</code> after the above, or, to be pedantic:</p>\n\n<pre><code>my $oldfh = select $fifo;\n$| = 1;\nselect $oldfh;\n</code></pre>\n\n<p>I don't think the file modes ('+&lt;' etc) have anything to do with it, since concepts like \"clobbering\" and \"appending\" don't apply to FIFOs. You'd probably do just as well with simple \">\" and \"&lt;\".</p>\n"}, {"tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 0, "last_activity_date": 1556208111, "creation_date": 1556208111, "answer_id": 55853413, "question_id": 55851122, "link": "https://stackoverflow.com/questions/55851122/overlapping-output-while-reading-from-fifo-how-to-fix-avoid-this/55853413#55853413", "title": "overlapping output while reading from fifo: how to fix/avoid this?", "body": "<p>It's possible that what you are seeing here is a simple product of concurrency. You are assuming that the reader pulls data out of the FIFO in a timely manner. What if both writers have the opportunity to write several records before the reader gets another shot at reading? What if the FIFO reaches capacity part-way through a write? The writer will block part way through a write, and then the reader will have an opportunity to empty the queue, but there's no guarantee that the writer which wrote the partial line will be the next one to write. This would result in interleaved lines.</p>\n\n<p>If my answer regarding autoflush does not solve your problem, you may have to consider the possibility that writes are being interleaved in this manner.</p>\n\n<p>As mentioned in a comment above, you may be better off using datagram sockets (SOCK_DGRAM) rather than a FIFO. In this way, each message is an atomic unit with no chance of interleaving.</p>\n"}], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 55851750, "answer_count": 2, "score": 3, "last_activity_date": 1556540281, "creation_date": 1556200843, "last_edit_date": 1556540281, "question_id": 55851122, "link": "https://stackoverflow.com/questions/55851122/overlapping-output-while-reading-from-fifo-how-to-fix-avoid-this", "title": "overlapping output while reading from fifo: how to fix/avoid this?", "body": "<p>I am trying to aggregate data from 2 files, so I decided to send the data via separate writer processes to a named fifo, and launched a separate reader process to read and process the aggregated data. All reading/writing is happening on a ramdisk (/dev/shm) which is conveniently large around 100 Gigabytes.</p>\n\n<p>This works file and I ensured that each of data line being written to the fifo is less than 512 bytes so pipe can retain its atomic behavior.</p>\n\n<p>But after trying out multiple runs I have come to observe that reader process is receiving overlapped output and this starts to happen when I try to pipe  around more than 10 million lines from each process. Each of my data lines is terminated with a new line.</p>\n\n<p>I am opening fifo in \"+&lt; fifo\" mode to read and \">> fifo\" to write. Not using syscalls here, just using normal open to get a file handle and trying to process the data line by line.</p>\n\n<p>How can I start to investigate this. Any ideas?</p>\n\n<p>Many thanks.</p>\n\n<p><strong>update as on 2019/APR/29</strong>: </p>\n\n<p>Note that my loops are now using syscalls. Previously I was not using them but decided to use them eventually.</p>\n\n<p>The same thing can also be achieved by having 2 processes write to a single file but one needs to take caution as this will only work on POSIX compliant file systems OR if one doesn't have that - one could keep the log file (where multiple processes will perform write) in a RAMDISK as it also works. NFS drives are out of scope as it is not POSIX compliant and this technique does not work on it. </p>\n\n<p>So if we talk about FIFO vs a textfile - multiple processes reading/writing to a file is faster than multiple processes reading/writing to a FIFO.</p>\n\n<p>Just for the upcoming readers, here is my writer &amp; reader process code. How you design your code to incorporate these sub-routines is up to you. Plenty of ways to do it.</p>\n\n<p>Hope it was useful.</p>\n\n<p><strong>writer process</strong></p>\n\n<pre><code>  write_log =&gt; sub {\n    my ($filehandle, $log_message) = @_;\n    select $filehandle ; $|++;\n    syswrite ($filehandle, $log_message, length($log_message))\n      or die \"write_log: syswrite fail!\\n\";\n  },\n</code></pre>\n\n<p><strong>reader process:</strong></p>\n\n<pre><code>  read_log =&gt; sub\n  {\n    # In my endless reading loop,\n    # if I detect keyword END 2 times (as \n    # i have 2 processes), I exit the reading loop\n    # and do further operations.\n    #\n    my ($end_check_value) = @_;\n\n    sysopen (FH,$logfile, O_CREAT|O_RDONLY)\n      or die \"($$) read_log: Failed to sysopen\\n\";\n\n    my ($h, $end) = (undef,0);\n\n    select FH ; $|++ ;\n\n    print STDOUT get_ts().'|'.\"($$) read_log: now tailing logfile with check count $end_check_value\\n\";\n\n    for (;;)\n    {\n      while (my $line = &lt;FH&gt;)\n      {\n        chomp $line;\n        $end++ if $line =~ m/END/g;\n        last if $end == $end_check_value;\n        my $key = (split(/\\s/,$line))[0];\n        $h-&gt;{$key}++;\n      }\n\n      sleep(1) ; seek (FH,0,1);\n\n      # break out of for loop if we\n      # have collected the 'END' tags\n      # from all worker processes\n      if ($end == $end_check_value)\n      {\n        print STDOUT get_ts().'|'.\"($$) read_log: breaking for loop \",\n                     \"with end_check: $end_check_value\\n\";\n        last;\n      }\n    } close (FH);\n  },\n</code></pre>\n\n<p><strong>Performance Stats:</strong></p>\n\n<p>Here is the performance stats for multiple processes writing to a single file on RAMDISK. On avrage it takes about 10 minutes plus minus 20 seconds to write 150,000,000 lines (150 mn) and read then into a hash.</p>\n\n<pre><code>test string is 238 bytes long\n20190429-12:34:50.637|(11139) PARENT: each child will write (75000000) to (/dev/shm/multi_proc_test_logfile.log)\n20190429-12:34:54.399|(11139) trunc_log_file: truncated (/dev/shm/multi_proc_test_logfile.log)\n20190429-12:34:54.399|(11149) process no. (2) launched!\n20190429-12:34:54.399|(11150) process no. (1) launched!\n20190429-12:34:55.400|(11139) read_log: now tailing logfile with check count 2\n20190429-12:44:21.565|(11150) process exiting with status code 0\n20190429-12:44:34.164|(11149) process exiting with status code 0\n20190429-12:45:03.956|(11139) read_log: breaking for loop with end_check: 2\n20190429-12:45:03.957|(11139) read_log: Collected counts:\n(11139) (11149):75000000\n(11139) (11150):75000000\n---------------\n(11139) Finished!\n\nreal    **10m13.466s**\nuser    9m31.627s\nsys     0m39.650s\n</code></pre>\n\n<p>Here is the performance stats for FIFO where multiple processes write 25,000,000 lines each to the FIFO and reader process read them back into a hash. On average it took about 25-30 minutes. Its slower than processes writing to a file.</p>\n\n<pre><code>test string is 141 bytes long\n20190426-10:25:13.455|28342|2-test-fifo.pl: Starting..\n20190426-10:25:13.456|28345|CHILD starting (read_and_hash)\n20190426-10:25:13.456|28345|READ_AND_HASH now hashing files\n20190426-10:25:14.458|28346|CHILD starting (s1_data_gather)\n20190426-10:25:14.458|28346|Working on sit1 data..\n20190426-10:25:14.458|28347|CHILD starting (s2_data_gather)\n20190426-10:25:14.458|28347|Working on sit2 data..\n20190426-10:48:48.454|28346|Finished working on S1 data..\n20190426-10:48:48.457|28342|Reaped 28346\n20190426-10:48:48.462|28345|read LAST line from S2 data\n20190426-10:48:52.657|28347|Finished working on s2 data..\n20190426-10:48:52.660|28342|Reaped 28347\n20190426-10:48:52.669|28345|read LAST line from S2 data\n20190426-10:48:53.130|28345|READ_AND_HASH finished hashing files\n(read_n_hash): finished hashing. keys count\n        s1 = 25000000\n        s2 = 25000000\n20190426-10:48:53.130|28345|starting comparison. doing source to target\n20190426-10:49:49.566|28345|finished comparing source to target. now comparing target to source\n20190426-10:50:45.578|28345|comparing target to source ends. finished\n20190426-10:51:57.220|28342|Reaped 28345\n20190426-10:51:57.220|28342|2-test-fifo.pl: Ending..\n</code></pre>\n"}, {"tags": ["perl", "logging"], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556201604, "post_id": 55850590, "comment_id": 98364545, "body": "This is a fair answer, but you don&#39;t need <code>Time::Piece</code>: you can just <code>use POSIX qw(strftime);</code> and then do <code>my $filename = strftime(&quot;%Y%m%d-Report.txt&quot;, localtime());</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556205525, "post_id": 55850590, "comment_id": 98367059, "body": "@TFBW: True. But I prefer to use objects when I can."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 1, "creation_date": 1556215117, "post_id": 55850590, "comment_id": 98371664, "body": "Or <code>perl -MTime::Piece -wE&#39;$today = (localtime)-&gt;ymd(&quot;&quot;); say $today&#39;</code>.  @TFBW -- I, too, prefer <code>T::P::strftime</code> to POSIX. (For one, it usually turns out that there&#39;s actually more to do with dates.)"}, {"owner": {"reputation": 19, "user_id": 9242251, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155743994751084/picture?type=large", "display_name": "Kian Bramwell", "link": "https://stackoverflow.com/users/9242251/kian-bramwell"}, "edited": false, "score": 0, "creation_date": 1556269770, "post_id": 55850590, "comment_id": 98388796, "body": "Hey dave.  I actually did try and update to I believe it was 5.23 ? But it started throwing errors. And my knowledge in Perl is really not anything to brag about.  However, your update saved me, using the two variables to store date and then date+name and writing it has worked.  I agree, production environments should always be as up to date as possible. But when its something I dont have a lot of knowledge of, I prefer to just make the changes needed and let someone with the know-how, update and correct as needed.  -------------- I&#39;m grateful for your help, thanks a bunch!!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1556293156, "post_id": 55850590, "comment_id": 98401687, "body": "<i>I believe it was 5.23</i> The minor version in Perl&#39;s version number (the &quot;23&quot; in &quot;5.23&quot;) is a way to see if the version is a development version or a production version. Odd minor versions (like 23) are development versions of Perl and should never be installed on a production environment. The most recent production version of Perl is 5.28.2 (which was released just a week ago)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1556266154, "last_edit_date": 1556266154, "creation_date": 1556199370, "answer_id": 55850590, "question_id": 55849972, "link": "https://stackoverflow.com/questions/55849972/naming-the-file-to-current-date/55850590#55850590", "title": "Naming the file to current date", "body": "<p>The <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> module changes the standard <code>localtime()</code> function so that it returns an object representing the current time. That object has a <code>strftime()</code> method that will return that time as a string formatted using a template which you pass to the method.</p>\n\n<pre><code>use feature 'say';\nuse Time::Piece;\n\nmy $now = localtime;\n\nsay $now-&gt;strftime('%Y%m%d'); # %Y = year; %m = month; %d = date\n</code></pre>\n\n<p>You could use that in your code like this:</p>\n\n<pre><code>use feature 'say';\nuse Time::Piece;\n\nmy $now = localtime;\n\nmy $today = $now-&gt;strftime('%Y%m%d');\n\n# Note: I've switched to the three-arg version of open()\n# and a lexical filehandle. Both are considered best practice.\n# I've also checked the return value from open() and killed\n# the program if it fails.\nopen my $log_fh, '&gt;&gt;', \"$today-Report.txt\"\n  or die \"Cannot open $today-Report.txt: $!\";\n</code></pre>\n\n<p><strong>Update:</strong> In your follow-up answer, you talk about getting errors trying my code. As you suspect, these errors all stem from the rather old version of Perl you are using. Perl 5.6.0 was released in March 2000 and I should point out that it has been completely unsupported by the Perl development team for a very long time. The features that are giving you problems were all added in Perl 5.10.0 (released in December 2007). I consider version 5.10 to be the absolute minimum version to use for a reasonable modern Perl development environment. I highly recommend that you upgrade to a more recent version of Perl.</p>\n\n<p>Having said that, it is (of course) possible to do this in your ancient version of Perl.</p>\n\n<pre><code>use POSIX 'strftime';\n\nmy $today = strftime('%Y%m%d', localtime);\nprint \"Today is: $today\\n\";\n\nmy $filename = \"$today-Report.txt\";\n\n# I'm not sure when modern file-opening practices\n# were added to Perl, so I've reverted to using a\n# really old syntax.\nopen LOG, \"&gt;&gt;$filename\"\n  or die \"Cannot open $filename: $!\";\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9242251, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155743994751084/picture?type=large", "display_name": "Kian Bramwell", "link": "https://stackoverflow.com/users/9242251/kian-bramwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 1, "accepted_answer_id": 55850590, "answer_count": 1, "score": 0, "last_activity_date": 1556277340, "creation_date": 1556197458, "question_id": 55849972, "link": "https://stackoverflow.com/questions/55849972/naming-the-file-to-current-date", "title": "Naming the file to current date", "body": "<p>I'm very new to perl, im used to C#</p>\n\n<p>I'm parsing multiple xml files for some antivirus data, multiple times each day.\nI'm trying to have it name the file the current date of the month, i.e. 20190425. And while its the same name, it appends to this file, if its a new day i.e. 20190426 it creates this new file and start appending to that</p>\n\n<p>I'm thinking using the log function, I could \"automate\" the check as it would just check if the filename exists.</p>\n\n<p>open (LOG, '>> report.txt'); #Append to report.txt</p>\n\n<p>Can I somehow stamp this name with the current date ? so it would be\nsay, 20190425-Report.txt ? And that way it would automatically create a new file \"tomorrow\" and start adding to it</p>\n\n<p>To have the script name the file the same as the current date.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1556195600, "post_id": 55849166, "comment_id": 98360541, "body": "i wanted to know how to do with perl"}, {"owner": {"reputation": 91, "user_id": 3848751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21f562f44f3c28edecab9cbe5442329?s=128&d=identicon&r=PG&f=1", "display_name": "Sergun_spb", "link": "https://stackoverflow.com/users/3848751/sergun-spb"}, "edited": false, "score": 0, "creation_date": 1556196038, "post_id": 55849166, "comment_id": 98360792, "body": "perl -we &#39;while(&lt;&gt;){ next unless $_=~/QQQQl[0-9]+/; print $_; }&#39; &lt; filename"}], "answers": [{"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556197257, "post_id": 55849878, "comment_id": 98361585, "body": "what is -we. Also some patterns may match multiline in that case what to do"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1556198889, "post_id": 55849878, "comment_id": 98362724, "body": "<code>-w</code> enables warnings, which isn&#39;t very useful here. <code>while(&lt;&gt;){ ... }</code> should be done with <code>-n</code> instead. <code>&lt; filename</code> could just be <code>filename</code>. <code>$_=~&#47;QQQQl[0-9]+&#47;</code> would be as clear and more concise as <code>&#47;QQQQl[0-9]+&#47;</code>."}], "tags": [], "owner": {"reputation": 91, "user_id": 3848751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21f562f44f3c28edecab9cbe5442329?s=128&d=identicon&r=PG&f=1", "display_name": "Sergun_spb", "link": "https://stackoverflow.com/users/3848751/sergun-spb"}, "is_accepted": false, "score": 1, "last_activity_date": 1556197152, "creation_date": 1556197152, "answer_id": 55849878, "question_id": 55849166, "link": "https://stackoverflow.com/questions/55849166/perl-print-to-console-all-the-matched-pattern/55849878#55849878", "title": "perl: print to console all the matched pattern", "body": "<p><code>perl -we 'while(&lt;&gt;){ next unless $_=~/QQQQl[0-9]+/; print $_; }' &lt; filename</code></p>\n"}, {"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556331655, "post_id": 55850345, "comment_id": 98413063, "body": "i was having some other case and tried <code>$ perl -0777nE &#39;say for &#47;^JWQL(?!JWQL|QWWK).*^QWWK&#47;g&#39; filename</code> But it does not work. Here <code>^JWQL(?!JWQL|QWWK).*^QWWK</code> will match between ^JWQL and ^QWWK and does not contain inbetween JWQL or QWWK (which are not in the beginning). But it does not work"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 0, "last_activity_date": 1556198655, "creation_date": 1556198655, "answer_id": 55850345, "question_id": 55849166, "link": "https://stackoverflow.com/questions/55849166/perl-print-to-console-all-the-matched-pattern/55850345#55850345", "title": "perl: print to console all the matched pattern", "body": "<pre><code>perl -ne 'print if /QQQQl[0-9]+/' filename\n</code></pre>\n\n<p>Or, if, for some reason, you insist on using <code>-0777</code>, you could do</p>\n\n<pre><code>perl -0777nE 'say for /QQQQl[0-9]+/g' filename\n</code></pre>\n\n<p>(or <code>print \"$_\\n\"</code> instead of <code>say</code>)</p>\n\n<p>Your code doesn't work because <code>/QQQQl[0-9]+/</code> returns true because <code>$_</code> indeed contains that pattern, but you never asked Perl to do anything based on that return value.</p>\n\n<p><code>-n</code> is preferable to <code>-p</code> in that case, since you don't want to print every line but only some (<code>-p</code> automatically prints every line, and there is very little you can do about it). </p>\n"}], "owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 55850345, "answer_count": 2, "score": -1, "last_activity_date": 1556198655, "creation_date": 1556194788, "question_id": 55849166, "link": "https://stackoverflow.com/questions/55849166/perl-print-to-console-all-the-matched-pattern", "title": "perl: print to console all the matched pattern", "body": "<p>I have mulitple lines </p>\n\n<pre><code>QQQQl123\n\nhsdhjhksd\n\nQQQQl234\n\najkdkjsdh\n\nQQQQl564\n</code></pre>\n\n<p>i want to print all matching QQQQl[0-9]+</p>\n\n<p>like</p>\n\n<pre><code>QQQQl123 \nQQQQl234 \nQQQQl564\n</code></pre>\n\n<p>how to do this using perl</p>\n\n<p>I tried:</p>\n\n<pre><code>$ perl -0777pe '/QQQQl[0-9]+/' filename\n</code></pre>\n\n<p>it shows nothing</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1556195315, "post_id": 55849142, "comment_id": 98360386, "body": "<code>\\x{d}</code> looks like a carriage return. You might want to <code>s&#47;\\r\\n$&#47;&#47;</code> instead of <code>chomp</code> (can&#39;t post an answer right now)"}, {"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1556195500, "post_id": 55849142, "comment_id": 98360493, "body": "I also thought about carrier return but when I print the string it doesn&#39;t print any carrier return, it only generates a problem when I use the string to open a file...."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1556198149, "post_id": 55849142, "comment_id": 98362214, "body": "Carriage returns don&#39;t really show when you try to print them (I mean <code>perl -E &#39;say &quot;ab\\r&quot;&#39;</code> doesn&#39;t &quot;show&quot; any carriage return, yet there is one). Did you try what I suggested and did it not work indeed? In your <code>while</code> loop, add <code>say join &quot;,&quot;, map ord, $row =~ &#47;.&#47;g;</code>, and see if it ends with 13."}, {"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1556205550, "post_id": 55849142, "comment_id": 98367075, "body": "I have tried it and it didn&#39;t work (syntax error). Are you sure about your command ?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1556206717, "post_id": 55849142, "comment_id": 98367708, "body": "Add <code>use feature &#39;say&#39;;</code> at the begining of your code (or replace <code>say</code> with <code>print &quot;$_\\n&quot;</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1556207628, "creation_date": 1556207628, "answer_id": 55853262, "question_id": 55849142, "link": "https://stackoverflow.com/questions/55849142/unwanted-xd-when-opening-a-file/55853262#55853262", "title": "unwanted \\x{d} when opening a file", "body": "<p>The value you are passing to <code>open_txt</code> ends with a Carriage Return.</p>\n\n<p>You presumably read the value from a file that had Windows (CRLF) line endings on a non-Windows machine.</p>\n\n<p>You presumably used <code>chomp</code> to remove the Line Feed, but left the Carriage Return in place.</p>\n\n<p>If so, replace</p>\n\n<pre><code>chomp;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>s/\\s+\\z//;\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55853262, "answer_count": 1, "score": -1, "last_activity_date": 1556207628, "creation_date": 1556194699, "question_id": 55849142, "link": "https://stackoverflow.com/questions/55849142/unwanted-xd-when-opening-a-file", "title": "unwanted \\x{d} when opening a file", "body": "<p>I have a .conf file where a list of tests to execute are written in a line, with different scenarios per test.\nIt looks like this :</p>\n\n<pre><code>scenario1,scenario2\nscenario1,scenario2,scenario3\nscenario1\n</code></pre>\n\n<p>In my code I open the file :</p>\n\n<pre><code>sub get_tests {\nmy $nb_tests = 0;\nmy @length_tests;\nmy @lists_scenarios;\nmy @current_list; \nmy $current_length; \n\n# Open the conf file with all the tests to execute\nmy $filename = $folder_lists_scenarios.$scenario_list.\".conf\";\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename) or die $!;\n# open my $fh, \"&lt;\", $folder_lists_scenarios.$scenario_list.\".conf\" or die $!;\n\n\n# Get all the scenarios\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;                                 # delete carrier return\n    $nb_tests++;                                # increment number of tests\n    @current_list = split(/,/, $row);           # separate the test into scenarios\n    $current_length = @current_list;            # get the number of scenarios in the test\n    push @length_tests, $current_length;        # store the number of scenarios\n    push @lists_scenarios, [@current_list];     # store the list of scenarios of the test\n}\n\n# Close the file\nclose $fh;\n\n\nreturn ($nb_tests, \\@length_tests, \\@lists_scenarios);\n</code></pre>\n\n<p>}</p>\n\n<p>My problem is that I use these strings to open files that have the name of the strings :</p>\n\n<pre><code>sub open_txt {\n# Open a txt file and return then content in an array\nmy $filename = \"folder_with_scenarios/\".$_[0].\"/content.txt\";\nmy @lines;\nmy $temp;\n\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename) or die \"Could not open file '$filename'. Please check if the file name is correct or in the good repertory.\";\n\nmy $cnt_line = 0;\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    $cnt_line++;\n    if ( length($row) &gt; 1 ) { # if the line is not empty\n        $temp = length($row);\n        push @lines, $row \n    } \n}\n\n# If the file is not empty\nif ($cnt_line &gt; 0) {\n    return ($cnt_line, @lines);\n\n# If the file is empty\n} else {\n    die \"[ERROR]     The file $filename is empty\\n\";\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And when I do this, the first scenarios of the line work well but the last of the line makes an error :</p>\n\n<pre><code>Uncaught exception from user code:\n/content.txt'. Please check if the file name is correct or in the good repertory. at ./my_code.pl line 2219.\n    main::open_txt('folder_with_scenarios/scenario2\\x{d}/content') called at ./my_code.pl line 2588\n</code></pre>\n\n<p>Apparently I have a \\x{d} at the end of my line string and I don't know how to get rid of it.</p>\n\n<p>Any idea ?</p>\n\n<p>Thanks,</p>\n\n<p>SLP</p>\n"}, {"tags": ["regex", "perl", "multiline", "text-processing"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1556185772, "post_id": 55845906, "comment_id": 98354899, "body": "Do you care about preserving the specific whitespace between words?  If not, an inner loop over <code>split</code> results would let you use the range operator word-by-word."}], "answers": [{"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556185273, "post_id": 55845980, "comment_id": 98354623, "body": "Also i want to satisfy the condition of (?!QWWK|KWWQ).) (i.e there will not be any QWWK and KWWQ inbetween"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556186040, "post_id": 55845980, "comment_id": 98355095, "body": "Could you add this specific case into the input sample?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1556184464, "creation_date": 1556184464, "answer_id": 55845980, "question_id": 55845906, "link": "https://stackoverflow.com/questions/55845906/perl-how-to-remove-particular-word-or-pattern-in-between-two-patterns/55845980#55845980", "title": "perl: how to remove particular word or pattern in between two patterns", "body": "<p>You can use the range operator:</p>\n\n<pre><code>perl -pe 's/PQXY//g if /^QWWK/ .. /KWWQ$/'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556185260, "post_id": 55846124, "comment_id": 98354608, "body": "Also i want to satisfy the condition of <code>(?!QWWK|KWWQ).)</code> (i.e there will not be any QWWK and KWWQ inbetween"}, {"owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "reply_to_user": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556185976, "post_id": 55846124, "comment_id": 98355057, "body": "I tested it with the multiline example data in the question. Seems to work for multiline."}, {"owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "reply_to_user": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556188600, "post_id": 55846124, "comment_id": 98356620, "body": "If you want to exclude the inner QWWK | KWWQ across multiple lines, you would need to read the entire file first. The  -p command line option will only read a line at the time, so the  /m regex option is not really used and thus no multiline match."}, {"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556190069, "post_id": 55846124, "comment_id": 98357427, "body": "assuming instead of PQXY i want to remove the new line how to do that."}, {"owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "reply_to_user": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556190951, "post_id": 55846124, "comment_id": 98357939, "body": "<code>s&#47;\\R&#47;&#47;g</code> woud remove newlines in a string containing multiple newlines"}], "tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1556192532, "last_edit_date": 1556192532, "creation_date": 1556184901, "answer_id": 55846124, "question_id": 55845906, "link": "https://stackoverflow.com/questions/55845906/perl-how-to-remove-particular-word-or-pattern-in-between-two-patterns/55846124#55846124", "title": "perl: how to remove particular word or pattern in between two patterns", "body": "<p><strong>Update:</strong>\nTo replace PQXY only if QWWK or KWWQ are NOT present between ^QWWK and KWWQ$ give this a try:</p>\n\n<pre><code>perl -pe 'if (/^QWWK/ .. /KWWQ$/) {s/PQXY//g if ! /.+QWWK/ &amp;&amp; !/KWWQ.+/}' filename\n</code></pre>\n\n<p>I'm sure it can be cleaned up / golfed, however I think it will give you what you are asking for.</p>\n"}, {"comments": [{"owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1556245038, "post_id": 55850701, "comment_id": 98380742, "body": "I will try this. I have to understand it a little bit"}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 1, "last_activity_date": 1556199718, "creation_date": 1556199718, "answer_id": 55850701, "question_id": 55845906, "link": "https://stackoverflow.com/questions/55845906/perl-how-to-remove-particular-word-or-pattern-in-between-two-patterns/55850701#55850701", "title": "perl: how to remove particular word or pattern in between two patterns", "body": "<p>If I understand your question correctly, this may be clearer with other tools than regexes.  The following does collapse any whitespace between words to a single space.</p>\n\n<p><strong>Input</strong> <code>qwwk.txt</code> (with one line added)</p>\n\n<pre><code>..........\n\nQWWK jhjh  kljdfh jklh jskdhf jkh PQXY\nlhj ah jh sdlkjh PQXY jha slkdjh\nPQXY jh alkjh ljk\nkjhaksj dkjhsd KWWQ\nhahs dkj h PQXY\n.........\n\nKWWQ in mid line doesn't trigger: QWWK a PQXY b KWWQ c QWWK d PQXY e KWWQ\n</code></pre>\n\n<p><strong>Command</strong> <code>perl qwwk.pl qwwk.txt</code></p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>..........\n\nQWWK jhjh kljdfh jklh jskdhf jkh\nlhj ah jh sdlkjh jha slkdjh\njh alkjh ljk\nkjhaksj dkjhsd KWWQ\nhahs dkj h PQXY\n.........\n\nKWWQ in mid line doesn't trigger: QWWK a PQXY b KWWQ c QWWK d PQXY e KWWQ\n</code></pre>\n\n<p><strong>Program</strong> <code>qwwk.pl</code></p>\n\n<pre><code>use strict; use warnings;\nwhile(&lt;&gt;) {             # for each line\n    my @out;\n    my @words=split;    # get its words\n\n    for my $i (0..$#words) {\n        my $w=$words[$i];\n        my $active = ($i==0 &amp;&amp; $w eq q(QWWK)) .. ($i==$#words &amp;&amp; $w eq q(KWWQ));\n            # Keep track of where we are.  See notes below.\n        push @out, $w unless $active and ($w eq q(PQXY));\n            # Save words we want to keep\n    } #foreach word\n\n    print join(q( ), @out), qq(\\n);     # Print the words we saved\n} #foreach line\n</code></pre>\n\n<p>The key is that the flip-flop (<code>..</code>) operator in the <code>$active= FOO .. BAR</code> assignment keeps its state regardless of what is happening around it.  It will be true from \na <code>QWWK</code> at the start of a line (<code>($i==0 &amp;&amp; $w eq q(QWWK))</code>) to a <code>KWWQ</code> at the end of the line (<code>($i==$#words &amp;&amp; $w eq q(KWWQ))</code>), regardless of how many lines intervene.</p>\n\n<p><strong>As a one-liner</strong></p>\n\n<pre><code>perl -Mstrict -Mwarnings -ne 'my @out; my @words=split; for my $i (0..$#words) { my $w=$words[$i]; my $active = ($i==0 &amp;&amp; $w eq q(QWWK)) .. ($i==$#words &amp;&amp; $w eq q(KWWQ)); push @out, $w unless $active and ($w eq q(PQXY)); } print join(q( ), @out), qq(\\n);' qwwk.txt\n</code></pre>\n\n<p>The difference here is that <code>-n</code> provides the <code>while(&lt;&gt;){}</code> loop, so that's not included in the <code>-e</code> script.  (Plus, now you know why I used <code>q()</code> and <code>qq()</code> in the standalone program ;) .)</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1556570742, "last_edit_date": 1556570742, "creation_date": 1556223020, "answer_id": 55856915, "question_id": 55845906, "link": "https://stackoverflow.com/questions/55845906/perl-how-to-remove-particular-word-or-pattern-in-between-two-patterns/55856915#55856915", "title": "perl: how to remove particular word or pattern in between two patterns", "body": "<p>Here is the approach you've tried, with the little more needed for it to work</p>\n\n<pre><code>perl -0777 -wpe's{^(QWWK (?:(?!QWWK|KWWQ).)*? KWWQ)$}{ $1 =~ s/PQXY//gr }egmsx' file\n</code></pre>\n\n<p>The <code>/e</code> <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">modifier</a> makes it evaluate the replacement side as code, and we run a regex there. </p>\n\n<p>In that regex the <code>/r</code> modifier makes it return the changed string (and not change the original, what allows us to run it on <code>$1</code> which is read-only).</p>\n\n<p>The requirement that the <code>^QWWK</code>-to-<code>KWWQ$</code> block of text not contain either of these phrases is satisfied by the code above but a few comments may be helpful.</p>\n\n<p>We <em>don't</em> need the non-greedy <code>.*?</code> since <code>.*</code> (following the negative lookahead) actually stops at <code>KWWQ$</code>.  But this is tricky to ascertain, and <code>.*</code> just has the potential to slurp up <em>all</em> up to the very last <code>KWWQ</code>, including all other possible blocks and any text between them.</p>\n\n<p>Altogether I just find <code>.*?</code> safer and simpler, specially as that <em>is</em> what is needed.</p>\n\n<p>The <code>QWWK</code> must start a line (it's given with <code>^</code> in the question) to be a marker for a block. If an extra <code>QWWK</code> is found inside the block then the whole block does not match. But, if that \"extra\" <code>QWWK</code> inside happens to be on the beginning of a line then</p>\n\n<ul>\n<li><p>what would've been a block doesn't match, since there is <code>QWWK</code> inside</p></li>\n<li><p>a block is in fact matched beginning with <em>that</em> <code>QWWK</code></p></li>\n</ul>\n\n<p>I use <code>/x</code> above so to be able to space out the pattern for readability.</p>\n"}], "owner": {"reputation": 5454, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 55856915, "answer_count": 4, "score": 4, "last_activity_date": 1556570742, "creation_date": 1556184168, "last_edit_date": 1556199855, "question_id": 55845906, "link": "https://stackoverflow.com/questions/55845906/perl-how-to-remove-particular-word-or-pattern-in-between-two-patterns", "title": "perl: how to remove particular word or pattern in between two patterns", "body": "<p>I want to remove some words within two patterns using perl</p>\n\n<p>The following is my text</p>\n\n<pre><code>..........\n\nQWWK jhjh  kljdfh jklh jskdhf jkh PQXY\nlhj ah jh sdlkjh PQXY jha slkdjh \nPQXY jh alkjh ljk\nkjhaksj dkjhsd KWWQ\nhahs dkj h PQXY\n.........\n</code></pre>\n\n<p>Now i want to remove all <code>PQXY</code> words which only lies between the two patterns\n<code>^QWWK</code> and <code>KWWQ$</code></p>\n\n<p>I know how to replace the whole thing inbetween the two patterns by the following command</p>\n\n<pre><code>perl -0777pe 's/^QWWK(?:(?!QWWK|KWWQ).)*KWWQ$/sometext/gms' filename\n</code></pre>\n\n<p>Also note that <code>^QWWK(?:(?!QWWK|KWWQ).)*KWWQ$</code> this pattern only matches those where there is no QWWK and KWWQ inbetween. </p>\n"}, {"tags": ["perl", "configuration"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1556175529, "post_id": 55843485, "comment_id": 98349436, "body": "<code>chomp $rev</code> to remove the newline from it."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556175635, "post_id": 55843485, "comment_id": 98349484, "body": "Why do you need to remove the header?"}, {"owner": {"reputation": 116, "user_id": 2943946, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d53c05d13c8a8dc8dc5a5ff6bf41c81?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/2943946/sudhir"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556176453, "post_id": 55843485, "comment_id": 98349883, "body": "First all, I would like to thank you for the method chomp. I wanted to remove, because, I am calling property file in ant. Is that possible?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1556179650, "post_id": 55843485, "comment_id": 98351498, "body": "Why not use <a href=\"http://p3rl.org/Config::Properties\" rel=\"nofollow noreferrer\">Config::Properties</a> then?"}, {"owner": {"reputation": 116, "user_id": 2943946, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d53c05d13c8a8dc8dc5a5ff6bf41c81?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/2943946/sudhir"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556181588, "post_id": 55843485, "comment_id": 98352513, "body": "Thanks a ton! for that pointer. However, I do see hash charcter is included beginning and end of the file. Is there anyway to remove? Thank you once again! <code>###############  builddate = Updated revision = 14794 version = ^&#47;easycare&#47;trunk  ###############</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1556183476, "post_id": 55843485, "comment_id": 98353558, "body": "Hash character should be ignored by ant."}, {"owner": {"reputation": 116, "user_id": 2943946, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d53c05d13c8a8dc8dc5a5ff6bf41c81?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/2943946/sudhir"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556184133, "post_id": 55843485, "comment_id": 98353944, "body": "Thank you! appreciate your inputs!"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 2943946, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d53c05d13c8a8dc8dc5a5ff6bf41c81?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/2943946/sudhir"}, "is_accepted": true, "score": 1, "last_activity_date": 1556184101, "creation_date": 1556184101, "answer_id": 55845885, "question_id": 55843485, "link": "https://stackoverflow.com/questions/55843485/perl-configsimple-adding-extra-control-characters-n-in-the-file/55845885#55845885", "title": "Perl Config::Simple: Adding Extra control characters (\\\\n) in the file", "body": "<p>Thanks to @choroba. Excellent inputs</p>\n\n<p>I tried using <strong>Config::Properties::Commons</strong></p>\n\n<pre><code> my $cpc = Config::Properties::Commons-&gt;new();\n     $cpc-&gt;load('temp.properties');\n     # Access\n     $cpc-&gt;set_property( builddate =&gt; 'Updated' );\n     $cpc-&gt;save('temp.properties');\n\nCode for **Config::Simple**\n\n    my $rev = `svn info --show-item revision /home/sudhir/Work/Workspaces/Eclipse/trunk`;\n\n        chomp($ver);\n        my $cfg = Config::Simple-&gt;import_from('easycare.properties', \\my %Config) or \n     die print \"ERROR: Not able to open easycare.properties file\";\n\n\n    $cfg-&gt;param(\"builddate\", $buildDate);\n    $cfg-&gt;param(\"revision\", $rev);\n    $cfg-&gt;param(\"version\", $ver);\n    $cfg-&gt;write() or die $cfg-&gt;error();\n</code></pre>\n"}], "owner": {"reputation": 116, "user_id": 2943946, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d53c05d13c8a8dc8dc5a5ff6bf41c81?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/2943946/sudhir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "accepted_answer_id": 55845885, "answer_count": 1, "score": 0, "last_activity_date": 1556184101, "creation_date": 1556175387, "last_edit_date": 1556179475, "question_id": 55843485, "link": "https://stackoverflow.com/questions/55843485/perl-configsimple-adding-extra-control-characters-n-in-the-file", "title": "Perl Config::Simple: Adding Extra control characters (\\\\n) in the file", "body": "<p>I have a program that has to read and write in configuration(properties) file from a perl script. I am using Config::Simple for the reading and writing operations.</p>\n\n<p>My question here is, I am able to read and write in properties file.\nHowever,when I am trying to update in one of the config value in property value, it adds control characters (\\n) and also want to remove default header created by \"cfg-write()\" method. I have tried searching forums and mentioned APIs, not information. Can someone throw some light?</p>\n\n<p>When I am trying to call date/time function, its not adding any extra characters. However, when I am trying to execute svn command, it add extra character. I have tried using printing command on console, it works perfectly without control character</p>\n\n<pre><code>my $buildDate = strftime('%d/%m/%y %H:%M:%S',localtime);\nmy $rev = `svn info --show-item revision`;\nmy $cfg = Config::Simple-&gt;import_from('temp.properties', \\my %Config);\n$cfg-&gt;param(\"builddate\", $buildDate);\n$cfg-&gt;param(\"revision\", $rev);\n$cfg-&gt;write() or die $cfg-&gt;error();\n</code></pre>\n\n<p><strong>Property-file:</strong></p>\n\n<pre><code>; Config::Simple 4.58\n; Thu Apr 25 10:59:10 2019\n\nversion=Build Automation\nrevision=14794\\\\n\nbuilddate=25/04/19 10:59:10\n</code></pre>\n\n<p>Expected Results:\n1) Need to remove control character (\\n) in revision config param\n2) cfg-write or cfg-autosave() writes default header to the file, which I would like to remove/ignore</p>\n\n<p>Actual Results:\n1) Extra control character(\\n) is added\n2) Default header is added to the property file</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1556170125, "post_id": 55842348, "comment_id": 98347421, "body": "Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a> and <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 41460, "user_id": 2310289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PO7Uz.jpg?s=128&g=1", "display_name": "Scary Wombat", "link": "https://stackoverflow.com/users/2310289/scary-wombat"}, "edited": false, "score": 1, "creation_date": 1556170126, "post_id": 55842348, "comment_id": 98347422, "body": "<code>In Perl</code> - why tag as java?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1556171752, "last_edit_date": 1556171752, "creation_date": 1556170978, "answer_id": 55842516, "question_id": 55842348, "link": "https://stackoverflow.com/questions/55842348/how-to-use-regex-in-file-io/55842516#55842516", "title": "How to use regex in file IO?", "body": "<p><code>-e</code> expects a file name, not a regular expression. You haven't shown what's inside <code>$_</code>, so we can't comment what's wrong with the first command.</p>\n\n<p>You can use <a href=\"http://p3rl.org/glob\" rel=\"nofollow noreferrer\">glob</a> to expand a pattern (switch to <code>File::Glob::bsd_glob</code> if $regr can contain whitespace):</p>\n\n<pre><code>for (@array) {\n    my @files = glob \"$regr/$_.*\";\n    print \"Found @files\";\n}\n</code></pre>\n\n<p>You can use <a href=\"http://p3rl.org/grep\" rel=\"nofollow noreferrer\">grep</a> to filter the names by a regex:</p>\n\n<pre><code>if (my @files = grep /\\.[0-9]+$/, glob \"$regr/$_.*\") {\n    print \"Found @files.\\n\" if -e $files[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11408676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b56508c0f19c06c84c90d58459f74fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Rudra ", "link": "https://stackoverflow.com/users/11408676/rudra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1556171752, "creation_date": 1556170013, "last_edit_date": 1556170649, "question_id": 55842348, "link": "https://stackoverflow.com/questions/55842348/how-to-use-regex-in-file-io", "title": "How to use regex in file IO?", "body": "<p><strong>In Perl</strong>\nI am trying to find a file(string) which is in array(contains file names) inside one directory. But in that directory the file is there along with some number. so it is not finding that file. </p>\n\n<p>File name in array is like : template_to_do,<br>\nExact name inside directory is like :  template_to_do.12345</p>\n\n<p>I used this code : </p>\n\n<pre><code>$regr = path to directory if(-e \"$regr/$_\")\n</code></pre>\n\n<p>It's not picking that file.\nI tried as reg exp as shown below but it also didn't work out.</p>\n\n<pre><code>if(-e \"m[$regr\\/$_.\\d*]\")\n</code></pre>\n"}, {"tags": ["python", "regex", "perl"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556162506, "post_id": 55841253, "comment_id": 98345768, "body": "<code>s&#47;</code> means <code>substitute</code> (replace). <code>s&#47;old&#47;new&#47;</code> - replace <code>old</code> with <code>new</code>,  <code>m&#47;</code> means <code>match</code> (check if you can find),  flag <code>g</code> = <code>global</code> (replace all <code>old</code>, not only first) , flag <code>i</code> = <code>insensitive</code> / <code>ignore case</code> (treads uppercase chars and lowercase chars as the same = <code>old</code>, <code>OLD</code>, <code>oLd</code>, <code>Old</code>, etc.), <code>s</code> = I don&#39;t know. Most regex should be very similar."}, {"owner": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556165113, "post_id": 55841253, "comment_id": 98346262, "body": "ok, what does this mean by the way: @X = (split /\\#\\#\\#\\#\\#\\#\\#/, $x) in the first part. For example: <code>$x =~ s&#47;([^\\&quot;])(item\\s+8[^0-9a-z\\&quot;]*.{0,40}financial\\s+statements[&zwnj;&#8203;^\\.])&#47;\\1#######ITEM8&zwnj;&#8203;:\\2#######&#47;gis;  @X = (split &#47;\\#\\#\\#\\#\\#\\#\\#&#47;, $x)</code> How do i use re.split with the <code>&#47;\\#\\#\\#\\#\\#\\#\\#&#47;</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556173449, "post_id": 55841253, "comment_id": 98348507, "body": "<code>X = re.split(&#39;\\#\\#\\#\\#\\#\\#\\#&#39;, x)</code> - almost the same - only without <code>&#47;</code> at both sides"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556169635, "last_edit_date": 1556169635, "creation_date": 1556168663, "answer_id": 55842128, "question_id": 55841253, "link": "https://stackoverflow.com/questions/55841253/converting-perl-regex-statement-to-python-regex/55842128#55842128", "title": "Converting Perl Regex Statement to Python Regex", "body": "<p>Imho the regex engine actually the same as python derived PCRE\nThe differences is in results related utilization/replacement</p>\n\n<p><code>s///g</code>  substitution global occurrences, would be re.sub()\n<code>s///</code>       \"        for # times                  re.sub() with specified #\nbut re.sub() returns a new string, does not modify its argument like in perl <code>a =~ s///</code></p>\n\n<p>with <code>i</code> option is case-insensitive would be re.IGNORECASE or re.I<br>\n     <code>s</code>           single-line ie. entire line treated as one pattern space at once<br>\n- I admit I've no idea this would be in Python</p>\n\n<p><code>(@M) = ($y =~ m/((?:\\d+:ITEM7 \\d+:\\d+ )+(?:\\d+:ITEM7A \\d+:\\d+ )*)(?:\\d+:ITEM8 \\d+:\\d+\\s*)+/g)</code></p>\n\n<p>Imho is simply</p>\n\n<blockquote>\n  <p>@arr = $y =~ /((?:\\d+:ITEM7 \\d+:\\d+ )+(?:\\d+:ITEM7A \\d+:\\d+ )<em>)(?:\\d+:ITEM8 \\d+:\\d+\\s</em>)+/g</p>\n</blockquote>\n\n<p>instructs perl:<br>\nmatch the pattern against whatever <code>y</code> variable contains and put all the succeeding results in <code>arr</code> array<br>\nwith @arr[0] assigned the first captured group, @arr[1] the second one, and so on and the last is the whole match without touch anything in original <code>y</code> var, in the case is only 1 captured group as (?:) capture none. Do it on global occurrences till the end of pattern space.  </p>\n\n<p>but for subsitution - assume a bit varied of the case : \n<code>$b  = $y =~ s/((?:\\d+:ITEM7 \\d+:\\d+ )+(?:\\d+:ITEM7A \\d+:\\d+ )*)(?:\\d+:ITEM8 \\d+:\\d+\\s*)+/TEST_\\1/g</code></p>\n\n<p>match the pattern against whatever <code>y</code> variable contains and substitute the succeeding results with <code>TEST_\\1</code> (which \\1 is meant to be substituted with the 1st capture group ()), overwriting onto original <code>y</code> variable, continue doing such also set it as the new pattern space, assigned the booelan true, or T or 1 into <code>b</code> var, if does not succeed leave <code>y</code> as is, assigned<br>\nbooelan false to <code>b</code></p>\n"}, {"comments": [{"owner": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556215439, "post_id": 55842131, "comment_id": 98371781, "body": "Thanks for the answer, just for the last part should I be using re.findall or re.search ? I believe I read somewhere that /m is the equivalent of re.search"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556215662, "post_id": 55842131, "comment_id": 98371920, "body": "@PutsandCalls Oh, right -- Python code needs <code>import re</code> (is that what you ask?).  I thought that you were fine with Python regex (and left it out). It should be there though and I will add it when I edit (shortly). Thank you for calling it."}, {"owner": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556218334, "post_id": 55842131, "comment_id": 98373147, "body": "I think I understand now, thank you for the help. Would you mind just helping clarify one more question in my original post ? I added an EDIT section, and I&#39;m a bit confused by the for loop. I would greatly appreciate the help ! In particular my confusion is about <code>if($X[$i] =~ m&#47;^(ITEM(?:7|7A|8)):(.*)$&#47;s)</code> what exactly does this return ?. Also, what does this syntax mean <code>$Y[$i] = $i . &#39;:&#39; . $1;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556220440, "post_id": 55842131, "comment_id": 98374088, "body": "@PutsandCalls  Edited and added a bit.  Also added a section at the end for your edit.  (But let&#39;s not add yet more so that this doesn&#39;t go off the rails :).  Let me know if things are unclear etc."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "edited": false, "score": 0, "creation_date": 1556771845, "post_id": 55842131, "comment_id": 98544021, "body": "@PutsandCalls I&#39;ve noticed only now (and accidentally!) that you added that subroutine to your &quot;Edit&quot; (it wasn&#39;t there initially?).  So I added a comment on it to the end of the answer -- but by now you have full answers to that from your follow-up question.  I hope that they are good  :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1569706276, "last_edit_date": 1569706276, "creation_date": 1556168672, "answer_id": 55842131, "question_id": 55841253, "link": "https://stackoverflow.com/questions/55841253/converting-perl-regex-statement-to-python-regex/55842131#55842131", "title": "Converting Perl Regex Statement to Python Regex", "body": "<p>First off, this whole thing can be written far more nicely, by setting up variables for components of that overly long pattern and then using them in the pattern itself.</p>\n\n<p>Practically all of the basic regex syntax that is supported in both of these languages is the same, or close enough, so that I won't list here what <code>[..]</code> or <code>\\s</code> mean. What needs translation is the overall operation (operators, functions, etc), and the few flags that are used</p>\n\n<ul>\n<li><p>The group of regex uses the <em>substitution <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">operator</em></a>, <code>$x =~ s/pattern/repl/</code>, whereby the substitutions are done on the variable <code>$x</code> (and in-place).  In python that is <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\">re.sub</a></p></li>\n<li><p>The trailing <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\"><em>modifiers</em></a> <code>/gis</code> in Perl regex mean: find and replace all occurrences of pattern (<code>/g</code>), ignore the case (<code>/i</code>), and make <code>.</code> match anything (<code>/s</code>), including the newline.  </p>\n\n<p>In python, to replace all occurrences of the pattern just leave out the <code>count</code>(or set it to zero), which would've been the fourth argument in <code>re.sub</code> below (between <code>string</code> and flags), while for the other two there are <em>flags</em>: \n<a href=\"https://docs.python.org/3/library/re.html#re.IGNORECASE\" rel=\"nofollow noreferrer\">IGNORECASE (or I)</a> and <a href=\"https://docs.python.org/3/library/re.html#re.DOTALL\" rel=\"nofollow noreferrer\">DOTALL (or S)</a></p></li>\n</ul>\n\n<p>Altogether we have</p>\n\n<pre><code>import re\n\nresult = re.sub(pattern, replacement, string, flags=re.I|re.S)\n</code></pre>\n\n<p>which returns the new string, unlike Perl's default in-place substitution, so assign <code>re.sub</code> back to the <code>string</code> if you wish to emulate the given regex. </p>\n\n<p>In addition to the reference <code>perlre</code> and the <code>perlop</code>, linked above, some other useful resources for Perl regex are the tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> and the quick reference <a href=\"https://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">perlreref</a>,</p>\n\n<hr>\n\n<p>Here is the first regex for a fuller example. I'd like to first rewrite it on the Perl side</p>\n\n<pre><code># Opening \"item\", a phrase, and phrases with alternation\nmy $item   = qr/(item\\s+7[^0-9a-z\\\"]*management(?:[^0-9a-z]{0,3}s)?\\s+/;\nmy $phrase = qr/discussions?\\s+and\\s+analysis\\s+of\\s+/;\nmy $pa1 = qr/(?:financial\\s+conditions?\\s+|results\\s+of\\s+operations?)/;\nmy $pa2 = qr/(?:\\s+and\\s+results\\s+of\\s+operations?|\\s+and\\s+financial\\s+conditions?)?)/\n\n$x =~ s/([^\\\"])$item$phrase$pa1$pa2/$1#######ITEM7:$2#######/gis;\n</code></pre>\n\n<p>I've used <a href=\"https://perldoc.perl.org/functions/qr.html\" rel=\"nofollow noreferrer\">qr</a> to construct a proper regex pattern (similar in spirit to <code>re.compile</code> object in Python), while in this case an ordinary string would be fine as well.</p>\n\n<p>I've replaced the long-outdated <code>\\1</code> and <code>\\2</code> on the replacement side by <code>$1</code> and <code>$2</code>.  (The <code>\\1</code> is used as a back-reference for work in the  matching side of the regex.)</p>\n\n<p>In Python, with the gigantic pattern as given in the question</p>\n\n<pre><code>patt = re.compile(\"...\", flags=re.I|re.S)\n\nstring = patt.sub(r\"\\g&lt;1&gt;#######ITEM7:\\g&lt;2&gt;#######/\", string)\n</code></pre>\n\n<p>or, better, first form subpatterns as above (ellipsis indicating that they need be completed)</p>\n\n<pre><code>item   = \"(item\\s+...\"\nphrase = \"discussions?...\"\npa1    = \"(?:financial\\s...\"\npa2    = \"(?:\\s...\"\n\npatt = re.compile(item+phrase+pa1+pa2, flags=re.I|re.S)\n\nstring = patt.sub(r\"\\g&lt;1&gt;#######ITEM7:\\g&lt;2&gt;#######/\", string)\n</code></pre>\n\n<p>The use of <code>re.compile</code> is by no means compulsory; <code>re.sub</code> (used directly in the beginning, for example) is most often exactly the same. But I consider <code>re.compile</code> as a nice device for code organization (leaving the efficiency question aside).</p>\n\n<p>If you're not in Python 3 (yet) you'll need <code>re.compile</code> in order to use flags.</p>\n\n<p>All of the pattern itself is the same in Python as far as I can see, so you can simply copy it.  </p>\n\n<p>An example: <code>(?:[^0-9a-z]{0,3}s)?</code> works as follows</p>\n\n<ul>\n<li><p>non-capturing <code>(?: ... )</code> groups things (but doesn't store any), so one can make it ...</p></li>\n<li><p>optional with <code>(?: ... )?</code> with that last <code>?</code> (match 0 or 1 time, on the whole thing)</p></li>\n<li><p>negated character class <code>[^0-9a-z]</code> matches anything other than a digit or low-case letter ...</p></li>\n<li><p>zero-to-three times with <code>[^0-9a-z]{0,3}</code> (but no need for <code>0</code> as <code>{3}</code> means the same)</p></li>\n<li><p>the <code>s</code> in the end is just the literal character <code>s</code></p></li>\n</ul>\n\n<p>Note that with the flag <code>/i</code> (<code>re.I</code>) the negated character class above excludes <em>all</em> letters.</p>\n\n<hr>\n\n<p>The last statement with a regex </p>\n\n<pre><code>my @M =  $y =~ m/(...)+/g;\n</code></pre>\n\n<p>matches all occurrences (<code>/g</code>) of the given pattern in the string <code>$y</code> \n(the <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">match operator <code>m//</code></a> is bound to <code>$y</code> by <a href=\"https://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\"><code>=~</code> operator</a>) and returns the list of matches, assigned to array <code>@M</code>. </p>\n\n<p>In Perl the match operator can return <code>1</code> or empty string (true/false)  <strong>or</strong> a list with the actual matches, depending on what <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> it is in. Here the <em>list context</em> is imposed on it by the fact that the expression <code>$y =~ m/.../</code> <a href=\"https://stackoverflow.com/q/54564428/4653379\">assigns to an array</a>.</p>\n\n<p>I've removed the unneeded parenthesis above and added declaration of the variable, <code>my @M</code>. I don't see anything interesting in that long pattern so I'm leaving it out. </p>\n\n<p>You get this in Python with the basic use of <a href=\"https://docs.python.org/3/library/re.html#re.findall\" rel=\"nofollow noreferrer\">re.findall</a></p>\n\n<hr>\n\n<p><em>Question's edit.</em> &nbsp;  The code</p>\n\n<pre><code>for($i = 0; $i &lt; scalar(@X); ++$i)\n</code></pre>\n\n<p>iterates through indices of the array <code>@X</code>, but a much nicer (and better) way is</p>\n\n<pre><code>for my $i (0..$#X)\n</code></pre>\n\n<p>using the syntax <code>$#X</code> for the last index of <code>@X</code> and the range operator <code>n .. m</code>.  The syntax <code>$X[$i]</code> is for the element of array <code>@X</code> which is at index <code>$i</code>.  Arrays in Perl are 0-based.</p>\n\n<p>Then inside the loop there is a simple condition based on a regex match</p>\n\n<pre><code>if ( $X[$i] =~ m/^(ITEM(?:7|7A|8)):(.*)$/s )\n</code></pre>\n\n<p>where the match operator <code>m//</code> here returns <code>1</code>/<code>''</code> (true/false), being in the <em>scalar context</em> (condition of the <code>if</code> statement ultimately needs a boolean value). So if there are matches the <code>if</code> gets a non-zero number and evaluates as true, otherwise code drops to <code>else</code>.  </p>\n\n<p>The modifier <code>/s</code>, also seen in substitution regex, makes <code>.</code> match newlines as well so that the whole pattern can match across lines in a multiline string.</p>\n\n<p>In both <code>if</code>-<code>else</code> branches elements of yet other arrays are set (<code>@Z</code> and <code>@Y</code>), and if there was a match then the patterns captured by the regex are used (<code>$1</code> and <code>$2</code>).</p>\n\n<p>Finally, the <code>.</code> is concatenation operator and the expression <code>$i . ':' . $1</code> joins the value of <code>$i</code>, literal <code>:</code>, and (the first capture) <code>$1</code>.   The <code>length_in_words()</code> is a subroutine.</p>\n\n<hr>\n\n<p><em>Edit: &nbsp; The subroutine <code>length_in_words()</code> has now been added to the question.</em>  </p>\n\n<p>In short: the subroutine takes a string and returns the number of words in it. </p>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\">shift</a> removes the first element from an array. By default it does this to <code>@_</code> (when in a sub), the array with function arguments. So <code>$x</code> is the input string, what the function has been called with.</p>\n\n<p>The regex matches all words (<code>\\S+</code> under <code>/g</code> modifier) in <code>$x</code> and returns that list, which is assigned to array <code>@k</code>. Then <code>scalar</code> takes the number of elements in an array, what is returned.</p>\n"}], "owner": {"reputation": 975, "user_id": 5801127, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4y5f8.png?s=128&g=1", "display_name": "PutsandCalls", "link": "https://stackoverflow.com/users/5801127/putsandcalls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 55842131, "answer_count": 2, "score": 1, "last_activity_date": 1569706276, "creation_date": 1556161708, "last_edit_date": 1556690560, "question_id": 55841253, "link": "https://stackoverflow.com/questions/55841253/converting-perl-regex-statement-to-python-regex", "title": "Converting Perl Regex Statement to Python Regex", "body": "<p>I need to convert some regex from perl to python, but I am not that familiar with perl regex.</p>\n\n<p>I have the following:</p>\n\n<pre><code>$x =~ s/([^\\\"])(item\\s+7[^0-9a-z\\\"]*management(?:[^0-9a-z]{0,3}s)?\\s+discussions?\\s+and\\s+analysis\\s+of\\s+(?:financial\\s+conditions?\\s+|results\\s+of\\s+operations?)(?:\\s+and\\s+results\\s+of\\s+operations?|\\s+and\\s+financial\\s+conditions?)?)/\\1#######ITEM7:\\2#######/gis;\n\n$x =~ s/([^\\\"])(item\\s+7[^0-9a-z\\\"]*a[^0-9a-z\\\"]*(?:quantitative\\s+and\\s+(?:qualitative|qualification)\\s+disclosures?\\s+about\\s+)?market\\s+risk)/\\1#######ITEM7A:\\2#######/gis;\n\n$x =~ s/([^\\\"])(item\\s+8[^0-9a-z\\\"]*.{0,40}financial\\s+statements[^\\.])/\\1#######ITEM8:\\2#######/gis;\n\n@X = (split /\\#\\#\\#\\#\\#\\#\\#/, $x)\n</code></pre>\n\n<p>I believe that <code>s/</code> is equivalent to python <code>re.split</code> but I'm not sure what <code>/gis</code> does though.</p>\n\n<p>Also, I am not sure what this means either:</p>\n\n<pre><code>(@M) = ($y =~ m/((?:\\d+:ITEM7 \\d+:\\d+ )+(?:\\d+:ITEM7A \\d+:\\d+ )*)(?:\\d+:ITEM8 \\d+:\\d+\\s*)+/g)\n</code></pre>\n\n<p>I would greatly appreciate the help !</p>\n\n<p>EDIT: </p>\n\n<p>Just another quick question, what exactly does:</p>\n\n<pre><code>for($i = 0; $i &lt; scalar(@X); ++$i) {\n  if($X[$i] =~ m/^(ITEM(?:7|7A|8)):(.*)$/s) {\n    $Z[$i] = $2; \n    $Y[$i] = $i . ':' . $1; \n  } else {   \n    $Z[$i] = $X[$i]; \n    $Y[$i] = $i . ':' . length_in_words($X[$i]);  \n  }\n}\n\nsub length_in_words {\n  my $x = shift;\n  my @k;\n  return scalar(@k = $x =~ m/(\\S+)/sg);\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1556163832, "post_id": 55841263, "comment_id": 98346018, "body": "The classes actually represent very different things, and are implemented wildly differently. The <code>Thing</code> role guarantees certain attributes for all of them, but each class requires a different subset of those attributes to be provided as constructor arguments, deriving the others. As a workaround, each has a common class method <code>Thing-&gt;find_all</code> which finds all the things of that type on the system (using some unspecified - and varying - means), creates an object representing each, then returns a list of references to those objects."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1556166115, "post_id": 55841263, "comment_id": 98346452, "body": "I upvoted your answer because it does offer a way to do it, and the discussion of a factory model is helpful. However, using links doesn&#39;t really address my question as posed. While it would technically work, it requires altering the environment in which the script runs rather than the script itself. It also makes step (1) redundant, as with the link you suggested, I could simply <code>require Thing::ThingA</code>, no package alias required."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1556165757, "last_edit_date": 1556165757, "creation_date": 1556161767, "answer_id": 55841263, "question_id": 55840549, "link": "https://stackoverflow.com/questions/55840549/require-perl-modules-using-an-aliased-name/55841263#55841263", "title": "Require Perl Modules using an Aliased Name", "body": "<blockquote>\n  <p>Is there a different way to alias Foo::Bar::Baz:: as Things:: such that I can require Things::ThingA?</p>\n</blockquote>\n\n<p>Yes. There are two requirements for this to work:</p>\n\n<ol>\n<li><p>Create the package alias as you have already done.</p>\n\n<pre><code>BEGIN { *Things:: = *Foo::Bar::Baz:: }\n</code></pre></li>\n<li><p>Create a symbolic link to <code>mylibs/Things</code> from your <code>mylibs/Foo/Bar/Baz</code> directory (where <code>mylibs</code> is the path to your Perl modules)</p>\n\n<p>(Make a link from the <code>Foo/Bar/Baz.pm</code> file to <code>Things.pm</code>, too, if you want)</p></li>\n</ol>\n\n<p>Once you have done this, and call <code>eval \"require Things::Quux\"</code> or <code>eval \"use Things::Quux\"</code>, Perl will load the file in <code>mylibs/Things/Quux.pm</code>, which is the same as the <code>mylibs/Foo/Bar/Baz/Quux.pm</code> file. That file has a <code>package Foo::Bar::Baz::Quux</code> statement in it, but since that package is already aliased to the <code>Things::Quux</code> namespace, all of its subroutines and package variables will be accessible in either namespace.</p>\n\n<blockquote>\n  <p>Is there some other generally accepted method of tying together packages at different levels of the same namespace to obviate the need for all this?</p>\n</blockquote>\n\n<p>It's not clear what your object model is, but if <code>*::Thing1</code>, <code>*::Thing2</code>, etc. are all implementations of some common base class, you could consider a factory method in the base class.</p>\n\n<pre><code>package Foo::Bar::Baz;\nsub newThing {\n    my ($class, $implementation, @options) = @_;\n    eval \"use $class\\::$implementation; 1\"\n        or die \"No $implementation subclass yet\";\n    no strict 'refs';\n    my $obj = \"$class\\::$implementation\"-&gt;new(@options);\n    return $obj;\n}\n</code></pre>\n\n<p>Now <code>Foo::Bar::Baz::Thing7</code> (which may or may not be aliased to <code>Things::Thing7</code>) will only be loaded if it is needed, say, from a call like</p>\n\n<pre><code>my $obj7 = Foo::Bar::Baz-&gt;newThing(\"Thing7\",foo =&gt; 42);\nprint ref($obj7);   # probably  Foo::Bar::Baz::Thing7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556194370, "post_id": 55841808, "comment_id": 98359791, "body": "Yes please elaborate on this. So if <code>$package</code> is <code>Thing::ThingA</code>, the <code>*{$package}{PACKAGE}</code> will expand to <code>Foo::Bar::Baz</code> somehow? and <code>*{$package}{NAME}</code> will expand to <code>ThingA</code>? Also, why is this a solution to your problem?"}], "tags": [], "owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556224149, "last_edit_date": 1556224149, "creation_date": 1556166621, "answer_id": 55841808, "question_id": 55840549, "link": "https://stackoverflow.com/questions/55840549/require-perl-modules-using-an-aliased-name/55841808#55841808", "title": "Require Perl Modules using an Aliased Name", "body": "<p>I came up with a solution based on an example in <a href=\"https://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\">perlmod</a> that seems to work, though I'm still trying to wrap my head around it. I'm posting it with the hope that someone can improve upon it, or at least explain it/provide feedback.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $package (ALL_THINGS) {\n    no strict \"refs\";\n    $package = *{$package}{PACKAGE}.\"::\".*{$package}{NAME};\n    eval \"require $package\";\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> After following the link over to perlref, I found this blurb in section (7):</p>\n\n<blockquote>\n  <p><strong>*foo{NAME}</strong> and <strong>*foo{PACKAGE}</strong> are the exception, in that they return strings, rather than references. These return the package and name of the typeglob itself, rather than one that has been assigned to it. So, after <strong>*foo=*Foo::bar</strong>, <strong>*foo</strong> will become <strong>\"*Foo::bar\"</strong> when used as a string, but <strong>*foo{PACKAGE}</strong> and <strong>*foo{NAME}</strong> will continue to produce \"main\" and \"foo\", respectively.</p>\n</blockquote>\n\n<p>From that, it makes sense that <code>*Things{PACKAGE}</code> will always resolve to <code>Foo::Bar::Baz</code>, since that's the package we're working in, and therefore the package that the typeglob \"belongs to\". In my code above, <code>$package</code> resolves to <code>Things::ThingA</code>, not <code>Things</code>, so we get <code>*Things::ThingA{PACKAGE}</code>. Similarly, the second part becomes <code>*Things::ThingA{NAME}</code>. I could hazard a few guesses as to why that might be working, but the truth is I'm not sure.</p>\n"}, {"comments": [{"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 1, "creation_date": 1556217146, "post_id": 55844988, "comment_id": 98372621, "body": "I like my magic like my coffee. As black as possible.  Lol, I actually noticed that note somewhere in the perldocs, but I thought hooking from @INC that way might be a bit beyond my skills. I&#39;m thrilled to see an example implementation of it (and how simple it actually is), and I think that answer might justify this question all on its own."}, {"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 0, "creation_date": 1556217513, "post_id": 55844988, "comment_id": 98372775, "body": "I also happen to have Module::Pluggable available in our prepacked lib directory, so I will give that a look as well. Each <code>Thing</code> is pretty small, but loading them all unnecessarily might be expensive. I have a hash that holds lists - smaller subsets of <code>Things</code> to load and search for based on the type of system it&#39;s run on, so normally I&#39;d want to only require what&#39;s in that list. But there is an &quot;All&quot; fallback option, hence the need for a list of all modules. It also makes it easier to write a test to check for typos in the sublists. Either way, Pluggable looks great."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 1, "creation_date": 1556262664, "post_id": 55844988, "comment_id": 98385299, "body": "@BryKKan - Even if you decide you don&#39;t want to auto-load all Things, you can just leave out the <code>require =&gt; 1</code> and get a complete list of them without loading any, which saves the hassle of manually maintaining a master list."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 3, "last_activity_date": 1556181032, "creation_date": 1556181032, "answer_id": 55844988, "question_id": 55840549, "link": "https://stackoverflow.com/questions/55840549/require-perl-modules-using-an-aliased-name/55844988#55844988", "title": "Require Perl Modules using an Aliased Name", "body": "<p>How black do you like your magic?</p>\n\n<p>We all know that, in order to <code>require</code> modules, Perl looks through <code>@INC</code> to find the file it wants to load.  One of the little-known (and even-less-used) aspects of this process is that <code>@INC</code> isn't limited to only contain filesystem paths.  You can also put coderefs there, allowing you to hijack the module loading process and bend it to your will.</p>\n\n<p>For the use case you've described, something like the following (untested) should do the trick:</p>\n\n<pre><code>BEGIN { unshift @INC, \\&amp;require_things }\n\nsub require_things {\n  my (undef, $filename) = @_;\n\n  # Don't go into an infinite loop when you hit a non-Thing:: module!\n  return unless $filename =~ /^Thing::/;\n\n  $filename =~ s/^Thing::/Foo::Bar::Baz::/;\n  require $filename;  \n}\n</code></pre>\n\n<p>Basically what this does is, as the first entry in <code>@INC</code>, it looks at the name of the requested module and, if it starts with <code>Thing::</code>, it loads the corresponding <code>Foo::Bar::Baz::</code> module instead.  Simple and effective, but <em>really</em> easy to confuse future maintenance programmers (including yourself!) with, so use with caution.</p>\n\n<hr>\n\n<p>As an alternate approach, you also have the option of specifying a package name in the module which doesn't correspond to the physical path of the file - the two are normally the same by convention, to make life easier when reading and maintaining the code, but there's no technical requirement for them to match.  If the file <code>./lib/Foo/Bar/Baz/Xyzzy.pm</code> contains</p>\n\n<pre><code>package Thing::Xyzzy;\n\nsub frob { ... };\n</code></pre>\n\n<p>then you would use it by doing</p>\n\n<pre><code>require Foo::Bar::Baz::Xyzzy;\nThing::Xyzzy::frob();\n</code></pre>\n\n<p>and Perl will be perfectly happy with that (even though your coworkers may not be).</p>\n\n<hr>\n\n<p>Finally, if you want to get rid of <code>ALL_THINGS</code>, take a look at <a href=\"https://metacpan.org/pod/Module::Pluggable\" rel=\"nofollow noreferrer\">Module::Pluggable</a>.  You give it a namespace, then it finds all available modules in that namespace and gives you a list of them.  It can also be set to <code>require</code> each module as it is found:</p>\n\n<pre><code>use Module::Pluggable require =&gt; 1, search_path =&gt; ['Foo::Bar::Baz'];\nmy @plugins = plugins;\n</code></pre>\n\n<p><code>@plugins</code> now contains a list of all <code>Foo::Bar::Baz::*</code> modules, and those modules have already been loaded with <code>require</code>. Or you can just call <code>plugins</code> without assigning the result to a variable if you only care about loading the modules and don't need a list of them.</p>\n"}, {"comments": [{"owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "edited": false, "score": 1, "creation_date": 1556257848, "post_id": 55858603, "comment_id": 98383349, "body": "This is indeed the solution I ultimately went with. Thank you for adding it here so others can benefit."}], "tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 2, "last_activity_date": 1556232622, "creation_date": 1556232622, "answer_id": 55858603, "question_id": 55840549, "link": "https://stackoverflow.com/questions/55840549/require-perl-modules-using-an-aliased-name/55858603#55858603", "title": "Require Perl Modules using an Aliased Name", "body": "<p>Messing with typeglobs is like nuclear overkill here.  Module::Runtime is the standard way to load modules at runtime based on configuration data.  At this point everything can be ordinary variables.  There is no benefit in using a constant here.</p>\n\n<p>Here is my suggestion as from our IRC chat.</p>\n\n<pre><code>package Foo::Bar::Baz;\n\nuse strict;\nuse Module::Runtime \"require_module\";\nuse List::Util \"uniq\";\n\nmy $prefix = \"Things::LetterThings\";\nmy %prop_module_map = (\n   foo =&gt; [ qw{ThingC ThingF ThingY} ],\n   bar =&gt; [ qw{ThingL ThingB} ],\n   baz =&gt; [ qw{ThingA ThingB ThingC ThingE ThingG ThingH ThingZ} ],\n   # or\n   # ALL =&gt; [ qw{ThingA .. ThingZ} ],\n);\nmy @all_modules = uniq map { @$_ } values %prop_module_map;\n\nsub load_modules {\n  my $self = shift;\n\n  # map module list if matching property found, otherwise use ALL_MODULES\n  my $modules = $prop_module_map{$self-&gt;prop} ?\n     $prop_module_map{$self-&gt;prop} :\n     \\@all_modules;\n\n  #only do the map operation on the list we actually need to use\n  my @modules = map { join \"::\", $prefix, $_  } @$modules;\n\n  foreach my $module (@modules) {\n    require_module($module);\n  }\n}\n\n1;\n__END__\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1560805311, "creation_date": 1560805311, "answer_id": 56638877, "question_id": 55840549, "link": "https://stackoverflow.com/questions/55840549/require-perl-modules-using-an-aliased-name/56638877#56638877", "title": "Require Perl Modules using an Aliased Name", "body": "<p>NAME and PACKAGE are there mainly so that you can find out what package and name a reference came from.  Other than that is a way to return the variable name rather than the variable value for e.g. debugging.</p>\n\n<pre><code>printf \"%s\\n\", __PACKAGE__; my $y = \\*ydp; pp *$y{PACKAGE}, *$y{NAME};\nW\n(\"W\", \"ydp\")\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 2171713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c460c5575a4bb0b77814e3c09e1cee1?s=128&d=identicon&r=PG", "display_name": "BryKKan", "link": "https://stackoverflow.com/users/2171713/brykkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 55844988, "answer_count": 5, "score": 6, "last_activity_date": 1560805311, "creation_date": 1556155242, "last_edit_date": 1556257759, "question_id": 55840549, "link": "https://stackoverflow.com/questions/55840549/require-perl-modules-using-an-aliased-name", "title": "Require Perl Modules using an Aliased Name", "body": "<p><strong>***The following is background to help explain what I've tried so far. If you'd prefer to read the main question first, skip to the bottom.***</strong></p>\n\n<hr>\n\n<h3>Starting Out</h3>\n\n<p>My <code>Baz</code> module invokes a number of other modules, all similar, each of which is one level down in the namespace. The ones of interest here compose the <code>Thing</code> role. In addition to the individual <code>require</code> statements, the constant list <code>ALL_THINGS</code> enumerates the relevant <code>Thing</code> modules for use later on. My original code looks like so:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Foo::Bar::Baz;\n\nuse constant ALL_THINGS =&gt; qw{ Foo::Bar::Baz::ThingA Foo::Bar::Baz::ThingB ... };\n\nrequire Foo::Bar::Baz::ThingA;\nrequire Foo::Bar::Baz::ThingB;\n[...]\n</code></pre>\n\n<hr>\n\n<h3>Eliminating Redundancy</h3>\n\n<p>As I mentioned, there are quite a lot of <code>Thing</code> modules, and I'm still adding more. Each time I create a new <code>Thing</code> class, I have to add a new <code>require</code> statement and also add the same identical text to the <code>ALL_THINGS</code> list. In order to avoid this duplication, I wanted to replace the individual <code>require</code> lines with a loop iterating over <code>ALL_THINGS</code>. I added this, which works fine by itself:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $module (ALL_THINGS) {\n    eval \"require $module\";\n}\n</code></pre>\n\n<p>However this solution doesn't seem to play well with my next change.</p>\n\n<hr>\n\n<h3>Improving Readability</h3>\n\n<p>The full module name for each <code>Thing</code> is long and unwieldy. I'd like to alias the package name to make it easier to type/read. I looked at <code>Package::Alias</code>, but it seems that will <code>use</code> them, which I'd like to avoid if possible. The best solution I've come to so far is the pattern suggested in <a href=\"https://stackoverflow.com/questions/5035542/is-there-a-perl-module-or-technique-that-makes-using-long-namespaces-easier\">this question</a>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>BEGIN { *Things:: = *Foo::Bar::Baz:: ; }\n</code></pre>\n\n<p>This also works, in the sense that it allows me to use <code>Thing::ThingA-&gt;classMethod</code>. However, unsurprisingly, it doesn't work in the <code>require</code> loop above, as <code>require Thing::ThingA</code> searches <code>@INC</code> for <code>Thing/ThingA.pm</code> rather than <code>Foo/Bar/Baz/ThingA.pm</code>.</p>\n\n<hr>\n\n<h1>Main Question: Putting Them Together</h1>\n\n<p>I'd like to cut down the long package names (i.e. <code>Foo::Bar::Baz::ThingA</code>) in my <code>ALL_THINGS</code> list to <code>Things::ThingA</code>, but still be able to use that same list to build my <code>require</code> statements in a loop.  </p>\n\n<ul>\n<li>Is there a different way to alias <code>Foo::Bar::Baz::</code> as <code>Things::</code> such that I can <code>require Things::ThingA</code>?</li>\n<li>Or, if I'm doing the alias part right, is there a way to dereference <code>Things::ThingA</code> to <code>Foo::Bar::Baz::ThingA</code> in (or before?) the eval so that <code>require</code> finds the correct package?</li>\n<li>Is there some other generally accepted method of tying together packages at different levels of the same namespace to obviate the need for all this?</li>\n</ul>\n\n<p><strong>Bonus Questions (related to <code>eval \"require $x\"</code>):</strong>  </p>\n\n<ul>\n<li>In the <a href=\"https://perldoc.perl.org/constant.html#CAVEATS\" rel=\"nofollow noreferrer\">perldoc for constant</a> it says that constant <em>lists</em> are not actually read-only. Does that create a security concern with the use of <code>eval</code>?  </li>\n<li>If so, is there a safer way to do it without the need to load additional modules?  </li>\n<li>Being somewhat new to Perl, are there any more subtle differences I might have missed between this approach and my previous one (individual <code>require</code> statements for each module)?</li>\n</ul>\n\n<hr>\n\n<p><strong>Note: I accepted Dave Sherohman's answer, as it most fully addresses the question I asked. However, I ultimately implemented a solution based on lordadmira's answer.</strong></p>\n"}]