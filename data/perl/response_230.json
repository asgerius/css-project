[{"tags": ["perl"], "comments": [{"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1559800910, "post_id": 56467600, "comment_id": 99534036, "body": "You should install <code>Crypt::SSLeay</code> beforehand"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1559803841, "post_id": 56467600, "comment_id": 99535126, "body": "Can you please show the full log?"}, {"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1559805737, "post_id": 56467600, "comment_id": 99535980, "body": "how to get the log?"}, {"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1559902077, "post_id": 56467600, "comment_id": 99573326, "body": "when I install Crypt::SSLeay, I get error: <code>openssl-version.c:2:30:fatal error openssl&#47;opensslv.h no such file or directory compilation terminated</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559948034, "post_id": 56467600, "comment_id": 99592955, "body": "<code>perl -MCPAN -e shell</code> can be shortened to just <code>cpan</code>."}, {"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1559948391, "post_id": 56467600, "comment_id": 99593019, "body": "yes. and then install cpanm. but it is difficult to install package in my post under windows. many dependencies problems. ppm is very easy."}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "is_accepted": false, "score": 1, "last_activity_date": 1559947847, "creation_date": 1559947847, "answer_id": 56501989, "question_id": 56467600, "link": "https://stackoverflow.com/questions/56467600/got-error-of-no-openssl-crypto-library-found-under-win10/56501989#56501989", "title": "Got error of no OpenSSL crypto library found under win10", "body": "<p>ppm saved me. use ppm to install modules for active state perl under windows.</p>\n"}], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559947847, "creation_date": 1559766767, "last_edit_date": 1559767218, "question_id": 56467600, "link": "https://stackoverflow.com/questions/56467600/got-error-of-no-openssl-crypto-library-found-under-win10", "title": "Got error of no OpenSSL crypto library found under win10", "body": "<p>I am working on active state perl under win10.</p>\n\n<p>In my project, I need package Filter::Crypto::Decrypt, so I install it by command:</p>\n\n<pre><code>perl -MCPAN -e shell\ninstall Filter::Crypto::Decrypt\n</code></pre>\n\n<p>wait a while, I was asked: </p>\n\n<pre><code>Where is your OpenSSL?\n</code></pre>\n\n<p>Then I download a OpenSSL 1.1.1c installer from website slproweb.com and install it to c:\\OpenSSL-Win64. Finally I copy this installation path and paste it into position after the question in console, press the ENTER key. Then I get following error:</p>\n\n<pre><code>No OpenSSL crypto library found at Makefile.PL line 66\n</code></pre>\n\n<p>But before this error message, I see information:</p>\n\n<pre><code>Found include directory ....... c:\\OpenSSL-Win64\\include\n\nFound OpenSSL version ....... 1.1.1c\n</code></pre>\n\n<p>which means version and include folder of OpenSSL are found and recognized.</p>\n\n<p>thanks </p>\n"}, {"tags": ["bash", "perl", "wait", "background-process", "child-process"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1559765669, "post_id": 56467171, "comment_id": 99526223, "body": "It looks like you are going to a lot of trouble to avoid using <code>alarm</code>.  Is there a reason not to use <code>alarm</code> here?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559769059, "post_id": 56467171, "comment_id": 99527585, "body": "Your SIGCHLD handler is also reaping the shell spawned by the backticks, so the <code>waitpid</code> call done by the backticks fails (since the child has already been reaped)."}, {"owner": {"reputation": 217, "user_id": 10625777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6408746fbc0a196e3fa2f20870dc6765?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10625777/chris"}, "edited": false, "score": 0, "creation_date": 1559769770, "post_id": 56467171, "comment_id": 99527853, "body": "I have several <code>bash</code> calls in the real Perl script. Only this one fails periodically. Just noticed today the icc left behind, that &quot;wait&quot; can&#39;t catch."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559808122, "post_id": 56467171, "comment_id": 99537101, "body": "&quot;<i>this one fails</i>&quot; -- I didn&#39;t get what fails? The fact that <code>icc</code> stays around (which is awkward), or is there an actual error?  Note that &quot;<i>Compile status -1; No child processes</i>&quot; isn&#39;t an error since you have a <code>CHLD</code> handler <i>and</i> check <code>$?</code> after backticks, which may have gotten reaped by handler (so the only error is doing both).  Also, from what you show it appears that <code>cc</code> starts <code>icc</code> and doesn&#39;t wait for it ...? (Are you sure? That sounds really strange to me.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559808323, "post_id": 56467171, "comment_id": 99537211, "body": "Note, you can&#39;t really check <code>wait 31589</code> (or such) since you don&#39;t know what PID of a child is in the current run (it is most likely different from what it was in previous runs)."}, {"owner": {"reputation": 217, "user_id": 10625777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6408746fbc0a196e3fa2f20870dc6765?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10625777/chris"}, "edited": false, "score": 0, "creation_date": 1559829631, "post_id": 56467171, "comment_id": 99548889, "body": "So the local($?,$!) in SIG{ALRM} doesn&#39;t keep the values within the reaper. I guess there is no way to keep $? from `bash` from being clobbered?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559846544, "post_id": 56467171, "comment_id": 99556997, "body": "&quot;<i>doesn&#39;t keep the values within the reaper</i>&quot; -- I don&#39;t understand: the handler is a sub that runs and exits and values in there are lost.  Whatever you want out of a signal handler need be assigned to global variables. (You can have a hash keyed by pids, for example, and assign to it once you check that it reaped a process you want.)  I am not sure what <code>local $?</code> is for -- if it&#39;s meant to protect stuff outside of handler that won&#39;t work: The handler reaps the signal about the exited child so backticks (waitpid that is run by the system for it) just has nothing, thus the -1."}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 10625777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6408746fbc0a196e3fa2f20870dc6765?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10625777/chris"}, "edited": false, "score": 0, "creation_date": 1559767502, "post_id": 56467556, "comment_id": 99527018, "body": "There are tons of other items the Perl script does. I just cut out the part that fails. There already is a SIG ALRM in there for something else, but maybe you can have one nested in another? The SIG CHLD was an overall timeout."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 217, "user_id": 10625777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6408746fbc0a196e3fa2f20870dc6765?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10625777/chris"}, "edited": false, "score": 0, "creation_date": 1559768006, "post_id": 56467556, "comment_id": 99527208, "body": "You can&#39;t have nested alarms, but a <code>local $SIG{ALRM} = ...</code> can overwrite the SIGALRM handler until the end of the scope in which it was defined."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1559771129, "post_id": 56467556, "comment_id": 99528358, "body": "Consider <a href=\"https://metacpan.org/pod/Time::Out\" rel=\"nofollow noreferrer\">Time::Out</a> to do nested alarms sensibly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559802232, "post_id": 56467556, "comment_id": 99534495, "body": "The value of <code>$status</code> is mostly garbage. <code>-1</code> normally means to use <code>$!</code>, but it you can&#39;t tell if it means that here, and <code>$!</code> was clobbered by <code>alarm(0)</code> anyway."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1559801983, "last_edit_date": 1559801983, "creation_date": 1559766548, "answer_id": 56467556, "question_id": 56467171, "link": "https://stackoverflow.com/questions/56467171/how-to-wait-for-grandchild-process-bash-retval-becomes-1-in-perl-due-to-sig/56467556#56467556", "title": "How to wait for grandchild process (`bash` retval becomes -1 in Perl due to SIG CHLD)", "body": "<p>Isn't this a use case for <a href=\"http://metacpan.org/pod/perlfunc#alarm\" rel=\"nofollow noreferrer\"><code>alarm</code></a>? Toss out your SIGCHLD handler and say</p>\n\n<pre><code>local $? = -1;\neval {\n    local $SIG{ALRM} = sub { die \"Timeout\\n\" };\n    alarm($GLOBAL_TIMEOUT);\n    @compile = `./compile_test.sh 2&gt;&amp;1`;\n    alarm(0);\n};\n\nmy $status = $?;\n</code></pre>\n\n<p>instead.</p>\n"}, {"tags": [], "owner": {"reputation": 217, "user_id": 10625777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6408746fbc0a196e3fa2f20870dc6765?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10625777/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1559921457, "creation_date": 1559921457, "answer_id": 56497336, "question_id": 56467171, "link": "https://stackoverflow.com/questions/56467171/how-to-wait-for-grandchild-process-bash-retval-becomes-1-in-perl-due-to-sig/56497336#56497336", "title": "How to wait for grandchild process (`bash` retval becomes -1 in Perl due to SIG CHLD)", "body": "<p>I thought the quickest solution would be to add sleep of a second or two at the bottom of the bash script to wait for the zombie icc to complete. But that didn't work.</p>\n\n<p>If I didn't already have a SIG ALRM (in the real program) I agree the best choice would be to wrap the whole thing in a eval. Even thought that would be pretty ugly for a 500 line program.</p>\n\n<p>Without the local($?), <strong>every</strong> `system` call gets $? = -1. The $? I need in this case is after waitpid, then unfortunately set to -1 after the sig handler exits. So I find this works. <strong>New lines shown with ###</strong></p>\n\n<pre><code>my $timer_pid;\nmy $chld_status;    ###\n$SIG{CHLD} = sub {\n    local($!, $?);\n    while((my $pid = waitpid(-1, WNOHANG)) &gt; 0)\n    {\n        $chld_status = $?;    ###\n        if($pid == $timer_pid)\n        {\n            die \"Timeout\\n\";\n        }\n    }\n};\n\n...\nmy @compile = `./compile_test.sh 2&gt;&amp;1`;\nmy $status = ($? == -1) ? $chld_status : $?;    ###\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 14055985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6il4.png?s=128&g=1", "display_name": "KJ7LNW", "link": "https://stackoverflow.com/users/14055985/kj7lnw"}, "edited": false, "score": 2, "creation_date": 1596829995, "post_id": 63308382, "comment_id": 111947260, "body": "Note that getppid() returns &quot;1&quot; because the grandchild&#39;s parent (the parent&#39;s 1st child) has exited so the grandchild is re-parented to the &quot;init&quot; process."}, {"owner": {"reputation": 133, "user_id": 13139607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ku1KH.jpg?s=128&g=1", "display_name": "Snorik", "link": "https://stackoverflow.com/users/13139607/snorik"}, "edited": false, "score": 0, "creation_date": 1596830680, "post_id": 63308382, "comment_id": 111947470, "body": "Is the &quot;init&quot; process this one then?  init --&gt; child        --&gt; grandchild"}, {"owner": {"reputation": 193, "user_id": 14055985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6il4.png?s=128&g=1", "display_name": "KJ7LNW", "link": "https://stackoverflow.com/users/14055985/kj7lnw"}, "reply_to_user": {"reputation": 133, "user_id": 13139607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ku1KH.jpg?s=128&g=1", "display_name": "Snorik", "link": "https://stackoverflow.com/users/13139607/snorik"}, "edited": false, "score": 1, "creation_date": 1596843955, "post_id": 63308382, "comment_id": 111950947, "body": "parent -&gt; child -&gt; grandchild, but when child exits it becomes parent -&gt; [none], init -&gt; grandchild"}], "tags": [], "owner": {"reputation": 193, "user_id": 14055985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6il4.png?s=128&g=1", "display_name": "KJ7LNW", "link": "https://stackoverflow.com/users/14055985/kj7lnw"}, "is_accepted": false, "score": 1, "last_activity_date": 1596829952, "creation_date": 1596829952, "answer_id": 63308382, "question_id": 56467171, "link": "https://stackoverflow.com/questions/56467171/how-to-wait-for-grandchild-process-bash-retval-becomes-1-in-perl-due-to-sig/63308382#63308382", "title": "How to wait for grandchild process (`bash` retval becomes -1 in Perl due to SIG CHLD)", "body": "<p>We had a similar issue, here is our solution: Leak a write-side file descriptor into the grandchild and read() from it which will block until it exits.</p>\n<p>See also: <a href=\"https://stackoverflow.com/questions/8391938/wait-for-children-and-grand-children/\">wait for children and grand-children</a></p>\n<pre><code>use Fcntl;\n\n# OCF scripts invoked by Pacemaker will be killed by Pacemaker with\n# a SIGKILL if the script exceeds the configured resource timeout. In\n# addition to killing the script, Pacemaker also kills all of the children\n# invoked by that script. Because it is a kill, the scripts cannot trap\n# the signal and clean up; because all of the children are killed as well,\n# we cannot simply fork and have the parent wait on the child. In order\n# to work around that, we need the child not to have a parent proccess\n# of the OCF script---and the only way to do that is to grandchild the\n# process. However, we still want the parent to wait for the grandchild\n# process to exit so that the OCF script exits when the grandchild is\n# done and not before. This is done by leaking the write file descriptor\n# from pipe() into the grandchild and then the parent reads the read file\n# descriptor, thus blocking until it gets IO or the grandchild exits. Since\n# the file descriptor is never written to by the grandchild, the parent\n# blocks until the child exits.\nsub grandchild_wait_exit\n{\n    # We use &quot;our&quot; instead of &quot;my&quot; for the write side of the pipe. If\n    # we did not, then when the sub exits and $w goes out of scope,\n    # the file descriptor will close and the parent will exit.\n    pipe(my $r, our $w);\n\n    # Enable leaking the file descriptor into the children\n    my $flags = fcntl($w, F_GETFD, 0) or warn $!;\n    fcntl($w, F_SETFD, $flags &amp; (~FD_CLOEXEC)) or die &quot;Can't set flags: $!\\n&quot;;\n\n    # Fork the child\n    my $child = fork();\n    if ($child) {\n        # We are the parent, waitpid for the child and\n        # then read to wait for the grandchild.\n        close($w);\n        waitpid($child, 0);\n        &lt;$r&gt;;\n        exit;\n    }\n\n    # Otherwise we are the child, so close the read side of the pipe.\n    close($r);\n\n    # Fork a grandchild, exit the child.\n    if (fork()) {\n        exit;\n    }\n\n    # Turn off leaking of the file descriptor in the grandchild so\n    # that no other process can write to the open file descriptor\n    # that would prematurely exit the parent.\n    $flags = fcntl($w, F_GETFD, 0) or warn $!;\n    fcntl($w, F_SETFD, $flags | FD_CLOEXEC) or die &quot;Can't set flags: $!\\n&quot;;\n}\n\ngrandchild_wait_exit();\n\nsleep 1;\nprint getppid() . &quot;\\n&quot;;\nprint &quot;$$: gc\\n&quot;;\nsleep 30;\nexit;\n</code></pre>\n"}], "owner": {"reputation": 217, "user_id": 10625777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6408746fbc0a196e3fa2f20870dc6765?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10625777/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 2, "accepted_answer_id": 56497336, "answer_count": 3, "score": 2, "last_activity_date": 1596829952, "creation_date": 1559764677, "last_edit_date": 1559829545, "question_id": 56467171, "link": "https://stackoverflow.com/questions/56467171/how-to-wait-for-grandchild-process-bash-retval-becomes-1-in-perl-due-to-sig", "title": "How to wait for grandchild process (`bash` retval becomes -1 in Perl due to SIG CHLD)", "body": "<p>I have a Perl script (snippet below) that runs in cron to perform system checks. I fork a child as a timeout and reap it with SIG{CHLD}. Perl does several system calls of Bash scripts and checks their exit status. One bash script fails about 5% of the time with no error. The Bash scripts exists with 0 and Perl sees $? as -1 and $! as \"No child processes\". </p>\n\n<p>This bash script tests compiler licenses, and Intel icc is left around after the Bash script completes (ps output below). I think the icc zombie completes, forcing Perl into SIG{CHLD} handler, which blows away the $? status before I'm able to read it.</p>\n\n<pre><code>Compile status -1; No child processes\n\n</code></pre>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse POSIX ':sys_wait_h';\n\nmy $GLOBAL_TIMEOUT = 1200;\n\n### Timer to notify if this program hangs\nmy $timer_pid;\n$SIG{CHLD} = sub {\n    local ($!, $?);\n    while((my $pid = waitpid(-1, WNOHANG)) &gt; 0)\n    {\n        if($pid == $timer_pid)\n        {\n            die \"Timeout\\n\";\n        }\n    }\n};\n\ndie \"Unable to fork\\n\" unless(defined($timer_pid = fork));\nif($timer_pid == 0)  # child\n{\n    sleep($GLOBAL_TIMEOUT);\n    exit;\n}\n### End Timer\n\n### Compile test\nmy @compile = `./compile_test.sh 2&gt;&amp;1`;\nmy $status = $?;\nprint \"Compile status $status; $!\\n\";\nif($status != 0)\n{\n    print \"@compile\\n\";\n}\n\nEND  # Timer cleanup\n{\n    if($timer_pid != 0)\n    {\n        $SIG{CHLD} = 'IGNORE';\n        kill(15, $timer_pid);\n    }\n}\n\nexit(0);\n</code></pre>\n\n<pre><code>#!/bin/sh\n\ncc compile_test.c\nif [ $? -ne 0 ]; then\n    echo \"Cray compiler failure\"\n    exit 1\nfi\n\nmodule swap PrgEnv-cray PrgEnv-intel\ncc compile_test.c\nif [ $? -ne 0 ]; then\n    echo \"Intel compiler failure\"\n    exit 1\nfi\n\nwait\nps\nexit 0\n</code></pre>\n\n<p>The wait doesn't really wait because cc calls icc which creates a zombie grandchild process that wait (or wait PID) doesn't block for. (wait `pidof icc`, 31589 in this case, gives \"not a child of this shell\")</p>\n\n<pre><code>user 31589     1  0 12:47 pts/15   00:00:00 icc\n</code></pre>\n\n<p>I just don't know how to fix this in Bash or Perl.</p>\n\n<p>Thanks, Chris</p>\n"}, {"tags": ["perl", "email", "parsing", "mime"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1559765830, "post_id": 56466705, "comment_id": 99526291, "body": "Okay, that appears to work, but can you unpack it to make it easier to follow? I understand the part about creating a new instance and reading from STDIN, but parts_DFS appears to be part of MIME::Entity while you&#39;re creating a new instance of a MIME::Parser object.   What&#39;s the bodyhandle for?  Can you adapt this to work with the function in my previous post that inspects the message parts?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1559788008, "post_id": 56466705, "comment_id": 99531534, "body": "@AlexRegan: As I said, it is not clear for me what you are trying to achieve in the first place: you only post code without explanation what it is intended to do and with the only complained that it does not handle non-multipart messages. Therefore I focused on what you complained about by using <code>parts_DFS</code> instead of <code>parts</code>. I&#39;ve changed the example code to make it a bit easier to follow now at least. And in contrast to your example code <code>$body</code> actually contains the MIME body (i.e. name of variable and content match) and not the whole part incl. the MIME header."}, {"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1560884119, "post_id": 56466705, "comment_id": 99880726, "body": "Thanks for your help. I&#39;m only now getting back to this. I&#39;ve run your code and now understand why it&#39;s unclear. I&#39;m looking to identify and manage only the content actual email, not the multipart or other components like PGP signature, etc. I&#39;ll eventually parse the email and store pieces of it in a database. I&#39;ve updated the post to hopefully clarify."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1560885785, "last_edit_date": 1560885785, "creation_date": 1559762177, "answer_id": 56466705, "question_id": 56466303, "link": "https://stackoverflow.com/questions/56466303/perl-parsing-email-body-without-parts-using-mimeparser/56466705#56466705", "title": "Perl parsing email body without parts using MIME::Parser", "body": "<p>It is not fully clear for me what you are trying to achieve since you only post code but not the intention behind it in sufficient detail. But you are using <code>parts</code> to inspect the message which is <a href=\"https://metacpan.org/pod/MIME::Entity#parts\" rel=\"nofollow noreferrer\">clearly documented</a> to return the parts of a <code>multipart/*</code> or similar (i.e. <code>message/rfc822</code>) and does not handle single messages:</p>\n\n<blockquote>\n  <p>... returns the array of all sub parts, <strong>returning the empty array if there are none (e.g., if this is a single part message, or a degenerate multipart)</strong>. In a scalar context, this returns you the number of parts.</p>\n</blockquote>\n\n<p>If you want to just get all parts including standalone \"parts\" (i.e. a single entity which is not part of anything) just use <code>parts_DFS</code> as in the following example, which prints the body for all entities which have a non-zero body:</p>\n\n<pre><code>use MIME::Parser;\nmy $parser = MIME::Parser-&gt;new;\nmy $entity = $parser-&gt;parse(\\*STDIN);\nfor my $part ($entity-&gt;parts_DFS) {\n    defined(my $body = $part-&gt;bodyhandle) or next; # has no body, likely multipart or similar\n    print \"body: \".$body-&gt;as_string.\"\\n\";\n}\n</code></pre>\n\n<p>EDIT: given you've updated question you are not looking for all parts but for the main text part. It is not easy to determine what the actual <em>main</em> part is but you might try to use the first <code>text/*</code> part which is inline. This would probably look something like this:</p>\n\n<pre><code>use MIME::Parser;\nmy $parser = MIME::Parser-&gt;new;\nmy $entity = $parser-&gt;parse(\\*STDIN);\nfor my $part ($entity-&gt;parts_DFS) {\n    defined(my $body = $part-&gt;bodyhandle) or next; # has no body, likely multipart or similar\n    if (my $disp = $part-&gt;head-&gt;get('content-disposition')) {\n        next if $disp !~ m{inline}i;\n    }\n    print \"body: \".$body-&gt;as_string.\"\\n\";\n    last;\n}\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560885785, "creation_date": 1559760188, "last_edit_date": 1560884089, "question_id": 56466303, "link": "https://stackoverflow.com/questions/56466303/perl-parsing-email-body-without-parts-using-mimeparser", "title": "Perl parsing email body without parts using MIME::Parser", "body": "<p>I have a perl script that uses MIME::Email to parse emails received from stdin, but it doesn't work on emails without parts. I have no ability to modify the emails before they are sent.</p>\n\n<p>I'd like to be able to identify the significant part of the email, regardless of whether it's HTML or text, and store it in a buffer for processing later. Many of these emails are from a mailing list that are somehow generated automatically.</p>\n\n<p>Sometimes they seem to just have one \"Content-Type:\" header with no boundaries.</p>\n\n<pre><code>MIME-Version: 1.0\nContent-Type: text/plain; charset=\"us-ascii\"\nContent-Transfer-Encoding: 7bit\n</code></pre>\n\n<p>Other times they have multiple text/plain parts, where one is the body of the email and another is a signature.</p>\n\n<p>There are a few other header lines after this, but then the body is just displayed without any boundary markers.</p>\n\n<p>This is my post from two years ago showing how I was able to eventually figure out how to parse most emails with parts\n<a href=\"https://stackoverflow.com/questions/42823610/parsing-email-with-emailmime-and-multipart-mixed-with-subparts\">Parsing email with Email::MIME and multipart/mixed with subparts</a></p>\n\n<pre><code>use strict;\nuse MIME::Parser;\nuse MIME::Entity;\nuse Email::MIME;\nuse Email::Simple;\nmy $parser = MIME::Parser-&gt;new;\n$parser-&gt;extract_uuencode(1);\n$parser-&gt;extract_nested_messages(1);\n$parser-&gt;output_to_core(1);\nmy $buf;\nwhile(&lt;STDIN&gt; ){\n        $buf .= $_; \n}\n\nmy $entity = $parser-&gt;parse_data($buf);\n\n$entity-&gt;dump_skeleton;\nmy $num_parts = $entity-&gt;parts;\nfor (my $i=0; $i &lt; $num_parts; $i++) {\n    my $part = $entity-&gt;parts($i);\n    my $content_type = $part-&gt;mime_type;\n    my $body = $part-&gt;as_string;\n\n    print \"body: $body\\n\";\n}\n</code></pre>\n\n<p>The body text is never printed. Only the following from dump_skeleton:</p>\n\n<pre><code>Content-type: text/plain\nEffective-type: text/plain\nBody-file: NONE\nSubject: Security update \n</code></pre>\n\n<p>I'd really like the ability to modify my existing script (shown in the previous stackexchange post) to be able to print emails like this without any boundaries as well.</p>\n\n<p>Is this poor formatting? I've been unable to locate any examples of a library that can be used to just print the body, subject, and other basic headers of an email reliably without sophisticated steps to analyze the whole message by parts.</p>\n\n<p>I know mimeexplode can do it, but I can't figure out how. I need to store the mail body in a buffer to manipulate, so using a command-line program like mimeexplode would be a roundabout way of doing it anyway.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559755510, "post_id": 56463464, "comment_id": 99522102, "body": "I can&#39;t say why, but I can say it&#39;s most definitely not an encouraged practice. That would explain the lack of documentation of this &quot;feature&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 1, "creation_date": 1559793817, "post_id": 56463547, "comment_id": 99532459, "body": "The key question Why is still unanswered."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 5, "last_activity_date": 1559748378, "creation_date": 1559748378, "answer_id": 56463547, "question_id": 56463464, "link": "https://stackoverflow.com/questions/56463464/why-perl-ignores-spaces-between-a-sigil-and-variable-name/56463547#56463547", "title": "Why Perl ignores spaces between a sigil and variable name?", "body": "<p>That documentation only discusses the <em>name</em>, not the <em>sigil</em>. The sigil can always be separated from the name by space characters. It is definitely underdocumented and I would not suggest ever making use of it, but it is used.</p>\n"}, {"comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1559871966, "post_id": 56464952, "comment_id": 99563770, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/194566/discussion-on-answer-by-emil-perhinschi-why-perl-ignores-spaces-between-a-sigil\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "is_accepted": false, "score": 3, "last_activity_date": 1559847775, "last_edit_date": 1559847775, "creation_date": 1559753972, "answer_id": 56464952, "question_id": 56463464, "link": "https://stackoverflow.com/questions/56463464/why-perl-ignores-spaces-between-a-sigil-and-variable-name/56464952#56464952", "title": "Why Perl ignores spaces between a sigil and variable name?", "body": "<p>Perl does not have sigils, it has \"dereference\" operators: </p>\n\n<p>$test[1] means 'give me the scalar at the index 1 of the array called \"test\" from this scope'. That is why you can put spaces after the \"sigil\".</p>\n\n<p>I don't understand why everybody keeps calling them sigils, it makes things very confusing. BASIC had sigils, PHP has sigils, but Perl 5 does not even if it looks like it has. I wish I had realized the \"sigils\" are in fact operators when I was learning Perl, understanding and parsing references and derefferencing would have been a lot easier, not to mention grokking symbol tree manipulation.</p>\n\n<p>The \"sigils\" are not documented as \"operators\" in perldoc, but it is much easier to parse Perl code if you think of them as being operators.</p>\n\n<p>Later, after discussion in the comments: here is how Perl 5 uses \"sigils\": <a href=\"https://www.oreilly.com/library/view/advanced-perl-programming/0596004567/ch01.html\" rel=\"nofollow noreferrer\">https://www.oreilly.com/library/view/advanced-perl-programming/0596004567/ch01.html</a></p>\n"}], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1559847775, "creation_date": 1559748067, "question_id": 56463464, "link": "https://stackoverflow.com/questions/56463464/why-perl-ignores-spaces-between-a-sigil-and-variable-name", "title": "Why Perl ignores spaces between a sigil and variable name?", "body": "<p>The question <a href=\"https://stackoverflow.com/questions/745278/is-space-supposed-to-be-ignored-between-a-sigil-and-its-variable-name\">Is space supposed to be ignored between a sigil and its variable name?</a> was answered positively.</p>\n\n<p>What is the reason Perl interprets <code>$ foo</code> as <code>$foo</code>?</p>\n\n<pre><code>perl -w -E 'my $  foo = $$; say  \"Perl $]\\n\\$ foo = \", $foo'\nPerl 5.028001\n$ foo = 3492\n</code></pre>\n\n<p>Isn't it against <a href=\"https://perldoc.perl.org/perlvar.html#The-Syntax-of-Variable-Names\" rel=\"nofollow noreferrer\">The Syntax of Variable Names</a> documentation?</p>\n"}, {"tags": ["macos", "perl", "mariadb", "cpan", "perlbrew"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559746226, "post_id": 56462587, "comment_id": 99517405, "body": "It&#39;s not a good idea to try to recreate what <code>cpanm</code> or other CPAN installers do. If you just need your custom <code>mysql_config</code> to be invoked, add its location to the beginning of your PATH temporarily while running <code>cpanm</code>. If you need to pass switches to Makefile.PL, use <a href=\"https://perldoc.pl/ExtUtils::MakeMaker#PERL_MM_OPT\" rel=\"nofollow noreferrer\">PERL_MM_OPT</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559746592, "post_id": 56462587, "comment_id": 99517604, "body": "Just note that <code>PERL_MM_OPT</code> may have an existing value set by perlbrew that you will want to append to, not replace."}, {"owner": {"reputation": 201, "user_id": 10090133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omfbo.png?s=128&g=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/10090133/marisa"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1559751869, "post_id": 56462587, "comment_id": 99520519, "body": "@Grinnz Smacked the Maria bin path into my PATH and it worked first try. urgh, that&#39;s a nightmare. Thanks man, you saved me big time!"}], "owner": {"reputation": 201, "user_id": 10090133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omfbo.png?s=128&g=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/10090133/marisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559768805, "creation_date": 1559744995, "last_edit_date": 1559768805, "question_id": 56462587, "link": "https://stackoverflow.com/questions/56462587/error-installing-dbdmariadb-on-mac-os-sierra-fails-on-creating-t-mariadb-mte", "title": "Error Installing DBD::MariaDB on Mac OS Sierra - Fails on Creating t/MariaDB.mtest", "body": "<p>I am having difficulty getting the DBD::MariaDB module to install on an instance of OSX 10.12.6. I am using homebrew and perlbrew, and other cpan modules installed without issue with cpanm.</p>\n\n<p>I have used homebrew to install openssl and mysql-connector-c as the cpan <a href=\"https://metacpan.org/pod/DBD::MariaDB::INSTALL\" rel=\"nofollow noreferrer\">Install page</a> recommended.</p>\n\n<p>Rather than trying to use cpanm for this, I am attempting to install manually so I can specify a mysql_config location. I have a heavily customized instance of MariaDB 10.2.21 installed so nothing is \"default.\" If it's relevant, my MariaDB configuration was based off a brew install.</p>\n\n<p>I am stuck at this point: Failed to create t/MariaDB.mtest: No such file or directory at /Documents/DBD-MariaDB-1.21/Makefile.PL line 415. Fails to make the file and I'm doing this with user directories with perlbrew.</p>\n\n<p>Using Perl 5.26.1 on perlbrew 0.86 (latest). Not sure what to actually do here. Not sure why I'm unable to make the file in a user folder.</p>\n\n<p>Did I miss a crucial step?</p>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1559735547, "post_id": 56459902, "comment_id": 99511260, "body": "give an example of your expected input and output"}], "answers": [{"comments": [{"owner": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 0, "creation_date": 1559739189, "post_id": 56460386, "comment_id": 99513203, "body": "Very neat! Thank you. Would you mind to explain the following part? {r input_file&#39; -e &#39;b&#39; -e &#39;}; p&#39;"}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1559740957, "post_id": 56460386, "comment_id": 99514244, "body": "I hadn&#39;t known you could spread pieces of a block across <code>-e</code>&#39;s. Awesome. :)"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 1, "creation_date": 1559745731, "post_id": 56460386, "comment_id": 99517106, "body": "@PaulHodges You often have to for non-GNU sed, and in this case to avoid confusion about what delimits the filename."}, {"owner": {"reputation": 301322, "user_id": 26428, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S1BbQ.png?s=128&g=1", "display_name": "Dennis Williamson", "link": "https://stackoverflow.com/users/26428/dennis-williamson"}, "reply_to_user": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 0, "creation_date": 1559749032, "post_id": 56460386, "comment_id": 99519044, "body": "@royskatt: The paragraph following the command is a prose description that follows the steps you&#39;re asking about. I&#39;ll add a little more for some clarification."}, {"owner": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 0, "creation_date": 1561646998, "post_id": 56460386, "comment_id": 100141882, "body": "Seems not to work with regexes: sed -r -n -e &#39;/(?&lt;={).+\\.global(?=})/{r input_file&#39; -e &#39;b&#39; -e &#39;}; p&#39; template_file. The PCRE is valid for another template file, however, sed moans the regex is incorrect."}, {"owner": {"reputation": 301322, "user_id": 26428, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S1BbQ.png?s=128&g=1", "display_name": "Dennis Williamson", "link": "https://stackoverflow.com/users/26428/dennis-williamson"}, "reply_to_user": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 0, "creation_date": 1561654317, "post_id": 56460386, "comment_id": 100145715, "body": "@royskatt: <code>sed</code> doesn&#39;t understand PCRE. It only works with BRE or ERE (with <code>-E</code>)."}], "tags": [], "owner": {"reputation": 301322, "user_id": 26428, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S1BbQ.png?s=128&g=1", "display_name": "Dennis Williamson", "link": "https://stackoverflow.com/users/26428/dennis-williamson"}, "is_accepted": true, "score": 2, "last_activity_date": 1559749667, "last_edit_date": 1559749667, "creation_date": 1559737226, "answer_id": 56460386, "question_id": 56459902, "link": "https://stackoverflow.com/questions/56459902/bash-replacement-of-regex-match-within-a-file/56460386#56460386", "title": "BASH - Replacement of regex match within a file", "body": "<pre><code>sed -n -e '/##regex_match##/{r input_file' -e 'b' -e '}; p' template_file\n</code></pre>\n\n<p>If the regex is matched, read and output the input file and branch (end processing of the line and don't print it). Otherwise print the line.</p>\n\n<p>The use of <code>-e</code> delimits parts of the <code>sed</code> commands so that the <code>r</code> command which reads the input file knows where the name of the file ends. Otherwise it would greedily consume the following <code>sed</code> commands as if they were part of the file name.</p>\n\n<p>The curly braces delimit a block in the program that's like an <code>if</code> statement.</p>\n\n<p>I tested this on MacOS, but it should be pretty similar for GNU. MacOS <code>sed</code> is much pickier about <code>-e</code> (among other differences which don't come into play here).</p>\n"}, {"comments": [{"owner": {"reputation": 301322, "user_id": 26428, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S1BbQ.png?s=128&g=1", "display_name": "Dennis Williamson", "link": "https://stackoverflow.com/users/26428/dennis-williamson"}, "edited": false, "score": 1, "creation_date": 1559748894, "post_id": 56461359, "comment_id": 99518972, "body": "<code>r</code> thinks everything is part of the file name until a newline or <code>-e</code> is encountered."}], "tags": [], "owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1559740883, "creation_date": 1559740883, "answer_id": 56461359, "question_id": 56459902, "link": "https://stackoverflow.com/questions/56459902/bash-replacement-of-regex-match-within-a-file/56461359#56461359", "title": "BASH - Replacement of regex match within a file", "body": "<p>A <em>very</em> slight variation on the technique <a href=\"https://stackoverflow.com/users/26428/dennis-williamson\">Dennis Williamson</a> already posted, merely for discussion purposes -</p>\n\n<pre><code>sed '/##regex_match##/ {\n       r input_file\n       d\n     }' template_file\nContains multiple lines,\nalso special characters {}[]\u00e4/\n\nMy inputfile, contains multiple line\nand also special characters {}[]\u00e4/\n\nContent goes on\nabc\n</code></pre>\n\n<p>c.f. <a href=\"https://www.gnu.org/software/sed/manual/sed.html#Other-Commands\" rel=\"nofollow noreferrer\">the manual</a>.</p>\n\n<p>He used <code>-e</code> options to pass commands, where I separated them with newlines. Usually a semicolon is enough, but apparently <code>r</code> makes other commands on the same line get ignored. </p>\n\n<p>The <code>d</code> prevents the tag pattern from being printed.</p>\n"}, {"comments": [{"owner": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 1, "creation_date": 1559745149, "post_id": 56462162, "comment_id": 99516763, "body": "Despite being Perl, that looks much less cryptic and more understandable than the sed solution. Thank you."}, {"owner": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 0, "creation_date": 1561646515, "post_id": 56462162, "comment_id": 100141551, "body": "Though, it gives me an &quot;Can&#39;t locate object method &quot;getline&quot; via package &quot;IO::Handle&quot; at -e line 1.&quot;"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "edited": false, "score": 0, "creation_date": 1561704041, "post_id": 56462162, "comment_id": 100158459, "body": "Works for me. You could <a href=\"https://stackoverflow.com/questions/ask\">open a new question</a> if you want to dig for the bug."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1559743616, "creation_date": 1559743616, "answer_id": 56462162, "question_id": 56459902, "link": "https://stackoverflow.com/questions/56459902/bash-replacement-of-regex-match-within-a-file/56462162#56462162", "title": "BASH - Replacement of regex match within a file", "body": "<p><a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a> solution just for variety's sake.</p>\n\n<pre><code>perl -0777 -lpe'\n    BEGIN {\n        open $fh, \"&lt;\", \"input_file\";\n        $input = $fh-&gt;getline\n    }\n    s/##regex_match##/$input/\n' &lt; template_file &gt; output_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1559756812, "creation_date": 1559756812, "answer_id": 56465582, "question_id": 56459902, "link": "https://stackoverflow.com/questions/56459902/bash-replacement-of-regex-match-within-a-file/56465582#56465582", "title": "BASH - Replacement of regex match within a file", "body": "<p>With any awk in any shell on every UNIX box and with any characters:</p>\n\n<pre><code>$ awk 'NR==FNR{rec=rec sep $0; sep=ORS; next} /##regex_match##/{$0=rec} 1' input_file template_file\nContains multiple lines,\nalso special characters {}[]\u00e4/\n\nMy inputfile, contains multiple line\nand also special characters {}[]\u00e4/\n\nContent goes on\nabc\n</code></pre>\n"}], "owner": {"reputation": 1098, "user_id": 2557981, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5bb7b2e3f0001c1e1e638fa290a89406?s=128&d=identicon&r=PG", "display_name": "royskatt", "link": "https://stackoverflow.com/users/2557981/royskatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 56460386, "answer_count": 4, "score": 2, "last_activity_date": 1559756812, "creation_date": 1559735299, "last_edit_date": 1559735863, "question_id": 56459902, "link": "https://stackoverflow.com/questions/56459902/bash-replacement-of-regex-match-within-a-file", "title": "BASH - Replacement of regex match within a file", "body": "<p>Given the following files:</p>\n\n<p>input_file:</p>\n\n<pre><code>My inputfile, contains multiple line \nand also special characters {}[]\u00e4/\n</code></pre>\n\n<p>template_file:</p>\n\n<pre><code>Contains multiple lines,\nalso special characters {}[]\u00e4/\n\n##regex_match## &lt;= must be replaced by input_file\n\nContent goes on\nabc\n</code></pre>\n\n<p>output_file:</p>\n\n<pre><code>Contains multiple lines,\nalso special characters {}[]\u00e4/\n\nMy inputfile, contains multiple line \nand also special characters {}[]\u00e4/\n\nContent goes on\nabc\n</code></pre>\n\n<p>I thought about sed but that would be very cumbersome because of escaping and newlines. Is there any other solution in BASH?</p>\n"}, {"tags": ["perl", "moose", "mojolicious"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1559731047, "post_id": 56458763, "comment_id": 99509273, "body": "Please explain your problem better. As stated, your request makes no  sense. You can&#39;t do something before the sub is exited but after it executes a <code>return</code>, because the whole point of <code>return</code> is to exit the sub."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559731494, "post_id": 56458763, "comment_id": 99509453, "body": "Write a wrapper for the routine from which you want to return without undue wait, in which you call that routine (and so it returns) and then call the other one."}, {"owner": {"reputation": 23, "user_id": 6056930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add1809f2082daed7956b300dbe674ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dumb", "link": "https://stackoverflow.com/users/6056930/dumb"}, "edited": false, "score": 0, "creation_date": 1559731530, "post_id": 56458763, "comment_id": 99509475, "body": "Can I use hook feature of Mojolicious?"}, {"owner": {"reputation": 23, "user_id": 6056930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add1809f2082daed7956b300dbe674ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dumb", "link": "https://stackoverflow.com/users/6056930/dumb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559731974, "post_id": 56458763, "comment_id": 99509667, "body": "@zdim Can you please give me an example of what you are suggesting"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559735721, "post_id": 56458763, "comment_id": 99511357, "body": "It sounds like what you want is an <code>after</code> method modifier. If you use Moose inside of Mojolicious, you have the Moose implementation available. If you don&#39;t, you could use Class::Method::Modifiers. If you&#39;re talking about Actions in Mojo, I am not sure what willl happen if you combine that. If you can alter the sub you want something to execute after, you can always go <code>return do{ foo(); $original_return_value }</code>"}, {"owner": {"reputation": 23, "user_id": 6056930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add1809f2082daed7956b300dbe674ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dumb", "link": "https://stackoverflow.com/users/6056930/dumb"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559736788, "post_id": 56458763, "comment_id": 99511863, "body": "Thanks @simbabque. But can I do something like return do{$original_return_value;  foo() }"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559741931, "post_id": 56458763, "comment_id": 99514861, "body": "That would discard the original return value and return the return value of <code>foo()</code>. So that doesn&#39;t make sense."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559750726, "post_id": 56458763, "comment_id": 99519973, "body": "Like <code>sub wrapper { original();  slow() };</code> and add handling of returns etc."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6056930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add1809f2082daed7956b300dbe674ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dumb", "link": "https://stackoverflow.com/users/6056930/dumb"}, "edited": false, "score": 0, "creation_date": 1559738766, "post_id": 56460603, "comment_id": 99512943, "body": "Thanks a lot. That serves the need"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1559738112, "creation_date": 1559738112, "answer_id": 56460603, "question_id": 56458763, "link": "https://stackoverflow.com/questions/56458763/how-to-call-another-subroutine-after-the-return-statement/56460603#56460603", "title": "how to call another subroutine after the return statement", "body": "<p>You can <code>fork</code> and run your subroutine in a new process while the original process is returning.</p>\n\n<pre><code>sub do_something {\n    my ($var1, $var2, $var3) = @_;\n    my $output = ...\n\n    if (fork() == 0) {\n        # child process\n        do_something_else_that_takes_a_long_time();\n        exit;\n    }\n    # still the parent process\n    return $output;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1559742161, "creation_date": 1559742161, "answer_id": 56461729, "question_id": 56458763, "link": "https://stackoverflow.com/questions/56458763/how-to-call-another-subroutine-after-the-return-statement/56461729#56461729", "title": "how to call another subroutine after the return statement", "body": "<p>Your question is tagged as Moose, so here is how you do what you want with a <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/MethodModifiers.pod\" rel=\"nofollow noreferrer\"><em>method modifier</em></a>. The <a href=\"https://metacpan.org/pod/Moose#after-$name%7C@names%7C%5C@names%7Cqr/.../-=%3E-sub-%7B-...-%7D\" rel=\"nofollow noreferrer\"><code>after</code> modifier</a> runs after a sub is, but its return value is ignored.</p>\n\n<pre><code>package Foo;\nuse Moose;\n\nsub frobnicate {\n  my $self = shift;\n\n  # ...\n\n  return 123;\n}\n\nafter frobnicate =&gt; sub {\n  my ($self, $rv) = @_;\n\n  $self-&gt;barnicate;\n};\n\n1;\n</code></pre>\n\n<p>Now whenever <code>frobnicate</code> is done, <code>barnicate</code> will be called.</p>\n"}], "owner": {"reputation": 23, "user_id": 6056930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add1809f2082daed7956b300dbe674ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dumb", "link": "https://stackoverflow.com/users/6056930/dumb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 56461729, "answer_count": 2, "score": 0, "last_activity_date": 1559742161, "creation_date": 1559730747, "question_id": 56458763, "link": "https://stackoverflow.com/questions/56458763/how-to-call-another-subroutine-after-the-return-statement", "title": "how to call another subroutine after the return statement", "body": "<p>How can I call another subroutine from existing subroutine just after the return statement in perl.\nI dont want to call before the return statement as it is taking time to render. I do not want to wait. return it and then call another subroutine before the exit. Is it possible in perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559706698, "post_id": 56453903, "comment_id": 99500674, "body": "Don&#39;t edit your question in a way that invalidates existing answers."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559711533, "post_id": 56453903, "comment_id": 99501561, "body": "Also see <a href=\"https://stackoverflow.com/q/50597544/4653379\">using perl to create a simple calculator</a>"}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 6317688, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154211370668453/picture?type=large", "display_name": "Davide Lorino", "link": "https://stackoverflow.com/users/6317688/davide-lorino"}, "edited": false, "score": 0, "creation_date": 1559706616, "post_id": 56453972, "comment_id": 99500662, "body": "Hi thank you for your suggestions, I have made the edits necessary to the functioning of the program - do you know why I might be receiving such a strange output when I use exclusively the <code>*</code> operator?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 670, "user_id": 6317688, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154211370668453/picture?type=large", "display_name": "Davide Lorino", "link": "https://stackoverflow.com/users/6317688/davide-lorino"}, "edited": false, "score": 0, "creation_date": 1559706805, "post_id": 56453972, "comment_id": 99500691, "body": "@DavideLorino You are passing your arguments through the shell, and <code>*</code> is a special character in shells (specifically a glob). The easiest way to avoid this is to quote operators when passing them: <code>&#39;*&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559713917, "post_id": 56453972, "comment_id": 99502115, "body": "Maybe you should mention using a dispatch table?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559714267, "post_id": 56453972, "comment_id": 99502192, "body": "@ikegami Eh, I thought about it, but figured it was probably too many advanced concepts for someone who&#39;s still trying to get string comparison to work."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1559706818, "last_edit_date": 1559706818, "creation_date": 1559705984, "answer_id": 56453972, "question_id": 56453903, "link": "https://stackoverflow.com/questions/56453903/taking-operators-as-argument-variables/56453972#56453972", "title": "Taking operators as argument variables", "body": "<p>Always start your files with</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>In your case that first results in</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Global symbol \"$num3\" requires explicit package name (did you forget to declare \"my $num3\"?) at script line 14.\n</code></pre>\n\n<p>After adding the missing <code>my $num3</code> declaration, we get</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Argument \"-\" isn't numeric in numeric eq (==) at script line 13.\n</code></pre>\n\n<p>That happens because the <code>==</code> operator is numeric equality. It converts both operands to a number, which (if you don't enable warnings) silently gives <code>0</code> for invalid strings. That's why <code>($operand == '-')</code> ends up doing <code>0 == 0</code>, which is of course true.</p>\n\n<p>To compare strings, you need to use <code>eq</code>:</p>\n\n<pre><code>if ($operand eq '-')\n</code></pre>\n\n<p>See also <a href=\"https://perldoc.pl/perlop#Relational-Operators\" rel=\"nofollow noreferrer\"><em>Relational Operators</em> in <code>perldoc perlop</code></a>.</p>\n\n<p>The problem with <code>./expr.pl 7 * 2</code> is that <code>*</code> is a wildcard that your shell expands to a list of all files in the current directory. Your program will be invoked as <code>./expr.pl 7 03.bellpaper.doc expr.pl whatever-else-is-in-the-current-directory 2</code>.</p>\n\n<p>To prevent that, you need to quote it, e.g. with <code>./expr.pl 7 '*' 2</code> or <code>./expr.pl 7 \"*\" 2</code> or <code>./expr.pl 7 \\* 2</code>.</p>\n\n<hr>\n\n<p>Other notes:</p>\n\n<ul>\n<li><code>$operand</code> is the wrong name. It's an operator. The two numbers are the operands.</li>\n<li>The manual assignments from <code>$ARGV[...]</code> can be merged together into a single list assignment: <code>my (...) = @ARGV;</code></li>\n<li>The <code>print</code> statements in each block are almost identical. We can pull them out as <code>print \"$num1 $operator $num2 = $num3\\n\"</code> (after making sure <code>$num3</code> is actually set).</li>\n</ul>\n\n<p>That gives us:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy ($num1, $operator, $num2) = @ARGV;\n\nprint \"$operator\\n\";\n\nmy $num3;\nif ($operator eq '-') {\n    $num3 = $num1 - $num2;\n} elsif ($operator eq '+') {\n    $num3 = $num1 + $num2;\n} elsif ($operator eq '/') {\n    $num3 = $num1 / $num2;\n} elsif ($operator eq '*') {\n    $num3 = $num1 * $num2;\n}\n\nif (defined $num3) {\n    print \"$num1 $operator $num2 = $num3\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1559706511, "post_id": 56453980, "comment_id": 99500643, "body": "1. Why an integer? Passing the operator directly as a string works just as well and is much easier to debug / maintain. 2. This doesn&#39;t solve OP&#39;s problem. How do you convert the operator into a number?"}], "tags": [], "owner": {"reputation": 26, "user_id": 10130337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20308e40f213fc735c1fbe56a3629a94?s=128&d=identicon&r=PG&f=1", "display_name": "Hecan Zhou", "link": "https://stackoverflow.com/users/10130337/hecan-zhou"}, "is_accepted": false, "score": 0, "last_activity_date": 1559706089, "creation_date": 1559706089, "answer_id": 56453980, "question_id": 56453903, "link": "https://stackoverflow.com/questions/56453903/taking-operators-as-argument-variables/56453980#56453980", "title": "Taking operators as argument variables", "body": "<p>Usually when I am doing those kind of things, I would make an integer variable called choice that gets passed into the methods. And in the method I would have if and else if statements to interpret the argument. For example: 0 = +, 1 = -, 2 = / and 3 = *</p>\n"}, {"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1559707017, "last_edit_date": 1559707017, "creation_date": 1559706735, "answer_id": 56454029, "question_id": 56453903, "link": "https://stackoverflow.com/questions/56453903/taking-operators-as-argument-variables/56454029#56454029", "title": "Taking operators as argument variables", "body": "<blockquote>\n  <p>Also, however the command ./expr.pl 7 * 2 returns the following: 03.bellpaper.doc which is just unfathomable.</p>\n</blockquote>\n\n<p><code>*</code> is a shell glob. Your shell is replacing <code>*</code> with the names of every file in the current directory. The arguments to your program are <code>7</code>, then a lot of filenames, then <code>2</code>. The first of those filenames gets printed by your <code>print \"$operand\\n\"</code> line, and then since <code>$operand</code> doesn't match any of the things you're checking for, nothing else happens.</p>\n\n<p>The way around this is simply to put quotes around the <code>*</code>, or to take input some other way than the commandline.</p>\n"}], "owner": {"reputation": 670, "user_id": 6317688, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154211370668453/picture?type=large", "display_name": "Davide Lorino", "link": "https://stackoverflow.com/users/6317688/davide-lorino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56453972, "answer_count": 3, "score": 0, "last_activity_date": 1559707017, "creation_date": 1559705270, "last_edit_date": 1559706995, "question_id": 56453903, "link": "https://stackoverflow.com/questions/56453903/taking-operators-as-argument-variables", "title": "Taking operators as argument variables", "body": "<p>Hi I am trying to create a simple calculator with only four operators <code>+, -, /</code> and <code>*</code> and for some reason my implementation doesn't work.</p>\n\n<p>I have seen several working implementations (including some that deserve an award for most obfuscated) however what I am curious to know is why <i>doesn't</i> the following work?</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $num1 = $ARGV[0];\nmy $num2 = $ARGV[2];\n\nmy $operator = $ARGV[1];\n\nprint \"$operator \\n\";\n\nif($operator == '-')\n{\n  $num3 = $num1 - $num2;\n  print \"$num1 - $num2 = $num3\\n\";\n} \nelsif($operator == \"+\")\n{\n  $num3 = $num1 + $num2;\n  print \"$num1 + $num2 = $num3\\n\";\n}\nelsif($operator == \"/\")\n{\n  $num3 = $num1 / $num2;\n  print \"$num1 / $num2 = $num3\\n\";\n}\nelsif($operator == \"*\")\n{\n  $num3 = $num1 * $num2;\n  print \"$num1 * $num2 = $num3\\n\";\n}\n</code></pre>\n\n<p>Also, the command <code>./expr.pl 7 * 2</code> returns the following: <code>03.bellpaper.doc</code> which is just unfathomable.  </p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559692742, "post_id": 56452539, "comment_id": 99498436, "body": "It&#39;s impossible to tell without seeing the code of populateMap and what package all of this code is in. Did you mean to return a different variable (<code>%nodeMap</code>)? Are you operating in the same package? (<code>our %hashMap</code> just makes <code>%hashMap</code> in that scope an alias to <code>%&lt;current package&gt;::hashMap</code>)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559692853, "post_id": 56452539, "comment_id": 99498464, "body": "Would also need some more information for the &quot;every 24 hours&quot; question. Is this a persistently running script?"}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559693020, "post_id": 56452539, "comment_id": 99498491, "body": "@Grinnz I want to access the map from other packages. &quot;populateMap&quot; makes an external service call that populates the map. I only want to make this call once a day, but I want other packages to be able to access this data repeatedly after it has been loaded."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559693483, "post_id": 56452539, "comment_id": 99498562, "body": "From another package, just fully qualify the variable name with the package name, rather than using an <code>our</code> alias. But it&#39;s a better idea in the long run to instead use a lexical (<code>my</code>) variable, and write subroutines to access it as needed externally."}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559699776, "post_id": 56452539, "comment_id": 99499567, "body": "@Grinnz thank you. I tried that, but the values never stick. I apologize for not adding this context sooner, but it may have to do with how I am accessing the package that contains the has. It is being accessed by a CGI script. I suspect whenever this CGI script calls a subroutine in the package that creates the hash, it creates a new &quot;instance&quot;."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559700345, "post_id": 56452539, "comment_id": 99499659, "body": "A CGI script is not a persistent process. Variables only exist while the process is running. So in that sense every request creates a new instance."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559700563, "post_id": 56452539, "comment_id": 99499692, "body": "Two very different solutions to being able to cache between requests would be 1) convert to a modern framework which can be run as a persistent daemon that can keep state in memory, or 2) use a database to share state between requests, even a simple one like SQLite or Redis (preferred as it works regardless of deployment strategy). Either approach would probably be beyond the scope of the current question."}], "answers": [{"comments": [{"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559702943, "post_id": 56453433, "comment_id": 99500062, "body": "Thank you. The script does not run persistently, it is a CGI script. I think a potential solution is using freeze/thaw to serialize the data to a file and then deserialize when needed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559703062, "post_id": 56453433, "comment_id": 99500091, "body": "@Seephor OK, thank you for clarification -- precisely, freeze/thaw is one way to do that.  There are yet others, depending on details."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559703408, "post_id": 56453433, "comment_id": 99500146, "body": "@Seephor Then you can also consider a separate program, dedicated to just updadting the map, which can then nicely be run once a day by cron (so by the system).   Then the module needs to check for race conditions (is data being updated <i>right</i> now?) whenever it loads the map, for example using locks. And the program should probably load the map from file every time it needs it, so to not miss an update ... so this gets a little more complicated, but at least timing is done by the system."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559704007, "post_id": 56453433, "comment_id": 99500233, "body": "@Seephor I&#39;ll try to update to your clarifications as I get to it, so if there are further worthy details please add. You can also update the question itself"}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559704549, "post_id": 56453433, "comment_id": 99500318, "body": "I updated the question with more clarification and one approach I have in mind. A cron job sounds ideal, but the environment I am working in requires adding some more dependencies to have it deployed alongside this application. Basically a legacy system that is on the way out, but needs to fetch this particular data from a new source for compliance/migration reasons. So while do-able, I would prefer something that can run within this application to limit scope of effort."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559729974, "post_id": 56453433, "comment_id": 99508806, "body": "@Seephor Updated.  Given the complexity of what you ask this is a sketch (which works in my tests)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559745519, "post_id": 56453433, "comment_id": 99516992, "body": "&quot;advantages are that it takes any valid Perl data and is fast&quot; - Not quite. It can&#39;t serialize file handles, code references (without ugly magic), or a few other esoteric types of references. It can&#39;t serialize regexp references until recent Perls. The serialization format is also not always portable between versions of Perl. For these reasons and because it&#39;s faster, I usually recommend <a href=\"https://metacpan.org/pod/Sereal\" rel=\"nofollow noreferrer\">Sereal</a> (it also doesn&#39;t serialize coderefs/handles, but it does do regexp refs)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559752675, "post_id": 56453433, "comment_id": 99520938, "body": "@Grinnz  I took the serialization part as more of a side-note in this topic, and said &quot;<i>there are other</i>&quot; expecting readers to look it up. Still: (1) by &quot;<i>Perl <b>data</b></i>&quot; I meant things within a reason, surely not file handles and exotic things (added &quot;<i>nearly</i>&quot;)  (2) I warn of portability (it has to be this module) and expect users to investigate (added a note).   There are far more serious (and interesting) concerns here, I think. The choice of serialization is one clean part of it. Thank you for mentioning <code>Sereal</code>, which is recommended often."}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1559766354, "post_id": 56453433, "comment_id": 99526508, "body": "+1 thank you. I went this approach and used the same pattern of whenever a call is made to retrieve the map it checks if the file exists and if it is less than a day old otherwise it will create/re-populate the map."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1592806593, "last_edit_date": 1592806593, "creation_date": 1559700432, "answer_id": 56453433, "question_id": 56452539, "link": "https://stackoverflow.com/questions/56452539/serialize-a-perl-package-variable-and-update-once-every-24-hours-from-a-cgi-scri/56453433#56453433", "title": "Serialize a Perl package variable and update once every 24 hours from a CGI script", "body": "<p>There are a few questions here, on how to set this up and on update/persistence.</p>\n<p>A simple and good way to organize this is to have a module for your &quot;map,&quot; with subs that provide access, updating, saving/loading, and whatever else may be useful.</p>\n<p>One way to keep data up-to-date is to check every time the user code retrieves the &quot;map&quot; from the module, for instance by checking the timestamp on the file in which data is serialized.  (Other ways are mentioned at the end.)</p>\n<p>The module</p>\n<pre><code>package MapService;\n\nuse warnings;\nuse strict;\nuse feature qw(say state);\nuse Data::Dump qw(dd pp);\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(get_map force_update save_to_file);\n\nuse Storable qw(nstore retrieve);  # consider locking versions\n\nmy $data_file = 'data.storable';\n    \nmy %map;\n\nmy $_populate_map = sub { \n    # use &quot;external service&quot; call to populate (update)\n    state $cnt = 1;\n    %map = ( a =&gt; 1, b =&gt; 2, cnt =&gt; $cnt++ );\n    save_to_file();\n};\n\nif (-f $data_file) {                         # initialize\n    %map = %{ load_from_file($data_file) };\n}\nelse {\n    $_populate_map-&gt;();\n    save_to_file();\n}\n\nmy $_update_map = sub {\n    my $filename = $_[0] // $data_file;     #/\n    if (-M $data_file &gt;= 1)  {              # one+ day old\n        $_populate_map-&gt;();\n        save_to_file(file =&gt; $filename);\n    }   \n};\n\nsub update_map { $_update_map-&gt;(@_) };  # outside use, if supported\n\nsub get_map {                           # use this call to check/update\n    $_update_map-&gt;(@_);\n    return \\%map;\n};\n\nsub save_to_file {\n    my %opts = @_; \n    my $file = $opts{file} // $data_file;\n    my $map  = $opts{map}  // \\%map;\n    nstore $map, $file;\n}\n\nsub load_from_file {\n    my $filename = $_[0] // $data_file;\n    return retrieve $filename;\n}\n    \nsub force_update { $_populate_map-&gt;() }   # for tests\n\n1;\n</code></pre>\n<p>with the test driver</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say'; \nuse Data::Dump qw(dd);\n\nuse MapService qw(get_map force_update save_to_file);\n\nmy $map = get_map();\ndd $map;\n\nforce_update(); force_update();   # to force more changes in &quot;map&quot;\ndd get_map();\n\nsave_to_file();  # perhaps in END block\n</code></pre>\n<p>Repeated runs, and examination of the data file, confirm persistence and data manipulations. Little tweaks in the driver help as well, or add routines to change data at will for nicer testing.</p>\n<p>Notes</p>\n<ul>\n<li><p><code>save_to_file</code> is called often to update timestamp, for checks later in the same run</p>\n</li>\n<li><p>There's some corner-cutting and silly choices in the module, for brevity</p>\n</li>\n<li><p>Lexical coderefs (<code>$_populate_map</code> and <code>$_update_map</code>) are for module's internal use, to which access from outside can also be given like it is with <code>update_map</code><sup>\u2020</sup></p>\n</li>\n<li><p><code>Storable</code> is always a solid choice, but there are other options.  A distinct disadvantage of this module is that the data must be both written and read with it (and even module versions shouldn't differ much); advantages are that it takes nearly any valid Perl data and is fast</p>\n<p>In particular consider <code>JSON</code> and <code>YAML</code>, the widely used formats that work across languages (and are readable). If your data is simple enough I'd definitely recommend these</p>\n</li>\n<li><p>We are told that this is for a legacy system without many tools, perhaps not even <code>cron</code></p>\n</li>\n<li><p>Consider using locks for any work with serialized data here</p>\n</li>\n<li><p>This is a stub for realistic arrangements, and even as it stands it needs error handling added</p>\n</li>\n</ul>\n<p>The query from the title of this question, about how to run this once every day and keep data, is addressed above in a very simple way. How to actually do it depends on the rest of the project, and there sure are other ways.</p>\n<p>The check of whether data needs updating is done as data is pulled from the module by <code>get_map</code>, so in between such calls we may have missed the need to update; if data is loaded by the caller just once (at start) we never check during the run.</p>\n<p>One way around this is to compute the remaining time until update when the program starts, then <code>fork</code> another process and <code>sleep</code> in it for that duration, then run the update and send a signal.  The main script can then update its &quot;map&quot; data in the signal handler.</p>\n<p>Another way would be to set up an event loop for the timer but that is likely an overkill (and which would raise the overall complexity a lot).</p>\n<hr />\n<p><sup>\u2020</sup>\u2009Contrary to the mantra of how &quot;there are no private methods&quot; in Perl, a function given via a lexical (<code>my</code>) code reference cannot be accessed from outside the module. (Lexical variables don't exist outside their scope.)</p>\n<p>This has huge limitations if considered for systemic use in object oriented design and in that sense there are indeed no (good) private methods, but it is possible to have (truly) internal functions and this is used for restricted purposes.</p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 1, "last_activity_date": 1559747323, "last_edit_date": 1559747323, "creation_date": 1559742448, "answer_id": 56461822, "question_id": 56452539, "link": "https://stackoverflow.com/questions/56452539/serialize-a-perl-package-variable-and-update-once-every-24-hours-from-a-cgi-scri/56461822#56461822", "title": "Serialize a Perl package variable and update once every 24 hours from a CGI script", "body": "<p>Sounds you like need a cache with an expiration date.  I'd start with <a href=\"https://metacpan.org/pod/CHI\" rel=\"nofollow noreferrer\">CHI</a>.  As you need a cache that survives beyond the lifetime of your process, the simplest driver to use is <a href=\"https://metacpan.org/pod/CHI::Driver::File\" rel=\"nofollow noreferrer\">CHI::Driver::File</a>.  Here's some sample code which sets a 1 second expiration on the cache and queries it at random intervals to show that the expiration works.</p>\n\n<pre><code>use feature 'say';\nuse strict;\nuse warnings;\n\nuse CHI;\n\nuse Data::Dumper;\nuse Time::Piece;\nuse Time::HiRes qw[ usleep ];\n\nsub populateMap {\n    my $date = localtime-&gt;datetime;\n    say \"Put: $date\";\n    return { date =&gt; $date};\n}\n\nsub updateMap {\n    my $cache = CHI-&gt;new(\n                         driver         =&gt; 'File',\n                         root_dir       =&gt; 'cache',\n                        );\n\n    my $data = $cache-&gt;get( 'key' );\n    if ( ! defined $data ) {\n        $data = populateMap ();\n        $cache-&gt;set( 'key', $data, '1 second' );\n    }\n    return $data;\n}\n\nmy $data = updateMap();\n\nfor (0..10){\n    my $sleep = 0.75e6 * rand() + 0.25e6;\n    say sprintf \"\\nSleep: %.2f seconds\", $sleep / 1e6;\n    usleep $sleep;\n    say \"Got:\", updateMap()-&gt;{date};\n}\n</code></pre>\n\n<p>And some sample output:</p>\n\n<pre><code>% perl cache.pl\nPut: 2019-06-05T09:42:05\n\nSleep: 0.97 seconds\nPut: 2019-06-05T09:42:06\nGot:2019-06-05T09:42:06\n\nSleep: 0.83 seconds\nGot:2019-06-05T09:42:06\n\nSleep: 0.49 seconds\nPut: 2019-06-05T09:42:07\nGot:2019-06-05T09:42:07\n\nSleep: 0.88 seconds\nPut: 2019-06-05T09:42:08\nGot:2019-06-05T09:42:08\n\nSleep: 0.75 seconds\nPut: 2019-06-05T09:42:09\nGot:2019-06-05T09:42:09\n\nSleep: 0.28 seconds\nGot:2019-06-05T09:42:09\n\nSleep: 0.60 seconds\nGot:2019-06-05T09:42:09\n\nSleep: 0.34 seconds\nPut: 2019-06-05T09:42:10\nGot:2019-06-05T09:42:10\n\nSleep: 0.80 seconds\nPut: 2019-06-05T09:42:11\nGot:2019-06-05T09:42:11\n\nSleep: 0.63 seconds\nGot:2019-06-05T09:42:11\n\nSleep: 0.95 seconds\nPut: 2019-06-05T09:42:12\nGot:2019-06-05T09:42:12\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>While the example is a single process, the underlying mechanism will survive the lifetime of the process.</li>\n<li><a href=\"https://metacpan.org/pod/CHI\" rel=\"nofollow noreferrer\">CHI</a> provides a <em>key-value</em> store, so you need to create a key.  I chose the string <code>key</code>.</li>\n</ul>\n"}], "owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 56453433, "answer_count": 2, "score": 2, "last_activity_date": 1592806593, "creation_date": 1559691043, "last_edit_date": 1559704567, "question_id": 56452539, "link": "https://stackoverflow.com/questions/56452539/serialize-a-perl-package-variable-and-update-once-every-24-hours-from-a-cgi-scri", "title": "Serialize a Perl package variable and update once every 24 hours from a CGI script", "body": "<p>I am not too experienced with Perl, but I am trying to achieve something that sounds relatively reasonable and simple. </p>\n\n<p>I want to create a package variable hash that is serialized somewhere and updates once every 24 hours. Basically a cache of data from an external service for the day. I tried the following to test:</p>\n\n<pre><code>our %hashMap;\n\nsub updateMap {\n    my $mapSize = scalar(keys %hashMap);\n    if ($mapSize == 0) {\n        populateMap();\n    }\n\n    return \\%hashMap;\n}\n</code></pre>\n\n<p>I added some logging statements and see that every time I call updateMap, the map size is always 0 so it always re-populates the map. The problem is that this is a CGI script so nothing persists.</p>\n\n<p>How can I get the value of the map to stick between function calls and how can I update this map once every 24 hours? One option I have in mind is using Storable store/retrieve to save the hash to a file and retrieve later. Is it possible to check when a file was last modified in Perl to determine if 24 hours have passed?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559678956, "post_id": 56449507, "comment_id": 99494621, "body": "What shell are you using (Window&#39;s or bash?) If you&#39;re using bash, you should be using single quotes (for consistency if nothing else)"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559680366, "post_id": 56449507, "comment_id": 99495204, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers (some of which you already have! :) )."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1559675063, "post_id": 56449809, "comment_id": 99493075, "body": "So is <code>*</code> - I don&#39;t think that was intended to be a metacharacter either."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1559676222, "last_edit_date": 1559676222, "creation_date": 1559674783, "answer_id": 56449809, "question_id": 56449507, "link": "https://stackoverflow.com/questions/56449507/using-perl-to-replace-empty-string-with-space/56449809#56449809", "title": "Using Perl to replace empty string with space", "body": "<p><code>+</code> is a regex metacharacter. To specify a literal <code>+</code> character, you need to escape it</p>\n\n<pre><code>perl -i -p -e \"s/\\t\\+/\\t +/g\" filename.bcp\n</code></pre>\n\n<p>or put it into a character class</p>\n\n<pre><code>perl -i -p -e \"s/\\t[+]/\\t +/g\" filename.bcp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11600668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qKZyamGfIdE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3renr_oKWsHRDai8HgG0X7t5TkBLjg/mo/photo.jpg?sz=128", "display_name": "ScottS", "link": "https://stackoverflow.com/users/11600668/scotts"}, "is_accepted": false, "score": 0, "last_activity_date": 1559738123, "creation_date": 1559738123, "answer_id": 56460606, "question_id": 56449507, "link": "https://stackoverflow.com/questions/56449507/using-perl-to-replace-empty-string-with-space/56460606#56460606", "title": "Using Perl to replace empty string with space", "body": "<p>Thanks mob.  I was able to get what I needed but using this:</p>\n\n<p>perl -i -p -e \"s/\\t[+][<em>]/\\t +</em>/g\" filename.bcp</p>\n"}], "owner": {"reputation": 21, "user_id": 11600668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qKZyamGfIdE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3renr_oKWsHRDai8HgG0X7t5TkBLjg/mo/photo.jpg?sz=128", "display_name": "ScottS", "link": "https://stackoverflow.com/users/11600668/scotts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1559738123, "creation_date": 1559673256, "last_edit_date": 1559674712, "question_id": 56449507, "link": "https://stackoverflow.com/questions/56449507/using-perl-to-replace-empty-string-with-space", "title": "Using Perl to replace empty string with space", "body": "<p>I have a bcp file that uses a field delimiter of <code>+*{tab}</code>.  So an empty column would have the previous tab and then <code>+*</code>.  I'm trying to use this to replace the empty value with a space using Perl for Windows</p>\n\n<p><code>perl -i -p -e \"s/\\t+*/\\t +*/g\" filename.bcp</code></p>\n\n<p>This is giving me Nested quantifiers in regex issue.</p>\n"}, {"tags": ["perl", "openssl", "debian", "cpan"], "answers": [{"tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": true, "score": 3, "last_activity_date": 1559673121, "last_edit_date": 1559673121, "creation_date": 1559672108, "answer_id": 56449301, "question_id": 56449300, "link": "https://stackoverflow.com/questions/56449300/could-not-find-openssl-if-its-already-installed-please-set-the-openssl-prefix/56449301#56449301", "title": "Could not find OpenSSL If it&#39;s already installed, please set the OPENSSL_PREFIX environment variable accordingly", "body": "<p>This is <strong>not</strong> an error that results from being unable to locate headers (provided by <code>-dev</code>), but because it can't find the openssl binary utility. The headers are still required, but you need the binary <code>openssl</code> utility too. You can either install the <code>Net::SSLeay</code> with apt itself, or build the module from source. The simple method, installing <code>Net::SSLeay</code> from apt, can be done with</p>\n\n<pre><code>sudo apt install libnet-ssleay-perl\n</code></pre>\n\n<p>Alternatively you can install the binary <code>openssl</code>, and try to install again with cpan.</p>\n\n<pre><code>sudo apt install openssl libssl-dev zlib1g-dev ## all requirements to build Net::SSLeay\ncpanm Net::SSLeay\n</code></pre>\n\n<p>You can verify <code>openssl</code> is installed with (if this works, the error above should not be reproducible)</p>\n\n<pre><code>openssl version\n</code></pre>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 56449301, "answer_count": 1, "score": 0, "last_activity_date": 1559741485, "creation_date": 1559672108, "last_edit_date": 1559741485, "question_id": 56449300, "link": "https://stackoverflow.com/questions/56449300/could-not-find-openssl-if-its-already-installed-please-set-the-openssl-prefix", "title": "Could not find OpenSSL If it&#39;s already installed, please set the OPENSSL_PREFIX environment variable accordingly", "body": "<p>When I try to install <a href=\"https://metacpan.org/pod/Net::SSLeay\" rel=\"nofollow noreferrer\"><code>Net::SSLeay</code></a> on Debian, I'm getting</p>\n\n<pre><code>Use of uninitialized value in subroutine entry at Makefile.PL line 290.\nUse of uninitialized value $exec in -x at Makefile.PL line 108.\n*** Could not find OpenSSL\n    If it's already installed, please set the OPENSSL_PREFIX environment\n    variable accordingly. If it isn't installed yet, get the latest version\n    from http://www.openssl.org/.\nN/A\n</code></pre>\n\n<p>But I do have OpenSSL installed,</p>\n\n<pre><code>$ dpkg -l libssl-dev\nDesired=Unknown/Install/Remove/Purge/Hold\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name             Version      Architecture Description\n+++-================-============-============-================================================\nii  libssl-dev:amd64 1.1.1b-2     amd64        Secure Sockets Layer toolkit - development files\n</code></pre>\n\n<p>I've tried playing with <code>OPENSSL_PREFIX</code> too.</p>\n"}, {"tags": ["apache", ".htaccess", "perl", "webserver", "virtualmin"], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 9311455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjYpT.jpg?s=128&g=1", "display_name": "Dylan Brown", "link": "https://stackoverflow.com/users/9311455/dylan-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1560877713, "creation_date": 1560877713, "answer_id": 56653993, "question_id": 56447948, "link": "https://stackoverflow.com/questions/56447948/why-is-my-site-consistently-showing-not-found/56653993#56653993", "title": "Why is my site consistently showing not found?", "body": "<p>I ended up having a misconfiguration higher up in the httpd.conf which dissallowed most of what I was doing, so the settings that I showed which I was changing weren't making a difference because Apache didn't look at them. </p>\n\n<p>I uninstalled Virtualmin which was controlling the conf file, then I set Apache up manually and carefully. Now it is working.</p>\n"}], "owner": {"reputation": 35, "user_id": 9311455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjYpT.jpg?s=128&g=1", "display_name": "Dylan Brown", "link": "https://stackoverflow.com/users/9311455/dylan-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56653993, "answer_count": 1, "score": 1, "last_activity_date": 1560911197, "creation_date": 1559665833, "last_edit_date": 1559847022, "question_id": 56447948, "link": "https://stackoverflow.com/questions/56447948/why-is-my-site-consistently-showing-not-found", "title": "Why is my site consistently showing not found?", "body": "<p>I recently connected migrated my website from Bluehost to a private server, and I am having trouble with the configuration of my apache server. No matter what page I attempt to visit on my site, it displays a 404 this url is not found on this server error. </p>\n\n<p>My site is written in both perl and php. Mostly perl. Would a perl version mismatch between my old server and my new server make the not found error appear? I would think that would cause a 500 server error.</p>\n\n<p>What am I doing wrong? What do I change in order to make it work?</p>\n\n<p>I have played around with the part of my httpd.conf file that controls my website. </p>\n\n<p>My site is behind a reverse proxy that points to my backend server running the site at 333.333.333.333/test</p>\n\n<p>Here it is:</p>\n\n<pre><code>SuexecUserGroup \"#1001\" \"#1001\"\nServerName test.example.org\nServerAlias www.test.example.org\nServerAlias mail.test.example.org\nServerAlias webmail.test.example.org\nServerAlias admin.test.example.org\nDocumentRoot /home/theuser/public_html/testrbs\nErrorLog /var/log/virtualmin/test.example.org_error_log\nCustomLog /var/log/virtualmin/test.example.org_access_log combined\nScriptAlias /cgi-bin/ /home/theuser/public_html/test/cgi-bin\nDirectoryIndex index.cgi index.html index.htm index.php index.php4 index.php5\n&lt;Directory \"/home/theuser/public_html/test\"&gt;\nOptions -Indexes +IncludesNOEXEC +SymLinksIfOwnerMatch \nallow from all\nAllowOverride All Options=ExecCGI,Includes,IncludesNOEXEC,Indexes,MultiViews,SymLinksIfOwnerMatch\nRequire all granted\n&lt;/Directory&gt;\n&lt;Directory \"/home/theuser/public_html/test/cgi-bin\"&gt;\nallow from all\nAllowOverride All Options=ExecCGI,Includes,IncludesNOEXEC,Indexes,MultiViews,SymLinksIfOwnerMatch\nRequire all granted\n&lt;/Directory&gt;\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "anyevent"], "answers": [{"comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1559776682, "post_id": 56464270, "comment_id": 99529703, "body": "Yeah, I did think I was toast on this one. <a href=\"https://metacpan.org/pod/EV#EVENT-LOOPS\" rel=\"nofollow noreferrer\">EV</a> actually allows for multiple loops with <code>my $loop = new EV::Loop [$flags]</code>, but <code>AnyEvent::Impl::EV</code> doesn&#39;t support that. I suppose one could write <code>AnyEvent::Impl::EV::Alt</code> that allows that. But there are limitations... I did write a proof-of-concept using <a href=\"https://metacpan.org/pod/Promises\" rel=\"nofollow noreferrer\">Promises</a>, so we agree that <i>is</i> the right approach. But our real &quot;getData()&quot; is called in many places, and refactoring it to use promises means every caller (recursively) needs to be similarly refactored as well."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1559776899, "post_id": 56464270, "comment_id": 99529748, "body": "Yes, in such a situation a new promise-returning variant is the only sensible option. But I&#39;m sure that&#39;s not trivial either."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1559753531, "last_edit_date": 1559753531, "creation_date": 1559750984, "answer_id": 56464270, "question_id": 56447536, "link": "https://stackoverflow.com/questions/56447536/avoid-mojolicious-async-beviour-avoid-anyeventcondvar-recursive-blocking-wa/56464270#56464270", "title": "Avoid Mojolicious async beviour? Avoid &quot;AnyEvent::CondVar: recursive blocking wait attempted&quot;", "body": "<p>You can avoid this problem by ensuring Mojolicious and AnyEvent do not use the same main loop, either by setting the env var <code>MOJO_REACTOR=Mojo::Reactor::Poll</code>, or using <a href=\"https://metacpan.org/pod/AnyEvent::Loop\" rel=\"nofollow noreferrer\">AnyEvent::Loop</a> before anything else so that AnyEvent uses its pure-perl loop (preferred, since it is not being used as the main loop). Unfortunately there is no way to cause it to use a separately instantiated loop otherwise, such as how <a href=\"https://metacpan.org/pod/Mojo::UserAgent#ioloop\" rel=\"nofollow noreferrer\">Mojo::UserAgent blocking requests</a> function.</p>\n\n<p>Note that commonly, you want multiple loop consumers to share the main loop; this is an odd case, where you <em>want</em> the inner consumer to block.</p>\n\n<hr>\n\n<p>A more \"async\" long term solution might be to simply allow the operations to share the main loop, as Mojolicious is designed for non-blocking response operation. You can do this by first ensuring that both do in fact share the EV main loop (such as by setting <code>MOJO_REACTOR=Mojo::Reactor::EV</code>), then changing your function, or creating a new version of the function, to return a <a href=\"https://metacpan.org/pod/Mojo::Promise\" rel=\"nofollow noreferrer\">promise</a> that the function will asynchronously populate with the result, and chaining any further functionality that relies on that result off of that promise. Of course your function is more complicated than the single timer you use here but it still may be worth consideration - it will allow the application to continue to serve other requests while waiting on the result of the AnyEvent operation.</p>\n\n<pre><code>sub getData_p {\n  my $p = Mojo::Promise-&gt;new;\n  my $w; # keep a strong reference to $w for AnyEvent's reasons\n  $w = AnyEvent-&gt;timer(after =&gt; 5, cb =&gt; sub { $p-&gt;done(42); undef $w });\n  return $p;\n}\n\nget '/' =&gt; sub {\n  my ($c) = @_;\n  my $tx = $c-&gt;render_later-&gt;tx; # keep strong reference to $tx\n  getData_p()-&gt;then(sub { $c-&gt;render(text =&gt; \"Data is: $_[0]\") })\n    -&gt;catch(sub { $c-&gt;reply-&gt;exception($_[0]); undef $tx });\n};\n</code></pre>\n"}], "owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 56464270, "answer_count": 1, "score": 3, "last_activity_date": 1559900601, "creation_date": 1559664185, "last_edit_date": 1559900601, "question_id": 56447536, "link": "https://stackoverflow.com/questions/56447536/avoid-mojolicious-async-beviour-avoid-anyeventcondvar-recursive-blocking-wa", "title": "Avoid Mojolicious async beviour? Avoid &quot;AnyEvent::CondVar: recursive blocking wait attempted&quot;", "body": "<p>We have a library that uses AnyEvent already. It uses AnyEvent internally and in the end it returns a value (<em>synchronously</em> - not with a callback). Is there any way I can use this library with Mojolicious?</p>\n\n<p>It does something like:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse AnyEvent;\nuse Mojolicious::Lite;\n\n# To the caller, getData is a synchronous sub that returns a value.\n# The fact that it uses AnyEvent is an internal implementation detail of\n# getData\nsub getData {\n    my $cv = AnyEvent-&gt;condvar;\n\n    my $w = AnyEvent-&gt;timer (after =&gt; 5, cb =&gt; sub {\n        # Perform many async operations, represented here by a single timer,\n        # calculating a final result that is sent:\n        $cv-&gt;send(42);\n    });\n\n    my $result = $cv-&gt;recv;\n    # postProcess($result);\n    return $result;\n}\n\nget '/' =&gt; sub {\n    my ($c) = @_;\n    $c-&gt;render(text =&gt; \"Data is: \" . getData());\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>When I run <code>morbo app.pl</code> and try to <code>get '/'</code> from two browser tabs at the same time I get this error:</p>\n\n<pre><code>AnyEvent::CondVar: recursive blocking wait attempted at /bla/bla/app.pl line 16.\n</code></pre>\n\n<p>What I think is going on is that morbo uses EV internally and so when it dispatches to handle the first <code>get '/'</code>, <code>$cv-&gt;recv</code> ends up getting called, returning to the EV event loop. EV now tries to handle the second <code>get '/'</code> and <code>$cv-&gt;resv</code> is called again, triggering the error.</p>\n\n<p>I know I can refactor the <code>$cv</code> out of <code>getData()</code> to make an asynchronous version, but in reality the real \"getData\" is called in many places and turning all calls to \"getData\" into async code is not feasible.</p>\n\n<p>So my question is: Is there any way I can call the exact <code>getData()</code> above reliably while using <code>morbo</code>/Mojolicious? I'd like <code>get '/'</code> to block until it is done.</p>\n\n<p><strong>Edit:</strong> The AnyEvent's <a href=\"https://metacpan.org/pod/AnyEvent#WHAT-TO-DO-IN-A-MODULE\" rel=\"nofollow noreferrer\">WHAT TO DO IN A MODULE</a> section explicity says:</p>\n\n<blockquote>\n  <p>Never call ->recv on a condition variable unless you know that the ->send method has been called on it already. This is because it will stall the whole program, and the whole point of using events is to stay interactive.</p>\n</blockquote>\n\n<p><code>getData()</code> above violates that. Now I understand the reason for that part of the AnyEvent documentation :-)</p>\n"}, {"tags": ["mysql", "perl", "redis", "web-crawler", "data-consistency"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559658590, "post_id": 56445790, "comment_id": 99485404, "body": "Does each of these application servers share the same database, or do they run their own? If the storage is centralised, your consistency problem is with the crawler processes taking different times to complete, so it is possible that process A starts, then B starts and finishes, then A finishes, and you get out of date data. If the data has a timestamp you can use that to store it to keep the newest version, or you can attach a timestamp (in milliseconds) straight after the fetch has finished and use that. It doesn&#39;t matter what technology or storage you use."}, {"owner": {"reputation": 1010, "user_id": 55276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454038f12793de98a5cb28f9c00ef728?s=128&d=identicon&r=PG", "display_name": "Fayland Lam", "link": "https://stackoverflow.com/users/55276/fayland-lam"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559658801, "post_id": 56445790, "comment_id": 99485540, "body": "it shares the same database. yes, the case is that crawler X may get out of date data. and the data does not have a timestamp. we only have time() of that server when it finishes. so what&#39;s the best solution to store that mini-second with MySQL? right now we&#39;re using INSERT INTO .. ON DUPLICATE KEY UPDATE ... thanks"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559660695, "post_id": 56445790, "comment_id": 99486625, "body": "You are overwriting the data, not storing each record separately? I would use an integer field with micro-seconds. Use Time::HiRes to get the <code>microtime</code> and on your LWP, install <a href=\"https://metacpan.org/pod/LWP::UserAgent#HANDLERS\" rel=\"nofollow noreferrer\">a handler</a> for either <code>respone_headers</code> or <code>response_done</code> and stick the microtime in there. Then use that for detecting which one is the newest."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559730118, "post_id": 56458024, "comment_id": 99508879, "body": "Could you please quote or summarise the relevant part of the doc here? As it stands this is a link-only answer. I would do it for you, but I can&#39;t read the whole thing now unfortunately."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1559727857, "creation_date": 1559727857, "answer_id": 56458024, "question_id": 56445790, "link": "https://stackoverflow.com/questions/56445790/distributed-crawler-and-consistency/56458024#56458024", "title": "distributed crawler and consistency", "body": "<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html\" rel=\"nofollow noreferrer\">Lock a row so another process cannot update it.</a></p>\n"}], "owner": {"reputation": 1010, "user_id": 55276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454038f12793de98a5cb28f9c00ef728?s=128&d=identicon&r=PG", "display_name": "Fayland Lam", "link": "https://stackoverflow.com/users/55276/fayland-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559727857, "creation_date": 1559657850, "question_id": 56445790, "link": "https://stackoverflow.com/questions/56445790/distributed-crawler-and-consistency", "title": "distributed crawler and consistency", "body": "<p>The case is that we have multiple servers (40+) to scrape one same URL at the same time (to make sure we have smallest legacy) and save the data into the database (MySQL).</p>\n\n<p>and the problem now is that: the data is switch back and forth. for example, the content would be A &lt;-> B &lt;-> A &lt;-> B &lt;-> A in few seconds due to the crawler/database legacy.</p>\n\n<p>is there a good way to prevent it? We're writing the crawler with Perl but any language would be fine for us since we can borrow the idea behind.</p>\n\n<p>Any tip would be really appreciated. Redis? ZeroMQ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "conditional-operator"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559679085, "post_id": 56445539, "comment_id": 99494664, "body": "The operator in question is called the conditional operator. It is but one of many ternary operators. Fixed."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 8, "last_activity_date": 1559657662, "last_edit_date": 1559657662, "creation_date": 1559657036, "answer_id": 56445565, "question_id": 56445539, "link": "https://stackoverflow.com/questions/56445539/is-there-a-shorter-way-of-using-the-ternary-conditional-operator-in-perl/56445565#56445565", "title": "Is there a shorter way of using the ternary conditional operator in Perl?", "body": "<p>The <a href=\"https://perldoc.pl/perlop#Logical-Defined-Or\" rel=\"noreferrer\">defined-or operator</a>:</p>\n\n<pre><code>my $variable = $self-&gt;{_some_thing_stored_here} // some_function(@with_some_parameters);\n</code></pre>\n\n<p>Requires Perl 5.10+.</p>\n\n<p>You can also (ab)use <a href=\"https://perldoc.pl/perlsyn#Statement-Modifiers\" rel=\"noreferrer\">postfix foreach</a> to make use of <code>$_</code> when the defined check isn't exactly what you need, though it's not the most common idiom, and you should take care not to declare variables with postfix statement modifiers, and that you don't call anything which will modify the now-aliased global <code>$_</code>.</p>\n\n<pre><code>my $variable;\n$variable = check($_) ? $_ : something_else() for $self-&gt;{_some_thing_stored_here};\n# make sure something_else does not clobber $_\n# that would also clobber $self-&gt;{_some_thing_stored_here} !\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 56445565, "answer_count": 1, "score": 2, "last_activity_date": 1559679037, "creation_date": 1559656928, "last_edit_date": 1559679037, "question_id": 56445539, "link": "https://stackoverflow.com/questions/56445539/is-there-a-shorter-way-of-using-the-ternary-conditional-operator-in-perl", "title": "Is there a shorter way of using the ternary conditional operator in Perl?", "body": "<p>I want to do the following assignment if possible in one line and without having it really long:</p>\n\n<pre><code>my $variable = defined($self-&gt;{_some_thing_stored_here}) ? $self-&gt;{_some_thing_stored_here} : new some_function(@with_some_parameters);\n</code></pre>\n\n<p>Is it possible somehow in a similar way to getting variables in a loop with \"$_\" to get the parameter of the if condition, so that it looks somehow like this:</p>\n\n<pre><code>my $variable = defined($self-&gt;{_some_thing_stored_here}) ? $_ : new some_function(@with_some_parameters);\n</code></pre>\n\n<p>PD: I know it is possible to put the condition in a variable, but I'd like to know if is possible to do it shorter.</p>\n"}, {"tags": ["perl", "hash", "reference"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1559676301, "post_id": 56444677, "comment_id": 99493545, "body": "<code>use strict;</code> <code>use warnings;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559698601, "post_id": 56444677, "comment_id": 99499365, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! It would have found the problem"}, {"owner": {"reputation": 39, "user_id": 1552792, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1cc77cf37e8c0a3f4cc5042e4cb4046?s=128&d=identicon&r=PG", "display_name": "David Janes", "link": "https://stackoverflow.com/users/1552792/david-janes"}, "edited": false, "score": 0, "creation_date": 1559737779, "post_id": 56444677, "comment_id": 99512382, "body": "All these errors have come to my attention as i&#39;ve added use strict; and use warnings;  Without turning them on it was working so there would be no question !"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 1552792, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1cc77cf37e8c0a3f4cc5042e4cb4046?s=128&d=identicon&r=PG", "display_name": "David Janes", "link": "https://stackoverflow.com/users/1552792/david-janes"}, "edited": false, "score": 0, "creation_date": 1559655293, "post_id": 56444754, "comment_id": 99483576, "body": "I undetstand your code but it gets a bit more confusing for me when the variables are being passed to a sub and back again.  Could you expand  on your answer please and show me how to get the 2 variables out of a sub.  Thanks"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 39, "user_id": 1552792, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1cc77cf37e8c0a3f4cc5042e4cb4046?s=128&d=identicon&r=PG", "display_name": "David Janes", "link": "https://stackoverflow.com/users/1552792/david-janes"}, "edited": false, "score": 0, "creation_date": 1559655924, "post_id": 56444754, "comment_id": 99483948, "body": "@DavidJanes I added an example, does that help? Make sure not to use <code>()</code> either in the subroutine definition, this is still a prototype and does not do what you want."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559698627, "post_id": 56444754, "comment_id": 99499371, "body": "Re &quot;<i>There is no implicit &#39;pass by reference&#39; in Perl</i>&quot;, Quite the opposite, everything is passed by reference. (You gotta keep in mind that only scalars can be passed to subs, though.)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559698850, "post_id": 56444754, "comment_id": 99499413, "body": "@ikegami That&#39;s what I was trying to say but perhaps explained badly - there&#39;s no feature to do so, because it always occurs, but only with the scalars passed."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1559655846, "last_edit_date": 1559655846, "creation_date": 1559654281, "answer_id": 56444754, "question_id": 56444677, "link": "https://stackoverflow.com/questions/56444677/passing-a-perl-hash-by-reference-plus-scalar-variable/56444754#56444754", "title": "Passing a Perl Hash by reference plus scalar variable", "body": "<p>There is no implicit 'pass by reference' in Perl*. Everything is passed the same way - as a list of scalars, by alias (thus passing a hash itself will instead pass the list of its keys and values*). But you can create a reference, pass it, and then dereference it to use it - and references can be copied around without copying the underlying structure.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy %hash;\nmy $ref = \\%hash;\nmy $copy = $ref;\n$copy-&gt;{a} = 1;\nprint \"$ref-&gt;{a}\\n\"; # also 1\n</code></pre>\n\n<p>References will maintain their referenced structure after a <code>my (...) = @_;</code> or <code>my $foo = shift;</code> assignment in a subroutine.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub foo {\n  my ($ref, $key) = @_;\n  $ref-&gt;{$key} = 42;\n}\n\nmy %hash;\nfoo(\\%hash, 'foo');\nprint \"$hash{foo}\\n\"; # 42\n</code></pre>\n\n<p>See <a href=\"https://p3rl.org/REF\" rel=\"nofollow noreferrer\">https://p3rl.org/REF</a> for the relevant documentation on Perl references.</p>\n\n<p>Since you are already passing a reference, there is no need for your <code>(\\%$)</code> prototype: you can just remove it from the subroutine definition.</p>\n\n<p>*except sort of with prototypes, but it's better to avoid them in most cases.</p>\n"}], "owner": {"reputation": 39, "user_id": 1552792, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1cc77cf37e8c0a3f4cc5042e4cb4046?s=128&d=identicon&r=PG", "display_name": "David Janes", "link": "https://stackoverflow.com/users/1552792/david-janes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559656001, "creation_date": 1559654026, "last_edit_date": 1559656001, "question_id": 56444677, "link": "https://stackoverflow.com/questions/56444677/passing-a-perl-hash-by-reference-plus-scalar-variable", "title": "Passing a Perl Hash by reference plus scalar variable", "body": "<p>I'm trying to pass from Main.pl to a sub (in ReadConfigFile.pm) a hash by reference and a scalar value.  The scalar variable is the path to a config file and once this file is opened I want to fill a hash with some of its values.  How do i pass a hash by reference and a scalar so that I then have the hash values available to use in Main.pl</p>\n\n<p>I have done a lot of reading but cant get this to work.  I realise i cant do  = @_; in my sub as that is creating a new hash.</p>\n\n<p>Ive tried following the prototype method, this fills the hash ok but back in Main.pl the hash is empty.</p>\n\n<p>Main.pl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># Read the config file.  Return 3 scalars and a hash\nmy %apps;\nmy ($schema, $directory, $staticFile) = readConfigFile(\\%apps, $configFilePath);\n\nmy %app_list = %apps;  # ive tried this in, out and in a variety of states\n\nforeach my $name (sort keys %app_list) {\n    print \"\\nMAIN $name\";\n}\n# this is empty\n</code></pre>\n\n<p>ReadConfigFile.pm</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub readConfigFile (\\%$) {\nmy ($apps_ref, $configFilePath) = @_;\n\n# also tried \n# $apps_ref = shift but then configFilePath is empty\n# linearray is each line from open config file split by :\n\n$apps_ref{$lineArray[1]}{id} = $lineArray[1];\n$apps_ref{$lineArray[1]}{name} = $lineArray[2];\n$schema = $lineArray[1];\n$directory = $lineArray[1];\n$staticFile = $lineArray[1];\n\nreturn ($schema, $directory, $staticFile);  \n</code></pre>\n\n<p>configFile.txt</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>APP:1101:ACTIVITY\nAPP:1102:EVENTS\nAPP:1103:PERFORMANCE\nAPP:1104:LOCATION\nSTATIC_FILE:static_file.sql\nSCHEMA:CAASS\nDIRECTORY:CAASS\n</code></pre>\n\n<p>I want to get the 3 scalar variable returned and the hash so i can use them throughout Main.pl and pass to other subs.</p>\n\n<p>I have also tried passing in just the configfilename and returning 4 variables, the 3 scalars and the hash. </p>\n\n<p>I expect someone will crack this in minutes but i just cant work out the combination of \\ and @ and % and $ to make it work.</p>\n\n<p>Thanks for any help or ideas.</p>\n\n<p>Edit 1:\nMain.pl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my %apps;\nmy ($schema, $directory, $staticFile) = readConfigFile(\\%apps, $configFilePath);\n\nforeach my $name (sort keys %apps) {\n    print \"\\nMAIN $name\";\n}\n</code></pre>\n\n<p>ReadConfigFile</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub readConfigFile () {\nmy $apps_ref = shift;\nmy $configFilePath = $_[0];\n#Fill It\n$apps_ref{$lineArray[1]}{id} = $lineArray[1];\n$apps_ref{$lineArray[1]}{name} = $lineArray[2];\n\n# This shows results\nforeach my $name (sort keys %apps_ref) {\n    print \"\\nreadConfigFile   $name\";\n}\n</code></pre>\n\n<p>But the values arent coming back into Main.pl</p>\n\n<p>edit 2:\nSo im still interested in how the above can be made to work.  But ive attacked it a different way and it works</p>\n\n<p>Main.pl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my ($schema, $directory, $staticFile, %apps) = readConfigFile($configFilePath);\n\nforeach my $name (sort keys %apps) {\n    print \"\\nMAIN $name\";\n}\n</code></pre>\n\n<p>ReadConfigFile</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub readConfigFile () {\nmy $configFilePath = $_[0];\nmy %apps;\n#Fill It\n%apps{$lineArray[1]}{id} = $lineArray[1];\n$apps{$lineArray[1]}{name} = $lineArray[2];\n\nforeach my $name (sort keys %apps) {\n    print \"\\nreadConfigFile   $name\";\n}\n\nreturn ($schema, $directory, $staticFile, %apps);\n</code></pre>\n\n<p>Both sets off output show.</p>\n"}, {"tags": ["perl", "bots"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646164, "post_id": 56442516, "comment_id": 99478494, "body": "What output do you get if you run your script under <code>ROLE_EVENTEMITTER_DEBUG=1</code>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1559646238, "post_id": 56442516, "comment_id": 99478517, "body": "Also, what do you get from <code>perl -d:Confess script.pl</code>?"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646430, "post_id": 56442516, "comment_id": 99478604, "body": "@melpomene I think I figured out the error thank for your help"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646534, "post_id": 56442516, "comment_id": 99478654, "body": "Now I get other error..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646604, "post_id": 56442516, "comment_id": 99478692, "body": "Ah. It&#39;s dumb that <code>Role::EventEmitter</code> hides error details by default. You might want to report a feature request that <a href=\"https://metacpan.org/source/DBOOK/Role-EventEmitter-0.003/lib/Role/EventEmitter.pm#L21\" rel=\"nofollow noreferrer\">this line</a> be changed to print <code>@_</code> instead of just <code>$_[0]</code>."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646757, "post_id": 56442516, "comment_id": 99478766, "body": "@melpomene If I do so the error is less descriptive yet, it prints nothing."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646942, "post_id": 56442516, "comment_id": 99478850, "body": "Upgraded question @melpomene"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559646967, "post_id": 56442516, "comment_id": 99478862, "body": "I&#39;m confused. What exactly did you change where?"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559647034, "post_id": 56442516, "comment_id": 99478898, "body": "@melpomene The file you said me to report I put $_[1] exactly on this line instead of $@ as you suggested."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559647115, "post_id": 56442516, "comment_id": 99478950, "body": "I never said anything about <code>$_[1]</code> or <code>$@</code>. WTF?"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559647168, "post_id": 56442516, "comment_id": 99478976, "body": "&gt;Ah. It&#39;s dumb that Role::EventEmitter hides error details by default. You might want to report a feature request that this line be changed to print @_ instead of just $_[0]."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559647257, "post_id": 56442516, "comment_id": 99479027, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/194429/discussion-between-melpomene-and-sergiotarxz\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559647414, "post_id": 56442853, "comment_id": 99479107, "body": "When I installed IO::Async::SSL I get another error saying JSON payload cannot be decoded. It is in the question, just to point it to readers."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559648683, "post_id": 56442853, "comment_id": 99479753, "body": "It works fine upgrading Mastodon Client to the last version, thank you for the help and for correct typos in my question."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559652720, "post_id": 56442853, "comment_id": 99482066, "body": "The error event is defined to be handled in a certain way: the first value (after the invocant) is the error message. This is necessary because Perl only works in string exceptions. I am not sure why Mastodon::Client put a boolean there instead of the message."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1559648220, "last_edit_date": 1559648220, "creation_date": 1559647233, "answer_id": 56442853, "question_id": 56442516, "link": "https://stackoverflow.com/questions/56442516/mastodonlistener-1-at-home-sergio-perl5-lib-perl5-role-eventemitter-pm-line/56442853#56442853", "title": "Mastodon::Listener: 1 at /home/sergio/perl5/lib/perl5/Role/EventEmitter.pm line 21", "body": "<p>It's unfortunate that Role::EventEmitter hides the details of that error by default. At least <code>perl -d:Confess</code> shows useful information in the stack trace.</p>\n\n<p>Otherwise you could have recovered the error message by registering an <code>error</code> handler:</p>\n\n<pre><code>use Data::Dumper;\n...\n$listener-&gt;on( error =&gt; sub {\n    my ($is_fatal, $message, $details) = @_;\n    die \"error ($is_fatal): $message\\n\" . Dumper($details);\n});\n</code></pre>\n\n<p>The actual error message,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate IO/Async/SSL.pm in @INC (@INC contains: ...)\n</code></pre>\n\n<p>just means you need to install the <a href=\"https://metacpan.org/pod/IO::Async::SSL\" rel=\"nofollow noreferrer\">IO::Async::SSL</a> module.</p>\n\n<hr>\n\n<p>The <code>... did not pass type constraint \"Bool\" (in $args-&gt;{\"locked\"}) ...</code> error looks like <a href=\"https://gitlab.com/jjatria/Mastodon-Client/issues/10\" rel=\"nofollow noreferrer\">issue #10 in Mastodon::Client</a>. There is a <a href=\"https://gitlab.com/jjatria/Mastodon-Client/commit/2f3fcdf1031d9ba524e6314dbb8b1e730f530f5d\" rel=\"nofollow noreferrer\">patch</a>, but it hasn't made it into an official Mastodon::Client release yet.</p>\n\n<p>A possible workaround might be to downgrade Type::Tiny to version 1.003002 or lower.</p>\n"}], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56442853, "answer_count": 1, "score": 0, "last_activity_date": 1559648340, "creation_date": 1559645936, "last_edit_date": 1559648340, "question_id": 56442516, "link": "https://stackoverflow.com/questions/56442516/mastodonlistener-1-at-home-sergio-perl5-lib-perl5-role-eventemitter-pm-line", "title": "Mastodon::Listener: 1 at /home/sergio/perl5/lib/perl5/Role/EventEmitter.pm line 21", "body": "<p>I have the following example code copied from <a href=\"https://metacpan.org/pod/Mastodon::Client\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Mastodon::Client</a> but it isn't working:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Mastodon::Client;\n\nmy $client = Mastodon::Client-&gt;new(\n    instance=&gt;'mastodon.cloud',\n    name=&gt;'Perl watcher',\n    client_id=&gt;'&lt;myid&gt;',\n    client_secret=&gt;'&lt;mysecret&gt;',\n    access_token=&gt;'&lt;mytoken&gt;',\n    coerce_entities=&gt;1\n) or die \"Cannot connect\";\nmy $listener = $client-&gt;stream( 'public' );\n$listener-&gt;on( update =&gt; sub {\n    my ($listener, $status) = @_;\n    printf \"%s said: %s\\n\",\n        $status-&gt;account-&gt;display_name,\n        $status-&gt;content;\n});\n$listener-&gt;start;\n</code></pre>\n\n<p>It gives me the following error:</p>\n\n<blockquote>\n  <p>Mastodon::Listener: 1 at /home/sergio/perl5/lib/perl5/Role/EventEmitter.pm line 21.</p>\n</blockquote>\n\n<p>This happen in the <code>$listener-&gt;start;</code> line exactly but I don't know why.</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>-- Emit error in Mastodon::Listener (0)\nMastodon::Listener: 1 at /home/sergio/perl5/lib/perl5/Role/EventEmitter.pm line 21.\n</code></pre>\n\n<p>^ ROLE_EVENTEMITTER_DEBUG=1 v perl -d:Confess mastodon.pl </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Mastodon::Listener: 1 at /home/sergio/perl5/lib/perl5/Role/EventEmitter.pm line 21.\n    Role::EventEmitter::emit(Mastodon::Listener=HASH(0x55d97ff65e90), \"error\", 1, \"Can't locate IO/Async/SSL.pm in \\@INC (you may need to install\"..., ARRAY(0x55d980399a10)) called at /home/sergio/perl5/lib/perl5/Mastodon/Listener.pm line 172\n    Mastodon::Listener::__ANON__[/home/sergio/perl5/lib/perl5/Mastodon/Listener.pm:173](CODE(0x55d97fdca288), Mastodon::Listener=HASH(0x55d97ff65e90), \"error\", 1, \"Can't locate IO/Async/SSL.pm in \\@INC (you may need to install\"..., ARRAY(0x55d980399a10)) called at (eval 400)[/home/sergio/perl5/lib/perl5/Class/Method/Modifiers.pm:89] line 1\n    Mastodon::Listener::__ANON__[(eval 400)[/home/sergio/perl5/lib/perl5/Class/Method/Modifiers.pm:89]:1](Mastodon::Listener=HASH(0x55d97ff65e90), \"error\", 1, \"Can't locate IO/Async/SSL.pm in \\@INC (you may need to install\"..., ARRAY(0x55d980399a10)) called at (eval 402)[/home/sergio/perl5/lib/perl5/Class/Method/Modifiers.pm:148] line 2\n    Mastodon::Listener::emit(Mastodon::Listener=HASH(0x55d97ff65e90), \"error\", 1, \"Can't locate IO/Async/SSL.pm in \\@INC (you may need to install\"..., ARRAY(0x55d980399a10)) called at /home/sergio/perl5/lib/perl5/Mastodon/Listener.pm line 86\n    Mastodon::Listener::__ANON__[/home/sergio/perl5/lib/perl5/Mastodon/Listener.pm:86](undef, undef, ARRAY(0x55d980399ae8)) called at /home/sergio/perl5/lib/perl5/Mastodon/Listener.pm line 94\n    Mastodon::Listener::__ANON__[/home/sergio/perl5/lib/perl5/Mastodon/Listener.pm:94](undef) called at /home/sergio/perl5/lib/perl5/Net/Async/HTTP.pm line 905\n    Net::Async::HTTP::__ANON__[/home/sergio/perl5/lib/perl5/Net/Async/HTTP.pm:906](\"Can't locate IO/Async/SSL.pm in \\@INC (you may need to install\"...) called at /home/sergio/perl5/lib/perl5/Future.pm line 1008\n    Future::on_fail(Future=HASH(0x55d98037b678), CODE(0x55d98037af88)) called at /home/sergio/perl5/lib/perl5/Net/Async/HTTP.pm line 906\n    Net::Async::HTTP::do_request(Net::Async::HTTP=HASH(0x55d97ff65ef0), \"uri\", \"https://mastodon.cloud/api/v1/streaming/public\", \"headers\", HASH(0x55d980399a70), \"on_error\", CODE(0x55d980399ab8), \"on_header\", ...) called at /home/sergio/perl5/lib/perl5/Mastodon/Listener.pm line 146\n    Mastodon::Listener::start(Mastodon::Listener=HASH(0x55d97ff65e90)) called at mastodon.pl line 21\n</code></pre>\n\n<p>If I change <code>$_[0]</code> to <code>$_[1]</code> in the error file <code>/home/sergio/perl5/lib/perl5/Role/EventEmitter.pm</code> line 21 and installed the missing library IO::Async::SSL, I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-- Emit error in Mastodon::Listener (0)\nMastodon::Listener: Error decoding JSON payload: Reference bless( do{\\(my $o = 0)}, 'JSON::PP::Boolean' ) did not pass type constraint \"Bool\" (in $args-&gt;{\"locked\"}) at /home/sergio/perl5/lib/perl5/Mastodon/Types.pm line 83\n    Reference bless( do{\\(my $o = 0)}, 'JSON::PP::Boolean' ) did not pass type constraint \"Bool\" (in $args-&gt;{\"locked\"})\n    \"Bool\" is defined as: (Type::Tiny::XS::Bool($_))\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559643621, "post_id": 56441775, "comment_id": 99477136, "body": "What do you mean by <i>&#39;keys %samples_runs&#39; starts with &quot;prefix-1-1&quot;</i>? Please show sample data and expected results."}], "answers": [{"comments": [{"owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "edited": false, "score": 0, "creation_date": 1559660757, "post_id": 56442109, "comment_id": 99486665, "body": "comman above was giving an error. Changed it to: elsif ( my @matches = grep /$dataset/ &amp;&amp; ! /^prefix-1-1/, keys %samples_runs)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1559644309, "creation_date": 1559644309, "answer_id": 56442109, "question_id": 56441775, "link": "https://stackoverflow.com/questions/56441775/perl-grep-matching-variable-from-hash-table/56442109#56442109", "title": "perl grep matching variable from hash table", "body": "<p><code>grep</code> will let you implement any conditions you like. So yes, it can be done. </p>\n\n<pre><code>my @matches = grep ( /$dataset/ and not /^prefix-1-1/, keys %sample_runs );\n</code></pre>\n\n<p>Should do what you want. </p>\n"}], "owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 56442109, "answer_count": 1, "score": 0, "last_activity_date": 1559644309, "creation_date": 1559642992, "question_id": 56441775, "link": "https://stackoverflow.com/questions/56441775/perl-grep-matching-variable-from-hash-table", "title": "perl grep matching variable from hash table", "body": "<p>I have the following code in perl that tries to find a string '$dataset' in the keys of %samples_runs and stores it in an array</p>\n\n<pre><code>} elsif ( my @matches = grep /$dataset/, keys %samples_runs ) { \n    my @values = @samples_runs{@matches};\n\n    foreach my $match (@matches) {\n    # do something\n    }\n</code></pre>\n\n<p>However, if the 'keys %samples_runs' starts with \"prefix-1-1\", I don't want this to be considered as a match.</p>\n\n<p>So when there is a match, this will evaluate to true 'grep /$dataset/, keys %samples_runs'. But when there is a match AND the keys%samples_runs starts with 'prefix-1-1', nothing should be added to the @matches array.</p>\n\n<p>How can I implement this?</p>\n"}, {"tags": ["javascript", "perl", "parsing", "static-code-analysis"], "comments": [{"owner": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "edited": false, "score": 2, "creation_date": 1559640068, "post_id": 56440992, "comment_id": 99475249, "body": "Questions about 3rd party code or off site resources are off Topic on Stack Overflow. Check  <a href=\"https://meta.stackoverflow.com/q/251134/387194\">Where can I ask about \u201cfinding a tool, library, or favorite off-site resource?\u201d</a>"}, {"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1559640751, "post_id": 56440992, "comment_id": 99475632, "body": "Can you give more context / input examples ? Do you only need to parse (maybe slightly relaxed) JSON, or full Javascript code (with loops and functions and all that)?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1559640815, "post_id": 56440992, "comment_id": 99475672, "body": "It&#39;s not clear what you&#39;re trying to achieve. For example, what would <code>decode_js</code> return when given the code <code>let a = console.log(&quot;hi&quot;), b = a, c = { foo: function (i) { return function () { return i++; }; }(0) }; { let b = 42; console.log(Math.sqrt(b)); }</code>?"}, {"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1559640853, "post_id": 56440992, "comment_id": 99475697, "body": "Why did <code>JE::parse</code> not work?"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "edited": false, "score": 0, "creation_date": 1559640880, "post_id": 56440992, "comment_id": 99475719, "body": "@jcubic Imho it&#39;s not off topic. There are a lot of questions about 3rd party libraries on stackoverflow, moreover I added question that if no ready-to-use 3rd party code I&#39;ll be glad for suggesting regexp or parsing approach"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1559640942, "post_id": 56440992, "comment_id": 99475761, "body": "@Thilo, yes, I need to parse only variables so slightly relaxed JSON is enought."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559640995, "post_id": 56440992, "comment_id": 99475785, "body": "@melpomene, please check previous answer, I need to parse only variables for now."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559641064, "post_id": 56440992, "comment_id": 99475819, "body": "Please answer my question. &quot;<i>I need to parse only variables</i>&quot; doesn&#39;t mean anything."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 2, "creation_date": 1559641095, "post_id": 56440992, "comment_id": 99475836, "body": "@Thilo firstly I can&#39;t install JE::parse without skipping tests. And even if I skip tests and install it I got <code>undef</code> as result"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559642092, "post_id": 56440992, "comment_id": 99476383, "body": "@melpomene, I have ~ thousand lines of javascript code and I need only get content of variables which are explicitly given in global scope, like <code>var x = { &#39;foo&#39; : &#39;bar&#39; }</code>. Other code can be skipped."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559642393, "post_id": 56440992, "comment_id": 99476527, "body": "That doesn&#39;t answer my question. What result do you expect from the sample input I gave above?"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559642989, "post_id": 56440992, "comment_id": 99476831, "body": "Would you please add a minimal, runnable example of the JE code that doesn&#39;t behave as you expect?  Also, what OS and Perl version?  I see JE is known to break on ActiveState 32-bit."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559647352, "post_id": 56440992, "comment_id": 99479079, "body": "@melpomene I expect empty string from this code since <code>let</code> declares a block scope local variable, but I need only variables from global scope."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559647410, "post_id": 56440992, "comment_id": 99479106, "body": "@PaulSerikov OK. What results do you expect from the same code, but with <code>let</code> changed to <code>var</code>?"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559647874, "post_id": 56440992, "comment_id": 99479350, "body": "@cxw added into body of question."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559650663, "post_id": 56440992, "comment_id": 99480895, "body": "@melpomene same, nothing. Value of <code>&#39;foo&#39;</code> property is function, in my case object which has at least one &quot;dynamic&quot; property must be skipped fully (however for future cases option to skip just dynamic values will be useful ). <code>var b = 42</code> not in global scope, so it must be skipped too. And finally <code>var a = console.log(&quot;hi&quot;), b = a</code> needs to be skipped too, because it&#39;s also dynamic."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559651522, "post_id": 56440992, "comment_id": 99481376, "body": "OK, so <code>var x; x = 42;</code> should also return nothing, right?"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1559660607, "post_id": 56440992, "comment_id": 99486566, "body": "Yes. I need only those variables which are declared as object immediately after definition"}], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 5, "last_activity_date": 1559650692, "last_edit_date": 1559650692, "creation_date": 1559650319, "answer_id": 56443641, "question_id": 56440992, "link": "https://stackoverflow.com/questions/56440992/parsing-javascript-using-perl-getting-undef-from-je-parse/56443641#56443641", "title": "Parsing JavaScript using Perl: getting &quot;undef&quot; from JE-&gt;parse", "body": "<p>Well, I have good news and bad news, and they are the same news :) .  Your JS has a syntax error, and so JE returns <code>undef</code> per <a href=\"https://metacpan.org/pod/JE#$j-%3Eparse(-$code,-$filename,-$first_line_no-)\" rel=\"noreferrer\">the JE docs</a>.  Specifically, there is a <code>,</code> missing on the <code>def</code> line.  The following test works for me:</p>\n\n<p>Code:</p>\n\n<pre><code>use Data::Dumper;\n\n# Note: use q[ ] instead of qq/ /.  q instead of qq so Perl doesn't interpolate\n# into the contents, and [ ] instead of / / so that JS comments can appear\n# in the block.\nmy $str = q[\nvar data = {\n    'abc': 1,\n    'def' : 2,   // &lt;==== There was a comma missing here!\n    'xyz' : { 'foo' : 'bar' }\n}\n];\n\nuse JE;\nmy $j = new JE;\nmy $parsed = $j-&gt;parse($str);\nwarn Dumper $parsed;\n</code></pre>\n\n<p>Output: too big to show here :) .  But it does include what you want!</p>\n\n<h3>Extracting the output</h3>\n\n<p>This is going to be a bit of a challenge.  Hopefully the following will get you started.  </p>\n\n<p>Code:</p>\n\n<pre><code>use Data::Dumper::Compact 'ddc';   # &lt;== for briefer output\nuse JE;\n\n# Note: use q[ ] instead of qq/ /.  q instead of qq so Perl doesn't interpolate\n# into the contents, and [ ] instead of / / so that JS comments can appear\n# in the block.\nmy $str = q[\nvar data = {\n    'abc': 1,\n    'def' : 2,   // &lt;==== There was a comma missing here!\n    'xyz' : { 'foo' : 'bar' }\n}\n];\n\nmy $j = new JE;\nmy $parsed = $j-&gt;parse($str);\nprint ddc $parsed-&gt;{tree};     # &lt;== {tree} holds the parsed source\n</code></pre>\n\n<p>Output (annotated):</p>\n\n<pre><code>bless( [\n  [\n    0,\n    118,\n  ],\n  \"statements\",\n  bless( [\n    [\n      1,\n      118,\n    ],\n    \"var\",\n    [\n      \"data\",\n      bless( [\n        [\n          12,\n          117,\n        ],\n        \"hash\",    &lt;== here's where your hash starts\n        \"abc\",     &lt;== 'abc': 1\n        1,\n        \"def\",     &lt;== 'def': 2\n        2,\n        \"xyz\",     &lt;== 'xyz': nested hash\n        bless( [\n          [\n            98,\n            115,\n          ],\n          \"hash\",\n          \"foo\",\n          \"sbar\",\n        ], 'JE::Code::Expression' ),\n      ], 'JE::Code::Expression' ),\n    ],\n  ], 'JE::Code::Statement' ),\n], 'JE::Code::Statement' )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "is_accepted": true, "score": 0, "last_activity_date": 1559766875, "creation_date": 1559766875, "answer_id": 56467623, "question_id": 56440992, "link": "https://stackoverflow.com/questions/56440992/parsing-javascript-using-perl-getting-undef-from-je-parse/56467623#56467623", "title": "Parsing JavaScript using Perl: getting &quot;undef&quot; from JE-&gt;parse", "body": "<p>I found out simplest solution :)</p>\n\n<p>The key idea is to execute javascript code in new context using <a href=\"https://metacpan.org/pod/JavaScript::V8\" rel=\"nofollow noreferrer\">JavaScript::V8</a> or <a href=\"https://metacpan.org/pod/JavaScript::Any\" rel=\"nofollow noreferrer\">JavaScript::Any</a> and mock <code>console.log</code> function.</p>\n\n<pre><code>my $str = qq/\nvar data = {\n    'abc': 1,\n    'def' : 2,\n    'xyz' : { 'foo' : 'bar' }\n};\n/;\n\nuse Data::Dumper;\nuse JavaScript::V8;\n\nsub extract_js_glob_var {\n    my ( $code, $var_name ) = @_;\n    my $res;\n    my $context = JavaScript::V8::Context-&gt;new();\n    $context-&gt;eval($str);\n    $context-&gt;bind( console_log =&gt; sub { $res = @_[0] } );\n    $context-&gt;eval('console_log('.$var_name.')');\n    undef $context;\n    return $res;\n}\n\nwarn Dumper extract_js_glob_var($str, 'data');  # 'data.xyz' is also supported ;)\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1661, "favorite_count": 1, "accepted_answer_id": 56467623, "answer_count": 2, "score": 0, "last_activity_date": 1559766875, "creation_date": 1559639988, "last_edit_date": 1559650362, "question_id": 56440992, "link": "https://stackoverflow.com/questions/56440992/parsing-javascript-using-perl-getting-undef-from-je-parse", "title": "Parsing JavaScript using Perl: getting &quot;undef&quot; from JE-&gt;parse", "body": "<p>I have Javascript code and I need to parse javascript variables into perl hash. Is there any ready-to-use module? I tried <a href=\"https://metacpan.org/pod/JE#$j-%3Eparse(-$code,-$filename,-$first_line_no-)\" rel=\"nofollow noreferrer\">JE::parse()</a> and <a href=\"https://metacpan.org/pod/JavaScript::HashRef::Decode\" rel=\"nofollow noreferrer\">JavaScript::HashRef::Decode</a> but neither worked.</p>\n\n<p>Expected behaviour:</p>\n\n<pre><code>use Data::Dumper;\nuse SomeModule::ParseJSVariables qw/decode_js/;\n\nmy $str = qq/\nvar data = {\n    'abc': 1,\n    'def' : 2\n    'xyz' : { 'foo' : 'bar' }\n}\n/;\n\nmy $res = decode_js($str);\nwarn Dumper $res; #\n\n# expected result: \n# { \n#   name =&gt; 'data', \n#   value =&gt; {\n#     'abc' =&gt; 1,\n#     'def' =&gt; 2\n#     'xyz' =&gt; { 'foo' =&gt; 'bar' }\n#     }\n# }\n\n\nuse JE;\nmy $j = new JE;\nmy $parsed = $j-&gt;parse($str);\nwarn Dumper $parsed; # undef :(\n</code></pre>\n\n<p>If there are no ready-to-use modules, I will be glad if someone suggest right regexp or parsing approach.</p>\n\n<p>UPD, clarification. I have ~ thousand lines of javascript code and I need only get content of variables which are explicitly given in global scope, like var x = { 'foo' : 'bar' }. Other code can be skipped from parsing.</p>\n\n<p>My environment :</p>\n\n<pre><code>$ perl --version\n\nThis is perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux-gnu-thread-multi\n\n$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04.5 LTS\nRelease:    16.04\nCodename:   xenial\n\n$ uname -r\n4.19.24-041924-generic\n</code></pre>\n"}, {"tags": ["windows", "perl", "windows-console"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559630139, "post_id": 56438396, "comment_id": 99470636, "body": "Don&#39;t run the script (or <code>perl</code>), run the program that you use as a console/terminal. It should accept a program to run an option or argument. What OS? What windowing environment? What console/terminal program?"}, {"owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559630665, "post_id": 56438396, "comment_id": 99470841, "body": "windows 7, command exe console, C:\\Strawberry\\perl\\bin ENV variable"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 5, "last_activity_date": 1559631054, "creation_date": 1559631054, "answer_id": 56438731, "question_id": 56438396, "link": "https://stackoverflow.com/questions/56438396/i-want-run-another-perl-script-from-one-perl-script-but-i-need-to-execute-it-s/56438731#56438731", "title": "I want run another perl script from one perl script , but i need to execute it separately", "body": "<p>Try</p>\n\n<pre><code>system(\"start perl exe_klarity.pl\");\n</code></pre>\n\n<p><code>start</code> executes a command in a new console window.</p>\n"}], "owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559631054, "creation_date": 1559629451, "last_edit_date": 1559630748, "question_id": 56438396, "link": "https://stackoverflow.com/questions/56438396/i-want-run-another-perl-script-from-one-perl-script-but-i-need-to-execute-it-s", "title": "I want run another perl script from one perl script , but i need to execute it separately", "body": "<p>I need perl script to trigger another script which should run in seperate command prompt.</p>\n\n<pre><code>#!/usr/bin/perl\nsystem(\"perl exe_klarity.pl\");\n\n#!/usr/bin/perl\nsystem(\"perl exe_klarity.pl\");\n</code></pre>\n\n<p>When run this code its running only in the same command prompt, not getting in seperate window, please help</p>\n"}, {"tags": ["xcode", "macos", "perl", "cpan", "cc"], "comments": [{"owner": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1559626054, "post_id": 56437474, "comment_id": 99469312, "body": "What does the documentation of the module you are installing say which operating systems it is compatible with? Which compilers? Are you using one of those operating systems? Are you using one of those compilers?"}, {"owner": {"reputation": 2291, "user_id": 1500214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb16a7a9af0cfbe5ad85848024b4cfa?s=128&d=identicon&r=PG", "display_name": "Vynce", "link": "https://stackoverflow.com/users/1500214/vynce"}, "reply_to_user": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1559626504, "post_id": 56437474, "comment_id": 99469449, "body": "J&#246;rg W Mittag - as is common with perl modules, it makes no mention of compatibility with particular operating systems or compilers; in general, I think it is assumed that Perl Modules Just Work. (In Module::Build&#39;s particular case, it can be confusing because it is used for installing other modules, and so it talks about installation in that sense. Presumably once it is installed, it would be used to install the other modules I actually care about using, such as Math::Random.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1559628238, "post_id": 56437474, "comment_id": 99469951, "body": "@J&#246;rg W Mittag, The error is coming from stdlib.h. This problem has nothing to do with Perl or any Perl module"}, {"owner": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559634014, "post_id": 56437474, "comment_id": 99472334, "body": "@ikegami: the OP is installing a Perl module. I am not intimately familiar with how the Perl module system works, but I am pretty sure that either the Perl module system or the Perl module itself controls the installation process, including which compiler to use. If the Perl module (system) decides to use a compiler that is not compatible with the rest of the system, then you will get an error like this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1559635166, "post_id": 56437474, "comment_id": 99472851, "body": "@J&#246;rg W Mittag, The command line executed is output to the screen. It&#39;s built from the variables output by <code>perl -V:&#39;cc.*&#39;</code>. The compiler used should be the same one that was used to build Perl itself (but you know how distros like to mangle things...)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559635602, "post_id": 56437474, "comment_id": 99473042, "body": "@Vynce, I don&#39;t know why you mention Module::Build. Math::Random doesn&#39;t use Module::Build, and Math::Random has no dependencies. (Also, Module::Build doesn&#39;t have a C component, though one of its dependencies might.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559635954, "post_id": 56437474, "comment_id": 99473193, "body": "Re &quot;<i>Presumably once it is installed, it would be used to install the other modules I actually care about using</i>&quot;, Each modules provides an installation script, and these scripts largely use ExtUtils::MakeMaker (bundled with Perl) or Module::Build (not bundled with Perl) to install the module."}, {"owner": {"reputation": 2291, "user_id": 1500214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb16a7a9af0cfbe5ad85848024b4cfa?s=128&d=identicon&r=PG", "display_name": "Vynce", "link": "https://stackoverflow.com/users/1500214/vynce"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559666699, "post_id": 56437474, "comment_id": 99489709, "body": "@ikegami : <i>shrug</i> I can&#39;t speak to that. I can only say that during debugging, i came across logs that said I couldn&#39;t install <code>Module::Build</code>, among many other things, and that the text posted above is from attempting to install Module::Build. Other things in the logs that made it look like that was a root dependency past which I could not proceed. Once it worked, so did everything else."}], "answers": [{"tags": [], "owner": {"reputation": 2291, "user_id": 1500214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb16a7a9af0cfbe5ad85848024b4cfa?s=128&d=identicon&r=PG", "display_name": "Vynce", "link": "https://stackoverflow.com/users/1500214/vynce"}, "is_accepted": true, "score": 1, "last_activity_date": 1559666509, "creation_date": 1559666509, "answer_id": 56448103, "question_id": 56437474, "link": "https://stackoverflow.com/questions/56437474/how-to-install-perl-modules-on-macos-when-cc-cant-handle-stdlib-h/56448103#56448103", "title": "How to install perl modules on macos when cc can&#39;t handle stdlib.h", "body": "<p>Although Apple's App Store did not list XCode in the list of updates I needed, I tried installing the most recent version -- well, the most recent version it would allow for my OS -- and when I had finished, I had a new version of <code>cc</code> that worked. </p>\n"}], "owner": {"reputation": 2291, "user_id": 1500214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb16a7a9af0cfbe5ad85848024b4cfa?s=128&d=identicon&r=PG", "display_name": "Vynce", "link": "https://stackoverflow.com/users/1500214/vynce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 56448103, "answer_count": 1, "score": 0, "last_activity_date": 1559666509, "creation_date": 1559623486, "question_id": 56437474, "link": "https://stackoverflow.com/questions/56437474/how-to-install-perl-modules-on-macos-when-cc-cant-handle-stdlib-h", "title": "How to install perl modules on macos when cc can&#39;t handle stdlib.h", "body": "<p>So in trying to install various Perl modules, including e.g. Module::Build, I get errors that stem from stdlib.h, like: </p>\n\n<pre><code>In file included from lib/Simple.xs:2:\nIn file included from /usr/local/Cellar/perl/5.28.2/lib/perl5/5.28.2/darwin-thread-multi-2level/CORE/perl.h:819:\n/usr/include/stdlib.h:147:38: error: expected ')'\n           size_t __width, int (* _Nonnull __compar)(const void *, const void *));\n                                           ^\n/usr/include/stdlib.h:147:26: note: to match this '('\n            size_t __width, int (* _Nonnull __compar)(const void *, const void *));\n                                ^\n</code></pre>\n\n<p>(There are many more errors, but that appears to be the first and seems like a representative and hopefully illustrative sample.) </p>\n\n<p>I believe these errors are because my installation of cc and the included library don't match, but I'm not a c programmer and have no idea how to debug this. Also, the point here is to install perl modules, not learn C, so I am hopeful that some solution exists that does not involve debugging C.</p>\n\n<pre><code>Perl: 5.28.2\nmacOS: 10.13.6\ncc -v: Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)\n  Target: x86_64-apple-darwin17.7.0\n  Thread model: posix\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 2, "creation_date": 1559587479, "post_id": 56432775, "comment_id": 99460278, "body": "Did you try anything? If so, edit the question and add what you have tried and the errors you got."}, {"owner": {"reputation": 15, "user_id": 7629433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rOT9ss3oqpA/AAAAAAAAAAI/AAAAAAAAACY/qtctdm6QiZM/photo.jpg?sz=128", "display_name": "Mounnad Mohamed", "link": "https://stackoverflow.com/users/7629433/mounnad-mohamed"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1559588500, "post_id": 56432775, "comment_id": 99460638, "body": "@Valentino I know that is not useful to get algorithms from stackoverflow and i don&#39;t ask for that i know how to solve the problem with loops but i just want to know if there an effective solution with regex"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1559589603, "post_id": 56432775, "comment_id": 99461008, "body": "Have you taken a look at the transliteration operator (<code>tr&#47;&#47;&#47;</code> or <code>y&#47;&#47;&#47;</code>)? There is an overview about half-way down the <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">Quote-Like Operators section of the perldocs</a>."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559591389, "post_id": 56432775, "comment_id": 99461685, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers.  You can <a href=\"https://stackoverflow.com/posts/56432775/edit\">edit your question</a> to include more information."}], "answers": [{"tags": [], "owner": {"reputation": 374, "user_id": 4437426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VADa5.jpg?s=128&g=1", "display_name": "Michael T&#233;treault", "link": "https://stackoverflow.com/users/4437426/michael-t%c3%a9treault"}, "is_accepted": false, "score": 0, "last_activity_date": 1559590953, "last_edit_date": 1559590953, "creation_date": 1559587740, "answer_id": 56432979, "question_id": 56432775, "link": "https://stackoverflow.com/questions/56432775/calculate-number-of-consecutive-substring-in-a-string-using-perl/56432979#56432979", "title": "Calculate Number of Consecutive Substring in a String using Perl", "body": "<p>Try this:</p>\n\n<pre><code>my $number = () = $str =~ /$substring/gi;\nprint $number;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7629433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rOT9ss3oqpA/AAAAAAAAAAI/AAAAAAAAACY/qtctdm6QiZM/photo.jpg?sz=128", "display_name": "Mounnad Mohamed", "link": "https://stackoverflow.com/users/7629433/mounnad-mohamed"}, "edited": false, "score": 0, "creation_date": 1559590871, "post_id": 56433470, "comment_id": 99461476, "body": "Thanks may be you didn&#39;t understand what i want is the string &quot;CAGCAGCAGCAGPGHSMCAGCAG&quot; return 4 because the max repeated sequence of CAG is 4"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1559590506, "last_edit_date": 1559590506, "creation_date": 1559590183, "answer_id": 56433470, "question_id": 56432775, "link": "https://stackoverflow.com/questions/56432775/calculate-number-of-consecutive-substring-in-a-string-using-perl/56433470#56433470", "title": "Calculate Number of Consecutive Substring in a String using Perl", "body": "<p>The matching operator with the <code>/g</code> modifier in list context returns all the matches. To count them, we can impose scalar context to the result:</p>\n\n<pre><code>my @matches = $str =~ /$substring/g;\nmy $count = scalar @matches;\n</code></pre>\n\n<p>which returns 6.</p>\n\n<p>It can be further shortened to</p>\n\n<pre><code>my $count = () = $str =~ /$substring/g;\n</code></pre>\n\n<p>Where the <code>() =</code> assignment forces list context, but assigning it to a scalar variable forces the scalar context.</p>\n\n<p>Note that this doesn't report the correct number if the matches are overlapping, e.g.</p>\n\n<pre><code>my $str = 'CACACAC';\nmy $substring = 'CAC';\n</code></pre>\n\n<p>The above expression would return 2, because matching with <code>/g</code> starts searching for the next match where the last match ended. To fix that, use the look-ahead assertion which doesn't consume the matching part:</p>\n\n<pre><code>my $count = () = $str =~ /(?=$substring)/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559591552, "post_id": 56433676, "comment_id": 99461742, "body": "Clever, and appears to be what the OP is asking about.  Would you be willing to expand your explanation a bit?  For example, why the <code>.*?</code>?  In my test, it seems to work without that.  <b>Edit</b> Also, if I add a bunch of CAGs on the end, it seems to only take the first one.  I think the <code>my ($longest_substring)</code> actually needs to capture all the matches and pick the longest."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559593546, "post_id": 56433676, "comment_id": 99462467, "body": "@cxw the <code>.*?</code> is necessary (or at least the <code>.*</code> part of it, the <code>?</code> just maybe makes it faster) for e.g. &quot;CAGHCAGCAG&quot;; without it it would match the first &quot;CAG&quot;"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1559608265, "post_id": 56433676, "comment_id": 99466124, "body": "Yep, it was the <code>.*?</code>.  Thanks!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1559591296, "creation_date": 1559591296, "answer_id": 56433676, "question_id": 56432775, "link": "https://stackoverflow.com/questions/56432775/calculate-number-of-consecutive-substring-in-a-string-using-perl/56433676#56433676", "title": "Calculate Number of Consecutive Substring in a String using Perl", "body": "<pre><code>my $substring = 'CAG';\nmy $str = 'CAGCAGCAGCAGPGHSMCAGCAG';\n# look for a series of consecutive $substring not followed later by a longer such series\nmy ($longest_substring) = $str =~ /((?:\\Q$substring\\E)+)(?!.*?\\1\\Q$substring\\E)/s;\nmy $repetitions = length($longest_substring // '') / length($substring);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7629433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rOT9ss3oqpA/AAAAAAAAAAI/AAAAAAAAACY/qtctdm6QiZM/photo.jpg?sz=128", "display_name": "Mounnad Mohamed", "link": "https://stackoverflow.com/users/7629433/mounnad-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 56433676, "answer_count": 3, "score": 0, "last_activity_date": 1559591296, "creation_date": 1559586817, "question_id": 56432775, "link": "https://stackoverflow.com/questions/56432775/calculate-number-of-consecutive-substring-in-a-string-using-perl", "title": "Calculate Number of Consecutive Substring in a String using Perl", "body": "<p>I have a string with multiple sequences of consecutive String like:</p>\n\n<p>my $substring = \"CAG\";\nmy $str = \"CAGCAGCAGCAGPGHSMCAGCAG\";</p>\n\n<p>I want to calculate the max repeated substring in the str.</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "word-list"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1559582659, "post_id": 56431901, "comment_id": 99458422, "body": "<code>[0-9].*[0-9].*[0-9].*[0-9].*[0-9]</code> matches a line with at least 5 digits."}, {"owner": {"reputation": 525, "user_id": 1444848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a74b56a80f816f71baaa0bdd577744d?s=128&d=identicon&r=PG", "display_name": "bobylapointe", "link": "https://stackoverflow.com/users/1444848/bobylapointe"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1559582746, "post_id": 56431901, "comment_id": 99458460, "body": "Thanks Barmar, it&#39;s working"}], "answers": [{"tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 5, "last_activity_date": 1559624261, "last_edit_date": 1559624261, "creation_date": 1559582834, "answer_id": 56431990, "question_id": 56431901, "link": "https://stackoverflow.com/questions/56431901/remove-lines-with-more-than-x-digits/56431990#56431990", "title": "Remove lines with more than x digits", "body": "<p>One of these may do.</p>\n\n<pre><code>awk -F '[0-9]' 'NF&lt;=5' file\ntest12test1\ntest12\n\nawk -F '[0-9]' 'NF&lt;6' file\ntest12test1\ntest12\n</code></pre>\n\n<p>Set the field separator to any possible decimal digit and then perform a test on the total number of fields.<br>\nSince you get a field before and after the field-separator, you need to test if the line more than 5 fields to determine if the line has more than 4 decimals. </p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 4, "last_activity_date": 1559584773, "last_edit_date": 1559584773, "creation_date": 1559584247, "answer_id": 56432273, "question_id": 56431901, "link": "https://stackoverflow.com/questions/56431901/remove-lines-with-more-than-x-digits/56432273#56432273", "title": "Remove lines with more than x digits", "body": "<p>The perl <code>tr///</code> operator returns the <em>number</em> of substitutions, so </p>\n\n<pre><code>perl -ne 'print if tr/0-9/0-9/ &lt;= 4' file\n</code></pre>\n\n<p>Or if you want to use a shell variable</p>\n\n<pre><code>max_digits=4\nperl -sne 'print unless tr/0-9/0-9/ &gt; $max' -- -max=$max_digits file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1559597442, "creation_date": 1559597442, "answer_id": 56434772, "question_id": 56431901, "link": "https://stackoverflow.com/questions/56431901/remove-lines-with-more-than-x-digits/56434772#56434772", "title": "Remove lines with more than x digits", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed 's/[0-9]/&amp;/4;T;d' file\n</code></pre>\n\n<p>If one can replace the 4th digit, then delete the line.</p>\n"}], "owner": {"reputation": 525, "user_id": 1444848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a74b56a80f816f71baaa0bdd577744d?s=128&d=identicon&r=PG", "display_name": "bobylapointe", "link": "https://stackoverflow.com/users/1444848/bobylapointe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1559826104, "answer_count": 3, "score": -2, "last_activity_date": 1559624261, "creation_date": 1559582461, "last_edit_date": 1559584304, "question_id": 56431901, "link": "https://stackoverflow.com/questions/56431901/remove-lines-with-more-than-x-digits", "closed_reason": "Needs more focus", "title": "Remove lines with more than x digits", "body": "<p>I'd like to find a way to delete lines containing more than 4 digits using awk or sed:</p>\n\n<p>input:</p>\n\n<pre><code>test12test1\ntest154test43test\ntest12\n</code></pre>\n\n<p>desired output:</p>\n\n<pre><code>test12test1\ntest12\n</code></pre>\n\n<p>How do I solve this problem? </p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559653223, "post_id": 56430773, "comment_id": 99482373, "body": "It is recommended to use a connection manager like <a href=\"https://metacpan.org/pod/DBIx::Connector\" rel=\"nofollow noreferrer\">DBIx::Connector</a> or something from the <a href=\"https://metacpan.org/pod/Mojo::Pg\" rel=\"nofollow noreferrer\">Mojo::Pg</a> family as it will reconnect when needed and when forked - you can share the connector object without worry, and retrieve handles when needed. When using these you can use the same DBI callbacks or the <a href=\"https://metacpan.org/pod/Mojo::Pg#connection\" rel=\"nofollow noreferrer\">connection event</a> to set up each new connection."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559743255, "post_id": 56430773, "comment_id": 99515687, "body": "@Grinnz , what about using DBIx::SQLEngine instead of DBIx::Connector. It seems, the reconnection implemented in DBIx::SQLEngine too, but it is simpler to use than Connector"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559744923, "post_id": 56430773, "comment_id": 99516631, "body": "It looks a lot more complicated to me, and quite a bit older. If you want an ORM that can also serve as the connection manager, the ideal choice is <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a>."}], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 1, "creation_date": 1559590783, "post_id": 56431217, "comment_id": 99461445, "body": "Thank you! It is wonderful: no need to use some additional package in the stack, it&#39;s enough to hook DBI &quot;connected&quot; callback!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1559579202, "creation_date": 1559579202, "answer_id": 56431217, "question_id": 56430773, "link": "https://stackoverflow.com/questions/56430773/dbixsomething-that-can-restore-session-variables-on-reconnection/56431217#56431217", "title": "DBIx::something that can restore session variables on reconnection?", "body": "<p>DBI supports <a href=\"https://metacpan.org/pod/DBI#Callbacks\" rel=\"nofollow noreferrer\">something called <em>Callbacks</em></a>. I can't link to this bit of the doc as the section is quite long, so here it is verbatim.</p>\n\n<blockquote>\n  <p>A more common application for callbacks is setting connection state\n  only when a new connection is made (by connect() or connect_cached()).\n  Adding a callback to the connected method (when using connect) or via\n  connect_cached.connected (when useing connect_cached()>) makes this\n  easy. The connected() method is a no-op by default (unless you\n  subclass the DBI and change it). The DBI calls it to indicate that a\n  new connection has been made and the connection attributes have all\n  been set. You can give it a bit of added functionality by applying a\n  callback to it. For example, to make sure that MySQL understands your\n  application's ANSI-compliant SQL, set it up like so:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect($dsn, $username, $auth, {\n    Callbacks =&gt; {\n        connected =&gt; sub {\n            shift-&gt;do(q{\n                SET SESSION sql_mode='ansi,strict_trans_tables,no_auto_value_on_zero';\n            });\n            return;\n        },\n    }\n});\n</code></pre>\n</blockquote>\n\n<p>This is your exact use-case I believe. Do this instead of running your own code after you've connected.</p>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56431217, "answer_count": 1, "score": 3, "last_activity_date": 1559579226, "creation_date": 1559577353, "last_edit_date": 1559579226, "question_id": 56430773, "link": "https://stackoverflow.com/questions/56430773/dbixsomething-that-can-restore-session-variables-on-reconnection", "title": "DBIx::something that can restore session variables on reconnection?", "body": "<p>Ordinary DBI::db handler will lost all database session settings that was made using $dbh->do('SET variable_name=value').</p>\n\n<p>Is there any DBIx::* class/package or so that provides method like \"set_session\" to set session variables and can restore this variables after detection of connection lost (connection timeout in 90% of real cases) ?</p>\n\n<p>It may looks like this:</p>\n\n<pre><code># inside the user code:\n$dbh-&gt;set(variable =&gt; 'string', yet_another_variable =&gt; 42)\n\n# inside the DBIx::* package:\nsub reconnect {\n# ...\n  while (my ($var, $val) = each %{$self-&gt;saved_vars}) {\n    $self-&gt;dbh-&gt;do(\"SET $var=?\", {}, $val)\n  }\n# ...\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "split"], "comments": [{"owner": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1559565931, "post_id": 56427648, "comment_id": 99449790, "body": "<code>.</code> is a regex meta-character, you need to escape it use its literal meaning"}, {"owner": {"reputation": 1065, "user_id": 3745317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Ue5pr.jpg?s=128&g=1", "display_name": "PraveenKS", "link": "https://stackoverflow.com/users/3745317/praveenks"}, "reply_to_user": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 0, "creation_date": 1559566354, "post_id": 56427648, "comment_id": 99450008, "body": "Aaron, thank you for your suggestion! I have used the below and I am still unable to get it.  my ($v1, $v2, $v3) = split(&quot;\\.&quot;,$COLUMN_FIELDS1[0]); \tprint $v1,&quot;\\n&quot;;"}], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 3745317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Ue5pr.jpg?s=128&g=1", "display_name": "PraveenKS", "link": "https://stackoverflow.com/users/3745317/praveenks"}, "edited": false, "score": 0, "creation_date": 1559568686, "post_id": 56427866, "comment_id": 99451316, "body": "Dave, I&#39;ve corrected the variable from upper case to lower case both in above code and in my program, thank you for your above solution and for suggestion. it works for me.."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1559566590, "last_edit_date": 1592644375, "creation_date": 1559566590, "answer_id": 56427866, "question_id": 56427648, "link": "https://stackoverflow.com/questions/56427648/split-array-element-delimited-with/56427866#56427866", "title": "Split array element delimited with &#39;.&#39;", "body": "<p>If you look at the documentation for <a href=\"https://perldoc.pl/functions/split\" rel=\"nofollow noreferrer\"><code>split()</code></a>, you'll see it gives the following ways to call the function:</p>\n<blockquote>\n<p>split /PATTERN/,EXPR,LIMIT</p>\n<p>split /PATTERN/,EXPR</p>\n<p>split /PATTERN/</p>\n<p>split</p>\n</blockquote>\n<p>In three of those examples, the first argument to the function is <code>/PATTERN/</code>. That is, <code>split()</code> expects to be given a regular expression which defines how the input string is split apart.</p>\n<p>It's very important to realise that this argument is a regex, not a string. Unfortunately, Perl's parser doesn't insist on that. It allows you to use a first argument which looks like a string (as you have done). But no matter how it looks, it's not a string. It's a regex.</p>\n<p>So you have confused yourself by using code like this:</p>\n<pre><code>split(&quot;.&quot;,$COLUMN_FIELDS1[0])\n</code></pre>\n<p>If you had made the first argument look like a regex, then you would be more likely to realise that the first argument is a regex and that, therefore, a dot needs to be escaped to prevent it being interpreted as a metacharacter.</p>\n<pre><code>split(/\\./, $COLUMN_FIELDS1[0])\n</code></pre>\n<p><strong>Update:</strong> It's generally accepted among Perl programmers, that variable with upper case names are constants and don't change their values. By using upper case names for standard variables, you are likely to confuse the next person who edits your code (who could well be you in six months time).</p>\n"}, {"comments": [{"owner": {"reputation": 1065, "user_id": 3745317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Ue5pr.jpg?s=128&g=1", "display_name": "PraveenKS", "link": "https://stackoverflow.com/users/3745317/praveenks"}, "edited": false, "score": 0, "creation_date": 1559568738, "post_id": 56427951, "comment_id": 99451340, "body": "melpomene, I have tried your suggestion and it works for me..thank you."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1559566866, "creation_date": 1559566866, "answer_id": 56427951, "question_id": 56427648, "link": "https://stackoverflow.com/questions/56427648/split-array-element-delimited-with/56427951#56427951", "title": "Split array element delimited with &#39;.&#39;", "body": "<p><code>split</code> takes a regex as its first argument. You can pass it a string (as in your code), but the contents of the string will simply be interpreted as a regex at runtime.</p>\n\n<p>That's not a problem for <code>,</code> (which has no special meaning in a regex), but it breaks with <code>.</code> (which matches any (non-newline) character in a regex).</p>\n\n<p>Your attempt to fix the problem with <code>split \"\\.\"</code> fails because <code>\"\\.\"</code> is identical to <code>\".\"</code>: The backslash has its normal string escape meaning, but since <code>.</code> isn't special in strings, escaping it has no effect. You can see this by just printing the resulting string:</p>\n\n<pre><code>print \"\\.\\n\";  # outputs '.', same as print \".\\n\";\n</code></pre>\n\n<p>That <code>.</code> is then interpreted as a regex, causing the problems you have observed.</p>\n\n<p>The normal fix is to just pass a regex to <code>split</code>:</p>\n\n<pre><code>split /\\./, $string\n</code></pre>\n\n<p>Now the backslash is interpreted as part of the regex, forcing <code>.</code> to match itself literally.</p>\n\n<p>If you really wanted to pass a string to split (I'm not sure why you'd want to do that), you could also do it like this:</p>\n\n<pre><code>split \"\\\\.\", $string\n</code></pre>\n\n<p>The first backslash escapes the second backslash, giving a two character string (<code>\\.</code>), which when interpreted as a regex means the same thing as <code>/\\./</code>.</p>\n"}], "owner": {"reputation": 1065, "user_id": 3745317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Ue5pr.jpg?s=128&g=1", "display_name": "PraveenKS", "link": "https://stackoverflow.com/users/3745317/praveenks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 56427866, "answer_count": 2, "score": 0, "last_activity_date": 1559568563, "creation_date": 1559565833, "last_edit_date": 1559568563, "question_id": 56427648, "link": "https://stackoverflow.com/questions/56427648/split-array-element-delimited-with", "title": "Split array element delimited with &#39;.&#39;", "body": "<p>I am trying to read below CSV file content line by line in Perl.</p>\n\n<p><em>CSV File Content:</em></p>\n\n<pre><code>A7777777.A777777777.XXX3604,XXX,3604,YES,9\nB9694396.B216905785.YYY0018,YYY,0018,YES,13\nC9694396.C216905785.ZZZ0028,ZZZ,0028,YES,16\n</code></pre>\n\n<p>I am able to split line content using below code and able to verify the content too:</p>\n\n<pre><code>@column_fields1 = split(',', $_);   \nprint $column_fields1[0],\"\\n\";\n</code></pre>\n\n<p>I am also trying to find the second part on the first column of CSV file (i.e., <strong><em>A777777777</em></strong> or <strong><em>B216905785</em></strong> or <strong><em>C216905785</em></strong>) \u2013 the first column delimited with <code>.</code> using the below code and I am unable to get it.</p>\n\n<p>Instead, just a new line printed.</p>\n\n<pre><code>my ($v1, $v2, $v3) = split(\".\", $column_fields1[0]);\nprint $v2,\"\\n\";\n</code></pre>\n\n<p>Can someone suggest me how to split the array element and get the above value?</p>\n\n<p>On my functionality, I need the first column value altogether at someplace and just only the second part at someplace.</p>\n\n<p><em>Below is my code:</em></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $dailybillable_tab_section1_file = \"./sql/demanding_01_T.csv\";\nopen(FILE, $dailybillable_tab_section1_file) or die \"Could not read from $dailybillable_tab_section1_file, program halting.\";\n\nmy @column_fields1;\nmy @column_fields2;\n\nwhile (&lt;FILE&gt;) \n{\n    chomp;\n    @column_fields1 = split(',', $_);\n\n    print $column_fields1[0],\"\\n\";\n\n    my ($v1, $v2, $v3) = split(\".\",$column_fields1[0]);\n    print $v2,\"\\n\";\n\n    if($v2 ne 'A777777777')\n        {\n        \u2026\n        \u2026\n        \u2026\n    }\n    else\n    {\n        \u2026\n        \u2026\n        \u2026\n\n    }\n\n}\nclose FILE;\n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559550710, "post_id": 56423606, "comment_id": 99442118, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559631888, "post_id": 56423606, "comment_id": 99471361, "body": "@georgetovrea I&#39;ve tried the code in your edit and I don&#39;t get the first comma in my csv."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559632243, "post_id": 56423606, "comment_id": 99471520, "body": "Anyway if you are skipping the first line <code>s&#47;\\b \\b&#47;,&#47;g;</code> is unneeded. May your input has spaces before columns?"}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559634241, "post_id": 56423606, "comment_id": 99472457, "body": "@sergiotarxz I have commend the line  &quot; s/\\b \\b/,/g;&quot; , but still get the same results. every line beginning is &#39;,&#39;"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559635169, "post_id": 56423606, "comment_id": 99472852, "body": "Add s/^\\s+//; before split/join. (The result you get is exactly the one I get when I put spaces before every line of input)"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1559574140, "last_edit_date": 1559574140, "creation_date": 1559551424, "answer_id": 56423848, "question_id": 56423606, "link": "https://stackoverflow.com/questions/56423606/how-to-write-each-row-of-a-text-file-into-csv/56423848#56423848", "title": "How to write each row of a text file into CSV", "body": "<p>There are several steps to this problem. Rather than just handing the answer to you, I'm going to talk you through the steps and point you at the documentation for some functions that will help you at each stage.</p>\n\n<ol>\n<li>You'll need to open two filehandles - one to read your data from and one to write your (transformed) data to. The <a href=\"https://perldoc.pl/functions/open\" rel=\"nofollow noreferrer\"><code>open()</code></a> function is used to open a file and attach that file to a <em>filehandle</em> which you can use to read data from the file.</li>\n<li>You'll then want to read data from your input filehandle. You can use the <a href=\"https://perldoc.pl/perlop#I/O-Operators\" rel=\"nofollow noreferrer\">file input operator</a> (<code>&lt; ... &gt;</code>) for that.</li>\n<li>You'll then want to split your input line apart into the individual fields. Perl has a cunningly-named <a href=\"https://perldoc.pl/functions/split\" rel=\"nofollow noreferrer\"><code>split()</code></a> function for doing that.</li>\n<li>You'll then want to construct a CSV record from your split-up input data. You might consider using the <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> module for that, but in this (simple) case, you could just use <a href=\"https://perldoc.pl/functions/join\" rel=\"nofollow noreferrer\"><code>join()</code></a>.</li>\n<li>You'll want to write your CSV record to your output file. You do that using <a href=\"https://perldoc.pl/functions/print\" rel=\"nofollow noreferrer\"><code>print()</code></a>.</li>\n<li>Finally, you'll want to close your two filehandles - which you do with <a href=\"https://perldoc.pl/functions/close\" rel=\"nofollow noreferrer\"><code>close()</code></a>.</li>\n</ol>\n\n<p>I've deliberately left one interesting corner of your problem unmentioned. Everyone needs one meaty problem to get their teeth into, right? :-)</p>\n\n<p>Have a go at writing something based on this information and, if you have more questions, feel free to ask them here.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559576821, "post_id": 56429381, "comment_id": 99455749, "body": "I think you need to be a little cleverer about the header line."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559577219, "post_id": 56429381, "comment_id": 99455923, "body": "@DaveCross I have updated the response, thanks for point me the error."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559577468, "post_id": 56429381, "comment_id": 99456067, "body": "I think I would have gone with <code>s&#47;\\b \\b&#47;_&#47;g</code>."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1559577540, "post_id": 56429381, "comment_id": 99456096, "body": "@DaveCross I always forget about word boundary :)"}], "tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": true, "score": 0, "last_activity_date": 1559635241, "last_edit_date": 1559635241, "creation_date": 1559572078, "answer_id": 56429381, "question_id": 56423606, "link": "https://stackoverflow.com/questions/56423606/how-to-write-each-row-of-a-text-file-into-csv/56429381#56429381", "title": "How to write each row of a text file into CSV", "body": "<p>May something like this work?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $fh, '&lt;', 'text.txt';\nopen my $fo, '&gt;', 'text.csv';\nwhile (&lt;$fh&gt;) {\n    s/^\\s+//;\n    s/\\b \\b/_/g;\n    my $text = (join ',', (split /\\s+/, $_)).\"\\n\";\n    print $fo $text;\n}\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 56429381, "answer_count": 2, "score": 1, "last_activity_date": 1559640012, "creation_date": 1559550393, "last_edit_date": 1559640012, "question_id": 56423606, "link": "https://stackoverflow.com/questions/56423606/how-to-write-each-row-of-a-text-file-into-csv", "title": "How to write each row of a text file into CSV", "body": "<p>I have a netflow information report in text file, and I want to export them to csv format, how do I do that in Perl? I am new to Perl, just start to learn it.</p>\n\n<p>Here is the text file:</p>\n\n<pre><code>Duration    Flags    \n10.10.10.1      10.10.11.11    51251    445      2019-03-05 11:59:29.008   29.156     ......\n10.10.10.2      10.10.11.22    51234    123      2019-03-05 11:40:29.008   30.156     .A..SF\n</code></pre>\n\n<p>I want to export this to excel format as follows.</p>\n\n<pre><code>10.10.10.1,10.10.11.11,51251,445,2019-03-05 11:59:29.008,29.156,......  \n10.10.10.2,10.10.11.22,51234,123,2019-03-05 11:59:29.008,30.156,.A..SF  \n</code></pre>\n\n<p>I have try to do as below,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $fh, '&lt;', 'file.txt';\nopen my $fo, '&gt;', 'file.csv';\nwhile (&lt;$fh&gt;) {\n   next if ($. == 1);\n   s/\\b \\b/,/g;\n   my $text = (join ',', (split /\\s+/, $_)).\"\\n\";\n   print $fo $text;\n}\n</code></pre>\n\n<p>but the results is every line of start will be add one more ',' ,as below,</p>\n\n<pre><code>,10.10.10.1,10.10.11.11,51251,445,2019-03-05 11:59:29.008,29.156,......  \n,10.10.10.2,10.10.11.22,51234,123,2019-03-05 11:59:29.008,30.156,.A..SF  \n</code></pre>\n\n<p>This is what I wants and what's problem with my code ?</p>\n\n<pre><code>10.10.10.1,10.10.11.11,51251,445,2019-03-05 11:59:29.008,29.156,......  \n10.10.10.2,10.10.11.22,51234,123,2019-03-05 11:59:29.008,30.156,.A..SF  \n</code></pre>\n\n<p>Anyway of doing this??\nThank you.</p>\n"}, {"tags": ["perl", "cgi", "cpanel", "whm"], "comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559545927, "post_id": 56421720, "comment_id": 99440062, "body": "Can you show us some code?"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559546038, "post_id": 56421720, "comment_id": 99440115, "body": "May /usr/local/cpanel/whostmgr/docroot/cgi/XYZ/abc.cgi has not execute permission?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559546644, "post_id": 56421720, "comment_id": 99440349, "body": "I&#39;m not sure what &quot;WHM&quot; is, but if I were you, I&#39;d start by investigating what that (huge!) error code means. But we really can&#39;t be much help to you without seeing your code. Also, I&#39;d ask you to consider why you&#39;re writing CGI programs in 2019, when there are <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">far better technologies available</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559546834, "post_id": 56421720, "comment_id": 99440430, "body": "Re &quot;<i>I&#39;d start by investigating what that (huge!) error code means</i>&quot;, It&#39;s <code>0xFF FFFF FFFF FFFF</code>. It looks like -1 was passed to <code>WEXITSTATUS</code> or similar, so I doubt that it&#39;s meaningful"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559547126, "post_id": 56421720, "comment_id": 99440554, "body": "@Dave Cross, huh, that&#39;s a list of alternatives to CGI.pm (the module), not CGI (the protocol). In fact, the some of the listed examples specifically use CGI."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559547262, "post_id": 56421720, "comment_id": 99440626, "body": "@ikegami: Fair point. I guess I over-simplified. I suppose what I really mean is &quot;switch something which isolates your code from the deployment environment&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1559547340, "post_id": 56421720, "comment_id": 99440657, "body": "@Dave Cross, For all you know, that&#39;s already being done."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559547487, "post_id": 56421720, "comment_id": 99440722, "body": "@P N Jain, I&#39;m not sure how much we can do. But I&#39;m curious: 1) Where are you getting that error? 2) You talk about redirection as if it&#39;s relevant, but you haven&#39;t provided any hint as to why you think that. How do you redirect, and what happens if you simply request the next page directly?"}, {"owner": {"reputation": 184, "user_id": 11545029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ca72ea840447a90e394c66f96412c1?s=128&d=identicon&r=PG&f=1", "display_name": "P N Jain", "link": "https://stackoverflow.com/users/11545029/p-n-jain"}, "edited": false, "score": 1, "creation_date": 1559552261, "post_id": 56421720, "comment_id": 99442799, "body": "Thank you so much everyone for your efforts. I found the solution, page actually got redirected after just mentioning in action attribute of form. But, the mistake was I forgot to mentioned content type which is very important in cgi-perl script. So, now its working fine. Thank you once again"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 1, "creation_date": 1559572290, "post_id": 56421720, "comment_id": 99453292, "body": "@PNJain You should consider putting your last comment as response."}], "answers": [{"tags": [], "owner": {"reputation": 4999, "user_id": 1126070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c975501214d77b0a9b79cde31f3cbd68?s=128&d=identicon&r=PG", "display_name": "user1126070", "link": "https://stackoverflow.com/users/1126070/user1126070"}, "is_accepted": false, "score": 0, "last_activity_date": 1559763574, "creation_date": 1559763574, "answer_id": 56466956, "question_id": 56421720, "link": "https://stackoverflow.com/questions/56421720/redirect-from-cgi-file-to-another-cgi-file-in-whm/56466956#56466956", "title": "Redirect from cgi file to another cgi file in WHM", "body": "<p>It looks like your CGI crashed. You may find more details if analyse the core file.</p>\n\n<p>Each CGI is an executable file. If you execute your CGI under the same user as the server you should get the same error.</p>\n\n<pre><code>/usr/local/cpanel/whostmgr/docroot/cgi/XYZ/abc.cgi &gt; abc.html\n</code></pre>\n"}], "owner": {"reputation": 184, "user_id": 11545029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ca72ea840447a90e394c66f96412c1?s=128&d=identicon&r=PG&f=1", "display_name": "P N Jain", "link": "https://stackoverflow.com/users/11545029/p-n-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1559763574, "creation_date": 1559540626, "question_id": 56421720, "link": "https://stackoverflow.com/questions/56421720/redirect-from-cgi-file-to-another-cgi-file-in-whm", "title": "Redirect from cgi file to another cgi file in WHM", "body": "<p>I am working on WHM, I have displayed a form using CGI scripting. Now, I want to redirect to next CGI page which I have mentioned in form's action attribute. But, I am not able to do the same and getting error as follows-</p>\n\n<pre><code>Internal Server Error\n500\n\nNo response from subprocess (/usr/local/cpanel/whostmgr/docroot/cgi/XYZ/abc.cgi): The subprocess reported error number 72,057,594,037,927,935 when it ended. The process dumped a core file.\ncpsrvd Server at vps235171.vps.ovh.ca\n</code></pre>\n\n<p>I kept my both the files (form and abc.cgi) in same directory. Also, tried with the extension .pl and even without extension.</p>\n\n<p>I want to redirect on next page(abc.cgi) as there is my actual buisness logic.\nSomeone please, help me. Thanks in advance</p>\n"}, {"tags": ["bash", "perl", "unix", "sed", "pipeline"], "comments": [{"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1559531215, "post_id": 56420649, "comment_id": 99436523, "body": "Do you have control over the execution of the script? In other words, do you have control over the script that executes <code>input.sh</code>? Can you modify the script during its execution?"}, {"owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "reply_to_user": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1559531659, "post_id": 56420649, "comment_id": 99436591, "body": "Yes, but in truth I&#39;m operating on many scripts with unpredictable content. Input.sh is a stand-in representing a number of bash, python, or ruby scripts."}, {"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "edited": false, "score": 0, "creation_date": 1559536239, "post_id": 56420649, "comment_id": 99437409, "body": "What exactly are you trying to do to this output? Instead of abstracting the problem and asking for a very narrow ideal, why not post your actual input and desired output?"}, {"owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559539571, "post_id": 56420649, "comment_id": 99438082, "body": "I&#39;m trying to tell apart individual outputs from a script, it&#39;s as simple as that. I want to do a number of things with them which are completely unrelated to the question. I don&#39;t see how telling you what transformations I wish to apply to these multiline outputs would help at all seeing as it is independent of the problem described above."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1559565004, "post_id": 56420649, "comment_id": 99449297, "body": "The first thing that comes to mind when I think of what you might want to do is this: measure the response time of the commands within a script. Is that your higher-level goal?"}], "answers": [{"comments": [{"owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559533716, "post_id": 56420759, "comment_id": 99436944, "body": "I mean it makes sense but I so desperately want to believe it isn&#39;t true. There&#39;s really no way to operate over individual multi-line sequences through a pipeline? This seems like such a useful thing. there are countless uses for being able to put paragraphs through a pipeline rather than just individual lines..."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559534516, "post_id": 56420759, "comment_id": 99437079, "body": "Maybe you could inject a pipe after each external command which adds <code>kangaroo</code> if the last output it has seen was not <code>kangaroo</code> in an eternal loop. Not reliable but possibly reasonably accurate."}, {"owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559535011, "post_id": 56420759, "comment_id": 99437173, "body": "Terribly sorry, but I don&#39;t really understand what you mean. Could you clarify that suggestion? As is, it sounds like every other line would be kangaroo."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559535359, "post_id": 56420759, "comment_id": 99437236, "body": "Like <code>tail -f</code> only when you draw a blank from the file handle, print <code>kangaroo</code>, then poll again and wait until you receive new input."}, {"owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559535711, "post_id": 56420759, "comment_id": 99437316, "body": "I&#39;m trying to imagine how I would &quot;detect a blank&quot; though-- isn&#39;t that the crux of my original question? If two echo statements are executed consecutively, wouldn&#39;t there be no &quot;blank&quot; between them ?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 1, "creation_date": 1559536765, "post_id": 56420759, "comment_id": 99437505, "body": "When  <code>read()</code> returns zero bytes it means you have exhausted the buffer. Look at the source of <code>tail</code>."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 3, "last_activity_date": 1559532034, "creation_date": 1559532034, "answer_id": 56420759, "question_id": 56420649, "link": "https://stackoverflow.com/questions/56420649/is-there-any-way-to-tell-apart-multiple-multi-line-outputs-from-a-script/56420759#56420759", "title": "Is there any way to tell apart multiple multi-line outputs from a script?", "body": "<p>No; in the general case, there is no way to reliably tell whether two bytes were output separately and buffered together, or output together.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1559547674, "last_edit_date": 1559547674, "creation_date": 1559539837, "answer_id": 56421615, "question_id": 56420649, "link": "https://stackoverflow.com/questions/56420649/is-there-any-way-to-tell-apart-multiple-multi-line-outputs-from-a-script/56421615#56421615", "title": "Is there any way to tell apart multiple multi-line outputs from a script?", "body": "<p>There's no way to distinguish</p>\n\n<pre><code>echo -e 'first\\nsecond'\necho -e 'first\\nsecond'\necho -e 'first\\nsecond'\n</code></pre>\n\n<p>from </p>\n\n<pre><code>echo -e 'first\\nsecond\\nfirst'\necho -e 'second\\nfirst\\nsecond'\n</code></pre>\n\n<p>Both output the following stream of bytes (represented as hex):</p>\n\n<pre><code>66 69 72 73 74 0A 73 65 63 6F 6E 64 0A 66 69 72 73 74 0A 73 65 63 6F 6E 64 0A 66 69 72 73 74 0A 73 65 63 6F 6E 64 0A\n</code></pre>\n\n<p>The stream doesn't contain any information about what these bytes mean or how they were assembled. At best, there could be timing differences.</p>\n"}, {"comments": [{"owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559580767, "post_id": 56430277, "comment_id": 99457637, "body": "The problem is that not all output is coming from <code>echo</code>....I&#39;m running scripts that run other processes, so the output is only sometimes from echo, and oftentimes is the output of a binary."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "reply_to_user": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 0, "creation_date": 1559589222, "post_id": 56430277, "comment_id": 99460878, "body": "In that case the remark of @tripleee (look for chunks of output) might help. Perhaps it is easier to change your requirements: Is there any other way you can find what you want? Look for all multi-line outputs and see what is in the last line (<code>sed &#39;s&#47;.*second.*&#47;&amp;kangeroo&#47;&#39;</code>), do you always have 2 lines of output or can you write a wrapper around the binaries too (<code>mv my_prog my_prog.org</code> and call <code>my_prog.org $@</code> in the script my_prog, that will also add a kangeroo when finished)?"}], "tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 2, "last_activity_date": 1559575199, "creation_date": 1559575199, "answer_id": 56430277, "question_id": 56420649, "link": "https://stackoverflow.com/questions/56420649/is-there-any-way-to-tell-apart-multiple-multi-line-outputs-from-a-script/56430277#56430277", "title": "Is there any way to tell apart multiple multi-line outputs from a script?", "body": "<p>You need a trick.  </p>\n\n<p>You can try to overrule the <code>echo</code> command with your own wrapper !</p>\n\n<pre><code>echo() {\n   printf \"%skangeroo\\n\" \"$(/bin/echo $@)\"\n}\n\necho -e 'first \\n second'\necho -e 'first \\n second'\necho -e 'first \\n second'\necho \"==================\"\necho -e 'first \\n second \\n first'\necho -e 'second \\n first \\n second'\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>first\n secondkangeroo\nfirst\n secondkangeroo\nfirst\n secondkangeroo\n==================kangeroo\nfirst\n second\n firstkangeroo\nsecond\n first\n secondkangeroo\n</code></pre>\n"}], "owner": {"reputation": 30491, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 56421615, "answer_count": 3, "score": 0, "last_activity_date": 1559575199, "creation_date": 1559530648, "last_edit_date": 1559531988, "question_id": 56420649, "link": "https://stackoverflow.com/questions/56420649/is-there-any-way-to-tell-apart-multiple-multi-line-outputs-from-a-script", "title": "Is there any way to tell apart multiple multi-line outputs from a script?", "body": "<p>I am running a script input.sh which has multiple multi-line outputs like so:</p>\n\n<pre><code>echo -e 'first \\n second'\necho -e 'first \\n second'\necho -e 'first \\n second'\n</code></pre>\n\n<p>I don't have control over this file, and all I can know is that it will have multiple multi-line outputs.</p>\n\n<p>I need to be able to conduct operations on each individual output from that file in real time as it outputs messages. Buffering is one issue, but not the one I'm asking about here.</p>\n\n<p>I'm simplifying a little, but my problem boils down to this: I want to insert a kangaroo at the end of each individual output. See my attempts below:</p>\n\n<pre><code>./input.sh | sed 's/$/kangaroo/'\n</code></pre>\n\n<p>This version above inserts a kangaroo after every newline, not each multiline output.</p>\n\n<pre><code>./input.sh | perl -0777 -pe 's/$/kangaroo/'\n</code></pre>\n\n<p>This perl version only inserts a kangaroo after all outputs have finished (one kangaroo total, instead of one kangaroo per output.)</p>\n\n<p>I have tried other variants but it's always one or the other-- a kangaroo after every new line, or a single kangaroo after everything. I tried using <code>tr</code> to replace new lines with form feeds, but that didn't make any difference.</p>\n\n<p>How can this be done?</p>\n\n<p>By the way, I've read through <a href=\"https://unix.stackexchange.com/questions/26284/how-can-i-use-sed-to-replace-a-multi-line-string\">this question</a> and its answers carefully, but they are discussing operating on a file. I was unable to apply the principles described there to a pipeline and reading from stdin.</p>\n"}, {"tags": ["perl", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1559561942, "last_edit_date": 1559561942, "creation_date": 1559525548, "answer_id": 56420206, "question_id": 56420103, "link": "https://stackoverflow.com/questions/56420103/displaying-12-h-time-in-perl-using-datetime/56420206#56420206", "title": "Displaying 12-h time in Perl using DateTime", "body": "<p>Most date-time modules will provide access to the C function <code>strftime</code> or a re-implementation of it. In format specifications provided to <code>strftime</code>, you can use the following patterns:</p>\n\n<ul>\n<li><code>%I</code>: The hour as a decimal number using a 12-hour clock.</li>\n<li><code>%l</code>: The hour as a decimal number using a 12-hour clock. Single digits are preceded by a blank.</li>\n<li><code>%p</code>: Either \"AM\" or \"PM\".</li>\n<li><code>%P</code>: Either \"am\" or \"pm\".</li>\n</ul>\n\n<p>DateTime objects have a method called <code>strftime</code>. For example,</p>\n\n<pre><code>$ perl -e'\n   use DateTime qw( );\n   my $now = DateTime-&gt;now( time_zone =&gt; \"local\" );\n   CORE::say $now-&gt;strftime(\"%Y/%m/%d %I:%M:%S %p %z\");\n'\n2019/06/02 09:45:37 PM -0400\n</code></pre>\n\n<p>As @Nilesh Bhimani tried to point out, the DateTime module is rather heavy, and it's not required for this task (especially if you want to use local time or UTC) because the POSIX module provides <code>strftime</code> as well. For example,</p>\n\n<pre><code>$ perl -e'\n   use POSIX qw( strftime );\n   my $now = time;\n   CORE::say strftime(\"%Y/%m/%d %I:%M:%S %p %z\", localtime($now));\n'\n2019/06/02 09:45:37 PM -0400\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1559562498, "post_id": 56426322, "comment_id": 99448018, "body": "Thank you for your contribution. It&#39;s usually a good idea to add a bit of explanation and not just post code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559563190, "post_id": 56426322, "comment_id": 99448367, "body": "This answer would also benefit from providing the correct output --it still uses a 24-hour clock even the question is about how to use a 12-hour clock instead-- and providing it in the same format the OP used."}], "tags": [], "owner": {"reputation": 1, "user_id": 6756609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfZ06.jpg?s=128&g=1", "display_name": "Nilesh Bhimani", "link": "https://stackoverflow.com/users/6756609/nilesh-bhimani"}, "is_accepted": false, "score": -1, "last_activity_date": 1559562404, "last_edit_date": 1559562404, "creation_date": 1559560888, "answer_id": 56426322, "question_id": 56420103, "link": "https://stackoverflow.com/questions/56420103/displaying-12-h-time-in-perl-using-datetime/56426322#56426322", "title": "Displaying 12-h time in Perl using DateTime", "body": "<pre><code>#!/usr/local/bin/perl\nuse POSIX qw(strftime);\n\nmy $datestring = strftime \"%a %b %e %H:%M:%S %Y %P\", localtime;\nprintf \"date and time - $datestring\\n\";\n\nmy $datestring = strftime \"%a %b %e %H:%M:%S %Y %P\", gmtime;\nprintf \"date and time - $datestring\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11591443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b4da28391b94b53156765732e2ea2f?s=128&d=identicon&r=PG&f=1", "display_name": "Konabob", "link": "https://stackoverflow.com/users/11591443/konabob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559562404, "creation_date": 1559524024, "last_edit_date": 1559524351, "question_id": 56420103, "link": "https://stackoverflow.com/questions/56420103/displaying-12-h-time-in-perl-using-datetime", "title": "Displaying 12-h time in Perl using DateTime", "body": "<p>This perl script produces a datestamp and timestamp. \nIs there a simple way to display the time in a 12 hour format with AM/PM displayed?</p>\n\n<pre><code>use DateTime;\nuse DateTime::TimeZone;\n\nmy $tz = DateTime::TimeZone-&gt;new( name =&gt; 'Pacific/Honolulu' );\n\nmy $dt = DateTime-&gt;now(time_zone =&gt;'Pacific/Honolulu');\nmy $offset = $tz-&gt;offset_for_datetime($dt);\n\n$timestamp = $dt-&gt;hms(':');\n$datestamp = $dt-&gt;mdy('/');\n\nprint \"$datestamp at $timestamp\\n\";\n</code></pre>\n"}, {"tags": ["perl", "getopt"], "answers": [{"tags": [], "owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "is_accepted": true, "score": 4, "last_activity_date": 1559507190, "creation_date": 1559507190, "answer_id": 56418723, "question_id": 56418722, "link": "https://stackoverflow.com/questions/56418722/handle-repeated-options-like-v-vv-vvv-idiomatically-with-perl-getopt/56418723#56418723", "title": "Handle repeated options like -v -vv -vvv idiomatically with perl Getopt", "body": "<p><sub>I figured out the answer after writing up the question, but before posting it -- classic.</sub></p>\n\n<hr>\n\n<p>The best way to handle this is to use <code>Getopt::Long</code> with <code>bundling</code>:</p>\n\n<pre><code>use Getopt::Long qw(:config bundling);\nGetOptions (\"v+\" =&gt; \\$verbose);\n</code></pre>\n\n<p>This handles <code>-v -vv -vvv</code> as expected: <code>$verbose == 6</code>.</p>\n\n<hr>\n\n<p>If for some reason you cannot use or prefer not to use <code>bundling</code>, the only other way is to define the options <code>vv</code>, <code>vvv</code> etc. up to a reasonable maximum:</p>\n\n<pre><code>use Getopt::Long;\nGetOptions (\n    \"v+\" =&gt; \\$verbose);\n    \"vv\" =&gt; sub { $verbose += 2 },\n    \"vvv\" =&gt; sub { $verbose += 3 },\n);\n</code></pre>\n\n<p>This then also handles <code>-v -vv -vvv</code> as expected: <code>$verbose == 6</code>.</p>\n"}], "owner": {"reputation": 8372, "user_id": 189186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f71920ec1781c1fd7f69a0d562e18572?s=128&d=identicon&r=PG", "display_name": "Irfy", "link": "https://stackoverflow.com/users/189186/irfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 56418723, "answer_count": 1, "score": 3, "last_activity_date": 1559507190, "creation_date": 1559507190, "question_id": 56418722, "link": "https://stackoverflow.com/questions/56418722/handle-repeated-options-like-v-vv-vvv-idiomatically-with-perl-getopt", "title": "Handle repeated options like -v -vv -vvv idiomatically with perl Getopt", "body": "<p>I'd like to handle the verbosity level option like OpenSSH does: by multiply passing the <code>-v</code> option.</p>\n\n<p><code>Getopt::Std</code> does not increment no-argument option values, but simply sets them to <code>1</code>. This means that passing <code>-vvv</code> with Getopt::Std will yield <code>$opt_v == 1</code> and I need it to be <code>3</code> in that case.</p>\n\n<p><code>Getopt::Long</code> with the <code>v+</code> option-spec understands <code>-v -v</code> correctly (target variable ends up <code>2</code>), but it misunderstands <code>-vvv</code> as the option named <code>vvv</code> -- which is not defined and causes an error.</p>\n\n<p>How can I get the desired behavior?</p>\n"}, {"tags": ["regex", "shell", "perl", "command-line", "terminal"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10157279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-STMvEJ4ecoo/AAAAAAAAAAI/AAAAAAAABjw/drzkrG3rgSw/photo.jpg?sz=128", "display_name": "Ren&#233; Chenard", "link": "https://stackoverflow.com/users/10157279/ren%c3%a9-chenard"}, "edited": false, "score": 0, "creation_date": 1559525938, "post_id": 56419680, "comment_id": 99435823, "body": "If I insert the values directly instead of the variables, this code works... But when using the variables, it doesn&#39;t produce the expected result. It&#39;s as if it can&#39;t produce a command line dynamically."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15, "user_id": 10157279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-STMvEJ4ecoo/AAAAAAAAAAI/AAAAAAAABjw/drzkrG3rgSw/photo.jpg?sz=128", "display_name": "Ren&#233; Chenard", "link": "https://stackoverflow.com/users/10157279/ren%c3%a9-chenard"}, "edited": false, "score": 0, "creation_date": 1559526170, "post_id": 56419680, "comment_id": 99435844, "body": "Right, and I explained why that was the case, I explained how to fix it, and I provided the fix for it. (There was a small problem with the output I just fixed.)"}, {"owner": {"reputation": 15, "user_id": 10157279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-STMvEJ4ecoo/AAAAAAAAAAI/AAAAAAAABjw/drzkrG3rgSw/photo.jpg?sz=128", "display_name": "Ren&#233; Chenard", "link": "https://stackoverflow.com/users/10157279/ren%c3%a9-chenard"}, "edited": false, "score": 1, "creation_date": 1559574267, "post_id": 56419680, "comment_id": 99454421, "body": "Okay... I have found what went wrong! :D  Apparently, using &quot;read -p&quot; eats the backslashed characters... I had to use &quot;read -rp&quot; in order to keep them."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15, "user_id": 10157279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-STMvEJ4ecoo/AAAAAAAAAAI/AAAAAAAABjw/drzkrG3rgSw/photo.jpg?sz=128", "display_name": "Ren&#233; Chenard", "link": "https://stackoverflow.com/users/10157279/ren%c3%a9-chenard"}, "edited": false, "score": 0, "creation_date": 1559608119, "post_id": 56419680, "comment_id": 99466106, "body": "And now you know why it&#39;s important to also provide inputs when demonstrating a problem. Note that you still need the fix I provided"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1559534499, "last_edit_date": 1559534499, "creation_date": 1559517638, "answer_id": 56419680, "question_id": 56418312, "link": "https://stackoverflow.com/questions/56418312/having-difficulty-creating-a-shell-script-from-a-command-line/56419680#56419680", "title": "Having difficulty creating a shell script from a command line", "body": "<p>The snippet attempts to generate Perl code, but it does so incorrectly. This is known as a <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">code injection</a> bug.</p>\n\n<p>The easiest way to fix this is to avoid generating Perl code at all. <a href=\"https://stackoverflow.com/q/53524699/589924\">This other answer</a> suggests ways to pass data to a Perl one-liner. We'll use the second one here.</p>\n\n<pre><code>perl -sn0777e'\n   while (/$reg_exp/g) {\n      printf \"[%1\\$02d] Matched %2\\$d bytes from position %3\\$d (0x%3\\$x) to %4\\$d (0x%4\\$x)\\n\",\n         ++$count, $+[0]-$-[0], $-[0], $+[0]-1;\n      printf \"Match: %s\\n\", $&amp;; \n      printf \"Hex: %s\\n\", unpack(\"H*\", $&amp;);\n   }\n' -- -reg_exp=\"$reg_exp\" -- \"$file_path\"\n</code></pre>\n\n<p>I made a few changes:</p>\n\n<ul>\n<li>I removed the (unverified) expectation for the pattern to be embedded in a capture by using a combination of <code>$&amp;</code> and <code>$+[0]</code> instead of <code>$1</code> (and <code>length($1)</code>).</li>\n<li>I made the output cleaner and more self-consistent.</li>\n<li>I made the code more readable.</li>\n</ul>\n\n<p>Note that you can get weird output for 0-characters matches (e.g. <code>0 bytes from position 6 to 5</code>). For this reason, an exclusive end position is often used (<code>$+[0]</code> instead of <code>$+[0]-1</code>). I left this unchanged since 0-character matches are unlikely and inclusive positions are often used as well.</p>\n"}], "owner": {"reputation": 15, "user_id": 10157279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-STMvEJ4ecoo/AAAAAAAAAAI/AAAAAAAABjw/drzkrG3rgSw/photo.jpg?sz=128", "display_name": "Ren&#233; Chenard", "link": "https://stackoverflow.com/users/10157279/ren%c3%a9-chenard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 56419680, "answer_count": 1, "score": 0, "last_activity_date": 1559574402, "creation_date": 1559503910, "last_edit_date": 1559574402, "question_id": 56418312, "link": "https://stackoverflow.com/questions/56418312/having-difficulty-creating-a-shell-script-from-a-command-line", "title": "Having difficulty creating a shell script from a command line", "body": "<p>I'm having difficulty using variables inside a perl command.</p>\n\n<p>What I'm trying to do is convert a perl command to a bash script. The bash script would be used to search any given file for a given regex pattern. The bash script should first request which file to open and then request the regex pattern.</p>\n\n<p>I already have a working command line and everything I tried to convert it to a bash script didn't work... I don't have much experience with command lines and bash script and I have read a lot on the internet and nothing seems to work.</p>\n\n<pre><code>#!/bin/bash\n\nread -p \"Enter the path to the file : \" file_path\nread -p \"Enter the regular expression : \" reg_exp\n\nperl -ln0777e 'my $count=1; print \"===================== RESULTS =====================\"; while (/'\"${reg_exp}\"'/g) {printf(\"[%02d] Offset: 0x%x length: %dB\\n     Position: %d to %d \\n     Hex match: %s\\n     Original: %s\\n\", $count++, $-[ 0 ], length $1, $-[ 0 ], $-[ 0 ] + length( $1 ) - 1, unpack(\"H*\",$1), $1)}' \"${file_path}\"\n</code></pre>\n\n<p>When I try to use the variables inside the regex, it doesn't seem to be interpreted as a variable...</p>\n\n<p>This is what the result should look like:\n<a href=\"https://i.stack.imgur.com/TGcZ7.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>My command line is this:</p>\n\n<pre><code>perl -ln0777e 'my $count=1; print \"===================== RESULTS =====================\"; while (/REGULAR_EXPRESSION/g) {printf(\"[%02d] Offset: 0x%x length: %dB\\n     Position: %d to %d \\n     Hex match: %s\\n     Original: %s\\n\", $count++, $-[ 0 ], length $1, $-[ 0 ], $-[ 0 ] + length( $1 ) - 1, unpack(\"H*\",$1), $1)}' SOURCE_FILE\n</code></pre>\n\n<p>SOLUTION:</p>\n\n<p>Here is the working code that I came up with. Thank you Ikegami for your help!</p>\n\n<pre><code>#!/bin/bash\nread -rp \"Enter the path to the file : \" file_path\nread -rp \"Enter the regular expression : \" reg_exp\n\nperl -sn0777e'\n   while (/$reg_exp/g) {\n      printf \"[%1\\$02d] Matched %2\\$d bytes from position %3\\$d (0x%3\\$x) to %4\\$d (0x%4\\$x)\\n\",\n         ++$count, $+[0]-$-[0], $-[0], $+[0]-1;\n      printf \"     Hex: %s\\n\", unpack(\"H*\", $&amp;);\n      printf \"     Match: %s\\n\", $&amp;; \n   }\n' -- -reg_exp=\"${reg_exp}\" -- \"${file_path}\"\n</code></pre>\n"}, {"tags": ["literals", "argv", "perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1559752690, "post_id": 56417819, "comment_id": 99520945, "body": "What&#39;s the point of writing <code>1.234567e6</code> when you could just use <code>1234567</code>?"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559828293, "post_id": 56417819, "comment_id": 99548008, "body": "@melpomene: You are right - It works like that as well. Stupid me that I didn&#39;t think of it. Thanks for highlighting."}], "tags": [], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "is_accepted": false, "score": 0, "last_activity_date": 1559752657, "last_edit_date": 1559752657, "creation_date": 1559500131, "answer_id": 56417819, "question_id": 56417776, "link": "https://stackoverflow.com/questions/56417776/how-to-pass-arguments-like-750-000-from-command-line/56417819#56417819", "title": "how to pass arguments like 750_000 from command line", "body": "<p>Sorry but answering my own question.</p>\n\n<p>It can be done using exponent syntax. </p>\n\n<p>examples:</p>\n\n<ol>\n<li><code>1_000_000</code> can be written as <code>1e6</code> </li>\n<li><code>1_234_567</code> can be written as\n<code>1.234567e6</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559828365, "post_id": 56464160, "comment_id": 99548060, "body": "Thanks for explanation. I have chosen your version of answer as the &#39;Answer&#39; as it provides clearer explanation of the ask."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1559750488, "creation_date": 1559750488, "answer_id": 56464160, "question_id": 56417776, "link": "https://stackoverflow.com/questions/56417776/how-to-pass-arguments-like-750-000-from-command-line/56464160#56464160", "title": "how to pass arguments like 750_000 from command line", "body": "<p>The <code>750_000</code> syntax is valid for <a href=\"https://perldoc.pl/perldata#Scalar-value-constructors\" rel=\"nofollow noreferrer\">numeric literals</a> in source code, where it is simply ignored when populating the value. It is not valid when using a string that's already been created (such as read from commandline arguments) as a number. Numbers can be stored in strings with scientific notation as you noted. Alternatively you could remove the underscores yourself:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::HiRes 'usleep';\nmy $num = shift;\n$num =~ tr/_//d;\nusleep $num;\n</code></pre>\n"}], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 56464160, "answer_count": 2, "score": 0, "last_activity_date": 1559752714, "creation_date": 1559499798, "last_edit_date": 1559752714, "question_id": 56417776, "link": "https://stackoverflow.com/questions/56417776/how-to-pass-arguments-like-750-000-from-command-line", "title": "how to pass arguments like 750_000 from command line", "body": "<p>I am unable to pass values like <code>750_000</code> from command line to a function like <code>usleep</code> via shift. Still getting \".. isn't numeric\".</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["file", "perl", "tcl"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1559431555, "post_id": 56409876, "comment_id": 99419382, "body": "What&#39;s with all the braces? Is that literally your data?"}, {"owner": {"reputation": 9, "user_id": 11587331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a24bf76b01d646833ce38069b7cddd?s=128&d=identicon&r=PG&f=1", "display_name": "game_changers", "link": "https://stackoverflow.com/users/11587331/game-changers"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1559432563, "post_id": 56409876, "comment_id": 99419533, "body": "Yeah the data comes with the braces."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559462641, "post_id": 56409876, "comment_id": 99423050, "body": "What do you mean by &quot;TCL/PERL&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1559464889, "last_edit_date": 1559464889, "creation_date": 1559418841, "answer_id": 56409978, "question_id": 56409876, "link": "https://stackoverflow.com/questions/56409876/printing-in-tabular-format-in-tcl-perl/56409978#56409978", "title": "Printing in Tabular format in TCL/PERL", "body": "<p>Try this:</p>\n\n<pre><code>$ perl -anE 'push @{$vars[$_]}, ($F[$_] =~ s/^[{]|[}]$//gr) for 0.. $#F; END {say join \"\\t\", @$_ for @vars}' f.txt\nxy  a\nty  b\npo  c\niu  d1\nii  d2\n</code></pre>\n\n<h3>command line switches:</h3>\n\n<ul>\n<li><p><strong>-a</strong> : Turn on autosplit on white space to <code>@F</code> array.</p></li>\n<li><p><strong>-n</strong> : Loop over lines in input file, setting the <code>@F</code> array to the words on the current line.</p></li>\n<li><p><strong>-E</strong> : Execute the following argument as a one-liner</p></li>\n</ul>\n\n<h3>Removing surrounding braces from each words:</h3>\n\n<ul>\n<li><code>$F[$_] =~ s/^[{]|[}]$//gr</code>\n\n<ul>\n<li><code>g</code> : global substitution (we want to remove both <code>{</code> and <code>}</code>)</li>\n<li><code>r</code> : non destructive operation, returns the result of the substitution instead of modifying <code>@F</code></li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1559459468, "post_id": 56412884, "comment_id": 99422467, "body": "TSV files are generally good for machine consumption, but less great for human readability where a fixed width format using spaces works better."}], "tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": false, "score": 1, "last_activity_date": 1559459216, "creation_date": 1559459216, "answer_id": 56412884, "question_id": 56409876, "link": "https://stackoverflow.com/questions/56409876/printing-in-tabular-format-in-tcl-perl/56412884#56412884", "title": "Printing in Tabular format in TCL/PERL", "body": "<p>First, read the file in and extract the words on the first two lines:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>set f [open \"f.txt\"]\nset words1 [regexp -all -inline {\\S+} [gets $f]]\nset words2 [regexp -all -inline {\\S+} [gets $f]]\nclose $f\n</code></pre>\n\n<p><sup>The trick here is that <code>regexp -all -inline</code> returns all matching substrings, and <code>\\S+</code> selects non-whitespace character sequences.</sup></p>\n\n<p>Then, because we're producing tabular output, we need to measure the maximum size of the items in the first list. We might as well measure the second list at the same time.</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>set len1 [tcl::mathfunc::max {*}[lmap w $words1 {string length $w}]]\nset len2 [tcl::mathfunc::max {*}[lmap w $words2 {string length $w}]]\n</code></pre>\n\n<p><sup>The <code>lmap</code> applies a <code>string length</code> to each word, and then we find the maximum of them. <code>{*}</code> substitutes the list (of word lengths) as multiple arguments.</sup></p>\n\n<p>Now, we can iterate over the two lists and produce formatted output:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>foreach w1 $words1 w2 $words2 {\n    puts [format \"%-*s  %-*s\" $len1 $w1 $len2 $w2]\n}\n</code></pre>\n\n<p><sup>The format sequence <code>%-*s</code> consumes two arguments, one is the length of the field, and the other is the string to put in that field. It left-aligns the value within the field, and pads on the right with spaces. Without the <code>-</code> it would right-align; that's more useful for integers. You could instead use tab characters to separate, which usually works well if the words are short, but isn't so good once you get a wider mix of lengths.</sup></p>\n\n<hr>\n\n<p>If you're looking to produce an actual Tab-Separated Values file, the <code>csv</code> package in Tcllib will generate those fine with the right (obvious!) options. </p>\n"}], "owner": {"reputation": 9, "user_id": 11587331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a24bf76b01d646833ce38069b7cddd?s=128&d=identicon&r=PG&f=1", "display_name": "game_changers", "link": "https://stackoverflow.com/users/11587331/game-changers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1559464889, "creation_date": 1559417955, "last_edit_date": 1559450870, "question_id": 56409876, "link": "https://stackoverflow.com/questions/56409876/printing-in-tabular-format-in-tcl-perl", "title": "Printing in Tabular format in TCL/PERL", "body": "<p>I have a script in tcl in which a variable gets a collection of data in every loop and appends in a file. Suppose in loop1 , </p>\n\n<pre><code>$var = {xy} {ty} {po} {iu} {ii}\n</code></pre>\n\n<p>and in loop2 </p>\n\n<pre><code>$var = {a} {b} {c} {d1} {d2} {e3}\n</code></pre>\n\n<p>Now in a file f.txt the variable in dumped. Like puts $file $var. And in file it comes like this:\nLine number 1: <code>{xy} {ty} {po} {iu} {ii}</code></p>\n\n<p>Line number 2: <code>{a} {b} {c} {d1} {d2}</code> </p>\n\n<p>I want to print them finally in a file in tabular format. Like below: </p>\n\n<pre><code>xy  a\n\nty  b\n\npo  c\n\niu  d1\n\nii  d2\n</code></pre>\n"}, {"tags": ["perl", "text", "binaryfiles"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559405813, "post_id": 56408357, "comment_id": 99413946, "body": "Do you have to write code compatible with perl from 1999? If not, please <code>use strict; use warnings;</code>, use 3-argument open, and use normal variables, not bareword filehandles."}, {"owner": {"reputation": 1733, "user_id": 82287, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Rljpj.png?s=128&g=1", "display_name": "tim11g", "link": "https://stackoverflow.com/users/82287/tim11g"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1559409087, "post_id": 56408357, "comment_id": 99414826, "body": "No it doesn&#39;t have to be compatible with 1999. I&#39;m obviously not a Perl expert. I grabbed some code from existing scripts (which might be that old), and tried to express the problem.   I will edit the code block above with better code that compiles, but is still missing the binary output function."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1559411849, "post_id": 56408357, "comment_id": 99415477, "body": "How big are the files? [kilobytes,megabytes,gigabytes]"}], "answers": [{"comments": [{"owner": {"reputation": 1733, "user_id": 82287, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Rljpj.png?s=128&g=1", "display_name": "tim11g", "link": "https://stackoverflow.com/users/82287/tim11g"}, "edited": false, "score": 0, "creation_date": 1559514274, "post_id": 56409202, "comment_id": 99434339, "body": "Thanks @melpomene, that worked. I was able to adapt that, plus from &lt;<a href=\"https://perlmaven.com/reading-and-writing-binary-files\" rel=\"nofollow noreferrer\">perlmaven.com/reading-and-writing-binary-files</a>&gt; to make a solution. I can&#39;t post code in this comment so I&#39;ll try to add another reply to show how I did it."}, {"owner": {"reputation": 1733, "user_id": 82287, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Rljpj.png?s=128&g=1", "display_name": "tim11g", "link": "https://stackoverflow.com/users/82287/tim11g"}, "edited": false, "score": 0, "creation_date": 1559514342, "post_id": 56409202, "comment_id": 99434348, "body": "I can&#39;t add a reply either (other than &quot;Answer your Question&quot;, so I&#39;ll edit the original post with the final working code."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1559412966, "last_edit_date": 1559412966, "creation_date": 1559412292, "answer_id": 56409202, "question_id": 56408357, "link": "https://stackoverflow.com/questions/56408357/perl-split-a-mixed-text-and-binary-file-after-a-specific-string/56409202#56409202", "title": "Perl: Split a mixed text and binary file after a specific string", "body": "<p>The easiest way is probably to use binary I/O for everything. That way we don't have to worry about switching file modes halfway through, and on unix there is no difference between text and binary mode anyway (except when it comes to encodings, but here we just want to copy bytes unchanged).</p>\n\n<p>Depending on how big the plain text portion of the file is, we could either process it line by line or read it all into memory at once.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict; \nuse warnings;\n\nmy ($inputfilename, $outtextfilename, $outbinfilename) = @ARGV;\n\nopen my $in_fh, '&lt;:raw', $inputfilename\n    or die \"$0: can't open $inputfilename for reading: $!\\n\";\n\nopen my $out_txt_fh, '&gt;:raw', $outtextfilename\n    or die \"$0: can't open $outtextfilename for writing: $!\\n\";\n\nopen my $out_bin_fh, '&gt;:raw', $outbinfilename\n    or die \"$0: can't open $outbinfilename for writing: $!\\n\";\n\n# process text part\nwhile (my $line = readline $in_fh) {\n    print $out_txt_fh $line;\n    last if $line =~ m{&lt;/FileSystem&gt;};\n}\n\n# process binary part\nwhile (read $in_fh, my $buffer, 4096) {\n    print $out_bin_fh $buffer;\n}\n</code></pre>\n\n<p>This version of the code processes the text part line by line and the binary part in chunks of 4096 bytes (not taking internal buffering into account).</p>\n\n<p>Alternatively, if the character sequence marking the end of the text part is exactly <code>\"&lt;/FileSystem&gt;\\n\"</code>, we can be a bit cheeky:</p>\n\n<pre><code># process text part\n{\n    local $/ = \"&lt;/FileSystem&gt;\\n\";\n    if (my $line = readline $in_fh) {\n        print $out_txt_fh $line;\n    }\n}\n</code></pre>\n\n<p>We temporarily switch the end-of-line marker from <code>\"\\n\"</code> to <code>\"&lt;/FileSystem&gt;\\n\"</code> and read a single \"line\", which encompasses all of the text part. This assumes the text part is small enough to comfortably fit into memory. The rest of the script is the same.</p>\n"}], "owner": {"reputation": 1733, "user_id": 82287, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Rljpj.png?s=128&g=1", "display_name": "tim11g", "link": "https://stackoverflow.com/users/82287/tim11g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56409202, "answer_count": 1, "score": 1, "last_activity_date": 1559514602, "creation_date": 1559405666, "last_edit_date": 1559514602, "question_id": 56408357, "link": "https://stackoverflow.com/questions/56408357/perl-split-a-mixed-text-and-binary-file-after-a-specific-string", "title": "Perl: Split a mixed text and binary file after a specific string", "body": "<p>I have files that start with unix-delimited text lines, then switch to binary. The text portion ends with a specific string followed by newline. After that it is binary. </p>\n\n<p>I need to write the text portion into one file, then write the remainder of the binary data into another file.  Here's what I have so far, but I'm stuck on how to switch to binary and write the remainder.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict; \nuse warnings;\n\n\nmy ($inputfilename, $outtextfilename, $outbinfilename) = @ARGV;\nopen(my $in, '&lt;:encoding(UTF-8)', $inputfilename)\n  or die \"Could not open file '$inputfilename' $!\";\n\nopen my $outtext, '&gt;', $outtextfilename or die;\n\nmy $outbin;\nopen $outbin, '&gt;', $outbinfilename or die;\nbinmode $outbin;\n\n\nwhile (my $aline = &lt;$in&gt;) {\n  chomp $aline;\n  if($aline =~ /\\&lt;\\/FileSystem\\&gt;/) {   # a match indicates the end of the text portion - the rest is binary\n    print $outtext \"$aline\\n\";  # last line of the text portion\n    print  \"$aline\\n\";  # last line of the text portion\n    close ($outtext); \n\n    binmode $in;  # change input file to binary? \n    # what do I do here to copy all remaining bytes in file as binary to $outbin??\n    die;\n    } else {\n    print $outtext  \"$aline\\n\";   # a line of the text portion\n    print \"$aline\\n\";   # a line of the text portion\n    }\n}\n\nclose ($in);\nclose ($outbin); \n</code></pre>\n\n<p>Edit - final code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.010;\nuse strict; \nuse warnings;\n\n\nmy ($inputfilename, $outtextfilename, $outbinfilename) = @ARGV;\n\nopen(my $in, '&lt;', $inputfilename)\n  or die \"Could not open file '$inputfilename' $!\";\n\nopen my $outtext, '&gt;', $outtextfilename or die;\n\nmy $outbin;\nopen $outbin, '&gt;', $outbinfilename or die;\nbinmode $outbin;\n\n\n    print \"Starting File\\n\";\nwhile (my $aline = &lt;$in&gt;) {\n  chomp $aline;\n  if($aline =~ /\\&lt;\\/FileSystem\\&gt;/) {   # a match indicates the end of the text portion - the rest is binary\n    print $outtext \"$aline\\n\";  # last line of the text portion\n    print  \"$aline\\n\";  # last line of the text portion\n    close ($outtext); \n\n    binmode $in;  # change input file to binary\n\n    my $cont = '';\n    print \"processing binary portion\";\n    while (1) {\n    my $success = read $in, $cont, 1000000, length($cont);\n    die $! if not defined $success;\n    last if not $success;\n    print \".\";\n    }\n    close ($in);\n    print $outbin $cont;\n    print \"\\nDone\\n\";\n    close $outbin;\n    last;\n\n    } else {\n    print $outtext  \"$aline\\n\";   # a line of the text portion\n    print \"$aline\\n\";   # a line of the text portion\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "variables", "csh", "cgi"], "comments": [{"owner": {"reputation": 1162, "user_id": 1980619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b3e32df4af21b0b4f5c5c64499369ac7?s=128&d=identicon&r=PG", "display_name": "ILMostro_7", "link": "https://stackoverflow.com/users/1980619/ilmostro-7"}, "edited": false, "score": 0, "creation_date": 1559347226, "post_id": 56407451, "comment_id": 99412102, "body": "does the cgi script work? What&#39;s the filename of the <code>tpmfile</code> that&#39;s created?"}, {"owner": {"reputation": 4222, "user_id": 2072269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/xNPjb.png?s=128&g=1", "display_name": "muru", "link": "https://stackoverflow.com/users/2072269/muru"}, "edited": false, "score": 0, "creation_date": 1559351023, "post_id": 56407451, "comment_id": 99412103, "body": "You need to add that variable to the environment before calling your script. I think the Perl way to do that is by adding it to the <code>%ENV</code> hash."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1559390127, "post_id": 56407451, "comment_id": 99412104, "body": "How do you invoke the csh script? Does it get called from perl?"}], "answers": [{"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 2, "last_activity_date": 1559427646, "creation_date": 1559427646, "answer_id": 56410840, "question_id": 56407451, "link": "https://stackoverflow.com/questions/56407451/assign-temp-file-from-cgi-and-read-it-in-sh/56410840#56410840", "title": "Assign temp file from cgi and read it in .sh", "body": "<p>Either, as @muru said, put it into the environment:</p>\n\n<p><code>$ENV{tmpfile}= $tmpfile;</code></p>\n\n<p>Or pass it to the script as a parameter. This would be much cleaner than littering the environment.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1559398059, "question_id": 522232}, "owner": {"reputation": 35, "user_id": 11354232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56423a755e74f0b5dd33870fd13019ea?s=128&d=identicon&r=PG&f=1", "display_name": "impitnin", "link": "https://stackoverflow.com/users/11354232/impitnin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559427646, "creation_date": 1559335457, "question_id": 56407451, "link": "https://stackoverflow.com/questions/56407451/assign-temp-file-from-cgi-and-read-it-in-sh", "title": "Assign temp file from cgi and read it in .sh", "body": "<p>I have <code>.cgi</code> file and <code>.sh</code> file. The <code>cgi</code> is calling the script which is the <code>.sh</code> file.<br>\nHow will assign the tempfile created from <code>.cgi</code> and pass it to the <code>.sh</code> file?</p>\n\n<p>Example below:</p>\n\n<p>(on my CGI, <code>$tmpfile</code> is created)</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#! /usr/local/bin/perl\n\nuse CGI qw/:standard :html3/;      \nuse CGI::Carp qw(fatalsToBrowser); \n\nmy $tmpfile = \"$dir/output.$$\";\n</code></pre>\n\n<p>(on my .sh file, i want to use the <code>$tmpfile</code> from cgi)</p>\n\n<pre><code>#! /bin/csh -fb\numask 0\n\nset tmpfile2 = $tmpfile  #not working\n</code></pre>\n"}, {"tags": ["perl", "version"], "comments": [{"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1559325541, "post_id": 56399608, "comment_id": 99398020, "body": "What version of Perl are you running?  Type &quot;perl  --version&quot;.  The &quot;use&quot; command should just require a minimum, and maybe also specify a certain compatibility level, like when &quot;say&quot; was introduced to Perl.  Default compatibility level must not include say.  Try &quot;print&quot; instead of &quot;say&quot; if you don&#39;t want to include the &quot;use&quot; line."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1559325776, "post_id": 56399608, "comment_id": 99398122, "body": "Try <code>use feature qw(say)</code>. See <a href=\"https://perldoc.perl.org/feature.html\" rel=\"nofollow noreferrer\">perldoc feature</a> for more information"}, {"owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "edited": false, "score": 0, "creation_date": 1559523677, "post_id": 56399608, "comment_id": 99435584, "body": "I installed version 5.30.0."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1559556304, "last_edit_date": 1559556304, "creation_date": 1559326336, "answer_id": 56399957, "question_id": 56399608, "link": "https://stackoverflow.com/questions/56399608/helloworld-example-for-perl-gives-two-errors-when-not-specifying-use-5-30-0/56399957#56399957", "title": "HelloWorld example for Perl gives two errors when not specifying use 5.30.0", "body": "<blockquote>\n  <p><em>Can someone please explain what the default value is for Perl when the version is omitted?</em></p>\n</blockquote>\n\n<p><code>use VERSION;</code> has three purposes:</p>\n\n<ul>\n<li>It performs a compile-time check of Perl's version.</li>\n<li><em>[Only if <code>VERSION</code> is v5.10+]</em> It enables features as if <code>use feature \":VERSION\";</code> had been specified.</li>\n<li><em>[Only if <code>VERSION</code> is v5.12+]</em> It enables strictures as if <code>use strict;</code> had been specified.</li>\n</ul>\n\n<p>The default is to not perform any version checks, and to not enable any <a href=\"https://metacpan.org/pod/feature\" rel=\"nofollow noreferrer\">features</a> or <a href=\"https://metacpan.org/pod/strict\" rel=\"nofollow noreferrer\">strictures</a>.</p>\n\n<hr>\n\n<p>Here I explain why the snippets you posted result in error.</p>\n\n<p>When <code>say</code> was added to Perl, backwards compatibility prevented it from being made globally available by default. It would have broken scripts and modules that had a sub named <code>say</code>. For that reason, one must take steps to make <code>say</code> available before using it.</p>\n\n<p><code>say</code> can be made available using <code>use feature qw( say );</code>.</p>\n\n<p><code>say</code> can also be made available using <code>use 5.10.0;</code> (and higher) because this enables the <code>say</code> feature for you (among other things). This is why <code>use 5.30.0;</code> worked for you.</p>\n\n<p>Alternatively, the feature need not be enabled to use <code>CORE::say</code> instead of <code>say</code>. (This requires 5.12+.)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'say \"foo\"'\nString found where operator expected at -e line 1, near \"say \"foo\"\"\n        (Do you need to predeclare say?)\nsyntax error at -e line 1, near \"say \"foo\"\"\nExecution of -e aborted due to compilation errors.\n\n$ perl -e'use feature qw( say ); say \"foo\"'\nfoo\n\n$ perl -e'use 5.10.0; say \"foo\"'\nfoo\n\n$ perl -e'CORE::say \"foo\"'\nfoo\n</code></pre>\n\n<p>This is <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">documented</a>.</p>\n"}], "owner": {"reputation": 2815, "user_id": 588492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rgxr3.jpg?s=128&g=1", "display_name": "Elijah", "link": "https://stackoverflow.com/users/588492/elijah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 56399957, "answer_count": 1, "score": 1, "last_activity_date": 1559556304, "creation_date": 1559324535, "question_id": 56399608, "link": "https://stackoverflow.com/questions/56399608/helloworld-example-for-perl-gives-two-errors-when-not-specifying-use-5-30-0", "title": "HelloWorld example for Perl gives two errors when not specifying use 5.30.0", "body": "<p>NEWBIE: So today I started a tutorial on learning Perl and was doing okay until I got to the <strong><em>use #.###;</em></strong></p>\n\n<p>Can someone please explain what the default value is for Perl when the version is omitted?</p>\n\n<p>When I put the value of <strong>use 5.30.0;</strong> the example will run. However if I do not specify the line at all I get the following two errors depending on the position of the main and calls to the sayit().</p>\n\n<p><strong>The 1st error</strong> occurs if the package main; say hello::sayit()... at top of file.</p>\n\n<blockquote>\n  <p>Can't locate object method \"say\" via package \"hello::sayit\" (perhaps you forgot to load \"hello::sayit\"?) at helloWorld.pl line 7.</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n#use warnings;\nuse warnings FATAL =&gt; 'all';\n# default namespace is main\npackage main;\nsay hello::sayit();\nsay world::sayit();\n\n# new namespace called hello\npackage hello;\nsub sayit {\n    return \"hello\";\n}\n\n# new namespace called world\npackage world;\nsub sayit {\n    return \"world\";\n}\n</code></pre>\n\n<p><strong>The 2nd error</strong> occurs if the package main; say hello::sayit()... at bottom of file.</p>\n\n<blockquote>\n  <p>Bareword found where operator expected at helloWorld.pl line 20, near \"say hello::sayit\"</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n#use warnings;\nuse warnings FATAL =&gt; 'all';\n\n# new namespace called hello\npackage hello;\nsub sayit {\n    return \"hello\";\n}\n\n# new namespace called world\npackage world;\nsub sayit {\n    return \"world\";\n}\n\n# default namespace is main\npackage main;\nsay hello::sayit();\nsay world::sayit();\n</code></pre>\n"}, {"tags": ["c", "perl", "sed", "indentation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1559322241, "post_id": 56399127, "comment_id": 99396686, "body": "Well. Eclipse autoformatter can definitely do that with right settings. I would suspect other IDEs can as well. By the way, the first style is considered better for many major projects (like Linux, for example)"}, {"owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "edited": false, "score": 2, "creation_date": 1559322391, "post_id": 56399127, "comment_id": 99396758, "body": "using <code>sed</code> will do it without having understanding of the <code>c</code> syntax. this may lead to further problem. <code>Indent</code> is safe option to use. Although one way is <code>sed &#39; &#47;if&#47; s&#47;{$&#47;\\n&amp;&#47;g&#39;</code>   for all the lines having <code>if</code> statement or just <code>sed &#39; s&#47;{$&#47;\\n&amp;&#47;g&#39;</code> for all the lines. Make sure to keep a copy of the files before trying these commands."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1559322561, "post_id": 56399127, "comment_id": 99396822, "body": "The output of <code>indent</code> will be valid C code. You can&#39;t say the same about the output of any given <code>sed</code> or <code>perl</code> command. <code>indent</code> has a ton of options - some combination of them will do what you need assuming your code follows some set of conventions (which it should) and so all you need is to tell indent which conventions to follow for it to not modify the rest of your code that is already following those conventions."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1559322780, "post_id": 56399127, "comment_id": 99396899, "body": "You probably should not use sed for this purpose. C syntax could be tricky and obfuscated and you might miss certain cases."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 3, "creation_date": 1559323106, "post_id": 56399127, "comment_id": 99397018, "body": "Why do you need to change it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 4, "creation_date": 1559324021, "post_id": 56399127, "comment_id": 99397412, "body": "@EdMorton &quot;<i>The output of <code>indent</code> will be valid C code.</i>&quot; Haha, no. <code>indent</code> doesn&#39;t really parse C either. You&#39;ll always have to manually check the results."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559324144, "post_id": 56399127, "comment_id": 99397469, "body": "@melpomene can you give an example?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1559324217, "post_id": 56399127, "comment_id": 99397503, "body": "@EdMorton Pretty much any winner of the <a href=\"http://ioccc.org/years.html\" rel=\"nofollow noreferrer\">IOCCC</a>. One specific case I remember is that <code>indent</code> doesn&#39;t understand backslash-newline continuations."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1559324562, "post_id": 56399127, "comment_id": 99397655, "body": "@melpomene hmm, seems to handle backslash-newline continuations just fine for me (I just tested indent 2.2.11 with <code>printf \\&lt;newline&gt; (&quot;da\\&lt;newline&gt; rn\\n&quot;);</code>). I guess I&#39;ll keep trusting it for now, especially if it only breaks for obfuscated code."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1559324742, "post_id": 56399127, "comment_id": 99397724, "body": "@EdMorton Try <code>prin\\&lt;newline&gt;tf(&quot;...&quot;)</code>."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1559324868, "post_id": 56399127, "comment_id": 99397769, "body": "@melpomene thanks for the example but seriously, if you write that then you deserve to have it break."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1559322823, "post_id": 56399249, "comment_id": 99396913, "body": "I can confirm it is not complete."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1559322832, "post_id": 56399249, "comment_id": 99396918, "body": "Run it. Try to compile."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1559322855, "post_id": 56399249, "comment_id": 99396927, "body": "I can also confirm it is not correct, nor can any variation of it ever be correct."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1559323196, "post_id": 56399249, "comment_id": 99397068, "body": "No, it produces the expected output given one specific sample input. That is the starting point for identifying a solution, not the end point. As <b>one trivial example</b> of input that it would not work for try <code>printf &#39;&#47;&#47; if (x == NULL) {\\nif (x == 0) {\\n&#39; | sed &#39;script&#39;</code> and it will generate C code that contains a syntax error (unmatched <code>{</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "edited": false, "score": 1, "creation_date": 1559323483, "post_id": 56399249, "comment_id": 99397179, "body": "Ok, if I change the expression to      &#39;s/\\^([ ]*&#41;&#40;if (.* == NULL)&#41; {$/\\1\\2\\n\\1{/g&#39;  then that should make it more robust."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1559323520, "post_id": 56399249, "comment_id": 99397195, "body": "No. You cannot do this job robustly using sed or any other tool that doesn&#39;t understand the C language. Any expression you come up with there will be cases where it fails."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1559323604, "post_id": 56399249, "comment_id": 99397236, "body": "That might be fine for the OPs case though, as their code base is finite and the task is a one-time task."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1559323824, "post_id": 56399249, "comment_id": 99397329, "body": "@EugeneSh. We have no idea what the code base looks like or whether this is a one-off task or not or whether the code base today entirely encompasses what might be present in the code base the next time the OP (<b>or whoever is reading this question in future</b>) has to do this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "edited": false, "score": 0, "creation_date": 1559324271, "post_id": 56399249, "comment_id": 99397523, "body": "This is a one-off task.  I agree that my solution is limited, but a more generic solution would probably require using &#39;indent&#39; and limiting its output in some way."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1559326173, "post_id": 56399249, "comment_id": 99398258, "body": "@lord_nimon You still have not told us why you need to do this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "edited": false, "score": 0, "creation_date": 1559885773, "post_id": 56399249, "comment_id": 99566138, "body": "Isn&#39;t the answer obvious?  I need to conform to the project&#39;s coding style."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "is_accepted": true, "score": 0, "last_activity_date": 1559323551, "last_edit_date": 1559323551, "creation_date": 1559322787, "answer_id": 56399249, "question_id": 56399127, "link": "https://stackoverflow.com/questions/56399127/moving-left-brace-in-c-code-to-the-next-line/56399249#56399249", "title": "Moving left brace in C code to the next line?", "body": "<p>Looks like today is my lucky day, as it appears I figured it out:</p>\n\n<pre><code>sed 's/^\\([ ]*\\)\\(if (.* == NULL)\\) {$/\\1\\2\\n\\1{/g' &lt;filename&gt;\n</code></pre>\n\n<p>Can someone confirm that this is correct?</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1559360576, "last_edit_date": 1559360576, "creation_date": 1559324697, "answer_id": 56399647, "question_id": 56399127, "link": "https://stackoverflow.com/questions/56399127/moving-left-brace-in-c-code-to-the-next-line/56399647#56399647", "title": "Moving left brace in C code to the next line?", "body": "<p>What's wrong with this?</p>\n\n<pre><code>$ cat tst.c\n#include \"stdio.h\"\n\nint\nmain ()\n{\n    void *x;\n\n    if (x == NULL) {\n        printf(\"darn\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ indent -i 4 -bli 0 -npcs -st tst.c\n#include \"stdio.h\"\n\nint\nmain()\n{\n    void *x;\n\n    if (x == NULL)\n    {\n        printf(\"darn\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you have other examples of code segments that shouldn't be changed then create a sample program that includes those and tweak the <code>indent</code> options until you're happy that the style of code it's outputting is the style you want.</p>\n\n<hr>\n\n<p>In a comment <a href=\"https://stackoverflow.com/questions/56399127/moving-left-brace-in-c-code-to-the-next-line/56399647#comment99397503_56399127\">@melpomene had mentioned</a> that <code>indent</code> doesn't always handle obfuscated code properly and gave the example of <code>prin\\&lt;newline&gt;tf(\"...\")</code>. idk about other cases but you can handle that one by pre-processing with the help of sed and gcc:</p>\n\n<pre><code>$ cat tst.c\n#include \"stdio.h\"\n\nint\nmain ()\n{\n    void *x;\n\n    // here is a comment\n    if (x == NULL) {\n        prin\\\ntf(\"darn\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ indent -i 4 -bli 0 -npcs -st tst.c\n#include \"stdio.h\"\n\nint\nmain()\n{\n    void *x;\n\n    // here is a comment\n    if (x == NULL)\n    {\n        prin tf(\"darn\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ sed 's/a/aA/g;s/__/aB/g;s/#/aC/g' tst.c |\n    gcc -CC -P -traditional-cpp -E - |\n    sed 's/aC/#/g;s/aB/__/g;s/aA/a/g'\n#include \"stdio.h\"\n\nint\nmain ()\n{\n    void *x;\n\n    // here is a comment\n    if (x == NULL) {\n        printf(\"darn\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ sed 's/a/aA/g;s/__/aB/g;s/#/aC/g' tst.c |\n    gcc -CC -P -traditional-cpp -E - |\n    sed 's/aC/#/g;s/aB/__/g;s/aA/a/g' |\n    indent -i 4 -bli 0 -npcs -st\n#include \"stdio.h\"\n\nint\nmain()\n{\n    void *x;\n\n    // here is a comment\n    if (x == NULL)\n    {\n        printf(\"darn\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5613277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 56399249, "answer_count": 2, "score": 1, "last_activity_date": 1559360576, "creation_date": 1559322202, "question_id": 56399127, "link": "https://stackoverflow.com/questions/56399127/moving-left-brace-in-c-code-to-the-next-line", "title": "Moving left brace in C code to the next line?", "body": "<p>I have several C source files that need to have one particular formatting feature changed.  In some parts of the file,</p>\n\n<pre><code>if (x == NULL) {\n    ...\n}\n</code></pre>\n\n<p>needs to be changed to </p>\n\n<pre><code>if (x == NULL)\n{\n    ...\n}\n</code></pre>\n\n<p>I was hoping to use the \"indent\" command, but it's far too aggressive.  It wants to change the entire file with all options.</p>\n\n<p>I suppose I can do this in Perl or maybe even Sed, but I don't know either well enough to figure that out.</p>\n"}, {"tags": ["regex", "perl", "regex-lookarounds"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559328390, "post_id": 56399018, "comment_id": 99399025, "body": "Or maybe they wanted <code>&#47;^((?!corecaputered).)*\\z&#47;s</code>, which ensures that no position starts with <code>corecaputered</code>, which is to say the string doesn&#39;t contain <code>corecaputered</code>. (<code>!&#47;corecaptured&#47;</code> would be far more efficient, but <code>((?!corecaputered).)*</code> can be used inside a large pattern"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1559321581, "creation_date": 1559321581, "answer_id": 56399018, "question_id": 56398929, "link": "https://stackoverflow.com/questions/56398929/why-does-this-negative-lookahead-not-work/56399018#56399018", "title": "why does this negative lookahead not work?", "body": "<p>Your regexes are not anchored. The first condition really says \"is there a position in the string <code>\"corecaptured\"</code> that is not followed by the text <code>corecaptured</code>?\".</p>\n\n<p>The answer to that is yes, because at offset 1 the following string is <code>\"orecaptured\"</code>, which does not start with <code>c</code>. That's why the regex match returns true.</p>\n\n<p>You probably meant <code>/^(?!corecaptured)/</code>, which checks whether the target string does not start with <code>corecaptured</code>.</p>\n\n<hr>\n\n<p>As for your regex101 link, that contains a very different regex: <code>a(?!b)c</code> is equivalent to <code>ac</code> because <code>(?!b)c</code> means \"match <code>c</code> at a position where the next character is not <code>b</code>\" (or in other words, \"match a <code>c</code> that is not also a <code>b</code>\").</p>\n\n<p>If you <a href=\"https://regex101.com/r/kuzs6v/1\" rel=\"nofollow noreferrer\">change it to what's in your code</a>, you'll see that the result is a single successful match (of length 0) at offset 1:</p>\n\n<pre><code>corecaptured\n ^\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11584141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118274299601ee2e577192288bf6ee5e?s=128&d=identicon&r=PG&f=1", "display_name": "hardmac", "link": "https://stackoverflow.com/users/11584141/hardmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56399018, "answer_count": 1, "score": 1, "last_activity_date": 1559321581, "creation_date": 1559321131, "last_edit_date": 1559321477, "question_id": 56398929, "link": "https://stackoverflow.com/questions/56398929/why-does-this-negative-lookahead-not-work", "title": "why does this negative lookahead not work?", "body": "<p>Both of the following produce the string gotcha. why?</p>\n\n<pre><code>perl -e 'print \"gotcha\\n\" if \"corecaptured\" =~ /(?!corecaptured)/;'\n\nperl -e 'print \"gotcha\\n\" if \"corecaptured\" =~ /(?=corecaptured)/;'\n</code></pre>\n\n<p>I expect the first not to print anything as the negative lookahead should produce a false result but I'm obviously missing something. </p>\n\n<p>when I stick the regex into a debugger I get unexpected results:\n<a href=\"https://regex101.com/r/eM4tF1/4\" rel=\"nofollow noreferrer\">https://regex101.com/r/eM4tF1/4</a></p>\n"}, {"tags": ["perl", "pdf"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559337165, "post_id": 56398391, "comment_id": 99401944, "body": "Please provide a screen shot of the expected output also include the corresponding input text <code>$kaart</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559373849, "post_id": 56398391, "comment_id": 99407267, "body": "Or provide a download link to the PDF you created online"}, {"owner": {"reputation": 31, "user_id": 11583981, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--enLKidaRJQ/AAAAAAAAAAI/AAAAAAAABwk/zW0HJTbumGw/photo.jpg?sz=128", "display_name": "Remko de Keijzer", "link": "https://stackoverflow.com/users/11583981/remko-de-keijzer"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559476821, "post_id": 56398391, "comment_id": 99425807, "body": "Here is an example of how the text file looks that is used to create the pdf: <a href=\"https://bitbucket.org/mbch331/z4dperl/raw/ec2a53f19672cb7f4d1e73e148744fa90dc5769b/kaartz4d01.txt\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559481050, "post_id": 56398391, "comment_id": 99426701, "body": "Thanks, could you also provide a link to the generated PDF?"}], "owner": {"reputation": 31, "user_id": 11583981, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--enLKidaRJQ/AAAAAAAAAAI/AAAAAAAABwk/zW0HJTbumGw/photo.jpg?sz=128", "display_name": "Remko de Keijzer", "link": "https://stackoverflow.com/users/11583981/remko-de-keijzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1559318527, "creation_date": 1559318527, "question_id": 56398391, "link": "https://stackoverflow.com/questions/56398391/what-are-the-correct-settings-to-create-a-text-box-on-a5-pdf-file", "title": "What are the correct settings to create a text box on A5 pdf file", "body": "<p>I am trying to create a pdf file in perl using PDF::Create. I can't get the text at the correct position of the page.</p>\n\n<p>It's an existing perl application which runs in Windows. It writes subscription cards to a text file and I want to convert that text file to a pdf file. I've tried various settings, but I can't get the text on the correct position.\nI've created a pdf online from the text file and using Soda PDF online I got the coordinates of the text box, but I can't get them in my application.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $kaart=read_text(\"kaart$myuserid.txt\");\n    my $pdf = PDF::Create-&gt;new(\n        'filename' =&gt; \"kaart$myuserid.pdf\",\n        \"Author\" =&gt; \"Wattem\",\n        \"Title\" =&gt; \"Kaart deelnemer \".$record-&gt;{deelnr},\n        \"CreationDate\"=&gt; [ localtime ]\n    );\n    my $root=$pdf-&gt;new_page(\"MediaBox\"=&gt;$pdf-&gt;get_page_size('A5'));\n    my $page=$root-&gt;new_page;\n    my $font=$pdf-&gt;font('BaseFont' =&gt; 'Times-Roman');\n    my $toc = $pdf-&gt;new_outline('Title' =&gt; \"Kaart deelnemer \".$record-&gt;{deelnr}, 'Destination' =&gt; $page);\n    $page-&gt;block_text({\n        page =&gt; $page,\n        font =&gt; $font,\n        text =&gt; $kaart,\n        font_size =&gt; 10,\n        text_color =&gt; [0,0,0],\n        line_width =&gt; 400,\n        start_y =&gt; 776,\n        end_y =&gt; 327,\n        'x' =&gt; 25,\n        'y' =&gt; 10\n    });\n    $pdf-&gt;close;\n</code></pre>\n\n<p>I expect the text box to have the same size and position as I got with the online PDF converter and Soda PDF.\nThis is the information Soda PDF gave me for the text block:<br>\nX Position: 25.5<br>\nY Position: 776.3921<br>\nRotation: 0<br>\nWidth: 293.7041<br>\nHeight: 449.2844</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": true, "score": 1, "last_activity_date": 1559328518, "creation_date": 1559328518, "answer_id": 56400335, "question_id": 56397122, "link": "https://stackoverflow.com/questions/56397122/querying-perl-output/56400335#56400335", "title": "Querying Perl Output", "body": "<p>If you want to read two lines you shouldn't stop reading after the first:</p>\n\n<pre><code>open(Row1Stat,\"$cmd |\") || die (\"Could not read the pipe\\n\");\n$ignorethis= &lt;Row1Stat&gt;;       # Read 1st line\n$listenerstatus0 = &lt;Row1Stat&gt;; # Read 2nd line\nclose(Row1Stat);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 56400335, "answer_count": 1, "score": -1, "last_activity_date": 1559328518, "creation_date": 1559313559, "last_edit_date": 1559315765, "question_id": 56397122, "link": "https://stackoverflow.com/questions/56397122/querying-perl-output", "title": "Querying Perl Output", "body": "<p>I need to query on the 2nd line which I am seeing in the output. I need to check if the command returns on \"Listener LISTENER is running on\" and provide the desired output. My code is able to read the first line and not the second line which I need to verify. Please advise. </p>\n\n<p>Added a While statement so it can read the 2nd line, did not work. </p>\n\n<pre><code>use strict;\nuse warnings;\nmy $cmd=\"srvctl status listener\";\nmy $listenerstatus0;\nmy $msg0;\nmy $msg1;\nopen(Row1Stat,\"$cmd |\") || die (\"Could not read the pipe\\n\");\n$listenerstatus0 = &lt;Row1Stat&gt;;\nclose(Row1Stat);\nif( $listenerstatus0 =~ m/Listener LISTENER is running/)\n{\n$msg0=\"LISTENER is running\";\n$msg1=1\n}\nelsif ($listenerstatus0 =~ m/Listener LISTENER is not running/) {\n$msg0 = \"LISTENER is not running\";\n$msg1 = 0;\n}\nelse {\n$msg0 = \"Unable to Query LISTENER Status\";\n$msg1 = 0;\n}\n\nprint \"\\nStatistic.Name1:$msg1\";\nprint \"\\nMessage.Name1:$msg0\";\n</code></pre>\n\n<p>Below is the Output of the command, I need to check the 2nd line.</p>\n\n<pre><code>srvctl status listener\nListener LISTENER is enabled\nListener LISTENER is running on node(s): XYZ\n</code></pre>\n\n<p>The script needs to check \"Listener LISTENER is running \" and exit out with the exit code as defined in the script.</p>\n"}, {"tags": ["perl", "epoch"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1559312398, "post_id": 56396664, "comment_id": 99392108, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2143528/whats-the-best-way-to-get-the-utc-offset-in-perl\">What&#39;s the best way to get the UTC offset in Perl?</a>"}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1559312964, "post_id": 56396664, "comment_id": 99392404, "body": "Worst case, you can also subtract the <code>isdst</code> value. <code>my @tmp =  localtime($sec); $val = $val - $tmp[8];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3480, "user_id": 273812, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f5390a20a372e501e1eab1797d15a92?s=128&d=identicon&r=PG", "display_name": "Eternal Learner", "link": "https://stackoverflow.com/users/273812/eternal-learner"}, "edited": false, "score": 0, "creation_date": 1559313229, "post_id": 56396873, "comment_id": 99392547, "body": "Thanks. I have a few follow up questions. 1) If I know the date then what is the best approach? 2) Could you point out the issue with my implementation. I don&#39;t quite understand the reason it would not account for daylight savings."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 3480, "user_id": 273812, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f5390a20a372e501e1eab1797d15a92?s=128&d=identicon&r=PG", "display_name": "Eternal Learner", "link": "https://stackoverflow.com/users/273812/eternal-learner"}, "edited": false, "score": 1, "creation_date": 1559315544, "post_id": 56396873, "comment_id": 99393768, "body": "Added examples of constructing each object from a date. I am not sure what the issue is with your implementation, but perhaps you need something similar to how <a href=\"https://metacpan.org/source/Time::Moment::Role::TimeZone#L31-36\" rel=\"nofollow noreferrer\">with_system_offset_same_instant</a> determines the offset to set."}, {"owner": {"reputation": 3480, "user_id": 273812, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f5390a20a372e501e1eab1797d15a92?s=128&d=identicon&r=PG", "display_name": "Eternal Learner", "link": "https://stackoverflow.com/users/273812/eternal-learner"}, "edited": false, "score": 0, "creation_date": 1559329832, "post_id": 56396873, "comment_id": 99399567, "body": "<code>use Time::Piece; my $time = localtime-&gt;strptime(&#39;20190514&#39;, &#39;%Y%m%d&#39;); my $offset = localtime($sec)-&gt;tzoffset &#47; 3600;</code> This runs into the same issue are my original implementation. Don&#39;t get the daylight savings difference. I cant use Time::Moment or DateTime since they are not installed and may not be."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 3480, "user_id": 273812, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f5390a20a372e501e1eab1797d15a92?s=128&d=identicon&r=PG", "display_name": "Eternal Learner", "link": "https://stackoverflow.com/users/273812/eternal-learner"}, "edited": false, "score": 0, "creation_date": 1559620587, "post_id": 56396873, "comment_id": 99468109, "body": "@EternalLearner You created two different Time::Piece objects. Make sure you call tzoffset on the one you meant to."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 0, "last_activity_date": 1559315400, "last_edit_date": 1559315400, "creation_date": 1559312602, "answer_id": 56396873, "question_id": 56396664, "link": "https://stackoverflow.com/questions/56396664/perl-get-offset-between-gmtime-and-localtime-when-input-time-in-seconds-since/56396873#56396873", "title": "Perl : Get offset between gmtime and localtime when input time in seconds since epoch which considers daylight savings time", "body": "<p>Using the core <a href=\"https://perldoc.pl/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\n\n# Microseconds since Epoch \nmy $usec = 555329743301750;\n\n# Convert to seconds \nmy $sec = $usec/1000000;\n\nmy $offset = localtime($sec)-&gt;tzoffset / 3600;\n</code></pre>\n\n<p>Time::Moment and DateTime can also return this value, if you construct them as I showed on <a href=\"https://stackoverflow.com/a/56385685/5848200\">your other question</a>.</p>\n\n<pre><code>my $offset = $time_moment-&gt;offset / 60;\n\nmy $offset = $datetime-&gt;offset / 3600;\n</code></pre>\n\n<p>You can also create these objects from dates, but it will of course give you the offset at midnight (local time) on that day.</p>\n\n<pre><code>use Time::Piece;\nmy $time = localtime-&gt;strptime('20190514', '%Y%m%d');\n\nuse Time::Moment;\nuse Role::Tiny ();\nmy $class = Role::Tiny-&gt;create_class_with_roles('Time::Moment', 'Time::Moment::Role::TimeZone');\nmy $time = $class-&gt;new(year =&gt; 2019, month =&gt; 5, day =&gt; 14)-&gt;with_system_offset_same_local;\n\nuse DateTime;\nmy $time = DateTime-&gt;new(year =&gt; 2019, month =&gt; 5, day =&gt; 14, time_zone =&gt; 'local');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 1003451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08418bbc0735425191124ead1e755ca5?s=128&d=identicon&r=PG", "display_name": "Deven T. Corzine", "link": "https://stackoverflow.com/users/1003451/deven-t-corzine"}, "is_accepted": false, "score": 0, "last_activity_date": 1605747574, "last_edit_date": 1605747574, "creation_date": 1602776227, "answer_id": 64375074, "question_id": 56396664, "link": "https://stackoverflow.com/questions/56396664/perl-get-offset-between-gmtime-and-localtime-when-input-time-in-seconds-since/64375074#64375074", "title": "Perl : Get offset between gmtime and localtime when input time in seconds since epoch which considers daylight savings time", "body": "<p>This will give you the same [+-]HHMM format as the Linux &quot;%z&quot; format:</p>\n<pre><code>use POSIX qw[mktime];\n\nmy $tz = (localtime time)[8] * 60 - mktime(gmtime 0) / 60;\n$tz = sprintf &quot;%+03d%02d\\n&quot;, $tz / 60, abs($tz) % 60;\n</code></pre>\n<p>If you just want the offset in hours, you can do this:</p>\n<pre><code>my $tz_offset_hours = (localtime time)[8] - mktime(gmtime 0)) / 3600;\n</code></pre>\n<hr />\n<p><strong>Bonus:</strong> The following subroutine will return a full timestamp with time zone offset and microseconds, as in &quot;YYYY-MM-DD HH:MM:SS.nnnnnn [+-]HHMM&quot;:</p>\n<pre><code>use POSIX qw[mktime strftime];\nuse Time::HiRes qw[gettimeofday];\n\nsub timestamp () {\n  my @now = gettimeofday;\n  my $tz  = (localtime $now[0])[8] * 60 - mktime(gmtime 0) / 60;\n  my $ts  = strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, localtime $now[0]);\n  return sprintf &quot;%s.%06d %+03d%02d&quot;, $ts, $now[1], $tz / 60, abs($tz) % 60;\n}\n</code></pre>\n"}], "owner": {"reputation": 3480, "user_id": 273812, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f5390a20a372e501e1eab1797d15a92?s=128&d=identicon&r=PG", "display_name": "Eternal Learner", "link": "https://stackoverflow.com/users/273812/eternal-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 56396873, "answer_count": 2, "score": 0, "last_activity_date": 1605747574, "creation_date": 1559311752, "last_edit_date": 1559312333, "question_id": 56396664, "link": "https://stackoverflow.com/questions/56396664/perl-get-offset-between-gmtime-and-localtime-when-input-time-in-seconds-since", "title": "Perl : Get offset between gmtime and localtime when input time in seconds since epoch which considers daylight savings time", "body": "<p>I want to get the offset in hours between localtime and gmtime given microseconds since epoch. What I have so far is something like this</p>\n\n<pre><code># Microseconds since Epoch \nmy $msec = 555329743301750;\n\n# Convert to seconds \nmy $sec = $msec/1000000;\n\nmy $val = (POSIX::mktime(localtime $sec) - POSIX::mktime(gmtime $sec)) / 60 / 60;\n\nprint \"$val\\n\";\n</code></pre>\n\n<p>1) The output I get is -6.(CST localtime) However I am expecting -5. The behavior I am expecting is something similar to the result from running bash command </p>\n\n<pre><code>`date -d 20190514 \"+%z\"`; \n</code></pre>\n\n<p>2) Long story short, how do I compute offset similar to the <code>date -d 20190514 \"+%z\"</code> in perl? </p>\n"}, {"tags": ["perl", "sudo", "cgi-bin"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1559312363, "post_id": 56396549, "comment_id": 99392087, "body": "This is not an error, this is just the warning that appears when you first use sudo. The error or password prompt would occur afterward."}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1559373955, "post_id": 56396549, "comment_id": 99407284, "body": "What about removing sudo from the script and running the script with sudo or as root? On some systems sudo requires password interactively and would not work."}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": true, "score": 0, "last_activity_date": 1559491245, "creation_date": 1559491245, "answer_id": 56416668, "question_id": 56396549, "link": "https://stackoverflow.com/questions/56396549/permission-denied-when-using-sudo-grep-syslog-inside-perl-script-cgi-bin/56416668#56416668", "title": "permission denied when using `sudo grep syslog` inside perl script (cgi-bin)", "body": "<p>You should add the apache/nginx user to sudoers with NOPASSWD in order to work (Not very recommendable)</p>\n"}], "owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 56416668, "answer_count": 1, "score": 0, "last_activity_date": 1559491245, "creation_date": 1559311252, "question_id": 56396549, "link": "https://stackoverflow.com/questions/56396549/permission-denied-when-using-sudo-grep-syslog-inside-perl-script-cgi-bin", "title": "permission denied when using `sudo grep syslog` inside perl script (cgi-bin)", "body": "<p>i have perl script inside my cgi-bin folder, what i want is grep syslog using sudo grep (because it is root), but i got this message</p>\n\n<p>We trust you have received the usual lecture from the local System\nAdministrator. It usually boils down to these three things:</p>\n\n<pre><code>#1) Respect the privacy of others.\n#2) Think before you type.\n#3) With great power comes great responsibility.\n</code></pre>\n\n<p>so, any solution to solve this problem ??</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 0, "creation_date": 1559305533, "post_id": 56394771, "comment_id": 99388620, "body": "Thanks so much for the explanation.  I was trying that, but I was pushing and that wasn&#39;t working.  I use quote marks because for whatever reason I will get errors sometimes if I don&#39;t use them."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 2, "creation_date": 1559311887, "post_id": 56394771, "comment_id": 99391830, "body": "@user3525290 The rule about quoting hash keys is the same as the rule for subroutine names and quoting before the fat comma <code>=&gt;</code>. You don&#39;t have to quote any valid identifier, which is a bareword consisting of only letters, digits, and underscore, and not starting with a digit (unicode letters and digits are valid with <code>use utf8</code>). If it contains any other characters, it will need to be quoted."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1559304797, "last_edit_date": 1559304797, "creation_date": 1559304219, "answer_id": 56394771, "question_id": 56394291, "link": "https://stackoverflow.com/questions/56394291/how-to-add-data-to-a-hash-reference/56394771#56394771", "title": "How to add data to a hash reference", "body": "<p>There are a few things going on here.</p>\n\n<p>Firstly, this syntax causes problems:</p>\n\n<pre><code>push ($json_data-&gt;{'site_data'}-&gt;{'urldata'},\\%format);\n</code></pre>\n\n<p>This uses an experimental feature that was added in Perl 5.14 and removed again in 5.24. So please don't use that. You need to explicitly deference your array reference (by putting <code>@{ ... }</code> around the expression.</p>\n\n<pre><code>push (@{ $json_data-&gt;{'site_data'}-&gt;{'urldata'} }, \\%format);\n</code></pre>\n\n<p>But that doesn't get you any closer. That just gets you the same, broken, solution working on any version of Perl :-)</p>\n\n<p>The <code>push()</code> function only works on arrays. In your case, you're using it on the array (reference) stored in the <code>urldata</code> key of your hash. But you don't want to <code>push()</code> a new element onto that array (as that gives you the incorrect result that you're currently seeing). You want to access the existing, first hash that's stored in the array and add a key/value pair to that.</p>\n\n<p>The first element of your <code>urldata</code> array is given by:</p>\n\n<pre><code>$json_data-&gt;{'site_data'}-&gt;{'urldata'}-&gt;[0]; # The '0' gives the first element.\n</code></pre>\n\n<p>That is a hash reference, so you can add values to the hash in exactly the same way as you would for any other hash reference.</p>\n\n<pre><code>$json_data-&gt;{'site_data'}-&gt;{'urldata'}-&gt;[0]-&gt;{'Format'} = 'ZIP';\n</code></pre>\n\n<p>Of course, you can tidy up this code by removing the quote marks around hash keys:</p>\n\n<pre><code>$json_data-&gt;{site_data}-&gt;{urldata}-&gt;[0]-&gt;{Format} = 'ZIP';\n</code></pre>\n\n<p>And arrows between indexing brackets are always optional:</p>\n\n<pre><code>$json_data-&gt;{site_data}{urldata}[0]{Format} = 'ZIP';\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56394771, "answer_count": 1, "score": 0, "last_activity_date": 1559304797, "creation_date": 1559302234, "last_edit_date": 1559302604, "question_id": 56394291, "link": "https://stackoverflow.com/questions/56394291/how-to-add-data-to-a-hash-reference", "title": "How to add data to a hash reference", "body": "<p>I am having issues appending data to an array of hashes.  Instead of appendibg the data into the hash it is creating a new hash.</p>\n\n<pre><code>$json_data = \n{\n    'site_data' =&gt;\n     {\n        'urldata' =&gt;\n        [\n            {\n                'URL' =&gt; \"$filedata{'filename'}\"\n            }\n        ],\n    }\n}\nmy %format =('Format'=&gt;'ZIP');\npush ($json_data-&gt;{'site_data'}-&gt;{'urldata'},\\%format);\n</code></pre>\n\n<p>What I am expecting is.</p>\n\n<pre><code>'urldata':\n [\n    {\n        'URL':\"www.espn.com\",\n        'Format':\"ZIP\"\n    }\n\n ],\n</code></pre>\n\n<p>What I am getting is.</p>\n\n<pre><code>'urldata':\n [\n    {\n        'URL':\"www.espn.com\"\n    },\n    {\n        'Format':\"ZIP\"\n    }\n\n ],\n</code></pre>\n"}, {"tags": ["perl", "cygwin", "cpan"], "comments": [{"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1559300098, "post_id": 56393549, "comment_id": 99386039, "body": "Does this thread somehow help? <a href=\"https://stackoverflow.com/questions/10483574/how-do-i-install-perl-libraries-in-cygwin\" title=\"how do i install perl libraries in cygwin\">stackoverflow.com/questions/10483574/&hellip;</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559300253, "post_id": 56393549, "comment_id": 99386116, "body": "I guess this depends very much on which CPAN modules you would like to install. It might be difficult to cover all possible packages on CPAN. Even on a Linux system, you often need to install development libraries in order to be able to install a CPAN module."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1559301059, "post_id": 56393549, "comment_id": 99386556, "body": "Can you show the output or error messages? For what it&#39;s worth, I wrote <code>cpan</code>."}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "reply_to_user": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1559301690, "post_id": 56393549, "comment_id": 99386814, "body": "@Skeeve, that thread is helpful by introducing ways I could overcome my problem. But it does so by deviating from the &quot;cpan install ...&quot; method I am trying to get working. That is the only way I installed modules before, and I prefer to use that same method under cygwin64, instead of learning to use a different method for this one environment."}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1559302353, "post_id": 56393549, "comment_id": 99387147, "body": "@Brian, I am already familiar with your name. I did not know you wrote cpan, but your comments have helped me out with my perl questions here before and I often see you solving or constructively helping/improving perl questions of others here. I was trying to avoid posting any output/error message at this stage, because I may just missed a very trivial package and I hoped not to look as stupid as I may very well be. But, your approach makes perfect sense, so let&#39;s try building my environment from the ground up! See addition#1."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559335369, "post_id": 56393549, "comment_id": 99401400, "body": "I think the <code>$what</code> error is harmless and will go away if you update <code>cpan</code> itself (<code>cpan CPAN</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1559335431, "post_id": 56393549, "comment_id": 99401421, "body": "@Skeeve, That doesn&#39;t help. They are trying to setup <code>cpan</code> so they can run commands such as the ones in the Q&amp;A you linked."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559335871, "post_id": 56393549, "comment_id": 99401564, "body": "Re &quot;<i>You do not have write permission for Perl library directories.</i>&quot; This seems weird to me. Was cygwin installed by a different user than you? If it wasn&#39;t for this, I&#39;d tell you to avoid local::lib."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559342504, "post_id": 56393549, "comment_id": 99403184, "body": "<i>&quot;Press SPACE and ENTER to disable curl&quot;</i> You may have to install <code>libcurl-devel</code> or <code>libcurl4</code> to solve this problem"}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1559393234, "post_id": 56393549, "comment_id": 99410978, "body": "libcurl4 was already installed. Must have come as a dependency with one of the packages I installed earlier."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1559306402, "creation_date": 1559306402, "answer_id": 56395307, "question_id": 56393549, "link": "https://stackoverflow.com/questions/56393549/what-packages-do-i-need-for-a-working-cpan-tool-chain-under-cygwin64/56395307#56395307", "title": "What packages do I need for a working CPAN tool chain under cygwin64?", "body": "<p>Based on your <code>cpan</code> output, you can try use the Cygwin installer to install the following additional packages before you rerun <code>cpan</code>:</p>\n\n<ul>\n<li><p><code>ALERT: 'make' is an essential tool for building perl Modules.</code> -->  install <code>make</code> package. </p></li>\n<li><p><code>Press SPACE and ENTER to disable curl</code>, install <code>curl</code> package. Also, I think packages <code>gcc</code> and <code>gcc-g++</code> is something that it is required for many CPAN modules to install. Then <code>libcrypt-devel</code> can be required for SSH related things, and <code>libreadline-devel</code> is nice to have for history recall in the Cygwin terminal window.</p></li>\n<li>Optionally, the GNU MP Bignum library could be installed: <code>libgmp-devel</code>. I'll add more as I get feedback from you :)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 606, "user_id": 4257143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q195EKev0qQ/AAAAAAAAAAI/AAAAAAAAAxM/R2bEEt98Yrc/photo.jpg?sz=128", "display_name": "Doug Henderson", "link": "https://stackoverflow.com/users/4257143/doug-henderson"}, "edited": false, "score": 0, "creation_date": 1559407388, "post_id": 56395341, "comment_id": 99414409, "body": "Use cygwin setup to install cpan modules when there is a cygwin package for the module. I think you can subsequently use cpan to upgrade the module. Get your list of required modules and look for them in setup. Then install the rest of your required modules using cpan. This is an iterative process. My limited understanding is that this is necessary where some porting to cygwin in required to install the module, but the upstream cpan module does not include that porting. For more info, ask on the cygwin mailing list,"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1559306556, "creation_date": 1559306556, "answer_id": 56395341, "question_id": 56393549, "link": "https://stackoverflow.com/questions/56393549/what-packages-do-i-need-for-a-working-cpan-tool-chain-under-cygwin64/56395341#56395341", "title": "What packages do I need for a working CPAN tool chain under cygwin64?", "body": "<p>Based on my own set of installed packages and my memory about which ones are useful in the cpan toolchain:</p>\n\n<pre><code>binutils\nbzip2\nclang\ncmake\ngcc-core\ngcc-g++\ngccmakedep\nmake\ncurl  and/or  wget\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559459855, "post_id": 56410254, "comment_id": 99422521, "body": "Great! Please report this finding at the <a href=\"https://github.com/andk/cpanpm\" rel=\"nofollow noreferrer\">issue tracker</a> so that the behavior of <code>cpan</code> from Cygwin can be improved for future users."}], "tags": [], "owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "is_accepted": true, "score": 1, "last_activity_date": 1571235039, "last_edit_date": 1571235039, "creation_date": 1559421507, "answer_id": 56410254, "question_id": 56393549, "link": "https://stackoverflow.com/questions/56393549/what-packages-do-i-need-for-a-working-cpan-tool-chain-under-cygwin64/56410254#56410254", "title": "What packages do I need for a working CPAN tool chain under cygwin64?", "body": "<p>Things took an interesting turn. I noticed that even though I had curl from the very beginning (came with the most basic, default cygwin environment), I never installed it (not via the cygwin installer).</p>\n\n<pre><code>keve@cygtest ~\n$ curl --version\ncurl 7.55.1 (Windows) libcurl/7.55.1 WinSSL\nRelease-Date: [unreleased]\nProtocols: dict file ftp ftps http https imap imaps pop3 pop3s smtp smtps     telnet tftp\nFeatures: AsynchDNS IPv6 Largefile SSPI Kerberos SPNEGO NTLM SSL\n\nkeve@cygtest ~\n$ which curl\n/cygdrive/c/Windows/system32/curl\n</code></pre>\n\n<p>And there is a curl package available to mark for install. So I installed Net/curl via cygwin setup, and then got this.</p>\n\n<pre><code>keve@cygtest ~\n$ which curl\n/usr/bin/curl\n\nkeve@cygtest ~\n$ curl --version\ncurl 7.65.0 (x86_64-pc-cygwin) libcurl/7.65.0 OpenSSL/1.1.1b zlib/1.2.11 brotli/1.0.7 libidn2/2.0.4 libpsl/0.18.0 (+libidn2/2.0.2) libssh/0.8.7/openssl/zlib nghttp2/1.37.0\nRelease-Date: 2019-05-22\nProtocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp\nFeatures: AsynchDNS brotli Debug GSS-API HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz Metalink NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP TrackMemory UnixSockets\n\nkeve@cygtest ~\n$ which -a curl\n/usr/bin/curl\n/cygdrive/c/Windows/system32/curl\n</code></pre>\n\n<p>At that point, cpan no longer printed the \"Press SPACE and ENTER to disable curl\" message, but started to behave as expected.</p>\n\n<pre><code>keve@cygtest ~\n$ cpan\nLoading internal null logger. Install Log::Log4perl for logging messages\nSorry, we have to rerun the configuration dialog for CPAN.pm due to\nsome missing parameters. Configuration will be written to\n &lt;&lt;/home/keve/.cpan/CPAN/MyConfig.pm&gt;&gt;\n\n\nCPAN.pm requires configuration, but most of it can be done automatically.\nIf you answer 'no' below, you will enter an interactive dialog for each\nconfiguration option instead.\n\nWould you like to configure as much as possible automatically? [yes]\n\nUse of uninitialized value $what in concatenation (.) or string at /usr/share/perl5/5.26/App/Cpan.pm line 669, &lt;STDIN&gt; line 1.\n &lt;install_help&gt;\n\nWarning: You do not have write permission for Perl library directories.\n\nTo install modules, you need to configure a local Perl library directory or\nescalate your privileges.  CPAN can help you by bootstrapping the local::lib\nmodule or by configuring itself to use 'sudo' (if available).  You may also\nresolve this problem manually if you need to customize your setup.\n\nWhat approach do you want?  (Choose 'local::lib', 'sudo' or 'manual')\n [local::lib]\n\n\nAutoconfiguration complete.\n\nAttempting to bootstrap local::lib...\n\nWriting /home/keve/.cpan/CPAN/MyConfig.pm for bootstrap...\ncommit: wrote '/home/keve/.cpan/CPAN/MyConfig.pm'\nFetching with HTTP::Tiny:\nhttp://www.cpan.org/authors/01mailrc.txt.gz\nReading '/home/keve/.cpan/sources/authors/01mailrc.txt.gz'\n............................................................................DONE\nFetching with HTTP::Tiny:\nhttp://www.cpan.org/modules/02packages.details.txt.gz\nReading '/home/keve/.cpan/sources/modules/02packages.details.txt.gz'\n  Database was generated on Sat, 01 Jun 2019 09:17:02 GMT\n  HTTP::Date not available\n.............\n  New CPAN.pm version (v2.26) available.\n  [Currently running version is v2.18]\n  You might want to try\n    install CPAN\n    reload cpan\n  to both upgrade CPAN.pm and run the new version without leaving\n  the current session.\n\n\n...............................................................DONE\nFetching with HTTP::Tiny:\nhttp://www.cpan.org/modules/03modlist.data.gz\nReading '/home/keve/.cpan/sources/modules/03modlist.data.gz'\nDONE\nWriting /home/keve/.cpan/Metadata\nFetching with HTTP::Tiny:\nhttp://www.cpan.org/authors/id/H/HA/HAARG/local-lib-2.000024.tar.gz\nFetching with HTTP::Tiny:\nhttp://www.cpan.org/authors/id/H/HA/HAARG/CHECKSUMS\nChecksum for /home/keve/.cpan/sources/authors/id/H/HA/HAARG/local-lib-2.000024.tar.gz ok\n'YAML' not installed, will not store persistent state\nConfiguring H/HA/HAARG/local-lib-2.000024.tar.gz with Makefile.PL\nAttempting to create directory /home/keve/perl5\n\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for local::lib\nWriting MYMETA.yml and MYMETA.json\n  HAARG/local-lib-2.000024.tar.gz\n  /usr/bin/perl Makefile.PL --bootstrap -- OK\nRunning make for H/HA/HAARG/local-lib-2.000024.tar.gz\ncp lib/local/lib.pm blib/lib/local/lib.pm\ncp lib/POD2/PT_BR/local/lib.pod blib/lib/POD2/PT_BR/local/lib.pod\ncp lib/POD2/DE/local/lib.pod blib/lib/POD2/DE/local/lib.pod\ncp lib/lib/core/only.pm blib/lib/lib/core/only.pm\nManifying 4 pod documents\n  HAARG/local-lib-2.000024.tar.gz\n  /usr/bin/make -- OK\nRunning make test\nPERL_DL_NONLAZY=1 \"/usr/bin/perl.exe\" \"-I/home/keve/perl5/lib/perl5\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/bad_variables.t ...... ok\nt/carp-mismatch.t ...... ok\nt/classmethod.t ........ ok\nt/de-dup.t ............. ok\nt/lib-core-only.t ...... ok\nt/pipeline.t ........... ok\nt/shell.t .............. ok\nt/stackable.t .......... ok\nt/subroutine-in-inc.t .. ok\nt/taint-mode.t ......... ok\nAll tests successful.\nFiles=10, Tests=172, 29 wallclock secs ( 0.03 usr  0.17 sys +  4.24 cusr 11.30 csys = 15.74 CPU)\nResult: PASS\n  HAARG/local-lib-2.000024.tar.gz\n  /usr/bin/make test -- OK\nRunning make install\nManifying 4 pod documents\nInstalling /home/keve/perl5/lib/perl5/lib/core/only.pm\nInstalling /home/keve/perl5/lib/perl5/local/lib.pm\nInstalling /home/keve/perl5/lib/perl5/POD2/DE/local/lib.pod\nInstalling /home/keve/perl5/lib/perl5/POD2/PT_BR/local/lib.pod\nInstalling /home/keve/perl5/man/man3/lib.core.only.3pm\nInstalling /home/keve/perl5/man/man3/local.lib.3pm\nInstalling /home/keve/perl5/man/man3/POD2.DE.local.lib.3pm\nInstalling /home/keve/perl5/man/man3/POD2.PT_BR.local.lib.3pm\nAppending installation info to /home/keve/perl5/lib/perl5/x86_64-cygwin-threads-multi/perllocal.pod\n  HAARG/local-lib-2.000024.tar.gz\n  /usr/bin/make install  -- OK\n\nlocal::lib is installed. You must now add the following environment variables\nto your shell configuration files (or registry, if you are on Windows) and\nthen restart your command line shell and CPAN before installing modules:\n\nPATH=\"/home/keve/perl5/bin${PATH:+:${PATH}}\"; export PATH;\nPERL5LIB=\"/home/keve/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}\"; export PERL5LIB;\nPERL_LOCAL_LIB_ROOT=\"/home/keve/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}\"; export PERL_LOCAL_LIB_ROOT;\nPERL_MB_OPT=\"--install_base \\\"/home/keve/perl5\\\"\"; export PERL_MB_OPT;\nPERL_MM_OPT=\"INSTALL_BASE=/home/keve/perl5\"; export PERL_MM_OPT;\n\nWould you like me to append that to /home/keve/.bashrc now? [yes]\n\n\ncommit: wrote '/home/keve/.cpan/CPAN/MyConfig.pm'\n\nYou can re-run configuration any time with 'o conf init' in the CPAN shell\nTerminal does not support AddHistory.\n\ncpan shell -- CPAN exploration and modules installation (v2.18)\nEnter 'h' for help.\n\ncpan[1]&gt;\n</code></pre>\n\n<p>And now I can start building modules by the usual \"install desired::package\" method. So I finally got where I wanted to get.\nInterestingly, each module I wanted to build failed to build. But at least they failed in a way that I am familiar with from *nix. So this is now another problem for another day.</p>\n\n<p>To answer my original question: to get a working \"cpan\" under cygwin, you must install at least these packages . . .</p>\n\n<ul>\n<li>devel/binutils</li>\n<li>devel/clang</li>\n<li>devel/cmake</li>\n<li>devel/gcc-core</li>\n<li>devel/gcc-g++</li>\n<li>devel/gccmakedep</li>\n<li>devel/make</li>\n<li>Net/curl</li>\n</ul>\n\n<p>The last one, <strong>Net/curl</strong> is extremely important. Because the basic cygwin environment does have a functional curl already, but \"cpan\" does not work with that. You must install the Net/curl package via cygwin setup. That will get rid of the \"Press SPACE and ENTER to disable curl\" messages filling up the window upon running \"cpan\".</p>\n"}], "owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 56410254, "answer_count": 3, "score": 2, "last_activity_date": 1571235039, "creation_date": 1559299247, "last_edit_date": 1559339279, "question_id": 56393549, "link": "https://stackoverflow.com/questions/56393549/what-packages-do-i-need-for-a-working-cpan-tool-chain-under-cygwin64", "title": "What packages do I need for a working CPAN tool chain under cygwin64?", "body": "<p>There are a couple of perl modules I often use on my *nix systems (FreeBSD, Linux, Mac). I always install these from cpan. Earlier this year I needed to use some of these on a 64-bit Windows system, and in about 2 hours I got the then-most-recent Strawberry Perl package installed, and from cpan I installed the modules of my desire the same way I used to do under *nix. Everything worked as expected.</p>\n\n<p>On another 64-bit Windows system I am now attempting to set up a cygwin64 environment instead of installing Strawberry Perl. There are a handful of tools we need on that system, and those are already working fine under cygwin64, so it seems like a good idea to add the new perl functionality to the already existing cygwin64 environment. To test this possibility without messing with the production environment, I am performing trial/error setups on a separate, clean Windows system.</p>\n\n<p>I downloaded the now current cygwin64 installer, and can get all the tools we required in the past installed fine. I can also get perl5 installed. But installing modules via \"cpan install\" does not work.\nUnfortunatelly, I am not really aware of the *nix packages that cpan depends on, because all on my unices (and apparently with Strawberry Perl under Windows too) every dependency is installed automatically, and I never had to care about these.\nMy cygwin64 environment obviously misses some packages required by the build process run by cpan. But cpan in cygwin64 does a very bad job of communicating what is missing or what is wrong.</p>\n\n<p>I tried installing multiple combinations of clang, gcc, mingw and other developer tools using the cygwin installer, but still could not get \"cpan install desired::module\" working. Depending on the package mixture I used, I get different errors (or signs of errors).</p>\n\n<p>As a fairly reliable starting point, could you please give me a list of cygwin packages I should most certainly install, in order to have an environment where \"cpan install ...\" is supposed to succeed.</p>\n\n<hr>\n\n<p>Addition#1:</p>\n\n<p>If I install only the most basic cygwin packages (zsh, perl) and those that come anyway, I end up with this ...</p>\n\n<pre><code>keve@cygtest ~\n$ perl -v\n\nThis is perl 5, version 26, subversion 3 (v5.26.3) built for     x86_64-cygwin-threads-multi\n(with 7 registered patches, see perl -V for more detail)\n\nCopyright 1987-2018, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or     the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n\n\nkeve@cygtest ~\n$ curl --version\ncurl 7.55.1 (Windows) libcurl/7.55.1 WinSSL\nRelease-Date: [unreleased]\nProtocols: dict file ftp ftps http https imap imaps pop3 pop3s smtp smtps     telnet tftp\nFeatures: AsynchDNS IPv6 Largefile SSPI Kerberos SPNEGO NTLM SSL\n</code></pre>\n\n<p>Any of make, gmake, cmake, nmake, gcc, clang results in a \"command not found\" response.</p>\n\n<p>Starting cpan does this ...</p>\n\n<pre><code>$ cpan\nLoading internal null logger. Install Log::Log4perl for logging messages\nSorry, we have to rerun the configuration dialog for CPAN.pm due to\nsome missing parameters. Configuration will be written to\n &lt;&lt;/home/Valaki/.cpan/CPAN/MyConfig.pm&gt;&gt;\n\n\nCPAN.pm requires configuration, but most of it can be done automatically.\nIf you answer 'no' below, you will enter an interactive dialog for each\nconfiguration option instead.\n\nWould you like to configure as much as possible automatically? [yes]\n\nUse of uninitialized value $what in concatenation (.) or string at /usr/share/perl5/5.26/App/Cpan.pm line 669, &lt;STDIN&gt; line 1.\n &lt;install_help&gt;\n\nWarning: You do not have write permission for Perl library directories.\n\nTo install modules, you need to configure a local Perl library directory or\nescalate your privileges.  CPAN can help you by bootstrapping the local::lib\nmodule or by configuring itself to use 'sudo' (if available).  You may also\nresolve this problem manually if you need to customize your setup.\n\nWhat approach do you want?  (Choose 'local::lib', 'sudo' or 'manual')\n [local::lib]\n\n ALERT: 'make' is an essential tool for building perl Modules.\nPlease make sure you have 'make' (or some equivalent) working.\n\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\n</code></pre>\n\n<p>and that \"Press SPACE and ENTER\" line keeps filling my screen until I press Ctrl+C.</p>\n\n<p>So, I start the Cygwin installer again, and install the devel/make package. That way I have this ...</p>\n\n<pre><code>$ make -v\nGNU Make 4.2.1\nBuilt for x86_64-unknown-cygwin\nCopyright (C) 1988-2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\n$ cpan\nLoading internal null logger. Install Log::Log4perl for logging messages\nSorry, we have to rerun the configuration dialog for CPAN.pm due to\nsome missing parameters. Configuration will be written to\n &lt;&lt;/home/Valaki/.cpan/CPAN/MyConfig.pm&gt;&gt;\n\n\nCPAN.pm requires configuration, but most of it can be done automatically.\nIf you answer 'no' below, you will enter an interactive dialog for each\nconfiguration option instead.\n\nWould you like to configure as much as possible automatically? [yes]\n\nUse of uninitialized value $what in concatenation (.) or string at /usr/share/perl5/5.26/App/Cpan.pm line 669, &lt;STDIN&gt; line 1.\n &lt;install_help&gt;\n\nWarning: You do not have write permission for Perl library directories.\n\nTo install modules, you need to configure a local Perl library directory or\nescalate your privileges.  CPAN can help you by bootstrapping the local::lib\nmodule or by configuring itself to use 'sudo' (if available).  You may also\nresolve this problem manually if you need to customize your setup.\n\nWhat approach do you want?  (Choose 'local::lib', 'sudo' or 'manual')\n [local::lib]\n\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\n</code></pre>\n\n<p>This time there is no warning about \"make\" missing, but the same \"Press SPACE and ENTER\" line fills the screen. There is still that \"uninitialised $what\", and the warning about not having proper permissions to folders. Which I have seen in questions by others, usually fixed by reinstalling the perl package with the most recent one (I have the most recent one).</p>\n\n<p>So, what package do I miss?\nOr did I make a wrong choice above by accepting the default?\nPlease note: I have installed additional devel packages with my earlier attempts. But to keep things simple for now, I only have \"perl\" and \"make\".</p>\n\n<hr>\n\n<p>Addition#2</p>\n\n<p>Following the answers by H\u00e5kon and mob, I started the cygwin installer again, and installed the recommended packages. So now I have devel/binutils, devel/clang, devel/cmake, devel/gcc-core, devel/gcc-g++, gccmakedep, and make installed. Also available is curl, which was already present so I did not need to install (perhaps came as a dependency).</p>\n\n<p>Unfortunately, I still get this when starting \"cpan\":</p>\n\n<pre><code>$ cpan\nLoading internal null logger. Install Log::Log4perl for logging messages\nSorry, we have to rerun the configuration dialog for CPAN.pm due to\nsome missing parameters. Configuration will be written to\n &lt;&lt;/home/Valaki/.cpan/CPAN/MyConfig.pm&gt;&gt;\n\n\nCPAN.pm requires configuration, but most of it can be done automatically.\nIf you answer 'no' below, you will enter an interactive dialog for each\nconfiguration option instead.\n\nWould you like to configure as much as possible automatically? [yes]\n\nUse of uninitialized value $what in concatenation (.) or string at /usr/share/perl5/5.26/App/Cpan.pm line 669, &lt;STDIN&gt; line 1.\n &lt;install_help&gt;\n\nWarning: You do not have write permission for Perl library directories.\n\nTo install modules, you need to configure a local Perl library directory or\nescalate your privileges.  CPAN can help you by bootstrapping the local::lib\nmodule or by configuring itself to use 'sudo' (if available).  You may also\nresolve this problem manually if you need to customize your setup.\n\nWhat approach do you want?  (Choose 'local::lib', 'sudo' or 'manual')\n [local::lib]\n\nPress SPACE and ENTER to disable curl\nPress SPACE and ENTER to disable curl\n</code></pre>\n\n<p>Regarding the $what warning:\nLines 660 to 670 of Cpan.pm go like this ...</p>\n\n<pre><code>BEGIN {\nmy $scalar = '';\n\nsub _hook_into_CPANpm_report\n    {\n    no warnings 'redefine';\n\n    *CPAN::Shell::myprint = sub {\n        my($self,$what) = @_;\n        $scalar .= $what;\n</code></pre>\n\n<p>I can get rid of the warning by modifying line 669 to this ...</p>\n\n<pre><code>$scalar .= ($what // '');\n</code></pre>\n\n<p>... but this does not solve the problem of why $what is undefined anyway. However, I still end up seeing that \"Press SPACE and ENTER to disable curl\" filling up the screen. And the same happens if I type \"manual\" and hit Enter instead of accepting the default local::lib option.</p>\n"}, {"tags": ["arrays", "perl", "sorting"], "comments": [{"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 1, "creation_date": 1559296023, "post_id": 56391934, "comment_id": 99384000, "body": "I&#39;m impressed by both Skeeve&#39;s answer (for it&#39;s simplicity and helpfulness in better understanding the sorting mechanism) and ikegami&#39;s answer (probably more elegant and also pointing to a nice module). If I could I would accept both!"}], "answers": [{"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 8, "last_activity_date": 1559293826, "creation_date": 1559293826, "answer_id": 56392033, "question_id": 56391934, "link": "https://stackoverflow.com/questions/56391934/programmatically-change-sorting-order-in-perl/56392033#56392033", "title": "Programmatically change sorting order in Perl", "body": "<p>As &lt;=> has a value of -1, 0 or 1, you can multiply with -1 to get the opposite sorting order.</p>\n\n<p>So if your $sorting_direction is 1 or  -1 use</p>\n\n<pre><code>$sorting_direction * ( $$data{$a}{'size'} &lt;=&gt; $$data{$b}{'size'} )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559311371, "post_id": 56392193, "comment_id": 99391590, "body": "<code>nsort_by</code> and <code>rev_nsort_by</code> from <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a> could also be used similarly to those Sort::Key functions."}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1559315235, "post_id": 56392193, "comment_id": 99393602, "body": "Thanks! I implemented the first case because it solved also a second need: to have the possibility to choose between <code>&lt;=&gt;</code> and <code>cmp</code> if the value is not numeric."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1559373987, "post_id": 56392193, "comment_id": 99407289, "body": "@Grinnz, I suppose, but that module only offers a tiny subset of what Sort::Key does."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1559374066, "last_edit_date": 1559374066, "creation_date": 1559294424, "answer_id": 56392193, "question_id": 56391934, "link": "https://stackoverflow.com/questions/56391934/programmatically-change-sorting-order-in-perl/56392193#56392193", "title": "Programmatically change sorting order in Perl", "body": "<p>A generic solution is to use different compare functions.</p>\n\n<pre><code>my %sorters = (\n   by_size_asc  =&gt; sub { $data-&gt;{$a}{size} &lt;=&gt; $data-&gt;{$b}{size} },\n   by_size_desc =&gt; sub { $data-&gt;{$b}{size} &lt;=&gt; $data-&gt;{$a}{size} },\n   # ...\n);\n\n@ARGV\n   or die(\"usage\\n\");\n\nmy $sorter = $sorters{$ARGV[0]}\n   or die(\"Invalid sort function \\\"$ARGV[0]\\\".\\n\");\n\nmy @sorted_keys = sort $sorter keys(%$data);\n</code></pre>\n\n<p>You could also use different sort functions, such as when using the great <a href=\"https://metacpan.org/pod/Sort::Key\" rel=\"nofollow noreferrer\">Sort::Key</a> module.</p>\n\n<pre><code>use Sort::Key qw( ikeysort rikeysort );\n\nmy %sorters = (\n   by_size_asc  =&gt; sub { ikeysort  { $data-&gt;{$_}{size} } @_ },\n   by_size_desc =&gt; sub { rikeysort { $data-&gt;{$_}{size} } @_ },\n   # ...\n);\n\n@ARGV\n   or die(\"usage\\n\");\n\nmy $sorter = $sorters{$ARGV[0]}\n   or die(\"Invalid sort function \\\"$ARGV[0]\\\".\\n\");\n\nmy @sorted_keys = $sorter-&gt;( keys(%$data) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1559311622, "creation_date": 1559311622, "answer_id": 56396630, "question_id": 56391934, "link": "https://stackoverflow.com/questions/56391934/programmatically-change-sorting-order-in-perl/56396630#56396630", "title": "Programmatically change sorting order in Perl", "body": "<p>While it's always going to be slower because it's a full extra operation, if performance is not as much a concern as code cleanliness you could just <a href=\"https://perldoc.pl/functions/reverse\" rel=\"nofollow noreferrer\">reverse</a> the list when the opposite sorting direction is chosen. Note that this would be slightly different in the case of sorting equal elements, as sort in Perl is normally stable (equal elements stay in the same order they originally were).</p>\n\n<pre><code>my @sorted = sort { $$data{$a}{'size'} &lt;=&gt; $$data{$b}{'size'} } keys %{$data};\n@sorted = reverse @sorted if $reverse;\n</code></pre>\n"}], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 2, "accepted_answer_id": 56392193, "answer_count": 3, "score": 4, "last_activity_date": 1559508811, "creation_date": 1559293460, "last_edit_date": 1559508811, "question_id": 56391934, "link": "https://stackoverflow.com/questions/56391934/programmatically-change-sorting-order-in-perl", "title": "Programmatically change sorting order in Perl", "body": "<p>I'd like to give the user the possibility to change the sorting order (asc / desc) in a data structure. As far as I know, this is done changing the order of <code>$a</code> and <code>$b</code>in the code, but I'd like to programmatically change this to avoid redundant code.</p>\n\n<p>I made a working example:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use 5.018;\nuse warnings;\n\n# Supply any argument to change sorting order\nmy $sorting_direction = $ARGV[0];\n\nmy $data = {\n          'item1' =&gt; {\n                         'min'  =&gt; 4,\n                         'size' =&gt; 825,\n                         'max'  =&gt; 256,\n                       },\n          'item2' =&gt; {\n                         'min'  =&gt; 4,\n                         'size' =&gt; 130,\n                         'max'  =&gt; 65,\n                       },\n        };\n\n\nif (defined $sorting_direction) {\n    foreach my $item (sort { $$data{$a}{'size'} &lt;=&gt; $$data{$b}{'size'} } keys %{$data} ) {\n        say \"$item\\t\", $$data{$item}{'size'};\n    }\n} else {\n    foreach my $item (sort { $$data{$b}{'size'} &lt;=&gt; $$data{$a}{'size'} } keys %{$data} ) {\n        say \"$item\\t\", $$data{$item}{'size'};\n    }   \n}\n</code></pre>\n\n<p>Giving any parameter will change the <code>sorting_direction</code>. Can I do this without the <em>if</em> conditional?</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1559282830, "post_id": 56389310, "comment_id": 99378195, "body": "You need to determine where the FTP server&#39;s root directory is, and establish the path from that root to the file you are interested in.  It is unlikely the FTP root is the filesystem root directory, so it is unlikely a remote path of <code>&#47;home&#47;user&#47;test_dir&#47;</code> would be valid."}], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1559282008, "post_id": 56389354, "comment_id": 99377950, "body": "So that means after putting a directory contents into an array, I should pick the file?<code>@files = $ftp-&gt;ls(); foreach ( @files ) { \tprint &quot;Found : $file_name\\n&quot; if( $_ =~ &#47;$file_name&#47;); }</code>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1559282172, "post_id": 56389354, "comment_id": 99378005, "body": "@vinodk89: correct, if you want to know if a file exists in a directory then you need to get a listing of the directory and look for the file."}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1559283767, "post_id": 56389354, "comment_id": 99378490, "body": "&gt; Thus, it is clearly documented to list a directory, not a specific regular file. This is simply not true as I just tested with my own ftp server.  So there must be another issue."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 3, "creation_date": 1559284315, "post_id": 56389354, "comment_id": 99378688, "body": "@Skeeve: <code>ls</code> is implemented in terms of the FTP <code>NLST</code> command. This command is defined in <a href=\"https://tools.ietf.org/html/rfc959\" rel=\"nofollow noreferrer\">RFC 959</a> as <i>&quot;The pathname should specify a             <b>directory or other system-specific file group descriptor</b>;&quot;</i>, i.e. a directory or something similar (OS dependent). A specific FTP server might actually also support a regular file name there but this case is out of the specification so you should not rely on this and you should not generalize on what you see with a single server to what you can expect from other servers."}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 1, "creation_date": 1559285662, "post_id": 56389354, "comment_id": 99379187, "body": "@Skeeve Steffen is right. For similar questions (for other languages), see for example <a href=\"https://stackoverflow.com/q/9282753/850848\">FTP directory partial listing with wildcards</a> or <a href=\"https://stackoverflow.com/q/10482204/850848\">Checking file existence on FTP server</a>."}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1559285912, "post_id": 56389354, "comment_id": 99379313, "body": "Thanks to Martin Prikryl and also @Steffen Ullrich for clarifying."}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1559315415, "post_id": 56389354, "comment_id": 99393692, "body": "Thanks @SteffenUllrich. Now I am able to list the files from a particular directory but not all the files. Actually directory is having almost 1500+ files but array(<code>@files</code>) is giving count 900+. Why its not giving the exact count of files which it has in the directory. Is there any restrictions in listing ?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1559321138, "post_id": 56389354, "comment_id": 99396242, "body": "@vinodk89: There is neither a restriction in Net::FTP nor is such restriction in the standard. It is not clear from your description what exactly is behaving wrong here - it might be that the data connection breaks but it might also be that the server does not send the information about all the files."}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1559382279, "post_id": 56389354, "comment_id": 99408823, "body": "@SteffenUllrich I have trouble retrieving files from remote server using <code>get</code> command of <code>Net::FTP</code> module. With <code>Net::SFTP</code> its working. So any guesses what would be the reason?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 1, "creation_date": 1559383540, "post_id": 56389354, "comment_id": 99409048, "body": "@vinodk89: please don&#39;t ask new questions in a comment. Ask a new question instead with sufficient details (code, debug output). Apart from that Net::SFTP is using a completely different protocol: SFTP is based on SSH not FTP."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1559281934, "creation_date": 1559281934, "answer_id": 56389354, "question_id": 56389310, "link": "https://stackoverflow.com/questions/56389310/perl-netftp-not-lists-particular-file/56389354#56389354", "title": "Perl Net::FTP not lists particular file", "body": "<blockquote>\n  <p><code>ftp-&gt;ls();</code> is used for only listing the directory contents <strong>or can it be used to list the particular file from a directory</strong></p>\n</blockquote>\n\n<p>From <a href=\"https://metacpan.org/pod/Net::FTP#ls-(-[-DIR-]-)\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p><strong>ls ( [ DIR ] )</strong><br>\n  Get a directory listing of DIR, or the current directory.</p>\n</blockquote>\n\n<p>Thus, it is clearly documented to list a <strong>directory</strong>, not a specific regular file.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1559284134, "creation_date": 1559281634, "question_id": 56389310, "link": "https://stackoverflow.com/questions/56389310/perl-netftp-not-lists-particular-file", "title": "Perl Net::FTP not lists particular file", "body": "<p>I am trying to list the file of remote host using Net::FTP Perl module. Later I want to download it using <code>put</code> command.</p>\n\n<p>Will it possible to list the particular file using <code>ls</code> command</p>\n\n<p>Syntax I am using is:</p>\n\n<pre><code>$remote_dir = \"/home/user/test_dir/\";\n$ftp-&gt;cwd($remote_dir);\n$file_name = \"test.txt\";\nprint $ftp-&gt;ls($file_name);\n</code></pre>\n\n<p>This file is exists in remote server when I tried checking it manually. But listing is not happening.</p>\n\n<p><code>ftp-&gt;ls();</code> is used for only listing the directory contents or can it be used to list the particular file from a directory as I mentioned above?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559291788, "post_id": 56387396, "comment_id": 99381955, "body": "That assumes every file takes the same amount of time to process. Why not use a <a href=\"https://stackoverflow.com/a/17636255/589924\">work queue</a>?"}, {"owner": {"reputation": 93, "user_id": 3019816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b05256d2fc656a88dfe5d3834adf053?s=128&d=identicon&r=PG&f=1", "display_name": "madturbocow", "link": "https://stackoverflow.com/users/3019816/madturbocow"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559345062, "post_id": 56387396, "comment_id": 99403669, "body": "Your correct in that it is an assumption that all will run around same amount of time. Your threading solution looks good but if it was in some other language, it&#39;s over my skill level to try to implement for Perl. It is taking 75 minutes (I incorrectly said 45) so in theory, if total processing comes down to 10 then it&#39;s a big win. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559345271, "post_id": 56387396, "comment_id": 99403704, "body": "While the link I suggested uses threads, that&#39;s a specific implementation of my suggestion and by no means the only option. That said, you could use the code from the answer to the question I linked as-is! (Well, change <code>NUM_WORKERS</code> to <code>10</code>. The file names are supplied for processing via <code>$q-&gt;enqueue</code>. You can pass them all to a single call of <code>$q-&gt;enqueue</code> as shown, you can pass them one at a time over multiple calls to <code>$q-&gt;enqueue</code>, or you can use something in between.)"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1559266550, "creation_date": 1559266550, "answer_id": 56387634, "question_id": 56387396, "link": "https://stackoverflow.com/questions/56387396/how-to-hash-a-filename-down-to-a-small-number-or-digit-for-output-processing/56387634#56387634", "title": "How to hash a filename down to a small number or digit for output processing", "body": "<p>Here's an easy one to implement suggested in the <a href=\"http://metacpan.org/pod/perlfunc#unpack\" rel=\"nofollow noreferrer\"><code>unpack</code> function documentation</a>:</p>\n\n<pre><code>sub string_to_code {\n    # convert an arbitrary string to a digit from 0-9\n    my ($string) = @_;\n    return unpack(\"%32W*\",$string) % 10;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3019816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b05256d2fc656a88dfe5d3834adf053?s=128&d=identicon&r=PG&f=1", "display_name": "madturbocow", "link": "https://stackoverflow.com/users/3019816/madturbocow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 1, "accepted_answer_id": 56387634, "answer_count": 1, "score": 1, "last_activity_date": 1559266550, "creation_date": 1559264107, "question_id": 56387396, "link": "https://stackoverflow.com/questions/56387396/how-to-hash-a-filename-down-to-a-small-number-or-digit-for-output-processing", "title": "How to hash a filename down to a small number or digit for output processing", "body": "<p>I am not a Perl programmer but I've inherited existing code that is going to a directory, finding all files iren that folder and subfolder (usually JPG or Office files) and then converting this into a single file to use to load into a SQL Server database. The customer has about 500,000 of these files. </p>\n\n<p>It takes about 45 mins to create the file and then another 45 mins for SQL to load the data. Crudely, it's doing about 150 per second which is reasonable but time is the issue for the job. There are many reasons I don't want to use other techniques so please don't suggest other options unless closely aligned to this process.</p>\n\n<p>What I was considering is to improve speed by running something like 10 processes concurrent. Each process would get passed another argument (0-9). Each process would go to the directory and find all files as it is currently doing but for each file found, it would hash or kludge the filename down to a single digit (0-9) and if that matched the supplied argument, the process would process that file and write it out to it's unique file stream.</p>\n\n<p>Then I would have 10 output files at the end. I doubt that the SQL Server side could be improved as I would have to load to separate tables and then merge in the database and as these are BLOB objects, will not be fast.</p>\n\n<p>So I am looking for some basic code or clues on what functions to use in Perl to take a variable (the file name $File) and generate a single 0 to 9 value based on that. It is probably done by getting the ascii value of each char, then adding these together to get a long number, then add these individual numbers together and eventually you'll get an answer.</p>\n\n<p>Any clues or suggested techniques?</p>\n"}, {"tags": ["perl", "gnu-make"], "answers": [{"comments": [{"owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "edited": false, "score": 0, "creation_date": 1559247945, "post_id": 56385062, "comment_id": 99370432, "body": "Well, then why does the first line work? I guess because all Make recipe lines, are executed (as if) by spawning a shell first. So, yes, the shell should have been started every time, and <code>PWD</code> should have been set for all 3 lines.  Except, in some cases, GNU Make optimizes, the &quot;as if&quot; behaviour, and does not actually spawn a shell.    Do you think this is why there is a discrepancy?"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1559253895, "post_id": 56385062, "comment_id": 99372437, "body": "Yes, very likely.  If you want to be more consistent you can always add <code>PWD := $(CURDIR)</code> to your makefiles."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1559247405, "creation_date": 1559247405, "answer_id": 56385062, "question_id": 56384997, "link": "https://stackoverflow.com/questions/56384997/why-doesnt-make-c-change-pwd-as-seen-through-a-scripting-language-such-as-per/56385062#56385062", "title": "why doesn&#39;t make -C change $PWD as seen through a scripting language such as Perl?", "body": "<p>Because the <code>PWD</code> environment variable doesn't hold the current working directory; it holds <em>whatever the current working directory was the last time <code>sh</code> set it</em>. Anything other than a shell starting up, or a shell executing the <code>cd</code> builtin (or a similar builtin like <code>pushd</code>, in shells that have it), has no effect on <code>PWD</code>, and relying on <code>PWD</code> anywhere except in the shell is probably a silly idea. Use <code>getcwd</code> (C), <code>Cwd::getcwd</code> (Perl), <code>os.getcwd</code> (Python), etc. instead.</p>\n"}], "owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559247405, "creation_date": 1559247064, "question_id": 56384997, "link": "https://stackoverflow.com/questions/56384997/why-doesnt-make-c-change-pwd-as-seen-through-a-scripting-language-such-as-per", "title": "why doesn&#39;t make -C change $PWD as seen through a scripting language such as Perl?", "body": "<p>Here is <code>temp/Makefile</code>:</p>\n\n<pre><code>all:\n    echo $$PWD\n    echo $(CURDIR)\n    perl -e 'print $$ENV{\"PWD\"}' \n</code></pre>\n\n<p>and now</p>\n\n<pre><code>$make -C temp\nmake: Entering directory `/home/mgaleck/temp'\n/home/mgaleck/temp\n/home/mgaleck/temp\n/home/mgaleck\nmake: Leaving directory `/home/mgaleck/temp'\n</code></pre>\n\n<p>Why is the third value without <code>temp</code>? </p>\n\n<p>According to Make manual, <code>-C</code> option causes to \"change the directory\" (working directory?) first. </p>\n\n<p>Same thing happens with Python. </p>\n"}, {"tags": ["perl", "epoch"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1559256812, "last_edit_date": 1559256812, "creation_date": 1559250630, "answer_id": 56385685, "question_id": 56384965, "link": "https://stackoverflow.com/questions/56384965/perl-convert-microseconds-since-epoch-to-localtime/56385685#56385685", "title": "Perl convert microseconds since epoch to localtime", "body": "<p>The core <a href=\"https://perldoc.pl/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> can do the conversion, but it doesn't handle subseconds so you'd need to handle those yourself.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\nmy $input = '1555329743301750';\nmy ($sec, $usec) = $input =~ m/^([0-9]*)([0-9]{6})$/;\nmy $time = localtime($sec);\nprint $time-&gt;strftime('%H%M%S') . \".$usec\\n\";\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow noreferrer\">Time::Moment</a> provides a nicer option for dealing with subseconds, but needs some help to find the UTC offset for the arbitrary time in system local time, we can use <a href=\"https://metacpan.org/pod/Time::Moment::Role::TimeZone\" rel=\"nofollow noreferrer\">Time::Moment::Role::TimeZone</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Moment;\nuse Role::Tiny ();\nmy $input = '1555329743301750';\nmy $sec = $input / 1000000;\nmy $class = Role::Tiny-&gt;create_class_with_roles('Time::Moment', 'Time::Moment::Role::TimeZone');\nmy $time = $class-&gt;from_epoch($sec, precision =&gt; 6)-&gt;with_system_offset_same_instant;\nprint $time-&gt;strftime('%H%M%S%6f'), \"\\n\";\n</code></pre>\n\n<p>Finally, <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> is a bit heavier but can handle everything naturally, at least to microsecond precision.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DateTime;\nmy $input = '1555329743301750';\nmy $sec = $input / 1000000;\nmy $time = DateTime-&gt;from_epoch(epoch =&gt; $sec, time_zone =&gt; 'local');\nprint $time-&gt;strftime('%H%M%S.%6N'), \"\\n\";\n</code></pre>\n\n<p>(To avoid possible floating point issues, you could replace <code>my $sec = $input / 1000000</code> with <code>substr(my $sec = $input, -6, 0, '.')</code> so it's purely a string operation until it goes to the module, if you are sure it will be in that string form - but it's unlikely to be an issue at this scale.)</p>\n"}], "owner": {"reputation": 3480, "user_id": 273812, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f5390a20a372e501e1eab1797d15a92?s=128&d=identicon&r=PG", "display_name": "Eternal Learner", "link": "https://stackoverflow.com/users/273812/eternal-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 56385685, "answer_count": 1, "score": 0, "last_activity_date": 1559312692, "creation_date": 1559246906, "last_edit_date": 1559312692, "question_id": 56384965, "link": "https://stackoverflow.com/questions/56384965/perl-convert-microseconds-since-epoch-to-localtime", "title": "Perl convert microseconds since epoch to localtime", "body": "<p>In perl, given microseconds since epoch how do I convert to localtime in a format like </p>\n\n<pre><code>my $time = sprintf \"%02ld,%02ld,%02ld.%06ld\", $hour, $min, $sec, $usec;\n</code></pre>\n\n<p>Eg: \"Input = 1555329743301750 (microseconds since epoch) Output = 070223.301750\" </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "edited": false, "score": 0, "creation_date": 1559308856, "post_id": 56385291, "comment_id": 99390268, "body": "Thank you very much for your reply. I updated the code as per suggestions provided by you, however it still does not work. I am interested only if the LISTENER is running or not running which is displayed in the second row. Can you please let me know, why this is failing."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "edited": false, "score": 0, "creation_date": 1559321240, "post_id": 56385291, "comment_id": 99396288, "body": "@ArnabMukhopadhyay Sorry, I cannot. I have no idea what your code looks like. I have no idea what you mean by &quot;does not work&quot;. I&#39;d suggest you <code>print</code> what you read from the pipe to see that you&#39;re looking at the right data, i.e., you&#39;re reading beyond the first line. If the data you get looks right, check your regular expressions."}, {"owner": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "edited": false, "score": 0, "creation_date": 1559322574, "post_id": 56385291, "comment_id": 99396827, "body": "Hi, I updated the code in the original question. I am not sure how to leverage the while loop in my case. I need to run the $cmd since I am querying the 2nd line. I see you used <i>DATA</i> however this is not a file I am reading from."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "edited": false, "score": 0, "creation_date": 1559325407, "post_id": 56385291, "comment_id": 99397967, "body": "@ArnabMukhopadhyay <code>&lt;DATA&gt;</code> is a special file handle for the <code>__DATA__</code> section. Reading from the pipe works the same. You are still only reading the first line. Check again on my answer above. Either slurp the whole file by undefining <code>$&#47;</code> before you read, or have a loop and read multiple lines."}, {"owner": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "edited": false, "score": 0, "creation_date": 1559328328, "post_id": 56385291, "comment_id": 99399005, "body": "HI, I tried both the options and did not work.                                    Option 2                       local $/ = undef;                                      $listenerstatus0 = &lt;Row1Stat&gt;;                    Option 1  While Loop    while (&lt;$cmd&gt;) { }."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": true, "score": 1, "last_activity_date": 1559284393, "last_edit_date": 1559284393, "creation_date": 1559248575, "answer_id": 56385291, "question_id": 56384849, "link": "https://stackoverflow.com/questions/56384849/querying-the-2nd-line-from-a-command-output-in-perl/56385291#56385291", "title": "Querying the 2nd Line from a command output in Perl", "body": "<p>You are reading only the first line from the pipe. You either need a loop (<code>while &lt;Row1Stat&gt;) { ... }</code>) and read all lines one at a time, or read the whole pipe contents in one go, e.g., by <code>local $/ = undef;</code>, which clears the <a href=\"https://perldoc.perl.org/perlvar.html#IO::Handle-%3Einput_record_separator(-EXPR-)\" rel=\"nofollow noreferrer\">input record separator</a> (by default a newline).</p>\n\n<p>Here's an example reading in a loop. I've removed the pipe to make it a Minimal Complete Verifiable Example, since the <code>srvctl</code> command is not really necessary.</p>\n\n<pre><code>use strict; \nuse warnings;\n\nmy $msg0 = \"not running\";\nmy $msg1 = 0;\n\nwhile (&lt;DATA&gt;) {\n    if (m/Listener LISTENER is running/) {\n        $msg0 = \"is running\";\n        $msg1 = 1;\n    }\n    elsif (m/Listener LISTENER is enabled/) {\n        $msg0 = \"is enabled\";\n        $msg1 = 2;\n    }\n}\n\nprint \"Statistic.Name1:$msg1\\n\";\nprint \"Message.Name1:$msg0\\n\";\n\n__DATA__\nsrvctl status listener\nListener LISTENER is enabled\nListener LISTENER is running on node(s): XYZ\n</code></pre>\n\n<p>You cannot use an <code>else</code> block to set \"not running\" cause you're reading line by line and don't want to override your found line later. Hence I initialize this when I declare the variables.</p>\n\n<p>Now for slurping the whole pipe output and working on that:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $msg0;\nmy $msg1;\n\nlocal $/ = undef;\nmy $data = &lt;DATA&gt;;\n\nif ($data =~ m/Listener LISTENER is running/) {\n    $msg0 = \"is running\";\n    $msg1 = 1;\n}\nelsif ($data =~ m/Listener LISTENER is enabled/) {\n    $msg0 = \"is enabled\";\n    $msg1 = 2;\n}\nelse {\n    my $msg0 = \"not running\";\n    my $msg1 = 0;\n}\n\nprint \"Statistic.Name1:$msg1\\n\";\nprint \"Message.Name1:$msg0\\n\";\n\n__DATA__\nsrvctl status listener\nListener LISTENER is enabled\nListener LISTENER is running on node(s): XYZ\n</code></pre>\n\n<p>In both cases you need to decide which line (\"LISTENER is enabled\" or \"LISTENER is running\") is more important to you. When reading line by line, add a check that you don't overwrite your variables with the less important message. When slurping, adjust the order of the checks (<code>if</code>s) so that the most important one goes first.</p>\n"}], "owner": {"reputation": 7, "user_id": 5024894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58246d5690016038eb48ddc27f70bd66?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/5024894/arnab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56385291, "answer_count": 1, "score": -1, "last_activity_date": 1559322456, "creation_date": 1559246277, "last_edit_date": 1559322456, "question_id": 56384849, "link": "https://stackoverflow.com/questions/56384849/querying-the-2nd-line-from-a-command-output-in-perl", "title": "Querying the 2nd Line from a command output in Perl", "body": "<p>I need to query on the 2nd line which I am seeing in the output. I need to check if the command returns on \"Listener LISTENER is running on\" and provide the desired output. My code is able to read the first line and not the second line which I need to verify. Please advise. </p>\n\n<pre><code>srvctl status listener\nListener LISTENER is enabled\nListener LISTENER is running on node(s): XYZ\n</code></pre>\n\n<p>I tried updating the code to read the second line and did not work.</p>\n\n<pre><code>my $cmd=\"srvctl status listener\";\nmy $listenerstatus0;\nmy $msg0;\nmy $msg1;\nopen(Row1Stat,\"$cmd |\") || die (\"Could not read the pipe\\n\");\n$listenerstatus0 = &lt;Row1Stat&gt;;\nclose(Row1Stat);\nwhile (&lt;&gt;){\nif( $listenerstatus0 =~ m/Listener LISTENER is running/)\n{\n$msg0=\"LISTENER is running\";\n$msg1=1\n}\nelsif ($listenerstatus0 =~ m/Listener LISTENER is not running/) {\n$msg0 = \"LISTENER is not running\";\n$msg1 = 0;\n}\nelse {\n$msg0 = \"Unable to Query LISTENER Status\";\n$msg1 = 0;\n}\n}\n\nprint \"\\nStatistic.Name1:$msg1\";\nprint \"\\nMessage.Name1:$msg0\";\n</code></pre>\n\n<p>I should be able to read Listener LISTENER is running on node(s): XYZ</p>\n"}, {"tags": ["regex", "perl", "match"], "comments": [{"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 1, "creation_date": 1559242275, "post_id": 56383260, "comment_id": 99368174, "body": "Does this do what you want? <code>&#47;.CCAGGT|C.CAGGT|CC.AGGT|CCC.GGT|CCCA.GT|CCCAG.T|CCCAGG.&#47;</code> It&#39;s hideous, but if it works, it&#39;s a start."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559246815, "post_id": 56383260, "comment_id": 99370023, "body": "Tip: There&#39;s no point in searching for <code>CCCAGGT</code> then for <code>.CCAGGT</code> if you don&#39;t care which one matched"}, {"owner": {"reputation": 23, "user_id": 4200373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QcVIeRLGa_Y/AAAAAAAAAAI/AAAAAAAADMw/Ur0RK8gryiA/photo.jpg?sz=128", "display_name": "Jos&#233; M&#170; G. Perez-Silva", "link": "https://stackoverflow.com/users/4200373/jos%c3%a9-m%c2%aa-g-perez-silva"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559309068, "post_id": 56383260, "comment_id": 99390379, "body": "@ikegami I&#39;m still trying to decide whether to count all of them nonetheless, or count all of them but indicating how many of them had an &quot;accepted&quot; mismatch. Thanks tho!"}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1559373824, "post_id": 56383260, "comment_id": 99407265, "body": "Are you also interested in capturing small insertions/deletions or only substitutions?"}, {"owner": {"reputation": 23, "user_id": 4200373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QcVIeRLGa_Y/AAAAAAAAAAI/AAAAAAAADMw/Ur0RK8gryiA/photo.jpg?sz=128", "display_name": "Jos&#233; M&#170; G. Perez-Silva", "link": "https://stackoverflow.com/users/4200373/jos%c3%a9-m%c2%aa-g-perez-silva"}, "reply_to_user": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1559663715, "post_id": 56383260, "comment_id": 99488277, "body": "@AndreaT. For the moment indels are managed differently so is out of the equation in this problem. I have solved the problem using ikegami&#39;s (and sort of Diab Jerius&#39;) answers."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559246401, "post_id": 56384088, "comment_id": 99369857, "body": "<a href=\"https://pastebin.com/XM6pwdYD\" rel=\"nofollow noreferrer\">Doesn&#39;t work for me</a>. There&#39;s also the issue that even if it did work, it wouldn&#39;t be efficient at search for multiple sequences in multiple strings as the OP wants"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559249025, "post_id": 56384088, "comment_id": 99370836, "body": "@ikegami The object interface doesn&#39;t search strings. Hence the requirement of first finding the substrings to match against. How or whether that&#39;s doable would require more information (at least for me)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559250684, "post_id": 56384088, "comment_id": 99371435, "body": "Well, I suppose you could find every substring of the right length L. There would be N+L-1 of them. This would probably make the solution O(N^2) instead of O(N), so it&#39;s a poor choice for the problem at hand"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 4, "last_activity_date": 1559242508, "creation_date": 1559242508, "answer_id": 56384088, "question_id": 56383260, "link": "https://stackoverflow.com/questions/56383260/is-there-a-way-to-allow-a-perl-regex-to-ignore-1-character-at-a-time-when-tryi/56384088#56384088", "title": "Is there a way to &quot;allow&quot; a perl RegEx to ignore 1 character at a time when trying to match?", "body": "<p>It may be possible with regex but it will be overly complicated, regex is not designed for fuzzy matching. You may consider <a href=\"https://metacpan.org/pod/Text::Fuzzy\" rel=\"nofollow noreferrer\">Text::Fuzzy</a>. The normal interface would require first somehow turning your lines into possible sequences to consider.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::Fuzzy;\nmy $fuzzy = Text::Fuzzy-&gt;new('CCCAGGT', max =&gt; 1);\nmy @matches = $fuzzy-&gt;nearestv(\\@possible);\n</code></pre>\n\n<p>The fuzzy_index function may also be useful for searching a larger text string similar to regex, but only returns the closest match within the string.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1559246767, "last_edit_date": 1559246767, "creation_date": 1559244479, "answer_id": 56384506, "question_id": 56383260, "link": "https://stackoverflow.com/questions/56383260/is-there-a-way-to-allow-a-perl-regex-to-ignore-1-character-at-a-time-when-tryi/56384506#56384506", "title": "Is there a way to &quot;allow&quot; a perl RegEx to ignore 1 character at a time when trying to match?", "body": "<p>To simply check if there's a match (as opposed to finding the nearest match), we could build the patterns (<code>.CCAGGT</code>, <code>C.CAGGT</code>, etc) dynamically.</p>\n\n<pre><code>my $target_seq = \"CCCAGGT\";\n\nmy @parts = map quotemeta, split //, $target_seq;\nmy $fuzzy_pat =\n   join \"|\",\n      map { join(\"\", @parts[0..$_-1], \".\", @parts[$_+1..$#parts]) }\n         0..$#parts;\n\nmy $fuzzy_re = qr/$fuzzy_pat/;\n</code></pre>\n\n<p>This can be extended to check for multiple sequences at once, as long as one doesn't care which sequence is found.</p>\n\n<pre><code>use List::Util qw( uniq );\n\nmy @target_seqs = qw( CCCAGGT CCCAGTT CCCAGAT CCCAGCT );\n\nmy @fuzzy_pats;\nfor my $pat (@target_seqs) {\n   my @parts = map quotemeta, split //, $pat;\n   for my $i (0..$#parts) {\n      push @fuzzy_pats, join(\"\", @parts[0..$i-1], \".\", @parts[$i+1..$#parts]);\n   }\n}\n\nmy $fuzzy_pat = join \"|\", sort uniq @fuzzy_pats;\nmy $fuzzy_re = qr/$fuzzy_pat/;\n\n$mtg += $elements[1] if $elements[0] =~ $fuzzy_re;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4200373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QcVIeRLGa_Y/AAAAAAAAAAI/AAAAAAAADMw/Ur0RK8gryiA/photo.jpg?sz=128", "display_name": "Jos&#233; M&#170; G. Perez-Silva", "link": "https://stackoverflow.com/users/4200373/jos%c3%a9-m%c2%aa-g-perez-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 56384506, "answer_count": 2, "score": 2, "last_activity_date": 1559246767, "creation_date": 1559238725, "question_id": 56383260, "link": "https://stackoverflow.com/questions/56383260/is-there-a-way-to-allow-a-perl-regex-to-ignore-1-character-at-a-time-when-tryi", "title": "Is there a way to &quot;allow&quot; a perl RegEx to ignore 1 character at a time when trying to match?", "body": "<p>Basically, I have several files, each one with several lines of text, and I'm interested in finding a specific sequence of 7 letters and count how many time they appear per file using some basic regular expressions on Perl(v5.24.1). </p>\n\n<p>So far no problem, but the \"tricky\" part is that if one of those seven letters doesn't match my pattern, I would like to count it as well (as long as it's just one).</p>\n\n<p>Patterns I'm looking for: \n<code>'CCCAGGT', 'CCCAGTT', 'CCCAGCT', and 'CCCAGAT'.</code></p>\n\n<p>Examples of non-matching text that I would like to count:</p>\n\n<pre><code>line1 - AGGCTCAGGAG'CCCATGT'GGGCGGACCCAT --&gt; Count as 'CCCAGGT'\nline2 - CGGCTCAGGAG'CCCGGGT'GGGCGGTCCCAT --&gt; Count as 'CCCAGGT'\n</code></pre>\n\n<p>I'm including a piece code (at the bottom) to further explain what I'm searching and what I've thought so far, but it has to be a better way of doing this.</p>\n\n<p>So, do you know if it's possible to \"tell\" Perl that I can tolerate 1 mismatch in the sequence when using the <code>=~ m/</code> operator? OR another function to use?</p>\n\n<p>Thanks a lot for your help!</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>  if ($elements[0] =~ m/CCCAGGT/){\n    $mutg = $mutg + $elements[1];\n  }\n  elsif ($elements[0] =~ m/CCCAGTT/){\n    $mutt = $mutt + $elements[1];\n  }\n  elsif ($elements[0] =~ m/CCCAGAT/){\n    $muta = $muta + $elements[1];\n  }\n  elsif ($elements[0] =~ m/CCCAGCT/){\n    $mutc = $mutc + $elements[1];\n  }\n  else {\n    if ($elements[0] =~ m/.CCAGGT/){\n      $mutg = $mutg + $elements[1];\n    }\n    elsif ($elements[0] =~ m/.CCAGTT/){\n    $mutt = $mutt + $elements[1];\n    }\n    elsif ($elements[0] =~ m/.CCAGAT/){\n      $muta = $muta + $elements[1];\n    }\n    elsif ($elements[0] =~ m/.CCAGCT/){\n      $mutc = $mutc + $elements[1];\n    }\n    else {\n      [[AGAIN BUT WITH THE \".\" IN THE SECOND POSITION AND SO ON]]\n    }                         \n  }\n</code></pre>\n"}, {"tags": ["perl", "knn"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559234419, "post_id": 56381865, "comment_id": 99364908, "body": "Can you please <a href=\"https://stackoverflow.com/posts/56381865/edit\">edit</a> your question and provide some actual example data?"}, {"owner": {"reputation": 11, "user_id": 3403820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e8a577988f854405d36b47013691cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/3403820/michael"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559235738, "post_id": 56381865, "comment_id": 99365492, "body": "Added some code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559274854, "post_id": 56381865, "comment_id": 99376451, "body": "That wasn&#39;t the request. Sample input, and the corresponding output, please. And you gotta tag us (e.g. <code>@ikegami</code>) for us to see the reply."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1559283720, "post_id": 56381865, "comment_id": 99378475, "body": "For sorting the data that has already been processed, it is not relevant how it was calculated. The <code>$countvar</code> on the other hand is. In your second code block you show <code>$i,$j+1</code> as one of the keys in the data structure, but <code>$countvar</code> in the actual code is a simple iterator. A structure like <code>$foo-&gt;[$i]-&gt;[$j]</code> makes a lot more sense as an intermediate step, as it resembles the actual matrix you are building. If you want to condense it directly, you probably want to pick a key that contains both values, like <code>$i_$j</code>."}], "owner": {"reputation": 11, "user_id": 3403820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e8a577988f854405d36b47013691cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/3403820/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1559235705, "creation_date": 1559232610, "last_edit_date": 1559235705, "question_id": 56381865, "link": "https://stackoverflow.com/questions/56381865/sorting-elements-in-perl-structure-n-x-n", "title": "Sorting elements in perl structure n x n", "body": "<p>I need to find the next neighbor using the euklid-distance-algorithm.</p>\n\n<p>Given are two hashes with each 100 elements in this format:</p>\n\n<pre><code>$hash{$i}{price}\n$hash{$i}{height}\n</code></pre>\n\n<p>I need to compare each hash elements with each other so that my result is a 100 x 100 matrix. </p>\n\n<p>After that my matrix shoul be sorted after the following rules:</p>\n\n<pre><code>$hash{$i,$j}  {lowest_euklid_distance}\n$hash{$i,$j+1}{lowest_euklid_distance + 1}\n$hash{$i,$j+2}{lowest_euklid_distance + 2}\n.\n.\n$hash{$i+1,$j}{lowest_euklid_distance}\n$hash{$i+1,$j}{lowest_euklid_distance + 2}\n.\n.\n$hash{$i+n,$j+n}{lowest_euklid_distance+n}\n</code></pre>\n\n<p>My problem is to sort these elements properly. <br>\nAny adivices?</p>\n\n<p>Thanks in advance.</p>\n\n<p>/edit: adding more information:</p>\n\n<p>I create the distance with the following subroutine:</p>\n\n<pre><code>sub euklid_distance{\n    #w1 = price_testdata\n    #w2 = height_testdata\n    #h1 = price_origindata\n    #h2 = height_origindata\n\n    my $w1 = trim($_[0]);\n    my $w2 = trim($_[1]);\n    my $h1 = trim($_[2]);\n    my $h2 = trim($_[3]);\n\n    my $result = (((($w2-$w1)**2)+(($h2-$h1)**2))**(1/2));\n    return $result;     \n    }\n</code></pre>\n\n<p>I fetch the test and the origindata from two seperate lists.</p>\n\n<p>The resulthash with the 100x100 matrix is created by the following code:</p>\n\n<pre><code> my %distancehash;\n my $countvar=0;\n\nfor (my $j=0;$j&lt;100;$j++){\n    for (my $i=0;$i&lt;100;$i++){\n      $distancehash{$countvar}{distance}      = euklid_distance( $origindata{$i}{price}, $testdata{$j}{price}, $origindata{$i}{height}, $testdata{$j}{height} );\n      $distancehash{$countvar}{originPrice}   = $origindata{$i}{price};\n      $distancehash{$countvar}{originHeight}  = $origindata{$i}{height};\n      $distancehash{$countvar}{testPrice}     = $testdata{$j}{price};\n      $distancehash{$countvar}{testHeight}    = $testdata{$j}{height};\n      $countvar++;\n     }\n    }\n</code></pre>\n\n<p>where $j goes over the testdata and $i over the origindata. </p>\n\n<p>My goal is to have a new hash which is sorted by the lowest distance from the current $j ascending to the highest. </p>\n"}, {"tags": ["perl", "unix-timestamp"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1559232290, "post_id": 56381681, "comment_id": 99363888, "body": "Have you tried solving this yourself? Why do you not want to use any modules? What timezone is the time in that you are getting? The format you want is non-standard, but only differs from the format you seem to be getting as input by a bunch of dashes and colons."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1559244794, "post_id": 56381681, "comment_id": 99369228, "body": "<code>20190101235010</code> is not &quot;unix format&quot;. There&#39;s no such thing, and people will probably think you mean unix epoch time (the number of seconds since the start of Jan 1st, 1970, UTC)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559244894, "post_id": 56381681, "comment_id": 99369274, "body": "As far as I can tell, despite saying it twice, you&#39;re not trying to convert to UTC time or any other time zone. Your simply want to change the format of the date."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1559245625, "post_id": 56381977, "comment_id": 99369582, "body": "Unless the OP has to deal with date-times in the year 641,768 with second accuracy, <code>20190101235010</code> is not a unix epoch time."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559248895, "post_id": 56381977, "comment_id": 99370782, "body": "@ikegami I hope not! Though it could be a millisecond epoch from Java/JS, that seems unlikely. I was just providing for a couple of possible things the OP meant."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1559233173, "creation_date": 1559233173, "answer_id": 56381977, "question_id": 56381681, "link": "https://stackoverflow.com/questions/56381681/convert-from-one-date-time-format-to-a-different-date-time-format/56381977#56381977", "title": "Convert from one date-time format to a different date-time format", "body": "<p>The core module <a href=\"https://perldoc.pl/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> does this easily.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\n\n# if input is the format you specified:\nmy $input = '20190101235010';\nmy $time = Time::Piece-&gt;strptime($input, '%Y%m%d%H%M%S');\nprint $time-&gt;strftime('%Y-%m-%d-%H:%M:%S'), \"\\n\";\n\n# if input is a unix epoch timestamp:\nmy $input = time;\nmy $time = gmtime $input;\nprint $time-&gt;strftime('%Y-%m-%d-%H:%M:%S'), \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1559245130, "creation_date": 1559245130, "answer_id": 56384639, "question_id": 56381681, "link": "https://stackoverflow.com/questions/56381681/convert-from-one-date-time-format-to-a-different-date-time-format/56384639#56384639", "title": "Convert from one date-time format to a different date-time format", "body": "<p>Here are a few alternatives that will do quite nicely:</p>\n\n<pre><code>my $output =\n    sprintf \"%s-%s-%s-%s:%s:%s\",\n       unpack 'a4 a2 a2 a2 a2 a2',\n          $input;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my $output = $input =~ s/^(....)(..)(..)(..)(..)(..)\\z/$1-$2-$3-$4:$5:$6/sr;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my $output = $input =~ /^(....)(..)(..)(..)(..)(..)\\z/s\n  ? \"$1-$2-$3-$4:$5:$6\"\n  : die(\"Bad input\\n\");\n</code></pre>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 56381977, "answer_count": 2, "score": 0, "last_activity_date": 1559245130, "creation_date": 1559231904, "last_edit_date": 1559245043, "question_id": 56381681, "link": "https://stackoverflow.com/questions/56381681/convert-from-one-date-time-format-to-a-different-date-time-format", "title": "Convert from one date-time format to a different date-time format", "body": "<p>I want to convert a time which is taken as an argument to the Perl script into a different format.</p>\n\n<p>The input is of the form <code>yyyyMMddHHmmss</code> (e.g. <code>20190101235010</code>).</p>\n\n<p>The output should be of of the form <code>yyyy-MM-dd-HH:mm:ss</code> (e.g. <code>2019-01-01-23:50:10</code>).</p>\n\n<p>It would be better if solution doesn't use Perl Modules (except POSIX).</p>\n"}, {"tags": ["multithreading", "perl", "timeout", "posix", "child-process"], "comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559229831, "post_id": 56381108, "comment_id": 99362531, "body": "@zdim - you are welcome to check this question as well. Thanks in advance."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559229850, "post_id": 56381108, "comment_id": 99362538, "body": "@TFBW - you are welcome to check this question as well. Thanks in advance."}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559236032, "post_id": 56381606, "comment_id": 99365615, "body": "Thanks @TFBW. So do i write ualarm(3) instead of alarm(3) ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559252506, "post_id": 56381606, "comment_id": 99371986, "body": "Their alarm is set at 3 (three), the integer, and this won&#39;t help at all.  But their <code>sleep</code> <i>is</i> fractional."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559252591, "post_id": 56381606, "comment_id": 99372001, "body": "@User9102d82  Once you add the <code>use Time::HiRes qw(alarm sleep);</code> the program will use module&#39;s routines, which take fractional seconds.  So there&#39;s nothing else to do, just add that use startement --  and you need it for <code>sleep</code>, not for <code>alarm</code>.  (But once you are at it, why not include the alarm as well.)  I don&#39;t know that that will fix it all though."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559267735, "post_id": 56381606, "comment_id": 99375191, "body": "Tasks are not timing out at all. And even if they do timeout, timeout never occurs at the specified value. This seems to be not working. :("}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559269576, "post_id": 56381606, "comment_id": 99375577, "body": "Sorry but tasks are not timing out at all. In fact it is very strange to understand what is going on as sometimes it times out and sometimes it doesn&#39;t."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559280931, "post_id": 56381606, "comment_id": 99377637, "body": "@User9102d82 Alright, thanks for feedback.  I&#39;ll try, with simplified code (there&#39;s too much going on here, even as it&#39;s nicely organized).  You do mix alarm and sleep (it&#39;s a no-no) but I can&#39;t tell whether that&#39;s it.  One also normally doesn&#39;t do a timer quite like that but again I can&#39;t tell whether that&#39;s a problem. (Your code runs for me, and it doesn&#39;t time out.)"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559282463, "post_id": 56381606, "comment_id": 99378097, "body": "@zdim: I have been doing some reading and there is a lot of chatter coming up about perl threads and signals are a bad idea. I am now trying to hack my way through it but still to no avail. Could you please tell me more about mixing alarm with sleep ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559283207, "post_id": 56381606, "comment_id": 99378305, "body": "@User9102d82 (1) Can&#39;t use signals on threads (a <i>process</i> is signalled), so use threads&#39; way to signal them around (2) sleep is implemented using alarm.  mixing them can mess things up //  The alarm is working in my simple fork+threads test, so far the issue being how to quit threads cleanly..."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559283307, "post_id": 56381606, "comment_id": 99378340, "body": "Okay. I am using &#39;threads&#39; instead of &#39;Threads&#39; which is seen in the program. Moreover, I guess we are outta luck as perldoc states that: Correspondingly, sending a signal to a thread does not disrupt the operation the thread is currently working on: The signal will be acted upon after the current operation @zdim:has completed. For instance, if the thread is stuck on an I/O call, sending it a signal will not cause the I/O call to be interrupted such that the signal is acted up immediately. It is not able to immediately do the timeout and hence the timeout is happening at different times."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559283477, "post_id": 56381606, "comment_id": 99378392, "body": "@User9102d82 (1) The threads&#39; way to singal around, which you are using, is fine -- it is meant for that. I don&#39;t think that singlas are the problem."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559283742, "post_id": 56381606, "comment_id": 99378482, "body": "@zdim: But what about the statement that .. &quot;sending the signal doesn&#39;t disrupt the operation, signal will be acted upon after the operation has completed..&quot;, This is making me feel that if I want to timeout a certain operation - it won&#39;t happen as the signal will be acted upon later only. So how is that useful to us as users who want to perform timeout immediately which happens in C and/or C++. I am now checking Inline::C to see if there could be another work around or something, or may be develop a hacky way to keep track of each thread&#39;s start time and send cancel when timeout reached."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559284120, "post_id": 56381606, "comment_id": 99378609, "body": "@User9102d82  That refers to &quot;safe&quot; (deferred) singals, the way they have been done in Perl for many years.  It normally means milliseconds, so that some I/O finishes; it won&#39;t lock up your program.  As for threads, again, you&#39;re fine with what you are doing; see <a href=\"https://perldoc.perl.org/threads.html#THREAD-SIGNALLING\" rel=\"nofollow noreferrer\">&quot;Thread Signalling&quot; in threads</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559292217, "post_id": 56381606, "comment_id": 99382142, "body": "@User9102d82  I&#39;m having problems with getting my (more realistic) alarm+threads tests to work correctly; will be back at it tomorrow night (it&#39;s late at night here)."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559293205, "post_id": 56381606, "comment_id": 99382602, "body": "@zdim: no problem. Just a tip: instead of sleep (1) - a busy while (1) {;} is a better choice and I see timeouts happening properly. But still I am looking for issues. Will update again. Take care."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1559374215, "post_id": 56381606, "comment_id": 99407336, "body": "@User9102d82 &quot;<i>sending the signal doesn&#39;t disrupt the operation</i>&quot; -- I mis-identified the doc page from which this is (and sent you a link to it! sorry) ... it seems that they&#39;re serious with it in this case ..."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 2, "last_activity_date": 1559231627, "creation_date": 1559231627, "answer_id": 56381606, "question_id": 56381108, "link": "https://stackoverflow.com/questions/56381108/threads-running-inside-a-child-process-are-not-timing-out-as-per-the-set-alarm-t/56381606#56381606", "title": "Threads running inside a child process are not timing out as per the set alarm time", "body": "<p>The timing of alarm() is not guaranteed to have sub-second accuracy. The standard Time::HiRes module offers ualarm() and a re-implementation of alarm() in terms of ualarm() which may be closer to what you want. Solving your problem may be as simple as adding</p>\n\n<pre><code>use Time::HiRes qw(alarm);\n</code></pre>\n\n<p>to the top of your program.</p>\n"}], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1559231627, "creation_date": 1559229771, "question_id": 56381108, "link": "https://stackoverflow.com/questions/56381108/threads-running-inside-a-child-process-are-not-timing-out-as-per-the-set-alarm-t", "title": "Threads running inside a child process are not timing out as per the set alarm time", "body": "<p>This question is an extension to my previous <a href=\"https://stackoverflow.com/questions/56327077/parent-doesnt-wait-for-child-processes-to-finish-despite-reaping/\">question</a>.</p>\n\n<p>The only addition here is that now I would like the threads to timeout if the operation is not complete within the set timeout duration.</p>\n\n<p>So after going through the perldoc and certain examples, I have drafted a working version and it works - but there is something off.</p>\n\n<p>The timeout doesn't exactly happen in the set duration but sometimes takes double  the amount of time.</p>\n\n<p>I am not able to investigate this and I need you help on the same on how to investigate this further.</p>\n\n<p>In this program, I have set the timeout value to 3 seconds via alarm function and have installed signal handler in the thread function.</p>\n\n<p>My observations during the multiple runs are as follows:</p>\n\n<ol>\n<li>timeout never happens below the set value.</li>\n<li>timeout happens always above the set value and its value is never exactly the set value.</li>\n</ol>\n\n<p>Please find the program output &amp; the program itself for your review. Your comments and feedback are welcome.</p>\n\n<p><strong>Program output:</strong></p>\n\n<pre><code>(20:51:59) $:little-stuff&gt;  perl 10-20190530-batch-processing-using-threads-with-busy-pool-detection-2-with-threads-timeout.pl 12\n29872: STARTING TASKS IN BATCHES\n29872: MAIN: engine (e1) is RUNNING batch #1 tasks: (1 2)\n29872: MAIN: engine (e2) is RUNNING batch #2 tasks: (3 4 5)\n29872: MAIN: engine (e3) is RUNNING batch #3 tasks: (6 7)\n29878: TASK_RUNNER: engine (e3) finished batch #3 task #7 in (1.27) seconds\n29878: TASK_RUNNER: engine (e3) finished batch #3 task #6 in (2.12) seconds\n29876: TASK_RUNNER: engine (e1) finished batch #1 task #1 in (2.97) seconds\n29878: TASK_ORCHESTRATOR: engine (e3) finished batch #3 tasks in (2.00) seconds.\n29872: REAPER: TASK_ORCHESTRATOR pid (29878) has finished with status (0).\n29877: TASK_RUNNER: engine (e2) finished batch #2 task #4 in (3.65) seconds\n29877: TASK_RUNNER: engine (e2) finished batch #2 task #3 in (4.62) seconds\n29872: MAIN: engine (e3) is RUNNING batch #4 tasks: (8 9)\n29876: TASK_RUNNER: engine (e1) finished batch #1 task #2 in (6.43) seconds\n29876: TASK_ORCHESTRATOR: engine (e1) finished batch #1 tasks in (6.00) seconds.\n29872: REAPER: TASK_ORCHESTRATOR pid (29876) has finished with status (0).\n29872: MAIN: engine (e1) is RUNNING batch #5 tasks: (10 11)\n29877: TASK_RUNNER: engine (e2), batch #2 task #5 has TIMED OUT in (6.00) seconds !!\n29877: TASK_ORCHESTRATOR: engine (e2) finished batch #2 tasks in (6.00) seconds.\n29872: REAPER: TASK_ORCHESTRATOR pid (29877) has finished with status (0).\n29872: MAIN: engine (e2) is RUNNING batch #6 tasks: (12)\n30000: TASK_RUNNER: engine (e3) finished batch #4 task #8 in (5.28) seconds\n30059: TASK_RUNNER: engine (e1) finished batch #5 task #10 in (3.02) seconds\n30059: TASK_RUNNER: engine (e1) finished batch #5 task #11 in (3.58) seconds\n30059: TASK_ORCHESTRATOR: engine (e1) finished batch #5 tasks in (3.00) seconds.\n29872: REAPER: TASK_ORCHESTRATOR pid (30059) has finished with status (0).\n30000: TASK_RUNNER: engine (e3), batch #4 task #9 has TIMED OUT in (6.00) seconds !!\n30000: TASK_ORCHESTRATOR: engine (e3) finished batch #4 tasks in (6.00) seconds.\n29872: REAPER: TASK_ORCHESTRATOR pid (30000) has finished with status (0).\n30129: TASK_RUNNER: engine (e2) finished batch #6 task #12 in (3.95) seconds\n30129: TASK_ORCHESTRATOR: engine (e2) finished batch #6 tasks in (3.00) seconds.\n29872: REAPER: TASK_ORCHESTRATOR pid (30129) has finished with status (0).\n29872: ALL ORCHESTRATORS HAVE FINISHED\n29872: FINISHED TASKS IN BATCHES\n</code></pre>\n\n<p><strong>Program:</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse POSIX ':sys_wait_h';\nuse Thread qw(async);\n\nSTDOUT-&gt;autoflush(1);\n\nmy $timeout = 3;\nmy @total_tasks = (1 .. shift || 10);\nmy $sleep_time = 6; \nmy @engines = (qw/e1 e2 e3/);\nmy $sizes = { e1 =&gt; 2, e2 =&gt; 3, e3 =&gt; 2, };\n\nmy $proc_hash;\nmy $global_string = \"engine\";\n\n### \n# source: https://duyanghao.github.io/ways_avoid_zombie_process/\n#\n  sub REAPER {\n    local ($!, $?);\n    while ( (my $reaped_pid = waitpid(-1, WNOHANG)) &gt; 0 ) {\n      if ( WIFEXITED($?) )\n      {\n        my $ret_code = WEXITSTATUS($?);\n        print \"$$: REAPER: TASK_ORCHESTRATOR pid ($reaped_pid) has finished with status ($ret_code).\\n\";\n        my $engine_name = $proc_hash-&gt;{$reaped_pid};\n        delete ($proc_hash-&gt;{$reaped_pid});\n        delete ($proc_hash-&gt;{$engine_name});\n      }\n    }\n  }\n#\n###\n\n$SIG{CHLD} = \\&amp;REAPER;\n\nsub random_sleep_time { return sprintf (\"%.2f\",(rand ($sleep_time) + 1)) }\n\nsub task_runner {\n  my @args = @_;\n\n  STDOUT-&gt;autoflush(1);\n  my ($batch_engine, $task) = ($args[0]-&gt;[0],$args[0]-&gt;[1]);\n  my ($batch, $engine) = split (/_/,$batch_engine);\n\n  my $start_time = time;\n  #my $end_time = undef;\n  #my $tot_time = undef;\n\n  $SIG{ALRM} = sub {\n    my $end_time = time;\n    my $tot_time = sprintf (\"%.2f\",($end_time - $start_time));\n    print \"$$: TASK_RUNNER: $global_string ($engine), batch #$batch\".\n          \" task #$task has TIMED OUT in ($tot_time) seconds !!\\n\";\n    threads-&gt;exit(0);\n  };\n\n  my $task_time = random_sleep_time();\n  sleep ($task_time);\n  #sleep (random_sleep_time());\n  #$end_time = time;\n  #$tot_time = sprintf (\"%.2f\",($end_time - $start_time));\n  #print \"$$: TASK_RUNNER: $global_string ($engine) finished batch #$batch task #$task in ($tot_time) seconds\\n\";\n  print \"$$: TASK_RUNNER: $global_string ($engine) finished batch #$batch task #$task in ($task_time) seconds\\n\";\n  threads-&gt;exit(0);\n};\n\nsub task_orchestrator {\n  my ($batch_engine, @tasks) = @_;\n  my ($batch, $engine) = split (/_/,$batch_engine);\n  my $task_orch_pid = fork();\n  die \"Failed to fork task_orchestrator\\n\" if not defined $task_orch_pid;\n\n  if ($task_orch_pid != 0) {\n    $proc_hash-&gt;{$engine} = $task_orch_pid;\n    $proc_hash-&gt;{$task_orch_pid} = $engine;\n  }\n\n  if ($task_orch_pid == 0) {\n    my @tids;\n    alarm ($timeout);\n    STDOUT-&gt;autoflush(1);\n    my $start_time = time;\n    for (my $i=1 ; $i &lt;= $#tasks ; $i++) { push (@tids,$i) }\n    foreach my $task_number (0 .. $#tasks) {\n      $tids [$task_number] = threads-&gt;create (\n        \\&amp;task_runner,[$batch_engine,$tasks [$task_number]]\n      );\n    }\n\n    $SIG{ALRM} = sub { \n      foreach my $t (@tids) {\n        if ($t-&gt;is_running()) { $t-&gt;kill('ALRM') } \n      }\n    };\n\n    foreach my $tid (@tids) {$tid-&gt;join()}\n    my $end_time = time;\n    my $tot_time = sprintf (\"%.2f\",($end_time - $start_time));\n    print \"$$: TASK_ORCHESTRATOR: engine ($engine) finished batch #$batch tasks in ($tot_time) seconds.\\n\";\n    exit (0);\n  }\n}\n\nmy $batch=1;\nprint \"$$: STARTING TASKS IN BATCHES\\n\";\nwhile (@total_tasks)\n{\n  foreach my $engine (@engines)\n  {\n    if (exists $proc_hash-&gt;{$engine})\n    {\n      sleep (1);\n      next;\n    }\n    else\n    {\n      my @engine_tasks;\n      my $engine_max_tasks = $sizes-&gt;{$engine};\n      while ($engine_max_tasks-- != 0)\n      {\n        my $task = shift @total_tasks;\n        push (@engine_tasks,$task) if $task;\n      }\n      if (@engine_tasks)\n      {\n        my $batch_engine = $batch.'_'.$engine;\n        print \"$$: MAIN: engine ($engine) is RUNNING batch #$batch tasks: (@engine_tasks)\\n\";\n        task_orchestrator (\"$batch_engine\",@engine_tasks);\n        $batch++;\n      }\n    }\n  }\n}\n\n# All Work fine\n#sleep (.2) while ((waitpid(-1, WNOHANG)) &gt;= 0);\n#sleep (.2) while ((waitpid(-1, WNOHANG)) != -1);\nsleep (.2) while ((waitpid(-1, WNOHANG)) &gt; -1);\n# All Work fine\n\nprint \"$$: ALL ORCHESTRATORS HAVE FINISHED\\n\";\nprint \"$$: FINISHED TASKS IN BATCHES\\n\";\n__END__\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1559217403, "post_id": 56377747, "comment_id": 99356052, "body": "Does assigning to %ENV ie <code>$ENV{AUTO_EXCEL_EXPORT} = &#39;TRUE&#39;</code> solve the problem?"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1559217477, "post_id": 56377747, "comment_id": 99356097, "body": "<a href=\"https://stackoverflow.com/questions/573817/where-are-environment-variables-stored-in-registry\">Here</a> is a question, that discusses where environment variables are (permanently) stored in the registry. You could add it there."}, {"owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "edited": false, "score": 0, "creation_date": 1559217797, "post_id": 56377747, "comment_id": 99356241, "body": "%ENV ie $ENV{AUTO_EXCEL_EXPORT} = &#39;TRUE&#39; not working , it is not setting in my pc  it is setting as locally for perl consolse alone.  not even for this command echo %AUTO_EXCEL_EXPORT% it shows %AUTO_EXCEL_EXPORT%"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1559221559, "post_id": 56377747, "comment_id": 99357985, "body": "The environment is private to each process. You can spawn a new command window from inside the perl script, and it will default to a copy of the parent&#39;s process (which has the modified environment)."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1559221639, "post_id": 56377747, "comment_id": 99358032, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46246163/how-can-an-executable-set-an-environment-variable-in-the-parent-cmd-or-batch-con\">How can an executable set an environment variable in the parent CMD or batch context?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "edited": false, "score": 0, "creation_date": 1559731960, "post_id": 56378955, "comment_id": 99509659, "body": "Any idea to get ENV change in same session ??"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "edited": false, "score": 0, "creation_date": 1559743452, "post_id": 56378955, "comment_id": 99515785, "body": "@AmarendhiranAmar For all intents and purposes, you can&#39;t unfortunately."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1559222002, "last_edit_date": 1559222002, "creation_date": 1559221597, "answer_id": 56378955, "question_id": 56377747, "link": "https://stackoverflow.com/questions/56377747/using-win32env-perl-module-environment-variable-not-setting-permanently-in-wi/56378955#56378955", "title": "Using Win32::Env perl module, environment variable not setting permanently in windows", "body": "<p>When assigning/changing environment variables in Windows, the Explorer subsystem needs to be notified that the changes occurred before newly opened windows/applications see the changes. If this doesn't happen, then a reboot is necessary before other processes will see the changes.</p>\n\n<p>As you can see in the <a href=\"https://metacpan.org/pod/Win32::Env#SYNOPSIS\" rel=\"nofollow noreferrer\">SYNOPSIS</a> of <a href=\"https://metacpan.org/pod/Win32::Env\" rel=\"nofollow noreferrer\">Win32::Env</a>, they've got a call to <a href=\"https://metacpan.org/pod/Win32::Env#BroadcastEnv()\" rel=\"nofollow noreferrer\">BroadcastEnv()</a> which performs said notification task.</p>\n\n<p>After reviewing the module's code, the author is setting the variables within the registry, so that call should correct the issue. Note though, that if you're running things from a <code>cmd</code> window while running your script, no matter what, you have to close that window and open a new one for the changes to take effect. All new windows should get the updated environment.</p>\n\n<p>Example:</p>\n\n<pre><code>use Win32::Env;\n\nSetEnv(ENV_USER, 'AUTO_EXCEL_EXPORT', 'TRUE');\n\nBroadcastEnv();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "edited": false, "score": 0, "creation_date": 1559629201, "post_id": 56394336, "comment_id": 99470258, "body": "Please reply for this"}], "tags": [], "owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "is_accepted": false, "score": 0, "last_activity_date": 1559302442, "creation_date": 1559302442, "answer_id": 56394336, "question_id": 56377747, "link": "https://stackoverflow.com/questions/56377747/using-win32env-perl-module-environment-variable-not-setting-permanently-in-wi/56394336#56394336", "title": "Using Win32::Env perl module, environment variable not setting permanently in windows", "body": "<pre><code> use Win32::Env; \nSetEnv(ENV_USER, 'AUTO_EXCEL_EXPORT', 'FALSE');\nBroadcastEnv();\nprint \"\\n\";\nDelEnv(ENV_USER, 'AUTO_EXCEL_EXPORT');\nprint \"\\n\";\nSetEnv(ENV_USER, 'AUTO_EXCEL_EXPORT', 'TRUE');\nBroadcastEnv(); \n</code></pre>\n\n<p>if i run this code its setting only first ENV  ( false ) value, in echo command why??????</p>\n"}], "owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1559302442, "creation_date": 1559216912, "last_edit_date": 1559217626, "question_id": 56377747, "link": "https://stackoverflow.com/questions/56377747/using-win32env-perl-module-environment-variable-not-setting-permanently-in-wi", "title": "Using Win32::Env perl module, environment variable not setting permanently in windows", "body": "<p><code>Win32::Env</code> module is used for environment variable set for temporary basis.\nI need to set permanently, please help</p>\n\n<p>Please help me to set as permanent .\nBecause i want it use in another exe.</p>\n\n<pre><code>use Win32::Env;\n\nSetEnv(ENV_USER, 'AUTO_EXCEL_EXPORT', 'TRUE');\n</code></pre>\n\n<p>By this code, i can set environment variable in windows only as temporary.\nwhen i check with echo command of that variable it is not showing.\nbecause it is set as semi permanent value.</p>\n"}, {"tags": ["perl", "replace"], "comments": [{"owner": {"reputation": 155, "user_id": 3687023, "user_type": "registered", "profile_image": "https://graph.facebook.com/651984975/picture?type=large", "display_name": "Ramneek Singh Kakkar", "link": "https://stackoverflow.com/users/3687023/ramneek-singh-kakkar"}, "edited": false, "score": 0, "creation_date": 1559216701, "post_id": 56377626, "comment_id": 99355718, "body": "I can use %5b in printf but again I will have to use replace function there."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1559274227, "post_id": 56377626, "comment_id": 99376324, "body": "Re &quot;<i><code>my $i=02;</code></i>&quot;, Careful, that leading zero means the following number is octal. This is an unneeded distraction here."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1559219722, "creation_date": 1559219722, "answer_id": 56378440, "question_id": 56377626, "link": "https://stackoverflow.com/questions/56377626/decimal-to-binary-converstion-fixed-length-and-reversing-the-order/56378440#56378440", "title": "Decimal to Binary converstion (fixed length) and reversing the order", "body": "<p>Try this: </p>\n\n<pre><code>say for map { scalar reverse sprintf \"%05b\", $_ } 2..27;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>01000\n11000\n00100\n10100\n01100\n11100\n00010\n10010\n01010\n11010\n00110\n10110\n01110\n11110\n00001\n10001\n01001\n11001\n00101\n10101\n01101\n11101\n00011\n10011\n01011\n11011\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3687023, "user_type": "registered", "profile_image": "https://graph.facebook.com/651984975/picture?type=large", "display_name": "Ramneek Singh Kakkar", "link": "https://stackoverflow.com/users/3687023/ramneek-singh-kakkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559221212, "creation_date": 1559216434, "last_edit_date": 1559221212, "question_id": 56377626, "link": "https://stackoverflow.com/questions/56377626/decimal-to-binary-converstion-fixed-length-and-reversing-the-order", "title": "Decimal to Binary converstion (fixed length) and reversing the order", "body": "<p>I am writing a perl script which will generate string output of 0s and 1s. </p>\n\n<p>I have numbers from 2 to 27. I want to convert them to binary number of fixed length 5 and then reverse the order. </p>\n\n<p>For example, if I convert 2 to binary, it will be <code>00010</code> (fixed length of 5) and then I would like to get it reversed such that output is <code>01000</code>.</p>\n\n<p>I am iterating the numbers through a for loop in perl. </p>\n\n<p>What will be a sweet one liner or 2 to do this. Any bash or perl one liner or 2 that I can use in my perl script.</p>\n\n<p>I am able to do it in 2 lines though but still looking for any one liner in bash.</p>\n\n<pre><code>for (my $i=02; $i &lt;= 27; $i++) {\n    my $j = sprintf (\"%05b\\n\", $i);\n    my $k = reverse $j;\n}\n</code></pre>\n"}, {"tags": ["windows", "perl"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 6875357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ti5ADEkl7S4/AAAAAAAAAAI/AAAAAAAAAlw/0_YsnwvlGio/photo.jpg?sz=128", "display_name": "Christian Soutou", "link": "https://stackoverflow.com/users/6875357/christian-soutou"}, "edited": false, "score": 0, "creation_date": 1559207404, "post_id": 56374411, "comment_id": 99351503, "body": "Thanks but with Active Perl this command returns <code>Can&#39;t find string terminator &quot;&#39;&quot; anywhere before EOF at -e line 1.</code>"}, {"owner": {"reputation": 963, "user_id": 11117210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d5aa68aac6b9fe841dc9221c477dd8?s=128&d=identicon&r=PG&f=1", "display_name": "truth", "link": "https://stackoverflow.com/users/11117210/truth"}, "edited": false, "score": 1, "creation_date": 1559208740, "post_id": 56374411, "comment_id": 99352175, "body": "It might be a long shot, but I remember <code>cmd.exe</code> having problems with single quotes.  Try replacing them with double quotes: <code>perl -MCwd -p -i.bak -e &quot;BEGIN{ $cwd = cwd } s#__SUB__CWD__#$cwd#g&quot; *.sql *\\*.sql *\\*.dat</code>"}, {"owner": {"reputation": 115, "user_id": 6875357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ti5ADEkl7S4/AAAAAAAAAAI/AAAAAAAAAlw/0_YsnwvlGio/photo.jpg?sz=128", "display_name": "Christian Soutou", "link": "https://stackoverflow.com/users/6875357/christian-soutou"}, "edited": false, "score": 0, "creation_date": 1559209530, "post_id": 56374411, "comment_id": 99352544, "body": "Thanks it produces now  <code>Can&#39;t open *.sql: Invalid argument. Can&#39;t open *\\*.sql: Invalid argument. Can&#39;t open *\\*.dat: Invalid argument.</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 115, "user_id": 6875357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ti5ADEkl7S4/AAAAAAAAAAI/AAAAAAAAAlw/0_YsnwvlGio/photo.jpg?sz=128", "display_name": "Christian Soutou", "link": "https://stackoverflow.com/users/6875357/christian-soutou"}, "edited": false, "score": 0, "creation_date": 1559212279, "post_id": 56374411, "comment_id": 99353751, "body": "@ChristianSoutou See also <a href=\"https://stackoverflow.com/q/56354760/2173773\">this question</a>"}, {"owner": {"reputation": 115, "user_id": 6875357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ti5ADEkl7S4/AAAAAAAAAAI/AAAAAAAAAlw/0_YsnwvlGio/photo.jpg?sz=128", "display_name": "Christian Soutou", "link": "https://stackoverflow.com/users/6875357/christian-soutou"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1559212557, "post_id": 56374411, "comment_id": 99353858, "body": "@Hakon Haegland, thanks you&#39;re right,it works with a single file name (as test.sql instead of *.sql). I&#39;m gonna try with Cygwin"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1559216912, "post_id": 56374411, "comment_id": 99355819, "body": "Updated line so it should now expand file globs"}, {"owner": {"reputation": 115, "user_id": 6875357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ti5ADEkl7S4/AAAAAAAAAAI/AAAAAAAAAlw/0_YsnwvlGio/photo.jpg?sz=128", "display_name": "Christian Soutou", "link": "https://stackoverflow.com/users/6875357/christian-soutou"}, "edited": false, "score": 0, "creation_date": 1559217424, "post_id": 56374411, "comment_id": 99356067, "body": "It works with Cygwin, to avoid the string (/cygdrive/C) coming from the path, I adjusted the original command with the path of the Oracle directory.  <code>perl -p -i.bak -e &#39;s#__SUB__CWD__#&#39;C:&#47;oracle_directory...&#39;#g&#39;  *.sql *&#47;*.sql *&#47;*.dat</code>"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 2, "last_activity_date": 1559274478, "last_edit_date": 1559274478, "creation_date": 1559204612, "answer_id": 56374411, "question_id": 56374083, "link": "https://stackoverflow.com/questions/56374083/how-can-i-adapt-a-unix-perl-command-to-windows/56374411#56374411", "title": "How can I adapt a unix Perl command to Windows?", "body": "<p>If you install <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> on your windows box this command should just work from the cmd.com shell</p>\n\n<pre><code>perl -i.bak -MCwd -pe\"BEGIN{ $cwd = cwd; @ARGV = map glob, @ARGV; } s#__SUB__CWD__#$cwd#g\" *.sql *\\*.sql *\\*.dat\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 6875357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ti5ADEkl7S4/AAAAAAAAAAI/AAAAAAAAAlw/0_YsnwvlGio/photo.jpg?sz=128", "display_name": "Christian Soutou", "link": "https://stackoverflow.com/users/6875357/christian-soutou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 56374411, "answer_count": 1, "score": 0, "last_activity_date": 1559274478, "creation_date": 1559203119, "last_edit_date": 1559213735, "question_id": 56374083, "link": "https://stackoverflow.com/questions/56374083/how-can-i-adapt-a-unix-perl-command-to-windows", "title": "How can I adapt a unix Perl command to Windows?", "body": "<p>In <a href=\"https://oracle-base.com/articles/misc/install-sample-schemas\" rel=\"nofollow noreferrer\">https://oracle-base.com/articles/misc/install-sample-schemas</a>. Tim Hall proposes the following command (once positioned in a particular directory) to replace the string <code>__SUB__CWD__</code> by the name of the current directory in sql files and dat files:</p>\n\n<pre><code>cd ...\nperl -p -i.bak -e 's#__SUB__CWD__#'$(pwd)'#g' *.sql */*.sql */*.dat\n</code></pre>\n\n<p>How can adapt this command for Windows?\nEven if the name of directory is constant (ex: <em>C:\\app\\soutou\\product\\18.0.0\\dbhomeXE\\demo\\schema</em>). I am not a user of Perl (Oracle dev)</p>\n"}, {"tags": ["html", "mysql", "perl", "cgi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1559212124, "post_id": 56372223, "comment_id": 99353696, "body": "Please provide a minimal and <i>runnable</i> example, see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1559214185, "post_id": 56372223, "comment_id": 99354624, "body": "I would like to see the search_execute method and the library imports (use blablabla;)"}, {"owner": {"reputation": 49, "user_id": 6227472, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e0863a053d466f9954fef51db977aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rakib", "link": "https://stackoverflow.com/users/6227472/rakib"}, "edited": false, "score": 0, "creation_date": 1559295340, "post_id": 56372223, "comment_id": 99383641, "body": "&quot;  @ sergiotarxz----    search_execute method included &quot;"}, {"owner": {"reputation": 49, "user_id": 6227472, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e0863a053d466f9954fef51db977aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rakib", "link": "https://stackoverflow.com/users/6227472/rakib"}, "edited": false, "score": 0, "creation_date": 1559621007, "post_id": 56372223, "comment_id": 99468194, "body": "@Guspan Tanadi  &quot;Yeah still showing category name. i tried to add this (foreach my $i (@{$c{list}}-1) ) correction. i will delete now this.. &quot;"}, {"owner": {"reputation": 180, "user_id": 5628223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-mPJRfGd3fkE/AAAAAAAAAAI/AAAAAAAAAIY/YnkxlptihRI/photo.jpg?sz=128", "display_name": "Guspan Tanadi", "link": "https://stackoverflow.com/users/5628223/guspan-tanadi"}, "edited": false, "score": 0, "creation_date": 1559624225, "post_id": 56372223, "comment_id": 99468841, "body": "sorry it is not perl cgi but take the logic behind <a href=\"https://stackoverflow.com/q/11701746/5628223\">stackoverflow.com/q/11701746/5628223</a> if its possible, if it understandable"}], "owner": {"reputation": 49, "user_id": 6227472, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e0863a053d466f9954fef51db977aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rakib", "link": "https://stackoverflow.com/users/6227472/rakib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559631743, "creation_date": 1559194617, "last_edit_date": 1559621042, "question_id": 56372223, "link": "https://stackoverflow.com/questions/56372223/how-to-list-the-product-by-category-id-and-order-by-item-id-from-database", "title": "How to list the product by category_id and order by item_id from database?", "body": "<p>i have <strong>item</strong> table where columns are:</p>\n\n<ol>\n<li>item_id    =      01,   02,   03,   04,   05,     06,     07,     08....</li>\n<li>ctgr_id    =      01,   01,   01,   02,   02,     03,     03,     03....</li>\n<li>item_name  =    Wcar, Bcar, Rcar, Abus, Bbus, Qtruck, Ttruck, Ftruck....</li>\n</ol>\n\n<p>And have one more table called <strong>ctgr</strong> where columns are:</p>\n\n<ol>\n<li>ctgr_id = 01, 02, 03...</li>\n<li>ctgr_name = car, bus, truck... </li>\n</ol>\n\n<p><strong>Now coding are showing the product like as below:</strong></p>\n\n<ul>\n<li>car\n\n<ul>\n<li>01 - Wcar</li>\n</ul></li>\n<li>car\n\n<ul>\n<li>02 - Bcar</li>\n</ul></li>\n<li>car\n\n<ul>\n<li>03 - Rcar</li>\n</ul></li>\n<li>bus\n\n<ul>\n<li>04 - Abus </li>\n</ul></li>\n<li>bus\n\n<ul>\n<li>05 - Bbus</li>\n</ul></li>\n<li>truck\n\n<ul>\n<li>06 - Qtruck</li>\n</ul></li>\n<li>truck\n\n<ul>\n<li>07 - Ttruck</li>\n</ul></li>\n<li>truck\n\n<ul>\n<li>08 - Ftruck</li>\n</ul></li>\n</ul>\n\n<p><strong>But i want to show the product like as below:</strong></p>\n\n<ul>\n<li><p>car</p>\n\n<ul>\n<li>01 - Wcar</li>\n<li>02 - Bcar</li>\n<li>03 - Rcar</li>\n</ul></li>\n<li><p>bus</p>\n\n<ul>\n<li>04 - Abus</li>\n<li>05 - Bbus</li>\n</ul></li>\n<li><p>truck</p>\n\n<ul>\n<li>06 - Qtruck</li>\n<li>07 - Ttruck</li>\n<li>08 - Ftruck</li>\n</ul></li>\n</ul>\n\n<p><strong>from index.cgi</strong>:</p>\n\n<pre><code>sub action_index {\n    my $self = shift;\n    $self-&gt;set_property(paginate_row_count =&gt; 0);\n    my $m_item = $self-&gt;model('item');\n\n    $self-&gt;set_data(\n        'ctgrs',\n        $self-&gt;model('ctgr')-&gt;get_list('del_flg = 0 and show_web = 1')\n    );\n\n    $m_item-&gt;set_input_params;\n    $self-&gt;search_execute($m_item-&gt;get_list_sql-&gt;where(\"v_item.item_flg = 1\"));\n    $self-&gt;set_data('cart',$self-&gt;get_list_cart);\n}\n</code></pre>\n\n<p><strong>from index.html</strong>:</p>\n\n<pre><code>&lt;table&gt;\n    [% if(@{$c{list}}&gt;0) %]\n        [% foreach my $rec (@{$c{list}}) %]\n\n            [% if($rec-&gt;{is_item_public}==1) %]\n\n                    &lt;tr&gt;\n                        &lt;td align=\"center\"&gt;\n                        [# $rec-&gt;{ctgr_name} #]\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;    \n                        &lt;td class=\"item\"&gt;\n                        [# $rec-&gt;{item_id} #]&lt;br&gt;\n                        [# $rec-&gt;{item_name} #]&lt;br&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n            [% end %]\n         [% end %]\n    [% else %]\n    &lt;tr&gt;\n    &lt;td&gt;no data&lt;/td&gt;\n    &lt;/tr&gt;\n    [% end %]\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>from file TinyApplication.pm</strong></p>\n\n<pre><code>sub search_execute {\n    my $self = shift;\n    my $sql  = shift;\n\n    my @wheres = ();\n\n    foreach my $key (keys %{$self-&gt;{search_params}}){\n        my $value = $self-&gt;param(\"search/${key}\");\n        if(defined $self-&gt;{search_params}-&gt;{$key}-&gt;{func}){\n            $self-&gt;{search_params}-&gt;{$key}-&gt;{func}($sql,$value);\n        }\n        elsif (defined $value &amp;&amp; $value ne '') {\n            my $type = defined $self-&gt;{search_params}-&gt;{$key}-&gt;{type}\n              ? $self-&gt;{search_params}-&gt;{$key}-&gt;{type}\n              : '= ?';\n            my $field = defined $self-&gt;{search_params}-&gt;{$key}-&gt;{field}\n              ? $self-&gt;{search_params}-&gt;{$key}-&gt;{field}\n              : $key;\n            $value =~s/^\\s+//;\n            $value =~s/\\s+$//;\n            my @where_or = ();\n            foreach (split(/\\s+/,$value)) {\n                my $replace = $self-&gt;{search_params}-&gt;{$key}-&gt;{replace} || '?';\n                $replace =~ s/\\?/$_/;\n                push @where_or, [\"${field} ${type}\",$replace];\n            }\n            if ($self-&gt;{is_search_where_or}) {\n                push @wheres,@where_or;\n            }\n            else {\n                $sql-&gt;where_or( @where_or );\n            }\n        }\n        elsif ( defined $self-&gt;{search_params}-&gt;{$key}-&gt;{default} ) {\n            my $field = $self-&gt;{search_params}-&gt;{$key}-&gt;{field} || $key;\n            my $type = $self-&gt;{search_params}-&gt;{$key}-&gt;{type} || '= ?';\n            if( $self-&gt;{is_search_where_or} ) {\n                push @wheres,\n                  [\"${field} ${type}\", $self-&gt;{search_params}-&gt;{$key}-&gt;{default}];\n            }\n            else{\n                $sql-&gt;where(\n                    [\"${field} ${type}\", $self-&gt;{search_params}-&gt;{$key}-&gt;{default}] );\n            }\n        }\n    }\n    if( $self-&gt;{is_search_where_or} ) {\n        $sql-&gt;where_or(@wheres) if(@wheres);\n    }\n    my $tmp_orderby = $sql-&gt;{ORDERBY};\n    $sql-&gt;{ORDERBY} = [];\n    my $total = $sql-&gt;get_count(@_); \n    if($total&gt;0){\n        my $page = $self-&gt;param('page') || 1;\n        $page = 1 unless(($page=~/^\\d+$/) &amp;&amp; $page&gt;=1);\n        my $offset = ($page-1)*$self-&gt;{paginate_row_count};\n        $sql-&gt;{ORDERBY} = $tmp_orderby; \n        if($self-&gt;{paginate_row_count}&gt;0){\n            $sql-&gt;limit($offset,$self-&gt;{paginate_row_count});\n        }\n        my $sth = $sql-&gt;execute(@_);\n        my @data = ();\n        while(my $ra = $sth-&gt;fetchrow_hashref){\n            $self-&gt;filter_in_all($ra);\n            push @data,$ra;\n        }\n        $self-&gt;set_data('list',\\@data);\n    }\n}\n</code></pre>\n"}]