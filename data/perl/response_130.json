[{"tags": ["perl"], "comments": [{"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1499298017, "post_id": 44937524, "comment_id": 76851585, "body": "Surely if either of the arguments isn&#39;t an integer, the <code>&gt;=</code> comparison will cause an error?"}, {"owner": {"reputation": 61, "user_id": 1848908, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/145cb1f96216b169fa01d063c997c8df?s=128&d=identicon&r=PG", "display_name": "T2true", "link": "https://stackoverflow.com/users/1848908/t2true"}, "reply_to_user": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1499298500, "post_id": 44937524, "comment_id": 76851695, "body": "No, it defaults to one of the print errors in the code."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 3, "creation_date": 1499298749, "post_id": 44937524, "comment_id": 76851755, "body": "That would be a warning: &quot;Argument isn&#39;t numeric in numeric eq (==) ...&quot;. Which only errors if you have <code>use warnings;</code> at the beginning of your script. Which you should, for that and other reasons."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 7, "creation_date": 1499298912, "post_id": 44937524, "comment_id": 76851795, "body": "What if the argument is both an integer and a file?  I can create a file called <code>3</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 1848908, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/145cb1f96216b169fa01d063c997c8df?s=128&d=identicon&r=PG", "display_name": "T2true", "link": "https://stackoverflow.com/users/1848908/t2true"}, "edited": false, "score": 0, "creation_date": 1499299150, "post_id": 44937682, "comment_id": 76851836, "body": "Thank you. I was looking for the -f. I forgot about die."}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 1, "last_activity_date": 1499300748, "last_edit_date": 1499300748, "creation_date": 1499298562, "answer_id": 44937682, "question_id": 44937524, "link": "https://stackoverflow.com/questions/44937524/perl-verify-the-command-line-argument-is-an-integer-and-not-a-file/44937682#44937682", "title": "Perl: Verify the command line argument is an integer and not a file", "body": "<p>You can use <code>-f</code> to check if a given string is a file or not. For more options, see <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">perldoc -X</a>.</p>\n\n<p>In your example as I understood it:</p>\n\n<pre><code>die 'First argument is a filename!' if -f $ARGV[0];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1499301342, "post_id": 44938010, "comment_id": 76852325, "body": "I like the use of the <code>-r</code> there... quite important."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 8, "last_activity_date": 1499301156, "creation_date": 1499301156, "answer_id": 44938010, "question_id": 44937524, "link": "https://stackoverflow.com/questions/44937524/perl-verify-the-command-line-argument-is-an-integer-and-not-a-file/44938010#44938010", "title": "Perl: Verify the command line argument is an integer and not a file", "body": "<p>You can do this manually with a few checks.</p>\n\n<pre><code>sub usage {\n    return \"$0 &lt;integer&gt; &lt;filename&gt;\\n\";\n}\n\nif( @ARGV != 2          ||    # right number of arguments\n    $ARGV[0] !~ /^\\d+$/ ||    # first one is an integer\n    !-f $ARGV[1]        ||    # second is a readable file\n    !-r $ARGV[1]\n) {\n    die usage();\n}\n</code></pre>\n\n<p>Note there's no need for an extra check that arguments are in the correct order.</p>\n\n<hr>\n\n<p>Or you can do it with a module like <a href=\"https://metacpan.org/pod/Getopt::Args\" rel=\"noreferrer\">Getopt::Args</a>. This is the better solution as it's declarative, and removes a lot of redundancy and potential for mistakes.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\nuse Getopt::Args;\n\narg integer =&gt; (\n    isa         =&gt; 'Int',\n    required    =&gt; 1,\n    comment     =&gt; 'an integer',\n);\narg filename =&gt; (\n    isa         =&gt; 'Str',\n    required    =&gt; 1,\n    comment     =&gt; 'a filename',\n);\n\n# Extra checks for a readable filename.\nmy $args = optargs();\nif( !-r $args-&gt;{filename} ||\n    !-f $args-&gt;{filename}\n) {\n    die usage();\n}\n</code></pre>\n\n<p>It will produce its own usage message.</p>\n\n<pre><code>$ perl ~/tmp/test.pl\nusage: test.pl INTEGER FILENAME\n\n  Arguments:\n    INTEGER    an integer\n    FILENAME   a filename\n</code></pre>\n\n<p>For future programs it will handle <code>--options</code> and subcommands as well.</p>\n\n<p>If you don't like this one, <a href=\"https://metacpan.org/search?q=getopt\" rel=\"noreferrer\">there are many Getopt modules to choose from</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1499372514, "post_id": 44941317, "comment_id": 76891746, "body": "In most cases, what you mean by an integer should, in a regex, be matched via <code>[0-9]</code>. Unless you <i>want</i> to allow utf number symbols generally."}], "tags": [], "owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "is_accepted": false, "score": -1, "last_activity_date": 1499322566, "creation_date": 1499322566, "answer_id": 44941317, "question_id": 44937524, "link": "https://stackoverflow.com/questions/44937524/perl-verify-the-command-line-argument-is-an-integer-and-not-a-file/44941317#44941317", "title": "Perl: Verify the command line argument is an integer and not a file", "body": "<p>To test if, say, $ARGV[0] is strictly integer, you could use this predicate:</p>\n\n<pre><code>if ($ARGV[0] =~ /^\\d+$/) {\n    print \"an integer\\n\";\n} else {\n    print \"not an integer\\n\";\n}\n</code></pre>\n\n<p>Execute <code>perldoc perlre</code> for a whole lot more information.</p>\n\n<p>To test if $ARGV[0] is a file, you would use something like this:</p>\n\n<pre><code>if (-f $ARGV[0]) {\n    print \"a file\\n\";\n} else {\n    print \"not a file\\n\";\n}\n</code></pre>\n\n<p>Execute <code>perldoc -f -f</code> for quite a bit of information on file related tests.</p>\n"}], "owner": {"reputation": 61, "user_id": 1848908, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/145cb1f96216b169fa01d063c997c8df?s=128&d=identicon&r=PG", "display_name": "T2true", "link": "https://stackoverflow.com/users/1848908/t2true"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1499322566, "creation_date": 1499297415, "last_edit_date": 1499301481, "question_id": 44937524, "link": "https://stackoverflow.com/questions/44937524/perl-verify-the-command-line-argument-is-an-integer-and-not-a-file", "title": "Perl: Verify the command line argument is an integer and not a file", "body": "<p>I need to check if the (Perl) command line argument is only an integer and a file.</p>\n\n<p>I can check is the right number of arguments are entered:</p>\n\n<pre><code>if (@ARGV != 2){\n</code></pre>\n\n<p>And, I can check to make sure the order of arguments is correct:</p>\n\n<pre><code>    if ($ARGV[0] &gt;= $ARGV[1])\n</code></pre>\n\n<p>But, I don't know how to check if the argument is a file. I want to print and error message if it is a file.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 99, "user_id": 2137376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3221bbbea4a33a2e07ae36fd43f7b2bb?s=128&d=identicon&r=PG", "display_name": "BFH", "link": "https://stackoverflow.com/users/2137376/bfh"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499288219, "post_id": 44935519, "comment_id": 76847918, "body": "@ikegami I  do mention that file one has millions of columns. I just realized that I don&#39;t actually have to reorganise file one, which would be the hard operation, so I can in fact do this in python, so I&#39;m going to edit the question for my future use."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1499288252, "post_id": 44935519, "comment_id": 76847935, "body": "Put your data in SQLite, use the appropriate <code>JOIN</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499292218, "post_id": 44935519, "comment_id": 76849706, "body": "Re &quot;<i>I do mention that file one has millions of columns.</i>&quot;, That&#39;s interesting, but not enough. Your edit probably provides enough information, though. If the file is in the order of GB, and you have 3 million columns of data, you have a very small number of lines."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 2137376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3221bbbea4a33a2e07ae36fd43f7b2bb?s=128&d=identicon&r=PG", "display_name": "BFH", "link": "https://stackoverflow.com/users/2137376/bfh"}, "edited": false, "score": 1, "creation_date": 1499292009, "post_id": 44935873, "comment_id": 76849603, "body": "Amazing answer! Thanks!"}], "tags": [], "owner": {"reputation": 2444, "user_id": 2449774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97339bb1262db04c5a5b63637dd2549b?s=128&d=identicon&r=PG", "display_name": "keredson", "link": "https://stackoverflow.com/users/2449774/keredson"}, "is_accepted": false, "score": 1, "last_activity_date": 1499288327, "creation_date": 1499288327, "answer_id": 44935873, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting/44935873#44935873", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>3 million columns of data, eh?  It sounds like you're doing some NLP work.</p>\n\n<p>Assuming this is true, and your matrix is sparse, python can handle it just fine (just not with <code>pandas</code>).  Look at <code>scipy.sparse</code>.  Example:</p>\n\n<pre><code>from scipy.sparse import dok_matrix\n\nA = dok_matrix((10,10))\nA[1,1] = 1\n\nB = dok_matrix((10,10))\nB[2,2] = 2\n\nprint A+B\n</code></pre>\n\n<p>DOK stands for \"dictionary of keys\", which is typically used to build the sparse matrix, then it's usually converted to CSR, etc. depending on use.  See <a href=\"https://docs.scipy.org/doc/scipy/reference/sparse.html\" rel=\"nofollow noreferrer\">available sparse matrix types</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499293658, "post_id": 44936551, "comment_id": 76850249, "body": "That doesn&#39;t output the line in the desired order (the order they are found in <code>file2</code>)."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499293873, "post_id": 44936551, "comment_id": 76850353, "body": "@ikegami Ah, I had missed that. I might be have time to fix this in a few hours."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1499291376, "creation_date": 1499291376, "answer_id": 44936551, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting/44936551#44936551", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>The important thing is <a href=\"https://www.nu42.com/2013/02/splitting-long-lines-is-slow.html\" rel=\"nofollow noreferrer\">not to split</a> any more than necessary. If you have enough memory, putting the smaller file in a hash, and then reading through the second file ought to work.</p>\n\n<p>Consider the following example (note the run time of this script includes the time it takes to create sample data):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n# This is a string containing 10 lines corresponding to your \"file one\"\n# Second column has the record ID\n# Normally, you'd be reading this from a file\n\nmy $big_file = join \"\\n\",\n    map join(\"\\t\", 'x', $_, ('x') x 3_000_000),\n    1 .. 10\n;\n\n# This is a string containing 10 lines corresponding to your \"file two\"\n# Second column has the record ID\n\nmy $small_file = join \"\\n\",\n    map join(\"\\t\", 'y', $_, ('y') x 10),\n    1 .. 10\n;\n\n# You would normally pass file names as arguments\n\njoin_with_big_file(\n    \\$small_file,\n    \\$big_file,\n);\n\nsub join_with_big_file {\n    my $small_records = load_small_file(shift);\n    my $big_file = shift;\n\n    open my $fh, '&lt;', $big_file\n        or die \"Cannot open '$big_file': $!\";\n\n    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        my ($first, $id, $rest) = split /\\t/, $line, 3;\n        print join(\"\\t\", $first, $id, $rest, $small_records-&gt;{$id}), \"\\n\";\n    }\n\n    return;\n}\n\nsub load_small_file {\n    my $file = shift;\n    my %records;\n\n    open my $fh, '&lt;', $file\n        or die \"Cannot open '$file' for reading: $!\";\n\n    while (my $line = &lt;$fh&gt;) {\n        # limit the split\n        my ($first, $id, $rest) = split /\\t/, $line, 3;\n        # I drop the id field here so it is not duplicated in the joined\n        # file. If that is not a problem, $records{$id} = $line\n        # would be better.\n        $records{$id} = join(\"\\t\", $first, $rest);\n    }\n\n    return \\%records;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1499294269, "last_edit_date": 1499294269, "creation_date": 1499293219, "answer_id": 44936893, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting/44936893#44936893", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>If the size of <code>file1</code> is in the order of GB, and you have 3 million columns of data, you have a tiny number of lines (no more than 200). While you can't load all of the lines themselves into memory, you could easily load all of their <em>locations</em>.</p>\n\n<pre><code>use feature qw( say );\n\nuse Fcntl qw( SEEK_SET );\n\nopen(my $fh1, '&lt;', $qfn1) or die(\"Can't open \\\"$qfn1\\\": $!\\n\");\nopen(my $fh2, '&lt;', $qfn2) or die(\"Can't open \\\"$qfn2\\\": $!\\n\");\n\nmy %offsets;\nwhile (1) {\n   my $offset = tell($fh1);\n   my $row1 = &lt;$fh1&gt;;\n   last if !defined($row1);\n\n   chomp($row1);\n   my @fields1 = split(/\\t/, $row1);\n   my $key = $fields1[1];\n   $offsets{$key} = $offset;\n}\n\nwhile (my $row2 = &lt;$fh2&gt;) {\n   chomp($row2);\n   my @fields2 = split(/\\t/, $row2);\n   my $key = $fields2[1];\n   my $offset = $offsets{$key};\n   if (!defined($offset)) {\n      warn(\"Key $key not found.\\n\");\n      next;\n   }\n\n   seek($fh1, $offset, SEEK_SET);\n   my $row1 = &lt;$fh1&gt;;\n   chomp($row1);\n   my @fields1 = split(/\\t/, $row1);\n\n   say join \"\\t\", @fields2, @fields1[6..$#fields1];\n}\n</code></pre>\n\n<p>This approach can be taken in Python as well.</p>\n\n<p>Note: There exists a much simpler solution if the order is more flexible (i.e. if you're ok with the output being ordered as the records are ordered in <code>file1</code>). This assuming <code>file2</code> easily fits in memory.</p>\n"}], "owner": {"reputation": 99, "user_id": 2137376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3221bbbea4a33a2e07ae36fd43f7b2bb?s=128&d=identicon&r=PG", "display_name": "BFH", "link": "https://stackoverflow.com/users/2137376/bfh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 44936893, "answer_count": 3, "score": 2, "last_activity_date": 1499294269, "creation_date": 1499286848, "last_edit_date": 1499288484, "question_id": 44935519, "link": "https://stackoverflow.com/questions/44935519/sort-file-by-key-with-awk-or-perl-like-a-join-without-presorting", "title": "Sort file by key with awk or perl like a join without presorting", "body": "<p>I want to join two tab separated files, but they are in a different order. I know that it is doable with awk, but I don't know how. Here is the equivalent toy python code (python is too memory inefficient for this task without crazy workarounds):</p>\n\n<pre><code>import pandas as pd\nfrom random import shuffle\n\na = ['bar','qux','baz','foo','spam']\ndf = pd.DataFrame({'nam':a,'asc':[1,2,3,4,5],'desc':[5,4,3,2,1]})\n\nshuffle(a)\nprint(a)\n\ndex = pd.DataFrame({'dex' : a})\ndf_b = pd.DataFrame({'VAL1' :[0,1,2,3,4,5,6]})\n\npd.merge(dex, df,left_on='dex',right_on='nam')[['asc','desc','nam']]\n</code></pre>\n\n<p>I have two files:\nFor file one, column 2 holds the identifier for each row, there 5 columns I don't need, and then there are about 3 million columns of data.</p>\n\n<p>For file two, There are 12 columns, with the second column containing the same identifiers in a different order, along with additional ids.</p>\n\n<p>I want to sort file one to have the same identifiers and order as file two, with the other columns appropriately rearranged.</p>\n\n<p>File one is potentially multiple gigabytes.</p>\n\n<p>Is this easier with awk and/or other GNU tools, or should I use perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1499284972, "post_id": 44934944, "comment_id": 76846157, "body": "On Windows, &#39;.&#39; is the current directory, and &#39;..&#39; is the parent directory."}, {"owner": {"reputation": 3, "user_id": 8190578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQoRN.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/8190578/carson"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1499285571, "post_id": 44934944, "comment_id": 76846495, "body": "@JohnnyMopp oh okay thanks, thats what i was thinking. do you know what the case is for mac and linux machines?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1499286802, "post_id": 44934944, "comment_id": 76847182, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! It will catch that fact that most of your vars are unscoped, and it will tell you that <code>@directories[14]</code> should be <code>$directories[14]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1499286911, "post_id": 44935222, "comment_id": 76847240, "body": "Technically, that also filters out <code>.\u240a</code> and <code>..\u240a</code>. They&#39;re not likely to exist, but it&#39;s not very clean to filter them out."}, {"owner": {"reputation": 3, "user_id": 8190578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQoRN.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/8190578/carson"}, "edited": false, "score": 0, "creation_date": 1499288469, "post_id": 44935222, "comment_id": 76848037, "body": "Thanks for the quick feedback! I tested it out and this solution works."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499310962, "post_id": 44935222, "comment_id": 76854636, "body": "@ikegami I honestly don&#39;t understand why that happens. I will play around, but of course would appreciate you explaining why, as always ;)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 3, "user_id": 8190578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQoRN.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/8190578/carson"}, "edited": false, "score": 1, "creation_date": 1499311075, "post_id": 44935222, "comment_id": 76854663, "body": "@Carson ikegami&#39;s answer is much more elaborate and should be chosen as the proper answer."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1499330341, "post_id": 44935222, "comment_id": 76863136, "body": "@stevieb <code>$</code> Match the end of the string (or <b>before newline at the end                  of the string</b>) (emphasis mine)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499353561, "post_id": 44935222, "comment_id": 76880448, "body": "<code>$</code> without <code>&#47;m</code> is equivalent to <code>(?=\\n?\\z)</code>. (<code>$</code> with <code>&#47;m</code> is equivalent to <code>(?=\\n|\\z)</code>.)"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": -1, "last_activity_date": 1499285769, "creation_date": 1499285769, "answer_id": 44935222, "question_id": 44934944, "link": "https://stackoverflow.com/questions/44934944/windows-directory-contents-being-and/44935222#44935222", "title": "windows directory contents being &quot;.&quot; and &quot;..&quot;", "body": "<p>Linux/Unix systems have the same convention, as do newer Macs (from what I'm aware, I don't use one).</p>\n\n<p>One way to get around this issue on all systems by using <a href=\"https://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a>.</p>\n\n<p>Put the following line right above your <code>map</code> line.</p>\n\n<pre><code>@directories = grep{$_ !~ /^\\.{1,2}$/} @directories;\n</code></pre>\n\n<p>What that will do is rebuild the <code>@directories</code> array after removing all entries that are either <code>.</code> or <code>..</code>.</p>\n\n<p>If you're on a system that doesn't list the <code>.</code> or <code>..</code> directories, the <code>grep</code> line won't do anything.</p>\n\n<p>After that, you can re-index your array back to <code>0</code> and it'll work across all of your platforms.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8190578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQoRN.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/8190578/carson"}, "edited": false, "score": 0, "creation_date": 1499360718, "post_id": 44935340, "comment_id": 76885363, "body": "thanks so much, i actually did run into this problem and your answer is very helpful. and you are right about readdir not returning the entries in a specific order, im working on that problem now."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1499291867, "last_edit_date": 1499291867, "creation_date": 1499286159, "answer_id": 44935340, "question_id": 44934944, "link": "https://stackoverflow.com/questions/44934944/windows-directory-contents-being-and/44935340#44935340", "title": "windows directory contents being &quot;.&quot; and &quot;..&quot;", "body": "<p>Actually, you won't always get <code>.</code> and <code>..</code>. You'll only get them if they exist in the directory,<sup>[1]</sup> and the reason you get them is because they exist in the directory.<sup>[2]</sup> Just filter them out if you're not interested in them.</p>\n\n<pre><code>my @directories =\n    map { \"$smddirectory/$_\" }\n       grep { !/^\\.\\.?\\z/ }\n          readdir($DIR);\n</code></pre>\n\n<p>Furthermore, there's no guarantee about the order in which <code>readdir</code> will return the directory entries. You should not rely on them being in any particular order.</p>\n\n<hr>\n\n<ol>\n<li><p>They root of physical drives don't have <code>.</code> or <code>..</code> in Windows.</p>\n\n<pre><code>&gt;perl -E\"opendir($dh, $ARGV[0]) or die $!; say 0+grep /^\\./, readdir($dh)\" C:\\\n0\n\n&gt;perl -E\"opendir($dh, $ARGV[0]) or die $!; say 0+grep /^\\./, readdir($dh)\" C:\\Users\n2\n</code></pre>\n\n<p>It varies for other type of drives.</p>\n\n<pre><code>&gt;subst Z: C:\\\n\n&gt;perl -E\"opendir($dh, $ARGV[0]) or die $!; say 0+grep /^\\./, readdir($dh)\" Z:\\\n0\n\n&gt;subst /d Z:\n\n&gt;subst Z: C:\\Users\n\n&gt;perl -E\"opendir($dh, $ARGV[0]) or die $!; say 0+grep /^\\./, readdir($dh)\" Z:\\\n2\n\n&gt;subst /d Z:\n</code></pre></li>\n<li><p>These and other files starting with <code>.</code> are normally kept hidden from users in unix systems (incl OS/X), but <code>ls -a</code> will show them. <code>.</code> is a link to the current directory, and <code>..</code> is a link to the parent directory.</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 8190578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQoRN.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/8190578/carson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 44935340, "answer_count": 2, "score": -4, "last_activity_date": 1499291867, "creation_date": 1499284680, "question_id": 44934944, "link": "https://stackoverflow.com/questions/44934944/windows-directory-contents-being-and", "title": "windows directory contents being &quot;.&quot; and &quot;..&quot;", "body": "<p>I'm trying to search through the contents of a directory. Inside of the directory is other directories, which should always be in the same order. When I make an array of the directory contents, I have to reserve the first two spots for \".\" and \"..\". Can anyone tell me why this is? </p>\n\n<p>And is this present on mac as well? My script won't run properly on mac because the array isn't lining up with where the directories should be. I think its because these \".\" and \"..\" spots don't exist on mac or something. I'm just looking for some answers. Not sure if it will help, but here is my code.</p>\n\n<pre><code>print \"Enter the SMD day folder to generate summary. (Ex: a folder named 06132017)\\n\";\nchomp($smddirectory = &lt;STDIN&gt;);\nprint \"\\n\";\nprint \"Output will be in the SGE folder.\\n\";\nopendir ($DIR, $smddirectory) ;\nmy @directories = readdir $DIR;\nclosedir $DIR;\n\n@directories = map{$smddirectory . '/' . $_} @directories;\n\n$mydir = @directories[14];\n$mydirs = @directories[2];\n$mydirb = @directories[3];\n$mydirbs = @directories[4];\n$mydirc = @directories[5];\n$mydircs = @directories[6];\n$JSHDirectory = @directories[7];\n$JSHsDirectory = @directories[8];\n$JSHBDirectory = @directories[9];\n$JSHBsDirectory = @directories[10];\n$JSHCDirectory = @directories[11];\n$JSHCsDirectory = @directories[12];\n$SGEDirectory = @directories[13];\n</code></pre>\n"}, {"tags": ["perl", "hash", "module", "package"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1499284418, "post_id": 44934841, "comment_id": 76845830, "body": "What is $class? $hash and %hash are different variables. <code>test =</code> is probably wrong, if <code>test</code> is a variable, it should start with a <code>$</code>."}, {"owner": {"reputation": 35, "user_id": 7787028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248357021937947/picture?type=large", "display_name": "Alexandre Bento", "link": "https://stackoverflow.com/users/7787028/alexandre-bento"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499285458, "post_id": 44934841, "comment_id": 76846443, "body": "$class is my Test, which is the package name. About the test variable I fixed that, was a type mistake."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1499286309, "last_edit_date": 1499286309, "creation_date": 1499285992, "answer_id": 44935297, "question_id": 44934841, "link": "https://stackoverflow.com/questions/44934841/cant-print-a-hash-on-a-perl-module/44935297#44935297", "title": "Cant print a hash on a perl module", "body": "<p>The first argument to <code>-&gt;new</code> is the class name. The arguments to the constructor come next. Not hardwiring the class name also makes inheritance possible.</p>\n\n<p>Do you understand the difference between a hash and a hash reference? <code>%hash</code> is a hash, <code>\\%hash</code> is a hash reference. If <code>$test-&gt;{hash}</code> contains a hash reference, you can dereference it (i.e. retrieve the hash from it) with <code>%{ $test-&gt;{hash} }</code>. Hash values must be scalars, which means you can't make a hash a value of a hash - but you can make a hash reference the value.</p>\n\n<p>I'd also recommend to indent the code properly.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\n{\n    package Test;\n\n    sub new {\n        my ($class, %hash) = @_;\n        bless { hash =&gt; \\%hash }, $class;\n    }\n\n    sub printer {\n        my $self = shift;\n        print \"Test: \", %{ $self-&gt;{hash} }, \"\\n\";\n    }\n}\n\n\nmy %hash = ( a =&gt; 11, b =&gt; 12 );\nmy $t = 'Test'-&gt;new(%hash);\n$t-&gt;printer;  # a11b12 or b12a11\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7787028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1248357021937947/picture?type=large", "display_name": "Alexandre Bento", "link": "https://stackoverflow.com/users/7787028/alexandre-bento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 44935297, "answer_count": 1, "score": -2, "last_activity_date": 1499286309, "creation_date": 1499284263, "last_edit_date": 1499285368, "question_id": 44934841, "link": "https://stackoverflow.com/questions/44934841/cant-print-a-hash-on-a-perl-module", "title": "Cant print a hash on a perl module", "body": "<p>I have a .pm Package Test file which contains:</p>\n\n<pre><code>sub new{\nmy $hash = shift;\nmy $self = {};\nbless($self,$class);\n$self-&gt;{hash} = %hash;\nreturn $self;}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>sub printer{\nmy $self = shift;\nprint(\"Test: \",$self-&gt;{hash},\"\\n\");\nreturn;}\n</code></pre>\n\n<p>On my main.pl I use:</p>\n\n<pre><code>$test = Test-&gt;new(%myhash);\n</code></pre>\n\n<p>I don't know if explained it properly but the problem is that I can't print my hash using my printer function.\nI really appreciatte some help about it and if more information about it is needed I can paste all the files here.</p>\n"}, {"tags": ["perl", "parameter-passing"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1499278289, "creation_date": 1499278289, "answer_id": 44933244, "question_id": 44933076, "link": "https://stackoverflow.com/questions/44933076/perl-unexpected-result/44933244#44933244", "title": "Perl unexpected result", "body": "<blockquote>\n  <p>I assume it is because of the alias with <code>@_</code>, but shouldn't the <code>foreach my $input (@_)</code> force the sub to copy the value and only treat the value not the alias?</p>\n</blockquote>\n\n<p>You're right that <code>@_</code> contains aliases. The part that's missing is that <code>foreach</code> also aliases the loop variable to the current list element. Quoting <a href=\"http://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\"><code>perldoc perlsyn</code></a>:</p>\n\n<blockquote>\n  <p>If any element of LIST is an lvalue, you can modify it by modifying VAR inside the loop. Conversely, if any element of LIST is NOT an lvalue, any attempt to modify that element will fail. In other words, the <code>foreach</code> loop index variable is an implicit alias for each item in the list that you're looping over.</p>\n</blockquote>\n\n<p>So ultimately <code>$input</code> is an alias for <code>$_[0]</code>, which is an alias for <code>$name</code>, which is why you see the changes appearing in <code>$name</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499280902, "post_id": 44933572, "comment_id": 76843758, "body": "I think you&#39;re answering the wrong question here. The OP says <i>&quot;I assume it is because of the alias with <code>@_</code>, but shouldn&#39;t the <code>foreach my $input (@_)</code> force the sub to copy the value and only treat the value not the alias?&quot;</i> and so appears to know that <code>@_</code> contains aliases to the actual parameters, but not that the control variable of a <code>for</code> loop is also an alias."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1499281828, "post_id": 44933572, "comment_id": 76844275, "body": "@Borodin Tried to clarify."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1499366127, "post_id": 44933572, "comment_id": 76888549, "body": "Congratulations on 100k ! :)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1499376964, "post_id": 44933572, "comment_id": 76893913, "body": "@zdim Thank you very much."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 8, "last_activity_date": 1499281816, "last_edit_date": 1592644375, "creation_date": 1499279504, "answer_id": 44933572, "question_id": 44933076, "link": "https://stackoverflow.com/questions/44933076/perl-unexpected-result/44933572#44933572", "title": "Perl unexpected result", "body": "<p>Elements of <code>@_</code> are aliases to the original variables. What you are observing is the difference between:</p>\n<pre><code>sub ltrim {\n    $_[0] =~ s/^\\s+//;\n    return $_[0];\n}\n</code></pre>\n<p>and</p>\n<pre><code>sub ltrim {\n    my ($s) = @_;\n    $s =~ s/^\\s+//;\n    return $s;\n}\n</code></pre>\n<p>Compare your code to:</p>\n<pre><code>#!/usr/bin/env perl\n\nmy $name = &quot;   foo    &quot;;\nmy $sn   = &quot;     foosu&quot;;\n\ntrim($name, \\$sn);\n\nprint &quot;name: [$name]\\n&quot;;\nprint &quot;sn: [$sn]\\n&quot;;\n\nsub trim {\n    my @args = @_;\n\n    my $fref_trim = sub{\n        my ($ref_input) = @_;\n        ${$ref_input} =~ s/^\\s+//;\n        ${$ref_input} =~ s/\\s+\\z//;\n    };\n\n   for my $input (@args) {\n       if (ref($input) eq &quot;SCALAR&quot;) {\n           $fref_trim-&gt;($input);\n       }\n       else {\n           $fref_trim-&gt;(\\$input);\n       }\n   }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ ./zz.pl\nname: [   foo    ]\nsn: [foosu]\n</code></pre>\n<p>Note also that the loop variable in <code>for my $input ( @array )</code> does not create a new copy for each element of the array. See <code>perldoc perlsyn</code>:</p>\n<blockquote>\n<p>The <code>foreach</code> loop iterates over a normal list value and sets the scalar variable <code>VAR</code> to be each element of the list in turn. ...</p>\n<p>...</p>\n<p>the <code>foreach</code> loop index variable is an implicit alias for each item in the list that you're looping over.</p>\n</blockquote>\n<p>In your case, this would mean that, at each iteration <code>$input</code> is an alias to the corresponding element of <code>@_</code> which itself is an alias to the variable that was passed in as an argument to the subroutine.</p>\n<p>Making a copy of <code>@_</code> thus prevents the variables in the calling context from being modified. Of course, you could do something like:</p>\n<pre><code>sub trim {\n    my $fref_trim = sub{\n        my ($ref_input) = @_;\n        ${$ref_input} =~ s/^\\s+//;\n        ${$ref_input} =~ s/\\s+\\z//;\n    };\n\n   for my $input (@_) {\n       my $input_copy = $input;\n       if (ref($input_copy) eq &quot;SCALAR&quot;) {\n           $fref_trim-&gt;($input_copy);\n       }\n       else {\n           $fref_trim-&gt;(\\$input_copy);\n       }\n   }\n}\n</code></pre>\n<p>but I find making a wholesale copy of <code>@_</code> once to be clearer and more efficient assuming you do not want to be selective.</p>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 44933572, "answer_count": 2, "score": 2, "last_activity_date": 1499281944, "creation_date": 1499277693, "last_edit_date": 1499281944, "question_id": 44933076, "link": "https://stackoverflow.com/questions/44933076/perl-unexpected-result", "title": "Perl unexpected result", "body": "<p>Imagine I have this Perl script</p>\n\n<pre><code>my $name = \"   foo    \";\nmy $sn   = \"     foosu\";\n\ntrim($name, \\$sn);\n\nprint \"name: [$name]\\n\";\nprint \"sn: [$sn]\\n\";\nexit 0;\n\n\nsub trim{\n\n   my $fref_trim = sub{\n                          my ($ref_input) = @_;\n                          ${$ref_input} =~ s/^\\s+// ;\n                          ${$ref_input} =~ s/\\s+$// ;\n    };\n\n   foreach my $input (@_){\n       if (ref($input) eq \"SCALAR\"){\n            $fref_trim-&gt;($input);\n       } else {\n            $fref_trim-&gt;(\\$input);\n       }\n   }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>name: [foo]\nsn: [foosu]\n</code></pre>\n\n<p>I would expect $name to be \"<code>[   foo    ]</code>\" when printing the value after calling <code>trim</code>, but the sub is setting <code>$name</code> as I would want it. Why is this working, when it really shouldn't?</p>\n\n<p>I'm not passing $name by reference and the <code>trim</code> sub is not returning anything. I'd expect the <code>trim</code> sub to create a copy of the <code>$name</code> value, process the copy, but then the original <code>$name</code> would still have the leading and trailing white spaces when printed in the main code. </p>\n\n<p>I assume it is because of the alias with <code>@_</code>, but shouldn't the <code>foreach my $input (@_)</code> force the sub to copy the value and only treat the value not the alias?</p>\n\n<p>I know I can simplify this sub and I used it only as an example.</p>\n"}, {"tags": ["regex", "perl", "match", "substitution"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1499268386, "last_edit_date": 1499268386, "creation_date": 1499266804, "answer_id": 44929784, "question_id": 44929583, "link": "https://stackoverflow.com/questions/44929583/perl-global-match-and-append-something-after-the-matched-string/44929784#44929784", "title": "Perl, global match and append something after the matched string", "body": "<p>The easy way is rather easy:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $string = \"t123:apple;t456:pear;t789:banana\";\n\nmy %hash = (\n    t123 =&gt; 'fruit1',\n    t456 =&gt; 'fruit2',\n    t789 =&gt; 'fruit3',\n);\n\n$string =~ s/(t\\d+)/$1 $hash{$1}/g;\n\nsay $string;\n</code></pre>\n\n<p>But this doesn't ensure that everything that matches <code>t\\d{3}</code> is a valid key in your hash. So let's explicitly search for those keys.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $string = \"t123:apple;t456:pear;t789:banana\";\n\nmy %hash = (\n    t123 =&gt; 'fruit1',\n    t456 =&gt; 'fruit2',\n    t789 =&gt; 'fruit3',\n);\n\nmy $match = join '|', map quotemeta, keys %hash;\n\n$string =~ s/($match)/$1 $hash{$1}/g;\n\nsay $string;\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 8256849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzOU4.jpg?s=128&g=1", "display_name": "Heyu L", "link": "https://stackoverflow.com/users/8256849/heyu-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 44929784, "answer_count": 1, "score": 0, "last_activity_date": 1499268386, "creation_date": 1499266253, "last_edit_date": 1499267538, "question_id": 44929583, "link": "https://stackoverflow.com/questions/44929583/perl-global-match-and-append-something-after-the-matched-string", "title": "Perl, global match and append something after the matched string", "body": "<p>I have a problem in the case of performing a global match.  How can I substitute the matched string for a new string, which is made up from the original string plus a new string.  The string is like:</p>\n\n<pre><code>$string = \"t123:apple;t456:pear;t789:banana\";\n</code></pre>\n\n<p>Then I have a hash like this:</p>\n\n<pre><code>my %hash = (\n    t123 =&gt; 'fruit1',\n    t456 =&gt; 'fruit2',\n    t789 =&gt; 'fruit3',\n);\n</code></pre>\n\n<p>How can I then obtain a new string such as:</p>\n\n<pre><code>$newstring = \"t123 fruit1:apple;t456 fruit2:pear;t789 fruit3:banana\";\n</code></pre>\n\n<p>Now, my perl code is:</p>\n\n<pre><code>while($string =~ /t\\d{3}/g){\n    if (exists $hash{\"$&amp;\"}) {\n        my $match = $&amp;;\n        $string =~ s/$&amp;/$match.$hash{\"$&amp;\"}/;\n    }\n}\n</code></pre>\n\n<p>It doesn't work though, because the match always starts from the first character. I think I should use <code>pos(string)</code> or something to make it have an offset, but I don't know how to do this.</p>\n"}, {"tags": ["python-3.x", "perl", "subprocess"], "comments": [{"owner": {"reputation": 527, "user_id": 5571914, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0585097f26069beb3b696cb0d7dba241?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/5571914/arun"}, "edited": false, "score": 0, "creation_date": 1499263055, "post_id": 44928089, "comment_id": 76832101, "body": "I just found out, it is easier with os.system(&quot;curl &#39;<a href=\"http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1\" rel=\"nofollow noreferrer\">genome.jgi.doe.gov/ext-api/downloads/&hellip;</a>&#39; -b cookies &gt; Absrep1.xml&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 2, "last_activity_date": 1499262937, "creation_date": 1499262937, "answer_id": 44928289, "question_id": 44928089, "link": "https://stackoverflow.com/questions/44928089/curl-execution-in-python-failed/44928289#44928289", "title": "Curl execution in python failed", "body": "<p>In Perl, you should be able to use this:</p>\n\n<p><code>system(q{curl 'http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1' -b cookies &gt; Absrep1.xml});</code></p>\n\n<p>However, you might be better off using <a href=\"https://metacpan.org/pod/LWP\" rel=\"nofollow noreferrer\">LWP</a> or possibly even <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow noreferrer\">HTTP::Tiny</a>(unless you need the cookies) instead of shelling out. For more advanced uses, there is also <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow noreferrer\">WWW::Mechanize</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 5823191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11ff10a192d08c0cb66a65e50b650f92?s=128&d=identicon&r=PG&f=1", "display_name": "R. Ryan", "link": "https://stackoverflow.com/users/5823191/r-ryan"}, "is_accepted": false, "score": 2, "last_activity_date": 1499264360, "creation_date": 1499264360, "answer_id": 44928821, "question_id": 44928089, "link": "https://stackoverflow.com/questions/44928089/curl-execution-in-python-failed/44928821#44928821", "title": "Curl execution in python failed", "body": "<p>The syntax error is almost certainly down to the quotes in the system call:</p>\n\n<p><code>system('curl 'http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1' -b cookies &gt; Absrep1.xml');</code></p>\n\n<p>The single quotes either need to be escaped or alternative parentheses can be used such as double quotes or custom parentheses with q or qq, eg:</p>\n\n<p><code>system(q{curl 'http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1' -b cookies &gt; Absrep1.xml});</code></p>\n\n<p>It's hard to tell from the context given, but wrapping the curl call in perl or python would likely be a less than optimal approach. Perl has LWP, Python has requests, and the bash shell is already well equipped to run simple batch jobs. It might be best to stick to a single interpreter unless there's a good reason not to.</p>\n"}], "owner": {"reputation": 527, "user_id": 5571914, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0585097f26069beb3b696cb0d7dba241?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/5571914/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 44928289, "answer_count": 2, "score": -2, "last_activity_date": 1499264360, "creation_date": 1499262448, "question_id": 44928089, "link": "https://stackoverflow.com/questions/44928089/curl-execution-in-python-failed", "title": "Curl execution in python failed", "body": "<p>I wanted to download files for around 300 item. An example is below:</p>\n\n<pre><code>curl 'http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1' -b cookies &gt; Absrep1.xml\n</code></pre>\n\n<p>This opens the page and downloads the content and stores it as xml file in my end</p>\n\n<p>I tried to do a batch script in perl with system command, like</p>\n\n<pre><code>system('curl 'http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1'\n-b cookies &gt; Absrep1.xml');\n</code></pre>\n\n<p>But, it did not work. There was syntax error, which I guess is due to single quotes. </p>\n\n<p>I tried with python, </p>\n\n<pre><code>import subprocess\nbash_com = 'curl \"http://genome.jgi.doe.gov/ext-api/downloads/get-directory?organism=Absrep1\" '\nsubprocess.Popen(bash_com)\noutput = subprocess.check_output(['bash','-c', bash_com])\n</code></pre>\n\n<p>It did not work. I get the error, File does not exist. Even if it works, how can I include the </p>\n\n<blockquote>\n  <p>-b cookies > Absrep1.xml'</p>\n</blockquote>\n\n<p>part in it?</p>\n\n<p>Please help. Thanks in Advance,</p>\n\n<p>AP</p>\n"}, {"tags": ["ruby", "regex", "perl", "latex"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1499260695, "post_id": 44926686, "comment_id": 76830314, "body": "what you need in output"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1499261039, "post_id": 44926686, "comment_id": 76830540, "body": "Replace <code>#</code> with <code>\\#</code> if it is in a caption."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1499261148, "post_id": 44926686, "comment_id": 76830633, "body": "check the answer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1499285928, "post_id": 44926686, "comment_id": 76846716, "body": "Count braces, for instance.  Check for <code>\\caption</code> and once found set a flag.  While the flag is &quot;on&quot;, as you read the file: concatenate lines (that&#39;s your buffer), and add counts for left and right braces to their totals (for the buffer). Once you get to have an extra <code>}</code> you found the closing brace for <code>\\caption</code>. Run substitution (for <code>\\#</code>) on that buffer, reset flags/counters.  This uses the fact that you cannot have multiple <code>\\caption</code> on a line, makes other assumtpions, and likely leaves out details. Try (or make up your own parser of course), and if there is a problem post the code."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1499261026, "creation_date": 1499261026, "answer_id": 44927533, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu/44927533#44927533", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<blockquote>\n  <p>Just Try this:</p>\n</blockquote>\n\n<pre><code>my $str = '\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K\n}_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \n\\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{\n20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}';\n</code></pre>\n\n<blockquote>\n  <p><em>You can modify this regex (This is what I am using in my live)</em></p>\n</blockquote>\n\n<pre><code>my $reg = qw/((?:[^{}]*(?:{(?:[^{}]*(?:{(?:[^{}]*(?:{[^{}]*})*[^{}]*)*})*[^{}]*)*})*[^{}]*)*)/;\n\n$str=~s/$reg/$1=~s{\\#}{\\\\#}gr; /seg;\n\nprint $str;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> \\caption{\\small{Et elliptisk omr\u03c3de i planen er afgr\u00b5nset af en ellipse som er niveaukurven $\\mathcal{K  \n }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10  \n \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf\\#evncount.20.1}{  \n 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 314813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1217becc9db6667a21f7ee839e6f3767?s=128&d=identicon&r=PG", "display_name": "d2xdt2", "link": "https://stackoverflow.com/users/314813/d2xdt2"}, "is_accepted": true, "score": 2, "last_activity_date": 1499324948, "creation_date": 1499324948, "answer_id": 44942010, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu/44942010#44942010", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<p>Here is a brute force solution in Ruby, now that you have added the Ruby tag. It is not efficient, but safe and simple.</p>\n\n<pre><code>x.split('\\caption').each_with_index.map { |str, i|\n  next str if i == 0\n  indent = 0\n  end_caption = str.length\n  str.split('').each_with_index do |c, ci|\n    if c == '{'\n      indent = indent + 1\n    elsif c == '}'\n      indent = indent - 1\n      if (indent == 0)\n        end_caption = ci\n        break\n      end\n    end\n  end\n  str[0..(end_caption)].gsub(/([^\\\\])#/,'\\1\\\\#')+ str[(end_caption+1)..-1]\n}.join(\u2018\\caption')\n</code></pre>\n\n<p>or if you are looking for a one-liner, then</p>\n\n<pre><code>x.gsub(/\\\\caption\\{((?:[^{}]+|\\{\\g&lt;1&gt;\\})+)\\}/m)  { |xx| Regexp.last_match[0].gsub(/([^\\\\])#/,\u2019\\1\\\\#\u2019) }\n</code></pre>\n\n<p>All of these of course requires that your Latex file can compile.</p>\n\n<p>For Perl you could consider <a href=\"http://search.cpan.org/~shay/Text-Balanced-2.03/lib/Text/Balanced.pm\" rel=\"nofollow noreferrer\"><code>Text::Balanced</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1499529116, "creation_date": 1499529116, "answer_id": 44988006, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu/44988006#44988006", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<p>This can be done in Perl using two substitutions: the first to find the <code>\\caption</code> elements, end the second to replace all hash symbols <code>#</code> within the elements found</p>\n\n<p>It is convenient to use <a href=\"https://metacpan.org/pod/Regexp::Common::balanced\" rel=\"nofollow noreferrer\"><code>Regexp::Common::balanced</code></a> to match the required balanced sequence of braces</p>\n\n<p>The output of this program shows the string before and after editing. It's not the best test data as there is only a single instance of a hash symbol, and none outside the <code>\\caption</code> element, but it does show that it works with the example data</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Regexp::Common 'balanced';\n\nmy $latex = &lt;&lt;'END';\n\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\nEND\n\nsay $latex;\n\n$latex =~ s{ ( \\\\caption $RE{balanced}{-parens=&gt;'{}'} ) }{\n    $1 =~ s/#/\\\\#/gr;\n}xeg;\n\nsay $latex;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\n\n\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf\\#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 44942010, "answer_count": 3, "score": 1, "last_activity_date": 1499529116, "creation_date": 1499258752, "last_edit_date": 1499324689, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<p>The below Latex is written in one line, but it could have been over several.</p>\n\n<p>The problem is <code>#</code> in caption commands have to be escaped, so the question is how to do this only within captions?</p>\n\n<p>Or does there exist a Perl/Ruby module that can find the closing <code>}</code> in such a complicated case?</p>\n\n<blockquote>\n  <p><code>\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}</code></p>\n</blockquote>\n"}, {"tags": ["perl", "operators"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1499264502, "post_id": 44925354, "comment_id": 76833277, "body": "Array and hash variables can never be undefined, only empty, but that has nothing to do with the error."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1499256766, "post_id": 44925936, "comment_id": 76827185, "body": "See <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">this</a> also: <code>@a = @b || @c;</code> really means <code>@a = scalar(@b) || @c;</code>."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1499256923, "post_id": 44925936, "comment_id": 76827297, "body": "@Dada: It will be really handy if operands were tested in scalar context, but return them <code>as is</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1499261439, "post_id": 44925936, "comment_id": 76830866, "body": "Given that you are answering your own question, you might want to put some effort into explaining the <b>why</b> part in more detail than provided in that quotation in <code>perlop</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1499262028, "post_id": 44925936, "comment_id": 76831341, "body": "This question does not answer the question, which was <b><i>Why defined-or does not work in same way for array as for scalar?</i></b>. It merely confirms that it is so."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1499261304, "last_edit_date": 1499261304, "creation_date": 1499256698, "answer_id": 44925936, "question_id": 44925354, "link": "https://stackoverflow.com/questions/44925354/why-defined-or-does-not-work-in-same-way-for-array-as-for-scalar/44925936#44925936", "title": "Why //= (defined-or) does not work in same way for array as for scalar?", "body": "<p>See <a href=\"http://perldoc.perl.org/perlop.html#Assignment-Operators\" rel=\"nofollow noreferrer\">\"Assignment Operators\" in <code>perldoc perlop</code></a>:</p>\n\n<blockquote>\n  <p>These combined assignment operators can only operate on scalars...</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1499261657, "creation_date": 1499261657, "answer_id": 44927782, "question_id": 44925354, "link": "https://stackoverflow.com/questions/44925354/why-defined-or-does-not-work-in-same-way-for-array-as-for-scalar/44927782#44927782", "title": "Why //= (defined-or) does not work in same way for array as for scalar?", "body": "<p>Array and hash variables can never be <em>undefined</em>, only <em>empty</em>. If I write <code>@arr = undef</code> then <code>@arr</code> becomes a one-element array containing a single undefined scalar. That isn't an undefined array</p>\n\n<p>This expression</p>\n\n<pre><code>@arr //= qw/ 1 2 3 /\n</code></pre>\n\n<p>imposes <em>scalar context</em> on both operands. <code>scalar(qw/ 1 2 3 /)</code> is 3, while <code>scalar @arr</code> is the number of elements in <code>@arr</code> which cannot be assigned to and can never be undefined anyway</p>\n\n<p>To set an <em>empty array</em> use this</p>\n\n<pre><code>@arr = qw/ 1 2 3 / unless @arr\n</code></pre>\n\n<p>You could also use a conditional expression</p>\n\n<pre><code>@arr = @arr ? @arr : qw/ 1 2 3 /\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "closed_date": 1499261971, "accepted_answer_id": 44927782, "answer_count": 2, "score": 2, "last_activity_date": 1499261657, "creation_date": 1499255237, "last_edit_date": 1499261347, "question_id": 44925354, "link": "https://stackoverflow.com/questions/44925354/why-defined-or-does-not-work-in-same-way-for-array-as-for-scalar", "closed_reason": "Duplicate", "title": "Why //= (defined-or) does not work in same way for array as for scalar?", "body": "<p>I have the following code:</p>\n\n<pre><code>$var //= 1;\n@arr //= qw/ 1 2 3 /;\n</code></pre>\n\n<p>But I get error:</p>\n\n<blockquote>\n  <p><code>Can't modify array dereference in defined or assignment (//=) at ...</code></p>\n</blockquote>\n\n<p>Even this <code>@arr ||= qw/ 1 2 3 /;</code> does not work:</p>\n\n<blockquote>\n  <p><code>Can't modify array dereference in logical or assignment (||=) at ...</code></p>\n</blockquote>\n\n<p>But this works as expected:</p>\n\n<pre><code>@arr = @arr || qw/ 1 2 3 /;\n\nprint \"@arr\"; # 1 2 3\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 5, "creation_date": 1499247736, "post_id": 44922016, "comment_id": 76820663, "body": "If there is, I wouldn&#39;t use it. That&#39;s pretty hard to read."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499258329, "post_id": 44922016, "comment_id": 76828409, "body": "I&#39;d go one step further and say there is no shorter way to do this."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1499257786, "post_id": 44925579, "comment_id": 76827969, "body": "You don&#39;t need the prototype here."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1499261215, "post_id": 44925579, "comment_id": 76830682, "body": "I agree with @simbabque that the prototype is pointless here. But even if you&#39;re going to use a prototype, why have you marked <code>$fun</code> as optional? You&#39;re letting the user try to run <code>$obj-&gt;</code> - which seems wrong."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 1, "last_activity_date": 1499262385, "last_edit_date": 1499262385, "creation_date": 1499255786, "answer_id": 44925579, "question_id": 44922016, "link": "https://stackoverflow.com/questions/44922016/compose-a-method-name-with-a-variable/44925579#44925579", "title": "Compose a method name with a variable", "body": "<p>Readabbility is quite an issue, so i would add a helper function to your Module:</p>\n\n<pre><code>sub access_it {\n    my ($obj, $fun) = @_;\n    return $obj-&gt;$fun\n}\n</code></pre>\n\n<p>after that you should be able to use</p>\n\n<pre><code>%== markdown(access_it($rs,'internet' . '_' . $lang));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "edited": false, "score": 0, "creation_date": 1499351512, "post_id": 44928458, "comment_id": 76878868, "body": "It is a <a href=\"http://mojolicious.org/perldoc/Mojo/Template\" rel=\"nofollow noreferrer\">Mojolicious</a> template, which explains the <code>%</code> and <code>%==</code> ;-)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -2, "last_activity_date": 1499263394, "creation_date": 1499263394, "answer_id": 44928458, "question_id": 44922016, "link": "https://stackoverflow.com/questions/44922016/compose-a-method-name-with-a-variable/44928458#44928458", "title": "Compose a method name with a variable", "body": "<p>I don't understand why you are striving to make your code even more concise. It is already hard to read, and golfing it further can only make it worse. In particular, you have a prime example of how comments can be used to make code less readable. And what are those <code>%</code> and <code>%==</code> doing there? Your code won't compile with those in place</p>\n\n<p>You can use a scalar variable to provide the method name, but not a general expression</p>\n\n<p>One improvement I would make is to use <em>interpolation</em> instead of string concatenation</p>\n\n<pre><code>my $lang   = 'de';\nmy $method = \"internet_$lang\";\nmarkdown($rs-&gt;$method);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "edited": false, "score": 0, "creation_date": 1499351277, "post_id": 44930402, "comment_id": 76878678, "body": "Thanks, it&#39;s the answer to what I asked. Although in the context of the template I will now stick to the original two-liner for readability (as already pointed out above in the comments."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1499268507, "creation_date": 1499268507, "answer_id": 44930402, "question_id": 44922016, "link": "https://stackoverflow.com/questions/44922016/compose-a-method-name-with-a-variable/44930402#44930402", "title": "Compose a method name with a variable", "body": "<p>Use a ref-deref. This is analogue to the <a href=\"http://p3rl.org/perlsecret#Baby-cart\" rel=\"nofollow noreferrer\">baby cart</a>.</p>\n\n<pre><code>$rs-&gt;${\\\"internet_$lang\"}\n$rs-&gt;${\\('internet_' . $lang)}\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 44930402, "answer_count": 3, "score": 0, "last_activity_date": 1499268507, "creation_date": 1499246397, "last_edit_date": 1499247816, "question_id": 44922016, "link": "https://stackoverflow.com/questions/44922016/compose-a-method-name-with-a-variable", "title": "Compose a method name with a variable", "body": "<p>I have this code in a Mojolicious template:</p>\n\n<pre><code>my $lang = 'de'; # de, en, ...\n% $col = 'internet' . '_' . $lang; \n%== markdown($rs-&gt;$col); # outputs correctly the content of the column internet_de\n</code></pre>\n\n<p>Is there a way to combine the lines 2 and 3 into something like:</p>\n\n<pre><code>%== markdown($rs-&gt;'internet' . '_' . $lang); # syntax error at template ..., near \"-&gt;'internet'\"\n</code></pre>\n"}, {"tags": ["perl", "activestate"], "comments": [{"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1499244604, "post_id": 44919054, "comment_id": 76818280, "body": "simbabque:- Only filter this question, But not put any answer LOL."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1499286849, "post_id": 44919054, "comment_id": 76847204, "body": "Why are you writing to files instead of simply doing all you want in one go? I.e. push records that have a date into one, others into another array, then sort first array, write out result, done? Also, I would prefer using DateTime or something similar to sort by date."}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1499344047, "post_id": 44919054, "comment_id": 76872689, "body": "could you give any one example?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1499641426, "post_id": 44919054, "comment_id": 76977753, "body": "You seem to be opening the file twice, once to write all the records with date into another file, once to write the records without date into a file. You then open the first file you wrote, read all the records again, sort them and write them to yet another file. Why not go through all records, putting the dated records in one array, non-dated into another, sort the dated ones, and write the results to a file in one go?"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1499669834, "post_id": 44919054, "comment_id": 76984620, "body": "bytepusher @ if i use below technique to sort in memory then produced an error &quot;out of Memory&quot; :-  <code>my @sorted = map $_-&gt;[0],     sort { $a-&gt;[-2] cmp $b-&gt;[-2] }     map [$_, split &#47;\\|&#47; ],     &lt;read_file&gt;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1499833791, "post_id": 45020831, "comment_id": 77070640, "body": "bytepusher @ Is there any way to connect you directly?"}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 1, "last_activity_date": 1499717709, "creation_date": 1499717709, "answer_id": 45020831, "question_id": 44919054, "link": "https://stackoverflow.com/questions/44919054/sort-all-records-according-to-modified-date-and-time/45020831#45020831", "title": "Sort all records according to modified date and time", "body": "<p>As you pointed out doing everything in memory is not an option on your machine. However, I do not see why you are first sorting the dates,\nto then grep all records with that date, instead of sorting all of those records on the date.</p>\n\n<p>I also suspect that if you were to go through the original file line by line and not in one huge map sort split map, you might save some memory,\nbut I'll leave that up to you to try - it would save you creating the files and then re-parsing things.</p>\n\n<p>I would suggest doing 2 + 3 in one go:</p>\n\n<p>Skip building @modi_date ( somewhere not visible to us :/ ).</p>\n\n<pre><code>my $mdt_fn = 'with_mdt.txt'; # &lt;- whatever name you gave that file?\nopen ( my $fh, '&lt; :encoding(UTF-8)', $mdt_fn ) \n    or die \"could not open file '$mdt_fn' to read: $!\"; \n\nmy $dt_parser = DateTime::Format::Strptime-&gt;new(\n   pattern =&gt; '%m/%d/%Y %r',\n);\n\n# get all records from file. To ensure we only need to parse the line once,\n# store the datetime in a hashref.\nmy @records;\nwhile ( my $line = &lt;$fh&gt; ){\n    push @records, {\n        dt     =&gt; _dt_from_record($line),\n        record =&gt; $line,\n    };\n}\n\n# If you wanted to CMP rather than doing datetime comparison,\n# adapt _dt_from_record and use 'cmp' instead of '&lt;=&gt;'\n@records = sort{ $a-&gt;{dt} &lt;=&gt; $b-&gt;{dt} }@records;\n\nopen ( my $out_fh, '&gt; :encoding(UTF-8)', 'sorted.txt') or \n    die \"could not open file to write to: $!\";\n\n# Or reverse first if you want latest to oldest\nprint $out_fh $_-&gt;{record}.\"\\n\" for @records;\nclose $out_fh;\n\n# I prefer using DateTime for this.\n# Using a parser will alert me if some date was set, but cannot be parsed.\n# If you want to spare yourself some additional time,\n# why not store the parsed date in the file. However, I doubt this takes long.\n\nsub _dt_from_record {\n\n    my $record = shift;\n    $record =~ /MDT_([^\\|]+)/;\n    return $dt_parser-&gt;parse_datetime($1);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1499769377, "creation_date": 1499769377, "answer_id": 45032105, "question_id": 44919054, "link": "https://stackoverflow.com/questions/44919054/sort-all-records-according-to-modified-date-and-time/45032105#45032105", "title": "Sort all records according to modified date and time", "body": "<p>Finally i done it.\nComplete code is :-</p>\n\n<pre><code>use warnings;\nuse strict;\nuse 5.010;\nuse Cwd;\nbinmode STDOUT, \":utf8\";\nuse Date::Simple ('date', 'today');\nuse Time::Simple;\nuse Encode;\nuse Time::Piece;\nuse Win32::Console::ANSI;\nuse Term::ANSIScreen qw/:color /;\nuse File::Copy;\n\nBEGIN {our $start_run = time();\n    my $Start = localtime;\n    print colored ['bold green'], (\"\\nstart time :- $Start\\n\");\n}\n##vairable\nmy $current_dir = getcwd();\nmy $current_in = $ARGV[0];\nmy $current_ou = $ARGV[1];\nmy @un_ext_file;\nmy @un_ext_file1;\nmy $current_data =today();\nmy $time   = Time::Simple-&gt;new();\nmy $hour   = $time-&gt;hours;\nmy $minute = $time-&gt;minutes;\nmy $second = $time-&gt;seconds;\nmy $current_time = \"$hour\".\"-\".\"$minute\".\"-\".\"$second\";\nmy $ren_folder = \"output_\".\"$current_data\".\"_\".\"$current_time\";\n\n##check for output name DIR\nopendir(DIR1, $current_ou);\nmy @current_ou_folder = readdir(DIR1);\nclosedir(DIR1);\nforeach my $entry (@current_ou_folder)\n{\n    if ($entry eq \"output\")\n    {\n        move \"$current_ou/output\" , \"$current_ou/$ren_folder\";\n        mkdir \"$current_ou/output\";\n    }\n    else\n    {\n        mkdir \"$current_ou/output\";\n    }\n}\n\nopendir(DIR, $current_in);\nmy @files_and_folder = readdir(DIR);\nclosedir(DIR);\nforeach my $entry (@files_and_folder)\n{\n    next if $entry eq '.' or $entry eq '..';\n    next if -d $entry;\n    push(@un_ext_file1, $entry);\n}\n\n##### check duplicate file name\nmy %seen;\nmy @file_test;\nforeach my $file_name (@un_ext_file1)\n{\n    if ($file_name =~ /(.*)\\.([a-z]+)$/)\n    {\n        push (@file_test, $1);\n    }\n    else\n    {\n        push (@file_test, $file_name);\n    }\n}\nforeach my $string (@file_test)\n{\n    next unless $seen{$string}++;\n    print \"'$string' is duplicated.\\n\";\n}\n\n##collect all file from array\nforeach my $file_name (@un_ext_file1)\n{\n    my $REC_counter=0;\n    if ($file_name =~ /(.*)\\.([a-z]+)$/)               #####work for all extension\n    {\n        my $file_name_with_out_ext = $1;\n        my @modi_date_not_found;\n        eval{\n        #####read source file\n\n        #####First short file date wise (old date appear first then new date apper in last)\n        ##### To get modifiedDate from the file\n        open read_file, '&lt;:encoding(UTF-8)', \"$current_in/$file_name\" || die \"file found $!\";\n        my @Dt_ModifiedDate = grep { $_ =~ /MDT_([0-9]+)\\/([0-9]+)\\/([0-9]+) ([0-9]+):([0-9]+):([0-9]+) ([A-Z]+)/i} &lt;read_file&gt;;\n        my $doc_MD = new IO::File(\"&gt;$current_ou/output/$file_name_with_out_ext.ModifiedDate\");\n        $doc_MD-&gt;binmode(':utf8');\n        print $doc_MD @Dt_ModifiedDate;\n        $doc_MD-&gt;close;\n        close (read_file);\n        @Dt_ModifiedDate=undef;  ##### free after use\n        print colored ['bold green'], (\"\\n\\tAll ModifiedDate data Filtered\\n\\n\");\n\n        ##### To get un-modifiedDate from the file\n        open read_file, '&lt;:encoding(UTF-8)', \"$current_in/$file_name\" || die \"file found $!\";\n        my @un_ModifiedDate = grep { $_ !~ /MDT_([0-9]+)\\/([0-9]+)\\/([0-9]+) ([0-9]+):([0-9]+):([0-9]+) ([A-Z]+)/} &lt;read_file&gt;;\n        my $doc_UMD = new IO::File(\"&gt;$current_ou/output/$file_name_with_out_ext.unModifiedDate\");\n        $doc_UMD-&gt;binmode(':utf8');\n        print $doc_UMD @un_ModifiedDate;\n        $doc_UMD-&gt;close;\n        close (read_file);\n        @un_ModifiedDate=undef;  ##### free after use\n        print colored ['bold green'], (\"\\n\\tAll unModifiedDate data Filtered\\n\\n\\n\\n\");\n\n        ##### Read ModifiedDate\n        open read_file_ModifiedDate, '&lt;:encoding(UTF-8)', \"$current_ou/output/$file_name_with_out_ext.ModifiedDate\" || die \"file found $!\";\n        my @all_ModifiedDate = &lt;read_file_ModifiedDate&gt;;\n        close(read_file_ModifiedDate);\n\n        ##### write in sotred_data file ModifiedDate after sorting all data.\n        my $doc1 = new IO::File(\"&gt;$current_ou/output/$file_name_with_out_ext.sorted_data\");\n        $doc1-&gt;binmode(':utf8');\n        print $doc1 sort { (toISO8601($a)) cmp (toISO8601($b)) } @all_ModifiedDate;\n        $doc1-&gt;close;\n\n        ##### Read sorted_data and do in reverse order and then read unModifiedDate data and write in final file.\n        open read_file_ModifiedDate, '&lt;:encoding(UTF-8)', \"$current_ou/output/$file_name_with_out_ext.sorted_data\" || die \"file found $!\";\n        my @all_sorted_data = &lt;read_file_ModifiedDate&gt;;\n        close(read_file_ModifiedDate);\n        @all_sorted_data = reverse (@all_sorted_data);\n\n        open read_file_ModifiedDate, '&lt;:encoding(UTF-8)', \"$current_ou/output/$file_name_with_out_ext.unModifiedDate\" || die \"file found $!\";\n        my @all_unModifiedDate = &lt;read_file_ModifiedDate&gt;;\n        close(read_file_ModifiedDate);\n\n        my $doc_final = new IO::File(\"&gt;$current_ou/output/$1.txt\");\n        $doc_final-&gt;binmode(':utf8');\n        print $doc_final @all_sorted_data;\n        print $doc_final @all_unModifiedDate;\n        $doc_final-&gt;close;\n\n        unlink(\"$current_ou/output/$file_name_with_out_ext.ModifiedDate\");\n        unlink(\"$current_ou/output/$file_name_with_out_ext.sorted_data\");\n        unlink(\"$current_ou/output/$file_name_with_out_ext.unModifiedDate\");\n        }\n    }\n}\n\n#####Process Complete.\nsay \"\\n\\n---------------------------------------------\";\nprint colored ['bold green'], (\"\\tProcess Completed\\n\");\nsay \"---------------------------------------------\\n\";\n\nget_time();\n\nsub toISO8601\n{\n    my $record = shift;\n    $record =~ /MDT_([^\\|]+)/;\n    return(Time::Piece-&gt;strptime($1, '%m/%d/%Y %I:%M:%S %p')-&gt;datetime);\n}\n\nsub get_time\n{\n    my $end_run = time();\n    my $run_time = $end_run - our $start_run;\n    #my $days = int($sec/(24*60*60));\n    my $hours = ($run_time/(60*60))%24;\n    my $mins =($run_time/60)%60;\n    my $secs = $run_time%60;\n\n    print \"\\nJob took\";\n    print colored ['bold green'], (\" $hours:$mins:$secs \");\n    print \"to complete this process\\n\";\n\n    my $End = localtime;\n    print colored ['bold green'], (\"\\nEnd time :- $End\\n\");\n}\n</code></pre>\n\n<p>All process is done with-in :-- 20 min.</p>\n\n<p>specially i am V. very thank-full to @bytepusher.</p>\n"}], "owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499769377, "creation_date": 1499237962, "last_edit_date": 1499261619, "question_id": 44919054, "link": "https://stackoverflow.com/questions/44919054/sort-all-records-according-to-modified-date-and-time", "title": "Sort all records according to modified date and time", "body": "<p>I have some problem with my code. I have 1 GB records, in which I have to sort according to date and time. Records are look like :</p>\n\n<blockquote>\n  <p><code>TYP_journal article|KEY_1926000001|AED_|TIT_A Late Eighteenth-Century Purist|TPA_|GLO_Pronouncements of George Campbell and his contemporaries which time has set aside.|AUT_Bryan, W. F.|AUS_|AFF_|RES_|IED_|TOC_|FJN_Studies in Philology|ISN_0039-3738|ESN_|PLA_Chapel Hill, NC|URL_|DAT_1926|VOL_23|ISS_|EXT_358-370|CPP_|FSN_|ISN_|PLA_|SNO_|PUB_|IBZ_|PLA_|PYR_|PAG_|DAN_|DGI_|DGY_|OFP_|OFU_|FSS_|PDF_|LIB_|INO_|FAU_|INH_|IUR_|INU_|CDT_9/15/2003 3:12:28 PM|MDT_5/16/2017 9:18:40 AM|</code></p>\n</blockquote>\n\n<p>I sort these records using <code>MDT_5/16/2017 9:18:40 AM</code>. </p>\n\n<p>I used below technique:</p>\n\n<ol>\n<li><p>I filter file, which have MDT_ or not (create two file with <code>MDT_</code> and without <code>MDT_</code>).</p>\n\n<p>For MDT data code:</p>\n\n<pre><code>open read_file, '&lt;:encoding(UTF-8)', \"$current_in/$file_name\" || die \"file found $!\";\nmy @Dt_ModifiedDate = grep { $_ =~ /MDT_([0-9]+)\\/([0-9]+)\\/([0-9]+) ([0-9]+):([0-9]+):([0-9]+) ([A-Z]+)/i} &lt;read_file&gt;;\nmy $doc_MD = new IO::File(\"&gt;$current_ou/output/$file_name_with_out_ext.ModifiedDate\");\n$doc_MD-&gt;binmode(':utf8');\nprint $doc_MD @Dt_ModifiedDate;\n$doc_MD-&gt;close;\nclose (read_file);\n</code></pre>\n\n<p>For Un_MDT data code:</p>\n\n<pre><code>open read_file, '&lt;:encoding(UTF-8)', \"$current_in/$file_name\" || die \"file found $!\";\nmy @un_ModifiedDate = grep { $_ !~ /MDT_([0-9]+)\\/([0-9]+)\\/([0-9]+) ([0-9]+):([0-9]+):([0-9]+) ([A-Z]+)/} &lt;read_file&gt;;\nopen read_file, '&lt;:encoding(UTF-8)', \"$current_in/$file_name\" || die \"file found $!\";\nmy $doc_UMD = new IO::File(\"&gt;$current_ou/output/$file_name_with_out_ext.unModifiedDate\");\n$doc_UMD-&gt;binmode(':utf8');\nprint $doc_UMD @un_ModifiedDate;\n$doc_UMD-&gt;close;\nclose (read_file);\n</code></pre></li>\n<li><p>From <code>MDT_</code> contains file, I collect all date and time and sort them and then unique.</p>\n\n<pre><code>@modi_date = map $_-&gt;[0],\nsort { uc($a-&gt;[1]) cmp uc($b-&gt;[1]) } map { [ $_, toISO8601($_) ] } @modi_date;\n@modi_date = reverse (@modi_date);\n@modi_date = uniq (@modi_date);\n</code></pre></li>\n<li><p>according to sorted date and time I grep all records from MDT_file. And finally create final file.</p>\n\n<pre><code>my $doc1 = new IO::File(\"&gt;$current_ou/output/$file_name_with_out_ext.sorted_data\");\n$doc1-&gt;binmode(':utf8');\nforeach my $changes (@modi_date)\n{\nchomp($changes);\n$Count_pro++;\n@ab = grep (/$changes/, @all_data_with_time);\nprint $doc1 (\"@ab\\n\");\n$progress_bar-&gt;update($Count_pro);\n}\n$doc1-&gt;close;\n</code></pre></li>\n</ol>\n\n<p>But this process take more time. Is there any way to do in short time?</p>\n"}, {"tags": ["perl", "cmd"], "comments": [{"owner": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "edited": false, "score": 1, "creation_date": 1499236911, "post_id": 44918617, "comment_id": 76813318, "body": "I replaced your command with <code>ls</code> and was able to see the output dumped in <b>output.xls</b> file. May be your command doesn&#39;t return any output?"}, {"owner": {"reputation": 23, "user_id": 7444774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/358b16365a82a26946eed2e7bca8c35f?s=128&d=identicon&r=PG&f=1", "display_name": "shreyas vispute", "link": "https://stackoverflow.com/users/7444774/shreyas-vispute"}, "reply_to_user": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "edited": false, "score": 0, "creation_date": 1499237860, "post_id": 44918617, "comment_id": 76813845, "body": "yes no data is dumped in output.xls only file is created"}, {"owner": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "edited": false, "score": 1, "creation_date": 1499237955, "post_id": 44918617, "comment_id": 76813906, "body": "If you manually execute <code>im viewissue</code> command, do you see any output? Try a different command and see if you get output. I suspect that this command doesn&#39;t return any output."}, {"owner": {"reputation": 23, "user_id": 7444774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/358b16365a82a26946eed2e7bca8c35f?s=128&d=identicon&r=PG&f=1", "display_name": "shreyas vispute", "link": "https://stackoverflow.com/users/7444774/shreyas-vispute"}, "reply_to_user": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "edited": false, "score": 0, "creation_date": 1499242583, "post_id": 44918617, "comment_id": 76816928, "body": "yes the command is right it returns me what it should, what concerns me is i want to transfer that output to excel without the command line"}, {"owner": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "edited": false, "score": 0, "creation_date": 1499251878, "post_id": 44918617, "comment_id": 76823731, "body": "Could you replace <code>system($mks_cmd)</code> with <code>`$mks_cmd`</code> and see if it works?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1499299413, "post_id": 44918617, "comment_id": 76851894, "body": "I find the single quotes around $User and $Password unusual, are you certain they need to be there?"}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1499323854, "post_id": 44918617, "comment_id": 76859063, "body": "I would first add this line to the end <code>close($file)</code>. If that doesn&#39;t work, then you&#39;ll want to determine if your version of Capture::Tiny is up-to-date, the current version is 0.46. There are multiple issues logged against this module that might explain what&#39;s going on."}, {"owner": {"reputation": 23, "user_id": 7444774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/358b16365a82a26946eed2e7bca8c35f?s=128&d=identicon&r=PG&f=1", "display_name": "shreyas vispute", "link": "https://stackoverflow.com/users/7444774/shreyas-vispute"}, "edited": false, "score": 0, "creation_date": 1499421207, "post_id": 44918617, "comment_id": 76910455, "body": "mks integrity needs username and password in command line for yout to fully automate the process instead of intervention"}], "owner": {"reputation": 23, "user_id": 7444774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/358b16365a82a26946eed2e7bca8c35f?s=128&d=identicon&r=PG&f=1", "display_name": "shreyas vispute", "link": "https://stackoverflow.com/users/7444774/shreyas-vispute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499236541, "creation_date": 1499236541, "question_id": 44918617, "link": "https://stackoverflow.com/questions/44918617/how-do-i-redirect-output-to-excel-file-from-console-through-perl-script", "title": "how do i redirect output to excel file from console through perl script?", "body": "<pre><code> #!/usr/bin/perl\n use strict;\n use autodie;\n use Capture::Tiny 'capture_merged';\n\n my $ID=732636;\n my $User=\"vispsh1\";\n my $Password=\"monitor1\";\n  print \"viewing item...\\n\";\n\n open (my $file, '&gt;', 'output.xls') or die \"cannot open file\";\n my $mks_cmd=\"im viewissue --user='$User' --password='$Password' $ID\";\n print $file capture_merged { system($mks_cmd)};\n # print $mks_cmd;\n print \"Done\\n\";\n</code></pre>\n\n<p>This is my script, the file is created but, it is not redirecting anything to output.xls, i can do it by using below command</p>\n\n<pre><code> C:\\perl&gt;perl -w mks.pl &gt; sample.xls\n</code></pre>\n\n<p>but, i want to do it through the script to automate it fully!\nPlease help, Thankyou.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1499236436, "post_id": 44917596, "comment_id": 76813019, "body": "So <code>$dir</code> is the location of the different version of the module?"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1499236607, "post_id": 44917596, "comment_id": 76813136, "body": "No, the different location will be calculated based on <code>$dir</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499241205, "post_id": 44917596, "comment_id": 76816024, "body": "How do you expect <code>use A::B;</code> to load the module <i>before</i> you provide the directory from which it should be loaded?"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1499241783, "post_id": 44917596, "comment_id": 76816412, "body": "INC is already set for the tool.  It loads A::B from the standard location based on the set INC.  If the user is using <code>&#47;home&#47;myTool&#47;2.0</code>, INC is set to <code>&#47;home&#47;myTool&#47;2.0&#47;lib</code> already.  However, I might want <code>&#47;home&#47;myTool&#47;1.0&#47;lib&#47;A&#47;B.pm</code> to be loaded instead.  (I hope that makes sense)"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1499238650, "post_id": 44918739, "comment_id": 76814310, "body": "What I meant by version is the same module in different locations. For instance I have <code>&#47;home&#47;1.0&#47;lib&#47;A&#47;B.pm</code>  and <code>&#47;home&#47;2.0&#47;lib&#47;A&#47;B.pm</code>.  The user simply says <code>use A::B</code>, and it&#39;s possible he&#39;s using v2.0 but I require that  <code>&#47;home&#47;1.0&#47;lib&#47;A&#47;B.pm</code> be picked up and used, because (say) <code>$dir</code> passed to the constructor was created using v1.0."}, {"owner": {"reputation": 1419, "user_id": 203856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f1108eabf701ed53b05a875e3d8203?s=128&d=identicon&r=PG", "display_name": "larsen", "link": "https://stackoverflow.com/users/203856/larsen"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 1, "creation_date": 1499241644, "post_id": 44918739, "comment_id": 76816326, "body": "What if you have two instances of <code>A::B</code> are created with different values of <code>$dir</code>?  If one invokes a method on those instances, what code should be executed? Even assuming we&#39;ve devised a way to dinamically reload a module based on a parameter passed to one of its methods, Perl can only have one version of <code>A::B</code> at any given moment. Thus, depending on what order you instantiate the objects, at the end they would all behave the same (I mean, as 1.0 or 2.0). Hence the idea of having <i>two</i> different names (or, in other words, incorporating the version in the class name)."}], "tags": [], "owner": {"reputation": 1419, "user_id": 203856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f1108eabf701ed53b05a875e3d8203?s=128&d=identicon&r=PG", "display_name": "larsen", "link": "https://stackoverflow.com/users/203856/larsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1499237447, "last_edit_date": 1499237447, "creation_date": 1499236941, "answer_id": 44918739, "question_id": 44917596, "link": "https://stackoverflow.com/questions/44917596/can-a-module-be-reloaded-from-a-different-location-from-within-the-module/44918739#44918739", "title": "Can a module be reloaded from a different location, from within the module?", "body": "<p>You can't have different versions of a module with the same name.</p>\n\n<p>What I would do instead is having different subclasses of <code>A::B</code>, and a <em>Factory</em> class that instantiates objects of the appropriate class, choosing and loading it based on the factory invocation parameters.</p>\n\n<p>For example:</p>\n\n<pre><code>my $out = A::B::Factory-&gt;create( dir =&gt; $dir );\n# $out is a A::B::Foo or A::B::Bar depending on $dir\n</code></pre>\n\n<p>In the factory class:</p>\n\n<pre><code>package A::B::Factory;\nuse UNIVERSAL::require;\n\nsub create {\n  my (undef, %params) = @_;\n\n  my $dir = $params{ dir };\n\n  # some strategy to decide which class has to be used.\n  # $class will be a string like \"A::B::Foo\" or \"A::B::Bar\"\n  # or in general the same of an existing class in your system.\n  my $class = ...; \n\n  $class-&gt;use;\n  return $class-&gt;new();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1499237459, "creation_date": 1499237459, "answer_id": 44918881, "question_id": 44917596, "link": "https://stackoverflow.com/questions/44917596/can-a-module-be-reloaded-from-a-different-location-from-within-the-module/44918881#44918881", "title": "Can a module be reloaded from a different location, from within the module?", "body": "<p>If you allow a different package name of the other version internally (while the user still uses <code>A::B</code> and does not know about the different names of the same module), you could achieve this. For example, let's say the different version of the module is internally called <code>A::B::C</code>. Then package <code>A::B</code> could be like this:</p>\n\n<pre><code>package A::B;\n\nsub new {\n    my ( $class, %opts ) = @_;\n\n    if ( $opts{dir} eq \"dir1\" ) {\n        require A::B::C;\n        return A::B::C-&gt;new();\n    }\n    else {\n        my $self = {};\n        return bless $self, $class;\n    }\n}\n\n1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1499242157, "post_id": 44920206, "comment_id": 76816670, "body": "Thank you.  The third (edited) approach, using submodules, is what I need.  Much appreciated!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 1, "creation_date": 1499242216, "post_id": 44920206, "comment_id": 76816709, "body": "(Edited. It&#39;s now the third)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1499242193, "last_edit_date": 1499242193, "creation_date": 1499241367, "answer_id": 44920206, "question_id": 44917596, "link": "https://stackoverflow.com/questions/44917596/can-a-module-be-reloaded-from-a-different-location-from-within-the-module/44920206#44920206", "title": "Can a module be reloaded from a different location, from within the module?", "body": "<p>Messy:</p>\n\n<pre><code>BEGIN {\n   my $version = '2.0';\n   require \"/home/$version/lib/A/B.pm\";\n}\n\nmy $obj = A::B-&gt;new();\n</code></pre>\n\n<hr>\n\n<p>If it's an external entity controlling the choice, then simply adjust Perl's library search path.</p>\n\n<pre><code>version=2.0\nPERL5LIB=\"/home/$version/lib\" script\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use A::B qw( );\n\nmy $obj = A::B-&gt;new();\n</code></pre>\n\n<hr>\n\n<p>If it's an internal choice, use submodules instead.</p>\n\n<pre><code>package A::B;\n\nsub new {\n   my ($class, $version) = @_;\n   $version =~ s/\\./_/g;\n   $class .= \"::V$version\";\n   require $class;\n   return $class-&gt;new(@_);\n}\n\n1;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use A::B qw( );\n\nmy $version = '2.0';\nmy $obj = A::B-&gt;new($version);\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 44920206, "answer_count": 3, "score": 0, "last_activity_date": 1499242193, "creation_date": 1499232224, "last_edit_date": 1499232691, "question_id": 44917596, "link": "https://stackoverflow.com/questions/44917596/can-a-module-be-reloaded-from-a-different-location-from-within-the-module", "title": "Can a module be reloaded from a different location, from within the module?", "body": "<p>I have an API A::B that's \"use\"d by others in their scripts like so:</p>\n\n<pre><code>use A::B;\nmy $out = A::B-&gt;new(dir =&gt; $dir);\n...\n</code></pre>\n\n<p>Now, I want a <em>different</em> version of A::B to be used depending on some parameter of the attribute $dir passed to the constructor.  The user of this module has no need to know this - all he has to do is </p>\n\n<blockquote>\n  <p>use A::B</p>\n</blockquote>\n\n<p>in his code, and expect that the module is picked up from the right location.  Is it possible to do this?</p>\n"}, {"tags": ["perl", "security"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499228776, "post_id": 44915330, "comment_id": 76809984, "body": "I thought Safe was dropped from PostgreSQL because it breaks UTF-8, not from any security issues."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499241311, "post_id": 44915330, "comment_id": 76816096, "body": "Do you have a link to the talk?"}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499254549, "post_id": 44915330, "comment_id": 76825574, "body": "@simbabque <a href=\"http://code.activestate.com/lists/perl5-porters/236848/\" rel=\"nofollow noreferrer\">code.activestate.com/lists/perl5-porters/236848</a> it doesn&#39;t get more clear than: lexer bugs are now security bugs"}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499272504, "post_id": 44915330, "comment_id": 76839110, "body": "@Borodin This <a href=\"https://github.com/postgres/postgres/commit/1f474d299d\" rel=\"nofollow noreferrer\">commit</a> says they are removing Safe because it is &quot;fundamentally insecure&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499272611, "post_id": 44915330, "comment_id": 76839181, "body": "@Chas.Owens: Thank you. I hadn&#39;t heard of that. It&#39;s splendidly ironic."}], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499212554, "creation_date": 1499212554, "question_id": 44915330, "link": "https://stackoverflow.com/questions/44915330/what-is-the-security-issue-with-the-safe-module", "title": "What is the security issue with the Safe module?", "body": "<p>I have seen some talk recently about how the <a href=\"http://search.cpan.org/dist/Safe/Safe.pm\" rel=\"nofollow noreferrer\">Safe</a> module has security flaws (eg it is being removed from PostgreSQL).  What is the flaw?</p>\n"}, {"tags": ["python", "python-3.x", "perl", "scripting", "gpib"], "comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1499198614, "post_id": 44913119, "comment_id": 76803062, "body": "Well...in Perl chomp is a function that should (depending on the version of PERL) delete a newline from the end of a variable as long as the variable contains a string.  It shouldn&#39;t do anything to a string not ending in a newline.  Chomp will return the number of characters that got chomped...    When you ask about a gpib status you are talking about (probably) a General Purpose Interface Board that your program is supposed to communicate across to do its business.   You really have a big learning curve to get to the top of PERL like this...just saying"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1499200531, "post_id": 44913119, "comment_id": 76803764, "body": "@Drt &quot;Perl&quot;, not PERL ;) Perl is the name of the language, <code>perl</code> is the name of the actual binary. Neither are acronyms."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1499269218, "post_id": 44913119, "comment_id": 76836970, "body": "@stevieb  Thanks.  I stated PERL for emphasis thinking about how anybody would get over that hump let along convert from Perl to Python....  Your comments are correct."}, {"owner": {"reputation": 91, "user_id": 8255626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0e79cf55839729a8d483a837158d25?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahim rupawala", "link": "https://stackoverflow.com/users/8255626/ibrahim-rupawala"}, "edited": false, "score": 0, "creation_date": 1499314602, "post_id": 44913119, "comment_id": 76855521, "body": "Thanks a ton Dr t and stevieb. I was able to convert the same to python with the help of your comments"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 8255626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0e79cf55839729a8d483a837158d25?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahim rupawala", "link": "https://stackoverflow.com/users/8255626/ibrahim-rupawala"}, "edited": false, "score": 0, "creation_date": 1499314740, "post_id": 44913276, "comment_id": 76855557, "body": "Thanks Blotosmetek. I was trying to understand s/\\+//g since long. but this helped me figure out exactly what I need to do in python"}], "tags": [], "owner": {"reputation": 11905, "user_id": 2897372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e114bd942d7cc21603ae50d2e73d81?s=128&d=identicon&r=PG", "display_name": "B\u0142otosm\u0119tek", "link": "https://stackoverflow.com/users/2897372/b%c5%82otosm%c4%99tek"}, "is_accepted": false, "score": 0, "last_activity_date": 1499198593, "last_edit_date": 1499198593, "creation_date": 1499198174, "answer_id": 44913276, "question_id": 44913119, "link": "https://stackoverflow.com/questions/44913119/understanding-perl-script-for-gpib-interface/44913276#44913276", "title": "Understanding Perl Script for GPIB Interface", "body": "<p>Ad 1. <code>/Error/</code> is a regular expression matching any string that contains \"Error\" as its substring; in this context (<code>if(/Error/</code>) it is evaluated as boolean expression, ie. it is true if match is found in <code>$_</code> variable;</p>\n\n<p>Ad. 2. <code>chomp</code> removes trailing newline character from its argument, or in lack of argument, from <code>$_</code> variable; <code>s/\\+//g;</code> replaces any <code>+</code> signs found in <code>$_</code> with nothing (ie. removes them). As you might have already noticed, many Perl constructs operate on <code>$_</code> if not specified otherwise.</p>\n\n<p><code>get_gpib_status</code> is defined in your script - <code>sub get_gpib_status</code> is the beginning of definition (in Perl, functions are defined using <code>sub</code> keyword, stands for \"subroutine\").</p>\n\n<p>And finally, I offer my sincere condolences. Giving the task of rewriting a program from one language to another to someone without prior experience with either language is probably not the stupidest managerial decision I've heard of, but high on the list.</p>\n"}], "owner": {"reputation": 91, "user_id": 8255626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0e79cf55839729a8d483a837158d25?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahim rupawala", "link": "https://stackoverflow.com/users/8255626/ibrahim-rupawala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499204681, "creation_date": 1499197156, "last_edit_date": 1499204681, "question_id": 44913119, "link": "https://stackoverflow.com/questions/44913119/understanding-perl-script-for-gpib-interface", "title": "Understanding Perl Script for GPIB Interface", "body": "<p>I am new to the perl and python. As a part of my job currently I am asked to convert the perl script to python. The purpose of this script is to automate the task of the magnum tester and parametric analyzer. Is any of you able to understand what the get_gpib_status function trying to do ??. Specific questions are</p>\n\n<ol>\n<li>What does if(/Error/) mean in perl ?</li>\n<li><p>What does it mean by   </p>\n\n<pre><code>        chomp;\n        s/\\+//g;\n        $value = $_;\n        $foundError = 0;\n</code></pre>\n\n<p>in perl?. What is the python equivalent of the get_gpib_status function ??.</p>\n\n<p>Any kind of help is highly appreciated. Thanks in advance. The Script is as shown below.</p>\n\n<pre><code>BEGIN {unshift(@INC, \".\" , \"..\" , \n\"\\\\Micron\\\\Nextest\\\\perl_modules\");}\n\n\nuse runcli;                                                                     \n# Enable input from perl script as nextest cli command, Runcli is the \ncommand \nthat you\u2019ll use to communicate with the tester\nuse getHost;                                                                    \n# To latch in module/ \"library into current script, here the \ngetHost.pm \nis \nloaded, used once on nextest system\n\n\n\n#open FILE,\"&gt;\",\"iv.txt\" or die $!;                                              \n# Make file ready for reading from FILE\n\n\n$k=148;                                                                         \n# Time period T = 38ns corresponds to data value of 140\n#$i=0;\nwhile($k&lt;156)\n{\n$i=3;\nwhile($i&lt;4)\n{\n#$logfile = \"vpasscp8stg_SS_vppmode\".\"stg\".\"$i\".\"freq\".\"$k\".\".txt\";             \n# Give the name to the logfile\n#open(LOG,\"&gt;$logfile\") or die $!;                                               \n# Makes the file ready for reading from LOG\n\n\n#******************* SUBS ****************************\n\nif($i==3)\n{\n\nruncli(\"gpibinit;\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:MODE SWEEP\\\")\");                              \n# PAGE, CHANnel, MODE, Set the mode to sweep\n\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU1:VNAME 'Vout'\\\")\");                       \n# Source Monitor Unit, voltage name Vout\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU1:INAME 'Iout'\\\")\");                       \n# current name Iout\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU1:MODE V\\\")\");                             \n# voltage output node\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU1:FUNCTION VAR1\\\")\");                      \n# function Variable\n\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU2:VNAME 'Vcc'\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU2:INAME 'Icc'\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU2:MODE V\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU2:FUNCTION CONSTANT\\\")\");                  \n# function constant\n\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU3:VNAME 'Vpp'\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU3:INAME 'Ipp'\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU3:MODE V\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU3:FUNCTION CONSTANT\\\")\");\n\n#runcli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU3:DIS\\\")\");\n\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:SMU4:DIS\\\")\");\n\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:VSU1:DIS\\\")\");                                \n# Voltage Source Unit DISabled\n\nruncli(\"gpibsend(0x1,\\\":PAGE:CHAN:VSU2:DIS\\\")\");\n\nruncli(\"gpibsend(0x1,\\\":PAGE:DISP:LIST:SELECT 'Vout'\\\")\");                      \n# DISPlay LIST\nruncli(\"gpibsend(0x1,\\\":PAGE:DISP:LIST:SELECT 'Iout'\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:DISP:LIST:SELECT 'Vcc'\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:DISP:LIST:SELECT 'Icc'\\\")\");\n\n\n\n\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:MODE SINGLE\\\")\");                  \n# Single Stair Sweep\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:SPACING LINEAR\\\")\");               \n# The sweep is incremented (decremented) by the\n# stepsize until the stop value is reached.\n\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:START 2.8\\\")\");                    \n# Setting the sweep range of Vout\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:STOP 18\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:STEP 0.1\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:COMPLIANCE 0.05\\\")\");              \n# Compliance: meaning the stable state of voltage, on the parametric \nanalyzer\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:VAR1:PCOMPLIANCE:STATE \n0\\\")\");         \n# PCOMPLIANCE: Might be the state before the stable state\n\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:DEL 2\\\")\");                                   \n# Delay\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:HTIM 50\\\")\");                                 \n# Hold Time\n\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:CONS:SMU2:SOURCE 3.3\\\")\");              \n# Setting the values for VCC\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:CONS:SMU2:COMP 0.1\\\")\");\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:CONS:SMU3:SOURCE 12\\\")\");               \n# Setting the values for VPP\nruncli(\"gpibsend(0x1,\\\":PAGE:MEAS:SWEEP:CONS:SMU3:COMP 0.1\\\")\");\n\n\nruncli(\"gpibsend(0x1,\\\":PAGE:SCON:SING\\\")\");\n\nsleep(2);\nruncli(\"ctst\");\nruncli(\"stst\");\nsleep(2);\nruncli(\"pu;rs\");\nruncli(\"B16R_vpasscp_vpp.txt()\");\nruncli(\"regaccess(static_load,0x9,0x9,$k)\");                                    \n# Using the Cregs 0x9 to modulate the frequency\nruncli(\"adputr(0xcf,0x03)\");\nruncli(\"rs\");\npoll_4156c();\n}\n\n\n\n\nsub poll_4156c{\nruncli(\"gpibsend(0x1,\\\":STAT:OPER:COND?\\\");\");                                  \n# This command returns the present status of the Operation\n# Status \"CONDITION\" register. Reading this register does not clear \nit.\nruncli(\"gpibreceive(0x1);\");\nwhile((get_gpib_status() &gt; 0)&amp;&amp;($foundError &lt; 1) ){\nsleep(3);\nruncli(\"gpibsend(0x1,\\\":STAT:OPER:COND?\\\")\");\nruncli(\"gpibreceive(0x1);\");\n}\n\n}#end poll_4156c subroutine\n\n\n\n\n\nsub get_gpib_status{\n# get file info\n$host_meas = getHost();                                                         \n# Retrieve the nextest station detail, will return something like \nmav2pt \n- 0014\n$file_meas = $host_meas.\"_temp.cli\";                                            \n# Define the file_meas as the nextest cli temporary file, Contains \nall \nthe text as displayed on Nextest CLI\nopen(STATUS, \"$file_meas\" ) || die(\"Can't open logfile: $!\");\nprint \"\\nSTATUS received from GPIB:\";\nwhile(&lt;STATUS&gt;)\n{\nif(/Error/){\nruncli(\"gpibinit;\");\n$foundError = 1;\n}\nelse\n{\nchomp;\ns/\\+//g;\n$value = $_;\n$foundError = 0;\n}\n} # End of while(&lt;INMEAS&gt;) loop.\nclose(STATUS);\n#print \"value = $value\";\nreturn($value);\n}#End of get_gpib_status subroutine.\n\n\n$i=$i+1;\n}\n$k=$k+8;\n}\n</code></pre></li>\n</ol>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1499198149, "post_id": 44912980, "comment_id": 76802871, "body": "<code>remove this blank paragraph</code> If it&#39;s blank, how do you know it&#39;s a paragraph ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1499198233, "post_id": 44912980, "comment_id": 76802912, "body": "Here is a good way <code>&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;\\s*$</code> to find it. Then replace it. Or if you have many blank paragraphs, then this <code>\\s*(?:&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;\\s*)+$</code>"}, {"owner": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "edited": false, "score": 1, "creation_date": 1499199413, "post_id": 44912980, "comment_id": 76803372, "body": "@sln The blank paragraph <code>&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;</code> in the middle of the text leaves a gap that indicates a &quot;section break&quot; and, yeah, the blank paragraph in the end technically doesn&#39;t make a difference, but I just want to remove anything that&#39;s not useful, so I only want to remove the last instance of it in the end of the code.And unfortunately your regex still picks the other intances. Thanks, anyway!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499199622, "post_id": 44912980, "comment_id": 76803456, "body": "<code>s&#47;&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;\\s*?(?!&lt;p&gt;)&#47;&#47;s</code> should be <code>s&#47;&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;\\s*+(?=(?:(?!&lt;p&gt;).)*\\z)&#47;&#47;s</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1499200328, "post_id": 44912980, "comment_id": 76803686, "body": "<code>And unfortunately your regex still picks the other intances. Thanks, anyway!</code> Well, anyway you&#39;re welcome. Be sure you know what your looking at when you say things like this. The EOS (end of string) anchor insures it doesn&#39;t pick up any other instances..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1499319897, "post_id": 44912980, "comment_id": 76857073, "body": "It seems that you only need to process a fragment of HTML that is obtained by another tool.  I&#39;d just like to let you know that there are excellent Perl modules for parsing HTML.  For instance, see <a href=\"http://search.cpan.org/~kentnl/HTML-Tree-5.06/lib/HTML/TreeBuilder.pm#elementify\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a>, which inherits from a number of others. You can get a taste for what you can do by also looking through <a href=\"http://search.cpan.org/~kentnl/HTML-Tree-5.06/lib/HTML/Element.pm\" rel=\"nofollow noreferrer\">HTML::Element</a>, which it uses heavily."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1499330440, "post_id": 44913495, "comment_id": 76863197, "body": "I got a sense from a comment that they have that HTML fragment in a running program of some sort, perhaps in a string. Then this approach is even more clearly suited.  (There are clearly no trailing HTML document-level tags.)  Btw, I like to stick the <code>open</code> statement inside the <code>do</code> block. There is also no need for <code>close</code> then."}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 1, "last_activity_date": 1499199327, "creation_date": 1499199327, "answer_id": 44913495, "question_id": 44912980, "link": "https://stackoverflow.com/questions/44912980/remove-a-specific-string-only-if-its-in-the-very-end-of-a-code/44913495#44913495", "title": "Remove a specific string only if it&#39;s in the very end of a code", "body": "<p>Short answer: use the <code>$</code> anchor.</p>\n\n<p>Long answer:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $fn = $ARGV[0] or die 'filename required!';\n\n# Not certain what encoding your file is in\nopen (my $fh, '&lt; :encoding(UTF-8)', $fn) \n    or die \"could not open file '$fn': $!\";\n\n# slurp entire file\nmy $content = do{ local $/; &lt;$fh&gt;; };\nclose $fh;\n\n# If it ends with the blank paragraph followed by newline/tab/space,\n# overwrite the file\nif ( $content =~ s /&lt;p&gt;&amp;nbsp;&lt;\\/p&gt;[\\n\\s\\t\\r]*$// ){\n    open (my $fh, '&gt; :encoding(UTF-8)', $fn)\n        or die \"could not open file '$fn' to write: $!\";\n    print $fh $content;\n    close $fh;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "edited": false, "score": 0, "creation_date": 1499202269, "post_id": 44913657, "comment_id": 76804403, "body": "My knowledge of coding is basic at best, so I can&#39;t even try to argue with you. Most of this stuff still goes way over my head most of the time. I only use regex to facilitate my ebook editing occasionally.  Either way, based on your suggestion, I used <code>\\s*(?&gt;&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;\\s*)(?!&lt;p&gt;)\\s*</code> as my search string and <code>\\n</code> as my replace string and it worked!  Thank you very much!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "edited": false, "score": 0, "creation_date": 1499356217, "post_id": 44913657, "comment_id": 76882438, "body": "<code>(?&gt;\\s*&lt;p&gt;&amp;nbsp;&lt;&#47;p&gt;\\s*)(?!&lt;p&gt;)</code> would make more sense."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1499240056, "last_edit_date": 1499240056, "creation_date": 1499200232, "answer_id": 44913657, "question_id": 44912980, "link": "https://stackoverflow.com/questions/44912980/remove-a-specific-string-only-if-its-in-the-very-end-of-a-code/44913657#44913657", "title": "Remove a specific string only if it&#39;s in the very end of a code", "body": "<p>I wouldn't use regexes at all. As you'll see, that's the complicated approach.</p>\n\n<hr>\n\n<p><strong>If you want to check make sure there's no <code>&lt;p&gt;</code> anywhere after the <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*</code></strong></p>\n\n<p>You want to check that none of the the following characters are the start of <code>&lt;p&gt;</code>.</p>\n\n<p>You need to check that all of the following characters aren't the start of <code>&lt;p&gt;</code>.</p>\n\n<p>You want:</p>\n\n<pre><code>s/(?&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*)(?=(?:(?!&lt;p&gt;).)*\\z)//s\n</code></pre>\n\n<p>Other changes:</p>\n\n<ul>\n<li><p>The <code>?</code> in <code>\\s*?</code> makes no sense; you don't want to match the fewest.</p></li>\n<li><p><code>(?&gt;...)</code> prevents the pattern from starting to look for <code>&lt;p&gt;</code> inside of <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*</code>. In this particular pattern (but not the one below), it simply acts as an optimization.</p></li>\n</ul>\n\n<hr>\n\n<p><strong>If you want to check make sure there's no <code>&lt;p&gt;</code> immediately after <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*</code></strong></p>\n\n<p>You want:</p>\n\n<pre><code>s/(?&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*)(?!&lt;p&gt;)//\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "edited": false, "score": 1, "creation_date": 1499296144, "post_id": 44932877, "comment_id": 76851089, "body": "I&#39;m not sure what you mean by &quot;You should not use something you don&#39;t understand.&quot; Isn&#39;t experimenting with something you don&#39;t fully understand part of learning? Specially for someone who&#39;s just beginning? And I really didn&#39;t exactly ask someone &quot;to do it for me&quot;. I tried/searched many different things on my own before I finally yielded and asked for help here (for the very first time, btw). Maybe my approach was wrong, and I apologize for that, but I can&#39;t see what I did so differently from other people here. I appreciate your input, but I think you were unnecessarily harsh in your phrasing."}, {"owner": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "edited": false, "score": 0, "creation_date": 1499296156, "post_id": 44932877, "comment_id": 76851092, "body": "And... Yeah, I&#39;ve been trying to learn regex, but it really doesn&#39;t help when depending on the language and support the tools your are using have, the syntax can differ quite a bit. For instance, I not even could try to use the <code>\\z</code> anchor because it&#39;s not supported by the tools I&#39;m using and, to be honest, I not even knew that <code>\\K</code> existed before. Anyway, thank you for your response and because of that I learned some interesting new things today."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "edited": false, "score": 0, "creation_date": 1499392250, "post_id": 44932877, "comment_id": 76898044, "body": "@CAVR - Yeah, a lot of people here will post any answer for quick points. Unfortunately for you, you don&#39;t know the difference between good and bad. That&#39;s the fallacy of the SO reward system. I will call a banana rotten when I see it which I point out for your benefit. I on the other hand have an interest in seeing people learn regex correctly and not get any bad habits. Regex is a precision instrument, like a chainsaw is. It can carve a sculpture or it can cut your arm off. Come back and re-read my post when you become intermediate level, it will fall into place for you."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1499276895, "creation_date": 1499276895, "answer_id": 44932877, "question_id": 44912980, "link": "https://stackoverflow.com/questions/44912980/remove-a-specific-string-only-if-its-in-the-very-end-of-a-code/44932877#44932877", "title": "Remove a specific string only if it&#39;s in the very end of a code", "body": "<pre><code>EDIT-2.:\n\nBased on a suggestion by ikegami, I used \n\\s*(?&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*)(?!&lt;p&gt;)\\s* as the search string to find only \nthe last blank paragraph (&lt;p&gt;&amp;nbsp;&lt;/p&gt;)of the html code to be \nremoved. What really made the difference in his answer seems to have \nbeen the use of an atomic grouping (?&gt;...). Without it, I was picking \nother instances of the same string from other lines of the code that I\ndidn't want. Not sure why (really not an expert on regex), but that's \nwhat I got from my tests.\n</code></pre>\n\n<p>You should not use something you don't understand.<br>\nIn reality, you should learn regex instead of asking somebody to do it for you.  </p>\n\n<p>Just a short education here, the same is achieved with this regex<br>\n<code>\\s*&lt;p&gt;&amp;nbsp;&lt;/p&gt;(?&gt;\\s*)(?!&lt;p&gt;)\\s*</code><br>\nin that the juxtaposition of these two <code>(?&gt;\\s*)</code> <code>(?!&lt;p&gt;)</code> prevents<br>\nthe engine from giving up a single whitespace to satisfy the assertion.<br>\nIf you had no whitespace between paragraph markers, an atomic group is<br>\nnot necessary.  </p>\n\n<p>To further explore this, the assertion <code>(?!&lt;p&gt;)</code> presumes there exists<br>\na paragraph marker <em>directly</em> after <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*</code>.<br>\nThis is a bad choice for a design. If there is no paragraph marker there<br>\nit will match it, <em>even if it exists further down somewhere</em>.  </p>\n\n<hr>\n\n<p>Other design considerations:  </p>\n\n<p>You state this is html, which means there <em>will</em> be other tags following<br>\nthe last <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code>. This means you shouldn't need the EOS anchor <code>$</code> or <code>\\z</code>in the \nregex, unless you use a regex that @ikegami suggests <code>(?&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*)(?=(?:(?!&lt;p&gt;).)*\\z)</code><br>\nwhich need's a <code>(?s)</code> to go with it.  </p>\n\n<p>However, this regex is a <em>terrible</em> idea !!<br>\nEach time it finds a <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code> it has to stop and search all the way to<br>\nthe end of the string.<br>\nIf you have 500  <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code> in the document, it is mostly equivalent to searching<br>\nthe same document text 500 times.   </p>\n\n<hr>\n\n<p><strong><em>The Safe and Sane approach</em></strong>   </p>\n\n<hr>\n\n<p>This way -> <code>(?s).*\\K&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*</code>  </p>\n\n<p>It just goes directly to the last one via <code>(?s).*</code><br>\nthen skips that part of the match using <code>\\K</code>,<br>\nleaving only the <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*</code> to be replaced with nothing. </p>\n\n<p><strong>Benchmark test:</strong><br>\nThe target sample contains 10 duplicates of the OP's sample @ 30 <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code>  </p>\n\n<pre><code>@ikegami Regex:   (?s)(?&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*)(?=(?:(?!&lt;p&gt;).)*\\z)\nOptions:  &lt; none &gt;\nCompleted iterations:   50  /  50     ( x 1000 )\nMatches found per iteration:   1\nElapsed Time:    3.24 s,   3236.42 ms,   3236424 \u00b5s\n\n\nSafe and Sane Regex:   (?s).*\\K&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*\nOptions:  &lt; none &gt;\nCompleted iterations:   50  /  50     ( x 1000 )\nMatches found per iteration:   1\nElapsed Time:    0.10 s,   102.04 ms,   102044 \u00b5s\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8255451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9f867a0fcd8e7bda54b0dec7186187?s=128&d=identicon&r=PG&f=1", "display_name": "CAVR", "link": "https://stackoverflow.com/users/8255451/cavr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 44913657, "answer_count": 3, "score": 0, "last_activity_date": 1499276895, "creation_date": 1499196481, "last_edit_date": 1499244845, "question_id": 44912980, "link": "https://stackoverflow.com/questions/44912980/remove-a-specific-string-only-if-its-in-the-very-end-of-a-code", "title": "Remove a specific string only if it&#39;s in the very end of a code", "body": "<p>I'm parsing a html file to extract part of its text to create an epub. The problem is that in the text extracted sometimes the last paragraph is an empty one that I would like to remove. So... how can I remove this blank paragraph (and any additional blank spaces after that) with the condition that there's no additional text later on in any other line of code?</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;p&gt;\u201cLorem ipsum dolor sit amet, consectetur adipiscing elit.\u201d&lt;/p&gt;\n&lt;p&gt;Sed ut perspiciatis unde omnis iste natus error...&lt;/p&gt;\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;p&gt;\u201cLorem ipsum dolor sit amet.\u201d&lt;/p&gt;\n&lt;p&gt;Omnis iste natus error sit voluptatem.&lt;/p&gt;\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n</code></pre>\n\n<p>So, what can I do to remove only this last instance of <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code> (and any additional blank spaces/newlines after that) from the code above?</p>\n\n<p>I have tried using this negative lookahead <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*?(?!&lt;p&gt;)</code> on perl-regex to exclude later paragraphs from the search, but it still finds the previous instances of <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code> and I only need to remove this paragraph when it's the last one in the file.</p>\n\n<p>Thank you in advance!</p>\n\n<p><strong>EDIT-1:</strong></p>\n\n<p>To be clear, I want this:</p>\n\n<pre><code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;p&gt;\u201cLorem ipsum dolor sit amet, consectetur adipiscing elit.\u201d&lt;/p&gt;\n&lt;p&gt;Sed ut perspiciatis unde omnis iste natus error...&lt;/p&gt;\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;p&gt;\u201cLorem ipsum dolor sit amet.\u201d&lt;/p&gt;\n&lt;p&gt;Omnis iste natus error sit voluptatem.&lt;/p&gt;\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n</code></pre>\n\n<p>to become this:</p>\n\n<pre><code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;p&gt;\u201cLorem ipsum dolor sit amet, consectetur adipiscing elit.\u201d&lt;/p&gt;\n&lt;p&gt;Sed ut perspiciatis unde omnis iste natus error...&lt;/p&gt;\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;p&gt;\u201cLorem ipsum dolor sit amet.\u201d&lt;/p&gt;\n&lt;p&gt;Omnis iste natus error sit voluptatem.&lt;/p&gt;\n</code></pre>\n\n<p><strong>i.e.</strong> I want to remove the <code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code> only in the last line (where there's no other text after it), so I want to know which perl-regex search I should use to find only this particular instance of this string so I can replace it with nothing and with that remove it from the code.</p>\n\n<p><strong>EDIT-2.:</strong></p>\n\n<p>Based on a suggestion by ikegami, I used <code>\\s*(?&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\s*)(?!&lt;p&gt;)\\s*</code> as the search string to find only the last blank paragraph (<code>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</code>)of the html code to be removed. What really made the difference in his answer seems to have been the use of an atomic grouping <code>(?&gt;...)</code>. Without it, I was picking other instances of the same string from other lines of the code that I didn't want. Not sure why (really not an expert on regex), but that's what I got from my tests.</p>\n\n<p>I'm just using some basic find/replace operations of perl-regex in an ebook editor to clean the code, so I'm not sure about how it will behave under other circumstances. Anyway, I appreciate the other attempts of helping me, some of which were even too technical for me to grasp and I hope this answer will help someone in the future with a similar problem. Thank you again!</p>\n"}, {"tags": ["perl", "subroutine", "perl-data-structures"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1499196281, "post_id": 44912863, "comment_id": 76802140, "body": "<code>&amp;$proc</code> means something very special. You mean to use <code>&amp;$proc()</code> or the clearer <code>$proc-&gt;()</code>."}, {"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499196636, "post_id": 44912863, "comment_id": 76802258, "body": "Thank you @ikegami. I have modified my sample code as per your suggestion to use <code>$proc-&gt;()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1499196352, "last_edit_date": 1499196352, "creation_date": 1499196049, "answer_id": 44912885, "question_id": 44912863, "link": "https://stackoverflow.com/questions/44912863/push-a-subroutine-with-argument-into-a-stack-in-perl/44912885#44912885", "title": "Push a subroutine with argument into a stack in Perl", "body": "<p>Use an anonymous sub (which may even be a closure).</p>\n\n<pre><code>push @stack, sub { mysub(\"hello\") };\npush @stack, sub { mysub(\"world\") };\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>sub hi { say \"@_\" }\nmy $arg = \"Hello\";\nmy $sub = sub { hi($arg, @_) };\n$sub-&gt;(\"World\");   # Hello World\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1499198074, "post_id": 44913051, "comment_id": 76802843, "body": "Replace <code>use v5.24;</code> with <code>use feature qw( postderef );  # 5.20+</code> and <code>no warnings qw( experimental::postderef );  # No longer experimental as of 5.24</code> and your code will run in 5.20+"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 7, "last_activity_date": 1499196781, "creation_date": 1499196781, "answer_id": 44913051, "question_id": 44912863, "link": "https://stackoverflow.com/questions/44912863/push-a-subroutine-with-argument-into-a-stack-in-perl/44913051#44913051", "title": "Push a subroutine with argument into a stack in Perl", "body": "<p>I might do something like this where I create a tuple to hold the code reference and its arguments:</p>\n\n<pre><code>use v5.24;\n\nsub hi    { print \"Hi @_\\n\";    }\nsub hello { print \"Hello @_\\n\"; }\n\nmy @stack;\npush @stack, [ \\&amp;hi,    'Perl'     ];\npush @stack, [ \\&amp;hello, 'Amelia'   ];\npush @stack, [ \\&amp;hello, $ENV{USER} ];\n\nwhile (@stack) {\n    my( $proc, @args ) = pop( @stack )-&gt;@*;\n    $proc-&gt;( @args );\n}\n</code></pre>\n\n<p>I use the v5.24 <a href=\"https://www.effectiveperlprogramming.com/2014/09/use-postfix-dereferencing/\" rel=\"noreferrer\">postfix dereference</a> there, but that's because I can't help myself. This works too but now I think it's very ugly:</p>\n\n<pre><code>    my( $proc, @args ) = @{ pop( @stack ) };\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 44912885, "answer_count": 2, "score": 3, "last_activity_date": 1499196781, "creation_date": 1499195933, "last_edit_date": 1499196663, "question_id": 44912863, "link": "https://stackoverflow.com/questions/44912863/push-a-subroutine-with-argument-into-a-stack-in-perl", "title": "Push a subroutine with argument into a stack in Perl", "body": "<p>I would like to push a subroutine <b>with arguments</b> into a stack, but I can't figure out the syntax. Consider a working example with no arguments:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nsub hi    { print \"hi\\n\";    }\nsub hello { print \"hello\\n\"; }\nsub world { print \"world\\n\"; }\n\nmy @stack;\npush (@stack, \\&amp;hi   );\npush (@stack, \\&amp;hello);\npush (@stack, \\&amp;world);\n\nwhile (@stack) {\n    my $proc = pop @stack;\n    $proc-&gt;();\n}\n</code></pre>\n\n<p>when I run the code:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>% ./pop-proc.pl\nworld\nhello\nhi\n</code></pre>\n\n<p>Now my question is, what if the subroutine looked like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub mysub \n{\n    chomp( my( $arg ) = @_ );\n    print \"$arg\\n\"; \n}\n</code></pre>\n\n<p>and I'd like to push subroutines with arguments, such as:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>mysub(\"hello\");\nmysub(\"world\");\n</code></pre>\n\n<p>your input is highly appreciated.</p>\n"}, {"tags": ["perl", "unix", "perl-module", "libphonenumber"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499181908, "post_id": 44909595, "comment_id": 76795775, "body": "What do you consider to be correct? Please provide your expected output and the current output. The Perl people around here likely don&#39;t know how to run your Java source, which isn&#39;t even an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and doesn&#39;t contain any numbers."}, {"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499182737, "post_id": 44909595, "comment_id": 76796271, "body": "Thank you @simbabque I have edited my post to be more comprehensive."}, {"owner": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1499182817, "post_id": 44909595, "comment_id": 76796310, "body": "And the Java people can&#39;t answer your question since it&#39;s about Perl. Don&#39;t tag it with &quot;java&quot; if the question is not <i>about</i> java - it&#39;s an irrelevant tag."}, {"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "reply_to_user": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1499182918, "post_id": 44909595, "comment_id": 76796376, "body": "Thank you @ErwinBolwidt java tag has been removed."}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "edited": false, "score": 0, "creation_date": 1499231884, "post_id": 44915148, "comment_id": 76810958, "body": "Thank you @bytepusher for your response. Both numbers are valid. I&#39;m expected to use a &quot;Default Country&quot; which I haven&#39;t figured out how to do in Number::Phone. See (libphonenumber JavaScript Demo) <code>https:&#47;&#47;rawgit.com&#47;googlei18n&#47;libphonenumber&#47;master&#47;javascri&zwnj;&#8203;pt&#47;i18n&#47;phonenumbers&zwnj;&#8203;&#47;demo-compiled.html</code>. For the &quot;Default Country&quot; use <code>BH</code>. All the numbers I&#39;ve supplied should be valid, and I expect them in E.164 format as shown in my expected output."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "edited": false, "score": 1, "creation_date": 1499283826, "post_id": 44915148, "comment_id": 76845455, "body": "I&#39;m not sure where this &quot;Default Country&quot; is coming from - I do not see it mentioned in the Documentation."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "edited": false, "score": 1, "creation_date": 1499285680, "post_id": 44915148, "comment_id": 76846573, "body": "I put in a suggestion how you might approach this, after now having discovered what the actual problem is. Good luck!"}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 0, "last_activity_date": 1499285637, "last_edit_date": 1499285637, "creation_date": 1499210852, "answer_id": 44915148, "question_id": 44909595, "link": "https://stackoverflow.com/questions/44909595/using-numberphone-to-validate-and-format/44915148#44915148", "title": "Using Number::Phone to validate and format", "body": "<p>When I run the first example code for the numbers, two of those fail to be parsed:</p>\n\n<p>17888888 - this is obvious, when calling Number::Phone without a country code, this will not be parsed as it's unclear what country this is from</p>\n\n<p>00923455555333 - 923 is, according to a quick google search, the country code for Pakistan. The Wikipedia page for dialing codes in Pakistan shows no 455, leading me to think that this is not a known area code to either Number::Phone or Wikipedia. I suspect it is an invalid number.</p>\n\n<p>So for the first Number: specify which country this is supposed to be from.</p>\n\n<p>If you are certain the other number is correct, you know more about that than the developer of Number::Phone currently and I'm sure he'd be happy to receive your input in the form of a more complete Number::Phone localized package.</p>\n\n<p>The fact that your Java code accepts the (probably) invalid number does not necessarily mean it is more correct, just that it is less picky in what it declares to be a correct number.</p>\n\n<p>Edit:</p>\n\n<p>Asking Phone::Number to parse the input '+923455555333' instead of '00923455555333' leads to the desired output.</p>\n\n<p>Looking at the source of Phone::Number:</p>\n\n<pre><code># ... processing input arguments\n$number = \"+$number\" unless($number =~ /^\\+/);\n</code></pre>\n\n<p>It becomes clear that the 00 is interpreted as '+00' and then rejected as being an invalid number.\n<a href=\"https://github.com/DrHyde/perl-modules-Number-Phone/issues/39\" rel=\"nofollow noreferrer\">View some discussion on that here</a></p>\n\n<p>It seems to me you will have to handle this yourself.\nOne way may be to simply replace leading 00 with '+' - preferably only if parsing failed. </p>\n\n<p>The other number can be parsed if you make it clear what country it should belong to.</p>\n\n<p>Perhaps like so:</p>\n\n<pre><code>my $phone = Number::Phone-&gt;new($fnum);\nunless ($phone){\n    $phone = Number::Phone-&gt;new('BH',$fnum);\n    if ( !$phone &amp;&amp; $fnum =~ s/^00/+/ ){\n        # You should probably check the discussion I linked.\n        # There may well be problems with this approach!\n        $phone = Number::Phone-&gt;new($fnum);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499285637, "creation_date": 1499181696, "last_edit_date": 1499182857, "question_id": 44909595, "link": "https://stackoverflow.com/questions/44909595/using-numberphone-to-validate-and-format", "title": "Using Number::Phone to validate and format", "body": "<p>I'm trying to use <a href=\"http://search.cpan.org/~dcantrell/Number-Phone/lib/Number/Phone.pm\" rel=\"nofollow noreferrer\">Number::Phone from CPAN</a> to accomplish 2 tasks:</p>\n\n<ol>\n<li>Validate a Phone Number; and</li>\n<li>Format the number in E.164 Notation.</li>\n</ol>\n\n<p>However, I'm unable to figure out how it works. My sample code is:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Number::Phone;\n\nforeach my $fnum ( '17888888', '97338888888', '00923455555333', '+97366767777' , '38383838') {\n    my $phone = Number::Phone-&gt;new($fnum);\n    my $norm = \"\";\n    eval {\n        $norm = $phone-&gt;format_using('E123'); # or 'Raw'\n        print \"E164 =&gt; '$norm'\\n\";\n    } or do {\n        print STDERR \"Unable to parse '$fnum'\\n\";\n    }\n}\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>E164 =&gt; '+97317888888'\nE164 =&gt; '+97338888888'\nE164 =&gt; '+923455555333'\nE164 =&gt; '+97366767777'\nE164 =&gt; '+97338383838'\n</code></pre>\n\n<p>But the results were incorrect. I tried using <a href=\"http://search.cpan.org/dist/Number-Phone-Normalize/lib/Number/Phone/Normalize.pm\" rel=\"nofollow noreferrer\">Number::Phone::Normalize</a>, but still not successful:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Number::Phone::Normalize;\n\nmy %params = ( \n    'CountryCode'=&gt;'973',\n    'IntlPrefix' =&gt;'00',\n    'CountryCodeOut'=&gt;'973',\n    'IntlPrefixOut' =&gt; '+',\n    );\nmy $nlz = Number::Phone::Normalize-&gt;new( %params );\n\nforeach my $number ('17888888', '97338888888', '00923455555333', '+97366767777' , '38383838') {\n    my $e164 = $nlz-&gt;intl( $number );\n    print \"E164 =&gt; '$e164'\\n\";\n}\n</code></pre>\n\n<p>with the same expected output of:\n</p>\n\n<pre><code>E164 =&gt; '+97317888888'\nE164 =&gt; '+97338888888'\nE164 =&gt; '+923455555333'\nE164 =&gt; '+97366767777'\nE164 =&gt; '+97338383838'\n</code></pre>\n\n<p>However, this produced the wrong results too. The snippet Java code below works perfectly, and it's what I'm trying to achieve in Perl.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Uses libphonenumber: http://code.google.com/p/libphonenumber/\n// setenv CLASSPATH .:libphonenumber-8.5.2.jar\n\n// libphonenumber\nimport com.google.i18n.phonenumbers.PhoneNumberUtil;\nimport com.google.i18n.phonenumbers.Phonenumber.PhoneNumber;\nimport com.google.i18n.phonenumbers.NumberParseException;\nimport com.google.i18n.phonenumbers.PhoneNumberUtil.PhoneNumberFormat;\n\npublic class ValidateList {\n    public static void main(String[] args) {\n        try {\n            if (args.length != 1) {\n                throw new IllegalArgumentException(\"Invalid number of arguments.\");\n            }\n\n            String file = args[0];\n            PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\n\n            try (java.io.BufferedReader br = new java.io.BufferedReader(new java.io.FileReader(file))) {\n                String line = null;\n                while ((line = br.readLine()) != null) {\n\n                    try {\n                        PhoneNumber phoneNumber = phoneUtil.parse(line, \"BH\");\n                        boolean isValid = phoneUtil.isValidNumber(phoneNumber);\n                        if (isValid) {\n                            System.out.println( \"E164 =&gt; \" + phoneUtil.format(phoneNumber, PhoneNumberFormat.E164) );\n                        }\n                        else {\n                            System.err.println( \"Invalid =&gt; \" + line);\n                        }\n                    } \n                    catch (NumberParseException e) {\n                        System.err.println(\"NumberParseException for (\"+line+\"): \" + e.toString());\n                    }\n\n                }\n            }\n\n        }\n        catch (Exception e) {\n            System.err.println(e);\n            System.err.println(\"Usage: java ValidateList &lt;fileNameWithPhoneNumbers&gt;\");\n        }\n    }\n}\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>% cat input.txt\n17888888\n97338888888\n00923455555333\n+97366767777\n38383838\n\n% javac -cp libphonenumber-8.5.2.jar ValidateList.java\n\n% java -cp .:libphonenumber-8.5.2.jar ValidateList input.txt \nE164 =&gt; +97317888888\nE164 =&gt; +97338888888\nE164 =&gt; +923455555333\nE164 =&gt; +97366767777\nE164 =&gt; +97338383838\n</code></pre>\n\n<p>Your input is greatly appreciated.</p>\n"}, {"tags": ["xml", "perl", "url", "xml-simple"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1499179494, "post_id": 44908832, "comment_id": 76794258, "body": "What does <code>get( $url )</code> return? Have you tested it?"}, {"owner": {"reputation": 373, "user_id": 6887570, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/12bw1.jpg?s=128&g=1", "display_name": "dbz", "link": "https://stackoverflow.com/users/6887570/dbz"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1499179613, "post_id": 44908832, "comment_id": 76794342, "body": "Yes, when y do <code>print Dumper($data);</code> it prints the xml file with the correct structure."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1499181556, "post_id": 44908832, "comment_id": 76795561, "body": "You really <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">shouldn&#39;t use XML::Simple</a>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1499246056, "post_id": 44908832, "comment_id": 76819334, "body": "<a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;discouraged&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 6887570, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/12bw1.jpg?s=128&g=1", "display_name": "dbz", "link": "https://stackoverflow.com/users/6887570/dbz"}, "edited": false, "score": 0, "creation_date": 1499183819, "post_id": 44910031, "comment_id": 76796895, "body": "First of all thanks for your coment @Dave Cross, I&#39;ve just use your code and it gives me an error:  <code>Not a HASH reference at C:\\Users\\dbz\\test.pl line 127</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 373, "user_id": 6887570, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/12bw1.jpg?s=128&g=1", "display_name": "dbz", "link": "https://stackoverflow.com/users/6887570/dbz"}, "edited": false, "score": 1, "creation_date": 1499184457, "post_id": 44910031, "comment_id": 76797266, "body": "@dbz: And I guess that neatly demonstrates the problems with using XML::Simple. I&#39;ll add my complete code into my answer in a second, but when I run it I get a data structure that is all hash references. You, apparently, get something else. If it helps at all, I&#39;m using XML::Simple version 2.22 on Ubuntu 17.04."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1499184543, "last_edit_date": 1499184543, "creation_date": 1499183279, "answer_id": 44910031, "question_id": 44908832, "link": "https://stackoverflow.com/questions/44908832/getting-elements-from-xml-file-in-perl/44910031#44910031", "title": "Getting elements from XML file in Perl", "body": "<p>XML::Simple is flaky and should not be used (<a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">even the author agrees</a>) but, having said that, it's a relatively simple fix to get your program working as expected.</p>\n\n<p>You're walking your data structure incorrectly. You need to take a closer look at your Data:Dumper output. Your <code>$data</code> variable is equivalent to the top-level <code>&lt;csixml&gt;</code> tag. Everything else is hashes within that. So, to get to the piece of the data structure you want, you need:</p>\n\n<pre><code>print $data-&gt;{data}{r}{v1}\nprint $data-&gt;{data}{r}{v2}\n</code></pre>\n\n<p>I also see that you're using the \"indirect object notation\" (<code>new XML::Simple</code>) to create your parser object. This usually works fine, but when it doesn't you'll waste days trying to work out what has gone wrong. Instead, please use the standard syntax - <code>XML::Simple-&gt;new</code>.</p>\n\n<p><strong>Update:</strong> Here's the code I was using:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\nuse XML::Simple;\nuse Data::Dumper;\n\nmy $file = 'test.xml';\nmy $xml  = path($file)-&gt;slurp;\n\nmy $parser = new XML::Simple;\nmy $data = $parser-&gt;XMLin($xml);\n\n#print Dumper($data);\n\nprint $data-&gt;{data}{'r'}{'v1'};\nprint $data-&gt;{data}{'r'}{'v2'};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1499246019, "creation_date": 1499246019, "answer_id": 44921862, "question_id": 44908832, "link": "https://stackoverflow.com/questions/44908832/getting-elements-from-xml-file-in-perl/44921862#44921862", "title": "Getting elements from XML file in Perl", "body": "<p>XML::LibXML is likely complaining about some slightly broken XML. The XML spec is strict, and says amongst other things - errors are fatal. But it works:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $doc = XML::LibXML-&gt;load_xml ( IO =&gt; \\*DATA );\nforeach my $node ( $doc -&gt; findnodes ( '//record/v2' ) ) {\n   print $node -&gt; textContent;\n}\n\n__DATA__\n&lt;csixml version=\"1.0\"&gt;\n    &lt;head&gt;\n    &lt;details&gt;\n        &lt;name-link&gt;linkName&lt;/name-link&gt;\n        &lt;table&gt;links&lt;/table&gt;\n        &lt;model&gt;XS1-556&lt;/model&gt;        \n    &lt;/details&gt;\n        &lt;fields&gt;\n            &lt;field name=\"name1\" /&gt;\n            &lt;field name=\"name2\"/&gt;\n            &lt;field name=\"name3\"/&gt;\n            &lt;field name=\"name4\"/&gt;\n            &lt;field name=\"name5\"/&gt;\n            &lt;field name=\"name6\" /&gt;\n            &lt;field name=\"name7\"/&gt;\n            &lt;field name=\"name8\"/&gt;\n            &lt;field name=\"name9\"/&gt;\n            &lt;field name=\"name10\"/&gt;\n            &lt;field name=\"name11\"/&gt;\n            &lt;field name=\"name12x\"/&gt;\n            &lt;field name=\"name13\"/&gt;\n            &lt;field name=\"name14\"/&gt;\n            &lt;field name=\"name15\"/&gt;\n            &lt;field name=\"name16\"/&gt;\n            &lt;field name=\"name17\"/&gt;\n        &lt;/fields&gt;\n    &lt;/head&gt;\n    &lt;data&gt;\n        &lt;record time=\"2017/06/01 00:00:00\" no=\"742\"&gt;\n        &lt;v1&gt;14.85&lt;/v1&gt;\n        &lt;v2&gt;34.1&lt;/v2&gt;\n        &lt;v3&gt;600&lt;/v3&gt;\n        &lt;v4&gt;0&lt;/v4&gt;\n        &lt;v5&gt;0&lt;/v5&gt;\n        &lt;v6&gt;0&lt;/v6&gt;\n        &lt;v7&gt;0&lt;/v7&gt;\n        &lt;v8&gt;11.22&lt;/v8&gt;\n        &lt;v9&gt;0.41&lt;/v9&gt;\n        &lt;v10&gt;215&lt;/v10&gt;\n        &lt;v11&gt;7.043&lt;/v11&gt;\n        &lt;v12&gt;1.325&lt;/v12&gt;\n        &lt;v13&gt;2017-05-31T23:47:14&lt;/v13&gt;\n        &lt;v14&gt;202.3&lt;/v14&gt;\n        &lt;v15&gt;0&lt;/v15&gt;\n        &lt;v16&gt;42.85&lt;/v16&gt;\n        &lt;v17&gt;12.25&lt;/v17&gt;\n        &lt;/record&gt;\n        &lt;/data&gt;\n    &lt;/csixml&gt;\n</code></pre>\n\n<p>XML::LibXML supports <code>xpath</code> which is invaluable for the sort of thing you're trying to do - you can either specify a full path in the document, or use <code>//</code> to indicate 'anywhere in document'. </p>\n\n<p>So either:</p>\n\n<pre><code>/csixml/data/record/v2\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>//record/v2\n</code></pre>\n\n<p>Will find the value you want. </p>\n\n<p>But can also do other useful things like:</p>\n\n<pre><code>foreach my $node ( $doc -&gt; findnodes ( '//record/*[string()=\"34.1\"]' ) ) {\n   print $node -&gt; nodeName;\n}\n</code></pre>\n\n<p>So I think the problem at heart here, is that you're loading your XML incorrectly. It certainly works in the example above (<code>IO =&gt; \\*DATA</code> loads from the special inline <code>DATA</code> filehandle, but it works fine for your example). </p>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 6887570, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/12bw1.jpg?s=128&g=1", "display_name": "dbz", "link": "https://stackoverflow.com/users/6887570/dbz"}, "is_accepted": true, "score": 0, "last_activity_date": 1499251327, "creation_date": 1499251327, "answer_id": 44923988, "question_id": 44908832, "link": "https://stackoverflow.com/questions/44908832/getting-elements-from-xml-file-in-perl/44923988#44923988", "title": "Getting elements from XML file in Perl", "body": "<p>I've tryed all of thoose solutions but finally I found it:</p>\n\n<pre><code>my ($_xml) = new XML::Simple (KeyAttr=&gt;[]);\n\n    my $url = 'http://www.example.com';\n    my $agent = LWP::UserAgent-&gt;new;\n    my $request = HTTP::Request-&gt;new(GET =&gt; $url);\n    $request-&gt;content_type('application/xml');\n    my $response = $agent-&gt;request($request);\n\n                if ($response-&gt;is_success) {\n                     print \"HTTP response is good\\n\";\n\n                    my ($_message) = $response-&gt;decoded_content;\n                    my ($_data) = $_xml-&gt;XMLin($_message,ForceArray =&gt; 1);  \n\n\n                    foreach my $_e (@{$_data-&gt;{data}})\n                    {   \n                        foreach my $_r (@{$_e-&gt;{r}})\n                        {\n\n                        print $_r-&gt;{time}.\": \".$_r-&gt;{no}.\"\\n\"; \n\n                        }                                                   \n                    }\n\n                } else {\n\n                die \"Awooga! HTTP request failed with \". $response-&gt;status_line;\n\n                }\n</code></pre>\n\n<p>Finally I use <code>XML:Simple</code> and I get my xml elements with: <code>$_r-&gt;{time}</code> and it works great. I hope this will help someone, thanks to everyone!! </p>\n"}], "owner": {"reputation": 373, "user_id": 6887570, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/12bw1.jpg?s=128&g=1", "display_name": "dbz", "link": "https://stackoverflow.com/users/6887570/dbz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 44923988, "answer_count": 3, "score": 0, "last_activity_date": 1499251327, "creation_date": 1499179345, "last_edit_date": 1499184159, "question_id": 44908832, "link": "https://stackoverflow.com/questions/44908832/getting-elements-from-xml-file-in-perl", "title": "Getting elements from XML file in Perl", "body": "<p>I have a file on a server that I want to parse in Perl. I've tried it with <code>XML:Simple</code> and <code>XML:LibXML</code> and I can't get the xml elements in both cases.</p>\n\n<p>This is my .xml file:</p>\n\n<pre><code>&lt;csixml version=\"1.0\"&gt;\n    &lt;head&gt;\n    &lt;details&gt;\n        &lt;name-link&gt;linkName&lt;/name-link&gt;\n        &lt;table&gt;links&lt;/table&gt;\n        &lt;model&gt;XS1-556&lt;/model&gt;        \n    &lt;/details&gt;\n        &lt;fields&gt;\n            &lt;field name=\"name1\" /&gt;\n            &lt;field name=\"name2\"/&gt;\n            &lt;field name=\"name3\"/&gt;\n            &lt;field name=\"name4\"/&gt;\n            &lt;field name=\"name5\"/&gt;\n            &lt;field name=\"name6\" /&gt;\n            &lt;field name=\"name7\"/&gt;\n            &lt;field name=\"name8\"/&gt;\n            &lt;field name=\"name9\"/&gt;\n            &lt;field name=\"name10\"/&gt;\n            &lt;field name=\"name11\"/&gt;\n            &lt;field name=\"name12x\"/&gt;\n            &lt;field name=\"name13\"/&gt;\n            &lt;field name=\"name14\"/&gt;\n            &lt;field name=\"name15\"/&gt;\n            &lt;field name=\"name16\"/&gt;\n            &lt;field name=\"name17\"/&gt;\n        &lt;/fields&gt;\n    &lt;/head&gt;\n    &lt;data&gt;\n        &lt;record time=\"2017/06/01 00:00:00\" no=\"742\"&gt;\n        &lt;v1&gt;14.85&lt;/v1&gt;\n        &lt;v2&gt;34.1&lt;/v2&gt;\n        &lt;v3&gt;600&lt;/v3&gt;\n        &lt;v4&gt;0&lt;/v4&gt;\n        &lt;v5&gt;0&lt;/v5&gt;\n        &lt;v6&gt;0&lt;/v6&gt;\n        &lt;v7&gt;0&lt;/v7&gt;\n        &lt;v8&gt;11.22&lt;/v8&gt;\n        &lt;v9&gt;0.41&lt;/v9&gt;\n        &lt;v10&gt;215&lt;/v10&gt;\n        &lt;v11&gt;7.043&lt;/v11&gt;\n        &lt;v12&gt;1.325&lt;/v12&gt;\n        &lt;v13&gt;2017-05-31T23:47:14&lt;/v13&gt;\n        &lt;v14&gt;202.3&lt;/v14&gt;\n        &lt;v15&gt;0&lt;/v15&gt;\n        &lt;v16&gt;42.85&lt;/v16&gt;\n        &lt;v17&gt;12.25&lt;/v17&gt;\n        &lt;/record&gt;\n        &lt;/data&gt;\n    &lt;/csixml&gt;\n</code></pre>\n\n<p>And this is the code :</p>\n\n<pre><code>my $parser = new XML::Simple;\n$data = $parser-&gt;XMLin( get( $url ));\n\n#print Dumper($data);\n\nprint $data-&gt;{'r'}[0]{'v1'};\nprint $data-&gt;{'r'}[1]{'v2'};    \n</code></pre>\n\n<p>When I try it with XML:LibXML it gives me an error that says:</p>\n\n<pre><code>Start tag expected, '&lt;' not found\n</code></pre>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1499177210, "post_id": 44907434, "comment_id": 76792858, "body": "11G, it is all on a single line and that is why it was complaining. Although now I&#39;m on a different machine and it seems I cannot reproduce the problem... anyway, is this possible with perl?"}, {"owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1499188586, "post_id": 44907434, "comment_id": 76799051, "body": "stupid question, does perl support the same set of &quot;alternative&quot; delimiters?  example: <code>s@string1@replacement1@g</code>"}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1499189600, "post_id": 44907434, "comment_id": 76799476, "body": "Yes, it does: <code>perl -pe &#39;s#a#b#g&#39; &lt;&lt;&lt;&#39;aaa&#39;</code> -&gt; <code>bbb</code>."}, {"owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1499238604, "post_id": 44907434, "comment_id": 76814285, "body": "So it works... but it fills all the main memory and swap space (100GB of RAM) :-("}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1499258779, "post_id": 44907434, "comment_id": 76828790, "body": "I see. Is there no way to break the file temporarily into records while processing it?"}, {"owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1499261923, "post_id": 44907434, "comment_id": 76831261, "body": "I can try with a <code>tr</code> maybe, since it is a kind-of <code>json</code> file."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1499264528, "post_id": 44907434, "comment_id": 76833298, "body": "Sounds promising; please see my update."}], "answers": [{"tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": true, "score": 4, "last_activity_date": 1499265082, "last_edit_date": 1499265082, "creation_date": 1499177124, "answer_id": 44908097, "question_id": 44907434, "link": "https://stackoverflow.com/questions/44907434/perl-multiple-search-and-replace-actions-in-one-large-text-file/44908097#44908097", "title": "Perl Multiple search and replace actions in one large text file", "body": "<p>The <strong><code>perl</code> equivalent of your <code>sed</code> command</strong> is:</p>\n\n<pre><code>perl -p replacements.txt infile.txt\n</code></pre>\n\n<p>It should work with your sample <code>replacements.txt</code>, given that the <code>s</code> statements are properly <code>;</code>-terminated (note that <code>sed</code> would recognize the end of the line by itself as the statement terminator).</p>\n\n<hr>\n\n<p>The <strong>real problem, however, is that the entire large file is a <em>single line</em></strong>, so the key to avoiding running out of memory is to:</p>\n\n<ul>\n<li><em>temporarily</em> break that line into many short lines,</li>\n<li>send these short lines through the pipeline and perform the string replacements on them,</li>\n<li>and then re-join the modified short lines to form a single line again.</li>\n</ul>\n\n<p><strong>If there's a character in the data that delimits records (units of data)</strong>, in a away that doesn't interfere with the string replacements, <strong>breaking the long line into multiple ones with the help of <code>tr</code></strong> is a viable approach; I'll use <code>}</code> as an example, because Kuzeko states that the data is JSON-like:</p>\n\n<p>If you have <strong><em>GNU</em> <code>sed</code></strong> (Linux; verify with <code>sed --version</code>):</p>\n\n<pre><code>tr '}' '\\0' &lt; infile.txt | sed -z -f replacements.txt | tr '\\0' '}'\n</code></pre>\n\n<p>Having <code>tr</code> output <code>NUL</code>-separated \"lines\" (<code>\\0</code>) and <code>sed</code> read them accordingly (<code>-z</code>) is the most robust way to handle the chunking.<br>\nUnfortunately, the <code>-z</code> / <code>--null-data</code> option is not POSIX-compliant and the BSD/macOS implementation does <em>not</em> support it.</p>\n\n<p>Otherwise (e.g., on <strong>macOS</strong>):</p>\n\n<pre><code>tr '}' '\\n' &lt; infile.txt | perl -p replacements.txt infile.txt | tr '\\n' '}'\n</code></pre>\n\n<p><em>Caveat</em>: If the single line in <code>infile.txt</code> has a trailing <code>\\n</code>, you'll end up with an extra <code>}</code> char. at the end; to prevent that, add an initial <code>tr</code> stage to the pipeline that <em>deletes</em> the <code>\\n</code>:<br>\n<code>tr -d '\\n' &lt; infile.txt | tr '}' '\\n' | ...</code></p>\n\n<p><code>perl</code> is still needed, because - unlike BSD/macOS <code>sed</code> - it preserves the trailing-<code>\\n</code>-or-not status of the input's last line.</p>\n"}], "owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 1, "accepted_answer_id": 44908097, "answer_count": 1, "score": 3, "last_activity_date": 1499265082, "creation_date": 1499175193, "last_edit_date": 1499262133, "question_id": 44907434, "link": "https://stackoverflow.com/questions/44907434/perl-multiple-search-and-replace-actions-in-one-large-text-file", "title": "Perl Multiple search and replace actions in one large text file", "body": "<p>Given a set of replacement strings in a file <code>replacements.txt</code> like</p>\n\n<pre><code>s/string1/replacement1/g;\ns/string2/replacement2/g;\ns/string3/replacement3/g;\ns/string4/replacement4/g;\ns/string5/replacement5/g;\n</code></pre>\n\n<p>I would like to obtain the equivalent of </p>\n\n<pre><code>sed -f replacements.txt infile.txt \n</code></pre>\n\n<p><strike>my file is so big that <code>sed</code> cant handle it, while I know that perl could do the trick. </strike></p>\n\n<p>Also the replacements are really a lot, and change from time to time. ( I need to run this a dozen of times)</p>\n\n<p>Note that the replacements are fixed strings, so I do not really need those to be regular expressions.</p>\n\n<p><em><code>sed</code> has problems only when the <code>regexp</code>  has globs and the input file is a single large line.</em></p>\n"}, {"tags": ["perl", "perl-module", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1499177407, "post_id": 44906829, "comment_id": 76792960, "body": "There is no Perl 1.8 and no Perl 1.24. You probably mean Perl 5.8 and Perl 5.24. I doubt you&#39;re anywhere near a Perl version 1."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1499177681, "post_id": 44906829, "comment_id": 76793152, "body": "How do you know it fails if you don&#39;t get any output? Can you please describe &quot;fails&quot;? Also, is this part of a subroutine? Please show how you&#39;re calling it."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1499177892, "post_id": 44906829, "comment_id": 76793301, "body": "What happens if you use <code>RaiseError =&gt; 1</code> in the connection?"}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499232375, "post_id": 44906829, "comment_id": 76811118, "body": "@simbabque yes my bad. Changed it now"}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1499232759, "post_id": 44906829, "comment_id": 76811276, "body": "@stevieb when i print dbh it shows that it doesnt have any value. Thats why i am considering it that it has failed. Yes it is a sub routine. Here is how it is called: $node_dbh = &amp;dbinternal::connect(&quot;dsn=$dsn&quot;);"}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1499233262, "post_id": 44906829, "comment_id": 76811473, "body": "@stevieb when i use <code>RaiseError =&gt; 1</code> i got   <b>DBI connect(&#39;&#39;,&#39;dsn=vms&#39;,...) failed: (no error string)</b>"}], "owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499232330, "creation_date": 1499173378, "last_edit_date": 1499232330, "question_id": 44906829, "link": "https://stackoverflow.com/questions/44906829/dbi-connect-fails-to-establish-the-connection-and-doesnt-return-an-error-messa", "title": "DBI connect() fails to establish the connection and doesnt return an error message", "body": "<p>When i am trying to establish a connection to database, it fails. But It doesnt return any error message either.</p>\n\n<p>Code for it is as below</p>\n\n<pre><code> my $dbh;\n    $dbh = DBI-&gt;connect('DBI:SQLAnywhere:', $connString, undef, {PrintError =&gt; 0, PrintWarn =&gt; 0})or die \"died\",$DBI::errstr,\"\\n\";\n    #dbh = DBI-&gt;connect('DBI:SQLAnywhere:', $connString);\n    # setting up the authentication signature for the connection\n    print \"$dbh\";\n    if($dbh)\n    {\n\n       if(DbAuth::AuthenticateConnection($dbh))\n       {    \n          return($dbh,$DbAuth::errstr) if (wantarray());\n       }\n    }\n\n    if (wantarray())\n    {\n    # The caller is prepared to deal with errors, so pass back the\n    # error string.  It should only be used when the db_handle is 0.\n    return ($dbh, $DBI::errstr);\n    }\n    else\n    {\n    return $dbh;\n    }\n</code></pre>\n\n<p>Any idea why this is happening and how can i debug this issue?</p>\n\n<p>Note: I upgraded perl from 5.8 to 5.24</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1499171933, "post_id": 44905956, "comment_id": 76789419, "body": "<code>m</code> is here the match operator, <code>i</code>is a modifier."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499198393, "post_id": 44905956, "comment_id": 76802980, "body": "<a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\"><code>perlop</code></a> is the documentation for operators."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1499198440, "post_id": 44905956, "comment_id": 76803002, "body": "There&#39;s no difference. <code>&#47;...&#47;</code> is a shortcut for <code>m&#47;...&#47;</code>, just like <code>&quot;...&quot;</code> is a shortcut for <code>qq&quot;...&quot;</code>."}, {"owner": {"reputation": 108, "user_id": 9397334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38868597fa5b3a6220b32c4323de110e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyR", "link": "https://stackoverflow.com/users/9397334/tonyr"}, "edited": false, "score": 1, "creation_date": 1588253201, "post_id": 44905956, "comment_id": 108831863, "body": "There is a difference when the pattern contains escaped characters. For example m&quot;\\d&quot; and &quot;\\\\d&quot; are identical, but not m&quot;\\d&quot; and &quot;\\d&quot;,"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 12, "last_activity_date": 1499198649, "last_edit_date": 1499198649, "creation_date": 1499172243, "answer_id": 44906350, "question_id": 44905956, "link": "https://stackoverflow.com/questions/44905956/difference-between-and-m-in-perl/44906350#44906350", "title": "Difference between /.../ and m/.../ in Perl", "body": "<p>There's no difference. If you just supply <code>/PATTERN/</code> then it assumes <code>m</code>. However, if you're using an alternative delimiter, you need to supply the <code>m</code>. E.g. <code>m|PATTERN|</code> won't work as <code>|PATTERN|</code>. </p>\n\n<p>In your example, <code>i</code> is the modifier as it's after the pattern. <code>m</code> is the operation. (as opposed to <code>s</code>, <code>tr</code>, <code>y</code> etc.)</p>\n\n<p>Perhaps slightly confusingly - you <em>can</em> use <code>m</code> as a modifier, but only if you put if <em>after</em> the match. </p>\n\n<p><code>m/PATTERN/m</code> will cause <code>^</code> and <code>$</code> to match differently than in <code>m/PATTERN/</code>, but it's the trailing <code>m</code> that does this, not the leading one. </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1499691511, "last_edit_date": 1499691511, "creation_date": 1499246498, "answer_id": 44922062, "question_id": 44905956, "link": "https://stackoverflow.com/questions/44905956/difference-between-and-m-in-perl/44922062#44922062", "title": "Difference between /.../ and m/.../ in Perl", "body": "<p>Perl has a number of quote-like operators where you can choose the delimiter to suit the data you're passing to the operator.</p>\n\n<ul>\n<li><code>q(...)</code> creates a single-quoted string</li>\n<li><code>qq(...)</code> creates a double-quoted string</li>\n<li><code>qw(...)</code> creates a list by splitting its arguments on white-space</li>\n<li><code>qx(...)</code> executes a command and returns the output</li>\n<li><code>qr(...)</code> compiles a regular expression</li>\n<li><code>m(...)</code> matches its argument as a regular expression</li>\n</ul>\n\n<p>(There's also <code>s(...)(...)</code> but I've left that off the list as it has two arguments)</p>\n\n<p>For some of these, you can omit the letter at the start of the operator if you choose the default delimiter.</p>\n\n<ul>\n<li>You can omit <code>q</code> if you use single quote characters (<code>'...'</code>).</li>\n<li>You can omit <code>qq</code> if you use double quote characters (<code>\"...\"</code>).</li>\n<li>You can omit <code>qx</code> if you use backticks (<code>`...`</code>).</li>\n<li>You can omit <code>m</code> if you use slashes (<code>/.../</code>).</li>\n</ul>\n\n<p>So, to answer your original question, <code>m/.../</code> and <code>/.../</code> are the same, but because slashes are the default delimitor for the match operator, you can omit the <code>m</code>.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3422, "favorite_count": 1, "accepted_answer_id": 44906350, "answer_count": 2, "score": 4, "last_activity_date": 1499691511, "creation_date": 1499171136, "last_edit_date": 1499198362, "question_id": 44905956, "link": "https://stackoverflow.com/questions/44905956/difference-between-and-m-in-perl", "title": "Difference between /.../ and m/.../ in Perl", "body": "<p>What is difference between <code>/.../</code> and <code>m/.../</code>?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = \"This is a testing for modifier\";\n\nif ($str =~ /This/i) { print \"Modifier...\\n\";  }\nif ($str =~ m/This/i) { print \"W/O Modifier...\\n\";  }\n</code></pre>\n\n<p>However, I checked with this site for <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">Reference</a> not clearly understand with the theory</p>\n"}, {"tags": ["perl", "subroutine", "autovivification"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1499173453, "post_id": 44905890, "comment_id": 76790533, "body": "You can remove the last two lines, and it works. You can also remove <code>BEGIN {}</code> and it still prints the address and no warnings or errors. However if you try to call the sub afterwards (without defining it), you get <code>Undefined subroutine &amp;main::mysub</code>, so it is not autovivified. Seems like a bug."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1499176171, "post_id": 44905890, "comment_id": 76792251, "body": "What that does is create a subroutine &#39;stub&#39;. Essentially it does enough to allow the code to proceed. As was mentioned, you can not actually call the sub. What will break this code is if you attempt to use prototypes. It wouldn&#39;t be able to understand the argument list, so the code would actually break."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1499181374, "post_id": 44906990, "comment_id": 76795445, "body": "You might want to add an example of what happens if the subroutine has prototypes..."}], "tags": [], "owner": {"reputation": 1419, "user_id": 203856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f1108eabf701ed53b05a875e3d8203?s=128&d=identicon&r=PG", "display_name": "larsen", "link": "https://stackoverflow.com/users/203856/larsen"}, "is_accepted": false, "score": 2, "last_activity_date": 1499187125, "last_edit_date": 1499187125, "creation_date": 1499173854, "answer_id": 44906990, "question_id": 44905890, "link": "https://stackoverflow.com/questions/44905890/why-i-can-get-subroutine-address-before-it-is-declared-without-error/44906990#44906990", "title": "Why I can get subroutine address before it is declared without error?", "body": "<p>Very interesting question. I'm writing this as an answer instead of a comment because it will be rather long, but there are still some bits I'm not entirely sure about. </p>\n\n<p>I believe your intuition is correct and that it is a form of autovivification. </p>\n\n<p><a href=\"https://metacpan.org/pod/Devel::Peek\" rel=\"nofollow noreferrer\">Devel::Peek</a> can spread more light on what's happening. </p>\n\n<p>I changed your code a little bit:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Devel::Peek;\n\n$|++;\n\nBEGIN {\n  Dump( \\&amp;mysub );\n  print \\&amp;mysub;\n};\n\nsub mysub {};\n\nDump( \\&amp;mysub );\nprint \\&amp;mysub;\n</code></pre>\n\n<p>I added <code>$|++</code> so that buffering won't be cause of confusions, and added calls to <code>Devel::Peek::Dump</code> to look into the reference <code>\\&amp;mysub</code>. Here the output on my system:</p>\n\n<pre><code>SV = IV(0x2628628) at 0x2628638\n  REFCNT = 1\n  FLAGS = (TEMP,ROK)\n  RV = 0x26286e0\n  SV = PVCV(0x2640750) at 0x26286e0\n    REFCNT = 2\n    FLAGS = (DYNFILE)\n    COMP_STASH = 0x25ffdb0  \"main\"\n    ROOT = 0x0\n    GVGV::GV = 0x26287a0    \"main\" :: \"mysub\"\n    FILE = \"/tmp/autov.pl\"\n    DEPTH = 0\n    FLAGS = 0x1000\n    OUTSIDE_SEQ = 0\n    PADLIST = 0x0\n    OUTSIDE = 0x0 (null)\nCODE(0x26286e0)SV = IV(0x25fff20) at 0x25fff30\n  REFCNT = 1\n  FLAGS = (TEMP,ROK)\n  RV = 0x26286e0\n  SV = PVCV(0x2640750) at 0x26286e0\n    REFCNT = 2\n    FLAGS = (DYNFILE)\n    COMP_STASH = 0x25ffdb0  \"main\"\n    START = 0x262ea50 ===&gt; 1\n    ROOT = 0x262ea10\n    GVGV::GV = 0x26287a0    \"main\" :: \"mysub\"\n    FILE = \"/tmp/autov.pl\"\n    DEPTH = 0\n    FLAGS = 0x1000\n    OUTSIDE_SEQ = 371\n    PADLIST = 0x2648620\n    PADNAME = 0x2630180(0x2667f70) PAD = 0x2628770(0x262f020)\n    OUTSIDE = 0x2600140 (MAIN)\nCODE(0x26286e0)\n</code></pre>\n\n<p>Note how <code>Dump</code>'s output changes between the two calls.\nThe first time <code>Dump</code> is called we just have a reference to a empty scalar. \nThe <em>second</em> time, after the actual definition of the subroutine, you can see the details that pertain to subroutines have been fleshed out: namely <code>PADLIST</code> (now not null), <code>PADNAME</code> and <code>START</code> (I'm not an expert of Perl guts but I think <strong>this</strong> is the actual \"pointer\" to the subroutine).</p>\n\n<p>I hope this helps. I'd be interested in knowing what you'll discover if you'll dig deeper in the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1499203597, "post_id": 44911033, "comment_id": 76804836, "body": "Why this <code>exists( *{ main::mysub }{ CODE } )</code> does not work?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1499240162, "post_id": 44911033, "comment_id": 76815294, "body": "<code>exists</code> requires a hash element of <code>&amp;something</code>. Besides, every slot of a glob slot always exists (since it&#39;s a C <code>struct</code>), so checking for existance is not useful. You can check if the slot contains something by checking it&#39;s defined (or true)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1499187445, "creation_date": 1499187445, "answer_id": 44911033, "question_id": 44905890, "link": "https://stackoverflow.com/questions/44905890/why-i-can-get-subroutine-address-before-it-is-declared-without-error/44911033#44911033", "title": "Why I can get subroutine address before it is declared without error?", "body": "<p>Yes, this is a form of autovivification. A stub is created when a reference to the sub is required and the sub doesn't exist.</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nsub test {\n   say  defined(&amp;mysub) ? \"defined (\".\\&amp;mysub.\")\"\n      : exists(&amp;mysub)  ? \"exists (\".\\&amp;mysub.\")\"\n      :                   \"doesn't exist\";\n}\n\ntest();\nmy $ref = \\&amp;mysub;\ntest();\neval(\"sub mysub { }  1\") or die($@);\ntest();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>doesn't exist\nexists (CODE(0xab8cd8))\ndefined (CODE(0xab8cd8))\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 44911033, "answer_count": 2, "score": 6, "last_activity_date": 1499187445, "creation_date": 1499170952, "question_id": 44905890, "link": "https://stackoverflow.com/questions/44905890/why-i-can-get-subroutine-address-before-it-is-declared-without-error", "title": "Why I can get subroutine address before it is declared without error?", "body": "<p>I have next program:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nBEGIN {\n    print \\&amp;mysub;\n}\n\n\nsub mysub {};\n\nprint \\&amp;mysub;\n</code></pre>\n\n<p>Its output:</p>\n\n<pre><code>CODE(0x118e890)CODE(0x118e890)\n</code></pre>\n\n<p>The <code>BEGIN</code> block is processed in compile time. At that point definition of <code>sub mysub</code> is not seen by compiler yet. But program still prints right subroutine address, which it will have when defined.</p>\n\n<p>Why I do not get error here? Is this some sort of autovivification?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 11, "user_id": 8251601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "salma", "link": "https://stackoverflow.com/users/8251601/salma"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1499148141, "post_id": 44897476, "comment_id": 76773526, "body": "then how should i rewrite the same subroutine to bring my expected output.I had tried the above code by schwartzian transform @jm666"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1499148681, "post_id": 44897476, "comment_id": 76773807, "body": "Please don&#39;t edit suggested solutions into your question. You must not significantly change the question after you have posted it, or it makes nonsense of all comments and solution written before your change."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499149053, "post_id": 44897476, "comment_id": 76774002, "body": "Your code does not use a Schwartzian transform, and in any case you shouldn&#39;t be using advanced optimisation techniques like that until you can write ordinary working Perl. You also need to have found that your program runs too slowly, and you should have profiled it to find the critical path. Until then you must write the simplest and most obvious code possible."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499157121, "post_id": 44897476, "comment_id": 76779052, "body": "I&#39;ve asked you not to change your code in a way that makes existing posts irrelevant. You can add additional information if you wish, but please  don&#39;t try to fix bugs in your question."}, {"owner": {"reputation": 11, "user_id": 8251601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "salma", "link": "https://stackoverflow.com/users/8251601/salma"}, "edited": false, "score": 0, "creation_date": 1499158823, "post_id": 44897476, "comment_id": 76780203, "body": "i had mispelled the word instead of sample i gave rev only that thing i had changed other than that nothing i had edited@Borodin"}], "owner": {"reputation": 11, "user_id": 8251601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "salma", "link": "https://stackoverflow.com/users/8251601/salma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1499146126, "answer_count": 0, "score": 0, "last_activity_date": 1499156913, "creation_date": 1499145250, "last_edit_date": 1499156913, "question_id": 44897476, "link": "https://stackoverflow.com/questions/44897476/why-my-sorting-fails-for-double-digits-using-perl", "closed_reason": "Duplicate", "title": "Why my sorting fails for double digits using perl?", "body": "<p>I used this code to filter file names, but it fails to sort properly if the name contains two digits.\nHow can I make the code make sense?</p>\n\n<h3>My input from <code>$output_dir</code></h3>\n\n<pre><code>sample1\nsample3\nsample14\nsample9\n</code></pre>\n\n<h3>My code</h3>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Path qw(remove_tree);\n\nmy $path_output = $output_dir;\n\nfind1($path_output);\n\nsub find1 {\n    my ($s) = @_;\n\n    my (@dirs) = grep { -d } glob $s . '/*';\n\n    my ($link) = sort { \n        my ($m) = $a =~ m/\\/(sample\\d+)$/;\n        my ($n) = $b =~ /\\/(rev\\d+)$/;\n        $n cmp $m\n    }\n    grep {\n        /\\/sample\\d+$/\n    } @dirs;\n\n    foreach ( @dirs ) {\n        ( $_ =~ m/sample(\\d+)$/ &amp;&amp; $_ ne $link ) ? remove_tree($_) : find1($_);\n    }\n}\n</code></pre>\n\n<h3>I got the output below from my code</h3>\n\n<pre><code>sample9\n</code></pre>\n\n<h3>But my expected output is as follows</h3>\n\n<pre><code>sample13\n</code></pre>\n\n<p>Why does the sorting and comparison in my code fail to use the two-digit numbers? Instead it is considering only 0-9.</p>\n\n<p>I want to change my code to compare any number of digits. How can I do that?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499146926, "post_id": 44897301, "comment_id": 76772968, "body": "I used that only to see why the die handler was being invoked. Since there is no error why does it get invoked."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1499147195, "post_id": 44897301, "comment_id": 76773085, "body": "I have updated the error which I get using $_[0], but no getting what am I missing here?"}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499147517, "post_id": 44897301, "comment_id": 76773229, "body": "Yeah u r correct I misinterpreted it for my script the line reference is for XSLoader.pm instead"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499147749, "post_id": 44897301, "comment_id": 76773329, "body": "Re &quot;<i>Also when I comment out this signal handler the script works fine</i>&quot;, Are you implying it doesn&#39;t work fine with the signal handler?"}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499147895, "post_id": 44897301, "comment_id": 76773392, "body": "No it means there is no die event called when I remove the handler. The script executes fine."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499150161, "post_id": 44897301, "comment_id": 76774623, "body": "So what&#39;s the problem?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499150201, "post_id": 44897301, "comment_id": 76774650, "body": "Note that the exception comes from the C code of some Perl module"}], "answers": [{"comments": [{"owner": {"reputation": 2124, "user_id": 3204023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EhGwT.jpg?s=128&g=1", "display_name": "jdhildeb", "link": "https://stackoverflow.com/users/3204023/jdhildeb"}, "edited": false, "score": 0, "creation_date": 1521227968, "post_id": 49259723, "comment_id": 85657909, "body": "After finding this answer I replaced $SIG{DIE} handler with a different approach proposed in <a href=\"https://perl.apache.org/docs/general/perl_reference/perl_reference.html#Overriding_the_Core_die___Function\" rel=\"nofollow noreferrer\">perl.apache.org/docs/general/perl_reference/&hellip;</a> and the error went away."}], "tags": [], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "is_accepted": false, "score": 1, "last_activity_date": 1520954108, "creation_date": 1520954108, "answer_id": 49259723, "question_id": 44897301, "link": "https://stackoverflow.com/questions/44897301/die-signal-handler-invocation-issue/49259723#49259723", "title": "Die Signal Handler Invocation Issue", "body": "<p>Having had the same problem, I found out:</p>\n\n<blockquote>\n  <p>Having to even think about the $^S variable in your exception handlers\n  is simply wrong.  $SIG{<strong>DIE</strong>} as currently implemented invites\n  grievous and difficult to track down errors.</p>\n</blockquote>\n\n<p>This is what <code>man perlvar</code> says. In my case I simply ignored the messages originating from a <code>require</code> by iterating over the call stacks like this:</p>\n\n<pre><code>y $r;\nmy @c;\nfor (my $i = 0; @c = caller($i); ++$i) {\n    if ($c[7]) { # is_require\n        $r = 1;\n        last;\n    }\n}\n</code></pre>\n\n<p>(Maybe there is a better method to examine the whole call stack)</p>\n\n<p>So if <code>$r</code> is set, the message comes from some <code>require</code> (or <code>use</code>), and I ignore it.</p>\n\n<p>(Before this check, I also checked <code>$^S</code> to act on real <code>die</code>s only)</p>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520954108, "creation_date": 1499144138, "last_edit_date": 1499148026, "question_id": 44897301, "link": "https://stackoverflow.com/questions/44897301/die-signal-handler-invocation-issue", "title": "Die Signal Handler Invocation Issue", "body": "<p>I am using a signal handler for die to log fatal errors and send mail notification from it. While sending a mail during the script my control is going in this signal handler but it is coming under the errors which are present in eval, the error when printed is \"Can't locate object method \"tid\" via package \"threads\" at C:/Strawberry/perl/lib/XSLoader.pm line 89.\". Also when I comment out this signal handler the script works fine.Can someone help me know the cause:</p>\n\n<p>Line 89 XSLoader.pm:</p>\n\n<pre><code>return &amp;$xs(@_);\n</code></pre>\n\n<p>XSLoader.pm:</p>\n\n<pre><code># Generated from XSLoader.pm.PL (resolved %Config::Config value)\n# This file is unique for every OS\n\npackage XSLoader;\n\n$VERSION = \"0.21\";\n\n#use strict;\n\npackage DynaLoader;\n\n# No prizes for guessing why we don't say 'bootstrap DynaLoader;' here.\n# NOTE: All dl_*.xs (including dl_none.xs) define a dl_error() XSUB\nboot_DynaLoader('DynaLoader') if defined(&amp;boot_DynaLoader) &amp;&amp;\n                                !defined(&amp;dl_error);\npackage XSLoader;\n\nsub load {\n    package DynaLoader;\n\n    my ($caller, $modlibname) = caller();\n    my $module = $caller;\n\n    if (@_) {\n        $module = $_[0];\n    } else {\n        $_[0] = $module;\n    }\n\n    # work with static linking too\n    my $boots = \"$module\\::bootstrap\";\n    goto &amp;$boots if defined &amp;$boots;\n\n    goto \\&amp;XSLoader::bootstrap_inherit unless $module and defined &amp;dl_load_file;\n\n    my @modparts = split(/::/,$module);\n    my $modfname = $modparts[-1];\n\n    my $modpname = join('/',@modparts);\n    my $c = () = split(/::/,$caller,-1);\n    $modlibname =~ s,[\\\\/][^\\\\/]+$,, while $c--;    # Q&amp;D basename\n    my $file = \"$modlibname/auto/$modpname/$modfname.xs\\.dll\";\n\n#   print STDERR \"XSLoader::load for $module ($file)\\n\" if $dl_debug;\n\n    my $bs = $file;\n    $bs =~ s/(\\.\\w+)?(;\\d*)?$/\\.bs/; # look for .bs 'beside' the library\n\n    if (-s $bs) { # only read file if it's not empty\n#       print STDERR \"BS: $bs ($^O, $dlsrc)\\n\" if $dl_debug;\n        eval { do $bs; };\n        warn \"$bs: $@\\n\" if $@;\n    goto \\&amp;XSLoader::bootstrap_inherit;\n    }\n\n    goto \\&amp;XSLoader::bootstrap_inherit if not -f $file;\n\n    my $bootname = \"boot_$module\";\n    $bootname =~ s/\\W/_/g;\n    @DynaLoader::dl_require_symbols = ($bootname);\n\n    my $boot_symbol_ref;\n\n    # Many dynamic extension loading problems will appear to come from\n    # this section of code: XYZ failed at line 123 of DynaLoader.pm.\n    # Often these errors are actually occurring in the initialisation\n    # C code of the extension XS file. Perl reports the error as being\n    # in this perl code simply because this was the last perl code\n    # it executed.\n\n    my $libref = dl_load_file($file, 0) or do { \n        require Carp;\n        Carp::croak(\"Can't load '$file' for module $module: \" . dl_error());\n    };\n    push(@DynaLoader::dl_librefs,$libref);  # record loaded object\n\n    $boot_symbol_ref = dl_find_symbol($libref, $bootname) or do {\n        require Carp;\n        Carp::croak(\"Can't find '$bootname' symbol in $file\\n\");\n    };\n\n    push(@DynaLoader::dl_modules, $module); # record loaded module\n\n  boot:\n    my $xs = dl_install_xsub($boots, $boot_symbol_ref, $file);\n\n    # See comment block above\n    push(@DynaLoader::dl_shared_objects, $file); # record files loaded\n    return &amp;$xs(@_);\n}\n\nsub bootstrap_inherit {\n    require DynaLoader;\n    goto \\&amp;DynaLoader::bootstrap_inherit;\n}\n\n1;\n\n\n__END__\n\n=head1 NAME\n\nXSLoader - Dynamically load C libraries into Perl code\n\n=head1 VERSION\n\nVersion 0.17\n\n=head1 SYNOPSIS\n\n    package YourPackage;\n    require XSLoader;\n\n    XSLoader::load();\n\n=head1 DESCRIPTION\n\nThis module defines a standard I&lt;simplified&gt; interface to the dynamic\nlinking mechanisms available on many platforms.  Its primary purpose is\nto implement cheap automatic dynamic loading of Perl modules.\n\nFor a more complicated interface, see L&lt;DynaLoader&gt;.  Many (most)\nfeatures of C&lt;DynaLoader&gt; are not implemented in C&lt;XSLoader&gt;, like for\nexample the C&lt;dl_load_flags&gt;, not honored by C&lt;XSLoader&gt;.\n\n=head2 Migration from C&lt;DynaLoader&gt;\n\nA typical module using L&lt;DynaLoader|DynaLoader&gt; starts like this:\n\n    package YourPackage;\n    require DynaLoader;\n\n    our @ISA = qw( OnePackage OtherPackage DynaLoader );\n    our $VERSION = '0.01';\n    bootstrap YourPackage $VERSION;\n\nChange this to\n\n    package YourPackage;\n    use XSLoader;\n\n    our @ISA = qw( OnePackage OtherPackage );\n    our $VERSION = '0.01';\n    XSLoader::load 'YourPackage', $VERSION;\n\nIn other words: replace C&lt;require DynaLoader&gt; by C&lt;use XSLoader&gt;, remove\nC&lt;DynaLoader&gt; from C&lt;@ISA&gt;, change C&lt;bootstrap&gt; by C&lt;XSLoader::load&gt;.  Do not\nforget to quote the name of your package on the C&lt;XSLoader::load&gt; line,\nand add comma (C&lt;,&gt;) before the arguments (C&lt;$VERSION&gt; above).\n\nOf course, if C&lt;@ISA&gt; contained only C&lt;DynaLoader&gt;, there is no need to have\nthe C&lt;@ISA&gt; assignment at all; moreover, if instead of C&lt;our&gt; one uses the\nmore backward-compatible\n\n    use vars qw($VERSION @ISA);\n\none can remove this reference to C&lt;@ISA&gt; together with the C&lt;@ISA&gt; assignment.\n\nIf no C&lt;$VERSION&gt; was specified on the C&lt;bootstrap&gt; line, the last line becomes\n\n    XSLoader::load 'YourPackage';\n\nIf the call to C&lt;load&gt; is from C&lt;YourPackage&gt;, then that can be further\nsimplified to\n\n    XSLoader::load();\n\nas C&lt;load&gt; will use C&lt;caller&gt; to determine the package.\n\n=head2 Backward compatible boilerplate\n\nIf you want to have your cake and eat it too, you need a more complicated\nboilerplate.\n\n    package YourPackage;\n    use vars qw($VERSION @ISA);\n\n    @ISA = qw( OnePackage OtherPackage );\n    $VERSION = '0.01';\n    eval {\n       require XSLoader;\n       XSLoader::load('YourPackage', $VERSION);\n       1;\n    } or do {\n       require DynaLoader;\n       push @ISA, 'DynaLoader';\n       bootstrap YourPackage $VERSION;\n    };\n\nThe parentheses about C&lt;XSLoader::load()&gt; arguments are needed since we replaced\nC&lt;use XSLoader&gt; by C&lt;require&gt;, so the compiler does not know that a function\nC&lt;XSLoader::load()&gt; is present.\n\nThis boilerplate uses the low-overhead C&lt;XSLoader&gt; if present; if used with\nan antique Perl which has no C&lt;XSLoader&gt;, it falls back to using C&lt;DynaLoader&gt;.\n\n=head1 Order of initialization: early load()\n\nI&lt;Skip this section if the XSUB functions are supposed to be called from other\nmodules only; read it only if you call your XSUBs from the code in your module,\nor have a C&lt;BOOT:&gt; section in your XS file (see L&lt;perlxs/\"The BOOT: Keyword\"&gt;).\nWhat is described here is equally applicable to the L&lt;DynaLoader|DynaLoader&gt;\ninterface.&gt;\n\nA sufficiently complicated module using XS would have both Perl code (defined\nin F&lt;YourPackage.pm&gt;) and XS code (defined in F&lt;YourPackage.xs&gt;).  If this\nPerl code makes calls into this XS code, and/or this XS code makes calls to\nthe Perl code, one should be careful with the order of initialization.\n\nThe call to C&lt;XSLoader::load()&gt; (or C&lt;bootstrap()&gt;) calls the module's\nbootstrap code. For modules build by F&lt;xsubpp&gt; (nearly all modules) this\nhas three side effects:\n\n=over\n\n=item *\n\nA sanity check is done to ensure that the versions of the F&lt;.pm&gt; and the\n(compiled) F&lt;.xs&gt; parts are compatible. If C&lt;$VERSION&gt; was specified, this\nis used for the check. If not specified, it defaults to\nC&lt;$XS_VERSION // $VERSION&gt; (in the module's namespace)\n\n=item *\n\nthe XSUBs are made accessible from Perl\n\n=item *\n\nif a C&lt;BOOT:&gt; section was present in the F&lt;.xs&gt; file, the code there is called.\n\n=back\n\nConsequently, if the code in the F&lt;.pm&gt; file makes calls to these XSUBs, it is\nconvenient to have XSUBs installed before the Perl code is defined; for\nexample, this makes prototypes for XSUBs visible to this Perl code.\nAlternatively, if the C&lt;BOOT:&gt; section makes calls to Perl functions (or\nuses Perl variables) defined in the F&lt;.pm&gt; file, they must be defined prior to\nthe call to C&lt;XSLoader::load()&gt; (or C&lt;bootstrap()&gt;).\n\nThe first situation being much more frequent, it makes sense to rewrite the\nboilerplate as\n\n    package YourPackage;\n    use XSLoader;\n    use vars qw($VERSION @ISA);\n\n    BEGIN {\n       @ISA = qw( OnePackage OtherPackage );\n       $VERSION = '0.01';\n\n       # Put Perl code used in the BOOT: section here\n\n       XSLoader::load 'YourPackage', $VERSION;\n    }\n\n    # Put Perl code making calls into XSUBs here\n\n=head2 The most hairy case\n\nIf the interdependence of your C&lt;BOOT:&gt; section and Perl code is\nmore complicated than this (e.g., the C&lt;BOOT:&gt; section makes calls to Perl\nfunctions which make calls to XSUBs with prototypes), get rid of the C&lt;BOOT:&gt;\nsection altogether.  Replace it with a function C&lt;onBOOT()&gt;, and call it like\nthis:\n\n    package YourPackage;\n    use XSLoader;\n    use vars qw($VERSION @ISA);\n\n    BEGIN {\n       @ISA = qw( OnePackage OtherPackage );\n       $VERSION = '0.01';\n       XSLoader::load 'YourPackage', $VERSION;\n    }\n\n    # Put Perl code used in onBOOT() function here; calls to XSUBs are\n    # prototype-checked.\n\n    onBOOT;\n\n    # Put Perl initialization code assuming that XS is initialized here\n\n\n=head1 DIAGNOSTICS\n\n=over\n\n=item C&lt;Can't find '%s' symbol in %s&gt;\n\nB&lt;(F)&gt; The bootstrap symbol could not be found in the extension module.\n\n=item C&lt;Can't load '%s' for module %s: %s&gt;\n\nB&lt;(F)&gt; The loading or initialisation of the extension module failed.\nThe detailed error follows.\n\n=item C&lt;Undefined symbols present after loading %s: %s&gt;\n\nB&lt;(W)&gt; As the message says, some symbols stay undefined although the\nextension module was correctly loaded and initialised. The list of undefined\nsymbols follows.\n\n=back\n\n=head1 LIMITATIONS\n\nTo reduce the overhead as much as possible, only one possible location\nis checked to find the extension DLL (this location is where C&lt;make install&gt;\nwould put the DLL).  If not found, the search for the DLL is transparently\ndelegated to C&lt;DynaLoader&gt;, which looks for the DLL along the C&lt;@INC&gt; list.\n\nIn particular, this is applicable to the structure of C&lt;@INC&gt; used for testing\nnot-yet-installed extensions.  This means that running uninstalled extensions\nmay have much more overhead than running the same extensions after\nC&lt;make install&gt;.\n\n\n=head1 KNOWN BUGS\n\nThe new simpler way to call C&lt;XSLoader::load()&gt; with no arguments at all\ndoes not work on Perl 5.8.4 and 5.8.5.\n\n\n=head1 BUGS\n\nPlease report any bugs or feature requests via the perlbug(1) utility.\n\n\n=head1 SEE ALSO\n\nL&lt;DynaLoader&gt;\n\n\n=head1 AUTHORS\n\nIlya Zakharevich originally extracted C&lt;XSLoader&gt; from C&lt;DynaLoader&gt;.\n\nCPAN version is currently maintained by SE&lt;eacute&gt;bastien Aperghis-Tramoni\nE&lt;lt&gt;sebastien@aperghis.netE&lt;gt&gt;.\n\nPrevious maintainer was Michael G Schwern &lt;schwern@pobox.com&gt;.\n\n\n=head1 COPYRIGHT &amp; LICENSE\n\nCopyright (C) 1990-2011 by Larry Wall and others.\n\nThis program is free software; you can redistribute it and/or modify\nit under the same terms as Perl itself.\n\n=cut\n</code></pre>\n\n<p>Signal Handler:</p>\n\n<pre><code>$SIG{__DIE__} = sub {\n    #COMMENT:BELOW IF IS SATISFIED IF DIE INVOKES INSIDE AN EVAL BLOCK\n    $Logger-&gt;fatal(\"Inside Signal Handler for Die\");\n    if($^S) {\n        #COMMENT:WE'RE IN AN EVAL {} AND DON'T WANT LOG THIS MESSAGE BUT CATCH IT LATER\n        #return;\n        $Logger-&gt;warn($_[0]);\n    }\n    elsif(@_){\n        $Log::Log4perl::caller_depth++;\n        #print \"Error logged for die \\n\";\n        $Logger-&gt;fatal(\"ERROR-\".@_);\n        Error_Mail(@_,$LogFile);\n        die @_; # Now terminate really\n    }\n };\n</code></pre>\n\n<p>Mail code:</p>\n\n<pre><code>$Logger-&gt;info(\"Attachment to be sent in final mail- $attach\");\n\n    $sendMsg = MIME::Lite-&gt;new(\n        From    =&gt; $fromAddress,\n        To      =&gt; $toAddress,\n        Cc      =&gt; $cc,\n        Bcc     =&gt; $bcc,\n        Subject =&gt; $subject,\n        Data   =&gt; $messageBody,\n    );              \n    $sendMsg-&gt;attach(\n        Type     =&gt; 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        Path     =&gt; $attach,\n        Filename =&gt; basename($attach),\n        Disposition =&gt; 'attachment'\n    );\n    #Sending Mail using the SMTP server\n    $sendMsg-&gt;send( \"smtp\", $SmtpIP);\n    $Logger-&gt;info(\"Final Mail sent with attachment -\".$attach);\n</code></pre>\n\n<p>Output is:</p>\n\n<p>Attachment to be sent in final mail-D:\\ABC\\AutomationData\\ABC\\Temp\\Output.csv </p>\n\n<pre><code>Inside Signal Handler for Die\nCan't locate object method \"tid\" via package \"threads\" at C:/Strawberry/perl/lib/XSLoader.pm line 89.\nD:\\ABC\\AutomationData\\ABC\\Temp\\Output.csv\n</code></pre>\n\n<p>NOTE: I am using MIME::Lite for forming and sending out mails.</p>\n"}, {"tags": ["perl", "security"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1499126298, "post_id": 44894603, "comment_id": 76768312, "body": "Possible <a href=\"https://stackoverflow.com/questions/6082219/perl-regex-e-eval-modifier-with-s\">dup</a>, but not certain. I&#39;ve never used the <code>e</code> regex modifier to the point I&#39;d need to worry about it. Valid question though."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1499139468, "post_id": 44895507, "comment_id": 76770869, "body": "<i>&quot;But this isn&#39;t entirely true&quot;</i> This is misleading and worthy of a bug report, so I shall issue one when I get back to a working PC. I&#39;m currently in a hotel in Athens with a drained laptop and no charger, and have only my tablet to talk to the world!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1499137180, "last_edit_date": 1592644375, "creation_date": 1499129586, "answer_id": 44895507, "question_id": 44894603, "link": "https://stackoverflow.com/questions/44894603/security-concerns-with-perl-e-modifier/44895507#44895507", "title": "security concerns with Perl /e modifier", "body": "<pre><code>perl -pe 's/abc/$ARGV[0]/ge'\n</code></pre>\n<blockquote>\n<p>Are there any security concerns with this approach? I mean is it possible to give such positional parameter value which causes perl to execute an unwanted function?</p>\n</blockquote>\n<hr />\n<p>In\n<a href=\"https://perldoc.perl.org/perlop.html\" rel=\"noreferrer\"><code>perldoc perlop</code></a>\nin the section\n<a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"noreferrer\"><em>Regexp Quote-Like Operators</em></a>\nit explains</p>\n<ul>\n<li><strong>e</strong> Evaluate the right side as an expression</li>\n<li><strong>ee</strong> Evaluate the right side as a string then <code>eval</code> the result.</li>\n</ul>\n<p>But this isn't entirely true. In both cases the &quot;right side&quot;\u2014the <em>replacement</em>\u2014is evaluated as if it were a <code>do</code> block<sup>\u2020</sup>. In the  first case the result provides the replacement string, while in the second the result is passed to <code>eval</code> and the result of <em>that</em> provides the replacement string. There is no distinction whereby the <em>replacement</em> is evaluated as an &quot;expression&quot; in the first place and as a &quot;string&quot; in the second.</p>\n<p>Both <code>/e</code> and <code>/ee</code> allow for any valid Perl code sequence, including loops, conditionals, and multiple statements, and aren't limited to a single expression</p>\n<p>There's never anything wrong with <code>$ARGV[0]</code> in isolation. Tainted strings become dangerous only if you <em>execute</em> them, either as Perl, using <code>eval</code>, or as shell code using <code>system</code>, <code>qx//</code>, or backticks. So it's fine in the replacement part of a substitution with a single <code>/e</code> modifier</p>\n<p>But if you use something else in the replacement, for instance</p>\n<pre><code>perl -pe 's/abc/qx{$ARGV[0]}/eg'\n</code></pre>\n<p>then that parameter will be executed as a shell command, so it clearly isn't safe. But then nor is</p>\n<pre><code>perl -pe 's/abc/unlink glob &quot;*.*&quot;/eg'\n</code></pre>\n<p>so you have to be sensible about it</p>\n<p><em><strong>What is dangerous</strong></em> is the double-e modifier <code>/ee</code>, which treats the replacement as a Perl <code>do</code> block and then does an <code>eval</code> on the result. So something like</p>\n<pre><code>    s/abc/$ARGV[0]/eeg\n</code></pre>\n<p>is very unsafe, because you could run your code like this</p>\n<pre><code>    perl -pe 's/abc/$ARGV[0]/eeg' 'unlink glob *.*'\n</code></pre>\n<p>With just a single <code>/e</code> this would just replace <code>abc</code> with the <em>string</em>\n<code>unlink glob *.*</code>\nin <code>$ARGV[0]</code>. But using <code>/ee</code>, the string is passed to <code>eval</code> and all your files are deleted!</p>\n<p>Remember this:</p>\n<ul>\n<li><p><strong>/e</strong> \u2014 replacement is an <em>expression</em> (a <code>do</code> block)</p>\n</li>\n<li><p><strong>/ee</strong> \u2014 replacement is an <em>expression</em> (a <code>do</code> block) and the result is passed to <em><code>eval</code></em></p>\n</li>\n</ul>\n<br/>\n<br/>\n<p><sup>\u2020</sup>\n<i>This is why I choose to use braces to delimit substitutions that use one of the <code>/e</code> modes. With </i>\n<code>s{abc}{ $ARGV[0] }ge</code> <em>the</em> replacement <em>looks much more like the block of code that it is than if I had used the usual slashes</em></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1499146751, "last_edit_date": 1499146751, "creation_date": 1499145840, "answer_id": 44897559, "question_id": 44894603, "link": "https://stackoverflow.com/questions/44894603/security-concerns-with-perl-e-modifier/44897559#44897559", "title": "security concerns with Perl /e modifier", "body": "<p>Unlike <code>/ee</code>, there's no inherent risk to <code>/e</code> as it doesn't invoke the Perl parser. It simply causes code <em>in the source file</em> to be evaluated, just like how <code>map BLOCK LIST</code> and <code>for (LIST) BLOCK</code> evaluate their <code>BLOCK</code>.</p>\n\n<p>Note that</p>\n\n<pre><code>s{$foo}{$bar}g\n</code></pre>\n\n<p>is simply short for</p>\n\n<pre><code>s{$foo}{ qq{$bar} }eg\n</code></pre>\n\n<p>So if you're ok with</p>\n\n<pre><code>perl -pe's/abc/$ARGV[0]/g'\n</code></pre>\n\n<p>then you're ok with</p>\n\n<pre><code>perl -pe's/abc/\"$ARGV[0]\"/eg'\n</code></pre>\n\n<p>and the virtually identical</p>\n\n<pre><code>perl -pe's/abc/$ARGV[0]/eg'\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 1053143, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c153148e19e1e7c04c48a2a5c4f68b54?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/1053143/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 44895507, "answer_count": 2, "score": 5, "last_activity_date": 1499146751, "creation_date": 1499121281, "question_id": 44894603, "link": "https://stackoverflow.com/questions/44894603/security-concerns-with-perl-e-modifier", "title": "security concerns with Perl /e modifier", "body": "<p>Let's say that I have a Perl script which contains a substitution command which takes replacement string as a positional parameter and uses <code>/e</code> modifier:</p>\n\n<pre><code>perl -pe 's/abc/$ARGV[0]/ge;'\n</code></pre>\n\n<p>Are there any security concerns with this approach? I mean is it possible to give such positional parameter value which causes perl to execute an unwanted function? I mean something similar: <code>perl -pe 's/abc//;unlink (\"/tmp/file\");'</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499107453, "post_id": 44892090, "comment_id": 76762188, "body": "With a <code>while</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1499110959, "post_id": 44892172, "comment_id": 76763720, "body": "Except that you really shouldn&#39;t do this as you&#39;ll be thrashing the CPU as hard as it will go just to repeat the check every few microseconds. A <code>sleep 1</code> in there would be a huge improvement."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1499127838, "post_id": 44892172, "comment_id": 76768650, "body": "See also <a href=\"https://metacpan.org/pod/Filesys::Notify::Simple\" rel=\"nofollow noreferrer\">Filesys::Notify::Simple</a>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1499107526, "creation_date": 1499107526, "answer_id": 44892172, "question_id": 44892090, "link": "https://stackoverflow.com/questions/44892090/using-if-with-loop/44892172#44892172", "title": "Using if with loop", "body": "<p>You need a <code>while</code> loop.</p>\n\n<pre><code>while (!-e $grin) {\n    # do stuff...\n}\n\nprint \"file $grib exists\\n\";\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlsyn.html#Compound-Statements\" rel=\"noreferrer\">compound statements in perlsyn</a>.</p>\n"}], "owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 44892172, "answer_count": 1, "score": -2, "last_activity_date": 1499110880, "creation_date": 1499107121, "last_edit_date": 1499110880, "question_id": 44892090, "link": "https://stackoverflow.com/questions/44892090/using-if-with-loop", "title": "Using if with loop", "body": "<p>I would like to repeat the following commands if the file <code>$grib</code> doesn't exist, till it exists.. What is the best way to introduce a loop in order to repeatedly check whether the file exists.</p>\n\n<pre><code>$grib = \"model.grb\";\n\nif ( -e $grib ) {\n    print \"File $grib exists\";\n}\nelse {\n    print \"without file $grib\";\n}\n</code></pre>\n"}, {"tags": ["perl", "constants"], "comments": [{"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499103772, "post_id": 44890906, "comment_id": 76760541, "body": "The problem doesn&#39;t appear to have anything to do with <code>use constant</code> - it&#39;s the hash initialiser that causes it - <code>my $href = { filepath =&gt; file(&#39;directory&#39;, &#39;filename&#39;) };</code> also assigns the blessed ref to the key."}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499104357, "post_id": 44890906, "comment_id": 76760819, "body": "Nothing to do with hash initialisers either! <code>my $scalar = file(&#39;directory&#39;, &#39;filename&#39;); print Dumper $scalar;</code> does it too!"}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499104546, "post_id": 44890906, "comment_id": 76760892, "body": "In case you&#39;re wondering, the actual use case with the constant is in conjunction with <code>HTML::Tiny</code>.  I&#39;m doing <code>print $h-&gt;form({action=&gt;URL})</code> where <code>URL</code> is the constant, and I get an empty <code>action</code> attribute in the HTML, presumably because HTML::Tiny is choking on the non-string value for the <code>action</code> key."}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499119392, "post_id": 44890906, "comment_id": 76766764, "body": "It turns out that <code>HTML::Tiny</code> was the culprit - there&#39;s a bug in the <code>{ attr =&gt; [] }</code> processing that inserts a valueless attribute - it takes anything for which <code>ref</code> returns TRUE to trigger this behaviour, so objects are ignored.  See my answer."}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499333358, "post_id": 44890906, "comment_id": 76865149, "body": "To summarise another answer thread, my initial error in diagnosing this problem was thinking that <code>Path::Class::file</code> returns a string. It doesn&#39;t, it returns a <code>Path::Class::File</code> object as @ikegami pointed out, and an object in Perl is a <code>ref</code>, which triggered the &quot;valueless attribute&quot; behaviour. There&#39;s been some discussion about whether this should happen for a ref that isn&#39;t a reference to an empty array which I won&#39;t repeat here."}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499689163, "post_id": 44890906, "comment_id": 76997191, "body": "I&#39;m not sure why this question got a downvote as others may well make the same mistake with constants and self-stringifying objects as me. If you downvoted, please have the courtesy to explain why."}], "answers": [{"comments": [{"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499118324, "post_id": 44891044, "comment_id": 76766473, "body": "Yes, you&#39;re right. Unfortunately <code>HTML::Tiny</code> uses <code>ref $val</code> to check whether <code>$val</code> is a scalar (string) and ignores it if it isn&#39;t - see my answer for details."}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 1, "creation_date": 1499689327, "post_id": 44891044, "comment_id": 76997336, "body": "And, yes, taking the time to RTFM and get the function you&#39;re calling to return a string if that&#39;s what you want in your constant is sound advice."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1499102462, "creation_date": 1499102462, "answer_id": 44891044, "question_id": 44890906, "link": "https://stackoverflow.com/questions/44890906/perl-pathclassfile-with-use-constant-gives-blessed-ref-not-string-why/44891044#44891044", "title": "Perl Path::Class::file with &quot;use constant&quot; gives blessed ref, not string - why?", "body": "<p>The <a href=\"https://metacpan.org/pod/Path::Class#file\" rel=\"noreferrer\"><code>file</code> function from the module Path::Class</a> is in fact a constructor for a Path::Class object. It always returns an object. Even the <a href=\"https://metacpan.org/pod/Path::Class#SYNOPSIS\" rel=\"noreferrer\">SYNOPSIS</a> says so.</p>\n\n<blockquote>\n<pre><code>use Path::Class;\n\nmy $dir  = dir('foo', 'bar');       # Path::Class::Dir object\nmy $file = file('bob', 'file.txt'); # Path::Class::File object\n</code></pre>\n</blockquote>\n\n<p>If all you want is the path, call that method on the return value of <code>file</code> and assign that calls' return value to your constant. The object you get is a <a href=\"https://metacpan.org/pod/Path::Class::File\" rel=\"noreferrer\">Path::Class::File</a>. It provides various methods. To do the same as when you use the string overload, call the <code>stringify</code> method.</p>\n\n<pre><code>use constant FILEPATH =&gt; file('directory', 'filename')-&gt;stringify;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 168160, "user_id": 19679, "user_type": "moderator", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52a2ffb44b1c11ab9001cb67e0a0021c?s=128&d=identicon&r=PG", "display_name": "Brad Larson", "link": "https://stackoverflow.com/users/19679/brad-larson"}, "edited": false, "score": 0, "creation_date": 1499633516, "post_id": 44891084, "comment_id": 76975878, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/148741/discussion-on-answer-by-ikegami-perl-pathclassfile-with-use-constant-gives\">moved to chat</a>."}, {"owner": {"reputation": 168160, "user_id": 19679, "user_type": "moderator", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52a2ffb44b1c11ab9001cb67e0a0021c?s=128&d=identicon&r=PG", "display_name": "Brad Larson", "link": "https://stackoverflow.com/users/19679/brad-larson"}, "edited": false, "score": 0, "creation_date": 1499702869, "post_id": 44891084, "comment_id": 77007486, "body": "There are 148 deleted comments on this answer. We&#39;re tired of dealing with this ongoing argument, so any further comments will be deleted. If you have more to say, take it to the above-linked chatroom."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1499463918, "last_edit_date": 1499463918, "creation_date": 1499102618, "answer_id": 44891084, "question_id": 44890906, "link": "https://stackoverflow.com/questions/44890906/perl-pathclassfile-with-use-constant-gives-blessed-ref-not-string-why/44891084#44891084", "title": "Perl Path::Class::file with &quot;use constant&quot; gives blessed ref, not string - why?", "body": "<p>The relevant part of HTML::Tiny decides what to do based on the type of the inputs. It expects either <code>undef</code>, a string or an array ref, but you provided something that is none of these. In other words, this is a case of <a href=\"https://en.wikipedia.org/wiki/Garbage_in,_garbage_out\" rel=\"nofollow noreferrer\">GIGO</a>. You are using the value returned by <code>file()</code>, which is an object that overloads stringification.</p>\n\n<p>Use either of the following to provide the expected input:</p>\n\n<pre><code> use constant FILEPATH =&gt; file('directory', 'filename')-&gt;stringify;\n</code></pre>\n\n<p>or</p>\n\n<pre><code> use constant FILEPATH =&gt; \"\".file('directory', 'filename');\n</code></pre>\n\n<p>Note that it's usually unsafe to unsafe to use objects as constants because they're not constant. However, since <code>file()</code> returns an immutable object, there's no harm in using it as a constant since it really is constant.</p>\n"}, {"comments": [{"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499118875, "post_id": 44894178, "comment_id": 76766647, "body": "Seems that I&#39;m not the first person to run into this - <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=81682\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=81682</a> was opened 5 years ago - I guess I&#39;ll be using the <code>stringify</code> workaround!"}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499689404, "post_id": 44894178, "comment_id": 76997404, "body": "An explanation of the downvote would be appreciated. And common courtesy."}, {"owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "edited": false, "score": 0, "creation_date": 1499704317, "post_id": 44894178, "comment_id": 77008391, "body": "As to whether a self-stringifying object is a valid scalar input value for HTML::Tiny, it&#39;s straightforward to investigate: <code>perl -MHTML::Tiny -MPath::Class -le &#39;use constant MYPATH =&gt; file(&quot;directory&quot;,&quot;filename&quot;); print HTML::Tiny-&gt;new(mode=&gt;&quot;html&quot;)-&gt;tag(&quot;p&quot;, &quot;mypath&quot;, &quot;=&quot;, MYPATH, [ MYPATH, &quot;=&quot;, &quot;mypath&quot; ], [ \\&quot;b&quot;, &quot;mypath&quot;, &quot;=&quot;, MYPATH ], { mypath=&gt;MYPATH }, MYPATH )&#39;</code> gives <code>&lt;p&gt;mypath&lt;&#47;p&gt;&lt;p&gt;=&lt;&#47;p&gt;&lt;p&gt;directory&#47;filename&lt;&#47;p&gt;&lt;p&gt;directory&#47;f&zwnj;&#8203;ilename=mypath&lt;&#47;p&gt;&lt;p&zwnj;&#8203;&gt;&lt;b&gt;mypath&lt;&#47;b&gt;&lt;b&gt;=&lt;&#47;&zwnj;&#8203;b&gt;&lt;b&gt;directory&#47;filen&zwnj;&#8203;ame&lt;&#47;b&gt;&lt;&#47;p&gt;&lt;p mypath&gt;directory&#47;filename&lt;&#47;p&gt;</code> so it stringified correctly except in the href case."}], "tags": [], "owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "is_accepted": true, "score": -1, "last_activity_date": 1499117942, "creation_date": 1499117942, "answer_id": 44894178, "question_id": 44890906, "link": "https://stackoverflow.com/questions/44890906/perl-pathclassfile-with-use-constant-gives-blessed-ref-not-string-why/44894178#44894178", "title": "Perl Path::Class::file with &quot;use constant&quot; gives blessed ref, not string - why?", "body": "<p>You're right about Path::Class::file returning an object.  That's what all the \"bless\" stuff was in the Dumper output.  Sorry I didn't realise that sooner.</p>\n\n<p>As you'll see from my comments, I ran into the problem using <code>HTML::Tiny</code>, which you can see as follows:-</p>\n\n<pre><code>$ perl -MPath::Class -MHTML::Tiny -le 'print HTML::Tiny-&gt;new(mode=&gt;\"html\")-&gt;form({action=&gt;file(\"cgi-bin\", \"script\")})'\n&lt;form action&gt;&lt;/form&gt;\n</code></pre>\n\n<p>As you can see, the <code>action</code> attribute is missing the path.  However,</p>\n\n<pre><code>$ perl -MPath::Class -MHTML::Tiny -le 'print HTML::Tiny-&gt;new(mode=&gt;\"html\")-&gt;form({action=&gt;file(\"cgi\", \"script\").\"\"})'\n&lt;form action=\"cgi/script\"&gt;&lt;/form&gt;\n</code></pre>\n\n<p>This works because the <code>.\"\"</code> string concatenation operator causes the Class::Path::File object's automatic stringifier to be called, so an actual string is passed in the <code>{action=&gt;value}</code> hash, not an object.</p>\n\n<p>If you dig into the <a href=\"http://search.cpan.org/dist/HTML-Tiny/lib/HTML/Tiny.pm\" rel=\"nofollow noreferrer\">HTML::Tiny 1.05</a> code, you'll find <code>sub _tag</code> on line 622, which goes</p>\n\n<pre><code>if ( ref $val ) {\n    return $attr if not $self-&gt;_xml_mode;\n</code></pre>\n\n<p>This test allows you to use <code>{ attr=&gt;[] }</code> to output an attribute name without a value, but unfortunately the test is also TRUE if <code>$val</code> is an object.  I'll raise a bug report for this against HTML::Tiny.</p>\n"}], "owner": {"reputation": 4041, "user_id": 232452, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/55f58b4080c3800065275a6f45c2f02c?s=128&d=identicon&r=PG", "display_name": "kbro", "link": "https://stackoverflow.com/users/232452/kbro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 44894178, "answer_count": 3, "score": -1, "last_activity_date": 1499463918, "creation_date": 1499101801, "question_id": 44890906, "link": "https://stackoverflow.com/questions/44890906/perl-pathclassfile-with-use-constant-gives-blessed-ref-not-string-why", "title": "Perl Path::Class::file with &quot;use constant&quot; gives blessed ref, not string - why?", "body": "<p>Running Perl 5.18 on Ubuntu 14.04 LTS, I wanted to create some pathname constants so I did</p>\n\n<pre><code>use Path::Class;\nuse constant FILEPATH =&gt; file('directory', 'filename');\n</code></pre>\n\n<p>However, when I came to use the constant in a hash aggregate ...</p>\n\n<pre><code>my $hash = { filepath =&gt; FILEPATH };\nuse Data::Dumper;\nprint Dumper $href;\n</code></pre>\n\n<p>... I was surprised to discover that the value of the <code>filepath</code> key was a blessed reference, not the string result from the function call that I was expecting.</p>\n\n<p>I can work around the problem like this ...</p>\n\n<pre><code>use constant FILEPATH =&gt; file('directory', 'filename') . \"\";\n</code></pre>\n\n<p>... which forces the Perl interpreter to evaluate the blessed reference, but</p>\n\n<p>(a) is there a better way, and\n(b) what the heck is going on?!</p>\n\n<p>I know that <code>use constant</code> is evaluated in a list context, but normally <code>use constant MYCONST =&gt; mysub(arg1, arg2);</code> does The Right Thing, evaluates the subroutine call and uses the return value. What's the cleverness with <code>Path::Class::file</code> that breaks this expectation?</p>\n"}, {"tags": ["perl", "hash", "measurement"], "answers": [{"tags": [], "owner": {"reputation": 1419, "user_id": 203856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f1108eabf701ed53b05a875e3d8203?s=128&d=identicon&r=PG", "display_name": "larsen", "link": "https://stackoverflow.com/users/203856/larsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1499095924, "creation_date": 1499095924, "answer_id": 44889368, "question_id": 44889020, "link": "https://stackoverflow.com/questions/44889020/perl-save-measurement-results/44889368#44889368", "title": "Perl save measurement results", "body": "<blockquote>\n  <p>But for hashes i have read that you cannot assign multiple values to\n  one key.</p>\n</blockquote>\n\n<p>It is true, but it does not mean you can't associate a data structure to a key. What you likely need are array references. Just to give you an idea:</p>\n\n<pre><code>my @array = (1, 2, 3);\n# First element of the array\n$array[0]; \n\n# $arrayref can be thought as a pointer to an anonymous array.\n# $arrayref is called a *reference*\nmy $arrayref = [ 1, 2, 3 ];\n# First element of the anonymous array $arrayref points to. \n# The -&gt; operator is used to dereference $arrayref, to access \n# that array.\n$arrayref-&gt;[0];\n</code></pre>\n\n<p>Notice (that's the interesting point for you problem) <code>$arrayref</code> is a scalar value, thus suitable to be used as a hash value. For example: </p>\n\n<pre><code>my %hash = (\n  tphlay =&gt; [ 1.5e-9, 2.5e-9 ]\n  ...\n);\n</code></pre>\n\n<p>I suggest you read <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a>. A familiarity with references and how to manipulate them is one of the pillars of Perl programming.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1499095986, "creation_date": 1499095986, "answer_id": 44889384, "question_id": 44889020, "link": "https://stackoverflow.com/questions/44889020/perl-save-measurement-results/44889384#44889384", "title": "Perl save measurement results", "body": "<p>You can store a reference to an array as a value for a hash key. To push to it, dereference it first with the <code>@{ ... }</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %measurement;\n\nwhile (&lt;&gt;) {\n    if (my ($key, $value) = /(\\w+)\\s*=\\s*([0-9.e+\\-]+)/) {\n        push @{ $measurement{$key} }, $value;\n    }\n}\n\nuse Data::Dumper; print Dumper \\%measurement;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'tphlay' =&gt; [\n                        '1.5e-9',\n                        '2.5e-9'\n                      ],\n          'tplhay' =&gt; [\n                        '4.8e-9',\n                        '1.8e-9'\n                      ],\n          'tphlby' =&gt; [\n                        '1.01e-8',\n                        '6.01e-8'\n                      ],\n          'tplhby' =&gt; [\n                        '2.4e-10',\n                        '1.4e-10'\n                      ]\n        };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8249095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50735db2188b4f2e18c99de910e4d0b7?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Bengel", "link": "https://stackoverflow.com/users/8249095/christopher-bengel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1499156936, "accepted_answer_id": 44889384, "answer_count": 2, "score": -1, "last_activity_date": 1499095986, "creation_date": 1499094805, "question_id": 44889020, "link": "https://stackoverflow.com/questions/44889020/perl-save-measurement-results", "closed_reason": "Needs more focus", "title": "Perl save measurement results", "body": "<p>i have a text file in which measurements are stored which looks like this:</p>\n\n<pre><code>sometext\nStep 1:\ntphlay  = 1.5e-9\ntplhay  = 4.8e-9\ntphlby  = 1.01e-8\ntplhby  = 2.4e-10\n\nStep 2:\ntphlay  = 2.5e-9\ntplhay  = 1.8e-9\ntphlby  = 6.01e-8\ntplhby  = 1.4e-10\n...\n</code></pre>\n\n<p>with multiple measurements (tphlay, ...) to each step and with multiple values to each measurement in the different steps. The script should be able to save all values for any measurement in a different array like arraytphlay = [1.5e-9, 2.5e-9] and so on. </p>\n\n<p>Every step will have the same measurements.\nOne of the problems is that the names of the measurements are variable and depend on previously run scripts. But i have created an array (namearray)  which contains these names. \nMy idea was to create one array for every element of namearray but i have read that this is bad practice since it uses soft references and that you should use hashes instead. But for hashes i have read that you cannot assign multiple values to one key. </p>\n\n<p>Therefore i would like to know how to save these measurements in an intelligent way and i you would be so kind maybe a code example since i am merely a beginner in perl.  </p>\n"}, {"tags": ["perl", "session", "dancer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1499095933, "post_id": 44887972, "comment_id": 76756653, "body": "In theory you should do <code>session-&gt;expires</code>, as <code>session</code> just returns the session object when it&#39;s used like that. However, in my test that returned <code>undef</code>. But I didn&#39;t have a full config and it&#39;s possible I did something wrong. If you do <code>p session</code> via <code>Data::Printer</code> you&#39;ll see that the Dancer2::Core::Session object that <code>session</code> returns has a method <code>expires</code>. The <code>cookie_duration</code> is not the expiry of the session on the server. See <a href=\"https://metacpan.org/pod/Dancer2::Core::Session#expires\" rel=\"nofollow noreferrer\">metacpan.org/pod/Dancer2::Core::Session#expires</a>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1499097163, "post_id": 44887972, "comment_id": 76757381, "body": "Hey, cool! That&#39;s exactly the solution. In my configuration <code>session-&gt;expires</code> returns 1514648770 (which is <code>now + 6 months</code>, the value I currently have configured as <code>cookie_duration</code>). Perfect. My problem was that I couldn&#39;t figure out how to access that value and/or convert <code>session()</code> to a <code>$session</code>. If you write a (short) answer, I&#39;ll overwhelm it with upvotes. ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1499100730, "creation_date": 1499100730, "answer_id": 44890638, "question_id": 44887972, "link": "https://stackoverflow.com/questions/44887972/how-to-access-dancer2s-session-object/44890638#44890638", "title": "How to access Dancer2&#39;s session object?", "body": "<p>You will get the session object back when you call <code>session</code> without any arguments. Feel free to assign it to a <code>$session</code> variable if that makes it easier to read. To get the expiration time, use <a href=\"https://metacpan.org/pod/Dancer2::Core::Session#expires\" rel=\"nofollow noreferrer\">the <code>expires</code> method</a>.</p>\n\n<pre><code>my $session = session;\nwarn $session-&gt;expires;\n</code></pre>\n\n<p>Or simpler:</p>\n\n<pre><code>warn session-&gt;expires;\n</code></pre>\n"}], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 44890638, "answer_count": 1, "score": 3, "last_activity_date": 1499100730, "creation_date": 1499091677, "question_id": 44887972, "link": "https://stackoverflow.com/questions/44887972/how-to-access-dancer2s-session-object", "title": "How to access Dancer2&#39;s session object?", "body": "<p>I'm using Dancer2 and the YAML session engine for my web app.\nMy <code>config.yml</code> contains</p>\n\n<pre><code>engines:\n  session:\n    YAML:\n      ...\n      cookie_duration: 5 minutes\n      ...\n</code></pre>\n\n<p>I'd like to display something like <em>\"Your session expires in X minutes\"</em>.</p>\n\n<p>How can I access this value, i.e. how can I access the <code>$session</code> object in my routes?</p>\n\n<p>With the DSL keyword <code>session</code> I can only set and get \narbitrary values, like <code>session username =&gt; 'Bob';</code> and <code>$username = session('username');</code> etc.</p>\n\n<p>Note that I'm not interested in getting the configuration value (<code>settings('engines')-&gt;{session}{YAML}{cookie_duration}</code>) because that's a string I'd had to parse and it depends on YAML being my session engine. I'd like to access <code>$session-&gt;session_duration</code>.</p>\n"}, {"tags": ["regex", "string", "perl", "substitution"], "comments": [{"owner": {"reputation": 5703, "user_id": 4899193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b65fc5fb7ab727d1f770206d6b5325?s=128&d=identicon&r=PG", "display_name": "Usagi Miyamoto", "link": "https://stackoverflow.com/users/4899193/usagi-miyamoto"}, "edited": false, "score": 2, "creation_date": 1499090900, "post_id": 44887610, "comment_id": 76753394, "body": "Create a temporal value for changing EG <code>cat</code> to <code>##</code> and after closing the circle, change <code>##</code> to to <code>mouse</code>..."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1499179633, "post_id": 44887610, "comment_id": 76794357, "body": "Can you simply split your real input string into token/words? e.g. <code>split(&#47;\\b&#47;,$_)</code> for the example above. [I have assumed the real problem is &quot;slightly different&quot;]"}, {"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1499334140, "post_id": 44887610, "comment_id": 76865694, "body": "@Andrzej A. Filip: thanks a lot for your replies, I will use the split approach until but I will soon learn about how to use hashes."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1499097818, "post_id": 44888122, "comment_id": 76757735, "body": "You don&#39;t need the <code>&#47;e</code> on the substitution operator here."}, {"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 0, "creation_date": 1499101291, "post_id": 44888122, "comment_id": 76759405, "body": "First of all, thanks a lot! But I am a little surprised that this simple problem needs such an extensive solution."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 0, "creation_date": 1499106215, "post_id": 44888122, "comment_id": 76761599, "body": "@ic23oluk Raw bone &quot;proof of concept&quot; version: <code>%S=(dog=&gt;&#39;cat&#39;,cat=&gt;&#39;mouse&#39;); s&#47;\\b(dog|cat)\\b&#47;$S{$1}&#47;g</code>. Version in the answer is harder to code but easier to maintain - I personally prefer such approach at low cost."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 1, "last_activity_date": 1499374683, "last_edit_date": 1499374683, "creation_date": 1499092051, "answer_id": 44888122, "question_id": 44887610, "link": "https://stackoverflow.com/questions/44887610/substitute-multiple-substrings-with-per-substring-substitution/44888122#44888122", "title": "substitute multiple substrings with per substring substitution", "body": "<p>You can use regexp for finding all matches and hash for finding replacements.<br>\nBelow please find script constructing regexp from keys of the hash keeping match=>replacement mapping.</p>\n\n<p>Bare bone \"proof of concept\" version:</p>\n\n<pre><code>%S=(dog=&gt;'cat',cat=&gt;'mouse'); # hash with match=&gt;replacements mappings\n# substitute \"dog\" and \"cat\" for values provided by S hash\ns/\\b(dog|cat)\\b/$S{$1}/g;\n# OR if if can easily split input string into \"words\"\n#    substitute \"words\" present in S hash and keep the rest unchanged\ns{\\b(\\S+?)\\b}{$S{$1}//$1}g;\n</code></pre>\n\n<p>Elaborate version with constructing regexp from hash key and tests:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# %S - hash keeping match=&gt;replacements pairs\nmy %S = (\n  dog  =&gt; \"cat\",\n  dogs =&gt; \"cats\",\n  cat  =&gt; \"mouse\",\n  cats =&gt; \"mice\",\n  mouse =&gt; \"dog\",\n  mice  =&gt; \"dogs\",\n);\nmy $regex = sprintf '\\b(?:%s)\\b', join('|',sort keys %S);\n$regex = qr($regex);\nprint \"REGEX: \",$regex,\"\\n\"; # print regexp for finding all matches\n\nwhile( &lt;DATA&gt; ) {\n  print \"IN:  \",$_; # print string before rewriting\n  s/($regex)/$S{$1}/g; # Replace all matches by replacements provided by %S hash\n  print \"OUT: \",$_; # print string after rewriting\n}\n\n# Put your tests strings in lines below __DATA__\n__DATA__\nDo dogs eat cats, or does your cat eat a mouse?\nDoes firecat fly?\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 44888122, "answer_count": 1, "score": 1, "last_activity_date": 1499374683, "creation_date": 1499090666, "last_edit_date": 1499110028, "question_id": 44887610, "link": "https://stackoverflow.com/questions/44887610/substitute-multiple-substrings-with-per-substring-substitution", "title": "substitute multiple substrings with per substring substitution", "body": "<p>regarding the following string: <em>\"Do dogs eat cats, or does your cat eat a mouse?\"</em></p>\n\n<p>I'd like to use the <strong>s///</strong> in Perl to replace each occurrence of \"dog\" with \"cat\", \"cat\" with \"mouse\" and \"mouse\" with \"dog\".</p>\n\n<p>so that the result is: <em>\"Do cats eat mice, or does your mouse eat a dog?\"</em></p>\n\n<p>My problem is, after the substitution of dogs with cats, cats then appears twice, but I only want to substitute the original cats.</p>\n\n<p>I know I could simply write several substitutions that are not global, but I was wondering if there is a one-liner for that.</p>\n\n<p>ps: of course I want to use the correct plural e.g., \u201cmice\u201d and not \u201cmouses\u201d</p>\n"}, {"tags": ["bash", "perl", "hash", "solaris"], "comments": [{"owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 0, "creation_date": 1499087325, "post_id": 44886314, "comment_id": 76750841, "body": "How are you calling <code>sed</code>? Single quotes shouldn&#39;t be special within this command. For example: <code>hashedPassword=&quot;start&#39;end&quot; &amp;&amp; echo &#39;&#47;^user1:&#47;s_:[^:]*:_:&#39;&quot;$hashedPassword&quot;&#39;:_&#39;</code> prints <code>&#47;^user1:&#47;s_:[^:]*:_:start&#39;end:_</code>, which looks fine."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507401839, "post_id": 44886431, "comment_id": 80198173, "body": "Can I convince you to come to the London Perl Workshop this year? Drop me a mail and we can have a chat. :)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507403193, "post_id": 44886431, "comment_id": 80198646, "body": "@simbabque Wow! London?! Let me think about that. I&#39;m so in love with that city :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507404691, "post_id": 44886431, "comment_id": 80199099, "body": "There you go: <a href=\"http://act.yapc.eu/lpw2017/\" rel=\"nofollow noreferrer\">act.yapc.eu/lpw2017</a> the London one is traditionally on a Saturday, and it&#39;s free. Unfortunately the trip is more expensive, compared to others. You did miss Hamburg and The Perl Conference in Amsterdam. That one was reasonably close to you I think, wasn&#39;t it?"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1499091364, "last_edit_date": 1499091364, "creation_date": 1499087383, "answer_id": 44886431, "question_id": 44886314, "link": "https://stackoverflow.com/questions/44886314/password-hash-not-working-with-single-quotes/44886431#44886431", "title": "Password hash not working with single quotes", "body": "<p>Supply the password as a parameter to your one-liner instead of interpolating it directly in the code:</p>\n\n<pre><code>#!/usr/bin/env bash\n\npassword='Pa$$word'\nhashedPassword=$(perl -e 'print crypt($ARGV[0], \"salt\"), \"\\n\"' $password)\n\necho \"p='$password', h='$hashedPassword'\"\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>p='Pa$$word', h='saFQXTeqbkiIQ'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 0, "last_activity_date": 1499087421, "creation_date": 1499087421, "answer_id": 44886446, "question_id": 44886314, "link": "https://stackoverflow.com/questions/44886314/password-hash-not-working-with-single-quotes/44886446#44886446", "title": "Password hash not working with single quotes", "body": "<p>As password contains <code>$</code> and <code>$</code> are syntactical in perl it is not easy to pass in hard in script, other options are to pass by arguments or by environment.</p>\n\n<pre><code># by argument\nperl -e '($password, $salt)=@ARGV;print crypt($password, $salt), \"\\n\"' \"$password\" \"$salt\"\n\n# by environment variable\npassword=$password salt=$salt perl -e 'print crypt($ENV{password}, $ENV{salt}), \"\\n\"'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": true, "score": 1, "last_activity_date": 1499088427, "creation_date": 1499088427, "answer_id": 44886811, "question_id": 44886314, "link": "https://stackoverflow.com/questions/44886314/password-hash-not-working-with-single-quotes/44886811#44886811", "title": "Password hash not working with single quotes", "body": "<p>Your problem is in bash.  Trying to set a shell variable containing a single quote by enclosing it in single quotes will not work.  Per the man page:</p>\n\n<blockquote>\n  <p>Enclosing characters in single quotes preserves the  literal  value  of each character within the quotes.  A single quote may not occur between single quotes, even when preceded by a backslash.</p>\n</blockquote>\n"}], "owner": {"reputation": 818, "user_id": 7523624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2238eb46522f4038ea86b5f48861490f?s=128&d=identicon&r=PG&f=1", "display_name": "Jelphy", "link": "https://stackoverflow.com/users/7523624/jelphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 44886811, "answer_count": 3, "score": -1, "last_activity_date": 1499091364, "creation_date": 1499086986, "question_id": 44886314, "link": "https://stackoverflow.com/questions/44886314/password-hash-not-working-with-single-quotes", "title": "Password hash not working with single quotes", "body": "<p>I'm trying to hash a password using the crypt hash function in Perl. In a Bash script so far I have:</p>\n\n<pre><code>password='Pa$$word'\nhashedPassword=\"$(perl -e \"print crypt('$password', 'salt'), \\\"\\n\"\")\"\n</code></pre>\n\n<p>I then modify/copy /etc/shadow using sed:</p>\n\n<pre><code>sed -e '/^user1:/s_:[^:]*:_:'\"$hashedPassword\"':_' /etc/shadow &gt; /tmp/shadow\n</code></pre>\n\n<p>The method works, except when passing a string containing single quotes. How can I handle a password containing ' single quotes? Running Solaris 10 OS.</p>\n"}, {"tags": ["perl", "user-interface", "tk"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1499085942, "post_id": 44885862, "comment_id": 76749849, "body": "What is the output of <code>which perl</code>? You may have installed <code>Tk</code> for different version of <code>perl</code>."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1499086065, "post_id": 44885862, "comment_id": 76749933, "body": "thankxx.. there was a problem with that! After changing it, I am getting:                             _X11TransSocketUNIXConnect: Can&#39;t connect: errno = 2     _X11TransSocketUNIXConnect: Can&#39;t connect: errno = 2     _X11TransSocketUNIXConnect: Can&#39;t connect: errno = 2     _X11TransSocketUNIXConnect: Can&#39;t connect: errno = 2     _X11TransSocketUNIXConnect: Can&#39;t connect: errno = 2     _X11TransSocketUNIXConnect: Can&#39;t connect: errno = 2     couldn&#39;t connect to display &quot;:0&quot; at /usr/local/ext/perl/5.005/i686-linux/Tk/MainWindow.pm line 55. MainWindow-&gt;new() at ./UITRY.pl line 8"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499086214, "post_id": 44885862, "comment_id": 76750034, "body": "What OS do you use? MacOS needs XQuartz to run X applications."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499086609, "post_id": 44885862, "comment_id": 76750312, "body": "@choroba I am connecting to a unix box through my windows system. I am running my perl script in MobaXterm"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499086951, "post_id": 44885862, "comment_id": 76750554, "body": "Sorry, I don&#39;t know MobaXterm. Are any X applications running? <code>xeyes</code>, <code>xterm</code>?"}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1499088018, "post_id": 44885862, "comment_id": 76751330, "body": "I am running my script on a unix box basically on my windows machine. Sorry, I don&#39;t have an idea about X applications. However, when I do:      ps -e | grep X  It does not show anything"}, {"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1499088847, "post_id": 44885862, "comment_id": 76751917, "body": "Make sure your DISPLAY environment variable is set correctly for use with MobaXterm.   You will need to set up MobaXterm correctly.  You will probably need to find a MobaXterm user for help. <a href=\"http://mobaxterm.mobatek.net/documentation.html#1_4\" rel=\"nofollow noreferrer\">mobaxterm x11</a>"}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1499089276, "post_id": 44885862, "comment_id": 76752185, "body": "echo $DISPLAY shows undefined. How to set it?"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1499093124, "creation_date": 1499085676, "last_edit_date": 1499093124, "question_id": 44885862, "link": "https://stackoverflow.com/questions/44885862/perls-tk-library-for-ui", "title": "Perl&#39;s Tk library for UI", "body": "<p>I am trying Perl's Tk library for creating a UI for my script.</p>\n\n<p>When I do</p>\n\n<pre><code>perl -e \"use Tk\"\n</code></pre>\n\n<p>the prompt is shown indicating that the module is present.</p>\n\n<p>However, when I try to run a simple program, I get the error:</p>\n\n<blockquote>\n  <p>Can't locate Tk.pm in @INC (@INC contains: /opt/rh/devtoolset-2/root/usr/lib64/perl5/vendor_perl /opt/rh/devtools................... etc etc) at ./UITRY.pl line 5.<br>\n  BEGIN failed--compilation aborted at ./UITRY.pl line 5.**</p>\n</blockquote>\n\n<p>the code is:</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Display Hello World program\n\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\n$mw-&gt;geometry(\"200x100\");\n$mw-&gt;title(\"Hello World!!!\");\n$mw-&gt;Label(-text =&gt; 'Hello World')-&gt;pack();\n$mw-&gt;Button(-text =&gt; \"Close\", -command =&gt;sub{exit})-&gt;pack();\n\nMainLoop;\n</code></pre>\n"}, {"tags": ["regex", "perl", "dynamic", "replace"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499079351, "post_id": 44883692, "comment_id": 76745589, "body": "Don&#39;t use <a href=\"http://p3rl.org/Switch\" rel=\"nofollow noreferrer\">Switch</a>, it&#39;s dangerous. It&#39;s definitely doable in Perl, but whether <i>you</i> can make it depends on how well you know Perl."}, {"owner": {"reputation": 11, "user_id": 6588856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58107d0bebc233b42d3509c561ab8ec3?s=128&d=identicon&r=PG&f=1", "display_name": "griggson", "link": "https://stackoverflow.com/users/6588856/griggson"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499080102, "post_id": 44883692, "comment_id": 76746054, "body": "I&#39;m not an axpert in Perl. I did only a few scripts. Can you tell me what have you thinked of? Should I let regex and do it with substr-index?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499083508, "post_id": 44883692, "comment_id": 76748209, "body": "I&#39;d probably try with regexes - and I mean the plural."}, {"owner": {"reputation": 11, "user_id": 6588856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58107d0bebc233b42d3509c561ab8ec3?s=128&d=identicon&r=PG&f=1", "display_name": "griggson", "link": "https://stackoverflow.com/users/6588856/griggson"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1499085891, "post_id": 44883692, "comment_id": 76749818, "body": "regexes I tried too... my script&#39;s approach is that reads the configuration file and creates an array of regexes then for each file that needs to be processed applies regex substitution."}, {"owner": {"reputation": 326, "user_id": 4810570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e7lh0mX9YsA/AAAAAAAAAAI/AAAAAAAAApY/EGaDNC0uGEI/photo.jpg?sz=128", "display_name": "Curt Evans", "link": "https://stackoverflow.com/users/4810570/curt-evans"}, "edited": false, "score": 0, "creation_date": 1499119587, "post_id": 44883692, "comment_id": 76766819, "body": "I would strongly recommend a State Machine for this task.  Multiple complex regexes are likely to produce nasty surprises, and are difficult to test in an exhaustive way."}, {"owner": {"reputation": 11, "user_id": 6588856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58107d0bebc233b42d3509c561ab8ec3?s=128&d=identicon&r=PG&f=1", "display_name": "griggson", "link": "https://stackoverflow.com/users/6588856/griggson"}, "edited": false, "score": 0, "creation_date": 1499163778, "post_id": 44883692, "comment_id": 76783577, "body": "I understand the concept of a state machine but how can I apply it to my problem?"}], "owner": {"reputation": 11, "user_id": 6588856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58107d0bebc233b42d3509c561ab8ec3?s=128&d=identicon&r=PG&f=1", "display_name": "griggson", "link": "https://stackoverflow.com/users/6588856/griggson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499087132, "creation_date": 1499078874, "last_edit_date": 1499087132, "question_id": 44883692, "link": "https://stackoverflow.com/questions/44883692/dynamic-replacing-and-removing-c-code-using-perl", "title": "Dynamic replacing and removing C code (using Perl)", "body": "<p>I come to you with my question: what is the best way to replace/remove pieces of C code dynamically? I already did something in Perl using regular expressions and reading what to replace/remove from a configuration file but I can't make it dynamic.</p>\n\n<p>Code:</p>\n\n<pre><code>#autoflush output so it will not interfere with calling application\nlocal $| = 1;\n##\n\n#libraries\nuse warnings;\nuse strict;\nuse Switch;\nuse Cwd;\nuse File::Find;\n##\n\n#global variables\nmy @config;\nmy $file;\nmy $directory;\nmy $result;\n##\n\nif(@ARGV &lt; 1)\n{\n    $directory = cwd();\n}\nelse\n{\n    $directory = $ARGV[0];\n}\n$result = $directory . \"\\\\result\";\n\nif(! -d $result)\n{\n    mkdir ($result);\n}\n\nopen LOG, \"&gt;\", $result . \"\\\\log.log\";\n\nsub start\n{\n    my $configFile = $_[0];\n    open CONFIG, $configFile;\n    local $/;\n    my $conf = &lt;CONFIG&gt;;\n    close CONFIG;\n\n    foreach my $line (split(/\\n\\*/, $conf))\n    {\n        if(index($line, \"*\") == 0)\n        {\n            $line = substr($line, 1);\n        }\n        setConfig($line);\n    }\n    processFiles();\n}\n\nsub setConfig\n{\n    my $line = $_[0];\n    my $count = () = $line =~ /\\s*==&gt;\\s*/;\n    switch($count)\n    {\n        case 0\n        {\n            remove($line);\n        }\n        case 1\n        {\n            replace($line);\n        }\n    }\n}\n\nsub addSlashes\n{\n    $_[0] =~ s/([\\.\\\\\\/\\+\\*\\?\\[\\^\\]\\(\\)\\{\\}\\=\\!\\&lt;\\&gt;\\|\\:\\-])/\\\\$1/xg;\n    if($_[1] == 1)\n    {\n        $_[0] =~ s/([\\$])/\\\\$1/xg;\n    }\n    return;\n}\n\nsub remove\n{\n    my $line = $_[0];\n    addSlashes($line, 1);\n    $line =~ s/(\\\\\\$){3}/\\.\\+/g;\n    $config[@config][0] = qr/$line/;\n    $config[@config - 1][1] = q(\"\");\n    $line = \"\\\\(\" . $line . \"\\\\(\";\n    $config[@config - 1][2] = qr/$line/;\n}\n\nsub replace\n{\n    my $line = $_[0];\n    my @split = split(/\\s*==&gt;\\s*/, $line);\n    my $original = $split[0];\n    my $replace = $split[1];\n    my $regex;\n    addSlashes($original, 1);\n    addSlashes($replace, 0);\n\n    my $counter = 1;\n    while($original =~ /\\\\\\$([\\d]{1,3})\\\\\\$/g)\n    {\n        if($1 &lt;= $counter &amp;&amp; $1 &gt; 0)\n        {\n            $counter++;\n        }\n        else\n        {\n            print \"Invalid format\\n\";\n            return;\n        }\n    }\n\n    if($counter == 1)\n    {\n        $config[@config][0] = qr/$original/;\n        $config[@config - 1][1] = q(\") . $replace . q(\");\n        $original = \"\\\\(\" . $original . \"\\\\(\";\n        $config[@config - 1][2] = qr/$original/;\n        return;\n    }\n\n    while($replace =~ /\\$([\\d]{1,3})\\$/g)\n    {\n        if($1 &lt;= 0 &amp;&amp; $1 &gt;= $counter)\n        {\n            print \"Invalid format\\n\";\n            return;\n        }\n    }\n\n    $original =~ s/\\\\\\$\\d{1,3}\\\\\\$/\\(\\.\\+\\?\\)/xg;\n    $original =~ s/\\?\\)$/\\)/xg;\n\n    $replace =~ s/\\$(\\d{1,3})\\$/\\$$1/xg;\n\n    $config[@config][0] = qr/$original/;\n    $config[@config - 1][1] = q(\") . $replace . q(\");\n\n    $original = \"\\\\(\" . $original . \"\\\\(\";\n    $config[@config - 1][2] = qr/$original/;\n}\n\nsub processFiles\n{\n    my @files = grep { ! -d } glob \"$directory\\\\*\";\n    foreach my $file (@files)\n    {\n        if($file =~ /\\.(h|c)$/)\n        {\n            process($file);\n        }\n    }\n}\n\nsub process\n{\n    my $file = $_[0];\n    open READ, $file;\n    local $/;\n    my $text = &lt;READ&gt;;\n    close READ;\n    print LOG \"\\n--&gt; $file &lt;--\\n\";\n    for(my $i = 0; $i &lt; @config; $i++)\n    {\n        my $original = $config[$i][0];\n        my $replace = $config[$i][1];\n        my $log = $config[$i][2];\n\n        while($text =~ /$log/g)\n        {\n            print LOG $log . \" ----&gt; \" . $1 . \"\\n\";\n        }\n\n        $text =~ s/$original/$replace/eeg;\n        print LOG \"\\n\";\n    }\n\n    $file = $result . substr($file, rindex($file, \"\\\\\"));\n\n    open WRITE, \"&gt;\", $file;\n    print WRITE $text;\n    close WRITE;\n}\n\nstart(\"qm2asil.cfg\");\n\nclose LOG;\n</code></pre>\n\n<p>Configuration file content:</p>\n\n<pre><code>*static \n*GET_$1$() ==&gt; $1$\n*GET_$1$($2$) ==&gt; $1$[$2$]\n*SET_$1$($2$,$3$); ==&gt; $1$[$2$] = $3$;\n*SET_$1$($2$); ==&gt; $1$ = $2$;\n</code></pre>\n\n<p>The idea is that there are already a few rules to replace/remove and they work but can exist more complex rules that I couldn't manage.</p>\n\n<p>Example: </p>\n\n<pre><code>SET_VAR1((i),(u8)(((s32)(((s32)GET_VAR2 ((i))) != 0)) &amp;&amp; ((s32)((u8)(((s32) (((s32)VAR3[i]) != 0)) ^ ((s32)(((s32) VAR4[i]) != 0)))))));\n</code></pre>\n\n<p>I want to remove SET function and make it an assignment to the variable (VAR1[i] = ...). This is one of many variations of things that need to be removed/replaced.</p>\n\n<p>What do you advise me to do? Can I make it work using Perl and regex or I should reorientate to another method and/or programming language?</p>\n\n<p>EDIT: I already create regexes based on the configuration file but I have problem matching unknown expressions (currently I use .+). The main idea is that I want to keep the configuration as simple I can.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YK8LO.png\" rel=\"nofollow noreferrer\">regexes</a></p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1499075920, "post_id": 44882621, "comment_id": 76743513, "body": "I think some sample data and example usage would help. There are no <code>grep</code> statements in your code..."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1499077231, "post_id": 44882621, "comment_id": 76744386, "body": "Side note, <code>my ($matched) = $File::Find::name =~ m!$logDir&#47;(.*?)&#47;$pattern!;</code> if you care about DRY and performance."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1499078167, "post_id": 44882621, "comment_id": 76744901, "body": "Checks like <code>-d $File::Find::dir</code> and <code>-f $File::Find::name</code> are redundant"}, {"owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "edited": false, "score": 0, "creation_date": 1499079854, "post_id": 44882621, "comment_id": 76745900, "body": "updated the input"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 2, "creation_date": 1499086847, "post_id": 44882621, "comment_id": 76750476, "body": "<code>grep -P</code> accepts perl-like regex as an argument, i.e. <code>Error\\s+(110|13|43)</code>. Can you use this?"}], "owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499079509, "creation_date": 1499075719, "last_edit_date": 1499079509, "question_id": 44882621, "link": "https://stackoverflow.com/questions/44882621/combining-multiple-greps-on-to-a-a-perl-script", "title": "combining multiple greps on to a a perl script", "body": "<pre><code>sub logProcessing {\n    my $logpath = $File::Find::dir;\n    my $logfile = $_;\n    if ( $File::Find::name =~ m!$logDir/(.*?)/$pattern! and -d $File::Find::dir ) { $dirCount++ };\n    if ( $File::Find::name =~ m!$logDir/(.*?)/$pattern! and -f $File::Find::name ) { $fileCount++ };\n    if ( $File::Find::name =~ m!$logDir/(.*?)/$pattern! and -f $File::Find::name ) {\n        my $errorsSeen = `grep 'Errno 110' $File::Find::name|uniq`;\n        if ($errorsSeen ne \"\") {\n            $errorCount++;\n            my $hostname = $1;\n            my $lastModTime = localtime ( (stat $File::Find::name)[9] );\n            printf FILE \"%3s %20s %50s %30s %50s\\n\", $hostname, 'Errno 110', $logpath, $logfile, $lastModTime;\n        }\n        else {\n            $nullCount++\n        }\n    }\n}\n</code></pre>\n\n<p>The above is a code snippet from a Perl script which actually searches a bunch of log files and does a pattern search and prints a summary and sent it as a mail with attachment. </p>\n\n<p>Wanted to refine the search for 3 patterns and don't want to increase the number of grep statement as the log files are 10k per day and that will increase the runtime of the script which now completes in approx 10 minutes.</p>\n\n<p>As of now it searches 'Errno 110' but wants to add a combination of 'Errno 110', 'Errno 13' &amp; 'Errno 43' and print the summary accordingly and as you see in the printf statement 'Errno 110' is hardcoded. </p>\n\n<pre><code>    #!/usr/bin/perl\n#\n\n# program revision 1 - addded error filter\n# and added error types \n## Loading Modules\n\nuse strict;\nuse warnings;\nuse File::Find;\nuse Time::Piece;\nuse MIME::Lite;\nuse File::Slurp;\nuse Fcntl qw(:flock);\nuse Getopt::Long qw(:config no_ignore_case);\n\n## Generic Variables\n\nmy $progversion = \"1\";\nmy $progrevision = \"1\";\nmy $prog_name = \"error_alert.pl\";\nmy $help;\nmy $version;\nmy $dryrun;\n\n## Main Program Variables\n\nmy $dc = 'IN';\nchomp($dc);\nmy $fileDate = localtime-&gt;ymd(\"-\");\nchomp($fileDate);\nmy $logDir = \"/home/ajoy/alert-dc/testlogs\";\nmy $Date = localtime-&gt;ymd(\"\");\nmy $pattern = \"applmgr\\.log\\.$Date\";\nchomp($Date);\nchomp($pattern);\nmy $fileCount = 0;\nmy $dirCount = 0;\nmy $errorCount = 0;\nmy $nullCount = 0;\n\n#my $to = 'ajoy.bharath@XXXXXX';\nmy $to = '123@xyz.com, 345@xyz.com, xyz@abc.com';\nmy $from = 'no-reply@xyz.com';\nmy $subject = \"Log Alert ($dc)\";\nmy $subDate = localtime-&gt;ymd(\"/\");\nchomp($subDate);\nmy $message = \"&lt;h2&gt;Log Processing Status of $dc for Date:- $subDate &lt;/h2&gt; &lt;br&gt; &lt;h3&gt;Please find the attached file for stats..!&lt;/h3&gt;\";\nmy $outFile = \"$logDir/applmgr_status_$dc-$fileDate.txt\";\n\n## locking multiple instances of this script\n\nopen my $lockFile, \"&gt;\", \"$logDir/script.lock\" or die $!; \nflock $lockFile, LOCK_EX|LOCK_NB or die \"Multiple instance not allowed: $!\";\nprint $lockFile \"$$\";\n\n## Options Sub Routines\n\nsub print_usage() {\n    print \"Usage: $prog_name or $prog_name with options [-v|--version] [-h|--help] [-d|--dryrun]\\n\";\n    exit(1);\n}\n\nsub print_version() {\n    print \"$prog_name : $progversion.$progrevision\\n\";\n    exit(0);\n}\n\nsub print_help () {\n    print \"$prog_name : $progversion.$progrevision\";\n    print \"\\n\";\n    print \"Usage: $prog_name  or $prog_name with options [-v|--version] [-h|--help] [-d|--dryrun]\";\n    print \"\\n\";\n    print \"$prog_name = process logs and process summary and send mail\\n\";\n    print \"-v|--version = Version.\\n\";\n    print \"-h|--help = This screen.\\n\";\n    print \"-d|--dryrun = process logs and process summary and output to stdout instead of sending mail\\n\\n\";\n    print \"\\n\";\n    exit(0);\n}\n\nsub dry_run {\n   open(FILE, \"&gt;$logDir/applmgr_status_$dc-$fileDate.txt\") or die \"Cannot open file\";\n   printf FILE \"%3s %20s %30s %40s %50s\\n\", \"Host Name\", \"Errors\", \"Log Path\", \"Log FIle\", \"Modified Time\";\n   printf FILE \"%3s\\n\", \"-\" x 150;\n   find( \\&amp;logProcessing, $logDir);\n   print FILE \"\\n\\nSUMMARY\\n\";\n   printf FILE \"%3s\\n\", \"-\" x 20;\n   print FILE \"Number of Hosts investigated for error: $dirCount\\n\";\n   print FILE \"Number of LogFiles investigated for error: $fileCount\\n\";\n   print FILE \"Number of Hosts processed with errors: $errorCount\\n\";\n   print FILE \"Number of Hosts processed wihout errors: $nullCount\\n\";\n   close(FILE);\n   my $data = read_file($outFile);\n   print $data;\n   exit(0);\n}\n\n# Main Program starts here\n\nprint_usage() if ( ! GetOptions('v|version' =&gt; \\$version, 'h|help' =&gt; \\$help, 'd|dryrun' =&gt; \\$dryrun));\nprint_help() if ($help);\nprint_version() if ($version);\ndry_run() if ($dryrun);\n\nopen(FILE, \"&gt;$logDir/applmgr_status_$dc-$fileDate.txt\") or die \"Cannot open file\";\nprintf FILE \"%3s %20s %30s %40s %50s\\n\", \"Host Name\", \"Errors\", \"Log Path\", \"Log FIle\", \"Modified Time\";\nprintf FILE \"%3s\\n\", \"-\" x 150;\n\nfind( \\&amp;logProcessing, $logDir);\n\nprint FILE \"\\n\\nSUMMARY\\n\";\nprintf FILE \"%3s\\n\", \"-\" x 20;\nprint FILE \"Number of Podhosts investigated for error: $dirCount\\n\";\nprint FILE \"Number of LogFiles investigated for error: $fileCount\\n\";\nprint FILE \"Number of Podhosts harvested with errors: $errorCount\\n\";\nprint FILE \"Number of Podhosts harvested wihout errors: $nullCount\\n\";\n\n&amp;alertMessage;\n\n## Main Program Sub Routines\n\nsub logProcessing {\n    my $logpath = $File::Find::dir;\n    my $logfile = $_;\n    if ( $File::Find::name =~m!$logDir/(.*?)/$pattern! and -d $File::Find::dir ) { $dirCount++ };\n    if ( $File::Find::name =~m!$logDir/(.*?)/$pattern! and -f $File::Find::name ) { $fileCount++ };\n    if($File::Find::name =~m!$logDir/(.*?)/$pattern! and -f $File::Find::name) {\n      my $errorsSeen = `grep 'Errno 110' $File::Find::name|uniq`;\n      if ($errorsSeen ne \"\") {\n      $errorCount++;\n      my $hostname = $1;\n        my $lastModTime = localtime ( (stat $File::Find::name)[9] );\n        printf FILE \"%3s %20s %50s %30s %50s\\n\", $hostname, 'Errno 110', $logpath, $logfile, $lastModTime;\n        } else { $nullCount++ }\n    }\n}\n\nclose(FILE);\n\nsub alertMessage {\n\n  my $msg = MIME::Lite-&gt;new(\n                 From     =&gt; $from,\n                 To       =&gt; $to,\n                 Subject  =&gt; $subject,\n                 Type     =&gt; 'multipart/mixed'\n                 );\n\n  $msg-&gt;attach(\n             Type  =&gt; 'text/html',\n             Data  =&gt; $message\n            );\n\n  $msg-&gt;attach(\n             Type         =&gt; 'text/html',\n             Path         =&gt; $outFile,\n             Disposition  =&gt; 'attachment'\n   );\n\n  $msg-&gt;send;\n}\n</code></pre>\n\n<p>==========================================================\nsample log file - applmgr.log.20170303</p>\n\n<pre>\n2017-03-03 08:35:13 UTC 965 [14385] ERROR upload process failed with: error(110, 'Connection timed out') \nerror: [Errno 110] Connection timed out \n2017-03-03 08:43:43 UTC 913 [20057] ERROR upload process failed with: error(110, 'Connection timed out') \nerror: [Errno 110] Connection timed out \n2017-05-26 08:10:14 UTC 278 [7665] WARNING Failed to check upload result with: Exception('Received error response 400 Bad Request from HTTP server',) \n2017-05-26 08:10:14 UTC 288 [7665] ERROR upload process failed with: error(32, 'Broken pipe') error: [Errno 32] Broken pipe \n2017-05-26 08:10:14 UTC 278 [7665] WARNING Failed to check upload result with: Exception('Received error response 400 Bad Request from HTTP server',) \n2017-05-26 08:10:14 UTC 288 [7665] ERROR upload process failed with: error(32, 'Broken pipe') error: [Errno 32] Broken pipe \n2017-05-26 08:10:14 UTC 278 [7665] WARNING Failed to check upload result with: Exception('Received error response 400 Bad Request from HTTP server',) \n2017-05-26 08:10:14 UTC 288 [7665] ERROR upload process failed with: error(32, 'Broken pipe') error: [Errno 32] Broken pipe \n2017-03-03 08:29:24 UTC 010 [9417] ERROR upload process failed with: error(110, 'Connection timed out') \nerror: [Errno 110] Connection timed out\n</pre>\n\n<p>Any help in streamlining this for better performance or better logic is much more appreciable. I'm a novice in perl and I appled my logic as it is. My refences were Automating System Administration with perl and questions I've asked and others asked in stack* sites</p>\n"}, {"tags": ["json", "perl", "dbix-class"], "answers": [{"tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": true, "score": 4, "last_activity_date": 1499074049, "creation_date": 1499074049, "answer_id": 44882067, "question_id": 44881824, "link": "https://stackoverflow.com/questions/44881824/why-does-json-say-the-serialisation-hook-is-missing/44882067#44882067", "title": "Why does JSON say the serialisation hook is missing?", "body": "<p>In order to make <code>JSON::XS</code> consider <code>TO_JSON</code>, you have to explicitly enable <code>convert_blessed</code> option:</p>\n\n<pre><code>my $coder = JSON::XS-&gt;new;\n$coder-&gt;convert_blessed(1);\nsay $coder-&gt;encode($t);\n</code></pre>\n\n<p>According to <a href=\"http://search.cpan.org/~mlehmann/JSON-XS-3.03/XS.pm\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n<pre><code>$json = $json-&gt;convert_blessed ([$enable])\n$enabled = $json-&gt;get_convert_blessed\n</code></pre>\n  \n  <p>See \"OBJECT SERIALISATION\" for details.</p>\n  \n  <p>If $enable is true (or missing), then encode, upon encountering a blessed object, will check for the availability of the TO_JSON method\n  on the object's class. If found, it will be called in scalar context\n  and the resulting scalar will be encoded instead of the object.</p>\n  \n  <p>The TO_JSON method may safely call die if it wants. If TO_JSON returns other blessed objects, those will be handled in the same way.\n  TO_JSON must take care of not causing an endless recursion cycle (==\n  crash) in this case. The name of TO_JSON was chosen because other\n  methods called by the Perl core (== not by the user of the object) are\n  usually in upper case letters and to avoid collisions with any to_json\n  function or method.</p>\n  \n  <p>If <strong>$enable is false (the default)</strong>, then <strong>encode will not consider</strong> this type of conversion.</p>\n  \n  <p>This setting has no effect on decode.</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 44882067, "answer_count": 1, "score": 0, "last_activity_date": 1499074049, "creation_date": 1499073311, "question_id": 44881824, "link": "https://stackoverflow.com/questions/44881824/why-does-json-say-the-serialisation-hook-is-missing", "title": "Why does JSON say the serialisation hook is missing?", "body": "<p>Run <code>cpanm --look DBIx::Class ; cd examples/Schema/</code> to use the example database.</p>\n\n<pre><code>use 5.024;\nuse strictures;\nuse JSON::MaybeXS qw(encode_json);\nuse MyApp::Schema qw();\nuse Sub::Install qw();\n\nmy $s = MyApp::Schema-&gt;connect('dbi:SQLite:db/example.db');\n# Yes, I know Helper::Row::ToJSON exists.\nSub::Install::install_sub({\n    code =&gt; sub {\n        my ($self) = @_;\n        return { map {$_ =&gt; $self-&gt;$_} keys %{ $self-&gt;columns_info } };\n    },\n    into =&gt; $s-&gt;source('Track')-&gt;result_class,\n    as   =&gt; 'TO_JSON',\n});\n\nmy ($t) = $s-&gt;resultset('Cd')-&gt;first-&gt;tracks;\nsay ref $t-&gt;can('TO_JSON'); # 'CODE', ok\nsay ref $t-&gt;TO_JSON;        # 'HASH', ok\nsay encode_json $t;\n# encountered object 'MyApp::Schema::Result::Track=HASH(0x1a53b48)',\n# but neither allow_blessed, convert_blessed nor allow_tags settings\n# are enabled (or TO_JSON/FREEZE method missing) at \u2026\n</code></pre>\n\n<p>I expect the serialiser to find the installed hook and use it, but instead I get the error above. What's going wrong?</p>\n"}, {"tags": ["perl", "nginx", "cgi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1499068889, "post_id": 44878433, "comment_id": 76738986, "body": "So you&#39;re trying to execute CGI scripts on nginx? Have you even searched for instructions?"}, {"owner": {"reputation": 350, "user_id": 2067607, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33784a124ecf1f3aff66bb778790c73a?s=128&d=identicon&r=PG", "display_name": "greektranslator", "link": "https://stackoverflow.com/users/2067607/greektranslator"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499076409, "post_id": 44878433, "comment_id": 76743836, "body": "It is not exactly on nginx; it is nginx over Apache."}, {"owner": {"reputation": 350, "user_id": 2067607, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33784a124ecf1f3aff66bb778790c73a?s=128&d=identicon&r=PG", "display_name": "greektranslator", "link": "https://stackoverflow.com/users/2067607/greektranslator"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499085074, "post_id": 44878433, "comment_id": 76749237, "body": "Even cPnginx Support have trouble sorting this out. Looks like cPnginx  and Perl are not happy with each other."}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 2067607, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33784a124ecf1f3aff66bb778790c73a?s=128&d=identicon&r=PG", "display_name": "greektranslator", "link": "https://stackoverflow.com/users/2067607/greektranslator"}, "is_accepted": false, "score": 0, "last_activity_date": 1499101932, "creation_date": 1499101932, "answer_id": 44890937, "question_id": 44878433, "link": "https://stackoverflow.com/questions/44878433/cpnginx-plugin-does-not-allow-execution-of-perl-files/44890937#44890937", "title": "cPnginx plugin does not allow execution of Perl files", "body": "<p>I found 2 solutions:\n1. In cpnginx admin interface from WHM change the domain to \"Proxy\" (Nginx proxy server in front of Apache). This slows down things though.\n2. WHM > Install a Perl module, install Nginx (thus one can maintain a \"hybrid\" option for the domain.</p>\n"}], "owner": {"reputation": 350, "user_id": 2067607, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33784a124ecf1f3aff66bb778790c73a?s=128&d=identicon&r=PG", "display_name": "greektranslator", "link": "https://stackoverflow.com/users/2067607/greektranslator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499101932, "creation_date": 1499060258, "last_edit_date": 1499085025, "question_id": 44878433, "link": "https://stackoverflow.com/questions/44878433/cpnginx-plugin-does-not-allow-execution-of-perl-files", "title": "cPnginx plugin does not allow execution of Perl files", "body": "<p>I had someone install cPnginx-10.7 on a cPanel server. As a result, whenever one tried to access any .pl scripts, the script would be downloaded instead of executed. I had to uninstall the plugin.</p>\n\n<p>Is there a way to allow for Perl to be executed while using it?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1499023372, "post_id": 44874220, "comment_id": 76727182, "body": "So... That Perl script is called from a Java code via <code>final Process p = pb.start();    int exitCode = p.waitFor();</code>. Will your code returns the exit number to its parent?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1499023789, "post_id": 44874220, "comment_id": 76727284, "body": "No, but you can force it to, by using something like <code>exit -1;</code> etc. within the <code>if (! $statement_ok){...}</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1499028835, "post_id": 44874220, "comment_id": 76728626, "body": "<i>&quot;The reason I prefer doing it this way&quot;</i> For this to have any value you need to explain <i>what you prefer it to</i>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1499068864, "post_id": 44874220, "comment_id": 76738971, "body": "Once you&#39;re working in modern Perl, and your code is not running as a CGI script, using Try::Tiny is going to be the cleaner way. It makes reading the code way easier. It adds a few levels to the call stack, but that&#39;s usually not a problem. Knowing how this stuff works under the hood is good and valuable, but I&#39;d (almost) always go with the easier to maintain solution."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1499082699, "post_id": 44874220, "comment_id": 76747708, "body": "@simbabque I understand your point of view. I just always write my code so it runs all the way back to 5.8 and as close to core-only as I can. I will re-write this post for more modern Perl for the general masses, and to address Borodin&#39;s statement above. Thanks for the feedback."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1499021965, "creation_date": 1499021965, "answer_id": 44874220, "question_id": 44874112, "link": "https://stackoverflow.com/questions/44874112/catching-an-exception-for-a-sql-connection-in-perl/44874220#44874220", "title": "Catching an exception for a SQL connection in Perl", "body": "<p>You can definitely use <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a>:</p>\n\n<pre><code>my $statement_ok = eval {\n    $registry-&gt;load_registry_from_db(\n        -host    =&gt; 'ensembldb.ensembl.org',\n        -user    =&gt; 'anonymous',\n        -verbose =&gt; '1'\n    );\n    1;\n};\n\nif (! $statement_ok){\n    # handle error\n    do_something() if $@ =~ /.../;\n}\n</code></pre>\n\n<p>The reason I prefer doing it this way is that something else may have or can clobber <code>$@</code>, so using the true statement will ensure that even if <code>$@</code> is somehow already set, you're sure to have trapped the specific exception in that code.</p>\n\n<p>Essentially, if the call doesn't throw, <code>$statement_ok</code> will be true.</p>\n\n<p>You can also use an external library such as <a href=\"https://metacpan.org/pod/Try::Tiny\" rel=\"nofollow noreferrer\">Try::Tiny</a>, but I must admit, I've never used such a thing, I've always just stuck with <code>eval</code>.</p>\n"}], "owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44874220, "answer_count": 1, "score": 2, "last_activity_date": 1499021965, "creation_date": 1499021226, "question_id": 44874112, "link": "https://stackoverflow.com/questions/44874112/catching-an-exception-for-a-sql-connection-in-perl", "title": "Catching an exception for a SQL connection in Perl", "body": "<p>Using the Ensembl Perl <a href=\"http://www.ensembl.org/info/docs/Doxygen/core-api/classBio_1_1EnsEMBL_1_1Registry.html#a7e564f1b1bf7d176041f700713a7c1bf\" rel=\"nofollow noreferrer\">API</a>, there is a <code>load_registry_from_db</code> function which connects to a SQL server. It is stated that it will throw an exception for connection timeouts.</p>\n\n<pre><code> $registry-&gt;load_registry_from_db(\n  -host    =&gt; 'ensembldb.ensembl.org',\n  -user    =&gt; 'anonymous',\n  -verbose =&gt; '1'\n);\n</code></pre>\n\n<blockquote>\n  <p>Exceptions : Thrown if the given MySQL database cannot be connected to\n                 or there is any error whilst querying the database.</p>\n</blockquote>\n\n<p>I want to know how can I catch that exception via Perl? It is written on the pages that <code>eval</code> is the best thing. Is that <code>eval {$registry}</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3130, "user_id": 2064808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d819efdb2d3f9983a1437f3c1b9f710?s=128&d=identicon&r=PG", "display_name": "David Knipe", "link": "https://stackoverflow.com/users/2064808/david-knipe"}, "edited": false, "score": 0, "creation_date": 1498990577, "post_id": 44869304, "comment_id": 76718112, "body": "This question is unclear. Which is the part that only works inside the loop? I&#39;m guessing that you&#39;ve posted the non-working version of the code, and the part you&#39;re talking about is the 3 lines before the loop, but I&#39;m not sure. But I notice you set the variable <code>$abs_links</code> twice, and the first value it&#39;s set to is never used. I suppose it would behave differently if you put the <code>my $abs_links = $links-&gt;abs($abs);</code> inside the loop, after the <code>$abs_links = $1</code>, because it sould use the other value of <code>$abs_links</code>. Is this what you&#39;ve done?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1499010743, "post_id": 44869304, "comment_id": 76723702, "body": "<code>URI-&gt;new($content)</code> is wrong. You should be passing a URL. /// <code>$links-&gt;abs(&#39;http:&#39;, $content)</code> is completely wrong. It should be <code>$links-&gt;abs($url);</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499016290, "post_id": 44869304, "comment_id": 76725193, "body": "<i>&quot;I&#39;m confused with some terminology and sections within the different modules&quot;</i> Then you should say what it is that you don&#39;t understand. As it is you will probably get a working solution, but you will be no wiser and you probably won&#39;t understand the working code either."}, {"owner": {"reputation": 9, "user_id": 8243590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a742e82c2da299541c85a3af32aa4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jestfer", "link": "https://stackoverflow.com/users/8243590/jestfer"}, "edited": false, "score": 0, "creation_date": 1499020182, "post_id": 44869304, "comment_id": 76726248, "body": "Thanks everyone!  -&gt;David, I edited the post to make it clearer, my apologies for that. I tried that as well but that would not work as the bits seem unlinked between inside and outside the loop. You can see now the script that is working (just added).  -&gt;ikegami, thanks, it&#39;s clear now that using the $content variable there is totally wrong.  -&gt;Borodin, you are right. I get confused on how different modules work as I&#39;m new and I need to get more familiar with it. Please find the script that works, I just added it. Thanks a lot! Next time I will make sure to add these doubts in my posts."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8243590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a742e82c2da299541c85a3af32aa4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jestfer", "link": "https://stackoverflow.com/users/8243590/jestfer"}, "edited": false, "score": 0, "creation_date": 1499019595, "post_id": 44870259, "comment_id": 76726088, "body": "Just wow, melpomene. Thanks a lot for sharing this with me. I&#39;m totally new into programming and have been &quot;coding&quot; just for a few weeks, this clarified some of my doubts and showed me a new module which is way easier to user than the URI || URI::URL ones. I just edited my post to make it clearer for everyone and now I understand why it&#39;s not gonna work adding the content to the URI module. However, it did not work adding the $url variable or trying similar alternatives, I guess I still need to learn more and keep on trying :)"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1498994534, "creation_date": 1498994534, "answer_id": 44870259, "question_id": 44869304, "link": "https://stackoverflow.com/questions/44869304/getting-absolute-urls-with-module-creating-object-outside-loop/44870259#44870259", "title": "Getting Absolute URLs with module creating object outside loop", "body": "<p>I don't understand your code. There are a few weird bits:</p>\n\n<ul>\n<li><code>[^\\W]</code> is the same as <code>\\w</code></li>\n<li>The regex allows an optional <code>-</code> before and an optional <code>/</code> after <code>.com</code>, i.e. <code>http://bitwise.complement.biz</code> matches but <code>http://cool-beans.com</code> doesn't.</li>\n<li><code>URI-&gt;new($content)</code> makes no sense: <code>$content</code> is random HTML, not a URI.</li>\n<li><code>$links-&gt;abs('http:', $content)</code> makes no sense: <code>$content</code> is simply ignored, and <code>$links-&gt;abs('http:')</code> tries to make <code>$links</code> an absolute URL relative to <code>'http:'</code>, but <code>'http:'</code> is not a valid URL.</li>\n</ul>\n\n<p>Here's what I think you're trying to do:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse LWP::UserAgent;\nuse HTML::LinkExtor;\nuse Digest::MD5 qw(md5_hex);\n\n@ARGV == 1 or die \"Usage: $0 URL\\n\";\nmy $url = $ARGV[0];\n\nmy $ua = LWP::UserAgent-&gt;new(timeout =&gt; 10);\n\nmy $response = $ua-&gt;get($url);\n$response-&gt;is_success or die \"$0: \" . $response-&gt;request-&gt;uri . \": \" . $response-&gt;status_line . \"\\n\";\n\nmy $content = $response-&gt;decoded_content;\nmy $base = $response-&gt;base;\n\nmy @links;\nmy $p = HTML::LinkExtor-&gt;new(\n    sub {\n        my ($tag, %attrs) = @_;\n        if ($tag eq 'a' &amp;&amp; $attrs{href}) {\n            push @links, \"$attrs{href}\";  # stringify\n        }\n    },\n    $base,\n);\n\n$p-&gt;parse($content);\n$p-&gt;eof;\n\nfor my $link (@links) {\n    print \"$link\\n\";\n    print \"Digest for the above URL is \" . md5_hex($link) . \"\\n\";\n}\n</code></pre>\n\n<ul>\n<li>I don't try to validate the URL passed in <code>$ARGV[0]</code>. Leave it to LWP::UserAgent. (If you don't like this, just add the check back in.)</li>\n<li>I make sure <code>$ua-&gt;get($url)</code> was successful before proceeding.</li>\n<li>I get the base URL for absolutifying relative links from <a href=\"https://metacpan.org/pod/HTTP::Response#$r-%3Ebase\" rel=\"nofollow noreferrer\"><code>$response-&gt;base</code></a>.</li>\n<li>I use <a href=\"https://metacpan.org/pod/HTML::LinkExtor\" rel=\"nofollow noreferrer\">HTML::LinkExtor</a> for parsing the content, extracting links, and making them absolute.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 8243590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a742e82c2da299541c85a3af32aa4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jestfer", "link": "https://stackoverflow.com/users/8243590/jestfer"}, "edited": false, "score": 0, "creation_date": 1499019814, "post_id": 44871832, "comment_id": 76726136, "body": "Thanks a lot for sharing this module with me, Dave. I knew this one and I agree with you this is the easiest way to convey the purpose of the exercise. The thing is the person giving us exercises to practise with did explicitly mentioned that the WWW::Mechanize module was somehow &quot;primitive&quot; and we should avoid it for now, and as I&#39;m quite new, I did not know what to say but to obey for now."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 9, "user_id": 8243590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a742e82c2da299541c85a3af32aa4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jestfer", "link": "https://stackoverflow.com/users/8243590/jestfer"}, "edited": false, "score": 0, "creation_date": 1499070452, "post_id": 44871832, "comment_id": 76739879, "body": "@Jestfer: I&#39;m really not sure that &quot;primitive&quot; is the right word when comparing WWW::Mechanize to LWP::UserAgent :-)"}, {"owner": {"reputation": 9, "user_id": 8243590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a742e82c2da299541c85a3af32aa4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jestfer", "link": "https://stackoverflow.com/users/8243590/jestfer"}, "edited": false, "score": 0, "creation_date": 1499104328, "post_id": 44871832, "comment_id": 76760803, "body": "and I agree again with you :) I&#39;m not sure why he does not want us to use Mechanize... It would make our life easier. Thanks again for your comment."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1499005593, "creation_date": 1499005593, "answer_id": 44871832, "question_id": 44869304, "link": "https://stackoverflow.com/questions/44869304/getting-absolute-urls-with-module-creating-object-outside-loop/44871832#44871832", "title": "Getting Absolute URLs with module creating object outside loop", "body": "<p>I think your biggest mistake is trying to parse links out of HTML using a regular expression. You would be far better advised to use a CPAN module for this. I'd recommend <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow noreferrer\">WWW::Mechanize</a>, which would make your code look something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse WWW::Mechanize;         \nuse Digest::MD5 qw(md5_hex);\nuse URI;\n\nmy $url = $ARGV[0];\n\nif ($url !~ m{^https?://[^\\W]+-?\\.com/?}i) {\n    exit(0);                         \n}      \n\nmy $ua = WWW::Mechanize-&gt;new;\n$ua-&gt;timeout( 10 );\n\n$ua-&gt;get( $url );  \n\nforeach ($ua-&gt;links) {\n  say $_-&gt;url;\n  say \"Digest for the above URL is \" . md5_hex($_-&gt;url) . \"\\n\";\n}\n</code></pre>\n\n<p>That looks a lot simpler to me.</p>\n"}], "owner": {"reputation": 9, "user_id": 8243590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a742e82c2da299541c85a3af32aa4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jestfer", "link": "https://stackoverflow.com/users/8243590/jestfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499019448, "creation_date": 1498987655, "last_edit_date": 1499019448, "question_id": 44869304, "link": "https://stackoverflow.com/questions/44869304/getting-absolute-urls-with-module-creating-object-outside-loop", "title": "Getting Absolute URLs with module creating object outside loop", "body": "<p>I have a doubt I've been trying to solve myself using CPAN modules documentation, but I'm a bit new and I'm confused with some terminology and sections within the different modules.</p>\n\n<p>I'm trying to create the object in the code below, and get the absolute URL for relative links extracted from a website. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::UserAgent;         \nuse Digest::MD5 qw(md5_hex);\nuse URI;\n\nmy $url = $ARGV[0];\n\nif ($url !~ m{^https?://[^\\W]+-?\\.com/?}i) {\n    exit(0);                         \n}      \n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout( 10 );\n\nmy $response = $ua-&gt;get( $url );  \n\nmy $content = $response-&gt;decoded_content();\n\nmy $links = URI-&gt;new($content);\nmy $abs = $links-&gt;abs('http:', $content);\nmy $abs_links = $links-&gt;abs($abs);\n\nwhile ($content =~ m{&lt;a[^&gt;]\\s*href\\s*=\\s*\"?([^\"\\s&gt;]+)}gis) {\n    $abs_links = $1;\n    print \"$abs_links\\n\";\n    print \"Digest for the above URL is \" . md5_hex($abs_links) . \"\\n\";             \n}\n</code></pre>\n\n<p>The problem is when I try to add that part outside the While loop (the 3-line block preceding the loop), it does not work, whereas if I add the same part in the While loop, it will work fine. This one just gets the relative URLs from a given website, but instead of printing \"Http://...\" it prints \"//...\".</p>\n\n<p>The script that works fine for me is the following:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse LWP::UserAgent;            \nuse Digest::MD5 qw(md5_hex);\nuse URI::URL;\n\nmy $url = $ARGV[0];                            ## Url passed in command\nif ($url !~ m{^https?://[\\w]+-?[\\w]+\\.com/?}i) {\n    exit(0);                                   ## Program stops if not valid URL\n}         \n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout( 10 );\n\nmy $response = $ua-&gt;get( $url );               ## Get response, not content\n\nmy $content = $response-&gt;decoded_content();    ## Now let's get the content\n\nwhile ($content =~ m{&lt;a[^&gt;]\\s*href\\s*=\\s*\"?([^\"\\s&gt;]+)}gis) {    ## All links\n    my $links = $1;\n    my $abs = new URI::URL \"$links\";\n    my $abs_url = $abs-&gt;abs('http:', $links);\n    print \"$abs_url\\n\";\n    print \"Digest for the above URL is \" . md5_hex($abs_url) . \"\\n\";              \n} \n</code></pre>\n\n<p>Any ideas? Much appreciated.</p>\n"}, {"tags": ["java", "perl", "jdbc"], "comments": [{"owner": {"reputation": 12376, "user_id": 4790924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hzxAE.png?s=128&g=1", "display_name": "Sharon Ben Asher", "link": "https://stackoverflow.com/users/4790924/sharon-ben-asher"}, "edited": false, "score": 2, "creation_date": 1498985099, "post_id": 44868945, "comment_id": 76716826, "body": "you need to add apache logging jar (and any other jar that is used) to the classpath"}, {"owner": {"reputation": 12376, "user_id": 4790924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hzxAE.png?s=128&g=1", "display_name": "Sharon Ben Asher", "link": "https://stackoverflow.com/users/4790924/sharon-ben-asher"}, "edited": false, "score": 0, "creation_date": 1498985154, "post_id": 44868945, "comment_id": 76716839, "body": "see <a href=\"https://stackoverflow.com/questions/34413/why-am-i-getting-a-noclassdeffounderror-in-java\" title=\"why am i getting a noclassdeffounderror in java\">stackoverflow.com/questions/34413/&hellip;</a>"}, {"owner": {"reputation": 71, "user_id": 7473517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c6c499c1a4eec514eb52cdc0251ee3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Borenstien", "link": "https://stackoverflow.com/users/7473517/adam-borenstien"}, "reply_to_user": {"reputation": 12376, "user_id": 4790924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hzxAE.png?s=128&g=1", "display_name": "Sharon Ben Asher", "link": "https://stackoverflow.com/users/4790924/sharon-ben-asher"}, "edited": false, "score": 0, "creation_date": 1498985511, "post_id": 44868945, "comment_id": 76716923, "body": "Thanks. This is what I thought. Is this I standard jar or should it be provided by the Hybris people?"}, {"owner": {"reputation": 12376, "user_id": 4790924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hzxAE.png?s=128&g=1", "display_name": "Sharon Ben Asher", "link": "https://stackoverflow.com/users/4790924/sharon-ben-asher"}, "edited": false, "score": 0, "creation_date": 1498986109, "post_id": 44868945, "comment_id": 76717062, "body": "Apache is an independant organization that publishes its own jar files. However, that does not mean that the &quot;Hybris people&quot; don&#39;t have a distribution that includes all dependencies.  However, usually, dependencies are handled via a dependency managemenat tool, like Apache maven or Apache Ivy. Usually, your IDE (Eclipse, NetBeans, etc) has built in support for this"}, {"owner": {"reputation": 12376, "user_id": 4790924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hzxAE.png?s=128&g=1", "display_name": "Sharon Ben Asher", "link": "https://stackoverflow.com/users/4790924/sharon-ben-asher"}, "edited": false, "score": 0, "creation_date": 1498986280, "post_id": 44868945, "comment_id": 76717105, "body": "I believe &quot;dependency managemenat&quot; is a cross-language term since 3rd party libraries exist in all development platforms..."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1499009687, "post_id": 44868945, "comment_id": 76723430, "body": "could you show your complete perl code, or at least enough to duplicate the problem (without the sensitive information)?  what happens if you run <code>perl -e&#39;use DBD::JDBC&#39;</code>?"}, {"owner": {"reputation": 351, "user_id": 5129186, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3543340f2bad19bc13e6eba768e39ec0?s=128&d=identicon&r=PG&f=1", "display_name": "pauldx", "link": "https://stackoverflow.com/users/5129186/pauldx"}, "edited": false, "score": 0, "creation_date": 1618425083, "post_id": 44868945, "comment_id": 118600164, "body": "@AdamBorenstien Did you manage to resolve this issue ?"}, {"owner": {"reputation": 71, "user_id": 7473517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c6c499c1a4eec514eb52cdc0251ee3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Borenstien", "link": "https://stackoverflow.com/users/7473517/adam-borenstien"}, "reply_to_user": {"reputation": 351, "user_id": 5129186, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3543340f2bad19bc13e6eba768e39ec0?s=128&d=identicon&r=PG&f=1", "display_name": "pauldx", "link": "https://stackoverflow.com/users/5129186/pauldx"}, "edited": false, "score": 0, "creation_date": 1618472405, "post_id": 44868945, "comment_id": 118612510, "body": "@pauldx, i think i did, if i remember i used Java to get the data from the DB."}, {"owner": {"reputation": 351, "user_id": 5129186, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3543340f2bad19bc13e6eba768e39ec0?s=128&d=identicon&r=PG&f=1", "display_name": "pauldx", "link": "https://stackoverflow.com/users/5129186/pauldx"}, "edited": false, "score": 0, "creation_date": 1618503040, "post_id": 44868945, "comment_id": 118626520, "body": "@AdamBorenstien - I am trying to use DBD::JDBC and getting all sorts of trouble configuring it ... are you saying your Perl code that you have mentioned with Hybris was finally able to connect ? also I assume your spin up JDBC server first and then ran that Perl code and if you any perquisite steps remember then it is great . thanks!"}], "owner": {"reputation": 71, "user_id": 7473517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c6c499c1a4eec514eb52cdc0251ee3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Borenstien", "link": "https://stackoverflow.com/users/7473517/adam-borenstien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 829, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498984915, "creation_date": 1498984915, "question_id": 44868945, "link": "https://stackoverflow.com/questions/44868945/jdbc-client-in-perl", "title": "JDBC Client in Perl", "body": "<p>I hope I am not repeating a question but I googled and googled and could not find the answer. \nI need to get data of Hybris database. The guys at hybris sent me a url to connect to and said I need to run a jdbc client in order to do so. \nas I am running Perl code I tried following the steps described in this url:\n<a href=\"http://search.cpan.org/~vizdom/DBD-JDBC/JDBC.pod\" rel=\"nofollow noreferrer\">http://search.cpan.org/~vizdom/DBD-JDBC/JDBC.pod</a>\nI coded this:</p>\n\n<pre><code>my $host = 127.0.0.1; \nmy $port = 9001;\nmy $url = \"a url provided by Hybris\";\n$url =~ s/([=;])/uc sprintf(\"%%%02x\",ord($1))/eg;\nmy $dsn = \"dbi:JDBC:hostname=$host;port=$port;url=$url;\";\n\nmy %properties = \n(\n    'user' =&gt; 'User provided by Hybris', \n    'password' =&gt; 'password provided by Hybris', \n    'host.name' =&gt; 'hostname from url provided by Hybris', \n    'host.port' =&gt; 'port provided by Hybris'\n);\n\nmy $dbh = DBI-&gt;connect($dsn, undef, undef, { PrintError =&gt; 0, RaiseError =&gt; 1, jdbc_properties =&gt; \\%properties } ) or die \"Failed to connect: ($DBI::err) $DBI::errstr\\n\";`\n</code></pre>\n\n<p>I am sorry but cannot provide actual url and user name as this is a production system. \n    I keep getting an error:</p>\n\n<pre><code>DBD::JDBC initialisation failed: Can't locate object method \"driver\" via package\n \"DBD::JDBC\" at C:/Perl64/lib/DBI.pm line 811.\n\nPerhaps the capitalisation of DBD 'JDBC' isn't right. at monitorHybrisDB.pl line\n 23\n</code></pre>\n\n<p>( The server from the perl URL loaded OK )</p>\n\n<p>I tried googling this error but so far I found nothing but some more people with the same problem. </p>\n\n<p>When I tried coding in Java I wrote the following code: </p>\n\n<pre><code>public class GetHybrisOrders {\n    public static void main(String[] args) throws SQLException {\n        try {\n            // The newInstance() call is a work around for some\n            // broken Java implementations\n\n            Class.forName(\"de.hybris.vjdbc.VirtualDriver\").newInstance();\n        } catch (Exception ex) {\n            // handle the error\n        }\n\n        Connection conn = null;\n         try {\n         conn =\n         DriverManager.getConnection(\"jdbc:hybris:flexiblesearch:url Provided by hybris =username &amp;password=password provided by hybris\");\n\n         // Do something with the Connection\n\n         } catch (SQLException ex) {\n         // handle any errors\n         System.out.println(\"SQLException: \" + ex.getMessage());\n         System.out.println(\"SQLState: \" + ex.getSQLState());\n         System.out.println(\"VendorError: \" + ex.getErrorCode());\n         }\n\n    }\n}\n</code></pre>\n\n<p>I keep getting this stack trace: </p>\n\n<pre><code>    Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\n    at de.hybris.vjdbc.VirtualDriver.&lt;clinit&gt;(VirtualDriver.java:39)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Unknown Source)\n    at GetHybrisOrders.main(GetHybrisOrders.java:11)\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 4 more\n</code></pre>\n\n<p>Can anyone help me with finding a splution in either Java or Perl?</p>\n\n<p>thanks, \nAdam</p>\n"}, {"tags": ["perl", "utf-8", "strawberry-perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499028961, "post_id": 44867653, "comment_id": 76728656, "body": "Essentially, you&#39;ve tried to print a &quot;wide&quot; (non-ASCII) character without specifying how such characters should be encoded. If the output appears as you want it then it&#39;s probably expecting UTF-8 encoding, and you should add <code>use open qw&#47; :std :encoding(UTF-8) &#47;</code> which will indicate to perl that stdin, stdout, and stderr, and any newly-opened file handle, all use UTF-8 encoding."}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499047096, "post_id": 44867653, "comment_id": 76732018, "body": "That&#39;s correct, the output is as expected but your solution didn&#39;t work. It&#39;s still throwing an error. Do note that the output is being written to a file and not the console"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499047519, "post_id": 44867653, "comment_id": 76732087, "body": "What does your output <code>open</code> call look like, if there is one? Does it have a mode specified? Do you have a <code>binmode</code> call anywhere?"}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499047633, "post_id": 44867653, "comment_id": 76732110, "body": "Just posted the whole code"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499048962, "post_id": 44867653, "comment_id": 76732338, "body": "Since the error is at line 348, that can&#39;t be the whole code. Is line 348 within what you&#39;ve posted? Which line is it? Are you using <code>Text::CSV</code> to write to your output file? Please show that code."}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499049797, "post_id": 44867653, "comment_id": 76732488, "body": "I can&#39;t post the whole code but here is line 348 <code>print {$handles{$currency}} &quot;P&quot; . $row-&gt;{&#39;Name&#39;} . &quot;\\r\\n&quot;;</code>, yes I&#39;m using <code>Text::CSV</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499050244, "post_id": 44867653, "comment_id": 76732561, "body": "Okay, but why tell me you&#39;d <i>&quot;Just posted the whole code&quot;</i>? And where do you open <code>$handles{$currency}</code>. Please don&#39;t turn this into a guessing game. You need to reduce your code to something you <i>can</i> post that shows the same problem."}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499051021, "post_id": 44867653, "comment_id": 76732676, "body": "Sorry, I meant I posted the code related to file opening/reading/writing. Not trying to make you guess, working as best as I can through this. I will update the code above to include the handles code."}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499051539, "post_id": 44867653, "comment_id": 76732782, "body": "Yes to answer your question earlier, there is binmode being used and I&#39;ve updated the code to show it. Does that impact it?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1499053130, "post_id": 44867653, "comment_id": 76733064, "body": "Yes, it does. Remove the <code>binmode</code> call and it will work. You&#39;re setting your file handles to <i>UTF-8 encoded</i> when you open them, and then using <code>binmode</code> to change that to <i>unencoded</i>. Your <code>return_fh</code> is also very weird, and you should be using <i>lexical file handles</i> throughout instead of global ones. You&#39;ve got one <code>open $fh, ...</code> which is correct, but should be <code>open my $fh, ...</code>. But at least remove <code>return_fh</code> and the call to it. <code>open $handles{$currency} ... </code> will work just fine without it. You also need <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of your program."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499053361, "post_id": 44867653, "comment_id": 76733116, "body": "There&#39;s also no BOM on UTF-8 files."}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499053626, "post_id": 44867653, "comment_id": 76733165, "body": "Genius, thanks that worked and appreciate the other tips. If you reopen the ticket I&#39;ll be glad to accept your answer."}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499054277, "post_id": 44867653, "comment_id": 76733312, "body": "@Borodin one thing, now the output file contains Ctrl-M characters after each line, how do I get rid of that?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499054609, "post_id": 44867653, "comment_id": 76733397, "body": "Are you serious? You remove the line commented <code>convert unix line ending to dos</code> that puts them in. Do you actually know any Perl?"}, {"owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1499057401, "post_id": 44867653, "comment_id": 76734105, "body": "Ignore, found my mistake and it wasn&#39;t that, that was for reading the file. The error was in line 348, I&#39;m literally writing it there. Somehow binmode was overriding it."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1499054486, "creation_date": 1499054486, "answer_id": 44877610, "question_id": 44867653, "link": "https://stackoverflow.com/questions/44867653/strawberry-perl-gives-me-a-wide-character-in-print-when-writing-to-a-utf-8-fil/44877610#44877610", "title": "Strawberry perl gives me a &quot;Wide character in print&quot; when writing to a UTF-8 file", "body": "<p>After a lot of digging it turns out that the error is because you are explicitly opening a hash of file handles with an explicit mode of <code>:encoding(utf8)</code> and then changing that immediately to <em>unencoded</em> using <code>binmode</code></p>\n\n<p>The following are also very important for any Perl program</p>\n\n<ul>\n<li><p>Start your code with <code>use strict</code> and <code>use warnings 'all'</code></p></li>\n<li><p>Declare all your variables as close as possible to their first point of use; usually when they are defined</p></li>\n<li><p>Use <em>lexical file handles</em> instead of global ones. For instance</p>\n\n<pre><code>unless ( open my $read, '&lt;:encoding(UTF-8)', $sourcefile ) {\n    print \"Error: Could not open UTF-8 $sourcefile for reading.\\n\";\n    next;\n}\n</code></pre>\n\n<p>They are much simpler to pass as subroutine parameters. and Perl will close the automatically when they go out of scope</p></li>\n<li><p>Use <code>$var = undef</code> instead of <code>undef $var</code> to set a variable to <code>undef</code>. And use <code>local $/</code> to do that temporarily to a global variable, together with a code block <code>{ ... }</code> to limit the scope of the change</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1499103060, "last_edit_date": 1499103060, "creation_date": 1499069145, "answer_id": 44880552, "question_id": 44867653, "link": "https://stackoverflow.com/questions/44867653/strawberry-perl-gives-me-a-wide-character-in-print-when-writing-to-a-utf-8-fil/44880552#44880552", "title": "Strawberry perl gives me a &quot;Wide character in print&quot; when writing to a UTF-8 file", "body": "<p>The solution is <code>use open</code> with a proper encoding layer. The fact that you are writing to a file instead of STDOUT doesn't change anything.</p>\n\n<pre><code># Add encoding layer to STD*\nuse Win32 qw( );\nuse open ':std', ':encoding(cp'.Win32::GetConsoleOutputCP().')';\n\n# Set default encoding layer for files open in scope of this.\nuse open ':encoding(UTF-8)';\n\nopen(my $fh, '&gt;', $qfn)\n   or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 1595, "user_id": 2280961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/12e5455f96731570a74b796d53c2dbd3?s=128&d=identicon&r=PG", "display_name": "rboy", "link": "https://stackoverflow.com/users/2280961/rboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 44877610, "answer_count": 2, "score": -2, "last_activity_date": 1499103060, "creation_date": 1498972160, "last_edit_date": 1499051379, "question_id": 44867653, "link": "https://stackoverflow.com/questions/44867653/strawberry-perl-gives-me-a-wide-character-in-print-when-writing-to-a-utf-8-fil", "title": "Strawberry perl gives me a &quot;Wide character in print&quot; when writing to a UTF-8 file", "body": "<p>I'm running a script in Strawberry perl that reads a file and does some processing and writes the output to another file. I get this message sometimes when it seems to be encountering some non ASCII characters (extended) in the original file.</p>\n\n<p><code>Wide character in print at cv2pf.pl line 348, &lt;$fh&gt; chunk 1307</code></p>\n\n<p>What's the implication and how do I fix it? It doesn't appear to be having any effects on output file unless I'm missing something.</p>\n\n<p>The solution given here:\n<a href=\"https://stackoverflow.com/questions/37515013/decode-unicode-escape-characters-with-perl\">Decode unicode escape characters with perl</a> does NOT solve the problem. I'm writing the output to a file and NOT a console hence the solution doesn't work.</p>\n\n<p>I've specified UTF-8 while opening the file but it's still giving the error</p>\n\n<pre><code># Detect the file type UTF-8 or not\nif (!open(READ,$sourcefile))\n{\n    print \"Error: Could not open $sourcefile for detecting.\\n\";\n    next;\n}\nmy $line = &lt;READ&gt;;\nmy $enc = Encode::Detect::Detector::detect($line);\nprint \"File encoding: $enc\\n\";\nclose READ;\n\nif ($enc eq \"UTF-8\")\n{\n    if (!open(READ,'&lt;:encoding(UTF-8)',$sourcefile))\n    {\n        print \"Error: Could not open UTF-8 $sourcefile for reading.\\n\";\n        next;\n    }\n}\nelse\n{\n    if (!open(READ,$sourcefile))\n    {\n        print \"Error: Could not open $sourcefile for reading.\\n\";\n        next;\n    }\n}\n\nif (!open($fh,\"+&gt;:encoding(utf8)\",\"$base.m.csv\"))\n{\n    print \"Error: Could not open $base.m.csv for reading/writing.\\n\";\n    next;\n}\n\nundef $/;\n$_=&lt;READ&gt;;\n# remove the BOM\nif ($enc eq \"UTF-8\")\n{\n    $_ =~ s/\\x{FEFF}//g;\n}\n# convert unix line ending to dos\n$_ =~ s/\\r?\\n|\\r/\\r\\n/g;\nprint $fh $_;\nclose READ;\n\n$/ = \"\\r\\n\";\nseek ($fh,0,0);\n\nmy $csv = Text::CSV-&gt;new ( { allow_whitespace =&gt; 1, binary =&gt; 1 } );  # should set binary attribute.\n</code></pre>\n\n<p>In the output I'm seeing that the source file is UTF-8 and correspondingly being opened as a UTF-8 file.</p>\n\n<blockquote>\n  <p>File encoding: UTF-8</p>\n</blockquote>\n\n<p>What am I missing here?</p>\n\n<p>Other pieces of code as requested:</p>\n\n<p>Line 348</p>\n\n<p><code>print {$handles{$currency}} \"P\" . $row-&gt;{'Name'} . \"\\r\\n\";</code></p>\n\n<pre><code>my %handles;\ncurcheck: while ( $row = $csv-&gt;getline_hr( $fh ) ) {\n    my $currency=$row-&gt;{'Currency'};\n    if (exists $handles{$currency}) {\n        next curcheck;\n    }\n    $handles{$currency}=return_fh();\n    if (!open($handles{$currency},\"&gt;:encoding(utf8)\",\"$base-$currency.out\"))\n    {\n        print \"Error: Could not open $base-$currency.out for writing.\\n\";\n        next file;\n    }\n\n    binmode($handles{$currency})\n}\nseek ($fh,0,0);\n$row = $csv-&gt;getline ($fh);\n\n\n...\n\nsub return_fh {\n    local *FH;\n    return *FH;\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "arguments"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1498967874, "post_id": 44867194, "comment_id": 76713819, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3972955/how-can-i-parse-command-line-arguments\">How can I parse command line arguments?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1499005120, "post_id": 44867355, "comment_id": 76721952, "body": "Why do you <code>require</code> the program rather than just running it? And what does the <code>&amp;</code> on the subroutine call achieve?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1499012622, "post_id": 44867355, "comment_id": 76724208, "body": "@DaveCross 1) Require is supposed to make <b>many subroutines</b> defined in program.pl available in the &quot;one liner&quot;. 2) <code>&amp;</code> is not necessary in this case to call <code>go</code> subroutine. It is my preferred style-guide. 3) You answer is &quot;better &amp; recommended style&quot;. My answer is &quot;short code&quot; and makes possible much more complicated uses of subroutned defined in program.pm"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1499013045, "post_id": 44867355, "comment_id": 76724334, "body": "1/ But if you just run the program, the subroutine will all be defined anyway. 2/ Using <code>&amp;</code> is very rarely necessary to call subroutines. If that&#39;s your preferred method then you are writing code that is harder to read than it needs to be."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1499025286, "post_id": 44867355, "comment_id": 76727654, "body": "@DaveCross 1) Show your way of integrating subroutines from file and one liner (<code>-e</code> 2) &quot;It is harder to read&quot; - it is a matter of personal preferences and possibly &quot;unfit&quot; interpretation habits from other languages.  It makes code easier to read <b>for me</b>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1499058334, "post_id": 44867355, "comment_id": 76734345, "body": "1/ There&#39;s nothing to show. It just works. If you run a program from the command line then all of its subroutines are available to you. 2/ <code>&amp;</code> isn&#39;t just a matter of personal preference. <code>&amp;</code> can change the way that subroutines are called in obscure ways. Unless you understand the differences between <code>foo</code> and <code>&amp;foo</code>, I would strongly recommend that you don&#39;t use the latter."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 1, "last_activity_date": 1498968398, "creation_date": 1498968398, "answer_id": 44867355, "question_id": 44867194, "link": "https://stackoverflow.com/questions/44867194/perl-pass-arguments-into-file-from-bash/44867355#44867355", "title": "Perl pass arguments into file from Bash", "body": "<p>You may \"include\" program.pm into your \"one liner\" using <code>require</code>.</p>\n\n<p>shell/bash script</p>\n\n<pre><code>perl -e 'require \"/path/program.pm\" ; &amp;go(1=&gt;2)'\n</code></pre>\n\n<p>program.pm</p>\n\n<pre><code>sub go\n{\n   # sample subroutine\n\n   # print subroutine parameters\n   print \"go-params: @_\\n\";\n   # convert subroutine parameters into hash\n   my %hash = @_;\n   print \"go-hash-1: $hash{1}\\n\"\n}\n# IMPORTANT: indicate proper module initialization\n1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17073, "user_id": 1730638, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jfp4q.jpg?s=128&g=1", "display_name": "dthree", "link": "https://stackoverflow.com/users/1730638/dthree"}, "edited": false, "score": 0, "creation_date": 1499007895, "post_id": 44871419, "comment_id": 76722834, "body": "But how do i split the values into a hash?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 17073, "user_id": 1730638, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jfp4q.jpg?s=128&g=1", "display_name": "dthree", "link": "https://stackoverflow.com/users/1730638/dthree"}, "edited": false, "score": 0, "creation_date": 1499011054, "post_id": 44871419, "comment_id": 76723783, "body": "Oh. I apologise for not spotting a requirement that you didn&#39;t think to mention in your question :-)"}, {"owner": {"reputation": 17073, "user_id": 1730638, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jfp4q.jpg?s=128&g=1", "display_name": "dthree", "link": "https://stackoverflow.com/users/1730638/dthree"}, "edited": false, "score": 0, "creation_date": 1499011297, "post_id": 44871419, "comment_id": 76723860, "body": "Haha sorry! I do like your way better, if theres some easy eay to parse them."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1499012210, "last_edit_date": 1499012210, "creation_date": 1499002849, "answer_id": 44871419, "question_id": 44867194, "link": "https://stackoverflow.com/questions/44867194/perl-pass-arguments-into-file-from-bash/44871419#44871419", "title": "Perl pass arguments into file from Bash", "body": "<p>The answer you have already accepted seems rather complicated. This is possible with just a couple of changes to your existing code.</p>\n\n<pre><code>sub go\n{\n   # I need to use arguments here\n   # print foo\n   # print bar\n   print \"In go\\nArgs are: @_\\n\";\n}\n\nmy %functions = (\n  go  =&gt; \\&amp;go\n);\n\nmy $function = shift;\n\nif (exists $functions{$function}) {\n  # Pass remaining command-line args to the called subroutine\n  $functions{$function}-&gt;(@ARGV);\n} else {\n  die \"There is no function called $function available\\n\";\n}\n</code></pre>\n\n<p>I've put a <code>print()</code> call in <code>go()</code> (so I know it's being called) and I've passed <code>@ARGV</code> to the subroutine found in the dispatch table.</p>\n\n<p>You can just call it like any other Perl program.</p>\n\n<pre><code>$ perl program.pm go foo=bar bar=fubar\nIn go\nArgs are: foo=bar bar=fubar\n\n$ perl program.pm XX foo bar\nThere is no function called XX available\n</code></pre>\n\n<p><strong>Update:</strong> In a comment, this requirement was added:</p>\n\n<blockquote>\n  <p>But how do i split the values into a hash?</p>\n</blockquote>\n\n<p>There are two answers to this. And which one you choose depends on what you're actually trying to do.</p>\n\n<p>If you just want to take any \"foo=bar\" string and parse it into a key/value pair stored in a hash, then you can replace the <code>go()</code> subroutine with code like this:</p>\n\n<pre><code>use Data::Dumper;\n\nsub go\n{\n   # I need to use arguments here\n   # print foo\n   # print bar\n\n   my %args = map { split /=/ } @_;\n\n   print \"In go\\nArgs are: \" . Dumper(\\%args) . \"\\n\";\n}\n</code></pre>\n\n<p>You then get this output:</p>\n\n<pre><code>$ perl program.pm go foo=bar bar=fubar\nIn go\nArgs are: $VAR1 = {\n          'bar' =&gt; 'fubar',\n          'foo' =&gt; 'bar'\n        };\n</code></pre>\n\n<p>If you're actually trying to parse command line options, then you should use a command line option parser like <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">GetOpt::Long</a>.</p>\n\n<pre><code>use Data::Dumper;\nuse Getopt::Long 'GetOptionsFromArray';\n\nsub go\n{\n   # I need to use arguments here\n   # print foo\n   # print bar\n\n   my %args;\n\n   GetOptionsFromArray(\\@_, \\%args, 'foo=s', 'bar=s');\n\n   print \"In go\\nArgs are: \" . Dumper(\\%args) . \"\\n\";\n}\n</code></pre>\n\n<p>Note that for this to work, you'll need to pass proper Unix-style options that start with <code>--</code>.</p>\n\n<pre><code>$ perl program.pm go --foo=bar --bar=fubar\nIn go\nArgs are: $VAR1 = {\n          'bar' =&gt; 'fubar',\n          'foo' =&gt; 'bar'\n        };\n</code></pre>\n\n<p>But this version is far more flexible in its input requirements:</p>\n\n<pre><code>$ perl program.pm go --f bar --b fubar\nIn go\nArgs are: $VAR1 = {\n          'bar' =&gt; 'fubar',\n          'foo' =&gt; 'bar'\n        };\n</code></pre>\n\n<p>And it will tell you if you're using invalid option names.</p>\n\n<pre><code>$ perl program.pm go --fu=bar --baz=fubar\nUnknown option: fu\nUnknown option: baz\nIn go\nArgs are: $VAR1 = {};\n</code></pre>\n"}], "owner": {"reputation": 17073, "user_id": 1730638, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jfp4q.jpg?s=128&g=1", "display_name": "dthree", "link": "https://stackoverflow.com/users/1730638/dthree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 44867355, "answer_count": 2, "score": 2, "last_activity_date": 1499012210, "creation_date": 1498966034, "question_id": 44867194, "link": "https://stackoverflow.com/questions/44867194/perl-pass-arguments-into-file-from-bash", "title": "Perl pass arguments into file from Bash", "body": "<p>I have to run a function in a Perl file, and pass arguments into the function.</p>\n\n<pre><code># program.pm\n\nsub go\n{\n   # I need to use arguments here\n   # print foo\n   # print bar\n}\n\nmy %functions = (\n  go  =&gt; \\&amp;go\n);\n\nmy $function = shift;\n\nif (exists $functions{$function}) {\n  $functions{$function}-&gt;();\n} else {\n  die \"There is no function called $function available\\n\";\n}\n</code></pre>\n\n<p>This needs to be run and passed through bash. I need to be able to specify the args randomly, something like this:</p>\n\n<p><code>$ perl program.pm go foo='bar' bar='fubar'</code></p>\n\n<p>I am very unfamiliar with Perl. I am Googling around and can't for the life of me figure out how to properly parse these. It seems like there's 4 different ways to do it and none seem to fit my use case. </p>\n\n<p>I tried this to no avail as well.:</p>\n\n<p><code>$ perl program.pm -e 'go(foo=&gt;\"bar\")'</code></p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 6, "creation_date": 1498938844, "post_id": 44864757, "comment_id": 76709075, "body": "Are you really typing <code>cpan use MIME::Base64</code>? I would suggest using <code>cpan MIME::Base64</code>."}, {"owner": {"reputation": 2796, "user_id": 1661938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxxBn.jpg?s=128&g=1", "display_name": "Frederic Klein", "link": "https://stackoverflow.com/users/1661938/frederic-klein"}, "edited": false, "score": 0, "creation_date": 1498939197, "post_id": 44864757, "comment_id": 76709166, "body": "And you might be missing build tools (build-essential, gcc,...)? You could also install via package manager e.g. apt-get install libmime-base64-perl."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1498975291, "creation_date": 1498975291, "answer_id": 44867909, "question_id": 44864757, "link": "https://stackoverflow.com/questions/44864757/failing-to-install-mimebase64-using-cpan/44867909#44867909", "title": "Failing to install MIME::Base64 using cpan", "body": "<p>You are encountering an error installing the module named <code>use</code>, a module you accidentally asked to install by doing</p>\n\n<pre><code>cpan use MIME::Base64\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>cpan MIME::Base64\n</code></pre>\n\n<p>Since you don't need the module anyway, it doesn't matter that it's buggy. Just run the correct command.</p>\n"}], "owner": {"reputation": 13, "user_id": 8183271, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jCEa8yCBpkY/AAAAAAAAAAI/AAAAAAAAAEA/em8HTu5NIHY/photo.jpg?sz=128", "display_name": "Lovers For ever", "link": "https://stackoverflow.com/users/8183271/lovers-for-ever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "closed_date": 1499037411, "answer_count": 1, "score": -6, "last_activity_date": 1498975291, "creation_date": 1498938022, "last_edit_date": 1498941004, "question_id": 44864757, "link": "https://stackoverflow.com/questions/44864757/failing-to-install-mimebase64-using-cpan", "closed_reason": "Not suitable for this site", "title": "Failing to install MIME::Base64 using cpan", "body": "<p></p>\n\n<p>Please help me to install\n<a href=\"https://metacpan.org/pod/MIME::Base64\" rel=\"nofollow noreferrer\">MIME::Base64</a>\nusing cpan</p>\n\n<p>I'm getting the following error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[root@vmi125816 ~]# cpan use MIME::Base64;\nReading '/root/.cpan/Metadata'\n  Database was generated on Fri, 30 Jun 2017 23:29:02 GMT\nRunning install for module 'use'\nRunning make for A/AU/AUDREYT/use-0.05.tar.gz\nChecksum for /root/.cpan/sources/authors/id/A/AU/AUDREYT/use-0.05.tar.gz ok\n\n  CPAN.pm: Building A/AU/AUDREYT/use-0.05.tar.gz\n\nCannot determine license info from lib/use.pm\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for use\nWriting MYMETA.yml and MYMETA.json\ncp lib/use/perl5.pm blib/lib/use/perl5.pm\ncp lib/use.pm blib/lib/use.pm\nManifying 2 pod documents\n  AUDREYT/use-0.05.tar.gz\n  /usr/bin/make -- OK\nRunning make test\nPERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'inc', 'blib/lib', 'blib/arch')\" t/*.t\nt/0-signature.t .. ok\nt/1-basic.t ...... Undefined subroutine &amp;main::ok called at t/1-basic.t line 2.\n# Looks like your test exited with 255 before it could output anything.\nt/1-basic.t ...... Dubious, test returned 255 (wstat 65280, 0xff00)\nFailed 1/1 subtests\n\nTest Summary Report\n-------------------\nt/1-basic.t    (Wstat: 65280 Tests: 0 Failed: 0)\n  Non-zero exit status: 255\n  Parse errors: Bad plan.  You planned 1 tests but ran 0.\nFiles=2, Tests=1,  0 wallclock secs ( 0.02 usr  0.00 sys +  0.05 cusr  0.01 csys =  0.08 CPU)\nResult: FAIL\nFailed 1/2 test programs. 0/1 subtests failed.\nmake: *** [test_dynamic] Error 255\n  AUDREYT/use-0.05.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports AUDREYT/use-0.05.tar.gz\nRunning make install\n  make test had returned bad status, won't install without force\nMIME::Base64 is up to date (3.15).\n[root@vmi125816 ~]#\n</code></pre>\n"}, {"tags": ["perl", "google-drive-api", "mojolicious"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498928325, "post_id": 44863340, "comment_id": 76706265, "body": "Re &quot;<i>I am aware of similar questions for other languages but they don&#39;t seem to translate well for me.</i>&quot;, It might for us. Please provide!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1498941336, "post_id": 44863340, "comment_id": 76709758, "body": "Please set up a public file structure that we can use to test. It&#39;s very possible that <code>0ACFk4UawESNUUk9PVA</code> and <code>0ByFk4UawESNUcEhWdjBWTVRXZ1E</code> are simply wrong. And please use something like <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> to manipulate URLs. Concatenating strings isn&#39;t safe."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1498941865, "post_id": 44863340, "comment_id": 76709870, "body": "<i>&quot;The name of the file is changed, but the parent folder (which is the root folder for my Google Drive) is still the same&quot;</i> This troubles me. Are you expecting to rename your root folder? Please describe precisely what that <code>patch</code> call is supposed to do, including what both of those IDs mean. And add links to the Google documentation that you think supports what you have written."}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1498943050, "post_id": 44863340, "comment_id": 76710173, "body": "@borodin - I edited to eliminate the file renaming part, I hope the snippet is clearer now. The documentation is at <a href=\"https://developers.google.com/drive/v3/reference/files/update\" rel=\"nofollow noreferrer\">developers.google.com/drive/v3/reference/files/update</a>. The  id <code>0ByFk4UawESNUcEhWdjBWTVRXZ1E</code> is verified, it comes from the same API"}], "answers": [{"tags": [], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "is_accepted": true, "score": 2, "last_activity_date": 1498997589, "last_edit_date": 1498997589, "creation_date": 1498985121, "answer_id": 44868983, "question_id": 44863340, "link": "https://stackoverflow.com/questions/44863340/how-can-i-move-files-with-google-drive-api-v3-perl/44868983#44868983", "title": "How can I move files with Google Drive API v3 (perl)", "body": "<p>The <code>addParents</code> and <code>removeParents</code> must be added as parameters, not in the JSON payload.</p>\n\n<p>This works:</p>\n\n<pre><code>my $url = Mojo::URL-&gt;new('https://www.googleapis.com/drive/v3/files/fileID');\n\n$url-&gt;query({ addParents    =&gt; 'parentIdToBeAdded',\n              removeParents =&gt; 'parentIdToBeRemoved' });\n\nmy $tx = $ua-&gt;patch($url, json =&gt; { modifiedTime  =&gt; '2017-06-04T10:00:00-02:00' });\n</code></pre>\n\n<p>Some other - as in the request above - are added in the JSON body.</p>\n\n<p>Basically anything that in the <a href=\"https://developers.google.com/drive/v3/reference/files/update\" rel=\"nofollow noreferrer\">documentation</a> is under 'Required query parameters' and 'Optional query parameters' goes in as query, 'Optional Properties' go in the JSON request body.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 44868983, "answer_count": 1, "score": 0, "last_activity_date": 1498997589, "creation_date": 1498927831, "last_edit_date": 1498942941, "question_id": 44863340, "link": "https://stackoverflow.com/questions/44863340/how-can-i-move-files-with-google-drive-api-v3-perl", "title": "How can I move files with Google Drive API v3 (perl)", "body": "<p>I'm trying to move a file that I uploaded separately to Google Drive from one folder to another.</p>\n\n<p>When I do:</p>\n\n<pre><code>my $url = 'https://www.googleapis.com/drive/v3/files/' . $id;\n\nmy $tx  = $ua-&gt;patch(\n    $url,\n    json =&gt; {\n        addParents    =&gt; '0ByFk4UawESNUcEhWdjBWTVRXZ1E',\n    }\n);\n</code></pre>\n\n<p>The name of the file is changed, but the parent folder (which is the root folder for my Google Drive) is still the same.</p>\n\n<p>I am doing something wrong for sure, but what?</p>\n\n<p>My client is a <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\"><code>Mojo::UserAgent</code></a> object, but it doesn't seem to matter much. Everything else works OK.</p>\n\n<p>I am aware of similar questions for other languages such as <a href=\"https://stackoverflow.com/questions/42903908/moving-files-with-google-drive-api-v3\">this one</a> but they don't seem to translate well for me. </p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1498885020, "post_id": 44857416, "comment_id": 76695229, "body": "Here is an example using regex: <code>perl -E &#39;$_ = &quot;0123&quot; x 10; say for &#47;.{3}&#47;g&#39;</code>. You can use the <code>substr</code> function also"}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1498885545, "post_id": 44857416, "comment_id": 76695298, "body": "Can you explain more? is that a post process fro bash?"}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1498885751, "post_id": 44857416, "comment_id": 76695324, "body": "if that is a post process, how can I pass the output file name to this comand?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1498885772, "post_id": 44857416, "comment_id": 76695328, "body": "I assumed you wanted to write the substrings to the file. The command I showed can be implemented in your Perl script if you like. Just save <code>$gene-&gt;seq()</code> to a string first. Then split the string, and then write the substrings to the file"}], "answers": [{"comments": [{"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1498888477, "post_id": 44857692, "comment_id": 76695763, "body": "There is an unmatched <code>(</code> in your code. Is that <code>(.)</code>?"}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1498890503, "post_id": 44857692, "comment_id": 76696159, "body": "Using &quot;regex by trial and error&quot;!!! I removed <code>(</code>. I think it was a typo in yout answer. Is that correct?!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1498902567, "post_id": 44857692, "comment_id": 76698966, "body": "I often see the idiom <code>print join(&quot;\\n&quot;, @chunks), &quot;\\n&quot;</code> and personally think it&#39;s rather ugly. <code>print &quot;$_\\n&quot; for @chunks</code> is more concise and much clearer, and uses a lot less memory."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1498899924, "last_edit_date": 1498899924, "creation_date": 1498887179, "answer_id": 44857692, "question_id": 44857416, "link": "https://stackoverflow.com/questions/44857416/splitting-a-string-into-multiple-lines-and-write-to-file/44857692#44857692", "title": "Splitting a string into multiple lines and write to file", "body": "<pre><code>my $outfilename = $row;\nopen(my $ofh, '&gt;', $outfilename) or die \"Could not open file '$outfilename' $!\";\n{\n  my $gene_seq =  $gene-&gt;seq();\n  my @chunks = $gene_seq =~ /(.{1,100})/sg; # split $gene_seq into 100 chars chunks\n  print $ofh join(\"\\n\",@chunks),\"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1499015819, "post_id": 44859520, "comment_id": 76725076, "body": "Or s: <code>print $ofh $gene-&gt;seq =~ s&#47;\\G.{100}\\K&#47;\\n&#47;gr;</code> (untested)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1498924286, "last_edit_date": 1498924286, "creation_date": 1498902392, "answer_id": 44859520, "question_id": 44857416, "link": "https://stackoverflow.com/questions/44857416/splitting-a-string-into-multiple-lines-and-write-to-file/44859520#44859520", "title": "Splitting a string into multiple lines and write to file", "body": "<p>This is easiest using <code>unpack</code></p>\n\n<pre><code>open my $ofh, '&gt;', $outfilename or die qq{Could not open file \"$outfilename\" for output: $!};\n\nprint $ofh \"$_\\n\" for unpack '(A100)*', $gene-&gt;seq;\n</code></pre>\n"}], "owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 44859520, "answer_count": 2, "score": -1, "last_activity_date": 1498924286, "creation_date": 1498884414, "question_id": 44857416, "link": "https://stackoverflow.com/questions/44857416/splitting-a-string-into-multiple-lines-and-write-to-file", "title": "Splitting a string into multiple lines and write to file", "body": "<p>With Ensembl <a href=\"http://www.ensembl.org/info/docs/Doxygen/core-api/classBio_1_1EnsEMBL_1_1Slice.html#a2423a9c5ed791e6e5fb3b9e659553d1a\" rel=\"nofollow noreferrer\">API</a>, there is a <code>seq()</code> method which prints a sequence in one line (1xN characters). The length of the sequence may be long (order of 10K). So, I want to split the string for every 100 characters. Currently, to write into a file, I use</p>\n\n<pre><code>my $outfilename = $row;\nopen(my $ofh, '&gt;', $outfilename) or die \"Could not open file '$outfilename' $!\";\nprint $ofh $gene-&gt;seq();\n</code></pre>\n\n<p>Where <code>$gene</code> has been defined in the code.</p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["perl", "powershell", "cmd", "microsoft-distributed-file-system"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498886570, "post_id": 44857230, "comment_id": 76695444, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb524812.aspx\" rel=\"nofollow noreferrer\"><code>NetDfsGetInfo</code></a>? <code>NetDfsGetInfo</code> seems to have been made available by <a href=\"http://search.cpan.org/perldoc?Win32::Lanman\" rel=\"nofollow noreferrer\">Win32::Lanman</a>."}, {"owner": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498888838, "post_id": 44857230, "comment_id": 76695840, "body": "@ikegami : NetDfsGetInfo cmdlet is not recognized and can&#39;t download it as well , is it by default working in your powershell or did you install it from some repository"}, {"owner": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "edited": false, "score": 0, "creation_date": 1498891085, "post_id": 44857230, "comment_id": 76696290, "body": "@LotPings : no it is not a duplicate , DFS stands for distributed file system  and <code>rootxx</code> is not the server name , the path leads to a file which is another server"}, {"owner": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "edited": false, "score": 0, "creation_date": 1498892012, "post_id": 44857230, "comment_id": 76696502, "body": "@LotPings : did you down vote ?if you did read the question carefully and study whats DFS"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498899947, "post_id": 44857230, "comment_id": 76698325, "body": "cmdlet? I linked to a system call and a Perl module"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "edited": false, "score": 0, "creation_date": 1498893086, "post_id": 44858263, "comment_id": 76696769, "body": "I tried all those commands  and they were not recognized as internal or external command , so i posted the question with just two tags perl and cmd and then you asked me to include powershell , and ok how can i execute this command , i don&#39;t think it is possible to download cmdlets"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "reply_to_user": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "edited": false, "score": 0, "creation_date": 1498895440, "post_id": 44858263, "comment_id": 76697344, "body": "If you have access to a distributed file system, you should also have access to one of your administrators who can provide details of the dfs utils/cmdlets."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "reply_to_user": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "edited": false, "score": 0, "creation_date": 1498907946, "post_id": 44858263, "comment_id": 76700335, "body": "Soon that doesn&#39;t matter any more, I already removed the comment but there are 3 other close votes for your question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "reply_to_user": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "edited": false, "score": 0, "creation_date": 1498908791, "post_id": 44858263, "comment_id": 76700563, "body": "Seriously? I think it&#39;s lack of information first hand and your ahem childish behavior getting you such a response. Are you burning your 11 days old profile intentionally?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "is_accepted": false, "score": 1, "last_activity_date": 1498892389, "creation_date": 1498892389, "answer_id": 44858263, "question_id": 44857230, "link": "https://stackoverflow.com/questions/44857230/how-can-i-retrieve-server-name-from-a-unc-path-which-leads-to-a-dfs-file/44858263#44858263", "title": "How can i retrieve server name from a UNC path which leads to a DFS file", "body": "<p>Only a minute of gooogling gives <a href=\"https://social.technet.microsoft.com/Forums/windows/en-US/c2946146-2580-450a-8f41-65f4b8cbf5dd/get-dfs-targets-in-powershell-v2?forum=winserverpowershell\" rel=\"nofollow noreferrer\">some links</a></p>\n\n<pre><code>dfsutil link &lt;dfsfolder&gt;\n</code></pre>\n\n<p>If you by any chance have the option to use powershell v3+ you can use</p>\n\n<pre><code>Get-DfsnFoldertarget &lt;dfs folder&gt; | select targetpath\n</code></pre>\n\n<p>If you want a list of Shares that are linked to a DFS path then try:</p>\n\n<pre><code>Get-WmiObject -Class Win32_DFSTarget|\n  Where {$_.LinkName -like \"\\\\Domain\\DFS\\Folder\"}|\n    Select @{n='Path';e={\"\\\\{0}\\{1}\" -f $_.ServerName,$_.ShareName}}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8195048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2ajoM.jpg?s=128&g=1", "display_name": "ninja", "link": "https://stackoverflow.com/users/8195048/ninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1498892389, "creation_date": 1498881988, "last_edit_date": 1498891113, "question_id": 44857230, "link": "https://stackoverflow.com/questions/44857230/how-can-i-retrieve-server-name-from-a-unc-path-which-leads-to-a-dfs-file", "title": "How can i retrieve server name from a UNC path which leads to a DFS file", "body": "<p>I have a DFS UNC path <code>\\\\rootxx\\xx\\xx\\</code> which leads to a file in a remote server ,how can i retrieve the server name , where the file resides  using perl.</p>\n"}, {"tags": ["perl", "glob"], "comments": [{"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1498866645, "post_id": 44856014, "comment_id": 76692935, "body": "And before the comments come in, yes, if I remove the angle operator glob and run this with an explicit call to glob() followed by a foreach, I will get the behavior I&#39;m expecting. I&#39;d like to know why this is working like this, not how to fix it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498882483, "post_id": 44856014, "comment_id": 76694869, "body": "Re &quot;<i>where subsequent calls to a glob in the line input operator causes the glob to continue returning previous values</i>&quot;, As it obviously should. It would be useless if <code>&lt;$dir&#47;$glob&gt;</code> always returned the first file."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1498868201, "post_id": 44856230, "comment_id": 76693184, "body": "explicit glob doesn&#39;t help at all; easiest fix is to use <code>for</code> instead of <code>while</code>"}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1498869073, "post_id": 44856230, "comment_id": 76693323, "body": "Okay, so the line operator is indeed creating some global reference that is being reused on the next foreach iteration.  I also tried putting this code in a subroutine to force the scope to exit, and the glob is keeping state across repeated invocations of the subroutine. I guess the lesson is to just not do this."}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1498869163, "post_id": 44856230, "comment_id": 76693340, "body": "@ysth Indeed, as I indicated above, that&#39;s the fix for this. That being said, the reason the code didn&#39;t do this in the first place is due to the potentially large number of files the glob could return. The dev was trying to be efficient and not slurp up a lot of memory when only a limited, maximum, number would be processed anyways. But, looks like that strategy isn&#39;t going to work."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1498879581, "post_id": 44856230, "comment_id": 76694567, "body": "@ysth By saying <code>glob</code> I meant in list context, whereby it will re-build it every time (and then iterate w/ <code>foreach</code>). But as you say <code>foreach</code> is a far simpler way for that (unless it has an &quot;optimization&quot; to not return the full list, like it does for ranges)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1498879724, "post_id": 44856230, "comment_id": 76694581, "body": "@CDahn  I didn&#39;t think that this had a practical issue behind it, and didn&#39;t even think about what to do about it.  So you&#39;d need to be able to only process some of what is in directories (and without ever pulling the whole content)?  Thank you for the attribution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 1, "creation_date": 1498883451, "post_id": 44856230, "comment_id": 76694995, "body": "@CDahn I tried exiting the <code>while</code> early with a <code>die</code> (with the <code>while</code> loop in <code>eval</code>), hoping that it might &quot;reset&quot; it but it still returned to printing content of the first directory ..."}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1498949102, "post_id": 44856230, "comment_id": 76711439, "body": "@zdim Yeah, the original code is processing files in a series of directories, and caps each at 1000 so that no one directory can starve the others. Apparently this safety wasn&#39;t ever needed, as it turned out, until just recently. Mass confusion ensued. I&#39;m either going to go to readdir with a grep to replace the glob, or see if a closure with the glob will do the same without needing readdir."}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1498950037, "post_id": 44856230, "comment_id": 76711590, "body": "@zdim Just for completeness sake, I also tried creating a class that would contain the glob so that I could explicitly allocate new memory and try to force a new glob to be invoked, but perl is too smart for that. I get the same behavior. It looks like the only way to cap the output efficiently is going to be to move over to readdir with grep."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1498969890, "post_id": 44856230, "comment_id": 76714100, "body": "@CDahn OK, so you really did a lot with this!  I tried a closure, no dice; it <i>still</i> keeps reading the same list. I may have not tried &quot;hard enough&quot; ... but <code>readdir</code> is clearer, should be more memory efficient, and it works as needed since it iterates through files like <code>&lt;&gt;</code> does with lines. Just quit it once you hit your limit and it reads the next directory from <code>foreach</code>. (I had tested that).  I don&#39;t see why <code>grep</code>is  needed?"}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1499000999, "post_id": 44856230, "comment_id": 76720847, "body": "@zdim the <code>grep</code> is needed to mimic what the glob was doing, otherwise you get unwanted files out of <code>readdir</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1499015531, "post_id": 44856230, "comment_id": 76724994, "body": "Putting the glob in a closure will work if done correctly, what did you try?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1499023136, "post_id": 44856230, "comment_id": 76727133, "body": "@ysth  I may need to check that, but: <code>sub iter_glob { my $dir = shift; return sub { scalar &lt;&quot;$dir&#47;*&quot;&gt; } }; for my $d (@dirs) { my $iter = iter_glob($d); while (my $f = iter-&gt;()) {say $f; last} }</code> -- doesn&#39;t, it keeps printing from the same list (the first of <code>@dirs</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1499023415, "post_id": 44856230, "comment_id": 76727194, "body": "@CDahn  I had tested this: <code>for my $d (@dirs) { opendir my $dh, $d; while (my $entry = readdir($dh)) {next if $entry =~ &#47;^\\.&#47;; say &quot;$d&#47;$entry&quot;; last} }</code> and it works as needed.  You can add selection rules, to skip items you don&#39;t want to process.  I don&#39;t know how you mean to feed it to <code>grep</code> but it imposes list context so if it&#39;s <code>grep { ..} readdir</code> then <code>readdir</code> will return the whole list."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1499029300, "post_id": 44856230, "comment_id": 76728747, "body": "@CDahn If you have v5.12 or later (I think) then <code>readdir</code> in a <code>while</code> loop <i>does</i> set <code>$_</code>.  This was on v5.10 for which it wasn&#39;t doing that yet so I have to assign to a lexical.  So on a modern Perl you can do  <code>while (readdir($dh)) { next if &#47;^\\.&#47;; say &quot;$d&#47;$_&quot;;</code>. If you wish, I mean -- there&#39;s nothing wrong with using a lexical, to say the least :)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1499029869, "post_id": 44856230, "comment_id": 76728877, "body": "Sorry, I think I was confusing .. with glob; closures work with that but not glob"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1569733947, "last_edit_date": 1569733947, "creation_date": 1498867632, "answer_id": 44856230, "question_id": 44856014, "link": "https://stackoverflow.com/questions/44856014/line-input-operator-with-glob-returning-old-values/44856230#44856230", "title": "Line Input operator with glob returning old values", "body": "<p>From <a href=\"http://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a>\n(my emphasis)</p>\n\n<blockquote>\n  <p>A (file)glob evaluates its (embedded) argument only when it is starting a\n      new list. <strong>All values must be read before it will start over.</strong> In list\n      context, this isn't important because you automatically get them all\n      anyway. However, in scalar context the operator returns the next value\n      each time it's called, or <code>undef</code> when the list has run out.</p>\n</blockquote>\n\n<p>Since <code>&lt;&gt;</code> is called in scalar context here and you exit the loop with <code>last</code> after the first iteration, the next time you enter it it keeps reading from the original list.</p>\n\n<hr>\n\n<p>It is clarified in comments that there is a practical need behind this quest: process only some of the files from a directory and <em>never return all filenames</em> since there can be many.</p>\n\n<p>So assigning from <code>glob</code> to a list and working with it, or better yet using <code>for</code> instead of <code>while</code> as commented by <a href=\"https://stackoverflow.com/users/17389/ysth\">ysth</a>, doesn't help here as it returns a huge list.</p>\n\n<p>I haven't found a way to make <code>glob</code> (what <code>&lt;&gt;</code> with a filename pattern uses) drop and rebuild the list once it's generated it, without getting to its end first. \nApparently, each instance of the operator gets its own list. So using another <code>&lt;&gt;</code> inside the <code>while</code> loop with the hope of resetting it, in any way and even with the same pattern, doesn't affect the list being iterated over in <code>while (&lt;$glob&gt;)</code>.</p>\n\n<p>Just to note, breaking out of the loop with a <code>die</code> (with <code>while</code> in an <code>eval</code>) doesn't help either; the next time we come to that <code>while</code> the same list is continued.  Wrapping it in a closure</p>\n\n<pre><code>sub iter_glob { my $dir = shift; return sub { scalar &lt;\"$dir/*\"&gt; } }\n\nfor my $d (@dirs) {\n    my $iter = iter_glob($d);\n    while (my $f = $iter-&gt;()) {\n        # ...\n    }\n}\n</code></pre>\n\n<p>met with the same fate; the original list keeps being used.</p>\n\n<p>The solution then is to use <code>readdir</code> instead.</p>\n"}], "owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 44856230, "answer_count": 1, "score": 2, "last_activity_date": 1569733947, "creation_date": 1498865790, "last_edit_date": 1498869237, "question_id": 44856014, "link": "https://stackoverflow.com/questions/44856014/line-input-operator-with-glob-returning-old-values", "title": "Line Input operator with glob returning old values", "body": "<p>The following excerpt code, when running on perl 5.16.3 and older versions, has a strange behavior, where subsequent calls to a glob in the line input operator causes the glob to continue returning previous values, rather than running the glob anew.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @dirs = (\"/tmp/foo\", \"/tmp/bar\");\n\nforeach my $dir (@dirs) {    \n    my $count = 0;\n    my $glob = \"*\";\n    print \"Processing $glob in $dir\\n\";\n    while (&lt;$dir/$glob&gt;) {\n        print \"Processing file $_\\n\";\n        $count++;\n        last if $count &gt; 0;\n    }\n}\n</code></pre>\n\n<p>If you put two files in <em>/tmp/foo</em> and one or more in <em>/tmp/bar</em>, and run the code, I get the following output:</p>\n\n<blockquote>\n  <p>Processing * in /tmp/foo</p>\n  \n  <p>Processing file /tmp/foo/foo.1</p>\n  \n  <p>Processing * in /tmp/bar</p>\n  \n  <p>Processing file /tmp/foo/foo.2</p>\n</blockquote>\n\n<p>I thought that when the <code>while</code> terminates after the <code>last</code>, that the new invocation of the <code>while</code> on the second iteration would re-run the glob and give me the files listed <em>/tmp/bar</em>, but instead I get a continuation of what's in <em>/tmp/foo</em>.</p>\n\n<p>It's almost like the angle operator glob is acting like a precompiled pattern. My hypothesis is that the angle operator is creating a filehandle in the symbol table that's still open and being reused behind the scenes, and that it's scoped to the containing <code>foreach</code>, or possibly the whole subroutine.</p>\n"}, {"tags": ["perl", "web-services", "wsdl", "soaplite"], "answers": [{"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 0, "last_activity_date": 1499064589, "creation_date": 1499064589, "answer_id": 44879360, "question_id": 44849700, "link": "https://stackoverflow.com/questions/44849700/basic-soaplite-usage/44879360#44879360", "title": "Basic SOAP::Lite usage", "body": "<p>I suppose you want to use some service. If so you use use <code>proxy</code> method instead of <code>service</code>. See <a href=\"http://%20https://metacpan.org/pod/SOAP::Lite#proxy\" rel=\"nofollow noreferrer\">proxy</a> documentation:</p>\n\n<blockquote>\n  <p>The proxy is the server or endpoint to which the client is going to connect. This method allows the setting of the endpoint, along with any extra information that the transport object may need when communicating the request.</p>\n  \n  <p>This method is actually an alias to the proxy method of SOAP::Transport</p>\n</blockquote>\n\n<p><strong>f2c.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\n# tracing for debugging purposes\n# use SOAP::Lite +trace =&gt; \"debug\";\nuse SOAP::Lite;\nuse Data::Dumper;\n\nmy $service\n    = SOAP::Lite-&gt;proxy('https://www.w3schools.com/xml/tempconvert.asmx?WSDL')\n    # use on_action cb to override default SOAPAction value\n    -&gt;on_action(\n    sub {\n        return join '/', \"https://www.w3schools.com/xml\", $_[1];\n    }\n    );\nmy $result = $service-&gt;FahrenheitToCelsius('212');\n\n# result is an instance of SOAP::SOM\n# see https://metacpan.org/pod/distribution/SOAP-Lite/lib/SOAP/SOM.pod\n$result-&gt;fault &amp;&amp; die $result-&gt;faultstring;\nprint \"result = \" . Dumper $result-&gt;body;\n</code></pre>\n\n<p><code>perl f2c.pl</code> shows an error:</p>\n\n<pre><code>result = $VAR1 = {\n          'FahrenheitToCelsiusResponse' =&gt; {\n                                           'FahrenheitToCelsiusResult' =&gt; 'Error'\n                                         }\n        };\n</code></pre>\n\n<p>But there is a general issue with <a href=\"https://www.w3schools.com/xml/tempconvert.asmx?op=FahrenheitToCelsius\" rel=\"nofollow noreferrer\">FahrenheitToCelsius</a> service.</p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499064589, "creation_date": 1498835581, "question_id": 44849700, "link": "https://stackoverflow.com/questions/44849700/basic-soaplite-usage", "title": "Basic SOAP::Lite usage", "body": "<p>I'm having trouble using the most basic example of SOAP::Lite.</p>\n\n<p>Initially, I was getting an error about version mismatch, so I added the <code>soapversion('1.2')</code> as per <a href=\"https://stackoverflow.com/questions/38082603/soaplite-perl-basic-query\">this question</a>.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse SOAP::Lite;\nuse Data::Dumper;\n\nmy $service = SOAP::Lite-&gt;service('https://www.w3schools.com/xml/tempconvert.asmx?WSDL');\n$service-&gt;soapversion('1.2');\n$service-&gt;serializer-&gt;soapversion('1.2');\nmy $result = $service-&gt;FahrenheitToCelsius('212');\nprint \"result = \" . Dumper $result;\n</code></pre>\n\n<p>I no longer get version error, instead I get: <code>result = $VAR1 = 'Error';</code></p>\n"}, {"tags": ["perl", "file", "bioperl"], "comments": [{"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1498825098, "post_id": 44846259, "comment_id": 76672865, "body": "There is no such file. It is a file name that has to be created. I later use <code>$out_handler-&gt;write_seq($mystring);</code> to write some text into the file (polg). Look at the example."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1498829175, "last_edit_date": 1498829175, "creation_date": 1498825462, "answer_id": 44846436, "question_id": 44846259, "link": "https://stackoverflow.com/questions/44846259/using-command-line-argument-as-a-file-name-in-perl/44846436#44846436", "title": "Using command line argument as a file name in perl", "body": "<p>Your program is trying to <em>read</em> from that file and failing because it doesn't exist</p>\n\n<p>Your example code on github has this</p>\n\n<pre><code>-file =&gt; '&gt;chrom20.fasta'\n</code></pre>\n\n<p>so I suggest you should try</p>\n\n<pre><code>-file =&gt; \"&gt;$str\"\n</code></pre>\n\n<p>or you can run your program as</p>\n\n<pre><code>perl test.pl &gt;polg\n</code></pre>\n\n<p>Also, I'm sure you can think of a better name than <code>$str</code> for a scalar variable containing an output file name. <code>$str</code> is only fractionally better than <code>$var</code></p>\n"}], "owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "closed_date": 1498836304, "accepted_answer_id": 44846436, "answer_count": 1, "score": 0, "last_activity_date": 1498829175, "creation_date": 1498824791, "question_id": 44846259, "link": "https://stackoverflow.com/questions/44846259/using-command-line-argument-as-a-file-name-in-perl", "closed_reason": "Not suitable for this site", "title": "Using command line argument as a file name in perl", "body": "<p>The following perl script takes an argument from the command line and use that as the output file name.</p>\n\n<pre><code>my $str = $ARGV[0];\nmy $out_handler= Bio::SeqIO-&gt;new(\n    -file =&gt; $str,\n    -format =&gt; 'Fasta'\n);\n</code></pre>\n\n<p>It is similar to this <a href=\"https://github.com/Ensembl/ensembl-presentation/blob/master/API/Core/exercises/3c.pl\" rel=\"nofollow noreferrer\">example</a>. while I run <code>perl test.pl polg</code>, I get this error</p>\n\n<pre><code>------------- EXCEPTION -------------\nMSG: Could not read file 'polg': No such file or directory\nSTACK Bio::Root::IO::_initialize_io /opt/perl/lib/site_perl/5.14.2/Bio/Root/IO.pm:268\nSTACK Bio::SeqIO::_initialize /opt/perl/lib/site_perl/5.14.2/Bio/SeqIO.pm:513\nSTACK Bio::SeqIO::fasta::_initialize /opt/perl/lib/site_perl/5.14.2/Bio/SeqIO/fasta.pm:87\nSTACK Bio::SeqIO::new /opt/perl/lib/site_perl/5.14.2/Bio/SeqIO.pm:389\nSTACK Bio::SeqIO::new /opt/perl/lib/site_perl/5.14.2/Bio/SeqIO.pm:435\nSTACK toplevel test.pl:16\n-------------------------------------\n</code></pre>\n\n<p>How can I fix that?</p>\n"}, {"tags": ["perl", "exchange-server", "imap"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1498819832, "post_id": 44844101, "comment_id": 76669473, "body": "You have mixed <code>or die</code> and <code>|| die</code>. The second one is not entirely correct as it has a higher associativity. In this specific case that doesn&#39;t matter, but it&#39;s bad style. For the <code>or die</code> always use <code>or</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1498819947, "post_id": 44844101, "comment_id": 76669530, "body": "Can you access those shared folders with an email client like Thunderbird via IMAP? Having dealt with the Exchange API recently, I suspect that those are not available via IMAP at all because they are not part of your mailbox."}], "owner": {"reputation": 500, "user_id": 2641103, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a48b438707c9e875b896d3dfa10c58e?s=128&d=identicon&r=PG&f=1", "display_name": "user2641103", "link": "https://stackoverflow.com/users/2641103/user2641103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568036870, "creation_date": 1498817865, "question_id": 44844101, "link": "https://stackoverflow.com/questions/44844101/how-to-access-outlook365-shared-mailbox-with-perl-mailimapclient", "title": "How to access Outlook365 shared mailbox with Perl Mail::IMAPClient", "body": "<p>I'm using Perl Mail::IMAPClient to connect to an Outlook365 account that also has access to a shared mailbox by using the following code:</p>\n\n<pre><code># We create the socket connection to the server.\nmy $socket = IO::Socket::SSL-&gt;new(  \n   PeerAddr =&gt; 'outlook.office365.com',  \n   PeerPort =&gt; 993,\n   SSL_verify_mode =&gt; SSL_VERIFY_NONE\n)  \nor die \"socket(): $@\";  \n\n# We connect to the IMAP server.\n$client = Mail::IMAPClient-&gt;new(\n    User =&gt; $username,\n    Password =&gt; $password,  \n    SSL =&gt; 1,\n   Socket =&gt; $socket\n) || die \"I cannot create Mail::IMAPClient object: $@\";\n\n$client-&gt;State(Mail::IMAPClient::Connected);\n\nmy @folders = $client-&gt;folders();\n</code></pre>\n\n<p>However, the <code>@folders</code> array contains only the folders from my user account but not those in the shared mailbox.</p>\n\n<p>How can I access the shared mailbox folders?</p>\n"}, {"tags": ["perl", "centos", "cgi", "sendmail", "plesk"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 3, "creation_date": 1498815501, "post_id": 44841196, "comment_id": 76666736, "body": "<code>&#39;&#47;usr&#47;local&#47;psa&#47;handlers&#47;spool&#47;messageEFbeQO&#39; file: Permission denied</code>. Check this error."}], "answers": [{"tags": [], "owner": {"reputation": 3615, "user_id": 1040031, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/PPKXg.jpg?s=128&g=1", "display_name": "Bogdan Stoica", "link": "https://stackoverflow.com/users/1040031/bogdan-stoica"}, "is_accepted": false, "score": 0, "last_activity_date": 1499288992, "creation_date": 1499288992, "answer_id": 44936033, "question_id": 44841196, "link": "https://stackoverflow.com/questions/44841196/perl-exit-code-17920-on-sendmail/44936033#44936033", "title": "Perl exit code 17920 on sendmail", "body": "<p>This might be caused by selinux (if it's enabled on your server). You can check that by issuing the command bellow:</p>\n\n<pre><code>sestatus\n</code></pre>\n\n<p>If the output says permissive or disabled then selinux is not the issue.</p>\n\n<p>Also this link might help you in fixing your mail problem on your plesk server:\n<a href=\"https://support.plesk.com/hc/en-us/articles/213947085-Mail-server-does-not-work-How-to-repair-the-mail-server-configuration\" rel=\"nofollow noreferrer\">https://support.plesk.com/hc/en-us/articles/213947085-Mail-server-does-not-work-How-to-repair-the-mail-server-configuration</a></p>\n"}], "owner": {"reputation": 45, "user_id": 5546256, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2ozF7.jpg?s=128&g=1", "display_name": "Python_96", "link": "https://stackoverflow.com/users/5546256/python-96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499288992, "creation_date": 1498808480, "last_edit_date": 1498808870, "question_id": 44841196, "link": "https://stackoverflow.com/questions/44841196/perl-exit-code-17920-on-sendmail", "title": "Perl exit code 17920 on sendmail", "body": "<p>i have the problem with my software on my server with plesk.\nI send one email from perl script but system return  the following error:</p>\n\n<pre><code>error closing /usr/lib/sendmail:  (exit 17920)\n</code></pre>\n\n<p>why recive this error?\nIn the maillog i recive this error:</p>\n\n<pre><code>Jun 29 11:23:57 ip-xxx-xx-xx-xxx journal: plesk sendmail[7708]: handlers_stderr: PASS\nJun 29 11:23:57 ip-xxx-xx-xx-xxx journal: plesk sendmail[7708]: PASS during call 'limit-out' handler\nJun 29 11:23:57 ip-xxx-xx-xx-xxx journal: plesk sendmail[7708]: Unable to rename '/usr/local/psa/handlers/spool/messageEFbeQO' file: Permission denied\nJun 29 11:23:57 ip-xxx-xx-xx-xxx journal: plesk sendmail[7708]: System error (/usr/local/psa/handlers/spool/messageEFbeQO): No such file or directory\nJun 29 11:23:57 ip-xxx-xx-xx-xxx journal: plesk sendmail[7710]: Unable to open temporary file `/usr/local/psa/handlers/spool/messageEFbeQO' (2): No such file or directory\n</code></pre>\n\n<p>and i not have idea where the problem.\ni hope have said all information.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1498811489, "post_id": 44838086, "comment_id": 76664189, "body": "Perl comes with a manual.  The page you need is <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>."}], "answers": [{"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1498801060, "post_id": 44838753, "comment_id": 76658767, "body": "Lazy quantifier as well as newline character in <code>.*? \\n</code> don&#39;t make sense. You may safely remove them."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1498801275, "post_id": 44838753, "comment_id": 76658844, "body": "@revo The <code>\\n</code> must be there since it need be <i>removed</i> from the string (otherwise I keep blank lines).  I can indeed remove <code>?</code> here, which is how I had it originally. But that requires an explanation (involved for this purpose), since it belongs there in principle. So I thought it better to leave it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1498844850, "last_edit_date": 1498844850, "creation_date": 1498797960, "answer_id": 44838753, "question_id": 44838086, "link": "https://stackoverflow.com/questions/44838086/how-does-perl-match-annotation-for-verilog-files/44838753#44838753", "title": "How does Perl match annotation &quot;//&quot; for verilog files?", "body": "<p>The critical piece is the <a href=\"http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookbehind</a> <code>(?&lt;=...)</code>.  It is a <em>zero-width assertion</em>, what means that it does not consume its match -- it only asserts that the pattern given inside is indeed in the string, right before the pattern that follows it.</p>\n\n<p>So <code>(?&lt;=\\n)[ \\t]</code> matches either a space or a tab, <code>[ \\t]</code>, that has a newline before it. With the quantifier, <code>[ \\t]*</code>, it matches a space-or-tab any number of times (possibly zero).  Then we have the <code>//</code> (each escaped by <code>\\</code>). Then it matches any character any number of times up to the first newline, <code>.*?\\n</code>. </p>\n\n<p>Here <code>?</code> makes <code>.*</code> non-greedy so that it stops at <em>the first</em> match of the following pattern.</p>\n\n<p>This can be done in other ways, too.</p>\n\n<pre><code>$file =~ s{ ^ \\s* // .*? \\n }{}gmx\n</code></pre>\n\n<p>The modifier <code>m</code> makes anchors <code>^</code> and <code>$</code> (unused here) match the beginning and end of each <em>line</em>. I use <code>{}{}</code> as delimiters so that I don't have to escape <code>/</code>. The modifier <code>x</code> allows use of spaces (and comments and newlines) inside for readability.</p>\n\n<p>You can also do it by <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>-ing the string by newline and passing lines through <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a></p>\n\n<pre><code>my $new_file = join '\\n', grep { not m|^\\s*//.*| } split /\\n/, $file;\n</code></pre>\n\n<p>The <code>split</code> returns a list of lines and this is input for <code>grep</code>, which passes those for which the code in the block evaluates to true.  The list that it returns is then joined back, if you wish to again have a multiline string.\nIf you want lines remove <code>join '\\n'</code> and assign to an array instead.</p>\n\n<p>The regex in the <code>grep</code> block is now far simpler, but the whole thing may be an eye-full in comparison with the previous regex.  However, this approach can turn hard jobs into easy ones: instead of going for a monster master regex, break the string and process the pieces easily.</p>\n"}], "owner": {"reputation": 23, "user_id": 7039547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d50f162a21c0069e0fbb661bc0373d00?s=128&d=identicon&r=PG&f=1", "display_name": "imeradio", "link": "https://stackoverflow.com/users/7039547/imeradio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 44838753, "answer_count": 1, "score": 2, "last_activity_date": 1498844850, "creation_date": 1498793017, "last_edit_date": 1498807698, "question_id": 44838086, "link": "https://stackoverflow.com/questions/44838086/how-does-perl-match-annotation-for-verilog-files", "title": "How does Perl match annotation &quot;//&quot; for verilog files?", "body": "<p>I have found one method, but I don't understand the principle:</p>\n\n<pre><code>#remove lines starting with //\n\n$file =~ s/(?&lt;=\\n)[ \\t]*?\\/\\/.*?\\n//sg;\n</code></pre>\n\n<p>How does <code>(?&lt;=\\n)[ \\t]*?</code> work?</p>\n"}, {"tags": ["python", "c", "perl"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1498774914, "post_id": 44835822, "comment_id": 76652301, "body": "Can you add the results you get as well?"}, {"owner": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "reply_to_user": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1498775074, "post_id": 44835822, "comment_id": 76652355, "body": "Perl and Python get 3.14159265241, C gets 3.14159465241"}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1498775199, "post_id": 44835822, "comment_id": 76652390, "body": "I&#39;m trying to understand why you have an extra <code>i = i+1</code> in your python loop and why it isn&#39;t there anywhere else."}, {"owner": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "reply_to_user": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1498775323, "post_id": 44835822, "comment_id": 76652423, "body": "Don&#39;t worry about the python one, it works. The C one is what matters, the python one is there just to show the structure. I actually wrote the python script a while back so it might be kinda weird."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1498775372, "post_id": 44835822, "comment_id": 76652440, "body": "<code>$a = ++$a</code> wat."}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1498775510, "post_id": 44835822, "comment_id": 76652481, "body": "<code>$ .&#47;a.out  ; 3.14159465241</code> It works!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1498775541, "post_id": 44835822, "comment_id": 76652488, "body": "Why are your programs all structured differently (use of variables vs no variables, choice of names, arithmetic)? It makes it harder to compare them."}, {"owner": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "edited": false, "score": 0, "creation_date": 1498775632, "post_id": 44835822, "comment_id": 76652519, "body": "3.14159265359 is pi. 3.14159465241 is an overestimate, which should be impossible. It should get the same result as the perl and python codes but it doesn&#39;t which is what I am confused about"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1498775632, "post_id": 44835822, "comment_id": 76652520, "body": "Your C code isn&#39;t the same. It&#39;s barely similar. I took your Perl code and transliterated it to C (matching statement for statement but with C syntax) and got the same (correct) results as your Perl code. Your C code has an error in its implementation of the algorithm."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1498775884, "post_id": 44835822, "comment_id": 76652611, "body": "I translated your Perl code to C literally (use of global variables everywhere and nonsensical statements included): <a href=\"http://ideone.com/KqXIYG\" rel=\"nofollow noreferrer\">ideone.com/KqXIYG</a>. It produces 3.14159265241, same as the Perl version."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1498776119, "post_id": 44835822, "comment_id": 76652697, "body": "Why is there a <code>four = 4.0</code> in your C code when the number <code>4</code> doesn&#39;t appear in your Python or Perl code?"}, {"owner": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "edited": false, "score": 0, "creation_date": 1498776155, "post_id": 44835822, "comment_id": 76652708, "body": "Because that was the first C program I ever wrote"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1498776218, "post_id": 44835822, "comment_id": 76652731, "body": "Writing C for the first time doesn&#39;t mean you have to introduce a <code>4</code> into the algorithm. Your C code clearly isn&#39;t using the same algorithm if it needs a <code>4</code>."}, {"owner": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "edited": false, "score": 1, "creation_date": 1498776358, "post_id": 44835822, "comment_id": 76652767, "body": "Oh now I remember, that was me trying to fix it and trying to change everything to make it work and then forgetting to change it back. My bad"}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1498776635, "post_id": 44835822, "comment_id": 76652855, "body": "@Paul If my answer helped, consider taking a look at <a href=\"https://stackoverflow.com/help/someone-answers\">this</a>. You&#39;re not obligated to act on it. Cheers. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6015398"}, "edited": false, "score": 0, "creation_date": 1498797480, "post_id": 44835822, "comment_id": 76657707, "body": "The Python code will certainly not work as is, sonce there is no identation after the <code>for</code> statement. Indentation matters, in Python. Notice also that <code>float(0.5)</code> is the same as <code>0.5</code>, and there is a function <code>math.sqrt</code>, that will likely be faster and more accurate. You could safely replace <code>float(i)&#47;float(n)</code> with <code>i&#47;n</code> in Python 3 (integer division yields a float), and since you pass a  float to <code>f</code>, <code>float(x)</code> is useless if <code>f</code>. Anyway, the whole of <code>f</code> could and should be inlined. <code>float(1)</code> and <code>float(2)</code> are as well useless. There are a few other similar oddities."}], "answers": [{"comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "edited": false, "score": 0, "creation_date": 1498776288, "post_id": 44836039, "comment_id": 76652749, "body": "Your old value: <code>3.14159465241</code> (note the <code>4</code> in the 6th decimal vs the <code>2</code> now)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1498777163, "post_id": 44836039, "comment_id": 76652980, "body": "Don&#39;t mix <code>double</code>s and <code>long double</code>s"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1498778883, "post_id": 44836039, "comment_id": 76653457, "body": "I would have actually recommended sticking with <code>double</code>s for maximum portability and performance."}], "tags": [], "owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1498777225, "last_edit_date": 1498777225, "creation_date": 1498776104, "answer_id": 44836039, "question_id": 44835822, "link": "https://stackoverflow.com/questions/44835822/c-perl-and-python-similar-loops-different-results/44836039#44836039", "title": "C, Perl, and Python similar loops different results", "body": "<p>Well, comparing your methods, it became obvious your final operation for calculating <code>pi</code> was incorrect.</p>\n\n<p>Replace <code>pi = (val + x) * (four/(long double)n);</code> with these two lines:</p>\n\n<pre><code>val = val * (long double)2.0;\npi = (val + x) * ((long double)2.0/(long double)n);\n</code></pre>\n\n<p>Compiling and running gives:</p>\n\n<pre><code>3.14159265241\n</code></pre>\n\n<p>Which I believe is the output you're looking for.</p>\n"}], "owner": {"reputation": 63, "user_id": 8234267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8102f277c2f90407bf017579d97285?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8234267/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 44836039, "answer_count": 1, "score": -2, "last_activity_date": 1498794436, "creation_date": 1498774652, "last_edit_date": 1498794436, "question_id": 44835822, "link": "https://stackoverflow.com/questions/44835822/c-perl-and-python-similar-loops-different-results", "title": "C, Perl, and Python similar loops different results", "body": "<p>I wrote scripts to calculate pi in python, perl  and c. They all use the same algorithm (trapezoidal reimann sum of a circle with n subintervals) and the python and perl programs always get the same result when n is the same. However, the c program doesn't get the same answer like it should, it actually overestimates pi, which is impossible. What is wrong with the c program?</p>\n\n<p>Python:</p>\n\n<pre><code>#!/usr/bin/python\nn = 1000000\ndef f(x):\n    return (1-(float(x)**2))**float(0.5)\nval = 0\nfor i in range(n):\ni = i+1\nval = val+f(float(i)/float(n))\nval = val*2\npi = (float(2)/n)*(float(1)+val)\nprint pi\n</code></pre>\n\n<p>Perl:</p>\n\n<pre><code>#!/usr/bin/perl\n$n = 1000000;\n$h = 0;\nfor($a = 1; $a &lt; $n; ++$a){\n    $t = $a/$n;\n    $val = (1-(($t)**2))**0.5;\n    $h+=$val;\n}\n$h = $h*2;\n$pi = (2/$n)*(1+$h);\nprintf \"%.11f\", $pi;\n</code></pre>\n\n<p>C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint main()\n{\n    int count, n = 1000000;\n    double pi;\n    double val = 0.0, p = 0.50, x = 1.0, four = 4.0;\n    for(count = 1; count &lt; n; ++count)\n    {\n      val += (pow(x-(((double)count/(long double)n)*((double)count/(long \ndouble)n)), p));\n    }\n    pi = (val + x) * (four/(long double)n);\n    printf(\"%.11f\", pi);\n}\n</code></pre>\n\n<p>Results:\nC = 3.14159465241\nPerl and Python = 3.14159265241</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1498764135, "post_id": 44832901, "comment_id": 76647300, "body": "What do you mean by <i>&quot;touch files to different directory&quot;</i>? Do you mean copy the files, or update modification time as in the unix <a href=\"https://en.wikipedia.org/wiki/Touch_(Unix)\" rel=\"nofollow noreferrer\">touch</a> command?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1498765731, "post_id": 44832901, "comment_id": 76648112, "body": "You seem to have forgotten to ask a question. What problem are you having?"}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1498774068, "post_id": 44832901, "comment_id": 76652023, "body": "Why does it matter that the filenames came from a file?  They&#39;d be the same strings if they&#39;d come from a network packet or if they were found in an array.  Alternatively, what does it matter that you intend to interpret the contents of the file as a bunch of filenames to touch?  They&#39;d be the same strings if you intended to display them on the console, or if you wanted to print them on envelopes.  Is your problem reading the input file, or touching the output files?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1498765600, "creation_date": 1498765600, "answer_id": 44833754, "question_id": 44832901, "link": "https://stackoverflow.com/questions/44832901/touching-files-listed-in-another-file/44833754#44833754", "title": "Touching files listed in another file", "body": "<pre><code>xargs touch &lt;tmpdir/tar_content.out\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7917580, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7e3acc28a173f633168ca1376d42f2a7?s=128&d=identicon&r=PG&f=1", "display_name": "mayur", "link": "https://stackoverflow.com/users/7917580/mayur"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1498765493, "answer_count": 1, "score": -6, "last_activity_date": 1498800437, "creation_date": 1498762423, "last_edit_date": 1498800437, "question_id": 44832901, "link": "https://stackoverflow.com/questions/44832901/touching-files-listed-in-another-file", "closed_reason": "Needs details or clarity", "title": "Touching files listed in another file", "body": "<p>I have a file whose name is in <code>$stdout_file</code>.</p>\n\n<pre><code>my $stdout_file = \"$tmpdir/tar_content.out\";\n</code></pre>\n\n<p>This file contains a list of files names.</p>\n\n<pre><code>temp/abc.txt\ntemp/def.txt\ntemp/ghi.txt\n</code></pre>\n\n<p>I need to touch the listed files (<code>temp/abc.txt</code>, <code>temp/def.txt</code>, <code>temp/ghi.txt</code>).</p>\n"}, {"tags": ["windows", "perl", "file", "append"], "comments": [{"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1498758111, "post_id": 44831392, "comment_id": 76643959, "body": "Why not create a scheduled task that handles the log rotation each month?  Then this script would only need 1 open call (in append mode)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1498759378, "post_id": 44831392, "comment_id": 76644637, "body": "<a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1498759379, "post_id": 44831392, "comment_id": 76644639, "body": "If you don&#39;t want to do the scheduled task log rotation, then I&#39;d rewrite your code to use 2 separate subs; one to rotate the log and the other to get the ctime of the logfile.  Then you could have a simple statement like this <code>rotatelog($logfile) if log_ctime($logfile) &gt; 30;</code>"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1498759799, "post_id": 44831392, "comment_id": 76644880, "body": "@RonBergin How will that handle the append case properly?"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "reply_to_user": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 1, "creation_date": 1498760328, "post_id": 44831392, "comment_id": 76645187, "body": "@NetMage The next statement would simply be: <code>open( $fh, &quot;&gt;&gt;&quot;, $logfile );</code>.  You could add a die statement to that or load the <code>autodie</code> pragma.  Those 2 statements would be the only lines needed in the OP&#39;s <code>if ($log) {</code> block."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1498761136, "post_id": 44831392, "comment_id": 76645707, "body": "That feels inefficient - you must open/close the file an additional time in some cases."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1498761660, "post_id": 44831392, "comment_id": 76645979, "body": "Can you give an example where it would need to be opened multiple times?  Since the ctime value on Windows does not change like it does on *nix systems, we could check that value instead of opening and reading the timestamp in the file (as zdim has shown).  So the file only needs to be opened/closed once."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1498761825, "post_id": 44831392, "comment_id": 76646056, "body": "Correction, if it needs to be rotated, then obviously it would need to be opened in write mode to add the header (which is actually no longer needed)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1498768271, "post_id": 44831392, "comment_id": 76649450, "body": "@RonBergin The file only need be opened once, for append.  See full example added to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 7465224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8674e8b51c36303e43e77f6d10df24?s=128&d=identicon&r=PG&f=1", "display_name": "Mushu", "link": "https://stackoverflow.com/users/7465224/mushu"}, "edited": false, "score": 0, "creation_date": 1498761433, "post_id": 44832406, "comment_id": 76645870, "body": "Thanks for the comment. I did say this was a &quot;snippet&quot; of code not a real program. I&#39;m simply looking for a better algorithm when you get down to it. Your comments are true of course but not relevant to this discussion."}, {"owner": {"reputation": 89, "user_id": 7465224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8674e8b51c36303e43e77f6d10df24?s=128&d=identicon&r=PG&f=1", "display_name": "Mushu", "link": "https://stackoverflow.com/users/7465224/mushu"}, "edited": false, "score": 0, "creation_date": 1498761577, "post_id": 44832406, "comment_id": 76645948, "body": "Also the file open &quot;+&gt;&gt;&quot; will open a file for both read and write/append."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 1, "creation_date": 1498762616, "post_id": 44832406, "comment_id": 76646469, "body": "@NetMage If someone asks me &quot;how can I push my car from D.C. to LA&quot;, I will recommend they put gas in the tank and drive. That would also be &quot;completely not answering the original question&quot;."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1498762374, "last_edit_date": 1498762374, "creation_date": 1498760573, "answer_id": 44832406, "question_id": 44831392, "link": "https://stackoverflow.com/questions/44831392/how-can-i-reduce-this-to-a-single-file-open/44832406#44832406", "title": "How can I reduce this to a single file open?", "body": "<p>There are other, non-cosmetic problems with your code: a) You do not ever check if your calls to <code>open</code> succeeded; b) You are creating a race condition. The file can come into existence after the <code>-e</code> check has failed. The subsequent <code>open $fh, '&gt;' ...</code> would then clobber it; c) You don't check if your <code>rename</code> call succeeded etc.</p>\n\n<p>The following would be a partial improvement on your existing code:</p>\n\n<pre><code>if ($log) {\n    if (open $fh, '&lt;', $logfile) { #file exists\n        chomp ($x = &lt;$fh&gt;);\n        close $fh\n            or die \"Failed to close '$logfile': $!\";\n        if (((time - $x)/3600/24) &gt; 30) {\n            my $rotated_logfile = join '.', $logfile, time;\n            rename $logfile =&gt; $rotated_logfile\n                or die \"Failed to rename '$logfile' to '$rotated_logfile': $!\";\n            open $fh, '&gt;', $logfile\n                or die \"Failed to create '$logfile'\";\n            print $fh time, \"\\n\", '-' x 50, \"\\n\";\n        }\n        else {\n            open $fh, '&gt;&gt;', $logfile\n                or die \"Cannot open '$logfile' for appending: $!\";\n        }\n    }\n    else {\n        open $fh, '&gt;', $logfile\n            or die \"Cannot to create '$logfile': $!\";\n        print $fh time, \"\\n\", '-' x 50, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>It would be better to abstract every bit of discrete functionality to suitably named functions.</p>\n\n<p>For example, here is a completely untested re-write:</p>\n\n<pre><code>use autouse Carp =&gt; qw( croak );\n\nuse constant SENTINEL_FILE =&gt; 'Logging.yes';\nuse constant ENABLE_LOG =&gt; -e SENTINEL_FILE;\n\nuse constant HEADER_SEPARATOR =&gt; '-' x 50;\nuse constant SECONDS_PER_DAY =&gt; 24 * 60 * 60;\nuse constant ROTATE_AFTER =&gt; 30 * SECONDS_PER_DAY;\n\nmy $fh;\n\nif (ENABLE_LOG) {\n    if (my $age = read_age( $logfile )) {\n        if ( is_time_to_rotate( $age ) ) {\n            rotate_log( $logfile );\n        }\n        else {\n            $fh = open_log( $logfile );\n        }\n    }\n    unless ($fh) {\n        $fh = create_log( $logfile );\n    }\n}\n\nsub is_time_to_rotate {\n    my $age = shift;\n    return $age &gt; ROTATE_AFTER;\n}\n\nsub rotate_log {\n    my $file = shift;\n\n    my $saved_file = join '.', $file, time;\n\n    rename $file =&gt; $saved_file\n        or croak \"Failed to rename '$file' to '$saved_file': $!\"\n\n    return;\n}\n\nsub create_log {\n    my $file = shift;\n\n    open my $fh, '&gt;', $file\n        or croak \"Failed to create '$file': $!\";\n\n    print $fh time, \"\\n\", HEADER_SEPARATOR, \"\\n\"\n        or croak \"Failed to write header to '$file': $!\";\n\n    return $fh;\n}\n\nsub open_log {\n    my $file = shift;\n\n    open my $fh, '&gt;&gt;', $file\n        or croak \"Failed to open '$file': $!\";\n\n    return $fh;\n}\n\nsub read_age {\n    my $file = shift;\n\n    open my $fh, '&lt;', $file\n        or return;\n\n    defined (my $creation_time = &lt;$fh&gt;)\n        or croak \"Failed to read creation time from '$file': $!\";\n\n    return time - $creation_time;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 7465224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8674e8b51c36303e43e77f6d10df24?s=128&d=identicon&r=PG&f=1", "display_name": "Mushu", "link": "https://stackoverflow.com/users/7465224/mushu"}, "edited": false, "score": 0, "creation_date": 1498761280, "post_id": 44832410, "comment_id": 76645788, "body": "I played with that and it was not consistent. I found that it retained the original creation date somehow and the new file had that date in the file system. I think it has to do with the FAT file system in Windows and how a file delete doesn&#39;t actually &quot;delete&quot; the file it just sets a flag in the directory structure to say the file entry can be reused. That&#39;s why file undelete utilities work. If this were a *nix system I wouldn&#39;t have to do it this way."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 89, "user_id": 7465224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8674e8b51c36303e43e77f6d10df24?s=128&d=identicon&r=PG&f=1", "display_name": "Mushu", "link": "https://stackoverflow.com/users/7465224/mushu"}, "edited": false, "score": 0, "creation_date": 1498761624, "post_id": 44832410, "comment_id": 76645963, "body": "@Mushu That&#39;s a good point.  But -- since you are renaming this log file, why not copy it into the new one and delete the old one (instead of using <code>rename</code>)?  Then the time-stamp should be created anew."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 89, "user_id": 7465224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8674e8b51c36303e43e77f6d10df24?s=128&d=identicon&r=PG&f=1", "display_name": "Mushu", "link": "https://stackoverflow.com/users/7465224/mushu"}, "edited": false, "score": 0, "creation_date": 1498766066, "post_id": 44832410, "comment_id": 76648274, "body": "@Mushu  I added a full working example (can&#39;t test on Windows right now but it should work)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1498847626, "last_edit_date": 1498847626, "creation_date": 1498760592, "answer_id": 44832410, "question_id": 44831392, "link": "https://stackoverflow.com/questions/44831392/how-can-i-reduce-this-to-a-single-file-open/44832410#44832410", "title": "How can I reduce this to a single file open?", "body": "<p>If you need to read a line of a file, rename it and then work with it, you have to open it twice.</p>\n\n<p>However, you can also do away with using that first line.</p>\n\n<p>On Windows, according to <a href=\"http://perldoc.perl.org/perlport.html#Files-and-Filesystems\" rel=\"nofollow noreferrer\">perlport (Files and Filesystems)</a>, the <em>inode change time</em> time-stamp (<code>ctime</code>) \"may really\" mark the file creation time. This is likely to be completely suitable for a log file that doesn't get manipulated and moved around. It can be obtained with the <code>-C</code> <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">file-test operator</a></p>\n\n<pre><code>my $days_float = -C $filename;\n</code></pre>\n\n<p>Now you can numerically test this against 30. Then there is no need to print the file's creation time to its first line (but you may as well if it is useful for viewing or other tools).  </p>\n\n<p>Also, there is the module <a href=\"http://search.cpan.org/~wyant/Win32API-File-Time-0.006/lib/Win32API/File/Time.pm\" rel=\"nofollow noreferrer\">Win32API::File::Time</a>, with the purpose to</p>\n\n<blockquote>\n  <p>provide maximal access to the file creation, modification, and access times under MSWin32  </p>\n</blockquote>\n\n<p>Plese do read the docs for some caveats. I haven't used it but it seems tailored for your need.</p>\n\n<p>A good point is raised in a comment: apparently the OS retains the original time-stamp as the file is being renamed.  In that case, when the file's too old copy it into a new one (with the new name) and delete it, instead of using <code>rename</code>.  Then open that log file anew, so with a new time-stamp.</p>\n\n<p>Here is a complete example</p>\n\n<pre><code>archive_log($logfile) if -f $logfile and -C $logfile &gt; 30; \n\nopen my $fh_log, '&gt;&gt;', $logfile or die \"Can't open $logfile: $!\";\n\nsay $fh_log \"Log a line\";\n\nsub archive_log {\n    my ($file) = @_;\n\n    require POSIX; POSIX-&gt;import('strftime');\n    my $ts = strftime(\"%Y%m%d_%H:%M:%S\", localtime);  # 20170629_12:44:10\n\n    require File::Copy; File::Copy-&gt;import('copy');\n    my $archive = $file . \"_$ts\";     \n    copy ($file, $archive) or die \"Can't copy $file to $archive: $!\";\n    unlink $file           or die \"Can't unlink $file: $!\";\n}\n</code></pre>\n\n<p>The <code>archive_log</code> archives the current log by copying it and then removes it.\nSo after that we can just open for append, which creates the file if not there.</p>\n\n<p>The <code>-C</code> tests for file existence but since its output is used in a numerical test we need <code>-f</code> first.</p>\n\n<p>Since this happens once a month I load modules at runtime, with <code>require</code> and <code>import</code>, once the log actually need be rotated. If you already use <code>File::Copy</code> then there is no need for this. As for the time-stamp, I threw in something to make this a working example.</p>\n\n<p>I tested this on UNIX, by changing <code>-C</code> to <code>-M</code> and tweaking the timestamp by <code>touch -t -c</code>.</p>\n\n<p>Better yet, to reduce the caller's code fully move the tests into the sub as well, for</p>\n\n<pre><code>my $fh_log = open_log($logfile);\n\nsay $fh_log \"Log a line\";\n\nsub open_log {\n    my ($file) = @_;\n    if (-f $file and -C $file &gt; 30) {\n        # code from archive_log() above, to copy and unlink $file\n    }\n    open my $fh_log, '&gt;&gt;', $file  or die \"Can't open $file: $!\";\n    return $fh_log;\n}\n</code></pre>\n\n<hr>\n\n<p>Note. On UNIX the file's creation time is not kept anywhere. The closest notion is the <code>ctime</code> above, but this is of course different. For one thing, it changes with many operations, for instance <code>mv</code>, <code>ln</code>, <code>chmod</code>, <code>chown</code>, <code>chgrp</code> (and probably others).</p>\n"}], "owner": {"reputation": 89, "user_id": 7465224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8674e8b51c36303e43e77f6d10df24?s=128&d=identicon&r=PG&f=1", "display_name": "Mushu", "link": "https://stackoverflow.com/users/7465224/mushu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498935985, "creation_date": 1498756794, "question_id": 44831392, "link": "https://stackoverflow.com/questions/44831392/how-can-i-reduce-this-to-a-single-file-open", "title": "How can I reduce this to a single file open?", "body": "<p>Using Strawberry Perl 5.22.0 in Windows 7. Is there a more \"perlish\" way to write this snippet of code? I hate the duplication of file open sections, but cannot think of a way to make it only open once because of the requirement to test the creation time.</p>\n\n<pre><code>...\nmy $x;\nmy $fh;\nmy $sentinelfile = \"Logging.yes\"; #if this file exists then enable logging\nmy $logfile = \"transfers.log\";\nmy $log = 0; #default to NO logging\n\n$log = 1 if -e $sentinelfile; #enable logging if sentinel file exists\n\nif($log){\n\n#logfile remains open after this so remember to close at end of program!\n if (-e $logfile) { #file exists\n    open($fh, \"&lt;\", $logfile); #open for read will NOT create if not exist\n        chomp ($x = &lt;$fh&gt;); #grab first row\n    close $fh;\n    if (((scalar time - $x)/3600/24) &gt; 30) { #when ~30 days since created\n        rename($logfile, $logfile . time); #rename existing logfile\n        open($fh, \"&gt;\", $logfile); #open for write and truncate\n        print $fh time,\"\\n\"; #save create date\n        print $fh \"--------------------------------------------------\\n\";\n    } else { #file is not older than 30 days\n        open($fh, \"&gt;&gt;\", $logfile); #open for append\n    }\n } else { #file not exist\n    open($fh, \"&gt;\", $logfile); #open new for write\n    print $fh time,\"\\n\"; #save create date\n    print $fh \"--------------------------------------------------\\n\";\n }\n\n} #if $log\n...\n</code></pre>\n\n<p>To recap: logfile logs stuff. First row of file contains the logfile creation date. Second row contains horizontal rule. Rest of file contains text. Around 30 days after file was created, rename file and start a new one. After the above chunk of code the logfile is open and ready for logging stuff. It gets closed at the end of the rest of the program.</p>\n"}, {"tags": ["perl", "user-input", "eof"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1498751520, "post_id": 44829800, "comment_id": 76640055, "body": "&quot;<i>anything seems to work for me.</i>&quot; ... That&#39;s great. Now, what is your question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1498751814, "post_id": 44829800, "comment_id": 76640300, "body": "That has nothing to do with Perl. Ctrl-D is an OS thing. On Linux and other unix systems, unless you reconfigured the key, Ctrl-D at the start of a line will send an EOF signal. Perl will respond to that signal by returning from <code>&lt;STDIN&gt;</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1498752068, "post_id": 44829800, "comment_id": 76640476, "body": "And, on DOSish systems, <code>CTRL-Z</code> signals EOF."}], "answers": [{"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1499166342, "post_id": 44901881, "comment_id": 76785340, "body": "Alternatively: <code>for my $i ( 0..$max )</code>"}], "tags": [], "owner": {"reputation": 11, "user_id": 8232740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74F6a.jpg?s=128&g=1", "display_name": "Alex Rodriguez", "link": "https://stackoverflow.com/users/8232740/alex-rodriguez"}, "is_accepted": false, "score": 0, "last_activity_date": 1499159831, "creation_date": 1499159831, "answer_id": 44901881, "question_id": 44829800, "link": "https://stackoverflow.com/questions/44829800/perl-ctrl-d-not-stoping-user-input/44901881#44901881", "title": "PERL CTRL-D not stoping user input", "body": "<p>Found the problem,\nFor loop never ends cause of bad declaration of the second i wich should be $i, this put the execution in an endless loop. </p>\n\n<pre><code>for ($i=0; i&lt;=$max;$i++)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8232740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74F6a.jpg?s=128&g=1", "display_name": "Alex Rodriguez", "link": "https://stackoverflow.com/users/8232740/alex-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499159831, "creation_date": 1498751313, "question_id": 44829800, "link": "https://stackoverflow.com/questions/44829800/perl-ctrl-d-not-stoping-user-input", "title": "PERL CTRL-D not stoping user input", "body": "<p>Learning perl I found that in this case CTRL+D is not working to stop user input. Its working in others scripts so probably is something realted with the code itself.</p>\n\n<p>I was reading on the internet about EOF but anything seems to work for me.</p>\n\n<p>Thank you in advance and best Regards. </p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Dime tus numeros\\n\";\n\n@numb =&lt;STDIN&gt;;\n\n\n$cua = 0;\n$count = 0;\n$array = \"@numb\";\n\n$max = @numb; #tama\u00f1o array\n$joined = join('',@numb); #metemos array en sacalar juntandolo sin espacios\n$joined = $original; #guardamos el num original\n\n\n$diff = 999 - $joined;\n\nfor ($i=0; i&lt;=$max;$i++){ #es &lt;= por que el arraylenght no empieza en 0\n\n    $sumatotal += $numb[$i]; #vamos sumando cada elemento del array\n}\n\n\nprint \"Has a\u00f1adido los numeros $array. \\n\";\nprint \"Combiandose en $joined que sumados entre si dan:$sumatotal \\n\";\nprint \"La diferencia entre $joined y 999 es $cua\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 11, "user_id": 8232073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a95737b700fe240f6c7cb329534045c?s=128&d=identicon&r=PG&f=1", "display_name": "zack", "link": "https://stackoverflow.com/users/8232073/zack"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1498745265, "post_id": 44827103, "comment_id": 76635141, "body": "Yes, as stated before I got this code from someone in this forum. But I couldn&#39;t make it work. It says the &quot;form is undefined&quot; when I execute ! Is the form name &#39;frmLogin&#39; a generic name and can be used anywhere ?"}, {"owner": {"reputation": 556, "user_id": 3779344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CcOx.jpg?s=128&g=1", "display_name": "Calvin Taylor", "link": "https://stackoverflow.com/users/3779344/calvin-taylor"}, "edited": false, "score": 0, "creation_date": 1498760810, "post_id": 44827103, "comment_id": 76645516, "body": "this has little to do with perl and more to do with the library / url target particulars."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1498752670, "post_id": 44827497, "comment_id": 76640855, "body": "You&#39;re right, but the OP is asking about the form <i>name</i> which is in the <code>name</code> attribute."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1498746831, "last_edit_date": 1498746831, "creation_date": 1498745311, "answer_id": 44827497, "question_id": 44827103, "link": "https://stackoverflow.com/questions/44827103/wwwmechanize-perl/44827497#44827497", "title": "WWW::Mechanize Perl", "body": "<p>The name of the form(s), if any, are embedded in the content that you are retrieving. If you view the source for this page, for example, you will find many <code>form</code> elements. This one has the id <code>add-comment-44827103</code>:</p>\n\n<pre><code>    &lt;form id=\"add-comment-44827103\" \n      class=\"\" \n      data-placeholdertext=\"Use comments to ask for more information or suggest improvements. Avoid answering questions in comments.\"&gt;&lt;/form&gt;\n</code></pre>\n\n<p>You can retrieve them with <a href=\"https://metacpan.org/pod/WWW::Mechanize#$mech-&gt;forms\" rel=\"nofollow noreferrer\"><code>$mech-&gt;forms</code></a>. This call returns a list of <a href=\"http://metacpan.org/pod/HTML::Form\" rel=\"nofollow noreferrer\"><code>HTML::Form</code></a> objects that you can interrogate further.</p>\n\n<pre><code>my ($form) = $mech-&gt;forms;   # note ($var)=... for list context\nmy $form_id = $form-&gt;attr(\"id\") || die \"form on page doesn't have 'id' attr\";\n$mech-&gt;form_id($form_id);\n...\n</code></pre>\n\n<p>There is also the <code>$mech-&gt;form_number( index )</code> call</p>\n\n<pre><code>$mech-&gt;form_number(2);     # select the 2nd  form  on the page\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8232073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a95737b700fe240f6c7cb329534045c?s=128&d=identicon&r=PG&f=1", "display_name": "zack", "link": "https://stackoverflow.com/users/8232073/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 44827497, "answer_count": 1, "score": -2, "last_activity_date": 1498746831, "creation_date": 1498744331, "last_edit_date": 1498744838, "question_id": 44827103, "link": "https://stackoverflow.com/questions/44827103/wwwmechanize-perl", "title": "WWW::Mechanize Perl", "body": "<p>I am writing a simple code to login to a website for learning purpose.</p>\n\n<p>I get an error saying \"No Form Defined\"</p>\n\n<p>How do I know the form name?</p>\n\n<p>Below is the code snippet (I found it from this forum).</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse WWW::Mechanize;\nuse HTTP::Cookies;\n\nmy $mech = WWW::Mechanize-&gt;new();\nmy $url = \"http://www.something.net\";\n\n$mech-&gt;cookie_jar-&gt;set_cookie(0,\"start\",1,\"/\",\".something.net\");\n$mech-&gt;get($url);\n$mech-&gt;form_name(\"frmLogin\");\n$mech-&gt;set_fields(user=&gt;'user',passwrd=&gt;'password');\n$mech-&gt;click();\n$mech-&gt;save_content(\"logged_in.html\");\n</code></pre>\n\n<p>Does the code look alright?</p>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1498738158, "post_id": 44824288, "comment_id": 76629314, "body": "What about <code>$c-&gt;error</code>?"}, {"owner": {"reputation": 14432, "user_id": 940208, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f915e5849f63f612de2832bad2348ab4?s=128&d=identicon&r=PG", "display_name": "mnowotka", "link": "https://stackoverflow.com/users/940208/mnowotka"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1498738228, "post_id": 44824288, "comment_id": 76629375, "body": "Nothing, there is no error as you see the last but one line of the function code prints the correct value."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1498738733, "post_id": 44824288, "comment_id": 76629809, "body": "Where&#39;s the semicolon after the 1st line?"}, {"owner": {"reputation": 14432, "user_id": 940208, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f915e5849f63f612de2832bad2348ab4?s=128&d=identicon&r=PG", "display_name": "mnowotka", "link": "https://stackoverflow.com/users/940208/mnowotka"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1498739654, "post_id": 44824288, "comment_id": 76630555, "body": "Sorry just a typo here, not in the code. It&#39;s corrected now."}, {"owner": {"reputation": 14432, "user_id": 940208, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f915e5849f63f612de2832bad2348ab4?s=128&d=identicon&r=PG", "display_name": "mnowotka", "link": "https://stackoverflow.com/users/940208/mnowotka"}, "edited": false, "score": 0, "creation_date": 1498739793, "post_id": 44824288, "comment_id": 76630692, "body": "I guess I do. I don&#39;t really know much about this code, because it&#39;s not mine. All I know is it works correctly on the server and on my dev machine any function invoked using <code>forward</code> return nothing, regardless it it connects to DB or do something else."}, {"owner": {"reputation": 14432, "user_id": 940208, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f915e5849f63f612de2832bad2348ab4?s=128&d=identicon&r=PG", "display_name": "mnowotka", "link": "https://stackoverflow.com/users/940208/mnowotka"}, "edited": false, "score": 0, "creation_date": 1498740058, "post_id": 44824288, "comment_id": 76630908, "body": "mysql on both. As I said, I can give an example of other function, that does not connect to DB and still the variable does not get assigned when the function is invoked via forward."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1498740253, "post_id": 44824288, "comment_id": 76631065, "body": "&quot;<i>I can give an example of other function, that does not connect to DB</i>&quot; ... then do that. While you are at it, put together something we can run which still exhibits the problem."}, {"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "edited": false, "score": 0, "creation_date": 1499041337, "post_id": 44824288, "comment_id": 76731036, "body": "I&#39;m sure there&#39;s a perfectly good reason for it, but this method seems an awfully long-winded way to write <code>DateTime-&gt;now-&gt;format_cldr(&quot;yyyy-MM-dd hh:mm:ss&quot;)</code> :-)"}], "owner": {"reputation": 14432, "user_id": 940208, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f915e5849f63f612de2832bad2348ab4?s=128&d=identicon&r=PG", "display_name": "mnowotka", "link": "https://stackoverflow.com/users/940208/mnowotka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1498739835, "creation_date": 1498736839, "last_edit_date": 1498739835, "question_id": 44824288, "link": "https://stackoverflow.com/questions/44824288/catalyst-forward-function-doesnt-return-any-value", "title": "Catalyst &#39;forward&#39; function doesn&#39;t return any value", "body": "<p>I have this code:</p>\n\n<pre><code>my $variable = $c-&gt;forward(qw/Curate::Controller::Utils _get_timestamp/);\n$c-&gt;log-&gt;debug(\"variable is now $variable\");\n</code></pre>\n\n<p>And the <code>_get_timestamp</code> looks like this:</p>\n\n<pre><code>sub _get_timestamp :Private {\n\n    my ( $self, $c, $arg ) = @_;\n\n    my $current_timestamp = \"0000-00-00 00:00:00\";\n\n    my $coderef = sub {\n        my $sth = $c-&gt;model('DB')-&gt;storage-&gt;dbh-&gt;prepare('SELECT CURRENT_TIMESTAMP') \n            || die \"Couldn't prepare statement: \" .  $c-&gt;model('DB')-&gt;storage-&gt;dbh-&gt;errstr;\n\n        $sth-&gt;execute || die \"Couldn't execute statement: \" . $sth-&gt;errstr;\n        $current_timestamp =  $sth-&gt;fetchrow_array;\n    };\n\n    try {\n        $c-&gt;model('DB')-&gt;schema-&gt;txn_do($coderef);\n    } catch {\n        $c-&gt;stash-&gt;{error} = \"$_\";  \n    };\n\n    $c-&gt;log-&gt;debug(\"returning $current_timestamp\");\n\n    return $current_timestamp;\n\n}\n</code></pre>\n\n<p>When I run this code in the logs I can see:</p>\n\n<pre><code>      returning 2017-06-29 12:34:23\n      variable is now \n</code></pre>\n\n<p>I don't understand why the variable did not get assigned to the value returned by the forwarded function. This code works correctly with the old version of Catalyst. I am having this issued with the latest one downloaded from CPAN. Are you aware about any changes in forwarding protocol?</p>\n\n<p>BTW: I know I can stash the result but a direct assignment seems more natural in this case.</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1498735018, "post_id": 44823273, "comment_id": 76626929, "body": "Look for a delimiter, and set <code>$&#47;</code>."}, {"owner": {"reputation": 137, "user_id": 3698861, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8a7823f95a8a27c2d5d9cc7c4169d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya K", "link": "https://stackoverflow.com/users/3698861/aditya-k"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1498738341, "post_id": 44823273, "comment_id": 76629469, "body": "Could you elaborate? Not sure what you mean?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1498740710, "post_id": 44823273, "comment_id": 76631402, "body": "You know how to identify the <i>start</i> of a log entry. Use that information to accumulate subsequent lines until you hit another log entry."}, {"owner": {"reputation": 5280, "user_id": 494501, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oxK3a.jpg?s=128&g=1", "display_name": "0xCAFEBABE", "link": "https://stackoverflow.com/users/494501/0xcafebabe"}, "edited": false, "score": 0, "creation_date": 1498740726, "post_id": 44823273, "comment_id": 76631418, "body": "You can read all about the magic variable <code>$&#47;</code> (input record separator) <a href=\"http://www.perlmonks.org/?node_id=287647\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 0, "last_activity_date": 1498741605, "last_edit_date": 1498741605, "creation_date": 1498740595, "answer_id": 44825624, "question_id": 44823273, "link": "https://stackoverflow.com/questions/44823273/using-perl-to-split-over-multiple-lines/44825624#44825624", "title": "Using perl to split over multiple lines", "body": "<p>The following solution uses that the number of \" in a field is even <code>($p=~y/\"//%2)</code>, this condition number of <code>\"</code> odd may be changed by other that can indicate the field is not complete.\nThe number of columns splitted is fixed to <code>7</code> (to allow <code>;</code> in last field) and may be changed for example <code>@array = map {s/;$//} $p=~/\\G(?:\"[^\"]*\"|[^;])*;/g;</code>.\nThe file is read line by line but a line is processed <code>sub process</code> when it's complete <code>$p</code> variable to store the previous line the last line is processed in END block.</p>\n\n<pre><code>perl -ne '\n    sub process {\n        @array = split /;/,$p,7;\n        # do something with array\n        print ((join \"\\n---\\n\", @array),\"\\n\");\n    }\n    if ($p=~y/\"//%2) {\n        $p.=$_;\n        next;\n    }\n    process;\n    $p=$_;\n    END{process}\n' &lt; logfile.txt\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 3698861, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8a7823f95a8a27c2d5d9cc7c4169d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya K", "link": "https://stackoverflow.com/users/3698861/aditya-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1498741605, "creation_date": 1498733932, "question_id": 44823273, "link": "https://stackoverflow.com/questions/44823273/using-perl-to-split-over-multiple-lines", "title": "Using perl to split over multiple lines", "body": "<p>I'm trying to write a perl script to process a log4net log file. The fields in the log file are separated by a semi-colon. My end goal is to capture each field and populate a mysql table.</p>\n\n<p>Usually I have lines that look a little like this (all on a single line)</p>\n\n<pre><code>DEBUG;2017-06-13T03:56:38,316-05:00;2017-06-13 08:56:38,316;79ab0b95-7f58-\n44a8-a2c6-1f8feba1d72d;(null);WorkerStartup 1;\"Starting services.\"\n</code></pre>\n\n<p>These are easy to process. I can simply split by semicolon to get the information I need.</p>\n\n<p>However occassionally the \"message\" field at the end may span several lines, especially if there is a stack trace. I would want to capture the entire message as a single column. I cannot use split by semicolon, because the next lines would typically look like:</p>\n\n<pre><code> at some.random.classname\n at another.classname\n ...\n</code></pre>\n\n<p>Can someone give some tips how to solve this problem?</p>\n"}, {"tags": ["javascript", "perl", "web", "scraper"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1498732297, "post_id": 44822327, "comment_id": 76625217, "body": "Besides that, there is WWW::Mechanize::Firefox and ::Chrome. They remote-control a browser Window on your machine, so you need X when you&#39;re on Linux. ::Chrome was released like a week ago and is still not very feature-complete. It should support a headless more where you do not need a window manager. You can use it to pull out the final source code after JS stuff ran and work on that."}, {"owner": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1498735268, "post_id": 44822327, "comment_id": 76627120, "body": "When I try to use Mechanize Firefox I got error - ^[[Aroot@antonov:/var/www/html/work8# perl work8.pl Failed to connect to , problem connecting to &quot;localhost&quot;, port 4242: Connection refused at /usr/local/share/perl/5.22.1/MozRepl/Client.pm line 144 I should run some daemon before using this module?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1498735472, "post_id": 44822327, "comment_id": 76627270, "body": "You need to install a Firefox add on and start it so the Perl module can talk to Firefox. There is a troubleshooting or FAQ section in the pod that explao explains how to do that. It think it is at the end. I don&#39;t have a computer right now so I can&#39;t link it. The add on is called mozrepl"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1498732008, "creation_date": 1498732008, "answer_id": 44822605, "question_id": 44822327, "link": "https://stackoverflow.com/questions/44822327/perl-wwwscripter-not-work-not-return-content/44822605#44822605", "title": "PERL WWW::Scripter not work, not return content", "body": "<pre><code>$w-&gt;get(url);\n</code></pre>\n\n<p>It's not <code>url</code>, it's <code>$url</code>. Use <a href=\"http://p3rl.org/strict\" rel=\"nofollow noreferrer\">strict</a> and <a href=\"http://p3rl.org/warnings\" rel=\"nofollow noreferrer\">warnings</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "edited": false, "score": 0, "creation_date": 1498738559, "post_id": 44823002, "comment_id": 76629661, "body": "Well. It stange. It works. But when it try to parse HTML another time, I got very big error. And with LWP I dont have such error. All working pretty good, but big very big pauses when get HTML from some sites. Next is error text for you. Use of uninitialized value $ms in division (/) at /usr/local/share/perl/5.22.1/WWW/Scripter.pm line 825."}, {"owner": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "edited": false, "score": 0, "creation_date": 1498738662, "post_id": 44823002, "comment_id": 76629748, "body": "I can publish full text of error here. But I can give you link to full error text. <a href=\"https://justpaste.it/18e33\" rel=\"nofollow noreferrer\">justpaste.it/18e33</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "edited": false, "score": 0, "creation_date": 1498738734, "post_id": 44823002, "comment_id": 76629811, "body": "If you have extra useful information to share, then please edit your question to add it."}, {"owner": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "edited": false, "score": 0, "creation_date": 1498739029, "post_id": 44823002, "comment_id": 76630067, "body": "Try to think why, why, why I can have very big pauses when try to get HTML from url. Up to hour may be more. Why?"}, {"owner": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "edited": false, "score": 0, "creation_date": 1498739047, "post_id": 44823002, "comment_id": 76630092, "body": "Maybe problem with redirect?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "edited": false, "score": 0, "creation_date": 1498818384, "post_id": 44823002, "comment_id": 76668575, "body": "@DenisAntonov Why do you keep suggesting completely unrelated edits to my answer? That&#39;s incredibly rude."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1498733115, "creation_date": 1498733115, "answer_id": 44823002, "question_id": 44822327, "link": "https://stackoverflow.com/questions/44822327/perl-wwwscripter-not-work-not-return-content/44823002#44823002", "title": "PERL WWW::Scripter not work, not return content", "body": "<p>Firstly, you should always <code>use strict</code> and <code>use warnings</code> in your Perl programs. They would have picked up your typo.</p>\n\n<p>Secondly, you should have checked the return code from <code>get()</code> as that would have shown you there was something wrong.</p>\n\n<p>Thirdly, there are few outdated Perl programming practices in your code.</p>\n\n<pre><code># Always use these\nuse strict;\nuse warnings;\n\nuse WWW::Scripter;\n# Added this\nuse Data::Dumper;\n\n# Don't use indirect object notation.\n# Declare variable\nmy $w = WWW::Scripter-&gt;new;\n$w-&gt;use_plugin('JavaScript');\n\n# Three-arg version of open()\n# Lexical filehandle\n# Check result of open() and die on failure\nopen(my $in_fh, '&lt;', 'links.csv') or die $!;\n\nwhile (&lt;$in_fh&gt;) {\n  # Fixed regex.\n  # 1/ Anchored at start of string\n  # 2/ Made 's' optional (and non-captured)\n  if ( ! /^https?/ ) {\n    # Use string interpolation\n    $url = \"http://$url\";\n  }\n\n  # Capture HTTP response\n  # Use '$url', not 'url'\n  my $resp = $w-&gt;get($url);\n\n  # Check request is successful\n  unless ($resp-&gt;is_success) {\n    # If not, warn and die\n    warn $resp-&gt;status_line;\n    next;\n  }\n\n  print \"=======\\n\";\n  print Dumper $w-&gt;content;\n  print \"=======\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7734041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10979b93c7c4618f505fa8defcdcb5fc?s=128&d=identicon&r=PG", "display_name": "rogersnest", "link": "https://stackoverflow.com/users/7734041/rogersnest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1498743106, "creation_date": 1498731282, "question_id": 44822327, "link": "https://stackoverflow.com/questions/44822327/perl-wwwscripter-not-work-not-return-content", "title": "PERL WWW::Scripter not work, not return content", "body": "<p>Usualy I make scrapers in Ruby, but decide to do in Perl. And when I run my script I see number of url which opens very very very slow.\nAnd I thank, maybe its redirect problem? Or maybe its JS urls thats why problem. And I decide to use some module which can open JS web sites. \nSo I look to cpan doc, take code and try to run it. Nothing no content.\nWhat I do wrong? Please correct me. Or maybe advice me smth. I try to use Selenium but have problems with installation, see error when I try to run selenium in Linux console.</p>\n\n<pre><code>use WWW::Scripter;\n\n  $w = new WWW::Scripter;  \n  $w-&gt;use_plugin('JavaScript');\n\n   open(FH, \"&lt;links.csv\");\n   while (&lt;FH&gt;) {\n    $url =  $_;\n\n    if ( $url !~ /http(s)/ ) {\n        $url = \"http://\".$url;\n    }\n\n    $w-&gt;get(url);\n    $html = $w-&gt;content;\n\n    print \"=======\\n\";\n    print Dupmper $w-&gt;content;\n    print \"=======\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "64-bit"], "comments": [{"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 1, "creation_date": 1498723090, "post_id": 44818683, "comment_id": 76618782, "body": "See: <a href=\"https://stackoverflow.com/questions/26168746/how-can-i-check-whether-my-perl-installation-is-32-or-64-bit\" title=\"how can i check whether my perl installation is 32 or 64 bit\">stackoverflow.com/questions/26168746/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 3365963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ea4937ad9052b362fc1eef79c79f21?s=128&d=identicon&r=PG&f=1", "display_name": "LnlB", "link": "https://stackoverflow.com/users/3365963/lnlb"}, "edited": false, "score": 0, "creation_date": 1498729287, "post_id": 44819363, "comment_id": 76623128, "body": "I&#39;ve for compile-time options : USE_64_BIT_INT USE_LARGE_FILES and ivsize=&#39;8&#39;;"}], "tags": [], "owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "is_accepted": false, "score": 2, "last_activity_date": 1498723461, "last_edit_date": 1498723461, "creation_date": 1498722954, "answer_id": 44819363, "question_id": 44818683, "link": "https://stackoverflow.com/questions/44818683/sprint-a-64-bit-number/44819363#44819363", "title": "sprint a 64-bit number", "body": "<p>Although you're running on 64-bit Solaris, likely you have a 32-bit int Perl.</p>\n\n<p>You could run <code>perl -V</code> (uppercase V) and check for compile-time options:</p>\n\n<pre><code>Characteristics of this binary (from libperl):\n  Compile-time options: PERL_MALLOC_WRAP PERL_USE_SAFE_PUTENV\n                        *USE_64_BIT_INT* USE_LARGE_FILES USE_PERLIO\n</code></pre>\n\n<p>Or <code>perl -V:ivsize</code>; size 8 indicates 64-bit, 4 32-bit.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1498794308, "last_edit_date": 1498794308, "creation_date": 1498756612, "answer_id": 44831352, "question_id": 44818683, "link": "https://stackoverflow.com/questions/44818683/sprint-a-64-bit-number/44831352#44831352", "title": "sprint a 64-bit number", "body": "<p>Your Perl does indeed use 64-bit integers as hinted by <code>perl -v</code>. This is confirmed by <code>perl -V:ivsize</code> returning <code>8</code>.</p>\n\n<p>The problem relates to <code>use bigint;</code>. Using that causes your <code>-1</code> to be replaced with <code>Math::BigInt-&gt;new(-1)</code>, and the the numification of that object is what you're printing. I bet it's that object's numification returns the 32-bit representation of <code>-1</code>.</p>\n\n<p>Removing <code>use bigint;</code> should do the trick.</p>\n"}], "owner": {"reputation": 128, "user_id": 3365963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ea4937ad9052b362fc1eef79c79f21?s=128&d=identicon&r=PG&f=1", "display_name": "LnlB", "link": "https://stackoverflow.com/users/3365963/lnlb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1498794308, "creation_date": 1498720692, "last_edit_date": 1498753187, "question_id": 44818683, "link": "https://stackoverflow.com/questions/44818683/sprint-a-64-bit-number", "title": "sprint a 64-bit number", "body": "<p>I want to print a 64-bit number into an other variable. </p>\n\n<pre><code>#!/bin/perl\n\nuse strict;\nuse bigint;\n\nmy $str         = \"\";\nmy $long_number = -1;\n\n$str = sprintf(\"%016X\", $long_number);\n</code></pre>\n\n<p>But when I print <code>$str</code> I see <code>00000000ffffffff</code>.</p>\n\n<p>It's like Perl considers my <code>$long_number</code> to be a 32-bit number.</p>\n\n<p>I checked my Perl version. It looks correct :</p>\n\n<blockquote>\n  <p>perl --version</p>\n  \n  <p>This is perl, v5.8.4 built for sun4-solaris-64int (with 37 registered\n  patches, see perl -V for more detail</p>\n</blockquote>\n\n<p>Does anyone know where my problem comes from ?</p>\n"}, {"tags": ["javascript", "perl", "api"], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1498707096, "creation_date": 1498707096, "answer_id": 44815930, "question_id": 44815842, "link": "https://stackoverflow.com/questions/44815842/handle-bitfinex-authentication-in-perl/44815930#44815930", "title": "Handle Bitfinex authentication in perl", "body": "<p>There is a typo in the JavaScript sample code.</p>\n\n<p>Instead of</p>\n\n<pre><code>const body = {\n  request: url,\n  nonce\n}\n</code></pre>\n\n<p>It should have</p>\n\n<pre><code>const body = {\n  'request': url,\n  'nonce': nonce\n}\n</code></pre>\n\n<p>So, the Perl version should have</p>\n\n<pre><code>my $body = { request =&gt; $url, nonce =&gt; $nonce };\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3994698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea148ced0476296df4bd995c5d2e71c?s=128&d=identicon&r=PG&f=1", "display_name": "CLTECH", "link": "https://stackoverflow.com/users/3994698/cltech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1498707096, "creation_date": 1498706469, "question_id": 44815842, "link": "https://stackoverflow.com/questions/44815842/handle-bitfinex-authentication-in-perl", "title": "Handle Bitfinex authentication in perl", "body": "<p>I am trying to use Bitfinex API to authenticate myself in perl. However, whatever I do I get, </p>\n\n<pre><code>HTTP POST error code: 400\nHTTP POST error message: Bad Request\n</code></pre>\n\n<p>The sample code is given in javascript as below,</p>\n\n<pre><code>const request = require('request')\nconst crypto = require('crypto')\n\nconst apiKey = '&lt;Your API key here&gt;'\nconst apiSecret = '&lt;Your API secret here&gt;'\nconst baseUrl = 'https://api.bitfinex.com'\n\nconst url = '/v1/account_infos'\nconst nonce = Date.now().toString()\nconst completeURL = baseUrl + url\nconst body = {\n  request: url,\n  nonce\n}\nconst payload = new Buffer(JSON.stringify(body))\n    .toString('base64')\n\nconst signature = crypto\n  .createHmac('sha384', apiSecret)\n  .update(payload)\n  .digest('hex')\n\nconst options = {\n  url: completeURL,\n  headers: {\n    'X-BFX-APIKEY': apiKey,\n    'X-BFX-PAYLOAD': payload,\n    'X-BFX-SIGNATURE': signature\n  },\n  body: JSON.stringify(body)\n}\n\nreturn request.post(\n  options,\n  function(error, response, body) {\n    console.log('response:', JSON.stringify(body, 0, 2))\n  }\n)\n</code></pre>\n\n<p>I tried the following in perl,</p>\n\n<pre><code>  my $nonce=int(1000*time());\n  my $baseurl=\"https://api.bitfinex.com\";\n  my $url=\"/v1/account_infos\";\n  my $completeurl=$baseurl . $url;\n  my $body=[$url, $nonce];\n  my $message=to_json($body);\n  my $payload = encode_base64($message);\n  my $sig = hmac_sha384_hex($payload,$apiSecret);\n  my $ua = LWP::UserAgent-&gt;new();\n  my $req = POST($completeurl, ['X-BFX-APIKEY' =&gt; $apiKey, 'X-BFX-PAYLOAD' =&gt; $payload, 'X-BFX-SIGNATURE' =&gt; $sig]);\n  my $resp = $ua-&gt;request($req);\n  if ($resp-&gt;is_success) {\n    print \"success\\n\";\n\n  }\n  else {\n    print \"HTTP POST error code: \", $resp-&gt;code, \"\\n\";\n    print \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n\n  }\n</code></pre>\n\n<p>Can someone point out my (many) mistakes? Thanks a lot.</p>\n"}]