[{"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 19179, "user_id": 5193536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGlox.png?s=128&g=1", "display_name": "nbk", "link": "https://stackoverflow.com/users/5193536/nbk"}, "edited": false, "score": 0, "creation_date": 1574295518, "post_id": 58965121, "comment_id": 104185730, "body": "First you need perl and mysql see <a href=\"https://www.perltutorial.org/perl-dbi/\" rel=\"nofollow noreferrer\">perltutorial.org/perl-dbi</a> and then you need the mysql script <a href=\"https://stackoverflow.com/questions/13579810/how-to-import-data-from-text-file-to-mysql-database\" title=\"how to import data from text file to mysql database\">stackoverflow.com/questions/13579810/&hellip;</a>"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1574296517, "post_id": 58965121, "comment_id": 104185988, "body": "Why don&#39;t you use <code>LOAD DATA INFILE</code> instead of <code>perl</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1574298293, "post_id": 58965627, "comment_id": 104186395, "body": "NOTE: if your table has fields with specification <b>uniq</b> you will get errors on duplicate record insertion. You need to do some reading on DB table creation <a href=\"https://dev.mysql.com/doc/refman/5.5/en/create-table.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.5/en/create-table.html</a> (please keep in mind that there might be difference between versions of MySQL -- look into documentation for your version to avoid confusion)"}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 2, "last_activity_date": 1574298930, "last_edit_date": 1574298930, "creation_date": 1574297521, "answer_id": 58965627, "question_id": 58965121, "link": "https://stackoverflow.com/questions/58965121/perlread-text-file-with-delimiter-and-insert-into-mysql-table-in-perl-5-10/58965627#58965627", "title": "[Perl]read text file with delimiter and insert into mysql table in perl 5.10", "body": "<p>Well you need to do some reading on <a href=\"https://metacpan.org/pod/DBD::mysql\" rel=\"nofollow noreferrer\">DBI</a> driver to get a grip on the code provided bellow -- it is best invested time to work with DB.</p>\n\n<p>NOTE: in this piece of code I read data from internal block <strong>__DATA__</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\nuse DBI;\n\nmy $debug = 0;\n\nmy @fields = qw(id last first address); # Field names in Database\nmy(%record,$rv);\n\nmy $hostname = 'db_server_1';           # Database server name\nmy $database = 'db_employees';          # Database name\nmy $table    = 'db_table';              # Table name\nmy $port     = '3306';                  # Database port [default]\n\n# Define DSN\nmy $dsn = \"DBI:mysql:database=$database;host=$hostname;port=$port\";\n# Connect to Database\nmy $dbh = DBI-&gt;connect($dsn, $user, $password, {RaiseError =&gt; 1});\n# Define query\nmy $stq = qq(INSERT INTO $table (id,last,first,address) VALUES(?,?,?,?););\n# Prepare query\nmy $sth = $dbh-&gt;prepare($stq);\n\n$dbh-&gt;begin_work();                     # Ok, we will do insert in one transaction\n\nmy $skip = &lt;DATA&gt;;                      # We skip header in data block\n\nwhile( &lt;DATA&gt; ) {\n    @record{@fields} = split /#/;       # Fill the hash with record data\n\n    print Dumper(\\%row) if $debug;      # Look at hash in debug mode\n\n    $rv = $sth-&gt;execute(@record{@fields});  # Execute query with data\n\n    print $DBI::errstr if $rv &lt; 0;      # If error lets see ERROR message \n}\n\n$dbh-&gt;commit();                         # Commit the transaction\n$dbh-&gt;disconnect();                     # Disconnect from DataBase\n\n\n__DATA__\nid#EmployeLastName#EmployeFirstName#EmployeeAddress\n1#Alexander#Makedonsky#267 Mozarella st., Pizza, Italy\n2#Vladimir#Lenin#12 Glinka st., Moscow, Italy\n3#Donald#Trump#765 Tower ave., Florida, USA\n4#Angela#Merkel#789 Schulstrafe st., Berlin, Germany\n</code></pre>\n\n<p>You can read data from a file with following code</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $debug = 1;\n\nmy @fields = qw(id last first address); # Field names in Database\nmy(%record);\n\nmy $filename = shift\n    or die \"Provide filename on command line\";\n\nopen DATA, \"&lt; $filename\"\n     or die \"Could not open $filename\";\n\nwhile( &lt;DATA&gt; ) {\n   @record{@fields} = split /#/;\n\n   print Dumper(\\%record) if $debug;\n}\n\nclose DATA;\n</code></pre>\n\n<p>As you very fresh in <em>Perl</em> programming then you probably should start from <a href=\"https://docstore.mik.ua/orelly/perl4/lperl/index.htm\" rel=\"nofollow noreferrer\">Learning Perl</a>, then move on <a href=\"https://docstore.mik.ua/orelly/perl4/prog/index.htm\" rel=\"nofollow noreferrer\">Programming Perl</a>, when you get in <em>trouble</em> visit <a href=\"https://docstore.mik.ua/orelly/perl3/cookbook/index.htm\" rel=\"nofollow noreferrer\">Perl Cookbook</a> and if you decided to dive into database programming <a href=\"https://docstore.mik.ua/orelly/linux/dbi/index.htm\" rel=\"nofollow noreferrer\">Programming the Perl DBI</a></p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 1, "last_activity_date": 1574297766, "creation_date": 1574297766, "answer_id": 58965655, "question_id": 58965121, "link": "https://stackoverflow.com/questions/58965121/perlread-text-file-with-delimiter-and-insert-into-mysql-table-in-perl-5-10/58965655#58965655", "title": "[Perl]read text file with delimiter and insert into mysql table in perl 5.10", "body": "<p>Well it is nice to know <em>Perl</em> and <em>DBI</em> driver programming. But in your particular case you could load data from a file directly by utilizing <em>MySQL</em> commands.</p>\n\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/loading-tables.html\" rel=\"nofollow noreferrer\">Loading Data into a Table</a></p>\n\n<p>Sometimes it is much much easier than it looks at first sight.</p>\n"}], "owner": {"reputation": 1, "user_id": 12407074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b9216e6b1d7eae4929340279dec026?s=128&d=identicon&r=PG&f=1", "display_name": "lnikoli31", "link": "https://stackoverflow.com/users/12407074/lnikoli31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1574298930, "creation_date": 1574293649, "last_edit_date": 1574297613, "question_id": 58965121, "link": "https://stackoverflow.com/questions/58965121/perlread-text-file-with-delimiter-and-insert-into-mysql-table-in-perl-5-10", "title": "[Perl]read text file with delimiter and insert into mysql table in perl 5.10", "body": "<p>I have text file(employeedata.txt) with values like this : </p>\n\n<pre>\nABC#VVV#JHY#ABC#VVV#JHY#ABC#VVV#JHY#ABC#VVV\nBBN#NJU#NULL#ABC#VVV#JHY#ABC#VVV#JHY#ABC#OLJ\nABC#BYR#MPL#ABC#VVV#JHY#ABC#TGB#JHY#ABC#NULL\nNMP#JDC#NULL#ABC#VVV#JHY#ABC#XCD#JHY#ABC#NULL\nUJK#SAB#NULL#ABC#VVV#JHY#ABC#NBG#JHY#ABC#MPL\n</pre>\n\n<p>my text file contains 5,000 lines and I have a Table called <code>Employee</code> with values like this:</p>\n\n<pre><code>id|EmployeLastName|EmployeFirstName|EmployeeAddress\n</code></pre>\n\n<p>In my file text, in each line, i have <code>EmployeLastName</code> in the first position, <code>EmployeFirstName</code> in the fourth position, <code>EmployeeAddress</code> in the last position</p>\n\n<p>Example :  </p>\n\n<pre><code>EmployeLastName#VVV#JHY#EmployeFirstName#VVV#JHY#ABC#VVV#JHY#ABC#EmployeeAddress \n</code></pre>\n\n<p>Now I want to read text file line by line and insert into table <code>Employee</code> by using perl 5.10.</p>\n\n<p>I am a novice in perl. How can do it?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1574285654, "post_id": 58963633, "comment_id": 104182494, "body": "Does it work if you change it to <code>require &quot;.&#47;formparser.lib&quot;</code> ? I think this is a <code>.</code>-in-<code>@INC</code> thing but I&#39;m not certain. Also, doesn&#39;t your webserver log the stdout of CGI processes anywhere? It&#39;s pretty hard to debug when the <i>actual error messages</i> are hidden."}, {"owner": {"reputation": 143, "user_id": 5300462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/868114835114f81f4f4e0ead28a6181e?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/5300462/john-d"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1574287345, "post_id": 58963633, "comment_id": 104183193, "body": "No it doesn&#39;t work if I use require &quot;./formparser.lib&quot;.  I can&#39;t see  the stdout of CGI processes anywhere unfortunately"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1574288197, "post_id": 58963633, "comment_id": 104183529, "body": "(Meant stderr, but same idea anyway)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574291235, "post_id": 58963633, "comment_id": 104184636, "body": "Note that you shouldn&#39;t assume the current work directory is the same as the script&#39;s directory. See <a href=\"https://stackoverflow.com/a/46550384/589924\">this</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574303164, "post_id": 58963633, "comment_id": 104187536, "body": "I&#39;m voting to close this question as off-topic because there&#39;s little we can do without an error message"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574342933, "post_id": 58963633, "comment_id": 104205236, "body": "Is <code>formparser.lib</code> really so badly formatted? :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574343024, "post_id": 58963633, "comment_id": 104205296, "body": "I recommend switching from <code>formparser.lib</code> to <code>CGI.pm</code> (which is probably a standard part of the Perl installation on your system). It&#39;ll be like moving your development practices from 1995 to 2003."}, {"owner": {"reputation": 143, "user_id": 5300462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/868114835114f81f4f4e0ead28a6181e?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/5300462/john-d"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574355864, "post_id": 58963633, "comment_id": 104213277, "body": "@ikegami  Yes fair enough"}, {"owner": {"reputation": 143, "user_id": 5300462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/868114835114f81f4f4e0ead28a6181e?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/5300462/john-d"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574357024, "post_id": 58963633, "comment_id": 104213868, "body": "@DaveCross  there\u2019s one $ missing otherwise it\u2019s  straight from the book. The very old book"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574414568, "post_id": 58963633, "comment_id": 104233109, "body": "If you can&#39;t get the errors to go to the log file then you could (temporarily) add <code>use CGI::Carp qw(fatalsToBrowser);</code> to the CGI program in order to send them to the browser."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1574426443, "last_edit_date": 1574426443, "creation_date": 1574422220, "answer_id": 58993391, "question_id": 58963633, "link": "https://stackoverflow.com/questions/58963633/unable-to-run-perl-cgi-scripts-that-has-a-require-lib-file/58993391#58993391", "title": "Unable to run Perl cgi scripts that has a require lib file", "body": "<p>I copied your form parsing code into a file and asked <code>perl</code> to check the syntax:</p>\n\n<pre><code>$ perl -c formparser.lib\nBareword found where operator expected at formparser.lib line 20, near \"tr/%(..)/pack(\"c\", hex($1))/eg\"\nBareword found where operator expected at formparser.lib line 22, near \"tr/%(..)/pack(\"c\", hex($1))/eg\"\nsyntax error at formparser.lib line 20, near \"tr/%(..)/pack(\"c\", hex($1))/eg\"\nsyntax error at formparser.lib line 22, near \"tr/%(..)/pack(\"c\", hex($1))/eg\"\n</code></pre>\n\n<p>So there's a problem with these two lines.</p>\n\n<p>Line 20:</p>\n\n<pre><code>$key =~ tr/%(..)/pack(\"c\", hex($1))/eg;\n</code></pre>\n\n<p>Line 22:</p>\n\n<pre><code>$value =~ tr/%(..)/pack(\"c\", hex($1))/eg;\n</code></pre>\n\n<p>I'm not sure which \"very old book\" you got this code from, but it's never going to work. [<strong>Update:</strong> Oh, yes I do - you mentioned it in your question.]</p>\n\n<p>Perl has two operators that you can use to carry out substitutions - <code>tr///</code> can be used to make simple \"replace one character with another\" substitutions and <code>s///</code> can be used to make more complicated substitutions using regular expressions or using Perl code in the replacement text.</p>\n\n<p>This code contains a perfect example of the simple substitution that <code>tr///</code> would be used for:</p>\n\n<pre><code>$key =~ tr/+/ /;\n</code></pre>\n\n<p>In this code we replace a \"+\" with a space. That's simple enough and <code>tr///</code> is the perfect approach to do this.</p>\n\n<p>However, the other use of <code>tr///</code> in this code is wrong.</p>\n\n<pre><code>$key =~ tr/%(..)/pack(\"c\", hex($1))/eg;\n</code></pre>\n\n<p>This is trying to do something far more complex. It's trying to do this:</p>\n\n<blockquote>\n  <p>Find a percent sign followed by two characters. Capture those two following characters in <code>$1</code>. Interpret those characters as a hexadecimal number and convert that into the matching character. Then replace the original string (the percent followed by two characters) with the character that we've found. And do that for every percent sign followed by two characters you can find in the input string.</p>\n</blockquote>\n\n<p>That's not something you can do with <code>tr///</code>. That needs <code>s///</code>.</p>\n\n<p>So you need to replace:</p>\n\n<pre><code>$key =~ tr/%(..)/pack(\"c\", hex($1))/eg;\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>$key =~ s/%(..)/pack(\"c\", hex($1))/eg;\n</code></pre>\n\n<p>And you need to make the same change on the <code>$value</code> line.</p>\n\n<p>And I'd probably recommend burning the book that gave you this code too.</p>\n"}], "owner": {"reputation": 143, "user_id": 5300462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/868114835114f81f4f4e0ead28a6181e?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/5300462/john-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574426443, "creation_date": 1574285223, "question_id": 58963633, "link": "https://stackoverflow.com/questions/58963633/unable-to-run-perl-cgi-scripts-that-has-a-require-lib-file", "title": "Unable to run Perl cgi scripts that has a require lib file", "body": "<p>I'm trying to run a cgi script on Abyss web server on Windows 10, following a script from CGI &amp; Perl by Mike MCCGrath.</p>\n\n<p>There is a simple HTML form (colours html) that sends data to a CGI script called colours.cgi</p>\n\n<p>The colours.html is </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Form template&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;form method=\"POST\" action=\"http://localhost/colours.cgi\"&gt;\n1:\n&lt;input type=\"text\" name=\"colour1\" size=\"25\"&gt;\n2:\n&lt;input type=\"text\" name=\"colour2\" size=\"25\"&gt;\n3:\n&lt;input type=\"text\" name=\"colour3\" size=\"25\"&gt;\n&lt;input type=\"submit\" value=\"Send\"&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The colours.cgi script which requires a file called formparser.lib is as follows:</p>\n\n<pre><code> require \"formparser.lib\";\n    &amp;parseform;\n    print \"Content-type: text/html\\n\\n &lt;html&gt;\";\n    print \"You entered these colours:\";\n    print \"$formdata{'colour1'}, \";\n    print \"$formdata{'colour2'}, \";\n    print \"$formdata{'colour3'}  &lt;/html&gt;\";\n</code></pre>\n\n<p>Finally the formparser.lib file is: </p>\n\n<pre><code>sub parseform {\n if ($ENV{'REQUEST_METHOD'} eq 'GET') {\n @pairs = split(/&amp;/, $ENV{'QUERY_STRING'});\n }\n elsif ($ENV{'REQUEST_METHOD'} eq 'POST'){\n read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});\n @pairs = split(/&amp;/, $buffer);\n if ($ENV{'QUERY_STRING'}) {\n @getpairs = split(/&amp;/, $ENV{'QUERY_STRING'});\n push (@pairs, @getpairs); }\n }\n else {\n print \"Content-type:text/html\\n\\n\";\n print \"Unrecognized Request Method - User GET or POST\";\n }\n\n foreach $pair (@pairs) {\n ($key, $value) = split (/=/, $pair);\n $key =~ tr/+/ /;\n $key =~ tr/%(..)/pack(\"c\", hex($1))/eg;\n $value =~ tr/+/ /;\n $value =~ tr/%(..)/pack(\"c\", hex($1))/eg;\n if ($formdata{$key}) {\n $formdata{$key} .= \", $value\";\n }\n else {formdata{$key} = $value;}\n }\n }\n 1;\n</code></pre>\n\n<p>So when colours.html opens, I have a form with 3 input fields, where i want to send the names of 3 colours to colours.cgi. However, when I submit I get Error 500. </p>\n\n<p>I have mananged to get other CGI scripts running with the Abyss web server. I have configured the path to Strawberry Perl, and included associated extensions .pl, .cgi etc.</p>\n\n<p>I'm thinking it is something to do with the 'requires lib' part of the script. Is there anything I need to be aware of when using require with lib files in a CGI script, in terms of server setup etc. The Abyss log says </p>\n\n<pre><code>CGI: [C:\\strawberry\\perl\\bin\\perl.exe colours.cgi ] URI: /colours.cgi   Broken pipe\n</code></pre>\n\n<p>many thanks\nJohn</p>\n"}, {"tags": ["json", "multithreading", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1574283892, "post_id": 58963299, "comment_id": 104181775, "body": "Works for me with <a href=\"http://p3rl.org/JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a>, <a href=\"http://p3rl.org/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a>, and <a href=\"http://p3rl.org/Cpanel::JSON::XS\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS</a>. What version of Perl and of the JSON library do you use?"}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1574291107, "post_id": 58963299, "comment_id": 104184581, "body": "Perl 5.24.0 Module id = JSON::XS     INST_VERSION 3.02 Module id = JSON::PP     INST_VERSION 2.27400 Module id = Cpanel::JSON::XS     INST_VERSION 3.0213 I"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 6, "last_activity_date": 1574283987, "creation_date": 1574283987, "answer_id": 58963375, "question_id": 58963299, "link": "https://stackoverflow.com/questions/58963299/perl-threads-vs-json/58963375#58963375", "title": "Perl: threads vs JSON", "body": "<p>JSON uses JSON::XS if installed which is <a href=\"https://metacpan.org/pod/JSON::XS#(I-)THREADS\" rel=\"noreferrer\">not compatible with Perl threads</a> (please don't take the author's words at face value - threads are discouraged and difficult to use effectively, but not deprecated and there are no plans to remove them). The community-preferred fork Cpanel::JSON::XS <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS#cPanel-fork\" rel=\"noreferrer\">is thread safe</a> and will be used by <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"noreferrer\">JSON::MaybeXS</a> by default, which is a mostly drop-in replacement for JSON.</p>\n"}], "owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 58963375, "answer_count": 1, "score": 3, "last_activity_date": 1574283987, "creation_date": 1574283644, "last_edit_date": 1574283936, "question_id": 58963299, "link": "https://stackoverflow.com/questions/58963299/perl-threads-vs-json", "title": "Perl: threads vs JSON", "body": "<p>Below listed program fails with the following error:</p>\n\n<pre><code>JSON text must be an object or array (but found number, string, true, false or null, use allow_nonref to allow this) at json_test.pl line 10.\n</code></pre>\n\n<p>Works fine when I comment out thread startup/join, or when JSON is parsed before thread is run.\nMessage seems to be coming from JSON library, so I suppose something is wrong with it.\nAny ideas what's going on and how to fix it?</p>\n\n<pre><code># json_test.pl\nuse strict;\nuse warnings;\nuse threads;\nuse JSON;\nuse Data::Dumper;\n\nmy $t = threads-&gt;new(\\&amp;DoSomething);\nmy $str = '{\"category\":\"dummy\"}';\nmy $json = JSON-&gt;new();\nmy $data = $json-&gt;decode($str);\nprint Dumper($data);\n$t-&gt;join();\n\nsub DoSomething\n{\n    sleep 10;\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["perl", "parsing"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1574283365, "creation_date": 1574283365, "answer_id": 58963235, "question_id": 58963083, "link": "https://stackoverflow.com/questions/58963083/perl-parse-file-and-concatenate-strings-if-two-consecutive-lines-start-by-os/58963235#58963235", "title": "Perl: Parse file and concatenate strings if two consecutive lines start by OS", "body": "<pre><code>my @species;\nwhile (1) {\n   my $line = &lt;$IN&gt;;\n\n   if (defined($line)) {\n      chomp($line);\n      my @fields = split(' ', $_, 2);\n      if ($fields[0] eq 'OS') {\n         push @species, $fields[2];\n      }\n   }\n\n   if (@species) {\n      say join ' ', @species;\n      @species = ();\n   }\n\n   last if !defined($line);\n}\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 6594286, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207751248792790/picture?type=large", "display_name": "Emilio M&#225;rmol S&#225;nchez", "link": "https://stackoverflow.com/users/6594286/emilio-m%c3%a1rmol-s%c3%a1nchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574283365, "creation_date": 1574282670, "question_id": 58963083, "link": "https://stackoverflow.com/questions/58963083/perl-parse-file-and-concatenate-strings-if-two-consecutive-lines-start-by-os", "title": "Perl: Parse file and concatenate strings if two consecutive lines start by OS", "body": "<p>I have to parse a UniProt file looking like this:</p>\n\n<pre><code>ID   001R_FRG3G              Reviewed;         256 AA.\nAC   ERPL_ADA;\nOS   Frog virus 3 (isolate Goorha) (FV-3).\nID   002L_FRG3G              Reviewed;         320 AA.\nAC   Q6GZX3;\nOS   Frog virus 3 (isolate Goorha) (FV-3 / ADD / PERM /\nOS   strain HB).\n</code></pre>\n\n<p>and so on.</p>\n\n<p>I want to retrieve all OS identifiers (species), but the case is that some of them have unique OS, and some others have duplicated OS in consecutive lines, which I should concatenate.</p>\n\n<p>So that the output would be:</p>\n\n<pre><code>OS Frog virus 3 (isolate Goorha) (FV-3).\nOS Frog virus 3 (isolate Goorha) (FV-3 / ADD / PERM / strain HB).\n</code></pre>\n\n<p>For one OS occurrence I can select the line using regexp like:</p>\n\n<pre><code>while ($line=&lt;IN&gt;){\n\n    chomp $line; \n\n    if ($line=~ /^OS\\s{3}/ and $line=~ /\\.$/){\n\n               $os= $line;\n\n    }\n\n  }\n\n</code></pre>\n\n<p>But how to do when you have two consecutive OS? I have been trying adding a next but I could not reach a solution.</p>\n"}, {"tags": ["windows", "perl", "command-line-arguments", "wildcard"], "answers": [{"comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1574280180, "post_id": 58959612, "comment_id": 104180107, "body": "What is the plus operator for in <code>map +glob</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1574280920, "post_id": 58959612, "comment_id": 104180454, "body": "@Grant McLean, Unary-<code>+</code> is a a no-op. It&#39;s sometimes used to disambiguate in situations where the grammar is ambiguous (as explained <a href=\"https://stackoverflow.com/q/42100478/589924\">here</a>), but this is not the case here. It has absolutely no effect here, and it can safely be omitted (as seen in my answer)."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 2, "last_activity_date": 1574269038, "creation_date": 1574269038, "answer_id": 58959612, "question_id": 58959611, "link": "https://stackoverflow.com/questions/58959611/is-there-a-way-to-get-perl-to-support-wildcard-command-line-arguments-like-tx/58959612#58959612", "title": "Is there a way to get Perl to support wildcard command-line arguments like &quot;*.txt&quot; on Windows?", "body": "<p><a href=\"https://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> supports wildcard expansion, so use one can use it to alter <code>@ARGV</code> on the fly:</p>\n\n<pre><code>BEGIN { @ARGV = map +glob, @ARGV; }\n</code></pre>\n\n<p>Running inside the <a href=\"https://perldoc.perl.org/perlmod.html#BEGIN%2C-UNITCHECK%2C-CHECK%2C-INIT-and-END\" rel=\"nofollow noreferrer\"><code>BEGIN</code></a> block ensures that <code>@ARGV</code> is modified before the rest of the code is even parsed, let alone run:</p>\n\n<blockquote>\n  <p>A <code>BEGIN</code> code block is executed as soon as possible, that is, the moment it is completely defined, even before the rest of the containing file (or string) is parsed.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1574270861, "last_edit_date": 1574270861, "creation_date": 1574269971, "answer_id": 58959885, "question_id": 58959611, "link": "https://stackoverflow.com/questions/58959611/is-there-a-way-to-get-perl-to-support-wildcard-command-line-arguments-like-tx/58959885#58959885", "title": "Is there a way to get Perl to support wildcard command-line arguments like &quot;*.txt&quot; on Windows?", "body": "<p>Core module <a href=\"https://metacpan.org/pod/File::DosGlob\" rel=\"nofollow noreferrer\">File::DosGlob</a> provides the tools to expand wildcards in the manner a Windows user would expect, so it's just a question to use the <code>glob</code> provided by this module as follows:</p>\n\n<pre><code>use File::DosGlob qw( glob );\n\n@ARGV = map glob, @ARGV;\n</code></pre>\n\n<hr>\n\n<p>Note that doing this using the builtin <code>glob</code> would break paths that contain spaces, a relatively common occurrence on Windows. It would also mishandle <code>*.*</code>, which is expected to return all files.</p>\n\n<p>Note that it's best to expand the patterns after processing command-line options to avoid risking expanding the pattern into a command-line option.</p>\n\n<pre><code>use File::DosGlob qw( glob );\nuse Getopt::Long  qw( GetOptions );\n\nGetOptions(...)\n   or die_usage();\n\n@ARGV = map glob, @ARGV;\n</code></pre>\n\n<hr>\n\n<p>For a one-liner, you could use the following:</p>\n\n<pre><code>perl -MFile::DosGlob=glob -ne\"BEGIN { @ARGV = map glob, @ARGV } ...\" ...\n</code></pre>\n\n<p>The <code>BEGIN</code> ensures the code is run before the input-reading loop created by <code>-n</code> starts.</p>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 58959885, "answer_count": 2, "score": 3, "last_activity_date": 1574270861, "creation_date": 1574269038, "question_id": 58959611, "link": "https://stackoverflow.com/questions/58959611/is-there-a-way-to-get-perl-to-support-wildcard-command-line-arguments-like-tx", "title": "Is there a way to get Perl to support wildcard command-line arguments like &quot;*.txt&quot; on Windows?", "body": "<p>When passing wildcard arguments to a Perl script on *nix systems, like</p>\n\n<pre><code>$ perl script.pl *.txt\n</code></pre>\n\n<p>shells like Bash will expand all wildcard (<code>*</code>, <code>?</code>, <code>[]</code>) matches, consequently populating <code>@ARGV</code> with all matches.</p>\n\n<p>Windows CMD, however, doesn't perform such an expansion before running the Perl interpreter.</p>\n\n<p>Is it possible to get Perl to handle this expansion internally to mimic *nix shells?</p>\n"}, {"tags": ["c", "perl", "swig", "undefined-symbol"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1574280453, "post_id": 58958415, "comment_id": 104180241, "body": "Can you provide a link to the <code>BioMol</code> module? (I could not find it on metacpan.org)"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1574289536, "post_id": 58958415, "comment_id": 104183987, "body": "Rename definitely shouldn&#39;t do that. Seems more like a linker error, but I can&#39;t quite understand how."}, {"owner": {"reputation": 21, "user_id": 11739950, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-keuCN0YsXhg/AAAAAAAAAAI/AAAAAAAAR0A/5iO5JBG_Ydk/photo.jpg?sz=128", "display_name": "Hikmatyar Hasan", "link": "https://stackoverflow.com/users/11739950/hikmatyar-hasan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1574327641, "post_id": 58958415, "comment_id": 104196055, "body": "@H&#229;konH&#230;gland - The BioMol module was built in house a while back so it would not be available online."}], "owner": {"reputation": 21, "user_id": 11739950, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-keuCN0YsXhg/AAAAAAAAAAI/AAAAAAAAR0A/5iO5JBG_Ydk/photo.jpg?sz=128", "display_name": "Hikmatyar Hasan", "link": "https://stackoverflow.com/users/11739950/hikmatyar-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1574265119, "creation_date": 1574265119, "question_id": 58958415, "link": "https://stackoverflow.com/questions/58958415/swig-causing-symbol-lookup-issue-in-perl-package", "title": "SWIG causing `symbol lookup issue` in perl package", "body": "<p>I am trying to install an old perl module, called BioMol, where SWIG has been used to interface C with perl. It is currently installed on an 'old' machine and we want to install it on a newer machine. </p>\n\n<p>I am able to build the package and install it on the newer machine - producing a single library:  BioMol.so.</p>\n\n<p>When I try to run a sample script that uses a simple function from the perl module, I come across the following error:</p>\n\n<p><code>perl: symbol lookup error: /path-to-binary/BioMol.so: undefined symbol: new_fragmentlist</code></p>\n\n<p>By looking in the binary file (using nm), I found this:</p>\n\n<pre><code> 253                  U new_dihedrallist\n 254 0000000000019f60 T new_DihedralList\n 255                  U new_fragment\n 256 0000000000017ca0 T new_Fragment\n 257                  U new_fragmentlist\n 258 0000000000019000 T new_FragmentList\n</code></pre>\n\n<p>So it is true that new_fragmentlist is undefined (L#257), however new_FragmentList (L#258) seems like the one I should be using anyway. The binary file that is on the 'old' machine looks like this:</p>\n\n<pre><code>896 0000000000018d00 T new_Dihedral\n897 0000000000018c20 T new_DihedralList\n898 00000000000170b0 T new_Fragment\n899 0000000000016fd0 T new_FragmentList\n</code></pre>\n\n<p>I think this may be due to some rename directive in SWIG (see 5.4.7.2 in <a href=\"http://swig.org/Doc3.0/SWIGDocumentation.html#SWIG_rename_ignore\" rel=\"nofollow noreferrer\">http://swig.org/Doc3.0/SWIGDocumentation.html#SWIG_rename_ignore</a>). Maybe the reason I get the case issue in the new binary file, could be because of some new default option in the new SWIG (new version is 3.0.12 and the 'old machine' version is 1.3.40). Any help is much appreciated! </p>\n"}, {"tags": ["perl", "tclsh"], "comments": [{"owner": {"reputation": 1023, "user_id": 5414158, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/918756374872436/picture?type=large", "display_name": "Tobias Sch&#228;fer", "link": "https://stackoverflow.com/users/5414158/tobias-sch%c3%a4fer"}, "edited": false, "score": 1, "creation_date": 1574254115, "post_id": 58954631, "comment_id": 104165162, "body": "Please provide any information about your code and system."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1574280052, "post_id": 58954631, "comment_id": 104180051, "body": "See also <a href=\"https://stackoverflow.com/q/58556585/2173773\">Strawberry Perl v5.30.0 not able to install Tcl (Windows 10)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3529500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8ae03a165c9ec71cfdf8c121b68891?s=128&d=identicon&r=PG&f=1", "display_name": "user3529500", "link": "https://stackoverflow.com/users/3529500/user3529500"}, "edited": false, "score": 0, "creation_date": 1574421371, "post_id": 58959603, "comment_id": 104236756, "body": "make test rm -f blib/arch/auto/Tcl/Tcl.so gcc  -shared -O2 Tcl.o  -o blib/arch/auto/Tcl/Tcl.so    \\    -L/homes/naveenmathil/TCl_module/Tcl-1.27/tcl-core/linux-i68&zwnj;&#8203;6 -ltclstub8.4   \\  /usr/bin/ld: skipping incompatible /homes/naveenmathil/TCl_module/Tcl-1.27/tcl-core/linux-i686/&zwnj;&#8203;libtclstub8.4.a when searching for -ltclstub8.4 /usr/bin/ld: cannot find -ltclstub8.4 collect2: error: ld returned 1 exit status Makefile:479: recipe for target &#39;blib/arch/auto/Tcl/Tcl.so&#39; failed make: *** [blib/arch/auto/Tcl/Tcl.so] Error 1"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 3529500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8ae03a165c9ec71cfdf8c121b68891?s=128&d=identicon&r=PG&f=1", "display_name": "user3529500", "link": "https://stackoverflow.com/users/3529500/user3529500"}, "edited": false, "score": 0, "creation_date": 1574443021, "post_id": 58959603, "comment_id": 104248102, "body": "1) That&#39;s still trying to use 8.4. 2) This would be a different problem that should get a new question. I don&#39;t know the answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1574269386, "last_edit_date": 1574269386, "creation_date": 1574269017, "answer_id": 58959603, "question_id": 58954631, "link": "https://stackoverflow.com/questions/58954631/tcl-call-in-perl-script/58959603#58959603", "title": "Tcl call in perl script", "body": "\n\n<p>From looking at <a href=\"https://metacpan.org/source/VKON/Tcl-1.27/Makefile.PL\" rel=\"nofollow noreferrer\">the distro's <code>Makefile.PL</code></a>, I believe it uses a <code>tclshX.Y</code> found when the module is installed.</p>\n\n<p>If a newer version 8.5 of Tcl has been installed since you installed the module, you could try to reinstall the module.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>wget https://cpan.metacpan.org/authors/id/V/VK/VKON/Tcl-1.27.tar.gz\ntar xvzf Tcl-1.27.tar.gz\ncd Tcl-1.27\nperl Makefile.PL\nmake test\nmake install\n</code></pre>\n\n<p>If that isn't sufficient, this module's <code>Makefile.PL</code> accepts arguments that help locate the correct <code>tclsh</code>. As mentioned in <a href=\"https://metacpan.org/source/VKON/Tcl-1.27/README\" rel=\"nofollow noreferrer\">the distro's <code>README</code> file</a>, you can see the accepted options using the following:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl Makefile.PL --help\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3529500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8ae03a165c9ec71cfdf8c121b68891?s=128&d=identicon&r=PG&f=1", "display_name": "user3529500", "link": "https://stackoverflow.com/users/3529500/user3529500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574269386, "creation_date": 1574253742, "last_edit_date": 1574269265, "question_id": 58954631, "link": "https://stackoverflow.com/questions/58954631/tcl-call-in-perl-script", "title": "Tcl call in perl script", "body": "<p>I am executing a Perl script that makes use of <code>use Tcl;</code>. This currently invokes tcl8.4.</p>\n\n<p>When I check my lib path, tcl8.5 is also found. I want <code>use Tcl;</code> to use tcl8.5 instead of tcl8.4. Can any one help me please?</p>\n"}, {"tags": ["perl", "fetch"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574271797, "post_id": 58954499, "comment_id": 104175991, "body": "This queries one past the array boundary with <code>$lines[$_+1]</code> in the last round of iteration when <code>$_</code> is <code>$#lines</code> -- the last index in array.  That should draw a warning.  Do you not get a warning?  /// What you posted tests with regex against index in <code>next if...</code>, not an element, but I understand that that&#39;s a typo (then edit the post to correct it?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574271929, "post_id": 58954499, "comment_id": 104176056, "body": "Otherwise, you don&#39;t need nested <code>if</code> -- just <code>(if ... and ...)</code>"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574272043, "post_id": 58954499, "comment_id": 104176120, "body": "@zdim Yes I&#39;m getting a warning."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574273354, "post_id": 58954499, "comment_id": 104176800, "body": "Ah, OK; that information belongs to the question, that&#39;s important. So you need to be careful with those indices (always the case when you&#39;re down to indices!) ... but it looks like you need not go to the last one, since it gets checked when the loop is at the one before.  Then just <code>for my $i (0..$#lines-1)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1574259260, "post_id": 58955739, "comment_id": 104168340, "body": "I did a mistake. It should be <code>next if ($lines[$_] =~ &#47;^\\s+$&#47;);</code>."}], "tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 0, "last_activity_date": 1574257172, "creation_date": 1574257172, "answer_id": 58955739, "question_id": 58954499, "link": "https://stackoverflow.com/questions/58954499/perl-read-data-from-file-and-extract-certain-line-content/58955739#58955739", "title": "Perl read data from file and extract certain line content", "body": "<blockquote>\n  <p>The Empty lines which sepates each data contents not skiping using\n  next if (/^\\s+$/); statement.</p>\n</blockquote>\n\n<p>The regular expression <code>/^\\s+$/</code> will only match blank lines that have at least one white space character. </p>\n\n<p>You need <code>/^\\s*$/</code>. That will match blank lines that have zero or more white space characters.</p>\n"}, {"tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 1, "last_activity_date": 1574258617, "creation_date": 1574258617, "answer_id": 58956193, "question_id": 58954499, "link": "https://stackoverflow.com/questions/58954499/perl-read-data-from-file-and-extract-certain-line-content/58956193#58956193", "title": "Perl read data from file and extract certain line content", "body": "<p>Regarding the structure of the code, you can simplify it by matching both the <code>Element</code> line and the <code>active</code> line at the same time in a regular expression.</p>\n\n<pre><code>my @list;\n\n# read all the input data into $data\nlocal $/;\nmy $data = &lt;DATA&gt; ;\n\nwhile  ($data =~ /Element=(\\d+)\\nactive : yes/g)\n{\n    push @list, $1\n}\n\nprint Dumper(\\@list);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1574342082, "post_id": 58975904, "comment_id": 104204707, "body": "Very helpful suggestion @Dave."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1574341969, "creation_date": 1574341969, "answer_id": 58975904, "question_id": 58954499, "link": "https://stackoverflow.com/questions/58954499/perl-read-data-from-file-and-extract-certain-line-content/58975904#58975904", "title": "Perl read data from file and extract certain line content", "body": "<p>There's no right or wrong here, but this is what I'd do.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @list;\n$/ = '';\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  next unless /active : yes/;\n  if (/Element=(\\d+)/) {\n    push (@list, $1);\n  }\n}\nprint Dumper(\\@list);\n\n__DATA__\nData : Element=123456\nactive : yes\n\nData : Element=789101\nactive : yes\n\nData : Element=23456\nactive : no\n</code></pre>\n\n<p>The biggest difference is to use <code>$/ = ''</code> to put Perl into \"paragraph mode\", meaning that each time round the loop, you're dealing with an entire record (i.e. both lines together). This makes some of the logic somewhat easier.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1574341969, "creation_date": 1574253286, "question_id": 58954499, "link": "https://stackoverflow.com/questions/58954499/perl-read-data-from-file-and-extract-certain-line-content", "title": "Perl read data from file and extract certain line content", "body": "<p>I am extracting certain data from file. Script should fetch <code>Element</code> value from given data based on <code>active</code> status.\nIf the status is active I need to get corresponding Element value from previous line.</p>\n\n<p>My code is below and its working perfeclty fine.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @list;\nmy @lines = &lt;DATA&gt;;\nforeach (0 .. $#lines) {\n    chomp $lines[$_];\n    next if (/^\\s+$/);\n    if ($lines[$_+1] =~ /active : yes/){\n        if($lines[$_] =~ /Element=(\\w+)/){\n            push (@list, $1);\n        }\n    }\n}\nprint Dumper(\\@list);\n\n__DATA__\nData : Element=123456\nactive : yes\n\nData : Element=789101\nactive : yes\n\nData : Element=23456\nactive : no\n</code></pre>\n\n<p>Expected dumper output is:</p>\n\n<pre><code>$VAR1 = [\n          '123456',\n          '789101'\n        ];\n</code></pre>\n\n<ol>\n<li>I need experts suggestion is this right way to fetch the data?</li>\n<li>The <code>Empty</code> lines which sepates each data contents not skiping using <code>next if (/^\\s+$/);</code> statement.</li>\n</ol>\n"}, {"tags": ["perl", "dbix-class"], "owner": {"reputation": 357, "user_id": 430968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db7c6ecdbe97a1e844c88ecf587f61f?s=128&d=identicon&r=PG", "display_name": "j1n3l0", "link": "https://stackoverflow.com/users/430968/j1n3l0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574252754, "creation_date": 1574252754, "question_id": 58954341, "link": "https://stackoverflow.com/questions/58954341/how-to-implement-custom-perlprereqscannernotquitelite-parser", "title": "How to implement custom Perl::PrereqScanner::NotQuiteLite parser", "body": "<p>Tried to write a custom parser to find modules loaded via <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a> <code>load_components</code> as follows:</p>\n\n<pre><code># lib/DBIC.pm\npackage DBIC;\n\nuse 5.026;\nuse Perl::PrereqScanner::NotQuiteLite::Util;\n\nsub register {\n    return { use =&gt; { 'DBIx::Class::Core' =&gt; 'parse_dbic' } };\n}\n\nsub parse_dbic {\n    die 'We never reach this point';\n}\n\n1;\n</code></pre>\n\n<p>Tested it with:</p>\n\n<pre><code># t/dbic.t\nuse 5.026;\nuse Test2::V0 -target =&gt; 'DBIC';\nuse Perl::PrereqScanner::NotQuiteLite;\n\nmy $scanner = Perl::PrereqScanner::NotQuiteLite-&gt;new( parsers =&gt; [':bundled', '+DBIC'] );\nmy $string  = &lt;&lt;'EOF';\npackage My::Schema;\nuse base 'DBIx::Class::Core';\n__PACKAGE__-&gt;load_components('UUIDColumns');\nEOF\n\nsubtest 'DBIC custom parser' =&gt; sub {\n    is( $scanner-&gt;scan_string($string)-&gt;requires-&gt;as_string_hash,\n        {   'base'                     =&gt; 0,\n            'DBIx::Class::Core'        =&gt; 0,\n            'DBIx::Class::UUIDColumns' =&gt; 0,\n        },\n        'should find dependencies declared via \"load_components\"',\n    );\n};\n\ndone_testing;\n</code></pre>\n\n<p>Have looked through other parsers including:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/release/Perl-PrereqScanner-NotQuiteLite/source/lib/Perl/PrereqScanner/NotQuiteLite/Parser/Aliased.pm\" rel=\"nofollow noreferrer\">Aliased</a></li>\n<li><a href=\"https://metacpan.org/release/Perl-PrereqScanner-NotQuiteLite/source/lib/Perl/PrereqScanner/NotQuiteLite/Parser/ModuleRuntime.pm\" rel=\"nofollow noreferrer\">Module::Runtime</a></li>\n<li><a href=\"https://metacpan.org/release/Perl-PrereqScanner-NotQuiteLite/source/lib/Perl/PrereqScanner/NotQuiteLite/Parser/Moose.pm\" rel=\"nofollow noreferrer\">Moose</a></li>\n</ul>\n\n<p>From the implementations it seems the above implementation should cause <code>parse_dbic</code> to get called.</p>\n\n<p>Is there something missing that should trigger the function to get called?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1574250995, "post_id": 58953773, "comment_id": 104163352, "body": "This would be much easier with line numbers."}, {"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1574251185, "post_id": 58953773, "comment_id": 104163451, "body": "@simbabque i have updated the warnnings with line numbers , can you please help me with this ?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574253503, "post_id": 58954477, "comment_id": 104164822, "body": "im running over loop on the list contains list of element so i just want to check if the element equal to  mobileOriginatedCall or gprsCall i just want to do the delete , sorry im still new can you show how can i fix it"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574253581, "post_id": 58954477, "comment_id": 104164869, "body": "I don&#39;t know what you data looks like, so I can&#39;t do so definitively, but my answer does take a guess"}, {"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574254075, "post_id": 58954477, "comment_id": 104165141, "body": "i have updated my question with the picture , each file of these files have a different number of calls but they look like this"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574254731, "post_id": 58954477, "comment_id": 104165556, "body": "I don&#39;t see <code>callEventDetails</code> anywhere in there. Please provide the <i>relevant portions</i> of the output of Data::Dumper (or similar)"}, {"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574254974, "post_id": 58954477, "comment_id": 104165690, "body": "it&#39;s on the left top of the picture"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574255543, "post_id": 58954477, "comment_id": 104166068, "body": "How could I miss that. But still, please provide the relevant portions of the output of Data::Dumper (or similar). Don&#39;t make the people you are helping force you to guess. (From what I see in the image, I would guess that <code>foreach ( keys %{$key} )</code> would fail, but that&#39;s not what you are getting.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574255652, "post_id": 58954477, "comment_id": 104166120, "body": "<code>use Data::Dumper; warn(Dumper($struct-&gt;{&#39;transferBatch&#39;}-&gt;{&#39;callEventDetails&#39;}&zwnj;&#8203;));</code>"}, {"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574255907, "post_id": 58954477, "comment_id": 104166285, "body": "thank you for your effort, still same error, i will ask a new question with idea about this loop maybe i can solve this, i believe in :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574256019, "post_id": 58954477, "comment_id": 104166347, "body": "Use that code to provide a dump of your data so we can see what it looks like. Provide a relevant portion of that dump."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1574256799, "last_edit_date": 1574256799, "creation_date": 1574253200, "answer_id": 58954477, "question_id": 58953773, "link": "https://stackoverflow.com/questions/58953773/isnt-numeric-in-array-element-at-perl/58954477#58954477", "title": "isn&#39;t numeric in array element at perl", "body": "<p>You have</p>\n\n<pre><code>if ( $_ eq \"mobileOriginatedCall\" ) {\n   if ( exists $calleventtag-&gt;[$_]-&gt;...\n</code></pre>\n\n<p>Which is equivalent to</p>\n\n<pre><code>if ( $_ eq \"mobileOriginatedCall\" ) {\n   if ( exists $calleventtag-&gt;[\"mobileOriginatedCall\"]-&gt;...\n</code></pre>\n\n<p>Which means you are trying to get element number <code>mobileOriginatedCall</code> of the array referenced by <code>$calleventtag</code>, which makes no sense; <code>mobileOriginatedCall</code> isn't a number.</p>\n"}], "owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574257501, "creation_date": 1574250816, "last_edit_date": 1574257501, "question_id": 58953773, "link": "https://stackoverflow.com/questions/58953773/isnt-numeric-in-array-element-at-perl", "title": "isn&#39;t numeric in array element at perl", "body": "<p>im running script that handle list of files in same directory to do some of changes on these files  and then code working fine , but after i have added <code>use strict</code> and <code>use warnings</code> it returns an problem with :</p>\n\n<blockquote>\n  <p>Argument \"mobileOriginatedCall\" isn't numeric in array element at ./5th_edit.pl line 72.</p>\n  \n  <p>Argument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse TAP3::Tap3edit;\nuse Data::Dumper;\n\n\n\nprintDir(\".\");\nsub printDir{\nopendir(DIR, $_[0]);\nmy @files;\nmy @dirs;\n (@files) = readdir(DIR);\n foreach my $file (@files) {\n    if (-f $file and substr($file,0,2) eq \"CD\" ) {\n\n\n     my $tap3 = TAP3::Tap3edit-&gt;new;\n\n     my $tap_file = $file;\n$tap3-&gt;decode($tap_file)  or  die $tap3-&gt;error; \n\nmy $struct=$tap3-&gt;structure;\nmy $Tracker = $struct-&gt;{'transferBatch'};\nif (defined $Tracker){\n\n    my $rectag = $struct-&gt;{'transferBatch'}-&gt;{'networkInfo'}-&gt;{'recEntityInfo'};\n\n    map { $_-&gt;{'recEntityType'} = 4 if ( $_-&gt;{'recEntityType'} &gt; 6) } @$rectag;\n\n    my $calleventtag = $struct-&gt;{'transferBatch'}-&gt;{'callEventDetails'};\n\n    my @indexes = reverse (grep { exists $calleventtag-&gt;[$_]-&gt;{'supplServiceEvent'} } 0..$#$calleventtag);\n\n    my $sup_event_cnt = $#indexes;\n\n    foreach my $index (@indexes)\n    {\n    splice (@$calleventtag , $index,1);\n    }\n\n    my $total_events_cnt = $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'callEventDetailsCount'};\n    $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'callEventDetailsCount'} = $total_events_cnt - $sup_event_cnt-1;\n\n    if ( exists $struct-&gt;{'transferBatch'}-&gt;{'batchControlInfo'}-&gt;{'operatorSpecInformation'} )\n        {\n            delete $struct-&gt;{'transferBatch'}-&gt;{'batchControlInfo'}-&gt;{'operatorSpecInformation'};\n        }\n    if ( exists $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'operatorSpecInformation'} )\n        {\n            delete $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'operatorSpecInformation'};\n        }\n\nmy $key;\n\n# Will scan all the calls for MOC's and GPRS.\nforeach $key ( @{$struct-&gt;{'transferBatch'}-&gt;{'callEventDetails'} } ) {\n\n    foreach ( keys %{$key} ) {\n\n        if ( $_ eq \"mobileOriginatedCall\" )\n        {\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'destinationNetwork'} )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'destinationNetwork'};\n            }\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'} \n            &amp;&amp; $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'} !~ m/^96279/ \n            )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'};\n            }\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'camelServiceUsed'}  \n            &amp;&amp; $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'camelServiceUsed'}-&gt;{'camelServiceKey'} != 80\n            )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'camelServiceUsed'};\n            }\n\n        }\n\n        if ( $_ eq \"gprsCall\" )\n        {\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'gprsCall'}-&gt;{'gprsBasicCallInformation'}-&gt;{'gprsDestination'}-&gt;{'accessPointNameOI'} )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'gprsCall'}-&gt;{'gprsBasicCallInformation'}-&gt;{'gprsDestination'}-&gt;{'accessPointNameOI'};\n            }\n\n        }\n\n    }\n}\n\n\n    $tap3-&gt;encode(\"$tap_file\")  or  die $tap3-&gt;error; \n}    \n\n    }\n\n } \n\n closedir(DIR);\n}\n</code></pre>\n\n<p>i think the problem with this part :</p>\n\n<pre><code>if ( $_ eq \"mobileOriginatedCall\" )\n</code></pre>\n\n<p>and </p>\n\n<pre><code>if ( $_ eq \"gprsCall\" )\n</code></pre>\n\n<p>each file of these file looks like this but with different number of calls :</p>\n\n<p>trace stack :</p>\n\n<pre><code>Argument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"mobileOriginatedCall\" isn't numeric in array element at ./5th_edit.pl line 72.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nArgument \"gprsCall\" isn't numeric in array element at ./5th_edit.pl line 96.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\nUse of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1574247083, "post_id": 58951846, "comment_id": 104161149, "body": "The idea of strict and warnings is exactly that, it tells you where your issues are and exactly what lines... so add <code>my @files;</code> and <code>my @Dirs;</code> just after <code>use Data::Dumper;</code> to declare them and add <code>my</code> before <code>$file</code> in this line <code>foreach my $file (@files) {</code>"}, {"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1574247759, "post_id": 58951846, "comment_id": 104161550, "body": "thank you dear, stil same thing but now i can see where the issues exactly , it returns <code>Argument &quot;mobileOriginatedCall&quot; isn&#39;t numeric in array element at .&#47;5th_edit.pl line 72.</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1574255521, "post_id": 58951846, "comment_id": 104166055, "body": "That is not quite the same issue. That means there is issues with your array."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "edited": false, "score": 0, "creation_date": 1574246085, "post_id": 58952032, "comment_id": 104160540, "body": "i did that before but still same problem , i have replace only <code>local(@files);</code> <code>local(@dirs;</code> with my <code>@files;</code> and my <code>@dirs;</code>"}], "tags": [], "owner": {"reputation": 2347, "user_id": 1717259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f70451a8ea5b380bf1a28fe529b190cc?s=128&d=identicon&r=PG", "display_name": "user1717259", "link": "https://stackoverflow.com/users/1717259/user1717259"}, "is_accepted": true, "score": 1, "last_activity_date": 1574245463, "creation_date": 1574245463, "answer_id": 58952032, "question_id": 58951846, "link": "https://stackoverflow.com/questions/58951846/getting-list-error-with-using-strict-and-warnings/58952032#58952032", "title": "getting list error with using strict and warnings", "body": "<p>Initialise the <code>@files</code> and <code>@dirs</code> variables with <code>my</code> instead of <code>local</code>.</p>\n\n<pre><code>my @files;\nmy @dirs;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/129607/what-is-the-difference-between-my-and-local-in-perl\">What is the difference between my and local in Perl?</a></p>\n"}], "owner": {"reputation": 25, "user_id": 11294989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NhLf8t6WfCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcppqvJ-R-SgGMZhOUWF8bpNupEuA/mo/photo.jpg?sz=128", "display_name": "yong shi", "link": "https://stackoverflow.com/users/11294989/yong-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58952032, "answer_count": 1, "score": 0, "last_activity_date": 1574245463, "creation_date": 1574244983, "question_id": 58951846, "link": "https://stackoverflow.com/questions/58951846/getting-list-error-with-using-strict-and-warnings", "title": "getting list error with using strict and warnings", "body": "<p>running Perl script that run over the list of files in the same directory do list of changes and its worked for me fine, but currently, I have to use the script on <code>sun Solaris 10</code>, but I'm getting these warnings :</p>\n\n<blockquote>\n  <p>Use of uninitialized value in length at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_decode.pm line 58.</p>\n  \n  <p>Use of uninitialized value in concatenation (.) or string at /usr/perl5/5.8.4/lib/sun4-solaris-64int/Convert/ASN1/_encode.pm line 60.</p>\n</blockquote>\n\n<p>and after searching I have found something say <code>use strict</code> and <code>use warnings</code> but when i made the changes it returns the below errors :</p>\n\n<blockquote>\n  <p>Global symbol \"@files\" requires explicit package name at ./5th_edit.pl</p>\n  \n  <p>line 14. Global symbol \"@dirs\" requires explicit package name at\n  ./5th_edit.pl line 15.</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse TAP3::Tap3edit;\nuse Data::Dumper;\n\n\n\nprintDir(\".\");\nsub printDir{\nopendir(DIR, $_[0]);\nlocal(@files);\nlocal(@dirs);\n (@files) = readdir(DIR);\n foreach $file (@files) {\n    if (-f $file and substr($file,0,2) eq \"CD\" ) {\n\n\n     my $tap3 = TAP3::Tap3edit-&gt;new;\n\n     my $tap_file = $file;\n$tap3-&gt;decode($tap_file)  or  die $tap3-&gt;error; \n\nmy $struct=$tap3-&gt;structure;\nmy $Tracker = $struct-&gt;{'transferBatch'};\nif (defined $Tracker){\n\n    my $rectag = $struct-&gt;{'transferBatch'}-&gt;{'networkInfo'}-&gt;{'recEntityInfo'};\n\n    map { $_-&gt;{'recEntityType'} = 4 if ( $_-&gt;{'recEntityType'} &gt; 6) } @$rectag;\n\n    my $calleventtag = $struct-&gt;{'transferBatch'}-&gt;{'callEventDetails'};\n\n    my @indexes = reverse (grep { exists $calleventtag-&gt;[$_]-&gt;{'supplServiceEvent'} } 0..$#$calleventtag);\n\n    my $sup_event_cnt = $#indexes;\n\n    foreach my $index (@indexes)\n    {\n    splice (@$calleventtag , $index,1);\n    }\n\n    my $total_events_cnt = $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'callEventDetailsCount'};\n    $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'callEventDetailsCount'} = $total_events_cnt - $sup_event_cnt-1;\n\n    if ( exists $struct-&gt;{'transferBatch'}-&gt;{'batchControlInfo'}-&gt;{'operatorSpecInformation'} )\n        {\n            delete $struct-&gt;{'transferBatch'}-&gt;{'batchControlInfo'}-&gt;{'operatorSpecInformation'};\n        }\n    if ( exists $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'operatorSpecInformation'} )\n        {\n            delete $struct-&gt;{'transferBatch'}-&gt;{'auditControlInfo'}-&gt;{'operatorSpecInformation'};\n        }\n\nmy $key;\n\n# Will scan all the calls for MOC's and GPRS.\nforeach $key ( @{$struct-&gt;{'transferBatch'}-&gt;{'callEventDetails'} } ) {\n\n    foreach ( keys %{$key} ) {\n\n        if ( $_ eq \"mobileOriginatedCall\" )\n        {\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'destinationNetwork'} )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'destinationNetwork'};\n            }\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'} \n            &amp;&amp; $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'} !~ m/^1299/ \n            )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'};\n            }\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'camelServiceUsed'}  \n            &amp;&amp; $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'camelServiceUsed'}-&gt;{'camelServiceKey'} != 80\n            )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'mobileOriginatedCall'}-&gt;{'camelServiceUsed'};\n            }\n\n        }\n\n        if ( $_ eq \"gprsCall\" )\n        {\n\n            if ( exists $calleventtag-&gt;[$_]-&gt;{'gprsCall'}-&gt;{'gprsBasicCallInformation'}-&gt;{'gprsDestination'}-&gt;{'accessPointNameOI'} )\n            {\n                delete $calleventtag-&gt;[$_]-&gt;{'gprsCall'}-&gt;{'gprsBasicCallInformation'}-&gt;{'gprsDestination'}-&gt;{'accessPointNameOI'};\n            }\n\n        }\n\n    }\n}\n\n\n    $tap3-&gt;encode(\"$tap_file\")  or  die $tap3-&gt;error; \n}    \n\n    }\n\n } \n\n closedir(DIR);\n}\n</code></pre>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1574242685, "post_id": 58950841, "comment_id": 104158453, "body": "You implemented sed in perl? Like the old <a href=\"https://metacpan.org/pod/App::s2p\" rel=\"nofollow noreferrer\">psed</a>? Nice."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574244632, "post_id": 58950841, "comment_id": 104159611, "body": "(Assuming OP is <i>calling</i> <code>sed</code> <i>from</i> Perl.) There\u2019s no reason to use <code>sed</code> in Perl. Perl can do all <code>sed</code> can."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574244809, "post_id": 58950841, "comment_id": 104159717, "body": "As for the error it looks like (it would be nice to see the actual code, BTW) you\u2019re trying to use a variable within the <code>sed</code> command but the variable contains slashes, in which case see <a href=\"https://stackoverflow.com/questions/27787536/how-to-pass-a-variable-containing-slashes-to-sed\">How to pass a variable containing slashes to sed</a>. Or just use plain Perl."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574244936, "post_id": 58950841, "comment_id": 104159809, "body": "@Tal Your question is unclear. Are you <i>implementing</i> <code>sed</code> in Perl or are you <i>using</i> it? Please show some code, preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. And the title doesn\u2019t quite match the rest of the question."}, {"owner": {"reputation": 5, "user_id": 11782471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0134cf1f584d25dfb2c0ec7e7adbb349?s=128&d=identicon&r=PG&f=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11782471/tal"}, "edited": false, "score": 0, "creation_date": 1574248746, "post_id": 58950841, "comment_id": 104162065, "body": "Thank you for your reply, forget about perl for a sec, i&#39;m trying to run that command from shell itself: sed -i &#39;s/myname=&quot;jorge: and im 27 years old -X /tmp/wow/bla -g/myname=&quot;Dan: and im 27 years old /tmp/wow/bla -g/g&#39; /tmp/test.txt"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1574248956, "post_id": 58950841, "comment_id": 104162181, "body": "@Tal You\u2019re using slashes as delimiters for the <code>s</code> command but you\u2019ve got too many slashes. Once agian, see <a href=\"https://stackoverflow.com/questions/27787536/how-to-pass-a-variable-containing-slashes-to-sed\">How to pass a variable containing slashes to sed</a>."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1574249034, "post_id": 58950841, "comment_id": 104162227, "body": "@Tal Or just write it all in Perl. It\u2019ll be much easier."}, {"owner": {"reputation": 5, "user_id": 11782471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0134cf1f584d25dfb2c0ec7e7adbb349?s=128&d=identicon&r=PG&f=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11782471/tal"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574250738, "post_id": 58950841, "comment_id": 104163226, "body": "@Biffen I&#39;ve posted the example code"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574253536, "post_id": 58950841, "comment_id": 104164849, "body": "@Tal There\u2019s <i>never</i> a need to call <code>sed</code> (or <code>awk</code>) from Perl. Perl\u2019s text parsing and regex engine are two of its best features. As for putting a variable in a regex; <a href=\"https://perldoc.pl/functions/quotemeta\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a> is your friend."}, {"owner": {"reputation": 5, "user_id": 11782471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0134cf1f584d25dfb2c0ec7e7adbb349?s=128&d=identicon&r=PG&f=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11782471/tal"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574255715, "post_id": 58950841, "comment_id": 104166158, "body": "@Biffen i&#39;m in close env and not all modules / features are available for me. but its ok, i found the solution. thanks anyway :)"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1574255791, "post_id": 58950841, "comment_id": 104166205, "body": "@Tal <code>sed</code>-like line iteration and regexen are at the very core of the Perl language, no extra features or modules required."}], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 11782471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0134cf1f584d25dfb2c0ec7e7adbb349?s=128&d=identicon&r=PG&f=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11782471/tal"}, "is_accepted": true, "score": 0, "last_activity_date": 1574255853, "creation_date": 1574255853, "answer_id": 58955297, "question_id": 58950841, "link": "https://stackoverflow.com/questions/58950841/replacing-full-line-with-sed/58955297#58955297", "title": "Replacing full line with sed", "body": "<p>The solution i found for my problem is pretty simple:\njust had to put \\ before every / i had in my text.</p>\n"}], "owner": {"reputation": 5, "user_id": 11782471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0134cf1f584d25dfb2c0ec7e7adbb349?s=128&d=identicon&r=PG&f=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11782471/tal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58955297, "answer_count": 1, "score": -2, "last_activity_date": 1574255853, "creation_date": 1574241952, "last_edit_date": 1574250149, "question_id": 58950841, "link": "https://stackoverflow.com/questions/58950841/replacing-full-line-with-sed", "title": "Replacing full line with sed", "body": "<p>Im trying to use sed command in order to find an error in my text file and replace it with something else.</p>\n\n<p>like i said before sed works perfectly for me without using double quotes in the text, also this -> ~ doesnt work like you suggested, unless i used it wrong.\nThe Perl script</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nmy @array = (\n\"^OPTIONS.*\\-X\",\n\"^OPTIONS.*\\-x\"\n);\n\nmy $Replace_To = 'OPTIONS=\"-u hello:bye -p /var/run/myfile.pid -g\"'\nchomp $Replace_To;\nmy strCommand;\nmy $array;\n\nsub main\n{\n   my $hostname = `hostname -s`;\n   chomp $hostname;\n   foreach $array(@array)\n   {\n       my $execute = `awk '/$array/' /tmp/file.txt\n       if($execute)\n       {\n          chomp $execute;\n          $strCommand = `sed -i 's/$execute/$Replace_To/g' /tmp/file.txt`;\n       }\n   }\n\n}\n&amp;main();\n</code></pre>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574235032, "post_id": 58948686, "comment_id": 104154594, "body": "The <a href=\"https://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a> returns just names, not paths. So when you try to open <code>file.txt</code> there is no such thing -- you need to say <code>&quot;$dir&#47;file.txt&quot;</code>. Another way is to prepend that to the whole list, so <code>my @dir = map { &quot;$dir&#47;$_&quot; } readdir DIR;</code>  and now files in <code>@dir</code> have the correct path"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1574236000, "post_id": 58948686, "comment_id": 104155003, "body": "Hmm, if to follow your logic you try to read file.txt in each dir -- but not every file in the directory(-ies). Your description is not matching with logic of your code."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1574236090, "post_id": 58948686, "comment_id": 104155042, "body": "I am not sure if perl script is compulsory requirement for solving your task. Otherwise you could use find and grep to achieve same result <code>find &#47;some&#47;dir -exec grep [pattern] {} \\; -ls</code>. This command will search each and every file in directory and sub-directories."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1574273854, "post_id": 58948686, "comment_id": 104177054, "body": "@PolarBear Can do that, too, but then there&#39;s no need for <code>find</code> as <code>grep</code> has ways to specify what to search, and here it&#39;s trivial, <code>grep [options] PATTERN dir1&#47;dir2&#47;*</code> where <code>options</code> would decide how to present findings"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1574277533, "post_id": 58948686, "comment_id": 104178763, "body": "Just one note: not all versions of grep supported recursive search in sub-directories - find/grep worked for ages and never failed."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1575396788, "last_edit_date": 1592644375, "creation_date": 1574235883, "answer_id": 58949131, "question_id": 58948686, "link": "https://stackoverflow.com/questions/58948686/opening-a-directory-and-searching-for-a-pattern-in-files/58949131#58949131", "title": "Opening a directory and searching for a pattern in files", "body": "<p>The <a href=\"https://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a> returns just names (<code>file.txt</code>), not paths (not <code>dir1/dir2/path.txt</code>).</p>\n<p>So when the program tries to open <code>$item</code><sup>\u2020</sup> it turns out that there is no such a thing -- need to open <code>&quot;$dir/$item&quot;</code>. Or, prepend that to every entry in the filelist and then work away with correct paths</p>\n<pre><code>use warnings;\nuse strict;\n\nmy $dir = 'dir1/dir2';\n\nopendir (my $dh, $dir) or die $!;\nmy @entries = map { &quot;$dir/$_&quot; } readdir $dh;\nclosedir $dh;\n\nforeach my $item (@entries) {\n    next if not -f $item;\n    open(my $fh, &quot;&lt;&quot;, $item) or die &quot;Can't open &lt; $item: $!&quot;;\n\n    while(my $line = &lt;$fh&gt;) {\n        print $line if $line =~ /pattern/;\n    }\n    close $fh;\n}\n</code></pre>\n<p>Note that I skip entries which aren't regular files (<code>not -f</code>, see <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">filetest operators</a>), and use <a href=\"https://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">lexical filehandes instead of typeglobs</a> (<code>my $fh</code> instead of <code>FILE</code>).</p>\n<p>Another option for getting lists of entries is <a href=\"https://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a> (see <a href=\"https://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a>), which does return the path:</p>\n<pre><code>my @entries = glob $dir;  # dir1/dir2/file.txt  (etc)\n</code></pre>\n<p>But if you are indeed acquiring the whole filelist ahead, as opposed to reading and processing an item at a time, then you might as well filter it as needed right away, so</p>\n<pre><code>my @files = grep { -f } glob $dir;\n</code></pre>\n<p>where you now have only regular files.</p>\n<p>The whole list can be filtered also in the program above of course. Can do it in the <code>map</code> itself</p>\n<pre><code>opendir (my $dh, $dir) or die $!;\nmy @files = map { -f &quot;$dir/$_&quot; ? &quot;$dir/$_&quot; : () } readdir $dh;\nclosedir $dh;\n</code></pre>\n<p>Here <code>map</code> works as a filter as well by a  little trick: An empty list <code>()</code>, returned when an entry isn't a plain file, gets flattened in the returned list thus effectively disappearing, so this amounts to not returning anything in that case. Or, chain <code>grep</code> to <code>map</code> as usual</p>\n<pre><code>my @files = grep { -f } map { &quot;$dir/$_&quot; } readdir $dh;\n</code></pre>\n<p>This does make (yet) another pass over the list, but that is optimized and hardly ever a concern (unless we had <em>huge</em> filelists -- what poses problems in its own right -- and were doing this very often).</p>\n<hr />\n<p>I'd like to also mention that there are good modules for this, as well.</p>\n<p>An example with <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n<pre><code>use Path::Tiny;\n\nmy $it = path($dir)-&gt;iterator;\n\nwhile (my $entry = $it-&gt;()) { \n    # it omits . and ..\n}\n</code></pre>\n<p>This is a &quot;lazy&quot; iterator. See docs, and more so for the many other things that this module offers.</p>\n<hr />\n<p><sup>\u2020</sup> Instead of that <code>file.txt</code></p>\n"}], "owner": {"reputation": 59, "user_id": 12401841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbcce32d293e478b08a712d3f19f674?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/12401841/techie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58949131, "answer_count": 1, "score": 1, "last_activity_date": 1575396788, "creation_date": 1574233993, "last_edit_date": 1574309593, "question_id": 58948686, "link": "https://stackoverflow.com/questions/58948686/opening-a-directory-and-searching-for-a-pattern-in-files", "title": "Opening a directory and searching for a pattern in files", "body": "<p>My Perl script is supposed to open all the files in a directory and search for a pattern inside them and print the whole line containing the pattern.\nBelow is the code. The code is unable to open the file. </p>\n\n<pre><code>  my $dir = 'dir1/dir2';\n    opendir (DIR, $dir) or die $!;\n    my @dir = readdir DIR;\n    foreach my $item (@dir) {\n        open(FILE, \"&lt;\", \"file.txt\")\n        or die \"Can't open &lt; file.txt: $!\";\n        while($line= &lt;FILE&gt;) {\n        print \"$line\" if $line=~ /pattern/;\n    }\n    close FILE;\n    }\n    closedir DIR;\n</code></pre>\n\n<p>Please suggest some way to make it work.</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1574197163, "post_id": 58942695, "comment_id": 104143833, "body": "How do this relate to <code>sqlite</code>?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1574197395, "post_id": 58942695, "comment_id": 104143946, "body": "if the file can be treated as a table using sqlite3 im fine.. if not i can untag it"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1574198238, "post_id": 58942695, "comment_id": 104144284, "body": "I don&#39;t think that it&#39;s possible to process a file as a table with sqlite. For this, you would need to load the file in a database table, then use sql. It is probably more straightforward to do it with a unix tool."}], "answers": [{"comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 2, "creation_date": 1574199129, "post_id": 58942813, "comment_id": 104144667, "body": "This might fail if you have negative keys and <code>max=0</code>. It is better to test for <code>max==&quot;&quot;</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1574199298, "post_id": 58942813, "comment_id": 104144745, "body": "The clear, simple, foolproof way is to initialize max to the first value in the input."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574859440, "post_id": 58942813, "comment_id": 104379432, "body": "@anubhava for unsorted lines, it is not working correctly. just give <code>&lt;(tac file)</code> and you will see the difference."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574868548, "post_id": 58942813, "comment_id": 104384753, "body": "@stack0114106: I have just updated it. Please try it now."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 4, "last_activity_date": 1574868518, "last_edit_date": 1574868518, "creation_date": 1574197665, "answer_id": 58942813, "question_id": 58942695, "link": "https://stackoverflow.com/questions/58942695/find-nearest-key-match-with-input-value-greater-or-equal-to-key-and-records-unso/58942813#58942813", "title": "find nearest key match with input value greater or equal to key and records unsorted", "body": "<p>You may use this <code>awk</code>:</p>\n\n<pre><code>awk -F, -v n=85 'n&gt;=$1 &amp;&amp; (max==\"\" || $1&gt;max){max=$1; rec=$0} END{print rec}' file\n</code></pre>\n\n<p></p>\n\n<pre><code>75,Line8\n</code></pre>\n\n<p>Run this again with a different value:</p>\n\n<pre><code>awk -F, -v n=55 'n&gt;=$1 &amp;&amp; (max==\"\" || $1&gt;max){max=$1; rec=$0} END{print rec}' file\n</code></pre>\n\n<p></p>\n\n<pre><code>55,Line6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1586896640, "last_edit_date": 1586896640, "creation_date": 1574201180, "answer_id": 58943548, "question_id": 58942695, "link": "https://stackoverflow.com/questions/58942695/find-nearest-key-match-with-input-value-greater-or-equal-to-key-and-records-unso/58943548#58943548", "title": "find nearest key match with input value greater or equal to key and records unsorted", "body": "<p>With Perl</p>\n\n<pre><code>perl -0777 -wnE' $in = shift // 85;\n    %h = split /(?:\\s*,\\s*|\\s*\\n\\s*)/; \n    END { --$in while not exists $h{$in}; say \"$in, $h{$in}\" }\n' data.txt 57\n</code></pre>\n\n<p>Notes</p>\n\n<ul>\n<li><p>read the whole file into a string (\"slurp\"), by <code>-0777</code></p></li>\n<li><p>populate a hash with file data; I strip surrounding spaces in the process</p></li>\n<li><p>count down from input-value and check for such a key, until we get to one that exists</p></li>\n<li><p>input is presumed integer and being in range</p></li>\n</ul>\n\n<p>The nearest key is the first one that <code>exists</code> as input \"clicks\" down toward it an integer at a time. </p>\n\n<p>The invocation above (for <code>57</code>) prints the line: &nbsp; <code>55, Line6</code>.</p>\n\n<hr>\n\n<p>A version that <em>does</em> check the range of input and allows non-integer input</p>\n\n<pre><code>perl -MList::Util=min -0777 -wnE' $in = int shift // 85;\n    %h = split /(?:\\s*,\\s*|\\s*\\n\\s*)/; \n    die \"Input $in out of range\\n\" if $in &lt; min keys %h;\n    END { --$in while not exists $h{$in}; say \"$in, $h{$in}\" }\n' data.txt 57\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 1, "creation_date": 1574217188, "post_id": 58945726, "comment_id": 104149678, "body": "this may not work, if the <b>DATA</b> is not sorted.. pls check"}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 2, "last_activity_date": 1574216919, "creation_date": 1574216919, "answer_id": 58945726, "question_id": 58942695, "link": "https://stackoverflow.com/questions/58942695/find-nearest-key-match-with-input-value-greater-or-equal-to-key-and-records-unso/58945726#58945726", "title": "find nearest key match with input value greater or equal to key and records unsorted", "body": "<p>Following code comply with your requirement</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $target = shift\n    or die \"Please enter a value\";\n\nmy $line;\n\nwhile( &lt;DATA&gt; ) {\n    my @data = split ',';\n\n    last if $data[0] &gt; $target;\n\n    $line = $_;\n}\n\nprint $line;\n\n__DATA__\n10,Line1\n20,Line2\n30,Line3\n40,Line4\n50,Line5\n55,Line6\n70,Line7\n75,Line8\n90,Line9\n95,Line10\n99,Line11\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1574217737, "creation_date": 1574217737, "answer_id": 58945831, "question_id": 58942695, "link": "https://stackoverflow.com/questions/58942695/find-nearest-key-match-with-input-value-greater-or-equal-to-key-and-records-unso/58945831#58945831", "title": "find nearest key match with input value greater or equal to key and records unsorted", "body": "<p>Code for unsorted lines</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $target = shift\n    or die \"Please enter a value\";\n\nmy @lines = &lt;DATA&gt;;\nmy $line;\nmy %data;\n\nmap { my @array = split ',', $_; $data{$array[0]} = $_ } @lines;\n\nforeach my $key ( sort keys %data ) {\n    last if $key &gt; $target;\n\n    $line = $data{$key};\n}\n\nprint $line;\n\n__DATA__\n10,Line1\n20,Line2\n30,Line3\n40,Line4\n50,Line5\n55,Line6\n70,Line7\n75,Line8\n90,Line9\n95,Line10\n99,Line11\n</code></pre>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 58943548, "answer_count": 4, "score": 2, "last_activity_date": 1586896640, "creation_date": 1574197115, "last_edit_date": 1574240312, "question_id": 58942695, "link": "https://stackoverflow.com/questions/58942695/find-nearest-key-match-with-input-value-greater-or-equal-to-key-and-records-unso", "title": "find nearest key match with input value greater or equal to key and records unsorted", "body": "<p>I'm having the below input file and trying to find out the nearest key match with input value greater or equal to key. It works when the input file is sorted.</p>\n\n<p>Input file:</p>\n\n<pre><code>10,Line1\n20,Line2\n30,Line3\n40,Line4\n50,Line5\n55,Line6\n70,Line7\n75,Line8\n90,Line9\n95,Line10\n99,Line11\n</code></pre>\n\n<p>Code that I tried:</p>\n\n<pre><code>$ awk -F,  -v inp=85 ' NR==1 { dp=0 } {  dt=($1-inp); d=sqrt(dt*dt); if(d&lt;=dp &amp;&amp; inp &gt;= $1 ) { rec=$0 } dp=d } END { print rec } ' source.txt\n75,Line8\n\n$ awk -F,  -v inp=55 ' NR==1 { dp=0 } {  dt=($1-inp); d=sqrt(dt*dt); if(d&lt;=dp &amp;&amp; inp &gt;= $1 ) { rec=$0 } dp=d } END { print rec } ' source.txt\n55,Line6\n</code></pre>\n\n<p>It works fine when the source.txt is sorted on the key column i.e first. But it gives incorrect results when the file is not sorted</p>\n\n<pre><code>$ shuf source.txt | awk -F,  -v inp=85 ' NR==1 { dp=0 } {  dt=($1-inp); d=sqrt(dt*dt); if(d&lt;=dp &amp;&amp; inp &gt;= $1 ) { rec=$0 } dp=d } END { print rec } ' \n50,Line5   # Wrong\n</code></pre>\n\n<p>Can this be fixed for the unsorted file?. </p>\n\n<p>Solutions using any unix tools are welcome!</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574189540, "post_id": 58940953, "comment_id": 104140416, "body": "Well, you have extra double quotes on the line -- after <code>$5&quot;</code> the opening quote is closed, and the rest is syntax error."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574190308, "post_id": 58940953, "comment_id": 104140825, "body": "However, there&#39;s just a lot there that might need quoting... a good tool is <code>String::ShellQuote</code> (for <code>bash</code>, if this goes through <code>bash</code>) but you may need to do more work here, to rewrite that command so that you can quote things right.  One thing that helps is using <code>q()</code> (single quotes in operator form) so that Perl passes what&#39;s inside as it is, without interpolation"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 5, "creation_date": 1574190542, "post_id": 58940953, "comment_id": 104140919, "body": "Calling awk from perl can&#39;t be the right approach since perl can do anything that awk can do."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1574190631, "post_id": 58940953, "comment_id": 104140955, "body": "I absolutely support @EdMorton&#39;s comment  (my comments above assumed that for some reason you <b>must</b> keep your <code>awk</code> code... but that&#39;s probably just incorrect)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1574193153, "last_edit_date": 1574193153, "creation_date": 1574192306, "answer_id": 58941681, "question_id": 58940953, "link": "https://stackoverflow.com/questions/58940953/eval-gawk-inside-perl-how-to-handle-quotations/58941681#58941681", "title": "eval gawk inside Perl, how to handle quotations?", "body": "<p>Problem #1: You didn't properly construct your string literal. Specifically, <code>\\</code>, <code>$</code> and <code>\"</code> need to be escaped in double-quoted string literals when you wish for it to produce a string that contains those characters.</p>\n\n<p>Problem #2: You didn't properly construct your shell command. Specifically, you didn't properly convert the value of <code>$workdir</code> and <code>$input</code> into shell string literals. This is <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">dangerous</a>.</p>\n\n<p>Problem #3: You are missing a <code>-v</code> in your attempt to set <code>$workdir</code>.</p>\n\n<p>Fix:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $gawk_prog = &lt;&lt;'__END_OF_CMD__';\n   ...Put nicely formatted gawk code here...\n__END_OF_CMD__\n\nmy $shell_cmd = shell_quote(\n   \"gawk\",\n   -v =&gt; \"OFS=\\\\t\",\n   -v =&gt; \"workdir=$workdir\",\n   $gawk_prog,\n   $input,\n);\n\nmy $output = `$shell_cmd`;\ndie(\"gawk killed by signal \".( $? &amp; 0x7F ).\"\\n\") if $? &amp; 0x7F;\ndie(\"gawk exited with error \".( $? &gt;&gt; 8 ).\"\\n\") if $? &gt;&gt; 8;\n</code></pre>\n\n<p>Note: You can use <code>BEGIN { OFS = \"\\t\" }</code> in the program intead of using <code>-v</code> to set <code>OFS</code> to a constant value.</p>\n\n<p>Note: There's no point in using <code>eval</code> since <code>readpipe</code> (the backticks) doesn't throw exceptions.</p>\n\n<p>Note: Inside of single-quoted heredocs, nothing is special &mdash;not even backslash (<code>\\</code>)&mdash; except for the terminating token. This makes it very convenient to generate string that consist of code.</p>\n\n<p>Note: What you are asking <code>gawk</code> to do can just as easily be done in Perl.</p>\n"}], "owner": {"reputation": 31, "user_id": 4869039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bc672a71a4829f515dd989b643dc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/4869039/blaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574193153, "creation_date": 1574189365, "question_id": 58940953, "link": "https://stackoverflow.com/questions/58940953/eval-gawk-inside-perl-how-to-handle-quotations", "title": "eval gawk inside Perl, how to handle quotations?", "body": "<p>I have a file that looks like this:</p>\n\n<pre><code>NameA X Y 0 Add1\nNameA X Y 1 Add1\nNameB X Y 1 Add1\nNameB X Y 0 No\nNameB X Y 1 No\n</code></pre>\n\n<p>and I'm running it through gawk as follows:</p>\n\n<pre><code>gawk -v OFS='\\t' workdir=$workdir '{FS = OFS} {if ($0 ~ /Add1/) {print $2, $3, $4 + 1, $5\"_done\" &gt;&gt; workdir\"/\"$1; close($1)} else {print $2, $3, $4, $5\"_done\" &gt;&gt; workdir\"/\"$1; close($1)}}' input_file.txt\n</code></pre>\n\n<p>and the expected output is:</p>\n\n<pre><code>workdir/NameA:\nNameA X Y 1 Add1\nNameA X Y 2 Add1\n\nworkdir/NameB:\nNameB X Y 2 Add1\nNameB X Y 0 No\nNameB X Y 1 No\n</code></pre>\n\n<p>That works great,</p>\n\n<p>I want to now incorporate this into a workflow using perl, and have it written out in this block as:</p>\n\n<pre><code>else    {\n    my $gawk = \"gawk -v OFS='\\t' workdir=$workdir '{FS = OFS} {if ($0 ~ /Add1/) {print $2, $3, $4 + 1, $5\"_done\" &gt;&gt; workdir\"/\"$1; close($1)} else {print $2, $3, $4, $5\"_done\" &gt;&gt; workdir\"/\"$1; close($1)}}' $input\";\n    eval {\n       `$gawk`;\n      };\n\n</code></pre>\n\n<p>where <code>$workdir</code> and <code>$input</code> are defined earlier.</p>\n\n<p>I run into this error:</p>\n\n<p><code>String found where operator expected at xxxxx.pl line 511 near $5\"_done\"\"</code></p>\n\n<p>I think I'm messing up the quotes somewhere, but any input would be helpful!</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574179580, "post_id": 58938090, "comment_id": 104135025, "body": "A comes in 3rd column in the first line itself, so it should be counted.. in 4th line it is there in second column."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574179592, "post_id": 58938090, "comment_id": 104135040, "body": "I think you need to be a lot more explicit about the algorithm that gets us from your input file to your required output. Please talk us through it line by line."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574179687, "post_id": 58938090, "comment_id": 104135093, "body": "E comes in the third column untill the last line so 20 40 and 50 should be concatenated"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1574179953, "post_id": 58938090, "comment_id": 104135240, "body": "just remove <code>f[$3]++</code> and change <code>d[$3]=$1</code> with <code>d[$3]=d[$3]&quot;, &quot;$1</code> or more exactly <code>if (d[$3]) { d[$3]=d[$3] &quot;, &quot; $1 } else { d[$3]= $1}</code>"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1574180174, "post_id": 58938090, "comment_id": 104135366, "body": "@stack0114106, but<code>N</code> never came in 2nd column why its value in output? Also <code>I</code> is not there too, could you please elaborate it more?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574180499, "post_id": 58938090, "comment_id": 104135573, "body": "yes, but it is like a corner case and it should be captured till end of the file"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1574186985, "post_id": 58938090, "comment_id": 104139136, "body": "@NahuelFouilleul.. you are right!... pls add it as an answer"}], "answers": [{"comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574184061, "post_id": 58938521, "comment_id": 104137721, "body": "@stack0114106, Could you please explain more on which part it is not working? As per logic it looked to me working, kindly do let me know on same."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574184190, "post_id": 58938521, "comment_id": 104137783, "body": "&quot;I&quot; has appeared already in column 2 in line#3 so it should not be in output"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574184366, "post_id": 58938521, "comment_id": 104137863, "body": "@stack0114106, oh ok, I didn&#39;t know about that condition, could you please check now?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574185529, "post_id": 58938521, "comment_id": 104138407, "body": "it misses &quot;N&quot; now"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574185733, "post_id": 58938521, "comment_id": 104138513, "body": "@stack0114106, Sure fixed it, apologies for this, I thought <code>N</code> should be skipped honestly, cheers."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574186643, "post_id": 58938521, "comment_id": 104138963, "body": "it works for the given input.. but still needs refining i.e if I remove the last line, it prints <code>N 120</code> which is correct, but it also prints an additional blank line.."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574186785, "post_id": 58938521, "comment_id": 104139025, "body": "@stack0114106, ok, do you have blank lines in your Input_files?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 1, "creation_date": 1574186907, "post_id": 58938521, "comment_id": 104139092, "body": "my bad!!...here were some trailing blank lines.. never mind, it is not an issue.. thank you"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1574185701, "last_edit_date": 1574185701, "creation_date": 1574180244, "answer_id": 58938521, "question_id": 58938090, "link": "https://stackoverflow.com/questions/58938090/how-to-get-all-third-entries-till-they-appear-in-the-second-column/58938521#58938521", "title": "how to get all third entries, till they appear in the second column", "body": "<p>Could you please try following. Considering only condition print all of 3rd column values till its first occurrences in 2nd column(tested with samples  provided only)</p>\n\n<pre><code>awk '\nBEGIN{\n  FS=\",\"\n  OFS=\", \"\n}\n{\n  a[$3]=(a[$3]?a[$3] OFS:\"\")$1\n}\n{\n  ++c[$2]\n}\n($2 in a) &amp;&amp; c[$2]==1{\n  print $2 \" \" a[$2]\n}\nEND{\n for(i in a){\n     if(!(i in c)){\n         print i\" \" a[i]\n     }\n }\n}'  Input_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1574182561, "last_edit_date": 1574182561, "creation_date": 1574182197, "answer_id": 58939112, "question_id": 58938090, "link": "https://stackoverflow.com/questions/58938090/how-to-get-all-third-entries-till-they-appear-in-the-second-column/58939112#58939112", "title": "how to get all third entries, till they appear in the second column", "body": "<pre><code>perl -F, -lane'\n   ++$seen{ $F[1] };\n   push @{ $groups{ $F[2] } }, $F[0] if !$seen{ $F[2] };\n   END {\n      local $\" = \", \";\n      print \"$_ @{ $groups{$_} }\" for sort keys %groups;\n   }\n'\n</code></pre>\n\n<ul>\n<li><code>-F, -a</code> causes the input line to be split at commas into <code>@F</code>.</li>\n<li>We keep track of what values we've seen in the second column using <code>%seen</code>.</li>\n<li>If it's a value we haven't seen, add it to the <code>%groups</code>, a hash of arrays.</li>\n<li>And the end, print out the hash of arrays. <code>$\"</code> is used so the array elements are separated by <code>,\u2420</code> instead of the default <code>\u2420</code>.</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a></p>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1574193541, "creation_date": 1574193541, "answer_id": 58941941, "question_id": 58938090, "link": "https://stackoverflow.com/questions/58938090/how-to-get-all-third-entries-till-they-appear-in-the-second-column/58941941#58941941", "title": "how to get all third entries, till they appear in the second column", "body": "<p>another <code>awk</code></p>\n\n<pre><code>$ awk -F, '{a[$2]; k=$3} \n       !(k in a) {b[k]=b[k] s[k] $1; s[k]=FS} \n       END       {for(k in b) print k, b[k]}' file\n\nN 120,130\nA 10\nE 20,40,50\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 1, "last_activity_date": 1574201696, "creation_date": 1574201696, "answer_id": 58943654, "question_id": 58938090, "link": "https://stackoverflow.com/questions/58938090/how-to-get-all-third-entries-till-they-appear-in-the-second-column/58943654#58943654", "title": "how to get all third entries, till they appear in the second column", "body": "<p>Perl code for your data</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %seen;\nmy %data;\n\nwhile( &lt;DATA&gt; ) {\n    chomp;\n    my @a = split ',';\n\n    push @{$data{$a[2]}}, $a[0] if not $seen{$a[2]};\n\n    $seen{$a[1]} = 1;\n}\n\nwhile( my($k,$v) = each %data ) {\n    printf \"%s %s\\n\", $k, join \", \", @$v;\n}\n\n__DATA__\n10,W,A\n20,W,E\n30,I,W\n40,A,E\n50,P,E\n60,S,A\n70,A,P\n80,A,I\n100,A,S\n110,I,S\n120,A,N\n130,E,N\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 0, "last_activity_date": 1574229088, "creation_date": 1574229088, "answer_id": 58947578, "question_id": 58938090, "link": "https://stackoverflow.com/questions/58938090/how-to-get-all-third-entries-till-they-appear-in-the-second-column/58947578#58947578", "title": "how to get all third entries, till they appear in the second column", "body": "<p>Added as answer from comment as requested by OP.</p>\n\n<p>Just remove <code>f[$3]++</code> and change <code>d[$3]=$1</code> with <code>if (d[$3]) { d[$3]=d[$3] \", \" $1 } else { d[$3]= $1}</code>.</p>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1574229088, "creation_date": 1574179005, "last_edit_date": 1574179866, "question_id": 58938090, "link": "https://stackoverflow.com/questions/58938090/how-to-get-all-third-entries-till-they-appear-in-the-second-column", "title": "how to get all third entries, till they appear in the second column", "body": "<p>I have a file, that is sorted by first column. </p>\n\n<pre><code>10,W,A\n20,W,E\n30,I,W\n40,A,E\n50,P,E\n60,S,A\n70,A,P\n80,A,I\n100,A,S\n110,I,S\n120,A,N\n130,E,N\n</code></pre>\n\n<p>I need to get all the first columns together until when the third column doesn't appear in the second column. If my third column value has already appeared in second column, it should be ignored.</p>\n\n<p>My attempt to bring it using awk is as follows</p>\n\n<pre><code>$ awk -F\",\" ' { f[$2]++; if( !f[$3] ) { d[$3]=$1 }  f[$3]++ } END { for(i in d) print i, d[i] } ' cg.txt\nN 120\nA 10\nE 20\n</code></pre>\n\n<p>what I'm expecting is </p>\n\n<pre><code>N 120, 130\nA 10\nE 20, 40, 50\n</code></pre>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1574173298, "post_id": 58935999, "comment_id": 104131091, "body": "You are saying you want to modify the request, so you can use this 3rd party Controller correctly? Because it doesn&#39;t take Controller args. Is that correct?"}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1574175773, "post_id": 58935999, "comment_id": 104132618, "body": "Not exactly, but it more or less needs to work this way. It does take Controller args but it also takes a single query parameter. What I actually need to do is initiate a new request for this Controller; I will have both the arguments and the value for the query parameter and I need to get these to the Controller."}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 1, "creation_date": 1574176812, "post_id": 58937014, "comment_id": 104133276, "body": "Ah, wonderful, thank you. I did see that section of the docs, but it was not only confusing, but littered with warnings about how this is unsafe and will be deprecated, so I didn&#39;t look closely enough."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1574176980, "post_id": 58937014, "comment_id": 104133383, "body": "@user1235777 it&#39;s not a great solution, but it has to do I guess."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1574175840, "creation_date": 1574175840, "answer_id": 58937014, "question_id": 58935999, "link": "https://stackoverflow.com/questions/58935999/catalyst-passing-query-param-to-a-forward-call/58937014#58937014", "title": "Catalyst: Passing query param to a &quot;forward&quot; call", "body": "<p><code>$c-&gt;req-&gt;param('token')</code> is not an LValue, so you cannot <em>assign</em> to it. Instead, you need <a href=\"https://metacpan.org/pod/Catalyst::Request#$req-%3Eparam\" rel=\"nofollow noreferrer\">to pass in the value</a>.</p>\n\n<pre><code>$c-&gt;req-&gt;param('token', 1);\n</code></pre>\n\n<p>This behaviour is sort of documented:</p>\n\n<blockquote>\n  <p>Like CGI, and unlike earlier versions of Catalyst, passing multiple\n  arguments to this method, like this:</p>\n\n<pre><code> $c-&gt;request-&gt;param( 'foo', 'bar', 'gorch', 'quxx' );\n</code></pre>\n  \n  <p>will set the parameter foo to the multiple values bar, gorch and quxx.\n  Previously this would have added bar as another value to foo (creating\n  it if it didn't exist before), and quxx as another value for gorch.</p>\n</blockquote>\n\n<p>Consider this demo:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package MyApp::Controller::Root;\nuse base 'Catalyst::Controller';\n__PACKAGE__-&gt;config(namespace =&gt; '');\n\nsub default : Path {\n    my ($self, $c) = @_;\n    $c-&gt;req-&gt;param('foo', 1);\n    $c-&gt;forward('bar');\n}\n\nsub bar : Path('foo') {\n    my ($self, $c) = @_;\n\n    if ($c-&gt;req-&gt;param('foo')) {\n        $c-&gt;res-&gt;body(\"Secret param set!\\n\");\n    }\n    else {\n        $c-&gt;res-&gt;body(\"Hello World\\n\");\n    }\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58937014, "answer_count": 1, "score": 2, "last_activity_date": 1574175840, "creation_date": 1574172683, "question_id": 58935999, "link": "https://stackoverflow.com/questions/58935999/catalyst-passing-query-param-to-a-forward-call", "title": "Catalyst: Passing query param to a &quot;forward&quot; call", "body": "<p>I have a Catalyst Controller that responds to arguments in the usual way (<code>/endpoint/foo/bar</code>), but also takes a query parameter for a security token. How can I set the value of the parameter before I initiate a <code>forward</code> call to this Controller? It doesn't let me assign to <code>$c-&gt;req-&gt;param('token')</code>. </p>\n\n<p>(It's not possible to rewrite the controller to accept the token as an argument instead of a parameter.)</p>\n"}, {"tags": ["mysql", "perl", "base64"], "comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 2, "creation_date": 1574172673, "post_id": 58935700, "comment_id": 104130665, "body": "Seams/feels like Perl most likely gives back the RAW bytes out off <code>Digest-&gt;new( &#39;SHA-1&#39; )-&gt;add(&#39;test&#39;)</code> instead of giving hexadecimal digits which MySQL does with <code>SHA1()</code>..."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574172971, "post_id": 58935700, "comment_id": 104130862, "body": "Yup, that&#39;s it: <code>perl -MDigest -MMIME::Base64 -E &#39;say encode_base64(Digest-&gt;new(&quot;SHA-1&quot;)-&gt;add(&quot;test&quot;)-&gt;hexdigest)&#39;</code> -&gt; <code>YTk0YThmZTVjY2IxOWJhNjFjNGMwODczZDM5MWU5ODc5ODJmYmJkMw==</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1574173079, "post_id": 58935700, "comment_id": 104130936, "body": "@RaymondNijland You should make that an answer."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 1, "creation_date": 1574173377, "post_id": 58935700, "comment_id": 104131135, "body": "@RaymondNijland The right educated guess. You should get credit for it."}, {"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574173527, "post_id": 58935700, "comment_id": 104131222, "body": "<i>&quot;The right educated guess. You should get credit for it&quot;</i> @Shawn fair enough, but i find a valid answer needs to exist with code otherwise it is not really a answer.. Anyhow i can&#39;t program in Perl as i never done it most likely i could as Perl seams/feels comparable with PHP or Python for that matter .."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574173774, "post_id": 58935700, "comment_id": 104131359, "body": "Note that there&#39;s no point in base64-encoding hex. And if you have to choose between hex and base64, base64 will produce a shorter string"}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1574174592, "last_edit_date": 1574174592, "creation_date": 1574174199, "answer_id": 58936459, "question_id": 58935700, "link": "https://stackoverflow.com/questions/58935700/why-mysql-and-perl-base64-string-encoding-is-different/58936459#58936459", "title": "Why mysql and perl base64 string encoding is different?", "body": "<p>As pointed out by Raymond, you're looking at the results of two different calculations.</p>\n\n<p>Your perl prints out the base64 encoded SHA-1 digest of <code>\"test\"</code>. Your MySQL query takes the base16 encoded SHA-1 digest of <code>\"test\"</code> and then base64 encodes that string.</p>\n\n<p>Consider a perl one-liner that does the same two steps as the <code>SELECT</code>:</p>\n\n<pre><code>$ perl -MDigest -MMIME::Base64 -E 'say encode_base64(Digest-&gt;new(\"SHA-1\")-&gt;add(\"test\")-&gt;hexdigest)'\nYTk0YThmZTVjY2IxOWJhNjFjNGMwODczZDM5MWU5ODc5ODJmYmJkMw==\n</code></pre>\n\n<p>and the <a href=\"https://dbfiddle.uk/?rdbms=mysql_8.0&amp;fiddle=3e475f31c35e4bc8172192fc6f5c0893\" rel=\"nofollow noreferrer\">MySQL query</a></p>\n\n<pre><code>SELECT to_base64(unhex(sha1('test')))\n</code></pre>\n\n<p>which gives <code>qUqP5cyxm6YcTAhz05Hph5gvu9M=</code>, like your perl but with padding added.</p>\n\n<p>I'd stick with base16/hex versions, though, as that's what people are used to seeing for digests: <code>a94a8fe5ccb19ba61c4c0873d391e987982fbbd3</code> for the SHA-1 of <code>\"test\"</code>.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574174592, "creation_date": 1574171737, "question_id": 58935700, "link": "https://stackoverflow.com/questions/58935700/why-mysql-and-perl-base64-string-encoding-is-different", "title": "Why mysql and perl base64 string encoding is different?", "body": "<pre><code>#!/usr/bin/env perl\nuse Digest;\nsay Digest-&gt;new( 'SHA-1' )-&gt;add('test')-&gt;b64digest; # qUqP5cyxm6YcTAhz05Hph5gvu9M\n\n\nSELECT TO_BASE64(SHA1('test')); # YTk0YThmZTVjY2IxOWJhNjFjNGMwODczZDM5MWU5ODc5ODJmYmJkMw==\n</code></pre>\n\n<p>So same ASCII word <code>test</code> encoded as <code>qUqP5cyxm6YcTAhz05Hph5gvu9M</code> in Perl and as <code>YTk0YThmZTVjY2IxOWJhNjFjNGMwODczZDM5MWU5ODc5ODJmYmJkMw==</code> in MySQL.</p>\n\n<p>Why ?</p>\n"}, {"tags": ["regex", "perl", "awk"], "comments": [{"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 2, "creation_date": 1574172185, "post_id": 58935621, "comment_id": 104130382, "body": "Do you guarantee there will be at most one pair of double quotes in each field?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1574172876, "post_id": 58935621, "comment_id": 104130798, "body": "Could there be a pipe inside double quotes?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1574174576, "post_id": 58935621, "comment_id": 104131829, "body": "@choroba.. no pipe"}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 3, "last_activity_date": 1574173681, "last_edit_date": 1574173681, "creation_date": 1574171874, "answer_id": 58935733, "question_id": 58935621, "link": "https://stackoverflow.com/questions/58935621/fix-unbalanced-quotes-within-fields-not-across-records/58935733#58935733", "title": "Fix unbalanced quotes within fields not across records", "body": "<p>Could you please try following. considering that you need to edit only those fields which are NOT having starting <code>\"</code> and ending <code>\"</code> in their value(tested and written with provided samples only).</p>\n\n<pre><code>awk '\nBEGIN{\n  FS=OFS=\"|\"\n}\n{\n  for(i=1;i&lt;=NF;i++){\n    if($i!~/^\".*\"$/){\n      gsub(/\"/,\" \",$i)\n    }\n  }\n}\n1\n' Input_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1574241881, "last_edit_date": 1574241881, "creation_date": 1574172674, "answer_id": 58935995, "question_id": 58935621, "link": "https://stackoverflow.com/questions/58935621/fix-unbalanced-quotes-within-fields-not-across-records/58935995#58935995", "title": "Fix unbalanced quotes within fields not across records", "body": "<p>Assuming you only have one double quote in problematic fields and no <code>|</code> character inside fields:</p>\n\n<pre><code>$ perl -lpe 's/(^|\\|)[^\"|]*\\K\"(?=[^|\"]*(\\||$))/ /g' ip.txt\nname  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike  |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul  |29 |Tester      |3.6       |\nPeter |30 |Developer   |6.5       |\n</code></pre>\n\n<ul>\n<li><code>(^|\\|)</code> beginning of line or field separator <code>|</code></li>\n<li><code>[^\"|]*</code> zero or more of non-double quote and non <code>|</code> characters</li>\n<li><code>\\K</code> so that the characters so far isn't part of matched portion, something like lookbehind</li>\n<li><code>\"</code> match double quote character</li>\n<li><code>(?=[^|\"]*(\\||$))</code> to ensure that rest of the field doesn't have double quote character\n\n<ul>\n<li>can also use <code>(?=[^|\"]*\\|)</code> as all the fields in given sample ends with <code>|</code></li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": true, "score": 2, "last_activity_date": 1574176561, "creation_date": 1574176561, "answer_id": 58937255, "question_id": 58935621, "link": "https://stackoverflow.com/questions/58935621/fix-unbalanced-quotes-within-fields-not-across-records/58937255#58937255", "title": "Fix unbalanced quotes within fields not across records", "body": "<p>Determining whether (ASCII) double quotes are balanced is a matter of counting whether they are even in number. Balancing \u201c and \u201d requires <a href=\"https://perldoc.perl.org/perlre.html#(%3f_PARNO_)-(%3f-_PARNO_)-(%3f%2b_PARNO_)-(%3fR)-(%3f0)\" rel=\"nofollow noreferrer\">recursive subpatterns</a>.</p>\n\n<p>A design decision remains. In the case of unbalanced double quotes, which do you drop? If the first, then think of it as an odd quote followed by some even number of quotes. Translated from English to regex:</p>\n\n<pre><code>my $unbalanced_quote_first = qr/\n  ^ ([^\"]*)\n    \"\n    ( (?: [^\"]* \" [^\"]* \" [^\"]* )* )\n    ([^\"]*)\n  $\n/x;\n</code></pre>\n\n<p>The last is an even number of double quotes followed by the odd quote.</p>\n\n<pre><code>my $unbalanced_quote_last = qr/\n  ^ ([^\"]*)\n    ( (?: [^\"]* \" [^\"]* \" [^\"]* )* )\n    \"\n    ([^\"]*)\n  $\n/x;\n</code></pre>\n\n<p>Those who want to remove a quote somewhere in the middle are truly sick puppies, consideration of which ends here.</p>\n\n<p>In action, see the demo program below.</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $unbalanced_quote_first = qr/\n  ^ ([^\"]*)\n    \"\n    ( (?: [^\"]* \" [^\"]* \" [^\"]* )* )\n    ([^\"]*)\n  $\n/x;\n\n*ARGV = *DATA;  # for demo only\nwhile (&lt;&gt;) {\n  chomp;\n  my @fields = split /\\|/;\n  s/$unbalanced_quote_first/$1 $2$3/ for @fields;\n  print join(\"|\", @fields), \"|\\n\";\n}\n\n__DATA__\nname  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot\"x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike\" |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul\" |29 |Tester  \"   |3.6       |\nPeter |30 |Developer   |6.5       |\n\"Mike |42 |\"\"Quoter\"\"  |17.0      |\n\"Bill\"|25 |\"S\"kilz\"    |2\".5      |\nBetty |26 |\"Hi\" \"Bye\"  |3.2       |\n</code></pre>\n\n<p>Its output:</p>\n\n<pre>name  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike  |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul  |29 |Tester      |3.6       |\nPeter |30 |Developer   |6.5       |\n Mike |42 |\"\"Quoter\"\"  |17.0      |\n\"Bill\"|25 | S\"kilz\"    |2 .5      |\nBetty |26 |\"Hi\" \"Bye\"  |3.2       |</pre>\n\n<p>To replace the last double quote with a space, the substitution becomes</p>\n\n<pre><code>s/$unbalanced_quote_last/$1$2 $3/;\n</code></pre>\n\n<p>Note the movement of the space on the right-hand side. Its output is</p>\n\n<pre>name  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike  |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul  |29 |Tester      |3.6       |\nPeter |30 |Developer   |6.5       |\n Mike |42 |\"\"Quoter\"\"  |17.0      |\n\"Bill\"|25 |\"S\"kilz     |2 .5      |\nBetty |26 |\"Hi\" \"Bye\"  |3.2       |</pre>\n\n<p>The only difference between the two is on the result for Bill.</p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 1, "last_activity_date": 1574203510, "creation_date": 1574203510, "answer_id": 58943993, "question_id": 58935621, "link": "https://stackoverflow.com/questions/58935621/fix-unbalanced-quotes-within-fields-not-across-records/58943993#58943993", "title": "Fix unbalanced quotes within fields not across records", "body": "<p>Something like this should do it</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile( &lt;DATA&gt; ) {\n    chomp;\n    my @fields = split /\\|/;\n\n    map { my $c = () = $_ =~ /\"/g; s/\"/ / if $c == 1 } @fields;\n\n    print join('|', @fields) . \"|\\n\";   \n}\n\n__DATA__\nname  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot\"x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike\" |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul\" |29 |Tester  \"   |3.6       |\nPeter |30 |Developer   |6.5       |\n</code></pre>\n"}], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 58937255, "answer_count": 4, "score": 1, "last_activity_date": 1574241881, "creation_date": 1574171519, "last_edit_date": 1574176576, "question_id": 58935621, "link": "https://stackoverflow.com/questions/58935621/fix-unbalanced-quotes-within-fields-not-across-records", "title": "Fix unbalanced quotes within fields not across records", "body": "<p>I have a pipe separated file like below, where the double quotes are not balanced within fields, I need to fix them</p>\n\n<pre><code>name  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot\"x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike\" |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul\" |29 |Tester  \"   |3.6       |\nPeter |30 |Developer   |6.5       |\n</code></pre>\n\n<p>Required output:</p>\n\n<pre><code>name  |age|role        |experience|\nJohn  |25 |Developer   |2.56      |\nScot x|30 |Tester      |5.2       |\nJim   |28 |DBA         |3.0       |\nMike  |35 |\"Consultant\"|10.0      |\nDaniel|26 |Developer   |3.2       |\nPaul  |29 |Tester      |3.6       |\nPeter |30 |Developer   |6.5       |\n</code></pre>\n\n<p>I tried below command, but it is not giving expected results..</p>\n\n<pre><code>perl -ne ' { while(/\\x22/g) {$c++} ; if($c%2!=0) { s/\\x22//g ; print} else { print } ; $c=0 } ' file\n</code></pre>\n"}, {"tags": ["java", "python", "bash", "perl", "cmd"], "comments": [{"owner": {"reputation": 20365, "user_id": 1759845, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/RUTxR.jpg?s=128&g=1", "display_name": "BackSlash", "link": "https://stackoverflow.com/users/1759845/backslash"}, "edited": false, "score": 3, "creation_date": 1574153148, "post_id": 58929824, "comment_id": 104119630, "body": "What have you tried so far? Why didn&#39;t it work?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574153535, "post_id": 58929824, "comment_id": 104119817, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 11918, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1574153635, "post_id": 58929824, "comment_id": 104119869, "body": "Are you asking to rename the file - removing all charters between &#39;~&#39; and the &#39;.&#39; (not including the &#39;.&#39;) ?"}, {"owner": {"reputation": 11918, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 1, "creation_date": 1574153686, "post_id": 58929824, "comment_id": 104119890, "body": "Also, question is tagged &#39;perl&#39;, &#39;java&#39;, &#39;python&#39; and &#39;bash&#39; - what kind of solution you are looking for ?"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1574165823, "post_id": 58929824, "comment_id": 104126760, "body": "Well, you have tag <b>bash</b> in  bash you can use sub-string removal - it would be easier and will not require external tool. <a href=\"https://www.tldp.org/LDP/abs/html/string-manipulation.html\" rel=\"nofollow noreferrer\">tldp.org/LDP/abs/html/string-manipulation.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 8932643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/27WOL.jpg?s=128&g=1", "display_name": "Quadrivics", "link": "https://stackoverflow.com/users/8932643/quadrivics"}, "is_accepted": false, "score": 0, "last_activity_date": 1574671031, "last_edit_date": 1574671031, "creation_date": 1574153614, "answer_id": 58929993, "question_id": 58929824, "link": "https://stackoverflow.com/questions/58929824/removing-part-of-character-of-filename/58929993#58929993", "title": "Removing part of character of filename", "body": "<p>I would use <code>indexOf()</code> method to locate the <code>~</code> sign and use the <code>substring()</code> method to either cut out the part before the <code>~</code> or replace the part after the <code>~</code> with nothing.</p>\n\n<p>Then I would rename the file or create a new file with the correct name and copy the contents of the old file to the new file.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574156577, "post_id": 58930023, "comment_id": 104121377, "body": "I receive an error  File &quot;C:\\Users\\NN\\Desktop\\Split\\split.py&quot;, line 8     path = &#39;C:\\Users\\NN\\Desktop\\Split\\\\&#39;           ^ SyntaxError: (unicode error) &#39;unicodeescape&#39; codec can&#39;t decode bytes in position 2-3: truncated \\UXXXXXXXX escape"}, {"owner": {"reputation": 450, "user_id": 12342310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubMTx.jpg?s=128&g=1", "display_name": "Jasper Nichol M Fabella", "link": "https://stackoverflow.com/users/12342310/jasper-nichol-m-fabella"}, "reply_to_user": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574157285, "post_id": 58930023, "comment_id": 104121810, "body": "let me edit it, maybe because it reads  pdf file with no &#39;~&#39; characters in it"}, {"owner": {"reputation": 450, "user_id": 12342310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubMTx.jpg?s=128&g=1", "display_name": "Jasper Nichol M Fabella", "link": "https://stackoverflow.com/users/12342310/jasper-nichol-m-fabella"}, "reply_to_user": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574157366, "post_id": 58930023, "comment_id": 104121852, "body": "try the code again"}, {"owner": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574158535, "post_id": 58930023, "comment_id": 104122511, "body": "I try again,  File &quot;C:\\Users\\NN\\Desktop\\Split\\split.py&quot;, line 9     path = &#39;C:\\Users\\NN\\Desktop\\Split&#39;           ^ SyntaxError: (unicode error) &#39;unicodeescape&#39; codec can&#39;t decode bytes in position 2-3: truncated \\UXXXXXXXX escape"}, {"owner": {"reputation": 450, "user_id": 12342310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubMTx.jpg?s=128&g=1", "display_name": "Jasper Nichol M Fabella", "link": "https://stackoverflow.com/users/12342310/jasper-nichol-m-fabella"}, "reply_to_user": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574159535, "post_id": 58930023, "comment_id": 104123130, "body": "have you used double backslash on your path? C:\\\\Users\\\\NN\\\\Desktop\\\\Split"}], "tags": [], "owner": {"reputation": 450, "user_id": 12342310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubMTx.jpg?s=128&g=1", "display_name": "Jasper Nichol M Fabella", "link": "https://stackoverflow.com/users/12342310/jasper-nichol-m-fabella"}, "is_accepted": true, "score": 1, "last_activity_date": 1574157345, "last_edit_date": 1574157345, "creation_date": 1574153691, "answer_id": 58930023, "question_id": 58929824, "link": "https://stackoverflow.com/questions/58929824/removing-part-of-character-of-filename/58930023#58930023", "title": "Removing part of character of filename", "body": "<p>this is my approach change the path on what directory you want. </p>\n\n<pre><code>import os\nimport glob\n\npath = 'c:\\\\rename'\n\nfiles = [f for f in glob.glob(path + \"**/*.pdf\", recursive=True)]\n\nfor f in files:\n    try:\n        new = f.split('~')[0].replace(path,'').strip()\n        os.rename(r'{}'.format(f), r'{}\\{}.pdf'.format(path,new))\n    except:\n        print('cannot be renamed')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574158860, "post_id": 58930096, "comment_id": 104122725, "body": "Please, how you defined DATA ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574161376, "post_id": 58930096, "comment_id": 104124292, "body": "@Henri2: The <code>DATA</code> filehandle is just a quick hack that can be used to demonstrate a solution as I&#39;ve done here. It returns the data that can be found following the <code>__DATA__</code> marker at the bottom of the Perl code. Obviously, you would read in your data using whatever mechanism is appropriate."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1574153922, "creation_date": 1574153922, "answer_id": 58930096, "question_id": 58929824, "link": "https://stackoverflow.com/questions/58929824/removing-part-of-character-of-filename/58930096#58930096", "title": "Removing part of character of filename", "body": "<p>So you want to remove a tilde ('~') followed by 'DEL', another tilde and a sequence of one or more digits.</p>\n\n<p>In Perl, that would be:</p>\n\n<pre><code>s/~DEL~\\d+//;\n</code></pre>\n\n<p>Putting that into a complete test program:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n  s/~DEL~\\d+//;\n  print;\n}\n\n__DATA__\nKM_003__Rheihe 4~DEL~389948.pdf\nKM_004__Reite 2 und Reite 3~DEL~391098.pdf\nKM_008__Grundriss~DEL~391042.pdf\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>KM_003__Rheihe 4.pdf\nKM_004__Reite 2 und Reite 3.pdf\nKM_008__Grundriss.pdf\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574157344, "post_id": 58930097, "comment_id": 104121842, "body": "how can defined the filename, i have more than 200000 files"}, {"owner": {"reputation": 578, "user_id": 12379094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMjm2.jpg?s=128&g=1", "display_name": "Vinod Sawant", "link": "https://stackoverflow.com/users/12379094/vinod-sawant"}, "reply_to_user": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "edited": false, "score": 0, "creation_date": 1574164107, "post_id": 58930097, "comment_id": 104125794, "body": "I have edited the answer which will get names of all files and rename them."}], "tags": [], "owner": {"reputation": 578, "user_id": 12379094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMjm2.jpg?s=128&g=1", "display_name": "Vinod Sawant", "link": "https://stackoverflow.com/users/12379094/vinod-sawant"}, "is_accepted": false, "score": 0, "last_activity_date": 1574164073, "last_edit_date": 1574164073, "creation_date": 1574153927, "answer_id": 58930097, "question_id": 58929824, "link": "https://stackoverflow.com/questions/58929824/removing-part-of-character-of-filename/58930097#58930097", "title": "Removing part of character of filename", "body": "<p>You can use this code directly now,</p>\n\n<pre><code>import re\nimport os\nfilenames = os.listdir(r'C:\\Users\\Asus\\Desktop\\\\')\nfor filename in filenames:\n    os.rename(r'C:\\Users\\Asus\\Desktop\\\\'+ filename,r'C:\\Users\\Asus\\Desktop\\\\'+ re.findall('([A-Za-z0-9_ ]*)~',filename)[0] +'.pdf')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11044787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dc0100b7fd931af35b1f878d08e457?s=128&d=identicon&r=PG&f=1", "display_name": "Henri2", "link": "https://stackoverflow.com/users/11044787/henri2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1574154026, "accepted_answer_id": 58930023, "answer_count": 4, "score": -1, "last_activity_date": 1574671031, "creation_date": 1574153070, "last_edit_date": 1574153483, "question_id": 58929824, "link": "https://stackoverflow.com/questions/58929824/removing-part-of-character-of-filename", "closed_reason": "Needs details or clarity", "title": "Removing part of character of filename", "body": "<p>I am trying to remove part of a filename after a specific character.</p>\n\n<blockquote>\n  <p>Current file names:</p>\n</blockquote>\n\n<pre><code>KM_003__Rheihe 4~DEL~389948.pdf\nKM_004__Reite 2 und Reite 3~DEL~391098.pdf\nKM_008__Grundriss~DEL~391042.pdf\n</code></pre>\n\n<blockquote>\n  <p>What I want it to be;</p>\n</blockquote>\n\n<pre><code>KM_003__Rheihe 4.pdf\nKM_004__Reite 2 und Reite 3.pdf\nKM_008__Grundriss.pdf\n</code></pre>\n\n<p>The files are located in C:\\users\\%username%\\rename</p>\n\n<p>Any help/pointers would greatly be appreciated</p>\n"}, {"tags": ["perl", "tokenize"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1574149879, "post_id": 58927770, "comment_id": 104118118, "body": "According to the <a href=\"https://metacpan.org/pod/PPI::Token::HereDoc\" rel=\"nofollow noreferrer\">documentation</a> the content of the here-doc is made available with the <code>heredoc</code> method"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 3, "last_activity_date": 1574150133, "creation_date": 1574150133, "answer_id": 58929083, "question_id": 58927770, "link": "https://stackoverflow.com/questions/58927770/incorrect-tokenizing-of-perls-heredoc-by-ppi/58929083#58929083", "title": "Incorrect tokenizing of perl&#39;s heredoc by PPI", "body": "<p>According to the <a href=\"https://metacpan.org/pod/PPI::Token::HereDoc\" rel=\"nofollow noreferrer\">documentation</a> the content of the here-doc is made available with the <code>heredoc</code> method:</p>\n\n<pre><code>my $Document = PPI::Document-&gt;new($file_name);\nmy @heredoc = $Document-&gt;find_first('PPI::Token::HereDoc')-&gt;heredoc;\nsay join \"\", @heredoc;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Dear $name,\n\nthis is a message I plan to send to you.\n\nregards\n  the Perl Maven\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 8086742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9181cdb57a56b66f5e61268daf58603e?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit", "link": "https://stackoverflow.com/users/8086742/sumit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "accepted_answer_id": 58929083, "answer_count": 1, "score": 2, "last_activity_date": 1574150133, "creation_date": 1574144375, "last_edit_date": 1592644375, "question_id": 58927770, "link": "https://stackoverflow.com/questions/58927770/incorrect-tokenizing-of-perls-heredoc-by-ppi", "title": "Incorrect tokenizing of perl&#39;s heredoc by PPI", "body": "<p>I am using <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\">PPI</a> in-order to tokenize a perl file. However the heredoc doesn't seem to be tokenized correctly. I am using the below code to tokenize the file:</p>\n<pre><code>my $file_name = shift @ARGV;\n\nuse PPI;\nuse PPI::Dumper;\n\nmy $Document = PPI::Document-&gt;new($file_name);\n\nmy $Dumper = PPI::Dumper-&gt;new($Document);\n\n$Dumper-&gt;print;\n\n__END__\n\n</code></pre>\n<p>Below is the perl file getting tokenized:</p>\n<pre><code>my $name = 'Foo';\n \nmy $message = &lt;&lt;'END_MESSAGE';\nDear $name,\n \nthis is a message I plan to send to you.\n \nregards\n  the Perl Maven\nEND_MESSAGE\n \nprint $message;\n\n</code></pre>\n<p>I get the following output:</p>\n<pre><code>PPI::Document\n  PPI::Statement::Variable\n    PPI::Token::Word    'my'\n    PPI::Token::Whitespace      ' '\n    PPI::Token::Symbol      '$name'\n    PPI::Token::Whitespace      ' '\n    PPI::Token::Operator    '='\n    PPI::Token::Whitespace      ' '\n    PPI::Token::Quote::Single   ''Foo''\n    PPI::Token::Structure   ';'\n  PPI::Token::Whitespace    '\\n'\n  PPI::Token::Whitespace    ' \\n'\n  PPI::Statement::Variable\n    PPI::Token::Word    'my'\n    PPI::Token::Whitespace      ' '\n    PPI::Token::Symbol      '$message'\n    PPI::Token::Whitespace      ' '\n    PPI::Token::Operator    '='\n    PPI::Token::Whitespace      ' '\n    PPI::Token::HereDoc     '&lt;&lt;'END_MESSAGE''\n    PPI::Token::Structure   ';'\n  PPI::Token::Whitespace    '\\n'\n  PPI::Token::Whitespace    ' \\n'\n  PPI::Statement\n    PPI::Token::Word    'print'\n    PPI::Token::Whitespace      ' '\n    PPI::Token::Symbol      '$message'\n    PPI::Token::Structure   ';'\n  PPI::Token::Whitespace    '\\n'\n\n</code></pre>\n<p>Is there any way so that the entire heredoc's value can be obtained ?</p>\n"}, {"tags": ["mysql", "sql", "perl", "cgi"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574129259, "post_id": 58925106, "comment_id": 104112422, "body": "<code>if ($temp2 =&gt; $temp) {</code> That doesn&#39;t look quite right."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 6429072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gh4b0.png?s=128&g=1", "display_name": "Ed Bangga", "link": "https://stackoverflow.com/users/6429072/ed-bangga"}, "is_accepted": false, "score": 1, "last_activity_date": 1574125502, "creation_date": 1574125502, "answer_id": 58925225, "question_id": 58925106, "link": "https://stackoverflow.com/questions/58925106/how-to-select-users-with-most-votes-from-a-database/58925225#58925225", "title": "How to select users with most votes, from a database?", "body": "<p>use <code>subquery</code> then apply <code>order by</code>, to limit the result by 2 add <code>limit 2</code>.</p>\n\n<pre><code>select t1.voto, t1.ct as total from (\n    SELECT voto, count(1) ct FROM votos  \n    WHERE mes = 12 \n    GROUP BY voto\n    HAVING COUNT(1) &gt; 1) t1 \norder by t1.total desc limit 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "edited": false, "score": 0, "creation_date": 1574179821, "post_id": 58925465, "comment_id": 104135174, "body": "Thanks a lot for your help friend"}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": true, "score": 2, "last_activity_date": 1574155337, "last_edit_date": 1574155337, "creation_date": 1574127948, "answer_id": 58925465, "question_id": 58925106, "link": "https://stackoverflow.com/questions/58925106/how-to-select-users-with-most-votes-from-a-database/58925465#58925465", "title": "How to select users with most votes, from a database?", "body": "<p>You can return everyone who has the highest number of votes (and how many votes) with:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>select voto, count(*) as total from votos\n    where mes = 12\n    group by voto -- I assume \"vote\" in your question was typo\n    having total = (\n        select max(ct) from (\n            select voto,count(*) as ct from votos group by voto\n        )\n    )\n    and total &gt; 0 -- from your original but not sure it can fail\n;\n</code></pre>\n\n<p>You may also be able to use a <code>rank()</code> function.</p>\n\n<hr>\n\n<p>Without modifying your SQL, you could change the perl to something like:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># ...\n\n# initialisation shouldn't be inside while loop\nmy $winner = \"\";\nmy $temp2  = \"\";\n\nwhile ($info = $connection-&gt;fetchrow_hashref()) {\n    my $nombre = $info-&gt;{voto};\n    my $totalVotos = $info-&gt;{total};\n\n    if ($temp2 &lt; $totalVotos) { # your original \"=&gt;\" seems wrong\n        $temp2 = $totalVotos;\n        @winner = $nombre;\n    elsif ($temp2 == $totalVotos) {\n        push @winner, $nombre;\n    }\n}\n\n# postprocessing shouldn't be inside while loop\n$winner = join(\", \", @winner); # or whatever\nprint \"&lt;p&gt;&lt;strong&gt;Winner: &lt;/strong&gt; $winner &lt;/p&gt; \"; \nprint \"&lt;hr&gt;\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1574128483, "post_id": 58925499, "comment_id": 104112289, "body": "Should this work with sqlite? It has rank() but I couldn&#39;t figure out valid syntax."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 1, "creation_date": 1574129186, "post_id": 58925499, "comment_id": 104112409, "body": "@jhnc You need sqlite 3.25 or better to use window functions."}], "tags": [], "owner": {"reputation": 1106460, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1574128255, "creation_date": 1574128255, "answer_id": 58925499, "question_id": 58925106, "link": "https://stackoverflow.com/questions/58925106/how-to-select-users-with-most-votes-from-a-database/58925499#58925499", "title": "How to select users with most votes, from a database?", "body": "<p>I would recommend <code>rank()</code>:</p>\n\n<pre><code>SELECT voto, total\nFROM (SELECT voto, COUNT(*) as total,\n             RANK() OVER (ORDER BY COUNT(*) DESC) as seqnum\n      FROM votos v\n      WHERE mes = 12\n      GROUP BY voto\n     ) v\nWHERE seqnum = 1;\n</code></pre>\n\n<p>Note that <code>HAVING COUNT(*) &gt; 0</code> does nothing.  In your query, it is not possible for <code>COUNT(*)</code> to be equal to or less than <code>0</code>.</p>\n"}], "owner": {"reputation": 1102, "user_id": 4208719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd078e79ba74af02fe5692190dbc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro ", "link": "https://stackoverflow.com/users/4208719/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58925465, "answer_count": 3, "score": 1, "last_activity_date": 1574155337, "creation_date": 1574124673, "last_edit_date": 1574134149, "question_id": 58925106, "link": "https://stackoverflow.com/questions/58925106/how-to-select-users-with-most-votes-from-a-database", "title": "How to select users with most votes, from a database?", "body": "<p>I have a small system that accepts votes, on my query I'm selecting the vote(name of user) and the total of votes for this user.\nMy Idea is to only display the user with more votes, with the query that i have I know that i can add ORDER BY and get the first value which will be the one with the highest umber of votes.\nBut i'm trying to identifie if two persons have the number of votes. any ideas how can i do that?</p>\n\n<p>I'm using cgi.</p>\n\n<pre><code>my $connection = $MY_CONNECTION-&gt;prepare(\"SELECT voto, COUNT(*) total FROM votos  WHERE mes = 12 GROUP BY vote HAVING COUNT(*) &gt; 0 ORDER BY COUNT(*)\");\n$connection-&gt;execute || print \"ERROR 1\";\n\nmy @resultados;\nmy $info = '';\n\n\nwhile ($info = $connection-&gt;fetchrow_hashref()) {\n\n    my $nombre   = $info-&gt;{voto};\n    my $totalVotos = $info-&gt;{total};\n\nmy $winner = \"\";\nmy $temp2  = \"\";\nmy $temp   = $totalVotos ;\n\nif ($temp2 =&gt; $temp) {\n    $temp2 = $totalVotos ;\n    $winner = $nombre   ; \n\n}\n\n\n    print \"&lt;p&gt;&lt;strong&gt;Winner: &lt;/strong&gt; $winner &lt;/p&gt; \"; \n    print \"&lt;hr&gt;\";\n}\n</code></pre>\n"}, {"tags": ["csv", "perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1574124987, "post_id": 58925088, "comment_id": 104111587, "body": "This appears to be CSV data so you may want to use a CSV parser/writer to fix it."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1574125014, "post_id": 58925135, "comment_id": 104111589, "body": "<code>s&#47;,\\s*$&#47;&#47;</code> for a more lenient trailing comma stripping."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1574129197, "post_id": 58925135, "comment_id": 104112413, "body": "@tadman that would also remove a newline, bit only when there is a trailing comma, which seemed problematic"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "edited": false, "score": 0, "creation_date": 1574249210, "post_id": 58925135, "comment_id": 104162327, "body": "@kayegabato: But you&#39;ve accepted the one that doesn&#39;t explain anything, this one does explain!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 6, "last_activity_date": 1574124811, "creation_date": 1574124811, "answer_id": 58925135, "question_id": 58925088, "link": "https://stackoverflow.com/questions/58925088/how-to-remove-the-comma-in-perl/58925135#58925135", "title": "how to remove the comma in perl", "body": "<p>If there are spaces after the last comma (which seems to be true for a couple of your lines), you need to:</p>\n\n<pre><code>s/, *$//;\n</code></pre>\n\n<p>No need to backslash-escape a comma; no need for <code>/g</code> when you want the substitution to happen at most once per line.</p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1574153664, "creation_date": 1574153664, "answer_id": 58930015, "question_id": 58925088, "link": "https://stackoverflow.com/questions/58925088/how-to-remove-the-comma-in-perl/58930015#58930015", "title": "how to remove the comma in perl", "body": "<p>Following code works for provided set of data</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile( &lt;DATA&gt; ) {\n    /(.+)\\,\\s*/;\n    print \"$1\\n\";\n}\n\n__DATA__\nW, S, Vbd2OX/NW, Vbd2OX/PW, Vbd3OX/NW, Vbd3OX/PW, \nID,ID, 11200, V 11200, V 11200, V 11200, \n6,1,0.69,5.56,-5.56,10.5,-10.12,\n6,2,3.99,7,-5.13,-7,640.455,\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": true, "score": 1, "last_activity_date": 1574154796, "creation_date": 1574154796, "answer_id": 58930338, "question_id": 58925088, "link": "https://stackoverflow.com/questions/58925088/how-to-remove-the-comma-in-perl/58930338#58930338", "title": "how to remove the comma in perl", "body": "<p>Or other variation of code</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile( my $line = &lt;DATA&gt; ) {\n    $line =~ s/\\,\\s*$//;\n    print \"$line\\n\";\n}\n\n__DATA__\nW, S, Vbd2OX/NW, Vbd2OX/PW, Vbd3OX/NW, Vbd3OX/PW, \nID,ID, 11200, V 11200, V 11200, V 11200, \n6,1,0.69,5.56,-5.56,10.5,-10.12,\n6,2,3.99,7,-5.13,-7,640.455,\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 58930338, "answer_count": 3, "score": 1, "last_activity_date": 1574154796, "creation_date": 1574124574, "last_edit_date": 1574130733, "question_id": 58925088, "link": "https://stackoverflow.com/questions/58925088/how-to-remove-the-comma-in-perl", "title": "how to remove the comma in perl", "body": "<p>I have this sample data I wanted to remove the comma particularly the last comma of the line, btw it's .csv file.</p>\n\n<pre>\nW, S, Vbd2OX/NW, Vbd2OX/PW, Vbd3OX/NW, Vbd3OX/PW, \nID,ID, 11200, V 11200, V 11200, V 11200, \n6,1,0.69,5.56,-5.56,10.5,-10.12,\n6,2,3.99,7,-5.13,-7,640.455,\n</pre>\n\n<p>this 2 code is not working the last comma is still there</p>\n\n<pre><code>$line =~ s/\\,$//g;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$line =~ s/,//g;\n</code></pre>\n"}, {"tags": ["python", "perl", "gzip", "encode"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1574110979, "post_id": 58922694, "comment_id": 104107134, "body": "I don&#39;t have <code>File::Slurp</code> installed, but if simply use <code>my $json = &lt;&gt;</code>, then <code>perl tmp.pl example.json</code> seems to work fine."}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1574112388, "creation_date": 1574112388, "answer_id": 58923159, "question_id": 58922694, "link": "https://stackoverflow.com/questions/58922694/perl-equivalent-for-python-encode-and-gzip/58923159#58923159", "title": "Perl equivalent for python encode and gzip", "body": "<p>You don't do anything wrong with Perl. Both your Python code and your Perl code properly compress the data with gzip. Only Perl prints the output as binary while your Python code prints a readable representation of the output, i.e. something like <code>b\"\\x1f\\x8b...\"</code>. To get the similar result to Perl you would instead neee to print the binary data to stdout instead of the string representation, i.e. instead of <code>print(...)</code> do</p>\n\n<pre><code>sys.stdout.buffer.write(output_data)\n</code></pre>\n\n<p>Then both programs would write gzip compressed data to stdout. Note that the output might still differ since they use different options by default for gzip (compression ratio, OS type ...) but the data are nevertheless properly compressed in both cases with gzip.</p>\n"}], "owner": {"reputation": 110, "user_id": 1395252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2982af9d344b0907fd522f1602413b?s=128&d=identicon&r=PG", "display_name": "dheffx", "link": "https://stackoverflow.com/users/1395252/dheffx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58923159, "answer_count": 1, "score": 2, "last_activity_date": 1574112388, "creation_date": 1574110215, "question_id": 58922694, "link": "https://stackoverflow.com/questions/58922694/perl-equivalent-for-python-encode-and-gzip", "title": "Perl equivalent for python encode and gzip", "body": "<p>I am attempting to generate a compressed string in Perl that is equivalent to a string generated in Python.</p>\n\n<p>Python (produces the correct output):</p>\n\n<pre><code>import gzip\ntest_file = 'example.json'\n\nwith open(test_file) as f:\n    output_data = gzip.compress(f.read().encode())\n    print(output_data)\n</code></pre>\n\n<p>More or less what I've been trying to make work in Perl:</p>\n\n<pre><code>use Encode;\nuse IO::Compress::Gzip qw/gzip/;\nuse File::Slurp;\n\nmy $json = read_file('example.json', { binmode =&gt; ':raw' });\nmy $utf8_record = encode(\"utf8\", $json);\nmy $output_data;\ngzip \\$utf8_record =&gt; \\$output_data;\nprint $output_data;\n</code></pre>\n\n<p>Any idea what I'm doing wrong on the Perl side?</p>\n"}, {"tags": ["regex", "perl", "split"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574100704, "post_id": 58920467, "comment_id": 104102417, "body": "So you have a string like <code>aaaaaa</code> (six) and you want to break it up into strings <code>aa</code>, <code>aa</code>, <code>aa</code> ... (so, break in pairs of consecutive chars) ... correct?"}, {"owner": {"reputation": 513, "user_id": 2281169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32295eae5eb8ad18efd29bcb0f93aa01?s=128&d=identicon&r=PG", "display_name": "Emily", "link": "https://stackoverflow.com/users/2281169/emily"}, "edited": false, "score": 0, "creation_date": 1574100733, "post_id": 58920467, "comment_id": 104102429, "body": "I&#39;m not sure I understand your general question, but if you just want to pull the domain out of a URL, something like <code>&#47;:\\&#47;\\&#47;([^\\&#47;]+)&#47;; print $1;</code> would work. This looks for <code>:&#47;&#47;</code>, then takes as many non-slash characters as it can after it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574101029, "post_id": 58920467, "comment_id": 104102547, "body": "&quot;<i>wanted to split along single slash to get &#39;domain-name&#39;</i>&quot; -- what does that mean?  (And how does it relate to double things from earlier in the question?)  Can you give example -- what do you need from that <code>$site_name</code>?  And can you generally clarify the question, please; the more I read the more I&#39;m confused."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1574102379, "post_id": 58920467, "comment_id": 104103110, "body": "<code>@my_split = split( &#47;\\&#47;\\&#47;&#47;, $str);</code> / <code>@parts = split(&#39;&#47;{1,1}&#39;, $site_name);</code>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1574105919, "post_id": 58920467, "comment_id": 104104792, "body": "you could simply use <code>\\&#47;+</code> to split on &quot;any number of slashes&quot; - it seems like you don&#39;t care to keep them anyway. Keep in mind that would leave you with the first bit ( &quot;http:&quot; ). I would probably remove that first, then split on a single slash (<code>&#47;\\&#47;&#47;</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 2775, "user_id": 212514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ea69157590ddaa2363dd9ad4d7c7d3?s=128&d=identicon&r=PG", "display_name": "user212514", "link": "https://stackoverflow.com/users/212514/user212514"}, "is_accepted": false, "score": 1, "last_activity_date": 1574101651, "creation_date": 1574101651, "answer_id": 58920773, "question_id": 58920467, "link": "https://stackoverflow.com/questions/58920467/perl-regex-regular-expression-to-split/58920773#58920773", "title": "Perl Regex regular expression to split //", "body": "<p>Here's a quick way to split the full URL into its components:</p>\n\n<pre><code>my $u = q(http://www.yahoo.com/blah1/blah2.txt);\nmy ($protocol, $server, $path) = split(/:\\/\\/([^\\/]+)/, $u);\nprint \"($protocol, $server, $path)\\n\";\n</code></pre>\n\n<p>h/t @Mike</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 10129810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949c9a64369627d81281dedec9d695f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nalan P", "link": "https://stackoverflow.com/users/10129810/nalan-p"}, "edited": false, "score": 0, "creation_date": 1574104662, "post_id": 58920966, "comment_id": 104104136, "body": "Thanks for all your response,"}, {"owner": {"reputation": 43, "user_id": 10129810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949c9a64369627d81281dedec9d695f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nalan P", "link": "https://stackoverflow.com/users/10129810/nalan-p"}, "edited": false, "score": 0, "creation_date": 1574104765, "post_id": 58920966, "comment_id": 104104186, "body": "I tried this again,   $str = q(//////);  my @parts = split /\\/\\//, $str;  $&quot;=&quot;\\n&quot;; print(&quot;@parts \\n&quot;);  Probably I&#39;m doing something wrong, it still doesn&#39;t work for me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 10129810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949c9a64369627d81281dedec9d695f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nalan P", "link": "https://stackoverflow.com/users/10129810/nalan-p"}, "edited": false, "score": 1, "creation_date": 1574105044, "post_id": 58920966, "comment_id": 104104341, "body": "@NalanP  That <code>$str = q(&#47;&#47;&#47;&#47;&#47;&#47;)</code> is a very specific string.  If you break it up on double slash it ends up with nothing -- because there are <i>only slashes</i>, and between each pair of slashes is &quot;nothing&quot; (empty string).  Again: can you clarify what you actually need?   If it is <i>really</i> to break up <code>q(aaaaaa)</code> (six) in such a way to get a list <code>&#39;aa&#39;, &#39;aa</code> then you have to explain how/why --- how does know which pairs to keep and which to drop.  But I suspect it&#39;s not that..."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1574102836, "last_edit_date": 1574102836, "creation_date": 1574102532, "answer_id": 58920966, "question_id": 58920467, "link": "https://stackoverflow.com/questions/58920467/perl-regex-regular-expression-to-split/58920966#58920966", "title": "Perl Regex regular expression to split //", "body": "<p>The question is rather unclear.</p>\n\n<p>To break a string into pairs of consecutive characters</p>\n\n<pre><code>my @pairs = $string =~ /(..)/g;\n</code></pre>\n\n<p>or to split a string by repeating slash </p>\n\n<pre><code>my @parts = split /\\/\\//, $string;\n</code></pre>\n\n<p>The separator pattern, in <code>/.../</code>, is an actual regex so we need to escape <code>/</code> inside it.</p>\n\n<p>But then you say you want to parse URI?</p>\n\n<p>Use a module, please.  For example, there is <a href=\"https://metacpan.org/pod/URI\" rel=\"noreferrer\">URI</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse URI;\n\nmy $string = q(http://www.yahoo.com/blah1/blah2.txt);\nmy $uri = URI-&gt;new($string);\n\nsay \"Scheme: \", $uri-&gt;scheme;\nsay \"Path:   \", $uri-&gt;path;\nsay \"Host:   \", $uri-&gt;host;\n# there's more, see docs    \n</code></pre>\n\n<p>and then there's <a href=\"https://metacpan.org/pod/URI::Split\" rel=\"noreferrer\">URI::Split</a></p>\n\n<pre><code>use URI::Split qw(uri_split uri_join);\n\nmy ($scheme, $auth, $path, $query, $frag) = uri_split($uri);\n</code></pre>\n\n<p>A number of other modules or frameworks, which you may already be using, nicely handle URIs.</p>\n"}, {"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1574163640, "last_edit_date": 1574163640, "creation_date": 1574147598, "answer_id": 58928472, "question_id": 58920467, "link": "https://stackoverflow.com/questions/58920467/perl-regex-regular-expression-to-split/58928472#58928472", "title": "Perl Regex regular expression to split //", "body": "<p>So it seems you want to simply get the Domain name:</p>\n\n<pre><code>my $url = q(http://www.yahoo.com/blah1/blah2.txt);\nmy @vars = split /\\//, $url;\nprint $vars[2];\n</code></pre>\n\n<p>results:</p>\n\n<pre><code>www.yahoo.com\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574162002, "post_id": 58930770, "comment_id": 104124596, "body": "Why do you use <code>\\w</code> before <code>ttps</code>? <code>{0,1}</code> is better written <code>?</code>, <code>\\d</code> is already included in <code>\\w</code> so <code>[\\w\\d.]</code> is better written <code>\\w.</code>"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574163404, "post_id": 58930770, "comment_id": 104125400, "body": "Yes, <i>\\w</i> includes <i>\\d</i> but the author of the post is not aware of this -- and it easier for new perl programmer to understand. Now about <b>\\whttps{0,1}</b>, if I place <b>?</b> -- it didn&#39;t work in <i>Straberry Perl</i> when I have tried it. I could put there <b>.</b> but it will be confusing for new perl programmer (as it <b>any symbol</b> but we expect a letter [fh] could work as well). I took simplest approach to achieve desired result - same result can be achieved by several ways."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574163666, "post_id": 58930770, "comment_id": 104125546, "body": "Ah, ok I see you meant <b>\\whttps?</b> -- yes, it does work but again for originator of the post it would be easier to understand that there can be 0 or 1 <b>s</b> in this place. Otherwise I had to refer him to documentation for <b>regex</b>. <a href=\"https://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrequick.html</a> (obviously that author did not taken time to go through the documentation)."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574163839, "post_id": 58930770, "comment_id": 104125645, "body": "Just for clarification I misread your comment and thought you referred to <b>(?ttps{0,1})</b> in this situation <b>?</b> does not work."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574164084, "post_id": 58930770, "comment_id": 104125773, "body": "As Toto suggested the <i>regex</i> can be simplified to <b>m|(\\wttps?)://([\\w.]+)/(.+)/([^/]+)$|</b>."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574166863, "post_id": 58930770, "comment_id": 104127382, "body": "<code>\\wttps?</code> matches <code>3ttps</code> but not <code>ftp</code>"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574167434, "post_id": 58930770, "comment_id": 104127686, "body": "How about <code>m|([hf]t?ps?):&#47;&#47;([\\w.]+)&#47;(.+)&#47;([^&#47;]+)$|</code>? It is more strict and should take care as <i>ftp</i>,<i>http</i>,<i>https</i>. There are more protocols than ftp,http,https - <code>m|(.+):&#47;&#47;([\\w.]+)&#47;(.+)&#47;([^&#47;]+)$|</code> and then analyse $url{proto} to whatever you need and discard if it not what you wanted."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1574167638, "post_id": 58930770, "comment_id": 104127785, "body": "Sorry but it doesn&#39;t match <code>http</code> and matches <code>fps</code>"}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 1, "last_activity_date": 1574156116, "creation_date": 1574156116, "answer_id": 58930770, "question_id": 58920467, "link": "https://stackoverflow.com/questions/58920467/perl-regex-regular-expression-to-split/58930770#58930770", "title": "Perl Regex regular expression to split //", "body": "<p>Well next piece of code does the trick</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %url;\n\nwhile( &lt;DATA&gt; ) {\n    chomp;\n    m|(\\wttps{0,1})://([\\w\\d\\.]+)/(.+)/([^/]+)$|;\n    @url{qw(proto dn path file)} = ($1,$2,$3,$4);\n    print Dumper(\\%url);\n}\n\n__DATA__\nhttp://www.yahoo.com/blah1/blah2.txt\nhttp://www.google.com/dir1/dir2/dir3/file.ext\nftp://www.server.com/dir1/dir2/file.ext\nhttps://www.inter.net/dir/file.ext\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10129810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949c9a64369627d81281dedec9d695f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nalan P", "link": "https://stackoverflow.com/users/10129810/nalan-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1574163640, "creation_date": 1574100132, "last_edit_date": 1574102250, "question_id": 58920467, "link": "https://stackoverflow.com/questions/58920467/perl-regex-regular-expression-to-split", "title": "Perl Regex regular expression to split //", "body": "<p>I went through s'flow and other sites for simple solution with regex in perl. </p>\n\n<pre><code>$str = q(//////);#\n</code></pre>\n\n<p>Say I've six slash or seven, or other chars like q(aaaaa)</p>\n\n<p>I want them to split like <code>['//','//']</code>, </p>\n\n<p>I tried <code>@my_split = split ( /\\/\\/,$str);</code> but it didn't work</p>\n\n<p>Is it possible with regex?</p>\n\n<p>Reason for this question is, say I have this domain name:</p>\n\n<p><code>$site_name = q(http://www.yahoo.com/blah1/blah2.txt);</code></p>\n\n<p>I wanted to split along single slash to get 'domain-name', I couldn't do it. \nI tried </p>\n\n<p><code>split( '/'{1,1}, $sitename);</code> #didn't work. I expected it split on one slash than two.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["regex", "perl", "jmeter"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574093779, "post_id": 58918621, "comment_id": 104098899, "body": "Contrary to what you claim, the code you posted doesn&#39;t perform any substitutions when provided the text you posted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574093890, "post_id": 58918621, "comment_id": 104098965, "body": "Re &quot;<i>I could not find how to match single newline character in perl</i>&quot;, There&#39;s no &quot;new line&quot; character. I presume you mean a line feed character? <code>\\n</code>"}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574093913, "post_id": 58918621, "comment_id": 104098978, "body": "@ikegami good to hear my code looks correct. I will try to obfuscate full file to produce sample for reperformance."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1574093971, "post_id": 58918621, "comment_id": 104099014, "body": "I didn&#39;t say the code &quot;looks correct&quot;. You didn&#39;t even specify what you are trying to do, so I couldn&#39;t possibly know if it&#39;s correct or not. I&#39;d be more inclined to say it&#39;s NOT correct, seeing as you claim it doesn&#39;t do what you want (but you also claimed it performed a substitution it doesn&#39;t perform)."}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574095192, "post_id": 58918621, "comment_id": 104099721, "body": "@ikegami, I updated the answer. Producing some smaller files with part of content up to now results in &quot;correct&quot; non removal of that occurrence. I added exact commands run how I got my results and what I want to achieve."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574095281, "post_id": 58918621, "comment_id": 104099767, "body": "If I read that correctly, you still only provide data for which the code <i>works</i>, so you still have yet to demonstrate your problem"}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574097448, "post_id": 58918621, "comment_id": 104100850, "body": "@ikegami  I deleted extra and sensitive info, file is 145 lines, pasted in full and tested by copying and pasting back to vi. I appreciate your help, please have a look."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574103993, "post_id": 58918621, "comment_id": 104103835, "body": "<a href=\"https://regex101.com/r/R0U8YF/2\" rel=\"nofollow noreferrer\">This</a> shows what is being matched. That&#39;s all one match. The <code>.*?</code> is matching more than you intend it to. As always, it&#39;s far more robust are even easier with a proper XML parser"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1574106316, "creation_date": 1574106316, "answer_id": 58921846, "question_id": 58918621, "link": "https://stackoverflow.com/questions/58918621/why-perl-replaces-text-when-there-is-no-last-part-after-previous-hashtree/58921846#58921846", "title": "why Perl replaces text when there is no last part after previous: *&lt;hashTree/&gt;. *&lt;/hashTree&gt;.?", "body": "<p><a href=\"https://regex101.com/r/R0U8YF/2\" rel=\"nofollow noreferrer\">This</a> shows what is being matched. The entire highlighted portion of the text is just one match. The <code>.*?</code> is matching more than you intend it to.</p>\n\n<p>I would use a proper XML parser.</p>\n\n<pre><code>use XML::LibXML qw( );\n\nmy $xpath = \"\n   //hashTree[\n      count(*)=2 and\n      *[position()=1 and name()='JSONPathAssertion'] and\n      *[position()=2 and name()='hashTree' and count(*)=0]\n   ]\n\";\n\nmy $doc = XML::LibXML-&gt;new-&gt;parse_file(\"a.xml\");\n$_-&gt;unlink for $doc-&gt;findnodes($xpath);\n$doc-&gt;toFile(\"b.xml\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use XML::LibXML qw( );\n\nmy $doc = XML::LibXML-&gt;new-&gt;parse_file(\"a.xml\");\nfor my $node ($doc-&gt;findnodes(\"//hashTree\")) {\n   my @child_eles = $node-&gt;findnodes(\"*\");\n   $node-&gt;unlink\n      if @child_eles == 2\n      &amp;&amp; $child_eles[0]-&gt;nodeName eq \"JSONPathAssertion\"\n      &amp;&amp; $child_eles[1]-&gt;nodeName eq \"hashTree\"\n      &amp;&amp; $child_eles[1]-&gt;findnodes(\"*\")-&gt;size == 0;\n}\n\n$doc-&gt;toFile(\"b.xml\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "is_accepted": false, "score": 0, "last_activity_date": 1574147865, "creation_date": 1574147865, "answer_id": 58928517, "question_id": 58918621, "link": "https://stackoverflow.com/questions/58918621/why-perl-replaces-text-when-there-is-no-last-part-after-previous-hashtree/58928517#58928517", "title": "why Perl replaces text when there is no last part after previous: *&lt;hashTree/&gt;. *&lt;/hashTree&gt;.?", "body": "<p>The reason for incorrect work of Perl one-liner in question was discovered by ikegami. For future reference I post correct code in Perl:</p>\n\n<pre><code>cat test.jmx | perl -0777pe 's` *&lt;hashTree&gt;\\n( *)&lt;JSONPathAssertion.*\\n.*\\n.*\\n.*\\n.*\\n.*\\n.*\\n *&lt;/JSONPathAssertion&gt;\\n *(&lt;hashTree/&gt;)\\n *&lt;/hashTree&gt;\\n`$1$2`g' &gt; test_.jmx\n</code></pre>\n\n<p>I noted only today that (as far as I noted) all elements of JMeter test plan xml tree should end with <code>&lt;hashTree&gt;</code> for child elements. If no elements present, than empty branch should be written: <code>&lt;hashTree/&gt;</code>: therefore when deleting element which is single in a branch, its' code should be replaced by code for empty branch: <code>&lt;hashTree/&gt;</code>.</p>\n"}], "owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 58921846, "answer_count": 2, "score": 0, "last_activity_date": 1574147865, "creation_date": 1574093116, "last_edit_date": 1574147549, "question_id": 58918621, "link": "https://stackoverflow.com/questions/58918621/why-perl-replaces-text-when-there-is-no-last-part-after-previous-hashtree", "title": "why Perl replaces text when there is no last part after previous: *&lt;hashTree/&gt;. *&lt;/hashTree&gt;.?", "body": "<p>I want to remove by Perl parts of xml file (elements of JMeter test plan) which are:</p>\n\n<pre><code>              &lt;hashTree&gt;\n                &lt;JSONPathAssertion guiclass=\"JSONPathAssertionGui\" testclass=\"JSONPathAssertion\" testname=\"SON-ASS\" enabled=\"true\"&gt;\n                  &lt;stringProp name=\"JSON_PATH\"&gt;$.status&lt;/stringProp&gt;\n                  &lt;stringProp name=\"EXPECTED_VALUE\"&gt;ok&lt;/stringProp&gt;\n                  &lt;boolProp name=\"JSONVALIDATION\"&gt;true&lt;/boolProp&gt;\n                  &lt;boolProp name=\"EXPECT_NULL\"&gt;false&lt;/boolProp&gt;\n                  &lt;boolProp name=\"INVERT\"&gt;false&lt;/boolProp&gt;\n                  &lt;boolProp name=\"ISREGEX\"&gt;false&lt;/boolProp&gt;\n                &lt;/JSONPathAssertion&gt;\n                &lt;hashTree/&gt;\n              &lt;/hashTree&gt;\n</code></pre>\n\n<p>1st time <code>JSONPathAssertion</code> occur in <code>tst.jmx</code> is:</p>\n\n<p><code>grep -A 10 JSONPath test7.jmx | head -n 10</code>:</p>\n\n<pre><code>&lt;/HTTPSamplerProxy&gt;\n          &lt;hashTree&gt;\n            &lt;JSONPathAssertion guiclass=\"JSONPathAssertionGui\" testclass=\"JSONPathAssertion\" testname=\"SON-ASS\" enabled=\"true\"&gt;\n              &lt;stringProp name=\"JSON_PATH\"&gt;$.status&lt;/stringProp&gt;\n              &lt;stringProp name=\"EXPECTED_VALUE\"&gt;ok&lt;/stringProp&gt;\n              &lt;boolProp name=\"JSONVALIDATION\"&gt;true&lt;/boolProp&gt;\n              &lt;boolProp name=\"EXPECT_NULL\"&gt;false&lt;/boolProp&gt;\n              &lt;boolProp name=\"INVERT\"&gt;false&lt;/boolProp&gt;\n              &lt;boolProp name=\"ISREGEX\"&gt;false&lt;/boolProp&gt;\n            &lt;/JSONPathAssertion&gt;\n            &lt;hashTree/&gt;\n            &lt;JSR223PreProcessor guiclass=\"TestBeanGUI\" testclass=\"JSR223PreProcessor\" testname=\"JSR223 PreProcessor\" enabled=\"true\"&gt;\n</code></pre>\n\n<p>There is no <code>&lt;/hashTree&gt;.</code> after <code>&lt;hashTree/&gt;.</code> separated by spaces only for that 1st occurrence.</p>\n\n<p>I write then: </p>\n\n<pre><code>cat test7.jmx | perl -0777pe 's` *&lt;hashTree&gt;. *&lt;JSONPathAssertion.*?&lt;/JSONPathAssertion&gt;. *&lt;hashTree/&gt;. *&lt;/hashTree&gt;.``gs' &gt; test7_1.jmx\n</code></pre>\n\n<p>Then <code>grep -A 10 JSONPath test7_1.jmx | head -n 10</code> and now have empty output. \nResulting file does not have <code>JSONPathAssertion</code> at all. Why that particular occurrence was replaced?  </p>\n\n<p>P.S. maybe worth separate question, but I could not find how to match single newline character in perl, only as part of larger patterns:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/4495791/how-to-match-a-newline-n-in-a-perl-regex\">How to match a newline \\n in a perl regex?</a> . </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8303488/regex-to-match-any-character-including-new-lines\">Regex to match any character including new lines</a></p>\n\n<p>ADDED after comments:</p>\n\n<p>Full file test7.jmx below (tested again copying contents from SO and pasting in vi to new file), BTW all done on <code>MacOS Mojave</code>, at one iteration confirmed on CentOS 7:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;jmeterTestPlan version=\"1.2\" properties=\"5.0\" jmeter=\"5.1.1 r1855137\"&gt;\n  &lt;hashTree&gt;\n    &lt;TestPlan guiclass=\"TestPlanGui\" testclass=\"TestPlan\" testname=\"test one\" enabled=\"true\"&gt;\n      &lt;stringProp name=\"TestPlan.comments\"&gt;&lt;/stringProp&gt;\n      &lt;boolProp name=\"TestPlan.functional_mode\"&gt;false&lt;/boolProp&gt;\n      &lt;boolProp name=\"TestPlan.tearDown_on_shutdown\"&gt;true&lt;/boolProp&gt;\n      &lt;boolProp name=\"TestPlan.serialize_threadgroups\"&gt;false&lt;/boolProp&gt;\n      &lt;elementProp name=\"TestPlan.user_defined_variables\" elementType=\"Arguments\" guiclass=\"ArgumentsPanel\" testclass=\"Arguments\" testname=\"User Defined Variables\" enabled=\"true\"&gt;\n        &lt;collectionProp name=\"Arguments.arguments\"/&gt;\n      &lt;/elementProp&gt;\n      &lt;stringProp name=\"TestPlan.user_define_classpath\"&gt;&lt;/stringProp&gt;\n    &lt;/TestPlan&gt;\n    &lt;hashTree&gt;\n      &lt;com.blazemeter.jmeter.threads.concurrency.ConcurrencyThreadGroup guiclass=\"com.blazemeter.jmeter.threads.concurrency.ConcurrencyThreadGroupGui\" testclass=\"com.blazemeter.jmeter.threads.concurrency.ConcurrencyThreadGroup\" testname=\"Thread - main\" enabled=\"true\"&gt;\n        &lt;elementProp name=\"ThreadGroup.main_controller\" elementType=\"com.blazemeter.jmeter.control.VirtualUserController\"/&gt;\n        &lt;stringProp name=\"ThreadGroup.on_sample_error\"&gt;continue&lt;/stringProp&gt;\n        &lt;stringProp name=\"TargetLevel\"&gt;${__P(threads, 1)}&lt;/stringProp&gt;\n        &lt;stringProp name=\"RampUp\"&gt;${__P(time, 1)}&lt;/stringProp&gt;\n        &lt;stringProp name=\"Steps\"&gt;${__P(steps, 1)}&lt;/stringProp&gt;\n        &lt;stringProp name=\"Hold\"&gt;${__P(hold, 3)}&lt;/stringProp&gt;\n        &lt;stringProp name=\"LogFilename\"&gt;&lt;/stringProp&gt;\n        &lt;stringProp name=\"Iterations\"&gt;&lt;/stringProp&gt;\n        &lt;stringProp name=\"Unit\"&gt;M&lt;/stringProp&gt;\n      &lt;/com.blazemeter.jmeter.threads.concurrency.ConcurrencyThreadGroup&gt;\n      &lt;hashTree&gt;\n        &lt;GenericController guiclass=\"LogicControllerGui\" testclass=\"GenericController\" testname=\"Simple Controller - main\" enabled=\"true\"/&gt;\n        &lt;hashTree&gt;\n          &lt;HTTPSamplerProxy guiclass=\"HttpTestSampleGui\" testclass=\"HTTPSamplerProxy\" testname=\"REQUEST1\" enabled=\"true\"&gt;\n            &lt;boolProp name=\"HTTPSampler.postBodyRaw\"&gt;true&lt;/boolProp&gt;\n            &lt;elementProp name=\"HTTPsampler.Arguments\" elementType=\"Arguments\"&gt;\n              &lt;collectionProp name=\"Arguments.arguments\"&gt;\n                &lt;elementProp name=\"\" elementType=\"HTTPArgument\"&gt;\n                  &lt;boolProp name=\"HTTPArgument.always_encode\"&gt;false&lt;/boolProp&gt;\n                  &lt;stringProp name=\"Argument.value\"&gt;{&amp;#xd;\n    &amp;quot;version&amp;quot;: &amp;quot;1.1&amp;quot;,&amp;#xd;\n    &amp;quot;test&amp;quot;: {&amp;#xd;\n}&lt;/stringProp&gt;\n                  &lt;stringProp name=\"Argument.metadata\"&gt;=&lt;/stringProp&gt;\n                &lt;/elementProp&gt;\n              &lt;/collectionProp&gt;\n            &lt;/elementProp&gt;\n            &lt;stringProp name=\"HTTPSampler.domain\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.port\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.protocol\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.contentEncoding\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.path\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.method\"&gt;POST&lt;/stringProp&gt;\n            &lt;boolProp name=\"HTTPSampler.follow_redirects\"&gt;false&lt;/boolProp&gt;\n            &lt;boolProp name=\"HTTPSampler.auto_redirects\"&gt;false&lt;/boolProp&gt;\n            &lt;boolProp name=\"HTTPSampler.use_keepalive\"&gt;true&lt;/boolProp&gt;\n            &lt;boolProp name=\"HTTPSampler.DO_MULTIPART_POST\"&gt;false&lt;/boolProp&gt;\n            &lt;stringProp name=\"HTTPSampler.embedded_url_re\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.connect_timeout\"&gt;&lt;/stringProp&gt;\n            &lt;stringProp name=\"HTTPSampler.response_timeout\"&gt;&lt;/stringProp&gt;\n          &lt;/HTTPSamplerProxy&gt;\n          &lt;hashTree&gt;\n            &lt;JSONPathAssertion guiclass=\"JSONPathAssertionGui\" testclass=\"JSONPathAssertion\" testname=\"JSON Assertion\" enabled=\"true\"&gt;\n              &lt;stringProp name=\"JSON_PATH\"&gt;$.status&lt;/stringProp&gt;\n              &lt;stringProp name=\"EXPECTED_VALUE\"&gt;ok&lt;/stringProp&gt;\n              &lt;boolProp name=\"JSONVALIDATION\"&gt;true&lt;/boolProp&gt;\n              &lt;boolProp name=\"EXPECT_NULL\"&gt;false&lt;/boolProp&gt;\n              &lt;boolProp name=\"INVERT\"&gt;false&lt;/boolProp&gt;\n              &lt;boolProp name=\"ISREGEX\"&gt;false&lt;/boolProp&gt;\n            &lt;/JSONPathAssertion&gt;\n            &lt;hashTree/&gt;\n            &lt;JSR223PreProcessor guiclass=\"TestBeanGUI\" testclass=\"JSR223PreProcessor\" testname=\"JSR223 PreProcessor\" enabled=\"true\"&gt;\n              &lt;stringProp name=\"cacheKey\"&gt;true&lt;/stringProp&gt;\n              &lt;stringProp name=\"filename\"&gt;&lt;/stringProp&gt;\n              &lt;stringProp name=\"parameters\"&gt;&lt;/stringProp&gt;\n              &lt;stringProp name=\"script\"&gt;// period in the past - year-month-day, set from properties in User Defined Variables\n\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport groovy.json.JsonOutput;\nimport org.apache.commons.lang.RandomStringUtils;&lt;/stringProp&gt;\n              &lt;stringProp name=\"scriptLanguage\"&gt;groovy&lt;/stringProp&gt;\n            &lt;/JSR223PreProcessor&gt;\n            &lt;hashTree/&gt;\n            &lt;JSR223PostProcessor guiclass=\"TestBeanGUI\" testclass=\"JSR223PostProcessor\" testname=\"JSR223 PostProcessor\" enabled=\"true\"&gt;\n              &lt;stringProp name=\"cacheKey\"&gt;true&lt;/stringProp&gt;\n              &lt;stringProp name=\"filename\"&gt;&lt;/stringProp&gt;\n              &lt;stringProp name=\"parameters\"&gt;&lt;/stringProp&gt;\n              &lt;stringProp name=\"script\"&gt;import java.time.Instant;\nimport java.time.temporal.ChronoUnit;&lt;/stringProp&gt;\n              &lt;stringProp name=\"scriptLanguage\"&gt;groovy&lt;/stringProp&gt;\n            &lt;/JSR223PostProcessor&gt;\n            &lt;hashTree/&gt;\n          &lt;/hashTree&gt;\n          &lt;IfController guiclass=\"IfControllerPanel\" testclass=\"IfController\" testname=\"If Controller\" enabled=\"true\"&gt;\n            &lt;stringProp name=\"IfController.condition\"&gt;${__groovy(${random_variable} == 1)}&lt;/stringProp&gt;\n            &lt;boolProp name=\"IfController.evaluateAll\"&gt;false&lt;/boolProp&gt;\n            &lt;boolProp name=\"IfController.useExpression\"&gt;true&lt;/boolProp&gt;\n          &lt;/IfController&gt;\n          &lt;hashTree&gt;\n            &lt;RandomController guiclass=\"RandomControlGui\" testclass=\"RandomController\" testname=\"Random Controller\" enabled=\"true\"&gt;\n              &lt;intProp name=\"InterleaveControl.style\"&gt;1&lt;/intProp&gt;\n            &lt;/RandomController&gt;\n            &lt;hashTree&gt;\n              &lt;HTTPSamplerProxy guiclass=\"HttpTestSampleGui\" testclass=\"HTTPSamplerProxy\" testname=\"REQUEST2\" enabled=\"true\"&gt;\n                &lt;boolProp name=\"HTTPSampler.postBodyRaw\"&gt;true&lt;/boolProp&gt;\n                &lt;elementProp name=\"HTTPsampler.Arguments\" elementType=\"Arguments\"&gt;\n                  &lt;collectionProp name=\"Arguments.arguments\"&gt;\n                    &lt;elementProp name=\"\" elementType=\"HTTPArgument\"&gt;\n                      &lt;boolProp name=\"HTTPArgument.always_encode\"&gt;false&lt;/boolProp&gt;\n                      &lt;stringProp name=\"Argument.value\"&gt;{&amp;#xd;\n    &amp;quot;version&amp;quot;: &amp;quot;1.1&amp;quot;,&amp;#xd;\n    &amp;quot;test&amp;quot;: {&amp;#xd;\n}&lt;/stringProp&gt;\n                      &lt;stringProp name=\"Argument.metadata\"&gt;=&lt;/stringProp&gt;\n                    &lt;/elementProp&gt;\n                  &lt;/collectionProp&gt;\n                &lt;/elementProp&gt;\n                &lt;stringProp name=\"HTTPSampler.domain\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.port\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.protocol\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.contentEncoding\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.path\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.method\"&gt;POST&lt;/stringProp&gt;\n                &lt;boolProp name=\"HTTPSampler.follow_redirects\"&gt;false&lt;/boolProp&gt;\n                &lt;boolProp name=\"HTTPSampler.auto_redirects\"&gt;false&lt;/boolProp&gt;\n                &lt;boolProp name=\"HTTPSampler.use_keepalive\"&gt;true&lt;/boolProp&gt;\n                &lt;boolProp name=\"HTTPSampler.DO_MULTIPART_POST\"&gt;false&lt;/boolProp&gt;\n                &lt;stringProp name=\"HTTPSampler.embedded_url_re\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.connect_timeout\"&gt;&lt;/stringProp&gt;\n                &lt;stringProp name=\"HTTPSampler.response_timeout\"&gt;&lt;/stringProp&gt;\n              &lt;/HTTPSamplerProxy&gt;\n              &lt;hashTree&gt;\n                &lt;JSONPathAssertion guiclass=\"JSONPathAssertionGui\" testclass=\"JSONPathAssertion\" testname=\"JSON Assertion\" enabled=\"true\"&gt;\n                  &lt;stringProp name=\"JSON_PATH\"&gt;$.status&lt;/stringProp&gt;\n                  &lt;stringProp name=\"EXPECTED_VALUE\"&gt;ok&lt;/stringProp&gt;\n                  &lt;boolProp name=\"JSONVALIDATION\"&gt;true&lt;/boolProp&gt;\n                  &lt;boolProp name=\"EXPECT_NULL\"&gt;false&lt;/boolProp&gt;\n                  &lt;boolProp name=\"INVERT\"&gt;false&lt;/boolProp&gt;\n                  &lt;boolProp name=\"ISREGEX\"&gt;false&lt;/boolProp&gt;\n                &lt;/JSONPathAssertion&gt;\n                &lt;hashTree/&gt;\n              &lt;/hashTree&gt;\n            &lt;/hashTree&gt;\n          &lt;/hashTree&gt;\n        &lt;/hashTree&gt;\n      &lt;/hashTree&gt;\n    &lt;/hashTree&gt;\n  &lt;/hashTree&gt;\n&lt;/jmeterTestPlan&gt;\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 1, "creation_date": 1574094422, "post_id": 58918219, "comment_id": 104099255, "body": "What commands did you use to install them?"}], "answers": [{"tags": [], "owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "is_accepted": false, "score": 1, "last_activity_date": 1574098678, "creation_date": 1574098678, "answer_id": 58920142, "question_id": 58918219, "link": "https://stackoverflow.com/questions/58918219/downgrading-perl-modules/58920142#58920142", "title": "Downgrading Perl Modules", "body": "<p>Theoretically it should be possible to remove them with <code>cpanm --uninstall</code> and then install older versions from <a href=\"http://backpan.cpantesters.org/\" rel=\"nofollow noreferrer\">BackPan http://backpan.cpantesters.org/</a>. But you can never know what happens within the dependency chain.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574106680, "post_id": 58920515, "comment_id": 104105154, "body": "IIRC, <code>force get TIMB&#47;DBI-1.642.tar.gz</code> followed by <code>install TIMB&#47;DBI-1.642.tar.gz</code> will do the trick. Blindly forcing <i>install</i> is bad!"}], "tags": [], "owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "is_accepted": false, "score": 4, "last_activity_date": 1574110186, "last_edit_date": 1574110186, "creation_date": 1574100379, "answer_id": 58920515, "question_id": 58918219, "link": "https://stackoverflow.com/questions/58918219/downgrading-perl-modules/58920515#58920515", "title": "Downgrading Perl Modules", "body": "<p>To force the installation of a specific version of the modules, you can execute this; assuming you have all of the tool chain needed to compile and test:</p>\n\n<pre><code>perl -MCPAN -e shell\ncpan[1]&gt; force install TIMB/DBI-1.642.tar.gz          # assuming 1.642\ncpan[2]&gt; force install DVEEDEN/DBD-mysql-4.050.tar.gz # assuming 4.050\n</code></pre>\n\n<p>If you use <code>CPAN::FindDependencies</code>, then you can find modules that depend on DBI and DBD::mysql and execute their tests.</p>\n\n<p>You will want to pay attention to the execution of each module's forced installation because the tests might fail. If, say, the older DBI's tests fail (or its dependents) then you would have to make a decision about which tests you want to fail: DBI's, DBI's dependents, or your application. Finding an older version that works for the whole environment might be more trouble than it's worth. It might be easier to try to work around the DBI (or DBD::mysql) problem than it is try to find an older version that works for the whole perl environment. If the older DBI has dependencies that you haven't met, then meeting them might cause a recursive dependency nightmare.</p>\n"}], "owner": {"reputation": 31, "user_id": 12392378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c99e6610a4b8edc819fc926f5fc3bf9?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/12392378/malcolm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1574110186, "creation_date": 1574091727, "last_edit_date": 1574096325, "question_id": 58918219, "link": "https://stackoverflow.com/questions/58918219/downgrading-perl-modules", "title": "Downgrading Perl Modules", "body": "<p>I've installed Perl modules for Mysql and DBI, however I'd like to downgrade them to older versions due to a bug which I have encountered with the current versions. Is it possible to downgrade these to an older version using cpan? How would I do this? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1574087516, "post_id": 58916800, "comment_id": 104095227, "body": "Fork 30 copies, one per account?"}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574087598, "post_id": 58916800, "comment_id": 104095269, "body": "@Shawn If that is the correct terminology, then yes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1574088370, "post_id": 58916800, "comment_id": 104095743, "body": "Your database needs to allow that many connections from your user."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1574092040, "post_id": 58917365, "comment_id": 104097893, "body": "No need for the signal handler; just use <code>while ($children) { wait; --$children }</code> instead of the bottom loop"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1574089477, "last_edit_date": 1574089477, "creation_date": 1574089118, "answer_id": 58917365, "question_id": 58916800, "link": "https://stackoverflow.com/questions/58916800/how-to-fork-30-connections-in-perl/58917365#58917365", "title": "How to fork 30 connections in Perl", "body": "<p>The easy way, depending on what else your script might need to do, is to just fork itself 30 times, each copy processing one account.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse POSIX qw/:sys_wait.h/;\n\nmy $nchildren = 0;\n$SIG{\"CHLD\"} = sub { while (waitpid(-1, WNOHANG) &gt; 0) { $nchildren -= 1; } };\n\nfor my $i ( \"01\" .. \"30\" ) {\n  my $pid = fork;\n  if (! defined $pid) {\n    die \"Unable to fork: $!\\n\";\n  } elsif ($pid == 0) {\n     # Do stuff for account $i\n     exit 0; # And exit.\n  } else {\n    $nchildren += 1;\n  }\n}\n\n# Wait for all child processes to exit.\nwhile ($nchildren &gt; 0) {\n  sleep 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58917365, "answer_count": 1, "score": 0, "last_activity_date": 1574089477, "creation_date": 1574087341, "last_edit_date": 1574088478, "question_id": 58916800, "link": "https://stackoverflow.com/questions/58916800/how-to-fork-30-connections-in-perl", "title": "How to fork 30 connections in Perl", "body": "<p>I am writing a monitoring script to login to the database, perform tasks, and logout. I have 30 accounts to the database. But I would like my Perl script to perform this task with 30 simultaneous logins and presently my loop has it that one iteration has to finish before the other can start.</p>\n\n<pre><code> #!/usr/bin/perl\n use strict;\n\n foreach my $i ( \"01\" .. \"30\" ) {\n do stuff...\n }\n</code></pre>\n"}, {"tags": ["perl", "debian", "code-coverage"], "comments": [{"owner": {"reputation": 186, "user_id": 4685758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6459711581ed5aef648fae9d8070cad6?s=128&d=identicon&r=PG", "display_name": "Bernhard M.", "link": "https://stackoverflow.com/users/4685758/bernhard-m"}, "edited": false, "score": 2, "creation_date": 1574107097, "post_id": 58916015, "comment_id": 104105321, "body": "I think the third case was closest to working. The header error can mean that output was written to stdout before the CGI wrote the header. Try <code>require Devel::Cover</code> further down in the code. Permissions can also be a problem. You can watch the process with <code>strace -f -p $PID</code>"}], "owner": {"reputation": 41, "user_id": 12377092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a5a7e1427d43917e8efffabb0e79b1?s=128&d=identicon&r=PG&f=1", "display_name": "sfischer", "link": "https://stackoverflow.com/users/12377092/sfischer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1574085351, "creation_date": 1574084766, "last_edit_date": 1574085351, "question_id": 58916015, "link": "https://stackoverflow.com/questions/58916015/perl-coverage-on-debian-vm-running-bugzilla", "title": "Perl Coverage on Debian VM running Bugzilla", "body": "<p>I am trying to record Perl coverage.<br />\nI use the ready to use Debian VM from Turnkey running Bugzilla. (<a href=\"https://www.turnkeylinux.org/download?file=turnkey-bugzilla-14.2-jessie-amd64-vmdk.zip\" rel=\"nofollow noreferrer\">https://www.turnkeylinux.org/download?file=turnkey-bugzilla-14.2-jessie-amd64-vmdk.zip</a>)<br />\nI was able to install the perl coverage module <a href=\"https://metacpan.org/release/Devel-Cover\" rel=\"nofollow noreferrer\">Devel::Cover</a>, and can record the coverage when executing a perl script in the console.</p>\n\n<p>However, I have problems to record the coverage for the .cgi files when executing the Bugzilla webpage.</p>\n\n<p>I tried several solutions but none led to success:</p>\n\n<ul>\n<li><p>Setting the enviorment variable like: <code>export PERL5OPT\"-MDevel::Cover\"</code> (to always run perl with coverage) had no noticeable effect.</p></li>\n<li><p>Adding <code>use Devel::Cover;</code> to var/www/bugzilla/mod_perl.pl also had no noticeable effect.</p></li>\n<li><p>Adding <code>use Devel::Cover;</code> to var/www/bugzilla/index.cgi lead to an Internal Server Error when calling the Bugzilla page (the apache2 error log showed a permission error when trying to create directory cover_db). After changeing the permission in directory var/www/bugzilla to maximum access for all I still get the server error but the coverage for the error is recorded, which is weird (the error log shows a bad header error for index.cgi).</p></li>\n<li><p>I also tried to add the module fia the apache server configurations: etc/apache2/sites-enabled/bugzilla.conf by adding <code>SetEnv PERL5OPT \"-MDevel::Cover=-dir,/var/www/bugzilla\"</code> there, but this did also not have any noticeable effect.</p></li>\n</ul>\n\n<p>Does anybody have an idea what the problem could be?<br />\nOr anything elso I should try? (I am new to Perl and also not much of a Linux expert)<br />\nCould it be a permissions issue, because the server is not run under root as far as I know, but www-data?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1574077488, "post_id": 58913755, "comment_id": 104089556, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1574078853, "creation_date": 1574078853, "answer_id": 58914226, "question_id": 58913755, "link": "https://stackoverflow.com/questions/58913755/removing-the-trailing-delimiters-dynamically/58914226#58914226", "title": "Removing the trailing delimiters dynamically", "body": "<p>The documentation for Perl's <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split()</code></a> function says this:</p>\n\n<blockquote>\n  <p>If LIMIT is omitted (or, equivalently, zero), then it is usually treated as if it were instead negative but with the exception that trailing empty fields are stripped (empty leading fields are always preserved)</p>\n</blockquote>\n\n<p>So, the default behaviour of <code>split()</code> is to remove trailing empty fields. We can then use <a href=\"https://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\"><code>join()</code></a> to regenerate the original record minus any trailing delimiters.</p>\n\n<p>So it can be as simple as:</p>\n\n<pre><code># Note that '|' has a special meaning in regexes, so we\n# need to escape it, using '\\'.\nmy $output_line = join '|', split /\\|/, $input_line;\n</code></pre>\n\n<p>Or, putting it in a complete program that reads from <code>STDIN</code> and writes to <code>STDOUT</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nwhile (&lt;&gt;) {\n  chomp;\n  say join '|', split /\\|/;\n}\n</code></pre>\n\n<p>If you put that in a file called <code>rmtrailing</code>, then it can be run from a command line like this:</p>\n\n<pre><code>$ perl rmtrailing &lt; your_input_file.txt &gt; your_output_file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1574079498, "creation_date": 1574079498, "answer_id": 58914396, "question_id": 58913755, "link": "https://stackoverflow.com/questions/58913755/removing-the-trailing-delimiters-dynamically/58914396#58914396", "title": "Removing the trailing delimiters dynamically", "body": "<p>The following will delete the trailing pipes from all lines:</p>\n\n<pre><code>perl -ple's/\\|+\\z//'\n</code></pre>\n\n<p>If you want to leave trailing pipes in place on all but the last line, you can use the following:</p>\n\n<pre><code>perl -nle'\n   print($prev) if defined($prev);\n   $prev = $_;\n   END {\n      if (defined($prev)) {\n         $prev =~ s/\\|+\\z//;\n         print($prev);\n      }\n   }\n'\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a></p>\n"}, {"tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": false, "score": 0, "last_activity_date": 1574081883, "creation_date": 1574081883, "answer_id": 58915095, "question_id": 58913755, "link": "https://stackoverflow.com/questions/58913755/removing-the-trailing-delimiters-dynamically/58915095#58915095", "title": "Removing the trailing delimiters dynamically", "body": "<p>This sed one-liner will do the job:</p>\n\n<pre><code>sed '$s/|*$//' file\n</code></pre>\n\n<h3>Test:</h3>\n\n<pre><code>kent$  cat f\na|b\na|b||||||\n||||\nfoo|bar||||||\n\nkent$  sed '$s/|*$//' f\na|b\na|b||||||\n||||\nfoo|bar\n</code></pre>\n\n<p>You see that only the last line was changed.</p>\n"}], "owner": {"reputation": 1, "user_id": 7754865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e85a0352cc108b1ced9a98bb444fec1?s=128&d=identicon&r=PG", "display_name": "S.A.K", "link": "https://stackoverflow.com/users/7754865/s-a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1574081883, "creation_date": 1574077177, "last_edit_date": 1574077921, "question_id": 58913755, "link": "https://stackoverflow.com/questions/58913755/removing-the-trailing-delimiters-dynamically", "title": "Removing the trailing delimiters dynamically", "body": "<p>I am new to scripting and I need to write a script to remove unwanted delimiter from the last line of the flat file which will be changing dynamically.</p>\n\n<p>EG: </p>\n\n<pre><code>1|AK|1,asd|CHN|TN|IN|600001\n2|AK|1,asd|CHN|TN|IN|600001\nAK|10-01-2019|2||||\n</code></pre>\n\n<p>Like this different files are there and row and column will be varying for each file.\nSo how to remove the trailing pipelines only from the last row (I,e) after 2</p>\n\n<p>Thanks and Regards, <br />\nAravind Kumar Sekar</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574070792, "post_id": 58911154, "comment_id": 104085757, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574095769, "post_id": 58911154, "comment_id": 104100010, "body": "Please don&#39;t add useful information like this in a comment. Instead, please <a href=\"https://stackoverflow.com/posts/58911154/edit\">edit your question</a> and add it there."}, {"owner": {"reputation": 1, "user_id": 12390117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773de9b9487a9623566f8b6ebc4b9539?s=128&d=identicon&r=PG&f=1", "display_name": "jak", "link": "https://stackoverflow.com/users/12390117/jak"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1574095856, "post_id": 58911154, "comment_id": 104100053, "body": "PS: I am trying these regexes using an online regex tester."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12390117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773de9b9487a9623566f8b6ebc4b9539?s=128&d=identicon&r=PG&f=1", "display_name": "jak", "link": "https://stackoverflow.com/users/12390117/jak"}, "edited": false, "score": 0, "creation_date": 1574098353, "post_id": 58911299, "comment_id": 104101330, "body": "If there is no comment there is not even the third tab :("}, {"owner": {"reputation": 1, "user_id": 12390117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773de9b9487a9623566f8b6ebc4b9539?s=128&d=identicon&r=PG&f=1", "display_name": "jak", "link": "https://stackoverflow.com/users/12390117/jak"}, "edited": false, "score": 0, "creation_date": 1574117873, "post_id": 58911299, "comment_id": 104109823, "body": "Your example searches 2 times for 0 or more non &#39;tab&#39; characters and a &#39;tab&#39; (in my example text: &quot;line number&quot; + &quot;some text&quot;), then searches again for 0 or more non &#39;tab&#39; (&quot;translated text&quot;) and reset (\\K). Now continue searching for a &#39;tab&#39; (third &#39;tab&#39;) but if the string is finished (&quot;some comment&quot; is omitted) there is no &#39;tab&#39; and your example, in this case, does not work. I would like it to work both when there is &quot;some comment&quot; and when there is not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 12390117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773de9b9487a9623566f8b6ebc4b9539?s=128&d=identicon&r=PG&f=1", "display_name": "jak", "link": "https://stackoverflow.com/users/12390117/jak"}, "edited": false, "score": 0, "creation_date": 1574145661, "post_id": 58911299, "comment_id": 104116433, "body": "It doesn&#39;t match when they&#39;re is no third tab, but that&#39;s fine because there is nothing to delete of there is no third tab. So it <i>does</i> work"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1574096453, "last_edit_date": 1574096453, "creation_date": 1574068780, "answer_id": 58911299, "question_id": 58911154, "link": "https://stackoverflow.com/questions/58911154/how-to-extract-a-substring-from-a-list-of-strings-in-a-nonconstant-context-using/58911299#58911299", "title": "How to extract a substring from a list of strings in a nonconstant context using regex", "body": "<p>Delete the third tab and everything that follows:</p>\n\n<pre><code> $line =~ s/^(?:[^\\t]*\\t){2}[^\\t]*\\K\\t[^\\n]*//;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12390117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773de9b9487a9623566f8b6ebc4b9539?s=128&d=identicon&r=PG&f=1", "display_name": "jak", "link": "https://stackoverflow.com/users/12390117/jak"}, "is_accepted": false, "score": 0, "last_activity_date": 1574120831, "last_edit_date": 1574120831, "creation_date": 1574120525, "answer_id": 58924551, "question_id": 58911154, "link": "https://stackoverflow.com/questions/58911154/how-to-extract-a-substring-from-a-list-of-strings-in-a-nonconstant-context-using/58924551#58924551", "title": "How to extract a substring from a list of strings in a nonconstant context using regex", "body": "<p>This regex does the job I expect:</p>\n\n<pre><code>/^((?&gt;\\d+))(?:(?&gt;\\s+))(?&gt;[^\\t]+)\\t((?&gt;[^\\t\\n]+))/gm\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12390117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773de9b9487a9623566f8b6ebc4b9539?s=128&d=identicon&r=PG&f=1", "display_name": "jak", "link": "https://stackoverflow.com/users/12390117/jak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1574120831, "creation_date": 1574068237, "last_edit_date": 1574096269, "question_id": 58911154, "link": "https://stackoverflow.com/questions/58911154/how-to-extract-a-substring-from-a-list-of-strings-in-a-nonconstant-context-using", "title": "How to extract a substring from a list of strings in a nonconstant context using regex", "body": "<p>I have a txt file formatted in this way: (<code>&lt;s&gt;=space character, &lt;t&gt;=tab character, &lt;n&gt;=end line</code>)</p>\n\n<pre><code>1&lt;s&gt;&lt;t&gt;some text&lt;s&gt;&lt;t&gt;translated text&lt;s&gt;&lt;t&gt;some comment&lt;n&gt;\n2&lt;s&gt;&lt;t&gt;some text&lt;s&gt;&lt;t&gt;translated text&lt;n&gt;\n3&lt;s&gt;&lt;t&gt;some text&lt;s&gt;&lt;t&gt;translated text&lt;s&gt;&lt;t&gt;some comment&lt;s&gt;&lt;t&gt;another comment&lt;n&gt;\n4&lt;s&gt;&lt;t&gt;some text&lt;s&gt;&lt;t&gt;translated text&lt;s&gt;&lt;t&gt;some comment&lt;n&gt;\n5&lt;s&gt;&lt;t&gt;some text&lt;s&gt;&lt;t&gt;translated text&lt;n&gt;\n6&lt;s&gt;&lt;t&gt;some text&lt;s&gt;&lt;t&gt;translated text&lt;n&gt;\n.\n.\n</code></pre>\n\n<p>As you can see, there are comments in some lines and in others not. I would need to group the line number and also the only text translated using perl regex. I'm having trouble ignoring the rest of the line after \"translated text\".\nI tried two versions:</p>\n\n<p><code>/^(\\d+)\\s+(?:[^\\t]+)\\t(.+)(\\t|$)/gm</code></p>\n\n<ul>\n<li>this regex works if there are no comments but it does not divide the translation from the comments in the other lines.</li>\n</ul>\n\n<p><code>/^(\\d+)\\s+(?:[^\\t]+)\\t([^\\t]+)/gm</code></p>\n\n<ul>\n<li>this regex works with the lines that have comments but not for the others as it stops at the first tab of the next line</li>\n</ul>\n\n<p>Thank you in advance for your answers</p>\n"}, {"tags": ["perl", "exception"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574040359, "post_id": 58906167, "comment_id": 104076436, "body": "See <a href=\"https://stackoverflow.com/a/45991317/4653379\">this post</a> for getting stacktraces ... (there is a lot more on that out there) Something like that?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1574040399, "post_id": 58906167, "comment_id": 104076451, "body": "See <a href=\"https://stackoverflow.com/a/42183690/4653379\">this post</a> for a way to walk the stack and get lexicals in the frames"}], "answers": [{"comments": [{"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574059374, "post_id": 58907128, "comment_id": 104080683, "body": "I somehow avoided <code>Carp</code> so far, but it seems to be the right tool for my problem, for the biggest part. Still, I don&#39;t see, how could I provide dynamic context for <code>$other_info</code> in die-handler? Like specific error-message for the function."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574060138, "post_id": 58907128, "comment_id": 104080952, "body": "@w.k  <code>Carp</code> is definitely useful and <i>the</i> tool for this, in principle.  OK -- so &quot;<i>dynamic context</i>&quot; and &quot;<i>specific error-message</i>&quot; -- what do you mean by that? What kind of things -- can you give me an example?"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574060439, "post_id": 58907128, "comment_id": 104081049, "body": "Like, I have initialized some basic data (<code>$base</code>) in a function to make a database query, but this database call dies. Now I need to form error-message based on <code>$base</code>."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574060806, "post_id": 58907128, "comment_id": 104081179, "body": "If I understand correctly, <code>Padwalker</code> makes possible to look any lexical variable existed before <code>die</code>? Completely new tool for me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574062897, "post_id": 58907128, "comment_id": 104082088, "body": "@w.k Ah, OK, so scoop up any old variables you want (so to speak) ...  so, once a <code>die</code> is thrown, you can look at either 1) whatever is seen in the scope in which the handler is, or 2) go up the call stack and see all lexicals in each frame. (Only <i>in that call</i>&#39;s stack.)  One example of precisely that is in the post linked at the very end.  (You can print things out of an <code>END</code> block as well, but that&#39;s really global.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574063218, "post_id": 58907128, "comment_id": 104082225, "body": "@w.k  If you really need more than this ... perhaps consider a full blown logging system, so there&#39;d be plenty of info already logged whenever something goes down."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574187598, "post_id": 58907128, "comment_id": 104139448, "body": "@zdim.. hello dear friend.. hope you are doing good!.. happy men&#39;s day!.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574187652, "post_id": 58907128, "comment_id": 104139480, "body": "@stack0114106 hello hello -- very good to &quot;see&quot; you!!  :)  I hope all is very well with you :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574187757, "post_id": 58907128, "comment_id": 104139537, "body": "@stack0114106 ( I didn&#39;t even know about &quot;men&#39;s day&quot;!  ha!  :)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574187770, "post_id": 58907128, "comment_id": 104139549, "body": "thank you.. now I&#39;m moving towards clouds and containers..not able to spend time on SO.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574187864, "post_id": 58907128, "comment_id": 104139603, "body": "@stack0114106 oh, OK -- that&#39;s interesting.  Yeah, SO (quietly) takes time.  It&#39;s been fun and I learned a lot but ... I reduced activity, and will reduce it further"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1574188010, "post_id": 58907128, "comment_id": 104139688, "body": "yes.. me too!.. it has been a good learning in the past.. the work keeps me busy all the time.. cloud,containers, spark, etc..."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1574273161, "last_edit_date": 1574273161, "creation_date": 1574043054, "answer_id": 58907128, "question_id": 58906167, "link": "https://stackoverflow.com/questions/58906167/how-to-provide-more-context-for-die-handler/58907128#58907128", "title": "How to provide more context for die-handler?", "body": "<p>I am not certain what \"context\" you want, but <a href=\"https://perldoc.perl.org/Carp.html\" rel=\"nofollow noreferrer\">Carp</a> is our friend here.</p>\n\n<p>For one, by including <code>use Carp::Always;</code> we get the full stack backtrace printed on all errors.</p>\n\n<p>If you'd rather be selective, the simplest thing is to directly use a suitable <code>Carp</code> routine</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Carp;\n\neval { my $y = 10;  x($y) };\nif ($@) {\n    print \"eval: $@\";\n    # print/log else as wanted, recover and proceed or exit\n}\n\nsay \"done\";\n\nsub x {\n    local $SIG{__DIE__} = \\&amp;Carp::confess;\n    # ...\n    my $bad_math = $_[0] / 0;\n}\n</code></pre>\n\n<p>The <code>Carp::confess</code> dies, with a full stack backtrace, but in your example that <code>die</code> is caught by the <code>eval</code>.  By die-ing via <code>confess</code> and catching the exception you get the \"call context\" from <code>confess</code> but also retain control to proceed as you wish in the <code>eval</code> \"catch.\"</p>\n\n<p>This prints</p>\n\n<pre>\neval: Illegal division by zero at error_context.pl line 18.\n at error_context.pl line 18.\n        main::x(10) called at error_context.pl line 7\n        eval {...} called at error_context.pl line 7\ndone\n</pre>\n\n<p>Without <code>eval</code> the program would terminate (unless there's an <code>eval</code> further up the stack) but we'd still get the full backtrace of the call. There are routines in <code>Carp</code> which don't die, and among them <code>cluck</code> also prints backtrace.</p>\n\n<p>For a more custom handling use the <code>$SIG{__DIE__}</code> hook. A little snag with <code>Carp</code> is that the routine with backtrace which doesn't die, <code>cluck</code>, just prints to <code>STDERR</code> stream; we can't easily get that message to build it up further. The trace used to be in <code>longmess</code> but is not anymore and I don't think that one can get the stacktrace from <code>Carp</code> without <code>die</code>-ing. </p>\n\n<p>Then use <code>confess</code>, which returns the trace, and wrap the call with <code>eval</code></p>\n\n<pre><code>sub _die_handler {\n    my $other_info = '...';\n    Carp::confess($other_info . \"\\n\" . $_[0]);\n}\n...\nsub x { \n    local $SIG{__DIE__} = \\&amp;_die_handler;\n    ...\n}\n...\neval { x() };\nif ($@) { ... }  #--&gt;  confess's trace with $other_info prepended \n</code></pre>\n\n<p>so as you handle its <code>die</code> the whole message is then in <code>$@</code> in your <code>eval</code>. For this to work you still need that <code>eval</code>.  </p>\n\n<p>If you'd rather be able to handle the exception completely in the hook see <a href=\"https://metacpan.org/pod/Devel::StackTrace\" rel=\"nofollow noreferrer\">Devel::StackTrace</a></p>\n\n<pre><code>use Devel::StackTrace;\n\nsub _die_handler {\n    my $trace = Devel::StackTrace-&gt;new;\n    # Add other info to `$trace` object, or build error object/structure \n    # Print/log/etc  $trace (or your new error structure/object), or\n    #die $trace;\n}\n</code></pre>\n\n<p>The  <code>Devel::StackTrace</code> is of course useful also if you want to re-throw, in which case you can pass its object to <code>die</code>.  See docs, in particular the constructor options.</p>\n\n<p><em>A general warning: careful with <code>$SIG{__DIE__}</code>; it can be tricky. I'd say, better just use <code>Carp</code>.</em></p>\n\n<p>Finally, if by \"<em>context</em>\" you mean more detail from the call stack, you can walk the stack by hand using <code>caller</code> and retrieve lexicals from each frame by <code>PadWalker</code>.  An example in <a href=\"https://stackoverflow.com/a/42183690/46533790\">this post</a>.</p>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 58907128, "answer_count": 1, "score": 4, "last_activity_date": 1574273161, "creation_date": 1574032996, "question_id": 58906167, "link": "https://stackoverflow.com/questions/58906167/how-to-provide-more-context-for-die-handler", "title": "How to provide more context for die-handler?", "body": "<p>I'd like to have more context in error messages in cases some function has to <code>die</code>. In some situations I can provide it, in others I can't find a good way. For example, using the <code>RaiseError</code> option in connection to Postgres I get exceptions on every failure, but I can't provide more context into those errors. I have tried to use <code>die</code>-handler, but I can't figure out a sane way to include arguments for called subroutine, at least:</p>\n\n<pre><code>try {\n  x( 'y' );\n} catch {\n  say \"CATCHED error: $_\";\n};\n\nsub _die_handler {\n  my @caller = caller(1);\n  say \"@caller\"; # how to access @_ for this frame \n  die @_;\n}\n\nsub x {\n local $SIG{__DIE__} = \\&amp;_die_handler;\n die;\n}\n\n</code></pre>\n\n<p>How could I see in the example above, that <code>x</code> was called with 'y' as an argument?</p>\n\n<p>If I have not modified <code>@_</code> in my subroutine, could I access it from my <code>_die_handler</code>? Or could I provide some data to the handler beforehand?</p>\n\n<p>Two options I see now:</p>\n\n<ul>\n<li>through some global variable, which I always populate with needed data beforehand in case there may occur some error</li>\n<li>using objects, with die_handler-method in it</li>\n</ul>\n\n<p>Better ways to do it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1574023331, "post_id": 58904389, "comment_id": 104072678, "body": "This seems to be pretty messy. Hiring someone who understands Perl would be the best option."}, {"owner": {"reputation": 5, "user_id": 12387978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEZhVZtjVd5WCwtPngvzKMA42MC3i2OL_xyokI_g=k-s128", "display_name": "Magne", "link": "https://stackoverflow.com/users/12387978/magne"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1574023570, "post_id": 58904389, "comment_id": 104072755, "body": "You&#39;re right. Do you know anywhere we can rent someone who understands perl?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1574027674, "post_id": 58904389, "comment_id": 104073883, "body": "jobs.perl.org used to be a good place to advertise Perl jobs."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1574033278, "post_id": 58904389, "comment_id": 104075075, "body": "I have used freelancer.com, there  is coders of any kind"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12387978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEZhVZtjVd5WCwtPngvzKMA42MC3i2OL_xyokI_g=k-s128", "display_name": "Magne", "link": "https://stackoverflow.com/users/12387978/magne"}, "edited": false, "score": 0, "creation_date": 1574020509, "post_id": 58904459, "comment_id": 104071894, "body": "Hi, just an understanding of what&#39;s going on. There&#39;s a migration project now, moving this script from a customers IT- partner til ours. We need to understand what changes we need to make, to make it work. I can add the other scripts too also.   Thanks :)"}, {"owner": {"reputation": 5, "user_id": 12387978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEZhVZtjVd5WCwtPngvzKMA42MC3i2OL_xyokI_g=k-s128", "display_name": "Magne", "link": "https://stackoverflow.com/users/12387978/magne"}, "edited": false, "score": 0, "creation_date": 1574022631, "post_id": 58904459, "comment_id": 104072478, "body": "+Bjelli,   changed the post now. Please help! :D thanks"}], "tags": [], "owner": {"reputation": 8109, "user_id": 153574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/240fded6e397da0150db90ce28b91ac0?s=128&d=identicon&r=PG", "display_name": "bjelli", "link": "https://stackoverflow.com/users/153574/bjelli"}, "is_accepted": false, "score": 1, "last_activity_date": 1574019669, "creation_date": 1574019669, "answer_id": 58904459, "question_id": 58904389, "link": "https://stackoverflow.com/questions/58904389/need-assistance-understanding-perl-script/58904459#58904459", "title": "Need assistance understanding Perl script", "body": "<p>A quick overview:</p>\n\n<p>the file you called \".bad\"-file </p>\n\n<ol>\n<li>makes a conneciton to an ftp server,</li>\n<li>looks for files on the server (using command <code>ls</code>),</li>\n<li>picks out only the files with a filename starting with the  \"e.\" (pattern <code>/^e.*/</code>),</li>\n<li>downloads the files one by one and runs yet another perl command on them called <code>load_edl400ba.pl</code>.</li>\n</ol>\n\n<p>Maybe you can be more specific about what you already know and what you still need to understand?</p>\n"}], "owner": {"reputation": 5, "user_id": 12387978, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEZhVZtjVd5WCwtPngvzKMA42MC3i2OL_xyokI_g=k-s128", "display_name": "Magne", "link": "https://stackoverflow.com/users/12387978/magne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1574060692, "creation_date": 1574019142, "last_edit_date": 1574060692, "question_id": 58904389, "link": "https://stackoverflow.com/questions/58904389/need-assistance-understanding-perl-script", "title": "Need assistance understanding Perl script", "body": "<p>can someone help me understand what this script does in, Perl?\nI've edited out all sensitive info. and such connections to DB. </p>\n\n<p>The user who made this once, is probably dead by now, and we need it in a migration project.</p>\n\n<p>Thanks in advance. :) </p>\n\n<hr>\n\n<h2>edl400ba.bat file:</h2>\n\n<hr>\n\n<pre><code>@echo off\nrem Script called from file_import.bat\nrem Is called with default parameters\nrem %1 %2 %3 %4 %5 %6\nrem &lt;filename&gt; &lt;db_login&gt; &lt;ftp_host&gt; &lt;ftp_user&gt; &lt;ftp-password&gt; &lt;ftp-catalog&gt;\nrem perl edl400ba.pl \"%area%\" %area% %ip% slf %name003% &gt;&gt; \\temp\\edl400ba.log\n\nrem If Perl is installed below ORACLE_HOME must variable PERL5LIB be blanked\nset PERL5LIB=\nset PATH=C:\\strawberry\\perl\\bin;%PATH%\n\nperl edl400ba.pl \"%area%\" %2 %3 %4 %5 &gt;&gt; \\temp\\edl400ba.log\n</code></pre>\n\n<hr>\n\n<h2>edl400ba.pl file:</h2>\n\n<hr>\n\n<pre><code>use Net::FTP;\n\n$catalog=$ARGV[0] ; # e.g. %area%\n$sqluser=$ARGV[1] ; # oracle connection string; user/user@user\n#$sqluser=\"%area%\" ;\n$ftp_adr=$ARGV[2] ; # ftp server, ip adress\n$ftp_user=$ARGV[3];\n$ftp_pwd=$ARGV[4] ;\n$loggfile=\"$catalog/proc/ftplog.$$\" ;\n$programname=\"EDL400BA\" ;\n\n$local_dir=\"%area%\";\n$read_catalog=$katalog . \"/%area%\" ;\n\nchdir $catalog . \"/\" . $local_dir || die \"could not cwd to $katalog . \"/\" . $local_dir \\n\";\n\n$ftp = Net::FTP-&gt;new($ftp_adr, Debug =&gt; 0) or die \"Can't start ftp\\n\";\n$ftp-&gt;login($ftp_user,$ftp_pwd) or die \"Login error: $ftp_user/$ftp_pwd\";\n\n$filecount=0;\nforeach $file ($ftp-&gt;ls) {\nif ($file =~ /^e.*/ ) {\n$ftp-&gt;get($file) or die \"Can't get the file $file\\n\";\n$filecount++;\n$cmd = \"perl $catalog/script/load_edl400ba.pl $catalog $sqluser $file\";\nif ( system($cmd) == 0 ) {\n$ftp-&gt;delete($file) or print \"Couldn't delete the file: $file\\n\";\n}\nelse {die \"Error loading file: $file - ending.\\n\"};\nrename $catalog . \"/\" . $local_dir . \"/\" . $file, $read_catalog . \"/\" . $file;\n}\n}\n\n$ftp-&gt;quit || print \"Error closing ftp (ignored)\\n\";\n\nprint \"$filecount file(s) grabbed from the server $ftp_adr\\n\";\n</code></pre>\n\n<hr>\n\n<h2>edl400ba_load file:</h2>\n\n<hr>\n\n<pre><code>CATALOG=$1\nUSER=$2\nFILE1=$3\nGRNS_IN=$CATALOG /%area%\nORACLE_SID=egg;export $ORACLE_SID\n\n# If the bad-file is found from f|r it shall be deleted\nif test -r $CATALOG/bad/edl400ba.bad;\nthen rm $CATALOG/bad/edl400ba.bad;\nfi;\n\n# rows set to 64000 so that nothing is read in by accident\ncd $CATALOG\n\nsqlldr CONTROL=ctl/edl400ba.ctl, LOG=log/edl400ba, BAD=bad/edl400ba, DATA=$GRNS_IN/$FILe1, USERID=$USER, ERRORS=0,LOAD=99999, DISCARD=dsc/edl400ba ,DISCARDMAX=99999,ROWS=64000\n\n# If the bad-filen has been created, an error message is given\nif test -r $CATALOG/bad/edl400ba.bad;\nthen exit 9;\n#else mv $GRNS_IN/$FILE1 $GRNS_OUT/$FILE1.read;\nfi;\n</code></pre>\n\n<hr>\n\n<h2>pdi100ba.bat</h2>\n\n<hr>\n\n<pre><code>@echo off\nrem Script called from file_import.bat\nrem Is called with default parameters (common format for multiple batch files, not all are relevant)\nrem   %1        %2        %3            %4        %5            %6      %7\nrem &lt;filename&gt; &lt;db_login&gt; &lt;ftp_host&gt; &lt;ftp_user&gt; &lt;ftp-password&gt; &lt;ftp-catalog&gt; &lt;rapp_p1&gt; \n\nset CATALOG=\\egg_price\\price\n\nrem If Perl is installed below ORACLE_HOME must variable PERL5LIB be blanked\nset PERL5LIB=\nset PATH=C:\\strawberry\\perl\\bin;%PATH%\n\nperl pdi100ba.pl \"/egg_pris/pris\" %2 %3 %4 %5 %6 &gt;&gt; \\temp\\pdi100ba.log\n</code></pre>\n\n<hr>\n\n<h1>pdi100ba.pl</h1>\n\n<hr>\n\n<pre><code>use Net::FTP;\n\n$catalog=$ARGV[0] ;     # e.g. /egg_price/price\n$sqluser=$ARGV[1] ;     # oracle connection string; user/user@user\n$ftp_adr=$ARGV[2] ; # ftp server, ip adress\n$ftp_user=$ARGV[3]; \n$ftp_pwd=$ARGV[4] ;\n$loggfile=\"$catalog/proc/ftplog.$$\" ;\n$programname=\"PDI100BA\" ;\n\n$local_dir=\"grns_in/readin/readout\";\n$read_catalog=$catalog . \"/grns_in/readin/readout\" ;\n\n\nchdir \"$catalog/$local_dir\" || die \"could not cwd to $catalog/$local_dir \\n\";\n\n$ftp = Net::FTP-&gt;new($ftp_adr, Debug =&gt; 0) or die \"Can't start ftp\\n\";\n$ftp-&gt;login($ftp_user,$ftp_pwd) or die \"Login error: $ftpuser/$ftppwd\";\n\n\n$filecount=0;\nforeach $file ($ftp-&gt;ls) {\n    if ($file =~ /^k.*/ ) {\n        $ftp-&gt;get($file) or die \"Can't get the file $file\\n\";\n        $filecount++;\n        $cmd = \"perl $catalog/script/load_pdi100ba.pl $catalog $sqluser $file\";\n        if ( system($cmd) == 0 ) {\n            $ftp-&gt;delete($file) or print \"Couldn't delete the file: $file\\n\";\n        }\n        else {die \"Error loading file: $file - ending.\\n\"}; \n                rename $catalog . \"/\" . $local_dir . \"/\" . $file, $read_catalog . \"/\" . $file;\n    }\n}\n\n$ftp-&gt;quit; \n\nprint \"$filecount file(s) grabbed from the server $ftp_adr\\n\";\n\nThanks in advance. :) \n</code></pre>\n\n<hr>\n\n<h1>pdi100ba_load</h1>\n\n<hr>\n\n<pre><code>CATALOG=$1\nUSER=$2\nFILE1=$3\nGRNS_IN=$CATALOG/grns_in/readin/readout\nORACLE_SID=price;export $ORACLE_SID\n\n# If the bad-file is found from f|r it shall be deleted \nif test -r $CATALOG/bad/pdi100ba.bad;\nthen rm $CATALOG/bad/pdi100ba.bad;\nfi;\n\n# rows set to 64000 so that nothing is read in by accident\ncd $CATALOG\necho  \"FILENAME constant \\\"$FILE1\\\" )\"    &gt; ctl/pdi100ba_del2\ncat ctl/pdi100ba_del1 ctl/pdi100ba_del2 &gt; ctl/pdi100ba.ctl\n\nsqlldr CONTROL=ctl/pdi100ba.ctl, LOG=log/pdi100ba, BAD=bad/pdi100ba, DATA=$GRNS_IN/$FILE1, USERID=$USER, ERRORS=0,LOAD=99999, DISCARD=dsc/pdi100ba ,DISCARDMAX=99999,ROWS=64000\n\n# If the bad-filen has been created, an error message is given\nif test -r $CATALOG/bad/pdi100ba.bad;\nthen exit 9;\n#else mv $GRNS_IN/$FILE1 $GRNS_OUT/$FILE1.read;\nfi;\n</code></pre>\n\n<hr>\n\n<h1>pdi200ba.bat</h1>\n\n<hr>\n\n<pre><code>@echo off\nrem Script called from file_import.bat\nrem Is called with default parameters (common format for multiple batch files, not all are relevant)\nrem   %1        %2        %3            %4        %5            %6      %7\nrem &lt;filename&gt; &lt;db_login&gt; &lt;ftp_host&gt; &lt;ftp_user&gt; &lt;ftp-password&gt; &lt;ftp-catalog&gt; &lt;rapp_p1&gt; \n\nset CATALOG=\\egg_price\\price\n\nrem If Perl is installed below ORACLE_HOME must variable PERL5LIB be blanked\nset PERL5LIB=\nset PATH=C:\\strawberry\\perl\\bin;%PATH%\n\nperl pdi200ba.pl \"/egg_price/price\" %2 %3 %4 %5 %6 &gt;&gt; \\temp\\pdi200ba.log\n</code></pre>\n\n<hr>\n\n<h1>pdi200ba.pl</h1>\n\n<hr>\n\n<pre><code>    use Net::FTP;\n\n    $CATALOG=$ARGV[0] ;     # e.g. /egg_price/egg\n    $sqluser=$ARGV[1] ;     # oracle connection string; user/user@user\n    $ftp_adr=$ARGV[2] ; # ftp server, ip adress\n    $ftp_user=$ARGV[3]; \n    $ftp_pwd=$ARGV[4] ;\n\n    $loggfile=\"$CATALOG/proc/ftplog.$$\" ;\n    $programname=\"PDI200BA\" ;\n\n    $local_dir=\"grns_in/readin/readout\";\n    $read_CATALOG=$CATALOG . \"/grns_in/readin/readout\" ;\n\n\n    chdir \"$CATALOG/$local_dir\" || die \"could not cwd to $CATALOG/$local_dir\\n\";\n\n\n    $ftp = Net::FTP-&gt;new($ftp_adr, Debug =&gt; 0) or die \"Kan ikke starte ftp\\n\";\n    $ftp-&gt;login($ftp_user,$ftp_pwd) or die \"Feil ved innlogging: $ftp_user/$ftp_pwd\";\n\n    $filecount=0;\n    foreach $file ($ftp-&gt;ls) {\n        if ($file =~ /^a.*/ ) {\n            $ftp-&gt;get($file) or die \"Can't start $file\\n\";\n            $filecount++;\n            $cmd = \"perl $CATALOG/script/load_pdi200ba.pl $CATALOG $sqluser $file\";\n            if ( system($cmd) == 0 ) {\n                $ftp-&gt;delete($file) or print \"Couldn't delete the file: $file\\n\";\n            }\n            else {die \"Error loading file: $file - ending.\\n\"}; \n                    rename $CATALOG . \"/\" . $local_dir . \"/\" . $file, $read_CATALOG . \"/\" . $file;\n        }\n    }\n\n    $ftp-&gt;quit; \n\n    print \"$filecount file(s) grabbed from the server $ftp_adr\\n\";\n</code></pre>\n\n<hr>\n\n<p><strong># pdi200ba_load</strong></p>\n\n<hr>\n\n<pre><code>CATALOG=$1\nUSER=$2\nFILE1=$3\nGRNS_IN=$CATALOG/grns_in/readin/readout\nORACLE_SID=price;export $ORACLE_SID\n\n# If the bad-file is found from f|r it shall be deleted \nif test -r $CATALOG/bad/pdi200ba.bad;\nthen rm $CATALOG/bad/pdi200ba.bad;\nfi;\n\n# rows set to 64000 so that nothing is read in by accident\ncd $CATALOG\necho  \"FILENAME constant \\\"$FILE1\\\" )\"    &gt; ctl/pdi200ba_del2\ncat ctl/pdi200ba_del1 ctl/pdi200ba_del2 &gt; ctl/pdi200ba.ctl\n\nsqlldr CONTROL=ctl/pdi200ba.ctl, LOG=log/pdi200ba, BAD=bad/pdi200ba, DATA=$GRNS_IN/$FILE1, USERID=$USER, ERRORS=0,LOAD=99999, DISCARD=dsc/pdi200ba ,DISCARDMAX=99999,ROWS=64000\n\n#  If the bad-filen has been created, an error message is given\nif test -r $CATALOG/bad/pdi200ba.bad;\nthen exit 9;\n#else mv $GRNS_IN/$FILE1 $GRNS_OUT/$FILE1.read;\nfi;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1573977869, "post_id": 58898022, "comment_id": 104061351, "body": "See also <a href=\"https://perldoc.perl.org/perlpacktut.html\" rel=\"nofollow noreferrer\">perldoc perlpacktut</a>"}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1573983238, "post_id": 58898864, "comment_id": 104062250, "body": "Hello, can you explain to me each of the code and also the agorithm used to have the result. Do I need to import feature modules qw (say);"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1573983461, "post_id": 58898864, "comment_id": 104062292, "body": "@obela06 The algorithm is explained in <a href=\"https://perldoc.perl.org/perlpacktut.html\" rel=\"nofollow noreferrer\"><code>perlpacktut</code></a>. Please have a look. You do not need to import modules to use the <code>say</code> function, just enable the <code>say</code> feature with <code>use feature qw(say)</code>"}, {"owner": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1573988446, "post_id": 58898864, "comment_id": 104063292, "body": "Haegland thanks a lot. I have another question, how can i export the results in another text file in a specific repository. And Also if i want to add this results to a mysql database how can i modify this perl script"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1573988707, "post_id": 58898864, "comment_id": 104063349, "body": "You are welcome! The simplest way to save the output from the script is to use shell redirection, e.g. <code>script.pl &gt; file2.txt</code>. I am not so familar with mysql, so I have to check that out and come back later"}, {"owner": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1573989514, "post_id": 58898864, "comment_id": 104063526, "body": "In which position of the script I will add this instruction. Please Can you insert it in the best place in the script ? Or Can you rewrite the complete script to save this data to another text file i will see better"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1573990106, "post_id": 58898864, "comment_id": 104063646, "body": "Yes that <code>script.pl</code> is the complete script"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 3, "creation_date": 1574009042, "post_id": 58898864, "comment_id": 104068532, "body": "@obela06 This site is not a code writing service. You must put in your own effort and describe what you&#39;ve tried and explain what&#39;s not working."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "edited": false, "score": 0, "creation_date": 1574019887, "post_id": 58898864, "comment_id": 104071709, "body": "@obela06 If you want to insert result into a MySQL database, have a look at <a href=\"https://metacpan.org/pod/DBD::mysql\" rel=\"nofollow noreferrer\">this</a> page"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1573980234, "creation_date": 1573980234, "answer_id": 58898864, "question_id": 58898022, "link": "https://stackoverflow.com/questions/58898022/reading-data-in-text-file-by-perl-5/58898864#58898864", "title": "Reading data in text file by perl 5", "body": "<p>Here is an example:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'file.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $M = 110;\nwhile( my $line = &lt;$fh&gt; ) {\n    chomp $line;\n    my $N = length $line;\n    if ( $N &lt; $M ) {\n        my $pad = \" \" x ( $M - $N );\n        $line .= $pad;\n    }\n    my @fields = unpack \"A18xA1xA8xA9xA16xA8xA10xA1xA16xA8xA*\", $line;\n    @fields = map { length ? $_ : \"NULL\" } @fields;\n    say join \"#\", @fields;\n}    \nclose $fh;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>0AC@21XAA#A#NAAA_001#MARRT#AC@21XAA#NERP_111#MARRT#NULL#NULL#NULL#NULL\nNULL#NULL#NBBB_250#MARRT#NULL#NULL#NULL#A#AC@21XAA#NREP_001#MARRT\n0AC@31XAA#A#NCCC_001#MARRT#AC@31XAA#NERP_111#MARRT#NULL#NULL#NULL#NULL\nNULL#NULL#NEEE_250#MARRT#NULL#NULL#NULL#A#AC@31XAA#NREP_001#MARRT\n0ACACAJAA#A#NFFF_001#MARRT#ACACAJAA#NERP_111#MARRT#NULL#NULL#NULL#NULL\nNULL#NULL#NLLL_250#MARRT#NULL#NULL#NULL#A#ACACAJAA#NREP_001#MARRT\nNULL#NULL#NULL#NULL#NULL#NULL#NULL#A#ACAC8JAA#NREP_001#MARRT\nNULL#NULL#NULL#NULL#NULL#NULL#NULL#A#ACW40JAA#NREP_001#MARRT\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 4546488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad039dfe4e474195017af800cc3ba23?s=128&d=identicon&r=PG&f=1", "display_name": "obela06", "link": "https://stackoverflow.com/users/4546488/obela06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1574194513, "answer_count": 1, "score": -2, "last_activity_date": 1574194549, "creation_date": 1573971307, "last_edit_date": 1574194549, "question_id": 58898022, "link": "https://stackoverflow.com/questions/58898022/reading-data-in-text-file-by-perl-5", "closed_reason": "Duplicate", "title": "Reading data in text file by perl 5", "body": "<p>I want to read this text file which has the following form:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0XC@21XAA          c 0000_001 MARRT     AC@21XAA         NERP_111 YYRRT     \n                     NBBB_250 MARRT                                          \n</code></pre>\n\n<p>I want to recover in each line, each of the data and to separate by a diese \"#\" and to put null where the data is empty.\n\u00a0\nThen put it in another file.\n\u00a0\nDo you have an idea</p>\n"}, {"tags": ["perl", "orm", "casting", "rose-db-object", "rose-db"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573950750, "post_id": 58896435, "comment_id": 104057641, "body": "What kind of messed up db stores the numerical id of a related row as a string?"}], "owner": {"reputation": 63, "user_id": 8743332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a73688fadfa164a75c527e5e83cbef1d?s=128&d=identicon&r=PG&f=1", "display_name": "Ambr", "link": "https://stackoverflow.com/users/8743332/ambr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573949833, "creation_date": 1573949833, "question_id": 58896435, "link": "https://stackoverflow.com/questions/58896435/perl-rosedb-is-there-any-cast-or-convert-function-to-use-in-relationship-cla", "title": "Perl Rose::DB - is there any CAST or CONVERT function to use in relationship clause?", "body": "<p>Is there any cast/convert function in Rose::DB e.g. to cast a varchar column to integer?</p>\n\n<p>As reference: <a href=\"https://metacpan.org/pod/Rose::DB::Object::QueryBuilder\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Rose::DB::Object::QueryBuilder</a></p>\n\n<p>I need use join on two tables as below. </p>\n\n<pre><code> ON (t1.id = t3.detail)\n</code></pre>\n\n<p>id column of t1 table is integer and detail column of t3 is varchar. I can not change these tables because they are in production. Is there a way in the relationship clause of Rose::DB to add typecasting like </p>\n\n<pre><code>ON (t1.id = t3.detail::int)\n</code></pre>\n\n<p>My relationship clause in the model of table t1 looks like below.</p>\n\n<pre><code>        t3 =&gt; {\n            type  =&gt; 'one to many',\n            class =&gt; 'Task::Detail',\n            key_columns =&gt; {\n                id =&gt; 'detail', &lt;= Any option here to type cast?\n            },\n            query_args  =&gt; [ task_detail_type_id =&gt; 10 ],\n        },      \n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1573945811, "post_id": 58895410, "comment_id": 104056725, "body": "The whole <a href=\"https://stackoverflow.com/q/20889609/589924\">point of <code>my</code></a> is to limit the scope of your variables (to limit where they can be seen). I applaud you for knowing that limiting the scope of the variables is a fundamental tenet of computer science because of the slew of benefits it has. (It reduces coding, maintenance and debugging time.) However, that necessarily requires knowing the variable names at compile-time. You are trying to generate the name at run-time."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1573940971, "post_id": 58895449, "comment_id": 104055746, "body": "Well i used the dynamic naming for purpose, since the <code>&lt;$fh&gt;</code> is a line from a file and I do not know how many of them will be - so therefor naming them with numbers is logical. Second - I am assigning the splitted line (<code>split $_</code> - where <code>$_</code> is the line from <code>&lt;$fh&gt;</code>), so it is not ambiguous a I dont know why I should push a scalar split (an list) - I think when you make <code>scalar @somelist</code> you are returning the length of that list, not its elements and that is not what I want. Hope my purpose is clearer now."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 1, "creation_date": 1573943994, "post_id": 58895449, "comment_id": 104056373, "body": "@Herdsman: Not at all. Creating a unknown number of variables doesn&#39;t sound logical to me, creating an array of unknown length does. I changed <code>scalar split</code> into <code>[split]</code>, i.e. storing an array reference containing the result of <a href=\"http://p3rl.org/split\" rel=\"nofollow noreferrer\">split</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 2, "creation_date": 1573946036, "post_id": 58895449, "comment_id": 104056782, "body": "@Herdsman, Re &quot;<i>therefor naming them with numbers is logical</i>&quot;, Quite the opposite, having a structure that knows exactly how many items are in the structure makes far more sense. What do you do when you have an arbitrary number of things? You either count them or you iterate over them. This is done using <code>@a</code> in scalar context and <code>for (@a)</code> respectively for arrays. Using numbered variables? Not so easy."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573956429, "post_id": 58895449, "comment_id": 104058424, "body": "They did? I don&#39;t see that.  ...ok, I suppose they might have meant &quot;bunch of lists&quot; when they said &quot;chunk of lists&quot;? That&#39;s really the opposite of what chunk means. Deleted comment."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1573995680, "post_id": 58895449, "comment_id": 104064977, "body": "@choroba well yeah, storing reference to the array <code>[split]</code> could be solution. But I wanted to make it without references (as part of learning). Nevertheless thanks."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1573943851, "last_edit_date": 1573943851, "creation_date": 1573940314, "answer_id": 58895449, "question_id": 58895410, "link": "https://stackoverflow.com/questions/58895410/cannot-use-keyword-my-as-scope-for-list-variable/58895449#58895449", "title": "Cannot use keyword &quot;my&quot; as scope for list variable", "body": "<p><code>my</code> is not an ordinary function. What follows it must be a variable (or a list of variables), not an expression.</p>\n\n<p>You seem to be creating a variable name dynamically. That's not recommended, see for example <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">Why it's stupid to `use a variable as a variable name'</a>.</p>\n\n<p>The common way is to declare the array before starting the loop. Also, to add a new element to an array, use <code>push</code> instead of assigning to a new index - but it's unclear what you want to store in the array.</p>\n\n<pre><code>sub aros{\n    open my $fh, '&lt;', shift or die $!;\n    my @ar;\n    while (&lt;$fh&gt;) {\n        push @ar, [split] unless /\\A\\s+\\z/;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58895449, "answer_count": 1, "score": 0, "last_activity_date": 1573943851, "creation_date": 1573939897, "question_id": 58895410, "link": "https://stackoverflow.com/questions/58895410/cannot-use-keyword-my-as-scope-for-list-variable", "title": "Cannot use keyword &quot;my&quot; as scope for list variable", "body": "<p>I dont usually use <code>my</code> keyword for scopes. But I have decided to do so for submodule. Here is the code:</p>\n\n<pre><code>sub aros{\n   open my $fh, shift;\n   while(&lt;$fh&gt;){\n   my @{\"ar\" . ++$i} = split unless /\\A\\s+\\z/;\n   }\n}\n</code></pre>\n\n<p>The purpose is to make a chunk of lists, named with an incremented number at the end of its name. And making them private for the scope of the while loop (the closest block). But when i tried to compile, this error arise:</p>\n\n<pre><code>Can't declare array dereference in \"my\" at ./a line 4, near \"} =\"\n</code></pre>\n\n<p>Can someone explain me, how \"my\" - scope oriented keywords - works innerly? I supposed that no matter what kind of name is used, or what kind of type (whether scalar or list) is used, the \"my\" keyword should make it private. Do I suppose wrongly?</p>\n"}, {"tags": ["mysql", "macos", "perl", "dbi", "dbd"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1573923593, "post_id": 58891395, "comment_id": 104051311, "body": "What happens when you uninstall DBI (try: <a href=\"https://stackoverflow.com/a/11183651/46395\">-1-</a> <a href=\"https://stackoverflow.com/a/37715503/46395\">-2-</a>) and install it again? Will <code>DBIXS.h</code> up end at the correct place?"}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1573925644, "post_id": 58891395, "comment_id": 104051846, "body": "@daxim There seems to be a problem in using the header supplied with Xcode and Xcode command line tools <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=127028\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=127028</a>"}, {"owner": {"reputation": 200, "user_id": 1583278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2c630ffc1114c1132895c2358b7049?s=128&d=identicon&r=PG", "display_name": "Emmanuel Paris", "link": "https://stackoverflow.com/users/1583278/emmanuel-paris"}, "edited": false, "score": 2, "creation_date": 1582135445, "post_id": 58891395, "comment_id": 106676411, "body": "You can specify the include path for the missing DBIXS.h file by setting the env variable PASTHRU_INC, this way: export PASTHRU_INC=&#39;-I/Library/Developer/CommandLineTools/SDKs/MacO&zwnj;&#8203;SX10.15.sdk/System/L&zwnj;&#8203;ibrary/Perl/Extras/5&zwnj;&#8203;.18/darwin-thread-mu&zwnj;&#8203;lti-2level/auto/DBI/&zwnj;&#8203;&#39;.  It&#39;ll still fail to build due to Driver_xst.h. For this issue, I had to modify the Makefile and change the path for this file."}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1704, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1588597413, "creation_date": 1573912188, "last_edit_date": 1573925530, "question_id": 58891395, "link": "https://stackoverflow.com/questions/58891395/trouble-installing-dbdmysql-under-macos-catalina-10-15-1", "title": "Trouble installing DBD::mysql under macOS Catalina 10.15.1", "body": "<p>Can't install DBD::mysql under macOS Catalina 10.15.1. Mysql 8.0.18 and openssl 1.0.2t are installed through brew.</p>\n\n<p>Here is the module installation log:</p>\n\n<pre><code>cpan[1]&gt; install DBD::mysql\n..........\n\nI will use the following settings for compiling and testing:\n\n  cflags        (mysql_config) = -I/usr/local/Cellar/mysql/8.0.18_1/include/mysql\n  embedded      (guessed     ) = \n  ldflags       (guessed     ) = \n  libs          (mysql_config) = -L/usr/local/Cellar/mysql/8.0.18_1/lib -L/usr/local/opt/openssl/lib -lmysqlclient -lssl -lcrypto\n  mysql_config  (guessed     ) = mysql_config\n  nocatchstderr (default     ) = 0\n  nofoundrows   (default     ) = 0\n  nossl         (default     ) = 0\n  testdb        (default     ) = test\n  testhost      (default     ) = \n  testpassword  (default     ) = \n  testport      (default     ) = \n  testsocket    (default     ) = \n  testuser      (guessed     ) = dmitry\n\nTo change these settings, see 'perl Makefile.PL --help' and\n'perldoc DBD::mysql::INSTALL'.\n\nChecking if libs are available for compiling...\nLooks good.\n\nChecking if your kit is complete...\nLooks good\nUsing DBI 1.631 (for perl 5.018004 on darwin-thread-multi-2level) installed in /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/\nWriting Makefile for DBD::mysql\nWide character in print at /System/Library/Perl/5.18/ExtUtils/MakeMaker.pm line 1034.\nWide character in print at /System/Library/Perl/5.18/ExtUtils/MakeMaker.pm line 1034.\nWriting MYMETA.yml and MYMETA.json\ncp lib/DBD/mysql/GetInfo.pm blib/lib/DBD/mysql/GetInfo.pm\ncp lib/Bundle/DBD/mysql.pm blib/lib/Bundle/DBD/mysql.pm\ncp lib/DBD/mysql/INSTALL.pod blib/lib/DBD/mysql/INSTALL.pod\ncp lib/DBD/mysql.pm blib/lib/DBD/mysql.pm\ncc -c  -I/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI -I/usr/local/Cellar/mysql/8.0.18_1/include/mysql -DDBD_MYSQL_WITH_SSL -g  -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os   -DVERSION=\\\"4.050\\\" -DXS_VERSION=\\\"4.050\\\"  -iwithsysroot \"/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\"   dbdimp.c\nIn file included from dbdimp.c:15:\n./dbdimp.h:20:10: fatal error: 'DBIXS.h' file not found\n#include &lt;DBIXS.h&gt;  /* installed by the DBI module                        */\n         ^~~~~~~~~\n1 error generated.\nmake: *** [dbdimp.o] Error 1\n  DVEEDEN/DBD-mysql-4.050.tar.gz\n  /usr/bin/make -- NOT OK\nRunning make test\n  Can't test without successful make\nRunning make install\n  Make had returned bad status, install seems impossible\nFailed during this command:\n DVEEDEN/DBD-mysql-4.050.tar.gz               : make NO\n\ncpan[2]&gt; \n</code></pre>\n\n<p>It seems the compiler could not find the DBIXS.h file. find found this file in the system:</p>\n\n<pre><code>/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/DBIXS.h\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/DBIXS.h\n/System/Volumes/Data/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/DBIXS.h\n/System/Volumes/Data/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/DBIXS.h\n/System/Volumes/Data/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/DBIXS.h\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/auto/DBI/DBIXS.h\n</code></pre>\n\n<p>How to include this header file during compilation?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>My searches led me to build the package using the standard path where there are no header files</p>\n\n<pre><code>/System/Library/Perl/5.18/darwin-thread-multi-2level\n</code></pre>\n\n<p>And you must use the path</p>\n\n<pre><code>/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Perl/5.18/darwin-thread-multi-2level\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Perl/5.18/darwin-thread-multi-2level\n</code></pre>\n\n<p>But here's how to specify it? I encountered the same problem when installing Mac::SystemDirectory</p>\n\n<blockquote>\n  <p>/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE/EXTERN.h -\n  file not found</p>\n</blockquote>\n\n<p>Perl information:</p>\n\n<pre><code> perl -V\nSummary of my perl5 (revision 5 version 18 subversion 4) configuration:\n\n  Platform:\n    osname=darwin, osvers=19.0, archname=darwin-thread-multi-2level\n    uname='darwin osx391.sd.apple.com 19.0 darwin kernel version 18.0.0: tue jul 9 11:12:08 pdt 2019; root:xnu-4903.201.2.100.7~1release_x86_64 x86_64 '\n    config_args='-ds -e -Dprefix=/usr -Dccflags=-g  -pipe  -Dldflags= -Dman3ext=3pm -Duseithreads -Duseshrplib -Dinc_version_list=none -Dcc=cc'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=define, usemultiplicity=define\n    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags =' -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector',\n    optimize='-Os',\n    cppflags='-g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector'\n    ccversion='', gccversion='4.2.1 Compatible Apple LLVM 11.0.0 (clang-1100.0.32.4) (-macos10.15-objc-selector-opts)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='cc', ldflags =' -fstack-protector'\n    libpth=/usr/lib /usr/local/lib\n    libs= \n    perllibs=\n    libc=, so=dylib, useshrplib=true, libperl=libperl.dylib\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=' '\n    cccdlflags=' ', lddlflags=' -bundle -undefined dynamic_lookup -fstack-protector'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS\n                        PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD\n                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP\n                        PERL_PRESERVE_IVUV PERL_SAWAMPERSAND USE_64_BIT_ALL\n                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES\n                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE\n                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF\n                        USE_REENTRANT_API\n  Locally applied patches:\n    /Library/Perl/Updates/&lt;version&gt; comes before system perl directories\n    installprivlib and installarchlib points to the Updates directory\n  Built under darwin\n  Compiled at Aug 23 2019 16:44:31\n  @INC:\n    /Library/Perl/5.18/darwin-thread-multi-2level\n    /Library/Perl/5.18\n    /Network/Library/Perl/5.18/darwin-thread-multi-2level\n    /Network/Library/Perl/5.18\n    /Library/Perl/Updates/5.18.4/darwin-thread-multi-2level\n    /Library/Perl/Updates/5.18.4\n    /System/Library/Perl/5.18/darwin-thread-multi-2level\n    /System/Library/Perl/5.18\n    /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level\n    /System/Library/Perl/Extras/5.18\n    .\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573894768, "post_id": 58889066, "comment_id": 104044243, "body": "&quot;<i>on using Data::Dumper on $id-&gt;{deleteids}</i>&quot;   -- you mean using it on <code>@rids</code>?"}, {"owner": {"reputation": 3, "user_id": 12382238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245f7a46b739da0f106283d722aad594?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/12382238/rocky"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573895863, "post_id": 58889066, "comment_id": 104044481, "body": "i had modified the question i hope it will help"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573934489, "post_id": 58890520, "comment_id": 104054186, "body": "The answer doesn&#39;t explain what the problem was. I recommend adding the following <i>The code you posted iterates over only one scalar, the reference to the array. This is what is being passed split instead of the elements of the array. The following shows how to iterate over the elements of the referenced array:</i>"}], "tags": [], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "is_accepted": true, "score": 1, "last_activity_date": 1573905769, "creation_date": 1573905769, "answer_id": 58890520, "question_id": 58889066, "link": "https://stackoverflow.com/questions/58889066/perl-remove-certain-data-form-array-after-a-symbol/58890520#58890520", "title": "PERL - Remove certain data form array after a symbol", "body": "<p>Array references have different way to be called with, And as Zdim pointed you need to use a reference <code>\\@rids</code> to dump array using Dumper</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\n\nmy $id = { # creating a similar array like yours in a hash ref\n  deleteids =&gt; [\n           '43-173739_cdfvgbvvd',\n           '43-173738_sddsvfdvfd',\n           '43-173737_sfvdfvdfvdf',\n           '43-173736_svdvdfvdfvdfvfdvfd'\n         ]\n};\n\nprint Dumper($id-&gt;{deleteids});\nmy @rids;\n\nforeach (@{$id-&gt;{deleteids}}) { # correct way to use array ref\n            my @separated = split('_', $_);\n            push @rids, $separated[0];\n}\n\nprint Dumper(\\@rids); # how to dump array using Dumper\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code># $id hash ref\n$VAR1 = [\n          '43-173739_cdfvgbvvd',\n          '43-173738_sddsvfdvfd',\n          '43-173737_sfvdfvdfvdf',\n          '43-173736_svdvdfvdfvdfvfdvfd'\n        ];\n# @rids\n$VAR1 = [\n          '43-173739',\n          '43-173738',\n          '43-173737',\n          '43-173736'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1573958582, "creation_date": 1573958582, "answer_id": 58897073, "question_id": 58889066, "link": "https://stackoverflow.com/questions/58889066/perl-remove-certain-data-form-array-after-a-symbol/58897073#58897073", "title": "PERL - Remove certain data form array after a symbol", "body": "<p>Following piece of code should do what you expect (remove undesired part)</p>\n\n<pre><code>foreach ($id-&gt;{deleteids}) {\n     s/_.*//;\n     push @rids, $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12382238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245f7a46b739da0f106283d722aad594?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/12382238/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58890520, "answer_count": 2, "score": 0, "last_activity_date": 1573958582, "creation_date": 1573894555, "last_edit_date": 1573895824, "question_id": 58889066, "link": "https://stackoverflow.com/questions/58889066/perl-remove-certain-data-form-array-after-a-symbol", "title": "PERL - Remove certain data form array after a symbol", "body": "<p>my code looks like this</p>\n\n<pre><code>foreach ($id-&gt;{deleteids}) {\n            my @separated = split('_', $_);\n            push @rids, $separated[0];\n\n        }\n</code></pre>\n\n<p>on using Data::Dumper on $id->{deleteids} i get this</p>\n\n<pre><code> $VAR1 = [\n          '43-173739_cdfvgbvvd',\n          '43-173738_sddsvfdvfd',\n          '43-173737_sfvdfvdfvdf',\n          '43-173736_svdvdfvdfvdfvfdvfd'\n        ];\n</code></pre>\n\n<p>My expected output of @rids that i want </p>\n\n<pre><code>  $VAR1 = [\n          '43-173739',\n          '43-173738',\n          '43-173737',\n          '43-173736'\n        ];\n</code></pre>\n\n<p>but on using Data::Dumper on @rids i always get </p>\n\n<pre><code>$VAR1 = 'ARRAY(0x3210010)';\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1573890651, "post_id": 58888095, "comment_id": 104043403, "body": "Previously: <a href=\"https://stackoverflow.com/a/58852104\">stackoverflow.com/a/58852104</a> <a href=\"https://stackoverflow.com/a/58853045\">stackoverflow.com/a/58853045</a> Use a module providing an iterator instead instead of abusing the glob function. <a href=\"http://p3rl.org/Algorithm::Combinatorics\" rel=\"nofollow noreferrer\">p3rl.org/Algorithm::Combinatorics</a> <a href=\"http://p3rl.org/Algorithm::Loops\" rel=\"nofollow noreferrer\">p3rl.org/Algorithm::Loops</a>"}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1573892706, "post_id": 58888095, "comment_id": 104043831, "body": "Thanks @daxim. The problem is I am struggling to load modules of any sort right now, I have a cpan issue complaining about Win32::Console, yet ppm is not available in perl 5.28 either so I can load the module for cpan to stop complaining."}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573893033, "post_id": 58888095, "comment_id": 104043895, "body": "Thanks @zdim appreciate all the time and effort."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573894542, "post_id": 58888095, "comment_id": 104044189, "body": "I just realized ... do you want this shuffled (randomized) at all, or just the complete list?"}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573894585, "post_id": 58888095, "comment_id": 104044204, "body": "@zdim just a complete list. :)"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573886939, "post_id": 58888228, "comment_id": 104042719, "body": "@Gerry First, I am not sure that the problem is with limits; looking into it... Perhaps generate the list first, iteratively (not all at once), and store it in a proper array?  That surely won&#39;t get anywhere near any limits, a &quot;handful&quot; of 5-char strings.  (It&#39;s also diagnostic --- if that works then it&#39;s indeed some internal limit.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573887680, "post_id": 58888228, "comment_id": 104042814, "body": "@Gerry  Don&#39;t need modules --- just build the list (of five-char strings) into an array first, piece by piece, instead of lumping it together using <code>glob</code>.  (That will need some simple-minded, other algorithm. Perhaps what I posted in your previous question? That&#39;s good debugging -- if you can get that list without issues then you know that limits are being pushed here.) I added some size estimates that I&#39;m getting to the post..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573889478, "post_id": 58888228, "comment_id": 104043102, "body": "@Gerry <code>time perl -MDevel::Size=total_size -wE&#39;$chs = join &quot;,&quot;, &quot;a&quot;..&quot;z&quot;; @items = glob &quot;{$chs}&quot;x5; say STDERR &quot;Total memory: &quot;, total_size(\\@items)&#47;(1024**2), &quot; Mb&quot;</code> ... and let me check ... now it ran in 30 seconds, what confirms it given how the cacheing works here.  I also checked RSS with external tools while it was going."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573892144, "post_id": 58888228, "comment_id": 104043728, "body": "@Gerry Same behavior on v5.29.2 (~600Mb now) ... still riding on that cache on this server :)))"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573892289, "post_id": 58888228, "comment_id": 104043758, "body": "@Gerry Result from another server class machine, with v5.16 -- 28 minutes (underestimated while it was going!) and 750Mb.  Now reran under 5.29.2 and again ~600Mb. Correct strings, and correct number of them (exactly <code>26**5</code>)"}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573892594, "post_id": 58888228, "comment_id": 104043807, "body": "Hold the phone... Seems like this is a perl windows issue or windows caching itself. I just ran it on my Kali Linux VM, on the same laptop and it works 100% it loads 5 char strings."}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573894770, "post_id": 58888228, "comment_id": 104044244, "body": "Thanks. Yes we can keep these important comments I think."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573934790, "post_id": 58888228, "comment_id": 104054259, "body": "The list couldn&#39;t be on the stack, since it needs to survive between calls to <code>glob</code>. (And a stack overflow would kill the program.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573943190, "post_id": 58888228, "comment_id": 104056185, "body": "@ikegami yeah, but I didn&#39;t know how to call it -- by &quot;stack&quot; I meant some internal storage from which other tools can fetch the numbers.  In this example there&#39;s  a <code>while</code> that&#39;s getting its hands on the numbers, right as they are produced ... Is it just an anon storage on the heap, or in some protected areas ...?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573947050, "post_id": 58888228, "comment_id": 104056985, "body": "Re &quot;<i>there&#39;s a <code>while</code> that&#39;s getting its hands on the numbers, right as they are produced</i>&quot;, The whole list is produced up front. Only after the list is produced does <code>glob</code> return the first string (which is assigned to <code>$_</code>).  Re &quot;<i>Is it just an anon storage on the heap, or in some protected areas</i>&quot;, It&#39;s dynamically allocated, so it&#39;s on the heap. The list is placed in the opcode structure of the currently executing <code>glob</code> opcode (allowing a second <code>glob</code> to be used when iterating over the result of another <code>glob</code>)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573947710, "post_id": 58888228, "comment_id": 104057094, "body": "@ikegami  OK, thank you -- that also explains things in the linked post :). What is that &quot;<i>opcode structure</i>&quot; ... on heap or free-store of some kind?  Or some special memory segment for similar purposes?  I&#39;m thinking whether it&#39;s feasible to expect that some internal structure gets overrun ..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573947746, "post_id": 58888228, "comment_id": 104057100, "body": "It&#39;s dynamically allocated, so it&#39;s on the heap."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573948074, "post_id": 58888228, "comment_id": 104057174, "body": "@ikegami OK... then I don&#39;t know what can fail in that process.  They did find out that it fails on Windows and not on a Linux (a few comments up), but still ... what fails?  Thank you --- editing, removed the term &quot;stack&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573948100, "post_id": 58888228, "comment_id": 104057180, "body": "I have no idea how or why it degenerates to 4 characters either, but I can reproduce it (Windows)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573948912, "post_id": 58888228, "comment_id": 104057323, "body": "@ikegami Ah! That&#39;s a revelation ... so there is definitely something going on (not just on OP&#39;s system I mean).  These are extreme sizes but still, it apparently doesn&#39;t happen on Linux"}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573967866, "post_id": 58888228, "comment_id": 104059800, "body": "@ikegami Thanks for confirming this on Windows. I actually tried on on my Windows 8.1 system with Perl 5.26 and on my Windows 10 devices with Perl 5.28 and the same result on both. On my Kali Linux VM it did in fact produce 5 characters as expected. One thing however I noticed is that my CPU and memory never really reached 90% on the Windows devices, but on the Linux system it would run average of 99.7 percent cpu with growing memory usage. The  minute I would increment to 6 chars (for test purpose) it would flat line everything and eventually the terminal just says  <i>&quot;Killed&quot;</i>"}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573967904, "post_id": 58888228, "comment_id": 104059805, "body": "Thanks @ikegami and Zdim for your valuable input, I really appreciate the time and effort."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1573951117, "last_edit_date": 1573951117, "creation_date": 1573886215, "answer_id": 58888228, "question_id": 58888095, "link": "https://stackoverflow.com/questions/58888095/does-perls-glob-have-a-limitation/58888228#58888228", "title": "Does Perl&#39;s Glob have a limitation?", "body": "<p>The <code>glob</code> first creates all possible file name expansions, so it will first <em>generate the complete list</em> from the shell-style glob/pattern it is given. Only then will it iterate over it, if used in scalar context.  That's why it's so hard (impossible?) to escape the iterator without exhausting it; see <a href=\"https://stackoverflow.com/a/44856230/4653379\">this post</a>.</p>\n\n<p>In your first example that's 26<sup>5</sup> strings (<code>11_881_376</code>), each five chars long. So a list of ~12 million strings, with (naive) total in excess of 56Mb ... plus the overhead for a scalar, which I think at minimum is 12 bytes or such. So at the order of a 100Mb's, at the very least, right there in one list.<sup>&dagger;</sup></p>\n\n<p>I am not aware of any formal limits on lengths of things in Perl (other than in regex) but <code>glob</code> does all that internally and there must be undocumented limits -- perhaps some buffers are overrun somewhere, internally?  It is a bit excessive.  </p>\n\n<p>As for a way around this -- generate that list of 5-char strings iteratively, instead of letting <code>glob</code> roll its magic behind the scenes.  Then it absolutely should not have a problem.  </p>\n\n<p>However, I find the whole thing a bit big for comfort, even in that case. I'd really recommend to write an algorithm that generates and provides one list element at a time (an \"iterator\"), and work with that.</p>\n\n<p>There are good libraries that can do that (and a lot more), some of which are <a href=\"https://metacpan.org/pod/Algorithm::Loops\" rel=\"nofollow noreferrer\">Algorithm::Loops</a> recommended in a previous post on this matter (and in a comment), <a href=\"https://metacpan.org/pod/Algorithm::Combinatorics\" rel=\"nofollow noreferrer\">Algorithm::Combinatorics</a> (same comment), <code>Set::CrossProduct</code> from another answer here ... </p>\n\n<p>Also note that, while this is a clever use of <code>glob</code>, the library is meant to work with files. Apart from misusing it in principle, I think that it will <em>check each of (the ~ 12 million) names for a valid entry</em>! (See <a href=\"https://stackoverflow.com/q/38230451/4653379\">this page</a>.) That's a lot of unneeded disk work. (And if you were to use \"globs\" like <code>*</code> or <code>?</code> on some systems it returns a list with only strings that actually have files, so you'd quietly get different results.)</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;I'm getting 56 bytes for a size of a 5-char scalar.  While that is for a declared variable, which may take a little more than an anonymous scalar, in the test program with length-4 strings the actual total size is indeed a good order of magnitude larger than the naively computed one.  So the real thing may well be on the order of 1Gb, in one operation. </p>\n\n<p><strong>Update</strong> &nbsp; A simple test program that generates that list of 5-char long strings (using the same <code>glob</code> approach) ran for 15-ish minutes on a server-class machine and took 725 Mb of memory.</p>\n\n<p>It did produce the right number of actual 5-char long strings, seemingly correct, on this server.</p>\n"}, {"comments": [{"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573926551, "post_id": 58892886, "comment_id": 104052065, "body": "Man, You do not understand how happy I am right now. Thank you very much!!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1573934986, "post_id": 58892886, "comment_id": 104054314, "body": "Algorithm::Loops&#39;s <code>NestedLoops</code> could also be used:  <code>use Algorithm::Loops qw( NestedLoops ); NestedLoops([ ([ &#39;a&#39;..&#39;z&#39; ]) x 5 ], sub { say join &#39;&#39;, @_ } );</code>  (An answer to an earlier question by the OP mentioned they could use this if they were running out of memory...)"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 6, "last_activity_date": 1573922223, "creation_date": 1573922223, "answer_id": 58892886, "question_id": 58888095, "link": "https://stackoverflow.com/questions/58888095/does-perls-glob-have-a-limitation/58892886#58892886", "title": "Does Perl&#39;s Glob have a limitation?", "body": "<p>Everything has some limitation.</p>\n\n<p>Here's a pure Perl module that can do it for you iteratively. It doesn't generate the entire list at once and you start to get results immediately:</p>\n\n<pre><code>use v5.10;\n\nuse Set::CrossProduct;\n\nmy $set = Set::CrossProduct-&gt;new( [ ([ 'a'..'z' ]) x 5 ] );\n\nwhile( my $item = $set-&gt;get ) {\n    say join '', @$item\n    }\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 58892886, "answer_count": 2, "score": 9, "last_activity_date": 1573951117, "creation_date": 1573884566, "last_edit_date": 1573885854, "question_id": 58888095, "link": "https://stackoverflow.com/questions/58888095/does-perls-glob-have-a-limitation", "title": "Does Perl&#39;s Glob have a limitation?", "body": "<p>I am running the following expecting return strings of 5 characters:</p>\n\n<pre><code>while (glob '{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}'x5) {\n  print \"$_\\n\";\n}\n</code></pre>\n\n<p>but it returns only 4 characters:</p>\n\n<pre><code>anbc\nanbd\nanbe\nanbf\nanbg\n...\n</code></pre>\n\n<p>However, when I reduce the number of characters in the list:</p>\n\n<pre><code>while (glob '{a,b,c,d,e,f,g,h,i,j,k,l,m}'x5) {\n  print \"$_\\n\";\n}\n</code></pre>\n\n<p>it returns correctly:</p>\n\n<pre><code>aamid\naamie\naamif\naamig\naamih\n...\n</code></pre>\n\n<p>Can someone please tell me what I am missing here, is there a limit of some sort? or is there a way around this?</p>\n\n<p>If it makes any difference, It returns the same result in both <code>perl 5.26</code> and <code>perl 5.28</code></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1573865414, "post_id": 58886471, "comment_id": 104040013, "body": "<code>:??</code> matches <code>:</code> zero or one times, but as few as possible. <code>.</code> matches any character (not just dot). <code>:??\\.</code> matches <code>.</code> or <code>:.</code> literally. You never specified a match for numbers or whatever comes after <code>:</code> and before <code>.</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573872067, "post_id": 58886471, "comment_id": 104040999, "body": "&quot;<i>match string &quot;candidate no:(some number).&quot; with a dot and then end of line.</i>&quot;  -- so you&#39;ve very nicely articulated a description of a regex pattern, next would be to go and figure out how to do it.  Now you&#39;ve got a solution, but I still suggest to go over the tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> with the reference <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> by your side"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573872100, "post_id": 58886484, "comment_id": 104041005, "body": "Ironically, matching with dot is exactly what the OP needed to do. <code>.</code> is what one would use to match any character, so the OP wanted <code>candidate no:..\\.</code>. Your versions are improvements, though."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 2, "last_activity_date": 1573871566, "last_edit_date": 1573871566, "creation_date": 1573865266, "answer_id": 58886484, "question_id": 58886471, "link": "https://stackoverflow.com/questions/58886471/perl-regex-line-match-with-dot/58886484#58886484", "title": "Perl regex line match with dot", "body": "<blockquote>\n  <p>The pattern must match string \"candidate no:(some number).\" with a dot and then end of line.</p>\n</blockquote>\n\n<p>I think that the issue comes from the double question mark in your regex. <code>??</code> is a lazy regexp quantifier, which represents 0 or 1 occurences of the preceeding element (here, the semi colon <code>':'</code>). This does not really make sense, given the above specification. </p>\n\n<p>Your regexp is missing a representation of the (integer) number. For this, you can use <code>'\\d+</code>':</p>\n\n<pre><code>$pat = 'candidate no:\\d+\\.'\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong> after the comment by zdim</p>\n\n<p>Here is an alternative solution that would optionaly accept spaces around the number, and explicitly defines the end of the string after (optional spaces and) the number.</p>\n\n<pre><code>$pat = 'candidate no:\\s*\\d+\\s*\\.\\s*$'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1573880685, "creation_date": 1573880685, "answer_id": 58887758, "question_id": 58886471, "link": "https://stackoverflow.com/questions/58886471/perl-regex-line-match-with-dot/58887758#58887758", "title": "Perl regex line match with dot", "body": "<p>You need do some reading on regex to get better understanding of patterns</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $match = qr/candidate no:\\d+\\./;\n\nwhile( &lt;DATA&gt; ) {\n    print if /$match/;\n}\n\n__DATA__\ncandidate no:2\ncandidate no:12\ncandidate no:43.\ncandidate no:254\ncandidate no:122.\ncandidate no:9.\ncandidate no:564\ncandidate no:367.\ncandidate no:98.\ncandidate no:25\ncandidate no:79\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">Perl regex</a>, <a href=\"https://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">Perl regex</a>, <a href=\"https://www.perltutorial.org/perl-regular-expression/\" rel=\"nofollow noreferrer\">Perl regex</a>, <a href=\"https://docstore.mik.ua/orelly/perl2/prog/ch05_02.htm\" rel=\"nofollow noreferrer\">Perl regex</a>, <a href=\"https://docstore.mik.ua/orelly/perl4/mre/mre.pdf\" rel=\"nofollow noreferrer\">Mastering Regular Expressions</a></p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1573882271, "creation_date": 1573882271, "answer_id": 58887890, "question_id": 58886471, "link": "https://stackoverflow.com/questions/58886471/perl-regex-line-match-with-dot/58887890#58887890", "title": "Perl regex line match with dot", "body": "<p>As alternative the code can be changed to</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $search = qr/candidate no:\\d+\\./;\n\nmap { print if /$search/ } &lt;DATA&gt;;\n\n__DATA__\ncandidate no:2\ncandidate no:12\ncandidate no:43.\ncandidate no:254\ncandidate no:122.\ncandidate no:9.\ncandidate no:564\ncandidate no:367.\ncandidate no:98.\ncandidate no:25\ncandidate no:79\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 1873707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a97982b1fdefec8bb2a0336f66f099?s=128&d=identicon&r=PG", "display_name": "user1873707", "link": "https://stackoverflow.com/users/1873707/user1873707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "closed_date": 1573903149, "answer_count": 3, "score": 0, "last_activity_date": 1573882271, "creation_date": 1573865097, "question_id": 58886471, "link": "https://stackoverflow.com/questions/58886471/perl-regex-line-match-with-dot", "closed_reason": "Duplicate", "title": "Perl regex line match with dot", "body": "<p>I need to search in a long text, the lines containing text like \"candidate no:23.\"</p>\n\n<p>the line must have a dot in the end. I have tried</p>\n\n<pre><code>$pat = 'candidate no:??'\n\nif ($line =~ /$pat/) {\nprint \"match found \\n\";\n}\n</code></pre>\n\n<p>This works fine, but not when I try include dot in my pattern</p>\n\n<pre><code>$pat = 'candidate no:??.'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$pat = 'candidate no:??\\.'\n</code></pre>\n\n<p>Also tried</p>\n\n<pre><code>if ($line =~ /${pat}\\.$/) \n</code></pre>\n\n<p>None of the above work, can anyone suggest a way out. The pattern must match string \"candidate no:(some number).\" with a dot and then end of line.</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["windows", "perl", "cyrillic"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573872246, "post_id": 58886452, "comment_id": 104041016, "body": "<code>utf8</code> is an encoding internal to Perl. I believe you mean <code>UTF-8</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573874774, "post_id": 58887091, "comment_id": 104041340, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/202451/discussion-between-polar-bear-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1573934146, "post_id": 58887091, "comment_id": 104054077, "body": "I&#39;ve added to my answer. If it answers your question, please check the mark next to it. It would also be nice if you deleted the comments you posted except for the link to chat (which will archive the comments)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1573934077, "last_edit_date": 1573934077, "creation_date": 1573872343, "answer_id": 58887091, "question_id": 58886452, "link": "https://stackoverflow.com/questions/58886452/perl-how-work-with-cyrillic-coding-in-windows-10/58887091#58887091", "title": "Perl :: How work with Cyrillic coding in Windows 10?", "body": "<p>The command line can be obtained from the OS using the \"ANSI\" interface or using the \"Wide\" interface.</p>\n\n<p>The ANSI interface uses text encoded using the active code page.</p>\n\n<p>The Wide interface uses text encoded using UTF-16le.</p>\n\n<p>Perl uses the ANSI interface (though you could access the Wide interface through Win32:API, for example).</p>\n\n<pre><code>use Encode qw( decode );\nuse Win32  qw( );\n\nmy $acp = \"cp\".Win32::GetACP();\n\n@ARGV = map { decode($acp, $_) } @ARGV;\n\nopen(my $fh, '&gt;:encoding(UTF-8)', $qfn)\n   or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\nprint($fh \"$_\\n\") for @ARGV;\n</code></pre>\n\n<p>It's important to note that the encoding used by the console (as shown by <code>chcp</code>) is not the same as the active code page. What this means is that <code>@ARGV</code> can only contains characters that are in both the OEM code page (the encoding used by the console) and the active code page (the encoding used by the ANSI interface).</p>\n\n<p>The remove this limitation, one would use the wide interface of the system call to get the arguments from the command line (<code>GetCommandLineW</code>) and the wide interface of the system call to parse the command line (<code>CommandLineToArgvW</code>). This would provide the arguments no matter what encoding the console uses. With code page 65001 being used in the console, this allows any Unicode character to be used in arguments.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/44488898/handling-wide-char-values-returned-by-win32api\">This page</a> contains Perl code to make those system calls.</p>\n\n<hr>\n\n<p><a href=\"https://www.perlmonks.org/?node_id=1231890\" rel=\"nofollow noreferrer\">Related reading</a></p>\n"}], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573934077, "creation_date": 1573864976, "last_edit_date": 1573877240, "question_id": 58886452, "link": "https://stackoverflow.com/questions/58886452/perl-how-work-with-cyrillic-coding-in-windows-10", "title": "Perl :: How work with Cyrillic coding in Windows 10?", "body": "<p>I try to figure out how in Windows 10 with perl script to read an argument coded in cyrillic (<strong>cp437</strong>) and store it in text file encoded with <strong>utf8</strong>.</p>\n\n<p>In the console <code>chcp</code> command returns <strong>cp437</strong> code page.</p>\n\n<p>Search on <strong>StackOverflow</strong> returned several question of similar nature. I've attempted to <em>utilize</em> knowledge obtained from these posts but without success.</p>\n\n<p>An examples demonstrating: </p>\n\n<ul>\n<li>how to read string (cyrillic) from console (cp437) and store it in a file (utf8)</li>\n<li>how to read file in utf8 format (cyrillic) and make content output to console (cp437)</li>\n<li>how to read string (cyrillic) from console (cp437) and output it to console in (cp1251)</li>\n</ul>\n\n<p>would be greatly appreciated.</p>\n\n<p>NOTE: console input (cp437) to output (cp1251) is purely for demonstration what it involves and how it is done properly.</p>\n\n<p>UPDATE: <strong>cp437</strong> does not include Cyrillic symbols, Perl uses ANSI system calls [CreateFileA] and can not pass Cyrillic characters into Perl without additional workaround. Default codepage for my system is <strong>cp1252</strong> which does not cover Cyrillic symbols.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1573862323, "post_id": 58884110, "comment_id": 104039462, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/202448/discussion-on-question-by-michael-carman-how-do-i-print-an-expanded-regex-in-une\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1573851820, "post_id": 58884612, "comment_id": 104036461, "body": "Add your find with <code>re::regex_pattern($qr)</code>?  That does give them a way to get what they need, or close to that, perhaps with a simple sub"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573851958, "post_id": 58884612, "comment_id": 104036511, "body": "@zdim, I don&#39;t see how <code>re::regex_pattern($qr)</code> helps at all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573852132, "post_id": 58884612, "comment_id": 104036591, "body": "It removes the surrounding stuff (<code>(?: )</code>) ... that&#39;s somethin&#39;.  The spaces are thorny I realize -- if there&#39;s <code>x</code> mod there can still be legal spaces inside <code>[ ]</code> (one example I could recall, there&#39;s probably more) ... but they could strip newlines manually? Then there&#39;d be an acceptable printout?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573852178, "post_id": 58884612, "comment_id": 104036604, "body": "@zdim, But removing that stuff is a bad thing. It could change the pattern to mean something else. It&#39;s there because it&#39;s a significant part of the pattern."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573852231, "post_id": 58884612, "comment_id": 104036623, "body": "@zdim, Four cases where whitespace is significant when using <code>&#47;x</code>:  <code>\\\u2420</code>, <code>[\u2420]</code>, <code>(?-x:\u2420)</code> and <code>(?-x)\u2420</code>. There might be more."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573852342, "post_id": 58884612, "comment_id": 104036666, "body": "yup, you&#39;re right ... looks like they can&#39;t touch spaces (I was talking about cleaning up if there&#39;s <code>&#47;x</code> modifier but even that&#39;s off limits) without writing a full parser ..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573852426, "post_id": 58884612, "comment_id": 104036696, "body": "@zdim, Definitely. Consider <code>\\\u2420</code>: Is it really <code>\\\\\u2420</code>? If you look for <code>(?-x)\u2420</code>, did you look for <code>(?-ix)\u2420</code> and <code>(?^u)\u2420</code> too? Well, you might need a full parser, but close. (And it might be easier to write a full parser than trying to figure out what the leave out!)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573852532, "post_id": 58884612, "comment_id": 104036736, "body": "Right -- one would have to play the regex engine a little.  I guess that would mean that they&#39;d have to settle with having spaces, <code>&#47;x</code>-ed or not ... but <code>re::regexp_pattern($qr)</code> may still be useful."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573859730, "post_id": 58884612, "comment_id": 104038848, "body": "@zdim: While <code>regexp_pattern()</code> is interesting, I don&#39;t really care about the <code>(?:...)</code> wrapper with the flags; it&#39;s the newlines and comments that are problematic for me. I was mildly surprised that they didn&#39;t get discarded when building regex object."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1573860170, "post_id": 58884612, "comment_id": 104038954, "body": "@MichaelCarman Yeah, I didn&#39;t get that at first (sloppy initial reading, sorry) ... i do find it surprising that irrelevant things aren&#39;t dropped from the operational form of the pattern. And parsing those spaces, or even firstly newlines, seems outright nasty: how does one decide whether it&#39;s the pattern or source code format?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1573874179, "last_edit_date": 1573874179, "creation_date": 1573851697, "answer_id": 58884612, "question_id": 58884110, "link": "https://stackoverflow.com/questions/58884110/how-do-i-print-an-expanded-regex-in-unexpanded-form/58884612#58884612", "title": "How do I print an expanded regex in unexpanded form?", "body": "<p>Perl doesn't provide such a utility. It parses regex patterns; it doesn't generate them. The stringification of the object is the exact string provided to the parser, wrapped in a <code>(?:...)</code> that accounts for the flags. The string provided to the parser is the post-interpolation literal minus the delimiters.<sup>[1]</sup></p>\n\n<p>That said, this would be trivial to do with a regex parser.</p>\n\n<p>There is <a href=\"https://metacpan.org/pod/YAPE::Regex\" rel=\"nofollow noreferrer\">YAPE::Regex</a>, but it hasn't been updated in a long time. For example, it doesn't support the <code>(?^:...)</code> found in the stringification of regex in modern version of Perl.</p>\n\n<p>There is also <a href=\"https://metacpan.org/pod/Regexp::Parser\" rel=\"nofollow noreferrer\">Regexp::Parser</a>. It's newer, but it doesn't support <code>(?^:...)</code> either! But if we were to work around that, it would be be perfect since naturally ignores whitespace and comments! All we need to do is parse the pattern and get a stringifiction from the parse tree.</p>\n\n<p>Finally, there's <a href=\"https://metacpan.org/pod/Regexp::Parsertron\" rel=\"nofollow noreferrer\">Regexp::Parsertron</a>. It's the newest, and it does support <code>(?^:...)</code>, but it doesn't distinguish whitespace and comments from \"exact matches\" tokens.</p>\n\n<p>So let's use Regexp::Parser.<sup>[2]</sup></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse Regexp::Parser qw( );\n\n{\n   @ARGV == 1\n      or die(\"usage\\n\");\n\n   my $re = $ARGV[0];\n\n   # R::P doesn't support \u00ab(?^:...)\u00bb, so we'll\n   # provide a backwards-compatible stringification.\n   $re =~ s{^\\(\\?\\^(\\w*):}{\n      my %on = map { $_ =&gt; 1 } split //, $1;\n      my $on  = join \"\", grep  $on{$_}, qw( i m s x );\n      my $off = join \"\", grep !$on{$_}, qw( i m s x );\n      \"(?$on-$off:\"\n   }e;\n\n   my $parser = Regexp::Parser-&gt;new($re);\n   my $roots = $parser-&gt;root\n      or die($parser-&gt;errmsg);\n\n   say join \"\", map $_-&gt;visual, @$roots;\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ despace_re '(?^x:\n   (?=\\d|\\.\\d)  # look-ahead to ensure at least one of the optional parts matches\n   \\d*          # optional whole digits\n   (?:\\.\\d*)?   # optional decimal point and fractional digits\n)'\n(?x-ims:(?=\\d|\\.\\d)\\d*(?:\\.\\d*)?)\n</code></pre>\n\n<hr>\n\n<ol>\n<li><p><code>\\Q</code>, <code>\\u</code> and similar are done at the same stage at interpolation. <code>\\N{...}</code> is resolved to <code>\\N{U+...}</code> in order to immortalize the current charnames settings. Other escapes such as <code>\\x27</code>, <code>\\x{0000027}</code>, <code>\\\\</code> and <code>\\/</code> are preserved character for character.</p></li>\n<li><p>A solution based on YAPE::Regex was used in <a href=\"https://stackoverflow.com/revisions/58884612/3\">an earlier revision</a> of this answer.</p></li>\n</ol>\n"}], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 58884612, "answer_count": 1, "score": 8, "last_activity_date": 1573874179, "creation_date": 1573849064, "question_id": 58884110, "link": "https://stackoverflow.com/questions/58884110/how-do-i-print-an-expanded-regex-in-unexpanded-form", "title": "How do I print an expanded regex in unexpanded form?", "body": "<p>Is it possible to print a regex created using expanded notation (<code>qr/.../x</code>) in non-expanded form? For example:</p>\n\n<pre><code>my $decimal = qr/\n  (?=\\d|\\.\\d)  # look-ahead to ensure at least one of the optional parts matches\n  \\d*          # optional whole digits\n  (?:\\.\\d*)?   # optional decimal point and fractional digits\n/x;\n\nsay $decimal;\n</code></pre>\n\n<p>I want this to be printed as <code>(?=\\d|\\.\\d)\\d*(?:\\.\\d*)?</code>.</p>\n\n<p>I could write a parser to strip out the non-functional portions but that would be replicating what perl already does and I'd probably get some of the non-trivial cases wrong.</p>\n\n<p>(Yes, this seems a bit silly. I have a use case where I need to print a lot of messages like <code>matched &lt;pattern&gt;</code> and I'd like to limit messages to a single line while allowing expanded notation to be used for patterns.)</p>\n"}, {"tags": ["unit-testing", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1573841079, "post_id": 58882382, "comment_id": 104032163, "body": "More of an opinion question but my approach would be to set an environment variable when testing and condition the behavior on that. You can even set a constant so that such statements are optimized out when the environment variable is not set, similar to for example the <a href=\"https://metacpan.org/source/Mojo::UserAgent#L15\" rel=\"nofollow noreferrer\">MOJO_CLIENT_DEBUG setting for Mojo::UserAgent</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1573843856, "creation_date": 1573843856, "answer_id": 58883020, "question_id": 58882382, "link": "https://stackoverflow.com/questions/58882382/how-do-i-know-if-my-perl-module-is-being-called-from-inside-of-a-test/58883020#58883020", "title": "How do I know if my Perl module is being called from inside of a test?", "body": "<p>I use environment variables assigned to constants to control these types of things in my modules (as stated in the OP comments). You can set the environment variables at the command line before running your programs/tests, or set the variables within the test files themselves in a <code>BEGIN</code> block.</p>\n\n<p>Module:</p>\n\n<pre><code>package Module;\n\nuse warnings;\nuse strict;\n\nuse constant IN_TEST =&gt; $ENV{IN_TEST} || 0;\n\nsub exec {\n    warn \"We're in testing mode!\" if IN_TEST;\n    return 25;\n}\n\n1;\n</code></pre>\n\n<p>Test file:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nBEGIN {\n    $ENV{IN_TEST} = 1;\n}\n\nuse lib 'lib';\n\nuse Module;\nuse Test::More;\n\nis Module::exec(), 25, \"exec() returns correct integer\";\n\ndone_testing();\n</code></pre>\n\n<p>Normal script:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse lib 'lib';\n\nuse Module;\n\nModule::exec();\n</code></pre>\n\n<p>There is no output when running the script, as the function being called simply returns a value. However, when running the test file:</p>\n\n<pre><code>We're in testing mode! at lib/Module.pm line 9.\nok 1 - exec() returns correct integer\n1..1\n</code></pre>\n\n<p>If you set the environment variable at the command line (or otherwise) before running a normal script that doesn't set it, you'll get the debug output all the same.</p>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1573854947, "post_id": 58883159, "comment_id": 104037561, "body": "The only drawback to this approach is that if you want to disable the debug output when using the test distributions you have to go in and edit the modules directly."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 1, "creation_date": 1573855976, "post_id": 58883159, "comment_id": 104037846, "body": "How about checking for <code>$ENV{HARNESS_ACTIVE}</code>?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1573860326, "post_id": 58883159, "comment_id": 104038980, "body": "The other drawback is that Test::Builder being loaded is not a 100% guarantee that a test is currently being run (though it is a strong indicator). Environment variables are explicit in their meaning."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1573844539, "creation_date": 1573844539, "answer_id": 58883159, "question_id": 58882382, "link": "https://stackoverflow.com/questions/58882382/how-do-i-know-if-my-perl-module-is-being-called-from-inside-of-a-test/58883159#58883159", "title": "How do I know if my Perl module is being called from inside of a test?", "body": "<p>Specifically for tests, say, to insert some temporary debugging code, I test for a function that would be defined in the test modules. For me, that is <code>&amp;Test::More::diag</code>.</p>\n\n<pre><code>sub foo {\n    ...\n    defined(&amp;Test::More::diag) &amp;&amp; Test::More::diag(\"bar is $bar\");\n    ...\n}\n</code></pre>\n\n<p>You can also inspect <code>%INC</code> to see if the test modules have been loaded</p>\n\n<pre><code>if ($INC{\"Test/Builder.pm\"}) { print STDERR \"debugging info\"; }\n</code></pre>\n"}], "owner": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 58883159, "answer_count": 2, "score": 0, "last_activity_date": 1573844539, "creation_date": 1573840706, "question_id": 58882382, "link": "https://stackoverflow.com/questions/58882382/how-do-i-know-if-my-perl-module-is-being-called-from-inside-of-a-test", "title": "How do I know if my Perl module is being called from inside of a test?", "body": "<p>Suppose I have a Perl module <code>My::Module</code> and I want it to output some useful information if I'm running inside of a unit test (i.e. something using <code>Test::Builder</code> or <code>Test2</code>, but not if I'm running outside of a unit test. How would I do that? </p>\n\n<p>I realize this is a weird edge case, but it's an interesting question.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1573853252, "last_edit_date": 1573853252, "creation_date": 1573840937, "answer_id": 58882432, "question_id": 58882198, "link": "https://stackoverflow.com/questions/58882198/ipc-between-two-perl-programs/58882432#58882432", "title": "IPC between two Perl programs", "body": "<p><strong>Problem #1: Fundamentals</strong></p>\n\n<p>Having the child execute the parent makes no sense. The output to be captured by the parent should be sent to STDOUT.</p>\n\n<p>The starting skeletons would look as follows:</p>\n\n<ul>\n<li><p>Parent:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\n\nopen(my $CHILD, \"-|\", \"mwe-ipc-child.pl\")\n   or die(\"Can't execute child: $!\\n\");\n\nmy $response = do { local $/; &lt;$CHILD&gt; };\nclose($CHILD);\n\n... do something with response...\n</code></pre></li>\n<li><p>Child:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\n\nmy $response = ...;\nprint($repsonse);\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p><strong>Problem #2: Protocol</strong></p>\n\n<p>You need some kind of way of telling where one value ends and the other starts.</p>\n\n<p>If the values will never contain a line feed, you could separate them using a line feed.</p>\n\n<ul>\n<li><p>Child:</p>\n\n<pre><code>print(\"$var1\\n$var2\\n\");\n</code></pre></li>\n<li><p>Parent:</p>\n\n<pre><code>chomp( my $var1 = &lt;$CHILD&gt; );\nchomp( my $var2 = &lt;$CHILD&gt; );\n</code></pre></li>\n</ul>\n\n<p>Otherwise, a nice extensible method would be to use JSON.</p>\n\n<ul>\n<li><p>Child:</p>\n\n<pre><code>use Cpanel::JSON::XS qw( encode_json );\n\nmy $data = { var1 =&gt; $var1, var2 =&gt; $var2 };\nmy $json = encode_json($data);\nbinmode(STDOUT);\nprint($json);\n</code></pre></li>\n<li><p>Parent:</p>\n\n<pre><code>use Cpanel::JSON::XS qw( decode_json );\n\nopen(my $CHILD, \"-|:raw\", \"mwe-ipc-child.pl\") or ...;\nmy $json = do { local $/; &lt;$CHILD&gt; };\nclose($CHILD);\n\nmy $data = decode_json($json);\nmy $var1 = $data-&gt;{var1};\nmy $var2 = $data-&gt;{var2};\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 167, "user_id": 12119142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c373d1177260d45078f9faac5fc4d77?s=128&d=identicon&r=PG", "display_name": "gizeh", "link": "https://stackoverflow.com/users/12119142/gizeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1573918348, "creation_date": 1573918348, "answer_id": 58892303, "question_id": 58882198, "link": "https://stackoverflow.com/questions/58882198/ipc-between-two-perl-programs/58892303#58892303", "title": "IPC between two Perl programs", "body": "<p>Many, many Thanks for your answer. Your solution works as it is. But for those who are similar interested as me I want to show following adaption of your source which should fit exactly the original question. Interchange variables from a child to parent. Important additional knowledge is here </p>\n\n<p>1) do{local... in: <a href=\"https://www.perlmonks.org/?node_id=287647\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=287647</a></p>\n\n<p>2) no suffer from buffer in: <a href=\"https://stackoverflow.com/questions/2343633/why-doesnt-my-parent-process-see-the-childs-output-until-it-exits?rq=1\">Why doesn&#39;t my parent process see the child&#39;s output until it exits?</a></p>\n\n<p>The parent:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n# file-name: mwe-ipc.pl\n# this prog. is the PARENT\n# Calls a CHILD by its prog.name\n\nprint \"$0\\n\";\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\n\nopen(my $CHILD, \"-|\", \"mwe-ipc-child.pl\") or die(\"Can't execute child: $!\\n\");\n\n# do { local $/; &lt;$CHILD&gt; }; this idiom is a consise way to slurp the entire \n# contents of a file into a scalar without using a loop\n# $/ is the inut record separator(irs). In following manner the same as \n# local $/ = undef. This eliminates the irs to nothing, which leads to a slurp \n# instead of reacting upon \\n, the default value, the new line sign. \n# Local restricts that behaviour to the block {}.\nmy $response = do { local $/; &lt;$CHILD&gt; };\n\nclose($CHILD);\n\n#... do something with response...\nprint \"response from child is : $response \\n\";\nmy @arr_response = split /\\n/, $response;\nprint \"arr_response[$_] = $arr_response[$_]\\n\" for (0..$#arr_response);\n</code></pre>\n\n<p>The Child:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n# file-name: mwe-ipc-child.pl\n# this prog. is the CHILD\n# Called from a PARENT\n\n#print \"$0\\n\"; # uncommented this print goes to the PARENT too.\nuse open ':std', ':encoding(UTF-8)';\nmy $var1 = \"|l |p{2.7cm} |p{2cm}\";\nmy $var2 = \"\\\\textbf{G}&amp; \\\\textbf{Substantiv}&amp; \\\\textbf{Modus} \\\\\\\\\";\nmy @response;\n\nprint ($var1,\"\\n\", $var2,\"\\n\");\n</code></pre>\n\n<p>The call of \"mwe-ipc.pl\" leads to </p>\n\n<pre><code>/home/hj/latex/mwes/ipc/mwe-ipc.pl\nresponse from child is : |l |p{2.7cm} |p{2cm}\n\\textbf{G}&amp; \\textbf{Substantiv}&amp; \\textbf{Modus} \\\\\n</code></pre>\n\n<p>and</p>\n\n<pre><code>arr_response[0] = |l |p{2.7cm} |p{2cm}\narr_response[1] = \\textbf{G}&amp; \\textbf{Substantiv}&amp; \\textbf{Modus} \\\\\n</code></pre>\n\n<p>So, exactly what I wanted, thanks @ikegami</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1289510398, "open_beta_date": 1280775600, "closed_beta_date": 1280170800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/tex/Img/apple-touch-icon@2.png", "twitter_account": "StackTeX", "favicon_url": "https://cdn.sstatic.net/Sites/tex/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/tex/Img/apple-touch-icon.png", "audience": "users of TeX, LaTeX, ConTeXt, and related typesetting systems", "site_url": "https://tex.stackexchange.com", "api_site_parameter": "tex", "logo_url": "https://cdn.sstatic.net/Sites/tex/Img/logo.png", "name": "TeX - LaTeX", "site_type": "main_site"}, "on_date": 1573839847, "question_id": 516591}, "owner": {"reputation": 167, "user_id": 12119142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c373d1177260d45078f9faac5fc4d77?s=128&d=identicon&r=PG", "display_name": "gizeh", "link": "https://stackoverflow.com/users/12119142/gizeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58882432, "answer_count": 2, "score": 2, "last_activity_date": 1573918348, "creation_date": 1573839171, "question_id": 58882198, "link": "https://stackoverflow.com/questions/58882198/ipc-between-two-perl-programs", "title": "IPC between two Perl programs", "body": "<p>I have a Perl program(this is the PARENT) which needs variables from another Perl prog(CHILD). I want to realize that with the pipe mechanism of Linux. After unsuccessfull search in net (none of the numerous examples fit this basic theme -- I think the concept is quite understandable for a nonexpert, but I cannot implement a running example). The two appended progs show my understanding of piping, which is probably totally wrong, but I want to learn it.  For clarity:</p>\n\n<pre><code>Prog PARENT is running\n    needs 2 variables from Prog CHILD\n    PARENT calls CHILD (open CHILD ... ?)\n    CHILD is running and can deliver the 2 variables\n    CHILD opens PARENT, write/print the variables to PARENT\n    CHILD closes PARENT\n    CHILD exit\nPARENT can now read from CHILD \n</code></pre>\n\n<p>The PARENT Program (Caller and Receiver)</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n# file-name: mwe-ipc.pl\n# this prog. is the PARENT\n# Calls a CHILD by its prog.name\n\nprint \"$0\\n\"; # show your progname\nmy $pid = open(CHILD, \"mwe-ipc-child.pl |\") or die \"Couldn't fork: $!\\n\";\nmy @arr_receiver;\nwhile (&lt;CHILD&gt;){\n    # PARENT needs two variables from CHILD\n    # how to get var1 and var2?\n   @arr_receiver = $_;\n}\nclose(CHILD);\n\nprint \"arr_receiver[$_] = $arr_receiver[$_]\\n\" for (0..$#arr_receiver);\n</code></pre>\n\n<p>The CHILD Program (will be called and answers)</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n# file-name: mwe-ipc-child.pl\n# this prog. is the CHILD\n# Called from a PARENT\n\nprint \"$0\\n\";;\nmy $pid = open(PARENT, \"| mwe-ipc.pl\") or die \"Couldn't fork: $!\\n\";\nmy $var1 = \"a\"; #\"|l |p{2.7cm} |p{2cm}\";\nmy $var2 = \"b\"; #\"\\textbf{G}&amp; \\textbf{Substantiv}&amp; \\textbf{Modus} \\\\\";\n\nwhile (&lt;PARENT&gt;){\n   # PARENT needs two variables from CHILD\n   # how to put var1 and var2?\n   print PARENT $var1, $var2;\n}\nclose(PARENT);\n\nexit(0);\n</code></pre>\n\n<p>Call to PARENT Prog outputs progname, then endless loop.\nUltimately needless call from cmdline of CHILD delivers own and PARENTS' progname. \nCan someone please help?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1573836116, "post_id": 58880931, "comment_id": 104029786, "body": "This regex is shorter than the one you used: <code>SIR[^;]+;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1573836487, "post_id": 58880931, "comment_id": 104029972, "body": "@Federico Piazza, Yes, but adding the <code>^</code> tells a lot to the reader. It also prevents commented out lines from matching, something the OP was interested in. It also requires something between <code>SIR</code> and <code>;</code>, which is weird. Finally, it also prevents <code>XSIR</code> from matching (but not <code>SIRX</code>). Use <code>^SIR\\b</code> to prevent <code>SIRX</code> from matching. In short, this isn&#39;t a golfing contest."}, {"owner": {"reputation": 59, "user_id": 3117972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6150110668176b675d032c8e0eb0a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/3117972/amir"}, "edited": false, "score": 0, "creation_date": 1574350068, "post_id": 58880931, "comment_id": 104209825, "body": "@ikegami Thanks a lot! The <code>next unless</code> line no longer works (it now removes some SIR lines) but that&#39;s ok and I haven&#39;t tried to fix it. But there is another case which is still not working. <code>SIR 8\\n TDI(0000\\n0000\\n0000)\\n...</code>, basically when TDI() goes over multiple lines. I&#39;ve tried so many things the last days but didn&#39;t find an elegant way. I would appreciate if you could help me on this one as well. Thanks, Amir"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574352868, "post_id": 58880931, "comment_id": 104211549, "body": "If the paren is still open, read more lines until it&#39;s closed."}, {"owner": {"reputation": 59, "user_id": 3117972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6150110668176b675d032c8e0eb0a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/3117972/amir"}, "edited": false, "score": 0, "creation_date": 1574354797, "post_id": 58880931, "comment_id": 104212695, "body": "You mean with additional <code>if()</code> statements? I was hoping to have something within the <code>while(&#47;^sir...&#47;)</code> or a magic modifier to achieve this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574356502, "post_id": 58880931, "comment_id": 104213604, "body": "Honestly, I&#39;d just load the entire file into memory, and fox up the lines with two s///g, one for sir, one for tdi."}, {"owner": {"reputation": 59, "user_id": 3117972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6150110668176b675d032c8e0eb0a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/3117972/amir"}, "edited": false, "score": 0, "creation_date": 1574375512, "post_id": 58880931, "comment_id": 104222001, "body": "Well, there are lots of what we call in Germany &quot;trick 17&quot;s to do this and I have already one way implemented as a workaround. I was rather interested to see if there is a better way to do this in a single regex that would match all possible ways. I have faced this issue multiple times already and looking for a better way. Still, thanks a lot for your support!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574443139, "post_id": 58880931, "comment_id": 104248160, "body": "Re single regex, You are trying to do two very different things."}, {"owner": {"reputation": 59, "user_id": 3117972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6150110668176b675d032c8e0eb0a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/3117972/amir"}, "edited": false, "score": 0, "creation_date": 1574514970, "post_id": 58880931, "comment_id": 104264400, "body": "I don&#39;t think so. I want to read in a special pattern <code>sir 8 tdi(03) tdo(01) mask(03);</code> in all possible ways it could occur, that&#39;s just a single thing I&#39;m trying to do"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574519284, "post_id": 58880931, "comment_id": 104265453, "body": "But in one case, you wanted to replace <code>\\nSIR\\s+</code> with a single space. In the other, a <code>\\n</code> with a single space. The conditions under which you wanted to do those things are also different"}, {"owner": {"reputation": 59, "user_id": 3117972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6150110668176b675d032c8e0eb0a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/3117972/amir"}, "edited": false, "score": 0, "creation_date": 1574610518, "post_id": 58880931, "comment_id": 104284763, "body": "That&#39;s a misunderstanding then, sorry. I don&#39;t want to replace anything. All I want is to read the sir pattern and extract the information from tdi/tdo/mask. And this instruction comes in multiple flavors (single line, multiple lines, small/capital letters, ...)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1574612010, "post_id": 58880931, "comment_id": 104285140, "body": "That doesn&#39;t make a difference. In one case, you want to treat <code>\\nSIR\\s+</code> as horizontal whitespace. In another, <code>\\n</code> but not <code>\\nSIR\\s+</code>. In others yet, neither <code>\\nSIR\\s+</code> nor <code>\\n</code> should be considered horizontal whitespace. These situations must therefore be treated differently."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1573835582, "last_edit_date": 1573835582, "creation_date": 1573834630, "answer_id": 58880931, "question_id": 58880493, "link": "https://stackoverflow.com/questions/58880493/perl-regex-over-multiple-lines/58880931#58880931", "title": "Perl regex over multiple lines", "body": "<p>You are reading in a line at at time and matching against that, so you can't possibly match something that spans more than one line.</p>\n\n<p>It's easiest to read the whole file at once by undefining <code>$/</code>.</p>\n\n<pre><code>local $/;\n\nwhile (&lt;&gt;) {\n    while (/^sir\\s+\\d+\\s+tdi\\(\\d+\\)\\s+tdo\\(\\d+\\)\\s+mask\\(\\d+\\)\\s*;/mig) {\n        print \"$&amp;\\n\";\n    }\n}\n</code></pre>\n\n<p>The <code>/m</code> makes the <code>^</code> match the start of a line.</p>\n\n<p>Replacing <code>if (//)</code> with <code>while (//g)</code> allows us to get all the matches.</p>\n\n<hr>\n\n<p>As a one-liner,</p>\n\n<pre><code>perl -0777ne'CORE::say $&amp; while /^SIR[^;]*;/mig'\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a></p>\n"}], "owner": {"reputation": 59, "user_id": 3117972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6150110668176b675d032c8e0eb0a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/3117972/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573835582, "creation_date": 1573833057, "last_edit_date": 1573833764, "question_id": 58880493, "link": "https://stackoverflow.com/questions/58880493/perl-regex-over-multiple-lines", "title": "Perl regex over multiple lines", "body": "<p>I have 2 input files.</p>\n\n<pre><code>$&gt; cat file1.txt\n! This is a comment in file1.txt\n// Another comment and below line is an empty line\n\nSIR 8 \n    TDI(03)\n    TDO(01)\n    MASK(03);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$&gt; cat file2.txt\n! This is a comment in file2.txt\n// Another comment and below line is an empty line\n\nsir 8 tdi(03) tdo(01) mask(03);\n</code></pre>\n\n<p>Now, I'm trying to write a script that would harvest all those 'sir' lines. This is what I have:</p>\n\n<pre><code>while(&lt;&gt;) {\n    # Skip over all lines that start with ! or are empty or start with //\n    next unless !/^!/ and !/^\\s*$/ and !/^\\s*\\/\\//;\n\n    # I'm using the modifier /i to be case insensitive\n    if(/sir\\s+\\d+\\s+tdi\\(\\d+\\)\\s+tdo\\(\\d+\\)\\s+mask\\(\\d+\\)\\s*;/i) {\n        print $_;\n    }\n}\n</code></pre>\n\n<p>This matches now file2.txt which is on a single line but not file1.txt which is on multiple lines. I googled a lot and tried the modifiers /m /s and /g which were suggested but with no luck. Please can you help me to find the right syntax?</p>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573822522, "post_id": 58877124, "comment_id": 104022360, "body": "Remove <code>local *STDOUT; local *STDERR;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 0, "creation_date": 1573824695, "post_id": 58878009, "comment_id": 104023477, "body": "Well, I&#39;ll be ...! It works! And it was so much simpler than I feared it was going to be, too! :)  P.S. I do want the redirection to be temporary, but I took care of that by forking a child process and then initiating the output redirection in that child process. This way, I&#39;m making sure that my original Perl process remains unaffected. :)"}, {"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 0, "creation_date": 1573825612, "post_id": 58878009, "comment_id": 104023920, "body": "Ok, now I&#39;m observing something strange. Despite my fork-a-child-strategy, the redirection seems to be permanent rather than temporary. For some reason, although I only did the redirection in forked child process, it affects the output of the parent process as well, which is now also sent to my text file.  I had been under the impression that, if I redirect STDOUT / STDERR in a Perl process this would not affect the STDOUT / STDERR channels of the parent Perl process that started this child Perl process, but what I&#39;m observing now seems to contradict this assumption."}, {"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 0, "creation_date": 1573825805, "post_id": 58878009, "comment_id": 104024018, "body": "Ok, I think I need to re-read and fully understand your entire post rather than just blindly follow the one-liner you posted as a comment."}, {"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 0, "creation_date": 1573827826, "post_id": 58878009, "comment_id": 104025030, "body": "Removing {local *STDOUT; local *STDERR;} <b>plus</b> the additional restore-original-stdout dance in your 2nd snippet solved that last problem, too. :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 2, "creation_date": 1573832972, "post_id": 58878009, "comment_id": 104027987, "body": "<a href=\"https://pastebin.com/xJQBUMqD\" rel=\"nofollow noreferrer\">It doesn&#39;t affect the parent.</a> Are you on Windows by any chance? There&#39;s no such thing as <code>fork</code> on Windows. In Perl, it&#39;s poorly emulated using threads. Since it creates a thread instead of a new process, playing with file descriptors affects the &quot;parent&quot;. (File descriptors belong to processes, not threads.) You should not be using <code>fork</code> on Windows."}, {"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 0, "creation_date": 1573834311, "post_id": 58878009, "comment_id": 104028823, "body": "Yep, I am on Windows 10, and I did not know about that fork emulation caveat."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1573825089, "last_edit_date": 1573825089, "creation_date": 1573824340, "answer_id": 58878009, "question_id": 58877124, "link": "https://stackoverflow.com/questions/58877124/redirecting-stdout-and-stderr-for-all-child-processes-that-will-be-started-by-th/58878009#58878009", "title": "Redirecting STDOUT and STDERR for all child processes that will be started by the parent process", "body": "<p>When you open a file handle, it uses the next available file descriptor. STDIN, STDOUT and STDERR are normally associated with fd 0, 1 and 2 respectively. If there are no other open handles in the process, the next handle created by <code>open</code> will use file descriptor 3.</p>\n\n<p>If you associate fd 3 with STDOUT, many things will keep working. That's because Perl code usually deals with Perl file handles rather than file descriptors. For example, <code>print LIST</code> is effectively <code>print { select() } LIST</code>, which is the same as <code>print STDOUT LIST</code> by default. So your change mostly works within Perl.</p>\n\n<p>However, when you execute a program, all that it gets are the file descriptors. It gets fd 0, 1 and 2. It might even get fd 3, but it doesn't care about that. It will output to fd 1.</p>\n\n<hr>\n\n<p>A simple solution is to remove <code>local *STDOUT; local *STDERR;</code>.</p>\n\n<p><code>*STDOUT</code> is a glob, a structure that contains <code>*STDOUT{IO}</code>, the handle in question.</p>\n\n<p>By using <code>local *STDOUT</code>, you are replacing the glob with an empty one. The original one isn't destroyed &mdash;it will be restored when the <code>local</code> goes out of scope&mdash; so the Perl file handle associated with the now-anonymous glob won't be closed, so the fd associated with that handle won't be closed, so the subsequent <code>open</code> can't reuse that fd.</p>\n\n<p>If you avoid doing <code>local *STDOUT</code>, it means you are passing an open handle to <code>open</code>. <code>open</code> behaves specially in that circumstance: It will \"reopen\" the fd already associated with the Perl handle rather than creating a new fd.</p>\n\n<pre><code>$ perl -e'\n   open( local *STDOUT, \"&gt;\", \"a\" ) or die;\n   open( local *STDERR, \"&gt;&amp;\", STDOUT ) or die;\n   print(fileno(STDOUT), \"\\n\");\n   system(\"echo foo\");\n'\nfoo\n\n$ cat a\n3\n\n$ perl -e'\n   open( STDOUT, \"&gt;\", \"a\" ) or die;\n   open( STDERR, \"&gt;&amp;\", STDOUT ) or die;\n   print(fileno(STDOUT), \"\\n\");\n   system(\"echo foo\");\n'\n\n$ cat a\n1\nfoo\n</code></pre>\n\n<hr>\n\n<p>If you want the redirection to be temporary. You have to play with the file descriptors.</p>\n\n<pre><code>$ perl -e'\n   open( local *SAVED_STDOUT, \"&gt;&amp;\", STDOUT) or die;\n   open( STDOUT, \"&gt;\", \"a\" ) or die;\n   print(fileno(STDOUT), \"\\n\");\n   system(\"echo foo\");\n\n   open( STDOUT, \"&gt;&amp;\", SAVED_STDOUT) or die;\n   print(fileno(STDOUT), \"\\n\");\n   system(\"echo bar\");\n'\n1\nbar\n\n$ cat a\n1\nfoo\n</code></pre>\n"}], "owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 58878009, "answer_count": 1, "score": 1, "last_activity_date": 1573834828, "creation_date": 1573820968, "last_edit_date": 1573834828, "question_id": 58877124, "link": "https://stackoverflow.com/questions/58877124/redirecting-stdout-and-stderr-for-all-child-processes-that-will-be-started-by-th", "title": "Redirecting STDOUT and STDERR for all child processes that will be started by the parent process", "body": "<p>In Perl (using version 5.30.0), is it possible to programmatically (i.e. within my Perl code) change some setting that would cause STDOUT and STDERR to be redirected to a text file for any child processes that my Perl process will start from that point on? The difficulty here is that I do not control the code that actually starts those child processes (if I did, this would be extremely trivial). My hope is that there exists some kind of IO flag that I can set in my Perl process that would cause all newly started child processes to redirect their STDOUT / STDERR channels to a destination of my choice (unless the system() / exec() / whatever call used to start them explicitly supplies another STDOUT / STDERR destination).</p>\n\n<p>The (highly simplified) use case I need this for is the following. I have written a generic library function that performs a task specified by the caller and, among other things, stores all STDOUT / STDERR output generated by that user-provided task in a text file. The task is provided in the shape of a Perl function reference. So far I have merely managed to redirect the STDOUT / STDERR output generated by my Perl process:</p>\n\n<pre><code>    local *STDOUT;\n    local *STDERR;\n\n    open( STDOUT, '&gt;', $buildLogFilePath ) or die sprintf(\n        \"ERROR: [%s] Failed to redirect STDOUT to \\\"%s\\\"!\\n\",\n        $messageSubject,\n        $buildLogFilePath\n    );\n\n    open ( STDERR, '&gt;&amp;', STDOUT ) or die sprintf(\n        \"ERROR: [%s] Failed to redirect STDERR to \\\"%s\\\"!\\n\",\n        $messageSubject,\n        $buildLogFilePath\n    );\n</code></pre>\n\n<p>So as long as the user-provided function doesn't start any child processes, my feature works as desired, but the moment it does start a child process, that process's output will just go to the default STDOUT / STDERR channels, effectively breaking my feature.</p>\n\n<p>EDIT: I ended up using the STDOUT / STDERR repointing trick described by <strong>ikegami</strong> below. To allow easier re-use of this trick, I wrapped the code in a little utility class that redirects STDOUT / STDERR in the constructor and then restores them to their original values in the destructor:</p>\n\n<pre><code>package TemporaryOutputRedirector;\n\nuse strict;\nuse warnings FATAL =&gt; 'all';\n\nuse Carp::Assert;\n\nsub new\n{\n    my ( $class, $newDest ) = @_;\n\n    open( my $savedStdout, '&gt;&amp;', STDOUT ) or die sprintf(\n        \"ERROR: Failed to save original STDOUT in process %i!\\n\",\n        $$\n    );\n\n    open( STDOUT, '&gt;', $newDest ) or die sprintf(\n        \"ERROR: Failed to redirect STDOUT to \\\"%s\\\" in child process %i!\\n\",\n        $newDest,\n        $$\n    );\n\n    open( my $savedStderr, '&gt;&amp;', STDERR ) or die sprintf(\n        \"ERROR: Failed to save original STDERR in process %i!\\n\",\n        $$\n    );\n\n    open ( STDERR, '&gt;&amp;', STDOUT ) or die sprintf(\n        \"ERROR: Failed to redirect STDERR in child process %i!\\n\",\n        $$\n    );\n\n    my %memberData = (\n        'newDest'     =&gt; $newDest,\n        'savedStdout' =&gt; $savedStdout,\n        'savedStderr' =&gt; $savedStderr\n    );\n\n    return bless \\%memberData, ref $class || $class;\n}\n\nsub DESTROY\n{\n    my ( $self ) = @_;\n\n    my $savedStdout = $$self{ 'savedStdout' };\n    assert( defined( $savedStdout ) );\n\n    open( STDOUT, '&gt;&amp;', $savedStdout ) or warn sprintf(\n        \"ERROR: Failed to restore original STDOUT in process %i!\\n\",\n        $$\n    );\n\n    my $savedStderr = $$self{ 'savedStderr' };\n    assert( defined( $savedStderr ) );\n\n    open( STDERR, '&gt;&amp;', $savedStderr ) or warn sprintf(\n        \"ERROR: Failed to restore original STDERR in process %i!\\n\",\n        $$\n    );\n}\n\n1;\n</code></pre>\n\n<p>This way, one only needs to create an instance of <code>TemporaryOutputRedirector</code>, execute the code that should have its output redirected, and then let the <code>TemporaryOutputRedirector</code> fall out of scope and have its destructor restore the original STDOUT / STDERR channels.</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1573816478, "creation_date": 1573816478, "answer_id": 58875880, "question_id": 58875784, "link": "https://stackoverflow.com/questions/58875784/acquiring-a-submitted-form-name/58875880#58875880", "title": "Acquiring a submitted form name", "body": "<p>No. Browsers do not send the <code>name</code> of a form in HTTP requests. </p>\n\n<p>It exists only for use with client-side scripting (and is obsoleted by <code>id</code> and <code>class</code>).</p>\n"}], "owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58875880, "answer_count": 1, "score": -1, "last_activity_date": 1573816478, "creation_date": 1573816169, "question_id": 58875784, "link": "https://stackoverflow.com/questions/58875784/acquiring-a-submitted-form-name", "title": "Acquiring a submitted form name", "body": "<p>Almost embarassed to ask but since it's such a basic form manipulation issue I <em>ought</em> to know about...</p>\n\n<p>Is there a Perlish way of acquiring a submitted form name so that I may differentiate between differing forms or am I going to have to use hidden fields for this purpose?  (hidden fields was the only Google result I could find)</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1573827608, "post_id": 58875092, "comment_id": 104024927, "body": "If the right approach was to call an external tool like cut, sed, or awk then perl would be a very sad little tool."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5153293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1016416658403770/picture?type=large", "display_name": "Emil Gelman", "link": "https://stackoverflow.com/users/5153293/emil-gelman"}, "edited": false, "score": 0, "creation_date": 1573816497, "post_id": 58875296, "comment_id": 104019266, "body": "Thanks for your comment. This works for a single line, but will cut unneccesary data on a a complete file. Update my post with a more thorough example"}, {"owner": {"reputation": 115, "user_id": 5153293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1016416658403770/picture?type=large", "display_name": "Emil Gelman", "link": "https://stackoverflow.com/users/5153293/emil-gelman"}, "edited": false, "score": 0, "creation_date": 1573817513, "post_id": 58875296, "comment_id": 104019780, "body": "This is better, but there is a corner case if the first or second column contains quoted data, ie  colA,colB,colC 1,2,3 &quot;4,4&quot;,5,&quot;6,6&quot;"}], "tags": [], "owner": {"reputation": 547, "user_id": 8113769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9tknD.jpg?s=128&g=1", "display_name": "sungtm", "link": "https://stackoverflow.com/users/8113769/sungtm"}, "is_accepted": false, "score": 1, "last_activity_date": 1573820589, "last_edit_date": 1573820589, "creation_date": 1573814552, "answer_id": 58875296, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58875296#58875296", "title": "Remove last column from a csv file in Perl", "body": "<p>Try this based on <a href=\"https://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html\" rel=\"nofollow noreferrer\">awk-regex</a>:</p>\n\n<pre><code>awk -v FPAT='([^,]+)|(\\\"[^\\\"]+\\\")'  -v OFS=',' '{print $1,$2}' ${file}\n</code></pre>\n\n<p><strong><em>Example</em></strong></p>\n\n<pre><code>echo '\"4,4\",5,\"6,6\"' | awk -v FPAT='([^,]+)|(\\\"[^\\\"]+\\\")'  -v OFS=',' '{print $1,$2}'\n\"4,4\",5\n</code></pre>\n\n<p>Reference</p>\n"}, {"tags": [], "owner": {"reputation": 211, "user_id": 5766792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e961675d1263c507b88c25f8820a52?s=128&d=identicon&r=PG&f=1", "display_name": "Ishan", "link": "https://stackoverflow.com/users/5766792/ishan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573825556, "last_edit_date": 1573825556, "creation_date": 1573816892, "answer_id": 58876007, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58876007#58876007", "title": "Remove last column from a csv file in Perl", "body": "<p>Save the script in any file say script.pl\nExecute as prompt>perl script.pl /opt/filename.csv</p>\n\n<ul>\n<li>\"1\",\"2,3\",4,\"test, test\" ==> \"1\",\"2,3\",4 </li>\n<li>1,\"2,3,4\",\"5 , 6\",\"7,8\" ==>  1,\"2,3,4\",\"5 , 6\"</li>\n<li>0,0,0,\"test\" ==> 0,0,0 </li>\n</ul>\n\n<p>Handles above cases</p>\n\n<pre><code>use strict;\nif (scalar(@ARGV) != 1 ) {\n    print \"usage: perl script.pl absolute_file_path\";\n    exit;\n}\nmy $filename = $ARGV[0]; # complete file path here\nopen(DATA, '&lt;', $filename)\n    or die \"Could not open file '$filename' $!\";\n\nmy @lines = &lt;DATA&gt;;\nclose(DATA);\n\nmy $counter=0;\nopen my $fo, '&gt;', $filename;\n\n\n\nforeach my $line(@lines) {\n    chomp($line);\n\n    my @update = split '(?:^|,)(\\\"(?:[^\\\"]+|\\\"\\\")*\\\"|[^,]*)' , $line;\n    my @update2;\n    foreach (@update) {\n       if($_=~/\\w+/) {\n           push(@update2,$_);\n       }\n    }\n    pop(@update2);\n    print @update2;\n    my $str = join(',',@update2);\n    print $fo \"$str\";\n    unless (++$counter == scalar(@lines)) {\n        print $fo \"\\n\";\n    }\n}\nclose $fo;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 1, "last_activity_date": 1573827704, "last_edit_date": 1573827704, "creation_date": 1573827270, "answer_id": 58878824, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58878824#58878824", "title": "Remove last column from a csv file in Perl", "body": "<p>If quoted strings with comma is the only trouble you are facing, you can use this:</p>\n\n<pre><code>$ sed -E 's/,\"[^\"]*\"$|,[^,]*$//' ip.txt\ncolA,colB\n1,2\n4,5\n</code></pre>\n\n<ul>\n<li><code>,\"[^\"]*\"$</code> will match <code>,</code> followed by <code>\"</code> followed by non <code>\"</code> characters followed by <code>\"</code> at the end of line</li>\n<li><code>,[^,]*$</code> will match <code>,</code> followed by non <code>,</code> characters at end of line</li>\n</ul>\n\n<p>The double quoted column will match earlier in the string and thus gets deleted completely</p>\n\n<p>Equivalent for <code>perl</code> would be <code>perl -lpe 's/,\"[^\"]*\"$|,[^,]*$//' ip.txt</code></p>\n"}, {"tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1573828140, "creation_date": 1573828140, "answer_id": 58879069, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58879069#58879069", "title": "Remove last column from a csv file in Perl", "body": "<p>I believe <a href=\"https://stackoverflow.com/users/8113769/sungtm\">sungtm</a> answer is correct and requries some  explanation:</p>\n\n<pre><code>awk -v FPAT='([^,]+)|(\\\"[^\\\"]+\\\")'  -v OFS=',' '{print $1,$2}'\n</code></pre>\n\n<p>Is equivalent to:</p>\n\n<h3>script.awk</h3>\n\n<pre><code>BEGIN {\n    FPAT = \"([^,]+)|(\\\"[^\\\"]+\\\")\"; # gnu awk specific: FPAT is RegEx pattern to identify the field's content\n    # [^,]+ ------ RegEx pattern to match all chars not \",\"\n    #\"[^\\\"]+\\\" ------ RegEx pattern to match all quated chars including the quotes\n    #()|() ------ RegEx optional groups selector\n    OFS = \",\"; # Output field separator\n}\n{ # for each input line/record\n    print $1, $2; # print \"1st field\" OFS value \"2nd field\"\n}\n</code></pre>\n\n<h3>Runnig</h3>\n\n<pre><code>awk -f scirpt.awk input.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1573856714, "post_id": 58882311, "comment_id": 104038020, "body": "That&#39;s the cleanest and easiest solution. Don&#39;t re-invent the wheel, especially not with unreadable regular expressions."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1573850937, "last_edit_date": 1573850937, "creation_date": 1573840351, "answer_id": 58882311, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58882311#58882311", "title": "Remove last column from a csv file in Perl", "body": "<p>Using <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>, as a script to process STDIN into STDOUT:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::CSV 'csv';\n\nmy $csv = csv(in =&gt; \\*STDIN, keep_headers =&gt; \\my @headers,\n  auto_diag =&gt; 2, encoding =&gt; 'UTF-8');\n\npop @headers;\n\ncsv(in =&gt; $csv, out =&gt; \\*STDOUT, headers =&gt; \\@headers,\n  auto_diag =&gt; 2, encoding =&gt; 'UTF-8');\n</code></pre>\n\n<p>The obvious benefit of this approach is handling all common edge cases automatically.</p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1573856457, "creation_date": 1573856457, "answer_id": 58885427, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58885427#58885427", "title": "Remove last column from a csv file in Perl", "body": "<p>Well this case is quite interesting - please see my solution bellow. </p>\n\n<p>You can change <code>$debug = 1;</code> to see what happens and how this mechanism works</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $debug = 0;\n\nwhile( &lt;DATA&gt; ) {\n    print \"IN:  $_\" if $debug;\n    chomp;\n\n    s/\"(.+?)\"/replace($1)/ge;   # do magic replacement , -&gt; ___ in block of interest\n\n    print \"REP: $_\\n\" if $debug;\n\n    my @data = split /,/;       # split into array\n    pop @data;                  # pop last element of array\n\n    my $line = join ',', @data; # merge array into a string\n\n    $line =~ s/___/,/g;         # do unmagic replacement\n    $line =~ s/\\|/\"/g;          # restore | -&gt; \"\n\n    printf \"%s$line\\n\", $debug ? \"OUT: \" : '';  # print result\n}\n\nsub replace {\n    my $line = shift;\n\n    $line =~ s/,/___/g;         # do magic replacement in our block\n\n    return \"|$line|\";           # put | arount block of interest\n}\n\n__DATA__\ncolA,colB,colC\n1,2,3\n4,5,\"6,6\"\n8,3,\"1,2\",37,82\n64,12,\"1,2,3,4\",42,56\n\"3,4,7,8\",2,8,\"8,7,6,5,4\",2,8\n\"3,4,7,8\",2,8,\"8,7,6,5,4\",2,8,\"2,8,4,1\"\n\"3,4,7,8\",2,8,\"8,7,6,5,4\",2,8,\"2,8,4,1\",3,4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 5153293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1016416658403770/picture?type=large", "display_name": "Emil Gelman", "link": "https://stackoverflow.com/users/5153293/emil-gelman"}, "is_accepted": false, "score": 0, "last_activity_date": 1573922105, "creation_date": 1573922105, "answer_id": 58892868, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl/58892868#58892868", "title": "Remove last column from a csv file in Perl", "body": "<p>Appreciate your help. Below is the solution I ended up using:</p>\n\n<pre><code>cat file.csv | perl -MText::ParseWords -nle '@f = parse_line(\",\",2, $_); tr/,/$/d for @f; print join \",\", @f' | cut -d ',' -f 3 --complement | tr $ , ;\n</code></pre>\n\n<p>This will replace commas in field surrounded by quotes to the $ sign, to re replaced back after discarding the last unwanted column.</p>\n"}], "owner": {"reputation": 115, "user_id": 5153293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1016416658403770/picture?type=large", "display_name": "Emil Gelman", "link": "https://stackoverflow.com/users/5153293/emil-gelman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "answer_count": 7, "score": 1, "last_activity_date": 1573922105, "creation_date": 1573813811, "last_edit_date": 1573827528, "question_id": 58875092, "link": "https://stackoverflow.com/questions/58875092/remove-last-column-from-a-csv-file-in-perl", "title": "Remove last column from a csv file in Perl", "body": "<p>I have a Perl script that accepts a comma separated csv file as input.\nI would like to discard the last column (the column number is known in advance).</p>\n\n<p>The problem is that the last column may contain quoted strings with commas, in which case I would like to cut the entire string.</p>\n\n<p>Example:</p>\n\n<pre><code>colA,colB,colC\n1,2,3\n4,5,\"6,6\"\n</code></pre>\n\n<p>What I would like to end up with is:</p>\n\n<pre><code>colA,colB\n1,2\n4,5\n</code></pre>\n\n<p>The current solution I have is using Linux cut command in the following manner:</p>\n\n<pre><code>cat $file | cut -d ',' -f 3 --complement\n</code></pre>\n\n<p>Which outputs the following:</p>\n\n<pre><code>colA,colB\n1,2\n4,5,6\"\n</code></pre>\n\n<p>Which works great unless the last column is a quoted string with commas in it.</p>\n\n<p>I can only use native Perl/Linux commands to solve this.</p>\n\n<p>Appreciate your help</p>\n"}, {"tags": ["perl", "reference", "scoping", "lifetime-scoping"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1573814598, "post_id": 58874966, "comment_id": 104018265, "body": "I suggest that you review your text at the end -- it mixes up examples and variables in them, making it (even) harder to understand what you are asking.  Can you clean that up?  (&quot;<i>the second example ... can access <code>$x</code></i>&quot; --- no, that variable is from the first example ... etc ...)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1573816338, "post_id": 58875457, "comment_id": 104019190, "body": "Re &quot;<i>the two inner subroutines can see any lexical variables that are declared in big()</i>&quot;, Named subs capture at compile-time, so the inner sub sees the <code>$var</code> that existed at compile-time. If you call the outer sub multiples times, you could have problems. That&#39;s why the code produces two <code>Variable &quot;$var&quot; will not stay shared</code> warnings."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1573815087, "creation_date": 1573815087, "answer_id": 58875457, "question_id": 58874966, "link": "https://stackoverflow.com/questions/58874966/how-does-my-behave-in-perl-when-there-is-no-any-variable-within-the-static-scope/58875457#58875457", "title": "How does my behave in perl when there is no any variable within the static scope?", "body": "<p>All lexical variables (one declared with <code>my</code>) is only visible inside its innermost enclosing block of code. A block of code is either a list of statements surrounded by <code>{</code> ... <code>}</code> or a code file.</p>\n\n<p>In your first example, the subroutines are all defined at the top level of your file. The code blocks that define the subroutines are all completely separate and any lexical variable declared within one of those subroutines will not be visible in any of the others.</p>\n\n<p>In your second example, you define the subroutines <code>sub1()</code> and <code>sub2()</code> inside the subroutine <code>big()</code>. This means that the code blocks that define the two inner subroutines are within the code block that defines the outer subroutine - and, therefore, the two inner subroutines can see any lexical variables that are declared in <code>big()</code> (because those variables are visible anywhere within <code>big()</code>'s code block).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1573820518, "last_edit_date": 1573820518, "creation_date": 1573816703, "answer_id": 58875951, "question_id": 58874966, "link": "https://stackoverflow.com/questions/58874966/how-does-my-behave-in-perl-when-there-is-no-any-variable-within-the-static-scope/58875951#58875951", "title": "How does my behave in perl when there is no any variable within the static scope?", "body": "\n\n<p>The scope of lexical (<code>my</code>) variables (i.e. from where they can be seen/accessed) is defined by the inner-most block (curlies) or file in which they are located.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   my $x = 123;\n   {\n      my $x = 456;\n      print \"$x\\n\";\n      # The second $x can only be seen up to here.\n   }\n\n   # It is as is the second $x never existed here.\n   print \"$x\\n\";\n'\n456\n123\n</code></pre>\n\n<p>The fact that the inner block is part of a sub declaration isn't any different.</p>\n\n<p>That said, <strong>do not place named subs inside of named subs.</strong></p>\n\n<p>First of all, it doesn't make them private.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   sub outer {\n      sub inner { print \"inner\\n\"; }\n   }\n\n   inner();\n'\ninner\n</code></pre>\n\n<p>More importantly, it will result in lots of weird behaviour.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   sub outer {\n      my ($x) = @_;\n      sub inner { print \"inner $x\\n\"; }\n      print \"outer $x\\n\";\n      inner();\n   }\n\n   outer(123);\n   outer(456);\n'\nVariable \"$x\" will not stay shared at -e line 7.\nouter 123\ninner 123\nouter 456\ninner 123\n</code></pre>\n\n<p>Named subroutines capture at compile time, so <code>inner</code> captures the <code>$x</code> that exited at compile-time. When <code>outer</code> exits, its <code>$x</code> is replaced with a fresh <code>$x</code> breaking the connection between <code>outer</code>'s <code>$x</code> and <code>inner</code>'s.</p>\n\n<p>This is exactly why you must ALWAYS use <code>use strict; use warnings;</code>.</p>\n\n<p>If you want a private inner sub, use an anonymous sub instead; they capture at runtime.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   sub outer {\n      my ($x) = @_;\n      my $inner = sub { print \"inner $x\\n\"; };\n      print \"outer $x\\n\";\n      $inner-&gt;();\n   }\n\n   outer(123);\n   outer(456);\n'\nouter 123\ninner 123\nouter 456\ninner 456\n</code></pre>\n\n<p>There is also an experimental feature you can use.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use strict;\n   use warnings;\n   use experimental qw( lexical_subs );\n\n   sub outer {\n      my ($x) = @_;\n      my sub inner { print \"inner $x\\n\"; }\n      print \"outer $x\\n\";\n      inner();\n   }\n\n   outer(123);\n   outer(456);\n'\nouter 123\ninner 123\nouter 456\ninner 456\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 12222101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TGnJY.jpg?s=128&g=1", "display_name": "BoraKurucu", "link": "https://stackoverflow.com/users/12222101/borakurucu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573820518, "creation_date": 1573813419, "question_id": 58874966, "link": "https://stackoverflow.com/questions/58874966/how-does-my-behave-in-perl-when-there-is-no-any-variable-within-the-static-scope", "title": "How does my behave in perl when there is no any variable within the static scope?", "body": "<p>Here is the first example:</p>\n\n<pre><code>$g=5;\nsub A {\n    my  $x=2;    # $x uses static scoping\n    local $y=3;  # $y uses dynamic soping\n    local $g=7;\n    print \"In A: g=$g, x=$x, y=$y\\n\";\n    B();\n}\n\nsub B {\n    print \"In B: g=$g, x=$x, y=$y\\n\";\n    C();\n}\n\nsub C {\n    print \"In B: g=$g, x=$x, y=$y\\n\";\n}\n\nA();\nprint \"In main: g=$g, x=$x, y=$y\\n\";\n</code></pre>\n\n<p>Here is the output of first example:</p>\n\n<pre><code>In A: g=7, x=2, y=3\nIn B: g=7, x=, y=3\nIn B: g=7, x=, y=3\nIn main: g=5, x=, y=\n</code></pre>\n\n<p>Here is the second example:</p>\n\n<pre><code>sub big {\n    my $var=1;\n    sub sub1 () {\n    print \"  In sub1 var=$var\\n\";\n    }\n    sub sub2 () {\n        $var = 2;\n    print \"In sub2, var is $var\\n\";\n        sub1();\n    }\n    sub1();\n    sub2();\n    sub1();\n}\n\nbig();\n</code></pre>\n\n<p>Here is the second output:</p>\n\n<pre><code>  In sub1 var=1\nIn sub2, var is 2\n  In sub1 var=2\n  In sub1 var=2\n</code></pre>\n\n<p>The question is:\nWhy in the second example <code>sub B</code> and <code>sub C</code> can acess to <code>my  $x=2;</code> while in the first example   <code>sub1()</code> and <code>sub2()</code> can't acces to <code>my $var=1;</code>  I believe <code>my</code> used for static scoping, also there is no any other <code>$x</code> in static scope of <code>sub big</code> in example 2, I expected no output in the second example, like this: <code>In sub1 var=</code>.How in the second example,can <code>sub1</code> and <code>sub2</code> can acces to <code>$x</code> altough it has declared with the word <code>my</code>, why does it not behave like the first example?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573813086, "post_id": 58874787, "comment_id": 104017398, "body": "What does <code>which echo</code> say on your system? Likely &quot;shell-builtin&quot; ... is there also a <code>&#47;bin&#47;echo</code>?"}, {"owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573813414, "post_id": 58874787, "comment_id": 104017588, "body": "@zdim When I run this command, I get <code>&#47;bin&#47;echo</code>. The result is the same when I run it in the shell or with my <code>run_cmd</code> perl function."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573813470, "post_id": 58874787, "comment_id": 104017622, "body": "Thank you -- yeah, they behave the same for these options any way ..."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1573813651, "post_id": 58874787, "comment_id": 104017731, "body": "POSIX doesn\u2019t define <i>any</i> options for <code>echo</code>, so don\u2019t rely on them. Surely you\u2019re not planning to use <code>echo</code> like this anyway, since there\u2019s nothing it does that you can\u2019t do in plain Perl?"}, {"owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573814661, "post_id": 58874787, "comment_id": 104018297, "body": "@zdim Indeed, if I explicitly write <code>&#47;bin&#47;echo -e &quot;toto\\ntata&quot;</code>, the command behaves as expected. So, which <code>echo</code> is called by default?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573815046, "post_id": 58874787, "comment_id": 104018512, "body": "That&#39;s the problem with all the details ... I don&#39;t know, specially not on your system. In many other situations that particular command shouldn&#39;t make it start a shell, so then you&#39;d be running <code>&#47;bin&#47;echo</code>; but I&#39;m not sure how piped open does it. But I&#39;d seriously recommend to use modules for these kinds of things -- it is often notoriously difficult to get it all right. There are modules to run external commands and some to quote things, like <code>String::ShellQuote</code>.  See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "edited": false, "score": 0, "creation_date": 1573821749, "post_id": 58877246, "comment_id": 104021955, "body": "I&#39;m surprised that <code>echo</code> can have a different behavior on <code>sh</code> and <code>bash</code> (and the man page don&#39;t talk about it). Also, why my code is working when I only add <code>&#47;bin&#47;</code> before the call of <code>echo</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "edited": false, "score": 2, "creation_date": 1573821861, "post_id": 58877246, "comment_id": 104022022, "body": "<code>&#47;bin&#47;echo</code> executes that program. (Documented in <code>man echo</code>.) /// <code>echo</code> from with <code>sh</code> uses <code>sh</code>&#39;s builtin <code>echo</code>. (Documented in <code>man sh</code>.) /// <code>echo</code> from with <code>bash</code> uses <code>bash</code>&#39;s builtin <code>echo</code>. (Documented in <code>man bash</code>.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1573840052, "last_edit_date": 1592644375, "creation_date": 1573821486, "answer_id": 58877246, "question_id": 58874787, "link": "https://stackoverflow.com/questions/58874787/why-open-function-doesnt-interpret-the-option-of-my-command-every-time/58877246#58877246", "title": "Why open function doesn&#39;t interpret the option of my command every time?", "body": "<p>When you provide a shell command to <code>system</code>, <code>qx</code>, <code>open</code>, etc, it is treated as a <code>sh</code> shell command.</p>\n<hr />\n<p>Here's the documentation for the <code>echo</code> builtin of <code>dash</code> which is used by some Linux distros as <code>sh</code>:</p>\n<blockquote>\n<p><code>echo [-n] args...</code></p>\n<p>Print the arguments on the standard output, separated by spaces.  Unless the <code>-n</code> option is present, a newline is output following the arguments.</p>\n<p>If any of the following sequences of characters is encountered during output, the sequence is not output.  Instead, the specified action is performed:</p>\n<p>...</p>\n<p><code>\\n</code> Output a newline character.</p>\n<p>...</p>\n</blockquote>\n<p>It has no <code>-e</code> or <code>-E</code> option.</p>\n<p>Running the commands from <code>dash</code> (aka <code>sh</code> in your case) results in exactly the same output as you received.</p>\n<pre><code>$ echo &quot;toto\\ntata&quot;\ntoto\ntata\n$ echo -e &quot;toto\\ntata&quot;\n-e toto\ntata\n$ echo -E &quot;toto\\ntata&quot;\n-E toto\ntata\n$ echo -n &quot;toto\\ntata&quot;\ntoto\ntata$\n</code></pre>\n<hr />\n<p>Your test was probably run in the <code>bash</code> shell. The following will execute the command using <code>bash</code> instead:</p>\n<pre><code>open(my $pipe, &quot;-|&quot;, &quot;bash&quot;, &quot;-c&quot;, $cmd)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1573852752, "creation_date": 1573852752, "answer_id": 58884813, "question_id": 58874787, "link": "https://stackoverflow.com/questions/58874787/why-open-function-doesnt-interpret-the-option-of-my-command-every-time/58884813#58884813", "title": "Why open function doesn&#39;t interpret the option of my command every time?", "body": "<p>Is there any reason why you use <strong>external</strong> program <strong>echo</strong> when perl has many ways to output some information to the console/file? </p>\n\n<p>At your disposition you have <strong><a href=\"https://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">print</a></strong>, <strong><a href=\"https://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">printf</a></strong>, <strong><a href=\"https://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">say</a></strong></p>\n\n<p><a href=\"https://perldoc.perl.org/5.30.0/index-functions-by-cat.html#Input-and-output-functions\" rel=\"nofollow noreferrer\">Perl input and output functions</a></p>\n\n<p><a href=\"https://docstore.mik.ua/orelly/perl2/prog/index.htm\" rel=\"nofollow noreferrer\">Programming Perl</a></p>\n"}], "owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58877246, "answer_count": 2, "score": 0, "last_activity_date": 1573854156, "creation_date": 1573812868, "last_edit_date": 1573821670, "question_id": 58874787, "link": "https://stackoverflow.com/questions/58874787/why-open-function-doesnt-interpret-the-option-of-my-command-every-time", "title": "Why open function doesn&#39;t interpret the option of my command every time?", "body": "<p>I want to use <code>open</code> function to run the following commands:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; echo \"toto\\ntata\"\ntoto\ntata\n&gt; echo -e \"toto\\ntata\"\ntoto\ntata\n&gt; echo -E \"toto\\ntata\"\ntoto\\ntata\n&gt; echo -n \"toto\\ntata\"\ntoto\\ntata\n</code></pre>\n\n<p>Note that for the last command, there is no trailing new line.</p>\n\n<p>So I have the following script:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\n\nsub run_cmd {\n    my ($cmd) = @_;\n    my $fcmd;\n\n    print(\"Run $cmd\\n\");\n\n    open($fcmd, \"$cmd |\");\n    while ( my $line = &lt;$fcmd&gt; ) {\n        print \"-&gt; $line\";\n    }\n    close $fcmd;\n}\n\neval{run_cmd('echo \"toto\\ntata\"')};\neval{run_cmd('echo -e \"toto\\ntata\"')};\neval{run_cmd('echo -E \"toto\\ntata\"')};\neval{run_cmd('echo -n \"toto\\ntata\"')};\n</code></pre>\n\n<p>But when I run it, I get this results:</p>\n\n<pre><code>Run echo \"toto\\ntata\"\n-&gt; toto\n-&gt; tata\nRun echo -e \"toto\\ntata\"\n-&gt; -e toto\n-&gt; tata\nRun echo -n \"toto\\ntata\"\n-&gt; toto\n-&gt; tataRun echo -E \"toto\\ntata\"\n-&gt; -E toto\n-&gt; tata\n\n</code></pre>\n\n<p>We can see the <code>-n</code> option is correctly interpreted by <code>open</code>, because there is no newline at the end of the text, but it is not the case for the options <code>-e</code> and <code>-E</code>. Worse, there are printed by <code>echo</code>.</p>\n\n<p>Why my options are not interpreted by <code>open</code> every time? What should I do to get a correct output?</p>\n"}, {"tags": ["sql", "perl", "mariadb"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11508193, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYP2e4qxXL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Worv7lks_KJFqykkxDWM-H0ebg/mo/photo.jpg?sz=128", "display_name": "sdgr hjgh", "link": "https://stackoverflow.com/users/11508193/sdgr-hjgh"}, "edited": false, "score": 0, "creation_date": 1573809918, "post_id": 58873675, "comment_id": 104015478, "body": "the problem with your script is i have thousand name, i can&#39;t put thousand name in &quot;$insert1-&gt;execute(@$_) for [  1, &#39;Lapin&#39;,    &#39;M&#39;],&quot;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 25, "user_id": 11508193, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYP2e4qxXL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Worv7lks_KJFqykkxDWM-H0ebg/mo/photo.jpg?sz=128", "display_name": "sdgr hjgh", "link": "https://stackoverflow.com/users/11508193/sdgr-hjgh"}, "edited": false, "score": 0, "creation_date": 1573810177, "post_id": 58873675, "comment_id": 104015628, "body": "@sdgrhjgh: That&#39;s just to emulate your situation in my database. What <i>you</i> need is just the 7 lines of code in the first snippet."}, {"owner": {"reputation": 25, "user_id": 11508193, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYP2e4qxXL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Worv7lks_KJFqykkxDWM-H0ebg/mo/photo.jpg?sz=128", "display_name": "sdgr hjgh", "link": "https://stackoverflow.com/users/11508193/sdgr-hjgh"}, "edited": false, "score": 0, "creation_date": 1573828050, "post_id": 58873675, "comment_id": 104025141, "body": "i don&#39;t understand this line, my $query1 = $db1-&gt;prepare(&#39;UPDATE truc&#39;                            . &#39; SET year = ?, parti = ? WHERE name = ?&#39;); what i put in &quot;?&quot;"}, {"owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "edited": false, "score": 0, "creation_date": 1573828987, "post_id": 58873675, "comment_id": 104025647, "body": "Those are just placeholders, they get replaced 5 lines later in the loop when the sql is executed: <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI#Placeholders-and-Bind-Values</a>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1573809260, "creation_date": 1573809260, "answer_id": 58873675, "question_id": 58873020, "link": "https://stackoverflow.com/questions/58873020/perl-compare-two-column-of-two-sql-query-from-2-databases/58873675#58873675", "title": "perl - compare two column of two SQL query from 2 databases", "body": "<p>Read from one database and update in the second one:</p>\n\n<pre><code>my $query2 = $db2-&gt;prepare('SELECT id, name, sex, year, parti FROM truc2');\nmy $query1 = $db1-&gt;prepare('UPDATE truc'\n                           . ' SET year = ?, parti = ? WHERE name = ?');\n\n$query2-&gt;execute;\n\nwhile (my @row = $query2-&gt;fetchrow_array) {\n    $query1-&gt;execute($row[3], $row[4], $row[1]);\n}\n</code></pre>\n\n<p>Tested with:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse utf8;\nuse feature qw{ say };\n\nuse open IO =&gt; ':encoding(UTF-8)', ':std';\n\nuse DBI;\n\nmy $db1 = DBI-&gt;connect('dbi:SQLite:dbname=:memory:', \"\", \"\",\n                       { sqlite_unicode =&gt; 1 });\n$db1-&gt;do('CREATE TABLE truc'\n         . ' (id INT, name TEXT, sex VARCHAR, year INT, parti TEXT)');\nmy $db2 = DBI-&gt;connect('dbi:SQLite:dbname=:memory:', \"\", \"\",\n                       { sqlite_unicode =&gt; 1 });\n$db2-&gt;do('CREATE TABLE truc2'\n         . ' (id INT, name TEXT, sex VARCHAR, year INT, parti TEXT)');\n\nmy $insert1 = $db1-&gt;prepare('INSERT INTO truc (id, name, sex)'\n                            . ' VALUES (?, ?, ?)');\n$insert1-&gt;execute(@$_) for [  1, 'Lapin',    'M'],\n                           [118, 'Koala',    'F'],\n                           [ 14, 'Mur\u00e8ne',   'A'],\n                           [  3, 'Ragondin', 'F'];\n\nmy $insert2 = $db2-&gt;prepare('INSERT INTO truc2 (id, name, sex, year, parti)'\n                            . ' VALUES (?, ?, ?, ?, ?)');\n$insert2-&gt;execute(@$_) for [14, 'Lapin',    'A', 2014, 'MODEM'],\n                           [33, 'Mur\u00e8ne',   'F', 1347, 'EELV'],\n                           [ 2, 'Ragondin', 'M', 4218, 'SP'],\n                           [ 3, 'Koala',    'F', 1512, 'CPNT'];\n\nmy $query2 = $db2-&gt;prepare('SELECT id, name, sex, year, parti FROM truc2');\nmy $query1 = $db1-&gt;prepare('UPDATE truc'\n                           . ' SET year = ?, parti = ? WHERE name = ?');\n\n$query2-&gt;execute;\n\nwhile (my @row = $query2-&gt;fetchrow_array) {\n    $query1-&gt;execute($row[3], $row[4], $row[1]);\n}\n\nmy $verify = $db1-&gt;prepare('SELECT * from truc');\n$verify-&gt;execute;\nwhile (my @row = $verify-&gt;fetchrow_array) {\n    say \"@row\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 11508193, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYP2e4qxXL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Worv7lks_KJFqykkxDWM-H0ebg/mo/photo.jpg?sz=128", "display_name": "sdgr hjgh", "link": "https://stackoverflow.com/users/11508193/sdgr-hjgh"}, "edited": false, "score": 0, "creation_date": 1574346550, "post_id": 58897805, "comment_id": 104207618, "body": "i try to do that in perl : UPDATE worldmap.worldmap_table t1 SET t1.severity = 1000 WHERE t1.host IN (SELECT h.name FROM host_inventory as i, hosts as h WHERE i.hostid=h.hostid  and h.available=1)"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 25, "user_id": 11508193, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYP2e4qxXL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Worv7lks_KJFqykkxDWM-H0ebg/mo/photo.jpg?sz=128", "display_name": "sdgr hjgh", "link": "https://stackoverflow.com/users/11508193/sdgr-hjgh"}, "edited": false, "score": 0, "creation_date": 1574453277, "post_id": 58897805, "comment_id": 104252498, "body": "@sdgrhjgh - That looks like SQL, not Perl."}], "tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 2, "last_activity_date": 1573968800, "creation_date": 1573968800, "answer_id": 58897805, "question_id": 58873020, "link": "https://stackoverflow.com/questions/58873020/perl-compare-two-column-of-two-sql-query-from-2-databases/58897805#58897805", "title": "perl - compare two column of two SQL query from 2 databases", "body": "<pre><code>UPDATE database1.truc\n    JOIN database2.truc2  ON database1.truc.name = database2.truc2.name\n    SET database1.truc.year = database2.truc2.year\n        database1.truc.parti = database2.truc2.parti;\n</code></pre>\n\n<p>No binding, no copying data into arrays, no loss of <code>id</code>, etc.</p>\n"}], "owner": {"reputation": 25, "user_id": 11508193, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYP2e4qxXL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Worv7lks_KJFqykkxDWM-H0ebg/mo/photo.jpg?sz=128", "display_name": "sdgr hjgh", "link": "https://stackoverflow.com/users/11508193/sdgr-hjgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573968800, "creation_date": 1573806584, "last_edit_date": 1573809109, "question_id": 58873020, "link": "https://stackoverflow.com/questions/58873020/perl-compare-two-column-of-two-sql-query-from-2-databases", "title": "perl - compare two column of two SQL query from 2 databases", "body": "<p>in perl, i want to insert year and parti from database 2 to database 1 if name from database 1 and name from database 2 is equal</p>\n\n<pre><code>database 1                               database 2\n-----------------------------------      ----------------------------------\ntable truc                               table truc2\n-----------------------------------      ----------------------------------\nid   name      year  parti               id   name       year   parti\n-----------------------------------      ----------------------------------\n  1  Lapin                               14   Lapin      2014   MODEM\n118  Koala                               33   Mur\u00e8ne     1347   EELV\n 14  Mur\u00e8ne                               2   Ragondin   4218   SP\n  3  Ragondin                             3   Koala      1512   CPNT\n</code></pre>\n\n<p>i want the result:</p>\n\n<pre><code>database 1                               \n-----------------------------------      \ntable truc                               \n-----------------------------------      \nid   name     year  parti        \n-----------------------------------     \n  1  Lapin    2014   MODEM                  \n118  Koala    1512   CPNT                     \n 14  Mur\u00e8ne   1347   EELV                       \n  3  Ragondin 4218   SP\n</code></pre>\n\n<p>thanks for any response,</p>\n\n<p>my code of perl and sql are <a href=\"https://stackoverflow.com/questions/58858146/perl-compare-two-column-of-two-sql-query\">here</a></p>\n"}, {"tags": ["perl", "cookies", "soap"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573811838, "post_id": 58869299, "comment_id": 104016626, "body": "You never set any cookies. You pass an unrecognized option <code>ZM_ADMIN_AUTH_TOKEN</code>. Use <code>$cookies-&gt;set_cookie</code>"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "is_accepted": false, "score": 0, "last_activity_date": 1573848602, "creation_date": 1573848602, "answer_id": 58884008, "question_id": 58869299, "link": "https://stackoverflow.com/questions/58869299/perl-soaplite-not-setting-cookes/58884008#58884008", "title": "Perl SOAP::Lite not setting cookes", "body": "<p>ikegami's comment was the right answer (needed to call set_cookie, not pass the cookie as an argument to setting up the cookie jar), however the documentation on set_cookie() is ... incomplete; here are the notes I made after looking at the source to figure out what was needed to get the cookie to actually get set:</p>\n\n<pre><code>#\n# $cookie_jar-&gt;set_cookie( $version, $key, $val, $path, $domain, $port, $path_spec, $secure, $maxage, $discard, \\%rest )\n# $version should be 0\n# $key, $val, $path must be set\n# $key must not start with $\n# $path must start with /\n# $port should be undef\n# $maxage must be &gt; 0\n#\n$cookies-&gt;set_cookie(0, 'ZM_ADMIN_AUTH_TOKEN', $admin_token, '/', 'zmail-admin.peak.org', undef, 1, 86400, 1);\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573848602, "creation_date": 1573783319, "last_edit_date": 1573783887, "question_id": 58869299, "link": "https://stackoverflow.com/questions/58869299/perl-soaplite-not-setting-cookes", "title": "Perl SOAP::Lite not setting cookes", "body": "<p>I'm trying to use SOAP::Lite to interact with the Zimbra SOAP interface.  Apparently, for admin functions, it needs an auth token sent as a cookie.  When I use the documented form (apparently inherited from LWP::UserAgent), it's not working:</p>\n\n<pre><code>...\nuse SOAP::Lite +trace =&gt; [ transport =&gt; \\&amp;log_requests ];\n...\nmy $cookies = HTTP::Cookies-&gt;new(ignore_discard =&gt; 1, ZM_ADMIN_AUTH_TOKEN =&gt; $auth_token);\n$soap-&gt;transport-&gt;cookie_jar($cookies);\n\nmy $som = $soap-&gt;call('NoOpRequest',\n                        SOAP::Data-&gt;name('authToken')-&gt;value($auth_token),\n                    );\n\nprint Dumper($som-&gt;result);\n...\nsub log_requests {\n    open LOGFILE,\"&gt;request.log\";\n    print LOGFILE Dumper(@_);\n    close LOGFILE;\n}\n</code></pre>\n\n<p>The relevant part of the request log is the headers in the request, which don't contain any cookies (and Zimbra is complaining about no auth token):</p>\n\n<pre><code>'_headers' =&gt; bless( {\n               'user-agent' =&gt; 'SOAP::Lite/Perl/1.27',\n               'soapaction' =&gt; '\"urn:zimbraAdmin#NoOpRequest\"',\n               'content-type' =&gt; 'text/xml; charset=utf-8',\n               'accept' =&gt; [\n                     'text/xml',\n                     'multipart/*',\n                     'application/soap'\n                   ],\n               'content-length' =&gt; 827\n             }, 'HTTP::Headers' ),\n\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1573765348, "post_id": 58866357, "comment_id": 104002268, "body": "What are you trying to do with this line? <code>my $counter &lt;= 8;</code>"}, {"owner": {"reputation": 33, "user_id": 12104874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77deec6f3395198cb6267b5311e95375?s=128&d=identicon&r=PG&f=1", "display_name": "kaitcrawford", "link": "https://stackoverflow.com/users/12104874/kaitcrawford"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1573766360, "post_id": 58866357, "comment_id": 104002667, "body": "I was just stating that the count for the loop can not go over 8. Maybe I don&#39;t need that included in this code since it&#39;s in the while?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1573767246, "post_id": 58866357, "comment_id": 104003079, "body": "@toolic&#39;s question was leading you to think about where you initialise the variable vs where you check the variable. Concentrate on the former :-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573767267, "post_id": 58866357, "comment_id": 104003085, "body": "&quot;<i>stating that the count for the loop can not go over 8</i>&quot;  -- OK. So, <code>$counter</code> is a variable, (very crudely speaking) a name for a place in memory where some value is held.  A thing that you can assign to or retrieve a value from.  Can&#39;t &quot;<i>state</i>&quot; conditions like that."}, {"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 0, "creation_date": 1573767276, "post_id": 58866357, "comment_id": 104003088, "body": "Use <code>&lt;STDIN&gt;</code> in order to read from console"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573767942, "post_id": 58866357, "comment_id": 104003340, "body": "(I&#39;m surprised that Perl lets you get away with <code>my $counter &lt;= 8;</code> with only warnings. I&#39;d expect that to be an outright syntax error, so that it doesn&#39;t compile.  There&#39;s probably some legitimate use that&#39;s similar enough so that the parser can&#39;t resolve it ... but I don&#39;t see what that would be)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573768250, "post_id": 58866357, "comment_id": 104003441, "body": "You never actually read what a user types in! That doesn&#39;t magically come into your program; need to retrieve it from wherever it is. In this case, you want to read console input, and in Perl <code>STDIN</code> stands for the filehandle for &quot;standard input&quot; stream (always opened for us), and we usually read from a filehandle using <code>&lt;&gt;</code>. So, <code>my $guess = &lt;STDIN&gt;; chomp $guess;</code> (that <code>chomp</code> removes the newline from the end of <code>$guess</code>, which you always get when reading user input)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573768339, "post_id": 58866357, "comment_id": 104003470, "body": "So you&#39;d say <code>print &quot;Enter guess #$counter: &quot;;</code>, where <code>$counter</code> has been initialized to <code>1</code>  earlier (not <code>&lt;= 8</code> !), so <code>my $counter = 1;</code>, and will be incremented every time in the loop, and then <code>my $guess = &lt;STDIN&gt;; chomp $guess;</code>. Then you get into your loop, and in there you&#39;ll need to read from <code>STDIN</code> again (to retrieve a new guess they type in and update your <code>$guess</code> variable) in the loop if the user&#39;s guess fails and you want to give them another chance."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573768596, "post_id": 58866357, "comment_id": 104003569, "body": "I haven&#39;t checked your logic and/or conditions, or any detail. Example: that <code>$target == $guess</code> is backwards, no? You want to continue the game while they&#39;re <i>not</i> guessing correctly so <code>$target != $guess</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1573774482, "post_id": 58866357, "comment_id": 104005516, "body": "@zdim it&#39;s perfectly legal to have a <code>my $foo</code> declaration within a larger statement, and that&#39;s what that is interpreted as: <code>(my $foo) &lt;= 8</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573774557, "post_id": 58866357, "comment_id": 104005540, "body": "@zdim useless in this context of course, since scalars will always be undef on declaration, but could be used in a more complicated expression to do something useful."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1573794425, "post_id": 58866357, "comment_id": 104009709, "body": "@Grinnz Yeah, that&#39;s what I&#39;m thinking ... but, the declaration <i>alone</i> in a middle of an expression, I&#39;m having trouble seeing how it can be used for anything. Perhaps it&#39;s just too close to call, for something a <i>little</i> different that indeed can be used.  Or perhaps it&#39;s a little crack in the parser ... <code>=</code> is OK (In an expression, for example) so certain kinds of operators are then just given a pass ... just because, hey it&#39;s legal?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1573798152, "post_id": 58866357, "comment_id": 104010723, "body": "@Grinnz  ... I guess it&#39;s just too much, too many possibilities, if it&#39;s legal, so you can only warn. (I still can&#39;t see how it can be useful for anything, in principle: it introduces a variable (name) at that scope, OK ... but it&#39;s <code>undef</code> so what&#39;s the benefit? it can be introduced later, when used, just as well.)  anyway... I think that you&#39;re right -- it&#39;s legal, period."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12104874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77deec6f3395198cb6267b5311e95375?s=128&d=identicon&r=PG&f=1", "display_name": "kaitcrawford", "link": "https://stackoverflow.com/users/12104874/kaitcrawford"}, "edited": false, "score": 0, "creation_date": 1573859710, "post_id": 58869957, "comment_id": 104038841, "body": "This worked! However, my professor only allowed &quot;my ($guess,$target,$counter);&quot; as what I could use. I didn&#39;t think to mention that so I appreciate you commenting so I at least have a idea of how to do number games."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 33, "user_id": 12104874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77deec6f3395198cb6267b5311e95375?s=128&d=identicon&r=PG&f=1", "display_name": "kaitcrawford", "link": "https://stackoverflow.com/users/12104874/kaitcrawford"}, "edited": false, "score": 1, "creation_date": 1573860492, "post_id": 58869957, "comment_id": 104039018, "body": "You can follow logic of your original post and write to the screen <b>try #</b> it also will work. I guess that professor would not allow <b>constant</b> as number of allowed tries to guess. Probably <b>$target</b> should be <b>$secret</b> as it is not known to the <i>player</i>. Your original code was missing code for <b>input</b> from the player - I showed one of the many ways to <b>collect</b> input and compare it with <b>secret</b>."}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 4, "last_activity_date": 1573790816, "last_edit_date": 1573790816, "creation_date": 1573788876, "answer_id": 58869957, "question_id": 58866357, "link": "https://stackoverflow.com/questions/58866357/i-need-a-simple-number-guessing-game-using-perl-what-am-i-missing-or-what-need/58869957#58869957", "title": "I need a simple, number guessing game using Perl. What am I missing or what needs to be changed?", "body": "<p>You was on right track, I made a small change to your code</p>\n\n<pre><code>#!usr/bin/perl\nuse Modern::Perl;\n\nmy ($guess,$target,$try,$counter);\n\n$target = (int rand 100) + 1;\n\nprint \"Welcome to k Perl Whole Number Guessing Game!\\n\";\n\nprint \"\nPlease enter a number between 1 and 100 and I will tell you\nif the number you're trying to guess is higher or lower than\nyour guess. You have up to 8 chances to uncover the number.\n\n\";\n\n$try = $counter = 8;\n\nwhile( $counter ) {\n    print \"You have left #$counter guesses: \";\n\n    $guess = &lt;&gt;;\n    chomp $guess;\n\n    print \"Your guess, $guess, is too high. Try again.\\n\"\n            if($guess &gt; $target);\n\n    print \"Your guess, $guess, is too low. Try again.\\n\" \n            if($guess &lt; $target);\n\n    $counter--;\n\n    last if $target == $guess;  \n}\n\n$counter = $try - $counter;\n\nprint \"Congratulations! You guessed the secret number ($target) in $counter tries!\"\n        if($target == $guess);\n\nprint \"I'm sorry, you didnt guess the secret number, which was $target.\"\n        if($target != $guess);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12104874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77deec6f3395198cb6267b5311e95375?s=128&d=identicon&r=PG&f=1", "display_name": "kaitcrawford", "link": "https://stackoverflow.com/users/12104874/kaitcrawford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573790816, "creation_date": 1573764914, "question_id": 58866357, "link": "https://stackoverflow.com/questions/58866357/i-need-a-simple-number-guessing-game-using-perl-what-am-i-missing-or-what-need", "title": "I need a simple, number guessing game using Perl. What am I missing or what needs to be changed?", "body": "<p>The user can only have a max of 8 tries, if they reach the 8 the loop should end. I am new to learning Perl so it can only be basic Perl concepts. When I try to run it, it does not let me input any guesses and is a never ending loop. It loops errors which are down below. I'm assuming that I'm missing something but not sure what that is. </p>\n\n<pre><code>Use of uninitialized value $counter in numeric le (&lt;=)\nUse of uninitialized value $guess in numeric gt (&gt;) \nUse of uninitialized value $guess in numeric lt (&lt;) \nUse of uninitialized value $guess in concatenation (.) \n</code></pre>\n\n<pre><code>#!usr/bin/perl\nuse Modern::Perl;\n\nmy ($guess,$target,$counter);\n\n$target = (int rand 100) + 1;\n\nprint \"Welcome to k Perl Whole Number Guessing Game!\\n\";\n\nprint \"Please enter a number between 1 and 100 and I will tell you if the number you're trying to guess\\nis higher or lower than your guess. You have up to 8 chances to uncover the number.\\n\";\n\nmy $counter &lt;= 8;\n\nprint \"Enter guess #$counter: $guess\";\n\nwhile(($counter &lt;= 8) || ($target == $guess))\n{\n    if($guess &gt; $target)\n    {\n        print \"Your guess, $guess, is too high. Try again.\";\n    }\n    if($guess &lt; $target)\n    {\n        print \"Your guess, $guess, is too low. Try again.\";\n    }\n}\n\nif($target == $guess)\n{\n    print \"Congratulations! You guessed the secret number ($target) in $counter tries!\"\n}\n\nelsif(($target != $guess) &amp;&amp; ($counter &gt; 8))\n{\n    print \"I'm sorry, you didnt guess the secret number, which was $target.\"\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1573752410, "post_id": 58861706, "comment_id": 103995934, "body": "Note: <code>glob</code> in scalar context <b>iterates over the entry list</b>.   So if this code is in a loop of some sort every next time it will return the <i>next file</i>, until there are no more at which point it returns <code>undef</code>.  That&#39;s a feature but you need to be careful.  In a list context (when assigned to an array for example) it simply returns all entries."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573756108, "post_id": 58861706, "comment_id": 103997763, "body": "<code>my $cover = glob qq(&quot;${coverbase}.*&quot;);</code> should be <code>my ($cover) = glob qq(&quot;${coverbase}.*&quot;);</code>. /// <code>if(-e $cover){</code> is wrong; <code>$cover</code> is undefined if the glob didn&#39;t match. It should be <code>if(defined($cover)){</code>.  ALWAYS use <code>use strict; use warnings</code>."}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "edited": false, "score": 0, "creation_date": 1573815265, "post_id": 58861706, "comment_id": 104018637, "body": "It&#39;s not in a loop thankfully only needed once in the script.  I&#39;ll have a think about the undef - for now it seems to work fine even when it is undef?  Yeah strict and warnings - ummmm my entire site would break under those circumstances atm"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "edited": false, "score": 0, "creation_date": 1573750089, "post_id": 58861824, "comment_id": 103994614, "body": "exactly what I&#39;m looing for I think - I will try it"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "edited": false, "score": 0, "creation_date": 1573751180, "post_id": 58861824, "comment_id": 103995287, "body": "stuff it I&#39;ll leave the comment as &#39;struggling with glob it doesn;t seem to like spaces in pathname&#39; lol"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "edited": false, "score": 1, "creation_date": 1573751582, "post_id": 58861824, "comment_id": 103995494, "body": "@Beeblbrox  The <code>glob</code> indeed can&#39;t do spaces -- if you have that around use <a href=\"https://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a>. Add <code>use File::Glob &#39;:bsd_glob&#39;;</code> at the top and <code>glob</code> will honor spaces in names."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1573751716, "post_id": 58861824, "comment_id": 103995576, "body": "This scalar context can be dangerous for unwary since it iterates, and very globally.  Perhaps add a note to that effect?"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "edited": false, "score": 0, "creation_date": 1573752281, "post_id": 58861824, "comment_id": 103995862, "body": "uh - I&#39;ve sorted it?  Many thanks - a bit of reading about glob covers the spaces issue - but any other dangers I need to know about welcome... nothnig is in there that is user defined and not already &#39;safe&#39; afaik"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "edited": false, "score": 1, "creation_date": 1573752968, "post_id": 58861824, "comment_id": 103996228, "body": "@Beeblbrox By &quot;<i>dangerous</i>&quot; (in my comment above) I meant that if you don&#39;t know about this context it may (quietly) do things other than expected.  So if you were to say <code>if (my $f = glob ...) { ... }</code> and that is in a loop of some sort, the code <i>will not</i> check every time for that one file you have, but it will return its name the first time and then an <code>undef</code> the next time (unless there are actually yet more files, in which case it will return those names one by one...)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1573756063, "post_id": 58861824, "comment_id": 103997741, "body": "Don&#39;t call <code>glob</code> in scalar context without exhausting the iterator! Fixed."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1573756041, "last_edit_date": 1573756041, "creation_date": 1573749951, "answer_id": 58861824, "question_id": 58861706, "link": "https://stackoverflow.com/questions/58861706/efficient-method-to-identify-a-filenames-extension-when-the-non-extension-name-i/58861824#58861824", "title": "Efficient method to identify a filenames extension when the non-extension name is known", "body": "<p>I'm not sure if I really understand your question. But I assume you have the basename (e.g. \"picture\") and want to have the name with extension assuming that such a file exists (e.g. \"picture.jpg\", \"picture.png\" ..).  In this case <code>glob</code> would help:</p>\n\n<pre><code>  my ($file) = glob(\"$basename.*\") or die \"no such file exists\";\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "accepted_answer_id": 58861824, "answer_count": 1, "score": 1, "last_activity_date": 1573756041, "creation_date": 1573749582, "last_edit_date": 1573752158, "question_id": 58861706, "link": "https://stackoverflow.com/questions/58861706/efficient-method-to-identify-a-filenames-extension-when-the-non-extension-name-i", "title": "Efficient method to identify a filenames extension when the non-extension name is known", "body": "<pre><code>    my $cover=\"/******/gamebooks/Accounts/$Author/MyBooks/$Book/images/cover/cover.jpg\";\nif(-e $cover){\n    $cover=$uri-&gt;encode(\"https://fightingfantasy.net/gamebooks/Accounts/$Author/MyBooks/$Book/images/cover/cover.jpg\");\n}\nelse{\n    # print \"$cover not found\";\n    $cover=\"$perl_scriptlocation/resources/images/beholder.jpg\";\n}\n</code></pre>\n\n<p>This is my code at the moment - the directory will have 1 file in it named cover. -the extension will be any valid graphical format commonly displayed by browsers.  I <em>could</em> do a directory listing, strip out the results containing the parent and child nodes and use the remaining result but it seems an extremely verbose way of doing it... does anyone have a quicker method to do this?  I imagine wildcards are in use somehow...  Many thanks.</p>\n\n<p>For those interested (thanks to the 1st answer) my final solution isthis:</p>\n\n<pre><code>    my $coverbase=\"/******/gamebooks/Accounts/$Author/MyBooks/$Book/images/cover/cover\";\n    my $cover = glob qq(\"${coverbase}.*\");\n\n    if(-e $cover){\n        $cover=~/.*\\/(.*)/i;\n        $coverfile=$1;\n        $cover=$uri-&gt;encode(\"https://fightingfantasy.net/gamebooks/Accounts/$Author/MyBooks/$Book/images/cover/$coverfile\");\n    }\n    else{\n        # print \"$cover not found\";\n        $cover=\"$perl_scriptlocation/resources/images/beholder.jpg\";\n    }\n</code></pre>\n\n<p>Which is a lot more satisfying than the only option I had before I knew about glob many thanks (yes I know it could be stripped by 2 or 3 lines still with some elegance but I don't have that yet!)</p>\n"}, {"tags": ["perl", "foreach"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1573738979, "post_id": 58858068, "comment_id": 103987628, "body": "I&#39;ve cleaned up the indentation in your code. You&#39;re welcome, of course, but please consider doing it yourself in the future."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1573740849, "last_edit_date": 1573740849, "creation_date": 1573739480, "answer_id": 58858361, "question_id": 58858068, "link": "https://stackoverflow.com/questions/58858068/assigning-two-variables-in-a-perl-foreach-loop/58858361#58858361", "title": "Assigning two variables in a Perl foreach loop", "body": "<p>If you ever find yourself having to walk across two arrays simultaneously, then it's worth asking whether you can combine the two arrays into one.</p>\n\n<pre><code>$self-&gt;{data} = [{\n  type   =&gt; 'DIA',\n  status =&gt; 'Waiting',\n}, {\n  type   =&gt; 'UPD',\n  status =&gt; 'Running',\n}, {\n  # etc\n}];\n</code></pre>\n\n<p>Then you can walk them like this:</p>\n\n<pre><code>foreach my $data (@{ $self-&gt;{data} }) {\n  my $type   = $data-&gt;{type};\n  my $status = $data-&gt;{status};\n  ...\n}\n</code></pre>\n\n<p>But if you don't want to change your existing data structures, then you need to iterate across the array indexes, rather than the array elements.</p>\n\n<pre><code>foreach my $i (0 .. $#{ $self-&gt;{status} }) {\n  my $status = $self-&gt;{status}[$i];\n  my $type   = $self-&gt;{type}[$i];\n  ...\n}\n</code></pre>\n\n<p>The problem, of course, comes when the two arrays get out of step and one has more elements than the other.</p>\n"}], "owner": {"reputation": 163, "user_id": 9230232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745b3df2b018dbf57e9b5052b2804891?s=128&d=identicon&r=PG&f=1", "display_name": "spammik", "link": "https://stackoverflow.com/users/9230232/spammik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 58858361, "answer_count": 1, "score": 1, "last_activity_date": 1573740849, "creation_date": 1573738572, "last_edit_date": 1573738932, "question_id": 58858068, "link": "https://stackoverflow.com/questions/58858068/assigning-two-variables-in-a-perl-foreach-loop", "title": "Assigning two variables in a Perl foreach loop", "body": "<p>is it possible to somehow assign 2 variables and 2 arrays to a foreach loop ? This is my code</p>\n\n<pre><code>ARRAYS:\n\n$self-&gt;{types} = [qw(DIA UPD UP2 BGD ENQ)];\n$self-&gt;{status} = [qw(Waiting Running Stopped Shutdown Reserviert)];\n</code></pre>\n\n<hr>\n\n<pre><code>sub check{\n  my $self = shift;\n  if ($self-&gt;mode =~ /netweaver::processes::list/) {\n    $self-&gt;SUPER::check();\n    $self-&gt;add_ok(\"v\u0161etko ok\");\n  } elsif ($self-&gt;mode =~ /netweaver::processes::count/) {\n    foreach my $status (@{$self-&gt;{status}}) {\n      $self-&gt;{num_status}-&gt;{$status} = 0 if !exists $self-&gt;{num_status}-&gt;{$status};\n\n      my $metric = lc 'num_' . $status;\n      $self-&gt;set_thresholds(metric =&gt; $metric,\n        warning                  =&gt; '5', critical =&gt; '20',\n      );\n      $self-&gt;add_message(\n        $self-&gt;check_thresholds(metric =&gt; $metric, value =&gt; $self-&gt;{num_status}-&gt;{$status}),\n        sprintf \"%d %s process%s\", $self-&gt;{num_status}-&gt;{$status}, $status, $self-&gt;{num_status}-&gt;{$status} == 1 ? \"\" : \"es\");\n      $self-&gt;add_perfdata(\n        label =&gt; $metric, value =&gt; $self-&gt;{num_status}-&gt;{$status},\n      );\n    }\n\n  } else {\n    if (! @{$self-&gt;{workprocs}}) {\n      $self-&gt;add_unknown(\"no workprocs were found\");\n    }\n  }\n}\n</code></pre>\n\n<p>and I need to print data from types array above...exactly as I did in sprint before</p>\n\n<blockquote>\n<pre><code>$self-&gt;{num_status}-&gt;{$status}, $status\n</code></pre>\n</blockquote>\n\n<p>something like <code>$self-&gt;{num_types}-&gt;{$types}, $types</code></p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "is_accepted": false, "score": 1, "last_activity_date": 1573733812, "creation_date": 1573733812, "answer_id": 58856597, "question_id": 58856526, "link": "https://stackoverflow.com/questions/58856526/issue-with-jsonencode-json-on-later-version-of-perl/58856597#58856597", "title": "Issue with JSON::encode_json on later version of Perl", "body": "<p>Typical! As soon as I write the post out and post it, I find the answer!</p>\n\n<p><a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=869641\" rel=\"nofollow noreferrer\">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=869641</a></p>\n\n<p>They suggest removing <code>libjson-xs-perl</code>, so I did:</p>\n\n<p><code>apt-get remove libjson-xs-perl</code></p>\n\n<p>...restarted Apache, and now it seems to work :) Hopefully that hasn't broken anything else!</p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573733812, "creation_date": 1573733553, "question_id": 58856526, "link": "https://stackoverflow.com/questions/58856526/issue-with-jsonencode-json-on-later-version-of-perl", "title": "Issue with JSON::encode_json on later version of Perl", "body": "<p>For some reason the JSON perl module isn't playing ball on my new server. I get the error:</p>\n\n<pre><code>encountered object '1', but neither allow_blessed, convert_blessed nor allow_tags settings are enabled (or TO_JSON/FREEZE method missing) at /usr/local/share/perl/5.26.1/JSON.pm line 173.\n</code></pre>\n\n<p>The code is the same as it was on another server:</p>\n\n<pre><code>my $new_files = reload_image_list();\n\nuse Data::Dumper;\nprint $IN-&gt;header;\nprint Dumper({ foo =&gt; $new_files} );\nprint JSON::encode_json( { all_results =&gt; $new_files } );\n</code></pre>\n\n<p>I've confirmed the $new_files variable is what I'm expecting (an arrayref), so I'm unsure why I get this error now :/</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573730486, "post_id": 58855577, "comment_id": 103982906, "body": "Please provide the output of <code>sprintf(&quot;%vX&quot;, $string)</code>"}, {"owner": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573730892, "post_id": 58855577, "comment_id": 103983116, "body": "The output is &quot;4F.32.20.28.30.20.E2.80.A6.20.33.30.29.20.25.20.D0.BE.D0.B1&zwnj;&#8203;.2E.D0.B4.2E.3B.43.4&zwnj;&#8203;8.34.20.28.30.2C.34.&zwnj;&#8203;33.20.2E.2E.2E.20.31&zwnj;&#8203;.2C.31.29.20.25.D0.B&zwnj;&#8203;E.D0.B1.2E.D0.B4.2E&quot; the string contains more characters then I posted here, because there others symbols, but at the moment I am concerned with the mentioned part of this string. If needed I can shrink this string to what I posted and provided requested output again"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573731198, "post_id": 58855577, "comment_id": 103983287, "body": "As long as you made sure the code exhibits the problem with that string, that&#39;s all that matters."}, {"owner": {"reputation": 821, "user_id": 8767753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b33c292d3b4b70d1d64bc4b89a670e?s=128&d=identicon&r=PG&f=1", "display_name": "PJProudhon", "link": "https://stackoverflow.com/users/8767753/pjproudhon"}, "edited": false, "score": 0, "creation_date": 1573731256, "post_id": 58855577, "comment_id": 103983316, "body": "Looks like it doesn&#39;t match the unicode part... is there any toggle to specify the use of unicode?"}, {"owner": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573731627, "post_id": 58855577, "comment_id": 103983529, "body": "I tried using /u switch replacing \\p{L} with \\w but with no luck"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573732192, "post_id": 58855954, "comment_id": 103983831, "body": "I am sorry, I am not following you. You said that I need to encode my source code using UTF-8, what do you mean by that? My source code file is encoded in UTF-8. I tried using function  decode_utf8 but code does not compile."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573732753, "post_id": 58855954, "comment_id": 103984138, "body": "Re &quot;<i>I tried using function decode_utf8 but code does not compile.</i>&quot;, Woops, forgot to load and import the sub."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573732831, "post_id": 58855954, "comment_id": 103984166, "body": "Re &quot;<i>My source code file is encoded in UTF-8.</i>&quot;, That&#39;s what I meant. But you gotta tell Perl you did that by adding <code>use utf8;</code>. Perl expects ASCII otherwise."}, {"owner": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573733349, "post_id": 58855954, "comment_id": 103984431, "body": "Your code works, thank you! Now I am getting expected output. But still I dont understand why it happened. Basically If am getting strings encoded in UTF-8 from a file I need to put &#39;use utf8&#39; at the top of the source code to make sure that regular expressions works as expected with non Latin characters?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573733535, "post_id": 58855954, "comment_id": 103984546, "body": "Decode inputs; encode outputs. If your source code is UTF-8, you need to decode it (<code>use utf8;</code>). If you read from a file or STDIN, you need to decode it (<code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>). If you print to a file, STDOUT or STDERR, you need to encode (also covered by <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>)."}, {"owner": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "edited": false, "score": 0, "creation_date": 1573733797, "post_id": 58855954, "comment_id": 103984666, "body": "OK, things are clearer now, really need to read some manuals so, Thank you very much for your help! Have a good day and upcoming weekends!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1573750278, "post_id": 58855954, "comment_id": 103994724, "body": "I recommend against the decode_utf8 function from Encode, as it will use the internal Perl <code>utf8</code> encoding that does not validate and can result in broken strings. Use <code>decode &#39;UTF-8&#39;, $str</code> or <a href=\"https://metacpan.org/pod/Encode::Simple#decode_utf8\" rel=\"nofollow noreferrer\">a nicer wrapper from my Encode::Simple module</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1573732722, "last_edit_date": 1573732722, "creation_date": 1573731637, "answer_id": 58855954, "question_id": 58855577, "link": "https://stackoverflow.com/questions/58855577/w-is-not-matching-cyrillic-characters-in-perl/58855954#58855954", "title": "\\w is not matching cyrillic characters in Perl", "body": "<p>You have a string text encoded using UTF-8.</p>\n\n<p><code>\\p{L}</code>, <code>\\W</code> and such expect to match against Unicode Code Points (decoded text).</p>\n\n<p>Easily fixed:</p>\n\n<pre><code>use Encode qw( decode_utf8 );\n\nmy $string_ucp = decode_utf8($string_utf8);\nif ($string_ucp =~ /.../) {\n   print(\"$1\\n\");\n}\n</code></pre>\n\n<p>Since <code>\u2026</code> isn't an ASCII character, you will need to encode your source code using UTF-8 and tell Perl that's what you did using <code>use utf8;</code>.</p>\n\n<p>You will need to encode the output you send to STDOUT now that <code>$1</code> no longer contains UTF-8. You can do that using <code>use open ':std', ':encoding(UTF-8)';</code>. That causes input from STDIN to be automatically decoded, output to STDOUT and STDERR to be automatically decoded, and it changes the default encoding for file handles opened in scope.</p>\n"}], "owner": {"reputation": 23, "user_id": 4475361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f64524bce70511e5d42aded323e60f?s=128&d=identicon&r=PG&f=1", "display_name": "nwnebel", "link": "https://stackoverflow.com/users/4475361/nwnebel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 58855954, "answer_count": 1, "score": 2, "last_activity_date": 1573732722, "creation_date": 1573730320, "question_id": 58855577, "link": "https://stackoverflow.com/questions/58855577/w-is-not-matching-cyrillic-characters-in-perl", "title": "\\w is not matching cyrillic characters in Perl", "body": "<p>I have a following regular expression    </p>\n\n<pre><code>$string=~m/([A-Za-z0-9]+\\s?\\(\\d+(?:,\\d+)?\\s?(?:(?:\\.\\.\\.)|\u2026)\\s?\\d+(?:,\\d+)?\\)\\s+[\\p{L}%. ]+\\s?(?:\\W))/;\nprint \"match is '$1'\\n\";\n</code></pre>\n\n<p>Which I am testing against a string with russian (cyryllic) symbols in it. My example string is </p>\n\n<blockquote>\n  <p>O2 (0 \u2026 30) % \u043e\u0431.\u0434.</p>\n</blockquote>\n\n<p>It came out of a file encoded in UTF-8. I'm expecting mentioned regular expression to match the whole string, but it is only matches this </p>\n\n<pre><code>O2 (0 \u2026 30) %\u043e\n</code></pre>\n\n<p>it is seems that cyrillic  letter '\u043e' here matces character class \\W  rather then \\p{L} as I expected. I tried putting mentioned regular expression in a <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regular expression tester</a> and it worked as I expected with the PCRE flavor, but with the others flavor the behavior is the same as I described here. </p>\n\n<p>I tried running regular expression with a /u flag replacing \\p{L} with \\w but that does not helped. Can you please help figure out what am I doing wrong?</p>\n"}, {"tags": ["perl", "emacs", "indentation", "cperl-mode"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1573801359, "post_id": 58854183, "comment_id": 104011811, "body": "Thanks for reporting this. For the first line with (for example the last <code>use constant CR =&gt; qw( ...</code>, if the cursor is at the first line with 87800, when you press <code>&lt;tab&gt;</code> <code>cperl-mode</code> will be checking the indent of the line above as seen on <a href=\"https://github.com/jrockway/cperl-mode/blob/master/cperl-mode.el#L3092\" rel=\"nofollow noreferrer\">line #3092</a> of the source code. Note that <code>(current-column)</code> on this line will give the indent position on the line above (the position after the <code>(</code> in <code>qw(</code> due to the <code>goto</code> at line 3089. I will look further to try to understand why it does this..."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1573801473, "post_id": 58854183, "comment_id": 104011858, "body": "... I also agree with you that the indent you suggest looks much better :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1573939513, "post_id": 58854183, "comment_id": 104055432, "body": "I have added a <a href=\"https://github.com/jrockway/cperl-mode/pull/54\" rel=\"nofollow noreferrer\">pull request</a>, can you check if it works for you?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8048443, "user_type": "registered", "profile_image": "https://graph.facebook.com/374656846262718/picture?type=large", "display_name": "Lucas Lam", "link": "https://stackoverflow.com/users/8048443/lucas-lam"}, "edited": false, "score": 0, "creation_date": 1573854274, "post_id": 58882679, "comment_id": 104037345, "body": "Thanks for this commit, but this is not what I am seeking. I personally do not use <code>perl-mode</code> since it is fairly outclassed by <code>cperl-mode</code> these days.Isn&#39;t the fix the same for <code>perl-mode</code> and <code>cperl-mode</code> ?"}, {"owner": {"reputation": 26618, "user_id": 1283394, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d7d7689f9562293f6106353a6b1a905?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1283394/stefan"}, "reply_to_user": {"reputation": 21, "user_id": 8048443, "user_type": "registered", "profile_image": "https://graph.facebook.com/374656846262718/picture?type=large", "display_name": "Lucas Lam", "link": "https://stackoverflow.com/users/8048443/lucas-lam"}, "edited": false, "score": 0, "creation_date": 1573856979, "post_id": 58882679, "comment_id": 104038088, "body": "@LucasLam: The code for <code>cperl-mode</code> is quite different so &quot;the same fix&quot; may be possible, but only if you consider a very loose definition of &quot;same&quot;.  I can&#39;t resist mentioning that I find your your &quot;these days&quot; very perplexing: <code>perl-mode</code> used to be lightyears behind <code>cperl-mode</code>, but AFAIK the distance has tended to shrink rather than increase over the years."}], "tags": [], "owner": {"reputation": 26618, "user_id": 1283394, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d7d7689f9562293f6106353a6b1a905?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1283394/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1573842113, "creation_date": 1573842113, "answer_id": 58882679, "question_id": 58854183, "link": "https://stackoverflow.com/questions/58854183/emacs-indent-issue-with-qw-keyword/58882679#58882679", "title": "Emacs indent issue with qw keyword", "body": "<p>I just pushed a patch to Emacs's <code>master</code> branch to fix indentation of <code>qw</code> in <code>perl-mode</code>.<br>\nIt now works almost like what you want (except for the closing paren).  E.g.:</p>\n\n<pre><code>my @tutu = qw[\n    tata\n    titi\n    ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8048443, "user_type": "registered", "profile_image": "https://graph.facebook.com/374656846262718/picture?type=large", "display_name": "Lucas Lam", "link": "https://stackoverflow.com/users/8048443/lucas-lam"}, "is_accepted": true, "score": 1, "last_activity_date": 1574159723, "creation_date": 1574159723, "answer_id": 58931997, "question_id": 58854183, "link": "https://stackoverflow.com/questions/58854183/emacs-indent-issue-with-qw-keyword/58931997#58931997", "title": "Emacs indent issue with qw keyword", "body": "<p>Solved by <a href=\"https://github.com/jrockway/cperl-mode/pull/54\" rel=\"nofollow noreferrer\">https://github.com/jrockway/cperl-mode/pull/54</a> from @H\u00e5konH\u00e6gland.</p>\n"}], "owner": {"reputation": 21, "user_id": 8048443, "user_type": "registered", "profile_image": "https://graph.facebook.com/374656846262718/picture?type=large", "display_name": "Lucas Lam", "link": "https://stackoverflow.com/users/8048443/lucas-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 58931997, "answer_count": 2, "score": 1, "last_activity_date": 1574159723, "creation_date": 1573726206, "question_id": 58854183, "link": "https://stackoverflow.com/questions/58854183/emacs-indent-issue-with-qw-keyword", "title": "Emacs indent issue with qw keyword", "body": "<p>I have Emacs 26.3 running on windows with cperl-mode 6.2 from the last commit of the cperl-mode repository of jrockway.</p>\n\n<p>I have the following configuration for Emacs :</p>\n\n<pre><code>(setq-default tab-width 4)\n(setq-default indent-tabs-mode nil)\n(setq cperl-indent-level 4)\n(setq cperl-indent-parens-as-block t)\n(setq cperl-close-paren-offset -4)\n(setq cperl-continued-statement-offset 4)\n(setq cperl-tab-always-indent t)\n(setq cperl-fix-hanging-brace-when-indent t)\n(setq cperl-indent-subs-specially nil)\n</code></pre>\n\n<p>When I initialize an array with qw(), it gives me the following :</p>\n\n<pre><code>my @toto = qw(\n                 toto\n                 tutu\n         );\n\nmy @tutu = qw[\n                 tata\n                 titi\n         ];\n\nuse constant CR =&gt; qw(\n                         87800\n                         76400\n                         80200\n                         81000\n                 );\n</code></pre>\n\n<p>This is not my guideline since I am following the 80 character rule ...\nI do not know if it's a normal behavior or a bug.\nI have tried multiple configuration, looked at customize-group of cperl, but I can't find a way to make what I want.\nHere is what I would like to do :</p>\n\n<pre><code>my @toto = qw(\n    toto\n    tutu\n);\n\nmy @tutu = qw[\n    tata\n    titi\n];\n\nuse constant CR =&gt; qw(\n    87800\n    76400\n    80200\n    81000\n);\n</code></pre>\n\n<p>Anyone has an idea or an Elisp hack to do that ?</p>\n\n<p>Thank you for your help :)</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573723086, "post_id": 58853045, "comment_id": 103978503, "body": "Dammit.. why did I not think of that, I am actually using the exact <code>for (1..10) {print $_</code> for something else in this exact same script for something else.."}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573725329, "post_id": 58853045, "comment_id": 103979822, "body": "Would you know if there is a limit for the number of characters I can place? If I <code>while (glob &#39;{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,&zwnj;&#8203;D,E,F,G,H,I,J,K,L,M,&zwnj;&#8203;N,O,P,Q,R,S,T,U,V,W,&zwnj;&#8203;X,Y,Z}&#39; x $i...</code> it seems to stop at the end of <code>2</code> characters being <code>ZZ</code>, no matter what the range is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573727329, "post_id": 58853045, "comment_id": 103980997, "body": "It doesn&#39;t stop; only pauses. (2s in my case.) It seems that <code>glob</code> generates a list of the all the results it&#39;s going to return up front. If it pauses for a very long time, it might be that you&#39;ve run out of memory and started thrashing. See <code>NestedLoop</code> from the <a href=\"https://metacpan.org/pod/Algorithm::Loops\" rel=\"nofollow noreferrer\">Algorithm::Loop</a> if you need to cut down on memory."}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573728451, "post_id": 58853045, "comment_id": 103981746, "body": "I see, Thanks a mill again."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1573722649, "creation_date": 1573722649, "answer_id": 58853045, "question_id": 58852939, "link": "https://stackoverflow.com/questions/58852939/generate-word-from-list-of-characters/58853045#58853045", "title": "Generate word from list of characters", "body": "<pre><code>for my $i (2..4) {\n   say while glob '{A,B,C,D,#,@,a,d,e,f}' x $i;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1573894219, "last_edit_date": 1573894219, "creation_date": 1573722668, "answer_id": 58853052, "question_id": 58852939, "link": "https://stackoverflow.com/questions/58852939/generate-word-from-list-of-characters/58853052#58853052", "title": "Generate word from list of characters", "body": "<p>One way for this is to use a little extension of the linked question and answer. To generate the sequence of ascii codes which will be sampled from, from a given string</p>\n\n<pre><code>perl -wE'say for map { ord($_) } split \"\", q(abcdefG1234%#@)'\n</code></pre>\n\n<p>Now with that list on hand, run the code from the linked page for sequences of length 2 through 4.</p>\n"}], "owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58853045, "answer_count": 2, "score": 2, "last_activity_date": 1573894219, "creation_date": 1573722319, "question_id": 58852939, "link": "https://stackoverflow.com/questions/58852939/generate-word-from-list-of-characters", "title": "Generate word from list of characters", "body": "<p>I asked <a href=\"https://stackoverflow.com/questions/58851453/generate-all-combinations-from-list-of-characters\">this question</a> and I realized I was asking the question incorrectly, though the answer @Zdim provided is exactly what I asked: So now I need to change that question a bit.</p>\n\n<pre><code>my $str = 'aaaa';\nprint $str++, $/ while $str le 'dddd';\n</code></pre>\n\n<p>So the above code does each combination from <code>aaaa</code> to <code>dddd</code> for instance:</p>\n\n<pre><code>aaaa\naaab\naaac\n...\ndaaa\n...\ndddd\n</code></pre>\n\n<p>However, we need to generate <strong>all</strong> the possible combinations of a given set of the given characters. whether they are numeric, special characters or alphabetical characters. So If I tell the script the minimum <code>2</code> and maximum is <code>4</code> letter words and I give an input string of:</p>\n\n<pre><code>abcdefG1234%#@\n</code></pre>\n\n<p>it will then generate:</p>\n\n<pre><code>aa\naaa\naaaa\nbb\naaab\nbbbb\n@@@@\nabc@\nab@1\n...\n</code></pre>\n\n<p>So it should use each of the characters and create each possible combination from minimum <code>2</code> characters to maximum <code>4</code> characters.</p>\n\n<p>So even if I give the entire alphanumeric and special characters, it will create each possible word or string within the range of <code>2</code> to <code>4</code> characters.</p>\n\n<p>If We take this <code>glob</code> example, it is close, but it will only do all the sets of 4, not all combinations from <code>2</code>, then <code>3</code> and then <code>4</code></p>\n\n<pre><code>print, while glob '{A,B,C,D,#,@,a,d,e,f}'x4\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1573721908, "post_id": 58852709, "comment_id": 103977856, "body": "I think that you were <a href=\"https://stackoverflow.com/a/58835507/4653379\">told how to do this</a> just yesterday ...?"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1573726553, "post_id": 58852709, "comment_id": 103980521, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/58833082/declare-hash-variable-in-loop\">Declare hash variable in loop</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "edited": false, "score": 0, "creation_date": 1573730250, "post_id": 58853005, "comment_id": 103982775, "body": "i can see only  BV_N4  V 10/.18 8 3.6 not the rest of the data"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "edited": false, "score": 0, "creation_date": 1573730625, "post_id": 58853005, "comment_id": 103982987, "body": "@kayegabato: If the data is in the arrays, then my code will display it. If my code isn&#39;t displaying the data, then it isn&#39;t in the arrays. Of course, I don&#39;t know how you get from the input data in your question to the data supposedly being in the arrays, so I have no idea why the arrays aren&#39;t being populated correctly. If you have problems populating the arrays, you should probably ask another question about that."}, {"owner": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "edited": false, "score": 0, "creation_date": 1573778870, "post_id": 58853005, "comment_id": 104006512, "body": "i research and try this one for (my $i=0; $i &lt;= $#testnames; $i++)  then it shows all the data"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "edited": false, "score": 0, "creation_date": 1573809329, "post_id": 58853005, "comment_id": 104015153, "body": "@kayegabato: I can think of no circumstances where <code>for (my $i=0; $i &lt;= $#testnames; $i++)</code> isn&#39;t exactly equivalent to <code>for my $i (0 .. $#testnames)</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1573722500, "creation_date": 1573722500, "answer_id": 58853005, "question_id": 58852709, "link": "https://stackoverflow.com/questions/58852709/how-to-use-for-loop-in-array-of-data/58853005#58853005", "title": "how to use for loop in array of data", "body": "<p>As you were <a href=\"https://stackoverflow.com/questions/58833082/declare-hash-variable-in-loop/58835507#58835507\">told yesterday</a>:</p>\n\n<blockquote>\n  <p>When you want to iterate several arrays synchronously, iterate over the indices</p>\n</blockquote>\n\n<pre><code>for my $i (0 .. $#testnames) {\n  print \"$testnames[$i] $units[$i] $hilim[$i] $lolim[$i]\";\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12180563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDxhiUrJ7tIDezwiI9S0kUhFs4-2-xvnAceVjtQ=k-s128", "display_name": "kaye", "link": "https://stackoverflow.com/users/12180563/kaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58853005, "answer_count": 1, "score": 0, "last_activity_date": 1573722500, "creation_date": 1573721438, "question_id": 58852709, "link": "https://stackoverflow.com/questions/58852709/how-to-use-for-loop-in-array-of-data", "title": "how to use for loop in array of data", "body": "<p>I wanted to use for loop in my code, my objective is to print testnames[i] units[i] hilim[i] lolim[i]\nPlease see my sample data below.   </p>\n\n<pre><code>  testnames     BV_N4       BV_N43      BV_P4    \n    units       V 10/.18    V 10/.35    V 10/.18     \n    hilim       8           13         -3.6 \n    lolim       3.6         6          -8\n\nfor @testnames {\nprint \"$testnames[i] $units[i] $hilim[i] $lolim[i]\";\n}\n</code></pre>\n"}, {"tags": ["apache", "perl", "mojolicious", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 285, "user_id": 1444173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d3e5d0b68c1989ad1cf6d21b52d60d?s=128&d=identicon&r=PG", "display_name": "Francesc Guasch", "link": "https://stackoverflow.com/users/1444173/francesc-guasch"}, "is_accepted": false, "score": 1, "last_activity_date": 1575972211, "creation_date": 1575972211, "answer_id": 59264641, "question_id": 58852271, "link": "https://stackoverflow.com/questions/58852271/mojolicious-url-for-operation-insecure-in-webservice/59264641#59264641", "title": "Mojolicious url_for operation insecure in webservice", "body": "<p>I solved it this way: the <em>apache proxy</em> must have some specific settings and also the <em>mojo</em> app must be in <em>reverse proxy</em> mode.</p>\n\n<p><strong>Apache Settings</strong></p>\n\n<p>Apache must know how to proxy the web services and it must tell mojo about the forwarding protocol.</p>\n\n<ul>\n<li>I put all my webservices under the <em>/ws/</em> and I added it to <em>ProxyPass</em></li>\n<li>My mojo app is at the same host at port 8080 so I proxy to <em>localhost:8080</em>. </li>\n<li>It is very important to set the <em>X-Forwarded-Proto</em></li>\n</ul>\n\n<p>At <em>/etc/apache2/sites-enabled/default-ssl.conf</em> I changed this way:</p>\n\n<pre><code>&lt;IfModule mod_ssl.c&gt;\n  &lt;VirtualHost _default_:443&gt;\n    ProxyRequests Off\n    ProxyPreserveHost On\n    ProxyPass /ws/ ws://localhost:8080/ws/ keepalive=On\n    ProxyPass / http://localhost:8080/ keepalive=On\n    ProxyPassReverse / http://localhost:8081/\n    RequestHeader set X-Forwarded-Proto \"https\"\n</code></pre>\n\n<p><strong>Mojo Proxy</strong></p>\n\n<p>The mojolicious app must know it is in reverse proxy. If you are using <em>hypnotoad</em> it may not be necessary. When I did some tests with <em>morbo</em> I had to run it this way:</p>\n\n<pre><code>MOJO_REVERSE_PROXY=1 morbo script.pl\n</code></pre>\n\n<p>There is more documentation at <a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Reverse-proxy\" rel=\"nofollow noreferrer\">https://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Reverse-proxy</a></p>\n"}], "owner": {"reputation": 285, "user_id": 1444173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d3e5d0b68c1989ad1cf6d21b52d60d?s=128&d=identicon&r=PG", "display_name": "Francesc Guasch", "link": "https://stackoverflow.com/users/1444173/francesc-guasch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575972267, "creation_date": 1573719836, "last_edit_date": 1575972267, "question_id": 58852271, "link": "https://stackoverflow.com/questions/58852271/mojolicious-url-for-operation-insecure-in-webservice", "title": "Mojolicious url_for operation insecure in webservice", "body": "<p>I am trying to return content with a web service. Behind an apache proxy if fails with \"Operation insecure\".</p>\n\n<p>I read about adding an apache hook but it won't work for me. Setting the environment variable neither.\nThis is what I tried: <a href=\"https://stackoverflow.com/questions/47009434/how-to-make-mojoliciouss-url-for-to-abs-return-correct-scheme-http-or-htt\">how to make Mojolicious&#39;s url_for()-&gt;to_abs() return correct scheme (http or https) behind nginx</a></p>\n\n<p>Maybe or webservice I have to do something else ? Also I use mojolicious lite.</p>\n\n<p>Also the url_for is done in the template file .html.ep. I use it to call the web service from javascript.</p>\n\n<p>I run Mojolicious 7.59 on Ubuntu 18.04. Thank you for you help</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573725122, "post_id": 58852095, "comment_id": 103979704, "body": "It might make more sense to add <code>export PERL5LIB=&quot;$HOME&#47;lib&quot;</code> to your login script than to use <code>use lib</code> with an absolute path."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1573754354, "last_edit_date": 1573754354, "creation_date": 1573720543, "answer_id": 58852478, "question_id": 58852095, "link": "https://stackoverflow.com/questions/58852095/eliminate-the-username-from-the-use-command/58852478#58852478", "title": "Eliminate the UserName from the &quot;use&quot; command", "body": "<p>If I'm understanding your quest correctly, one way is</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $user_name;\nBEGIN { $user_name = $ENV{USER} }\n\nuse lib \"/home/$user_name/lib\";\n\n# use packages from that path...\n</code></pre>\n\n<p>This sets the username of the user who runs the script.</p>\n\n<p>Better yet, <em>in this particular case</em> the use of <a href=\"https://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END\" rel=\"noreferrer\">BEGIN</a> isn't really needed since <a href=\"https://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"noreferrer\">%ENV</a> is a global variable set up by the interpreter early enough, so you can simply say</p>\n\n<pre><code>use lib \"/home/$ENV{USER}/lib\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use lib \"$ENV{HOME}/lib\"\n</code></pre>\n\n<p>However, this won't work for many other related needs, which is why I (first) showed a way to work out things which aren't handed to us at compile time, in a <code>BEGIN</code> block. </p>\n\n<p>In that case, the little dance around <code>BEGIN</code> goes as follows.  The <code>use</code> runs at compile-time, so <code>$user_name</code> must already be available; thus we set it up in a <code>BEGIN</code> block that must come <em>before</em> the <code>use</code> statement that uses the variable.  However, we need to declare the variable outside of the block (and <code>my</code> is a compile-time statement).</p>\n\n<p>All that can then be wrapped in another block, enclosing code from before <code>my $user_name</code> to after <code>user lib...</code>, to scope that <code>$user_name</code> variable so that it is not seen in the rest of the file.</p>\n\n<p>Another option seems to be to simply move those packages to a user-neutral location, and then you don't need the username in that <code>use lib</code>  statement ...?</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 3, "last_activity_date": 1573723402, "creation_date": 1573723402, "answer_id": 58853289, "question_id": 58852095, "link": "https://stackoverflow.com/questions/58852095/eliminate-the-username-from-the-use-command/58853289#58853289", "title": "Eliminate the UserName from the &quot;use&quot; command", "body": "<blockquote>\n  <p>Can you use something like this instead? <code>use lib './lib';</code></p>\n</blockquote>\n\n<p>Almost, but not quite.</p>\n\n<p>The problem with <code>use lib './lib';</code> is that it will look to the <code>lib/</code> directory underneath the user's current working directory when they run the script.  This means that the program will only work correctly if the user is in the correct directory when they run it.  It also creates a potential security issue if they happen to be in a directory where an attacker has created a malicious <code>lib/</code> subdirectory containing module files matching the names of modules your code uses.</p>\n\n<p>Instead, the Perl idiom to do what you want is:</p>\n\n<pre><code>use FindBin '$RealBin';\nuse lib \"$RealBin/lib\";\n</code></pre>\n\n<p>When you use <code>FindBin</code>, it finds the file containing the Perl program you're running and sets <code>$RealBin</code> to the directory path where that file is located.  The <code>use lib</code> will then use the <code>lib/</code> directory under that path, regardless of what directory the program is started from.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1573749882, "creation_date": 1573749882, "answer_id": 58861799, "question_id": 58852095, "link": "https://stackoverflow.com/questions/58852095/eliminate-the-username-from-the-use-command/58861799#58861799", "title": "Eliminate the UserName from the &quot;use&quot; command", "body": "<p>To include libraries from a directory relative to the current file, use <a href=\"https://metacpan.org/pod/lib::relative\" rel=\"nofollow noreferrer\">lib::relative</a>:</p>\n\n<pre><code># in file /home/user/project/foo.pl\nuse lib::relative 'lib'; # includes /home/user/project/lib\nuse lib::relative '../lib'; # includes /home/user/lib\n</code></pre>\n\n<p>This will convert it to an absolute path, it's a bad idea to have relative paths in <code>@INC</code> since it relies on the current working directory, which could be anything and can be changed at any time.</p>\n\n<p>lib::relative can also be easily replicated using core modules as documented.</p>\n"}], "owner": {"reputation": 63, "user_id": 5978990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8b25d5bc0c11d1819cb471f0616b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Yahdav", "link": "https://stackoverflow.com/users/5978990/daniel-yahdav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58853289, "answer_count": 3, "score": 4, "last_activity_date": 1574138476, "creation_date": 1573719169, "last_edit_date": 1574138343, "question_id": 58852095, "link": "https://stackoverflow.com/questions/58852095/eliminate-the-username-from-the-use-command", "title": "Eliminate the UserName from the &quot;use&quot; command", "body": "<p>All my Perl files start with the /home/UserName/lib use command. Is there a way to eliminate the hardcoded <strong>UserName</strong> from all my .pl files? I want to simplify duplicating of my website for different users and different domains. This is a Perl Templates website that takes the cfg=UserName param from the URL and renders the site according to the specific user format. But the lib files are all the same for all users!</p>\n\n<p>Can you use something like this instead?      use lib './lib'; \nSorry, I have very limited knowledge of perl programming. </p>\n\n<p>Example:</p>\n\n<pre><code>use lib '/home/UserName/lib';\nuse RT::RealTime;\nuse RT::Site;\n.... \n</code></pre>\n\n<p>Anyone who can help is appreciated.</p>\n"}, {"tags": ["mysql", "sql", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1573723009, "post_id": 58851858, "comment_id": 103978450, "body": "Seems like <code>SQL::SplitStatement</code> uses <a href=\"https://metacpan.org/pod/SQL::Tokenizer\" rel=\"nofollow noreferrer\"><code>SQL::Tokenizer</code></a> to split the SQL code into statements. The tokenizer uses <a href=\"https://metacpan.org/release/SQL-Tokenizer/source/lib/SQL/Tokenizer.pm#L16\" rel=\"nofollow noreferrer\">a simple Perl regex</a> (no real parser). Such a long statement as you have might indeed be to heavy for it.. Can you try to reduce the <code>$sql_blob</code> to only the long statement? Does it still hang?"}, {"owner": {"reputation": 19, "user_id": 7413366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Chsap.png?s=128&g=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/7413366/someone"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1573728997, "post_id": 58851858, "comment_id": 103982137, "body": "Reduced input file for <code>$sql_blob</code> to one long-long line with REPLACE INTO (...) VALUES (...), (...), ... (...); - same result - hangs up on <code>split($sql_blob)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7413366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Chsap.png?s=128&g=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/7413366/someone"}, "edited": false, "score": 0, "creation_date": 1573729377, "post_id": 58854904, "comment_id": 103982332, "body": "Thanks for answer. I&#39;ll look closer to module, you&#39;ve posted. Yes, maybe statement is too long, but SQL::SplitStatement says nothing about such limitations. Also <code>perl -d &lt;script&gt; seems to give infinite loop somewhere in  &quot;native&quot; perl subroutines, like </code>split`."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1573728273, "creation_date": 1573728273, "answer_id": 58854904, "question_id": 58851858, "link": "https://stackoverflow.com/questions/58851858/perl-sqlsplitstatement-hangs-on-large-string/58854904#58854904", "title": "Perl SQL::SplitStatement hangs on large string", "body": "<p>Maybe that statement is just too large for the module? Here is an alternative you can try: <a href=\"https://github.com/hyrise/sql-parser\" rel=\"nofollow noreferrer\">C++ SQL Parser</a>. I tried this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;hsql/SQLParser.h&gt;\n\nint main()\n{\n    const std::string query = R\"##(SELECT * FROM foo where a =  1; \n            SELECT * FROM foo where a == 2; \n            SELECT * FROM foo where a != 1; \n            SELECT * FROM foo where a &lt;&gt; 1; \n            SELECT * FROM foo where a &gt;  1; \n            SELECT * FROM foo where a &lt;  1; \n            SELECT * FROM foo where a &gt;= 1; \n            SELECT * FROM foo where a &lt;= 1; \n        SELECT * FROM foo where a = TRUE; \n        SELECT * FROM foo where a = false;)##\";\n    hsql::SQLParserResult result;\n    hsql::SQLParser::parse(query, &amp;result);\n\n    if (result.isValid() &amp;&amp; result.size() &gt; 0) {\n        auto num_statements = result.size();\n        std::cout &lt;&lt; \"Number of statements: \" &lt;&lt; num_statements &lt;&lt; '\\n';\n        for (int i=0; i&lt; num_statements ; i++) {\n            const hsql::SQLStatement* statement = result.getStatement(i);\n            if (statement-&gt;isType(hsql::kStmtSelect)) {\n                const hsql::SelectStatement* select\n                    = (const hsql::SelectStatement*) statement;\n                std::cout &lt;&lt; \" \" &lt;&lt; i &lt;&lt; \": SELECT statement\\n\";\n            }\n        }\n    }\n    else {\n        std::cout &lt;&lt; \"parse failed: \" &lt;&lt; result.errorMsg() &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>Number of statements: 10\n 0: SELECT statement\n 1: SELECT statement\n 2: SELECT statement\n 3: SELECT statement\n 4: SELECT statement\n 5: SELECT statement\n 6: SELECT statement\n 7: SELECT statement\n 8: SELECT statement\n 9: SELECT statement\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 7413366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Chsap.png?s=128&g=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/7413366/someone"}, "is_accepted": false, "score": 1, "last_activity_date": 1573808517, "creation_date": 1573808517, "answer_id": 58873486, "question_id": 58851858, "link": "https://stackoverflow.com/questions/58851858/perl-sqlsplitstatement-hangs-on-large-string/58873486#58873486", "title": "Perl SQL::SplitStatement hangs on large string", "body": "<p>I've also tested <code>DBIx:RunSQL-&gt;split_sql</code> - it doesn't split SQLs in one-line at all. <code>SQL::SplitStatement</code> even on core-i7 with 16 Gb RAM eats 2 CPU cores and does nothing...</p>\n\n<p>Found answer here: <a href=\"https://stackoverflow.com/questions/1232950/perl-dbi-run-sql-script-with-multiple-statements/1233003#1233003\">Perl DBI - run SQL Script with multiple statements</a> -\nsubroutine seems to work for my tasks - it splits string like <code>SQL1 (?,?) VALUES (?,?);SQL2 &lt;some_statement&gt;;SQL3;</code> into separate SQL commands. Also it works OK with long lines (more than 8 mln and several SQL commands in this line). </p>\n"}], "owner": {"reputation": 19, "user_id": 7413366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Chsap.png?s=128&g=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/7413366/someone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573808517, "creation_date": 1573718120, "question_id": 58851858, "link": "https://stackoverflow.com/questions/58851858/perl-sqlsplitstatement-hangs-on-large-string", "title": "Perl SQL::SplitStatement hangs on large string", "body": "<p>Debian-9.11 x86, perl-5.24, SQL::SplitStatement-1.0020</p>\n\n<p>There's 23 Mb MySQL-file with several <code>REPLACE INTO ... VALUES(...)</code> one command per file line. All strings are valid SQL. But one string is about 8 mln chars.</p>\n\n<p>When trying to parse it through <code>SQL::SplitStatement</code> (see below), script hangs, eating 100% CPU and does nothing as a result.</p>\n\n<pre><code>my $sql_blob=read_file(\"$INDIR/$f\",{binmode =&gt; ':utf8'});\nmy $sql_splitter= SQL::SplitStatement-&gt;new();\nmy @sql_list=$sql_splitter-&gt;split($sql_blob); print \"Size: $#sql_list\\n\"; # This will be never printed\n</code></pre>\n\n<p>What's wrong? Bug? </p>\n"}, {"tags": ["perl", "ssh"], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 1, "creation_date": 1573736989, "post_id": 58851831, "comment_id": 103986486, "body": "Yes, you&#39;re right. Once if you successfully connect to the ssh server (either through script or manually) from next time it will not throw the above error. In my case these ssh servers may vary but credentials will remain same for all the hosts."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1573718025, "creation_date": 1573718025, "answer_id": 58851831, "question_id": 58851764, "link": "https://stackoverflow.com/questions/58851764/perl-ssh-connection-error-on-netopenssh-module/58851831#58851831", "title": "Perl SSH connection Error on Net::OpenSSH Module", "body": "<blockquote>\n  <p>... is it okay to disable StrictHostKeyChecking</p>\n</blockquote>\n\n<p>Usually it is not ok and that's why StrictHostKeyChecking is enabled by default. If you disable it then SSH man in the middle attacks are possible. It is only safe to do this if you can otherwise make sure that no such attacks are possible, for example by using a fully trusted network (like connections to the same machine you are on).</p>\n\n<p>The proper way to address this problem is actually kind of written in the error message:</p>\n\n<blockquote>\n  <p>... the remote host public key is probably not present in the '~/.ssh/known_hosts' file</p>\n</blockquote>\n\n<p>Thus, make sure that the host is already trusted. This can be done by connecting to the host with SSH and check the presented host key against the one you know the host should have. Once accepted it will be put into the <code>known_hosts</code> file.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573718025, "creation_date": 1573717735, "question_id": 58851764, "link": "https://stackoverflow.com/questions/58851764/perl-ssh-connection-error-on-netopenssh-module", "title": "Perl SSH connection Error on Net::OpenSSH Module", "body": "<p>I am ssh'ing to the server using perl <code>Net::OpenSSH</code> module. </p>\n\n<p>My code is below:</p>\n\n<pre><code>my ($host, $user, $passwd) = (\"my.ip.address.here\", \"userxyz\", \"passwordxyz\");\nmy $ssh = Net::OpenSSH-&gt;new( $host,\n                             user =&gt; $user,\n                             password =&gt; $passwd\n);\n$ssh-&gt;error and die \"Couldn't establish SSH connection: \". $ssh-&gt;error;\n</code></pre>\n\n<p>When I run this code I am got following error:</p>\n\n<pre><code>Couldn't establish SSH connection: unable to establish master SSH connection: the authenticity of the target host can't be established; the remote host public key is probably not present in the '~/.ssh/known_hosts' file ......\n</code></pre>\n\n<p>When I searched solution for the same in perlmonks I found <code>disable StrictHostKeyChecking</code>.</p>\n\n<p>So I modified the code like below and it worked.</p>\n\n<pre><code>$ssh = Net::OpenSSH-&gt;new($host,\n           master_opts =&gt; [-o =&gt; \"StrictHostKeyChecking=no\"],\n           ...);\n</code></pre>\n\n<p>I need suggestions from experts, is it okay to disable StrictHostKeyChecking ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573718156, "post_id": 58851453, "comment_id": 103976104, "body": "&quot;<i>lower and uppercase letters as well as numeric and special characters</i>&quot;  -- are you saying that you want each 4-letter word to have one of each of these?  (So <code>a1B#</code> but not <code>a1B7</code> since this one doesn&#39;t have a special character.)  Or is it ok to have <code>abcd</code>, <code>1234</code> (etc) among others?"}, {"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573718323, "post_id": 58851453, "comment_id": 103976160, "body": "@zdim, no, so all combinations of a given set. Let me edit and clarify."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573719255, "post_id": 58851453, "comment_id": 103976543, "body": "OK, thank you.  posted one way for what I think you want"}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "edited": false, "score": 0, "creation_date": 1573721053, "post_id": 58852104, "comment_id": 103977429, "body": "Thanks a mill. This does exactly what I asked, but I just realized I asked incorrectly So I am going to ask another question, regarless, this does exactly what I required from this question."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1573759302, "last_edit_date": 1573759302, "creation_date": 1573719205, "answer_id": 58852104, "question_id": 58851453, "link": "https://stackoverflow.com/questions/58851453/generate-all-combinations-from-list-of-characters/58852104#58852104", "title": "Generate all combinations from list of characters", "body": "<p>Use a list of integers that are <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII codes</a> for the characters you accept, to sample from it using your favorite (pseudo-)random number generator. Then convert each to its character using <a href=\"https://perldoc.perl.org/functions/chr.html\" rel=\"nofollow noreferrer\">chr</a> and concatenate them.</p>\n\n<p>Like</p>\n\n<pre><code>perl -wE'$rw .= chr( 32+(int rand 126-32) ) for 1..4; say $rw'\n</code></pre>\n\n<p>Notes</p>\n\n<ul>\n<li><p>I use a one-liner merely for easy copy-paste testing. Write this nicely in a  script, please</p></li>\n<li><p>I use the sketchy <a href=\"https://perldoc.perl.org/functions/rand.html\" rel=\"nofollow noreferrer\">rand</a>, good for shuffling things a bit.  Replace with a better one if needed</p></li>\n<li><p>Glueing four (pseudo-)random numbers <em>does not</em> build a good distribution; even as each letter on its own does, the whole thing does not. But the four should satisfy most needs.</p>\n\n<p>If not, I think that you'd need to produce a far longer list (range of allowed chars repeated four times perhaps) and randomize it, then draw four-letter subsequences. A lot more work</p></li>\n<li><p>I need to tap dance a little to produce (random-ish) integers from 32 to 126 using <code>rand</code>, since it takes only the end of range.  Also, this takes all of them from that range, likely not what you want; so specify subranges, or specific lists that you want to draw from</p></li>\n</ul>\n"}], "owner": {"reputation": 210, "user_id": 8030832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53e968cb5cda47d9f10595b7e98dadf?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/8030832/gerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58852104, "answer_count": 1, "score": 1, "last_activity_date": 1573759302, "creation_date": 1573716391, "last_edit_date": 1573718494, "question_id": 58851453, "link": "https://stackoverflow.com/questions/58851453/generate-all-combinations-from-list-of-characters", "title": "Generate all combinations from list of characters", "body": "<p>I am busy implementing a lab for pen testers to create MD5 hashes from 4 letter words. I need the words to have a combination of lower and uppercase letters as well as numeric and special characters, but I just do not seem to find out how to combine any given characters in all orders. So currently I have this:</p>\n\n<pre><code>my $str = 'aaaa';\nprint $str++, $/ while $str le 'dddd';\n</code></pre>\n\n<p>Which will do:</p>\n\n<pre><code>aaaa\naaab\naaac\naaad\n...\n...\ndddd\n</code></pre>\n\n<p>There is no way however how I can make it do:</p>\n\n<pre><code>Aaaa\nAAaa\naAaa\n...\ndddD\n</code></pre>\n\n<p>Not even to mention adding numbers and special characters. What I really wanted to do was to make the characters to create words based on a given list. So if I feel I want to use <code>abeDod@#</code> it should create all combinations from those characters.</p>\n\n<p>Edit to clarify.</p>\n\n<p>Let's say I give the characters <code>aBc#</code> I need it to give it a a count to say it must have maximum of 4 letters per word and with combination of all the given characters, like:</p>\n\n<pre><code>aBc#\nBac#\ncaB#\n#Bca\n...\n</code></pre>\n\n<p>I hope that clarifies the question.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 2, "creation_date": 1573700980, "post_id": 58848779, "comment_id": 103970857, "body": "<code>and</code> has lower precedence than <code>=</code>. Try adding <code>(</code>...<code>)</code>"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1573701258, "post_id": 58848779, "comment_id": 103970921, "body": "@jhnc This works."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573706358, "post_id": 58848779, "comment_id": 103972052, "body": "<code>and</code> and <code>or</code> should only be used for flow control (e.g. <code>or next</code>, <code>or return</code>, <code>or die</code>, etc), or you get into precedence issues like this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573706941, "post_id": 58848779, "comment_id": 103972190, "body": "fyi, &quot;useless use ... in void context&quot; means you are evaluating an expression without side effects and discarding its result, something pointless, and therefore surely an error. (Regex matches have side effects (e.g. setting <code>$&amp;</code>), which is why you didn&#39;t get a warning for the first line, but the result of the <code>!</code> in the second line is discarded.)"}], "answers": [{"tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": true, "score": 7, "last_activity_date": 1573701486, "creation_date": 1573701486, "answer_id": 58848863, "question_id": 58848779, "link": "https://stackoverflow.com/questions/58848779/useless-use-of-negative-pattern-binding-in-void-context/58848863#58848863", "title": "Useless use of negative pattern binding (!~) in void context", "body": "<p>The lines:</p>\n\n<pre><code>my $with_spaces = $a =~ / / and $b =~ / /;\nmy $no_spaces = $a !~ / / and $b !~ / /;\n</code></pre>\n\n<p>are equivalent to:</p>\n\n<pre><code>(my $with_spaces = $a =~ / /) and ($b =~ / /);\n(my $no_spaces = $a !~ / /) and ($b !~ / /);\n</code></pre>\n\n<p>Either use <a href=\"https://perldoc.perl.org/perlop.html#C-style-Logical-And\" rel=\"noreferrer\"><code>&amp;&amp;</code></a> instead of <a href=\"https://perldoc.perl.org/perlop.html#Logical-And\" rel=\"noreferrer\"><code>and</code></a>, or add parentheses to change the <a href=\"https://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"noreferrer\">precedence</a>:</p>\n\n<pre><code>my $with_spaces = $a =~ / / &amp;&amp; $b =~ / /;\nmy $no_spaces = ($a !~ / / and $b !~ / /);\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58848863, "answer_count": 1, "score": 4, "last_activity_date": 1573701486, "creation_date": 1573700786, "question_id": 58848779, "link": "https://stackoverflow.com/questions/58848779/useless-use-of-negative-pattern-binding-in-void-context", "title": "Useless use of negative pattern binding (!~) in void context", "body": "<p>If both strings have spaces or neither has spaces, then do something.</p>\n\n\n\n<pre><code>my $with_spaces = $a =~ / / and $b =~ / /;\nmy $no_spaces = $a !~ / / and $b !~ / /;\nif ($with_spaces or $no_spaces) {\n    dosomething();\n}\n</code></pre>\n\n<p>But this code gives an error:</p>\n\n<blockquote>\n  <p>Useless use of negative pattern binding (!~) in void context.</p>\n</blockquote>\n\n<p>Did I do something wrong here?</p>\n"}, {"tags": ["perl", "makefile", "linux-kernel"], "comments": [{"owner": {"reputation": 418, "user_id": 10041572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IZDA.png?s=128&g=1", "display_name": "kurtfu", "link": "https://stackoverflow.com/users/10041572/kurtfu"}, "edited": false, "score": 0, "creation_date": 1573718969, "post_id": 58848731, "comment_id": 103976408, "body": "Did you try <code>$(shell perl_script)</code> to call the script?"}, {"owner": {"reputation": 652, "user_id": 2534001, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/720c0eed612ef8d3d2fea6cfdc35e7f3?s=128&d=identicon&r=PG", "display_name": "X.Z", "link": "https://stackoverflow.com/users/2534001/x-z"}, "reply_to_user": {"reputation": 418, "user_id": 10041572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IZDA.png?s=128&g=1", "display_name": "kurtfu", "link": "https://stackoverflow.com/users/10041572/kurtfu"}, "edited": false, "score": 0, "creation_date": 1573726712, "post_id": 58848731, "comment_id": 103980616, "body": "@kurtfu Yes, But what bother me is that i dont know how to get right path to file, running this command failed with no such file or directory error"}, {"owner": {"reputation": 418, "user_id": 10041572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IZDA.png?s=128&g=1", "display_name": "kurtfu", "link": "https://stackoverflow.com/users/10041572/kurtfu"}, "edited": false, "score": 0, "creation_date": 1573729084, "post_id": 58848731, "comment_id": 103982183, "body": "What was the exact command that you used to call the script from the Makefile? And are there any other perl scripts? If not, maybe you can use the <code>find</code> command to get the exact path?"}], "answers": [{"comments": [{"owner": {"reputation": 652, "user_id": 2534001, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/720c0eed612ef8d3d2fea6cfdc35e7f3?s=128&d=identicon&r=PG", "display_name": "X.Z", "link": "https://stackoverflow.com/users/2534001/x-z"}, "edited": false, "score": 0, "creation_date": 1573786679, "post_id": 58862831, "comment_id": 104008229, "body": "it seems that $(src) is not pointed to current folder, but its parent folder and out/target folder. is it possible to force makefile executed in current folder? Thanks"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 2, "last_activity_date": 1573759260, "last_edit_date": 1573759260, "creation_date": 1573753364, "answer_id": 58862831, "question_id": 58848731, "link": "https://stackoverflow.com/questions/58848731/how-to-run-perl-in-kbuild-makefile/58862831#58862831", "title": "how to run perl in kbuild makefile", "body": "<p>The Makefile rules should be something like this:</p>\n\n<pre><code>obj-y += mynewfeature.o\n\n# Add dependency: mynewfeature.o depends on generated header mynewheader.h.\n# Note: Generated sources go in $(obj).\n$(obj)/mynewfeature.o: $(obj)/mynewheader.h\n\n# Add rule to generate the header file mynewheader.h.\n# It depends on the script and the template file.\n# Note: Generated sources go in $(obj).\n$(obj)/mynewheader.h: $(src)/generator.pl $(src)/some_template\n    # (I don't know the exact command you use, but here is an example)\n    $(PERL) -s $(src)/generator.pl $(src)/some_template &gt; $@\n\n# Allow generated header file to be cleaned by \"make clean\".\nclean-files := mynewheader.h\n</code></pre>\n\n<p>Reference: <a href=\"https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#special-rules\" rel=\"nofollow noreferrer\">Special Rules</a> in <a href=\"https://www.kernel.org/doc/html/latest/kbuild/makefiles.html\" rel=\"nofollow noreferrer\">Linux Kernel Makefiles</a> in <a href=\"https://www.kernel.org/doc/html/latest/kbuild/index.html\" rel=\"nofollow noreferrer\">Kernel Build System</a> in <a href=\"https://www.kernel.org/doc/html/latest/kbuild/index.html\" rel=\"nofollow noreferrer\">The Linux Kernel documentation</a>.</p>\n\n<p>For a concrete example, see the generation of \"53c700_d.h\" in <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/scsi/Makefile\" rel=\"nofollow noreferrer\">drivers/scsi/Makefile</a>.</p>\n"}], "owner": {"reputation": 652, "user_id": 2534001, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/720c0eed612ef8d3d2fea6cfdc35e7f3?s=128&d=identicon&r=PG", "display_name": "X.Z", "link": "https://stackoverflow.com/users/2534001/x-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576406659, "creation_date": 1573700330, "last_edit_date": 1576406659, "question_id": 58848731, "link": "https://stackoverflow.com/questions/58848731/how-to-run-perl-in-kbuild-makefile", "title": "how to run perl in kbuild makefile", "body": "<p>I'm trying to add new feature to the current build. to compile, I've add obj-y += mynewfeature.c into the makefile in the same directory. But i still need to generate or update existing header file using a perl script from the same directory. the problem i can't deal with is how to call this perl script from kbuild file. it seems makefile cannot locate the right path to perl script. So what should I add to top of kbuild file to call this perl script file</p>\n\n<p>Thanks</p>\n\n<pre><code>dir\n |- mynewfeature.c\n |- generator.pl\n |- some_template //perl script will read this file and generate a header file\n |- Makefile\n\nMakefile:\ncode_to_call_perl_script // how to write this line\nobj-y += mynewfeature.o\n</code></pre>\n\n<p>I've tried Ian's code, perl script not even executed. so is there a way to force a perl execution?</p>\n"}]