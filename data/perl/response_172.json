[{"tags": ["arrays", "regex", "perl", "split"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1524698362, "post_id": 50032580, "comment_id": 87081345, "body": "Replace <a href=\"https://regex101.com/r/tzOkaj/1\" rel=\"nofollow noreferrer\"><code>)*)</code> with <code>)+)</code></a>"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1524698587, "post_id": 50032580, "comment_id": 87081404, "body": "ohh damn, very small mistake. Thanks"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524699081, "post_id": 50032580, "comment_id": 87081543, "body": "Since you are writing a rather complicated regex, it would be useful for you and for future maintainers if you used postfix comments on each line to remind the reader of what you are trying to accomplish.  You may also try using a parser, which has already (hopefully) been debugged...."}, {"owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "edited": false, "score": 0, "creation_date": 1524699680, "post_id": 50032580, "comment_id": 87081680, "body": "you could remove the first capturing group and have the regex like <code>(?:[^(),]+|(\\((?:[^()]+|(?1))*\\)))+(?:,\\s*|$)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1524698592, "creation_date": 1524698592, "answer_id": 50032663, "question_id": 50032580, "link": "https://stackoverflow.com/questions/50032580/split-string-based-on-comma-into-array-adds-an-empty-item-at-the-end-of-list/50032663#50032663", "title": "split string (based on comma) into array adds an empty item at the end of list", "body": "<p>Your first capturing group contains a <code>*</code>-quantified non-capturing group, and thus can be empty. To avoid that, you need to use a <code>+</code> quantifier to make it match at least once.</p>\n\n<pre><code>push @array, $1 while $string =~ /\n        ((?:\n          [^(),]+ |\n          ( \\(\n            (?: [^()]+ | (?2) )*\n          \\) )\n        )+)           # &lt; HERE\n        (?: ,\\s* | $)\n        /xg;\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 50032663, "answer_count": 1, "score": 2, "last_activity_date": 1524698939, "creation_date": 1524697848, "last_edit_date": 1524698939, "question_id": 50032580, "link": "https://stackoverflow.com/questions/50032580/split-string-based-on-comma-into-array-adds-an-empty-item-at-the-end-of-list", "title": "split string (based on comma) into array adds an empty item at the end of list", "body": "<p>I'm using below regex to split a string in the basis of comma into array,\nwhich works completely fine.</p>\n\n<pre><code>my $string = '$n(bar,foo),  (bar),a.*$n(f04((?!z).)*)b, \n hello$n(((((((abcdef)))))))world';\n\nmy @array;\npush @array, $1 while $string =~ /\n            ((?:\n              [^(),]+ |\n              ( \\(\n                (?: [^()]+ | (?2) )*\n              \\) )\n            )*)\n            (?: ,\\s* | $)\n            /xg;\n\n\n$VAR1 = [\n          '$n(bar,foo)',\n          '(bar)',\n          'a.*$n(f04((?!z).)*)b',\n          'hello$n(((((((abcdef)))))))world',\n          ''\n];\n</code></pre>\n\n<p>Problem is it always adds an empty string as the last item of an array. I don't want this. Please help.</p>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524690828, "post_id": 50031373, "comment_id": 87078918, "body": "No, you can&#39;t do this. Capture groups are always numbered from left to right by counting <code>(</code> characters. There&#39;s no way to make different groups fill in the same number."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524690903, "post_id": 50031373, "comment_id": 87078965, "body": "@Barmar There is <code>(?|...)</code> construct."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524691018, "post_id": 50031373, "comment_id": 87079018, "body": "@revo That&#39;s a new one to me!"}], "answers": [{"comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1524691050, "post_id": 50031464, "comment_id": 87079035, "body": "Another good link: <a href=\"https://www.regular-expressions.info/branchreset.html\" rel=\"nofollow noreferrer\">regular-expressions.info/branchreset.html</a>"}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 3, "last_activity_date": 1524690953, "creation_date": 1524690953, "answer_id": 50031464, "question_id": 50031373, "link": "https://stackoverflow.com/questions/50031373/perl-regex-returning-one-match-of-nested-or-subgroup/50031464#50031464", "title": "Perl RegEx: returning one match of nested &quot;or&quot; subgroup", "body": "<p>Use <a href=\"https://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\">branch reset</a> construct along with greedy dots. Order matters:</p>\n\n<pre><code>^(?|.*(hello)|.*(\\([^)]+\\)))\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/FrbrVZ/1\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 1456, "user_id": 997253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29652ad59c284fe1edfd688e481d77b4?s=128&d=identicon&r=PG", "display_name": "Andreas Storvik Strauman", "link": "https://stackoverflow.com/users/997253/andreas-storvik-strauman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 50031464, "answer_count": 1, "score": 1, "last_activity_date": 1524690953, "creation_date": 1524690494, "question_id": 50031373, "link": "https://stackoverflow.com/questions/50031373/perl-regex-returning-one-match-of-nested-or-subgroup", "title": "Perl RegEx: returning one match of nested &quot;or&quot; subgroup", "body": "<p>Say I have a text</p>\n\n<p><code>The quick brown fox jumps (over) the lazy dog</code>.\nThen I want my RegEx-pattern to return, say, the word <code>hello</code> (not present in the text) or any word inside parentheses, in this case <code>over</code>.\nSo a pattern in the likes of:</p>\n\n<p><code>/((hello)|(\\([^\\)]+\\)))/</code></p>\n\n<p>However I want it to return <em>one</em> match for this. This would only make sense if it's prioritized. That is:</p>\n\n<ul>\n<li>If <code>hello</code> is in this string then <code>$1</code> should be <code>hello</code>.</li>\n<li>If <code>hello</code> is not in the text, then return whatever is in the parenthesis if you can find it.</li>\n</ul>\n\n<p>So in</p>\n\n<pre><code>The quick brown fox jumps (over) the lazy dog \n</code></pre>\n\n<p>the <code>$1</code> should contain the string <code>over</code>. And in</p>\n\n<pre><code>hello! The quick brown fox jumps (over) the lazy dog\n</code></pre>\n\n<p>the <code>$1</code> should contain the string <code>hello</code>.</p>\n\n<p><a href=\"https://regex101.com/r/H5bwKs/2\" rel=\"nofollow noreferrer\">https://regex101.com/r/H5bwKs/2</a></p>\n\n<p>Is there any way to do this in one expression?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524688983, "post_id": 50030778, "comment_id": 87078090, "body": "What you call <i>Running the script</i> looks like a Perl one-liner; it certainly has nothing to do with <code>script_A.pl</code>. Have you perhaps just added that bash command to your Perl script? If that&#39;s what you&#39;ve done then it wouldn&#39;t compile. Please show the whole of <code>script_A.pl</code> and explain where you have entered your <code>perl -pi -e ...</code> command."}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524689258, "post_id": 50030778, "comment_id": 87078211, "body": "Someone reformatted my question incorrectly and removed the original bash quotes. Yes, the perl one-liner is embedded in my perl script (script a), and has worked fine in the past for quick plaintext substitutions in the context of a larger script."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524689358, "post_id": 50030778, "comment_id": 87078260, "body": "Why would you shell out to Perl from within a Perl script? That... seems... sub-optimal."}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "edited": false, "score": 0, "creation_date": 1524689687, "post_id": 50030778, "comment_id": 87078409, "body": "It is sub-optimal. Feel free to suggest both an optimal and functional alternative."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524689972, "post_id": 50030778, "comment_id": 87078546, "body": "You need to read <a href=\"https://stackoverflow.com/editing-help\"><b><i>Markdown help</i></b></a> and learn how to use Markdown to format your posts. Don&#39;t just make wild guesses and make things up\u2014you need to be <i>accurate</i>."}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "edited": false, "score": 0, "creation_date": 1524690074, "post_id": 50030778, "comment_id": 87078593, "body": "I agree that my question could have been formatted better, but I\u2019m not sure what wild guesses I made? My original question was worded properly, and as far as I can tell, the only updates that have been made were highlighting/spacing ones. I will read the Markdown, though, for future posts."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524690349, "post_id": 50030778, "comment_id": 87078730, "body": "Replace that <code>for</code> loop with <code>my $list = join &#39;, &#39;, @new_array;</code>."}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "edited": false, "score": 0, "creation_date": 1524690374, "post_id": 50030778, "comment_id": 87078742, "body": "Yes, the current iteration of the question looks correct. Thank you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524690436, "post_id": 50030778, "comment_id": 87078760, "body": "I think the code you&#39;re showing is too different from your <i>real</i> code for us to be able to help. What you&#39;ve put here won&#39;t affect <i>&quot;all of the my declared variables&quot;</i>."}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "edited": false, "score": 0, "creation_date": 1524691213, "post_id": 50030778, "comment_id": 87079104, "body": "The join command appears to yield identical behavior to what I had before, i.e. does not insert the new @ symbol or name (my  = ( )). I would prefer not pasting all 531 lines of the original code, as 99% of it is unrelated math used to generate the updated numerical values. It seems like an issue when I attempt to utilize the @ symbol in regex, since this routine works fine for all other characters."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524696844, "post_id": 50030778, "comment_id": 87080930, "body": "Is there something that&#39;s preventing you from refactoring or modifying the target script? Rather than trying to reach in and change the values, you&#39;d be better off writing modular code that could accept different parameters."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524699740, "post_id": 50030778, "comment_id": 87081690, "body": "You could try using templates to generate your file, then you no longer have the issue of using regular expressions, as you explicitly mark the places where substitutions should happen.  It also handles looping and hash constructs nicely:  <a href=\"http://www.template-toolkit.org/\" rel=\"nofollow noreferrer\">template-toolkit.org</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524729276, "post_id": 50030778, "comment_id": 87091441, "body": "@Zero: If you refuse either to show your full program or to create and publish a minimal version that displays the same issues as the original then there is nothing that we can do to help you. The <code>for</code> loop and <code>qx&#47;&#47;</code> shell call you show are pretty much irrelevant as they don&#39;t malfunction in the way you describe. Most of us are highly-experienced professionals, but that does not mean we can debug a Perl program from only a bug-free part of that code and some vague hand-waving from you."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1524768439, "post_id": 50030778, "comment_id": 87116186, "body": "Is your <code>`</code> and <code>;</code> backwards at the end of your perl shell line?"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1524768926, "post_id": 50030778, "comment_id": 87116431, "body": "Depending on your environment, replace <code>perl -e</code> with <code>echo</code> and see what is output? Consider using <code>system</code> instead of backticks?"}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "edited": false, "score": 0, "creation_date": 1525707860, "post_id": 50030778, "comment_id": 87452849, "body": "Matt &amp; Felix -- thank you for your suggestions. I&#39;ll likely rewrite the code to accept command-line input array values instead of hardcoding them and writing over each iteration."}, {"owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "edited": false, "score": 0, "creation_date": 1525708002, "post_id": 50030778, "comment_id": 87452927, "body": "Borodin - I can confirm that this behavior persists with simplified code, and has nothing to do with the generation of the new array values. (modify.pl) <code>#!&#47;usr&#47;bin&#47;perl use warnings; use strict; my @temps = (1, 2, 3, 4); my $foo; my $bar;</code> (test.pl) <code>#!&#47;usr&#47;bin&#47;perl use warnings; use strict; system(&quot;perl -pi -e &#39;s&#47;^my \\@temps.*&#47;my \\@temps \\= \\( NEW \\)\\;&#47;g&#39; modify.pl&quot;);</code>  Replaces all of the declared variables in the first perl script."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "is_accepted": true, "score": 0, "last_activity_date": 1525711074, "creation_date": 1525711074, "answer_id": 50218805, "question_id": 50030778, "link": "https://stackoverflow.com/questions/50030778/perl-regexp-substitution-of-an-array/50218805#50218805", "title": "Perl regexp substitution of an array", "body": "<p>I found a proper solution using triple backslashes:</p>\n\n<p><code>perl -pi -e 's/^my \\\\\\@temps.*/my \\\\\\@temps \\= \\( NEW \\)\\;/g' modify.pl</code>;</p>\n\n<p>This solves both my regex find and replace issues.</p>\n\n<p>For those attempting to help with substantive comments, thank you! For those insisting that I was not providing enough information, or that my issue was caused by unlisted code, I found your responses to be highly unprofessional and not focused on the question being asked.</p>\n"}], "owner": {"reputation": 1, "user_id": 9700106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9ff944be9f684d4b12dcb1185ac9f?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/9700106/zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50218805, "answer_count": 1, "score": -1, "last_activity_date": 1525711074, "creation_date": 1524687913, "last_edit_date": 1524689686, "question_id": 50030778, "link": "https://stackoverflow.com/questions/50030778/perl-regexp-substitution-of-an-array", "title": "Perl regexp substitution of an array", "body": "<p>I would like to use Perl script A to generate and replace an array in Perl script B.</p>\n\n<p>Script B originally contains something like:</p>\n\n<pre><code>my @old_array = (value1, value2, etc);\n</code></pre>\n\n<p>Script A contains something like:</p>\n\n<pre><code>for ( $a = 0; $a &lt; $nr_values; $a++ ) {\n\n    $list .= \"$new_values[$a], \";\n}\n</code></pre>\n\n\n\n<pre><code>`perl -pi -e 's/^my \\@old_array.*/my \\@new_array \\= \\( $list \\)\\;/g' script_B.pl;`\n</code></pre>\n\n<p>However, when I run Perl script A</p>\n\n<ul>\n<li><p>The substitution occurs to all of the <code>my</code> declared variables</p></li>\n<li><p>The array <code>@</code> symbol and name are not changed: only the updated values</p></li>\n</ul>\n\n<p>Please advise how to properly substitute arrays using Perl?</p>\n"}, {"tags": ["perl", "parsing", "html-parsing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524734073, "post_id": 50029628, "comment_id": 87094359, "body": "Well done on taking our advice and switching to a parser! :) Now if you want to learn Perl (as opposed to just solving this problem and moving on), I invite you to post you <i>final program</i> to <a href=\"https://codereview.stackexchange.com\">Code Review</a> when it works and tag it with <a href=\"https://codereview.stackexchange.com/tags/perl/info\"><i>perl</i></a> and <a href=\"https://codereview.stackexchange.com/tags/beginner/info\"><i>beginner</i></a>. We&#39;ll give you some advice on how to improve it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524734138, "post_id": 50029628, "comment_id": 87094393, "body": "Also, if an answer solved your problem, please accept it by clicking the check mark on the left. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and maybe take the <a href=\"https://stackoverflow.com/tour\">tour</a> if you&#39;re unsure how to behave on Stack Overflow. It will pay off and people will be gald to help you. :)"}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524741589, "post_id": 50029628, "comment_id": 87099084, "body": "ok but it steel need more work"}], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 3, "last_activity_date": 1524687483, "last_edit_date": 1524687483, "creation_date": 1524687040, "answer_id": 50030564, "question_id": 50029628, "link": "https://stackoverflow.com/questions/50029628/perl-parse-error-using-composed-script/50030564#50030564", "title": "perl - parse error using composed script", "body": "<p>There problem is here. Looks like you are missing anime:</p>\n\n<pre><code>my $page = get($base.$fullink) or die $!;\n</code></pre>\n\n<p>Try to replace it with:</p>\n\n<pre><code>my $url = $base.'/anime/'.$fullink;\nmy $page = get($url) or die $!;\n</code></pre>\n\n<p>Or replace:</p>\n\n<pre><code>my $base='https://myanimelist.net';\n</code></pre>\n\n<p>with </p>\n\n<pre><code>my $base='https://myanimelist.net/anime/';\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524687483, "creation_date": 1524682976, "question_id": 50029628, "link": "https://stackoverflow.com/questions/50029628/perl-parse-error-using-composed-script", "title": "perl - parse error using composed script", "body": "<p>when i use this script , its working fine\ni use HTML::TreeBuilder to parse html from a site</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse LWP::Simple;\nuse HTML::TreeBuilder;\n\nuse open ':std', ':encoding(UTF-8)';\nmy $base='https://myanimelist.net';\nmy $url=\"/anime/35849/Darling_in_the_FranXX\";\nmy $page = get($base.$url) or die $!;\nmy $p = HTML::TreeBuilder-&gt;new_from_content( $page );\n\nmy @trips= $p-&gt;look_down(_tag=&gt;'span',itemprop=&gt;'description')-&gt;as_text;\nforeach my $trip (@trips){\n   print $trip;\n}\n</code></pre>\n\n<p>but when i add it to this script it doesn't work</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse LWP::Simple;\nuse HTML::TreeBuilder;\nmy $ua = LWP::UserAgent-&gt;new();\n\n\nmy $mal = \"https://myanimelist.net/search/all?q=darling\";\nmy $response = $ua-&gt;request(HTTP::Request-&gt;new(GET =&gt; $mal));\nmy $rrs = $response-&gt;content;\nwhile ($rrs =~ m/href=\\\"https:\\/\\/myanimelist.net\\/anime\\/(.*?)\\\" class=\\\"hoverinfo_trigger fw-b fl-l\\\"/g){\nmy $link = $1;\nif ( $link !~ /video|season?_location=mal_h_m/ ) {\nprint (\"https://myanimelist.net/$link\\n\");\n\nuse open ':std', ':encoding(UTF-8)';\nmy $base='https://myanimelist.net';\n$fullink = \"$link\";\nmy $page = get($base.$fullink) or die $!;\nmy $p = HTML::TreeBuilder-&gt;new_from_content( $page );\n\nmy @trips= $p-&gt;look_down(_tag=&gt;'span',itemprop=&gt;'description')-&gt;as_text;\nforeach my $trip (@trips){\n   print $trip;\n}\n}\n}\n</code></pre>\n\n<p>and i get this error code :</p>\n\n<pre><code>Invalid argument at name.pl line 19.\n</code></pre>\n\n<p>is there any way to fix it?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1524682393, "post_id": 50029138, "comment_id": 87074967, "body": "The Perl install on this system is crippled. Try building your <code>perl</code>, and using that to install whatever modules you need."}], "answers": [{"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 0, "last_activity_date": 1524685423, "creation_date": 1524685423, "answer_id": 50030188, "question_id": 50029138, "link": "https://stackoverflow.com/questions/50029138/which-modules-are-missed/50030188#50030188", "title": "Which modules are missed?", "body": "<p>You may be using the \"system\" perl (<em>cf</em>. <a href=\"https://metacpan.org/pod/App::perlbrew\" rel=\"nofollow noreferrer\"><code>perlbrew</code></a>) where the library paths in <code>%INC</code> assume modules are installed using the operating system's package manager.</p>\n\n<p>When building modules it's sometimes easier to use a locally built <code>perl</code>, a module \"bootstrapping\" utility like <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\"><code>local::lib</code></a>, or <a href=\"https://perlbrew.pl\" rel=\"nofollow noreferrer\"><code>perlbrew</code></a> to manage your \"non-system\" instance of <code>perl</code>. This allows you to easily avoid mixing module packages installed by the OS with your own locally built modules.</p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1525718631, "last_edit_date": 1525718631, "creation_date": 1525717336, "answer_id": 50220309, "question_id": 50029138, "link": "https://stackoverflow.com/questions/50029138/which-modules-are-missed/50220309#50220309", "title": "Which modules are missed?", "body": "<p>Because I use <code>Carton</code> to deploy my application:</p>\n\n<pre><code>carton install --deployment\n</code></pre>\n\n<p>I have <code>List-MoreUtils-0.416</code> in my <code>cpanfile.snapshot</code>. Thus I use old module version which relies on \".\" exists at <code>@INC</code>.</p>\n\n<p>But on target host, where I was faced into <code>Can't locate inc/latest.pm in @INC</code> problem there is <strong>DEBIAN</strong> <code>perl-5.24.1</code> which apply patch from <code>perl-5.26</code> which removes '.' from <code>@INC</code></p>\n\n<p>Because of this <code>inc::latest</code> is not found in bundled directory</p>\n\n<p>To resolve my issue I just add next line into <code>cpanfile</code>:</p>\n\n<pre><code>requires 'List::MoreUtils', '&gt;=0.428'\n</code></pre>\n\n<p>Unfortunately <code>carton update</code> do not update all modules from <code>cpanfile.snapshot</code> just only mentioned at <code>cpanfile</code>.</p>\n\n<p>Also, I think, it will be OK to install <code>inc::latest</code></p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 50220309, "answer_count": 2, "score": 1, "last_activity_date": 1525718631, "creation_date": 1524681166, "question_id": 50029138, "link": "https://stackoverflow.com/questions/50029138/which-modules-are-missed", "title": "Which modules are missed?", "body": "<p>On my system:</p>\n\n<pre><code>$ uname -ra\nLinux web.feel-safe.net 4.9.0-6-amd64 #1 SMP Debian 4.9.82-1+deb9u3 (2018-03-02) x86_64 GNU/Linux\n</code></pre>\n\n<p>I get next errors while installing modules:</p>\n\n<pre><code>Can't locate inc/ExtUtils/MY_Metafile.pm in @INC (you may need to install the inc::ExtUtils::MY_Metafile module) (@INC contains: /home/feelsafe/web/local/lib/perl5/x86_64-linux-gnu-thread-multi /home/feelsafe/web/local/lib/perl5 /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at Makefile.PL line 4.\nBEGIN failed--compilation aborted at Makefile.PL line 4.\n</code></pre>\n\n<p>.</p>\n\n<pre><code>Configuring List-MoreUtils-0.416\nRunning Makefile.PL\nCan't locate inc/latest.pm in @INC (you may need to install the inc::latest module) (@INC contains: /home/feelsafe/web/local/lib/perl5/x86_64-linux-gnu-thread-multi /home/feelsafe/web\n/local/lib/perl5 /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/per\nl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at Makefile.PL line 51.\nBEGIN failed--compilation aborted at Makefile.PL line 51.\n</code></pre>\n\n<p>.</p>\n\n<pre><code>Configuring MRO-Compat-0.12\nRunning Makefile.PL\nCan't locate inc/Module/Install.pm in @INC (you may need to install the inc::Module::Install module) (@INC contains: /home/feelsafe/web/local/lib/perl5/x86_64-linux-gnu-thread-multi /home/feelsafe/web/local/lib/perl5 /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at Makefile.PL line 1.\nBEGIN failed--compilation aborted at Makefile.PL line 1.\n-&gt; N/A\n-&gt; FAIL Configure failed for MRO-Compat-0.12. See /home/feelsafe/.cpanm/work/1524673518.17946/build.log for details.\n</code></pre>\n\n<p>Currently I have found <a href=\"https://perlmaven.com/cant-locate-inc-module-install-in-inc\" rel=\"nofollow noreferrer\">this</a> article, but still do not understand the problem.</p>\n\n<p>What did I miss on my system? And what is the problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524673181, "post_id": 50026789, "comment_id": 87070220, "body": "What error message are you getting exactly?"}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524673788, "post_id": 50026789, "comment_id": 87070562, "body": "whois.crsnic.net: Bad file descriptor: whois.crsnic.net:43 at ... Net/Whois/Raw.pm line 309."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1524695144, "post_id": 50026789, "comment_id": 87080419, "body": "What kind of proxy? WHOIS isn&#39;t an HTTP-based protocol; it can&#39;t be used through an HTTP proxy."}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "edited": false, "score": 0, "creation_date": 1524701543, "post_id": 50026789, "comment_id": 87082082, "body": "it seems the second machine using 43 which is blocked by firewall do you know any web proxy which can be configured to work with Net::Whois::Raw or any other cpan module which using web proxy ?"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524694905, "creation_date": 1524672445, "last_edit_date": 1524694905, "question_id": 50026789, "link": "https://stackoverflow.com/questions/50026789/netwhoisraw-behind-a-proxy", "title": "Net::Whois::Raw behind a proxy", "body": "<p>I am using <a href=\"https://metacpan.org/pod/Net::Whois::Raw\" rel=\"nofollow noreferrer\"><code>Net::Whois::Raw</code></a> on two systems: one system without a proxy where it works well, the other system with a proxy, where it throws an error on <code>/lib/Net/Whois/Raw.pm</code> line 171. My code is like the below:</p>\n\n<pre><code>use Net::Whois::Raw;\n\nmy $host = shift;\n$Net::Whois::Raw::CHECK_FAIL = 1;\n$Net::Whois::Raw::OMIT_MSG = 1;\n\nmy $whois_raw = whois($host);\n\nprint $whois_raw;\n</code></pre>\n\n<p>Where the host is provided on the command line.</p>\n\n<p>Could someone provide an example of how to configure this module to work with a proxy?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524669766, "post_id": 50025861, "comment_id": 87068074, "body": "That&#39;s most likely not possible. If it&#39;s a normal terminal application, there is no clicking. A regular URL might be turned into a clickable thing by your terminal emulator, but that&#39;s the best you can get, and your program cannot influence that anyway. I&#39;d push back on that requirement and explain to them how they want the impossible."}, {"owner": {"reputation": 193, "user_id": 2711606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689c5fe12c43f697269c92b86c731084?s=128&d=identicon&r=PG&f=1", "display_name": "The Reedemed77", "link": "https://stackoverflow.com/users/2711606/the-reedemed77"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524670421, "post_id": 50025861, "comment_id": 87068546, "body": "There&#39;s one detail I left out: The program is called by a Jenkins job and the output is displayed in Jenkins console log. Looking at the log, I do see some links but those links are variables and they are displayed as <a href=\"http://link.com\" rel=\"nofollow noreferrer\">link.com</a> While in my case it would be a static link with a word pointing to the link itself."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1524670537, "post_id": 50025861, "comment_id": 87068624, "body": "Are you looking at the Jenkins console in a web browser?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524670741, "post_id": 50025861, "comment_id": 87068760, "body": "Not possible to rename the link according to this duplicate. You can always say <i>Please refer to the FAQ (<a href=\"http://example.org/faq\" rel=\"nofollow noreferrer\">example.org/faq</a>) for help. For further assistance raise a ticket to our help desk (<a href=\"http://example.org/help\" rel=\"nofollow noreferrer\">example.org/help</a>).</i> and the URLs will become clickable links. That&#39;s a good middle way. An alternative would be <i>... the FAQ at <a href=\"http://example.org/faq\" rel=\"nofollow noreferrer\">example.org/faq</a>. ...</i>"}], "owner": {"reputation": 193, "user_id": 2711606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689c5fe12c43f697269c92b86c731084?s=128&d=identicon&r=PG&f=1", "display_name": "The Reedemed77", "link": "https://stackoverflow.com/users/2711606/the-reedemed77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "closed_date": 1524670655, "answer_count": 0, "score": 0, "last_activity_date": 1524669802, "creation_date": 1524669406, "last_edit_date": 1524669802, "question_id": 50025861, "link": "https://stackoverflow.com/questions/50025861/print-text-with-clickable-link-in-console-or-terminal-in-perl", "closed_reason": "Duplicate", "title": "Print text with clickable link in console or terminal in Perl", "body": "<p>We have a program written in Perl that display output in a console or terminal. I have to add a new output that should contain clickable links. I am new to Perl so need some help on this.</p>\n\n<p>The output should look like this:</p>\n\n<p>Please refer to the <a href=\"http://example.org\" rel=\"nofollow noreferrer\">FAQ</a> for help. For further assistance raise a ticket to our <a href=\"http://example.org\" rel=\"nofollow noreferrer\">help Desk</a> </p>\n"}, {"tags": ["json", "string", "perl"], "comments": [{"owner": {"reputation": 289, "user_id": 7424979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abdf21730df3a27a57e8302740f910a4?s=128&d=identicon&r=PG&f=1", "display_name": "meistermuh", "link": "https://stackoverflow.com/users/7424979/meistermuh"}, "edited": false, "score": 0, "creation_date": 1524666341, "post_id": 50024685, "comment_id": 87065569, "body": "your example looks like a hash, not like an array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524666343, "post_id": 50024685, "comment_id": 87065572, "body": "<i>&quot;my issue is that it is actually being stored as a string in <code>$output</code> and not actually in a JSON object&quot;</i>. What do you imagine a <i>&quot;JSON object&quot;</i> to be? <i>JSON</i> is <i>JavaScript Object Notation</i> and is, by definition, a string of text. It is the job of the <code>JSON</code> module to convert between a JSON string and the data structure that it represents."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524666636, "post_id": 50024685, "comment_id": 87065817, "body": "There is no variable <code>$output</code>. Do you mean <code>$json</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524667980, "post_id": 50024685, "comment_id": 87066777, "body": "You need to tell us what you actually want to do with this data. The reference type is not very relevant here. When you call <code>decode_json</code>, you turn the string of JSON into a Perl data structure. The hierarchy inside that structure maps exactly to JSON. In your code you say you <i>Loop through each EC2 instance</i>, but you don&#39;t loop. You print the value behind the key <code>Reservations</code>. That&#39;s an array reference, and if you print that, it stringifies to <code>ARRAY(0xdeadb33f)</code>. That&#39;s expected. If you want to turn this back into JSON, you need to tell Perl that. <code>encode_json</code> sounds reasonable."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524667994, "post_id": 50024685, "comment_id": 87066788, "body": "Or use Data::Dumper or Data::Printer to inspect the Perl data structure."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 35, "user_id": 7129200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvoK6DwbI9s/AAAAAAAAAAI/AAAAAAAAAu4/5k9eTA_-jFQ/photo.jpg?sz=128", "display_name": "Paul Hill", "link": "https://stackoverflow.com/users/7129200/paul-hill"}, "edited": false, "score": 0, "creation_date": 1524667247, "post_id": 50024781, "comment_id": 87066235, "body": "So it works then. Problem sorted. Your hash dereference gets you an array. You can iterate the array as you wish. Please don&#39;t amend your question to ask something else - that invalidates any answers that you&#39;re getting, which are supposed to be for other people to refer to."}, {"owner": {"reputation": 35, "user_id": 7129200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvoK6DwbI9s/AAAAAAAAAAI/AAAAAAAAAu4/5k9eTA_-jFQ/photo.jpg?sz=128", "display_name": "Paul Hill", "link": "https://stackoverflow.com/users/7129200/paul-hill"}, "edited": false, "score": 0, "creation_date": 1524668762, "post_id": 50024781, "comment_id": 87067333, "body": "I guess I am not sure how to loop through the hash. So $decoded is now an array that I can loop through? I will try that..."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 35, "user_id": 7129200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvoK6DwbI9s/AAAAAAAAAAI/AAAAAAAAAu4/5k9eTA_-jFQ/photo.jpg?sz=128", "display_name": "Paul Hill", "link": "https://stackoverflow.com/users/7129200/paul-hill"}, "edited": false, "score": 0, "creation_date": 1524669739, "post_id": 50024781, "comment_id": 87068057, "body": "No. <code>$decoded -&gt; {Reservations}</code> is an array reference. You can iterate that with <code>for my $reservation ( @{$decoded-&gt;{Reservations}} ) { </code> and then you&#39;ll find that <code>$reservation</code> is another hash reference"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1524667786, "last_edit_date": 1524667786, "creation_date": 1524666320, "answer_id": 50024781, "question_id": 50024685, "link": "https://stackoverflow.com/questions/50024685/convert-perl-string-to-json-array/50024781#50024781", "title": "Convert Perl string to json array", "body": "<p>Your JSON starts with a <code>{</code> so the error is quite correct. You don't have an array reference, you have a hash reference.</p>\n\n<p>Try <code>print ref $decoded,\"\\n\"</code> and it'll tell you what type of reference you have. </p>\n\n<p>Try <code>$decoded -&gt; {Reservations}</code> or just print the whole thing with <code>Data::Dumper</code>:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper $decoded;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1524668817, "creation_date": 1524668817, "answer_id": 50025656, "question_id": 50024685, "link": "https://stackoverflow.com/questions/50024685/convert-perl-string-to-json-array/50025656#50025656", "title": "Convert Perl string to json array", "body": "<p>You've successfully converted the JSON string into a Perl data structure. Looks like you're falling down because you don't know how to manipulate Perl data structures. Reading the <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a> manual page would probably help there.</p>\n\n<p>I see that <code>$decoded-&gt;{Reservations}</code> is an array reference. So you'll be able to walk that array with code like:</p>\n\n<pre><code>foreach my $reservation (@{ $decoded-&gt;{Reservations} }) {\n  # Do something useful with $reservation\n}\n</code></pre>\n\n<p>Alternatively, you might consider using a library like <a href=\"https://metacpan.org/pod/Paws\" rel=\"nofollow noreferrer\">Paws</a> to handle your AWS interaction.</p>\n"}], "owner": {"reputation": 35, "user_id": 7129200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvoK6DwbI9s/AAAAAAAAAAI/AAAAAAAAAu4/5k9eTA_-jFQ/photo.jpg?sz=128", "display_name": "Paul Hill", "link": "https://stackoverflow.com/users/7129200/paul-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 50024781, "answer_count": 2, "score": 2, "last_activity_date": 1524668817, "creation_date": 1524666041, "last_edit_date": 1524666894, "question_id": 50024685, "link": "https://stackoverflow.com/questions/50024685/convert-perl-string-to-json-array", "title": "Convert Perl string to json array", "body": "<p>I am attempting to write a Perl script that will run on a Centos 6 host. This script will run a shell command that queries our AWS interface like this:</p>\n\n<pre><code>my $json = `aws ec2 describe-instances`;\n</code></pre>\n\n<p>This query will return a JSON object but I belive my issue is that it is actually being stored as a string in $output and not actually in a JSON object.</p>\n\n<p>I am trying the following code:</p>\n\n<pre><code># Get each instance\nmy $json = `aws ec2 describe-instances`;\n\n# Decode AWS json result\nmy $decoded = decode_json $json;\n\n# Find reference type\nprint \"Reference type: \" . ref $decoded,\"\\n\";\n\n# Loop through each EC2 instance\nprint $decoded -&gt; {Reservations} . \"\\n\";\n</code></pre>\n\n<p>When I execute this code I get the following message:</p>\n\n<pre><code>Reference type: HASH\nARRAY(0xa774b0)\n</code></pre>\n\n<p>Can anyone help me with this? I have been googling and messing with this for over a whole day now :(</p>\n\n<p>Below is an example of the string that is stored in $output although in the real output there would be multiple instances:</p>\n\n<pre><code>{\n    \"Reservations\": [\n        {\n            \"OwnerId\": \"82XXXXXXX043\",\n            \"ReservationId\": \"r-0XXXXXXXXXXX\",\n            \"Groups\": [],\n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"XXXXX\"\n                    },\n                    \"PublicDnsName\": \"XXX\",\n                    \"RootDeviceType\": \"XXXXXXX\",\n                    \"State\": {\n                        \"Code\": XXX,\n                        \"Name\": \"stopped\"\n                    },\n                    \"EbsOptimized\": XXXX,\n                    \"LaunchTime\": \"XXXXXXXXXX\",\n                    \"PrivateIpAddress\": \"XXXXXXXXXX\",\n                    \"ProductCodes\": [],\n                    \"VpcId\": \"XXXXXXXXXX\",\n                    \"StateTransitionReason\": \"UXXXXXXXXXX\",\n                    \"InstanceId\": \"XXXXXXXXXX\",\n                    \"ImageId\": \"XXXXXXXXXX\",\n                    \"PrivateDnsName\": \"XXXXXXXXXX\",\n                    \"KeyName\": \"XXXXXXXXXX\",\n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"XXXXXXXXXX\",\n                            \"GroupId\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"GroupName\": \"XXXXXXXXXX\",\n                            \"GroupId\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"GroupName\": \"XXXXXXXXXX\",\n                            \"GroupId\": \"XXXXXXXXXX\"\n                        }\n                    ],\n                    \"ClientToken\": \"XXXXXXXXXX\",\n                    \"SubnetId\": \"XXXXXXXXXX\",\n                    \"InstanceType\": \"XXXXXXXXXX\",\n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"XXXXXXXXXX\",\n                            \"MacAddress\": \"XXXXXXXXXX\",\n                            \"SourceDestCheck\": XXXXXXXXXX,\n                            \"VpcId\": \"XXXXXXXXXX\",\n                            \"Description\": \"XXXXXXXXXX\",\n                            \"NetworkInterfaceId\": \"XXXXXXXXXX\",\n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"Primary\": XXXXXXXXXX,\n                                    \"PrivateIpAddress\": \"XXXXXXXXXX\"\n                                }\n                            ],\n                            \"Ipv6Addresses\": [],\n                            \"Attachment\": {\n                                \"Status\": \"XXXXXXXXXX\",\n                                \"DeviceIndex\": 01234,\n                                \"DeleteOnTermination\": XXXXXXXXXX,\n                                \"AttachmentId\": \"XXXXXXXXXX\",\n                                \"AttachTime\": \"XXXXXXXXXX\"\n                            },\n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"XXXXXXXXXX\",\n                                    \"GroupId\": \"XXXXXXXXXX\"\n                                },\n                                {\n                                    \"GroupName\": \"XXXXXXXXXX\",\n                                    \"GroupId\": \"XXXXXXXXXX\"\n                                },\n                                {\n                                    \"GroupName\": \"XXXXXXXXXX\",\n                                    \"GroupId\": \"XXXXXXXXXX\"\n                                }\n                            ],\n                            \"SubnetId\": \"XXXXXXXXXX\",\n                            \"OwnerId\": \"XXXXXXXXXX\",\n                            \"PrivateIpAddress\": \"XXXXXXXXXX\"\n                        }\n                    ],\n                    \"SourceDestCheck\": XXXXXXXXXX,\n                    \"Placement\": {\n                        \"Tenancy\": \"XXXXXXXXXX\",\n                        \"GroupName\": \"XXXXXXXXXX\",\n                        \"AvailabilityZone\": \"XXXXXXXXXX\"\n                    },\n                    \"Hypervisor\": \"XXXXXXXXXX\",\n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"XXXXXXXXXX\",\n                            \"Ebs\": {\n                                \"Status\": \"XXXXXXXXXX\",\n                                \"DeleteOnTermination\": XXXXXXXXXX,\n                                \"VolumeId\": \"XXXXXXXXXX\",\n                                \"AttachTime\": \"XXXXXXXXXX\"\n                            }\n                        }\n                    ],\n                    \"Architecture\": \"XXXXXXXXXX\",\n                    \"StateReason\": {\n                        \"Message\": \"XXXXXXXXXX\",\n                        \"Code\": \"XXXXXXXXXX\"\n                    },\n                    \"IamInstanceProfile\": {\n                        \"Id\": \"XXXXXXXXXX\",\n                        \"Arn\": \"XXXXXXXXXX\"\n                    },\n                    \"RootDeviceName\": \"XXXXXXXXXX\",\n                    \"VirtualizationType\": \"XXXXXXXXXX\",\n                    \"Tags\": [\n                        {\n                            \"Value\": \"XXXXXXXXXX\",\n                            \"Key\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"Value\": \"XXXXXXXXXX\",\n                            \"Key\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"Value\": \"XXXXXXXXXX\",\n                            \"Key\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"Value\": \"XXXXXXXXXX\",\n                            \"Key\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"Value\": \"XXXXXXXXXX\",\n                            \"Key\": \"XXXXXXXXXX\"\n                        },\n                        {\n                            \"Value\": \"XXXXXXXXXX\",\n                            \"Key\": \"XXXXXXXXXX\"\n                        }\n                    ],\n                    \"AmiLaunchIndex\": XXXXXXXXXX\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["c", "perl", "gcc", "64-bit", "solaris"], "comments": [{"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1524674579, "post_id": 50024266, "comment_id": 87070973, "body": "Did you rerun your configuration to fully detect 64-bit options?  It looks like you tried to just change the compile flags using the same source directory that was already configured for a 32-bit build."}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1524724077, "post_id": 50024266, "comment_id": 87088302, "body": "Yes, I have freshly unpacked the source befor configuring and building. However my build scripts are a bit convoluted, so I will double check there is nothing funky going on. Will report back later."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1524735273, "post_id": 50024266, "comment_id": 87095154, "body": "You need to ensure the compilations done during the configuration stage are also done with <code>-m64</code>.  Look through your configuration output.  If you see things like <code>sizeof(long) = 4</code>, the configuration was done with 32-bit compiles, which will produce incorrect results.  Because the 32-bit <code>FILE</code> structure on Solaris does have <code>_ptr</code> and <code>_cnt</code> members, while the 64-bit <code>FILE</code> structure is totally opaque."}, {"owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "reply_to_user": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1524735529, "post_id": 50024266, "comment_id": 87095305, "body": "Thank you @AndrewHenle - I think you actually nailed it. It was indeed a missing configure flag that caused the error. See my answer below. You helped me to find the solution."}], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "is_accepted": true, "score": 2, "last_activity_date": 1524752891, "last_edit_date": 1524752891, "creation_date": 1524735418, "answer_id": 50039650, "question_id": 50024266, "link": "https://stackoverflow.com/questions/50024266/compiling-perl-as-64-bit-on-solaris-10-sparc/50039650#50039650", "title": "compiling perl as 64 bit on solaris 10 sparc", "body": "<p>It turns out I needed to add the <code>-Duse64bitall</code> flag to the <code>Configure</code> script. So finally I was able to build with</p>\n\n<pre><code>export CFLAGS=-m64 # not sure if really nessessary - just what I did\n./Configure -Duse64bitall -Dcc=gcc -d\nmake\n</code></pre>\n\n<p>For my setup I also need some more libraries, so this is a rather simplified version. However it solved the problem described in this post.</p>\n"}], "owner": {"reputation": 750, "user_id": 519151, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/480c0be1bd2a9c44dc676daf9f4d157f?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/519151/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 50039650, "answer_count": 1, "score": 1, "last_activity_date": 1524752891, "creation_date": 1524664825, "question_id": 50024266, "link": "https://stackoverflow.com/questions/50024266/compiling-perl-as-64-bit-on-solaris-10-sparc", "title": "compiling perl as 64 bit on solaris 10 sparc", "body": "<p>I am trying to compile <code>perl 5.22.2</code> on <code>Solaris</code>, sparc, as 64 bit (os is 64 bit). \nIt compiled and linked fine as a 32 bit binary, now I have added the <code>-m64</code> flag to <code>CFLAGS</code> and <code>LDFLAGS</code>, and I am getting the following error:</p>\n\n<pre><code>...skipping...\nperlio.c:3400: error: structure has no member named `_ptr'\nperlio.c:3408: error: structure has no member named `_ptr'\nperlio.c: In function `PerlIOStdio_get_base':\nperlio.c:3531: error: structure has no member named `_base'\nperlio.c: In function `PerlIOStdio_get_bufsiz':\nperlio.c:3538: error: structure has no member named `_cnt'\nperlio.c:3538: error: structure has no member named `_ptr'\nperlio.c:3538: error: structure has no member named `_base'\nperlio.c: In function `PerlIOStdio_get_ptr':\nperlio.c:3547: error: structure has no member named `_ptr'\nperlio.c: In function `PerlIOStdio_get_cnt':\nperlio.c:3554: error: structure has no member named `_cnt'\nperlio.c: In function `PerlIOStdio_set_ptrcnt':\nperlio.c:3575: error: structure has no member named `_ptr'\nperlio.c:3594: error: structure has no member named `_cnt'\nmake: *** [perlio.o] Error 1\n</code></pre>\n\n<p>For reference, i have extracted the mentioned lines from <code>perlio.c</code>:</p>\n\n<pre><code>3400:   STDCHAR *eptr = (STDCHAR*)PerlSIO_get_ptr(s);\n3408:       if ((STDCHAR*)PerlSIO_get_ptr(s) != --eptr || ((*eptr &amp; 0xFF) != ch)) {\n3531:    return (STDCHAR*)PerlSIO_get_base(stdio);\n3538:    return PerlSIO_get_bufsiz(stdio);\n3547:    return (STDCHAR*)PerlSIO_get_ptr(stdio);\n3554:    return PerlSIO_get_cnt(stdio);\n3575:   PerlSIO_set_ptr(stdio, ptr); /* LHS STDCHAR* cast non-portable */\n3594:    PerlSIO_set_cnt(stdio, cnt);\n</code></pre>\n\n<p>It looks like its doing something strange with the source, notice how <code>_ptr</code> is treated as a seperate entity, whereas the function is called <code>PerlSIO_get_ptr</code>. Looks like its being cut off.</p>\n\n<p>Anyone any idea what is going on here? FYI using something like perlbrew is not an option, I need to compile this myself :(.</p>\n"}, {"tags": ["regex", "perl", "scripting"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1524669366, "post_id": 50022795, "comment_id": 87067775, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! It would have identified your problem."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 10, "last_activity_date": 1524660772, "creation_date": 1524660772, "answer_id": 50022906, "question_id": 50022795, "link": "https://stackoverflow.com/questions/50022795/how-to-match-a-regexp/50022906#50022906", "title": "How to match a regexp", "body": "<p>You're using double quotes when you define your regex. That means that <code>\\s</code> will be interpolated as an escape sequence, and that breaks your pattern.</p>\n\n<p>Use <a href=\"http://perldoc.perl.org/functions/qr.html\" rel=\"noreferrer\"><code>qr//</code></a> instead.</p>\n\n<pre><code>my $regexp = qr/.*([A-Z][a-z]*\\s*[0-9]*\\.[0-9]*%\\s*\\([0-9]*\\/[0-9]*\\)).*/;\n</code></pre>\n\n<p>If you had <code>use warnings</code>, you'd get this warning.</p>\n\n<blockquote>\n  <p>Unrecognized escape \\s passed through </p>\n</blockquote>\n\n<p>If you print the compiled regex with</p>\n\n<pre><code>my $regexp = \".*([A-Z][a-z]*\\s*[0-9]*\\.[0-9]*%\\s*\\([0-9]*\\/[0-9]*\\)).*\";\nprint qr/$regexp/;\n</code></pre>\n\n<p>you will see this output.</p>\n\n<pre><code>#                no backslash here\n#                 V\n(?^:.*([A-Z][a-z]*s*[0-9]*.[0-9]*%s*([0-9]*/[0-9]*)).*)\n</code></pre>\n\n<p>With the backslash gone, the regex engine doesn't know you're talking about whitespace, and sees a literal <code>s</code> instead.</p>\n"}], "owner": {"reputation": 588, "user_id": 6045244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900660c1f5bee8bfad8845e43199e748?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me G", "link": "https://stackoverflow.com/users/6045244/j%c3%a9r%c3%b4me-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 50022906, "answer_count": 1, "score": 1, "last_activity_date": 1524667386, "creation_date": 1524660482, "last_edit_date": 1524667386, "question_id": 50022795, "link": "https://stackoverflow.com/questions/50022795/how-to-match-a-regexp", "title": "How to match a regexp", "body": "<p></p>\n\n<p>I want to match a string with a Perl regexp but my code always fails to match.</p>\n\n<h3>Data</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Functions    0.0% (0/1)Functions and exits    0.0% (0/2)Calls    0.0% (0/6)Statement blocks    0.0% (0/24)Implicit blocks    0.0% (0/2)Decisions    0.0% (0/26)Basic conditions    0.0% (0/39)\n</code></pre>\n\n<h3>Regexp</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>.*([A-Z][a-z]*\\s*[0-9]*\\.[0-9]*%\\s*\\([0-9]*\\/[0-9]*\\)).*\n</code></pre>\n\n<p>This seems to work on several regexp testing websites.</p>\n\n<h3>Perl code</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $regexp = \".*([A-Z][a-z]*\\s*[0-9]*\\.[0-9]*%\\s*\\([0-9]*\\/[0-9]*\\)).*\";\n\nif ( $myString =~ /$regexp/i ) {     # $myString has the value shown above\n    print \"Regexp OK\\n\";\n}\nelse {\n    print \"Regexp KO\\n\";\n}\n</code></pre>\n\n<p>The result of executing this code always leads to the <code>else</code> block but I don't understand why.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2133, "user_id": 1928691, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/trtts.png?s=128&g=1", "display_name": "Federico Navarrete", "link": "https://stackoverflow.com/users/1928691/federico-navarrete"}, "edited": false, "score": 0, "creation_date": 1524655396, "post_id": 50020864, "comment_id": 87057705, "body": "Are you sure it&#39;s a web service? It doesn&#39;t look like one"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1524655649, "post_id": 50020864, "comment_id": 87057889, "body": "Don&#39;t parse HTML with regular expressions. Also, you can shorten your LWP code to <code>$ua-&gt;get($url)</code>, no need to create your own HTTP::Request object if you don&#39;t do anything special with it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1524655691, "post_id": 50020864, "comment_id": 87057906, "body": "Please <a href=\"https://stackoverflow.com/posts/50020864/edit\">edit</a> your question and include sample input. Tell us what&#39;s in <code>$ANIME_LINK</code> so we get to see the real website."}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1524656890, "post_id": 50020864, "comment_id": 87058775, "body": "ah its like : <a href=\"https://myanimelist.net/anime/35849/Darling_in_the_FranXX\" rel=\"nofollow noreferrer\">myanimelist.net/anime/35849/Darling_in_the_FranXX</a>"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1524657826, "post_id": 50020864, "comment_id": 87059419, "body": "If you want to process all matches in that loop you might consider adding the <code>c</code> flag to your regular expression. And, as some of these <code>&lt;span itemprop=&quot;name&quot;&gt;...&lt;&#47;span&gt;</code> span multiple lines, the <code>s</code> flag might also be useful to match these. (These flags go to the end: <code>m&#47;&lt;span itemprop=\\&quot;name\\&quot;&gt;(.*?)&lt;\\&#47;span&gt;&#47;gcs</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1524658005, "post_id": 50021634, "comment_id": 87059565, "body": "so to parse html its more simple to use Mojo::UserAgent"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1524658163, "post_id": 50021634, "comment_id": 87059699, "body": "Yes, <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\"><code>Mojo::DOM</code></a> is a pretty good HTML parser. The <code>-&gt;dom</code> method is returning a <code>Mojo::DOM</code> object, but you can parse HTML strings and files by using <code>Mojo::DOM</code> directly (its docs show you how)."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1524657093, "creation_date": 1524657093, "answer_id": 50021634, "question_id": 50020864, "link": "https://stackoverflow.com/questions/50020864/perl-cant-get-data-using-m-g-string/50021634#50021634", "title": "perl - can&#39;t get data using m//g string", "body": "<p>Do yourself a favor and <a href=\"https://stackoverflow.com/a/1732454\">don't parse HTML with regexes</a>. While there are several modules to parse HTML properly in Perl (e.g. <a href=\"https://metacpan.org/pod/HTML::Parser\" rel=\"nofollow noreferrer\"><code>HTML::Parser</code></a> and <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\"><code>HTML::TreeBuilder</code></a> are two classics), <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\"><code>Mojo::DOM</code></a> has a nice interface and can be used together with <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\"><code>Mojo::UserAgent</code></a>:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Mojo::UserAgent;\n\nmy $LINK = \"test.html\";\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $dom = $ua-&gt;get(\"https://www.example.com/$LINK\")-&gt;result-&gt;dom;\n$dom-&gt;find(q{ span[itemprop=\"name\"] })-&gt;each(sub {\n        my $text = $_-&gt;text;\n        print \"&lt;$text&gt;\\n\";\n    });\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1524662043, "creation_date": 1524654862, "last_edit_date": 1524662043, "question_id": 50020864, "link": "https://stackoverflow.com/questions/50020864/perl-cant-get-data-using-m-g-string", "title": "perl - can&#39;t get data using m//g string", "body": "<p>i'm using this but i don't get anything</p>\n\n<pre><code>    my $maldet = \"https://myanimelist.net/anime/35849/Darling_in_the_FranXX\";\nmy $response = $ua-&gt;request(HTTP::Request-&gt;new(GET =&gt; $maldet));\nmy $rrs = $response-&gt;content;\nwhile ($rrs =~ m/&lt;span itemprop=\\\"name\\\"&gt;(.*?)&lt;\\/span&gt;/g) {\nmy $ANIME_NAME = $1;\nprint item(\"ANIME NAME\"),(\"$ANIME_NAME\\n\");\n}\n</code></pre>\n\n<p>this original source code , and i want to get DATA</p>\n\n<pre><code>&lt;span itemprop=\"name\"&gt;DATA&lt;/span&gt;\n</code></pre>\n\n<p>please help , what i need to edit in my script</p>\n"}, {"tags": ["perl", "iis"], "comments": [{"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1524677106, "post_id": 50020863, "comment_id": 87072252, "body": "You also need to make sure that the script is in a directory that&#39;s configured as an &quot;application&quot; and that you can see the Handler in that directory&#39;s config (should be if it&#39;s configured as a Handler at the top of the Site)."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524679680, "post_id": 50020863, "comment_id": 87073583, "body": "What&#39;s in <code>testPerl.pl</code>?"}], "owner": {"reputation": 21, "user_id": 4587485, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jx1-7_4aGSs/AAAAAAAAAAI/AAAAAAAAAE4/i89ahg421_A/photo.jpg?sz=128", "display_name": "Roshith S", "link": "https://stackoverflow.com/users/4587485/roshith-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1184, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1524679967, "creation_date": 1524654861, "last_edit_date": 1524679967, "question_id": 50020863, "link": "https://stackoverflow.com/questions/50020863/how-to-configure-perl-files-in-iis-10", "title": "How to configure perl files in IIS 10?", "body": "<p>Can anybody help me to run Perl files over IIS 10.0? I have tried installing Strawberry Perl and adding the corresponding handler to it. But it didn't work.</p>\n\n<p>I want *.pl files to be executed.</p>\n\n<p>This is the Perl file in my directory:</p>\n\n<p><a href=\"https://i.stack.imgur.com/B4szo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4szo.jpg\" alt=\"Perl file in the directory\"></a></p>\n\n<p>This is what I see when I try to access that file in a browser:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0bpQK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0bpQK.jpg\" alt=\"IIS Error\"></a></p>\n"}, {"tags": ["perl", "centos", "otrs", "perlbrew"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524655967, "post_id": 50020799, "comment_id": 87058099, "body": "If you manually compile a Perl, you need to specifically use it. <code>perl</code> on the command line will use whatever is in your <code>PATH</code>. That&#39;s probably the system Perl. Perlbrew doesn&#39;t know about the Perls you&#39;ve compiled yourself outside of it. It only sees the system Perl and its own Perls. How did you <i>switch</i> to your 5.26?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524656053, "post_id": 50020799, "comment_id": 87058160, "body": "Where did you see that you require a Perl 5.16? Does the migration helper script explicitly say that?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524657294, "post_id": 50020799, "comment_id": 87059044, "body": "<code>perlbrew</code> is a good approach. What is the result when you say <code>perlbrew use perl-5.26.2</code> and then immediately after <code>which perl</code> and <code>perl -v</code>?"}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1524756670, "post_id": 50020799, "comment_id": 87109909, "body": "@simbabque Oh, okay. I switched to 5.26 using command &quot;perlbrew switch perl-5.26.2. Yes, the OTRS Migration Tool explicitly asks for perl v5.16."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524756675, "post_id": 50020799, "comment_id": 87109914, "body": "@haukex In all cases it returns perl-5.26.2. But when I try to use that migration tool, it still returns that I&#180;m using perl-5.10."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524832499, "post_id": 50020799, "comment_id": 87141462, "body": "@haukex <a href=\"https://i.stack.imgur.com/qw3WS.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/qw3WS.png</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525083290, "post_id": 50074649, "comment_id": 87213144, "body": "After changing the first line as proposed and installing all necessary modules (DateTime and DBI) I get following error: bin/otrs.Console.pl: line 21, 22 and 24: use: command not found      line 25: syntax error near unexpected token <code>(&#39;     line 25:</code>use FindBin qw($RealBin);&#39;"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525084860, "post_id": 50074649, "comment_id": 87214007, "body": "@user9696859 Did you try just running the command as <code>perl bin&#47;otrs.Console.pl ...</code>? In <a href=\"https://i.stack.imgur.com/sOK14.png\" rel=\"nofollow noreferrer\">the screenshot</a> (from your proposed edit - you should have posted it as a comment instead) you seem to be running the command with <code>su otrs bin&#47;otrs.Console.pl</code>, which was not my suggestion."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525091007, "post_id": 50074649, "comment_id": 87217428, "body": "@user9696859 The same way you did <a href=\"https://stackoverflow.com/questions/50020799/switch-to-new-installed-perl-version-for-migrating-otrs-config-files-on-centos-6/50074649#comment87141462_50020799\">in this comment</a>."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525091844, "post_id": 50074649, "comment_id": 87217868, "body": "I also tried it with: su otrs perl bin/otrs.Console.pl the console returns: &quot;/usr/bin/perl: /usr/bin/perl: cannot execute binary file&quot; Sorry, entweder stelle ich mich zu dumm an oder iwas stimmt nicht... Danke f&#252;r deine Geduld"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525092379, "post_id": 50074649, "comment_id": 87218180, "body": "@user9696859 Try it <i>without</i> the <code>su otrs</code>, <i>just</i> <code>perl bin&#47;otrs.Console.pl ...</code> (Ich hoffe, damit klappt&#39;s.) - or at least without the <code>orts</code>, you might need <code>su</code> (but be careful with that)."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525251587, "post_id": 50074649, "comment_id": 87279225, "body": "If I try it with the root user, it tells me to run it with the otrs User, which is &quot;otrs&quot;. That&#180;s why I tried it with &quot;su otrs&quot;. Without &quot;otrs&quot; it tells me, that the user perl doesn&#180;t exist -.-"}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525252783, "post_id": 50074649, "comment_id": 87279913, "body": "How do I use &quot;su&quot; in this case? Isn&#180;t it used to &quot;use&quot; a different user? I don&#180;t get it..."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525254590, "post_id": 50074649, "comment_id": 87281107, "body": "Now I logged on as the otrs user. The first line of otrs.Console.pl is changed to &#180;#!/usr/bin/env perl&#180;. It still tells me, that perl v.5.16.0 is required and that only perl v5.10.1 is installed..."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525292310, "post_id": 50074649, "comment_id": 87303951, "body": "Ah, now I think I see more clearly what&#39;s going on. Note that <code>perlbrew</code> only installs Perl for the current user. 1. Log in as the <code>otrs</code> user. 2. Use <code>perlbrew</code> to install a newer Perl. 3. Try running <code>perl bin&#47;otrs.Console.pl ...</code> (without <code>su</code>)."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525424876, "post_id": 50074649, "comment_id": 87359703, "body": "Thank you very much! This helped to solve my problem. Everything worked out fine! Du hast mich gerettet! :)"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525620094, "post_id": 50074649, "comment_id": 87419180, "body": "@user9696859 Glad to help! I&#39;ve edited the answer to include the extra information."}, {"owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "edited": false, "score": 0, "creation_date": 1525770608, "post_id": 50074649, "comment_id": 87477086, "body": "Thank you again! :)"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1525620053, "last_edit_date": 1525620053, "creation_date": 1524905309, "answer_id": 50074649, "question_id": 50020799, "link": "https://stackoverflow.com/questions/50020799/switch-to-new-installed-perl-version-for-migrating-otrs-config-files-on-centos-6/50074649#50074649", "title": "Switch to new installed Perl Version for migrating otrs config files on CentOS 6", "body": "<p>The shebang line of <a href=\"https://github.com/OTRS/otrs/blob/master/bin/otrs.Console.pl\" rel=\"nofollow noreferrer\"><code>otrs.Console.pl</code></a> is <code>#!/usr/bin/perl</code>, which means that when you run it from the command line as <code>bin/otrs.Console.pl</code>, it will use <code>/usr/bin/perl</code>, regardless of what other <code>perl</code>s you have installed.</p>\n\n<p>Either run the command as <code>perl bin/otrs.Console.pl ...</code>, or change the first line of <code>otrs.Console.pl</code> into <code>#!/usr/bin/env perl</code>.</p>\n\n<p><em>Edit</em> as per the discussion in the comments: You needed to run the command as the <code>otrs</code> user, and you were trying to do so via <code>su otrs ...</code>. The issue with that is that <code>perlbrew</code> will by default install its <code>perl</code>s only for the current user. So you need to <em>first</em> log in as the <code>otrs</code> user, <em>then</em> use <code>perlbrew</code> to install and switch to a newer Perl, and then apply one of the solutions I suggested above.</p>\n"}], "owner": {"reputation": 1, "user_id": 9696859, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9696859", "link": "https://stackoverflow.com/users/9696859/user9696859"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525620053, "creation_date": 1524654650, "last_edit_date": 1524655893, "question_id": 50020799, "link": "https://stackoverflow.com/questions/50020799/switch-to-new-installed-perl-version-for-migrating-otrs-config-files-on-centos-6", "title": "Switch to new installed Perl Version for migrating otrs config files on CentOS 6", "body": "<p>I'll start from the beginning:</p>\n\n<p>Case: I have to update from an OTRS 5 (already in use for years) to OTRS 6. </p>\n\n<p>I followed <a href=\"https://doc.otrs.com/doc/manual/admin/6.0/en/html/updating.html\" rel=\"nofollow noreferrer\">Update from OTRS 5 to OTRS 6</a> of the OTRS Docs.</p>\n\n<p>I did everything as described until it comes to <a href=\"http://doc.otrs.com/doc/manual/developer/6.0/en/html/package-porting.html#packge-porting-5-to-6-configuration-files\" rel=\"nofollow noreferrer\">converting the XML configuration files</a>. Therefor I need Perl.</p>\n\n<p>The default installed Perl version is 5.10.*. For converting those XML, I need at least 5.16.*.</p>\n\n<p>I installed Perl-5.20.* manually by downloading the .gz and following installation instructions.</p>\n\n<p>Command 'perl -v' still shows <code>perl-5.10</code>.</p>\n\n<p>I googled how to switch between several Perl versions and found \"perlbrew\". I installed it. I used the command: <code>perlbrew list</code>. This should show me all installed perls. It didn't show me nothing. So I installed Perl v.5.26.* via Perlbrew and switched to it. It seemed to work.</p>\n\n<p>Using command <code>perl -v</code> still shows me <code>Perl-5.10.*</code>. </p>\n\n<p>I read through the whole internet.\nI however can't switch to a new Perl version, so I can't convert those XMLs. Because the Migration Script still tells me, there is Perl 5.10 installed and at least 5.16 needed.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1524645511, "post_id": 50016733, "comment_id": 87051420, "body": "Why are you escaping whitespace? Use \\s+ for that. Please note that you can also use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> to run a regex over a whole array."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1524652863, "post_id": 50016733, "comment_id": 87056143, "body": "I think you can just remove the <code>&quot;</code> at the end of <code>&#47;\\#\\ Last modified&quot;&#47;</code> and it works."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1524644580, "post_id": 50016808, "comment_id": 87050884, "body": "There&#39;s no point in using <code>chomp</code> here if you&#39;re only going to put back the newline. It makes no difference to the regex pattern match. The whole program then becomes <code>&#47;# Last modified&#47; or print while &lt;DATA&gt;</code>"}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 1, "last_activity_date": 1524642700, "creation_date": 1524642700, "answer_id": 50016808, "question_id": 50016733, "link": "https://stackoverflow.com/questions/50016733/skip-lines-in-file-that-match-a-string/50016808#50016808", "title": "Skip lines in file that match a string", "body": "<p>If you're just looking to skip lines containing <code># Last modified</code> then try this: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw/ say /;\n\n\nwhile(&lt;DATA&gt;){\n  chomp;\n  next if /# Last modified/;\n  say;\n}\n\n\n__DATA__\n! # Last modified Wed Apr 25 12:57:50 2018\n   set ns config -IPAddress x.x.x.x -netmask 255.255.255.0\n   enable ns feature WL LB CS SSL CF SSLVPN REWRITE RESPONDER\n   enable ns mode FR L3 MBF Edge USNIP PMTUD\n --- 1,6 ----\n   show run\n   #NS12.0 Build 53.22\n ! # Last modified Wed Apr 25 13:02:05 2018\n   set ns config -IPAddress x.x.x.x -netmask 255.255.255.0\n   enable ns feature WL LB CS SSL CF SSLVPN REWRITE RESPONDER\n   enable ns mode FR L3 MBF Edge USNIP PMTUD\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1524644420, "creation_date": 1524644420, "answer_id": 50017329, "question_id": 50016733, "link": "https://stackoverflow.com/questions/50016733/skip-lines-in-file-that-match-a-string/50017329#50017329", "title": "Skip lines in file that match a string", "body": "<p>If you're using <code>diff</code> then the best way is to use the <code>-I</code> option which will cause it to ignore lines that match the regex pattern in both files</p>\n\n<p>Like this</p>\n\n<pre><code>diff -I '# Last modified'\n</code></pre>\n\n<p>This is very much preferable to preprocessing your files to remove the spurious lines</p>\n"}], "owner": {"reputation": 33, "user_id": 7714090, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mgTrEfljBZM/AAAAAAAAAAI/AAAAAAAAACI/aiv61tMmDbE/photo.jpg?sz=128", "display_name": "Bhavik Shah", "link": "https://stackoverflow.com/users/7714090/bhavik-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524658205, "creation_date": 1524642471, "last_edit_date": 1524651824, "question_id": 50016733, "link": "https://stackoverflow.com/questions/50016733/skip-lines-in-file-that-match-a-string", "title": "Skip lines in file that match a string", "body": "<p>Since '#' is treated as character for comment in Perl, I would like to diff out sentence where the it starts with hash(pound) sign. I am trying to make incremental backup of a device but the line which has hash in it, keeps on changing the modified time of the device.</p>\n\n<pre><code> ! # Last modified Wed Apr 25 12:57:50 2018\n   set ns config -IPAddress x.x.x.x -netmask 255.255.255.0\n   enable ns feature WL LB CS SSL CF SSLVPN REWRITE RESPONDER\n   enable ns mode FR L3 MBF Edge USNIP PMTUD\n --- 1,6 ----\n   show run\n   #NS12.0 Build 53.22\n ! # Last modified Wed Apr 25 13:02:05 2018\n   set ns config -IPAddress x.x.x.x -netmask 255.255.255.0\n   enable ns feature WL LB CS SSL CF SSLVPN REWRITE RESPONDER\n   enable ns mode FR L3 MBF Edge USNIP PMTUD\n</code></pre>\n\n<p>So far in the script, I am using below string to match but its not working.</p>\n\n<pre><code>if(open(F, \"+&lt; $incoming\")) {\n    my $out = '';\n    while (&lt;F&gt;) {\n       /\\#\\ Last modified\"/ and next;\n      $out .= $_;\n    }\n</code></pre>\n\n<p>Any leads on how to remove entire sentence who has \"# Last modified\" ?</p>\n"}, {"tags": ["r", "perl", "object", "hash", "parameter-passing"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524641462, "post_id": 50016255, "comment_id": 87049011, "body": "<a href=\"https://metacpan.org/pod/Statistics::R\" rel=\"nofollow noreferrer\">metacpan.org/pod/Statistics::R</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1524653612, "post_id": 50016255, "comment_id": 87056527, "body": "Please show the <code>index.pl</code> script and how it calls <code>var.pl</code>. Just to clarify, are you asking if it is possible to transmit a hash from Perl to R using command line arguments? Or are you looking for some other way of passing data from Perl to R (for example a JSON file)?"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524724712, "post_id": 50016255, "comment_id": 87088684, "body": "@H&#229;konH&#230;gland I have added index.pl. As for the passing of data, it can be any way as long as it includes an initial Perl page (since I use a perl web page) and an R script target."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524733258, "post_id": 50016255, "comment_id": 87093877, "body": "@Andrie If you do not want to use command line arguments, you could try to write a JSON file. Sorry, I am not familiar with R so I cannot say much on the R side, but a quick google search gave me <a href=\"https://www.datacamp.com/community/tutorials/r-data-import-tutorial#javascript\" rel=\"nofollow noreferrer\">this</a> tutorial for loading JSON in R"}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "is_accepted": true, "score": 0, "last_activity_date": 1526970565, "last_edit_date": 1592644375, "creation_date": 1526970565, "answer_id": 50461163, "question_id": 50016255, "link": "https://stackoverflow.com/questions/50016255/passing-multiple-perl-variables-to-r/50461163#50461163", "title": "Passing multiple Perl variables to R", "body": "<p><strong>I have used this solution:</strong></p>\n<p>I have created a table in MySQL where I insert all parameters. I created a datestamp + userid as a primary key that I pass to the R script. The R script uses the RMySQL library and retrieves all the parameters (with the given datestamp as parameter)</p>\n<p><strong>Perl</strong></p>\n<ul>\n<li>Creates a $datestamp variable (datestamp + userid)</li>\n<li>Insert into database all variables with $datestamp as primary key</li>\n<li>my $cmd = &quot;Rscript test.R $datestamp&quot;</li>\n</ul>\n<p><strong>R</strong></p>\n<ul>\n<li>Retrieves all variables from database.</li>\n</ul>\n<blockquote>\n<p>arg &lt;- commandArgs(trailingOnly = TRUE);</p>\n<p>datestamp = arg[1]</p>\n</blockquote>\n<p>part of the RMySQL section:</p>\n<blockquote>\n<p>sql = sprintf(&quot;select * from TEMP where id='%s';&quot;, datestamp)<br />\nrs\n&lt;-dbSendQuery(con, sql)</p>\n</blockquote>\n"}], "owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 50461163, "answer_count": 1, "score": 1, "last_activity_date": 1526970565, "creation_date": 1524640711, "last_edit_date": 1524724627, "question_id": 50016255, "link": "https://stackoverflow.com/questions/50016255/passing-multiple-perl-variables-to-r", "title": "Passing multiple Perl variables to R", "body": "<p><strong>Intro</strong></p>\n\n<p>I am currently working with an existing Perl/R project. I need to pass multiple variables from a Perl page to an R script. This project currently uses the example as shown bellow. </p>\n\n<blockquote>\n  <p>var.pl --> test.R</p>\n</blockquote>\n\n<p><strong>Question 1</strong></p>\n\n<p>I was wondering if there is a more sufficient way to pass multiple variables. Maybe via a hash or an object?\nFor two reasons:</p>\n\n<ol>\n<li>To pass only one argument instead of 10</li>\n<li>To have some kind of identifier for each variable</li>\n</ol>\n\n<p><strong>Question 2</strong></p>\n\n<p>There is actually one more layer (index.pl a webpage) that uses a href to call the <em>var.pl</em>:</p>\n\n<blockquote>\n  <p>index.pl --> var.pl --> test.R</p>\n</blockquote>\n\n<p>This index.pl contains an  tag that calls the <em>var.pl</em> and passes parameters. The var.pl script doesn't set the variables to the strings as shown bellow but sets its variables to the passed parameters. Is it possible to call an R script (incl parameters) to go from index.pl straight to test.R?</p>\n\n<p><strong>index.pl</strong>   </p>\n\n<pre><code>my $var1 = 'testA';\nmy $var2 = 'testB';\nmy $var3 = 'testC';\nprint '&lt;a href=\"var.pl?a='.$var1.'&amp;b='.$var2.'&amp;c='.$var3.'\"&gt;Go&lt;/a&gt;';\n</code></pre>\n\n<p><strong>var.pl</strong>    </p>\n\n<pre><code>use CGI qw/:standard :html3/;\nuse DBI;\nuse strict;\nuse warnings;\n\nmy $a = param('a');\nmy $b = param('b');\nmy $c = param('c');\n\nmy $cmd = \"Rscript test.R $a $b $c\"\n\nopen(PROG, \"$cmd |\");\nwhile (&lt;PROG&gt;) {\n    chomp;\n}\nclose(PROG);\n</code></pre>\n\n<p><strong>test.R</strong></p>\n\n<pre><code>arg &lt;- commandArgs(trailingOnly = TRUE);\n\na = arg[1]\nb = arg[2]\nc = arg[3]\n\n\n# I will do something with the variables\n</code></pre>\n"}, {"tags": ["perl", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1524645250, "post_id": 50016964, "comment_id": 87051288, "body": "then it was a misunderstanding of the documentation. Is there an easy way to transform a list of values into a hash with the list elements as keys?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 1, "creation_date": 1524645453, "post_id": 50016964, "comment_id": 87051389, "body": "@vlad_tepesch yes, a loop, as there&#39;s no <code>map</code> in TT. Something like <code>FOREACH key IN [ list ]; hash.$key = 1; END;</code>"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1524650598, "post_id": 50016964, "comment_id": 87054782, "body": "this is the obvious way (the &#39;[&#39;, &#39;]&#39; can be left out - it is already a list, or am I wrong?). i meant some inline way - but does not seems so - but thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 1, "creation_date": 1524652123, "post_id": 50016964, "comment_id": 87055752, "body": "In normal Perl you&#39;d go <code>my %hash = map { $_ =&gt; 1 } @array</code> or <code>my %hash; $hash{$_} = 1 for @array;</code>. But I don&#39;t see that in TT. You could add your own vmethod via your TT object to implement it. Or probably there might be one on CPAN."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524669630, "post_id": 50016964, "comment_id": 87067983, "body": "@ikegami fair enough. Cheers."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1524669206, "last_edit_date": 1524669206, "creation_date": 1524643215, "answer_id": 50016964, "question_id": 50016200, "link": "https://stackoverflow.com/questions/50016200/lists-defined-vmethod-seems-not-to-work/50016964#50016964", "title": "lists defined-vmethod seems not to work", "body": "<p>You can't use the value of a list element to look it up.</p>\n\n<p>This is what <a href=\"http://template-toolkit.org/docs/manual/VMethods.html#section_List_Virtual_Methods\" rel=\"nofollow noreferrer\">the documentation</a> says about <code>defined</code> on <em>lists</em> (arrays in TT).</p>\n\n<blockquote>\n  <p>Returns a true or false value if the item in the list denoted by the\n  argument is defined.</p>\n\n<pre><code>[% list.defined(3) ? 'yes' : 'no' %]\n</code></pre>\n  \n  <p>When called without any argument, list.defined returns true if the\n  list itself is defined (e.g. the same effect as scalar.defined).</p>\n</blockquote>\n\n<p>However, this is what you do.</p>\n\n<blockquote>\n<pre><code>lines = \"polyline\";\nvalidLineOptions.defined(lines)\n</code></pre>\n</blockquote>\n\n<p>This uses the variable <code>lines</code> with a string value as the <em>index</em> of the list. The index is supposed to be a number, because we are not dealing with a <em>hash</em> (associative array). The values in this list are ordered and numbered. You cannot access them by value.</p>\n\n<p>I think what you are trying to do is to check whether the value exists in the list. There are several ways to do that.</p>\n\n<pre><code>validLineOptions.grep(lines)\n</code></pre>\n\n<p>uses <code>grep</code> to find the element in the array and checks if the number of returned values is true. If there was no match, it returns false.</p>\n\n<p>However, you can also use a hash as a lookup.</p>\n\n<pre><code>lines = \"polyline\";\nvalidLineOptions = {\n    'line'     = 1, \n    'polyline' = 1, \n    'curved'   = 1, \n    'ortho'    = 1, \n    'spline'   = 1\n};\nIF validLineOptions.exists(lines);\n</code></pre>\n\n<p>This will check if the <em>key</em> in the hash <em>exists</em>. It's an easy way to check if a value is allowed.</p>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 50016964, "answer_count": 1, "score": 0, "last_activity_date": 1524669206, "creation_date": 1524640535, "question_id": 50016200, "link": "https://stackoverflow.com/questions/50016200/lists-defined-vmethod-seems-not-to-work", "title": "lists defined-vmethod seems not to work", "body": "<p>in different occasions i ran into this issue.</p>\n\n<p>I want to test if some value is defined in a list, but the lists vmethod only returns false;</p>\n\n<p>e.g in this case:</p>\n\n<pre><code>  lines = \"polyline\";\n  validLineOptions = ['line', 'polyline', 'curved', 'ortho', 'spline'];\n  IF validLineOptions.defined(lines);\n    GET( \"/* using style \" _ lines _ \"*/\\n\");\n  ELSE;\n    GET( \"/* using default style */\\n\");\n    lines = '';\n  END;  \n</code></pre>\n\n<p>this always runs in the <code>ELSE</code> clause.</p>\n\n<p>some version info:</p>\n\n<pre><code>This is perl 5, version 26, subversion 0 (v5.26.0) built for MSWin32-x86-multi-thread-64int\n\n  Wed May 31 02:57:08 2017: \"Module\" Template\n    *   \"installed into: C:\\strawberry\\perl\\vendor\\lib\"\n    *   \"LINKTYPE: dynamic\"\n    *   \"VERSION: 2.27\"\n    *   \"EXE_FILES: bin/tpage bin/ttree\"\n</code></pre>\n"}, {"tags": ["perl", "proxy"], "comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1524640190, "post_id": 50014245, "comment_id": 87048347, "body": "You&#39;re more likely to get good help if you make it easy for us to help you. Ideally, that means posting a <i>small</i>, self-contained example which demonstrates the problem in the least amount of code possible. (This also has the nice side-effect that, in the process of creating such an example, you&#39;re very likely to find the solution yourself.) Failing that, post the actual code you&#39;re running (not a history of &quot;this is the original code, and this is commented out, and then I added this...&quot; which we need to try to piece together) and clearly mark the line with the error (which line is line 93?)."}, {"owner": {"reputation": 47, "user_id": 8300211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0fbdf366a354be3c6a811e3c81a43d?s=128&d=identicon&r=PG&f=1", "display_name": "i716", "link": "https://stackoverflow.com/users/8300211/i716"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1524641031, "post_id": 50014245, "comment_id": 87048775, "body": "@Dave Sherohman: Fair advice. I will review my post as soon as I get the time to do it."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9695734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7bTJn.png?s=128&g=1", "display_name": "Halperly", "link": "https://stackoverflow.com/users/9695734/halperly"}, "is_accepted": false, "score": 0, "last_activity_date": 1524642415, "creation_date": 1524642415, "answer_id": 50016714, "question_id": 50014245, "link": "https://stackoverflow.com/questions/50014245/usage-of-proxy-server-in-a-perl-script/50016714#50016714", "title": "Usage of proxy server in a perl script", "body": "<p>Your script does not compile as it is presented here. In Line 3 where it says</p>\n\n<blockquote>\n  <p><code>TO='list of</code></p>\n</blockquote>\n\n<p>it needs to be changed to</p>\n\n<p><code>$TO='list of</code></p>\n\n<p>...and then it compiles for me. Without the error you are getting in line 93.</p>\n\n<p>From my limited viewpoint this means there may actually be some misprint in your code line 93 that did not make it to the code on this side.</p>\n\n<p>If you erase your line 93 in your script and copy the line 93 back into your code, you might be settled. </p>\n"}, {"tags": [], "owner": {"reputation": 1208, "user_id": 785213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afc5a37218ad4f1d104492e4b4d3657?s=128&d=identicon&r=PG", "display_name": "TheDudeAbides", "link": "https://stackoverflow.com/users/785213/thedudeabides"}, "is_accepted": false, "score": 0, "last_activity_date": 1599834050, "last_edit_date": 1599834050, "creation_date": 1599830842, "answer_id": 63848037, "question_id": 50014245, "link": "https://stackoverflow.com/questions/50014245/usage-of-proxy-server-in-a-perl-script/63848037#63848037", "title": "Usage of proxy server in a perl script", "body": "<p>You have a non-ASCII character <a href=\"https://www.fileformat.info/info/unicode/char/203e/index.htm\" rel=\"nofollow noreferrer\">OVERLINE (U+203E)</a> (<code>\u203e</code>) in your source code, and that is the cause of the error you have shown.</p>\n<p>The first code point of Unicode characters in the U+2000\u2013206F <a href=\"https://www.fileformat.info/info/unicode/block/general_punctuation/list.htm\" rel=\"nofollow noreferrer\">&quot;General Punctuation&quot; block</a> is <code>\\xE2</code>. That was the first clue. The overline is <code>0xE2 0x80 0xBE</code> in hex.</p>\n<p>Perhaps there was some encoding problem that translated the tildes (<code>~</code>) in those few places in your original source into these overlines.</p>\n<p>You may also see errors like this when \u201ccurly\u201d quotes, en (\u2013) and em (\u2014) dashes, and the like have crept into your source code. Sometimes it's due to well-meaning software such as <a href=\"https://developer.wordpress.org/reference/functions/wptexturize/\" rel=\"nofollow noreferrer\">WordPress</a> or <a href=\"https://support.microsoft.com/en-us/office/smart-quotes-in-word-702fc92e-b723-4e3d-b2cc-71dedaf2f343\" rel=\"nofollow noreferrer\">MS Word</a> automatically substituting, for example, straight for curly quotes, which you in turn copy-pasted into your source code.</p>\n<p>It's difficult to spot these visually (I didn't notice the overline at first), but this shell one-liner strips characters in the non-ASCII range and then compares side-by-side with the original file on the left:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># assumes Bash shell\nsdiff --suppress-common-lines script.pl &lt;(tr -cd '\\11\\12\\15\\40-\\176' &lt;script.pl)\n</code></pre>\n<hr />\n<p>A similar encoding problem in a Python context, with an error message about <code>\\xE2</code>, is described in <a href=\"https://stackoverflow.com/q/21639275/785213\">this SO question</a>. This gave me the idea to look for non-ASCII characters in your source code.</p>\n"}], "owner": {"reputation": 47, "user_id": 8300211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0fbdf366a354be3c6a811e3c81a43d?s=128&d=identicon&r=PG&f=1", "display_name": "i716", "link": "https://stackoverflow.com/users/8300211/i716"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1599834050, "creation_date": 1524631714, "question_id": 50014245, "link": "https://stackoverflow.com/questions/50014245/usage-of-proxy-server-in-a-perl-script", "title": "Usage of proxy server in a perl script", "body": "<p>I have tried to add a proxy server to the following perl script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nTO='list of email adresses here';\n\nrequire \"/usr/local/SCRIPTS/www-tools/service-name/jcode.pl\";\nuse LWP::UserAgent;\n$sendmail = '/usr/lib/sendmail -t -oi';\n######################\n($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);\n$year = $year+1900;\n$mon  = $mon+1;\n\n$MMDD = sprintf(\"%02d/%02d\",$mon,$mday);\n$HHMM = sprintf(\"%02d:%02d\",$hour,$min);\n\n$err = 0;\n\n#Ph.1 WebAccess-1stServer(VIP)\n@ret = &amp;SiteAccess( 'http://IP:PORT/hostname/' , \n                    'http://IP:PORT/hostname/Login.do' );\n\nif( $ret[0] != 200 || $ret[2] != 200 ){\n  $err = 1;\n}\n$body  = &amp;jcode::euc($ret[1]);\nif( $body !~ m#&lt;title&gt;ServiceName&lt;\\/title&gt;# ){\n  $err = 2;\n}\n\n$title = &amp;jcode::euc('&lt;title&gt;web$BO\"7H(J&lt;/title&gt;');\n$body  = &amp;jcode::euc($ret[3]);\nif( $body !~ m#$title# ){\n    $err = 3;\n}\n&amp;MailSend('Web')  if( $err &gt; 0 );\n$err=0;\n\n#Ph.2 WebAccess-2ndServer(Direct)\n@ret = &amp;SiteAccess( 'http://2ndServerIP:PORT/hostname/' , \n                    'http://2ndServerIP:PORT/hostname/Login.do' );\n\n\nif( $ret[0] != 200 || $ret[2] != 200 ){\n    $err = 4;\n}\n$body  = &amp;jcode::euc($ret[1]);\nif( $body !~ m#&lt;title&gt;ServiceName&lt;\\/title&gt;# ){\n    $err = 5;\n}\n\n$title = &amp;jcode::euc('&lt;title&gt;web$BO\"7H(J&lt;/title&gt;');\n$body  = &amp;jcode::euc($ret[3]);\nif( $body !~ m#$title# ){\n    $err = 6;\n}\n&amp;MailSend('Web2nd')  if( $err &gt; 0);\n$err=0;\n\n#Ph.3 POP\n@ret = &amp;SiteAccess( 'http://IP:PORT/hostname/' ,\n                    'http://IP:PORT/hostname/Login.do' );\n\nif( $ret[0] != 200 || $ret[2] != 200 ){\n    $err = 7;\n}\n$body  = &amp;jcode::euc($ret[1]);\nif( $body !~ m#&lt;title&gt;ServiceName&lt;/title&gt;# ){\n    $err = 8;\n}\n\n$title = &amp;jcode::euc('&lt;title&gt;TitleJapanese&lt;(J&lt;/title&gt;');\n$body  = &amp;jcode::euc($ret[3]);\nif( $body !~ m#$title# ){\n    $err = 9;\n}\n\n&amp;MailSend('POP')  if( $err &gt; 0);\n$err=0;\n\n\n#Ph.4 Exchange(EWS)\n@ret = &amp;SiteAccess( 'http://IP:PORT/hostname/' ,\n                    'http://IP:PORT/hostname/Login.do' );\n\nif( $ret[0] != 200 || $ret[2] != 200 ){\n    $err = 10;\n}\n$body  = &amp;jcode::euc($ret[1]);\nif( $body !~ m#&lt;title&gt;ServiceName&lt;/title&gt;# ){\n    $err = 11;\n}\n\n$title = &amp;jcode::euc('&lt;title&gt;TitleJapanese&lt;(J&lt;/title&gt;');\n$body  = &amp;jcode::euc($ret[3]);\nif( $body !~ m#$title# ){\n    $err = 12;\n}\n\n&amp;MailSend('Exchange-EWS')  if( $err &gt; 0);\n$err=0;\n\n\n\nsub SiteAccess{\n    my $url1 = shift;\n    my $url2 = shift;\n    # $ua,$req,$res;i\n    my @r;\n\n    if($url1 ne ''){\n        $ua = LWP::UserAgent-&gt;new;\n\n        $req = HTTP::Request-&gt;new(GET =&gt; $url1);\n        $res = $ua-&gt;request($req);\n\n        $r[0] = $res-&gt;code;\n    $r[1] = $res-&gt;content;\n    }\n    if($url2 ne ''){\n        $ua = LWP::UserAgent-&gt;new;\n\n        $res = $ua-&gt;post( $url2,\n            {\n                    \"c\" =&gt; \"don't knwo what that is\",\n                    \"u\" =&gt; \"users ldap\",\n                    \"p\" =&gt; \"password\"\n                    }, \n                    \"Content-Type\" =&gt; \"application/x-www-form-urlencoded\",\n              \"User-Agent\"   =&gt; \"DoCoMo/2.0 N901iS(c100;TB;W24H12;ser123445654654645;icc898114564645667716666f)\");\n\n        $r[2] = $res-&gt;code;\n        $r[3] = $res-&gt;content;\n     }\n    return @r;\n}\n\nsub MailSend{\n    my $title = shift;\n    my $body;\n    my $from;\n    my @message;\n\n#the following lines need another file name jcode to display properly.    It     just means error code or auth error.\n\n    $message[1] = &amp;jcode::jis('[Web]$B%(%i!&lt;%3!&lt;%I(J');\n    $message[4] = &amp;jcode::jis('[Web2nd]$B%(%i!&lt;%3!&lt;%I(J');\n    $message[7] = &amp;jcode::jis('[POP]$B%(%i!&lt;%3!&lt;%I(J');\n    $message[10] = &amp;jcode::jis('[EWS]$B%(%i!&lt;%3!&lt;%I(J');\n\n    $message[2] = &amp;jcode::jis('[Web]$B%m%0%$%s2hLL(J');\n    $message[5] = &amp;jcode::jis('[Web2nd]$B%m%0%$%s2hLL(J');\n    $message[8] = &amp;jcode::jis('[POP]$B%m%0%$%s2hLL(J');\n    $message[11] = &amp;jcode::jis('[EWS]$B%m%0%$%s2hLL(J');\n\n    $message[3] = &amp;jcode::jis('[Web]auth$B%(%i!&lt;(J');\n    $message[6] = &amp;jcode::jis('[Web2nd]auth$B%(%i!&lt;(J');\n    $message[9] = &amp;jcode::jis('[POP]auth$B%(%i!&lt;(J');\n    $message[12] = &amp;jcode::jis('[EWS]auth$B%(%i!&lt;(J');\n\n    $from = 'mail@abc.com';\n\n    $title = '['.$title.']cnct1 err';\n\n#    $title = $title.'['.$MMDD.$HHMM.']';\n\n    $body =&lt;&lt;END_OF_BODY;\nTo: $TO\nSubject: $title\nFrom: $from\n\nConnectOneCheck Error\nDate       : $MMDD $HHMM\nErrorStatus: $err \nErrorMsg   : $message[$err] \nEND_OF_BODY\n\nopen(ML,\"| $sendmail\") || &amp;error(\"Can't execute sendmail : $sendmail\\n\");\n    print ML $body;\n    close(ML);\n}\n</code></pre>\n\n<p>So now here's the part where I tried to add the usage of a proxy. Most parts are commented out, except for the last function:</p>\n\n<h1>!/usr/bin/perl</h1>\n\n<pre><code>TO='list of email adresses here';\n\nrequire \"/usr/local/SCRIPTS/www-tools/service-name/jcode.pl\";\nuse LWP::UserAgent;\n$sendmail = '/usr/lib/sendmail -t -oi';\n######################\n($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);\n$year = $year+1900;\n$mon  = $mon+1;\n\n$MMDD = sprintf(\"%02d/%02d\",$mon,$mday);\n$HHMM = sprintf(\"%02d:%02d\",$hour,$min);\n\n$err = 0;\n</code></pre>\n\n<p>The next part is commented out because it is not in use.</p>\n\n<pre><code>@ret = &amp;SiteAccess( 'http://IP:PORT/hostname/' ,\n                    'http://IP:PORT/hostname/Login.do' );\n\nif( $ret[0] != 200 || $ret[2] != 200 ){\n    $err = 10;\n}\n$body  = &amp;jcode::euc($ret[1]);\nif( $body !\u203e m#&lt;title&gt;ConnectONE&lt;/title&gt;# ){\n    $err = 11;\n}\n\n$title = &amp;jcode::euc('&lt;title&gt;TitleJapanese&lt;/title&gt;');\n$body  = &amp;jcode::euc($ret[3]);\nif( $body !\u203e m#$title# ){\n    $err = 12;\n}\n\n&amp;MailSend('Exchange-EWS')  if( $err &gt; 0);\n$err=0;\n\n\n\nsub SiteAccess{\n    my $url1 = shift;\n    my $url2 = shift;\n    # $ua,$req,$res;i\n    my @r;\n\n    if($url1 ne ''){\n        $ua = LWP::UserAgent-&gt;new;\n        $ENV{HTTP_proxy} = \"proxy fqdn here\";                     \n        $ua-&gt;env_proxy                                                      \n\n        $req = HTTP::Request-&gt;new(GET =&gt; $url1);\n        $res = $ua-&gt;request($req);\n\n        $r[0] = $res-&gt;code;\n    $r[1] = $res-&gt;content;\n    }\n    if($url2 ne ''){\n        $ua = LWP::UserAgent-&gt;new;\n        $ENV{HTTP_proxy} = \"proxy fqdn here\";                     \n        $ua-&gt;env_proxy                                                      \n           $res = $ua-&gt;post( $url2,\n            {\n                    \"c\" =&gt; \"don't knwo what that is\",\n                    \"u\" =&gt; \"users ldap\",\n                    \"p\" =&gt; \"password\"\n                    }, \n                    \"Content-Type\" =&gt; \"application/x-www-form-urlencoded\",\n              \"User-Agent\"   =&gt; \"DoCoMo/2.0 N901iS(c100;TB;W24H12;ser123445654654645;icc898114564645667716666f)\");\n\n        $r[2] = $res-&gt;code;\n        $r[3] = $res-&gt;content;\n     }\n    return @r;\n}\n\nsub MailSend{\n    my $title = shift;\n    my $body;\n    my $from;\n    my @message;\n\n#the following lines need another file name jcode to display properly.    It     just means error code or auth error.\n\n    #$message[1] = &amp;jcode::jis('[Web]$B%(%i!&lt;%3!&lt;%I(J');\n    #$message[4] = &amp;jcode::jis('[Web2nd]$B%(%i!&lt;%3!&lt;%I(J');\n    #$message[7] = &amp;jcode::jis('[POP]$B%(%i!&lt;%3!&lt;%I(J');\n    $message[10] = &amp;jcode::jis('[EWS]$B%(%i!&lt;%3!&lt;%I(J');\n\n    #$message[2] = &amp;jcode::jis('[Web]$B%m%0%$%s2hLL(J');\n    #$message[5] = &amp;jcode::jis('[Web2nd]$B%m%0%$%s2hLL(J');\n    #$message[8] = &amp;jcode::jis('[POP]$B%m%0%$%s2hLL(J');\n    $message[11] = &amp;jcode::jis('[EWS]$B%m%0%$%s2hLL(J');\n\n    #$message[3] = &amp;jcode::jis('[Web]auth$B%(%i!&lt;(J');\n    #$message[6] = &amp;jcode::jis('[Web2nd]auth$B%(%i!&lt;(J');\n    #$message[9] = &amp;jcode::jis('[POP]auth$B%(%i!&lt;(J');\n    $message[12] = &amp;jcode::jis('[EWS]auth$B%(%i!&lt;(J');\n\n    $from = 'mail@abc.com';\n\n    $title = '['.$title.']cnct1 err';\n\n#    $title = $title.'['.$MMDD.$HHMM.']';\n\n    $body =&lt;&lt;END_OF_BODY;\nTo: $TO\nSubject: $title\nFrom: $from\n\nConnectOneCheck Error\nDate       : $MMDD $HHMM\nErrorStatus: $err \nErrorMsg   : $message[$err] \nEND_OF_BODY\n\nopen(ML,\"| $sendmail\") || &amp;error(\"Can't execute sendmail : $sendmail\\n\");\n    print ML $body;\n    close(ML);\n}\n</code></pre>\n\n<p>OK so I have added a proxy using this function</p>\n\n<pre><code>$ua = LWP::UserAgent-&gt;new;\n$ENV{HTTP_proxy} = \"here is the FQDN of the proxy\";                     \n$ua-&gt;env_proxy    \n</code></pre>\n\n<p>But it doesn't compile well. It gives me this error:</p>\n\n<blockquote>\n  <p>syntax error at /usr/local/SCRIPTS/www-tools/connectone/ConnectOneCheck.pl line 93, near \"$body !\"\n  Unrecognized character \\xE2; marked by &lt;-- HERE after f( $body !&lt;-- HERE near column 12 at /usr/local/SCRIPTS/www-tools/connectone/ConnectOneCheck.pl line 93.</p>\n</blockquote>\n\n<p>Is here someone who can get this script running? </p>\n"}, {"tags": ["perl", "treeview", "output", "heapsort"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524635638, "post_id": 50013526, "comment_id": 87045959, "body": "What output do you get?  What output are you expecting?  Update your question with the answers."}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524673655, "post_id": 50013526, "comment_id": 87070509, "body": "@xxfelixxx I update my question with the output I am looking for, and a picture of the CMD output that I am getting so far"}, {"owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524977222, "post_id": 50013526, "comment_id": 87182675, "body": "@xxfelixxx my question has been updated"}], "owner": {"reputation": 21, "user_id": 7455065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VyLUR.jpg?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7455065/dom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1524703121, "creation_date": 1524626106, "last_edit_date": 1524703121, "question_id": 50013526, "link": "https://stackoverflow.com/questions/50013526/how-to-output-into-a-tree-like-structure-via-treedag-node", "title": "how to output into a tree like structure via Tree::DAG_Node?", "body": "<p>I'm trying to write a program that can read from a file then put into a heap sort then output in a tree along with the sorted list. But I got stuck, instead of having the put be the numbers used in the heap sort, it just post 1-10 on one line then 1-9 on the next line. I'm really confused and I barely understand this language as it is. I put a example of the out below alone with the output I am hoping to have it draw. </p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.006;\nuse strict;\nuse warnings;\nuse Tree::DAG_Node;\n\n\nprocess_data(read_file('testing.txt'));\nprocess_data((3,1,4,1,5,9,2,6,5,3,6));\n\nsub read_file{\n    my($filename)=@_;\n    my @data=();\n    my @words;\n    open(my $fh, \"&lt;\", $filename)\n        or die \"Could not open file: $!\\n\";\n    while(&lt;$fh&gt;){\n    chomp;\n    @words = split(' ');\n    foreach my $word(@words){\n    push @data, $word;\n}\n\n}\nclose $fh;\n\nreturn @data;\n}\n\n\nsub heap_sort {\n    my ($a) = @_;\n    my $n = @$a;\n    for (my $i = ($n - 2) / 2; $i &gt;= 0; $i--) {\n        down_heap($a, $n, $i);\n    }\n    for (my $i = 0; $i &lt; $n; $i++) {\n        my $t = $a-&gt;[$n - $i - 1];\n        $a-&gt;[$n - $i - 1] = $a-&gt;[0];\n        $a-&gt;[0] = $t;\n        down_heap($a, $n - $i - 1, 0);\n    }\n}\n\nsub down_heap {\n    my ($a, $n, $i) = @_;\n    while (1) {\n        my $j = max($a, $n, $i, 2 * $i + 1, 2 * $i + 2);\n        last if $j == $i;\n        my $t = $a-&gt;[$i];\n        $a-&gt;[$i] = $a-&gt;[$j];\n        $a-&gt;[$j] = $t;\n        $i = $j;\n    }\n\n\nsub max {\n    my ($a, $n, $i, $j, $k) = @_;\n    my $m = $i;\n    $m = $j if $j &lt; $n &amp;&amp; $a-&gt;[$j] &gt; $a-&gt;[$m];\n    $m = $k if $k &lt; $n &amp;&amp; $a-&gt;[$k] &gt; $a-&gt;[$m];\n    return $m;\n}\n}\n\nsub draw_tree{\n    my(@data)=@_;\n    my $root = Tree::DAG_Node-&gt;new;\n$root-&gt;name($_[0]);\n$root-&gt;new_daughter-&gt;name($_) for (1..10);\nmy @names = @data;\nmy $count = 50;\nfor my $n ($root-&gt;daughters) {\n    for (split //, $names[$count++]) {\n        $n-&gt;new_daughter-&gt;name($_)\n    }\n}\nprint map \"$_\\n\", @{$root-&gt;draw_ascii_tree};\n}\n\nsub process_data{\n    my(@data)=@_;\n    my @a = @data;\n    print \"@a\\n\";\n    print \"\\n\";\n    heap_sort(\\@a);\n    draw_tree(@a);\n    print \"\\n\";\n    print \"@a\\n\";\n    print \"\\n\";\n\n}\n</code></pre>\n\n<p>here is the output I get \n<a href=\"https://i.stack.imgur.com/CfZDj.png\" rel=\"nofollow noreferrer\">CMD output of my code</a></p>\n\n<p>Output I am expecting:\n(using example data)</p>\n\n<p>1 1 9 4 5</p>\n\n<pre><code>   1\n   |\n 1 ----- 9\n |      \n /\\ \n4 5\n</code></pre>\n\n<p>1 1 4 5 9</p>\n"}, {"tags": ["apache", ".htaccess", "perl", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1524643647, "post_id": 50010277, "comment_id": 87050331, "body": "Is there a reason you decided to go from PHP as CGI to Perl as CGI, which is even older technology? Perl&#39;s CGI module has been deprecated and removed from the core installation of current Perl versions. Unless you are on a shared hosting environment that doesn&#39;t allow you to open up ports, I would suggest to look into a more modern Plack based solution with Perl. Dancer2 or Mojolicious come to mind."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4283009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfaddf1d586d86f68129c7bd92ef00a5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/4283009/derek"}, "edited": false, "score": 0, "creation_date": 1524666426, "post_id": 50017146, "comment_id": 87065640, "body": "If that worked, I wouldn&#39;t be posting here :) That was the very first thing I tried. It redirects to <a href=\"http://example.com/usr/lib/cgi-bin/api.pl\" rel=\"nofollow noreferrer\">example.com/usr/lib/cgi-bin/api.pl</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 25, "user_id": 4283009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfaddf1d586d86f68129c7bd92ef00a5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/4283009/derek"}, "edited": false, "score": 0, "creation_date": 1524667586, "post_id": 50017146, "comment_id": 87066478, "body": "Then your server is not configured properly @derek."}, {"owner": {"reputation": 25, "user_id": 4283009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfaddf1d586d86f68129c7bd92ef00a5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/4283009/derek"}, "edited": false, "score": 1, "creation_date": 1524704772, "post_id": 50017146, "comment_id": 87082846, "body": "You were right. Reinstalling apache resolved it. Thanks"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1524643846, "creation_date": 1524643846, "answer_id": 50017146, "question_id": 50010277, "link": "https://stackoverflow.com/questions/50010277/pretty-url-for-perl-cgi/50017146#50017146", "title": "Pretty URL for Perl CGI", "body": "<p>You should only need to replace the <code>api.php</code> with <code>cgi-bin/api.pl</code> in your rules.</p>\n\n<pre><code>RewriteRule ^api/?$ cgi-bin/api.pl [L]\nRewriteRule ^api/?([a-zA-Z0-9_-]{1,})?/?$ cgi-bin/api.pl?command=$1 [QSA,L]\nRewriteRule ^api/?([a-zA-Z0-9_-]{1,})?/?([a-zA-Z0-9_-]{1,})?/?$ cgi-bin/api.pl?command=$1&amp;key=$2 [QSA,L]\n</code></pre>\n\n<p>You can use a tool like <a href=\"https://htaccess.madewithlove.be?share=5f482829-3c6b-57a1-bf36-574ee887ac06\" rel=\"nofollow noreferrer\">htaccess.madewithlove.be</a> to test your rules.</p>\n"}], "owner": {"reputation": 25, "user_id": 4283009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfaddf1d586d86f68129c7bd92ef00a5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/4283009/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 50017146, "answer_count": 1, "score": 0, "last_activity_date": 1524643846, "creation_date": 1524601740, "last_edit_date": 1524606403, "question_id": 50010277, "link": "https://stackoverflow.com/questions/50010277/pretty-url-for-perl-cgi", "title": "Pretty URL for Perl CGI", "body": "<p>I just converted over from using PHP to Perl for a script that hosts API commands.</p>\n\n<p>As php, the .htaccess looked like:</p>\n\n<pre><code>RewriteRule ^api/?$ api.php [L]\nRewriteRule ^api/?([a-zA-Z0-9_-]{1,})?/?$ api.php?command=$1 [QSA,L]\nRewriteRule ^api/?([a-zA-Z0-9_-]{1,})?/?([a-zA-Z0-9_-]{1,})?/?$ api.php?command=$1&amp;key=$2 [QSA,L]\n</code></pre>\n\n<p>End result was executing with a url like <code>http://example.com/api/command/key</code> (where api is the script name), worked as intended.</p>\n\n<p>Switching over to Perl, visiting <code>http://example.com/api</code> redirects to <code>http://example.com/usr/lib/cgi-bin/api.pl</code> which doesn't work in the slightest, and also looks hideous. I've tried everything I can think of with <code>.htaccess</code> and <code>serve-cgi-bin.conf</code>, but nothing works for me. It doesn't really matter which folder I need to put the <code>api.pl</code> in, as long as the folder name and extension don't appear in the url.</p>\n\n<p>How can I get the desired url?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524631349, "post_id": 50010143, "comment_id": 87044543, "body": "If you&#39;re really doing Perl variable substitution then you may want to look at <a href=\"https://metacpan.org/pod/String::Interpolate\" rel=\"nofollow noreferrer\"><code>String::Interpolate</code></a> which makes perl&#39;s own run time double-quote string interpolation code available. That way you can use <code>$s = &#39;abc$name-def&#39;</code> or <code>$s = &#39;abc${name}def&#39;</code> and then do the interpolation after setting <code>$name = &#39;Peter&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524602812, "post_id": 50010177, "comment_id": 87037613, "body": "@melpomene We can work around it using <code>s&#47;#name(?|\\.()|(\\W))&#47;Peter$1&#47;i</code>"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1524603039, "last_edit_date": 1524603039, "creation_date": 1524601244, "answer_id": 50010177, "question_id": 50010143, "link": "https://stackoverflow.com/questions/50010143/perl-regex-for-variable-substitution/50010177#50010177", "title": "perl regex for variable substitution", "body": "<p>You may use</p>\n\n<pre><code>s/#name(?|\\.()|(\\W))/Peter$1/i\n</code></pre>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>#name</code> - matches the literal substring</li>\n<li><code>(?|\\.()|(\\W))</code> - a <a href=\"https://perldoc.perl.org/perlre.html#(%3F%7Cpattern)\" rel=\"nofollow noreferrer\"><strong>branch reset group</strong></a> matching either of the two alternatives:\n\n<ul>\n<li><code>\\.()</code> - a dot and then captures an empty string into <code>$1</code></li>\n<li><code>|</code> - or</li>\n<li><code>(\\W)</code> - any non-word char captured into <code>$1</code>.</li>\n</ul></li>\n</ul>\n\n<p>So, upon a match, <code>$1</code> placeholder is either empty or contains any non-word char other than a dot.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524630710, "post_id": 50010534, "comment_id": 87044415, "body": "The first of a series of alternations that matches will be used, so <code>(?|\\.()|(\\W))</code> is fine."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524634893, "post_id": 50010534, "comment_id": 87045667, "body": "@Borodin Yeah, but I feel <code>[^.\\w]</code> is more explicit and robust. E.g. there&#39;s no way my regex will start matching in unexpected ways if someone embeds it in a bigger context."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1524602972, "creation_date": 1524602972, "answer_id": 50010534, "question_id": 50010143, "link": "https://stackoverflow.com/questions/50010143/perl-regex-for-variable-substitution/50010534#50010534", "title": "perl regex for variable substitution", "body": "<p>There are several possible approaches.</p>\n\n<pre><code>s/#name(\\W)/\"Peter\" . ($1 eq \".\" ? \"\" : $1)/e\n</code></pre>\n\n<p>Here we use <code>/e</code> to turn the replacement part into an expression, so we can inspect <code>$1</code> and choose the replacement string dynamically.</p>\n\n<pre><code>s/#name(?|\\.()|([^.\\w]))/Peter$1/\n</code></pre>\n\n<p>Here we use <code>(?|</code> <code>)</code> to reset the numbering of capture groups between branches, so both <code>\\.()</code> and <code>([^.\\w])</code> set <code>$1</code>. If a <code>.</code> is matched, <code>$1</code> becomes the empty string; otherwise it contains the matched character.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1524634970, "post_id": 50013917, "comment_id": 87045694, "body": "Oh, neat. You could even do <code>#name\\b\\.?</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524643274, "post_id": 50013917, "comment_id": 87050115, "body": "@melpomene: I didn&#39;t spot that. I&#39;ve been working backwards from <code>#name(?:\\.|(?=\\W))</code> but only got half-way!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1261273"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524651925, "post_id": 50013917, "comment_id": 87055617, "body": "@Melpomene: <code>s&#47;#name\\b\\.?&#47;Peter&#47;</code> is nice!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1524630499, "last_edit_date": 1524630499, "creation_date": 1524629382, "answer_id": 50013917, "question_id": 50010143, "link": "https://stackoverflow.com/questions/50010143/perl-regex-for-variable-substitution/50013917#50013917", "title": "perl regex for variable substitution", "body": "<p>You can do this by using either a literal dot or a word boundary for the terminator</p>\n\n<p>Like this</p>\n\n<pre><code>s/#name(?:\\.|\\b)/Peter/i\n</code></pre>\n\n<p>Here's a complete program that reproduces the required output shown in your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nfor my $s ( 'abc#name.def', 'abc#namedef', 'abc#name-def' ) {\n\n    ( my $s2 = $s ) =~ s/#name(?:\\.|\\b)/Peter/i;\n\n    printf \"%-12s =&gt; %-s\\n\", $s, $s2;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>abc#name.def =&gt; abcPeterdef\nabc#namedef  =&gt; abc#namedef\nabc#name-def =&gt; abcPeter-def\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1261273"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1524630499, "creation_date": 1524601090, "last_edit_date": 1524607634, "question_id": 50010143, "link": "https://stackoverflow.com/questions/50010143/perl-regex-for-variable-substitution", "title": "perl regex for variable substitution", "body": "<p>I want to substitute variables marked by a \"#\" and terminated by a dot or a non-alphanumeric character. \nExample: Variable #name should be substituted be \"Peter\"</p>\n\n<pre>\nabc#name.def => abcPeterdef\nabc#namedef  => abc#namedef\nabc#name-def => abcPeter-def\n</pre>\n\n<p>So if the variable is terminated with a dot, it is replaced and the dot removed. Is it terminated by any non-alphanum character, it is replaced also.</p>\n\n<p>I use the following:</p>\n\n<pre><code>s/#name\\./Peter/i\ns/#name(\\W)/Peter$1/i\n</code></pre>\n\n<p>This works but is it possible to merge it into one expression?</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1524593154, "post_id": 50008197, "comment_id": 87032873, "body": "<code>script &amp; script; wait</code>"}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524594805, "post_id": 50008197, "comment_id": 87033738, "body": "@ikegami could you please describe this command"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1524595240, "post_id": 50008197, "comment_id": 87033959, "body": "And you are mistaken. You <i>can</i> install Parallel::ForkManager. No special permissions are needed."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524596112, "post_id": 50008197, "comment_id": 87034453, "body": "@ikegami i know but i can&#39;t install that."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1524599122, "post_id": 50008197, "comment_id": 87035983, "body": "You &quot;can&#39;t&quot; ... because of OS permissions or because of corporate policy?"}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1524602678, "post_id": 50008197, "comment_id": 87037556, "body": "@glennjackman Because of corporate policy"}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1524601082, "last_edit_date": 1524601082, "creation_date": 1524599209, "answer_id": 50009703, "question_id": 50008197, "link": "https://stackoverflow.com/questions/50008197/run-multiple-instances-of-a-perl-script/50009703#50009703", "title": "Run multiple instances of a Perl script", "body": "<p>In shell scripting you can do it so easily like below:-</p>\n\n<pre><code>your_perl_script.pl &amp;\nyour_perl_script.pl &amp;\nyour_perl_script.pl &amp;\nwait\n</code></pre>\n\n<p>Here total 3 instances of your Perl script will run parallel. If you want more just add more like above.</p>\n"}, {"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 1, "last_activity_date": 1524603966, "creation_date": 1524603966, "answer_id": 50010715, "question_id": 50008197, "link": "https://stackoverflow.com/questions/50008197/run-multiple-instances-of-a-perl-script/50010715#50010715", "title": "Run multiple instances of a Perl script", "body": "<p>Is using <a href=\"https://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\"><code>fork()</code></a> possible? Then just do it the hard way and <code>fork()</code> in the program itself as you like. Or maybe write a wrapper in a pattern of <code>fork();</code><a href=\"https://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\"><code>exec();</code></a> or <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system();</code></a> if you need any output.</p>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524603966, "creation_date": 1524593062, "last_edit_date": 1524595067, "question_id": 50008197, "link": "https://stackoverflow.com/questions/50008197/run-multiple-instances-of-a-perl-script", "title": "Run multiple instances of a Perl script", "body": "<p>I have a Perl script which does some text processing. Now I want to run multiple instances of that script.</p>\n\n<p>I tried to use the\n<a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> module\nto achieve this, but that module is not available on my server and I can't install it.</p>\n\n<p>Is there any way to do this using Perl or shell script in the Unix environment.</p>\n"}, {"tags": ["apache", "perl", "server"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1524582969, "post_id": 50004969, "comment_id": 87026871, "body": "This is not a Perl question. HTTP responses need to indicate content type. See <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Standard_response_fields\" rel=\"nofollow noreferrer\">Content-Type</a>. For debugging purposes, use <a href=\"https://metacpan.org/pod/CGI::Carp\" rel=\"nofollow noreferrer\">CGI::Carp</a>."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 7, "last_activity_date": 1524583475, "creation_date": 1524583475, "answer_id": 50005419, "question_id": 50004969, "link": "https://stackoverflow.com/questions/50004969/printing-variable-in-the-server-code/50005419#50005419", "title": "Printing variable in the server code", "body": "<p>You haven't explained yourself very well at all. But, from the errors you're getting, I assume this is a CGI program.</p>\n\n<p>A CGI program sends its output to <code>STDOUT</code>, where the web server catches it and processes it in various ways. In order for this to work, the data that your program prints to <code>STDOUT</code> needs to follow various rules. Probably the most important of those rules is that the first output from your program must be the CGI headers - and at the least, those headers should include a <code>Content-type:</code> header.</p>\n\n<p>I assume that you're trying to display your debugging output before your program has sent the CGI headers. That's not going to work.</p>\n\n<p>But do you really want to send your debugging output to <code>STDOUT</code>? That seems like a bad idea. If you use <code>warn()</code> instead of <code>print()</code> then your output will go to <code>STDERR</code> instead - and in most web servers, <code>STDERR</code> is connected to the web server's error log.</p>\n\n<p>For more control over the output generated by <code>warn()</code>, see the <a href=\"https://metacpan.org/pod/CGI::Carp\" rel=\"noreferrer\">CGI::Carp</a> module.</p>\n"}], "owner": {"reputation": 355, "user_id": 4886441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GnxuH.jpg?s=128&g=1", "display_name": "Misha", "link": "https://stackoverflow.com/users/4886441/misha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524583475, "creation_date": 1524582192, "question_id": 50004969, "link": "https://stackoverflow.com/questions/50004969/printing-variable-in-the-server-code", "title": "Printing variable in the server code", "body": "<p>I have inherited some code that is written in Perl and makes HTTP requests between the server and the client. I want to print few variables that is in the server code but that raises errors when I use the print statement. The variables are scalars, arrays or hashes. I want to print the output to the terminal and only for debugging purposes. Few errors I get are-</p>\n\n<pre><code>malformed header from script 'get_config': Bad header: self=$VAR1 = bless( {\n\nResponse header name 'self=Bio' contains invalid characters, aborting request\n</code></pre>\n\n<p>A simple <code>print 'test'</code> raises error like </p>\n\n<pre><code>malformed header from script 'get_config': Bad header: test\n</code></pre>\n\n<p>How do I print the variable values without any errors? </p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1524577339, "post_id": 50003168, "comment_id": 87022673, "body": "Showing a bunch of code that doesn&#39;t work the way you want doesn&#39;t exactly tell us your actual intent. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be far more useful. At minimum, we need to (1) know what you want, (2) know what you&#39;re getting instead, and (3) have everything we need to test whether an answer resolves that."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1524577609, "post_id": 50003168, "comment_id": 87022878, "body": "which is the target language perl or bash ? if it&#39;s bash it&#39;s trivial just copy the commands in script"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9691409"}, "edited": false, "score": 0, "creation_date": 1524577678, "post_id": 50003168, "comment_id": 87022934, "body": "i would appreciate both, but any of the two can do"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1524577831, "post_id": 50003168, "comment_id": 87023061, "body": "otherwise <a href=\"https://stackoverflow.com/questions/364842/how-do-i-run-a-perl-script-from-within-a-perl-script\">call a perl script from another</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9691409"}, "edited": false, "score": 0, "creation_date": 1524578272, "post_id": 50003168, "comment_id": 87023378, "body": "i made a bash script that worked, it was trivial thank you"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1524581169, "creation_date": 1524581169, "answer_id": 50004587, "question_id": 50003168, "link": "https://stackoverflow.com/questions/50003168/perl-combine-perl-one-liners-and-scripts-in-a-single-bash-script/50004587#50004587", "title": "perl combine perl one liners and scripts in a single bash script", "body": "<pre><code>use autodie qw( system );\n\nsystem(q{marcmoose-lint unimarc.rules marc.iso});\nsystem(q{perl -ne 'if (/^([0-9]{3})[()0-9]*: *(.*)$/) { print \"$1: $2\\n\";}' marc.iso.log | sort | uniq -c});\nsystem(q{perl script1.pl});\nsystem(q{perl script2.pl filename.txt});\nsystem(q{perl script3.pl});\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9691409"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524581169, "creation_date": 1524577184, "last_edit_date": 1524577536, "question_id": 50003168, "link": "https://stackoverflow.com/questions/50003168/perl-combine-perl-one-liners-and-scripts-in-a-single-bash-script", "title": "perl combine perl one liners and scripts in a single bash script", "body": "<pre><code>marcmoose-lint unimarc.rules marc.iso\nperl -ne 'if (/^([0-9]{3})[()0-9]*: *(.*)$/) { print \"$1: $2\\n\";}' marc.iso.log | sort | uniq -c\nperl script1.pl\nperl script2.pl filename.txt\nperl script3.pl\n</code></pre>\n\n<p>I have tried the following, no luck:\nwrapper.pl script:</p>\n\n<pre><code>my $command = \"perl s1.pl in.fa &gt; out1.txt\";\nsystem($command);\n\n$command = \"perl s2.pl out1.txt &gt; out2.txt\";\nsystem($command);\n\n$command = \"perl s3.pl out2.txt &gt; out3.txt\";\nsystem($command);\n</code></pre>\n\n<p>How could i make all the above scripts </p>\n\n<pre><code>marcmoose-lint unimarc.rules marc.iso\n    perl -ne 'if (/^([0-9]{3})[()0-9]*: *(.*)$/) { print \"$1: $2\\n\";}' marc.iso.log | sort | uniq -c\n    perl script1.pl\n    perl script2.pl filename.txt\n    perl script3.pl\n</code></pre>\n\n<p>be inserted into a single executable script, ie run.sh?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1524572502, "post_id": 50001392, "comment_id": 87019100, "body": "There seems to be plenty of table/text formatting modules on CPAN. See for example <a href=\"https://metacpan.org/pod/Text::Table\" rel=\"nofollow noreferrer\">Text::Table</a>"}, {"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524573332, "post_id": 50001392, "comment_id": 87019690, "body": "Its work in real time? How?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1524573474, "post_id": 50001392, "comment_id": 87019784, "body": "I am not sure what you mean by <i>&quot;real time&quot;</i>. Please show the code you are working on. You may edit your question to include more information"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1524573548, "post_id": 50001392, "comment_id": 87019843, "body": "Unless you can go through the data before printing it out and working out the maximum column sizes, I can&#39;t see how you could do this."}, {"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524574177, "post_id": 50001392, "comment_id": 87020302, "body": "@H&#229;konH&#230;gland I edited. Is clear now? I want print each element before loop is ends."}, {"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1524574323, "post_id": 50001392, "comment_id": 87020427, "body": "@ChrisTurner can I specify the width of the columns at all?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1524574900, "post_id": 50001392, "comment_id": 87020885, "body": "If you know the size you want for each column (which seems contradictory with your &quot;real time&quot; though), you could use <code>printf</code> with <code>%-XXs</code> (where <code>XX</code> is replaced by the length of your column). See <a href=\"https://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>perldoc -f sprintf</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524577864, "post_id": 50002484, "comment_id": 87023091, "body": "Its available from perl 5.26 and above?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524579948, "post_id": 50002484, "comment_id": 87024630, "body": "The <b><i>Perl 5</i></b> module <a href=\"https://metacpan.org/pod/Perl6::Form\" rel=\"nofollow noreferrer\"><code>Perl6::Form</code></a> is a huge improvement over Perl 5&#39;s native format facility."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524585732, "post_id": 50002484, "comment_id": 87028868, "body": "@J. Doe: I don&#39;t know an exact version number. But it&#39;s in Perl since ages. So any recent implementation should work."}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 2, "last_activity_date": 1524575169, "creation_date": 1524575169, "answer_id": 50002484, "question_id": 50001392, "link": "https://stackoverflow.com/questions/50001392/perl-script-tables-created-in-real-time-in-terminal-output/50002484#50002484", "title": "Perl script - tables created in real time in terminal output", "body": "<p>First thing that comes into my mind are <a href=\"https://perldoc.perl.org/perlform.html\" rel=\"nofollow noreferrer\">Perl formats</a>. It's built-in and give's you a whole bunch of means for formatting output. Have a look at it.</p>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 50002484, "answer_count": 1, "score": -1, "last_activity_date": 1524575169, "creation_date": 1524572007, "last_edit_date": 1524574116, "question_id": 50001392, "link": "https://stackoverflow.com/questions/50001392/perl-script-tables-created-in-real-time-in-terminal-output", "title": "Perl script - tables created in real time in terminal output", "body": "<p>My script prints data on separate lines in terminal output, it looks like this:</p>\n\n<pre><code>Name: Paul Surname: Doe Age:34\nName: Paulo Surname: Doeson Age:28 \nName: Paulinho Surname: Docsone Age:5\nName: Paulmen Surname: Doee Age:12\nName: Paulchen Surname: Dooe Age:31\n</code></pre>\n\n<p>And I would like all data to be divided into columns and displayed equally in bars, as below:</p>\n\n<pre><code>Name: Paul     Surname: Doe     Age:34\nName: Paulo    Surname: Doeson  Age:28\nName: Paulinho Surname: Docsone Age:5 \nName: Paulmen  Surname: Doee    Age:12 \nName: Paulchen Surname: Dooe    Age:31 \n</code></pre>\n\n<p>I note that the output can not be buffered or stored. I would like to achieve this in real time while running the script. Are there any tricks to achieve this? Something like specifying the width of a cell in an HTML table?</p>\n\n<p><strong>EDIT</strong><br>\nReally EXAMPLE code:</p>\n\n<pre><code>@arr = q(Name: Paul Surname: Doe Age:34, Name: Paulo Surname: Doeson Age:28, Name: Paulinho Surname: Docsone Age:5, Name: Paulmen Surname: Doee Age:12, Name: Paulchen Surname: Dooe Age:31);\n\nforeach (@arr) {\n  # here should be our trick to creating columns\n  print $_ # should be print element in columns (without buffering). print now, not after loop end. \n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "unicode"], "answers": [{"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1524571624, "post_id": 50000269, "comment_id": 87018473, "body": "Your answer is correct for ASCII, but does not consider Unicode characters like non-breaking spaces or em-spaces that are mentioned in the question. The <code>\\s</code> charclass will also match Unicode space characters, not just the ASCII space characters you mentioned."}], "tags": [], "owner": {"reputation": 34, "user_id": 5944077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3OsQ.jpg?s=128&g=1", "display_name": "rav", "link": "https://stackoverflow.com/users/5944077/rav"}, "is_accepted": false, "score": -1, "last_activity_date": 1524579937, "last_edit_date": 1524579937, "creation_date": 1524568431, "answer_id": 50000269, "question_id": 49999156, "link": "https://stackoverflow.com/questions/49999156/perl-regex-to-match-different-types-of-space-characters-but-not-tabulation/50000269#50000269", "title": "Perl regex to match different types of space characters but not tabulation", "body": "<p><code>\\s</code> matches any whitespace character including tab (<code>\\t</code>) -> (equal to <code>[\\r\\n\\t\\f\\v ]</code>)</p>\n\n<p>Use <code>[\\r\\n\\f\\v ]</code> which will match all whitespace characters except tab (<code>\\t</code>).</p>\n\n<p>Or use <code>[\\r\\f\\v ]</code> which will match all whitespace except tab (<code>\\t</code>) and newline (<code>\\n</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 1, "last_activity_date": 1524572552, "creation_date": 1524572552, "answer_id": 50001588, "question_id": 49999156, "link": "https://stackoverflow.com/questions/49999156/perl-regex-to-match-different-types-of-space-characters-but-not-tabulation/50001588#50001588", "title": "Perl regex to match different types of space characters but not tabulation", "body": "<p>The character classes <code>\\s</code> and <code>\\h</code> match all space and horizontal space, respectively. You can use a negated character class to exclude certain characters, for example <code>[^\\S\\t]</code> or <code>[^\\H\\t]</code> \u2013 all (horizontal) space characters except the tabulator.</p>\n\n<p>That is probably the simplest solution, but you can also use various Unicode properties. For example <code>[^\\H\\p{POSIX_Cntrl}]</code> would be all horizontal space characters that are not control characters (the tab is a control character), and equivalently <code>\\p{Zs}</code> contains all Unicode space separators (which also excludes the tab). However, none of these Unicode properties make explicit that you merely want to exclude the tabulator.</p>\n"}], "owner": {"reputation": 509, "user_id": 5168448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NY5A4.jpg?s=128&g=1", "display_name": "Kemi", "link": "https://stackoverflow.com/users/5168448/kemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 50001588, "answer_count": 2, "score": -1, "last_activity_date": 1524579937, "creation_date": 1524565070, "question_id": 49999156, "link": "https://stackoverflow.com/questions/49999156/perl-regex-to-match-different-types-of-space-characters-but-not-tabulation", "title": "Perl regex to match different types of space characters but not tabulation", "body": "<p>When working with <code>.tsv</code> files containing text, I sometimes need to normalize different types of whitespace characters (non-breaking space, em-space etc.).\nIs there a way to match all of them, but not the field separator (tab), so it would be possible to process the whole file at once, without splitting it into columns?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524565037, "post_id": 49999071, "comment_id": 87014183, "body": "Just use <code>$which = $days[$number-1]</code> without changing the value of <code>$number</code>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1524566060, "creation_date": 1524566060, "answer_id": 49999504, "question_id": 49999071, "link": "https://stackoverflow.com/questions/49999071/perl-get-input-from-user-and-determine-the-array-value/49999504#49999504", "title": "Perl get input from user and determine the array value", "body": "<p>I don't understand your test <code>if ($days[$number] == $name[$number])</code> as there is no such array as <code>@name</code>, so I have removed it altogether</p>\n\n<p>This appears to do what you ask. I have chosen to calculate the beverage, as it alternates in the same way as the size. You <em>must always</em> <code>use strict</code> and <code>use warnings 'all'</code> and declare all your variables with <code>my</code> at their first point of use</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @days = qw/\n    Sunday\n    Monday\n    Tuesday\n    Wednesday\n    Thursday\n    Friday\n    Saturday\n/;\nmy @beverages = qw/ coffee tea /;\nmy @sizes     = qw/ Large Small /;\n\nprint \"Please enter a number between 1 and 7 (inclusive): \";\nchomp( my $number = &lt;STDIN&gt; );\n\nmy $dayname = $days[$number-1];\nmy $drink   = $beverages[$number % 2];\nmy $size    = $sizes[$number % 2];\n\nprint \"$dayname. $size cup of $drink\\n\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8769264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd26d5f4599fc621a8793be91542e15?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/8769264/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 49999504, "answer_count": 1, "score": 0, "last_activity_date": 1524566060, "creation_date": 1524564859, "question_id": 49999071, "link": "https://stackoverflow.com/questions/49999071/perl-get-input-from-user-and-determine-the-array-value", "title": "Perl get input from user and determine the array value", "body": "<p>Some background, i am supposed to create a perl script to get input from user the value of 1 to 7 inclusive. </p>\n\n<p>When when user enter 1, it should print Sunday. Small cup of tea. </p>\n\n<p>When user enter 2, it should print Monday. Large cup of coffee and so on. </p>\n\n<p>I can reached the end result, but the way i achieve it is not the correct way as i reduce the $number value by 1 in order to access the array first element</p>\n\n<p>The correct way will be when user enter 1, without reducing the value by 1, it should be able to know it is to refer to the first element in the array.</p>\n\n<p>Hope someone could shed some light to me on this.</p>\n\n<pre><code>        my @days = ('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');\n\n        my %beverages = ('Sunday' =&gt; tea, 'Monday' =&gt; coffee, 'Tuesday' =&gt; tea, 'Wednesday' =&gt; coffee, 'Thursday' =&gt; tea, 'Friday' =&gt; coffee, 'Saturday' =&gt; tea );\n\n        print \"Please enter a number between 1 and 7 (inclusive) \\n\";\n        my $number = &lt;STDIN&gt;;\n        $number -=1;\n        $which = $days[$number];\n        $mod = ($number+1) % 2;\n\n\n        if ($days[$number] == $name[$number])\n        {\n            print \"$days[$number].\";\n            if ($mod == 0)\n            {\n            print \"Large cup of $beverages{$which}\";\n            }\n            else\n            {\n            print \"Small cup of $beverages{$which}\";\n            }\n        }\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl", "sed", "jq"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524552867, "post_id": 49995039, "comment_id": 87006607, "body": "Do your files really have one line each (or am I going blind)?"}, {"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524552975, "post_id": 49995039, "comment_id": 87006659, "body": "@zdim meaning? I didn&#39;t quite understand."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524553034, "post_id": 49995039, "comment_id": 87006700, "body": "By the description it appears that <code>primary.txt</code> can only have one line? Or are there multiple (many) lines, each with <code>1=[...]</code> where the numbers differ?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1524553037, "post_id": 49995039, "comment_id": 87006704, "body": "Do you have command line <code>jq</code> available?"}, {"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524553117, "post_id": 49995039, "comment_id": 87006759, "body": "@zdim Yes it will have one line. And each <code>clientid=[...]</code> will appear once in each file.. Meaning <code>clientid</code> will appear once in primary and secondary file."}, {"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1524553197, "post_id": 49995039, "comment_id": 87006800, "body": "@anubhava yeah I believe so I have jq available."}], "answers": [{"comments": [{"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1524555809, "post_id": 49995756, "comment_id": 87008407, "body": "I tried your suggestion but I am getting this error: <code>{&quot;text&quot;:&quot;for client id 1.&quot;,&quot;pri&quot;:,&quot;sec&quot;:} .&#47;test.sh: line 10: [0,273,546,819]: command not found {&quot;text&quot;:&quot;for client id 2.&quot;,&quot;pri&quot;:,&quot;sec&quot;:} .&#47;test.sh: line 10: [274,1,820]: command not found {&quot;text&quot;:&quot;for client id 3.&quot;,&quot;pri&quot;:,&quot;sec&quot;:} .&#47;test.sh: line 10: [1016,275,821]: command not found</code>"}, {"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1524556171, "post_id": 49995756, "comment_id": 87008636, "body": "Here is what I get <code>&quot;1&quot; &quot;2&quot; &quot;3&quot;</code>. Each line has <code>&quot;1&quot;, &quot;2&quot; and &quot;3&quot;</code>"}, {"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 1, "creation_date": 1524556538, "post_id": 49995756, "comment_id": 87008862, "body": "aah I see. let me try.. there is one spelling mistake <code>secondart</code>."}, {"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1524556802, "post_id": 49995756, "comment_id": 87009007, "body": "There is one more thing. Is there any way to have one space between each number in an array? I mean something like this: <code>[0, 273, 546, 819]</code> instead of like this <code>[0,273,546,819]</code>? Is this possible to do?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1524590795, "post_id": 49995756, "comment_id": 87031640, "body": "I really don&#39;t know why my working answer was downvoted"}, {"owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 1, "creation_date": 1524624953, "post_id": 49995756, "comment_id": 87043075, "body": "Presumably because the requirements specify cardinals (&quot;one&quot;, &quot;two&quot;) rather than numerals. Or perhaps because of the multiple invocations of jq."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 0, "last_activity_date": 1524557288, "last_edit_date": 1524557288, "creation_date": 1524554913, "answer_id": 49995756, "question_id": 49995039, "link": "https://stackoverflow.com/questions/49995039/extract-primary-and-secondary-numbers-for-each-id-and-make-a-json-string/49995756#49995756", "title": "Extract primary and secondary numbers for each ID and make a JSON string", "body": "<p>You can use following script in <code>bash</code> with the help of <code>jq</code>:</p>\n\n<pre><code>#!/usr/bin/env bash\n\n# convert both files to valid JSON data\nsed -E 's/([[:alnum:]_]+)=/\"\\1\":/g' primary.txt &gt; _pri.txt\nsed -E 's/([[:alnum:]_]+)=/\"\\1\":/g' secondary.txt &gt; _sec.txt\n\n# loop through keys from primary and extract values from both files\nwhile read k; do\n   printf '{\"text\":\"for client id %s.\",\"pri\":%s,\"sec\":%s}\\n' \"${k//\\\"/}\" \\\n      \"$(jq -c \".$k\" _pri.txt | sed 's/,/&amp; /g')\" \\\n      \"$(jq -c \".$k\" _sec.txt | sed 's/,/&amp; /g')\"\ndone &lt; &lt;(jq 'keys[]' _pri.txt)\n\n# cleanup\nrm -f _pri.txt _sec.txt\n</code></pre>\n\n<p></p>\n\n<pre><code>{\"text\":\"for client id 1.\",\"pri\":[0, 273, 546, 819],\"sec\":[342, 1102, 608, 684]}\n{\"text\":\"for client id 2.\",\"pri\":[274, 1, 820],\"sec\":[115, 191, 837, 1559]}\n{\"text\":\"for client id 3.\",\"pri\":[1016, 275, 821],\"sec\":[1256, 116]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1524555933, "post_id": 49995801, "comment_id": 87008487, "body": "Do I need to install any module for this? I am working with Ubuntu btw."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1524559374, "post_id": 49995801, "comment_id": 87010515, "body": "@user1950349  Perhaps <a href=\"http://search.cpan.org/~mlehmann/JSON-XS-3.02/XS.pm\" rel=\"nofollow noreferrer\">JSON::XS</a>, which is good to have, but if you don&#39;t want to just use <code>use JSON;</code> and it should work as it stands.  See the beginning of documentation for the module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524575361, "post_id": 49995801, "comment_id": 87021206, "body": "@zdim: <code>JSON</code> isn&#39;t a core module either."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1524599433, "post_id": 49995801, "comment_id": 87036131, "body": "@user1950349  To clarify, following Borodin&#39;s clue: if you say <code>use JSON;</code> (and later <code>JSON-&gt;new</code>) then <code>JSON::XS</code> is used if installed, otherwise <code>JSON::PP</code> gets used, a &quot;pure-perl&quot; implementation which I think normally gets installed with Perl (but I can&#39;t find it listed as a core module <a href=\"https://perldoc.perl.org/index-modules-P.html\" rel=\"nofollow noreferrer\">on perldoc</a>).  The <code>JSON::XS</code> is preferred, firstly for its speed, but it does require compilation when it&#39;s installed as it&#39;s written in C (&quot;::XS&quot;). Another option is <a href=\"http://search.cpan.org/~rurban/Cpanel-JSON-XS-3.0107/XS.pm\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "edited": false, "score": 0, "creation_date": 1525671561, "post_id": 49995801, "comment_id": 87432196, "body": "@user1950349  Added a little to the answer, some of which may be useful"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1536903596, "last_edit_date": 1536903596, "creation_date": 1524555046, "answer_id": 49995801, "question_id": 49995039, "link": "https://stackoverflow.com/questions/49995039/extract-primary-and-secondary-numbers-for-each-id-and-make-a-json-string/49995801#49995801", "title": "Extract primary and secondary numbers for each ID and make a JSON string", "body": "<p>With Perl.  Data is extracted using regex, into a hash clientid => string with numbers.  Then the value is overwritten by an arrayref obtained by splitting that string. Then the two such hashes are combined into a hashref, that is converted into JSON using <a href=\"http://search.cpan.org/~mlehmann/JSON-XS-3.02/XS.pm\" rel=\"nofollow noreferrer\">JSON::XS</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse JSON::XS;\n\nmy ($f1, $f2) = ('primary.txt', 'secondary.txt');\n\nopen my $fh, '&lt;', $f1 or die \"Can't open $f1: $!\";\nmy %h1 = &lt;$fh&gt; =~ /(\\d+)=\\[(.*?)\\]/g;\n$h1{$_} = [ split /,\\s*/, $h1{$_} ]  for keys %h1; \n\nopen $fh, '&lt;', $f2 or die \"Can't open $f2: $!\";\nmy %h2 = &lt;$fh&gt; =~ /(\\d+)=\\[(.*?)\\]/g;\n$h2{$_} = [ split /,\\s*/, $h2{$_} ]  for keys %h2; \nclose $fh;\n\nmy %client_id = ( 1 =&gt; 'one', 2 =&gt; 'two', 3 =&gt; 'three' );\n\nfor (keys %client_id) {\n    my $for_json = {\n        \"text\" =&gt; \"for client id $client_id{$_}.\",\n        \"pri\" =&gt; $h1{$_},\n        \"sec\" =&gt; $h2{$_},\n    };\n    my $coder = JSON::XS-&gt;new;\n    my $json = $coder-&gt;encode($for_json);\n    say $json;\n}\n</code></pre>\n\n<hr>\n\n<p>If processing of both is indeed always the same put it in a subroutine</p>\n\n<pre><code>my ($f1, $f2) = ('primary.txt', 'secondary.txt');\n\nmy %h1 = %{ clientID_nums($f1) };\nmy %h2 = %{ clientID_nums($f2) };\n\n...\n\nsub clientID_nums {\n    my ($file) = @_; \n\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    my %h = &lt;$fh&gt; =~ /(\\d+)=\\[(.*?)\\]/g;\n    $h{$_} = [ split /,\\s*/, $h{$_} ]  for keys %h; \n\n    return \\%h;\n}\n</code></pre>\n\n<p>To literally just generate (and print) the JSON string</p>\n\n<pre><code>say JSON::XS-&gt;new-&gt;encode($for_json);\n</code></pre>\n\n<p>or, rather, using the module's functional interface</p>\n\n<pre><code>say encode_json $for_json;\n</code></pre>\n\n<p>where <code>encode_json</code> is exported by default (and expects and emits UTF-8).</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1524564501, "post_id": 49996163, "comment_id": 87013821, "body": "The data in the input files isn&#39;t valid JSON. This program won&#39;t work. <i>Please  test</i> your solutions before posting."}, {"owner": {"reputation": 1, "user_id": 9346959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyDTl.png?s=128&g=1", "display_name": "George Bouras", "link": "https://stackoverflow.com/users/9346959/george-bouras"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524572069, "post_id": 49996163, "comment_id": 87018764, "body": "Think before reply"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524573465, "post_id": 49996163, "comment_id": 87019775, "body": "I don&#39;t understand you. I have thought, and I have tested your code, which produces the error <b><i>&#39;&quot;&#39;expected, at character offset 1 (before &quot;1=[342, 1102, 608, 6...&quot;)</i></b> when fed the data in the OP&#39;s question."}], "tags": [], "owner": {"reputation": 1, "user_id": 9346959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyDTl.png?s=128&g=1", "display_name": "George Bouras", "link": "https://stackoverflow.com/users/9346959/george-bouras"}, "is_accepted": false, "score": -3, "last_activity_date": 1524572373, "last_edit_date": 1524572373, "creation_date": 1524556209, "answer_id": 49996163, "question_id": 49995039, "link": "https://stackoverflow.com/questions/49995039/extract-primary-and-secondary-numbers-for-each-id-and-make-a-json-string/49996163#49996163", "title": "Extract primary and secondary numbers for each ID and make a JSON string", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse JSON;\n\nmy %hash;\n\nforeach ('primary.txt', 'secondary.txt') {\nopen FILE, '&lt;', $_ or die \"Could not read file $_ because $!\\n\";\nlocal $/ = undef;\n$hash{$_} = decode_json &lt;FILE&gt;;\nclose FILE\n}\n\nforeach (sort keys %{ $hash{'secondary.txt'}}) {\nnext unless\n    (exists $hash{'primary.txt'}-&gt;{$_}) &amp;&amp;\n    ('ARRAY' eq ref $hash{'primary.txt'}-&gt;{$_});\n\nprint \"{\\\"text\\\":\\\"client id $_.\\\",\\\"pri\\\":[\".   join(',',@{$hash{'primary.txt'}-&gt;{$_}})  .\"],\\\"sec\\\":[\". join(',',@{$hash{'primary.txt'}-&gt;{$_}}) .\"]}\\n\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1524575225, "creation_date": 1524575225, "answer_id": 50002508, "question_id": 49995039, "link": "https://stackoverflow.com/questions/49995039/extract-primary-and-secondary-numbers-for-each-id-and-make-a-json-string/50002508#50002508", "title": "Extract primary and secondary numbers for each ID and make a JSON string", "body": "<p></p>\n\n<p>Here's an alternative Perl solution. It uses the non-core \n<a href=\"https://metacpan.org/pod/Lingua::EN::Numbers\" rel=\"nofollow noreferrer\"><code>Lingua::EN::Numbers</code></a> module\nto convert from binary to English numbers. If you would rather not install this module then you can either use a simple array or keep the numbers as decimal digits</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nuse JSON 'to_json';\nuse Lingua::EN::Numbers 'num2en';\n\nmy %data;\n\nfor my $file ( qw/ primary.txt secondary.txt / ) {\n\n    open my $fh, '&lt;', $file;\n    local $/;\n\n    for my $item ( split /\\]\\s*,/, &lt;$fh&gt; ) {\n        my ( $key, @values ) = $item =~ /\\d+/g;\n        push @{ $data{$key} }, \\@values;\n    }\n}\n\nfor my $n ( sort { $a &lt;=&gt; $b } keys %data ) {\n\n    my $num = num2en($n);\n\n    my %json = (\n        text =&gt; \"for client id $num\",\n        pri  =&gt; $data{$n}[0],\n        sec  =&gt; $data{$n}[1],\n    );\n\n    print to_json( \\%json, { canonical =&gt; 1 } ), \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\"pri\":[\"342\",\"1102\",\"608\",\"684\"],\"sec\":[\"342\",\"1102\",\"608\",\"684\"],\"text\":\"for client id one\"}\n{\"pri\":[\"115\",\"191\",\"837\",\"1559\"],\"sec\":[\"115\",\"191\",\"837\",\"1559\"],\"text\":\"for client id two\"}\n{\"pri\":[\"1256\",\"116\"],\"sec\":[\"1256\",\"116\"],\"text\":\"for client id three\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 1, "last_activity_date": 1524638957, "last_edit_date": 1524638957, "creation_date": 1524580715, "answer_id": 50004420, "question_id": 49995039, "link": "https://stackoverflow.com/questions/49995039/extract-primary-and-secondary-numbers-for-each-id-and-make-a-json-string/50004420#50004420", "title": "Extract primary and secondary numbers for each ID and make a JSON string", "body": "<p>Here are two solutions which, once the primary.txt and secondary.txt files have been converted to JSON, each require just one invocation of jq.</p>\n\n<p>For the conversion to JSON, I'll assume that \"=\" can naively be changed to \":\" -- this assumption makes it trivial to use <code>tr</code> or <code>sed</code>; I'll then use  <a href=\"https://www.npmjs.com/package/any-json\" rel=\"nofollow noreferrer\"><code>any-json</code></a> to complete the conversion, and to tie everything together, I'll use <code>bash</code>, but there are many alternatives, notably <a href=\"http://hjson.org/users.html\" rel=\"nofollow noreferrer\"><code>hjson</code></a> as an alternative to <code>any-json</code>.</p>\n\n<p>For the strings of cardinals, the first solution assumes a suitable JSON array is available, and for the sake of illustration, I'll assume this is available as a file: cardinals.json (as shown below).  The generic solution assumes that \"AP-style\" numbers would be acceptable.</p>\n\n<pre><code>#!/bin/bash\n\nfor f in primary secondary ; do\n      any-json --input-format=hjson &lt;(sed 's/=/:/g' $f.txt) &gt; $f.json\n      # ALTERNATIVELY: sed 's/=/:/g' $f.txt | hjson -j &gt; $f.json \ndone\n\njq -s --argfile ids cardinals.json '.[0] as $p | .[1] as $s\n   | range(0; $ids|length) as $ix\n   | ($ix+1|tostring) as $i\n   | select($p | has($i) )\n   | {\"text\": (\"for client \" + $ids[$ix] + \".\"),\n      \"pri\": $p[$i],\n      \"sec\": $s[$i] }\n' primary.json secondary.json\n</code></pre>\n\n<h2>Generic solution</h2>\n\n<p>This generic solution assumes that AP-style (Associated Press) numbers are acceptable.  It allows the keys in primary.txt to be any strings whatsoever.</p>\n\n<pre><code>jq -s --argfile ids cardinals.json '\n    def apnumber:\n      (tonumber? // null) as $i\n      | if $i and $i &gt;= 0 and $i &lt; 10                             \n        then [\"zero\", \"one\", \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\"][$i]\n        else .\n        end;\n\n   .[0] as $p | .[1] as $s\n   | ($p|keys_unsorted[]) as $i\n   | {\"text\": (\"for client \" + ($i|apnumber) + \".\"),\n      \"pri\": $p[$i],\n      \"sec\": $s[$i] }\n' primary.json secondary.json\n</code></pre>\n\n<h3>cardinals.json</h3>\n\n<p>Here is the output of:</p>\n\n<pre><code>ruby -e 'require \"humanize\"; 1.upto(30){|i| p i.humanize}' | jq -s\n</code></pre>\n\n<hr>\n\n<pre><code>[\n  \"one\",\n  \"two\",\n  \"three\",\n  \"four\",\n  \"five\",\n  \"six\",\n  \"seven\",\n  \"eight\",\n  \"nine\",\n  \"ten\",\n  \"eleven\",\n  \"twelve\",\n  \"thirteen\",\n  \"fourteen\",\n  \"fifteen\",\n  \"sixteen\",\n  \"seventeen\",\n  \"eighteen\",\n  \"nineteen\",\n  \"twenty\",\n  \"twenty-one\",\n  \"twenty-two\",\n  \"twenty-three\",\n  \"twenty-four\",\n  \"twenty-five\",\n  \"twenty-six\",\n  \"twenty-seven\",\n  \"twenty-eight\",\n  \"twenty-nine\",\n  \"thirty\"\n]\n</code></pre>\n"}], "owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 49995756, "answer_count": 5, "score": 2, "last_activity_date": 1536903596, "creation_date": 1524552349, "last_edit_date": 1524565205, "question_id": 49995039, "link": "https://stackoverflow.com/questions/49995039/extract-primary-and-secondary-numbers-for-each-id-and-make-a-json-string", "title": "Extract primary and secondary numbers for each ID and make a JSON string", "body": "<p>I have two files as shown below: In general I will have more than three client IDs and primary and secondary numbers for each ID will be around 50-60.</p>\n\n<h3>primary.txt</h3>\n\n<pre><code>{1=[0, 273, 546, 819], 2=[274, 1, 820], 3=[1016, 275, 821]}\n</code></pre>\n\n<p>This means client ID <code>1</code> has primary numbers <code>[0, 273, 546, 819]</code>. Similarly for other IDs.</p>\n\n<h3>secondary.txt</h3>\n\n<pre><code>{1=[342, 1102, 608, 684], 2=[115, 191, 837, 1559], 3=[1256, 116]}\n</code></pre>\n\n<p>This means client ID <code>1</code> has secondary numbers <code>[342, 1102, 608, 684]</code>. Similarly for other IDs.</p>\n\n<p>I need to read these two files, combine primary and secondary numbers for each ID, and make a JSON string like this for each ID.</p>\n\n<h3>For clientid 1</h3>\n\n<pre><code>{\"text\":\"for client id one.\",\"pri\":[0, 273, 546, 819],\"sec\":[342, 1102, 608, 684]}\n</code></pre>\n\n<h3>For client ID 2</h3>\n\n<pre><code>{\"text\":\"for client id two.\",\"pri\":[274, 1, 820],\"sec\":[115, 191, 837, 1559]}\n</code></pre>\n\n<h3>For client ID 3</h3>\n\n<pre><code>{\"text\":\"for client id three.\",\"pri\":[1016, 275, 821],\"sec\":[1256, 116]}\n</code></pre>\n\n<p>Is it possible to do this in shell script or Perl? I just want to print it out on the console. Below is what I have tried but I'm unable to figure out how to make proper JSON for each client ID.</p>\n\n<pre><code>for n in {1..3}\ndo\n  echo \"$n:\"\n  for f in primary.txt secondary.txt\n  do\n    sed -r \"s/.*\\b$n=\\[([^]\\]+).*/\\1/\" $f\n  done\necho\ndone\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524539312, "post_id": 49992600, "comment_id": 87002149, "body": "So what is the problem with yet another attribute? If you&#39;re OK with <code>Name</code> and <code>PrimaryConn..</code> what is wrong with <code>SecondaryConn..</code>?  (And, by what criteria do you decide which goes where?)"}, {"owner": {"reputation": 361, "user_id": 2880337, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7434f0ccc046aee819361bfcf7c1ec98?s=128&d=identicon&r=PG&f=1", "display_name": "CraigP", "link": "https://stackoverflow.com/users/2880337/craigp"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524576766, "post_id": 49992600, "comment_id": 87022287, "body": "zdim - thank you for your attention... the criteria is the attribute values.  When I walk the DOM, the top parent node contains a child node with an attribute - an attribute that is needed as criteria, but since the parent node is processed first (which contains a child node with an attribute), I end up processing the parent node without processing the child node yet.  I won&#39;t be able to process the child node with attribute until I&#39;ve already processed the parent node, which then will be too late."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 2880337, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7434f0ccc046aee819361bfcf7c1ec98?s=128&d=identicon&r=PG&f=1", "display_name": "CraigP", "link": "https://stackoverflow.com/users/2880337/craigp"}, "edited": false, "score": 0, "creation_date": 1524576017, "post_id": 49999813, "comment_id": 87021720, "body": "Kjetil S. -   I thank you for the response ... although I understand exactly what you are suggesting, I&#39;m a little hung-up on your line:      s{ (\\s*) &lt;(\\w+)\\s* ([^&gt;]*?) string=&quot;(\\w+)&quot; (.*?&lt;/\\2&gt;) }         { $4 eq $s ? &quot;$1&lt;$2$3$5&quot; : &quot;&quot;                        }grsex;   I can&#39;t seem to use the &quot;r&quot; modifier (i.e., can only use &quot;gsex&quot;).  But with that said, when I attempt to debug this stmt by printing the 1st capture group $1, I&#39;m getting empty value."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 361, "user_id": 2880337, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7434f0ccc046aee819361bfcf7c1ec98?s=128&d=identicon&r=PG&f=1", "display_name": "CraigP", "link": "https://stackoverflow.com/users/2880337/craigp"}, "edited": false, "score": 0, "creation_date": 1524578238, "post_id": 49999813, "comment_id": 87023358, "body": "@CraigP Aha, the <code>&#47;r</code> modifier needs Perl version &gt;= 5.14 (from 2011). I have rewritten my answer to not use <code>&#47;r</code> now. The <code>$1</code> can be empty or it can contain <code>\\s</code> chars, that is spaces, tabs, newlines and such."}, {"owner": {"reputation": 361, "user_id": 2880337, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7434f0ccc046aee819361bfcf7c1ec98?s=128&d=identicon&r=PG&f=1", "display_name": "CraigP", "link": "https://stackoverflow.com/users/2880337/craigp"}, "edited": false, "score": 0, "creation_date": 1524578754, "post_id": 49999813, "comment_id": 87023758, "body": "The /r non-destructive option is not available until  v5.14, I&#39;m running v5.10.1"}, {"owner": {"reputation": 361, "user_id": 2880337, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7434f0ccc046aee819361bfcf7c1ec98?s=128&d=identicon&r=PG&f=1", "display_name": "CraigP", "link": "https://stackoverflow.com/users/2880337/craigp"}, "edited": false, "score": 0, "creation_date": 1524583154, "post_id": 49999813, "comment_id": 87027000, "body": "I never used the &quot;e&quot; &#39;evaluate the right-hand side as an expression&#39; modifier  - pretty cool ... you given me something I hopefully can work off of ...ty!"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": -2, "last_activity_date": 1524578127, "last_edit_date": 1524578127, "creation_date": 1524566989, "answer_id": 49999813, "question_id": 49992600, "link": "https://stackoverflow.com/questions/49992600/generate-two-seperate-xml-files-by-walking-dom-tree-and-using-attributes/49999813#49999813", "title": "Generate Two Seperate XML Files by Walking DOM Tree and Using Attributes", "body": "<p>It's not XML parsing like you wanted, but seems to work for your sample data. Tags with a <code>string=\"filename\"</code> attribute goes only into only that file (where filename is uppercased), with the <code>string</code> attribute removed. And all other tags goes into all files:</p>\n\n<pre><code>my $input=join\"\",&lt;DATA&gt;;\nmy @string=$input=~/ string=\"(\\w+)\"/g;\nfor my $s (@string){\n    my $output=$input;\n    $output=~\n      s{ (\\s*) &lt;(\\w+)\\s* ([^&gt;]*?) string=\"(\\w+)\" (.*?&lt;/\\2&gt;) }\n       { $4 eq $s ? \"$1&lt;$2$3$5\" : \"\"                        }gsex;\n    open my $FH, '&gt;', uc($s) or die;\n    print $FH $output;\n    close($FH)\n}\n__DATA__\n&lt;LocalJMS&gt;\n  &lt;Name&gt;ZLAT&lt;/Name&gt;\n  &lt;PrimaryConnection&gt;\n    &lt;Address string=\"ops\"&gt;ops.zla&lt;/Address&gt;\n    &lt;Address string=\"spt\"&gt;spt.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/PrimaryConnection&gt;\n  &lt;SecondaryConnection string=\"ops\"&gt;\n    &lt;Address&gt;abc.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/SecondaryConnection&gt;\n&lt;/LocalJMS&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ cat OPS \n&lt;LocalJMS&gt;\n  &lt;Name&gt;ZLAT&lt;/Name&gt;\n  &lt;PrimaryConnection&gt;\n    &lt;Address&gt;ops.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/PrimaryConnection&gt;\n  &lt;SecondaryConnection&gt;\n    &lt;Address&gt;abc.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/SecondaryConnection&gt;\n&lt;/LocalJMS&gt;\n\n$ cat SPT\n&lt;LocalJMS&gt;\n  &lt;Name&gt;ZLAT&lt;/Name&gt;\n  &lt;PrimaryConnection&gt;\n    &lt;Address&gt;spt.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/PrimaryConnection&gt;\n&lt;/LocalJMS&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1524577034, "creation_date": 1524577034, "answer_id": 50003119, "question_id": 49992600, "link": "https://stackoverflow.com/questions/49992600/generate-two-seperate-xml-files-by-walking-dom-tree-and-using-attributes/50003119#50003119", "title": "Generate Two Seperate XML Files by Walking DOM Tree and Using Attributes", "body": "<p>I suggest that you parse the original XML, and then for each value of the <code>string</code> attribute you can clone the whole document and remove all elements that have an attribute with any value for <code>string</code> different from the one required</p>\n\n<p>It would look like this. I am sure you're able to alter the output to something more appropriate if necessary</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml( location =&gt; 'sample.xml' );\n\nfor my $string ( qw/ ops spt / ) {\n\n    print \"\\$string = $string\\n\\n\";\n\n    my $copy = $dom-&gt;cloneNode(1);\n\n    for my $unwanted ( $copy-&gt;findnodes(\"//*[\\@string != '$string']\") ) {\n        my $parent = $unwanted-&gt;parentNode;\n        $parent-&gt;removeChild($unwanted);\n    }\n\n    print $copy, \"\\n\\n---\\n\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$string = ops\n\n&lt;?xml version=\"1.0\"?&gt;\n&lt;LocalJMS&gt;\n  &lt;Name&gt;ZLAT&lt;/Name&gt;\n  &lt;PrimaryConnection&gt;\n    &lt;Address string=\"ops\"&gt;ops.zla&lt;/Address&gt;\n\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/PrimaryConnection&gt;\n  &lt;SecondaryConnection string=\"ops\"&gt;\n    &lt;Address&gt;abc.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/SecondaryConnection&gt;\n&lt;/LocalJMS&gt;\n\n\n---\n\n$string = spt\n\n&lt;?xml version=\"1.0\"?&gt;\n&lt;LocalJMS&gt;\n  &lt;Name&gt;ZLAT&lt;/Name&gt;\n  &lt;PrimaryConnection&gt;\n\n    &lt;Address string=\"spt\"&gt;spt.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/PrimaryConnection&gt;\n\n&lt;/LocalJMS&gt;\n\n\n---\n\n[Finished in 0.8s]\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 2880337, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7434f0ccc046aee819361bfcf7c1ec98?s=128&d=identicon&r=PG&f=1", "display_name": "CraigP", "link": "https://stackoverflow.com/users/2880337/craigp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1528021254, "creation_date": 1524537194, "last_edit_date": 1528021254, "question_id": 49992600, "link": "https://stackoverflow.com/questions/49992600/generate-two-seperate-xml-files-by-walking-dom-tree-and-using-attributes", "title": "Generate Two Seperate XML Files by Walking DOM Tree and Using Attributes", "body": "<p>I need to segregate xml code into two separate files by using the optional attribute values. I prefer to use the XML::LibXML DOM methods, using Perl.</p>\n\n<pre><code>Sample XML code excerpt:\n...\n&lt;LocalJMS&gt;\n  &lt;Name&gt;ZLAT&lt;/Name&gt;\n  &lt;PrimaryConnection&gt;\n    &lt;Address string=\"ops\"&gt;ops.zla&lt;/Address&gt;\n    &lt;Address string=\"spt\"&gt;spt.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/PrimaryConnection&gt;\n  &lt;SecondaryConnection string=\"ops\"&gt;\n    &lt;Address&gt;abc.zla&lt;/Address&gt;\n    &lt;Port&gt;77777&lt;/Port&gt;\n  &lt;/SecondaryConnection&gt;\n&lt;/LocalJMS&gt;\n</code></pre>\n\n<p>The desirable resulting two final xml files would be:</p>\n\n<pre><code>1.) OPS file:\n...\n &lt;LocalJMS&gt;\n   &lt;Name&gt;ZLAT&lt;/Name&gt;\n   &lt;PrimaryConnection&gt;\n     &lt;Address&gt;ops.zla&lt;/Address&gt;\n     &lt;Port&gt;77777&lt;/Port&gt;\n   &lt;/PrimaryConnection&gt;\n   &lt;SecondaryConnection&gt;\n     &lt;Address&gt;abc.zla&lt;/Address&gt;\n     &lt;Port&gt;77777&lt;/Port&gt;\n   &lt;/SecondaryConnection&gt;\n &lt;/LocalJMS&gt;\n\n2.) SPT file:\n...\n &lt;LocalJMS&gt;\n   &lt;Name&gt;ZLAT&lt;/Name&gt;\n   &lt;PrimaryConnection&gt;\n     &lt;Address&gt;spt.zla&lt;/Address&gt;\n     &lt;Port&gt;77777&lt;/Port&gt;\n   &lt;/PrimaryConnection&gt;\n &lt;/LocalJMS&gt;\n</code></pre>\n\n<p>I have no problem/issue removing the attributes prior to generating the two final xml files, nor do I have any issue with making a decision on a element with an attribute that has no child elements - I can handle that as far pumping the xml content to the correct final xml file when I walk the DOM tree and checking on the childnodes. </p>\n\n<p>But the problem I'm encountering is when the attribute is defined within a child element (e.g. 'SecondaryConnection', which is a child of 'LocalJMS').\nIf I \"walk\" the DOM tree, I will first encounter the parent element 'LocalJMS', and I need some of it's children elements (e.g. 'Name', 'PrimaryConnection') to go to both final files, but then I only need the 'SecondaryConnection' element to go only to the OPS xml file (not the SPT file). [btw, the attribute is applicable to all child nodes, i.e. 'Address' &amp; 'Port']</p>\n\n<p>I'm looking for some ideas - maybe using parse_balanced_chunk or work from the deepest part of the originally xml file and work outwards, cycling thru each child node.  I hate like heck to have to use traditional grep patterns etc and treat the xml file like a simple text file - I was hoping to take advantage of the DOM methods.</p>\n"}, {"tags": ["arrays", "perl", "data-dumper"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 4, "creation_date": 1524525095, "post_id": 49991142, "comment_id": 86998922, "body": "<code>while(&lt;@userarray&gt;)</code> on an empty array looks problematic"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1524526042, "post_id": 49991142, "comment_id": 86999172, "body": "You need to assign <code>@userarray</code> <i>outside</i> the loop"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1524526120, "post_id": 49991142, "comment_id": 86999188, "body": "@MattJacob It&#39;s a split..no loop required at all, right?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1524526212, "post_id": 49991142, "comment_id": 86999209, "body": "@zzxyz Sure, but the OP implied that he/she wanted to iterate over each character individually for some reason. But I agree... the <code>split</code> only needs to be done once (and probably without obscuring the fact that the first parameter is a regex)"}, {"owner": {"reputation": 69, "user_id": 6132816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1848bbf8584c4cc3ab4ef9d2974d3?s=128&d=identicon&r=PG&f=1", "display_name": "masral", "link": "https://stackoverflow.com/users/6132816/masral"}, "edited": false, "score": 0, "creation_date": 1524526225, "post_id": 49991142, "comment_id": 86999212, "body": "I removed the loop, it works like a charm now"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1524555195, "post_id": 49991142, "comment_id": 87008039, "body": "Unicode text processing advice: splitting into individual characters is almost always not useful. <a href=\"http://p3rl.org/perlrebackslash.html#%5CX\" rel=\"nofollow noreferrer\">Split into graphemes instead</a>: <code>perl -Mutf8 -C -E&#39;say for split &#47;\\b{gcb}&#47;, &quot;cre\u0300me bru\u0302le\u0301e&quot;&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1524705764, "last_edit_date": 1524705764, "creation_date": 1524526422, "answer_id": 49991333, "question_id": 49991142, "link": "https://stackoverflow.com/questions/49991142/spliting-letters-from-an-input-into-an-array-in-perl/49991333#49991333", "title": "Spliting letters from an input into an array in perl", "body": "<p>This is a common Perl pattern. You want to loop so the user can enter more data. Try something like this:</p>\n\n<pre><code>print \"Input?\";\nwhile (my $userinput = &lt;STDIN&gt;) {\n  chomp $userinput; # remove trailing newline\n  my @userarray = split //, $userinput; \n  print Dumper(\\@userarray);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 4, "last_activity_date": 1524527324, "creation_date": 1524527324, "answer_id": 49991468, "question_id": 49991142, "link": "https://stackoverflow.com/questions/49991142/spliting-letters-from-an-input-into-an-array-in-perl/49991468#49991468", "title": "Spliting letters from an input into an array in perl", "body": "<p><code>&lt;D&gt;</code> reads and returns one (the next) record (that's a line if the record separator <code>$/</code> hasn't been changed) from the file handle <code>D</code> in scalar context. In list context all remaining records are returned (as an array).</p>\n\n<p>Said that, this section is the problem:</p>\n\n<pre><code>$userinput=&lt;STDIN&gt;;   # this block just gets input and creates the array\nmy @userarray=();\n\nwhile(&lt;@userarray&gt;) {\n@userarray = split('', $userinput);   #this block should loop as many times as there are characters in the input while separating the characters\n}\n</code></pre>\n\n<p><code>&lt;@userarray&gt;</code> returns nothing as <code>@userarray</code> sure isn't a valid file handle. So that loop is never entered.</p>\n\n<p>If you want the user to input only one line, don't use the loop at all. Read one line and split it.</p>\n\n<pre><code>$userinput=&lt;STDIN&gt;;   # this block just gets input and creates the array\nchomp($userinput);\nmy @userarray=();\n\n@userarray = split('', $userinput);\n</code></pre>\n\n<p>But that loop may indicate, that you want the user to be able to enter more than one line. If so, loop until there's no input left (EOF), reading the input line by line. Split the line and push the result into your array.</p>\n\n<pre><code>while(my $line = &lt;STDIN&gt;) {\n  chomp($line);\n  push(@userarray, split('', $line));\n  print(join(',', @userarray) . \"\\n\");\n}\n</code></pre>\n\n<p>For both ways: <code>chomp()</code> removes the trailing record separator (new line) at the end of the record (line). Don't use it, if you want to keep these. I assumed you don't.</p>\n"}], "owner": {"reputation": 69, "user_id": 6132816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1848bbf8584c4cc3ab4ef9d2974d3?s=128&d=identicon&r=PG&f=1", "display_name": "masral", "link": "https://stackoverflow.com/users/6132816/masral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 49991468, "answer_count": 2, "score": 0, "last_activity_date": 1524705764, "creation_date": 1524524934, "question_id": 49991142, "link": "https://stackoverflow.com/questions/49991142/spliting-letters-from-an-input-into-an-array-in-perl", "title": "Spliting letters from an input into an array in perl", "body": "<p>I'm working on a project where I need to take an input from the user and then cut it up into its individual characters for later use (to shift them up one character) but I'm having trouble getting the input into an array and printing it out to check that its in there. Currently my code is</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nmy $count=0;      # this block just creates variables\nmy $userinput;\n\nprint \"Input?\";      \n$userinput=&lt;STDIN&gt;;   # this block just gets input and creates the array\nmy @userarray=();\n\nwhile(&lt;@userarray&gt;) {\n@userarray = split('', $userinput);   #this block should loop as many times as there are characters in the input while separating the characters\n}\n\nprint Dumper(@userarray);   #this should print the array\n</code></pre>\n\n<p>My output should look some like this if their input is \"house\"</p>\n\n<pre><code>@userarray[0]= \"h\"\n@userarray[1]= \"o\"\n@userarray[2]= \"u\"\n@userarray[3]= \"s\"\n@userarray[4]= \"e\"\n</code></pre>\n\n<p>But when I do enter something in it just print back a blank screen despite strict and warnings not coming back with anything. Where did I go wrong?</p>\n"}, {"tags": ["c#", "regex", "visual-studio", "perl"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1524510435, "post_id": 49988236, "comment_id": 86992801, "body": "I&#39;m all ears if there&#39;s something unclear in this question.  I&#39;ve tried to be as specific as possible."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1524510450, "post_id": 49988236, "comment_id": 86992806, "body": "<i>Some people, when confronted with a problem, think &quot;I know, I&#39;ll use regular expressions.&quot; Now they have two problems.</i> -- Jamie Zawinski (attributed)"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1524510528, "post_id": 49988236, "comment_id": 86992859, "body": "The problem here is that regex is completely the wrong tool for this task.  You need a real parser, and regex will never be able to handle all possible cases.  Even if you get it to work, it will break on other input and the person who has to maintain it, if they have any experience, will throw it out and replace it with a parser anyway."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1524510601, "post_id": 49988236, "comment_id": 86992900, "body": "@JimGarrison - This is a one-shot deal.  No maintenance required.  I&#39;d obviously prefer a static analysis solution that parses C, but I&#39;m unaware of one that could detect this particular issue."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1524510761, "post_id": 49988236, "comment_id": 86992993, "body": "What do you mean by &quot;one-shot&quot;.  If it&#39;s truly &quot;one-shot&quot; it should be a manual operation.  If you need to apply it to multiple source files then it&#39;s not &quot;one-shot&quot;.  Sounds like you&#39;re trying to refactor some code.  Do none of the IDE refactoring features work for you? Have you tried Eclipse, IntelliJ, NetBeans?  The amount of time you spend getting regex to work (if that&#39;s even possible) could be spend just doing the work manually or finding a refactoring platform that does what you need."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1524510861, "post_id": 49988236, "comment_id": 86993061, "body": "I need to search 600,000 lines of code.  I do not need to refactor.  I need to <i>detect</i>.  Visual Studio is the IDE I have available and does not have a &quot;detect use of a variable declared outside of a loop inside a loop&quot; feature."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1524510885, "post_id": 49988236, "comment_id": 86993077, "body": "Another thought.  You don&#39;t need a full parser, just one capable of finding what you need.  Don&#39;t do it with a single regex, write Perl code to parse a line at a time, which should be MUCH easier."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524511062, "post_id": 49988236, "comment_id": 86993176, "body": "It&#39;s not clear what you are trying to do. Should match start from that specific name and end within a loop right after matching it?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524511190, "post_id": 49988236, "comment_id": 86993255, "body": "@revo - The end goal is to detect declaration of a specific variable type outside of a loop, and then detect specific use of that variable within a following loop.  This is <i>likely</i> to cause a leak that static analysis won&#39;t detect.  Run-time detection is easy, but I need static detection."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524511526, "post_id": 49988236, "comment_id": 86993443, "body": "What if you change atomic group to <code>(?&gt;(?!\\1)[^{}]|(?-1))*</code> <a href=\"https://regex101.com/r/0JxFyM/1\" rel=\"nofollow noreferrer\">regex101.com/r/0JxFyM/1</a>?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524511942, "post_id": 49988236, "comment_id": 86993692, "body": "@revo - Nailed it.  I just tacked on <code>\\1</code> to the very end to make sure that&#39;s why the recursion exited.  Post as answer and I will accept.  Thank you!"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 2, "creation_date": 1524513585, "post_id": 49988236, "comment_id": 86994515, "body": "You&#39;d better avoid using greedy dot quantifiers wherever it is possible. Compare this <a href=\"https://regex101.com/r/fxWtAF/2\" rel=\"nofollow noreferrer\">regex101.com/r/fxWtAF/2</a> to yours."}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1524516401, "post_id": 49988818, "comment_id": 86995820, "body": "Thanks much.  I, unsurprisingly, got a lot of false positives, but I got a manageable set of results (a hundred or so), and found 2 resource leaks as a result.  Hardly the ideal way to detect them, but it worked :)"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1524516653, "post_id": 49988818, "comment_id": 86995933, "body": "My pleasure. That&#39;s normal. You have to spot more cases to apply more strict rules which we can&#39;t consider by some random guesses."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 5, "last_activity_date": 1524512565, "creation_date": 1524512565, "answer_id": 49988818, "question_id": 49988236, "link": "https://stackoverflow.com/questions/49988236/searching-for-specific-text-inside-balanced-chars-recursive/49988818#49988818", "title": "Searching for specific text inside balanced chars (recursive", "body": "<p>You have three options to look if matched variable name exists in following loop or not. First one is adding <code>(\\1)</code> to atomic group and check existence of this capturing group within your environment (if it's possible):</p>\n\n<pre><code>(?&gt;(\\1)|[^{}]|(?-2))*\n</code></pre>\n\n<p>Second, you could temper the matching process of <code>[^{}]</code> by using a negative lookahead:</p>\n\n<pre><code>(?&gt;(?!\\1)[^{}]|(?-1))*\n</code></pre>\n\n<p>but it fails if you don't make closing brace optional as I did in demo provided in comments.</p>\n\n<p>Third and better work around is using verb <code>(*ACCEPT)</code> which causes the end of a successful match immediately without making further changes in regex:</p>\n\n<pre><code>(?&gt;(\\1)(*ACCEPT)|[^{}]|(?-2))*\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/fxWtAF/1\" rel=\"noreferrer\">Live demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525207204, "post_id": 50122293, "comment_id": 87265118, "body": "This answer is going to take me a bit to process.  I think the <i>key</i> feature you added was detecting multiple instances of variable usage within the loop, which I actually didn&#39;t need (my apologies, because my question did not make that clear).  I actually used the negative lookahead <code>\\1</code> within the recursion followed by matching <code>\\1</code> after which seemed to work in terms of guaranteeing the variable was used in the loop.  <i>However</i>, the nested negative lookahead did not work in my solution (for <code>++</code> and <code>-&gt;</code>) resulting in many false positives."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525207232, "post_id": 50122293, "comment_id": 87265132, "body": "Very curious to try this out next time I run into a similar problems. I didn&#39;t even know it was possible to embed code in regexes :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1525201639, "last_edit_date": 1525201639, "creation_date": 1525201332, "answer_id": 50122293, "question_id": 49988236, "link": "https://stackoverflow.com/questions/49988236/searching-for-specific-text-inside-balanced-chars-recursive/50122293#50122293", "title": "Searching for specific text inside balanced chars (recursive", "body": "<p>To do this with a single regex requires the use of Perl code block<br>\nand a code conditional.   </p>\n\n<p>While the accepted answer is nice, it cannot validate the Type variable<br>\nwill exist inside the balanced loops.  </p>\n\n<p>This code here just stores the position of the Type variable as it is<br>\nfound inside all the nested loops. It doesn't miss any of them.  </p>\n\n<p>As an example, I've seeded the data set with multiple locations in some<br>\nloops, single location in others and none in another.  </p>\n\n<p>Beyond the position's in the string, how you go about locating is up to you.  </p>\n\n<p>Perl  </p>\n\n<pre><code>use strict;\nuse warnings;\n\n$/ = undef;\nmy $data = &lt;DATA&gt;;\n\nmy @vals;\n\nwhile ( $data =~ /\n\n          (?{ @vals = () })             # Code block - Initialize @vals\n\n          Type .* &lt; .* &gt; \\s* \n          ( \\w+ )                       # (1)\n          [^}]*? \n          (?: while | for )\n          \\s* \\( .*? \n          (?: \\r? \\n )?\n          .*? \n\n          (?&lt;core&gt;                      # (2 start)\n               \\{\n               (?&gt;\n                    (?&lt;! \\+\\+ )\n                    ( \\1 )                        # (3)\n                    (?! -&gt; | \\+\\+ )\n                    (?{\n                         # Code block - Push capture position onto @vals\n                         push (@vals, pos());\n                    })\n                 |  [^{}] \n                 |  (?&amp;core) \n               )*\n               \\}\n          )                             # (2 end)\n\n          (?(?{\n               # Code conditional - Fail this block (bypass) if didn't find any\n               @vals == 0\n            })\n               (*SKIP) (*FAIL) \n          )\n     /xg )\n{\n    print \"\\nfound   '$1'   at pos:   \";\n    for ( @vals )\n    {\n        print $_ , \",  \";\n    }\n}\n\n__DATA__\n\n\nReturn_t\nfunc()\n{\n  Type&lt;SubType&gt; cursorFeature(true);\n\n  while (nDist &lt; 800)\n  {\n    Result1 = Example(&amp;var, 0, cursorFeature);  \n    if (!(++cursorFeature).NoMoreRecords())\n    {\n      if (!BLAH(blah)\n        &amp;&amp; (otherFunc(&amp;var, &amp;cursorFeature-&gt;derefenced, MACRO) != 0))\n      {\n        bIsChanged = true;\n        Result2 = Example(&amp;var, 0, cursorFeature);  \n        break;\n      }\n      else\n        Result3 = Example(&amp;var, 0, cursorFeature);  \n\n      memcpy(&amp;var, &amp;cursorFeature-&gt;dereferenced, sizeof(anotherType_t));\n    }\n  }\n\n  //more stuff\n  }\n\n// ---------------------------------\n\nReturn_t\nfunc()\n{\n  Type&lt;SubType&gt; globeFeature(true);\n\n  while (nDist &lt; 800)\n  {\n    if (!(++globeFeature).NoMoreRecords())\n    {\n      if (!BLAH(blah)\n        &amp;&amp; (otherFunc(&amp;var, &amp;penFeature-&gt;derefenced, MACRO) != 0))\n      {\n        bIsChanged = true;\n        break;\n      }\n      else\n      memcpy(&amp;var, &amp;globeFeature-&gt;dereferenced, sizeof(anotherType_t));\n    }\n  }\n  }\n} \n\n// ---------------------------------\n\nReturn_t\nfunc()\n{\n  Type&lt;SubType&gt; penFeature(true);\n\n  while (nDist &lt; 800)\n  {\n    if (!(++penFeature).NoMoreRecords())\n    {\n      if (!BLAH(blah)\n        &amp;&amp; (otherFunc(&amp;var, &amp;penFeature-&gt;derefenced, MACRO) != 0))\n      {\n        bIsChanged = true;\n        Result = Example(&amp;var, 0, penFeature);  \n        break;\n      }\n      else\n      memcpy(&amp;var, &amp;penFeature-&gt;dereferenced, sizeof(anotherType_t));\n    }\n  }\n  }\n} \n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>found   'cursorFeature'   at pos:   148,  378,  465,\nfound   'penFeature'   at pos:   1323,\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1525283443, "post_id": 50140019, "comment_id": 87299642, "body": "That works beautifully.  Easier to test quickly than the perl one since that one requires a bit (not much) of refactoring to deal with a <code>find | xargs</code> or <code>git ls-files | xargs</code> pipe."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525283642, "post_id": 50140019, "comment_id": 87299756, "body": "@zzxyz - I use VS2015 ide and I&#39;ve never had the need to use the dot-net regex in searches.  I&#39;d be interested to see what the output does when it has to span lines."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525285008, "post_id": 50140019, "comment_id": 87300403, "body": "I wish the search history in VS went back further so I could share some I&#39;ve done.  One reason I tend to start with perl and then sometimes switch over (I can find it that way if I really need to).  I&#39;ve actually done some crazy search and replaces.  But I&#39;m a little confused by &quot;interested to see&quot;.  Did you not test this?  Or did you test it in C#?  Anyway, the IDE just highlights/selects the whole match."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525285645, "post_id": 50140019, "comment_id": 87300687, "body": "@zzxyz - This regex I tested pretty good at the online Dot-Net tester <i>regexstorm.com</i>.  I could test in C# but I&#39;m sure it works there. The VS ide though usually output&#39;s 1 liners in the output window (a clistctrl or clistbox actually) that when you double click on takes you to the <i>line</i> in the file. I was just wondering if when a single match block that spanned lines, all the lines are in the output window. Each match is usually prefaced with the file and line info. I&#39;ll try it next time I&#39;m altering my commercial code (ugly MFC)."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525286052, "post_id": 50140019, "comment_id": 87300896, "body": "Oh, gotcha...and you&#39;d already said that.  Yeah, &quot;Find All&quot; just drops you into the line that started the match and <i>doesn&#39;t</i> highlight when you double click.  &quot;Find Next&quot; actually works better for searches like this"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525300310, "post_id": 50140019, "comment_id": 87307180, "body": "clarification -- the unspoken part of &quot;you&#39;d already said that&quot; was &quot;and I forgot and asked you again&quot;.  Communication is hard."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1525282732, "last_edit_date": 1525282732, "creation_date": 1525280751, "answer_id": 50140019, "question_id": 49988236, "link": "https://stackoverflow.com/questions/49988236/searching-for-specific-text-inside-balanced-chars-recursive/50140019#50140019", "title": "Searching for specific text inside balanced chars (recursive", "body": "<blockquote>\n  <p>My goal is to somehow combine these, preferably into ONE regex (I'd like to be able to do this search from within VS as well, if possible). </p>\n</blockquote>\n\n<p>Here is a way to do it in the VisualStudio IDE using <em>Dot-Net</em> regex.  </p>\n\n<p>This will <em>not</em> produce false positives.<br>\nI think VS will span lines in the output window which will enable you to<br>\nview the blocks within the code, and across thousands of files if necessary.  </p>\n\n<p>I've tested this at <a href=\"http://regexstorm.net/tester\" rel=\"nofollow noreferrer\">http://regexstorm.net/tester</a> and it works great.<br>\nCouldn't create the permalink, it said it's too long..  </p>\n\n<p>But you can try it yourself at regexstorm.  </p>\n\n<p><em>(If you were to use this in a C# assembly you could get all (multiple ) the <code>Vars</code><br>\n found in a Loop from the capture collection:  <code>CaptureCollection cc = Match.Groups[\"Vars\"].Captures;</code><br>\nThen iterate through the cc.)</em></p>\n\n<p>This is it compressed  </p>\n\n<p><code>Type.*&lt;.*&gt;\\s*(\\w+(?!\\w))[^}]*?(?:while|for)\\s*\\(.*?(?:\\r?\\n)?.*?(?&gt;\\{(?&gt;(?&lt;!\\+\\+)(?&lt;Vars&gt;\\1)(?!-&gt;|\\+\\+)|[^{}]|\\{(?&lt;Depth&gt;)|\\}(?&lt;-Depth&gt;))*(?(Depth)(?!))(?(Vars)|(?!))\\})</code>  </p>\n\n<p>Readable version  </p>\n\n<pre><code> Type .* &lt; .* &gt; \\s* \n (                             # Type variable to find in Loop\n      \\w+ \n      (?! \\w )                      # Must be an entire word\n )\n [^}]*? \n (?: while | for )             # While or for loop\n \\s* \\( .*? \n (?: \\r? \\n )?\n .*? \n\n (?&gt;\n      \\{                            # Match opening {\n      (?&gt;                           # Then either match (possessively):\n           (?&lt;! \\+\\+ )                   # Not incrementing variable\n           (?&lt;Vars&gt; \\1 )                 # Collect the Variable                                                                                                   \n           (?! -&gt; | \\+\\+ )               # Not dereferencing or incrementing variable\n        |                              # or\n           [^{}]                         #   Anything (but only if we're not at the start of { or } )\n        |                              # or\n           \\{                            #  { (and increase the braces counter)\n           (?&lt;Depth&gt; )\n        |                              # or\n           \\}                            #  } (and decrease the braces counter).\n           (?&lt;-Depth&gt; )\n      )*                            # Repeat as needed.\n      (?(Depth)                     # Condition that the braces counter is at zero.\n           (?!)                          # Fail if depth &gt; 0\n      )\n      (?(Vars)                      # Condition that the Variables matched something\n        |  (?!)                          # Fail if Vars stack is empty\n      )\n      \\}                            # Then match a closing }. \n )\n</code></pre>\n\n<p><em>Good Luck and let us know how this turns out !</em></p>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 49988818, "answer_count": 3, "score": 2, "last_activity_date": 1525282984, "creation_date": 1524510257, "last_edit_date": 1525282984, "question_id": 49988236, "link": "https://stackoverflow.com/questions/49988236/searching-for-specific-text-inside-balanced-chars-recursive", "title": "Searching for specific text inside balanced chars (recursive", "body": "<p>Given the following (sanitized)input:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Return_t\nfunc()\n{\n  Type&lt;SubType&gt; cursorFeature(true);\n\n  while (nDist &lt; 800)\n  {\n    Result = Example(&amp;var, 0, cursorFeature); //interested in this because inside loop, and not dereferenced or incremented\n    if (!(++cursorFeature).NoMoreRecords())\n    {\n      if (!BLAH(blah)\n        &amp;&amp; (otherFunc(&amp;var, &amp;cursorFeature-&gt;derefenced, MACRO) != 0))\n      {\n        bIsChanged = true;\n        break;\n      }\n      memcpy(&amp;var, &amp;cursorFeature-&gt;dereferenced, sizeof(anotherType_t));\n    }\n  }\n\n  //more stuff\n  }\n}\n</code></pre>\n\n<p>I have the following regex that captures a loop occuring after a use of <code>Type</code>  </p>\n\n<pre><code>Type.*&lt;.*&gt;\\s*(\\w*)[^}]*?(?:while|for)\\s*\\(.*?\\n?.*?(\\{(?&gt;[^{}]|(?-1))*\\})\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/Kr0zQq/3\" rel=\"nofollow noreferrer\">https://regex101.com/r/Kr0zQq/3</a></p>\n\n<p>I also have the following regular expression that captures specific use of variable of type <code>Type</code>:</p>\n\n<pre><code>Type.*&lt;.*&gt;\\s*(\\w*)[\\s\\S]*?\\K(?&lt;!\\+\\+)\\1(?!-&gt;|\\+\\+)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/Kr0zQq/4\" rel=\"nofollow noreferrer\">https://regex101.com/r/Kr0zQq/4</a></p>\n\n<p>My goal is to somehow combine these, preferably into <em>ONE</em> regex (I'd like to be able to do this search from within VS as well, if possible).  Given the nature of recursive regexes, I'm not sure this is at all possible...and I suspect it isn't.  If not, something clever that doesn't lose filename/number context when searching through hundreds of files would be awesome.  I basically need the filename and line number.  Context is great, but not required.</p>\n\n<p>To clarify, I want to capture <code>cursorFeature</code> because it's of type <code>Type</code>, and then I want to search for use of it inside <code>\"loop\"{.....}</code></p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Just a note about my use of regexes to solve this problem.  The code being searched is something over a million lines, spanning multiple projects compiled by various compilers and built by multiple build systems.  And the use of both macros and advanced language features means, for example, that even VS Intellisense <em>often</em> misparses code VS is able to compile.  As does YCM (vim).  So, a perhaps overly greedy regex that is 70% false positives is fine.  (As is missing further occurences of variable use within a loop since it's generally easy to scan the rest at that point.)  However, attempting to do this as a one-liner using a \"generic\" PCRE was perhaps foolish. :)</p>\n"}, {"tags": ["file", "perl", "io", "stream"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1524501336, "post_id": 49979197, "comment_id": 86988164, "body": "I don&#39;t see what you need -- under <code>get_support</code> it once redirects streams (and doesn&#39;t write anything?) but the other time it switches back.  In the desired-module, I don&#39;t see what the <code>write_support_file</code> writes to that file (there is only the message for the restored <code>STDOUT</code>).  Can you state the purpose?"}, {"owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524560893, "post_id": 49979197, "comment_id": 87011491, "body": "You are right, the wording and layout of the question was anything else than optimal. I&#39;ll rewrite it using elements from @kjetil-s answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524591217, "post_id": 49979197, "comment_id": 87031848, "body": "Thank you, much clearer.  I am still unsure of the overall purpose, please see my answer and let me know if needed"}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "edited": false, "score": 0, "creation_date": 1524561944, "post_id": 49980206, "comment_id": 87012150, "body": "Thanks for taking the time to guess what I need! I have rewritten the question above using your hint about <code>END</code> blocks."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 3, "last_activity_date": 1614346422, "last_edit_date": 1614346422, "creation_date": 1524483462, "answer_id": 49980206, "question_id": 49979197, "link": "https://stackoverflow.com/questions/49979197/subroutine-for-piping-stdout-and-stderr-into-file/49980206#49980206", "title": "Subroutine for piping stdout and stderr into file", "body": "<p>I'm guessing you're looking for <code>select</code> which changes the default file handler in <code>print</code> and <code>say</code>. And <code>END</code> which is run right before the program ends.</p>\n<pre><code>use v5.10; use warnings; use strict;\nmy($OK,$UNKNOWN)=(1,0);\n\nmy($filename, $endmsg, $exit) = ('my.log', 'OK', $OK);\nEND { say $endmsg }\nmy $DEFAULT_FH=select;  #select returns current default file handler (often STDOUT)\nif( rand()&lt;0.5){        #half the time, for test\n    open my $FH, '&gt;&gt;:utf8', $filename or die; #append\n    $endmsg = qq{support-info successfully written into $filename};\n    $exit = $UNKNOWN;\n    select $FH;\n}\n\nprint &quot;print something\\n&quot;;\nsay   &quot;say something more&quot;; #same as print except \\n is added\n\nif(1){\n    select $DEFAULT_FH;     #or just:  select STDOUT\n}\nexit $exit;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "edited": false, "score": 0, "creation_date": 1524641920, "post_id": 50007701, "comment_id": 87049289, "body": "I used your <code>RedirectStreams</code> in my example <code>simplecalc.pl</code> and it works just fine - thanks a lot!  Regarding your question about the overall-purpose: I am delivering an application with many scripts -- all of them had these lengthy and hard to maintain code to allow the user to write a support-file. I wanted to have that in one place. Your example is now the starting-point to further centralize any aspects of that support-file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "edited": false, "score": 1, "creation_date": 1525196791, "post_id": 50007701, "comment_id": 87260116, "body": "@lanti  Great :)  One other option is to have subs in the module open files themselves, so the caller just passes the filename. That needs a little more care, checks etc.  Also, what <a href=\"https://stackoverflow.com/a/47235779/4653379\">this post</a> shows may (or may not?) be of interest."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1614748970, "last_edit_date": 1614748970, "creation_date": 1524591161, "answer_id": 50007701, "question_id": 49979197, "link": "https://stackoverflow.com/questions/49979197/subroutine-for-piping-stdout-and-stderr-into-file/50007701#50007701", "title": "Subroutine for piping stdout and stderr into file", "body": "<p>I take the question to want to control redirection of both streams from a module.</p>\n<p>Something like this basic example?</p>\n<p><strong>RedirectStreams.pm</strong></p>\n<pre><code>package RedirectStreams;\n\nuse warnings;\nuse strict;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(redirect_streams restore_streams);\n\nour ($stdout, $stderr) = (*STDOUT, *STDERR);\n\nsub redirect_streams {\n    my ($handle) = @_;\n    *STDOUT = $handle;\n    *STDERR = $handle;\n}\n\nsub restore_streams {\n    *STDOUT = $stdout;\n    *STDERR = $stderr;\n}\n\n1;\n</code></pre>\n<p><strong>main.pl</strong></p>\n<pre><code>use warnings;\nuse strict;\n\nuse RedirectStreams qw(redirect_streams restore_streams);\n\nmy $logfile = shift @ARGV  || 'streams.log';\n\nsay &quot;Hello from &quot;, __PACKAGE__;            \nwarn &quot;WARN from &quot;, __PACKAGE__;\n\nopen my $fh, '&gt;', $logfile;\n    \nredirect_streams($fh);\n\nsay &quot;\\tHi to redirected&quot;;\nwarn &quot;\\tWARN to redirected&quot;;\n\nrestore_streams();\n    \nsay  &quot;Hi to STDOUT again&quot;;\nwarn &quot;WARN in main again&quot;;\n\nopen my $fh_other, '&gt;', 'other_' . $logfile;\nredirect_streams($fh_other);\nsay  &quot;STDOUT redirected to another&quot;;\nwarn &quot;STDERR redirected to another&quot;;\n\nclose $_ for $fh, $fh_other;\n</code></pre>\n<p>Output on console is  (aligned)</p>\n<pre>\nHello from main\nWARN from main      at ... line 18.\nHi to STDOUT again\nWARN in main again  at ... line 29.\n</pre>\n<p>while  the file <code>streams.log</code> has</p>\n<pre>\n        Hi to redirected\n        WARN to redirected at ... line 24.\n</pre>\n<p>and <code>other_streams.log</code> has its two lines.  (Tabbed to spot easily if they wind up on console.)</p>\n<p>The responsibility for managing filehandles in this example rests on the caller.</p>\n<p>This should be completed with all manner of error checking, options in subs (redirect only one stream, or each to its own file, etc), and probably a few more convenience routines.</p>\n<hr />\n<p>Note that <code>our $stdout = *STDOUT</code> creates an alias.</p>\n<p>Another way to preserve <code>STDOUT</code> for later restoration is to <a href=\"https://perldoc.perl.org/functions/open#Duping-filehandles\" rel=\"nofollow noreferrer\">duplicate it</a>,</p>\n<pre><code>open my $stdout, '&gt;&amp;', STDOUT;\n</code></pre>\n<p>This creates an independent filehandle, made as a duplicate of <code>STDOUT</code> (what is all we need here), which is unaffected by changes (or closure) of <code>STDOUT</code>. See <a href=\"https://stackoverflow.com/a/57156978/4653379\">this post</a> for an example use.</p>\n"}], "owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 50007701, "answer_count": 2, "score": 2, "last_activity_date": 1614748970, "creation_date": 1524480378, "last_edit_date": 1614244664, "question_id": 49979197, "link": "https://stackoverflow.com/questions/49979197/subroutine-for-piping-stdout-and-stderr-into-file", "title": "Subroutine for piping stdout and stderr into file", "body": "<p>If I have a program called <code>simplecalc.pl</code>:</p>\n\n<pre><code>use v5.10; \nuse warnings;\nuse strict;\n\n# SIMPLE CALCULATOR\n# Usage: simplecalc.pl &lt;n1&gt; &lt;n2&gt; [&lt;verbose&gt; &lt;logswitch&gt;]\n# Example Usage:\n# normal usage      : simplecalc.pl 4 2  \n# verbose usage     : simplecalc.pl 4 2 1\n# support-case usage: simplecalc.pl 4 2 0 1\n\nmy($OK,$UNKNOWN)=(0,3);\nmy($filename, $endmsg, $exit) = ('my.log', undef, undef);\nmy($n1, $n2, $DEBUG, $GET_SUPPORT_FILE) = @ARGV;\n\n# Handling of the support-file starts here ===============================\n*ORIGINAL_STDOUT = *STDOUT;\n\nif ($GET_SUPPORT_FILE) {\n    $DEBUG = 1;\n    $endmsg = \"support-info sucessfully written into $filename\";\n    $exit = $UNKNOWN;\n    # redirect stdout and stderr\n    open my $stdout_txt, '&gt;&gt;:utf8', \"$filename\";\n    *STDOUT = $stdout_txt;\n    open STDERR, '&gt;&amp;STDOUT';\n} else {\n    $endmsg = \"Finnished calculation - good bye.\";\n    $exit = $OK;\n}\n\nEND {\n    select *ORIGINAL_STDOUT;\n    say $endmsg;\n};\n# end of support-file handling ============================================\n\n\nsay STDERR \"INFO: got $n1 and $n2 from the commandline\" if $DEBUG;\nsay \"Hello, let me calc the quotient from $n1 trough $n2 for you ...\";\nmy $quotient = $n1 / $n2;\nsay \"Quotient: $quotient\";\n\nexit $exit;\n</code></pre>\n\n<p>Is there a way to put the lengthy handling of the support-file in a reusable way into a module? (The support-file is meant to be sent by the user to the program-maintainer.)</p>\n\n<p>Note: The above solution also works for <code>simplecalc.pl 4 0 0 1</code> which results in a division trough 0. Catching a <code>die</code> in any module used by the main-programm and write the die-msg into the support-file is an important feature.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1524467241, "post_id": 49975192, "comment_id": 86966330, "body": "SO is not a code writing service."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1524470380, "post_id": 49975192, "comment_id": 86968095, "body": "Sounds like a job offer. here&#39;s my price: 15$/h, I accept bank transfer and bitcoins :)"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1524472120, "creation_date": 1524472120, "answer_id": 49976562, "question_id": 49975192, "link": "https://stackoverflow.com/questions/49975192/look-for-string-in-a-range-of-lines-and-pick-all-the-string-after-a-particular-a/49976562#49976562", "title": "Look for string in a range of lines and pick all the string after a particular and append it another file", "body": "<p>This one-line Perl program</p>\n\n<pre><code>perl -lne 'print \"assign inst.$1=;\" if /^input\\h+(\\w+);/' 'file 1'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6677174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3849d1c6195287387828ee170b9b0754?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant", "link": "https://stackoverflow.com/users/6677174/prashant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1524472120, "creation_date": 1524467062, "last_edit_date": 1524471754, "question_id": 49975192, "link": "https://stackoverflow.com/questions/49975192/look-for-string-in-a-range-of-lines-and-pick-all-the-string-after-a-particular-a", "title": "Look for string in a range of lines and pick all the string after a particular and append it another file", "body": "<p>I have <code>file 1</code> contents as </p>\n\n<pre><code>wire x;\nwire y;\ninput a;\ninput b;\ninput c;\nreg m;\nreg n;\n</code></pre>\n\n<p>I have to put signals <code>a</code>, <code>b</code>, <code>c</code> only in another file <code>file 2</code> in the following manner</p>\n\n<pre><code>assign inst.a=;\nassign inst.b=;\nassign inst.c=;\n</code></pre>\n\n<p>Can anyone please help me out on this issue using Perl or Python?</p>\n"}, {"tags": ["perl", "sftp", "winscp", "winscp-net"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1524489571, "post_id": 49974413, "comment_id": 86994058, "body": "Why are you using WinSCP instead of Perl SFTP modules like <a href=\"http://search.cpan.org/~salva/Net-SFTP-Foreign-1.89/lib/Net/SFTP/Foreign.pm\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a>"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1524505442, "post_id": 49974413, "comment_id": 86994059, "body": "I feel like this should be a comment. But short answer is I\u2019m experimenting with multiple technologies including Net::SFTP::Foreign."}], "answers": [{"comments": [{"owner": {"reputation": 4862, "user_id": 3168107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b888c4ba023e4fef4aee1efa72bdd7?s=128&d=identicon&r=PG", "display_name": "Shikkediel", "link": "https://stackoverflow.com/users/3168107/shikkediel"}, "edited": false, "score": 2, "creation_date": 1524510885, "post_id": 49976407, "comment_id": 86993078, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/19524610\">From Review</a>"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 4862, "user_id": 3168107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b888c4ba023e4fef4aee1efa72bdd7?s=128&d=identicon&r=PG", "display_name": "Shikkediel", "link": "https://stackoverflow.com/users/3168107/shikkediel"}, "edited": false, "score": 3, "creation_date": 1524549115, "post_id": 49976407, "comment_id": 87004792, "body": "@Shikkediel Even though I somewhat expected to be blamed for posting a link-only question, I honestly believed that the answer stands on its own. All the OP needed to know was that the assembly needs to be registered for COM. How to register an assembly for COM is rather a common knowledge. And even if OP is not familiar with that, it is easy to be googled for. Anyway, I&#39;ve added an example to my answer."}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 1, "creation_date": 1524553578, "post_id": 49976407, "comment_id": 87007035, "body": "Thank you for your answer. It easily solved my issue. :)"}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": true, "score": 4, "last_activity_date": 1524548979, "last_edit_date": 1524548979, "creation_date": 1524471626, "answer_id": 49976407, "question_id": 49974413, "link": "https://stackoverflow.com/questions/49974413/perl-win32oleconst-error/49976407#49976407", "title": "Perl - Win32::OLE::const error", "body": "<p>Make sure you have <a href=\"https://winscp.net/eng/docs/library_install\" rel=\"nofollow noreferrer\">registered WinSCP .NET assembly for COM</a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>%WINDIR%\\Microsoft.NET\\Framework\\&lt;version&gt;\\RegAsm.exe WinSCPnet.dll /codebase /tlb\n</code></pre>\n"}], "owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 1, "accepted_answer_id": 49976407, "answer_count": 1, "score": 3, "last_activity_date": 1524548979, "creation_date": 1524463659, "question_id": 49974413, "link": "https://stackoverflow.com/questions/49974413/perl-win32oleconst-error", "title": "Perl - Win32::OLE::const error", "body": "<p>I\u2019m trying to use WinSCP for SFTP with a Perl script. I\u2019m pretty much using the code off of the <a href=\"https://winscp.net/eng/docs/library_perl\" rel=\"nofollow noreferrer\">WinSCP site</a> verbatim.  But I\u2019m getting the following error:</p>\n\n<blockquote>\n  <p>Win32::OLE::CONST->Load: No or invalid type library name at test.pl\n  line 12. Win32::OLE(0.1712): GetOleTypeLibObject() Not a\n  Win32::OLE::TypeLib object at C:/Perl/lib/Win32/OLE/Const.pm line 49.</p>\n</blockquote>\n\n<p>Does anyone know what could be causing this?</p>\n\n<p>My code:</p>\n\n<pre><code>use Win32::OLE;\nuse Win32::OLE::Const;\nuse Win32::OLE::Variant;\n\u00a0\nWin32::OLE-&gt;Initialize(Win32::OLE::COINIT_OLEINITIALIZE);\nmy $session = Win32::OLE-&gt;new('WinSCP.Session');\n\u00a0\nmy $consts = Win32::OLE::Const-&gt;Load($session);\n\u00a0\nmy $sessionOptions = Win32::OLE-&gt;new('WinSCP.SessionOptions');\n</code></pre>\n"}, {"tags": ["windows", "perl", "ssh", "sftp", "windows-server"], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 8066197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e249e65172814b6f5f75266fff2f294?s=128&d=identicon&r=PG&f=1", "display_name": "AKenny", "link": "https://stackoverflow.com/users/8066197/akenny"}, "is_accepted": false, "score": 2, "last_activity_date": 1524446862, "creation_date": 1524446862, "answer_id": 49972275, "question_id": 49971798, "link": "https://stackoverflow.com/questions/49971798/perl-unable-to-install-netssh2-on-windows/49972275#49972275", "title": "Perl - Unable to install Net::SSH2 on windows", "body": "<p>The output says to try downloading libssh2 from <a href=\"https://www.libssh2.org/\" rel=\"nofollow noreferrer\">https://www.libssh2.org/</a>\nIf you have libssh2 already, you could place it in a path where Perl can find it. If you look at the bottom of the output it gives a list of directories that it searches for libssh2. One of those directories would be a likely place to put libssh2. </p>\n"}, {"comments": [{"owner": {"reputation": 677, "user_id": 1382955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NRHHp.jpg?s=128&g=1", "display_name": "Robert Bolton", "link": "https://stackoverflow.com/users/1382955/robert-bolton"}, "edited": false, "score": 1, "creation_date": 1571242351, "post_id": 49976952, "comment_id": 103177863, "body": "Thanks! Worked like a charm."}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": true, "score": 3, "last_activity_date": 1524473572, "creation_date": 1524473572, "answer_id": 49976952, "question_id": 49971798, "link": "https://stackoverflow.com/questions/49971798/perl-unable-to-install-netssh2-on-windows/49976952#49976952", "title": "Perl - Unable to install Net::SSH2 on windows", "body": "<p>Compiling <code>Net::SSH2</code> for Activestate Perl is not an easy task.</p>\n\n<p>Fortunately, <a href=\"https://metacpan.org/author/SISYPHUS\" rel=\"nofollow noreferrer\">Sisyphus</a> has set up a repository of precompiled Perl packages (PPMs) which includes <code>Net::SSH2</code>: <a href=\"http://www.sisyphusion.tk/ppmindex.html\" rel=\"nofollow noreferrer\">http://www.sisyphusion.tk/ppmindex.html</a></p>\n"}], "owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 1, "accepted_answer_id": 49976952, "answer_count": 2, "score": 1, "last_activity_date": 1524473572, "creation_date": 1524441041, "question_id": 49971798, "link": "https://stackoverflow.com/questions/49971798/perl-unable-to-install-netssh2-on-windows", "title": "Perl - Unable to install Net::SSH2 on windows", "body": "<p>I'm attempting to install <code>Net::SSH2</code> using <code>cpan</code> on Windows. I'm unable to install and getting the following error:</p>\n\n<p><strong>Warning: No success on command[C:\\Perl\\bin\\perl.exe Makefile.PL INSTALLDIRS=site]\n    SALVA/Net-SSH2-0.69.tar.gz\n    C:\\Perl\\bin\\perl.exe Makefile.PL INSTALLDIRS=site -- NOT OK</strong></p>\n\n<p>Does anyone know why I'm receiving this error. Any help is greatly appreciated. The entire output is posted via screenshots below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CedTK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CedTK.png\" alt=\"screenshot of my output\"></a>\n<a href=\"https://i.stack.imgur.com/EUcNM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EUcNM.png\" alt=\"screenshot of my output continued\"></a></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1524425059, "post_id": 49969831, "comment_id": 86955657, "body": "Your code contains several syntax errors. Fix those first, then enable <code>use strict; use warnings;</code> and try again."}, {"owner": {"reputation": 10225, "user_id": 999924, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/44b219232560d6f33b5b24b80d30e43c?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/999924/dan"}, "edited": false, "score": 0, "creation_date": 1524425122, "post_id": 49969831, "comment_id": 86955667, "body": "<code>my $yearnumber = $param =~ &#47;(\\d{1,4})$&#47;;</code> doesn&#39;t do what you think it does."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524425183, "post_id": 49969831, "comment_id": 86955689, "body": "Nor does <code>my $white = &#47;^\\s*$&#47;;</code> but I find it hard to explain things properly with code that doesn&#39;t even parse, let alone pass <code>strict</code> and <code>warnings</code>."}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524425453, "post_id": 49969831, "comment_id": 86955765, "body": "@melpomene I mostly transcribed over to this post from my code for formatting reasons, I apologize for any typos.  It runs without error where I&#39;m executing it, ironically with <code>strict</code> and <code>warnings</code>.  I fixed a couple missing semicolons in the post."}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524425543, "post_id": 49969831, "comment_id": 86955789, "body": "@melpomene I included the months array"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1524425578, "post_id": 49969831, "comment_id": 86955800, "body": "Your code doesn&#39;t pass <code>strict</code> (undeclared variables, missing <code>$</code>). Once you fix that, you&#39;ll see a (hopefully) helpful warning."}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524426549, "post_id": 49969831, "comment_id": 86956081, "body": "@melpomene more syntax edits"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524426637, "post_id": 49969831, "comment_id": 86956106, "body": "@user3066571 OK, now what do you think about the warning you&#39;re getting?"}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 3, "last_activity_date": 1524427424, "last_edit_date": 1524427424, "creation_date": 1524426662, "answer_id": 49970104, "question_id": 49969831, "link": "https://stackoverflow.com/questions/49969831/perl-regex-wrongfully-evaluating-expressions/49970104#49970104", "title": "Perl regex wrongfully evaluating expressions", "body": "<p>I see two issues that are central to your question.</p>\n\n<p>First, you apparently want to save precompiled regexes in the variables <code>$white</code>, <code>$singleyear</code>, and <code>$nummonth</code>, but you are not using the right operator for that - you should use <a href=\"http://perldoc.perl.org/perlop.html#qr/_STRING_/msixpodualn\" rel=\"nofollow noreferrer\"><code>qr//</code></a> to compile and save the regex. Code like <code>my $white = /^\\s*$/;</code> will <em>run</em> the regex against <a href=\"http://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\"><code>$_</code></a> and store the <em>result</em> in <code>$white</code>.</p>\n\n<p>Second, <code>my $monthnumber = $param =~ /^\\d{1,2}/;</code> has two issues: the <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\"><code>=~</code> operator</a> used with <a href=\"http://perldoc.perl.org/perlop.html#m/_PATTERN_/msixpodualngc\" rel=\"nofollow noreferrer\"><code>m//</code></a> in scalar context simply returns a true/false value (that's the <code>1</code> you're seeing in the output <code>february 1</code>), but if you want to get the capture groups from the regex, you need to use it in list context, in this case by saying <code>my ($monthnumber) = ...</code> (the same issue applies to <code>$yearnumber</code>). Second, that regex doesn't contain any capture groups!</p>\n\n<p>I don't get exactly the output you claim (although it's close) - please have a look at <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>, especially since your post initially contained quite a few syntax errors. If I apply the fixes I described above, I get the output</p>\n\n<pre><code>march 1999\n</code></pre>\n\n<p>which is what I would expect - I hope you can figure out how to fix the off-by-one error.</p>\n\n<p><em>Update:</em> I should add that you also don't need to try and parse date/times yourself. My favorite module for date/time handling is <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\"><code>DateTime</code></a> (together with <a href=\"https://metacpan.org/pod/DateTime::Format::Strptime\" rel=\"nofollow noreferrer\"><code>DateTime::Format::Strptime</code></a>), but in this case the core <a href=\"http://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow noreferrer\"><code>Time::Piece</code></a> is enough:</p>\n\n<pre><code>use Time::Piece;\nmy $param = \"02 1999\";\nmy $dt = Time::Piece-&gt;strptime($param, \"%m %Y\");\nprint $dt-&gt;fullmonth, \" \", $dt-&gt;year, \"\\n\";       # prints \"February 1999\"\n</code></pre>\n"}], "owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1524427424, "creation_date": 1524424844, "last_edit_date": 1524426536, "question_id": 49969831, "link": "https://stackoverflow.com/questions/49969831/perl-regex-wrongfully-evaluating-expressions", "title": "Perl regex wrongfully evaluating expressions", "body": "<p>I have the following perl code with a string that I'm needing to check against several cases in order to decide what to do with it.  None of them work.  Code looks like this:</p>\n\n<pre><code>my $param = \"02 1999\";\nmy @months = qw(january february march april may june july august september october november december);\n\nmy $white = /^\\s*$/; #check if all whitespace\nmy $singleyear = /^\\d{2,4}$/; #check if 2-4 digits\nmy $nummonth = /^\\d{1,2}\\s\\d{1,4}$/; #check if 1-2 digits then 1-4\n\nif ($param =~ $white) {\n    my($day, $month, $year)=(localtime)[3,4,5];\n    my $monthname = $months[$month]; \n    print \"$monthname $year\\n\";\n}\nif ($param =~ $singleyear) {\n    print \"$param\\n\";\n}\nif ($param =~ $nummonth) {\n    my $monthnumber = $param =~ /^\\d{1,2}/; #grabs the number at the front of the string\n    my $monthstring = $months[$monthnumber]; \n    my $yearnumber = $param =~ /(\\d{1,4})$/; #grab second number, it does this wrong\n    print \"$monthstring $yearnumber\\n\";\n}\n</code></pre>\n\n<p>Given the above, the output should simply be: </p>\n\n<pre><code>february 1999\n</code></pre>\n\n<p>Instead, the output is:</p>\n\n<pre><code>3 118\n02 1999\nfebruary 1 #this only grabbed the first digit for some reason.\n</code></pre>\n\n<p>So ALL of the cases evaluated as true for some reason, and the capture on the year didn't even work. What am I doing wrong?  Testing all of my regex at regex101 worked fine, but not in the script.</p>\n"}, {"tags": ["perl", "strict", "taint"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1524423900, "post_id": 49969665, "comment_id": 86955283, "body": "Can&#39;t reproduce the problem with the code you posted. Needs more <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1524424115, "post_id": 49969665, "comment_id": 86955357, "body": "Taint complains about insecure dependency when the value sent to the system (probably $date here) has a value coming from outside of the source, i.e. from a file or user input. Are you sure $date isn&#39;t populated by a form?"}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524424993, "post_id": 49969665, "comment_id": 86955642, "body": "@choroba the user enters in a parameter in a form, that in perl I have to do transforms on before assigning it to <code>$date</code>.  I updated the post to reflect this."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1524425921, "post_id": 49969665, "comment_id": 86955897, "body": "\u201ctransforms before assigning it to $date\u201d \u2013 these exact transforms matter very much! In most cases where the <code>$param</code> value is transformed into <code>$date</code>, the new value will also be tainted. Please show the relevant code, or we can&#39;t tell you why these transformations are tainting the <code>$date</code>. The pseudocode you&#39;ve shown so far is insufficient."}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1524426389, "post_id": 49969665, "comment_id": 86956041, "body": "@amon I put the whole actual script in."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1524426547, "post_id": 49969665, "comment_id": 86956080, "body": "Oh hello, it&#39;s the broken regex code from <a href=\"https://stackoverflow.com/q/49969831/1848654\">stackoverflow.com/q/49969831/1848654</a>."}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524426584, "post_id": 49969665, "comment_id": 86956091, "body": "@melpomene hey buddy, I was trying to tackle 2 separate issues, nice to see you."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524427018, "post_id": 49969665, "comment_id": 86956216, "body": "@user3066571 Why do you think they&#39;re separate?"}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524427090, "post_id": 49969665, "comment_id": 86956231, "body": "@melpomene the other one was about my broken regex, and this one was about the <code>Insecure dependency</code> error.  Maybe they&#39;re relatd, I clearly don&#39;t know."}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1524427286, "post_id": 49970131, "comment_id": 86956286, "body": "The <code>$foo = &#47;bar&#47;</code> issue was asked by the OP <a href=\"https://stackoverflow.com/q/49969831/9300627\">here</a>."}, {"owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "edited": false, "score": 0, "creation_date": 1524427970, "post_id": 49970131, "comment_id": 86956455, "body": "This is exactly what I needed, thank you. And you fixed my broken-as-balls regex while you were at it.  Thanks so much."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 4, "last_activity_date": 1524426879, "creation_date": 1524426879, "answer_id": 49970131, "question_id": 49969665, "link": "https://stackoverflow.com/questions/49969665/perl-setting-value-of-a-variable-in-strict-t-mode-errors/49970131#49970131", "title": "Perl setting value of a variable in strict -T mode errors", "body": "<blockquote>\n  <p><code>$date = $params;</code></p>\n</blockquote>\n\n<p>Such code assigns the tainted <code>$params</code> value to <code>$date</code> without untainting it. </p>\n\n<p>Instead: Match the exact data you want with a regex, and use regex captures to extract an untainted value. For example:</p>\n\n<pre><code>if ($params =~ /^(\\d{2,4})$/) {\n    $date = $1;\n}\n</code></pre>\n\n<p>And so on for the other cases.</p>\n\n<p>Note that assigning a regex <code>$foo = /bar/</code> does not assign a regex object, but assigns the result of matching that regex against the <code>$_</code> variable! If you need to create regex objects, use the <code>qr/.../</code> operator. However, using regex objects seems unnecessary in your program \u2013 just write down the regex in each condition in order to avoid problems.</p>\n"}], "owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 49970131, "answer_count": 1, "score": -2, "last_activity_date": 1524426879, "creation_date": 1524423768, "last_edit_date": 1524426375, "question_id": 49969665, "link": "https://stackoverflow.com/questions/49969665/perl-setting-value-of-a-variable-in-strict-t-mode-errors", "title": "Perl setting value of a variable in strict -T mode errors", "body": "<p>I have a script running strict with the -T parameter or 'taint' mode.  If I try to set the value of a variable already defined, it craps out.  I didn't make much of it, I'm just trying to modify it and don't know why it's breaking.  Here's the gist of what it looks like:</p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse 5.010;\nuse CGI;\nuse CGI::Carp qw/fatalsToBrowser/;\n\nuse strict;\nuse warnings;\nuse localtime;\n\n\nmy @months = qw(january february march april may june july august september october november december);\n\nmy $q = CGI-&gt;new();\nsay $q-&gt;header(), $q-&gt;start_html(-title=&gt;'Calendar');\n\nfor my $param ($q-&gt;param()) {\n    my $safe_param = $q-&gt;escapeHTML($param);\n\n    for my $value ($q-&gt;param($param)) {\n                my $params = $q-&gt;escapeHTML($value);\n                {\n                        local $ENV{\"PATH\"} = \"/bin:/usr/local/bin:/usr/bin\";\n                        local $ENV{\"BASH_ENV\"}=\"\";\n                        my $date = \"\";\n\n                        my $white = /^\\s*$/;\n                        my $singleyear = /^\\d{2,4}$/;\n                        my $nummonth = /^\\d{1,2}\\s\\d{1,4}$/;\n                        # If $params is empty or all white space, set $date to a single space\n                        if ($params =~ $white) {\n                                my($day, $month, $year)=(localtime)[3,4,5];\n                                my $monthname = $months[$month];\n                                $date = \"$monthname $year\"\n                        }\n                        # If $params is only a single 1-4 digit year, set $date to year\n                        if ($params =~ $singleyear) {\n                                $date = $params;\n                        }\n                        # If $params is a 1-2 digit month and a 1-4 digit year set $date to month and year\n                        if ($params =~ $nummonth) {\n                                my $monthnumber = $params =~ /^\\d{1,2}/;\n                                my $monthstring = $months[$monthnumber];\n                                my $yearnumber = $params =~ /(\\d{1,4})$/;\n                                $date = \"$monthstring $yearnumber\";\n                        }\n\n                        if  ($date eq \"\") {\n                                say \"&lt;h1&gt;Invalid Parameters: $params&lt;/h1&gt;\";\n                        } else {\n                                say \"&lt;h1&gt;Parameters: $params&lt;/h1&gt;\";\n                        }\n                        my $cmds = \"cal -h \" . $date;\n                        my @lines = `$cmds`;\n                        say (\"&lt;pre&gt;\");\n                        for my $line (@lines) {\n                                print (\"$line\");\n                        }\n                        say (\"&lt;/pre&gt;\");\n                }\n    }\n    say '&lt;/p&gt;';\n}\n\nsay $q-&gt;end_html();\n</code></pre>\n\n<p>At any point I set the value of <code>$date</code> it throws the error:</p>\n\n<pre><code>Insecure dependency in `` while running with -T switch\n</code></pre>\n\n<p>if I set <code>my $date</code> it throws no error, but doesn't actually update the value of date.</p>\n\n<p>Also, I'm pretty sure all my regex is wrong, because I did some testing, and all of those cases evaluate to true for some reason, regardless of the user input.  But that's not really the problem I'm facing now.</p>\n\n<p>Example user input for <code>$params</code></p>\n\n<pre><code>02 1999\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 3, "creation_date": 1524411303, "post_id": 49967584, "comment_id": 86950897, "body": "Please show your effort."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524411653, "post_id": 49967584, "comment_id": 86950993, "body": "What is the idea behind the <code>IT1</code> and <code>IT2</code> prefix?"}, {"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524412724, "post_id": 49967584, "comment_id": 86951416, "body": "IT1and IT2 are two iterations of one test case."}, {"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524413206, "post_id": 49967584, "comment_id": 86951584, "body": "I am getting following O/P    [root@localhost]# python test.py &gt; /home/abc/test.py(5)&lt;module&gt;() -&gt; for subdirs in subdirs: (Pdb)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1524419878, "post_id": 49967584, "comment_id": 86953891, "body": "@Raj2015 Don&#39;t post code in comments. <a href=\"https://stackoverflow.com/posts/49967584/edit\">Edit</a> your question and include the code there."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524457370, "post_id": 49970204, "comment_id": 86962614, "body": "Thanks for this..Actually there are multiple folders like ABC,DEF,GHI....XYZ.And inside each of these folders only two files are present.And each of these two files are unique..let&#39;s says 123.jpg,456.jpg in ABC are present,then in XYZ folders 987.jpg and 675.jpg is present.So I want to rename all these unique  files present in unique folders to above syntax.Like 123.jpg should be renamed to IT1_ABC_123.v2.jpg and 456.jpg should be renamed to IT2_ABC_456.v2.jpg."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524471416, "post_id": 49970204, "comment_id": 86968684, "body": "The <code>find</code> will run through any subfolder. Change <code>find</code> to <code>find ???</code>  (yes, three question marks) to run through any folder with a name of three chars. You could replace <code>123|456</code> with <code>\\d{3}</code> to match any three digits, not just 123 and 456. ( about <i>&quot;Thanks for this&quot;</i>...upvote is the best kind of thanks on stackoverflow.com, that up-arrowy symbol above the number on the top left side of my answer ;-)"}, {"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524478383, "post_id": 49970204, "comment_id": 86973056, "body": "Hi Kjetil..I am getting syntax errors.. find???|perl -nlE&#39;s((.*)/(.+))/((d{3}).jpg),$1/IT@{[++$n]}_$3_$4,&amp;&amp;say&quot;$&amp;&zwnj;&#8203;\\n$_\\n&quot;&#39; find???|perl -nlE&#39;s((.*)/(.+))/((d{3}).jpg),$1/IT@{[++$n]}_$3_$4, and rename$&amp;,$_&#39;   bash-3.2# perl abc.pl syntax error at abc.pl line 4, near &quot;(.&quot; Execution of abc.pl aborted due to compilation errors."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524480004, "post_id": 49970204, "comment_id": 86974077, "body": "Weeeeell, you left out a space before <code>???</code> and a comma behind the first <code>s</code> and maybe more. (Something added to my answer above)"}, {"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524483301, "post_id": 49970204, "comment_id": 86976165, "body": "bash-3.2# find|perl a.pl find: insufficient number of arguments find: [-H | -L] path-list predicate-list         Still getting errors:("}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1524483772, "post_id": 49970204, "comment_id": 86976481, "body": "Then you don&#39;t have a normal gnu find command (like most often in Linux and other shells) and that&#39;s where I can&#39;t find more time on this."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1524479852, "last_edit_date": 1524479852, "creation_date": 1524427319, "answer_id": 49970204, "question_id": 49967584, "link": "https://stackoverflow.com/questions/49967584/renaming-two-files-in-multiple-folders-by-adding-suffix-and-prefix/49970204#49970204", "title": "Renaming two files in multiple folders by adding suffix and prefix", "body": "<p>Try this, using shell <em>and</em> perl:</p>\n\n<pre><code>mkdir /tmp/test; cd $_\nmkdir ABC DEF\ntouch {ABC,DEF}/{123,456}.jpg   #creates four files, two in each directory\nfind|perl -nlE's,((.*)/(.+))/((123|456).jpg),$1/IT@{[++$n]}_$3_$4,&amp;&amp;say\"$&amp;\\n$_\\n\"'\n\n./ABC/123.jpg\n./ABC/IT1_ABC_123.jpg\n\n./ABC/456.jpg\n./ABC/IT2_ABC_456.jpg\n\n./DEF/123.jpg\n./DEF/IT3_DEF_123.jpg\n\n./DEF/456.jpg\n./DEF/IT4_DEF_456.jpg\n</code></pre>\n\n<p>Now, after confirming this is what you want, replace the <code>say</code> with a <code>rename</code>:</p>\n\n<pre><code>find|perl -nlE's,((.*)/(.+))/((123|456).jpg),$1/IT@{[++$n]}_$3_$4, and rename$&amp;,$_'\n</code></pre>\n\n<p>The new filenames:</p>\n\n<pre><code>find -type f\n./ABC/IT1_ABC_123.jpg\n./ABC/IT2_ABC_456.jpg\n./DEF/IT3_DEF_123.jpg\n./DEF/IT4_DEF_456.jpg\n</code></pre>\n\n<p>This will find filenames with 123.jpg or 456.jpg and rename them.</p>\n\n<p><code>s,,,</code> is the search-replace and it returns 1 (the number of changes it made) which again leads to the right side of the <code>and</code> being done (the rename). </p>\n\n<p>Filenames that doesn't match 123.jpg or 456.jpg isn't renamed since <code>s,,,</code> will return 0 and the <code>and</code> is \"short cutted\" since it then logically cannot be true with a false (0) left side. So then the rename is <em>not</em> executed.</p>\n\n<p>This variant does the same, but might be easier to read:</p>\n\n<pre><code>find|perl -nlE 'rename$&amp;,$_ if s,((.*)/(.+))/((123|456).jpg),$1/IT@{[++$n]}_$3_$4,'\n</code></pre>\n\n<p>I have found this pattern useful in many cases of mass renamings. Also, dedicated software for mass renaming with GUIs exists, which for some might be easier to use.</p>\n\n<p>Rewritten as a program abc.pl, it could be:</p>\n\n<pre><code>#!/usr/bin/perl\nwhile(&lt;&gt;){\n  chomp;\n  next if not s,((.*)/([A-Z]{3}))/(\\d{3}\\.jpg),$1/IT@{[++$n]}_$3_$4,;\n  print \"Found:    $&amp;\\nNew name: $_\\n\\n\";\n #rename $&amp;, $_;\n}\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>find|perl abc.pl\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1531293097, "post_id": 49990020, "comment_id": 89536005, "body": ":When I have two or more folders under parent folder it is renaming file as IT1,IT2,IT3,IT4.IT5 etc.But my requirement was for each subfolder under parent folder,there are only two files and they should be renamed as IT1 and IT2.I don&#39;t want IT3 and IT4 for the second subfolder."}, {"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1531359683, "post_id": 49990020, "comment_id": 89569850, "body": ":Can you please answer the above query?"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "reply_to_user": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1531434526, "post_id": 49990020, "comment_id": 89607158, "body": "Hi @Raj2015, I&#39;ve updated my answer to show how to reset the counter by comparing the directory path of the current file with the one from the previous loop. I only did a basic check to see if it runs, so I recommend testing it out thoroughly first."}, {"owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1531895293, "post_id": 49990020, "comment_id": 89761057, "body": "Hi @Interduo I executed the above code.It works fne for the first folder but for the second folder I see it renames the file as IT3 and IT1."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "reply_to_user": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "edited": false, "score": 0, "creation_date": 1531940617, "post_id": 49990020, "comment_id": 89789964, "body": "Hi @Raj2015, you may need to sort the <code>@fileset</code> array before looping through it. Failing that, you&#39;ll have to take a closer look at the comparison between <code>$previous_dir</code> and <code>$parent_dir</code>. You may need to use a regular expression instead of the <code>ne</code> operator to get the match to work as intended."}], "tags": [], "owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "is_accepted": false, "score": 0, "last_activity_date": 1531434014, "last_edit_date": 1531434014, "creation_date": 1524517895, "answer_id": 49990020, "question_id": 49967584, "link": "https://stackoverflow.com/questions/49967584/renaming-two-files-in-multiple-folders-by-adding-suffix-and-prefix/49990020#49990020", "title": "Renaming two files in multiple folders by adding suffix and prefix", "body": "<p>You can do this in core Perl using the <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a>, <a href=\"http://perldoc.perl.org/File/Basename.html\" rel=\"nofollow noreferrer\">File::Basename</a>, and <a href=\"https://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a> modules. You can test it out with the script below. It won't make any changes until you uncomment the line with the \"move\" function.</p>\n\n<pre><code>#! perl\n\nuse strict;\nuse warnings;\n\nuse File::Basename;\nuse File::Copy;\nuse File::Find;\n\nmy $root_dir = '/path/to/main/folder';\n\n# Recursively searches for all files below the $root_dir\nmy @fileset;\nfind(\n    sub {\n\n        # Get the absolute file path\n        my $path = $File::Find::name;\n\n        # Only capture the path if not a directory\n        # You can add any number of conditions here\n        if (!-d $path) {\n            push @fileset, $path;\n        }\n    },\n    $root_dir\n);\n\n# set the IT counter in new file name\nmy $int = 1;\n\n# list of all possible file suffixes to have fileparse() look for. It will \n# capture the end of the file path verbatim (including the period) if it's \n# in this array \nmy @suffixes = ('.jpg', '.txt');\n\nmy $previous_dir;\nforeach my $old_path (@fileset) {\n\n    # split apart the basename of the file, the directory path, and the file suffix\n    my ($basename, $parent_dir, $suffix) = fileparse($old_path, @suffixes);\n\n    # strip off trailing slash so fileparse() will capture parent dir name correctly\n    $parent_dir =~ s{[/]$}{};\n\n    # capture just the name of the parent directory\n    my $parent_name = fileparse($parent_dir);\n\n    # Assemble the new path\n    my $new_path = $parent_dir . '/IT' . $int . '_' \n                 . $parent_name . '_' . \"$basename.v1\" . $suffix;\n\n    # Move the file to rename (this is safer than using rename() for cross-platform)\n    # move $old_path, $new_path;\n\n    print \"OLD PATH: $old_path\\n\";\n    print \"NEW PATH: $new_path\\n\\n\";\n\n    # Reset counter when dir changes\n    if (!$previous_dir) {\n        $previous_dir = $parent_dir; # set previous_dir on first loop\n    }\n    elsif($previous_dir ne $parent_dir) {\n        $previous_dir = $parent_dir; # update previous_dir to check next loop\n        $int = 0; # reset counter\n    }\n\n    $int++; # iterate the counter\n}\n</code></pre>\n\n<p><strong>Edit 2018-07-12:</strong> I've updated the answer to show how to reset the counter when the directory changes by evaluating the current path with the one used in the previous loop and updating accordingly. This is not tested so it may need some adjustments.</p>\n\n<p>Given the abc/def examples given, the output should look something like this:</p>\n\n<pre><code>OLD PATH: /path/to/main/folder/abc/123.jpg\nNEW PATH: /path/to/main/folder/abc/IT1_abc_123.v1.jpg\n\nOLD PATH: /path/to/main/folder/abc/456.txt\nNEW PATH: /path/to/main/folder/abc/IT2_abc_456.v1.jpg\n\nOLD PATH: /path/to/main/folder/def/123.jpg\nNEW PATH: /path/to/main/folder/def/IT1_def_123.v1.jpg\n\nOLD PATH: /path/to/main/folder/def/456.jpg\nNEW PATH: /path/to/main/folder/def/IT2_def_456.v1.jpg\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9682137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Raj2015", "link": "https://stackoverflow.com/users/9682137/raj2015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1531434014, "creation_date": 1524410676, "last_edit_date": 1524457830, "question_id": 49967584, "link": "https://stackoverflow.com/questions/49967584/renaming-two-files-in-multiple-folders-by-adding-suffix-and-prefix", "title": "Renaming two files in multiple folders by adding suffix and prefix", "body": "<p>I have multiple folders where two files are present.</p>\n\n<p>For example,  <code>123.jpg</code>, <code>456.jpg</code> under folder <code>ABC</code>. I want to rename the files to <code>IT1_ABC_123.v1.jpg</code> and <code>IT2_ABC_456.v1.jpg</code>. Similarly,  other folders have two files.</p>\n\n<p>How can I do this in shell or Perl?</p>\n"}, {"tags": ["list", "perl", "sorting", "comparison"], "answers": [{"comments": [{"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "edited": false, "score": 0, "creation_date": 1524395911, "post_id": 49965213, "comment_id": 86946435, "body": "Thanks. When &quot;&gt;&quot; would be used ?"}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "reply_to_user": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "edited": false, "score": 2, "creation_date": 1524397832, "post_id": 49965213, "comment_id": 86946937, "body": "You use normal comparison operators <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code> and <code>&lt;=</code> when you&#39;re just trying to find out whether that specific mathematical equation or inequation holds true. They return a true or false value.  Sort requires a three-valued comparison, where the same operator (or function) can return 1, 0 or -1 depending on the order of the two items. <code>$x &lt;=&gt; $y</code> is equal to <code>$x &lt; $y ? -1 : ($x &gt; $y ? 1 : 0)</code>."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1524429401, "post_id": 49965213, "comment_id": 86956845, "body": "@Silvar answered well. But if speed is a concern, if maybe <code>@times</code> have thousands of elements, then you should also do the sort with a Schwartzian transform like this: <code>my @stimes = map $$_[0], sort {$$a[1]&lt;=&gt;$$b[1]} map [$_,convert($_)], @times;</code> with <code>sub convert { shift() =~ &#47;\\b(\\d+)([munpf]*s)\\b&#47; ? $1*$scales{$2} : die }</code>. This way, you will never convert the same number more than once. For more: <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Schwartzian_transform</a>"}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 7, "last_activity_date": 1524423118, "last_edit_date": 1524423118, "creation_date": 1524395034, "answer_id": 49965213, "question_id": 49965106, "link": "https://stackoverflow.com/questions/49965106/issue-when-sorting-a-list-in-perl/49965213#49965213", "title": "issue when sorting a list in perl", "body": "<p>Your error is on the line</p>\n\n<pre><code>return $v1 &gt; $v2;\n</code></pre>\n\n<p>It will return 1 (true) if <code>$v1</code> is greater than <code>$v2</code> and <code>0</code> (false) in all other cases.</p>\n\n<p>You want to instead use the numerical comparison operator <code>&lt;=&gt;</code>:</p>\n\n<pre><code>return $v1 &lt;=&gt; $v2;\n</code></pre>\n\n<p>which will return 1, 0 or -1 depending on the comparison result and will allow the sort to do its work correctly. (If you were dealing with strings instead of numbers, the operator would be <code>cmp</code>.)</p>\n\n<p>Complete working code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %scales = ('fs'=&gt;1e-15,'ps'=&gt;1e-12,'ns'=&gt;1e-9,'us'=&gt;1e-6,'ms'=&gt;1e-3,'s'=&gt;1);\nmy @times = ('1s','7ns','100ps','500ms','9us');\nmy @stimes = sort bytime @times;\n\nsub bytime {\n    my $op1 = $a;\n    my $op2 = $b;\n    $op1 =~ /\\b(\\d+)([munpf]*s)\\b/;\n    my $v1 = $1 * $scales{$2};\n    $op2 =~ /\\b(\\d+)([munpf]*s)\\b/;\n    my $v2 = $1 * $scales{$2};\n    return $v1 &lt;=&gt; $v2;\n}\n\nprint \"@times\".\"\\n\".\"@stimes\".\"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1s 7ns 100ps 500ms 9us\n100ps 7ns 9us 500ms 1s\n</code></pre>\n"}], "owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 49965213, "answer_count": 1, "score": 1, "last_activity_date": 1524423118, "creation_date": 1524394338, "question_id": 49965106, "link": "https://stackoverflow.com/questions/49965106/issue-when-sorting-a-list-in-perl", "title": "issue when sorting a list in perl", "body": "<p>I have a list of strings which denote time values, i.e. 1us, 100ps, 10s, 7fs (microseconds, picoseconds, seconds, femtoseconds, etc). \nI need to sort the list in ascending order. To do that, I wrote a comparison routine which when given two strings, translates each string into the corresponding numerical value and compares them. Still, the list is not sorted correctly. After much debugging, I'm at a loss. Here's my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n   my %scales = ('fs'=&gt;1e-15,'ps'=&gt;1e-12,'ns'=&gt;1e-9,'us'=&gt;1e-6,'ms'=&gt;1e-3,'s'=&gt;1);\n   my @times = ('1s','7ns','100ps','500ms','9us');\n   my @stimes = sort bytime @times;\n   sub bytime {\n\n      my $op1 = $a;\n      my $op2 = $b;\n      $op1 =~ /\\b(\\d+)([munpf]*s)\\b/;\n      my $v1 = $1 * $scales{$2};\n      $op2 =~ /\\b(\\d+)([munpf]*s)\\b/;\n      my $v2 = $1 * $scales{$2};\n      return $v1 &gt; $v2;\n}\n\nprint \"@times\".\"\\n\".\"@stimes\".\"\\n\";\n</code></pre>\n\n<p>The result I get is:</p>\n\n<p>1s 7ns 100ps 500ms 9us</p>\n\n<p>100ps 7ns 500ms 1s 9us</p>\n\n<p>which is clearly wrong, even though some sorting takes place. \nWhat's going on?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524400251, "post_id": 49964967, "comment_id": 86947534, "body": "<i>You should never</i> use <code>&amp;</code> to call a Perl subroutine. Just <code>toepoch(&#39;2018-04-02 11:00&#39;)</code> is correct."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524397094, "post_id": 49965383, "comment_id": 86946757, "body": "Thank You very much! I missed this info. With --$a[1] working fine!"}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "reply_to_user": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524397465, "post_id": 49965383, "comment_id": 86946847, "body": "Added another note about the formatting of the final output."}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 4, "last_activity_date": 1524399206, "last_edit_date": 1524399206, "creation_date": 1524396431, "answer_id": 49965383, "question_id": 49964967, "link": "https://stackoverflow.com/questions/49964967/perl-calculate-the-difference-in-days-between-two-dates-on-ms-windows-and-linu/49965383#49965383", "title": "Perl - calculate the difference in days between two dates on MS Windows and Linux", "body": "<p>From the documentation for <code>Time::Local</code>:</p>\n\n<blockquote>\n  <p>It is worth drawing particular attention to the expected ranges for\n  the values provided. The value for the day of the month is the actual\n  day (ie 1..31), while the month is the number of months since January\n  (0..11). This is consistent with the values returned from\n  \"localtime()\" and \"gmtime()\".</p>\n</blockquote>\n\n<p>So by supplying <code>timelocal</code> the array <code>(0, 00, 11, 31, 03, 18)</code> you're trying to use day 31 of month 4, which doesn't work since April only ever has 30 days. If only the error message included the month it's assuming!</p>\n\n<p>When doing the conversion, you need to mind to keep month values within 0..11 and adjust the year accordingly.</p>\n\n<p>(Alternately you can use <code>timelocal_nocheck()</code> to be allowed to input month -1 and have the function do the conversion to the previous year. Although if you <em>did</em> use that function, you'd have had a bug that was a lot harder to track down, since it would have automatically converted 31st of April to 1st of May and you'd have no idea why your time difference is only 1 day.)</p>\n\n<p>Secondly, you have a misplaced parenthesis on the calculation line, so you divide only the latter time by 86400.</p>\n\n<p>My edited code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Time::Local;\nuse POSIX;\n\nsub toepoch {\n    my @a = split /[- :]/, $_[0];\n    $a[0] =~ s/^.{2}//;\n    if (! defined $a[5]) {\n        $a[5] = 00\n    }\n    --$a[1];\n    if ($a[1] &lt; 0) {\n        --$a[0];\n        $a[1] += 12;\n    }\n    my $b = timelocal($a[5], $a[4], $a[3], $a[2], $a[1], $a[0]);\n    return $b;\n}\n\nmy $days = sprintf(\"%d\",(&amp;toepoch('2018-03-31 11:00') - &amp;toepoch('2018-04-02 11:00')) / 86400);\nprint $days;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-2\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I assume you know what you're doing when using format <code>%d</code> for the value - it truncates the value down to the next whole number, meaning if you had dates</p>\n\n<pre><code>2018-03-31 11:00\n2018-04-02 10:59\n</code></pre>\n\n<p>that is, just 1 minute short of 2 days, your program would report the time difference as \"-1\".</p>\n\n<p>To round to nearest whole number, use the format <code>%.0f</code> instead.</p>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 49965383, "answer_count": 1, "score": 0, "last_activity_date": 1524399206, "creation_date": 1524393264, "question_id": 49964967, "link": "https://stackoverflow.com/questions/49964967/perl-calculate-the-difference-in-days-between-two-dates-on-ms-windows-and-linu", "title": "Perl - calculate the difference in days between two dates on MS Windows and Linux", "body": "<p>My script calculates the difference in days between two dates. However, all the time I encounter errors. The solution must work for all OS. It is advisable to do it in UNIX epoch time, but if it is impossible then there may be another solution.</p>\n\n<p>I tried:<br>\n<code>Time::ParseDate</code> - does not work on MS Windows<br>\n<code>Time::Local</code> - does not work on dates from the 31st of the month</p>\n\n<p>Sample code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Time::Local;\nuse POSIX;\n\nsub toepoch {\n  my @a = split /[- :]/, $_[0];\n  $a[0] =~ s/^.{2}//;\n  if (! defined $a[5]) {\n    $a[5] = 00\n  }\n  my $b = timelocal($a[5], $a[4], $a[3], $a[2], $a[1], $a[0]);\n  return $b;\n}\n\nmy $days = sprintf(\"%d\",(&amp;toepoch('2018-03-31 11:00') - &amp;toepoch('2018-04-02 11:00') / 86400));\nprint $days;\n</code></pre>\n\n<p>Output: <code>Day '31' out of range 1..30 at epoch.pl line 12.</code></p>\n\n<p>What module should I check in next? I remind you that the solution must work on UNIX and MS Windows systems.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1524352845, "creation_date": 1524352845, "answer_id": 49961050, "question_id": 49960948, "link": "https://stackoverflow.com/questions/49960948/find-duplicate-filenames-and-append-them-to-hash-of-arrays/49961050#49961050", "title": "find duplicate filenames and append them to hash of arrays", "body": "<p>You can use <a href=\"http://p3rl.org/push\" rel=\"nofollow noreferrer\">push</a>, but you have to dereference the array referenced by the hash value:</p>\n\n<pre><code>push @{ $hash{$key} }, $filename;\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/perlref\" rel=\"nofollow noreferrer\">perlref</a> for details.</p>\n"}, {"comments": [{"owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 0, "creation_date": 1524403904, "post_id": 49961108, "comment_id": 86948517, "body": "...what&#39;s the reason for downvoting?"}], "tags": [], "owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "is_accepted": true, "score": 2, "last_activity_date": 1524353390, "creation_date": 1524353390, "answer_id": 49961108, "question_id": 49960948, "link": "https://stackoverflow.com/questions/49960948/find-duplicate-filenames-and-append-them-to-hash-of-arrays/49961108#49961108", "title": "find duplicate filenames and append them to hash of arrays", "body": "<pre><code>use strict;\nuse warnings;\nmy %unique_import_hash;\n\nmy $log_filename = \"file.log\";\nopen(my $log_fh, \"&lt;\" . $log_filename);\n\nwhile (my $line = &lt;$log_fh&gt;) {\n    $line =~ s/ *: */:/g;\n    (my $log_type, my $log_import_filename, my $log_object_filename) = split /:/, $line;\n    push (@{$unique_import_hash{$log_import_filename}}, $log_object_filename);\n}\n</code></pre>\n\n<p>Seek the wisdom of the <a href=\"https://www.perlmonks.org/?node_id=1977\" rel=\"nofollow noreferrer\">Perl monks</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 2, "creation_date": 1524394771, "post_id": 49963198, "comment_id": 86946169, "body": "My thought exactly. I was however afraid of not knowing the whole problem: since he asked a <i>specific</i> question, he may have had some other use for it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 0, "creation_date": 1524400088, "post_id": 49963198, "comment_id": 86947496, "body": "@simlev: Indeed. Moreover the question in the subject line is very different from tye question in the post."}, {"owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "edited": false, "score": 0, "creation_date": 1525042345, "post_id": 49963198, "comment_id": 87200259, "body": "I&#39;m writing my own version of a git-like versioned file system with the intent of using it in a game. Game engines seem to almost universally suck wrt to filesystems. I want an incremental build based on patches. I feel like having access to previous file versions is really useful for doing A/B testing and seeing differences between versions of content and the like. Right now, I use a log that contains all versions of all files imported. Then I used the answer&#39;s code to filter out all but the last entry foreach unique import. Thanks guys."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 4, "last_activity_date": 1524378617, "creation_date": 1524378617, "answer_id": 49963198, "question_id": 49960948, "link": "https://stackoverflow.com/questions/49960948/find-duplicate-filenames-and-append-them-to-hash-of-arrays/49963198#49963198", "title": "find duplicate filenames and append them to hash of arrays", "body": "<p>If you only care about the <em>last</em> value for each key, you're over-thinking the problem. No need to fool around with arrays when a simple assignment will overwrite the previous value:</p>\n\n<pre><code>while (my $line = &lt;$log_fh&gt;) {\n    # ...\n    $unique_import_hash{$log_import_filename} = $log_object_filename;\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 49961108, "answer_count": 3, "score": 1, "last_activity_date": 1524382421, "creation_date": 1524351803, "last_edit_date": 1524382421, "question_id": 49960948, "link": "https://stackoverflow.com/questions/49960948/find-duplicate-filenames-and-append-them-to-hash-of-arrays", "title": "find duplicate filenames and append them to hash of arrays", "body": "<p>Perl question: I have a colon separated file containing paths that I'm using. I just split using a regex, like this:</p>\n\n<pre><code>my %unique_import_hash;\n\nwhile (my $line = &lt;$log_fh&gt;) {\n    my ($log_type, $log_import_filename, $log_object_filename) \n        = split /:/, line;\n\n    $log_type =~ s/^\\s+|\\s+$//g; # trim whitespace\n    $log_import_filename =~ s/^\\s+|\\s+$//g; # trim whitespace\n    $log_object_filename =~ s/^\\s+|\\s+$//g; # trim whitespace\n}\n</code></pre>\n\n<p>The exact file format is:</p>\n\n<pre><code>type : source-filename : import-filename\n</code></pre>\n\n<p>What I want is an index file that contains the last pushed <code>$log_object_filename</code> for each unique key <code>$log_import_filename</code>, so, what I'm going to do in English/Perl pseudo-code is push the <code>$log_object_filename</code> onto an array indexed by the hash <code>%unique_import_hash</code>. Then, I want to iterate over the keys and pop the array referred by <code>%unique_import_hash</code> and store it in an array of scalars. </p>\n\n<p><strong>My specific question is</strong>: <em>what is the syntax for appending to an array that is the value of a hash?</em></p>\n"}, {"tags": ["perl", "class"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1524318487, "post_id": 49954465, "comment_id": 86929023, "body": "That&#39;s working fine. <code>student=HASH(0x238ae98)</code> says that you have a <code>student</code> object formed from a hash at address <code>0x238ae98</code>. You need to <i>do a lot more reading</i>."}], "answers": [{"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1524400487, "post_id": 49954938, "comment_id": 86947590, "body": "Please don&#39;t start the keys of the hash with underscores. The conventions are: no prefix for data elements; a minus sign for options (if any); and a space for those things only the brave or foolish should modify. \ud83d\ude42"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1524418861, "post_id": 49954938, "comment_id": 86953506, "body": "I&#39;ve been using POerl since version 4. It&#39;s weird code (not books) where I have seen this."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1524315690, "last_edit_date": 1524315690, "creation_date": 1524307447, "answer_id": 49954938, "question_id": 49954465, "link": "https://stackoverflow.com/questions/49954465/i-cant-get-a-class-to-work/49954938#49954938", "title": "I can&#39;t get a class to work", "body": "<p>This looks very much like a homework question, so I'm hesitating to give you a complete answer. You appear to have very little knowledge of Perl, and have made little effort to read about Perl's object-oriented ideas, using wild guesses to fill the gaps. You're not going to learn the language that way</p>\n\n<p>You should <em>never</em> call a Perl subroutine using an ampersand, and <em>methods</em> need to be called on a class or object, so <code>&amp;new</code> should be <code>Data-&gt;new(...)</code>. Also every Perl source file you write should begin with <code>use strict</code> and <code>use warnings 'all'</code></p>\n\n<p>That's a very odd way of creating an object. You would ordinarily create a separate Perl program that does <code>use Data</code> and then <code>my $object = Data-&gt;new($student)</code>. Instead you are calling <code>&amp;new</code>, which passes no parameters and is the reason for your <em>uninitialized value</em> error</p>\n\n<p>It isn't at all obvious what your <code>$student</code> value is supposed to be, but after using <code>shift</code> to get its value from <code>@_</code> you then overwrite it with a hash reference</p>\n\n<p>You should also be passing values for the hash contents via the <code>new</code> constructor call, rather than getting the module itself to read from <code>STDIN</code>. You also fail to <code>chomp</code> those values so that they will retain their terminating newlines, which you're unlikely to want</p>\n\n<p>I suggest that you separate your code into <code>Data.pm</code> (perhaps <code>Student.pm</code>?) and <code>main.pl</code> and start by writing the code using constant values instead of reading from the keyboard</p>\n\n<p>Something like this</p>\n\n<h3>Student.pm</h3>\n\n<pre><code>package Student;\n\nuse strict;\nuse warnings 'all';\n\nsub new {\n    my $class = shift;\n    my ($first, $last, $matric) = @_;\n\n    my $self = {\n        _firstName =&gt; $first,\n        _lastName  =&gt; $last,\n        _matric    =&gt; $matric,\n    };\n\n    bless $self, $class;\n}\n\n1;\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse Student;\n\nmy $student =  Student-&gt;new('John', 'Smith', 1987);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1525074745, "last_edit_date": 1525074745, "creation_date": 1524488971, "answer_id": 49981968, "question_id": 49954465, "link": "https://stackoverflow.com/questions/49954465/i-cant-get-a-class-to-work/49981968#49981968", "title": "I can&#39;t get a class to work", "body": "<p>If you're insisting on keeping all of the code in a single file, then you should at least move the \"non-class\" code into a separate package.</p>\n\n<pre><code>#!/usr/ bin/perl\n\nuse strict;\nuse warnings 'all';\n\n# Capital letters for user-defined packages, please\npackage Student;\n\nsub new {\n    my $class = shift;\n    my ($first, $last, $matric) = @_;\n    my $self = {\n        _firstName =&gt; $first,\n        _lastName =&gt; $last,\n        _matric =&gt; $matric,\n    };\n    bless $self, $class;\n}\n\npackage main;\n\n# $self is only used as a variable name within methods.\nmy $student = Student-&gt;new('victor','valdes','csc');\nprint $student;\n</code></pre>\n\n<p>But that's just good practice, it isn't really affecting anything in your code. You say you get this output:</p>\n\n<blockquote>\n  <p>student=HASH(0x238ae98)</p>\n</blockquote>\n\n<p>You describe it as an error, but it's not an error at all That's exactly what I'd expect from your code. Your <code>$self</code> variable (which I've renamed as <code>$student</code>) is a blessed hash reference. And that's what you get if you print a blessed hash reference.</p>\n\n<p>But if you want to see more of the structure of your object, you can use Data::Dumper (a standard Perl library).</p>\n\n<pre><code>package main;\n\nuse Data::Dumper;\n\n# $self is only used as a variable name within methods.\nmy $student = Student-&gt;new('victor','valdes','csc');\nprint Dumper $student;\n</code></pre>\n\n<p>That gives me:</p>\n\n<pre><code>$VAR1 = bless( {\n                 '_lastName' =&gt; 'valdes',\n                 '_firstName' =&gt; 'victor',\n                 '_matric' =&gt; 'csc'\n               }, 'Student' );\n</code></pre>\n\n<p>It's not clear to me what you expected your <code>print()</code> statement to produce. But if you want to display attributes from your object, then you need to write accessor methods inside your class. For example, a method to return the matric value would look like this:</p>\n\n<pre><code>sub matric {\n    my $self = shift;\n    return $self-&gt;{_matric};\n}\n</code></pre>\n\n<p>And in the main package you would call it like this:</p>\n\n<pre><code>print $student-&gt;matric;\n</code></pre>\n\n<p>But I have to agree with Borodin. It very much looks like you're trying to teach yourself object oriented programming in Perl without knowing much about either object oriented programming or Perl. And guessing at concepts and syntax is rarely a successful approach.</p>\n\n<p>I'll also add that the \"classic\" style of Perl OO that you're using has been largely superseded by modern OO frameworks like <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\">Moo</a>. You might have more success using that.</p>\n"}], "owner": {"reputation": 134, "user_id": 9678193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fea879a99e77e9f3f59410018d5e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Viqtoh", "link": "https://stackoverflow.com/users/9678193/viqtoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1542431922, "creation_date": 1524304289, "last_edit_date": 1524312740, "question_id": 49954465, "link": "https://stackoverflow.com/questions/49954465/i-cant-get-a-class-to-work", "title": "I can&#39;t get a class to work", "body": "<p>I want to create a Perl class.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/ bin/perl\n\npackage Data;\n\nsub new\n{ my ($class, $student) = @_;\n$class = shift;\n$student = shift;\n$student = {_firstName =&gt; &lt;&gt;,\n            _lastName =&gt; &lt;&gt;,\n             _matric =&gt; &lt;&gt;,\n            };\nbless $student,$class;\nprint $student;\n}\n&amp;new;    \n</code></pre>\n\n<p>And I got this error:</p>\n\n<blockquote>\n  <p>main=HASH(0x215fc40)Use of uninitialized value $class in bless at source_file.pl line 12.\n  Explicit blessing to '' (assuming package main) at source_file.pl line 12.</p>\n</blockquote>\n\n<hr>\n\n<p>I use dcoder and I don't think it supports separating the program. But though I corrected it but it still leaves no output. I tried to print <code>$self</code> but it left an error. Here's the entire code:</p>\n\n<pre><code>#!/usr/ bin/perl\nuse strict;\nuse warnings 'all';\n\npackage student;\n\nsub new {\n my $class = shift;\n    my ($first, $last, $matric) = @_;\n    my $self = {\n        _firstName =&gt; $first,\n        _lastName =&gt; $last,\n        _matric =&gt; $matric,\n        };\n    bless $self, $class;\n    }\n\nmy $self = student-&gt;new('victor','valdes','csc');\nprint $self;\n</code></pre>\n\n<p>And here's the error:</p>\n\n<blockquote>\n  <p>student=HASH(0x238ae98)</p>\n</blockquote>\n\n<p>I'm sorry I'm really new at this and still don't understand.</p>\n"}, {"tags": ["html", "apache", "perl", "cgi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1524292615, "post_id": 49952002, "comment_id": 86922659, "body": "Whining about it isn&#39;t useful, and not appropriate here. And if you were to come up with a question, it would be about Apache and/or file permissions, which is the domain of Super User, not StackOverflow."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1524292778, "post_id": 49952002, "comment_id": 86922697, "body": "httpd logs. Check them."}, {"owner": {"reputation": 11, "user_id": 9677327, "user_type": "registered", "profile_image": "https://graph.facebook.com/2075610399349640/picture?type=large", "display_name": "ditchner", "link": "https://stackoverflow.com/users/9677327/ditchner"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1524326737, "post_id": 49952002, "comment_id": 86931417, "body": "@\u0421\u0443\u0445\u043e\u043927 My question was nothing like the question you said was an exact duplicate.  That question was about a perl script that was not written correctly.  Mine has been working for years but something on the server (Apache) changed, I don&#39;t have access to the administrative areas, httpd logs,, and the admins there only respond to questions about Wordpress which seems to have taken over the world. As far as I can tell, the file permissions are not the problem.  I came here because I saw that questions of this nature had been answered in the past.  Again, my perl script is written correctly!"}, {"owner": {"reputation": 2291, "user_id": 1577662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4cP0W.jpg?s=128&g=1", "display_name": "Joe T", "link": "https://stackoverflow.com/users/1577662/joe-t"}, "edited": false, "score": 0, "creation_date": 1524349736, "post_id": 49952002, "comment_id": 86937890, "body": "you might need to get a new server you have full control over, AWS has a free tier that you could at least experiment with."}], "owner": {"reputation": 11, "user_id": 9677327, "user_type": "registered", "profile_image": "https://graph.facebook.com/2075610399349640/picture?type=large", "display_name": "ditchner", "link": "https://stackoverflow.com/users/9677327/ditchner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1524292660, "answer_count": 0, "score": 0, "last_activity_date": 1524303747, "creation_date": 1524280167, "last_edit_date": 1524303747, "question_id": 49952002, "link": "https://stackoverflow.com/questions/49952002/apache-forbidden-error-when-trying-to-run-a-perl-script", "closed_reason": "Duplicate", "title": "Apache forbidden error when trying to run a Perl script", "body": "<p>I'm running an old-fashioned HTML web page with a simple Perl script on a shared server so I have no access to the main <code>httpd.conf</code> file.</p>\n\n<p>Suddenly, after several years, I'm getting a <em>\"Forbidden You don't have permission to access /file on this server\"</em>.</p>\n\n<p>The Perl script runs fine from the shell so I guess it's an Apache problem, but tech support will answer only WordPress questions.</p>\n\n<p>This script has been running fine for years!</p>\n"}, {"tags": ["perl", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "edited": false, "score": 0, "creation_date": 1524313703, "post_id": 49951773, "comment_id": 86927880, "body": "Hi Robert do you know if there are any alternative ?"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "edited": false, "score": 0, "creation_date": 1524324192, "post_id": 49951773, "comment_id": 86930668, "body": "@jsor I don&#39;t know, but I doubt it, if Google retired the API."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 1, "creation_date": 1524391803, "post_id": 49951773, "comment_id": 86945486, "body": "There are several online tools that give you something like that, but nowadays PageRank is not the only tool to compute the placement of a result on Google; there are many filters, and lots of things to take into account. I think Google AdSense does have some tools to compute how pages are ranked according to search queries, but nowadays there&#39;s nothing as simple as that."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": false, "score": 6, "last_activity_date": 1524277151, "creation_date": 1524277151, "answer_id": 49951773, "question_id": 49950899, "link": "https://stackoverflow.com/questions/49950899/wwwgooglepagerank-not-working/49951773#49951773", "title": "WWW::Google::PageRank not working", "body": "<p>That page rank module is quite old, are you sure this API is still supported by Google?</p>\n\n<p>The <a href=\"http://search.cpan.org/~ykar/WWW-Google-PageRank/lib/WWW/Google/PageRank.pm\" rel=\"noreferrer\">Perldoc</a> says it will query <code>http://toolbarqueries.google.com/</code> by default. That gets me a HTTP 404 page not found error. The Perldoc says this will result in the <code>undef</code> you are seeing.</p>\n\n<p>Wikipedia says on <a href=\"https://en.wikipedia.org/wiki/PageRank#Google_Toolbar\" rel=\"noreferrer\">page rank</a> that Google removed this API in 2016, which fits the observed behavior.</p>\n\n<p>Long story short: don't use the WWW::Google::PageRank module.</p>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524389438, "creation_date": 1524266913, "last_edit_date": 1524389438, "question_id": 49950899, "link": "https://stackoverflow.com/questions/49950899/wwwgooglepagerank-not-working", "title": "WWW::Google::PageRank not working", "body": "<p>I am trying to run the following code :</p>\n\n<pre><code> use WWW::Google::PageRank;\n my $pr = WWW::Google::PageRank-&gt;new;\n print scalar($pr-&gt;get('http://www.yahoo.com/'));\n</code></pre>\n\n<p>with every site it returns <code>undef</code> value?</p>\n\n<p>When I debugged the HTTP::Request I get 404, worth to mention that I am not behind a proxy any </p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1524264218, "creation_date": 1524264218, "answer_id": 49950600, "question_id": 49950421, "link": "https://stackoverflow.com/questions/49950421/mojolicious-render-to-string-and-stash-values-and-output/49950600#49950600", "title": "Mojolicious render_to_string and stash values and output", "body": "<p><code>data</code> is a <a href=\"http://mojolicious.org/perldoc/Mojolicious/Controller#stash\" rel=\"nofollow noreferrer\">reserved stash value</a> in Mojolicious. You could pass the data in a different stash value and the template will get it.</p>\n\n<pre><code># app.pl\nuse Mojolicious::Lite;\nget '/export' =&gt; sub {\n    my $self = shift;\n    $self-&gt;stash(data =&gt; { foo =&gt; \"bar\" });\n    $self-&gt;stash(datx =&gt; { foo =&gt; \"baz\" });\n    $self-&gt;render_to_string();\n};\napp-&gt;start;\n__DATA__\n\n@@ export.html.ep\n% my $data = stash 'data';\n% my $datx = stash 'datx';\n&lt;div&gt;\nbar: &lt;%= $data-&gt;{foo} %&gt;&lt;p/&gt;\nbaz: &lt;%= $datx-&gt;{foo} %&gt;&lt;p/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>$ perl app.pl get /export\n[Fri Apr 20 18:43:20 2018] [debug] Your secret passphrase needs to be changed\n[Fri Apr 20 18:43:20 2018] [debug] GET \"/export\"\n[Fri Apr 20 18:43:20 2018] [debug] Routing to a callback\n[Fri Apr 20 18:43:20 2018] [debug] Rendering template \"export.html.ep\" from DATA section\n[Fri Apr 20 18:43:20 2018] [debug] 200 OK (0.002478s, 403.551/s)\n&lt;div&gt;\nbar: &lt;p/&gt;\nbaz: baz&lt;p/&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 158575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50c5f04c098fa8e109cbccc2d116a4d5?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/158575/todd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 49950600, "answer_count": 1, "score": 3, "last_activity_date": 1524264218, "creation_date": 1524262695, "question_id": 49950421, "link": "https://stackoverflow.com/questions/49950421/mojolicious-render-to-string-and-stash-values-and-output", "title": "Mojolicious render_to_string and stash values and output", "body": "<p>I'm missing a piece here, hoping someone can point me to what I've done wrong.</p>\n\n<p>Mojolicious app has a route /export that creates a href and sends that data to the export.html.ep template for rendering to a string (going to generate an email)</p>\n\n<p>The template has been stripped to bare bones for testing:</p>\n\n<pre><code>% my $data = stash 'data';\n% dumper $data;\n\n&lt;div&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The export route function:</p>\n\n<pre><code>use base 'Mojolicious::Controller';\n...\nsub export {\n    my $self = shift;\n    my $log  = $self-&gt;log;\n    my $href = {\n        foo =&gt; \"bar\",\n        boom =&gt; [ \"three\", \"two\", \"one\" ],\n    };\n\n    $self-&gt;stash(data =&gt; $href);\n    my $html = $self-&gt;render_to_string();\n    $log-&gt;debug(\"html is \", { filter =&gt; \\&amp;Dumper, value =&gt; $html });\n}\n</code></pre>\n\n<p>My tester is export.t:</p>\n\n<pre><code>...\n$t-&gt;get_ok(\"/export\")-&gt;status_is(200);\nprint Dumper($t-&gt;tx-&gt;res-&gt;content-&gt;asset-&gt;slurp);\n...\n</code></pre>\n\n<p>In my Log I see:</p>\n\n<pre><code>html is $VAR1 = bless( do{\\(my $o = 'HASH(0xad01ef0)')}, 'Mojo::ByteStream' );\n</code></pre>\n\n<p>on STDOUT I see:</p>\n\n<pre><code>ok 1 - GET /export\nok 2 - 200 OK\n$VAR1 = '\n\n&lt;div&gt;&lt;/div&gt;\n';\n</code></pre>\n\n<p>So it looks like $data isn't making it to the template.  Also, I would expect render_to_sting to provide a string and not a Mojo::ByteStream.</p>\n\n<p>How do I get the $href into the template and how do I get text/html out of the template rendering.</p>\n\n<p>(Latest version of Mojo, perl 5.22, ubuntu 16.04 system)</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["perl", "email", "download", "email-attachments", "mime"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1524256768, "post_id": 49949066, "comment_id": 86915341, "body": "The content type of the message is <code>multipart&#47;; boundary=&quot;...&quot;</code>, but it should be <code>multipart&#47;SOMETHING; boundary=&quot;...&quot;</code> (probably <code>multipart&#47;mixed; boundary=&quot;...&quot;</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524256773, "post_id": 49949066, "comment_id": 86915347, "body": "Tip: <code>my ($OUT, $out_file);</code> is incorrectly located. It should be inside the <code>if</code>. (<code>my ($OUT, $out_file) = tempfile();</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524256777, "post_id": 49949066, "comment_id": 86915351, "body": "Tip: No need to escape <code>-</code> in regex patterns (unless it&#39;s in a character class (<code>[...]</code>))."}, {"owner": {"reputation": 375, "user_id": 4971558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c0662c98a4fd6df761536c99c2856a1?s=128&d=identicon&r=PG&f=1", "display_name": "jdubu423", "link": "https://stackoverflow.com/users/4971558/jdubu423"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524272449, "post_id": 49949066, "comment_id": 86919292, "body": "@ikegami you were correct.  I changed the message string from multipart/; boundary= to multipart/mixed; boundary= and it worked!"}], "owner": {"reputation": 375, "user_id": 4971558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c0662c98a4fd6df761536c99c2856a1?s=128&d=identicon&r=PG&f=1", "display_name": "jdubu423", "link": "https://stackoverflow.com/users/4971558/jdubu423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524255109, "creation_date": 1524255109, "question_id": 49949066, "link": "https://stackoverflow.com/questions/49949066/invalid-content-type-multipart-boundary", "title": "Invalid Content-Type &#39;multipart/; boundary", "body": "<p>I am using Perl and Email::MIME to access an email account via IMAP.  When I try to download the attachment, I get this error:</p>\n\n<blockquote>\n  <p>Invalid Content-Type 'multipart/;\n  boundary=\"===============6113972194662902815==\"' at\n  /path/to/class/Reader.pm line 99.</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>my $env = $self-&gt;env();\nmy $imap = $self-&gt;imap();\nmy $logger = $self-&gt;logger();\n\nmy ($OUT, $out_file);\n\n# parse attachment\nmy $message_string = $imap-&gt;message_string($imap_id);\n\nEmail::MIME-&gt;new($message_string)-&gt;walk_parts(sub {\n\n    my ($part) = @_;\n\n    if ($part-&gt;content_type =~ /octet\\-stream/) {\n        ($OUT, $out_file) = tempfile();\n        binmode $OUT;\n\n        print $OUT $part-&gt;body;\n        close $OUT;\n\n        $logger-&gt;info(\"downloaded attached report: [$out_file]\");\n    }\n\n});\n</code></pre>\n\n<p>Here is the end of the dump of the $part:</p>\n\n<pre><code>MixOLE4sTiwwLE4NCiI9IiIyMDE4LTA0LTE5IDA5OjU5OjI5LjQ5NCIiIixhZTJhNDEzMy1hYWRj\nLTQ4ZjgtYWY0My1jYjdhMGEzYzQzMzIsIkFwcGxpYW5jZSBwYXJ0cywgaG91c2Vob2xkIixBcHBs\naWFuY2UgU2FsZXMsTUlETE9USElBTixWQSxWYWN1dW0gU3lzdGVtcyw4MDQ1NDg0MTgxLCAsYTEx\nOGUxODIyMTAwNzJkYSxEVVJBVElPTiw0NSwyLjQ3ODQsTixOLE4sMCxODQoiPSIiMjAxOC0wNC0x\nOSAwOTo1OToyOS45MSIiIiwxZTNlZGQzZi02NGM0LTQ3M2UtODk2Yy00MTI3ZTVhYzIwYWUsRklO\nQU5DRXxGSU5BTkNJQUwgSU5TVElUVVRJT05TfEJBTktTLEJhbmtzLEdSRUVOU0JVUkcsUEEsRmly\nc3QgRmVkZXJhbCBTYXZpbmdzICYgTG9hbiBBc3NvY2lhdGlvbiBPZiAgR3JlZW4sODQ0MjU1MTk0\nMSwgLDgzNDA0NmQ2MWEyYzRkY2UsRFVSQVRJT04sNDUsNS4wLE4sTixOLDAsTg0KIj0iIjIwMTgt\nMDQtMTkgMDk6NTk6MjkuOTE1IiIiLGY1YTBmOTc1LTg1MmUtNDAwNC05YTY1LWEzYzgyNDJlYTQy\nNywiaW5zdXJhbmNlLCBsZW5kZXJzLCBtb3J0Z2FnZXMiLExvYW5zICYgTW9ydGdhZ2VzLE1hbmFz\ncXVhbixOSixDb21tZXJjaWFsIE1vcnRnYWdlIEFzc29jaWF0ZXMgSW5jLiw3MzI0NTEzMzU0LCAs\nZGQ5YTQ4OGVmYjJiY2NlMSxEVVJBVElPTiw0NSwzLjQ0MzUsTixOLE4sMCxODQo=\n\n--===============6113972194662902815==--\n\",\n    ct           =&gt; {\n        attributes =&gt; {\n            charset =&gt; \"us-ascii\"\n        },\n        composite  =&gt; \"plain\",\n        discrete   =&gt; \"text\",\n        subtype    =&gt; \"plain\",\n        type       =&gt; \"text\"\n    },\n    encode_check =&gt; 1,\n    header       =&gt; Email::MIME::Header,\n    mycrlf       =&gt; \"\n\",\n         parts        =&gt; []\n    }\n} \n</code></pre>\n\n<p>I have tried several different methods of downloading this file and I keep getting that error.  Let me know if there are any questoins</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1524242340, "post_id": 49946138, "comment_id": 86908780, "body": "This only finds employee numbers that start with a digit. Add a <code>+</code>: <code>[0-9]+</code> or <code>\\d+</code> and a word boundary marker: <code>\\d+\\b</code> or newline <code>\\d+\\n</code>"}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "edited": false, "score": 1, "creation_date": 1524242734, "post_id": 49946138, "comment_id": 86908981, "body": "It looks like you&#39;re pasting real employee data.  If I were you I would edit that out.  Idk where this is from but usually it&#39;s frowned upon to post real data like that on the internet."}, {"owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1524243042, "post_id": 49946138, "comment_id": 86909126, "body": "@Robert is this what you meant? perl -000 -ne &#39;print if /employeeID+: [0-9]+/i&#39; testfile"}, {"owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "reply_to_user": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "edited": false, "score": 1, "creation_date": 1524243132, "post_id": 49946138, "comment_id": 86909175, "body": "@0112 this is not a real data, my lab and even I modified the entires before I pasted..thanks"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524243894, "post_id": 49946138, "comment_id": 86909589, "body": "It&#39;s not clear what you want. Records where employee ID contains a digit?"}, {"owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524244064, "post_id": 49946138, "comment_id": 86909683, "body": "@choroba Yes correct, employeeID contains a digit, but when pulling it should pull all the attributes that is associated to it, like dn, userAccountControl, etc."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524244550, "post_id": 49946138, "comment_id": 86909918, "body": "This looks like an LDIF file. Why don&#39;t you parse it as such?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1524245223, "post_id": 49946138, "comment_id": 86910260, "body": "The result you say you&#39;re looking for has &#39;testuser&#39; and looks like the same as your input?"}], "answers": [{"comments": [{"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524244726, "post_id": 49946650, "comment_id": 86910003, "body": "If I understand correctly you want a regex that matches all entries in your file where the employee ID is a digit.  Have I misunderstood?  That expression works perfectly for me."}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524244863, "post_id": 49946650, "comment_id": 86910070, "body": "@Binish I notice in your expected output you now list several entries where the employee ID is non-numerical.  In your question you state that you are <i>&quot;trying to do a pattern match search for anything that has numbers for employeeID: xxxxxx and bring all entries that matches.&quot;</i>  I think you may need to clarify a bit more before we can help you."}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524244968, "post_id": 49946650, "comment_id": 86910137, "body": "The reason your regex is only matching one entry is because there is only one entry where the employeeID is numerical.  (In the data you&#39;ve provided here."}, {"owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524244971, "post_id": 49946650, "comment_id": 86910139, "body": "Yes correct to be more clear, where the employee ID contains a digit, example it can be abcd1, 123abc, aa11bb. But it should not pull any entry that has no digits example testuser or abcd==="}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 1, "creation_date": 1524245005, "post_id": 49946650, "comment_id": 86910151, "body": "That&#39;s a bit different.  Would you please edit your original question to clarify that?"}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524245255, "post_id": 49946650, "comment_id": 86910273, "body": "@Binish I&#39;ve updated my answer to reflect that information"}, {"owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524245967, "post_id": 49946650, "comment_id": 86910640, "body": "it works thanks. but got a line added with -- before the line dn: CN=Given-iPad01."}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524246399, "post_id": 49946650, "comment_id": 86910853, "body": "If you&#39;re running Linux use the <code>--no-group-seperator</code> flag with the expression.  If you&#39;re running OS X or something else that doesn&#39;t support that flag pipe the output of the original statement to something like  <code>grep -v -- &quot;^--$&quot;</code>   So the final statement ends up being <code>grep -E -B 2 -A 3 &#39;employeeID:\\s*.*[0-9]+.*&#39; .&#47;testfile | grep -v -- &quot;^--$&quot;</code> . (source: <a href=\"https://stackoverflow.com/a/8840902/1596460\">stackoverflow.com/a/8840902/1596460</a>)"}, {"owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524246636, "post_id": 49946650, "comment_id": 86910975, "body": "The one that you posted worked <a href=\"https://regexr.com/3o9av\" rel=\"nofollow noreferrer\">regexr.com/3o9av</a> . Thanks so much, I used this reg expression /employeeID:\\s*.*[0-9]+.*/i&#39;"}, {"owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "reply_to_user": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "edited": false, "score": 0, "creation_date": 1524246734, "post_id": 49946650, "comment_id": 86911036, "body": "You&#39;re welcome. I would appreciate being marked as the answer if this helped you solve your problem."}], "tags": [], "owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "is_accepted": true, "score": 0, "last_activity_date": 1524248634, "last_edit_date": 1524248634, "creation_date": 1524244165, "answer_id": 49946650, "question_id": 49946138, "link": "https://stackoverflow.com/questions/49946138/perl-not-giving-expected-output/49946650#49946650", "title": "Perl not giving expected output", "body": "<p>Perl is certainly well suited to this task, but it might be easier to:</p>\n\n<p><code>grep -E -B 2 -A 3 'employeeID:\\s*.*[0-9]+.*' ./testfile</code></p>\n\n<p>The reason you don't see the expected output from this one liner is that you're telling perl to only match things that are <code>[0-9]</code>.  You need to <a href=\"https://www.regular-expressions.info/refrepeat.html\" rel=\"nofollow noreferrer\">quantify</a> this in the expression (with <code>+</code> or <code>*</code>), as well as match non-numerical characters (e.g. <code>.*</code>).</p>\n\n<p>It would be good to <a href=\"http://jkorpela.fi/perl/regexp.html\" rel=\"nofollow noreferrer\">read up</a> on how regular expressions work. Here's an environment where you can play around with this particular expression:  <a href=\"https://regexr.com/3o9av\" rel=\"nofollow noreferrer\">https://regexr.com/3o9av</a></p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1524248522, "creation_date": 1524248522, "answer_id": 49947655, "question_id": 49946138, "link": "https://stackoverflow.com/questions/49946138/perl-not-giving-expected-output/49947655#49947655", "title": "Perl not giving expected output", "body": "<p>The digit might be preceded by anything but newline. <code>.</code> matches anything but newline, <code>.*</code> means there can be 0 or more such characters. <code>/m</code> is needed to make <code>^</code> match a start of line instead of start of string.</p>\n\n<pre><code>perl -000 -ne 'print if /^employeeID: .*[0-9]/m' -- file\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4659660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4f2c9880987ee81613b8a1dbac6bff2?s=128&d=identicon&r=PG&f=1", "display_name": "BBJinu", "link": "https://stackoverflow.com/users/4659660/bbjinu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 49946650, "answer_count": 2, "score": 0, "last_activity_date": 1524248634, "creation_date": 1524242176, "last_edit_date": 1524247394, "question_id": 49946138, "link": "https://stackoverflow.com/questions/49946138/perl-not-giving-expected-output", "title": "Perl not giving expected output", "body": "<p>I am trying to do a pattern match search for anything that has numbers for employeeID: xxxxxx and bring all entries that matches. But it doesn't seem to work as expected. And vice versa where bring all entries that doesn't have a number in the employeeID field.  </p>\n\n<p>My testfile </p>\n\n<pre><code>dn: CN=User One,OU=Disabled,OU=People,DC=training,DC=example,DC=\n com  \nuserAccountControl: 514  \nemployeeID: user1  \ncomment: HIRED  \nsAMAccountName: user1  \n\ndn: CN=Given-iPad01,OU=Room,DC=training,DC=example,DC=com  \nuserAccountControl: 544  \nemployeeID: Given-iPad01  \nsAMAccountName: Given-iPad01  \nlastLogonTimestamp: 130678281934843750    \n\ndn: CN=User Two,OU=Admins,DC=training,DC=example,DC=com  \nuserAccountControl: 512  \nemployeeID:: IDE2NzQwODg=  \nsAMAccountName: user2  \nlastLogonTimestamp: 131685330348725308    \n\ndn: CN=Test User2,OU=2012,OU=People,DC=training,DC=example\n ,DC=com  \nuserAccountControl: 512  \nemployeeID: testuser2  \nsAMAccountName: testuser2  \nlastLogonTimestamp: 131328157284117480    \n\ndn: CN=User Three,OU=People,DC=training,DC=example,DC=com  \nuserAccountControl: 512  \nemployeeID: 123456  \ncomment: HIRED  \nsAMAccountName: user3  \nlastLogonTimestamp: 131679287880585713   \n</code></pre>\n\n<p>My expected output was to bring all entires except the one that has employeeID: testuser, but my result came only with entry where I have employeeID: 123456.<br>\n    Below is what i was looking for     </p>\n\n<pre><code>dn: CN=User One,OU=Disabled,OU=People,DC=training,DC=example,DC=com  \nuserAccountControl: 514  \nemployeeID: user1  \ncomment: HIRED  \nsAMAccountName: user1    \n\ndn: CN=User Two,OU=Admins,DC=training,DC=example,DC=com  \nuserAccountControl: 512  \nemployeeID:: IDE2NzQwODg=  \nsAMAccountName: user2  \nlastLogonTimestamp: 131685330348725308    \n\ndn: CN=User Three,OU=People,DC=training,DC=example,DC=com  \nuserAccountControl: 512  \nemployeeID: 123456  \ncomment: HIRED  \nsAMAccountName: user3  \nlastLogonTimestamp: 131679287880585713    \n\ndn: CN=Test User2,OU=2012,OU=People,DC=training,DC=example,DC=com  \nuserAccountControl: 512  \nemployeeID: testuser  \nsAMAccountName: testuser  \nlastLogonTimestamp: 131328157284117480    \n\ndn: CN=Given-iPad01,OU=Rooms,DC=training,DC=example,DC=com  \nuserAccountControl: 544  \nemployeeID: Given-iPad01  \nsAMAccountName: Given-iPad01  \nlastLogonTimestamp: 130678281934843750    \n</code></pre>\n\n<p>Below is what I tried: \nTo pull that contains number anywhere on the employeeID entry<br>\n    <code>perl -000 -ne 'print if /employeeID: [0-9]/' testfile</code>  </p>\n\n<p>Not to pull those contains number anywhere on the employeeID entry \n    <code>perl -000 -ne 'print if !/employeeID: [0-9]/i' testfile</code></p>\n"}, {"tags": ["regex", "perl", "fasta"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1524249259, "post_id": 49946056, "comment_id": 86912163, "body": "(1) If the &quot;<i>reverse complemented</i>&quot; one should match then you want <code>$revcomp</code> in the regex, not <code>$primers[1]</code> (2) Open the file before the <code>while</code> loop, and (within one run of the program) you don&#39;t need the append mode (<code>&gt;&gt;</code>) but rather just <code>&gt;</code> (3) No need for <code>\\Q</code>, but you do need <code>&#47;gm</code> modifiers (without <code>&#47;m the </code>^` and <code>$</code> match the whole string&#39;s start and end, not individual lines); you also want <code>.*</code> to be <code>.*?</code>.  So: <code>&#47;^$primers[0].*?$revcomp$&#47;mg</code>   // With these changes it works for me (with sample input you provide)"}, {"owner": {"reputation": 71, "user_id": 1774225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b8af746336f835cdeadb4cf19fd812?s=128&d=identicon&r=PG", "display_name": "user1774225", "link": "https://stackoverflow.com/users/1774225/user1774225"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524249718, "post_id": 49946056, "comment_id": 86912329, "body": "Ah, I can&#39;t believe I forgot to put $revcomp in place of $primers[1]. Incorporating your suggestions, it works now for me too. Thank you!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524250023, "post_id": 49946056, "comment_id": 86912442, "body": "yeah, I thought it was a blunder -- it happens :)  Note that you read a half-million-sequence file right into a variable .. like 50Mb? It works but it is something to be acutely aware of"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 1774225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b8af746336f835cdeadb4cf19fd812?s=128&d=identicon&r=PG", "display_name": "user1774225", "link": "https://stackoverflow.com/users/1774225/user1774225"}, "edited": false, "score": 0, "creation_date": 1524249070, "post_id": 49946411, "comment_id": 86912093, "body": "Thanks, this works great. Can you clarify what the &#39;undef&#39; does please?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 71, "user_id": 1774225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b8af746336f835cdeadb4cf19fd812?s=128&d=identicon&r=PG", "display_name": "user1774225", "link": "https://stackoverflow.com/users/1774225/user1774225"}, "edited": false, "score": 0, "creation_date": 1524253215, "post_id": 49946411, "comment_id": 86913819, "body": "See <a href=\"http://p3rl.org/undef\" rel=\"nofollow noreferrer\">undef</a>. In this case, it just creates a key in the hash with no value."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1524243170, "creation_date": 1524243170, "answer_id": 49946411, "question_id": 49946056, "link": "https://stackoverflow.com/questions/49946056/counting-sequences-in-a-file-beginning-and-ending-with-a-user-defined-match/49946411#49946411", "title": "Counting sequences in a file beginning and ending with a user defined match", "body": "<p>Create a regex from all the primers. Also, store the primers in a hash, the values will be the line numbers. Then, iterate over the fasta file and try to match the regex. If it matches, use the hash to retrieve the line number of the primer and use another hash to record the number of matches per line number. At the end, just report the numbers:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy ($fasta_file, $primers_file) = @ARGV;\n\nmy %primer;\nopen my $primers_fh, '&lt;', $primers_file or die $!;\nwhile (&lt;$primers_fh&gt;) {\n    chomp;\n    my ($first, $second) = split /\\t/;\n    $second = reverse $second;\n    $second =~ tr/actgACTG/tgacTGAC/;\n    undef $primer{$first}{$.};\n    undef $primer{$second}{$.};\n}\n\nmy $primers_count = $.;\nmy $regex =  join '|', keys %primer;\n\nmy %seen;\nopen my $fasta_fh, '&lt;', $fasta_file or die $!;\nwhile (&lt;$fasta_fh&gt;) {\n    if (/^($regex)/) {\n        ++$seen{$_} for keys %{ $primer{$1} };\n    }\n}\n\nfor my $line_number (sort { $a &lt;=&gt; $b } 1 .. $primers_count) {\n    print $seen{$line_number} // 0, \"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 1774225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b8af746336f835cdeadb4cf19fd812?s=128&d=identicon&r=PG", "display_name": "user1774225", "link": "https://stackoverflow.com/users/1774225/user1774225"}, "edited": false, "score": 0, "creation_date": 1524248875, "post_id": 49946812, "comment_id": 86912011, "body": "Thanks for the clarification about \\Q,  \\E, as well as the &quot;g&quot; global modifier. In this case, I actually do want the primers to match exactly at the start and end of the sequences and exclude everything else, because only those sequences are my target amplicons."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524252195, "post_id": 49946812, "comment_id": 86913358, "body": "suggest to add a statement on how to fix anchors (see <a href=\"https://perldoc.perl.org/perlreref.html#OPERATORS\" rel=\"nofollow noreferrer\"><code>&#47;m</code> modifier</a> ) and then to offer a fixed, working, regex"}], "tags": [], "owner": {"reputation": 70, "user_id": 5660161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0ae7c973292d4cf79688567a90d2a0?s=128&d=identicon&r=PG&f=1", "display_name": "dkwan33", "link": "https://stackoverflow.com/users/5660161/dkwan33"}, "is_accepted": false, "score": 1, "last_activity_date": 1524249542, "last_edit_date": 1524249542, "creation_date": 1524244842, "answer_id": 49946812, "question_id": 49946056, "link": "https://stackoverflow.com/questions/49946056/counting-sequences-in-a-file-beginning-and-ending-with-a-user-defined-match/49946812#49946812", "title": "Counting sequences in a file beginning and ending with a user defined match", "body": "<p>I think you misunderstand what <code>\\Q</code> (and <code>\\E</code>) does. It's for backslashing regex special characters automatically. It is not for \"searching for a variable in a regex\". Perl already recognizes variables in regexes natively. You don't need <code>\\Q</code> here. </p>\n\n<pre><code>my $matches = () = $seq =~ /^\\Q$primers[0].*\\Q$primers[1]$/;\n</code></pre>\n\n<p>A basic regex match like this returns 1 or 0 for true and false. It does not return you an array of matches like you want it to. You need the <code>g</code> global modifier for that.</p>\n\n<p>You probably also need the <code>.*</code> to be non-greedy here using <code>.*?</code> instead.</p>\n\n<p>You also are using <code>^</code> and <code>$</code> incorrectly here. This forces your primers to match only at the start and end of the (multi-line) string rather than for lines within it. That's why you are getting 0 (false) for your matches. </p>\n"}], "owner": {"reputation": 71, "user_id": 1774225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b8af746336f835cdeadb4cf19fd812?s=128&d=identicon&r=PG", "display_name": "user1774225", "link": "https://stackoverflow.com/users/1774225/user1774225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 49946411, "answer_count": 2, "score": 1, "last_activity_date": 1524249542, "creation_date": 1524241779, "question_id": 49946056, "link": "https://stackoverflow.com/questions/49946056/counting-sequences-in-a-file-beginning-and-ending-with-a-user-defined-match", "title": "Counting sequences in a file beginning and ending with a user defined match", "body": "<p>I have a fasta formatted file of DNA sequences called \"test.fas\":</p>\n\n<pre><code>&gt;test1\nGCCATTACAGAACATCAGTCACAGTACGTACTGTGTTCTGCCGTGCTGTCTA\n&gt;test2\nCGGATGAAGCGCCAATCGTACGTACAATAAGTTGCCTAAAGTGTTTCA\n&gt;test3\nATGCATGCATGC\n</code></pre>\n\n<p>I also have a file of tab delimited primer sequences called \"primers.txt\":</p>\n\n<pre><code>GCCATTACAGAACATCAGTCACA TAGACAGCACGGCAGAACAC\nCGGATGAAGCGCCAATC   TGAAACACTTTAGGCAACTTATT\n</code></pre>\n\n<p>Each line in this primers.txt file is a primer pair that may match the start and end of a sequence in the fasta file. The second primer on each line also needs to be reverse complemented before it would match anything in the fasta file. Looking at the first primer pair on the first line in primers.txt, after reverse complementing the second primer, it should match the sequence for test1 in the test.fas file. </p>\n\n<p>What I want to be able to do is supply these two files to a perl program, and get an output file of counts for how many times a sequence was found with a primer pair from the primers.txt file. In this case, my outfile would list:</p>\n\n<pre><code>1\n1\n</code></pre>\n\n<p>In reality I have 650000 sequences in a file, and 170 primer sets to search for and enumerate from the file. Therefore, I want an outfile 170 lines long, with each line listing the number of times a match was found in the fasta file for that specific primer pair. Basically, for each line in the primer.txt file, count the number of times a sequence shows up in the fasta file that begins and ends with that primer pair.  This is what I have come up with so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nprint \"Name of the FASTA file: \";\nchomp( my $multifasta = &lt;STDIN&gt; );\n\nprint \"Name file with primers: \";\nchomp( my $pulls = &lt;STDIN&gt; );\n\nprint \"Name of the output file: \";\nchomp( my $out = &lt;STDIN&gt; );\n\nopen(MULTIFASTA,$multifasta) || die ;\n  my $seq = do { local $/; &lt;MULTIFASTA&gt;};\n  close MULTIFASTA;\n\nopen(PULLS,$pulls) || die;\n  while (my $line = &lt;PULLS&gt;){\n  chomp $line;\n  my @primers = split (/\\t/,$line);\n  my $revcomp = reverse $primers[1];\n  $revcomp =~ tr/ATGCatgc/TACGtacg/;  #reverse complement the reverse primer\n  my $matches = () = $seq =~ /^\\Q$primers[0].*\\Q$primers[1]$/; #How to structure the regex? \n  open(OUTFILE,\"&gt;&gt;$out\");\n  print OUTFILE \"$matches\\n\";   \n}\n</code></pre>\n\n<p>My outfile ends up with this:</p>\n\n<pre><code>0\n0\n</code></pre>\n\n<p>I obviously have something screwed up. I am rapidly falling in the trap of trying different things I find on Google without having a firm grasp of what that is doing to the code, and at this point I am lost. That is a consequence of really needing the answer soon, and knowing very little about programming.  I gathered from reading that I should be reading in the whole file to scan for matches in with local, and I need to use \\Q to search for a variable in a regex in perl. Anyway, any help or pointers would be very much appreciated. Thanks -    </p>\n"}, {"tags": ["linux", "perl", "chown"], "answers": [{"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 5, "last_activity_date": 1524239290, "last_edit_date": 1524239290, "creation_date": 1524239166, "answer_id": 49945381, "question_id": 49945348, "link": "https://stackoverflow.com/questions/49945348/chown-command-usage-in-perl-script/49945381#49945381", "title": "Chown command usage in perl script", "body": "<p><a href=\"http://perldoc.perl.org/functions/chown.html\" rel=\"noreferrer\"><code>perldoc -f chown</code></a>:</p>\n\n<blockquote>\n  <p>chown LIST</p>\n  \n  <p>Changes the owner (and group) of a list of files. The first two\n  elements of the list must be the numeric uid and gid, in that order. <strong>A\n  value of -1 in either position is interpreted by most systems to leave\n  that value unchanged</strong>. Returns the number of files successfully\n  changed.</p>\n\n<pre><code>my $cnt = chown $uid, $gid, 'foo', 'bar';\nchown $uid, $gid, @filenames;\n</code></pre>\n  \n  <p>...</p>\n</blockquote>\n"}], "owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524239781, "creation_date": 1524239050, "last_edit_date": 1524239503, "question_id": 49945348, "link": "https://stackoverflow.com/questions/49945348/chown-command-usage-in-perl-script", "title": "Chown command usage in perl script", "body": "<p>I couldn't find any information about -1 usage in below row in Perl scripting.</p>\n\n<pre><code>chown -1, $group, $directory\n</code></pre>\n"}, {"tags": ["regex", "substitution", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524237891, "post_id": 49944860, "comment_id": 86906201, "body": "According to <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>: <i>&quot;Capture group contents are dynamically scoped and available to you outside the pattern until the end of the enclosing block or until the next successful match, whichever comes first.&quot;</i>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524238141, "post_id": 49944860, "comment_id": 86906360, "body": "@sln: No, unsuccessful match wouldn&#39;t clear them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524238264, "post_id": 49944860, "comment_id": 86906423, "body": "@choroba - when it parses <code>=~</code> the variables are immediately cleared."}, {"owner": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524238272, "post_id": 49944860, "comment_id": 86906428, "body": "@choroba: correct. In the original code the error came up only with successful matches for the substitution."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524238773, "post_id": 49944860, "comment_id": 86906766, "body": "@sln: Do you mean <code>&quot;a&quot; !~ &#47;\\w&#47;</code>? No match, no clearing: <code>perl -wE &#39;&quot;a&quot; =~ &#47;(.)&#47;; say $1; &quot;b&quot; =~ &#47;x&#47;; say $1&#39;</code>"}, {"owner": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "edited": false, "score": 0, "creation_date": 1524238818, "post_id": 49944860, "comment_id": 86906806, "body": "Code in the original question changed @sln this seems to prove otherwise"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524239227, "post_id": 49944860, "comment_id": 86907084, "body": "Ok, the $1 persists past the parse and is the target of the next regex, so, I&#39;m stumped. But @choroba is correct, the vars are only cleard/re-populated on a successful match."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "edited": false, "score": 1, "creation_date": 1524238081, "post_id": 49945035, "comment_id": 86906321, "body": "Staring at me right in the face, silly me. For some reason I had not mentally associated the substitution with a new match. Thank you."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1524237947, "creation_date": 1524237947, "answer_id": 49945035, "question_id": 49944860, "link": "https://stackoverflow.com/questions/49944860/non-destructive-substitute-on-regex-capture-variables-broken-in-perl5/49945035#49945035", "title": "Non-destructive substitute on regex capture variables broken in perl5?", "body": "<p>See <a href=\"http://p3rl.org/perlvar\" rel=\"nofollow noreferrer\">perlvar</a>:</p>\n\n<blockquote>\n  <p>Perl sets these variables when it has a successful match</p>\n</blockquote>\n\n<p>So, any successful matching would clear the values, it's not relevant that the match variable itself is subject to the matching.</p>\n"}], "owner": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 49945035, "answer_count": 1, "score": 1, "last_activity_date": 1524238920, "creation_date": 1524237432, "last_edit_date": 1524238920, "question_id": 49944860, "link": "https://stackoverflow.com/questions/49944860/non-destructive-substitute-on-regex-capture-variables-broken-in-perl5", "title": "Non-destructive substitute on regex capture variables broken in perl5?", "body": "<p>I've noticed a behaviour which looks fishy to me. Verified for sure on perl 5.18 and perl 5.22.</p>\n\n<p>A simplified one-liner below to illustrate.</p>\n\n<pre><code>$ echo -e \"A B C D\\n# E F G\" | perl -wnE 'm{(.) (.) (.) (.)}; say($1,$2,$3,$4); say \"HELLO $1 \" . ($1 =~ s/\\w/###/r) .\" $2 $3 $4\"'\nABCD\nUse of uninitialized value $2 in concatenation (.) or string at -e line 1, &lt;&gt; line 1.\nUse of uninitialized value $3 in concatenation (.) or string at -e line 1, &lt;&gt; line 1.\nUse of uninitialized value $4 in concatenation (.) or string at -e line 1, &lt;&gt; line 1.\nHELLO A ###   \n#EFG\nHELLO # # E F G\n</code></pre>\n\n<p>Apparently calling a non-destructive substitution on any capture-related variable undefines or in some way prevent access to any previously defined capture-related variables. Same thing when using named captures and the <code>%+</code> hash.</p>\n\n<p>That seems like a bug to me, but I don't know whether I am missing something.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "machine-learning", "naivebayes"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524252911, "post_id": 49944437, "comment_id": 86913694, "body": "Please show the full exact text of the <code>NaN</code> error. What do you mean by <i>&quot;if i limiting my text to let&#39;s 10&quot;</i>? Ten what?"}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524261243, "post_id": 49944437, "comment_id": 86917111, "body": "i fixed my test , i mean if i limiting the training to 10 instead of 100 the NAN goes away, its not eror i get just NAN as value when i  print the $result-&gt;{CAT1} or $result-&gt;{CAT2} ,where CAT1 and CAT2 are my labels"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1524380978, "post_id": 49944437, "comment_id": 86942898, "body": "Without the text themselves, the full program, and also the exact text of the error, it&#39;s impossible to know. Might be some typo somewhere. I really doubt it&#39;s got to do with the length of the texts, but it might be the case that texts are converted to vectors and you are training with vectors of different length. Also, the GitHub repo for the module might allow you to post issues, they will probably be more versed in their own code&#39;s errors."}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524261107, "creation_date": 1524235926, "last_edit_date": 1524261107, "question_id": 49944437, "link": "https://stackoverflow.com/questions/49944437/naivebayes-algorithm-returns-nan", "title": "NaiveBayes Algorithm returns &quot;NaN&quot;", "body": "<p>I am using the Perl\n<a href=\"https://metacpan.org/pod/Algorithm::NaiveBayes\" rel=\"nofollow noreferrer\"><code>Algorithm::NaiveBayes</code></a>\nmodule to classify text </p>\n\n<p>I am adding the length of the text as attribute. I have about 1,000 texts, most of which have different lengths? When I try to predict new text I get a <strong><em>NaN</em></strong> result. If I limiting the training to 10 the <strong><em>NaN</em></strong> issue goes away.</p>\n\n<p>Is it better in this case to normalize the length to different brackets? Something like </p>\n\n<ul>\n<li>text length 0-10 return the same value for the attribute</li>\n<li>text length 11-20 return different value of the attribute</li>\n</ul>\n\n<p>Could someone also help me to understand why I get the <strong><em>NaN</em></strong>? I am using code like this:</p>\n\n<pre><code>my $result = $nb-&gt;predict( attributes =&gt; { bar =&gt; 3, blurp =&gt; 2 } );\n\nprint $result-&gt;{CAT1}, \"\\n\";\nprint $result-&gt;{CAT2}, \"\\n\";\n</code></pre>\n"}, {"tags": ["arrays", "perl", "loops", "object"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1524232483, "post_id": 49942775, "comment_id": 86902704, "body": "Your data structures are wrong. You want a single hash where the keys are IDs and the values are hashes (hash references) with all the properties for that ID."}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524233146, "post_id": 49942775, "comment_id": 86903140, "body": "@MattJacob So something like %object_of_objects1 = ( 1 =&gt; { &#39;name&#39; =&gt; &#39;Dan&#39;,}), %object_of_objects2 = (2 =&gt; { &#39;position&#39; =&gt; &#39;Web Dev&#39;}), etc?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524233711, "post_id": 49942775, "comment_id": 86903470, "body": "No. Stop thinking in terms of parallel data structures. A <i>single</i> hash: <code>{ 1 =&gt; { name =&gt; \u2018John\u2019, title =&gt; \u2018CEO\u2019 }, 2 =&gt; { name =&gt; \u2018Jane\u2019, title =&gt; \u2018CFO\u2019 }, 3 =&gt; ... }</code>"}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524234078, "post_id": 49942775, "comment_id": 86903714, "body": "@MattJacob That&#39;s what I want as the end result, but I am getting data from spreadsheets, so that&#39;s why the data is separated the way it is.  I need to be able to parse a single table in a file, multiple tables in a single file, or that across multiple files.  That is why I am doing it the way I am.  I&#39;m thinking a recursive hash merging function would do what I would want."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1524234721, "post_id": 49942775, "comment_id": 86904188, "body": "Ok, so... loops?"}], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1524235176, "post_id": 49943857, "comment_id": 86904498, "body": "That works when the number of objects is know, but how would I map the ids dynamically depending on the number of sheets per workbook?  Say, $book = [ &#39;sheet1&#39; =&gt; %object1, &#39;sheet2&#39; =&gt; %object2&#39; ] ?"}], "tags": [], "owner": {"reputation": 825, "user_id": 5893468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb7551f9c6af39046f24142ae1c42e1?s=128&d=identicon&r=PG&f=1", "display_name": "pamcevoy", "link": "https://stackoverflow.com/users/5893468/pamcevoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1524234086, "creation_date": 1524234086, "answer_id": 49943857, "question_id": 49942775, "link": "https://stackoverflow.com/questions/49942775/combine-hash-properties-from-array-of-hashes/49943857#49943857", "title": "Combine hash properties from array of hashes", "body": "<p>Put the 2nd and 3rd arrays into hashes mapping ID to the hash.  Then loop through the people and use the ID to get the data from position and tenure hashes.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $people = [\n    {\n        id    =&gt; 1,\n        name  =&gt; \"Dan\",\n        team  =&gt; \"red\"\n    },\n    {\n        id    =&gt; 2,\n        name  =&gt; \"Arnold\",\n        team  =&gt; \"red\"\n    },\n    {\n        id    =&gt; 3,\n        name  =&gt; \"Kristen\",\n        team  =&gt; \"red\"\n    }\n];\n\nmy $positions = [\n    {\n        id =&gt; 1,\n        position =&gt; \"web developer\",\n    },\n    {\n        id =&gt; 2,\n        position =&gt; \"CEO\",\n    },\n    {\n        id =&gt; 3,\n        position =&gt; \"Secretary\",\n    }\n];\n\nmy $tenures = [\n    {\n        id =&gt; 1,\n        tenure =&gt; \"1yr\",\n    },\n    {\n        id =&gt; 2,\n        tenure =&gt; \"25yr\",\n    },\n    {\n        id =&gt; 3,\n        tenure =&gt; \"5yr\",\n    }\n];\n\n# hash each by ID\nmy %position_hash = map { $_-&gt;{id} =&gt; $_ } @$positions;\nmy %tenure_hash   = map { $_-&gt;{id} =&gt; $_ } @$tenures;\n\n# combine\nmy $complete = [];\nforeach my $person (@$people) {\n    my $id = $person-&gt;{id};\n    my $complete_row = {\n        %$person,\n        position =&gt; $position_hash{$id}-&gt;{position},\n        tenure =&gt; $tenure_hash{$id}-&gt;{tenure},\n    };\n    push @$complete, $complete_row\n}\nprint \"complete = \" . Dumper($complete);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1524235644, "post_id": 49944045, "comment_id": 86904809, "body": "So the outer foreach manually sets all the arrays of hashes, how would I modify it to work with an object with a varying number of arrays?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1524235747, "post_id": 49944045, "comment_id": 86904871, "body": "I updated my answer so you need only set ooa hash now."}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1524236239, "post_id": 49944045, "comment_id": 86905193, "body": "Could you explain what&#39;s happening in the loop process a little bit?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1524236877, "post_id": 49944045, "comment_id": 86905599, "body": "Added some comments. Let me know if you need more explanation of some particular piece."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": -1, "last_activity_date": 1524236838, "last_edit_date": 1524236838, "creation_date": 1524234678, "answer_id": 49944045, "question_id": 49942775, "link": "https://stackoverflow.com/questions/49942775/combine-hash-properties-from-array-of-hashes/49944045#49944045", "title": "Combine hash properties from array of hashes", "body": "<p>This should work:</p>\n\n<pre><code>my %newHash;\nforeach my $arrRef(map {$ooa{$_}} keys %ooa) { #reading all values of ooa hash, each value is an array ref\n    foreach my $hashRef(@$arrRef) { #reading each array element, each array element is a hash ref \n        foreach my $key(keys %{$hashRef}) { #reading all keys of each internal hash\n            $newHash{$hashRef-&gt;{'id'}}{$key} = $hashRef-&gt;{$key}; #building new hash of hashes with id as key and value as hash ref\n        }\n    }\n}\nmy @newArray = map {$newHash{$_}} keys %newHash; #converting hash of hashes into array of hashes\n</code></pre>\n"}], "owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 49944045, "answer_count": 2, "score": 0, "last_activity_date": 1524236838, "creation_date": 1524230901, "question_id": 49942775, "link": "https://stackoverflow.com/questions/49942775/combine-hash-properties-from-array-of-hashes", "title": "Combine hash properties from array of hashes", "body": "<p>I'm parsing an excel spreadsheet and trying to combine data rows by id across tables and files.  This is a condensed, simplified version of what I have.  With a PHP/JS background, I prefer conceptualizing hashes as objects, so %aoo means array of objects instead of array of hashes...</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse v5.10.0;\nuse strict;\nuse warnings;\n\nuse Data::Dump;\nuse Data::Dumper;\n\n# Array of objects\n# Each object is a row from a table\nmy $aoo1 = [\n    {\n        \"id\"    =&gt; 1,\n        \"name\"  =&gt; \"Dan\",\n        \"team\"  =&gt; \"red\"\n    },\n    {\n        \"id\"    =&gt; 2,\n        \"name\"  =&gt; \"Arnold\",\n        \"team\"  =&gt; \"red\"\n    },\n    {\n        \"id\"    =&gt; 3,\n        \"name\"  =&gt; \"Kristen\",\n        \"team\"  =&gt; \"red\"\n    }\n];\nmy @aoo2 = (\n    {\n        \"id\"    =&gt; 1,\n        \"position\"  =&gt; \"web developer\",\n    },\n    {\n        \"id\"    =&gt; 2,\n        \"position\"  =&gt; \"CEO\",\n    },\n    {\n        \"id\"    =&gt; 3,\n        \"position\"  =&gt; \"Secretary\",\n    }\n);\nmy @aoo3 = (\n    {\n        \"id\"    =&gt; 1,\n        \"tenure\"  =&gt; \"1yr\",\n    },\n    {\n        \"id\"    =&gt; 2,\n        \"tenure\"  =&gt; \"25yr\",\n    },\n    {\n        \"id\"    =&gt; 3,\n        \"tenure\"  =&gt; \"5yr\",\n    }\n);\n\n# object of arrays\n# each property is a table name from spreadsheet\nmy %ooa;\n%ooa = (\n    \"People List\" =&gt; $aoo1,\n    \"Position List\" =&gt; \\@aoo2,\n    \"Tenure List\" =&gt; \\@aoo3\n);\n\n# dd \\%ooa;\n\nwhile (my ($list_name, $aoo) = each %ooa)\n{\n    # $aoo reftype is array | [ %object, %object, %object ]\n    # Do something to look into other objects for same id...\n}\n</code></pre>\n\n<p>I want to be able to create a new object for each unique row in the file, so I can filter the values and then write it to a CSV file.</p>\n\n<p>Ex. of the end result</p>\n\n<pre><code>%complete_row = (\n    'id' =&gt; 1,\n    'name' =&gt; 'Dan',\n    'team' =&gt; 'red',\n    'position =&gt; 'Web Dev',\n    'tenure' =&gt; '1yr'\n);\n</code></pre>\n"}, {"tags": ["sql", "sqlite", "perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1524230387, "post_id": 49942581, "comment_id": 86901215, "body": "People have experimented on this kind of thing in the past eg <a href=\"https://stackoverflow.com/questions/1711631/improve-insert-per-second-performance-of-sqlite\" title=\"improve insert per second performance of sqlite\">stackoverflow.com/questions/1711631/&hellip;</a>"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 1, "creation_date": 1524238469, "post_id": 49942581, "comment_id": 86906550, "body": "I had an answer <a href=\"https://stackoverflow.com/questions/33556610/dbdsqlite-fastest-way-to-insert-multiple-rows/33557453#33557453\">here</a> that solved this problem."}, {"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524239335, "post_id": 49942581, "comment_id": 86907159, "body": "It works! The query from autocommit = 0 ended in a minute when the other two attempts (without this parameter) were running for 30 minutes and were still unfinished. Out of curiosity, I will wait for other ideas. Should there be a difference in performance between your loop and mine?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524245320, "post_id": 49942581, "comment_id": 86910307, "body": "@J.Doe: Executing <code>PRAGMA journal_mode = MEMORY</code> should make a significant difference."}], "answers": [{"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 2, "creation_date": 1524253466, "post_id": 49945915, "comment_id": 86913950, "body": "In <code>execute</code> you should probably replace <code>&#39;null&#39;</code> with <code>undef</code> (without quotes)."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 4, "last_activity_date": 1524255249, "last_edit_date": 1524255249, "creation_date": 1524241208, "answer_id": 49945915, "question_id": 49942581, "link": "https://stackoverflow.com/questions/49942581/perl-and-sqlite-request-to-improve-optimize-the-multiple-sql-insert-queries/49945915#49945915", "title": "Perl and SQLite - request to improve/optimize the multiple SQL INSERT queries", "body": "<p>I think you should have the statement and prepare outside the foreach loop (using placeholders), then execute inside the loop. The prepare normally only needs to be done once.</p>\n\n<pre><code>foreach (@{$json}) {\n  my $stmt = \"INSERT OR IGNORE INTO $CCC values (null, strftime('%s',\\'$_-&gt;{T}\\'), $_-&gt;{O}, $_-&gt;{H}, $_-&gt;{L}, $_-&gt;{C}, \".(($_-&gt;{H}+$_-&gt;{L}+$_-&gt;{C}+$_-&gt;{O}) / 4).\", $_-&gt;{V}, 1)\";\n  my $sth = $dbh-&gt;prepare( $stmt );\n  my $rv = $sth-&gt;execute() or die $DBI::errstr;\n\n  if($rv &lt; 0) {\n    print $DBI::errstr;\n  }\n}\n</code></pre>\n\n<p>Perhaps this:</p>\n\n<pre><code>my $stmt = \"INSERT INTO $CCC values (?, ?, ?, ?, ?, ?, ?, ?, ?)\";\nmy $sth = $dbh-&gt;prepare( $stmt );\n\nforeach (@{$json}) {\n    $sth-&gt;execute(undef, $_-&gt;{T}, $_-&gt;{O}, $_-&gt;{H}, $_-&gt;{L}, $_-&gt;{C}, ($_-&gt;{H}+$_-&gt;{L}+$_-&gt;{C}+$_-&gt;{O}) / 4, $_-&gt;{V}, 1) or die $DBI::errstr;\n}\n</code></pre>\n\n<p><strong>Update:</strong> placed <code>undef</code> as first parameter as suggested by <code>Kjetil S.</code></p>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524255249, "creation_date": 1524230280, "last_edit_date": 1524230602, "question_id": 49942581, "link": "https://stackoverflow.com/questions/49942581/perl-and-sqlite-request-to-improve-optimize-the-multiple-sql-insert-queries", "title": "Perl and SQLite - request to improve/optimize the multiple SQL INSERT queries", "body": "<p>I have quite a lot of data in JSON files that I need to convert to the SQLite database. I did a simple loop with the INSERT query, but the queries take a lot of time. I am a hobbyist and I am learning all the time. I think that there must be a more professional solution.</p>\n\n<pre><code>use JSON::XS;\nuse DBI;\n\nmy $CCC = 'string';\n\n# start connection to SQLite\nmy $dbh = DBI-&gt;connect(          \n\"dbi:SQLite:dbname=aaaa.db\", \"\", \"\", { RaiseError =&gt; 1 }, ) or die $DBI::errstr;\n\nmy $stmt = \"CREATE TABLE IF NOT EXISTS $CCC (id INTEGER PRIMARY KEY AUTOINCREMENT, start INTEGER UNIQUE, open REAL NOT NULL, high REAL NOT NULL, low REAL NOT NULL, close REAL NOT NULL, vwp REAL NOT NULL, volume REAL NOT NULL, trades INTEGER NOT NULL)\";\nmy $sth = $dbh-&gt;prepare( $stmt );\nmy $rv = $sth-&gt;execute() or die $DBI::errstr;\n\nif($rv &lt; 0) {\n  print $DBI::errstr;\n}\n\n# Open file.json\nopen(my $fh, '&lt;', file.json) or die \"cannot open file\";\n{\n  local $/;\n  $data = &lt;$fh&gt;;\n}\n\n# Converting JSON format to Perl's variables\nmy $coder = JSON::XS-&gt;new-&gt;ascii-&gt;pretty-&gt;allow_nonref;\nmy $json = $coder-&gt;decode ($data);\n\n# Loop. Im inserting every hash ({}) from file.json by INSERT sql statement\nforeach (@{$json}) {\n  my $stmt = \"INSERT OR IGNORE INTO $CCC values (null, strftime('%s',\\'$_-&gt;{T}\\'), $_-&gt;{O}, $_-&gt;{H}, $_-&gt;{L}, $_-&gt;{C}, \".(($_-&gt;{H}+$_-&gt;{L}+$_-&gt;{C}+$_-&gt;{O}) / 4).\", $_-&gt;{V}, 1)\";\n  my $sth = $dbh-&gt;prepare( $stmt );\n  my $rv = $sth-&gt;execute() or die $DBI::errstr;\n\n  if($rv &lt; 0) {\n    print $DBI::errstr;\n  }\n}\n</code></pre>\n\n<p>file.json</p>\n\n<pre><code>[{\"O\": 1.0, \"H\": 1.0, \"L\": 0.00014, \"C\": 0.000145, \"V\": 176703.92394752, \"T\": \"2018-02-16T00:00:00\", \"BV\": 25.71390226}, {\"O\": 0.00014499, \"H\": 0.00014499, \"L\": 0.00011101, \"C\": 0.00012599, \"V\": 247646.2068748, \"T\": \"2018-02-16T00:05:00\", \"BV\": 30.66246148}, {\"O\": 0.00012599, \"H\": 0.0001295, \"L\": 0.000122, \"C\": 0.00012699, \"V\": 102563.86201627, \"T\": \"2018-02-16T00:10:00\", \"BV\": 12.88322597}]\n</code></pre>\n\n<p>Do you know any more efficient way?</p>\n"}, {"tags": ["perl", "hash", "plack", "psgi"], "answers": [{"tags": [], "owner": {"reputation": 272, "user_id": 3896728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e187dd1b66e7fa4c4a64839484aa53?s=128&d=identicon&r=PG&f=1", "display_name": "retupmoca", "link": "https://stackoverflow.com/users/3896728/retupmoca"}, "is_accepted": true, "score": 1, "last_activity_date": 1524847479, "creation_date": 1524847479, "answer_id": 50066921, "question_id": 49941866, "link": "https://stackoverflow.com/questions/49941866/set-custom-environment-variable-to-psgi-hash-plack/50066921#50066921", "title": "Set custom environment variable to psgi hash plack", "body": "<p>Assuming you want to set variables within the application server, this looks like the perfect case for some plack middleware. For this case, I found <a href=\"https://metacpan.org/pod/Plack::Middleware::ReviseEnv\" rel=\"nofollow noreferrer\">Plack::Middleware::ReviseEnv</a>, which is usable within your app.psgi:</p>\n\n<pre><code># app.psgi\nuse Plack::Builder;\n\nmy $app = sub {\n    return [ 200, [], [ shift-&gt;{var} ] ];\n};\n\nbuilder {\n    enable \"ReviseEnv\", revisors =&gt; { 'var'  =&gt; 'custom',\n                                      'var2' =&gt; 'other' };\n    $app;\n};\n</code></pre>\n\n<p>The documentation also lists additional options for setting values beyond simple text, such as including other <code>$env</code> data or <code>%ENV</code> environment variables.</p>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 50066921, "answer_count": 1, "score": 4, "last_activity_date": 1524847479, "creation_date": 1524227977, "question_id": 49941866, "link": "https://stackoverflow.com/questions/49941866/set-custom-environment-variable-to-psgi-hash-plack", "title": "Set custom environment variable to psgi hash plack", "body": "<p>When I do a request to dumper $env I get all data of enviromment hash psgi, in this example </p>\n\n<pre><code>sub { \n  my $env = shift;  \n  return [ 200, [], [ $env-&gt;{REMOTE_ADDR} ] ];  \n}\n</code></pre>\n\n<p>or more directly</p>\n\n<pre><code>sub { \n  return [ 200, [], [ shift-&gt;{REMOTE_ADDR} ] ];   \n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><strong>Returns the IP address of the client</strong> </p>\n\n<p>How I can set my own <strong>custom environment variable to psgi hash plack</strong> ?</p>\n\n<p>why I want to do that, my case is relation to:\n<a href=\"https://stackoverflow.com/questions/8098927/nginx-variables-similar-to-setenv-in-apache\">Nginx variables similar to SetEnv in Apache?</a></p>\n\n<p>If not possible to do that, <strong>can I create subclass and add that functionality to psgi web server ?</strong></p>\n\n<p>Thanks for your time</p>\n"}, {"tags": ["macos", "perl", "platypus"], "answers": [{"tags": [], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "is_accepted": false, "score": 0, "last_activity_date": 1524261735, "last_edit_date": 1524261735, "creation_date": 1524238734, "answer_id": 49945267, "question_id": 49939824, "link": "https://stackoverflow.com/questions/49939824/platypus-create-stand-alone-macos-application/49945267#49945267", "title": "Platypus create stand-alone macOS application", "body": "<p>Yes this is achievable try Par::Packer ,the PP tool </p>\n\n<pre><code>http://search.cpan.org/~autrijus/PAR-0.85_01/script/pp\n</code></pre>\n\n<p>it could be what you are looking for</p>\n\n<p>if you have shipped Perl and you want to use it with non standard modules you can </p>\n\n<p>you can install perl your modules locally using cpan something like the below:</p>\n\n<pre><code>cpan&gt; o conf makepl_arg INSTALL_BASE=/mydir/\ncpan&gt; o conf commit\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1524243779, "post_id": 49945930, "comment_id": 86909529, "body": "Fine. Let&#39;s forget the interpreter. But how do you add modules that have been compiled with cpan on the default interpreter or, more probably, on a dedicated perl installation (perlbrew)? Expecially quite complicated modules such as Tk?"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1524241288, "creation_date": 1524241288, "answer_id": 49945930, "question_id": 49939824, "link": "https://stackoverflow.com/questions/49939824/platypus-create-stand-alone-macos-application/49945930#49945930", "title": "Platypus create stand-alone macOS application", "body": "<blockquote>\n  <p>I would like to pack the perl interpreter and the required modules in the app created with Platypus</p>\n</blockquote>\n\n<p>Why do you think this is necessary?</p>\n\n<p>Perl is a standard component of macOS. It will always be present.</p>\n\n<p>You need to include any nonstandard Perl modules in your application, of course, but the interpreter doesn't need to be included.</p>\n"}], "owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524261735, "creation_date": 1524220893, "question_id": 49939824, "link": "https://stackoverflow.com/questions/49939824/platypus-create-stand-alone-macos-application", "title": "Platypus create stand-alone macOS application", "body": "<p>I am trying to create a macOS application (HighSierra) starting from a perl script using Platypus. The process works smoothly, but the app created uses the Perl interpreter of the computer. I would like to pack the perl interpreter and the required modules in the app created with Platypus so that I can be shipped as a selfcontained app. Is this achievable?</p>\n"}, {"tags": ["security", "parsing", "perl"], "answers": [{"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 1, "creation_date": 1524189788, "post_id": 49932686, "comment_id": 86881309, "body": "But anything in that <code>BEGIN</code> block happens <i>after</i> the parsing for that <code>BEGIN</code> block. For instance, you can&#39;t work around <code>Opcode.pm</code> with a <code>BEGIN</code> block, right? Is the parsing of that BEGIN block secure though, meaning the construction of the perl optree from arbitrary source itself."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524214644, "post_id": 49932686, "comment_id": 86891193, "body": "@EvanCarroll BEGIN blocks are executed during parsing of the surrounding code. And BEGIN blocks can be nested. Executing BEGIN blocks ASAP is necessary in order to parse the following code correctly. So you can&#39;t think about perl&#39;s parser as separate from perl&#39;s interpreter \u2013 the two are inseparably linked. Parsing Perl means executing Perl. Therefore, <code>perl -c</code> is a kind of lie, as it executes BEGIN blocks."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524238103, "post_id": 49932686, "comment_id": 86906334, "body": "I&#39;m confused, if they&#39;re inseparably linked then how does OpCode.pm work in such a way that I can&#39;t think of it being a separate process from the parsing of <code>BEGIN {}</code>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524299349, "post_id": 49932686, "comment_id": 86924217, "body": "@EvanCarroll While parsing and execution is intermingled, the different phases are still ordered. You can apply restrictions <i>before parsing</i> certain code. The Opcode restrictions (internally, the <code>PL_op_mask</code> array) are checked as soon as an OP is created, i.e. during parsing and before it can be executed. See the <code>CHECKOP</code> macro in op.c of the perl interpreter."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524323113, "post_id": 49932686, "comment_id": 86930310, "body": "I am not sure I understand how you&#39;re using &quot;different&quot; and &quot;intermingled&quot;: if you have the opcodes the parsing is complete. If the parser is insecure, you can generate whatever opcodes you want assuming you find a bug -- and the Perl community wouldn&#39;t consider it a &quot;security vulnerability&quot; because parsing arbitrary code is insecure. I&#39;m unclear about the distinction between those two words, or how <code>BEFORE</code> illustrates a problem for <i>parsing</i> (subject of the question) and not <i>execution</i>?"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 4, "last_activity_date": 1524188808, "creation_date": 1524188808, "answer_id": 49932686, "question_id": 49932576, "link": "https://stackoverflow.com/questions/49932576/is-the-perl-parser-safe-to-parse-arbitrary-code/49932686#49932686", "title": "Is the Perl Parser safe to parse arbitrary code?", "body": "<blockquote>\n  <p>Is the Perl 5 Parser safe to parse arbitrary code?</p>\n</blockquote>\n\n<p>No.</p>\n\n<pre><code>BEGIN { print \"This runs at parse time.\\n\" }\n</code></pre>\n\n<p>There is no way to disable this behavior, either, as code which runs at parse time may take actions which are required to parse the following code, like installing source filters or adding keywords.</p>\n"}, {"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524405981, "post_id": 49963988, "comment_id": 86949219, "body": "When you say, &quot;Parsing is error prone. If there is a vulnerability in the parsing code, that could be exploited by specially crafted input.&quot; You use the term <i>&quot;vulnerability&quot;</i> could you explain how the perl team would interpret that -- would such a problem be a &quot;bug&quot; or a &quot;security&quot; issue? Which list would it be sent too, and how would the perl threat model consider that? Would a cve go out? That&#39;s what I was really looking for specifically."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524407327, "post_id": 49963988, "comment_id": 86949688, "body": "I can&#39;t tell you what p5p would do. I would consider parser exploits to be severe, security-sensitive, and CVE-worthy bugs, but not catastrophic security issues. For most applications, if you can pass arbitrary code to perl you can already run arbitrary code and don&#39;t need such exploits. Counter-examples are setuid scripts that eval user input (oh god why??). But because of the multi-phase execution model, those must already implement some sandbox before starting to parse the untrusted code, and a parser vulnerability would be contained. I don&#39;t consider <code>Safe</code> to be a sufficient sandbox here."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1524408019, "post_id": 49963988, "comment_id": 86949910, "body": "Right but the point is threat-model alignment. If a product is built properly with Safe.pm, lacking OS-level isolation, would 100% of the security-related issues be CVE-worthy. It seems to me from tcook&#39;s statement that there is a threat modeling problem between p5p and users of Safe. Safe assumes that Perl was able to generate a blacklist/whitelist opcode-tree correctly, and Perl assumes that all parsing is done with the full capabilities of arbitrary code execution."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 1, "last_activity_date": 1524385713, "creation_date": 1524385713, "answer_id": 49963988, "question_id": 49932576, "link": "https://stackoverflow.com/questions/49932576/is-the-perl-parser-safe-to-parse-arbitrary-code/49963988#49963988", "title": "Is the Perl Parser safe to parse arbitrary code?", "body": "<p>You should not feed untrusted code to <code>perl</code>. The <a href=\"http://perldoc.perl.org/perlsec.html\" rel=\"nofollow noreferrer\">Perl security model</a> is centred about data (e.g. through the taint flag), and not about providing a sandbox for code. I.e. you should be able to write secure programs, but not necessarily be able to run arbitrary programs securely. So if someone is able to execute code, you should assume they are indeed able to execute any code.</p>\n\n<p>One aspect of this is Perl's multi-phase execution model. BEGIN blocks are executed as soon as they are parsed. This is necessary in order to parse subsequent code correctly. The <code>use</code> statements are also BEGIN blocks. So because code must be executed during parsing, it is incorrect to think that first the Perl code is parsed and then it is executed. Consider this example:</p>\n\n<pre><code>say 4;\nBEGIN {\n  say 2;\n  BEGIN { say 1 }\n  say 3;\n}\nsay 5;\n</code></pre>\n\n<p>Each BEGIN block is executed as soon as parsing it has completed, resulting in the numbered execution order. Importantly, some code is executed before parsing the whole document has completed.</p>\n\n<p>While parsing, the perl compiler creates an optree. This optree is both an abstract syntax tree for the parser, and the opcodes for the Perl interpreter.</p>\n\n<p>Perl does offer the ability to filter ops through the <code>Opcode</code> module, which should only be used through the frontends <code>ops</code> or <code>Safe</code>. These can set up a mask which controls which opcodes can be created while the mask is in effect. Thus, if we disallow loop opcodes but a loop is parsed, the parsing will fail at that point. Importantly the mask does not filter opcodes between compilation and execution (those two are not clearly delineated phases!). Instead, it prevents those opcodes from ever existing.</p>\n\n<p>There are a number of huge caveats with this.</p>\n\n<ul>\n<li><p>Parsing is error prone. If there is a vulnerability in the parsing code, that could be exploited by specially crafted input.</p></li>\n<li><p>The <code>Safe</code> module tries to whitelist or blacklist allowed opcodes. However, it is not necessarily clear that a certain set of allowed opcodes is safe. Perl was not designed with sandboxing in mind.</p>\n\n<p>Also, a lot of functionality is not provided by opcodes but by subroutines, which may have been compiled before the opcode mask was in place. Their functionality or vulnerabilities in their implementation could be used to escape a sandbox. In particular, I expect that many XS modules could be used here because they often expose pointers to Perl code.</p></li>\n</ul>\n\n<p>If you must execute untrusted Perl code, it may be best to use operating-system level security features, possibly in addition to the Perl security features. Linux containerization tech comes to mind. If you perform any parsing + execution in a sandboxed process, this would probably be sufficiently secure for untrusted code \u2013 iff the sandbox is configured properly. E.g. a seccomp rulechain can be built to allow/deny certain syscalls. Cgroups can set fine-grained resource limits.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 49963988, "answer_count": 2, "score": 2, "last_activity_date": 1524408077, "creation_date": 1524188108, "last_edit_date": 1524408077, "question_id": 49932576, "link": "https://stackoverflow.com/questions/49932576/is-the-perl-parser-safe-to-parse-arbitrary-code", "title": "Is the Perl Parser safe to parse arbitrary code?", "body": "<p>I've had a hard time finding an authoritative answer to this. Is the Perl 5 Parser safe to parse arbitrary code? Ignoring the implications of running or executing the code, is the parser itself consider safe?</p>\n\n<p>Would a vulnerability in the parser that allows arbitrary code execution be consider a security vulnerability, or a bug?</p>\n\n<p>It seems that there are tickets that are rejected from the security lists and pushed to general on parser-specific bugs,</p>\n\n<p>For example, <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=126443#txn-1372621\" rel=\"nofollow noreferrer\">a \"Keeper of the Pumpkin\" Tony Cook says,</a></p>\n\n<blockquote>\n  <p>I think in general we consider such issues as not a security concern, after all, if an attacker can provide code to the parser, you're already vulnerable.</p>\n</blockquote>\n\n<p>Specifically I'm trying to clarify these two threat models,</p>\n\n<ul>\n<li>Safe assumes that Perl was able to generate a blacklist/whitelist opcode-tree correctly</li>\n<li>Perl (p5p) assumes that all parsing is done with the full capabilities of arbitrary code execution and that if malicious code was provided you're <em>\"already vulnerable\"</em></li>\n</ul>\n\n<hr>\n\n<p><strong>Questions</strong></p>\n\n<blockquote>\n  <p>Would be interesting to know why you ask. Info on that could get you better answers. </p>\n</blockquote>\n\n<p>If the perl parser is unable to parse code safely then I believe nothing can secure arbitrary Perl. So the whole purpose of Safe.pm and OpCode.pm is moot because you can't safely generate an opcode tree to prune (blacklist opcodes). If so, that's not clear anywhere in the docs, and keeping that kind of thing secretive is a very poor idea. It would be precarious to namedrop and open up software to exploitation.</p>\n"}, {"tags": ["perl", "error-handling", "exception-handling", "syntax-error", "marpa"], "comments": [{"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1524200181, "post_id": 49932329, "comment_id": 86884006, "body": "@daxim can you please help on this"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524212041, "post_id": 49932329, "comment_id": 86889673, "body": "Have you tried to put an <code>eval</code> around the <code>$recce-&gt;read()</code> call?"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524212432, "post_id": 49932329, "comment_id": 86889877, "body": "@H&#229;konH&#230;gland can you please give an example, yes I have tried to do eval, but how do i tell the user that the error is this and this particular token at this position is causing that?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524212906, "post_id": 49932329, "comment_id": 86890138, "body": "Can you use the exception string stored in <code>$@</code> ? It should contain the line and column number"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524213293, "post_id": 49932329, "comment_id": 86890366, "body": "alright, what if there is some error like this foo &amp; ; problem here is there should be a string after &amp; ; but this type of expression will not cause line and column no. sort of error; in this case the input expression is itself wrong. How do i project this sort of errror?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524213555, "post_id": 49932329, "comment_id": 86890508, "body": "Maybe you could make the grammar fail if there is no string after a <code>&amp;</code>?"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524213671, "post_id": 49932329, "comment_id": 86890558, "body": "can you give example?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524214143, "post_id": 49932329, "comment_id": 86890869, "body": "Sorry, I have not used <code>Marpa::R2</code> for a while so I would need to read a little bit about the rules. But I would recommend looking into <a href=\"https://docs.perl6.org/language/grammar_tutorial\" rel=\"nofollow noreferrer\">Perl 6 Grammars</a> if you can."}], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1524260498, "post_id": 49939934, "comment_id": 86916856, "body": "I want the proper way of showing: till where the string is parsed successfully parsed and all the stuff like that"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1524260541, "post_id": 49939934, "comment_id": 86916865, "body": "I got a page which talks about error reporting : <a href=\"http://blogs.perl.org/users/jeffrey_kegler/2012/10/a-marpa-dsl-tutorial-error-reporting-made-easy.html\" rel=\"nofollow noreferrer\">blogs.perl.org/users/jeffrey_kegler/2012/10/&hellip;</a> ; but i dont know how to put this all stuff in place."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1524221237, "creation_date": 1524221237, "answer_id": 49939934, "question_id": 49932329, "link": "https://stackoverflow.com/questions/49932329/exception-handling-in-parser-implemented-using-marpar2/49939934#49939934", "title": "Exception handling in parser implemented using Marpa::R2", "body": "<p>Wrap the lines that can fail in an <a href=\"http://p3rl.org/Try::Tiny\" rel=\"nofollow noreferrer\">exception handler</a>:</p>\n\n<pre><code>use Try::Tiny;\n\u22ee\ntry {\n    $recce-&gt;read(\\$input);\n    my $value_ref = ${$recce-&gt;value};\n    print \"Output:\\n\".Dumper($value_ref);\n} catch {\n    warn $_;\n};\n</code></pre>\n\n<p>The full error message from Marpa will be in <code>$_</code>, it is a single long string with newlines in it. I chose to print it to STDOUT with <a href=\"http://p3rl.org/warn\" rel=\"nofollow noreferrer\"><code>warn</code></a>, and the program continues to run. As you can see in an example error message below, it contains the position where the parsing failed:</p>\n\n<pre><code>Error in SLIF parse: No lexeme found at line 1, column 5\n* String before error: \"fo\\s\n* The error was at line 1, column 5, and at character 0x006f 'o', ...\n* here: o\"\nMarpa::R2 exception at so49932329.pl line 41.\n</code></pre>\n\n<p>If you need to, you could reformat it so it looks better to the user.</p>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1524260584, "creation_date": 1524186060, "last_edit_date": 1524260584, "question_id": 49932329, "link": "https://stackoverflow.com/questions/49932329/exception-handling-in-parser-implemented-using-marpar2", "title": "Exception handling in parser implemented using Marpa::R2", "body": "<p>I have implemented a parser using Marpa::R2. Code appears like below:</p>\n\n<p>I have a large number of test cases in a .t file, which i run to test my parser. So, if any exception arises in any of the input expression, testing shouldn't stop in mid and it should give proper error message for the one which has given an error (using exception handling) and rest of the test cases should run.</p>\n\n<p>I want to do exception handling in this parser. If any sort of exception arrises even while tokenizing the input expression, I want to show appropriate message to the user, saying the position, string etc or any more details to show where the error came. Please help.</p>\n\n<pre><code>use strict;\nuse Marpa::R2;\nuse Data::Dumper;\n\nmy $grammar = Marpa::R2::Scanless::G-&gt;new({\n    default_action =&gt; '[values]',\n    source =&gt; \\(&lt;&lt;'END_OF_SOURCE'),\n    lexeme default = latm =&gt; 1\n\n:start ::= expression\n\nexpression ::= expression OP expression\nexpression ::= expression COMMA expression\nexpression ::= func LPAREN PARAM RPAREN\nexpression ::= PARAM\nPARAM ::= STRING | REGEX_STRING\nREGEX_STRING ::= '\"' QUOTED_STRING '\"'\n\n:discard    ~ sp\nsp          ~ [\\s]+\n\nCOMMA                      ~ [,]\nSTRING                     ~ [^ \\/\\(\\),&amp;:\\\"~]+\nQUOTED_STRING              ~ [^ ,&amp;:\\\"~]+\nOP                         ~ ' - ' | '&amp;'\nLPAREN                     ~ '('\nRPAREN                     ~ ')'\nfunc                       ~ 'func'\n\nEND_OF_SOURCE\n});\n\nmy $recce = Marpa::R2::Scanless::R-&gt;new({grammar =&gt; $grammar});\nprint \"Trying to parse:\\n$input\\n\\n\";\n$recce-&gt;read(\\$input);\nmy $value_ref = ${$recce-&gt;value};\nprint \"Output:\\n\".Dumper($value_ref);\n\nmy $input4 = \"func(\\\"foo\\\")\";\n</code></pre>\n\n<p>I want to do Proper error handling like :<a href=\"http://blogs.perl.org/users/jeffrey_kegler/2012/10/a-marpa-dsl-tutorial-error-reporting-made-easy.html\" rel=\"nofollow noreferrer\">http://blogs.perl.org/users/jeffrey_kegler/2012/10/a-marpa-dsl-tutorial-error-reporting-made-easy.html</a></p>\n\n<p>I dont know how to put all this stuff in place.</p>\n"}, {"tags": ["arrays", "perl", "csv"], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1524382904, "post_id": 49933043, "comment_id": 86943409, "body": "This does almost the opposite what the OP requested - except for the first &quot;WMCE...&quot; lines being included. (I wasn&#39;t the one who downvoted.)"}], "tags": [], "owner": {"reputation": 133, "user_id": 1667117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ae8b8fbe740cd72916d8a7e5878f3d?s=128&d=identicon&r=PG", "display_name": "Siraj K", "link": "https://stackoverflow.com/users/1667117/siraj-k"}, "is_accepted": false, "score": -1, "last_activity_date": 1524191707, "creation_date": 1524191707, "answer_id": 49933043, "question_id": 49932039, "link": "https://stackoverflow.com/questions/49932039/perl-loading-lines-into-an-array-based-on-contiguous-field-value/49933043#49933043", "title": "Perl Loading lines into an array based on contiguous field value", "body": "<p>Try this. If this is not what you want, please clarify your question</p>\n\n<pre><code>use strict ;\nuse warnings ;\nopen (IN, $ARGV[0]);\n\nmy $prev_row = \"\";\nmy @rec;\nwhile (my $row = &lt;IN&gt;) {\n    @rec = split(\" \", $row);\n    if ($prev_row eq \"\") {\n        print \"$row\" ;\n    } else {\n        if($rec[1] eq $prev_row) {\n            #skip\n        } else {\n            print \"$row\";\n        }\n    }\n    $prev_row = $rec[1];\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>15:15:07.705 'PUSA17122100vx1m' STE\n15:15:08.709 \"PUSA17122100w9sn\" STE\n15:50:25.244 \"PUSA171221014uk8\" STE\n15:50:26.509 \"PUSA171221014vpo\" STE\n15:50:26.750 \"PUSA171221015j7w\" STE\n13:58:34.518 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  STE\n15:47:40.061 \"PUSA171221015gtm\"  STE\n15:47:41.460 \"PUSA171221015mmi\"  STE\n15:47:45.635 \"PUSA17122101536p\"  STE\n10:35:50.524 \"PUSA171221007k8z\"  STE\n10:40:11.406 \"PUSA171221007vwl\"  STE\n13:51:04.820 \"PUSS171221000jpu\"  STE\n14:42:50.589 \"PUSS17122100193k\"  STE\n09:49:53.111 \"PUSA171221002a7g\"  STE\n13:58:34.562 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  STE\n15:15:06.747 \"PUSA17122100w7fw\"  STE\n15:15:08.348 \"PUSA17122100vrv8\"  STE\n15:15:08.542 \"PUSA17122100vzhu\"  STE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 0, "last_activity_date": 1524387831, "last_edit_date": 1524387831, "creation_date": 1524385423, "answer_id": 49963956, "question_id": 49932039, "link": "https://stackoverflow.com/questions/49932039/perl-loading-lines-into-an-array-based-on-contiguous-field-value/49963956#49963956", "title": "Perl Loading lines into an array based on contiguous field value", "body": "<p>If I understood correctly, you want to print the lines when two or more consecutive lines have a matching second field.</p>\n\n<p>My solution doesn't require you to look ahead to the next row. Instead the rows are stored to a temporary array, where the last can always be easily matched. Once a non-match or end of input is encountered, the temp array is flushed to output if it contains multiple (matching) items.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Text::CSV   ;\nuse Time::Local ;\n\nmy $file = $ARGV[0] ;\n\nopen my $fh, \"&lt;\", $file or die \"$file: $!\" ;\n\nmy $csv = Text::CSV-&gt;new({ binary    =&gt; 1,\n                           auto_diag =&gt; 1,\n                         });\nmy @temp_row_storage = ();\n\nwhile (my $row = $csv-&gt;getline($fh)) {\n    if (@temp_row_storage  and                    # if we have stored rows; and\n        $temp_row_storage[-1][1] ne $row-&gt;[1]) {  # the last stored row differs\n                                                  # from the current row\n        # =&gt; print the stored rows if there are at least 2 matching ones\n        print(map { \"@$_\\n\" } @temp_row_storage)  if  @temp_row_storage &gt;= 2;\n\n        @temp_row_storage = ();  # empty - these were already printed\n    }\n\n    # always store the current row\n    push(@temp_row_storage, $row);\n}\n\n# cleanup: print the last batch of rows if there were at least 2 matching ones\nprint(map { \"@$_\\n\" } @temp_row_storage)  if  @temp_row_storage &gt;= 2;\n</code></pre>\n\n<p>Input CSV file:</p>\n\n<pre><code>15:15:07.705,\"PUSA17122100vx1m\",STE\n15:15:08.709,\"PUSA17122100w9sn\",STE\n15:50:25.244,\"PUSA171221014uk8\",STE\n15:50:26.509,\"PUSA171221014vpo\",STE\n15:50:26.750,\"PUSA171221015j7w\",STE\n13:58:34.518,\"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\",STE\n16:05:31.310,\"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\",STE\n16:05:31.310,\"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\",STE\n16:05:34.938,\"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\",STE\n16:03:35.805,\"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\",EOM\n16:03:36.420,\"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\",EOM\n15:47:40.061,\"PUSA171221015gtm\",STE\n15:47:41.460,\"PUSA171221015mmi\",STE\n15:47:45.635,\"PUSA17122101536p\",STE\n10:35:50.524,\"PUSA171221007k8z\",STE\n10:40:11.406,\"PUSA171221007vwl\",STE\n13:51:04.820,\"PUSS171221000jpu\",STE\n14:42:50.589,\"PUSS17122100193k\",STE\n09:49:53.111,\"PUSA171221002a7g\",STE\n13:58:34.562,\"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\",STE\n16:05:31.302,\"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\",STE\n16:05:31.302,\"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\",STE\n16:05:34.931,\"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\",STE\n16:03:36.396,\"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\",EOM\n16:03:35.859,\"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\",EOM\n15:15:06.747,\"PUSA17122100w7fw\",STE\n15:15:08.348,\"PUSA17122100vrv8\",STE\n15:15:08.542,\"PUSA17122100vzhu\",STE\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>13:58:34.518 WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221 STE\n16:05:31.310 WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221 STE\n16:05:31.310 WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221 STE\n16:05:34.938 WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221 STE\n16:03:35.805 WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221 EOM\n16:03:36.420 WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221 EOM\n13:58:34.562 WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221 STE\n16:05:31.302 WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221 STE\n16:05:31.302 WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221 STE\n16:05:34.931 WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221 STE\n16:03:36.396 WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221 EOM\n16:03:35.859 WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221 EOM\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If you want to retain/return the quotes around the second field, you can use</p>\n\n<pre><code>print(map { qq!$_-&gt;[0] \"$_-&gt;[1]\" $_-&gt;[2]\\n! } @temp_row_storage)\n    if  @temp_row_storage &gt;= 2;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print(map { sprintf(qq!%s \"%s\" %s\\n!, @$_) } @temp_row_storage)\n    if  @temp_row_storage &gt;= 2;\n</code></pre>\n\n<p>but in both these cases, you must know that each row will contain exactly three fields, for the implementation to work reliably.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 49963956, "answer_count": 2, "score": 0, "last_activity_date": 1524387831, "creation_date": 1524183307, "question_id": 49932039, "link": "https://stackoverflow.com/questions/49932039/perl-loading-lines-into-an-array-based-on-contiguous-field-value", "title": "Perl Loading lines into an array based on contiguous field value", "body": "<p>Perl Loading lines into an array based on contiguous field value. </p>\n\n<p>I am trying to write a script to iterate through each line of a file and look at the second field. If the second field matches the one after it, push the whole line into an array. Once the second field hits a value that is not the same as the previous one, stop pushing lines into array. \nThen print the array. In the set below most of the lines where the second fields value is PUSA will be skipped over, however the lines where the second field contains the WMCE would be pushed into an array.   </p>\n\n<pre><code>15:15:07.705 \"PUSA17122100vx1m\" STE \n15:15:08.709 \"PUSA17122100w9sn\" STE \n15:50:25.244 \"PUSA171221014uk8\" STE \n15:50:26.509 \"PUSA171221014vpo\" STE \n15:50:26.750 \"PUSA171221015j7w\" STE \n13:58:34.518 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  STE \n16:05:31.310 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  STE \n16:05:31.310 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  STE \n16:05:34.938 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  STE \n16:03:35.805 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  EOM \n16:03:36.420 \"WMCEQ42PRD_NX:EQ-58661535-751d143b2002:171221\"  EOM \n15:47:40.061 \"PUSA171221015gtm\"  STE \n15:47:41.460 \"PUSA171221015mmi\"  STE \n15:47:45.635 \"PUSA17122101536p\"  STE \n10:35:50.524 \"PUSA171221007k8z\"  STE \n10:40:11.406 \"PUSA171221007vwl\"  STE \n13:51:04.820 \"PUSS171221000jpu\"  STE \n14:42:50.589 \"PUSS17122100193k\"  STE \n09:49:53.111 \"PUSA171221002a7g\"  STE \n13:58:34.562 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  STE \n16:05:31.302 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  STE \n16:05:31.302 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  STE \n16:05:34.931 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  STE \n16:03:36.396 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  EOM \n16:03:35.859 \"WMCEQ42PRD_NX:EQ-58661583-a62e3e5ad011:171221\"  EOM \n15:15:06.747 \"PUSA17122100w7fw\"  STE \n15:15:08.348 \"PUSA17122100vrv8\"  STE \n15:15:08.542 \"PUSA17122100vzhu\"  STE \n</code></pre>\n\n<p>This is what I have so far. I have tried saving the second (@$row[1] ) field value and then matching it against the value of the next line. \nBut I get these arrays with 2 lines in them. </p>\n\n<pre><code>#!/usr/bin/perl\nuse Text::CSV   ;\nuse Time::Local ;\n\nuse strict ;\nuse warnings ;\nmy $file = $ARGV[0] ;\n\nopen my $fh, \"&lt;\", $file or die \"$file: $!\" ;\n\n\nmy $csv = Text::CSV-&gt;new ({\n    binary    =&gt; 1,\n    auto_diag =&gt; 1,\n    });\nwhile (my $row = $csv-&gt;getline ($fh)) {\n    print \"@$row\\n\" ;\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "xregexp"], "comments": [{"owner": {"reputation": 664, "user_id": 9562391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decf3417312ac5b5a3db70e7f2560419?s=128&d=identicon&r=PG&f=1", "display_name": "csb", "link": "https://stackoverflow.com/users/9562391/csb"}, "edited": false, "score": 0, "creation_date": 1524185662, "post_id": 49931959, "comment_id": 86880272, "body": "I noticed you used a negative lookahead <code>?!</code>. Does that mean that conditions <b>2</b> and <b>3</b> is <i>exclusive or</i>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524190469, "post_id": 49931959, "comment_id": 86881497, "body": "<code>&#47;^Reply-To: .*?\\@domain(1|2)\\.fr&#47;</code>  Put parenthesis around what need be captured"}, {"owner": {"reputation": 1, "user_id": 9672304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JO P", "link": "https://stackoverflow.com/users/9672304/jo-p"}, "edited": false, "score": 0, "creation_date": 1524256738, "post_id": 49931959, "comment_id": 86915321, "body": "Thank you for having answered but my real domains are not named domain1.fr and domain2.fr, they are named something like xxxx.fr and yyyy.fr."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524280583, "post_id": 49931959, "comment_id": 86920477, "body": "Alright, then use <code>xxx|yyy</code>.  The point being that you can use <a href=\"https://perldoc.perl.org/perlrequick.html#Matching-this-or-that\" rel=\"nofollow noreferrer\">alternation</a> to match either of patterns. If it&#39;s anything else it won&#39;t match.  This is what you ask for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524280797, "post_id": 49931959, "comment_id": 86920516, "body": "Once we&#39;re at it, for merely matching you&#39;d use the <i>non-capturing</i> parenthesis, <code>(?:...)</code>. So the regex is: <code>&#47;^Reply-To: .*?\\@(?:xxx|yyy)\\.fr&#47;</code>.  The <code>?:</code> after the opening paren makes <code>(...)</code> not capture, so they are used merely to group patterns"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524281545, "post_id": 49931959, "comment_id": 86920672, "body": "If you are going to use regex I suggest to get informed first. A very good starter is <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>, perhaps along with <a href=\"https://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perlrequick</a>.  The full reference is <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9672304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JO P", "link": "https://stackoverflow.com/users/9672304/jo-p"}, "edited": false, "score": 0, "creation_date": 1524256832, "post_id": 49932278, "comment_id": 86915377, "body": "Your regexp gives a match for Reply-To : &lt;characters&gt;domain.fr or domain2.fr."}, {"owner": {"reputation": 1, "user_id": 9672304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JO P", "link": "https://stackoverflow.com/users/9672304/jo-p"}, "edited": false, "score": 0, "creation_date": 1524256904, "post_id": 49932278, "comment_id": 86915412, "body": "I want a regexp that gives a match for Reply-To : &lt;characters&gt;domain.fr different from domain1.fr and domain2.fr"}], "tags": [], "owner": {"reputation": 664, "user_id": 9562391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decf3417312ac5b5a3db70e7f2560419?s=128&d=identicon&r=PG&f=1", "display_name": "csb", "link": "https://stackoverflow.com/users/9562391/csb"}, "is_accepted": false, "score": 0, "last_activity_date": 1524185555, "creation_date": 1524185555, "answer_id": 49932278, "question_id": 49931959, "link": "https://stackoverflow.com/questions/49931959/perl-regexp-for-reply-to-then-characters-then-only-domain1-fr-or-domain/49932278#49932278", "title": "Perl regexp for &quot;Reply-To: &quot; then characters then only &quot;@domain1.fr&quot; or &quot;@domain2.fr&quot;", "body": "<p>If I understand you correctly, then the regex you're looking for is:</p>\n\n<pre><code>/^Reply-To: *.*(@domain1.fr|@domain2.fr)/\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9672304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JO P", "link": "https://stackoverflow.com/users/9672304/jo-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524185555, "creation_date": 1524182676, "last_edit_date": 1524183200, "question_id": 49931959, "link": "https://stackoverflow.com/questions/49931959/perl-regexp-for-reply-to-then-characters-then-only-domain1-fr-or-domain", "title": "Perl regexp for &quot;Reply-To: &quot; then characters then only &quot;@domain1.fr&quot; or &quot;@domain2.fr&quot;", "body": "<p>I want to write a Perl regexp which gives a match if a string </p>\n\n<ol>\n<li>begins with \"Reply-To: \"</li>\n<li>continues with any number of characters</li>\n<li>continues with only \"@domain1.fr\" or \"@domain2.fr</li>\n<li>ends with any number of characters</li>\n</ol>\n\n<p>Examples :</p>\n\n<ul>\n<li>Reply-To: abc def@domain1      must match</li>\n<li>Reply-To: abc def@domain2      must match</li>\n<li>Reply-To: abc def@domain3      must not match</li>\n</ul>\n\n<p>I tried</p>\n\n<pre><code>/^Reply-To: *(?!@domain1.fr|@domain2.fr)/ \n</code></pre>\n\n<p>but</p>\n\n<ul>\n<li>Reply-To: abc def@domain1 doesn't match</li>\n<li>Reply-To: abc def@domain2 doesn't matches</li>\n</ul>\n\n<p>The problem is to exclude from the match domains that are <strong>different from domain1 AND domain2</strong>. Because, if I want to exclude from the match domains that are different only from domain1, I type</p>\n\n<pre><code>/^Reply-To: *(?!domain1.fr)/ \n</code></pre>\n\n<p>and it works perfectly.</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1524175449, "creation_date": 1524175449, "answer_id": 49930906, "question_id": 49930807, "link": "https://stackoverflow.com/questions/49930807/delete-lines-between-last-matching-patterns/49930906#49930906", "title": "Delete lines between last matching patterns", "body": "<pre><code>perl -ne 'if    (/Pattern 1/) { print splice @buff; push @buff, $_ }\n          elsif (/Pattern 2/) { @buff = () }\n          elsif (@buff)       { push @buff, $_ }\n          else                { print }\n' -- file\n</code></pre>\n\n<p>When you see <code>Pattern 1</code>, start pushing lines into a <code>@buff</code>er, output any lines accumulated so far. When you see <code>Pattern 2</code>, clear the buffer. If the buffer has been started, push any other line to it, otherwise print it (text before the first <code>Pattern 1</code> or after <code>Pattern 2</code>.</p>\n\n<p>Note: The behaviour of <code>Pattern 2</code> without previous <code>Pattern 1</code> was not specified.</p>\n"}, {"tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1524176657, "last_edit_date": 1524176657, "creation_date": 1524176112, "answer_id": 49931007, "question_id": 49930807, "link": "https://stackoverflow.com/questions/49930807/delete-lines-between-last-matching-patterns/49931007#49931007", "title": "Delete lines between last matching patterns", "body": "<p>With awk:</p>\n\n<pre><code>awk '\n# On pattern 1 and when the buffer is not empty, flush the buffer\n/Pattern 1/ &amp;&amp; b!=\"\" { printf \"%s\", b; b=\"\" }\n\n# Append the current line and a newline to the buffer\n{ b=b\"\"$0\"\\n\" }\n\n# Clean the buffer on pattern 2\n/Pattern 2/ { b=\"\" }' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524178845, "post_id": 49931424, "comment_id": 86878686, "body": "Doesn&#39;t <code>sed</code> fail if there are multiple ranges existed?"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524178888, "post_id": 49931424, "comment_id": 86878696, "body": "@revo, not that I&#39;m aware. If this doesn&#39;t work for you, I&#39;d love to hear about it, along with the version of sed you&#39;re using (or what OS, etc)."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524179068, "post_id": 49931424, "comment_id": 86878752, "body": "Duplicate input file content and try yourself. With a blank line at end."}, {"owner": {"reputation": 3354, "user_id": 4261613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d8f052f9d8434d59270feefcf6cc65d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4261613/mikhail"}, "edited": false, "score": 0, "creation_date": 1524179426, "post_id": 49931424, "comment_id": 86878845, "body": "@ghoti Any idea how I can do that in file?"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524179479, "post_id": 49931424, "comment_id": 86878865, "body": "@revo, I&#39;m not seeing what you&#39;re seeing. I&#39;m using sed on FreeBSD, but GNU sed is behaving the same way."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 3354, "user_id": 4261613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d8f052f9d8434d59270feefcf6cc65d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4261613/mikhail"}, "edited": false, "score": 0, "creation_date": 1524179601, "post_id": 49931424, "comment_id": 86878899, "body": "@Mikhail, you mean, in a shell script?  Sure, easy!  Add your script so far to your question, along with the errors you&#39;re getting, and we can help you debug."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524179606, "post_id": 49931424, "comment_id": 86878902, "body": "I&#39;m talking about address ranges you applied. It&#39;s globally matched. So if OP has multiple same blocks in file and wants last block to be removed doing <code>tac</code> followed by <code>sed</code> simply removes every block that matches the range. I&#39;m not talking about sed implementations. <code>tac</code>ing current file shows one block starting with <code>Pattern 2</code> through <code>Pattern 1</code> that&#39;s why this single block is removed and your approach outputs right content."}, {"owner": {"reputation": 3354, "user_id": 4261613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d8f052f9d8434d59270feefcf6cc65d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4261613/mikhail"}, "edited": false, "score": 0, "creation_date": 1524179726, "post_id": 49931424, "comment_id": 86878932, "body": "@Ghoti, sorry for being unclear, I mean given the input text is in <code>file1</code>, how can I use your <code>tac | sed | tac</code> solution to modify <code>file1</code> directly? I tried adding <code>&gt;file1</code> to the end of pipe but apparently I get just an empty file afterwards."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1524179904, "post_id": 49931424, "comment_id": 86878973, "body": "@revo, Ah, yes, I see what you mean. I&#39;ve flagged that limitation at the bottom of the answer, but I&#39;ll otherwise leave this for the moment, until we get a better idea in the question of what the OP is actually after."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 3354, "user_id": 4261613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d8f052f9d8434d59270feefcf6cc65d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4261613/mikhail"}, "edited": false, "score": 0, "creation_date": 1524179976, "post_id": 49931424, "comment_id": 86878990, "body": "@Mikhail, ah, you can&#39;t. You&#39;ll need to script what <code>sed</code> does already when you use the <code>-i</code> option, redirect your output to a temporary file, then move the temporary file over your original (perhaps moving the original out of the way as a backup first). It would be awesome if you could add the details of what you really need to do, along with your attempt and results, to your question."}, {"owner": {"reputation": 3354, "user_id": 4261613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d8f052f9d8434d59270feefcf6cc65d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4261613/mikhail"}, "edited": false, "score": 0, "creation_date": 1524180305, "post_id": 49931424, "comment_id": 86879058, "body": "@ghoti, I see, I got the general idea about temp files. I updated the question to the best of my ability; as for what I attempted - well, I don&#39;t know sed and friends well enough to try something apart from what&#39;s in other similar questions, hence this question"}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": true, "score": 2, "last_activity_date": 1524180020, "last_edit_date": 1524180020, "creation_date": 1524178499, "answer_id": 49931424, "question_id": 49930807, "link": "https://stackoverflow.com/questions/49930807/delete-lines-between-last-matching-patterns/49931424#49931424", "title": "Delete lines between last matching patterns", "body": "<p>I can't think of a way to do this simply and elegantly in sed alone. It might be possible to do this with sed using <a href=\"http://www.catb.org/jargon/html/W/write-only-code.html\" rel=\"nofollow noreferrer\">write-only code</a>, but I'd need a really good reason to write something like that. :-)</p>\n\n<p>You still might be able to use <code>sed</code> for this in conjunction with other tools:</p>\n\n<pre><code>$ tac test.txt | sed '/^Pattern 2$/,/^Pattern 1$/d' | tac\nPattern 1\nsome text to keep\nnice text here\nPattern 1\nanother text to keep\n</code></pre>\n\n<p>If your system doesn't have a <code>tac</code> on it, you can create one with:</p>\n\n<pre><code>$ alias tac=\"awk '{L[i++]=\\$0} END {for(j=i-1;j&gt;=0;)print L[j--]}'\"\n</code></pre>\n\n<p>or in keeping with the theme:</p>\n\n<pre><code>$ alias tac='sed '\\''1!G;h;$!d'\\'\n</code></pre>\n\n<hr>\n\n<p>That said, I'd do this in awk, like so:</p>\n\n<pre><code>$ awk '/Pattern 1/{printf \"%s\",b;b=\"\"} {b=b $0 ORS} /Pattern 2/{b=\"\"} END{printf \"%s\",b}' text.txt\nPattern 1\nsome text to keep\nnice text here\nPattern 1\nanother text to keep\n</code></pre>\n\n<p>Or split out for easier reading/commenting:</p>\n\n<pre><code>awk '\n  /Pattern 1/ {          # If we find the start pattern,\n    printf \"%s\",b        # print the buffer (or nothing if it's empty)\n    b=\"\"                 # and empty the buffer.\n  }\n  {                      # Add the current line to a buffer, with the\n    b=b $0 ORS           # correct output record separator.\n  }\n  /Pattern 2/ {          # If we find our close pattern,\n    b=\"\"                 # just empty the buffer.\n  }\n  END {                  # And at the end of the file,\n    printf \"%s\",b        # print the buffer if we have one.\n  }' test.txt\n</code></pre>\n\n<p>This is roughly the same as hek2mgl's solution, but orders things a little more reasonably and uses ORS. :-)</p>\n\n<p>Note that both of these solutions behave correctly only if <code>Pattern 2</code> exists only once within the file. If you have multiple blocks, i.e. with both start and end patterns included, you'll need to work a little harder for this. If this is the case, please provide more detail in your question.</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1524213869, "last_edit_date": 1524213869, "creation_date": 1524212186, "answer_id": 49937136, "question_id": 49930807, "link": "https://stackoverflow.com/questions/49930807/delete-lines-between-last-matching-patterns/49937136#49937136", "title": "Delete lines between last matching patterns", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/Pattern 1/,${//{x;//p;x;h};//!H;$!d;x;s/.*Pattern 2[^\\n]*\\n\\?//;/^$/d}' file\n</code></pre>\n\n<p>The general idea here is to gather up lines beginning with <code>Pattern 1</code> and then either flush those lines when another line beginning with <code>Pattern 1</code> is encountered or at end-of-file remove the lines between <code>Pattern 1</code> and <code>Pattern 2</code> and print what is left over.</p>\n\n<p>Focus on the lines between the first line containing <code>Pattern 1</code> and the end-of-file, print all other lines as normal. If a line contains <code>Pattern 1</code>, swap to the hold space and if those lines also contain the same regexp, print those lines and then replace the current line in the hold space. If the current line does not contain the regexp, then append it to the hold space and if it is not the end-of-file delete it. At the end-of-file, swap to the hold space and remove any lines upto and including the line containing <code>Pattern 2</code> and print what is remaining.</p>\n\n<p>N.B. a tricky situation arises as in your example, when the line containing <code>Pattern 2</code> is the last line of the file. As sed uses newline to delimit lines, it removes them before placing the line into the pattern space and appends them prior to printing. If the pattern/hold space is empty, sed will append a newline, which in this case would add a spurious newline. The solution is to remove any lines between <code>Pattern 1</code> and <code>Pattern 2</code> including any newline following the line containing <code>Pattern 2</code>. If there are additional lines these will be printed as normal, however if there were no lines following, the hold space will now be empty and as it must have contained something before, since it is now empty it can safely be deleted.</p>\n"}], "owner": {"reputation": 3354, "user_id": 4261613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d8f052f9d8434d59270feefcf6cc65d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4261613/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 49931424, "answer_count": 4, "score": 1, "last_activity_date": 1524213869, "creation_date": 1524174855, "last_edit_date": 1524180021, "question_id": 49930807, "link": "https://stackoverflow.com/questions/49930807/delete-lines-between-last-matching-patterns", "title": "Delete lines between last matching patterns", "body": "<p>First of all, I am aware of <a href=\"https://stackoverflow.com/questions/6287755/using-sed-to-delete-all-lines-between-two-matching-patterns\">these</a> <a href=\"https://stackoverflow.com/questions/8085633/sed-delete-lines-between-two-pattern-matches\">nice</a> questions. My question is a bit different: given the text format below coming from a <code>file1</code>:</p>\n\n<pre><code>Pattern 1\nsome text to keep\nnice text here\nPattern 1\nanother text to keep\nPattern 1\nREMOVE ME\nAND ME\nME TOO PLEASE\nPattern 2\n</code></pre>\n\n<p>How can I remove only text between last <code>Pattern 1</code> and <code>Pattern 2</code> including patterns, so that <code>file1</code> now contains:</p>\n\n<pre><code>Pattern 1\nsome text to keep\nnice text here\nPattern 1\nanother text to keep\n</code></pre>\n\n<p>I would prefer solution with sed, but any other solution (perl, bash, awk) would do just fine.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524174401, "post_id": 49930603, "comment_id": 86877369, "body": "Add <a href=\"http://p3rl.org/strict\" rel=\"nofollow noreferrer\">strict</a> and <a href=\"http://p3rl.org/warnings\" rel=\"nofollow noreferrer\">warnings</a>. Then come back."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1524174452, "post_id": 49930603, "comment_id": 86877387, "body": "Might be more suitable for <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524174516, "post_id": 49930603, "comment_id": 86877409, "body": "@choroba Both of those were done in my original script, but were overlooked when pasting into the question. I&#39;ll fix it."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524174651, "post_id": 49930603, "comment_id": 86877455, "body": "Good. Also, provide sample data rather than their description. See <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524175721, "post_id": 49930603, "comment_id": 86877820, "body": "Re: &quot;<i>large amounts of data</i>&quot; -- (1) how big is <code>jobfile</code>?  (2) how big is <code>nidfile</code>? (3) how many filehandles are typically created?"}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1524176006, "post_id": 49930603, "comment_id": 86877907, "body": "@choroba Sample data added. Note that it is completely contrived."}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524176230, "post_id": 49930603, "comment_id": 86877970, "body": "@zdim Should now execute. <code>jobfile</code> is 32 kilobytes, <code>nidfile</code> is 32 megabytes. I don&#39;t know exactly how many filehandles, 100s I would imagine. The machine I am using to process this data doesn&#39;t have a file handle limit."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1524176347, "post_id": 49930603, "comment_id": 86878002, "body": "code reviews are off topic for stack overflow."}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1524176891, "post_id": 49930603, "comment_id": 86878149, "body": "@xaxxon Noted, I&#39;ll post it on codereview as mentioned by choroba. Should I delete the one here?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524191482, "post_id": 49930603, "comment_id": 86881767, "body": "I think that your question about efficiency is perfectly fine here.  (Perhaps perople were thrown off by the question about idioms appearing front and center?) How does your code perform (runtime?) and what do you need instead?  Adding that to the question (along with file sizes from your comment above) may emphasize its optimization aspect."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524191844, "post_id": 49930603, "comment_id": 86881844, "body": "Btw, this is very good for the &quot;<i>first perl script</i>&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524193259, "post_id": 49930603, "comment_id": 86882156, "body": "Also -- how often does the code end up writing to files (how big are output files typically)?  This is the most expensive part and if it writes for most lines it makes no sense &quot;optimizing&quot; other aspects.  But if it writes infrequently that&#39;s different."}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524430472, "post_id": 49930603, "comment_id": 86957156, "body": "@zdim I&#39;ve only run it on a small subset of the data to make sure it works before I gave it all the data to chew through. There&#39;s enough that if the time it took to run through the sample scales linearly, it would take just over 2 days to run through a day of data. While this is acceptable, any improvement would be welcomed. It writes a line for every line in the data (it&#39;s just restructuring the data to a format better for other tools)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524450604, "post_id": 49930603, "comment_id": 86961251, "body": "ouch ... two days?  So how big are the real files? (I thought it was 32Kb+32Mb) I&#39;ll look into details and add code to speed things up."}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524533976, "post_id": 49930603, "comment_id": 87001061, "body": "@zdim those are the lookup table information files. The actual data of interest is orders of magnitude larger. I chose Perl because I had read some where it was good for text manipulation (also because I&#39;d been looking for an excuse to learn it, but that&#39;s another story)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524540198, "post_id": 49930603, "comment_id": 87002305, "body": "OK, that helps. Still, this should go much, much quicker. I am asking about all this because I&#39;d like to understand the statement before &quot;optimizing.&quot;  Is all that data in one file (well, two), ready for processing?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524540437, "post_id": 49930603, "comment_id": 87002341, "body": "Btw, Perl indeed excels at text manipulation of any kind. In my experience it is excellent for much of other kind of work as well.  I draw the line when a compiled language is needed (mostly for speed), for very specific problem domains, or for a <i>really</i> complex job."}, {"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524542405, "post_id": 49930603, "comment_id": 87002724, "body": "@zdim no worries. Yes, all data in the files are in csv format, including the main file. The script is splitting the individual data in the main file to separate files based on job id, for analysis purposes. It needs the information in the lookup tables to move it correctly."}], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "edited": false, "score": 0, "creation_date": 1524177130, "post_id": 49931155, "comment_id": 86878232, "body": "Is the difference between the file handles I use and the lexical ones the same as the difference between global and local variables?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "edited": false, "score": 0, "creation_date": 1524177250, "post_id": 49931155, "comment_id": 86878267, "body": "@AzureHeights  That plus more, since it&#39;s about filehandles.  In short, you practically never need typeglobs"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "edited": false, "score": 1, "creation_date": 1524178419, "post_id": 49931155, "comment_id": 86878578, "body": "@AzureHeights  Added links to docs (one for typeglobs vs lexical)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1524676110, "last_edit_date": 1524676110, "creation_date": 1524176979, "answer_id": 49931155, "question_id": 49930603, "link": "https://stackoverflow.com/questions/49930603/how-can-this-perl-script-be-optimized-made-more-idiomatic/49931155#49931155", "title": "How can this perl script be optimized/made more idiomatic?", "body": "<p>As for efficiency, if this code writes to files often (and needs to open many on the fly) I don't see a way to speed it up significantly. Allowing for pre- or post-processing may help but that depends on wider context.</p>\n\n<p>Here is a quick scoop of some coding points.  In order of appearance</p>\n\n<ul>\n<li><p>There is exactly no use of \"initializing\" arrays and hashes to an empty list; just declare them</p></li>\n<li><p>Always <a href=\"https://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">use lexical filehandles</a> and three-argument <code>open</code> (like you do for writing). So  </p>\n\n<pre><code>open my $job_fh, '&lt;', ...\n</code></pre></li>\n<li><p>There is no need to first create a key in order to assign to it. The first line below is unneeded</p>\n\n<pre><code>#if (!exists $nodes{$fields[0]}) { $nodes{$fields[0]} = (); }  # NOT needed\npush @{$nodes{$fields[0]}}, $fields[1];\n</code></pre>\n\n<p>This is by courtesy of <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">autovivification</a>: if an object is dereferenced in an <em>lvalue context</em> (when it's modifiable) it is created if it is undefined. This is a complex feature. Close to your use is <a href=\"https://stackoverflow.com/a/45872658/4653379\">this post</a>; also see this <a href=\"https://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\" rel=\"nofollow noreferrer\">EffectivePerler article</a>, and <a href=\"https://stackoverflow.com/a/41401306/4653379\">this post</a> with its links. </p></li>\n<li><p>Use array, or list, <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slices</a>.  Instead of</p>\n\n<pre><code>my @array = ($fields[0], $fields[1], $fields[2]);\n</code></pre>\n\n<p>one can do </p>\n\n<pre><code>my @array = @fields[0,1,2];   # or @fields[0..2] in this case\n</code></pre>\n\n<p>Then one can also do</p>\n\n<pre><code>push @timing, [ @fields[0..2] ];\n</code></pre>\n\n<p>or </p>\n\n<pre><code>push @timing, [ (split /,/)[0..2] ];  # no need for @fields now\n</code></pre>\n\n<p>which are more efficient since intermediate arrays aren't created. But these last two are less flexible, limiting possibilities for intermediate processing or checks.   If this is all you do then</p>\n\n<pre><code>my @timing = map { [ (split /,/)[0..2] ] } &lt;$job_fh&gt;;\n</code></pre>\n\n<p>also goes, but it is even less flexible (and reads all lines at once<sup>&dagger;</sup>)</p></li>\n<li><p>Arrays in scalar <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> are evaluated to return the number of elements. So</p>\n\n<pre><code>scalar @jobs &gt; 0 or next;\n</code></pre>\n\n<p>does not need <code>scalar</code> and you can write</p>\n\n<pre><code>@jobs &gt; 0 or next;\n</code></pre>\n\n<p>which reduces to </p>\n\n<pre><code>@jobs or next;\n</code></pre>\n\n<p>but what I'd rather write as</p>\n\n<pre><code>next if not @jobs;   # or:  next unless @jobs;\n</code></pre>\n\n<p>using <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">statement modifier</a> (\"postfix syntax\")</p></li>\n</ul>\n\n<hr>\n\n<p><sup>&dagger;</sup> The <a href=\"https://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\"><code>&lt;&gt;</code> operator</a> is in list context (see link above) imposed by <code>map</code> so it returns all lines</p>\n"}], "owner": {"reputation": 271, "user_id": 8201190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8f2abcce9d6042ce4736d804409173?s=128&d=identicon&r=PG&f=1", "display_name": "Azure Heights", "link": "https://stackoverflow.com/users/8201190/azure-heights"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 49931155, "answer_count": 1, "score": -1, "last_activity_date": 1524676110, "creation_date": 1524173804, "last_edit_date": 1524175958, "question_id": 49930603, "link": "https://stackoverflow.com/questions/49930603/how-can-this-perl-script-be-optimized-made-more-idiomatic", "title": "How can this perl script be optimized/made more idiomatic?", "body": "<p>I need to split data found in one file into other files based upon their job id. The structure of the file, and the two helper files, are:</p>\n\n<pre><code># data.txt - data file - node,timestamp,data\n1,1516,25\n2,1845,24\n3,1637,26\n4,1342,74\n5,1426,63\n6,1436,23\n7,1732,64\n1,1836,83\n2,1277,12\n3,2435,62\n4,2433,47\n5,2496,52\n6,2142,69\n7,2176,53\n\n# job.txt - job timing - job,startts,endts\n1234,1001,2000\n5678,2001,2500\n\n# node.txt - node to job map - job,node\n1234,1\n1234,2\n1234,3\n1234,4\n1234,5\n5678,3\n5678,4\n5678,5\n5678,6\n5678,7\n</code></pre>\n\n<p>In order to map a line in the data file to its appropriate new file, two transformations must take place. First, the data timestamp must be used to determine which jobs are running. Second, the list of running jobs must be checked to determine which owns the node the data references. This is my solution:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @timing = ( );\nmy %nodes = ( );\nmy %handles = ( );\n\n### array of arrays containing job, start time, and end time\nopen JOB, \"&lt;job.txt\" or die \"can't open jobfile, $!\";\nwhile (&lt;JOB&gt;) {\n    my @fields = split /,/;  #/ stop SO highliter\n    my @array = ($fields[0], $fields[1], $fields[2]);\n\n    push @timing, \\@array;\n}\nclose JOB;\n\n### map job -&gt; array of nodes\nopen NID \"&lt;node.txt\" or die \"can't open nidfile\";\nwhile (&lt;NID&gt;) {\n    my @fields = split /,/;  #/\n\n    if (!exists $nodes{$fields[0]}) { $nodes{$fields[0]} = (); }\n    push @{$nodes{$fields[0]}}, $fields[1];\n}\nclose NID;\n\n### split data\nopen DATA, \"&lt;data.txt\" or die \"Couldn't open file all.pow, $!\";\nwhile (&lt;DATA&gt;) {\n    my @fields = split /,/;  #/\n\n    my @jobs = grep {$fields[1] &gt;= $_-&gt;[1] &amp;&amp; $fields[1] &lt;= $_-&gt;[2]} @timing;\n    scalar @jobs &gt; 0 or next;\n    my $jid = (grep {!exists $nodes{$fields[0]}} @jobs)[0][0];\n\n    ### create and memoize file handles\n    if (!exists $handles{$jid}) {\n        open my $temp, \"&gt;$jid.txt\" or die \"Can't open jfile $jid, $!\";\n        $handles{$jid} = $temp;\n    }\n    print {$handles{$jid}} \"$fields[1],fields[2]\";\n}\nclose DATA;\n</code></pre>\n\n<p>I would like to know if there are any ways to increase the speed/efficiency of the data file loop. This has to run over large amounts of data, and so it needs to be as efficient as possible. I would also appreciate any comments on more idiomatic approaches: this is my first perl script (the array of references to arrays took quite a while to figure out).</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1524167379, "post_id": 49928967, "comment_id": 86874203, "body": "Also note that <code>$hash</code> is a bad name, as it&#39;s in fact <i>a hash reference</i>, so the value is <code>$hash-&gt;{b}</code>. To use <code>$hash{b}</code>, you need to declare <code>my %hash = ( ... )</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524176284, "post_id": 49928967, "comment_id": 86877985, "body": "Unless the hash value must adopt different values at <i>run time</i>, when the value should be callable, perhaps <i>tied?</i>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524176610, "post_id": 49928967, "comment_id": 86878068, "body": "I think <code>$hashref</code> is no better than <code>$hash</code>, and it is longer. The <code>$</code> indicates that this is a scalar, and so <code>$hash</code> must be a reference. But I object to anything being called <code>@array</code>, <code>%hash</code>, or <code>$scalar</code> as identifiers should be about <i>purpose</i> rather than <i>mechanism</i>. Funnily enough we never see <code>$scalar</code>; I wonder why not?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1524177303, "post_id": 49928967, "comment_id": 86878282, "body": "How about I call it <code>$foo</code>, so people can stop reading so much into what just needs to be a syntactically correct placeholder?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524230382, "post_id": 49928967, "comment_id": 86901210, "body": "@chepner: Why assign to a variable at all?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1524240530, "post_id": 49928967, "comment_id": 86907847, "body": "Because the OP had a variable. Really, is this important enough to fixate on?"}], "tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 4, "last_activity_date": 1524177319, "last_edit_date": 1524177319, "creation_date": 1524166639, "answer_id": 49928967, "question_id": 49928940, "link": "https://stackoverflow.com/questions/49928940/conditionional-perl-hash/49928967#49928967", "title": "Conditionional Perl hash", "body": "<p>Use the conditional expression:</p>\n\n<pre><code>my $foo = {\n  a =&gt; 1,\n  b =&gt; ($flag == 1) ? 2 : 3\n}\n</code></pre>\n\n<p>Note that the conditional is evaluated when you first define <code>$foo</code>. If you subsequently change the value of <code>$flag</code>, the value of <code>$foo-&gt;{b}</code> won't change.</p>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 49928967, "answer_count": 1, "score": 1, "last_activity_date": 1524177319, "creation_date": 1524166534, "last_edit_date": 1524167660, "question_id": 49928940, "link": "https://stackoverflow.com/questions/49928940/conditionional-perl-hash", "title": "Conditionional Perl hash", "body": "<p>i have a Perl hash and want to write inside the hash a conditional variable ? hwo i can do something like this ?</p>\n\n<pre><code>my $hash = {\n    a =&gt; 1,\n    if ($flag ==1) {\n        b =&gt; 2,\n    }\n    else {\n        b =&gt; 3,\n    }\n}\n</code></pre>\n"}, {"tags": ["sql", "perl", "dbd"], "comments": [{"owner": {"reputation": 434867, "user_id": 330315, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4b152262d9ba55197f609625358ff7e0?s=128&d=identicon&r=PG", "display_name": "a_horse_with_no_name", "link": "https://stackoverflow.com/users/330315/a-horse-with-no-name"}, "edited": false, "score": 2, "creation_date": 1524167331, "post_id": 49928296, "comment_id": 86874177, "body": "apparently that <code>DBD::CSV</code> thing does not really support anything than the most trivial SQL statements - it appears to not even support derived tables. If you want to learn SQL you should use a real DBMS, e.g. Postgres not some fake SQL interface to a CSV file"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524165587, "post_id": 49928515, "comment_id": 86873315, "body": "My DB dont support &#39;with&#39;. <code>Command &#39;WITH&#39; not recognized or not supported! </code> Im use this lib: <a href=\"http://search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Statement/Syntax.pod\" rel=\"nofollow noreferrer\">search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Stateme&zwnj;&#8203;nt/&hellip;</a>"}, {"owner": {"reputation": 1218, "user_id": 9236062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e11e1e55f8af6c7e55856bf4b742b7?s=128&d=identicon&r=PG&f=1", "display_name": "Aura", "link": "https://stackoverflow.com/users/9236062/aura"}, "reply_to_user": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524165673, "post_id": 49928515, "comment_id": 86873367, "body": "Then you can create a temp table and store values of inner select query in temp table and then select it from main query."}, {"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1524166847, "post_id": 49928515, "comment_id": 86873940, "body": "With Your second solution I have error:<code>Bad table or column name: &#39;SELECT&#39; is a SQL reserved word! at &#47;usr&#47;local&#47;lib&#47;perl5&#47;site_perl&#47;5.26.1&#47;SQL&#47;Statement.pm line 90. Bad table or column name: &#39;t.&#39; has chars not alphanumeric or underscore! at &#47;usr&#47;local&#47;lib&#47;perl5&#47;site_perl&#47;5.26.1&#47;SQL&#47;Statement.pm line 90.</code>"}], "tags": [], "owner": {"reputation": 1218, "user_id": 9236062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e11e1e55f8af6c7e55856bf4b742b7?s=128&d=identicon&r=PG&f=1", "display_name": "Aura", "link": "https://stackoverflow.com/users/9236062/aura"}, "is_accepted": true, "score": 3, "last_activity_date": 1524188494, "last_edit_date": 1524188494, "creation_date": 1524164957, "answer_id": 49928515, "question_id": 49928296, "link": "https://stackoverflow.com/questions/49928296/sql-count-results-from-select/49928515#49928515", "title": "SQL - COUNT results from SELECT", "body": "<p>You can store your query from 'FROM' clause in CTE like following:</p>\n\n<pre><code>with cte as(\nSELECT asset, strategy, MAX(profit) FROM a1.csv GROUP BY strategy\n)\nSelect count(*)\nFrom cte\n</code></pre>\n\n<p>Here is another approach, can you please try following code:</p>\n\n<pre><code>SELECT COUNT(t.*) AS dupa \nFROM (SELECT asset, strategy, MAX(profit) \n      FROM a1.csv \n      GROUP BY strategy) t\n</code></pre>\n\n<p>Okay, this is another approach to it using temporary table like I stated before:</p>\n\n<pre><code>CREATE TEMP TABLE TempTable AS \nSELECT asset, strategy, MAX(profit) FROM a1.csv GROUP BY asset, strategy\n\nSELECT COUNT(*) FROM TempTable\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 49928515, "answer_count": 1, "score": 0, "last_activity_date": 1524188494, "creation_date": 1524164087, "last_edit_date": 1524167169, "question_id": 49928296, "link": "https://stackoverflow.com/questions/49928296/sql-count-results-from-select", "title": "SQL - COUNT results from SELECT", "body": "<p>I would like to count all the repetitions of the maximum values from the profit column for all asset (they repeat, and I want to choose the best result from each unique repetition), and finally group the results according to the value of the strategy column.</p>\n\n<p>I use DBD::CSV for Perl, its using SQL statements like here: <a href=\"http://search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Statement/Syntax.pod\" rel=\"nofollow noreferrer\">http://search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Statement/Syntax.pod</a></p>\n\n<p>But that is not important. What I care about most is to improve my syntax, and I should deal with the rest of the matter.</p>\n\n<pre><code>SELECT COUNT(*) AS dupa \nFROM (SELECT asset, strategy, MAX(profit) \n      FROM a1.csv \n      GROUP BY strategy);\n</code></pre>\n\n<p>Output: <code>Bad table or column name: 'SELECT' is a SQL reserved word!</code> </p>\n\n<p>Another example: </p>\n\n<pre><code>SELECT * AS xxx FROM (SELECT strategy, profit FROM a1.csv GROUP BY strategy)\n</code></pre>\n\n<p>Output: <code>Bad table or column name: 'SELECT' is a SQL reserved word!</code> </p>\n\n<p>It's only example. I tried different combinations and there are always errors. I wanted to ask what is wrong in my syntax?</p>\n"}, {"tags": ["python-2.7", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524158534, "post_id": 49925112, "comment_id": 86869560, "body": "<i>&quot;Das System kann die angegebene Datei nicht finden</i>&quot;: what is that in english?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524158687, "post_id": 49925112, "comment_id": 86869639, "body": "@H&#229;konH&#230;gland &quot;The system cannot find the specified file.&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524159148, "post_id": 49925112, "comment_id": 86869893, "body": "I don&#39;t think the error is related to perl. If I run <code>perl .&#47;sample.pl foo bar</code> from the command prompt, I get <code>Can&#39;t open perl script &quot;.&#47;sample.pl&quot;: No such file or directory</code>. The error you&#39;re getting looks like a Python exception, probably because it can&#39;t find <code>perl</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524160982, "post_id": 49925112, "comment_id": 86870837, "body": "What happens if you change your code to <code>cmd = [&#39;perl&#39;, &#39;-E&#39;, &#39;say &quot;Similarity=42&quot;&#39;]</code>?"}, {"owner": {"reputation": 53, "user_id": 9627206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "belzebubele", "link": "https://stackoverflow.com/users/9627206/belzebubele"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1524164309, "post_id": 49925112, "comment_id": 86872628, "body": "@melpomene i get 42 printed out"}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 3, "creation_date": 1524165361, "post_id": 49925112, "comment_id": 86873193, "body": "If you want speed, either read the perl source and port the algorithm to Python, write your application in Perl, or write a perl process that will be loaded once and then hang around to handle multiple translations and talk to it from your python code."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1524299877, "post_id": 49925112, "comment_id": 86924365, "body": "The error could also indicate that perl cannot find the <code>.&#47;sample.pl</code> file. Note that for a relative path, the <code>sample.pl</code> file must be in the current working directory where you run the Python script. Can you use an absolute path instead? E.g. <code>os.path.join(os.path.dirname(__file__), &#39;sample.pl&#39;)</code>."}], "owner": {"reputation": 53, "user_id": 9627206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "belzebubele", "link": "https://stackoverflow.com/users/9627206/belzebubele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524162676, "creation_date": 1524152530, "last_edit_date": 1524162676, "question_id": 49925112, "link": "https://stackoverflow.com/questions/49925112/python-to-perl-calculate-term-relatedness", "title": "Python to Perl - Calculate term relatedness", "body": "<p>I am trying to find a way to calculate the relatedness of two terms in Python, but I could only find ways to calculate the similarity.</p>\n\n<p>I found\n<a href=\"https://manned.org/WordNet::Similarity::hso/e763c92c\" rel=\"nofollow noreferrer\">a Perl script</a> that seems to do the job:</p>\n\n<pre><code>     use WordNet::Similarity::hso;\n\n     use WordNet::QueryData;\n\n     my $wn = WordNet::QueryData-&gt;new();\n\n     my $object = WordNet::Similarity::hso-&gt;new($wn);\n\n     my $value = $object-&gt;getRelatedness(\"car#n#1\", \"bus#n#2\");\n\n     ($error, $errorString) = $object-&gt;getError();\n\n     die \"$errorString\\n\" if($error);\n\n     print \"car (sense 1) &lt;-&gt; bus (sense 2) = $value\\n\";\n</code></pre>\n\n<p>I tried to write a Python wrapper around the Perl script:</p>\n\n<pre><code>import subprocess\n\nset1 = 'church#n#1'\nset2 = 'temple#n#1'\ncmd = ['perl', './sample.pl', set1, set2]\nproc = subprocess.Popen(cmd, stdout=subprocess.PIPE)\n\n\nfor line in proc.stdout:\n    if 'Similarity' in line:\n        similarity = int(line.split(\"=\")[-1])\nprint similarity\n</code></pre>\n\n<p>I have installed perl v.5.26.1 from binary, but when I run my Python script I get.</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"asdf/sshso.py\", line 6, in &lt;module&gt; proc = subprocess.Popen(cmd, stdout=subprocess.PIPE)\nFile \"C:\\Python27\\lib\\subprocess.py\", line 390, in __init__ errread, errwrite)\nFile \"C:\\Python27\\lib\\subprocess.py\", line 640, in _execute_child startupinfo)\nWindowsError: [Error 2] Das System kann die angegebene Datei nicht finden\n</code></pre>\n\n<p>I know that my Python/Perl combination has errors and can't work.</p>\n\n<p>I can figure that out as the Perl code doesn't seem too complicated. I'm just looking for a way to parse my Python words to the Perl script and get back my calculated <em>relatedness value</em>.</p>\n\n<p>I have to do this for 44,000 items, so performance is important.</p>\n"}, {"tags": ["perl", "promise"], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 3, "last_activity_date": 1524153520, "creation_date": 1524153520, "answer_id": 49925419, "question_id": 49923069, "link": "https://stackoverflow.com/questions/49923069/promises-in-not-running-in-parallel/49925419#49925419", "title": "Promises in not running in parallel", "body": "<p>Promises are a mechanism to structure <em>callbacks</em>, not a way to run code in <em>parallel</em>. There is some connection between callbacks and parallelism because both can be used for <em>asynchronous programming</em>, where we run another piece of code if we have to wait for something. Without threads, requires that you use some <em>event loop</em>, and also tell the event loop when you are waiting.</p>\n\n<p>Common Perl event loops are <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a>, and <a href=\"https://metacpan.org/pod/Mojo::IOLoop\" rel=\"nofollow noreferrer\">Mojo::IOLoop</a> from the Mojolicious web framework.</p>\n\n<p>Perl doesn't really do multithreading \u2013 the threads are effectively a <code>fork()</code> emulation (see the <a href=\"https://metacpan.org/pod/threads#WARNING\" rel=\"nofollow noreferrer\"><code>threads</code> warning</a>), and definitively not the kind of threads you know from Java.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1524159263, "creation_date": 1524159263, "answer_id": 49926989, "question_id": 49923069, "link": "https://stackoverflow.com/questions/49923069/promises-in-not-running-in-parallel/49926989#49926989", "title": "Promises in not running in parallel", "body": "<p>It looks like you've taken the <em>synopsis</em> code from <code>Promises</code> and removed the event loop module <code>AnyEvent::HTTP</code> and all calls to it. That is why your program doesn't work as you expect</p>\n\n<p><code>Promises</code> can't supply parallelism on its own: it needs an <em>event loop</em> to create multiple processes that <em>can</em> run \"in parallel\", but any event loop module on CPAN will do fine</p>\n\n<p>What is it that you want to use parallelism for? The right choice of event loop module will make all the difference</p>\n\n<p>But don't forget that, unless your program's activity is disk-bound or network-bound, you are unlikely to see a major improvement in performance. Multi-processing is an illusion whereby the operating system will distribute processor time amongst processes, but with only a single processor the elapsed time will always be rather more than the equivalent process run in isolation</p>\n"}], "owner": {"reputation": 6423, "user_id": 588747, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/691ccb6c27a2e7d4042aa5aa1edad8a2?s=128&d=identicon&r=PG", "display_name": "Nageswaran", "link": "https://stackoverflow.com/users/588747/nageswaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1524159263, "creation_date": 1524146495, "last_edit_date": 1524158146, "question_id": 49923069, "link": "https://stackoverflow.com/questions/49923069/promises-in-not-running-in-parallel", "title": "Promises in not running in parallel", "body": "<p>I am trying to use the\n<a href=\"https://metacpan.org/pod/Promises\" rel=\"nofollow noreferrer\"><code>Promises</code></a> module\nto run a process in parallel. My requirement is not forking a new process and let it run.</p>\n\n<p>I tried this code but it is not executing in parallel</p>\n\n<pre><code>use AnyEvent::HTTP;\nuse JSON::XS qw[ decode_json ];\nuse Promises qw[ collect deferred ];\nuse Data::Dumper;\n\nsub process {\n    my ($data) = @_;\n    my $d = deferred;\n\n    for (1..5) {\n        print \"\\n$data \" . $_ * $data;\n    }\n\n    $d-&gt;resolve($data);\n\n    $d-&gt;promise;\n}\n\n\ncollect(\n    process(10),\n    process(20),\n    process(30),\n)-&gt;then(\n    sub {\n        print Dumper(\\@_);\n    },\n);\n\n1;\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>10 10\n10 20\n10 30\n10 40\n10 50\n20 20\n20 40\n20 60\n20 80\n20 100\n30 30\n30 60\n30 90\n30 120\n30 150$VAR1 = [\n          [\n            10\n          ],\n          [\n            20\n          ],\n          [\n            30\n          ]\n        ];\n</code></pre>\n\n<p>What is wrong with this? </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": -1, "last_activity_date": 1524148188, "last_edit_date": 1524148188, "creation_date": 1524146953, "answer_id": 49923224, "question_id": 49922461, "link": "https://stackoverflow.com/questions/49922461/get-value-of-all-perl-regex-capture-groups/49923224#49923224", "title": "get value of all perl regex capture groups", "body": "<p>You can treat the numbers in $1 $2 etc as variables </p>\n\n<pre><code>$t=\"abcdefghijklmnop\"; \n$t=~/(.)(.)(.)(.)(.)(.)(.)/; \nprint $$_ for 1..10;\n</code></pre>\n\n<p>you can bypass strict, </p>\n\n<pre><code>  use strict;\n  $t=\"abcdefghijklmnop\"; \n  $t=~/(.)(.)(.)(.)(.)(.)(.)/; \n{\n    no strict;\n    print $$_ for 1..10;\n}\n</code></pre>\n\n<p>Or, you can put them in an array (taken from <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlre.html</a>)</p>\n\n<pre><code>use strict; \nmy $t=\"abcdefghijklmnop\"; \nmy @a=$t=~/(.)(.)(.)(.)(.)(.)(.)/; \nprint \"@a\";\n</code></pre>\n\n<p>although neither are perfect, using strict references means you have know know the names of your variables. Therefore, ideally you know you variable names e.g., how many capture groups you've used</p>\n"}, {"comments": [{"owner": {"reputation": 610, "user_id": 2600099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f987e5fcc1463e4ebe90870565c5c602?s=128&d=identicon&r=PG", "display_name": "Matija Nalis", "link": "https://stackoverflow.com/users/2600099/matija-nalis"}, "edited": false, "score": 0, "creation_date": 1524147671, "post_id": 49923335, "comment_id": 86862642, "body": "thanks, capturing into group is exactly what I was looking for! Can&#39;t believe I missed it... &quot;use strict&quot; is indeed a must, and eval seems even more kludgy..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1524157717, "post_id": 49923335, "comment_id": 86869132, "body": "<code>if ( @captured )</code> isn&#39;t sufficient. A regex pattern can match without any of the captures being populated. You need <code>if ( my @captured = $input =~ $user_regexp ) { print &quot;@captured\\n&quot; }</code> and even that doesn&#39;t provide for one or more of the captures being <code>undef</code>, which will raise a warning."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 5, "last_activity_date": 1524152891, "last_edit_date": 1524152891, "creation_date": 1524147277, "answer_id": 49923335, "question_id": 49922461, "link": "https://stackoverflow.com/questions/49922461/get-value-of-all-perl-regex-capture-groups/49923335#49923335", "title": "get value of all perl regex capture groups", "body": "<p>Maybe you can just capture into an array?</p>\n\n<pre><code>my @captured = $input =~ $user_regexp;\nif( @captured ) { print join \" \", @captured; print \"\\n\"; }\n</code></pre>\n\n<p>If you absolutely must use the numbered capture variables, use eval:</p>\n\n<pre><code>my $input = \"abc\";\nmy $re = qr/(.)(.)(.)/;\nif( $input =~ $re){\n  my $num = 1;\n  print \"captured \\$$num = \". eval(\"\\$$num\") .\"\\n\" and $num++\n    while eval \"defined \\$$num\";\n}\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>my $input = \"abc\";\nmy $re = qr/(.)(.)(.)/;\nif( $input =~ $re){\n  my $num = 1;\n  print \"captured \\$$num = $$num\\n\" and $num++ while defined $$num;\n}\n</code></pre>\n\n<p>...but this last example with scalar references doesn't work under <code>use strict</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1524149044, "creation_date": 1524149044, "answer_id": 49923917, "question_id": 49922461, "link": "https://stackoverflow.com/questions/49922461/get-value-of-all-perl-regex-capture-groups/49923917#49923917", "title": "get value of all perl regex capture groups", "body": "<p>If you are running Perl v5.26.2 (currently the most recent release) or later then you can use the built-in array <code>@{^CAPTURE}</code> instead of accessing the capture variables themselves</p>\n\n<p>Just like a normal array, the number of captures is <code>scalar @{^CAPTURE}</code>, and the indexes are from zero to <code>$#{^CAPTURE}</code></p>\n\n<p>Note that the array is populated by the most recent <em>successful</em> pattern match, so just like the capture variables themselves you should check the status of a pattern match before using the contents of <code>@{^CAPTURE}</code></p>\n"}, {"tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 2, "last_activity_date": 1524150194, "creation_date": 1524150194, "answer_id": 49924323, "question_id": 49922461, "link": "https://stackoverflow.com/questions/49922461/get-value-of-all-perl-regex-capture-groups/49924323#49924323", "title": "get value of all perl regex capture groups", "body": "<p>For v5.24 there's no array of all captured values, but you can extract them using the start/end location of each match:</p>\n\n<pre><code>my $s  = &lt;some string&gt;;\nmy $re = &lt;some regex with captures&gt;;\nmy @matches;\nif ($s =~ $re) {\n    for my $i (0 .. $#-) {\n        push @matches, substr($s, $-[$i], $+[$i] - $-[$i]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1524151636, "creation_date": 1524151636, "answer_id": 49924827, "question_id": 49922461, "link": "https://stackoverflow.com/questions/49922461/get-value-of-all-perl-regex-capture-groups/49924827#49924827", "title": "get value of all perl regex capture groups", "body": "<p>The variables mentioned by <a href=\"https://stackoverflow.com/users/8233/michael-carman\">Michael Carman</a> and <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> are helpfully documented together in perlvar - <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions</a>.</p>\n\n<p>That said I combined ideas from several of the postings into what I hope is a more comprehensive answer:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Modern::Perl;\n\nmy @a = 'abcde' =~ /(.).(.).(.)/;\n\nsay do { # map probably creates a temp anonymous array of capture strings\n    no strict 'refs';\n    join ' ', map { \"$$_\" } 1..$#-\n};\n\nsay do { # no copy to array but eval\n    eval '\"' . join(\" \", map { \"\\$$_\" } 1..$#-) . '\"';\n};\n\nsay \"@a\"; # still not clear from OP why this wasn't the answer\n</code></pre>\n"}], "owner": {"reputation": 610, "user_id": 2600099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f987e5fcc1463e4ebe90870565c5c602?s=128&d=identicon&r=PG", "display_name": "Matija Nalis", "link": "https://stackoverflow.com/users/2600099/matija-nalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2042, "favorite_count": 0, "accepted_answer_id": 49923335, "answer_count": 5, "score": 1, "last_activity_date": 1524152891, "creation_date": 1524144854, "question_id": 49922461, "link": "https://stackoverflow.com/questions/49922461/get-value-of-all-perl-regex-capture-groups", "title": "get value of all perl regex capture groups", "body": "<p>The issue: I'm coding a library which receives user supplied regex which contains unknown number of capture groups to be run against other input, and I want to extract value of all capture groups concatenated in one string (for further processing elsewhere).</p>\n\n<p>It is trivial if number of capture groups is known in advance, as I just specify them:</p>\n\n<pre><code>#!/usr/bin/perl -w\nmy $input = `seq -s\" \" 100 200`;\nmy $user_regex = \n qr/100(.*)103(.*)107(.*)109(.*)111(.*)113(.*)116(.*)120(.*)133(.*)140(.*)145/;\n\nif ($input =~ $user_regex)  { print \"$1 $2 $3 $4 $5 $6 $7 $8 $9 $10\\n\"; }\n</code></pre>\n\n<p>correctly produces (ignore the extra whitespace):</p>\n\n<pre><code> 101 102   104 105 106   108   110   112   114 115   117 118 119 \n 121 122 123 124 125 126 127 128 129 130 131 132   \n 134 135 136 137 138 139   141 142 143 144\n</code></pre>\n\n<p>However, if there are more than 10 capture groups I lose data if I don't modify the code. As the number of capture groups is unknown, currently I go with hundreds of manually specified matches (\"$1\" to \"$200\") under <code>no warnings</code> pragma and hope it is enough, but it does not seem particularity clean <em>or</em> robust.</p>\n\n<p>Ideally, I'd like something which works like <code>values %+</code> does for named capture groups, but for non-named capture groups. Is it possible in perl 5.24? Or what less kludgy approach would you recommend for retrieving content of all numbered capture groups?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 0, "creation_date": 1524145865, "post_id": 49922628, "comment_id": 86861221, "body": "I see I have this issue multiple places also with <code>keys</code> in <code>foreach my $id (keys $::c{slaves}) {</code>."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 1, "creation_date": 1524146247, "post_id": 49922628, "comment_id": 86861506, "body": "Right, it is the same issue. <code>keys</code> and <code>values</code> are meant to be called on a hash. You are calling it on a hash <i>reference</i>, which is a SCALAR"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 2, "creation_date": 1524146446, "post_id": 49922628, "comment_id": 86861670, "body": "Just to further confuse the issue, the questioner could also use the postfix dereferencing form <code>values $x-&gt;%*</code> as in <a href=\"https://perldoc.perl.org/perlref.html#Postfix-Dereference-Syntax\" rel=\"nofollow noreferrer\">perldoc</a> since they&#39;re using Perl &gt;= 5.20."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 6, "last_activity_date": 1524148123, "last_edit_date": 1524148123, "creation_date": 1524145323, "answer_id": 49922628, "question_id": 49922419, "link": "https://stackoverflow.com/questions/49922419/how-to-fix-experimental-values-on-scalar-is-now-forbidden/49922628#49922628", "title": "How to fix &quot;Experimental values on scalar is now forbidden&quot;", "body": "<p>Perl is complaining that you are calling the <a href=\"http://perldoc.perl.org/functions/values.html\" rel=\"nofollow noreferrer\"><code>values</code></a> builtin on a SCALAR, in this case a HASHREF: </p>\n\n<p>Properly de-referencing your <code>slaves</code> key allows <code>values</code> to work as expected: </p>\n\n<pre><code>foreach my $slave ( values %{ $c{slaves} } ) {\n  ...\n}\n</code></pre>\n\n<p>As to the specific warning you receive, they address that directly in the perldoc page:</p>\n\n<blockquote>\n  <p>Starting with Perl 5.14, an experimental feature allowed values to\n  take a scalar expression. This experiment has been deemed\n  unsuccessful, and was removed as of Perl 5.24.</p>\n  \n  <p>To avoid confusing would-be users of your code who are running earlier\n  versions of Perl with mysterious syntax errors, put this sort of thing\n  at the top of your file to signal that your code will work only on\n  Perls of a recent vintage:</p>\n\n<pre><code>use 5.012;  # so keys/values/each work on arrays\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1679, "favorite_count": 0, "accepted_answer_id": 49922628, "answer_count": 1, "score": 2, "last_activity_date": 1524148123, "creation_date": 1524144742, "last_edit_date": 1524145123, "question_id": 49922419, "link": "https://stackoverflow.com/questions/49922419/how-to-fix-experimental-values-on-scalar-is-now-forbidden", "title": "How to fix &quot;Experimental values on scalar is now forbidden&quot;", "body": "<p>In Perl 5.26.1 I get:</p>\n\n<blockquote>\n  <p>Experimental values on scalar is now forbidden at /funcx.pm line 110.</p>\n</blockquote>\n\n<p>Where line 110 is the foreach in</p>\n\n<pre><code>sub checkSsh {\n    foreach my $slave (values $::c{slaves}) {\n      ...\n    }\n}\n</code></pre>\n\n<p><code>$c</code> contains</p>\n\n<pre><code>$VAR1 = {\n          'slaves' =&gt; {\n                        '48' =&gt; '10.10.10.48'\n                      },\n        };\n</code></pre>\n\n<p>where</p>\n\n<pre><code>our %c = %{YAML::Syck::LoadFile($config)};\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>What is actually the problem? And how should it be fixed?</p>\n"}, {"tags": ["arrays", "string", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1524141535, "post_id": 49921306, "comment_id": 86858156, "body": "You can put a backslash in front of the @ or use single quotes instead of double quotes"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 3, "last_activity_date": 1524141527, "creation_date": 1524141527, "answer_id": 49921356, "question_id": 49921306, "link": "https://stackoverflow.com/questions/49921306/why-perl-omitting-the-strings/49921356#49921356", "title": "Why perl omitting the @ strings", "body": "<p>Perl interpolates variables in strings delimited by double quotes.</p>\n\n<p><code>@test</code> is treated as an array.</p>\n\n<p>Unless you have created this explicitly, you <em>should</em> get an error when you try to do that. If you don't then you must have forgotten to <code>use strict;</code> and <code>use warnings;</code>!</p>\n\n<p>Use single quoted strings if you don't want to interpolate variables.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nmy $test = '@test=hello'; \nsay $test;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9669799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jaswanth gutti", "link": "https://stackoverflow.com/users/9669799/jaswanth-gutti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524144119, "creation_date": 1524141381, "last_edit_date": 1524144119, "question_id": 49921306, "link": "https://stackoverflow.com/questions/49921306/why-perl-omitting-the-strings", "title": "Why perl omitting the @ strings", "body": "<pre><code>#!/usr/bin/perl\n\n$test =\"@test=hello\"; #(Actually am reading this text from File and assigning to a variable)\n\nprint \"$test\";\n</code></pre>\n\n<p><strong>After executing the above code perl outputs the below</strong></p>\n\n<p><strong>Output</strong>: </p>\n\n<pre><code>=hello instead of @test=hello.\n</code></pre>\n\n<p>Can anyone please explain the above. I believe that it is considering as empty array, but how can i avoid this when and reading a file, please clear my misconception.</p>\n\n<p>Thanks, </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1524141730, "post_id": 49921083, "comment_id": 86858286, "body": "You can add <code>use experimental &#39;smartmatch&#39;</code> see <a href=\"https://metacpan.org/pod/experimental\" rel=\"nofollow noreferrer\">metacpan.org/pod/experimental</a> for more information"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1524172401, "post_id": 49921083, "comment_id": 86876647, "body": "Remarkable timing.  5.26.2 came out about a week ago.  8D"}], "answers": [{"comments": [{"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 0, "creation_date": 1524222690, "post_id": 49923068, "comment_id": 86896199, "body": "I have update OP with the regex that <code>@patterns</code> contain. The reason to pre-compile, is that because of performance? I would prefer your <code>any</code> example as it would be easier to understand in later on."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 1, "creation_date": 1524223566, "post_id": 49923068, "comment_id": 86896757, "body": "@SandraSchlichting If you find <code>any</code> or <code>grep</code> easy to understand, use that. Readability is important. Yes, pre-compiling the regex might be a bit more efficient since the alternatives can be checked within the regex engine, without having to execute any Perl code. Note that your second pattern matches anything that the first pattern would match. They only differ in case you access the captures."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 7, "last_activity_date": 1524146493, "creation_date": 1524146493, "answer_id": 49923068, "question_id": 49921083, "link": "https://stackoverflow.com/questions/49921083/what-to-use-instead-of-smartmatch/49923068#49923068", "title": "What to use instead of Smartmatch?", "body": "<p>Just spell out what you mean. E.g. if you want to check whether the header line matches any regex in <code>@patterns</code>:</p>\n\n<pre><code>use List::Util 'any';\n...\nmy $line = &lt;F&gt;;\nif (any { $line =~ $_ } @patterns) { ... }\n</code></pre>\n\n<p>Though in that case, it might be more sensible to pre-compile a single pattern such as:</p>\n\n<pre><code>my ($pattern) = map qr/$_/, join '|', @patterns;\n...\nif (&lt;F&gt; =~ $pattern) { ... }\n</code></pre>\n\n<p>If your <code>@patterns</code> array contains different kinds of data, you might want to choose a different matching operator, e.g. <code>==</code> or <code>eq</code>. If the <code>@patterns</code> are not all the same \u201ctype\u201d and you really want the smartmatch behaviour, you can silence the warning and continue to use it:</p>\n\n<pre><code>use experimental 'smartmatch';\n</code></pre>\n\n<p>However, this might then break without further warnings in the future.</p>\n"}, {"comments": [{"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 1, "creation_date": 1524222463, "post_id": 49923099, "comment_id": 86896063, "body": "I have updated the OP and yes, <code>@patterns</code> are regex&#39;s =) <code>grep</code> would be perfect, as it is easy to understand in a year from now."}], "tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 5, "last_activity_date": 1524151841, "last_edit_date": 1524151841, "creation_date": 1524146580, "answer_id": 49923099, "question_id": 49921083, "link": "https://stackoverflow.com/questions/49921083/what-to-use-instead-of-smartmatch/49923099#49923099", "title": "What to use instead of Smartmatch?", "body": "<p>The reason Smartmatch is experimental is that it is so hard to figure out what it will do without referencing the <a href=\"http://perldoc.perl.org/perlop.html#Smartmatch-Operator\" rel=\"nofollow noreferrer\">Docs</a>.  Even so, how do we interperet the above code?</p>\n\n<p>Is this a case of:</p>\n\n<pre><code>ARRAY1    ARRAY2     recurse on paired elements of ARRAY1 and ARRAY2[2]\n            like: (ARRAY1[0] ~~ ARRAY2[0])\n                    &amp;&amp; (ARRAY1[1] ~~ ARRAY2[1]) &amp;&amp; ...\n</code></pre>\n\n<p>Where we presume <code>&lt;F&gt;</code> is interpreted in list context and emptied in a single call?</p>\n\n<p>Or is this a case of:</p>\n\n<pre><code> Any       ARRAY      smartmatch each ARRAY element[3]\n            like: grep { Any ~~ $_ } ARRAY\n</code></pre>\n\n<p>I'm going to guess the 2nd.  In which case the snippet above from the docs gives you an excellent (and clearer) coding alternative.  Presuming <code>@patterns</code> contains regexes, you can also replace the <code>~~</code> with <code>=~</code>.</p>\n\n<hr>\n\n<p>If you don't like the <code>grep</code> alternative from the docs, I'd recommend looking into either <code>List::Util</code> or <code>List::MoreUtils</code>.  Both contain an <code>any</code> call which acts as a short-circuiting <code>grep</code>.  Alternatively, if you are trying to implement the <code>ARRAY1 ARRAY2</code> option, the later library contains a <code>pairwise</code> call that may serve. </p>\n"}, {"tags": [], "owner": {"reputation": 3615, "user_id": 1390251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4cd981aa029b1bd023ba35da2bc3fc1?s=128&d=identicon&r=PG", "display_name": "Gonen", "link": "https://stackoverflow.com/users/1390251/gonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1547838971, "creation_date": 1547838971, "answer_id": 54260193, "question_id": 49921083, "link": "https://stackoverflow.com/questions/49921083/what-to-use-instead-of-smartmatch/54260193#54260193", "title": "What to use instead of Smartmatch?", "body": "<p>Have to agree with the other answers that Perl's <em>smartmatch</em> is better avoided.</p>\n\n<p>There is a list of alternatives (with examples) on Perl-Monks site:<br>\n<a href=\"https://www.perlmonks.org/?node_id=1067462\" rel=\"nofollow noreferrer\">PerlMonks - Smartmatch alternatives</a></p>\n"}], "owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1676, "favorite_count": 2, "accepted_answer_id": 49923068, "answer_count": 3, "score": 4, "last_activity_date": 1547838971, "creation_date": 1524140692, "last_edit_date": 1524222335, "question_id": 49921083, "link": "https://stackoverflow.com/questions/49921083/what-to-use-instead-of-smartmatch", "title": "What to use instead of Smartmatch?", "body": "<p>I just upgraded to Perl 5.26.1, now I get</p>\n\n<pre><code>Smartmatch is experimental at check_tr.pl line 67.\n</code></pre>\n\n<p>where the code in question is</p>\n\n<pre><code>my @patterns = (qr/summary:\\s+(.+?) in\\s+(.+?) - average of\\s+(.+?)$/,\n        qr/summary:\\s+(.+?) in\\s+(.+) (.+? .+?)$/);\nmy $r = \"\";\nopendir(DIR, $dir) or die $!;\nwhile(my $file = readdir(DIR)) {\n\n    next if ($file =~ m/^\\./);\n     open(F, '&lt;', \"$dir/$file\") or die $!;\n\n     if (&lt;F&gt; ~~ @patterns) {\n         $r .= &lt;F&gt;;\n...\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Ideally with as few changes to the code as possible. What should I do instead of smart matching?</p>\n"}, {"tags": ["perl", "ssl-certificate", "lwp-useragent"], "comments": [{"owner": {"reputation": 3638, "user_id": 114904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8e7f89dbe697baaef1fb80098f6db29d?s=128&d=identicon&r=PG", "display_name": "MichielB", "link": "https://stackoverflow.com/users/114904/michielb"}, "edited": false, "score": 0, "creation_date": 1524492409, "post_id": 49919547, "comment_id": 86982535, "body": "Can you show the code you&#39;re using?"}, {"owner": {"reputation": 1, "user_id": 9663851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a160005c7cc206bfa6a827acc22b5e90?s=128&d=identicon&r=PG&f=1", "display_name": "Palak", "link": "https://stackoverflow.com/users/9663851/palak"}, "reply_to_user": {"reputation": 3638, "user_id": 114904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8e7f89dbe697baaef1fb80098f6db29d?s=128&d=identicon&r=PG", "display_name": "MichielB", "link": "https://stackoverflow.com/users/114904/michielb"}, "edited": false, "score": 0, "creation_date": 1524556056, "post_id": 49919547, "comment_id": 87008554, "body": "Of course, I let you the code in the linked picture"}, {"owner": {"reputation": 3638, "user_id": 114904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8e7f89dbe697baaef1fb80098f6db29d?s=128&d=identicon&r=PG", "display_name": "MichielB", "link": "https://stackoverflow.com/users/114904/michielb"}, "edited": false, "score": 0, "creation_date": 1524557037, "post_id": 49919547, "comment_id": 87009143, "body": "That&#39;s not the code, that&#39;s just part of the error message."}, {"owner": {"reputation": 1, "user_id": 9663851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a160005c7cc206bfa6a827acc22b5e90?s=128&d=identicon&r=PG&f=1", "display_name": "Palak", "link": "https://stackoverflow.com/users/9663851/palak"}, "reply_to_user": {"reputation": 3638, "user_id": 114904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8e7f89dbe697baaef1fb80098f6db29d?s=128&d=identicon&r=PG", "display_name": "MichielB", "link": "https://stackoverflow.com/users/114904/michielb"}, "edited": false, "score": 0, "creation_date": 1524557892, "post_id": 49919547, "comment_id": 87009654, "body": "I was referring to the other picture, the one below the &quot;What I&#39;ve tried&quot; part"}], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 114904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8e7f89dbe697baaef1fb80098f6db29d?s=128&d=identicon&r=PG", "display_name": "MichielB", "link": "https://stackoverflow.com/users/114904/michielb"}, "is_accepted": false, "score": 0, "last_activity_date": 1524570430, "creation_date": 1524570430, "answer_id": 50000913, "question_id": 49919547, "link": "https://stackoverflow.com/questions/49919547/certificates-issue-with-a-perl-script/50000913#50000913", "title": "Certificates issue with a perl script", "body": "<p>Well, please try this code and add/remove the line which sets the env variable, for me this <em>just works</em>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse SOAP::Lite;\n\n$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\nmy $URL = 'https://self-signed.badssl.com/foo';\nmy $NameSpace = 'https://self-signed.badssl.com/';\nmy $Operation = 'TicketCreate';\n\nmy $XMLData = &lt;&lt;'XML';\n&lt;UserLogin&gt;login&lt;/UserLogin&gt;\n&lt;Password&gt;pass&lt;/Password&gt;\n&lt;Ticket&gt;\n  &lt;Title&gt;Title&lt;/Title&gt;\n&lt;/Ticket&gt;\nXML\n\nmy $SOAPObject = SOAP::Lite-&gt;uri($NameSpace)-&gt;proxy($URL)-&gt;$Operation($XMLData);\n</code></pre>\n\n<p>Without the <code>$ENV{}</code> line it gives <code>500 Can't connect ... (certificate verify failed)</code> and with it it gives <code>405 Not Allowed</code> (since the test URL does not actually run the SOAP web service).</p>\n\n<p>Also, please place actual code snippets on SO, in text and not in a screenshot, and please try and keep them short.</p>\n\n<p>Oh, and by the way, I wrote a small script to create tickets in OTRS using the web service, it's here, maybe it's useful for you -> <a href=\"https://github.com/mbeijen/App-OTRS-CreateTicket\" rel=\"nofollow noreferrer\">https://github.com/mbeijen/App-OTRS-CreateTicket</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9663851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a160005c7cc206bfa6a827acc22b5e90?s=128&d=identicon&r=PG&f=1", "display_name": "Palak", "link": "https://stackoverflow.com/users/9663851/palak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524570430, "creation_date": 1524135962, "last_edit_date": 1524557740, "question_id": 49919547, "link": "https://stackoverflow.com/questions/49919547/certificates-issue-with-a-perl-script", "title": "Certificates issue with a perl script", "body": "<p>I need to use an url to connect with <strong>OSTR</strong> to create a ticket via <strong>webservice</strong>, but I have a problem with <strong>certificates</strong>.</p>\n\n<p>The error (<a href=\"https://i.stack.imgur.com/I2SiG.png\" rel=\"nofollow noreferrer\">picture here</a>):</p>\n\n<pre><code>500 Can't connect to         (certificate verify failed)\n</code></pre>\n\n<hr>\n\n<h2>What I've tried</h2>\n\n<ul>\n<li><p><code>$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;</code></p></li>\n<li><p><code>my $UA = LWP::UserAgent-&gt;new( ssl_opts =&gt; { verify_hostname =&gt; 0, } );</code></p></li>\n<li><p>I've also tried to add a new certificate in <code>C:\\otrs\\Kernel\\cpan-lib\\Mozilla\\CA\\cacert.pem.</code></p></li>\n</ul>\n\n<hr>\n\n<h2>CODE</h2>\n\n<p>Code <a href=\"https://i.stack.imgur.com/1grfF.png\" rel=\"nofollow noreferrer\">(Picture here)</a></p>\n"}, {"tags": ["arrays", "perl", "methods", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 9539138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vG6ah.jpg?s=128&g=1", "display_name": "ppinto", "link": "https://stackoverflow.com/users/9539138/ppinto"}, "edited": false, "score": 0, "creation_date": 1524204880, "post_id": 49918849, "comment_id": 86885723, "body": "I would have never thought of writing the expression as <code>(split &#47; &#47;, $raw_text)[0]</code>. Certainly, it makes much more sense now. Thank you!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1524135989, "last_edit_date": 1524135989, "creation_date": 1524133886, "answer_id": 49918849, "question_id": 49917617, "link": "https://stackoverflow.com/questions/49917617/perl-index-of-array-returned-from-method/49918849#49918849", "title": "Perl: Index of array returned from method", "body": "<p>The syntax error is to force you to disambiguate the expression, which could be interpreted as either</p>\n\n<pre><code>split((/ /, $raw_text)[0])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(split(/ /, $raw_text))[0]\n</code></pre>\n\n<p>In general, Perl will make a \"best guess\" at the intention of ambiguous code, but in this case the designers decided that there was no real way to decide on a \"most likely\" interpretation, and so caused the construct to fail in compilation to force the author to disambiguate the code</p>\n\n<p>Note that the <em>inner</em> parentheses are superfluous, and the expression may be written like so</p>\n\n<pre><code>(split / /, $raw_text)[0]\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9539138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vG6ah.jpg?s=128&g=1", "display_name": "ppinto", "link": "https://stackoverflow.com/users/9539138/ppinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 49918849, "answer_count": 1, "score": 0, "last_activity_date": 1524135989, "creation_date": 1524130463, "last_edit_date": 1524132364, "question_id": 49917617, "link": "https://stackoverflow.com/questions/49917617/perl-index-of-array-returned-from-method", "title": "Perl: Index of array returned from method", "body": "<p>I have the following code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse feature qw(say);\n\nmy $raw_text = \"a b c d e f g h\";\n\nmy @array = split(/ /, $raw_text);\nmy $element = @array[0];\n\nsay \"Element [0] of array is : \", $array[0];\n</code></pre>\n\n<p>This prints on STDOUT:</p>\n\n<pre><code>Element [0] of array is : a\n</code></pre>\n\n<p>So far, so good. However if I want to retrieve the element straightforward from the split method, I would think of:</p>\n\n<pre><code>my $element = split(/ /, $raw_text)[0];\n</code></pre>\n\n<p>But it turns out that this throws a compilation error. Doing some research I figured out that I have to type:</p>\n\n<pre><code>my $element = ( split(/ /, $raw_text) )[0];\n</code></pre>\n\n<p>The question is: <strong>Why are the extra parenthesis necessary?</strong> </p>\n\n<p>I might be missunderstanding the parenthesis meaning for this case.</p>\n"}, {"tags": ["regex", "perl", "reverse", "tr"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1524129087, "last_edit_date": 1524129087, "creation_date": 1524128284, "answer_id": 49916853, "question_id": 49916611, "link": "https://stackoverflow.com/questions/49916611/match-reverse-translation-of-a-capture-group-in-perl-regex/49916853#49916853", "title": "Match reverse translation of a capture group in Perl regex", "body": "<p>Your <code>tr///r</code> <em>returns</em> the transliterated string. So you simply need to stick your <code>reverse</code> in front of the <code>tr///r</code> and you're good to go.</p>\n\n<pre><code>push @hit, $1 while $input_string\n    =~ m{\n      (([ABC]{3,25})\n      O\n      (??{ reverse $2 =~ tr/ABC/XYZ/r }))\n    }xg;\n</code></pre>\n\n<p>The return value of the <code>tr///r</code> does not go into <code>$_</code>, so <code>; reverse</code> will reverse whatever is in <code>$_</code>. That makes the overall match fail.</p>\n\n<p>You actually answered your own question in your last sentence.</p>\n\n<blockquote>\n  <p>How do I do the match the reverse tr of $2?</p>\n</blockquote>\n\n<hr>\n\n<p>If you <a href=\"http://perldoc.perl.org/re.html#&#39;debug&#39;-mode\" rel=\"nofollow noreferrer\">add <code>use re 'debug'</code></a> you can see the actual pattern that is being matched against.</p>\n\n<p>With <code>tr///; reverse</code>, the second part of that debugging output, which relates to the regex compiled from the <code>eval</code>, is:</p>\n\n<pre><code>...\nCompiling REx \"ZZYXOABCC\"\nFinal program:\n   1: EXACT &lt;ZZYXOABCC&gt; (5)\n   5: END (0)\nanchored \"ZZYXOABCC\" at 0 (checking anchored isall) minlen 9 \nMatching embedded REx \"ZZYXOABCC\" against \"XYZZ\"\n...\n</code></pre>\n\n<p>As we can see here, it took the full string as the second part of the match, after the <code>O</code>. It correctly reversed the left side of the string, but it returned the full string.</p>\n\n<p>Now if we compare that to <code>reverse tr///r</code>, we see the difference.</p>\n\n<pre><code>...\nCompiling REx \"XYZZ\"\nFinal program:\n   1: EXACT &lt;XYZZ&gt; (3)\n   3: END (0)\nanchored \"XYZZ\" at 0 (checking anchored isall) minlen 4 \nMatching embedded REx \"XYZZ\" against \"XYZZ\"\n...\n</code></pre>\n\n<p>It now only returns the transliterated left side of the string, which then matches.</p>\n"}], "owner": {"reputation": 43, "user_id": 9668671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58eee4f411359f3145dc415bf0c7abea?s=128&d=identicon&r=PG&f=1", "display_name": "bavudowi", "link": "https://stackoverflow.com/users/9668671/bavudowi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 49916853, "answer_count": 1, "score": 4, "last_activity_date": 1524129087, "creation_date": 1524127540, "last_edit_date": 1524128921, "question_id": 49916611, "link": "https://stackoverflow.com/questions/49916611/match-reverse-translation-of-a-capture-group-in-perl-regex", "title": "Match reverse translation of a capture group in Perl regex", "body": "<p>I am trying to find strings that match a certain pattern and then the reverse translation of that pattern followed by it separated by a letter O.</p>\n\n<p>Translation rule is <strong>/ABC/XYZ</strong>.</p>\n\n<p>Example of a match: CCBAOXYZZ</p>\n\n<p>First section matches the pattern [ABC]{3,25}. Then there's a letter <code>O</code> which also matches. Then we see that XYZZ is the reverse of CCBA with the translation above applied.</p>\n\n<p>I have managed to write the tr rule into my backreferencing. But I cannot figure out how to do the reverse as well.</p>\n\n<pre><code>while (my $input_string = &lt;sample_input&gt;) {\n    push @hit, $1 while $input_string\n        =~ m{\n          (([ABC]{3,25})\n          O\n          (??{ $2 =~ tr/ABC/XYZ/r}))\n        }xg;\n}\n</code></pre>\n\n<p>Is it correct to add the 'reverse' function to the third line of the regex in this way: <code>(??{ $2 =~ tr/ACGT/TGCA/r;reverse}))</code>?</p>\n\n<p>How do I match the <code>reverse tr</code> of $2?</p>\n"}, {"tags": ["perl", "cjk"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524124661, "post_id": 49915435, "comment_id": 86846878, "body": "<code>&#47;{1,}&#47;</code> is usually written as <code>&#47;+&#47;</code>. The only change you have made is to ask for &quot;one or more&quot; CJK characters instead of one at a time. Both code samples work fine for me against the text block that you have provided, and I wouldn&#39;t expect any different. Or are you saying that matching against the shorter string makes the difference?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524124889, "post_id": 49915435, "comment_id": 86847007, "body": "Yes exactly you are right. That shorter string matches however against the full string/file not works at my end."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524124962, "post_id": 49915435, "comment_id": 86847039, "body": "Might be the file open/read/write having issues not sure...?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524125558, "post_id": 49915435, "comment_id": 86847394, "body": "I would change your header lines to <code>use utf8</code> <code>use open qw&#47; :std :encoding(UTF-8) &#47;</code>. The latter line will also modify <code>STDOUT</code>. But I would be very surprised if that helped with your problem. Since the issue cannot be reproduced, we need to see the code that reads the file. Do you perhaps have another <code>binmode</code> on the file handle? It would also help if you showed the output of <code>print join(&#39; &#39;, map { sprintf &#39;%04X&#39;, ord } split &#47;&#47;, $str), &quot;\\n&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1524125591, "creation_date": 1524125591, "answer_id": 49915982, "question_id": 49915435, "link": "https://stackoverflow.com/questions/49915435/how-to-open-a-file-contains-cjk-characters-in-perl/49915982#49915982", "title": "How to open a file contains CJK characters in perl", "body": "<pre><code>use utf8;\n</code></pre>\n\n<p>This line tells Perl that the source code contains UTF-8, so it's not related to reading from a file.</p>\n\n<pre><code>use open ':encoding(utf8)';\n</code></pre>\n\n<p>This is equivalent to</p>\n\n<pre><code>use open IO =&gt; 'encoding(utf8)';\n</code></pre>\n\n<p>which sets the encoding for input and output <em>streams</em>, i.e. it doesn't change the encoding of standard input and output. To do so, you need to add <code>:std</code>:</p>\n\n<pre><code>use open IO =&gt; ':utf8', ':std';\n</code></pre>\n\n<p>The last line shown,</p>\n\n<pre><code>binmode STDOUT, ':utf8';\n</code></pre>\n\n<p>sets the encoding for STDOUT, which would be already covered by the previous line if it used <code>:std</code>.</p>\n\n<p>You didn't show how you opened the file. If you used <code>&lt;&gt;</code> or <a href=\"http://p3rl.org/readline\" rel=\"nofollow noreferrer\">readline</a> without specifying a filehandle, you need to set the encoding for the standard input as shown above. If you used a filehandle, I'm out of ideas - it works for me.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 49915982, "answer_count": 1, "score": 0, "last_activity_date": 1524125591, "creation_date": 1524123834, "last_edit_date": 1524124208, "question_id": 49915435, "link": "https://stackoverflow.com/questions/49915435/how-to-open-a-file-contains-cjk-characters-in-perl", "title": "How to open a file contains CJK characters in perl", "body": "<p>How can I open the file contains <code>CJK</code> characters using perl script:</p>\n\n<pre><code>use utf8;\nuse open ':encoding(utf8)';\nbinmode STDOUT, ':utf8';\n</code></pre>\n\n<p>The above code I am using to open the file and I couldn't find the <code>CJK</code> characters and its empty. Input file contains text:</p>\n\n<pre><code>\\para[para]Details of the electronic structure of the metal the loss to\nelectron-hole-pair excitations \\characters{\u5218\u5b89\u96ef} only \ndepends weakly on the metal. The metals exhibit large variation in the \nwork function, yet the translational in elasticity is similar in all \ncases. This suggests electron transfer forming a transient \nH\\textsuperscript{{\\textminus}} is not important. The simulation allows \nus to construct \\characters{\u80e1\u6c34\u660e} a universal sticking \nfunction for H and D on metals, which depends only on the H atom \nincidence translational energy and incidence angle as well as the mass of \nthe solid's atoms.\\endp\n</code></pre>\n\n<p>I am finding this way:</p>\n\n<pre><code>while($str=m/(\\p{InCJK_Unified_Ideographs})/xg)\n{\n     print \"Char: --&gt; $&amp;\\n\";\n}\n</code></pre>\n\n<p>Could someone guide where I am doing wrong in my code: Thanks.</p>\n\n<p><strong>Updated:</strong></p>\n\n<blockquote>\n  <p>I don't know but this program works fine and printing the <code>CJK</code> characters</p>\n</blockquote>\n\n<pre><code>use utf8;\n\nmy $str = \"\\characters{\u5218\u5b89\u96ef\u80e1\u6c34\u660e}\";\n\nwhile($str=~m/(\\p{InCJK_Unified_Ideographs}){1,}/xg) {  print \":: $&amp;\\n\";  }\n</code></pre>\n"}, {"tags": ["perl", "glob"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524111961, "post_id": 49912472, "comment_id": 86841061, "body": "Are you handling file paths correctly?  Linux: <code>&#47;foo&#47;bar&#47;baz</code>, vs Windows <code>c:\\foo\\bar\\baz</code>"}, {"owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524112351, "post_id": 49912472, "comment_id": 86841154, "body": "yes, no issues with the path, but sort step is not working as expected"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524113871, "post_id": 49912472, "comment_id": 86841578, "body": "I don&#39;t have access to a windows machine, but what happens when you print out the mtime value for a file, does it agree with what the filesystem says?  Is it a numeric value?"}, {"owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1524114431, "post_id": 49912472, "comment_id": 86841745, "body": "sorry, can you let me know syntax to print mtime,"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1524115047, "post_id": 49912472, "comment_id": 86841945, "body": "Your code already has a <code>print</code> statement, and already invokes <code>stat(...)-&gt;mtime</code>. If you wrote those two lines you should be able to write <code>print stat($_)-&gt;mtime, &quot;\\n&quot; for glob ($UNC.$FileNamePrefix);</code> But first I suggest just doing this: <code>print &quot;$_\\n&quot; for glob($UNC.$FileNamePrefix);</code> to ensure you&#39;re actually getting results from <code>glob</code>."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1524119046, "post_id": 49912472, "comment_id": 86843552, "body": "Try to remove <code>use File::stat;</code> and sort like this: <code>my @files = map$$_[1], sort {$$a[0]&lt;&gt;$$b[0]} map[(stat($_))[9],$_], glob($UNC.$FileNamePrefix);</code> This uses perls built-in <code>stat</code> and does a Schwartzian transform which can be faster if you have a large number of files (stat is called fewer times like this). Have a look at <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Schwartzian_transform</a>"}, {"owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "edited": false, "score": 0, "creation_date": 1524120901, "post_id": 49912472, "comment_id": 86844594, "body": "@KjetilS.I tried your code, I got following error syntax error at edw.pl line 587, near &quot;&lt;&gt;&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 2, "creation_date": 1524121481, "post_id": 49912472, "comment_id": 86844935, "body": "@Kjetil: Please don&#39;t suggest ways to optimise code that doesn&#39;t even work. It may already be plenty fast enough."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1524123604, "post_id": 49912472, "comment_id": 86846238, "body": "@RakeshBobbala  Sorry, replace <code>&lt;&gt;</code> with <code>&lt;=&gt;</code>"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524123689, "post_id": 49912472, "comment_id": 86846294, "body": "@Borodin The main point was about changing File::stat with Perls built in stat."}, {"owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1524136677, "post_id": 49912472, "comment_id": 86854871, "body": "@David, glob is not returning any value in windows, but working on my mac. @Kjetil$, there are only 10 files in the directory, performance is not an issue here. do I need to any support library or latest version to support this"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "edited": false, "score": 0, "creation_date": 1524158231, "post_id": 49920404, "comment_id": 86869391, "body": "Thanks everyone for your suggestions. it worked when I used <code>use File::DosGlob &#39;glob&#39;;</code> glob function worked as expected., can someone tell me the difference between File:DosGlob &amp; File:Glob ?"}, {"owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "edited": false, "score": 0, "creation_date": 1524158361, "post_id": 49920404, "comment_id": 86869463, "body": "Jeff, I am using different path on windows . windows path = &quot;\\\\Users\\documents\\abc*.csv&quot;,  David, Thanks for your suggestion when I checked the glob function, I figured out that a library was missing."}], "tags": [], "owner": {"reputation": 121, "user_id": 9637895, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GR9zbrwHgsY/AAAAAAAAAAI/AAAAAAAABnI/u8gPXdBXD2o/photo.jpg?sz=128", "display_name": "Jeff Fisher", "link": "https://stackoverflow.com/users/9637895/jeff-fisher"}, "is_accepted": false, "score": 1, "last_activity_date": 1524138602, "creation_date": 1524138602, "answer_id": 49920404, "question_id": 49912472, "link": "https://stackoverflow.com/questions/49912472/get-latest-file-from-directory-with-pattern-matching-perl/49920404#49920404", "title": "get latest file from directory with pattern matching: Perl", "body": "<p>You could use File::Spec to create the paths, and it will create the correct syntax based on the OS it's running on. For example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::stat;\n\nmy $UNC =\"/Users/documents/\";\nmy $FileNamePrefix = \"abc*.csv\";\n# platform specific path:\nmy $pattern = File::Spec-&gt;catpath('', $UNC, $FileNamePrefix);\nmy @files = sort {stat($a)-&gt;mtime &lt;=&gt; stat($b)-&gt;mtime} glob($pattern);\n\nmy $Recon = $files[-1];\nprint \"Latest   = $Recon\\n\";\n</code></pre>\n\n<p>This will make the pattern \"/Users/documents/abc*.csv\" on Mac and \"\\Users\\documents\\abc*.csv\" on Windows.</p>\n\n<p>See \"perldoc File::Spec\" for more examples.</p>\n"}], "owner": {"reputation": 41, "user_id": 9667550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rakesh007", "link": "https://stackoverflow.com/users/9667550/rakesh007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 945, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524138602, "creation_date": 1524110175, "last_edit_date": 1524111134, "question_id": 49912472, "link": "https://stackoverflow.com/questions/49912472/get-latest-file-from-directory-with-pattern-matching-perl", "title": "get latest file from directory with pattern matching: Perl", "body": "<p>I am newbie to perl and working on a script to find the files with pattern matching having latest modified timestamp and copy to another location.</p>\n\n<p>my code is working on Mac, but having issues on windows server.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::stat;\n\nmy $UNC =\"/Users/documents/\";\nmy $FileNamePrefix = \"abc*.csv\";\nmy @files = sort {stat($a)-&gt;mtime &lt;=&gt; stat($b)-&gt;mtime} glob($UNC.$FileNamePrefix);\n\nmy $Recon = $files[-1];\nprint \"Latest   = $Recon\\n\";\n</code></pre>\n\n<p>can someone please help me with this code, Thank you</p>\n\n<p>Source location:\nabc_20181.csv   (yesterdaydate)\nabc_20182.csv   (todaysdate)</p>\n\n<p>Target location:\nabc_20182.csv</p>\n"}]