[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1548287173, "post_id": 54337308, "comment_id": 95491929, "body": "Does the string literally contain a \\? Is it really <code>G{\\&quot;u}</code> or did the encoding of &#252; get mangled?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548287390, "post_id": 54337308, "comment_id": 95491973, "body": "Is every name always separated by <code>and</code>?"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1548287395, "post_id": 54337308, "comment_id": 95491974, "body": "@Schwern: It&#39;s probably LaTeX code. That&#39;s (one way) of producing an &#252; there."}, {"owner": {"reputation": 3, "user_id": 10958520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9111bcfee564e563ed8c5b4034b96865?s=128&d=identicon&r=PG&f=1", "display_name": "Jinxter", "link": "https://stackoverflow.com/users/10958520/jinxter"}, "edited": false, "score": 0, "creation_date": 1548287397, "post_id": 54337308, "comment_id": 95491975, "body": "Unfortunately, no, it literally contains the four character string representing the umlatted u: {\\&quot;u}"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1548287521, "post_id": 54337308, "comment_id": 95491995, "body": "@Schwern It looks like TeX (BibTeX specifically) markup."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10958520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9111bcfee564e563ed8c5b4034b96865?s=128&d=identicon&r=PG&f=1", "display_name": "Jinxter", "link": "https://stackoverflow.com/users/10958520/jinxter"}, "edited": false, "score": 0, "creation_date": 1548287827, "post_id": 54337438, "comment_id": 95492059, "body": "Hey, ask a perl question, get a perl answer... :) Thank you. I appreciate your helpful input. I would like to see if there is a single regex that will do this but if one is not forthcoming I will accept your answer. Thanks again, man."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1548287473, "creation_date": 1548287473, "answer_id": 54337438, "question_id": 54337308, "link": "https://stackoverflow.com/questions/54337308/perl-regex-extracting-names-from-a-difficult-string/54337438#54337438", "title": "Perl regex: extracting names from a difficult string", "body": "<p>While I'm sure you can do this in a single regex somehow, it's simplest to do this in steps.</p>\n\n<p>First, split the key/value by splitting on <code>=</code>.</p>\n\n<pre><code>my($key,$names) = split /=/, $string;\n</code></pre>\n\n<p>Now that we have the value, we can strip off the <code>{},</code></p>\n\n<pre><code>$names =~ s/^{(.*)},?$/$1/;\n</code></pre>\n\n<p>With all that cleaned off you have just <code>Kordesch, Karl and Simader, G{\\\"u}nter and Wiley, John Ray</code> which is easy enough to split into names.</p>\n\n<pre><code>my @names = split /\\s+and\\s+/, $names;\n</code></pre>\n\n<hr>\n\n<p>The trailing <code>,</code> makes me suspect that this is part of a larger data structure. In that case it would be safer and more robust to parse the data structure rather than trying to parse it ad hoc line by line. <a href=\"https://stackoverflow.com/questions/54337308/perl-regex-extracting-names-from-a-difficult-string/54337438#comment95491995_54337308\">In the comments it was mentioned this looks like it might be TeX or BibTeX</a>. There's <a href=\"https://metacpan.org/search?size=20&amp;q=+bibtex\" rel=\"nofollow noreferrer\">any number of modules to parse that</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10958520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9111bcfee564e563ed8c5b4034b96865?s=128&d=identicon&r=PG&f=1", "display_name": "Jinxter", "link": "https://stackoverflow.com/users/10958520/jinxter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54337438, "answer_count": 1, "score": -2, "last_activity_date": 1548287473, "creation_date": 1548286446, "last_edit_date": 1548286800, "question_id": 54337308, "link": "https://stackoverflow.com/questions/54337308/perl-regex-extracting-names-from-a-difficult-string", "title": "Perl regex: extracting names from a difficult string", "body": "<p>I need to extract the three names from the following string: </p>\n\n<blockquote>\n  <p>author={Kordesch, Karl and Simader, G{\\\"u}nter and Wiley, John Ray},</p>\n</blockquote>\n\n<p>This should provide three matches:</p>\n\n<ol>\n<li><p>Kordesch, Karl</p></li>\n<li><p>Simader, G{\\\"u}nter</p></li>\n<li><p>Wiley, John Ray</p></li>\n</ol>\n\n<p>I have been wracking my brain to no avail. Any suggestions would be much appreciated. Thanks.</p>\n"}, {"tags": ["perl", "ssl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1548277671, "post_id": 54335637, "comment_id": 95488592, "body": "Make sure you have zlib-dev or however that package is named on ubuntu?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1548280877, "post_id": 54335637, "comment_id": 95489979, "body": "try installing  zlib1g-dev?"}, {"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1548348057, "post_id": 54335637, "comment_id": 95518269, "body": "That&#39;s right mate!"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548283908, "post_id": 54336630, "comment_id": 95491009, "body": "This will not solve the problem which is a build issue, at best it will result in a broken installation."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1589729634, "post_id": 54336630, "comment_id": 109402997, "body": "You don&#39;t need to &quot;log in&quot;. It&#39;s just a command-line program, and you can do it all at once: <code>cpan -f Net::SSLeay::Handle</code>. But, that doesn&#39;t magically make it compile correctly."}], "tags": [], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "is_accepted": false, "score": -3, "last_activity_date": 1548282272, "creation_date": 1548282272, "answer_id": 54336630, "question_id": 54335637, "link": "https://stackoverflow.com/questions/54335637/netssleayhandle-compiling-error-in-ubuntu-16-04/54336630#54336630", "title": "Net::SSLeay::Handle compiling error in Ubuntu 16.04", "body": "<p>first log in cpan</p>\n\n<pre><code>sudo cpan\n</code></pre>\n\n<p>force intalling the module should work</p>\n\n<pre><code>force install Net::SSLeay::Handle\n</code></pre>\n\n<p>This should also install missing modules or notice it</p>\n"}, {"tags": [], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "is_accepted": false, "score": 3, "last_activity_date": 1548348655, "creation_date": 1548348655, "answer_id": 54351661, "question_id": 54335637, "link": "https://stackoverflow.com/questions/54335637/netssleayhandle-compiling-error-in-ubuntu-16-04/54351661#54351661", "title": "Net::SSLeay::Handle compiling error in Ubuntu 16.04", "body": "<p>Ok, i solved by installing this packages (Ubuntu 16.04LTS):</p>\n\n<p>-openssl\n-libssl-dev\n-libnet-ssleay-perl\n-libcrypt-ssleay-perl\n-zlib1g-dev as suggested above</p>\n\n<p>Once you're done doing that, remember to avoid testing the module when gcc will be finishing compiling it, because in most cases it fails.\nSo the best incantation in doing this should be as follows:</p>\n\n<p>-cpanm  install -v --notest Net::SSLeay::Handle</p>\n\n<p>Many thanks again to all Perl mates writing in this forum. \nYou saved the day </p>\n"}], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1548348655, "creation_date": 1548277500, "last_edit_date": 1548279428, "question_id": 54335637, "link": "https://stackoverflow.com/questions/54335637/netssleayhandle-compiling-error-in-ubuntu-16-04", "title": "Net::SSLeay::Handle compiling error in Ubuntu 16.04", "body": "<p>I've a problem to install the aforementioned module via cpanm in my multi-threading version of Perl (not the original one). \nI've Ubuntu 16.04.\nWhen trying to compile and test this module it gives me the following error:</p>\n\n<pre><code>/usr/bin/ld: impossible to find -lz\ncollect2: error: ld returned 1 exit status\nMakefile:494: instructions set for target \"blib/arch/auto/Net/SSLeay/SSLeay.so\" fail\nmake: *** [blib/arch/auto/Net/SSLeay/SSLeay.so] Error 1\n-&gt; FAIL Installing Net::SSLeay::Handle failed. See /home/my_name/.cpanm/work/1548275319.13675/build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>openssl,ssllib-dev-perl,libnet-ssleay-perl, libcrypt-ssleay-perl already installed via apt-get.\nI've also tried to compile manually this module, without success. I forced the installation too...no way.\nThe error seems linked with something missing in /usr/bin/ld: (impossible to find -lz collect2). </p>\n\n<p>Is there anyone who can help me with this?</p>\n\n<p>Cpanm has always worked pretty well. Up to now i've been able to get all my modules installed and well functioning, apart from Net::SSLeay::Handle.</p>\n\n<p>Thanks in advace for your help</p>\n"}, {"tags": ["perl", "terminal", "installation", "cpan", "www-mechanize"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1548277549, "post_id": 54335573, "comment_id": 95488546, "body": "This is a test failure, it seems it failed to load Test::Output for that test - the error message does not really say why. Regardless you can force-install it to ignore that failure (don&#39;t do this unless you understand the failure you&#39;re ignoring!)"}, {"owner": {"reputation": 1, "user_id": 10957794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBO7S.png?s=128&g=1", "display_name": "LucaS", "link": "https://stackoverflow.com/users/10957794/lucas"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548450767, "post_id": 54335573, "comment_id": 95560131, "body": "I already tried to give &quot;force install&quot; but the error keeps appearing"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1548564970, "post_id": 54335573, "comment_id": 95582967, "body": "what OS are you on? On linux, you can often use system packages. Have you tried using cpanm instead?"}, {"owner": {"reputation": 1, "user_id": 10957794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBO7S.png?s=128&g=1", "display_name": "LucaS", "link": "https://stackoverflow.com/users/10957794/lucas"}, "edited": false, "score": 0, "creation_date": 1548708535, "post_id": 54335573, "comment_id": 95631059, "body": "Oh, Thanks a lot i used the cpanm instead of only cpan and --force install then I was able to install ;)"}], "owner": {"reputation": 1, "user_id": 10957794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBO7S.png?s=128&g=1", "display_name": "LucaS", "link": "https://stackoverflow.com/users/10957794/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548277273, "creation_date": 1548277273, "question_id": 54335573, "link": "https://stackoverflow.com/questions/54335573/perl-cpan-wwwmechanize-installation-error-terminal", "title": "Perl/Cpan WWW::Mechanize installation error (Terminal)", "body": "<p>I need to download a program that needs some modules in Perl, all were installed normally but when I got to the part of installing the WWW :: Mechanize I could not and the following errors appeared:</p>\n\n<p>Error 1:</p>\n\n<pre><code>t/dump.t ............................................ Test/Output.pm\ndid not return a true value at t/dump.t line 6.\nBEGIN failed--compilation aborted at t/dump.t line 6.\n#Looks like your test exited with 255 before it could output anything.\nt/dump.t ................................. Dubious, test returned 255(wstat 65280, 0xff00)\nFailed 6/6 subtests \n</code></pre>\n\n<p>Error 2:(I do not think that this error is who is disturbing the installation but even so I put)</p>\n\n<pre><code> t/local/overload.t ................................. skipped: Mysteriously\n stopped passing, and I don't know why.\n</code></pre>\n\n<p>Test Summary Report:</p>\n\n<pre><code>Test Summary Report\n-------------------\nt/dump.t                              (Wstat: 65280 Tests: 0 Failed: 0)\n Non-zero exit status: 255                                 \n Parse errors: Bad plan.  You planned 6 tests but ran 0.  \nFiles=59, Tests=752, 121 wallclock secs ( 0.73 usr  0.21 sys + 33.15 cusr  5.02 csys = 39.11 CPU) \nResult: FAIL                \nFailed 1/59 test programs. 0/752 subtests failed.                  \nMakefile:943: recipe for target 'test_dynamic' failed                 \nmake: *** [test_dynamic] Error 255   \n OALDERS/WWW-Mechanize-1.91.tar.gz                                     \n /usr/bin/make test -- NOT OK         \n//hint// to see the cpan-testers results for installing this module, try:\n  reports OALDERS/WWW-Mechanize-1.91.tar.gz\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1548275284, "post_id": 54334900, "comment_id": 95487669, "body": "That last one can&#39;t fully develop into a bug because it&#39;s a syntax error. You&#39;d have to use <code>,</code> instead of <code>;</code> both times (and then it&#39;d fail <code>use strict</code>)."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1548274158, "creation_date": 1548274158, "answer_id": 54334900, "question_id": 54334849, "link": "https://stackoverflow.com/questions/54334849/can-i-use-the-size-of-an-array-without-having-to-place-it-in-a-variable/54334900#54334900", "title": "Can I use the size of an array without having to place it in a variable", "body": "<p>Yes, <a href=\"https://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\"><code>for</code> has a built in array iterator</a> and <code>for</code> and <code>foreach</code> are synonyms.</p>\n\n<pre><code>for my $word (@words) {\n    print $word;\n}\n</code></pre>\n\n<p>This is the preferred way to iterate through arrays in Perl. C style 3 statement for-loops are discouraged unless necessary. They're harder to read and lead to bugs, like this one.</p>\n\n<pre><code>for(my $x = 0; $x &lt; $size, $x++)\n                         ^\n             should be a ;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548275042, "post_id": 54334939, "comment_id": 95487570, "body": "In Perl 5.30 playing with <code>$[</code> will <a href=\"https://perldoc.pl/5.29.7/variables/%24%5B\" rel=\"nofollow noreferrer\">be an error</a>."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548275066, "post_id": 54334939, "comment_id": 95487581, "body": "@Grinnz yay! :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548281230, "post_id": 54334939, "comment_id": 95490117, "body": "Thjat should be <code>for my $i (0..$#words)</code>"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 3, "last_activity_date": 1548274318, "creation_date": 1548274318, "answer_id": 54334939, "question_id": 54334849, "link": "https://stackoverflow.com/questions/54334849/can-i-use-the-size-of-an-array-without-having-to-place-it-in-a-variable/54334939#54334939", "title": "Can I use the size of an array without having to place it in a variable", "body": "<p>Better to use <code>foreach</code>, but to your specific question, <code>@foo</code> in scalar context resolves to the length of the array, and <code>$#foo</code> resolves to the index of the last element:</p>\n\n<pre><code>foreach my $word (@words) { ... } # preferred\n\nfor(my $i = 0; $i &lt; @words; ++$i) { my $word = $words[$i]; ... } # ok sometimes\n\nfor(my $i = 0; $i &lt;= $#words; ++$i) { my $word = $words[$i]; ... } # same thing\n</code></pre>\n\n<p>(assuming that you haven't played with <code>$[</code>, which you shouldn't do.)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1548284322, "last_edit_date": 1548284322, "creation_date": 1548281390, "answer_id": 54336462, "question_id": 54334849, "link": "https://stackoverflow.com/questions/54334849/can-i-use-the-size-of-an-array-without-having-to-place-it-in-a-variable/54336462#54336462", "title": "Can I use the size of an array without having to place it in a variable", "body": "<p>Replace</p>\n\n<pre><code>for (my $i = 0; $i &lt; $(@words), $i++) { ... $words[$i] ... }\n</code></pre>\n\n<p>with</p>\n\n<pre><code>for (my $i = 0; $i &lt; @words; $i++) { ... $words[$i] ... }\n</code></pre>\n\n<p>Just like in your assignment, an array evaluated in scalar context produces its size.</p>\n\n<hr>\n\n<p>That said, using a C-style loop is complex and wasteful.</p>\n\n<p>A better solution if you need the index:</p>\n\n<pre><code>for my $i (0..$#words) { ... $words[$i] ... }\n</code></pre>\n\n<p>A better solution if you don't need the index:</p>\n\n<pre><code>for my $word (@words) { ... $word ... }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1548378809, "post_id": 54347642, "comment_id": 95530186, "body": "I meant the syntax as the proper way to cast an array into its size in the same line as the loop"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1548395022, "post_id": 54347642, "comment_id": 95533495, "body": "@SergioD.Caplan: Right. And that&#39;s what I gave you right at the start of my answer."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1548335999, "creation_date": 1548335999, "answer_id": 54347642, "question_id": 54334849, "link": "https://stackoverflow.com/questions/54334849/can-i-use-the-size-of-an-array-without-having-to-place-it-in-a-variable/54347642#54347642", "title": "Can I use the size of an array without having to place it in a variable", "body": "<p>The syntax that you are searching for is actually no syntax at all. If you use an array variable anywhere where Perl knows you should be using a scalar value (like as an operand to a comparison operator) then Perl gives you the number of elements in the array.</p>\n\n<p>So, based on your example, this will work:</p>\n\n<pre><code># Note: I've corrected a syntax error here.\n# I replaced a comma with a semicolon\nfor (my $x = 0; $x &lt; @words; $x++)\n{\n   print $words[$x]; \n}\n</code></pre>\n\n<p>But there are several ways that we can improve this. Firstly, let's get rid of the ugly and potentially confusing C-style <code>for</code> loop and replace it with a far easier to understand <code>foreach</code>.</p>\n\n<pre><code>foreach my $x (0 .. @words - 1)\n{\n   print $words[$x]; \n}\n</code></pre>\n\n<p>We can also improve on that <code>@words - 1</code>. Instead, we can use <code>$#words</code> which gives the final index in the array <code>@words</code>.</p>\n\n<pre><code>foreach my $x (0 .. $#words)\n{\n   print $words[$x]; \n}\n</code></pre>\n\n<p>Finally, we don't really need the index number here as we're just using it to access each element of the array in turn. Far better to iterate over the elements of the array rather than the indexes.</p>\n\n<pre><code>foreach my $element (@words)\n{\n   print $element; \n}\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 54334900, "answer_count": 4, "score": 2, "last_activity_date": 1548335999, "creation_date": 1548273897, "question_id": 54334849, "link": "https://stackoverflow.com/questions/54334849/can-i-use-the-size-of-an-array-without-having-to-place-it-in-a-variable", "title": "Can I use the size of an array without having to place it in a variable", "body": "<p>Currently I am doing this to read the individual contents of an array </p>\n\n<pre><code>my $size = @words;\nfor(my $x = 0; $x &lt; $size, $x++)\n{\n   print $words[$x]; \n}\n</code></pre>\n\n<p>Is there away to skip the $size assignment?  A way to cast the array and have one less line?</p>\n\n<p>i.e. </p>\n\n<pre><code>for(my $x = 0; $x &lt; $(@word), $x++)\n{\n   print $words[$x]; \n}\n</code></pre>\n\n<p>Can't seem to find the right syntax.  </p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548267224, "post_id": 54333258, "comment_id": 95484191, "body": "To get an epoch timestamp which is the same format you get from <code>time</code>, call <code>-&gt;epoch</code> on the DateTime object."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548267396, "post_id": 54333258, "comment_id": 95484274, "body": "You can easily subtract epoch timestamps to get a difference in seconds, and then convert that to larger denominations, but if you want the <i>calendar</i> duration difference, things get complicated."}, {"owner": {"reputation": 2296, "user_id": 1575416, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32e1e3caa938438115454a4688a3d4a2?s=128&d=identicon&r=PG", "display_name": "aggaton", "link": "https://stackoverflow.com/users/1575416/aggaton"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548267557, "post_id": 54333258, "comment_id": 95484373, "body": "Thanks that seems to work."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548268068, "post_id": 54333258, "comment_id": 95484620, "body": "Why not use <code>DateTime-&gt;now</code> instead of <code>time</code>? Or do you really need nanosecond precision?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548281753, "post_id": 54333258, "comment_id": 95490296, "body": "Is the timestamp in UTC or local time?"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1548276466, "creation_date": 1548276466, "answer_id": 54335390, "question_id": 54333258, "link": "https://stackoverflow.com/questions/54333258/parsing-timestamp-string-to-integer-and-subtract-hires-timestamp/54335390#54335390", "title": "Parsing timestamp string to integer and subtract hires timestamp", "body": "<p>To submit it as a proper answer: To get an epoch timestamp which is the same format you get from <code>time</code>, call the <code>epoch</code> method on the DateTime object. You can easily subtract epoch timestamps to get a difference in seconds, and then convert that to larger denominations. <a href=\"https://perldoc.pl/Time::Seconds\" rel=\"nofollow noreferrer\">Time::Seconds</a> provides useful constants for this if you prefer.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Seconds;\nmy $diff = time - $dt-&gt;epoch;\nmy $diff_hours = $diff / ONE_HOUR;\n</code></pre>\n\n<p>If you want a <em>calendar</em> duration difference, things get complicated. This is because there is no static definition of things like \"one month\" or even \"one day\" and \"one minute\", because of gross things like daylight savings and leap seconds. So the difference depends on the time zone and the absolute start and end time. The simplest way to deal with this is turn your epoch timestamp into a DateTime object and have DateTime do the work for you. </p>\n\n<pre><code>my $dt_time = DateTime-&gt;from_epoch(epoch =&gt; time);\n# Each of the following returns DateTime::Duration objects with different measures of calendar time\nmy $diff_duration = $dt_time-&gt;subtract_datetime($dt); # months, days, minutes, seconds, nanoseconds\nmy $diff_days = $dt_time-&gt;delta_days($dt); # full days\nmy $diff_ms = $dt_time-&gt;delta_ms($dt); # minutes and seconds\nmy $diff_abs = $dt_time-&gt;subtract_datetime_absolute($dt); # seconds and nanoseconds\n</code></pre>\n\n<p>The individual components of the resulting DateTime::Duration objects can be retrieved with the <a href=\"https://metacpan.org/pod/DateTime::Duration#$dur-%3Ein_units(-...-)\" rel=\"nofollow noreferrer\">in_units</a> method or by passing it to <a href=\"https://metacpan.org/pod/DateTime::Format::Duration\" rel=\"nofollow noreferrer\">DateTime::Format::Duration</a>. The <code>subtract_datetime_absolute</code> method is the only way to count leap seconds - epoch timestamps effectively ignore them, and \"minutes\" from the other methods may not be 60 seconds long.</p>\n"}], "owner": {"reputation": 2296, "user_id": 1575416, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32e1e3caa938438115454a4688a3d4a2?s=128&d=identicon&r=PG", "display_name": "aggaton", "link": "https://stackoverflow.com/users/1575416/aggaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 54335390, "answer_count": 1, "score": 0, "last_activity_date": 1548276466, "creation_date": 1548267147, "last_edit_date": 1548267807, "question_id": 54333258, "link": "https://stackoverflow.com/questions/54333258/parsing-timestamp-string-to-integer-and-subtract-hires-timestamp", "title": "Parsing timestamp string to integer and subtract hires timestamp", "body": "<p>New to perl. I have a string that is in this form 20190123120445, i.e. YYYYMMDDHHMISS. In perl how do you turn this into a timestamp that can be used to subtract another timestamp generated from a Time::Hires time timestamp. I know the timestamps are different resolutions and will assume that the first timestamp starts at 0 ms.</p>\n\n<p>I can turn the timestamp into a DateTime object, however attempting to subtract the hires timer value result in error. </p>\n\n<p>How do I turn the first string into a timestamp of the same resolution as the time timestamp, so that I can subtract the values and get a delta? Or is there a more obvious solution?</p>\n\n<pre><code>use Time::Hires;\nuse Date::Parse;\n\nmy $parser = DateTime::Format::Strptime-&gt;new(\n    pattern =&gt; '%Y%m%d%H%M%S',\n    on_error =&gt; 'croak',\n);\n\nmy $dt = $parser-&gt;parse_datetime($args-&gt;{EVENTCREATEDTIMESTAMP});\nmy $delta = time - $dt;\n</code></pre>\n\n<p>If I attempt to do this, I get this error</p>\n\n<pre><code>Bad message vendor or subscription: Cannot subtract 1548265276 from a\nDateTime object (DateTime=HASH(0x28e10d98)). Only a DateTime::Duration\nor DateTime object can be subtracted from a DateTime object.\n</code></pre>\n"}, {"tags": ["algorithm", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1548335367, "post_id": 54333145, "comment_id": 95510165, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548417639, "post_id": 54333406, "comment_id": 95543546, "body": "I don&#39;t have <code>Text::CSV</code> installed on my working machine. I don&#39;t intend to just for running SO examples :-)"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1548418549, "last_edit_date": 1548418549, "creation_date": 1548267663, "answer_id": 54333406, "question_id": 54333145, "link": "https://stackoverflow.com/questions/54333145/sort-table-or-2-dimensional-array-by-same-values-in-column/54333406#54333406", "title": "Sort table (or 2-dimensional array) by same values in column", "body": "<p>The following code should do it, output format is CSV:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\n\nmy @headers = qw(Foo Bar Baz);\nmy @columns = (\n    [qw/abc def ghi xyz/],\n    [qw/def jkl mno uvw xyz/],\n    [qw/abc uvw xyz/],\n);\n\nmy %output;\nmy $N       = scalar(@columns);\nmy @new_row = ('') x $N;\n\nforeach my $index (0..$N-1) {\n    my $column = $columns[$index];\n\n    foreach my $key (@{ $column }) {\n        $output{$key} ||= [ @new_row ];\n        $output{$key}-&gt;[$index] = $key;\n    }\n}\n\n$csv-&gt;say(\\*STDOUT, \\@headers);\n\n# NOTE: add {....} after sort for special sorting requirements\nforeach my $key (sort keys %output) {\n    $csv-&gt;say(\\*STDOUT, $output{$key});\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nFoo,Bar,Baz,\nabc,,abc,\ndef,def,,\nghi,,,\n,jkl,,\n,mno,,\n,uvw,uvw,\nxyz,xyz,xyz,\n</code></pre>\n\n<p><strong>NOTE:</strong> the above is with the default sort algorithm, but you can insert your own, e.g.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># reverse sort\nforeach my $key (sort { $b cmp $a } keys %output) {\n</code></pre>\n\n<p>Thanks for the question. This was fun :-)</p>\n\n<hr>\n\n<p><strong>EDIT2:</strong> guessing from the format of the question the input might also be in CSV, so a row-based variant of the algorithm might be more appropriate.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\n\nmy $headers;\nmy @new_row;\n\nmy %keys;\nmy $line = 0;\nwhile ( my $row = $csv-&gt;getline(\\*STDIN) ) {\n    if ($line == 0) {\n        $headers = $row;\n        @new_row = ('') x @$row;\n    } else {\n        foreach my $index (0..$#$row) {\n            my $key = $row-&gt;[$index];\n            $keys{$key} ||= [ @new_row ];\n            $keys{$key}-&gt;[$index] = $key;\n        }\n    }\n\n    $line++;\n}\n\n# delete \"undefined\" key\ndelete $keys{''};\n\n$csv-&gt;say(\\*STDOUT, $headers);\n# NOTE: add {....} after sort for special sorting requirements\n$csv-&gt;say(\\*STDOUT, $keys{$_}) foreach (sort keys %keys);\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat input.csv \nFoo,Bar,Baz\nabc,def,abc\ndef,jkl,uvw\nghi,mno,xyz\nxyz,uvw,\n,xyz,\n\n$ perl dummy.pl &lt;input.csv \nFoo,Bar,Baz\nabc,,abc\ndef,def,\nghi,,\n,jkl,\n,mno,\n,uvw,uvw\nxyz,xyz,xyz\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1548269661, "last_edit_date": 1548269661, "creation_date": 1548267866, "answer_id": 54333457, "question_id": 54333145, "link": "https://stackoverflow.com/questions/54333145/sort-table-or-2-dimensional-array-by-same-values-in-column/54333457#54333457", "title": "Sort table (or 2-dimensional array) by same values in column", "body": "<p>Something like this maybe?</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @data = (\n    { name =&gt; 'Foo', funcs =&gt; [qw/abc def ghi xyz/] },\n    { name =&gt; 'Bar', funcs =&gt; [qw/def jkl mno uvw xyz/] },\n    { name =&gt; 'Baz', funcs =&gt; [qw/abc uvw xyz/] },\n);\n\nmy %allfuncs = ( map { map {$_=&gt;undef} @{$$_{funcs}} } @data );\n$$_{funcs} = { %allfuncs, map {$_=&gt;1} @{$$_{funcs}} } for @data;\n\nuse Data::Dump;\ndd @data;\n\n# just for output:\nuse List::Util qw/max/;\nmy $maxlen = max map {length} map({$$_{name}} @data), keys(%allfuncs);\nmy $fmt = join('  ', (\"%${maxlen}s\") x @data).\"\\n\";\nprintf $fmt, map { $$_{name} } @data;\nfor my $f (sort keys %allfuncs) {\n    printf $fmt, map { $$_{funcs}{$f}?$f:'' } @data;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(\n  {\n    funcs =&gt; { abc =&gt; 1, def =&gt; 1, ghi =&gt; 1, jkl =&gt; undef, mno =&gt; undef, uvw =&gt; undef, xyz =&gt; 1 },\n    name  =&gt; \"Foo\",\n  },\n  {\n    funcs =&gt; { abc =&gt; undef, def =&gt; 1, ghi =&gt; undef, jkl =&gt; 1, mno =&gt; 1, uvw =&gt; 1, xyz =&gt; 1 },\n    name  =&gt; \"Bar\",\n  },\n  {\n    funcs =&gt; { abc =&gt; 1, def =&gt; undef, ghi =&gt; undef, jkl =&gt; undef, mno =&gt; undef, uvw =&gt; 1, xyz =&gt; 1 },\n    name  =&gt; \"Baz\",\n  },\n)\nFoo  Bar  Baz\nabc       abc\ndef  def     \nghi          \n     jkl     \n     mno     \n     uvw  uvw\nxyz  xyz  xyz\n</code></pre>\n\n<hr>\n\n<p><em>Update:</em> If your input data comes in the form of a AoA, this takes <code>@table</code> and produces the same <code>@data</code> as above (it basically transposes the AoA and then produces the hash structure):</p>\n\n<pre><code>my @table = ( [qw/Foo Bar Baz/], [qw/abc def abc/], [qw/def jkl uvw/],\n    [qw/ghi mno xyz/], [qw/xyz uvw/], [undef, qw/xyz/] );\nmy @data;\nfor my $col ( 0 .. $table[0]-&gt;$#* )\n    { push @data, [ map {$_-&gt;[$col]//()} @table ] }\n@data = map { {name=&gt;shift @$_, funcs=&gt;$_} } @data;\n</code></pre>\n\n<p>And if you need your output format to be an AoA as well:</p>\n\n<pre><code>my @out = ( [map {$$_{name}} @data] );\nfor my $f (sort keys %allfuncs)\n    { push @out, [ map {$$_{funcs}{$f}?$f:undef} @data ] }\n</code></pre>\n\n<p>Produces <code>@out</code>:</p>\n\n<pre><code>(\n  [\"Foo\", \"Bar\", \"Baz\"],\n  [\"abc\", undef, \"abc\"],\n  [\"def\", \"def\", undef],\n  [\"ghi\", undef, undef],\n  [undef, \"jkl\", undef],\n  [undef, \"mno\", undef],\n  [undef, \"uvw\", \"uvw\"],\n  [\"xyz\", \"xyz\", \"xyz\"],\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1548664279, "last_edit_date": 1548664279, "creation_date": 1548271208, "answer_id": 54334246, "question_id": 54333145, "link": "https://stackoverflow.com/questions/54333145/sort-table-or-2-dimensional-array-by-same-values-in-column/54334246#54334246", "title": "Sort table (or 2-dimensional array) by same values in column", "body": "<p>A little manual but hopefully clear approach to \"fill in\" the missing spots: Gather a sorted reference of all values and use it to \"pad\" (with empty) for missing elements in each arrayref-column</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse Data::Dump qw(dd);\nuse List::MoreUtils qw(uniq);\n\nmy @data = (\n    [ qw(abc def ghi xyz) ],\n    [ qw(def jkl mno uvw xyz) ],\n    [ qw(abc uvw xyz) ]\n);    \nmy @all = uniq sort { $a cmp $b } map { @$_ } @data;  # reference\n\n# Changes @data in place. Use on deep copy to preserve the original\nfor my $ary (@data) {\n    my $cmp_at = 0;\n    my @res;\n    for my $i (0..$#all) {\n        if ($ary-&gt;[$cmp_at] eq $all[$i]) {\n            push @res, $ary-&gt;[$cmp_at];\n            ++$cmp_at;\n        }\n        else {\n            push @res, undef;\n        }\n    }\n    $ary = \\@res;  # overwrite arrayref in @data\n}\n\ndd \\@data;\n</code></pre>\n\n<p>Another way is to go row-wise and inspect and print for each element, again using a reference list. The column-wise preprocessing used here should be more flexible and general, I think.</p>\n\n<p>The above prints</p>\n\n<pre>\n[\n  [\"abc\", \"def\", \"ghi\", undef, undef, undef, \"xyz\"],\n  [undef, \"def\", undef, \"jkl\", \"mno\", \"uvw\", \"xyz\"],\n  [\"abc\", undef, undef, undef, undef, \"uvw\", \"xyz\"],\n]\n</pre>\n\n<p>where string \"<em>undef</em>\" produced by <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> indicates array entries with nothing.</p>\n\n<hr>\n\n<p>Now <code>@data</code> can be used to print in a chosen format, for example</p>\n\n<pre><code>use List::Util qw(max);\n\nmy $fmt = '%' . (max map { length } @all) . 's';\nsay join \"\\t\", map { sprintf $fmt, $_ } qw(Foo Bar Baz);    \nfor my $i (0..$#{$data[0]}) {\n    say join \"\\t\", map { sprintf $fmt, $_-&gt;[$i]//'' } @data;\n}\n</code></pre>\n\n<p>what prints a table in the fashion of the desired \"output.\" For quick alignment I use the width of the longest word for all fields; this is most easily improved by using a text-formatting module.</p>\n\n<p>If this goes to a spreadsheet, like tables in the question, then just join fields with a comma</p>\n\n<pre><code>open my $fh, '&gt;', 'out.csv' or die \"Can't open: $!\";\nsay $fh join ',', qw(Foo Bar Baz);\nforeach my $i (0..$#{$data[0]}) {\n    say $fh join ',', map { $_-&gt;[$i]//'' } @data;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 5015829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0eb8e5a17538f9507ab601b91f29a7?s=128&d=identicon&r=PG&f=1", "display_name": "Veltro", "link": "https://stackoverflow.com/users/5015829/veltro"}, "is_accepted": false, "score": 1, "last_activity_date": 1548428781, "creation_date": 1548428781, "answer_id": 54367906, "question_id": 54333145, "link": "https://stackoverflow.com/questions/54333145/sort-table-or-2-dimensional-array-by-same-values-in-column/54367906#54367906", "title": "Sort table (or 2-dimensional array) by same values in column", "body": "<p>Just another different solution using hashes and arrays and Hash::Merge. Looking at your example I concluded that each value from the table can be stored as a single hash entry as long as you keep track in which column they belong. After the unsorted hash has been created the program finishes with a example print algorithm to extract the data in the format that you want.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Hash::Merge ;\n\nmy @data = (\n    { name =&gt; 'Foo', funcs =&gt; [qw/abc def ghi xyz/] },\n    { name =&gt; 'Bar', funcs =&gt; [qw/def jkl mno uvw xyz/] },\n    { name =&gt; 'Baz', funcs =&gt; [qw/abc uvw xyz/] },\n);\n\nmy $merger = Hash::Merge-&gt;new('RETAINMENT_PRECEDENT');\nmy $unsorted = {} ;\nfor my $i ( 0..$#data) {\n    my $tmpH = {} ;\n    foreach( @{$data[$i]-&gt;{funcs}} ) {\n        if( exists $tmpH-&gt;{ $_ } ) {\n            push @{$tmpH-&gt;{ $_ }}, $i ;\n        } else {\n            $tmpH-&gt;{ $_ } = [ $i ] ;\n        }\n    } ;\n    $unsorted = $merger-&gt;merge( $unsorted, $tmpH ) ;\n}\nprint \"Foo\\tBar\\tBaz\\n\" ;\nforeach ( sort keys %{$unsorted} ) {\n    my @txt;\n    @txt[@{$unsorted-&gt;{ $_ }}] = ($_) x @{$unsorted-&gt;{ $_ }} ;\n    {\n        no warnings 'uninitialized';\n        printf(\"%s\\t%s\\t%s\\n\", $txt[0], $txt[1], $txt[2]) ; \n    }\n}\n__END__\nFoo     Bar     Baz\nabc             abc\ndef     def\nghi\n        jkl\n        mno\n        uvw     uvw\nxyz     xyz     xyz\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1548664279, "creation_date": 1548266607, "question_id": 54333145, "link": "https://stackoverflow.com/questions/54333145/sort-table-or-2-dimensional-array-by-same-values-in-column", "title": "Sort table (or 2-dimensional array) by same values in column", "body": "<p>Example.</p>\n\n<p>If input is </p>\n\n<p><a href=\"https://i.stack.imgur.com/TbSxo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TbSxo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Output should be</p>\n\n<p><a href=\"https://i.stack.imgur.com/BV3bt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BV3bt.png\" alt=\"enter image description here\"></a></p>\n\n<p>So each row must consist only same values or <code>undef</code> if original unsorted column had no such string.  Values in columns should be alphabetically sorted.</p>\n\n<p>How to realize that type of sorting ?</p>\n\n<p>P.S. Original task - we have some modules and we want to compare them visually for functions with similar names.</p>\n"}, {"tags": ["excel", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1548261702, "post_id": 54331703, "comment_id": 95481611, "body": "<a href=\"http://metacpan.org/pod/Win32::OLE\" rel=\"nofollow noreferrer\"><code>Win32::OLE</code></a>"}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1548262380, "post_id": 54331703, "comment_id": 95481970, "body": "Any other because I will be running the script from linux environment."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548280155, "post_id": 54331703, "comment_id": 95489680, "body": "There is no way to edit a spreadsheet in-place rather than read a spreadsheet and create a new one, except by using the Excel process itself such as that. It may be possible to use LibreOffice the same way but I don&#39;t think there is such an advanced solution for that."}], "owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548261067, "creation_date": 1548261067, "question_id": 54331703, "link": "https://stackoverflow.com/questions/54331703/read-from-and-write-into-same-excel-workbook", "title": "Read from and Write into same excel Workbook", "body": "<p>Hi I want to read data from Excel Worksheet and write into the another Sheet of same workbook using perl. </p>\n\n<p>I tried using Spreadsheet::ParseExcel::SaveParser. But it is mentioned that its undergoing restructuring. Is there any alternative for this?</p>\n"}, {"tags": ["perl", "cpan", "perl-xs"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548258103, "post_id": 54330558, "comment_id": 95479536, "body": "You shouldn&#39;t try to &quot;manually&quot; load the file. Try <code>perl -Mblib -Mtrue</code>. Also, try <code>gmake test</code> and see how these fail before claiming that your build failed."}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548258780, "post_id": 54330558, "comment_id": 95479932, "body": "@Corion: when I <code>make test</code>, I get a couple hundred lines of output, culminating with <code>Files=10, Tests=16,  7 wallclock secs ( 0.08 usr +  0.06 sys =  0.14 CPU)</code> <code>Result: FAIL</code> When I do <code>perl -Mblib -Mtrue</code>, I get the same output as above, with <code>Can&#39;t load... for module true</code> and referring me to Dynaloader.pm line 193."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548284494, "post_id": 54330558, "comment_id": 95491205, "body": "All you&#39;ve shown is a warning. If it failed to build, what error did you get?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548317883, "post_id": 54330558, "comment_id": 95500097, "body": "The interesting part of the test run would have been the &quot;couple hundred lines output&quot;, but if the tests run at all, then <code>make</code> is successful. This means your invocation of <code>perl -Mblib -Mtrue ...</code> goes wrong somewhere else. Maybe it calls the wrong <code>perl</code> executable. What is your overall goal here?"}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "edited": false, "score": 0, "creation_date": 1548348518, "post_id": 54330558, "comment_id": 95518561, "body": "I&#39;ve created a <a href=\"https://pastebin.com/egkB9DpK\" rel=\"nofollow noreferrer\">pastebin</a> showing the complete output of <code>gmake test</code>.  As you can see, it&#39;s a mess."}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "edited": false, "score": 0, "creation_date": 1548348560, "post_id": 54330558, "comment_id": 95518590, "body": "Also, in case it helps, <a href=\"https://pastebin.com/cLhQRE9J\" rel=\"nofollow noreferrer\">here</a> is the output of <code>perl -V</code>."}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548355695, "post_id": 54330558, "comment_id": 95522082, "body": "@ikegami --- Would you mind posting the output of <code>perl -V</code> on your system, just so I can compare?  I&#39;m grasping at straws here.  TIA."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548409632, "post_id": 54330558, "comment_id": 95539389, "body": "As the comment suggest, the problem is not loading <code>true.xs.dll</code> but a DLL it needs. I don&#39;t know much about debugging &quot;DLL hell&quot;. There&#39;s a tool to inspect DLL dependencies that should help, but I forgot what it&#39;s called. Ask on PerlMonks... If you get BrowserUK&#39;s attn, I think he can help you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548409825, "post_id": 54330558, "comment_id": 95539507, "body": "<a href=\"https://pastebin.com/RFK8qZH5\" rel=\"nofollow noreferrer\">perl -V</a>. (64-bit build of 5.28.0)"}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "edited": false, "score": 0, "creation_date": 1548443521, "post_id": 54330558, "comment_id": 95557272, "body": "Fascinating.  It&#39;s almost identical to mine.  This is maddening!"}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "is_accepted": false, "score": 1, "last_activity_date": 1548443861, "creation_date": 1548443861, "answer_id": 54371564, "question_id": 54330558, "link": "https://stackoverflow.com/questions/54330558/why-cant-i-build-true-pragma-module-on-strawberry-perl-5-28-1/54371564#54371564", "title": "Why can&#39;t I build &#39;true&#39; pragma module on Strawberry Perl 5.28.1?", "body": "<p>I'm not sure whether to post this as an <strong>answer</strong> or not, but it is at least a <strong>resolution</strong>.  After spending a day and a half of snooping through source code and trying various experiments, I gave up, removed the 64-bit Strawberry 5.28.1, and installed 32-bit Strawberry 5.28.1.  Then <code>true</code> built, tested, and installed like a champ.</p>\n\n<p>My only guess (and it's a wild guess) is that some part of the process was somehow finding and interacting with some 32-bit binaries on the network&mdash; although I expressly did not have <code>PERL5LIB</code> or other Perl env vars set, and nothing in my <code>PATH</code> pointed to any network Perl stuff.</p>\n\n<p>But I don't have time to investigate this any further, and 32-bit Perl is good enough for what I do.  A big <strong>thank you</strong> to @Corion and @ikegami for their time and comments.</p>\n"}], "owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548443861, "creation_date": 1548257255, "question_id": 54330558, "link": "https://stackoverflow.com/questions/54330558/why-cant-i-build-true-pragma-module-on-strawberry-perl-5-28-1", "title": "Why can&#39;t I build &#39;true&#39; pragma module on Strawberry Perl 5.28.1?", "body": "<p>I'm rebuilding a Windows 10 (64 bit) workstation from scratch, and I've hit a snag in building one particular CPAN module: <a href=\"https://metacpan.org/pod/true\" rel=\"nofollow noreferrer\">true</a>.  This is a well-established module&mdash; it was last updated in 2011!&mdash; and I've used it for years on previous versions of Strawberry Perl, up to and including 5.26.  I'm mystified as to what's going wrong.</p>\n\n<p>I build the module as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Strawberry\\cpan\\build\\true-0.18-0&gt; perl Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a gmake-style Makefile\nWriting Makefile for true\nWriting MYMETA.yml and MYMETA.json\nC:\\Strawberry\\cpan\\build\\true-0.18-0&gt; gmake\ncp lib/true/VERSION.pm blib\\lib\\true\\VERSION.pm\ncp lib/true.pm blib\\lib\\true.pm\nRunning Mkbootstrap for true ()\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 644 \"true.bs\"\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command::MM -e cp_nonempty -- true.bs blib\\arch\\auto\\true\\true.bs 644\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"C:\\Strawberry\\perl\\lib\\ExtUtils/xsubpp\"  -typemap C:\\STRAWB~1\\perl\\lib\\ExtUtils\\typemap  true.xs &gt; true.xsc\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e mv -- true.xsc true.c\ngcc -c  -IC:\\Strawberry\\perl\\site\\lib\\B\\Hooks\\OP\\Annotation\\Install -IC:\\Strawberry\\perl\\vendor\\lib\\B\\Hooks\\OP\\Check\\Install -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -O3 -Wall -W   -DVERSION=\\\"0.18\\\" -DXS_VERSION=\\\"0.18\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   true.c\nIn file included from true.xs:4:0:\ntrue.xs: In function 'true_leave':\nC:\\STRAWB~1\\perl\\lib\\CORE/perl.h:174:22: warning: unused parameter 'my_perl' [-Wunused-parameter]\n#  define pTHX  tTHX my_perl PERL_UNUSED_DECL\n^\ntrue.xs:25:24: note: in expansion of macro 'pTHX'\nSTATIC void true_leave(pTHX) {\n^\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Mksymlists \\\n-e \"Mksymlists('NAME'=&gt;\\\"true\\\", 'DLBASE' =&gt; 'true', 'DL_FUNCS' =&gt; {  }, 'FUNCLIST' =&gt; [], 'IMPORTS' =&gt; {  }, 'DL_VARS' =&gt; []);\"\ng++ true.def -o blib\\arch\\auto\\true\\true.xs.dll -mdll -s -L\"C:\\STRAWB~1\\perl\\lib\\CORE\" -L\"C:\\STRAWB~1\\c\\lib\" true.o   \"C:\\STRAWB~1\\perl\\lib\\CORE\\libperl528.a\" \"C:\\Strawberry\\perl\\site\\lib\\auto\\B\\Hooks\\OP\\Annotation\\Annotation.a\" \"C:\\Strawberry\\perl\\vendor\\lib\\auto\\B\\Hooks\\OP\\Check\\Check.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libmoldname.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libkernel32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libuser32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libgdi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libwinspool.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libcomdlg32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libadvapi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libshell32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libole32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\liboleaut32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libnetapi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libuuid.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libws2_32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libmpr.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libwinmm.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libversion.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libodbc32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libodbccp32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libcomctl32.a\" -Wl,--enable-auto-image-base\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 755 blib\\arch\\auto\\true\\true.xs.dll\ndlltool --def true.def --output-lib blib\\arch\\auto\\true/true.a --dllname true.xs.dll blib\\arch\\auto\\true\\true.xs.dll\n</code></pre>\n\n<p>I don't know if the warning about pTHX is significant or ignorable.  Anyhow, it does generate an output file <code>true.xs.dll</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Strawberry\\cpan\\build\\true-0.18-0&gt; dir blib\\arch\\auto\\true\\true.xs.dll\nVolume in drive C is Local SSD Disk\nVolume Serial Number is B4E3-5132\n\nDirectory of C:\\Strawberry\\cpan\\build\\true-0.18-0\\blib\\arch\\auto\\true\n\n01/23/2019  09:53            17,920 true.xs.dll\n1 File(s)         17,920 bytes\n0 Dir(s)  873,458,094,080 bytes free\n</code></pre>\n\n<p>But the file is unusable:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Strawberry\\cpan\\build\\true-0.18-0&gt; perl -I blib\\arch\\auto -Iblib\\arch\\auto\\true -I blib\\lib\\auto -I blib\\lib\\ -Mtrue\nCan't load 'blib\\arch\\auto\\true/true.xs.dll' for module true: load_file:The specified module could not be found at C:/Strawberry/perl/lib/DynaLoader.pm line 193.\nat - line 0.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<p>The documentation on <a href=\"https://metacpan.org/pod/distribution/perl/ext/DynaLoader/DynaLoader_pm.PL\" rel=\"nofollow noreferrer\">Dynaloader</a> doesn't really help, but the code in <code>Dynaloader.pm</code> near line 193 does provide a hint:</p>\n\n<pre><code># Many dynamic extension loading problems will appear to come from\n# this section of code: XYZ failed at line 123 of DynaLoader.pm.\n# Often these errors are actually occurring in the initialisation\n# C code of the extension XS file. Perl reports the error as being\n# in this perl code simply because this was the last perl code\n# it executed.\n</code></pre>\n\n<p>So my working theory is that &ldquo;something&rdquo; changed in the latest Perl, causing code rot in the <code>true</code> module.  But there's a flaw in my theory: at least one <a href=\"http://www.cpantesters.org/cpan/report/4cbae202-6c90-1014-b8f3-06b08038f308\" rel=\"nofollow noreferrer\">CPAN tester</a> has successfully built <code>true</code> (although they did it with 32-bit perl).</p>\n\n<p>I'm at a loss.  Anyone got any ideas I can try?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1548251005, "post_id": 54328451, "comment_id": 95475233, "body": "You can try <code>perl -ne  &#39;print if  @{[split]} &lt; 2&#39; file.txt</code>"}, {"owner": {"reputation": 2463, "user_id": 2346731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b21109a70f680b9c50261b90d22f87?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/2346731/marcus"}, "edited": false, "score": 1, "creation_date": 1548251005, "post_id": 54328451, "comment_id": 95475234, "body": "One thing to note is that this can be fixed by calling scalar to get the length of the array generated by calling split. <code>print if (scalar(split) &lt; 2)</code>"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 3, "creation_date": 1548251117, "post_id": 54328451, "comment_id": 95475310, "body": "<code>perl -ne  &#39;print if split() &lt; 2&#39; file.txt</code> seems to work too."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 2463, "user_id": 2346731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b21109a70f680b9c50261b90d22f87?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/2346731/marcus"}, "edited": false, "score": 2, "creation_date": 1548251942, "post_id": 54328451, "comment_id": 95475760, "body": "@Marcus What fixes it are the parenthesis, not really the <code>scalar</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548288152, "post_id": 54328451, "comment_id": 95492118, "body": "Should give an &quot;ambiguous&quot; warning, but doesn&#39;t :("}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1548266533, "post_id": 54329107, "comment_id": 95483873, "body": "The <code>&lt;</code> character is one of the several extremely overloaded characters in the Perl parser, so it can frequently be confused in this manner. Other notable ones are <code>&#47;</code> and <code>*</code> (for very different reasons!)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1548288261, "post_id": 54329107, "comment_id": 95492139, "body": "See <a href=\"https://stackoverflow.com/a/51204133/589924\">this</a> to see how overloaded <code>&lt;</code> is."}], "tags": [], "owner": {"reputation": 2463, "user_id": 2346731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b21109a70f680b9c50261b90d22f87?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/2346731/marcus"}, "is_accepted": true, "score": 9, "last_activity_date": 1548252521, "creation_date": 1548252521, "answer_id": 54329107, "question_id": 54328451, "link": "https://stackoverflow.com/questions/54328451/switching-from-to-ruins-my-one-liner/54329107#54329107", "title": "Switching from `&gt;` to `&lt;` ruins my one-liner", "body": "<p>After a bit of digging, and looking at the comments on your post, I think I've found the answer. The parser is attempting to understand what you mean when it sees <code>split &lt;</code>. Without parentheses on your call to split, it needs to guess how many arguments you are passing to split (It takes 0-3, see <code>perldoc -f split</code> for more information).</p>\n\n<p>Because of this, it seems to assume by default that you are trying to call it with at least one argument, which looks like the start of the null filehandle <code>&lt;&gt;</code>. When it sees that it is incomplete, it prints the error and aborts.</p>\n\n<p>This explains why the fixes commented on your post work. They all make it clear that split is to be called with no arguments, and the parser should not look for an expression, and the <code>&lt;</code> character can then be treated as an operator.</p>\n"}], "owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 54329107, "answer_count": 1, "score": 7, "last_activity_date": 1548252521, "creation_date": 1548250278, "question_id": 54328451, "link": "https://stackoverflow.com/questions/54328451/switching-from-to-ruins-my-one-liner", "title": "Switching from `&gt;` to `&lt;` ruins my one-liner", "body": "<p>I am filtering for lines with more than 3 items with</p>\n\n<pre><code>perl -ne  'print if split &gt; 2' file.txt\n</code></pre>\n\n<p>But when I want to filter for lines with less than 3 items I can't use</p>\n\n<pre><code>perl -ne  'print if split &lt; 2' file.txt\n#Unterminated &lt;&gt; operator at -e line 1.\n</code></pre>\n\n<p>I can work around it with either of these</p>\n\n<pre><code>perl -ne 'print if not split &gt; 2' file.txt\nperl -ne 'print if 2 &gt; split' file.txt\n</code></pre>\n\n<p>But I am wondering why the expression only fails for one of <code>&lt;</code>,<code>&gt;</code>.</p>\n"}, {"tags": ["mysql", "perl", "foreign-keys", "dbix-class"], "comments": [{"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1548256938, "post_id": 54328169, "comment_id": 95478889, "body": "Which RDBMS are you using?"}, {"owner": {"reputation": 9585, "user_id": 272463, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lazv_CujqkA/AAAAAAAAAAI/AAAAAAAAPJQ/0P6XXc0hpvA/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/272463/mark"}, "reply_to_user": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1548260190, "post_id": 54328169, "comment_id": 95480774, "body": "@AlexanderHartmaier I am using MySQL with InnoDB tables."}], "answers": [{"tags": [], "owner": {"reputation": 9585, "user_id": 272463, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lazv_CujqkA/AAAAAAAAAAI/AAAAAAAAPJQ/0P6XXc0hpvA/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/272463/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1548349701, "creation_date": 1548349701, "answer_id": 54351991, "question_id": 54328169, "link": "https://stackoverflow.com/questions/54328169/how-to-define-table-loading-order-with-dbic-schema-deploy/54351991#54351991", "title": "How to define table loading order with DBIc Schema deploy()", "body": "<p>Turns out that the query was sensitive to the order as there was a missing index when defining the second table. In the example in the description the definition for <code>table_a</code> was the same, but the definition for <code>table_b</code> was:</p>\n\n<pre><code>CREATE TABLE `table_b` (\n  `table_b_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,\n  `source_id` INT UNSIGNED NULL,\n  PRIMARY KEY (`table_b_id`))\nENGINE = InnoDB;\n</code></pre>\n\n<p>When run in the order of <code>table_b</code> and then <code>table_a</code> everything is fine. If the calls are made in the order of <code>table_a</code> then <code>table_b</code>, because there is a missing index on the <code>source_id</code> in the definition of <code>table_b</code> then the query fails whether the <code>FOREIGN_KEY_CHECKS</code> is set to 0 or 1.</p>\n\n<p>Found this by turning on the debug() setting in DBIc to find the queries it ran and then using this <a href=\"https://www.percona.com/blog/2017/04/06/dealing-mysql-error-code-1215-cannot-add-foreign-key-constraint/\" rel=\"nofollow noreferrer\">post</a> on the Percona blog to whittle down the issues and find the answer.</p>\n\n<p>In the table definition I then used the <code>sqlt_deploy_hook</code> below the boiler plate code created by the Schema Loader to add the index:</p>\n\n<pre><code>sub sqlt_deploy_hook {\n   my ($self, $sqlt_table) = @_;\n\n   $sqlt_table-&gt;add_index(name =&gt; 'table_b_idx_source_id', fields =&gt; ['source_id']);\n}\n</code></pre>\n\n<p>Thank you for those that have looked at this question or taken time to consider the issue.</p>\n"}], "owner": {"reputation": 9585, "user_id": 272463, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lazv_CujqkA/AAAAAAAAAAI/AAAAAAAAPJQ/0P6XXc0hpvA/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/272463/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548349701, "creation_date": 1548249468, "question_id": 54328169, "link": "https://stackoverflow.com/questions/54328169/how-to-define-table-loading-order-with-dbic-schema-deploy", "title": "How to define table loading order with DBIc Schema deploy()", "body": "<p>I am wrapping a database schema using the DBIc Schema to help with unit testing the code.</p>\n\n<p>Based on the original database I used <code>dbidump</code> to to generate the schema from the database:</p>\n\n<pre><code>dbicdump -o dump_directory=./lib -o components='[\"InflateColumn::DateTime\"]' -o debug=1 Test::Schema 'dbi:mysql:dbname=mcdowall_test' 'test'\n</code></pre>\n\n<p>There are 2 InnoDB tables <code>table_a</code> and <code>table_b</code>. The issue is that <code>table_a</code> has a foreign key constraint on table <code>table_b</code>:</p>\n\n<pre><code>CREATE TABLE `table_b` (\n  `table_b_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,\n  `source_id` INT UNSIGNED NULL,\n  PRIMARY KEY (`table_b_id`),\n  KEY (`source_id`))\nENGINE = InnoDB;\n\nCREATE TABLE `table_a` (\n  `table_a_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,\n  `source_id` INT UNSIGNED NULL DEFAULT NULL,\n  PRIMARY KEY (`table_a_id`),\n  KEY (`table_a_id`),\n  CONSTRAINT `fk_ab`\n    FOREIGN KEY (`source_id`)\n    REFERENCES `table_b` (`source_id`)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\nENGINE = InnoDB;\n</code></pre>\n\n<p>This means that the when using <code>deploy()</code> to install the schema during testing it installs the tables in alphabetical order:</p>\n\n<pre><code>use Test::Schema\n\nmy $schema = Test::Schema-&gt;connect($dsn, $user, $pass, \\%opts);\n$schema-&gt;deploy();\n</code></pre>\n\n<p>This raises the following SQL error as <code>table_b</code> does not exist when <code>table_a</code> is getting created:</p>\n\n<pre><code>ERROR 1215 (HY000): Cannot add foreign key constraint\n</code></pre>\n\n<p>Is there a way to get the <code>deploy()</code> function to either pre-check the foreign key dependencies or specify specific tables to be inserted first?</p>\n\n<p>Ideally <code>table_b</code> should be installed first and then <code>table_a</code>.</p>\n"}, {"tags": ["perl", "oauth", "firebase-cloud-messaging", "google-authentication"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1548245659, "post_id": 54326824, "comment_id": 95472142, "body": "Try <a href=\"https://metacpan.org/pod/Net::OAuth\" rel=\"nofollow noreferrer\">metacpan.org/pod/Net::OAuth</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1548247529, "post_id": 54326824, "comment_id": 95473184, "body": "Just put &quot;OAuth&quot; into metacpan. There are a couple."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548266254, "post_id": 54326824, "comment_id": 95483748, "body": "It is important to know if you are talking about OAuth 1 or OAuth 2 as they are very different (OAuth 2 is a lot simpler). If it&#39;s OAuth 1 I wrote <a href=\"https://metacpan.org/pod/WWW::OAuth\" rel=\"nofollow noreferrer\">WWW::OAuth</a> as a simpler/more reusable authenticator for this. But since you&#39;re talking about google I think it&#39;s OAuth 2."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 1, "creation_date": 1548272225, "post_id": 54326824, "comment_id": 95486446, "body": "Google is OAuth 2.0 only. Google dropped support for OAuth 1.x years ago."}, {"owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "edited": false, "score": 0, "creation_date": 1548323253, "post_id": 54326824, "comment_id": 95502966, "body": "I looked up for that on my own, it&#39;s in fact OAuth 2.0. Following the description on <a href=\"https://medium.com/@ThatJenPerson/authenticating-firebase-cloud-messaging-http-v1-api-requests-e9af3e0827b8\" rel=\"nofollow noreferrer\">medium.com/@ThatJenPerson/&hellip;</a> I downloaded my service account json but my server side script has to be written in perl and I didn&#39;t find an understandable example how to generate my OAuth token from that json."}], "owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1598350301, "creation_date": 1548244910, "last_edit_date": 1598350301, "question_id": 54326824, "link": "https://stackoverflow.com/questions/54326824/is-there-a-possibility-to-generate-oauth-token-with-perl", "title": "Is there a possibility to generate OAuth-token with perl?", "body": "<p>I am currently developing an app that shall receive push notifications via Firebase.</p>\n<p>Now the server, that should call he API on the trigger event is mainly written in Perl, so I try to write my own module that creates a HTTP request that calls the Firebase Server API.</p>\n<p>For this request I have to generate an OAuth-Token as access token, which is kinda difficult to do in perl in my view, because I haven't found any module on CPAN that provides all the needed objects like <code>GoogleCredentials</code> in Java. Do you have any source for me, or a proper solution, you did by yourself?</p>\n"}, {"tags": ["perl", "command-line-arguments"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548244311, "post_id": 54326606, "comment_id": 95471458, "body": "Either you rewrite the parts of the Perl program to accept ranges: <code>@ARGV = map   { &#47;^(\\d+)\\.\\.(\\d+)$&#47; ? $1..$2 : $_ } @ARGV</code>, or you invoke it from (say) <code>bash</code> using the <code>seq</code> command: <code>.&#47;my_program --target 100..200</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1548245801, "post_id": 54326606, "comment_id": 95472221, "body": "... whoops - the command line invocation should be <code>.&#47;my_program --target $(seq 100 200)</code>. But maybe you want to invoke the program in a loop? Please <a href=\"https://stackoverflow.com/posts/54326606/edit\">edit</a> your post accordingly."}, {"owner": {"reputation": 235, "user_id": 394568, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e1f45f97a33eba32b55d61546ff9d67c?s=128&d=identicon&r=PG", "display_name": "arshad", "link": "https://stackoverflow.com/users/394568/arshad"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548246514, "post_id": 54326606, "comment_id": 95472627, "body": "Thanks.. But no success. It is taking only the first value"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548246684, "post_id": 54326606, "comment_id": 95472710, "body": "Does your program actually take a list of targets on the command line?"}, {"owner": {"reputation": 235, "user_id": 394568, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e1f45f97a33eba32b55d61546ff9d67c?s=128&d=identicon&r=PG", "display_name": "arshad", "link": "https://stackoverflow.com/users/394568/arshad"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548246969, "post_id": 54326606, "comment_id": 95472858, "body": "Yea .. It worked!!!! I had to put quotes around the seq -  ./my_program --target &quot;$(seq 100 200)&quot;.. Thanks Corion"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548247102, "post_id": 54327340, "comment_id": 95472927, "body": "Judging from OP comment, this is not a Perl problem, but sh issue then..."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548247990, "post_id": 54327340, "comment_id": 95473445, "body": "Updated answer to handle all variants"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548248602, "post_id": 54327340, "comment_id": 95473780, "body": "Updated again to handle reversed list case too. OP: have fun :-)"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1548248516, "last_edit_date": 1548248516, "creation_date": 1548246632, "answer_id": 54327340, "question_id": 54326606, "link": "https://stackoverflow.com/questions/54326606/how-do-i-pass-a-range-of-numbers-eg-100-to-200-as-command-line-argument-in-pe/54327340#54327340", "title": "How do I pass a range of numbers (eg: 100 to 200) as command line argument in Perl?", "body": "<p>How about this?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Getopt::Long;\n\nmy %options;\nGetOptions(\\%options, (\n           'target=s',\n       ))\n    or die \"$!\\n\";\n\ndie \"option --target is missing!\\n\"\n    unless exists $options{target};\n\nmy @list;\nif (my($number) = ($options{target} =~ /^(\\d+)$/)) {\n    push(@list, $number);\n} elsif (my($start, $end) = ($options{target} =~ /^(\\d+)\\.\\.(\\d+)$/)) {\n    if ($start &lt; $end) {\n        push(@list, $start..$end);\n    } else {\n        push(@list, reverse($end..$start));\n    }\n} elsif (my($first, $others) = ($options{target} =~ /^(\\d+)[\\s,]((?:\\d+[\\s,])*\\d+)$/)) {\n    push(@list, $first, split(/[\\s,]/, $others));\n} else {\n    die \"invalid argument for --target option: $options{target}\\n\";\n}\n\nfor my $target (@list) {\n    print \"${target}\\n\";\n}\n\nexit 0;\n</code></pre>\n\n<p>Example runs:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl --target 1234\n1234\n\n$ perl dummy.pl --target 1,4,5,40,17,30\n1\n4\n5\n40\n17\n30\n\n$ perl dummy.pl --target \"1 4,5 40 17,30\"\n1\n4\n5\n40\n17\n30\n\n$ perl dummy.pl --target 4..10\n4\n5\n6\n7\n8\n9\n10\n\n$ perl dummy.pl --target 10..4\n10\n9\n8\n7\n6\n5\n4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 2, "last_activity_date": 1548259512, "creation_date": 1548259512, "answer_id": 54331246, "question_id": 54326606, "link": "https://stackoverflow.com/questions/54326606/how-do-i-pass-a-range-of-numbers-eg-100-to-200-as-command-line-argument-in-pe/54331246#54331246", "title": "How do I pass a range of numbers (eg: 100 to 200) as command line argument in Perl?", "body": "<p><a href=\"https://metacpan.org/pod/Set::IntSpan\" rel=\"nofollow noreferrer\">Set::IntSpan</a> handles the drudgery of parsing ranges:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Getopt::Long;\nuse Set::IntSpan;\n\nGetOptions( 'target=s' =&gt; \\( my $target ) );\n\nmy $set = Set::IntSpan-&gt;new( $target );\n\nwhile( my $item = $set-&gt;next ) {\n    say $item;\n}\n</code></pre>\n\n<p>with results of:</p>\n\n<pre><code>% perl myprogram.pl  --target 1-10,12-15\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n12\n13\n14\n15\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 394568, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e1f45f97a33eba32b55d61546ff9d67c?s=128&d=identicon&r=PG", "display_name": "arshad", "link": "https://stackoverflow.com/users/394568/arshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1548259512, "creation_date": 1548244141, "last_edit_date": 1548244338, "question_id": 54326606, "link": "https://stackoverflow.com/questions/54326606/how-do-i-pass-a-range-of-numbers-eg-100-to-200-as-command-line-argument-in-pe", "title": "How do I pass a range of numbers (eg: 100 to 200) as command line argument in Perl?", "body": "<p>I have a Perl program that takes command line arguments.. I want to pass numbers from 100 to 200 as one argument. As it is difficult to give all the numbers between 100 and 200, is there any option to use a range operator in command line argument ?</p>\n\n<pre><code>./my_program --target 100..200\n</code></pre>\n"}, {"tags": ["perl", "cmd", "cpan", "activeperl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548238430, "post_id": 54324750, "comment_id": 95468177, "body": "This is just a warning. You can ignore it. Alternatively, consider setting the <code>COLUMNS</code> and <code>LINES</code> environment variables to the size of your terminal."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548238946, "post_id": 54324750, "comment_id": 95468481, "body": "Also, maybe you are launching Perl in a fancy console emulator and not the raw <code>cmd.exe</code> as suggested by <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=24598\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1548254526, "post_id": 54324750, "comment_id": 95477383, "body": "Just an idea, try running <code>set TERM=dumb</code> before you run <code>cpan</code> (<a href=\"https://www.perlmonks.org/?node_id=1214933\" rel=\"nofollow noreferrer\">related thread</a>)."}, {"owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1548306372, "post_id": 54324750, "comment_id": 95495751, "body": "The <code>set TERM=dumb</code> works!  @haukex - Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2335846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c7ec9b894f172300c13b77ca84d4b5?s=128&d=identicon&r=PG", "display_name": "Bill Smith", "link": "https://stackoverflow.com/users/2335846/bill-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1588369049, "last_edit_date": 1588369049, "creation_date": 1588257497, "answer_id": 61525970, "question_id": 54324750, "link": "https://stackoverflow.com/questions/54324750/cpan-error-unable-to-get-terminal-size-the-win32-getconsolescreenbufferinfo-ca/61525970#61525970", "title": "cpan error: Unable to get Terminal Size. The Win32 GetConsoleScreenBufferInfo call didn&#39;t work", "body": "<p>It's trying to figure out your terminals size.  You can use a 'dumb' terminal.</p>\n\n<pre><code>set TERM=dumb\n</code></pre>\n\n<p>will eliminate the warning.</p>\n"}], "owner": {"reputation": 129, "user_id": 2260515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2d1b0b05f7c0924d8dfd9790fb6123?s=128&d=identicon&r=PG", "display_name": "Oren Maurer", "link": "https://stackoverflow.com/users/2260515/oren-maurer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2471, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1588369049, "creation_date": 1548238191, "question_id": 54324750, "link": "https://stackoverflow.com/questions/54324750/cpan-error-unable-to-get-terminal-size-the-win32-getconsolescreenbufferinfo-ca", "title": "cpan error: Unable to get Terminal Size. The Win32 GetConsoleScreenBufferInfo call didn&#39;t work", "body": "<p>ActiveState Perl - 5.26 on Windows 10 - 64 bit. </p>\n\n<p>When I am trying to launch cpan from CMD - I see the following error: </p>\n\n<pre><code>C:\\Users\\orenm&gt;cpan\nUnable to get Terminal Size. The Win32 GetConsoleScreenBufferInfo call didn't work. The COLUMNS and LINES environment variables didn't work. at C:\\Perl64\\lib/Term/ReadLine/readline.pm line 410. \n</code></pre>\n\n<p>Why does it happen? \nWhat shall I do with it? </p>\n"}, {"tags": ["perl", "unix"], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 0, "creation_date": 1548459812, "post_id": 54325887, "comment_id": 95562873, "body": "<code>find &#47;nfs&#47;abc -type f -exec egrep -Hne &#39;XYZ&#39; {} +</code> may be a preferable version of that solution.  Most of the time, the difference is insignificant, but if the directories are large, it could provide a significant performance improvement (it invokes egrep on groups of files, so it does a lot fewer fork/execs, and prints the filename even if there&#39;s just one file on the command line.)"}], "tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 2, "last_activity_date": 1548241778, "creation_date": 1548241778, "answer_id": 54325887, "question_id": 54324670, "link": "https://stackoverflow.com/questions/54324670/using-egrep-in-perl-and-travel-through-the-directories/54325887#54325887", "title": "using egrep in perl and travel through the directories", "body": "<p>With your <code>perl</code> script you are not using <code>perl</code>'s pattern matching capabilities. It would be possible to program everything in <code>perl</code> without using <code>egrep</code>.</p>\n\n<p>But I think it is easier to use <code>find</code> in combination with <code>egrep</code>.</p>\n\n<pre><code>find /nfs/abc -type f -exec egrep -ne 'XYZ' {} /dev/null \\;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 3, "last_activity_date": 1548244597, "last_edit_date": 1548244597, "creation_date": 1548242834, "answer_id": 54326196, "question_id": 54324670, "link": "https://stackoverflow.com/questions/54324670/using-egrep-in-perl-and-travel-through-the-directories/54326196#54326196", "title": "using egrep in perl and travel through the directories", "body": "<p>You don't need to run egrep multiple times...you could just do it with one egrep or even better do it in a couple of lines of Perl.</p>\n\n<p>You just need to <code>open</code> the file using the full path, and then for each line in the file (read in using <code>&lt;$fh&gt;</code>) you can use a regular expression to find lines that match and <code>print</code> them to your output file.</p>\n\n<pre><code>open(my $output,\"&gt;\",\"/nfs/pais/abh/pgm4.txt\") || die;\n\nif(open(my $fh,\"&lt;\",\"/net/abc/$file\"))\n  {\n  while(&lt;$fh&gt;)\n    {\n    if( /Nonemu|EMULATION|INTEL_EMULATION/)\n      {\n      print $output $_;\n      }\n    }\n  close($fh);\n  }\n</code></pre>\n\n<p>Also it's not a good idea to use <code>chdir</code> like that as it firstly assumes you're in the right starting directory, but it also doesn't \"undo\" the directory change, so will fail to work on the next subdirectory.</p>\n\n<p>If you want to traverse multiple layers of subdirectories, you'll need to write a recursive sub(routine).</p>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1548460908, "creation_date": 1548460908, "answer_id": 54374382, "question_id": 54324670, "link": "https://stackoverflow.com/questions/54324670/using-egrep-in-perl-and-travel-through-the-directories/54374382#54374382", "title": "using egrep in perl and travel through the directories", "body": "<p>Since there's a perl tag here, I thought I'd give a perl answer:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse File::Find;\n\nsub file_check {\n    open my $FH, '&lt;', $_ or return;\n    while (&lt;$FH&gt;) {\n        if (/Non|nemu|EU?LATION/) {\n            print \"$File::Find::name: $_\";\n        }\n    }\n    close $FH;\n}\n\nmy $path1 = \"/nfs/pais/abh/pgm4.txt\";\nopen my $OUT, '&gt;', $path1\nor die \"$0: cannot write to $path1: $!\\n\";\n\nFile::Find::find(\\&amp;file_check &lt;/nfs/abc/*&gt;);\n</code></pre>\n\n<p>This is, admittedly, silent on change directory failures, rather than giving a fatal error with no context.  File::Find doesn't actually provide a hook to do that, or even to provide the warnings that the unix find command would give.</p>\n"}], "owner": {"reputation": 1, "user_id": 10499939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29ebb2863d167c73c08889a808d8590?s=128&d=identicon&r=PG&f=1", "display_name": "vijay", "link": "https://stackoverflow.com/users/10499939/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548460908, "creation_date": 1548237955, "last_edit_date": 1548245327, "question_id": 54324670, "link": "https://stackoverflow.com/questions/54324670/using-egrep-in-perl-and-travel-through-the-directories", "title": "using egrep in perl and travel through the directories", "body": "<p>I have a directory and inside that directory i have x sub directories and inside each sub directory i have many files and folders , here i need to grep for a specific keyword say \"XYZ\" and put the results in text file with the full path.</p>\n\n<p>How can i open each files under sub directory(i do not know the filename since i clone from git) and search for specific keyword.</p>\n\n<p>And below is the snapshot of my code \ni use egrep command , but here i am not getting the full path(the full path should be (/dir/sub/file/)</p>\n\n<p>since i am new to coding i need some input. thank you</p>\n\n<pre><code>$path1=\"/nfs/pais/abh/pgm4.txt\";\n\nforeach my $file ( glob('/nfs/abc/*') )\n\n{\n        if(-d $file){\n        chdir (\"$file\") or die \"cannot change\";\n    print(cwd); my $cmd = \"egrep -nre 'Non' *.*  \";\n    `egrep -nre 'nemu' *.* &gt;&gt; $path1` ;\n    `egrep -nre 'ELATION' *.* &gt;&gt; $path1` ;\n    `egrep -nre 'EULATION' *.* &gt;&gt; $path1` ;\n\n\n}\n</code></pre>\n"}, {"tags": ["regex", "xml", "perl", "sed"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548233038, "post_id": 54323012, "comment_id": 95464975, "body": "As you won&#39;t be able to parse broken XML to DOM and operate in DOM domain, maybe you could use <a href=\"https://metacpan.org/pod/Text::Balanced#extract_tagged\" rel=\"nofollow noreferrer\">Text::Balanced::extract_tagged()</a>?"}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548235404, "post_id": 54323012, "comment_id": 95466272, "body": "@StefanBecker Thanks for the link. Sincerly, I do need some time to understand how this works. If there is no way to get the well formed xml with regular expression I will try <code>extract_tagged()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1548237046, "post_id": 54323229, "comment_id": 95467266, "body": "I&#39;m aware that I have not well formed xmls. That&#39;s why I want to replace the xml-characters with escape strings to get well formed xmls. The xmls are created from an external company where I do not have the possibility to change the xml-exporter. Thanks for <code>XML::Lenient</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1548238039, "post_id": 54323229, "comment_id": 95467948, "body": "@giordano: <i>I do not have the possibility to change the xml-exporter</i> It&#39;s likely that somewhere there is a contract between your company and the company that is providing the &quot;not-quite-XML&quot; files. If that contract says that they will provide XML files then you have a reason to go back to them and ask them to fix the bug in their system. If they won&#39;t fix their system, then you should consider publicising the problem so other people are less likely to make the mistake of dealing with them."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548266062, "post_id": 54323229, "comment_id": 95483641, "body": "There are of course solutions that &quot;might&quot; work given the files you currently have. But there is no way to guarantee it since you cannot tell 100% what is supposed to be structure and what is supposed to be text. Only whatever is generating this would know that."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548347279, "post_id": 54323229, "comment_id": 95517846, "body": "@Grinnz I&#39;m not really convinced. If I know what is the structure I could consider it in the regexp  as I did with the example code in Perl. If there are tags in tags (the same elements in elements), for example, &lt;x&gt;&lt;x&gt;&lt;/x&gt;&lt;/x&gt; this would couse a problem (or a very ambitious regexp)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1548350098, "post_id": 54323229, "comment_id": 95519488, "body": "@giordano: And that&#39;s why your only guarantee of success is to go down the contractual route and get the bugs in your input fixed."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1548239150, "last_edit_date": 1548239150, "creation_date": 1548233321, "answer_id": 54323229, "question_id": 54323012, "link": "https://stackoverflow.com/questions/54323012/replace-reserved-characters-in-xml-with-escape-strings/54323229#54323229", "title": "Replace reserved characters in xml with escape strings", "body": "<p>If you have files that contain characters like '&lt;', '>' and '&amp;' in the text nodes, then you do not have XML files.</p>\n\n<p>In order to fix this, you would need to parse the files with an XML parser. But it's likely that most XML parsers would refuse to parse these files as they aren't well-formed XML. It's possible that something like <a href=\"https://metacpan.org/pod/XML::Lenient\" rel=\"nofollow noreferrer\">XML::Lenient</a> could be useful here.</p>\n\n<p>The correct approach is to go back to the source of these files and fix that process so that it generates well-formed XML files. If you are creating the files, then you need to fix the code that creates them. If someone is providing the files to you, then you need to go back to them and ask them to provide valid XML files.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1554767546, "creation_date": 1554767546, "answer_id": 55583308, "question_id": 54323012, "link": "https://stackoverflow.com/questions/54323012/replace-reserved-characters-in-xml-with-escape-strings/55583308#55583308", "title": "Replace reserved characters in xml with escape strings", "body": "<p>if your data in 'd', by gnu sed</p>\n\n<pre><code>sed -E 's/&amp;/&amp;amp\\;/g;s/&lt;/&amp;lt\\;/g;s/&gt;/&amp;gt\\;/g;s/\\x27/&amp;apos\\;/g;/xml ver/!s/\\\"/&amp;quot\\;/g' d\n</code></pre>\n\n<p>or \" is \\x22<br>\nif you assure it so </p>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554767546, "creation_date": 1548232505, "last_edit_date": 1548260116, "question_id": 54323012, "link": "https://stackoverflow.com/questions/54323012/replace-reserved-characters-in-xml-with-escape-strings", "title": "Replace reserved characters in xml with escape strings", "body": "<p>I have xml files which contains characters <code>&lt;</code>,<code>&gt;</code>,<code>&amp;</code>. For example:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;test&gt;\n  &lt;medi&gt;bla bla &gt;12 bla&lt;/medi&gt;\n  &lt;diag&gt;bla &amp; bla &lt;12&lt;/diag&gt;\n&lt;/test&gt;\n</code></pre>\n\n<p>These characters are reserved for xml notation and should be replaced by escaping strings <code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;amp;</code>. This holds also for quotes (\" -><code>&amp;quot;</code>) and apostrophes (' -> <code>&amp;apos;</code>).</p>\n\n<p>Here is what I like to get:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;test&gt;\n  &lt;medi&gt;bla bla &amp;gt;12 bla&lt;/medi&gt;\n  &lt;diag&gt;bla &amp;amp; bla &amp;lt;12&lt;/diag&gt;\n&lt;/test&gt;\n</code></pre>\n\n<p>Usually, I use regular expression with perl or sed. But, sincerely, I did not succeed. The difficulty is to avoid replacing xml relevant characters like <code>&lt;</code> and <code>&gt;</code> and <code>&amp;</code> of escape strings. </p>\n\n<p>To make it clear what I mean I put a solution with perl which does not work:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $input  = $ARGV[0];\nmy $output = $ARGV[1];\n\nopen INPUT,  $input or die \"Couldn't open file $input, $!\";\nopen OUTPUT, \"&gt;$output\" or die \"Couldn't open file $output, $!\";\n\nmy $rec;\n\nwhile (&lt;INPUT&gt;) {\n\n    $rec = $_;\n    print $rec;\n\n    $rec =~ s/(&lt;medi&gt;.*)&lt;(.*&lt;\\/medi&gt;)/$1&amp;lt;$2/g;    \n    $rec =~ s/(&lt;medi&gt;.*)&gt;(.*&lt;\\/medi&gt;)/$1&amp;gt;$2/g;    \n    $rec =~ s/(&lt;medi&gt;.*)&amp;(.*&lt;\\/medi&gt;)/$1&amp;amp;$2/g;\n    $rec =~ s/(&lt;medi&gt;.*)'(.*&lt;\\/medi&gt;)/$1&amp;apos;$2/g;\n    $rec =~ s/(&lt;medi&gt;.*)\"(.*&lt;\\/medi&gt;)/$1&amp;quot;$2/g;\n\n    $rec =~ s/(&lt;diag&gt;.*)&lt;(.*&lt;\\/diag&gt;)/$1&amp;lt;$2/g;    \n    $rec =~ s/(&lt;diag&gt;.*)&gt;(.*&lt;\\/diag&gt;)/$1&amp;gt;$2/g;    \n    $rec =~ s/(&lt;diag&gt;.*)&amp;(.*&lt;\\/diag&gt;)/$1&amp;amp;$2/g;\n    $rec =~ s/(&lt;diag&gt;.*)'(.*&lt;\\/diag&gt;)/$1&amp;apos;$2/g;\n    $rec =~ s/(&lt;diag&gt;.*)\"(.*&lt;\\/diag&gt;)/$1&amp;quot;$2/g;\n\n    print $rec;\n    print OUTPUT $rec;\n}\nclose INPUT;\nclose OUTPUT;\n</code></pre>\n\n<p>This gives me:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;test&gt;\n  &lt;medi&gt;bla bla &amp;amp;gt;12 bla&lt;/medi&gt;\n  &lt;diag&gt;bla &amp; bla &amp;amp;lt;12&lt;/diag&gt;\n&lt;/test&gt;\n</code></pre>\n\n<p>What happens:  </p>\n\n<ul>\n<li>The ampersand of <code>&amp;gt;</code> was replaced with <code>&amp;amp;</code> which is not intended</li>\n<li>Ampersand at <code>&lt;diag&gt; bla &amp; bla ...</code>is not replaced</li>\n</ul>\n\n<p>I'm sure there is a regexp which may solve this problem. But if there is a completely other way to make the xml well formed I am open for it.</p>\n"}, {"tags": ["perl", "perlbrew"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1548211741, "post_id": 54319235, "comment_id": 95458264, "body": "Stupid question: did you mean <code>perlbrew list</code> (in lower case)?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548217974, "post_id": 54319235, "comment_id": 95459478, "body": "What error are you getting?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548229456, "post_id": 54319235, "comment_id": 95463193, "body": "Please provide the output of <code>type perlbrew | head -n 1; printf &#39;%s\\n&#39; &quot;${PERLBREW_ROOT:-$HOME&#47;perl5&#47;perlbrew}&quot;; \\ls -l &quot;${PERLBREW_ROOT:-$HOME&#47;perl5&#47;perlbrew}&quot;&#47;perls; perlbrew list</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548236509, "post_id": 54319235, "comment_id": 95466927, "body": "There is no Perl 5.18.8 ."}, {"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1548249187, "post_id": 54319235, "comment_id": 95474092, "body": "&#39;perlbrew list&#39; command now is working fine now. Don&#39;t know why, i just simpy purge and install againg perlbrew."}, {"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1548249310, "post_id": 54319235, "comment_id": 95474165, "body": "The problem i get now, but i guess it&#39;s an off topic here is linked with threads module of installed versions of perl and forks with ubuntu 16.04 one. but i will follow with a new question on this. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1594663440, "last_edit_date": 1594663440, "creation_date": 1594646665, "answer_id": 62876822, "question_id": 54319235, "link": "https://stackoverflow.com/questions/54319235/perlbrew-doesnt-list-installed-versions-of-perl/62876822#62876822", "title": "Perlbrew doesn&#39;t list installed versions of Perl", "body": "<p>You can try:</p>\n<pre><code>perlbrew available --all | grep i\n</code></pre>\n<p>or built-in command to list perl installations</p>\n<pre><code>perlbrew list\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1594663440, "creation_date": 1548210762, "question_id": 54319235, "link": "https://stackoverflow.com/questions/54319235/perlbrew-doesnt-list-installed-versions-of-perl", "title": "Perlbrew doesn&#39;t list installed versions of Perl", "body": "<p>I've a problem with the original Perl version in Ubuntu 16.04 and i wanted to compile and install a new one.\nI've used Perlbrew to create a new Perl 5.18.2 with threads available and another one 5.18.8 for testing purposes.\nI can see the directory containing all the downloaded and compiled files in '/home/my_name/perl5/perlbrew' but i\ncannot lists the versions available with the 'Perlbrew list' command and consequently i cannot switch to any new version of Perl.</p>\n\n<p>If there's anybody out there who can help me it would be much appreciated. </p>\n\n<p>This issue is driving me crazy</p>\n"}, {"tags": ["perl", "encoding"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548415660, "post_id": 54319225, "comment_id": 95542587, "body": "If you have a new question to ask, ask it as a new Question."}], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548243134, "post_id": 54319607, "comment_id": 95470860, "body": "Thank you so much for various solutions. They works!"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548392588, "post_id": 54319607, "comment_id": 95532824, "body": "Hi, @ikegami. I updated my post. There are some more problems I found. Do you have a time to have a look?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548393509, "post_id": 54319607, "comment_id": 95533074, "body": "Re the update, you get weird results because the character in <code>$octets</code> (0x4E2D) isn&#39;t an octet; it&#39;s a Unicode Code Point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548393578, "post_id": 54319607, "comment_id": 95533087, "body": "It&#39;s not UTF-16 either. The UTF-16 encoding of <code>\u4e2d</code> would be <code>&quot;\\x4E\\x2D&quot;</code> or <code>&quot;\\x2D\\x4E&quot;</code>, not <code>&quot;\\x{4E2D}&quot;</code>"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548397673, "post_id": 54319607, "comment_id": 95534379, "body": "OK, Thanks. So when <code>use utf8</code>, $octects actually holds unicode code point. But I found when <code>print $octects</code>, what perl sent to CMD is again UTF-8 encoding string, For example, when CMD is set to cp936, <code>print $octects</code> gives <code>\u6d93?</code>, why? Why doesn&#39;t perl sent the raw code point hex byte to CMD?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548407757, "post_id": 54319607, "comment_id": 95538450, "body": "<code>print</code> to a handle to which you haven&#39;t added an :encoding layer expects octets, and will simply output those octets. If you erroneously provide a string that contains non-octects, Perl warns (&quot;wide character&quot;) and assumes you meant to encode them using UTF-8."}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548412428, "post_id": 54319607, "comment_id": 95541008, "body": "I mean, when <code>use utf8</code>, it seems that &quot;\u4e2d&quot; is stored as <code>4E2D</code>. Then I think <code>print &quot;\u4e2d&quot;</code> will sent <code>4E2D</code> to CMD. If CMD&#39;s encoding is set to cp936, then CMD should show <code>?</code> because <code>4E2D</code> doesn&#39;t corresponds to any character in cp936. But <code>print &quot;\u4e2d&quot;</code> actually output <code>\u6d93?</code>, and cp936 encoding of <code>\u6d93</code> is <code>E4B8</code>, so I infer that what print sent to CMD is actually <code>E4B8AD</code>, so why  print sent <code>E4B8AD</code> instead of <code>4E2D</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548415330, "post_id": 54319607, "comment_id": 95542414, "body": "Re &quot;<i>I infer that what print sent to CMD is actually <code>E4B8AD</code></i>&quot;, As I already said, <code>print &quot;\u4e2d&quot;</code> makes no sense without a :encoding layer on STDOUT, so Perl warn and assumes you meant <code>print encode_utf8(&quot;\u4e2d&quot;)</code>, which is just as good as anything considering you passed garbage to <code>print</code>. This outputs three bytes  with values <code>0xE4</code>, <code>0xB8</code> and <code>0xAD</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1548415756, "post_id": 54319607, "comment_id": 95542634, "body": "Re &quot;<i>Then I think <code>print &quot;\u4e2d&quot;</code> will sent <code>4E2D</code></i>&quot;, You&#39;re being extremely unclear. File handles can only transmit bytes, so what kind of byte(s) is <code>4E2D</code> suppose to describe??? /// Do you you mean a single byte with value <code>0x4E2D</code>? If that value would fit in a byte, that&#39;s exactly what Perl would do. But it doesn&#39;t, so that&#39;s impossible to do, which is why Perl has to do something special. /// Do you mean two bytes with values <code>0x4E</code> and <code>0x2D</code>? That would get displayed as <code>N-</code>, which is no better. At least encoding using UTF-8 as Perl does when receiving garbage usually does the right thing"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1548213992, "creation_date": 1548213992, "answer_id": 54319607, "question_id": 54319225, "link": "https://stackoverflow.com/questions/54319225/how-to-print-string-in-raw-byte-hex-form-in-perl/54319607#54319607", "title": "How to print string in raw byte Hex form in perl?", "body": "<pre><code>sprintf '%v02X', $octets                                    # E4.B8.AD\n\nunpack 'H*', $octets                                        # e4b8ad\n\nuc unpack 'H*', $octets                                     # E4B8AD\n\njoin ' ', map sprintf('%02X', $_), unpack 'C*', $octets     # E4 B8 AD\n\njoin ' ', map sprintf('%02X', ord($_)), split //, $octets   # E4 B8 AD\n</code></pre>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 1, "accepted_answer_id": 54319607, "answer_count": 1, "score": 0, "last_activity_date": 1548415632, "creation_date": 1548210634, "last_edit_date": 1548415632, "question_id": 54319225, "link": "https://stackoverflow.com/questions/54319225/how-to-print-string-in-raw-byte-hex-form-in-perl", "title": "How to print string in raw byte Hex form in perl?", "body": "<p>For example, I have following script</p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Encode qw(decode encode);\n\nmy $s = \"\u4e2d\";\n\nmy $octets = encode(\"UTF-8\", $s);\nsay $octets;\n$octets = encode(\"cp936\", $s);\nsay $octets;\n</code></pre>\n\n<p>it outputs in windows cmd(set in cp936) as below:</p>\n\n<pre><code>\u6d93?\n\n\u4e2d\n</code></pre>\n\n<p>But what I want to output is the raw byte in hex form, for example, like this </p>\n\n<pre><code>E4B8AD   # \u4e2d encoded in utf8\nD6D0     # \u4e2d encoded in GBK\n</code></pre>\n\n<p>Which function in perl does this raw byte output?</p>\n"}, {"tags": ["bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548192663, "post_id": 54316341, "comment_id": 95453372, "body": "Note that step 3 <i>only</i> defines a variable because of the <code>-s</code> option in step 1."}, {"owner": {"reputation": 75, "user_id": 8925822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a828a5c05e19a408e46dc7ed5551b99?s=128&d=identicon&r=PG&f=1", "display_name": "MelBourbon", "link": "https://stackoverflow.com/users/8925822/melbourbon"}, "edited": false, "score": 0, "creation_date": 1548196515, "post_id": 54316341, "comment_id": 95454703, "body": "Is there a possibility to use spaces in this variable ($1 and $prefix)?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 75, "user_id": 8925822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a828a5c05e19a408e46dc7ed5551b99?s=128&d=identicon&r=PG&f=1", "display_name": "MelBourbon", "link": "https://stackoverflow.com/users/8925822/melbourbon"}, "edited": false, "score": 0, "creation_date": 1548196642, "post_id": 54316341, "comment_id": 95454742, "body": "@MelBourbon Yes, you will probably need to send it through the shell like: <code>-prefix=&quot;$1&quot;</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548197055, "post_id": 54316341, "comment_id": 95454890, "body": "You can simply pass the variable as an <a href=\"https://perldoc.pl/variables/@ARGV\" rel=\"nofollow noreferrer\">argument</a> rather than an option, and avoid the need for any option parsing: <code>perl -ne &#39;print &quot;$ARGV[0]: $_&quot;&#39; &quot;$1&quot; | ...</code>"}], "tags": [], "owner": {"reputation": 11714, "user_id": 1072150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TRdyc.png?s=128&g=1", "display_name": "EJK", "link": "https://stackoverflow.com/users/1072150/ejk"}, "is_accepted": true, "score": 2, "last_activity_date": 1548192809, "last_edit_date": 1548192809, "creation_date": 1548190679, "answer_id": 54316341, "question_id": 54316158, "link": "https://stackoverflow.com/questions/54316158/bash-prepend-variable-from-function-to-grep-output/54316341#54316341", "title": "Bash: Prepend variable from function to grep output", "body": "<p>See below.  You can pass the shell variable (<code>$1</code>) to perl as a named variable (<code>prefix</code>) which you can then reference in your program.</p>\n\n<pre><code>#!/bin/sh\ncheck_log () {\n    if tail -5 *logfile* | grep '*term*'; then\n        tail -5 *logfile* | grep '*term*' |  perl -sne 'print \"$prefix: $_\"' -- -prefix=$1 | sendxmpp ...\n    fi\n}\ncheck_log OPERATION\n</code></pre>\n\n<p>Note that I have made 3 changes to your perl command:</p>\n\n<ol>\n<li><p>The addition of <code>s</code> as an option.  This enables processing of switches after the program content.  </p></li>\n<li><p>The double-dash <code>--</code> terminates option processing. This tells Perl that what follows on the command line is <em>not</em> a Perl option.</p></li>\n<li><p><code>-prefix=$1</code> creates a Perl variable named <code>prefix</code>, who's value is the expanded value of the first argument passed to the function by the shell (<code>$1</code>).</p></li>\n</ol>\n\n<p>Disclaimer - I am <em>not</em> a Perl expert.  There are probably other and better ways of doing this.  This is just an approach that I was able to make work.</p>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1548195315, "creation_date": 1548195315, "answer_id": 54317261, "question_id": 54316158, "link": "https://stackoverflow.com/questions/54316158/bash-prepend-variable-from-function-to-grep-output/54317261#54317261", "title": "Bash: Prepend variable from function to grep output", "body": "<p>First, I suspect your <code>if</code> should use the <code>-q</code> flag on <code>grep</code>. (If it weren't for the pipe to sendxmpp, I wouldn't bother with the if, either.)</p>\n\n<p>Second, I'm not sure about the regex you're passing in to grep, either. It seems fishy with the splats.</p>\n\n<p>Third, I expect this is better done in sed:</p>\n\n<pre><code>tail -5 *logfile* | grep '...' | sed -e 's/^/'\"$1\"': /' | sendxmpp ...\n</code></pre>\n\n<p>Note that the same quoting trick can be used with perl as well.  The double-quotes may be superfluous if you never have spaces or such in the parameter.</p>\n\n<p>(I would also classify this as a useless use of grep except that it's nice to use the same regex engine in both the <code>if</code> and the actual runtime.)</p>\n"}], "owner": {"reputation": 75, "user_id": 8925822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a828a5c05e19a408e46dc7ed5551b99?s=128&d=identicon&r=PG&f=1", "display_name": "MelBourbon", "link": "https://stackoverflow.com/users/8925822/melbourbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 54316341, "answer_count": 2, "score": 0, "last_activity_date": 1548195315, "creation_date": 1548189750, "last_edit_date": 1548191668, "question_id": 54316158, "link": "https://stackoverflow.com/questions/54316158/bash-prepend-variable-from-function-to-grep-output", "title": "Bash: Prepend variable from function to grep output", "body": "<p>All, I use the following code to search for a term in the last lines of a logfile to send the error code (line found) when found. Since the line (error code) is not showing where it was found I added the OPERATION after this is performed as text.</p>\n\n<pre><code>if tail -5 *logfile* | grep '*term*'; then\ntail -5 *logfile* | grep '*term*' |  perl -ne 'print \"OPERATION: $_\"' | sendxmpp ...\nfi\n</code></pre>\n\n<p>But how can I transform this into a function with providing the OPERATION as a variable ($1)? Becaue I use this very often in a script.</p>\n\n<pre><code>#!/bin/sh\ncheck_log () \n{\nif tail -5 *logfile* | grep '*term*'; then\ntail -5 *logfile* | grep '*term*' |  perl -ne 'print \"$1: $_\"' | sendxmpp ...\nfi\n}\ncheck_log OPERATION\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 5, "creation_date": 1548186199, "post_id": 54315125, "comment_id": 95450663, "body": "Don&#39;t use <code>-&gt;selectall_array</code> then. If you prepare and execute a statement handle, you get the information from <code>@{$sth-&gt;{NAME_lc}}</code>. Alternatively, fetch the rows as hashrefs, then you implicitly get the header information."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1548186470, "post_id": 54315125, "comment_id": 95450762, "body": "If you pass <code>{Slice =&gt; {}}</code> as the second argument to <code>selectall_array</code> or <code>selectall_arrayref</code>, it will return hashrefs instead of arrayrefs, where the keys are the column name; this would be the simplest way to get that information, but the structure would be different."}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548185804, "creation_date": 1548185103, "last_edit_date": 1548185804, "question_id": 54315125, "link": "https://stackoverflow.com/questions/54315125/getting-table-header-info-on-connection-selectall-arraycommand", "title": "Getting table header info on $connection-&gt;selectall_array($command)", "body": "<p>I am using <code>$connection-&gt;selectall_array($command)</code> to grab data from MySQL. I am curious if there is a different command where my return is the same, except the first element will be the data column's name?   </p>\n\n<p>Obviously I know them already.  But would be convenient if there was a way.</p>\n\n<p>Thanks </p>\n"}, {"tags": ["perl", "quote", "metacharacters"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548182566, "post_id": 54314568, "comment_id": 95449077, "body": "Do you want to escape <b>only</b> special characters and not whitespace?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548183072, "post_id": 54314568, "comment_id": 95449286, "body": "<code>\\Q\\E</code> which is internally just an interpolated form of the <a href=\"https://perldoc.pl/functions/quotemeta\" rel=\"nofollow noreferrer\">quotemeta</a> function escapes all ASCII characters other than <code>[A-Za-z_0-9]</code>, as documented. Notably this means whitespace will be escaped. What exactly do you want to escape?"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548183300, "post_id": 54314568, "comment_id": 95449391, "body": "I want the string (like example already provided) to be printed exactly with all backslashes or other special characters. I don&#39;t understand why \\Q\\E add those extra backslashes trying to escape space and ;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548183520, "post_id": 54314568, "comment_id": 95449480, "body": "Because that&#39;s its purpose, to escape all other than the class @Grinnz spelled out.  Since you don&#39;t want <i>all</i> that escaped then you&#39;d need to specify the exact list, of either: what you want escaped (and escape those explicitly) or of what you <i>don&#39;t</i> want escaped, so you can preserve them (see my answer)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548183575, "post_id": 54314568, "comment_id": 95449508, "body": "quotemeta is designed as a general escaping mechanism. It cannot know what characters will be &quot;special&quot; for whatever you are using it for - space characters and semicolons are both special in certain contexts (shells, SQL - though there&#39;s better options than quotemeta for either of those specifically). Hence why I asked what <i>exactly</i> you want to escape."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548183604, "post_id": 54314568, "comment_id": 95449523, "body": "zdim, did you check my question carefully? Well, I have this string &quot;use Proxy\\\\Proxy;&quot; Tell me how to display it exactly, including backslashes."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548183733, "post_id": 54314568, "comment_id": 95449583, "body": "Claude: No, you have that string in your source code. Perl parses backslashes in strings always so that two backslashes represent a single backslash in the value. If you want two backslashes, you need to write four backslashes in your source code."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548183782, "post_id": 54314568, "comment_id": 95449602, "body": "quotemeta is the wrong tool for this job, you need to construct it properly, for example like <code>my $str = &#39;use Proxy\\\\\\\\Proxy;&#39;;</code> -  you need to escape backslashes to include them in string literals in Perl, the only exception being in <a href=\"https://perldoc.pl/perlop#Single-Quotes\" rel=\"nofollow noreferrer\">single-quoted here-docs</a>, or in single-quoted strings when not followed by a single quote or another backslash."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1548184023, "post_id": 54314568, "comment_id": 95449697, "body": "@Claude  Yes, I did look at your question carefully.  The problem is that it shows only one example string; what else may you have?  Did you see my answer, and the comment above, carefully?  In order to process correctly more than just that one example you need to know what <i>exactly</i> you want unaffected.  If you merely want the string to be printed literally as is then that&#39;s a little different.  Is that what you need?"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548184092, "post_id": 54314568, "comment_id": 95449727, "body": "Strings comes exactly as they are, I don&#39;t want to modify the strings adding extra escapes with &quot;\\&quot;. I only want to have them printed exactly, I need a way to automatically escape everything in the string, without editing the string. Just think to thousands of special strings with all kind of special characters."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548184167, "post_id": 54314568, "comment_id": 95449755, "body": "If you write it in your source code like that, it is not exactly as it is, because you created a string with only one backslash. If it&#39;s coming from external input such as a filehandle, or you put it in a single-quoted here-doc as mentioned in the above comment, then it will be exactly as it appears."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548184170, "post_id": 54314568, "comment_id": 95449760, "body": "OK, got it.  The matter got confused because of your use of the word <i>escape</i> -- apparently you <i>don&#39;t want</i> to escape things but simply want a string printed literally.  The problem there is precisely the double backslash itself"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548184196, "post_id": 54314568, "comment_id": 95449768, "body": "Yes, zdim. I need a way to only print the string literally. Tha&#39;s just a sample string, I have thousands to process. \\Q\\E should do the job, but insert those extra &quot;\\&quot; and I don&#39;t want that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1548184258, "post_id": 54314568, "comment_id": 95449794, "body": "@Claude  No, the <code>\\Q\\E</code> won&#39;t do what you want; their job <i>is</i> to escape things -- what normally means <i>to add backslashes</i>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548184332, "post_id": 54314568, "comment_id": 95449820, "body": "quotemeta is inappropriate for this task because by the time it is run, the backslashes you wanted are already gone. Are your strings all written directly in the source code like your example, or are they coming from somewhere else?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548184879, "post_id": 54314568, "comment_id": 95450062, "body": "@Claude The primary purpose of <code>\\Q\\E</code> is to escape any characters that might be special to regular expressions. You seem to want some other kind of escaping scheme, so you&#39;d have to say what for, and give a <i>complete</i> list of what you consider <i>&quot;all special characters including backslash&quot;</i>. Maybe you&#39;re looking for something like <code>pp</code> from <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>? Also, it&#39;s important to note that the Perl string <code>&quot;use Proxy\\\\Proxy;&quot;</code> only contains <i>one</i> backslash."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548184906, "post_id": 54314568, "comment_id": 95450069, "body": "@Claude  To summarize it: you want your strings printed literally (so <i>not</i> &quot;escaped&quot; or &quot;quoted&quot;), which is easy -- except for the double backslash combination, as stated by multiple people above. So the key question is: how does the data -- those strings -- come to your program?"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548184934, "post_id": 54314568, "comment_id": 95450084, "body": "There is hash I must match against, but I didn&#39;t want to make the question more complicated.. Using my example, the hash key is &quot;use Proxy\\\\Proxy;&quot;. If I compare a string coming from an external text, it will not match, because, in this example, the string is interpreted as &quot;use Proxy\\Proxy;&quot;. That&#39;s why I need a way for a string to remain exactly the same."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548184997, "post_id": 54314568, "comment_id": 95450111, "body": "@Claude Again: please, how does data come into your program? From a file?"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548185034, "post_id": 54314568, "comment_id": 95450123, "body": "Yes, the problem is with that double backslash combination."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548185135, "post_id": 54314568, "comment_id": 95450169, "body": "zdim, I don&#39;t think it has any importance. I&#39;m looking to print &quot;\\use Proxy\\\\Proxy;&quot; without adding extra backslashes to the string. That&#39;s all."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548185248, "post_id": 54314568, "comment_id": 95450217, "body": "@Claude What does the hash key look like when you dump the hash with a module such as <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>? If it shows <code>&quot;use Proxy\\\\Proxy;&quot;</code>, then again, that string only contains one backslash character. If it shows <code>&quot;use Proxy\\\\\\\\Proxy;&quot;</code>, then the string does indeed contain two backslash characters. You need to do the same check on the string you&#39;re looking for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 4, "creation_date": 1548185339, "post_id": 54314568, "comment_id": 95450258, "body": "@Claude  Re &quot;<i>I don&#39;t think it has any importance</i>&quot; -- alright, good luck"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548185664, "post_id": 54314568, "comment_id": 95450421, "body": "What importance it may have? Sincerely.... Let say I have this string &quot;use Proxy\\\\Proxy;&quot; from some source and I want to print it exactly as it is. Thank you anyway for your advice. I found this <a href=\"https://stackoverflow.com/questions/42331653/how-can-i-prevent-perl-from-interpreting-double-backslash-as-single-backslash-ch\" title=\"how can i prevent perl from interpreting double backslash as single backslash ch\">stackoverflow.com/questions/42331653/&hellip;</a> I didn&#39;t thought there is no simple solution for this."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548185846, "post_id": 54314568, "comment_id": 95450505, "body": "The importance is that if you write <code>&quot;use Proxy\\\\Proxy;&quot;</code> literally in your program, you have created the string <code>use Proxy\\Proxy;</code>, because the Perl parser treats backslashes this way in quoted string literals, so this is what your string will contain; but if you read from a file the text <code>use Proxy\\\\Proxy;</code> into a string, you will have exactly that text."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548186126, "post_id": 54314568, "comment_id": 95450627, "body": "I don&#39;t know, I thought my example was very clear. I have a string, no importance where it is coming from and I want to print it exactly, without modifying the string. It looks like perl doesn&#39;t have a simple solution to am I wrong?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548186154, "post_id": 54314568, "comment_id": 95450640, "body": "@Claude The importance is that the people trying to help you are asking for more information to help you solve your issue. I suggest you take the time to read all the comments again and provide the info requested by editing your question. Also have a look at <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. BTW, the way to <i>&quot;print it exactly as it is&quot;</i> is <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\"><code>print</code></a>. Like Grinnz, I think the confusion here, and what everyone has been trying to say, might be that when you write <code>&quot;use Proxy\\\\Proxy;&quot;</code> in your Perl source, that string only has one backslash."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1548186208, "post_id": 54314568, "comment_id": 95450669, "body": "Where it comes from determines how to solve your problem, thus it is important."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1548186297, "post_id": 54314568, "comment_id": 95450704, "body": "@Claude You are wrong. The way to print a string as-is is <code>print</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1548186831, "post_id": 54314568, "comment_id": 95450926, "body": "&quot;<i>I have this sample string, containing 2 backslashes.</i>&quot; No, you don&#39;t. As explained in the comments above, you have a string that contains a single backslash. <code>print</code> only prints what&#39;s there in the string. It does no extra interpretation."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548186942, "post_id": 54314568, "comment_id": 95450968, "body": "I have updated the question."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548187127, "post_id": 54314568, "comment_id": 95451037, "body": "&quot;Please don&#39;t ask me for the source of the string, it is just a sample string.&quot; - no, the source really matters. If the source is your source code, there is basically no way around manually doubling up all the backslashes in your source code. If the string comes from elsewhere, Perl does display the string as is."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548188034, "post_id": 54314568, "comment_id": 95451440, "body": "I suppose you guys are right with the importance of the source. Thank you for helping me to understand this situation. In this case, my live script should work, because the source of strings is a file. I don&#39;t have yet a final version, so I can test correctly. After checking the other topic, it seems there isn&#39;t an easy way in perl to prevent interpreting double-backslash as a single backslash."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1548188801, "post_id": 54315844, "comment_id": 95451776, "body": "Thanks for your reply. Your advice (and others) helped me understand how things are with double backslash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548207166, "post_id": 54315844, "comment_id": 95457365, "body": "Re &quot;<i>Sorry, but you&#39;re mistaken - that string only contains one backslash</i>&quot;, Better wording: &quot;It&#39;s actually the <i>string literal</i> that has two backslashes; the <i>string</i> it produces only has one.&quot;"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 3, "last_activity_date": 1548189608, "last_edit_date": 1548189608, "creation_date": 1548188228, "answer_id": 54315844, "question_id": 54314568, "link": "https://stackoverflow.com/questions/54314568/perl-quoting-correctly-all-special-characters/54315844#54315844", "title": "Perl: quoting correctly all special characters", "body": "<blockquote>\n  <p>I have this sample string, containing 2 backslashes. ...</p>\n\n<pre><code>my $string = \"use Ppppp\\\\Ppppp;\";\n</code></pre>\n</blockquote>\n\n<p>Sorry, but you're mistaken - that string only contains one backslash*, as <code>\\\\</code> is a escape sequence in double-quoted (and single-quoted) strings that produces a single backslash. See also <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">\"Quote and Quote-like Operators\" in perlop</a>. If your string really does contain two backslashes, then you need to write <code>\"use Ppppp\\\\\\\\Ppppp;\"</code>, or use a heredoc, as in:</p>\n\n<pre><code>chomp( my $string = &lt;&lt;'ENDSTR' );\nuse Ppppp\\\\Ppppp;\nENDSTR\n</code></pre>\n\n<p>If you want the string output as valid Perl source code (using its escaping), then you can use one of several options:</p>\n\n<pre><code>my $string = \"use Ppppp\\\\Ppppp;\";\n# option 1\nuse Data::Dumper;\n$Data::Dumper::Useqq=1;\n$Data::Dumper::Terse=1;\nprint Dumper($string);\n# option 2\nuse Data::Dump;\ndd $string;\n# option 3\nuse B;\nprint B::perlstring($string);\n</code></pre>\n\n<p>Each one of these will print <code>\"use Ppppp\\\\Ppppp;\"</code>. (There are of course other modules available too. Personally I like <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>. <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> is a core module.)</p>\n\n<p>Using one of these modules is also the best way to verify what your <code>$string</code> variable <em>really</em> contains.</p>\n\n<p>If that still doesn't fit your needs: A previous edit of your question said <em>\"How can I escape correctly all special characters including backslash?\"</em> - you'd have to specify a full list of which characters you consider special. You could do something like this, for example:</p>\n\n<pre><code>use 5.014; # for s///r\nmy $string = \"use Ppppp\\\\Ppppp;\";\nprint $string=~s/(?=[\\\\])/\\\\/gr;\n</code></pre>\n\n<p>That'll print <code>$string</code> with backslashes doubled, without modifying <code>$string</code>. You can also add more characters to the regex character class to add backslashes in front of those characters as well.</p>\n\n<p>* <em>Update:</em> So I don't sound too pedantic here: of course the Perl source code contains two backslashes. But there is a difference between the literal source code and what the Perl string ends up containing, the same way that the string <code>\"Foo\\nBar\"</code> contains a newline character instead of the two literal characters <code>\\</code> and <code>n</code>.</p>\n\n<p>For the sake of completeness, as already discussed in the comments: <code>\\Q\\E</code> (aka <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a>) is primarily meant for escaping any special characters that may be special to regular expressions (all ASCII characters not matching <code>/[A-Za-z_0-9]/</code>), which is why it is also escaping the spaces and semicolon.</p>\n\n<p>Since you mention external files: If you are reading a line such as <code>use Ppppp\\\\Ppppp;</code> from an external file, then the Perl string will contain two backslashes, and if you <code>print</code> it, it will also show two backslashes. But if you wanted to represent that string as Perl source code, you have to write <code>\"use Ppppp\\\\\\\\Ppppp;\"</code> (or use one of the other methods from <a href=\"https://stackoverflow.com/q/42331653\">the question you linked to</a>).</p>\n"}], "owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "closed_date": 1548189812, "answer_count": 1, "score": -1, "last_activity_date": 1548189608, "creation_date": 1548182512, "last_edit_date": 1548186841, "question_id": 54314568, "link": "https://stackoverflow.com/questions/54314568/perl-quoting-correctly-all-special-characters", "closed_reason": "Duplicate", "title": "Perl: quoting correctly all special characters", "body": "<p>I have this sample string, containing 2 backslashes. Please don't ask me for the source of the string, it is just a sample string.</p>\n\n<pre><code>my $string = \"use Ppppp\\\\Ppppp;\";\nprint $string;\n</code></pre>\n\n<p>Both, double quotes or quotes will print</p>\n\n<pre><code>use Ppppp\\Ppppp;\n</code></pre>\n\n<p>Using</p>\n\n<pre><code>my $string = \"\\Quse Ppppp\\\\Ppppp;\\E\";\nprint $string;\n</code></pre>\n\n<p>will print </p>\n\n<pre><code>use\\ Ppppp\\\\Ppppp\\;\n</code></pre>\n\n<p>adding those extra backslashes to the output. </p>\n\n<p>Is there a simple solution in perl to display the string \"literally\", without modifying the string like adding extra backslashes to escape?</p>\n"}, {"tags": ["perl", "case-sensitive", "file-rename", "case-insensitive"], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "edited": false, "score": 0, "creation_date": 1548179539, "post_id": 54313053, "comment_id": 95447708, "body": "Thanks for the suggestion, but you seem to be already assuming that the filesystem is case-insensitive.  I can&#39;t make that assumption.  Also, readdir is seriously broken in Windows for file names that contain Unicode characters."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "edited": false, "score": 0, "creation_date": 1548181958, "post_id": 54313053, "comment_id": 95448812, "body": "I don&#39;t think I&#39;m making the former assumption, but the unicode side I wasn&#39;t aware of."}, {"owner": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "edited": false, "score": 0, "creation_date": 1548183081, "post_id": 54313053, "comment_id": 95449290, "body": "Ah.  I see now.  On case-sensitive systems when both files exist, the case-insensitive readdir search will find more than one file.  Got it.   That still leaves the Unicode headache though."}, {"owner": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "edited": false, "score": 0, "creation_date": 1548183641, "post_id": 54313053, "comment_id": 95449539, "body": "I was confused because use_readdir_to_find() must be case insensitive when searching for $input, but case sensitive for $output."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "edited": false, "score": 2, "creation_date": 1548185965, "post_id": 54313053, "comment_id": 95450556, "body": "it&#39;s using context - return all case-insensitive matches in list context, and the exact case-sensitive match (or nothing) in scalar context. Or use different functions, whatever."}, {"owner": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "edited": false, "score": 0, "creation_date": 1548246200, "post_id": 54313053, "comment_id": 95472434, "body": "Ah.  Smart.  Thanks for the idea."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 4, "last_activity_date": 1548177177, "last_edit_date": 1548177177, "creation_date": 1548176358, "answer_id": 54313053, "question_id": 54311411, "link": "https://stackoverflow.com/questions/54311411/perl-get-case-sensitive-name-of-file/54313053#54313053", "title": "Perl: Get case-sensitive name of file", "body": "<p>What I've done here in the past is to skip <code>-e</code> and go straight to <code>readdir</code>.</p>\n\n<p>On the input, you need to know how many case-insensitive matches with readdir.</p>\n\n<pre><code>if (! -e $input)\n{\n  die \"No such file: $input\";\n}\n\nmy $input_case_insensitive_matches = () = use_readdir_to_find($input);\nmy $output_is_case_match = use_readdir_to_find($output);\n\nif ($input_case_insensitive_matches &gt; 1 &amp;&amp; $output_is_case_match)\n{\n  # case sensitive filesystem, target exists, as does the input file\n  die \"$output already exists\";\n}\n\nif ($output_is_case_match)\n{\n  # case insensitive filesystem, no change required\n  warn \"$input is already $output\";\n}\nelse\n{\n  # case can be changed\n  rename $input, $output;\n}\n</code></pre>\n\n<p>Some debugging is likely required.</p>\n"}], "owner": {"reputation": 755, "user_id": 464025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc4b0a820979054155e73ff6a081b0f?s=128&d=identicon&r=PG", "display_name": "PhilHarvey", "link": "https://stackoverflow.com/users/464025/philharvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1548177177, "creation_date": 1548170582, "last_edit_date": 1548172437, "question_id": 54311411, "link": "https://stackoverflow.com/questions/54311411/perl-get-case-sensitive-name-of-file", "title": "Perl: Get case-sensitive name of file", "body": "<p>I have a Perl script that needs to work on any platform (Windows,Mac,Linux,...).  Part of its functionality is to rename files, but I don't want it to overwrite existing files.  Let's say the script is called \"my_rename\" and it takes the same arguments as the \"rename\" function, and the user executes this command:</p>\n\n<p>my_rename test.txt test.TXT</p>\n\n<p>The problem occurs if -e \"test.txt\" and -e \"test.TXT\" both return true.  Here is how I would like to handle this situation under the following conditions:</p>\n\n<p>Case 1: On a case-sensitive filesystem:</p>\n\n<ul>\n<li>abort with an error that \"test.TXT\" exists</li>\n</ul>\n\n<p>Case 2: On a case-insensitive filesytem when the actual case of the existing filename is \"test.TXT\":</p>\n\n<ul>\n<li>give a warning that the file name is unchanged</li>\n</ul>\n\n<p>Case 3: On a case-insensitive filesytem when the actual case of the existing filename is NOT \"test.TXT\":</p>\n\n<ul>\n<li>rename the file to \"test.TXT\"</li>\n</ul>\n\n<p>Since this script has to be portable, it can not rely on system dependent functions or utilities.</p>\n\n<p>Any suggestions would be appreciated.</p>\n\n<ul>\n<li>Phil</li>\n</ul>\n"}, {"tags": ["sqlite", "perl", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1548153885, "post_id": 54306439, "comment_id": 95432802, "body": "You have to <code>use DBI</code> or add <code>-MDBI</code> to your command line. That build folder is for building, not the place where it got installed. Did you also install DBD::SQLite and your OS&#39;s <code>libsqlite3-dev</code> package? If you used <code>cpan</code> to install it, you don&#39;t need a <code>use lib</code> at all. Try <code>$ perl -MDBI -e &#39;DBI-&gt;connect(&quot;dbi:SQLite:dbname=foo.sqlite&quot;);&#39;</code>."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548154214, "post_id": 54306439, "comment_id": 95433003, "body": "@simbabque  The <code>use DBI</code> calls system-wide DBI module from <code>@INC</code> list of directories, which apparently on Debian based systems is missing SQLite.  In any case, <code>use DBI</code> produces another error: <code>install_driver(SQLite) failed: Can&#39;t locate DBD&#47;SQLite.pm</code> Same occurs with <code>perl -MDBI ...</code> suggestion"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1548155945, "post_id": 54306439, "comment_id": 95434003, "body": "DBI and SQLite have nothing to do with each other. They are different modules. If you&#39;re using the system Perl however, you should use your package manager to install both DBI and SQLite. <a href=\"https://packages.debian.org/jessie/libdbi-perl\" rel=\"nofollow noreferrer\">packages.debian.org/jessie/libdbi-perl</a> and <a href=\"https://packages.debian.org/jessie/libdbd-sqlite3-perl\" rel=\"nofollow noreferrer\">packages.debian.org/jessie/libdbd-sqlite3-perl</a>."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548156236, "post_id": 54306439, "comment_id": 95434166, "body": "@simbabque Thank you for the suggestion. On my personal laptop, I can install both debian packages of course, but when I&#39;m gonna work over ssh  on different system I&#39;m not gonna have access to root level privileges and installing packages via system package manager. So hopefully it makes more sense why I&#39;m trying to deal with cpan."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1548156937, "post_id": 54306439, "comment_id": 95434514, "body": "In that case, you would want to look at Perl&#39;s local::lib module, which allows you to control what to install where. But for SQLite to work you still need the libsqlite3-dev package."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548158121, "post_id": 54306439, "comment_id": 95435106, "body": "@simbabque <code>libsqlite3-dev</code> might be already installed. I&#39;ll have to verify that later.  Thanks for the suggestion on <code>local::lib</code>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548159561, "post_id": 54306439, "comment_id": 95435889, "body": "@simbabque DBD::SQLite uses its own copy of sqlite3.c, not a system library."}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548156608, "post_id": 54307022, "comment_id": 95434341, "body": "<code>&#47;home&#47;user&#47;perl5&#47;x86_64-linux-gnu-thread-multi&#47;DBD</code> is a wrong directory and the change you observe cannot relate to this directory. Maybe ( <i>maybe</i> ) <code>&#47;home&#47;user&#47;perl5&#47;x86_64-linux-gnu-thread-multi&#47;</code> would be a correct directory."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548156965, "post_id": 54307022, "comment_id": 95434531, "body": "The problem in your original question was not caused by DBD::SQLite being missing. The problem in your original question was caused by you not having <code>use DBI</code> in your code."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548157825, "post_id": 54307022, "comment_id": 95434945, "body": "@DaveCross As I&#39;ve mentioned in the comments under the question, I tried <code>use DBI</code> as well.  The assumption was that <code>use DBI</code> calls the system-wide <code>DBI</code> module, which may have been wrong.  So, the issue was in fact <code>DBD::SQLite</code>. Before installing - errors were thrown, after installing - works as intended."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548158043, "post_id": 54307022, "comment_id": 95435060, "body": "@Corion  You might be correct, though I&#39;m pretty sure I copied the code exactly, and even added <code>@inc=()</code> to ensure that the directory works. I will try to verify that later - currently have to go off-line.   Still, thanks for the comment."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548158053, "post_id": 54307022, "comment_id": 95435063, "body": "@SergiyKolodyazhnyy: And as that comment says, when you added <code>use DBI</code>, the error changed. So adding <code>use DBI</code> fixed your original error and revealed another, different, error."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548158401, "post_id": 54307022, "comment_id": 95435257, "body": "@DaveCross   Perhaps my question is a bit unclear, as it&#39;s being misunderstood. The whole goal is to make use of  <code>DBI</code> module installed via <code>cpan</code>. Prior to installing <code>DBD::SQLite</code> neither <code>use lib</code> nor <code>use DBI</code> were giving a working solution. So the suggestion <code>use DBI</code> by itself was  not useful."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548159138, "post_id": 54307022, "comment_id": 95435631, "body": "@SergiyKolodyazhnyy: We were concentrating on the <code>use DBI</code> line because that&#39;s what solves the error mentioned in the title of your question. If your question had included something like &quot;I tried adding <code>use DBI</code> and the error changed to this...&quot; then we would have been able to give more comprehensive answers. Until we moved past the <code>use DBI</code> error, we had no way of knowing that you didn&#39;t have DBD::SQLite installed. It really pays to make your questions as clear as possible."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548159903, "post_id": 54307022, "comment_id": 95436041, "body": "@DaveCross  I completely agree on the clarity of question part. I&#39;m not exactly new to StackExchange and been on AskUbuntu and U&amp;L, so I know the clarity of the question is significant. But my experience with Perl is quite limited - I&#39;m mostly a Python and bash user - so probably that contributes to the way the question is worded."}], "tags": [], "owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1548156494, "last_edit_date": 1548156494, "creation_date": 1548155501, "answer_id": 54307022, "question_id": 54306439, "link": "https://stackoverflow.com/questions/54306439/local-perl-dbi-module-cant-locate-object-method-connect/54307022#54307022", "title": "Local Perl DBI module, Can&#39;t locate object method &quot;connect&quot;", "body": "<p>Issue with <code>perl -e</code> has been resolved, since apparently SQLite was not installed. I had to open <code>cpan</code> shell and run <code>install DBD::SQLite</code>. Now, the command-line works properly:</p>\n\n<pre><code>$ $ perl -e 'use DBI; my $db = DBI-&gt;connect( \"dbi:SQLite:dbname=foo.sqlite\",\"\",\"\" );my $stmt = qq(CREATE TABLE foo(a int, b text); ); $db-&gt;do($stmt)'\n$ sqlite3 foo.sqlite\nSQLite version 3.23.1 2018-04-10 17:39:29\nEnter \".help\" for usage hints.\nsqlite&gt; .tables\nfoo\nsqlite&gt; .schema foo\nCREATE TABLE foo(a int, b text);\nsqlite&gt; \n</code></pre>\n\n<p>As for the module itself, it has been installed in <code>~/perl5/lib/perl5/x86_64-linux-gnu-thread-multi/DBD/</code> directory.</p>\n\n<hr>\n\n<p>Based on <a href=\"https://stackoverflow.com/a/185154/3701431\">Berserk's answer</a>, the following also works for explicitly calling the :</p>\n\n<pre><code>$ perl -e 'use lib qw(  /home/user/perl5/x86_64-linux-gnu-thread-multi/DBD ); use DBI; my $db = DBI-&gt;connect( \"dbi:SQLite:dbname=foo.sqlite\",\"\",\"\" );my $stmt = qq(CREATE TABLE foo(a int, b text); ); $db-&gt;do($stmt)'\n</code></pre>\n\n<p>To ensure this uses the library declaration from <code>use lib qw()</code> explicitly, I've also cleared the <code>@inc</code> array in some of my tests.</p>\n"}, {"comments": [{"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "edited": false, "score": 0, "creation_date": 1548159086, "post_id": 54307355, "comment_id": 95435604, "body": "While I agree that it&#39;s better to use distribution&#39;s repository, I cannot use package manager on a system where I don&#39;t have <code>sudo</code> access, hence using <code>cpan</code>.  Also, in my answer I haven&#39;t just silently added <code>use DBI</code>. I&#39;ve mentioned multiple times already: prior to installing <code>DBD::SQLite</code> the statement did not work. After installation, code works as intended.  I thank you for the answer and I agree with multiple points. Perhaps my situation is a corner case, but  I&#39;ve documented my steps in the answer as is. As for the question, if you have suggestion on where it&#39;s unclear, please suggest"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1548156752, "creation_date": 1548156752, "answer_id": 54307355, "question_id": 54306439, "link": "https://stackoverflow.com/questions/54306439/local-perl-dbi-module-cant-locate-object-method-connect/54307355#54307355", "title": "Local Perl DBI module, Can&#39;t locate object method &quot;connect&quot;", "body": "<p>Converted from a command line script to an actual program, your code looks like this:</p>\n\n<pre><code>use lib qw( .cpan/build/DBI-1.642-0/ );\n\nDBI-&gt;connect(\"dbi:SQLite:dbname=foo.sqlite\",\"\",\"\");\n</code></pre>\n\n<p>And the error message you get is:</p>\n\n<blockquote>\n  <p>Can't locate object method \"connect\" via package \"DBI\" (perhaps you forgot to load \"DBI\"?) at -e line 1.</p>\n</blockquote>\n\n<p>That error is pretty clear.</p>\n\n<blockquote>\n  <p>(perhaps you forgot to load \"DBI\"?)</p>\n</blockquote>\n\n<p>The problem here is that you are missing the line of code which actually loads the DBI module. You need to add this:</p>\n\n<pre><code>use DBI;\n</code></pre>\n\n<p>Your <code>use lib qw( .cpan/build/DBI-1.642-0/ )</code> line is very strange. You're asking Perl to load the module from the temporary build directory that was used during the installation. That's not the version that you want to use at all. When <code>cpan</code> has finished its work, you will have a version of DBI installed in your standard Perl library directories that you will be able to access without the need for any <code>use lib</code> code.</p>\n\n<p>I'll also add that if you're using the system-installed version of Perl, there's no need to use <code>cpan</code> to install the most popular modules. You can use your distribution's repository of pre-built packages. For example <code>apt get install libdbi-perl</code> (on Debian and similar) or <code>dnf install perl-DBI</code> (on Red Hat).</p>\n\n<p>In your answer, you have silently added the missing <code>use DBI</code> statement and you claim that installing DBD::SQLite solved your problem. That may have solved a different problem that you had, but it didn't solve the problem in your original question.</p>\n"}], "owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1548158645, "creation_date": 1548153690, "last_edit_date": 1548158645, "question_id": 54306439, "link": "https://stackoverflow.com/questions/54306439/local-perl-dbi-module-cant-locate-object-method-connect", "title": "Local Perl DBI module, Can&#39;t locate object method &quot;connect&quot;", "body": "<p>I've installed <code>DBI</code> module via <code>cpan</code>. CPAN has been configured to use local directory, so I have <code>~/perl5</code> and <code>~/.cpan</code> directories. The module apparently is in <code>~/.cpan/build/DBI-1.642-0</code>, which in fact does have <code>DBI.pm</code> file there.</p>\n\n<p>However, when I execute the following command as a test, the command suggests there is no \"connect\" object:</p>\n\n<pre><code>$ perl -e 'use lib qw( .cpan/build/DBI-1.642-0/ ); DBI-&gt;connect(\"dbi:SQLite:dbname=foo.sqlite\",\"\",\"\");'\nCan't locate object method \"connect\" via package \"DBI\" (perhaps you forgot to load \"DBI\"?) at -e line 1.\n</code></pre>\n\n<p>Environment: Debian-based distribution, perl 5.26.2 . </p>\n\n<p>Note on possible duplicates:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/4136099/3701431\">Can&#39;t locate object method via package subclassing DBI</a> Asks about module subclassing, not what I'm doing </li>\n</ul>\n\n<hr>\n\n<p><strong>Addendum</strong>: From the discussion in the comments, it's clear that a lot of users focus on just <code>use DBI</code> statement. As I've mentioned in <a href=\"https://stackoverflow.com/questions/54306439/local-perl-dbi-module-cant-locate-object-method-connect#comment95435257_54307022\">the comments</a>:</p>\n\n<blockquote>\n  <p>The whole goal is to make use of DBI module installed via cpan. Prior to installing DBD::SQLite neither use lib nor use DBI were giving a working solution. So the suggestion use DBI by itself was not useful.</p>\n</blockquote>\n\n<p>Please note, I have tried <strong>both</strong> <code>use DBI</code> and <code>use lib qw()</code> methods prior to asking the question.  The <code>use DBI</code> line by itself was not effective without installing <code>DBD::SQLite</code>  module as mentioned in my answer.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548149995, "post_id": 54304341, "comment_id": 95430303, "body": "For one, I copy-pasted your code and I get: 1--5 refcounts, then down to 2.  On v5.16"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548150602, "post_id": 54304341, "comment_id": 95430672, "body": "Can you please <a href=\"https://stackoverflow.com/posts/54304341/edit\">edit</a> your post and add the version of Perl ( <code>perl -v</code> ) and the version of <code>Devel::Refcount</code> ( <code>perl -MDevel::Refcount -e &quot;print Devel::Refcount-&gt;VERSION</code> ), and <code>overload</code> ( <code>perl -Moverload -e &quot;print overload-&gt;VERSION&quot;</code> ) you&#39;re using? On Perl 5.14 and using <code>Devel::Peek</code>, I can&#39;t reproduce the problem. I get <code>CONCAT, REFCOUNT 1</code> in all cases as output."}, {"owner": {"reputation": 147, "user_id": 3946923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645bc57a6142252fc019de1ffcf788f4?s=128&d=identicon&r=PG", "display_name": "zdm", "link": "https://stackoverflow.com/users/3946923/zdm"}, "edited": false, "score": 0, "creation_date": 1548150640, "post_id": 54304341, "comment_id": 95430693, "body": "Yes, on perl 5.16 it adds 1 ref per iteration, on perl 5.28 - 2 refs / iteration. Very strange and unpredicted. On both perl versions refs count is increased that is not expected."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1548151273, "post_id": 54304341, "comment_id": 95431135, "body": "No repro on Perl 5.26 either. So it seems to be a rather recent change?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548151699, "post_id": 54304341, "comment_id": 95431459, "body": "Replacing the use of Devel::Refcount with `    sub _refcount_pp     {        B::svref_2object( shift )-&gt;REFCNT;     }     *refcount = \\&amp;_refcount_pp; <code>, I get the (expected) </code>CONCAT, REFCOUNT 1` (... 2, ... 3, ... 4, ... 5 ) and then 2. This doesn&#39;t look that bad to me."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548179179, "post_id": 54305802, "comment_id": 95447537, "body": "I have a hunch that this is a bug in the new <a href=\"https://perldoc.pl/perl5280delta#Performance-Enhancements\" rel=\"nofollow noreferrer\">multiconcat</a> optimization."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548229800, "post_id": 54305802, "comment_id": 95463331, "body": "@zdm, Thanks for submitting the bug report. It can be found <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=133789\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1549376693, "post_id": 54305802, "comment_id": 95874442, "body": "Now fixed in blead with commit v5.29.7-70-g4e521aaf3e"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549400850, "post_id": 54305802, "comment_id": 95887160, "body": "This means it will be fixed in 5.30, and possibly 5.28.2"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1549400898, "last_edit_date": 1549400898, "creation_date": 1548151666, "answer_id": 54305802, "question_id": 54304341, "link": "https://stackoverflow.com/questions/54304341/perl-overload-concatenation-operator-problem/54305802#54305802", "title": "perl overload concatenation operator (&quot;.&quot;) problem", "body": "<p>Just like the delayed <code>DESTROY</code> message, adding a weak ref to the object indicates a leak. The leak appears to have been introduced in Perl 5.28.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Scalar::Util qw( weaken );\n\npackage AAA {\n    use overload\n        '.' =&gt; sub { $_[0] },\n        fallback =&gt; 0;\n\n    sub new { return bless {}, $_[0] }\n\n    sub DESTROY { print \"DESTROY\\n\" }\n}\n\nmy $w;\n{\n    my $o = AAA-&gt;new;\n    weaken($w = $o);\n    my $s = '1' . ( '2' . ( '3' . ( '4' . ( '5' . $o ) ) ) );\n    print \"Exiting scope...\\n\";\n}\n\nprint \"leak!\\n\" if defined($w);\n#use Devel::Peek;\n#Dump($w);\n\nprint \"Global destruction...\\n\";\n</code></pre>\n\n<p>Output (before 5.28):</p>\n\n<pre><code>Exiting scope...\nDESTROY\nGlobal destruction...\n</code></pre>\n\n<p>Output (5.28.0 and 5.28.1):</p>\n\n<pre><code>Exiting scope...\nleak!\nGlobal destruction...\nDESTROY\n</code></pre>\n\n<p><strike>Please report using the <code>perlbug</code> command line utility.</strike><br>\n<strike>The bug report can be found <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=133789\" rel=\"nofollow noreferrer\">here</a>.</strike><br>\nIt has been fixed in 5.30. It might be fixed in 5.28.2.</p>\n"}], "owner": {"reputation": 147, "user_id": 3946923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645bc57a6142252fc019de1ffcf788f4?s=128&d=identicon&r=PG", "display_name": "zdm", "link": "https://stackoverflow.com/users/3946923/zdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 54305802, "answer_count": 1, "score": 7, "last_activity_date": 1549400898, "creation_date": 1548146737, "last_edit_date": 1548150854, "question_id": 54304341, "link": "https://stackoverflow.com/questions/54304341/perl-overload-concatenation-operator-problem", "title": "perl overload concatenation operator (&quot;.&quot;) problem", "body": "<p>Please, help me to understand, why reference count is growth on each concatenation?\nI am returning the same object in overloaded sub, and expecting, that refcount will stay untouched. But, seems, that perl cloning and storing object somewhere every time. Why and how I can avoid this?</p>\n\n<p>Also, I am expecting, that object will be destroyed just after exiting scope, but due to non-zero references count it destroyed only on global destruction phase. This is looks like a memory leak.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Devel::Refcount qw[refcount];\n\npackage AAA {\n    use Devel::Refcount qw[refcount];\n\n    use overload\n      '.' =&gt; sub {\n        print 'CONCAT, REFCOUNT: ', refcount( $_[0] ), \"\\n\";\n\n        # return AAA-&gt;new;\n        return $_[0];\n      },\n      fallback =&gt; 0;\n\n    sub new { return bless {}, $_[0] }\n\n    sub DESTROY { print \"DESTROY\\n\" }\n}\n\nprint \"--- start\\n\";\n\n{\n    my $o = AAA-&gt;new;\n\n    my $s = '1' . ( '2' . ( '3' . ( '4' . ( '5' . $o ) ) ) );\n\n    print \"--- exit scope\\n\";\n    print 'REFCOUNT: ', refcount($o), \"\\n\";\n}\n\nprint \"--- end\\n\";\n\n1;\n</code></pre>\n\n<p><strong>Tested under</strong></p>\n\n<ul>\n<li>perl 5.28.1 x64 </li>\n<li>Devel::Refcount 0.10 </li>\n<li>overload 1.30</li>\n</ul>\n\n<p><strong>Output</strong></p>\n\n<pre><code>--- start\nCONCAT, REFCOUNT: 1\nCONCAT, REFCOUNT: 3\nCONCAT, REFCOUNT: 5\nCONCAT, REFCOUNT: 7\nCONCAT, REFCOUNT: 9\n--- exit scope\nREFCOUNT: 6\n--- end\nDESTROY\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1548144883, "post_id": 54303803, "comment_id": 95427419, "body": "So if the value <code>J0115AOU3H</code> itself changes ... what determines where <code>BPL_DAT_KL</code> (etc) are to be found? There are yet other keys at the level of <code>J0115AOU3H</code> which all have the keys you want.  Do you need to first entry in <code>&#39;statements&#39;</code>&#39;s array, or all of them, or ... ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548145862, "post_id": 54303803, "comment_id": 95427928, "body": "Tip: The <code>-&gt;</code> between indexes can be omitted, so <code>$r-&gt;{foo}-&gt;{bar}</code> can be reduced to <code>$r-&gt;{foo}{bar}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10948686, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R5x6pknoJx0/AAAAAAAAAAI/AAAAAAAAAWg/6PwXAUIkjkw/photo.jpg?sz=128", "display_name": "Oleg", "link": "https://stackoverflow.com/users/10948686/oleg"}, "edited": false, "score": 0, "creation_date": 1548147466, "post_id": 54304084, "comment_id": 95428822, "body": "ikegami - Thank you so much, it works exactly as expected, super"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1548147579, "last_edit_date": 1548147579, "creation_date": 1548145648, "answer_id": 54304084, "question_id": 54303803, "link": "https://stackoverflow.com/questions/54303803/parse-json-from-perl/54304084#54304084", "title": "parse JSON from PERL", "body": "<pre><code>my $statements = $data-&gt;{StatementsResponse}{statements};\nfor my $statement (@$statements) {\n    for my $statement_id (keys(%$statement)) {\n        my $statement_data = $statement-&gt;{$statement_id};\n        say $statement_data-&gt;{BPL_SUM_E};\n    }\n}\n</code></pre>\n\n<p>If we can rely on the hashes only having one element, you have a very weird format, and the above can be simplified to the following:</p>\n\n<pre><code>my $statements = $data-&gt;{StatementsResponse}{statements};\nfor my $statement (@$statements) {\n    my ($statement_id) = keys(%$statement);\n    my $statement_data = $statement-&gt;{$statement_id};\n    say $statement_data-&gt;{BPL_SUM_E};\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10948686, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R5x6pknoJx0/AAAAAAAAAAI/AAAAAAAAAWg/6PwXAUIkjkw/photo.jpg?sz=128", "display_name": "Oleg", "link": "https://stackoverflow.com/users/10948686/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548147579, "creation_date": 1548144610, "last_edit_date": 1548145488, "question_id": 54303803, "link": "https://stackoverflow.com/questions/54303803/parse-json-from-perl", "title": "parse JSON from PERL", "body": "<p>I get a response from the server in json format. I decompose it using Data::Dumper, giving</p>\n\n<pre><code>$VAR1 = {\n  'StatementsResponse' =&gt; {\n    'ResponceRef' =&gt; '',\n    'statements' =&gt; [\n      {\n        'J0115AOU3H' =&gt; {\n          'BPL_DAT_KL' =&gt; '10.01.2019',\n          'AUT_MY' =&gt; '10'\n        }\n      },\n      {\n        'J0115A47J7' =&gt; {\n          'AUT_MY' =&gt; '11',\n          'BPL_DAT_KL' =&gt; '11.01.2019'\n        }\n      },\n      {\n        'J0115AVR8L' =&gt; {\n          'BPL_DAT_KL' =&gt; '12.01.2019',\n          'AUT_MY' =&gt; '12'\n        }\n      },\n      {\n        'J0115AVBGS' =&gt; {\n          'AUT_MY' =&gt; '13',\n          'BPL_DAT_KL' =&gt; '13.01.2019'\n        }\n      }\n    ]\n  }\n};\n</code></pre>\n\n<p>How do I get the values \u200b\u200b<code>BPL_DAT_KL</code> and <code>AUT_MY</code>, provided that <code>J0115AOU3H</code> is a dynamic value that changes constantly and is not known at the time of the output?\nIf I know the value, then I can get the values \u200b\u200bwith the code below, but what if I don\u2019t know it?</p>\n\n<pre><code>use JSON;\nuse JSON::XS;\nmy $json = `cat /home/json.log`;\nmy $data=decode_json($json);\n\nuse Data::Dumper;\nprint Dumper($data);\n\nmy $aref = $data-&gt;{'StatementsResponse'}-&gt;{'statements'};\nfor my $element (@$aref) {\n    print $element-&gt;{J0115AOU3H}-&gt;{BPL_SUM_E};\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548117489, "post_id": 54298328, "comment_id": 95419728, "body": "<code>my $date_up1 = $tempdate-&gt;add(days =&gt; 1);</code> is the same as <code>$tempdate-&gt;add(days =&gt; 1); my $date_up1 = $tempdate;</code>, so it&#39;s a bit weird"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548118222, "post_id": 54298328, "comment_id": 95419890, "body": "Perhaps the OP didn&#39;t know that DateTime math mutates the object; to get non-mutable behavior (which tends to be preferred in more complex operations, and is done excellently by <a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow noreferrer\">Time::Moment</a>) you must <code>-&gt;clone</code> the object before any math operation or <code>-&gt;set</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548142178, "post_id": 54298328, "comment_id": 95426205, "body": "@Grinnz, Re &quot;<i>Perhaps the OP didn&#39;t know that DateTime math mutates the object</i>&quot;, Which is why I told them... /// Re &quot;<i>[A non-mutable object] tends to be preferred in more complex operations</i>&quot;, Quite the opposite. Non-mutable objects are more expensive and more complex. As such, they are only used for simple values."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548177948, "post_id": 54298328, "comment_id": 95446981, "body": "@ikegami It&#39;s of course an opinionated discussion that probably does not belong here, but (unknown to the user) mutable objects <a href=\"https://rjbs.manxome.org/rubric/entry/1929\" rel=\"nofollow noreferrer\">have been known to lead to serious bugs</a>. <a href=\"https://shadow.cat/blog/matt-s-trout/do-you-copy/\" rel=\"nofollow noreferrer\">another point of view</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548178667, "post_id": 54298328, "comment_id": 95447324, "body": "Time::Moment&#39;s API as I mentioned is a great example of how a non-mutable API can be predictable and straightforward, IMO. You are correct that it is by necessity more expensive; though Time::Moment is much simpler and more efficient than DateTime to begin with, due to not having any time-zone or locale features beyond localtime."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548200474, "post_id": 54298328, "comment_id": 95455865, "body": "@Grinnz, I definitely agree that mutable objects are more error-prone to use. All I said it&#39;s that hey&#39;re just harder to get right for more complex values, and definitely far more expensive. Date-time values are actually quite simple (they can possibly  be reduced to an epoch ts plus tz info), so a immutable dt class would be possible without much difficulty"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548177863, "post_id": 54298359, "comment_id": 95446941, "body": "@ikegami I&#39;ve edited the answer, thanks for letting me know."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1548177849, "last_edit_date": 1548177849, "creation_date": 1548108109, "answer_id": 54298359, "question_id": 54298328, "link": "https://stackoverflow.com/questions/54298328/datetime-strptime-returning-wrong-pattern/54298359#54298359", "title": "datetime strptime returning wrong pattern", "body": "<p>strptime and thus DateTime::Format::Strptime by default only dictates how you parse the input into a DateTime object. DateTime objects default to a specific stringification, which you are seeing. In order to stringify it in a certain way, you can use its <a href=\"https://metacpan.org/pod/DateTime#$dt-%3Estrftime(-$format,-...-)\" rel=\"nofollow noreferrer\">strftime</a> method.</p>\n\n<pre><code>print $date_up1-&gt;strftime('%Y%m%d');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1548202418, "last_edit_date": 1548202418, "creation_date": 1548116972, "answer_id": 54299656, "question_id": 54298328, "link": "https://stackoverflow.com/questions/54298328/datetime-strptime-returning-wrong-pattern/54299656#54299656", "title": "datetime strptime returning wrong pattern", "body": "<p>While DateTime::Format::Strptime can be used to both parse and format date times, it doesn't set itself as the default formatter for the DateTime objects it creates as you expect. You can do that explicitly by adding the following:</p>\n\n<pre><code>$tempdate-&gt;set_formatter($parseit);\n</code></pre>\n\n<p>After cleaning up your code, it looks like this:</p>\n\n<pre><code>my $date = \"20190115\";\n\nmy $format = DateTime::Format::Strptime-&gt;new(\n   pattern  =&gt; '%Y%m%d',\n   on_error =&gt; 'croak',\n);\n\nmy $dt = $format-&gt;parse_datetime($date);\n$dt-&gt;set_formatter($format);\n$dt-&gt;add( days =&gt; 1 );\nsay $dt;\n</code></pre>\n\n<p>Alternatively, all of the following work without setting the formatter:</p>\n\n<ul>\n<li><code>$format-&gt;format_datetime($dt)</code></li>\n<li><code>$dt-&gt;strftime(\"%Y%m%d\")</code> (Most flexible, but introduces duplicate code in this case)</li>\n<li><code>$dt-&gt;ymd(\"\")</code> (Simplest in this case)</li>\n</ul>\n"}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1548202418, "creation_date": 1548107929, "question_id": 54298328, "link": "https://stackoverflow.com/questions/54298328/datetime-strptime-returning-wrong-pattern", "title": "datetime strptime returning wrong pattern", "body": "<p>I pull a date from a file and I'm creating a datetime object by using this command and then adding 1 to it to get the next date.</p>\n\n<pre><code>my $parseit = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%Y%m%d');\nmy $lastdate = \"20190115\";\nmy $tempdate = $parseit-&gt;parse_datetime($lastdate);\nmy $date_up1 = $tempdate-&gt;add(days =&gt; 1);\n</code></pre>\n\n<p>but in printing out the variable $date_up1 I always get it in the form %Y-%m-%d.  How can I just get it returned in the pattern that I selected.</p>\n"}, {"tags": ["mysql", "windows", "dbi", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548099256, "post_id": 54296290, "comment_id": 95413670, "body": "It raises the exception, but you catch it and throw it away, by using <code>eval { ... }</code>. Aaah, that&#39;s actually what you want to do. Does the error appear when you remove the <code>eval { ... }</code>? Then maybe try <code>my $run_ok = eval { $dbh-&gt;do(&quot;DROP TABLE foo&quot;);1 }; my $err = $@; if( ! $run_ok ) { warn &quot;&lt;&lt;$err&gt;&gt;&quot; }</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548103378, "post_id": 54296290, "comment_id": 95415369, "body": "I&#39;m not sure if it&#39;s the issue, but don&#39;t test <code>$@</code> to see if an exception occurred, make the eval return a true value and test its return value. See <a href=\"https://mvp.kablamo.org/essentials/die-eval/\" rel=\"nofollow noreferrer\">mvp.kablamo.org/essentials/die-eval</a> or try the more intuitive try/catch syntax <a href=\"https://mvp.kablamo.org/essentials/try-catch/\" rel=\"nofollow noreferrer\">mvp.kablamo.org/essentials/try-catch</a>"}], "answers": [{"tags": [], "owner": {"reputation": 485, "user_id": 4108542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Qflfs.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4108542/artem"}, "is_accepted": false, "score": 0, "last_activity_date": 1548104990, "creation_date": 1548104990, "answer_id": 54297819, "question_id": 54296290, "link": "https://stackoverflow.com/questions/54296290/perl-dbi-module-do-not-raise-exception/54297819#54297819", "title": "Perl DBI module do not raise exception", "body": "<p>Updating DBD::mysql to the latest version has helped me.</p>\n"}], "owner": {"reputation": 485, "user_id": 4108542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Qflfs.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4108542/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548104990, "creation_date": 1548097166, "question_id": 54296290, "link": "https://stackoverflow.com/questions/54296290/perl-dbi-module-do-not-raise-exception", "title": "Perl DBI module do not raise exception", "body": "<p>I try to run some statement, which will fail, in <code>do()</code> method with DBI <code>RaiseError</code> flag is ON, but it doesn`t raise an exception.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DBI;\n\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:database=test;host=192.168.10.101\",\n                        \"test\", \"123456\", {'RaiseError' =&gt; 1});\n\neval { $dbh-&gt;do(\"DROP TABLE foo\") }; # foo table not exist\nif ($@) {\n    print \"Dropping foo failed: $@\\n\";\n} else {\n    print \"ok\\n\";\n}\n</code></pre>\n\n<p>This code return <code>ok</code> instead error.</p>\n\n<p>I have this problem only on Windows 7 machine. (When I run this code on Linux exception is raised.) Is it a bug?</p>\n\n<p>Perl version: 5.16.3,\nDBI version: 1.623,\nDBD::mysql version: 4.022</p>\n"}, {"tags": ["function", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548095376, "post_id": 54295793, "comment_id": 95412114, "body": "Read <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a> if you&#39;re not familiar with using references."}], "answers": [{"tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1548095356, "creation_date": 1548095356, "answer_id": 54295876, "question_id": 54295793, "link": "https://stackoverflow.com/questions/54295793/perl-how-to-pass-a-string-and-2-hash-in-a-function/54295876#54295876", "title": "perl: How to pass a string and 2 hash in a function?", "body": "<p>You don't need to, just use references. Anywhere you'd write with hash <code>$altid_go{hash_key}</code> use <code>$altid_go-&gt;{hash_key}</code> with reference inside your function.</p>\n\n<p>You can alias to \"real\" hash with <a href=\"https://metacpan.org/pod/Data::Alias\" rel=\"nofollow noreferrer\"><code>Data::Alias</code></a> and built-in method linked from there, but considering level of your question you shouldn't go there at the moment.</p>\n"}], "owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54295876, "answer_count": 1, "score": 1, "last_activity_date": 1548095356, "creation_date": 1548095002, "question_id": 54295793, "link": "https://stackoverflow.com/questions/54295793/perl-how-to-pass-a-string-and-2-hash-in-a-function", "title": "perl: How to pass a string and 2 hash in a function?", "body": "<p>here is my function, I have tried this but how can I transform back altid_go and obs_go into hash ??</p>\n\n<pre><code>go_formatting($gene_description[$idx], \\%altid_go, \\%obs_go);\n\nsub go_formatting {\n\n my $go_description = shift;\n    my $altid_go = shift;\n    my $obs_go = shift;\n}\n</code></pre>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["regex", "macos", "perl", "terminal"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10945987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af73d9e48e4c1f7e75a9c02cbd1c1aa4?s=128&d=identicon&r=PG&f=1", "display_name": "somanyquestions", "link": "https://stackoverflow.com/users/10945987/somanyquestions"}, "edited": false, "score": 1, "creation_date": 1548091372, "post_id": 54294565, "comment_id": 95410350, "body": "Thanks Dean! Beginner&#39;s mistake I guess :/ after that I got &quot;env: bash\\r: No such file or directory&quot; but could get rid of it easily with sed $&#39;s/\\r$//&#39;  now it&#39;s running smoothly, while I am trying to finding out how I ended up with \\r... Thanks again for the fast help!"}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1548160123, "post_id": 54294565, "comment_id": 95436158, "body": "There is no reason it shouldn&#39;t work, as you say sed is a better bet here. You need to set the bash shell #!/usr/bin/bash or equivalent"}], "tags": [], "owner": {"reputation": 166, "user_id": 6793936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v54zF.jpg?s=128&g=1", "display_name": "Dean C Wills", "link": "https://stackoverflow.com/users/6793936/dean-c-wills"}, "is_accepted": false, "score": 2, "last_activity_date": 1548089820, "creation_date": 1548089820, "answer_id": 54294565, "question_id": 54294477, "link": "https://stackoverflow.com/questions/54294477/how-to-run-list-of-perl-regex-from-file-in-terminal/54294565#54294565", "title": "How to run list of perl regex from file in terminal", "body": "<p>It's likely if you got no such file or directory, your problem was you forgot to make <code>unicode.sh</code> executable, as in <code>chmod +x unicode.sh</code>, assuming that's a script that you wrote.</p>\n\n<p>Of course the normal way to run multiple perl commands is this thing that looks like <code>runme.pl</code> which you write, i.e., a perl script.</p>\n\n<p>That said, yes, everything will work from the terminal, you just need to be careful about escaping that <code>bash</code> performs.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10945987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af73d9e48e4c1f7e75a9c02cbd1c1aa4?s=128&d=identicon&r=PG&f=1", "display_name": "somanyquestions", "link": "https://stackoverflow.com/users/10945987/somanyquestions"}, "edited": false, "score": 0, "creation_date": 1548239450, "post_id": 54295023, "comment_id": 95468796, "body": "Thank you. I have huge text files (all in all about 20 GB) that contain symbols as well as some emojis. I am now replacing those symbols and emojis (about 2000) with a number e.g. \ud83d\ude00would be 1F600 I have a table for those replacements but find it rather hard to find a quick and easy way, that&#39;s how I came up with the regex - easy but very slow..."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 41, "user_id": 10945987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af73d9e48e4c1f7e75a9c02cbd1c1aa4?s=128&d=identicon&r=PG&f=1", "display_name": "somanyquestions", "link": "https://stackoverflow.com/users/10945987/somanyquestions"}, "edited": false, "score": 0, "creation_date": 1548254812, "post_id": 54295023, "comment_id": 95477583, "body": "@somanyquestions Well, you could share your code (a representative <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> with sample input and output) and you might get some tips on optimization. Note that if you&#39;re just replacing Unicode characters with their codes, and you&#39;ve opened the files with the correct encoding layer, then you don&#39;t need a table, for example: <code>s&#47;(\\P{ASCII})&#47;sprintf(&quot;%02X&quot;,ord $1)&#47;eg</code> (but if this is XML, then I&#39;d still be very careful with this, as I mentioned in the answer)."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 3, "last_activity_date": 1548091677, "creation_date": 1548091677, "answer_id": 54295023, "question_id": 54294477, "link": "https://stackoverflow.com/questions/54294477/how-to-run-list-of-perl-regex-from-file-in-terminal/54295023#54295023", "title": "How to run list of perl regex from file in terminal", "body": "<p>Here's a (mostly) equivalent Perl script to the oneliner <code>perl -p -i -e 's/\\n\\n/\\n/g' *.xml</code> (one main difference being that this has <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\"><code>strict</code></a> and <a href=\"http://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\"><code>warnings</code></a> enabled, which is strongly recommended), which you could expand upon by putting more code to modify the current line in the body of the <code>while</code> loop.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\n\nif (!@ARGV) {               # if no files on command line\n    @ARGV = glob('*.xml');  # get a default list of files\n}\nlocal $^I = '';             # enable inplace editing (like perl -i)\nwhile (&lt;&gt;) {                # read each line of each file into $_\n    s/\\n\\n/\\n/g;            # modify $_ with a regex\n    # more regexes here...\n    print;                  # write the line $_ back out\n}\n</code></pre>\n\n<p>You can save this script in a file such as <code>process.pl</code>, and then run it with <code>perl process.pl</code>, or do <code>chmod u+x process.pl</code> and then run it via <code>./process.pl</code>.</p>\n\n<p>On the other hand, you really <a href=\"https://stackoverflow.com/a/1732454\">shouldn't modify XML files with regular expressions</a>, there are lots of Perl modules to do XML processing - I wrote about that some more <a href=\"https://www.perlmonks.org/?node_id=1201438\" rel=\"nofollow noreferrer\">here</a>. Also, in the example you showed, <code>s/\\n\\n/\\n/g</code> actually won't have any effect, since when reading files line-by-line, no string will contain two <code>\\n</code>'s (you can change how Perl reads files, but I don't see any mention of that in the question).</p>\n\n<p><em>Edit:</em> You've named the script in your example <code>unicode.sh</code> - if you're processing Unicode files, then Perl has very powerful features to help with that, although the code won't necessarily end up as nice and short as I've showed above. You'll have to tell us some more about what you're doing, and show some example input and output, to get suggestions about that. See also e.g. <a href=\"http://perldoc.perl.org/perlunitut.html\" rel=\"nofollow noreferrer\"><code>perlunitut</code></a>.</p>\n"}], "owner": {"reputation": 41, "user_id": 10945987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af73d9e48e4c1f7e75a9c02cbd1c1aa4?s=128&d=identicon&r=PG&f=1", "display_name": "somanyquestions", "link": "https://stackoverflow.com/users/10945987/somanyquestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1548091677, "creation_date": 1548089543, "last_edit_date": 1548091185, "question_id": 54294477, "link": "https://stackoverflow.com/questions/54294477/how-to-run-list-of-perl-regex-from-file-in-terminal", "title": "How to run list of perl regex from file in terminal", "body": "<p>I'm fairly new to the whole coding game, and am very grateful for every answer!</p>\n\n<p>I am working on a directory with many <code>.txt</code> files in them and have a file with looong list of regex like <code>\"perl -p -i -e 's/\\n\\n/\\n/g' *.xml\"</code> they all work if I copy them to terminal. But is there a possibility to run them straight from the file? \nI tried <code>./unicode.sh</code> but that resulted in: </p>\n\n<blockquote>\n  <p>No such file or directory.</p>\n</blockquote>\n\n<p>Any ideas?</p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548083440, "post_id": 54292485, "comment_id": 95406047, "body": "@Corion I saw that removing it solves the problem. But do you have an explanation why it behaves like this?"}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 6, "last_activity_date": 1548084121, "creation_date": 1548084121, "answer_id": 54292965, "question_id": 54292485, "link": "https://stackoverflow.com/questions/54292485/module-gets-locked-if-it-contains-data/54292965#54292965", "title": "Module gets locked if it contains __DATA__", "body": "<p>It's not <code>notepad.exe</code> but Perl that keeps a <code>*DATA</code> filehandle open. You have to either remove the <code>__DATA__</code> section or explicitly <code>close *core::test::DATA</code> if you don't want it kept open/locked.</p>\n\n<p>Perl holds the file open when reading/compiling it as soon as it encounters the <a href=\"https://perldoc.perl.org/perldata.html#Special-Literals\" rel=\"noreferrer\"><code>__DATA__</code></a> section. See the section on <code>__DATA__</code> in perldata, where this behaviour is described.</p>\n\n<p>The approach of closing the filehandle is documented there as well.</p>\n"}], "owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54292965, "answer_count": 1, "score": 2, "last_activity_date": 1548084121, "creation_date": 1548082345, "question_id": 54292485, "link": "https://stackoverflow.com/questions/54292485/module-gets-locked-if-it-contains-data", "title": "Module gets locked if it contains __DATA__", "body": "<p>I have a main module which imports other modules and launches an application, then it exits. While the application is opened, it locks one of the imported modules which contains <code>__DATA__</code> at the end.</p>\n\n<p><strong>main.pm</strong></p>\n\n<pre><code>use core::test;\nsystem(\"start notepad\");\n</code></pre>\n\n<p><strong>core/test.pm</strong></p>\n\n<pre><code>package core::test;\n\n1;\n__DATA__\ndummy\n</code></pre>\n\n<p>If I remove the <code>__DATA__</code> section, the module is no longer locked by the opened notepad process.</p>\n\n<p>I'm using <code>ActivePerl 5163</code>.</p>\n\n<p>Why is it happening and how could I fix this behaviour to don't have locked modules?</p>\n"}, {"tags": ["perl", "bioinformatics"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1548067050, "post_id": 54285931, "comment_id": 95396957, "body": "What are the values in <code>@ARGV</code> when you run your program? I&#39;m guessing they&#39;re &quot;22&quot; and &quot;bowtie.out&quot;, but I&#39;d rather not waste my time guessing. Also, is the result you show the actual result or the result you want to get? It&#39;s really helpful if you show us both and describe in detail what the difference is."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548076293, "post_id": 54285931, "comment_id": 95402006, "body": "@DaveCross Argv is the maximum length of sequence. If the sequence is longer than argv, I  want to skip those rows. If you run the code, you will get everything but the position_ref columns. So I want to have position_ref column as well in my results (I want result just like what I have in the question)."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548077798, "post_id": 54285931, "comment_id": 95402860, "body": "You will need to restructure your program logic a bit. Currently the program keeps all data in the <code>@mray</code> array. You will need to add another column to store <code>$position_ref</code> in that array as well. Then you can output that value as well. Maybe consider using <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> for columnar input and output."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548078097, "post_id": 54285931, "comment_id": 95403018, "body": "@Corion I would really appreciate if you could help with the code. I am an R person but find it difficult to work around in R.  I am  obviously struggling with perl even more."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548079454, "post_id": 54285931, "comment_id": 95403734, "body": "You will have to look elsewhere for somebody to do your programming work. This site is about answering concrete questions, not a code writing service."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548079529, "post_id": 54285931, "comment_id": 95403777, "body": "@MAPK: That doesn&#39;t really answer my question. You use two values from <code>@ARGV</code> - <code>$ARGV[0]</code> and <code>$ARGV[1]</code>. So saying &quot;Argv is the maximum length of sequence&quot; isn&#39;t really helpful. I suggest you <a href=\"https://stackoverflow.com/posts/54285931/edit\">edit your question</a> to add a) definitions of the contents of <code>@ARGV</code> and b) details of the output you&#39;re expecting and exactly how that differs from what you&#39;re getting. Remember, the people who want to help you probably know very little about Bioinformatics. What is obvious to you probably isn&#39;t obvious to them."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548080676, "post_id": 54285931, "comment_id": 95404463, "body": "@DaveCross ARGV[0] is the bowtie.out file (input file) and ARGV[1] is the maximum sequence length. Please see my updated question. Thank you!"}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1548625144, "post_id": 54285931, "comment_id": 95597915, "body": "My advice is to import into R as a tab-limited CSV and read it into a data frame. This is your natural forte. The code is pretty clunky, there are arrays where hashes are better and complex arrays where simple loops would be preferable, eg. my @array = qw(A G C T); then loop the combinations excluding identical nucleotides"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1548089959, "post_id": 54294334, "comment_id": 95409656, "body": "@MAPK: So what you are saying is that the first two columns in your input file should be combined as one. Ok. Is that first whitespace column a space character or a tab?"}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1548090142, "post_id": 54294334, "comment_id": 95409751, "body": "That should be whitespace. Yes those two should be combined as one."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1548090336, "post_id": 54294334, "comment_id": 95409859, "body": "&quot;Whitespace&quot; is not a precise term to use. Both spaces and tabs are whitespace. Is it a space or is it a tab? Note: I&#39;m not asking what it should be, I&#39;m asking what it actually is in your copy of the input file."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1548090589, "post_id": 54294334, "comment_id": 95409990, "body": "In my file, it is space and actual columns are separated by tab."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1548111059, "last_edit_date": 1548111059, "creation_date": 1548088987, "answer_id": 54294334, "question_id": 54285931, "link": "https://stackoverflow.com/questions/54285931/extracting-base-change-using-perl-script/54294334#54294334", "title": "Extracting base change using perl script", "body": "<p>Your code splits your input data on tab characters. But your sample file doesn't contain tab characters (because tabs are lost when you copy and paste to a web page). I tried converting all runs of whitespace to tabs, and now I think there's a mismatch between the input data and the variables that you split it into.</p>\n\n<p>For example, the first line of data looks like this:</p>\n\n<pre><code>K00363:128:HV3CJBBXX:3:1101:9668:1894 1:N:0:TAATCG  -   reverseKF898354_1_14561 12006   TCACCAGGAAGATAAAACACGA  JJJJJJJJJJJJJJJJJFFFAA  0   12:T&gt;A\n</code></pre>\n\n<p>If we assume that all the whitespace is actually a tab, then we end up with the following variables:</p>\n\n<ul>\n<li><code>$sread</code>: K00363:128:HV3CJBBXX:3:1101:9668:1894 1:N:0:TAATCG</li>\n<li><code>$strand</code>: -</li>\n<li><code>$name</code>: reverseKF898354_1_14561</li>\n<li><code>$position</code>: 12006</li>\n<li><code>$sequence</code>: TCACCAGGAAGATAAAACACGA</li>\n<li><code>$quality</code>: JJJJJJJJJJJJJJJJJFFFAA </li>\n<li><code>$d2</code>: 0  </li>\n<li><code>$d3</code>: 12:T>A</li>\n</ul>\n\n<p>I think that's wrong. I think a lot of this is one column out. I suspect the problem is the third column - the one that contains <code>+</code> or <code>-</code>. Either it's not supposed to be a separate column, or it needs its own variable.</p>\n\n<p>If I add a new variable to the <code>split()</code> call to store the <code>+</code>/<code>-</code>, then your code actually does something. But it's still not the output that you say you're expecting and I don't know enough about your data to work out what the next step is.</p>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 6800695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b195e3798160130a2db7f800cca4887?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Testori", "link": "https://stackoverflow.com/users/6800695/alessandro-testori"}, "is_accepted": false, "score": 0, "last_activity_date": 1548173211, "last_edit_date": 1548173211, "creation_date": 1548116387, "answer_id": 54299587, "question_id": 54285931, "link": "https://stackoverflow.com/questions/54285931/extracting-base-change-using-perl-script/54299587#54299587", "title": "Extracting base change using perl script", "body": "<p>If I understand correctly from your desired output, you need the reference position rather than the count of a particular base change: try substituting in your script \"++\" in hashes with \"$position_ref\" as follows:</p>\n\n<pre><code># usage ./script.pl bowtie.out 22 \n\nmy $sread = \"ACGT-read\";\nmy $strand =\"-\";\nmy $name = \"bill\";\nmy $position = 1;\nmy $sequence = \"ACGT\";\nmy $quality = \"good\";\nmy $d2 = \"d2\";\nmy $d3 = \"d3\";\nmy $class= $ARGV[1];\nmy @mray;\nmy @lines;\nmy $min = 10;\n\nfor (my $i=0; $i &lt; $class; $i++) {\n    $mray[$i][0]=0;\n    $mray[$i][1]=0;\n    $mray[$i][2]=0;\n    $mray[$i][3]=0;\n    $mray[$i][4]=0;\n    $mray[$i][5]=0;\n    $mray[$i][6]=0;\n    $mray[$i][7]=0;\n    $mray[$i][8]=0;\n    $mray[$i][9]=0;\n    $mray[$i][10]=0;\n    $mray[$i][11]=0;\n}\n\nopen (INFILE, \"&lt;$ARGV[0]\") || die \"couldn't open the 1 infile!\";\n\nwhile ($rln = &lt;INFILE&gt;){\n    chomp $rln;\n    ($sread, $strand, $name, $position, $sequence, $quality, $d2,$d3) = split(\"\\t\",$rln);\n#   print \"what is d3 \\n $d3\\n\";\n    $seq_len = length ($sequence);\n    if ($seq_len == $class &amp;&amp; $d3){\n        $position_ref = $position; \n# This is where I need help. I want to paste these values (from $position_ref) to the corresponding columns as shown in the result below.\n        print \"what is position_ref \\n $position_ref\\n\";\n#   print \"what is d3 \\n $d3\\n\";\n       ($position, $d2) = split(\":\",$d3);\n#   print \"what is d2 \\n $d2\\n\";\n       $var = substr $d2, -1;\n       $var2 = substr $d2, 0;\n\n       if ($var2 eq \"A&gt;T\" ) { $mray[$position][0]=$position_ref}\n       if ($var2 eq \"A&gt;G\" ) { $mray[$position][1]=$position_ref }\n       if ($var2 eq \"A&gt;C\" ) { $mray[$position][2]=$position_ref }\n       if ($var2 eq \"C&gt;T\" ) { $mray[$position][3]=$position_ref }\n       if ($var2 eq \"C&gt;G\" ) { $mray[$position][4]=$position_ref }\n       if ($var2 eq \"C&gt;A\" ) { $mray[$position][5]=$position_ref }\n       if ($var2 eq \"G&gt;T\" ) { $mray[$position][6]=$position_ref }\n       if ($var2 eq \"G&gt;A\" ) { $mray[$position][7]=$position_ref }\n       if ($var2 eq \"G&gt;C\" ) { $mray[$position][8]=$position_ref }\n       if ($var2 eq \"T&gt;A\" ) { $mray[$position][9]=$position_ref }\n       if ($var2 eq \"T&gt;G\" ) { $mray[$position][10]=$position_ref }\n       if ($var2 eq \"T&gt;C\" ) { $mray[$position][11]=$position_ref}\n\n\n#   print \"what is mray \\n $mray[$position][3]\\n\";\n       if ($position == ($class-1)) {\n           $read = substr $sequence, 0, $class-1;\n           push (@lines, $read);\n#   print \"what is read \\n $read\\n\";\n#   print \"what is position \\n $position\\n\";\n       }\n    }\n}\nclose (INFILE);\nprint \"Pos\\tA&gt;T\\tA&gt;G\\tA&gt;C\\tC&gt;T\\tC&gt;G\\tC&gt;A\\tG&gt;T\\tG&gt;A\\tG&gt;C\\tT&gt;A\\tT&gt;G\\tT&gt;C\\n\";\nfor (my $i=0; $i &lt; $class; $i++) {\n    $pnum = $i + 1;\n    print \"$pnum\\t$mray[$i][0]\\t$mray[$i][1]\\t$mray[$i][2]\\t$mray[$i][3]\\t$mray[$i][4]\\t$mray[$i][5]\\t$mray[$i][6]\\t$mray[$i][7]\\t$mray[$i][8]\\t$mray[$i][9]\\t$mray[$i][10]\\t$mray[$i][11]\\n\";\n}\n\n@lines = sort(@lines); # sort the list\n$count = 0;\nforeach my $line(@lines) # loop thru list\n {\n    if ($line eq $oldline)\n        {\n          $count++;\n        }  \n        else \n        { \n          if ($count &gt;= $min) {print \"$oldline\\t$count\\n\";}\n#          print \"$count\\n\";\n          $count=1;\n          $oldline=$line;\n        }\n }\nexit;\n</code></pre>\n"}], "owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1548173211, "creation_date": 1548059414, "last_edit_date": 1548080614, "question_id": 54285931, "link": "https://stackoverflow.com/questions/54285931/extracting-base-change-using-perl-script", "title": "Extracting base change using perl script", "body": "<p>I need some help with this perl script as I am an absolute beginner of perl. I have my code below which gives me mismatch at specific position from bowtie.out for the  given sequence ($sequence) length (here I am searching within sequence of length 22). ARGV[0] is the <code>bowtie.out</code> file and ARGV[1] is the maximum sequence length. \nThis gives me the number of letters or base change (such as, A>T) at specific position for each change type. However, I also want to $position_ref for each change type and get the result as shown below. What do I need to do to this code to get the result as shown below?\nThanks for your help in advance. </p>\n\n<pre><code># usage ./script.pl bowtie.out 22 \n\nmy $sread = \"ACGT-read\";\nmy $strand =\"-\";\nmy $name = \"bill\";\nmy $position = 1;\nmy $sequence = \"ACGT\";\nmy $quality = \"good\";\nmy $d2 = \"d2\";\nmy $d3 = \"d3\";\nmy $class= $ARGV[1];\nmy @mray;\nmy @lines;\nmy $min = 10;\n\nfor (my $i=0; $i &lt; $class; $i++) {\n    $mray[$i][0]=0;\n    $mray[$i][1]=0;\n    $mray[$i][2]=0;\n    $mray[$i][3]=0;\n    $mray[$i][4]=0;\n    $mray[$i][5]=0;\n    $mray[$i][6]=0;\n    $mray[$i][7]=0;\n    $mray[$i][8]=0;\n    $mray[$i][9]=0;\n    $mray[$i][10]=0;\n    $mray[$i][11]=0;\n}\n\nopen (INFILE, \"&lt;$ARGV[0]\") || die \"couldn't open the 1 infile!\";\n\nwhile ($rln = &lt;INFILE&gt;){\n    chomp $rln;\n    ($sread, $strand, $name, $position, $sequence, $quality, $d2,$d3) = split(\"\\t\",$rln);\n#   print \"what is d3 \\n $d3\\n\";\n    $seq_len = length ($sequence);\n    if ($seq_len == $class &amp;&amp; $d3){\n        $position_ref = $position; \n# This is where I need help. I want to paste these values (from $position_ref) to the corresponding columns as shown in the result below.\n        print \"what is position_ref \\n $position_ref\\n\";\n#   print \"what is d3 \\n $d3\\n\";\n       ($position, $d2) = split(\":\",$d3);\n#   print \"what is d2 \\n $d2\\n\";\n       $var = substr $d2, -1;\n       $var2 = substr $d2, 0;\n\n       if ($var2 eq \"A&gt;T\" ) { $mray[$position][0]++ }\n       if ($var2 eq \"A&gt;G\" ) { $mray[$position][1]++ }\n       if ($var2 eq \"A&gt;C\" ) { $mray[$position][2]++ }\n       if ($var2 eq \"C&gt;T\" ) { $mray[$position][3]++ }\n       if ($var2 eq \"C&gt;G\" ) { $mray[$position][4]++ }\n       if ($var2 eq \"C&gt;A\" ) { $mray[$position][5]++ }\n       if ($var2 eq \"G&gt;T\" ) { $mray[$position][6]++ }\n       if ($var2 eq \"G&gt;A\" ) { $mray[$position][7]++ }\n       if ($var2 eq \"G&gt;C\" ) { $mray[$position][8]++ }\n       if ($var2 eq \"T&gt;A\" ) { $mray[$position][9]++ }\n       if ($var2 eq \"T&gt;G\" ) { $mray[$position][10]++ }\n       if ($var2 eq \"T&gt;C\" ) { $mray[$position][11]++ }\n\n\n#   print \"what is mray \\n $mray[$position][3]\\n\";\n       if ($position == ($class-1)) {\n           $read = substr $sequence, 0, $class-1;\n           push (@lines, $read);\n#   print \"what is read \\n $read\\n\";\n#   print \"what is position \\n $position\\n\";\n       }\n    }\n}\nclose (INFILE);\nprint \"Pos\\tA&gt;T\\tA&gt;G\\tA&gt;C\\tC&gt;T\\tC&gt;G\\tC&gt;A\\tG&gt;T\\tG&gt;A\\tG&gt;C\\tT&gt;A\\tT&gt;G\\tT&gt;C\\n\";\nfor (my $i=0; $i &lt; $class; $i++) {\n    $pnum = $i + 1;\n    print \"$pnum\\t$mray[$i][0]\\t$mray[$i][1]\\t$mray[$i][2]\\t$mray[$i][3]\\t$mray[$i][4]\\t$mray[$i][5]\\t$mray[$i][6]\\t$mray[$i][7]\\t$mray[$i][8]\\t$mray[$i][9]\\t$mray[$i][10]\\t$mray[$i][11]\\n\";\n}\n\n@lines = sort(@lines); # sort the list\n$count = 0;\nforeach my $line(@lines) # loop thru list\n {\n    if ($line eq $oldline)\n        {\n          $count++;\n        }  \n        else \n        { \n          if ($count &gt;= $min) {print \"$oldline\\t$count\\n\";}\n#          print \"$count\\n\";\n          $count=1;\n          $oldline=$line;\n        }\n }\n\nexit;   \n</code></pre>\n\n<p>bowtie.out</p>\n\n<pre><code>    K00363:128:HV3CJBBXX:3:1101:9668:1894 1:N:0:TAATCG  -   reverseKF898354_1_14561 12006   TCACCAGGAAGATAAAACACGA  JJJJJJJJJJJJJJJJJFFFAA  0   12:T&gt;A\n    K00363:128:HV3CJBBXX:3:1101:3363:1894 1:N:0:TAATCG  -   reverseKF898354_1_14561 1108    GCACCAGGAAGATAAAACACGT  JJJJJJJJJJJJJJJJJFFFAA  0   12:T&gt;A\n    K00363:128:HV3CJBBXX:3:1101:8521:1912 1:N:0:TAATCG  -   reverseKF898354_1_14561 13807   CACACAAATCATGGACGAAGATGA    JJJJJJJJJJJJJJJJJJJFFFAA    0   23:G&gt;C\n    K00363:128:HV3CJBBXX:3:1101:11343:1912 1:N:0:TAATCG -   reverseKF898354_1_14561 11823   TTTACAATCGTTTGCAGTCTATCA    JJJJJJJJJJJJJJJJJJJFFFAA    0   \n    K00363:128:HV3CJBBXX:3:1101:17056:1930 1:N:0:TAATCG +   reverseKF898354_1_14561 1970    TGCGCAGGACAAGAACTGAATG  AAFFFJJJJJJJJJJJJJJJJJ  0   19:C&gt;A\n    K00363:128:HV3CJBBXX:3:1101:11515:1965 1:N:0:TAATCG -   reverseKF898354_1_14561 9030    TGTCTGAAAATAACACGTCCAA  JJJJJJJJJJJJJJJJJFFFAA  0   5:A&gt;G\n</code></pre>\n\n<p>Result I am getting:</p>\n\n<pre><code>Pos A&gt;T A&gt;G A&gt;C C&gt;T C&gt;G C&gt;A G&gt;T G&gt;A G&gt;C T&gt;A T&gt;G T&gt;C\n1   0   0   0   0   0   0   0   0   0   0   0   0\n2   0   0   0   0   0   0   0   0   0   0   0   0\n3   0   0   0   0   0   0   0   0   0   0   0   0\n4   0   0   0   0   0   0   0   0   0   0   0   0\n5   0   0   0   0   0   0   0   0   0   0   0   0\n6   0   1   0   0   0   0   0   0   0   0   0   0\n7   0   0   0   0   0   0   0   0   0   0   0   0\n8   0   0   0   0   0   0   0   0   0   0   0   0\n9   0   0   0   0   0   0   0   0   0   0   0   0\n10  0   0   0   0   0   0   0   0   0   0   0   0\n11  0   0   0   0   0   0   0   0   0   0   0   0\n12  0   0   0   0   0   0   0   0   0   0   0   0\n13  0   0   0   0   0   0   0   0   0   2   0   0\n14  0   0   0   0   0   0   0   0   0   0   0   0\n15  0   0   0   0   0   0   0   0   0   0   0   0\n16  0   0   0   0   0   0   0   0   0   0   0   0\n17  0   0   0   0   0   0   0   0   0   0   0   0\n18  0   0   0   0   0   0   0   0   0   0   0   0\n19  0   0   0   0   0   0   0   0   0   0   0   0\n20  0   0   0   0   0   1   0   0   0   0   0   0\n21  0   0   0   0   0   0   0   0   0   0   0   0\n22  0   0   0   0   0   0   0   0   0   0   0   0\n</code></pre>\n\n<p>result I want (tab delimited):</p>\n\n<pre><code>Pos A&gt;T position_ref    A&gt;G position_ref    A&gt;C position_ref    C&gt;T position_ref    C&gt;G position_ref    C&gt;A position_ref    G&gt;T position_ref    G&gt;A position_ref    G&gt;C position_ref    T&gt;A position_ref    T&gt;G position_ref    T&gt;C position_ref\n1   0       0       0       0       0       0       0       0       0       0               0   \n2   0       0       0       0       0       0       0       0       0       0               0   \n3   0       0       0       0       0       0       0       0       0       0               0   \n4   0       0       0       0       0       0       0       0       0       0               0   \n5   0       0       0       0       0       0       0       0       0       0               0   \n6   0       1   9030    0       0       0       0       0       0       0       0               0   \n7   0       0       0       0       0       0       0       0       0       0               0   \n8   0       0       0       0       0       0       0       0       0       0               0   \n9   0       0       0       0       0       0       0       0       0       0               0   \n10  0       0       0       0       0       0       0       0       0       0               0   \n11  0       0       0       0       0       0       0       0       0       0               0   \n12  0       0       0       0       0       0       0       0       0       0               0   \n13  0       0       0       0       0       0       0       0       0       2   12006   1108        0   \n14  0       0       0       0       0       0       0       0       0       0               0   \n15  0       0       0       0       0       0       0       0       0       0               0   \n16  0       0       0       0       0       0       0       0       0       0               0   \n17  0       0       0       0       0       0       0       0       0       0               0   \n18  0       0       0       0       0       0       0       0       0       0               0   \n19  0       0       0       0       0       0       0       0       0       0               0   \n20  0       0       0       0       0       1   11823   0       0       0       0               0   \n21  0       0       0       0       0       0       0       0       0       0               0   \n22  0       0       0       0       0       0       0       0       0       0               0   \n</code></pre>\n"}, {"tags": ["perl", "ssl"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1548043419, "post_id": 54283355, "comment_id": 95388247, "body": "Are you sure the server is an SSL server?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1548048748, "post_id": 54283355, "comment_id": 95389305, "body": "does your &quot;Staff to do with connections management&quot; include <code>&#39;listen&#39; =&gt; $ssl</code> ?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1548049299, "post_id": 54283355, "comment_id": 95389464, "body": "Please provide a sufficiently complete example which actually shows how the SSL is used on the server side (i.e. the magic inside <i># Staff to do with connections management</i>). Apart from that: WebSockets are not the same sockets, i.e. to communicate with a WebSockets server you need to speak the WebSockets protocol and not just plain TCP or SSL."}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548051248, "post_id": 54283355, "comment_id": 95389992, "body": "I added the stuff inside the connections manager - but I don&#39;t believe it can affect the connecting client."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548048251, "post_id": 54283544, "comment_id": 95389180, "body": "I edited the question to mention that the server suppose running SSL on that specific port, unless there is something I missed...."}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548048307, "post_id": 54283544, "comment_id": 95389189, "body": "About preconfiguration: This is not SMTP, still need some configuration?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548049112, "post_id": 54283544, "comment_id": 95389399, "body": "@Xerix: SMTP is not the only protocol where the connection is upgraded only after some plain text command to TLS."}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548049398, "post_id": 54283544, "comment_id": 95389498, "body": "I removed the &quot;connect_SSL&quot; and there is no error:)"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548049728, "post_id": 54283544, "comment_id": 95389590, "body": "@Xerix: that&#39;s strange. It should have simply ignored the <code>connect_SSL</code> if the SSL handshake is already done. But maybe your actual program is more complex than the example you&#39;ve shown."}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548050807, "post_id": 54283544, "comment_id": 95389866, "body": "Honestly, no error, but double checking no actual message arrived into the server listening in that port, and the port is running connecting from the browser. As @SteffenUllrich mentioned, Websocket protocol perhaps is different, I have no idea how to initialize it as client from the point I mentioned in my example."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1548051794, "post_id": 54283544, "comment_id": 95390143, "body": "@Xerix: The check inside <code>connect_SSL</code> to return if the SSL handshake is already done was only added in IO::Socket::SSL 2.045 nearly two years ago. You are likely using an older version of IO::Socket::SSL. As for properly speaking WebSockets in the client - this is a different story which only comes after the TLS handshake."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1548052270, "last_edit_date": 1548052270, "creation_date": 1548045083, "answer_id": 54283544, "question_id": 54283355, "link": "https://stackoverflow.com/questions/54283355/iosocketssl-establishing-client-connection/54283544#54283544", "title": "IO::Socket::SSL - establishing client connection", "body": "<blockquote>\n  <p>... SSL23_GET_SERVER_HELLO:unknown protocol</p>\n</blockquote>\n\n<p>This is the kind of error you get if the client tries to do a SSL handshake and the server responds with something which is not SSL. Typically this happens if you connect to a server which is not (properly) SSL enabled (at least not on this port) or requires some plain text to upgrade to SSL (like in case of SMTP STARTTLS and similar).</p>\n\n<p>This kind of error has usually nothing to do with certificates.</p>\n\n<p>This kind of error can only happen if you try to do an SSL handshake on an already established SSL socket but the server does not expect this. This seems to happen in your case:</p>\n\n<pre><code>my $cl=IO::Socket::SSL-&gt;new(\"localhost:9999\"); # locallost is my real case, anyway\nif($cl) {\n    $cl-&gt;connect_SSL or die $@;\n    ...\n</code></pre>\n\n<p>The SSL connection is already being established by <code>IO::Socket::SSL-&gt;new</code>. This is the same with IO::Socket::INET or similar: if the target is given it will already connect inside <code>new</code> and an additional <code>connect</code> or <code>connect_SSL</code> should not be done. This is also reflected <a href=\"https://metacpan.org/pod/IO::Socket::SSL#SYNOPSIS\" rel=\"nofollow noreferrer\">in the documentation</a> and examples.</p>\n\n<p>Since version 2.045 (released 02/2017) IO::Socket::SSL will simply ignore a <code>connect_SSL</code> if the SSL handshake is already done. You are likely using an older version of IO::Socket::SSL where <code>connect_SSL</code> will start a new handshake even if the TLS handshake was already finished. This handshake inside the TLS connection will result in the strange error you see.</p>\n"}], "owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 54283544, "answer_count": 1, "score": 2, "last_activity_date": 1548077790, "creation_date": 1548043285, "last_edit_date": 1548077790, "question_id": 54283355, "link": "https://stackoverflow.com/questions/54283355/iosocketssl-establishing-client-connection", "title": "IO::Socket::SSL - establishing client connection", "body": "<p>As per the documentation of IO::Socket::SSL (PERL) I understand that if I want to just send command to specific server-program that running on port 9999 on my host, Ican do it this way: </p>\n\n<pre><code>my $cl=IO::Socket::SSL-&gt;new(\"localhost:9999\"); # locallost is my real case, anyway\nif($cl) {\n    $cl-&gt;connect_SSL or die $@;\n    # Something about certificates?\n    $cl-&gt;syswrite(\"Command\");\n    close($cl);\n}\n</code></pre>\n\n<p>But the error I get is: \"SSL connect attempt failed with unknown error error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol at blabla.cgi line 888\"</p>\n\n<p>The server initialized thi way (in another pl program):</p>\n\n<pre><code>use IO::Socket::SSL;\nuse Net::WebSocket::Server;\nmy $CON={};\nmy @crt=&amp;SSLCerts(); die 'E101' if(@crt==0);\nmy $ssl=IO::Socket::SSL-&gt;new(\n    Listen        =&gt; 10000,\n    Timeout       =&gt; 45,\n    LocalPort     =&gt; 9999,\n    Proto         =&gt; 'tcp',\n    SSL_cert_file =&gt; \"$EF::Base/ssl/certs/$crt[0][0].crt\",\n    SSL_key_file  =&gt; \"$EF::Base/ssl/keys/$crt[1][0].key\"\n) or die \"E102: $!\";\n\nNet::WebSocket::Server-&gt;new(\n    listen =&gt; $ssl,\n    silence_max=&gt; 3600,\n    tick_period =&gt; 5,\n    on_tick =&gt; sub {\n         # Empty for now\n    },\n    on_connect =&gt; sub {\n        my($serv,$conn)=@_; my($cid,$sid);\n        $conn-&gt;on(\n            handshake =&gt; sub {\n                my($cnc,$hdk)=@_;\n                my $nsn=$hdk-&gt;req-&gt;resource_name;\n                $cid=substr($nsn,4,index($nsn,'&amp;L=')-4);\n                $CON-&gt;{$cid}=$cnc; # Register incomming connection\n            },\n            binary =&gt; sub {\n                # Handle incomming message from the client\n            },\n            disconnect =&gt; sub {\n                delete $CON-&gt;{$cid};\n            }\n        );\n    }\n)-&gt;start;\n</code></pre>\n\n<p>Typical Websocket client that is connecting from the browser via \"wss://\" connects without any trouble.... The server MUST be SSL... </p>\n\n<p>Here I am just trying to do the same from within perl.</p>\n\n<p>What I am doing wrong? Nothing mentioned about certificates in client, only in server - the server is working fine. Maybe configuration? I have purchased SSL certificates and I use them for the server that running ok on that port.\nThe host is Linux (CentOS - if it matters).</p>\n"}, {"tags": ["perl", "dll"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "edited": false, "score": 0, "creation_date": 1548049311, "post_id": 54283587, "comment_id": 95389468, "body": "I saw that too just before posting, and checked my versions. I am using an old version of strawberry Perl for other reasons (5.14.2.1) which has older binutils, so it compiles. If I use the latest strawberry Perl then it fails to link."}], "tags": [], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "is_accepted": false, "score": 1, "last_activity_date": 1548045454, "creation_date": 1548045454, "answer_id": 54283587, "question_id": 54282544, "link": "https://stackoverflow.com/questions/54282544/how-to-diagnose-dll-load-problem-for-perl-module-labvisa/54283587#54283587", "title": "How to diagnose dll load problem for Perl Module Lab::VISA", "body": "<p>It is mentioned in metacpan :</p>\n\n<pre><code>On 64-bit windows one needs a 32-bit version of perl with GNU binutils version &lt;= 2.24. Otherwise linking with the NI-VISA library will fail. The reason for this are the following bugs in the GNU binutils:\n\nbinutils bug 16598\n\nbinutils bug 17910\n\nThese are fixed in the most recent version of the binutils. Once this version (2.26) is included in Strawberry Perl, it should be possible to use a 64-bit version of perl.\n\nIt is not possible to use either 32-bit or 64-bit versions of Strawberry Perl 5.22 as this version uses binutils 2.25.\n</code></pre>\n\n<p>So if you have WIN 64 , you need to install <code>binutils</code></p>\n\n<p>binutils bug 16598 : <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=16598\" rel=\"nofollow noreferrer\">https://sourceware.org/bugzilla/show_bug.cgi?id=16598</a></p>\n\n<p>and binutils bug 17910 : <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=17910\" rel=\"nofollow noreferrer\">https://sourceware.org/bugzilla/show_bug.cgi?id=17910</a></p>\n\n<p>Notice : don't forget to always read documentations</p>\n"}], "owner": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548045454, "creation_date": 1548034481, "question_id": 54282544, "link": "https://stackoverflow.com/questions/54282544/how-to-diagnose-dll-load-problem-for-perl-module-labvisa", "title": "How to diagnose dll load problem for Perl Module Lab::VISA", "body": "<p>I have successfully installed (i.e without errors or warnings) as per the instructions:</p>\n\n<p><a href=\"https://metacpan.org/pod/distribution/Lab-VISA/lib/Lab/VISA/Installation.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/Lab-VISA/lib/Lab/VISA/Installation.pod</a></p>\n\n<p>But when I try to run the example script I get:</p>\n\n<pre><code>Can't load 'C:/Dwimperl/perl/site/lib/auto/Lab/VISA/VISA.dll' for module\nLab::VISA: load_file:The specified module could not be found at \n C:/Dwimperl/perl/lib/DynaLoader.pm line 190.\n at C:/Dwimperl/perl/site/lib/Lab/VISA.pm line 11\nCompilation failed in require at VISA Test.pl line 3.\nBEGIN failed--compilation aborted at VISA Test.pl line 3.\n</code></pre>\n\n<p>Googling this suggests the there is something wrong with VISA.dll. This is generated during the install of the module, so I guess it is something in my environment. But my limited knowledge means I am not sure where to start. And I cannot seem to find a help contact or forum for Lab::VISA module.</p>\n"}, {"tags": ["bash", "shell", "perl", "cut", "tr"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 6, "creation_date": 1548031687, "post_id": 54282311, "comment_id": 95386388, "body": "Please add your efforts which you have put to solve the problem in your post along with expected output sample too. Let us know then."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1548031942, "post_id": 54282311, "comment_id": 95386436, "body": "<code>sed</code> should work. Show what you tried."}, {"owner": {"reputation": 1, "user_id": 4463212, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jt0usXGXoHs/AAAAAAAAAAI/AAAAAAAAH9A/XH1U2m-CluU/photo.jpg?sz=128", "display_name": "Dirk_Klauser", "link": "https://stackoverflow.com/users/4463212/dirk-klauser"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1548032423, "post_id": 54282311, "comment_id": 95386517, "body": "Hi @lurker, I tried this:  sed &#39;s/\\s\\+/ /g&#39; &lt;filename&gt;, sed -i &#39;s// /g&#39; &lt;filename&gt;, etc"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548065260, "post_id": 54282311, "comment_id": 95395909, "body": "@Dirk_Klauser: if you were to edit your question to add some examples of the things you&#39;ve tried, then we would be able to explain whatever it is that you&#39;re misunderstanding. Wouldn&#39;t that be more useful than just giving you an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4463212, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jt0usXGXoHs/AAAAAAAAAAI/AAAAAAAAH9A/XH1U2m-CluU/photo.jpg?sz=128", "display_name": "Dirk_Klauser", "link": "https://stackoverflow.com/users/4463212/dirk-klauser"}, "edited": false, "score": 0, "creation_date": 1548031997, "post_id": 54282328, "comment_id": 95386446, "body": "Hmm, it outputs the following:  annie ? ? ? ? ? ? ? curl-openssl? ? ? ? gearman ? ? ? ? ? ? libgpg-error? ? ? ? mpv ? ? ? ? ? ? ? ? spdlog? ? ? ? ? ? ? vips ansible ? ? ? ? ? ? cython? ? ? ? ? ? ? geoipupdate ? ? ? ? libuv ? ? ? ? ? ? ? node-build? ? ? ? ? sphinx? ? ? ? ? ? ? webp audacious ? ? ? ? ? dartsim ? ? ? ? ? ? git-open? ? ? ? ? ? libxc ? ? ? ? ? ? ? open-"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1, "user_id": 4463212, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jt0usXGXoHs/AAAAAAAAAAI/AAAAAAAAH9A/XH1U2m-CluU/photo.jpg?sz=128", "display_name": "Dirk_Klauser", "link": "https://stackoverflow.com/users/4463212/dirk-klauser"}, "edited": false, "score": 0, "creation_date": 1548032187, "post_id": 54282328, "comment_id": 95386470, "body": "@Dirk_Klauser, as already mentioned in comments to your post. EDIT your post with expected output&#39;s sample. As it is not clear."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1, "user_id": 4463212, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jt0usXGXoHs/AAAAAAAAAAI/AAAAAAAAH9A/XH1U2m-CluU/photo.jpg?sz=128", "display_name": "Dirk_Klauser", "link": "https://stackoverflow.com/users/4463212/dirk-klauser"}, "edited": false, "score": 0, "creation_date": 1548032961, "post_id": 54282328, "comment_id": 95386596, "body": "@Dirk_Klauser, yes my command it providing correct output(which you have posted in your post) while running. Did you check it on shown sample only? Doesn&#39;t look to me both are same your shown Input_file and your above shown output?"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 0, "last_activity_date": 1548031833, "creation_date": 1548031833, "answer_id": 54282328, "question_id": 54282311, "link": "https://stackoverflow.com/questions/54282311/bash-shell-perl-how-to-replace-variable-amount-of-white-space-with-a-singl/54282328#54282328", "title": "Bash / Shell / Perl - How to replace variable amount of white space with a single space?", "body": "<p>Could you please try following(couldn't test it since OP's expected output is not clear).</p>\n\n<pre><code>awk '{gsub(/[[:space:]]+/,OFS)} 1'  Input_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "is_accepted": false, "score": 0, "last_activity_date": 1548035317, "creation_date": 1548035317, "answer_id": 54282625, "question_id": 54282311, "link": "https://stackoverflow.com/questions/54282311/bash-shell-perl-how-to-replace-variable-amount-of-white-space-with-a-singl/54282625#54282625", "title": "Bash / Shell / Perl - How to replace variable amount of white space with a single space?", "body": "<p>Try:</p>\n\n<pre><code>list=\"chafa    libgusb                      libvirt-glib   needle                       simple-scan cryptominisat                libpulsar        lsd                          oxipng                       spice-protocol python                     docker-machine-completion    hss                          nomad                        ruby@2.4 python@2                   doitlive                     hstr                         numpy                        ruby@2.5 readline                   dwarf                        hunspell                     octave                       sdcv sqlite                     eccodes                      imagemagick                  opendbx    sip\"\n\necho \"$list\" | sed 's/[ ][ ]*/ /g'\n\nchafa libgusb libvirt-glib needle simple-scan cryptominisat libpulsar lsd oxipng spice-protocol python docker-machine-completion hss nomad ruby@2.4 python@2 doitlive hstr numpy ruby@2.5 readline dwarf hunspell octave sdcv sqlite eccodes imagemagick opendbx sip\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1548060657, "creation_date": 1548060657, "answer_id": 54286236, "question_id": 54282311, "link": "https://stackoverflow.com/questions/54282311/bash-shell-perl-how-to-replace-variable-amount-of-white-space-with-a-singl/54286236#54286236", "title": "Bash / Shell / Perl - How to replace variable amount of white space with a single space?", "body": "<p>Command-line solution in Perl</p>\n\n<pre><code>$ perl -pe 's/\\s+/ /g' original.txt &gt; cleaned.txt\n</code></pre>\n\n<ul>\n<li>The <code>-p</code> option tells Perl to iterate over each line in the input and print the output.</li>\n<li>The <code>-e</code> option gives Perl the code to run on each line of the input.</li>\n<li><code>s/.../.../</code> is Perl's substitution operator.</li>\n<li><code>/g</code> is the global option to the substitution operator.</li>\n<li><code>s/\\s+/ /g</code> means \"find all runs of one of more whitespace characters and replace each one with an empty string\".</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4463212, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jt0usXGXoHs/AAAAAAAAAAI/AAAAAAAAH9A/XH1U2m-CluU/photo.jpg?sz=128", "display_name": "Dirk_Klauser", "link": "https://stackoverflow.com/users/4463212/dirk-klauser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1668, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1548077822, "creation_date": 1548031596, "last_edit_date": 1548077822, "question_id": 54282311, "link": "https://stackoverflow.com/questions/54282311/bash-shell-perl-how-to-replace-variable-amount-of-white-space-with-a-singl", "title": "Bash / Shell / Perl - How to replace variable amount of white space with a single space?", "body": "<p>Apologies if this has been asked before; I could not find any shell-related answers.</p>\n\n<p>I have a text file with white space that has varying amounts of white space in between the strings.  </p>\n\n<p><strong>Example:</strong></p>\n\n<blockquote>\n  <p>chafa\u00a0 \u00a0  libgusb\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 libvirt-glib\n  \u00a0 needle \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 simple-scan cryptominisat\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 libpulsar\u00a0 \u00a0 \u00a0 \u00a0  lsd\u00a0 \u00a0 \u00a0 \u00a0 \u00a0\n  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 oxipng \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 spice-protocol python \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0                   docker-machine-completion\u00a0 \u00a0 hss\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 nomad\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ruby@2.4 python@2 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 doitlive \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 hstr \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 numpy\u00a0 \u00a0 \u00a0 \u00a0\n  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ruby@2.5 readline \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 dwarf\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 hunspell \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 octave \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 sdcv sqlite \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 eccodes\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\n  imagemagick\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 opendbx\u00a0 \u00a0 sip</p>\n</blockquote>\n\n<p><strong>Desired output:</strong></p>\n\n<blockquote>\n  <p>chafa libgusb libvirt-glib needle simple-scan cryptominisat libpulsar\n  lsd\u00a0oxipng spice-protocol python</p>\n</blockquote>\n\n<p>I've tried a few <strong>sed</strong>, <strong>tr</strong>, <strong>cut</strong>, <strong>perl</strong> and other attempts but can't seem to cut the variable white space down to a single white space character.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 3, "creation_date": 1548030817, "post_id": 54282210, "comment_id": 95386261, "body": "Let autovivication help you out. <code>my %aa; push @{ $aa{allphotos}{$newkey} }, $newphotoone, $newphototwo;</code>"}, {"owner": {"reputation": 301, "user_id": 6111178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e8b8243bab2257a558e35e4d2054e97d?s=128&d=identicon&r=PG&f=1", "display_name": "user116032", "link": "https://stackoverflow.com/users/6111178/user116032"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1548031593, "post_id": 54282210, "comment_id": 95386372, "body": "Thanks.  But I&#39;m getting this: Experimental push on scalar is now forbidden at ..."}, {"owner": {"reputation": 301, "user_id": 6111178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e8b8243bab2257a558e35e4d2054e97d?s=128&d=identicon&r=PG&f=1", "display_name": "user116032", "link": "https://stackoverflow.com/users/6111178/user116032"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1548032736, "post_id": 54282210, "comment_id": 95386567, "body": "lol... There&#39;s so many delimiters here I don&#39;t know what I did.  I just added (or so I think I just added, push() parens.  Now it works.  Thanks  <a href=\"https://stackoverflow.com/questions/3779213/how-do-i-push-a-value-onto-a-perl-hash-of-arrays\" title=\"how do i push a value onto a perl hash of arrays\">stackoverflow.com/questions/3779213/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1548040020, "post_id": 54282210, "comment_id": 95387703, "body": "Re &quot;<i>But I&#39;m getting this</i>&quot;, From your code, yes, but not from GMB&#39;s. The parens aren&#39;t needed, but <code>@{ ... }</code> is."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1548040110, "creation_date": 1548040110, "answer_id": 54283044, "question_id": 54282210, "link": "https://stackoverflow.com/questions/54282210/how-to-point-perl-assc-array-to-simple-array-and-push-new-values/54283044#54283044", "title": "How to point perl assc array to simple array and push new values?", "body": "<p>Close. The first argument has to be an array.</p>\n\n<pre><code>push @{ $aa{'allphotos'}{$newkey} }, $newphotoone;\npush @{ $aa{'allphotos'}{$newkey} }, $newphototwo;\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>push @{ $aa{'allphotos'}{$newkey} }, $newphotoone, $newphototwo;\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 6111178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e8b8243bab2257a558e35e4d2054e97d?s=128&d=identicon&r=PG&f=1", "display_name": "user116032", "link": "https://stackoverflow.com/users/6111178/user116032"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1548077870, "creation_date": 1548030380, "last_edit_date": 1548077870, "question_id": 54282210, "link": "https://stackoverflow.com/questions/54282210/how-to-point-perl-assc-array-to-simple-array-and-push-new-values", "title": "How to point perl assc array to simple array and push new values?", "body": "<p>This is the concept:</p>\n\n<pre><code>%aa = (\n  'allphotos' =&gt; {}\n);\n\n$newkey = 'photogroupone';\n$newphotoone = 'dogs at play';\n$newphototwo = 'cats at play';\n\npush $aa{'allphotos'}{$newkey}, $newphotoone;\npush $aa{'allphotos'}{$newkey}, $newphototwo;\n</code></pre>\n\n<p>Perl 5.24</p>\n\n<p>They want additional text to post. What's to say.</p>\n"}, {"tags": ["perl", "dancer"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1548003543, "post_id": 54276505, "comment_id": 95379413, "body": "Hi @Joe, your description sound like you are looking for a way to log messages ... if so, please have a look at all those fancy modules <code>Dancer2::Logger::*</code> that are available... if not, then it is certainly the wrong way when you are trying to pass stuff around."}, {"owner": {"reputation": 43, "user_id": 10940446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc03b006a045b4b9a9d0369d37696a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/10940446/joe"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1548104700, "post_id": 54276505, "comment_id": 95415883, "body": "Hi @vanHoesel, thank you. But I want my libraries to be completely dancer2 agnostic. In fact, I am implementing an API I want to also use independently from dancer2, as ysth correctly assumed in his answer."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10940446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc03b006a045b4b9a9d0369d37696a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/10940446/joe"}, "edited": false, "score": 0, "creation_date": 1548104105, "post_id": 54279429, "comment_id": 95415657, "body": "so <code>var</code> is a request-scoped object ( a hash reference, if I remember the output of <code>Data::Dumper</code> well). This would make sense. I will try it once I  have access to my dev environment again and report back. Hopefully tomorrow.  Regarding weak references: Never used them and only now - inspired by your post - I read about them.  Thanks - and as I said: I&#39;ll report back."}, {"owner": {"reputation": 43, "user_id": 10940446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc03b006a045b4b9a9d0369d37696a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/10940446/joe"}, "edited": false, "score": 0, "creation_date": 1548191496, "post_id": 54279429, "comment_id": 95452901, "body": "Using a var as a reference to the entry point of my API does exactly what I want:       var API =&gt; AMS2::API-&gt;new;  and later in my routes I use: del &#39;/record/:id&#39; =&gt; sub { vars-&gt;{API}-&gt;do_what_needs_to_be_done(route_parameters-&gt;get(&zwnj;&#8203;&#39;id&#39;)); } Best, Joe"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1548078289, "last_edit_date": 1548078289, "creation_date": 1548007890, "answer_id": 54279429, "question_id": 54276505, "link": "https://stackoverflow.com/questions/54276505/how-to-create-globally-scoped-variables-that-are-global-only-during-one-reques/54279429#54279429", "title": "How to create &#39;globally&#39; scoped variables that are global only during one request?", "body": "<p>It looks to me like you could use a <code>var</code> to hold your object.</p>\n\n<p>See <a href=\"https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#var\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#var</a></p>\n\n<p>If you need it to be accessible even from methods that aren't aware of Dancer, you could use a <code>var</code> and also store your object in a global variable using a weak reference.</p>\n"}], "owner": {"reputation": 43, "user_id": 10940446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc03b006a045b4b9a9d0369d37696a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/10940446/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 54279429, "answer_count": 1, "score": 4, "last_activity_date": 1548078289, "creation_date": 1547987822, "last_edit_date": 1548077898, "question_id": 54276505, "link": "https://stackoverflow.com/questions/54276505/how-to-create-globally-scoped-variables-that-are-global-only-during-one-reques", "title": "How to create &#39;globally&#39; scoped variables that are global only during one request?", "body": "<p>When a request hits my dancer2 app I want to set up an object that is accessible by all packages involved in handling this request.</p>\n\n<p>How can I make sure that this object has a scope only within this individual request and is not accessible by other requests?</p>\n\n<p>Specifically this object should be filled with messages of all kinds (errors, warnings, debug messages, etc.) as execution travels through my libraries.</p>\n\n<p>Obviously, those messages are request-specific and I am afraid that naively declaring a global reference to this message object is exposing it to all requests hitting the app.</p>\n\n<p>I was thinking about creating an instance of this message class in the router and then passing a reference to it throughout all methods involved in handling this request.</p>\n\n<p>My gut feeling tells me that I am missing something fundamentally here architecture-wise regarding dancer2, so I decided to ask you. It's my first post here, by the way, so I apologize for any shortcomings my question may have.</p>\n"}, {"tags": ["git", "perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1547919191, "post_id": 54268233, "comment_id": 95362171, "body": "Adding an git commit example and desired output would be nice."}, {"owner": {"reputation": 22933, "user_id": 187581, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/a0f1ffe2b180512884c65e14c80dcf75?s=128&d=identicon&r=PG", "display_name": "joachim", "link": "https://stackoverflow.com/users/187581/joachim"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548425561, "post_id": 54268233, "comment_id": 95547809, "body": "@StefanBecker done."}], "answers": [{"tags": [], "owner": {"reputation": 22933, "user_id": 187581, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/a0f1ffe2b180512884c65e14c80dcf75?s=128&d=identicon&r=PG", "display_name": "joachim", "link": "https://stackoverflow.com/users/187581/joachim"}, "is_accepted": false, "score": 2, "last_activity_date": 1547909108, "creation_date": 1547909108, "answer_id": 54268234, "question_id": 54268233, "link": "https://stackoverflow.com/questions/54268233/how-to-show-a-summary-of-a-file-list-grouped-by-directory/54268234#54268234", "title": "how to show a summary of a file list grouped by directory", "body": "<p>Pipe the file list to perl, then extract the first N pieces of the filename. (This bit expects all the items to have at least this depth!)</p>\n\n<p>Then print the extracted text if it's not already been seen.</p>\n\n<p>For example:</p>\n\n<pre><code>git show --name-only SHA | perl -n -e 'my ($root) = m[^((\\w+/){DEPTH})]; print $root . \"\\n\" if !exists $seen{$root}   ; $seen{$root} = 1;'\n</code></pre>\n\n<p>where DEPTH is replaced with the depth of directories to consider.</p>\n"}], "owner": {"reputation": 22933, "user_id": 187581, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/a0f1ffe2b180512884c65e14c80dcf75?s=128&d=identicon&r=PG", "display_name": "joachim", "link": "https://stackoverflow.com/users/187581/joachim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548425536, "creation_date": 1547909108, "last_edit_date": 1548425536, "question_id": 54268233, "link": "https://stackoverflow.com/questions/54268233/how-to-show-a-summary-of-a-file-list-grouped-by-directory", "title": "how to show a summary of a file list grouped by directory", "body": "<p>Suppose I have a list of files, and I want to summarize them by directory, to a certain depth.</p>\n\n<p>For example, I want to see which directories a git commit changed, or a git diff affects.</p>\n\n<p>The output of <code>git diff --name-only</code> or <code>git show --name-only</code> lists something like:</p>\n\n<pre><code>foo/1.txt\nfoo/2.txt\nbar/3.txt\nbar/4.txt\n</code></pre>\n\n<p>but a summary by directory would show:</p>\n\n<pre><code>foo/\nbar/\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 3, "last_activity_date": 1548015782, "last_edit_date": 1548015782, "creation_date": 1547859234, "answer_id": 54263189, "question_id": 54263046, "link": "https://stackoverflow.com/questions/54263046/how-do-i-use-a-regular-expression-to-do-a-find-and-replace-operation-in-perl/54263189#54263189", "title": "How do I use a regular expression to do a &quot;find and replace&quot; operation in Perl?", "body": "<p>You need to use the <code>s</code> (substitution) operator, not just a regex. A regex will let you find the text; <code>s</code> will let you find and replace.</p>\n\n<p>The first part is the pattern that matches what you want, and the second is the <em>string</em> that gets substituted for <em>all</em> of what was matched. If you need to potentially match this multiple times in a line, you add the <code>g</code> (globally) suffix.</p>\n\n<pre><code>$line =~ s/,--(\\d+)/,+$1/g;\n</code></pre>\n\n<p>This finds every <code>,--</code> followed by one or more digits (captured by the parens in <code>$1</code>), and substitutes the string <code>,+$1</code>, which interpolates the captured number into the string.</p>\n\n<p>If <code>,--</code> doesn't occur in any other context than this, you could eliminate the need for capturing the number and just substitute the string:</p>\n\n<pre><code>$line =~ s/,--/,+/g;\n</code></pre>\n\n<p>Edit: If the \"find\" string is always only one digit, then you don't need <code>\\d+</code>; <code>\\d</code> will do to capture a single digit. It's habit for me to assume that there'll probably be a case where I need to capture an integer, not just a single digit.</p>\n\n<p>Edit again: clarifying that a regex was a step in the right direction, but substitution is the way to do a \"find and replace\" operation.</p>\n"}], "owner": {"reputation": 29, "user_id": 10935924, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213105633419111/picture?type=large", "display_name": "Sheryl", "link": "https://stackoverflow.com/users/10935924/sheryl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1547861776, "answer_count": 1, "score": 0, "last_activity_date": 1548078040, "creation_date": 1547857619, "last_edit_date": 1548078040, "question_id": 54263046, "link": "https://stackoverflow.com/questions/54263046/how-do-i-use-a-regular-expression-to-do-a-find-and-replace-operation-in-perl", "closed_reason": "Needs details or clarity", "title": "How do I use a regular expression to do a &quot;find and replace&quot; operation in Perl?", "body": "<p>I want to use a regex to find strings like <code>,--#</code> (where # is any digit) and replace them with <code>,+#</code> (where # is the digit matched previously).</p>\n\n<p>I can come up with the find part. <code>/(\\,--\\d)/g</code> finds the text I am looking for. But I cannot find a way to replace it using a regex.</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 4, "creation_date": 1547850832, "post_id": 54262267, "comment_id": 95348673, "body": "You need to escape the <code>?</code> because it&#39;s a special character (quantifier that matches the preceding group 1 or 0 times)."}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "reply_to_user": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1547850952, "post_id": 54262267, "comment_id": 95348713, "body": "please make it as an answer"}], "answers": [{"tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": 2, "last_activity_date": 1547997149, "last_edit_date": 1547997149, "creation_date": 1547852064, "answer_id": 54262453, "question_id": 54262267, "link": "https://stackoverflow.com/questions/54262267/regex-to-match-end-of-the-string-and-capture-the-part-before-end-of-the-string-p/54262453#54262453", "title": "Regex to match end of the string and capture the part before end of the string perl", "body": "<p>To match everything up to, but not including, a <code>/?</code>:</p>\n\n<pre><code>.*(?=/\\?)\n</code></pre>\n\n<p>If you\u2019re not sure about escaping, you can use a character class to do the escaping for you:</p>\n\n<pre><code>.*(?=/[?])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 1, "last_activity_date": 1547871529, "creation_date": 1547871529, "answer_id": 54264010, "question_id": 54262267, "link": "https://stackoverflow.com/questions/54262267/regex-to-match-end-of-the-string-and-capture-the-part-before-end-of-the-string-p/54264010#54264010", "title": "Regex to match end of the string and capture the part before end of the string perl", "body": "<p>It may seem duplicate, but as the answer of your question,<br>\nYour regex need to be:</p>\n\n<pre><code>/(.*)\\/\\?$/\n</code></pre>\n\n<p>or </p>\n\n<pre><code>/(.*)(?=\\/\\?$)/\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>$input = \"boringinterestingboring/?\";\nprint \"Use \\$1: $1\\n\" if($input =~ /(.*)\\/\\?$/);\nprint \"Use \\$1: $1\\n\" if($input =~ /(.*)(?=\\/\\?$)/);\nprint \"Use \\$&amp;: $&amp;\\n\" if($input =~ /.*(?=\\/\\?$)/);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Use $1: boringinterestingboring\nUse $1: boringinterestingboring\nUse $&amp;: boringinterestingboring\n</code></pre>\n\n<p>Different ways, same destination. But either way, you should escape <code>?</code> too, or put it in <code>[]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1547896641, "last_edit_date": 1547896641, "creation_date": 1547895553, "answer_id": 54266366, "question_id": 54262267, "link": "https://stackoverflow.com/questions/54262267/regex-to-match-end-of-the-string-and-capture-the-part-before-end-of-the-string-p/54266366#54266366", "title": "Regex to match end of the string and capture the part before end of the string perl", "body": "<p>Using positive lookahead. The assertion <code>(?=..)</code> will match <code>/?</code> but will not make it part of the capturing group even if it is nested in another group.</p>\n\n<pre><code>$ echo \"boringinterestingboring/?\" | perl -ne ' ($x)=/(boringinterestingboring(?=\\/\\?))/ ; print $x '\nboringinterestingboring\n$\n</code></pre>\n\n<p>Negative test case. Below prints nothing</p>\n\n<pre><code>$ echo \"boringinterestingboring#?\" | perl -ne ' ($x)=/(boringinterestingboring(?=\\/\\?))/ ; print $x '\n\n$\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1547896756, "answer_count": 3, "score": 0, "last_activity_date": 1547997149, "creation_date": 1547850702, "question_id": 54262267, "link": "https://stackoverflow.com/questions/54262267/regex-to-match-end-of-the-string-and-capture-the-part-before-end-of-the-string-p", "closed_reason": "Duplicate", "title": "Regex to match end of the string and capture the part before end of the string perl", "body": "<p>I'm trying to match any string with the regex that ends with /? and extract the string before /?</p>\n\n<p>Below is my code:</p>\n\n<pre><code>$input = \"boringinterestingboring/?\";\nif($input =~ /(.*)\\/?$/) {\n    print \"$1\\n\";\n}\nelse {\n    print \"not matched\";\n}\n</code></pre>\n\n<p>I'm trying to capture <code>\"boringinterestingboring\"</code> using <code>(.*)</code> but it's not doing that, instead it captures the whole string.</p>\n\n<p>How should i get only the string before /?.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["regex", "shell", "perl", "regex-negation", "regex-lookarounds"], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1547897829, "post_id": 54260592, "comment_id": 95356716, "body": "it removes <code>INC000123456789</code> from the expected output, but it also contradicts OP&#39;s requirement <code>&quot;INC\\d{12}&quot;</code>"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1547897894, "post_id": 54260592, "comment_id": 95356726, "body": "could you please review my answer and suggest improvements."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1547841100, "creation_date": 1547841100, "answer_id": 54260592, "question_id": 54260227, "link": "https://stackoverflow.com/questions/54260227/regex-to-remove-newlines-not-followed-by-specific-string/54260592#54260592", "title": "Regex to remove newlines not followed by specific string", "body": "<p><code>perl -pe ...</code> works with one line a time, so a multi-line regular expression won't do you any good.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/perlrun#-0[octal/hexadecimal]\" rel=\"nofollow noreferrer\"><code>-0</code></a> switch to Perl can change your input record separator (what Perl's notion of a line is) and allow you to operate on the entire input as a single string.</p>\n\n<pre><code>perl -0777 -pe 's/\\n(?!\"INC\\d{12})/ /g;' test_input_so.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1547843651, "last_edit_date": 1547843651, "creation_date": 1547841829, "answer_id": 54260730, "question_id": 54260227, "link": "https://stackoverflow.com/questions/54260227/regex-to-remove-newlines-not-followed-by-specific-string/54260730#54260730", "title": "Regex to remove newlines not followed by specific string", "body": "<p>First, you have some stray quotes that you need to fix so your data can be valid CSV:</p>\n\n<ul>\n<li>line 7: <code>\"fie\"\"\"ld2\"</code> must be <code>\"fie\"\"ld2\"</code></li>\n<li>line 11: ends with 2 double quotes</li>\n</ul>\n\n<p>Second, don't put a space after the comma between fields: not <code>a, b</code> but <code>a,b</code></p>\n\n<p>Once you repair those things, you can use the <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> module:</p>\n\n<p>What I think you really want to do is <strong>remove newlines that are <em>inside</em> quoted fields</strong>. The structure of this code is taken from the Text::CSV perldoc.</p>\n\n<pre><code>perl -MData::Dump=dd -E '\n    use Text::CSV;\n    my $csv = Text::CSV-&gt;new ({ binary =&gt; 1, always_quote =&gt; 1 })\n                   or die \"Cannot use CSV: \".Text::CSV-&gt;error_diag ();\n\n    my $file = shift @ARGV;\n    open my $fh, \"&lt;:encoding(utf8)\", $file or die;\n    while ( my $row = $csv-&gt;getline( $fh ) ) {\n        my @row = map {s/\\n//g; $_} @$row;\n        $csv-&gt;combine(@row);\n        my $line = $csv-&gt;string();\n        say $line if $line ne q{\"\"};\n    }\n    $csv-&gt;eof or $csv-&gt;error_diag();\n    close $fh;\n' test_input_so.txt\n</code></pre>\n\n\n\n<pre><code>\"INC000111111111\",\"field2\",\"field3\"\n\"INC000222222222\",\"field2\",\"field3\",\"INC000123456789 blahblah\"\n\"INC000444444444\",\"fie\"\"ld2\",\"field3\"\n\"INC000123456789\",\"field2\",\"field3\",\"\"\n\"INC000333333333\",\"INC000123456789\",\"field3\"\n\"INC000555555555\",\"field2\",\"field3\",\"field4\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1548078359, "last_edit_date": 1548078359, "creation_date": 1547897705, "answer_id": 54266655, "question_id": 54260227, "link": "https://stackoverflow.com/questions/54260227/regex-to-remove-newlines-not-followed-by-specific-string/54266655#54266655", "title": "Regex to remove newlines not followed by specific string", "body": "<p>Another Perl</p>\n\n<pre><code>$  perl -0777 -ne ' while( /(^\"INC00.+?)(\\n\"INC.*|\\Z)/msg ) { $x=$1;$_=$2; $x=~s/\\n//g; print \"$x\\n\" } ' test_input_so.txt\n\"INC000111111111\", \"field2\", \"field3\"\n\"INC000222222222\", \"field2\", \"field3\",\"INC000123456789 blahblah\"\n\"INC000444444444\", \"fie\"\"\"ld2\", \"field3\"\n\"INC000123456789\", \"field2\", \"field3\",\n\"INC000333333333\", \"INC000123456789\", \"field3\"\"\n\"INC000555555555\", \"field2\", \"field3\",\"field4\"\n$\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>$ cat test_input_so.txt\n\"INC000111111111\", \"field2\", \"field3\"\n\n\"INC000222222222\", \"field2\", \"field3\",\"INC000123456789 blahblah\"\n\n\n\n\"INC000444444444\", \"fie\"\"\"ld2\", \"field3\"\n\"INC000123\n\n456789\", \"field2\", \"field3\",\n\"INC000333333333\", \"INC000123456789\", \"field3\"\"\n\"INC000555555555\", \"field2\", \"fiel\nd3\",\"field4\"\n\n$\n</code></pre>\n"}], "owner": {"reputation": 583, "user_id": 1839959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9rpsB.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/1839959/stan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 54260592, "answer_count": 3, "score": 1, "last_activity_date": 1548078359, "creation_date": 1547839175, "last_edit_date": 1548078072, "question_id": 54260227, "link": "https://stackoverflow.com/questions/54260227/regex-to-remove-newlines-not-followed-by-specific-string", "title": "Regex to remove newlines not followed by specific string", "body": "<p>I have a delimited data file with user entry that I need to clean up.  Specifically:</p>\n\n<ol>\n<li>There are newlines embedded in free text fields that I want to remove</li>\n<li>The number of columns can change from one row to the next</li>\n<li>The first field of each row <strong>SHOULD ALWAYS</strong> start with the pattern <code>\"INC\\d{12}\"</code> (the double quotes are part of the pattern).</li>\n<li>Each <code>\\n</code> should be replaced by a single space if it is not immediately followed by the pattern <code>\"INC\\d{12}\"</code></li>\n<li>I am currently using Perl (preferred) in cygwin, but awk or sed answers are acceptable as well.</li>\n</ol>\n\n<p>Here is some mock input data (I saved my to a file named <code>test_input_so.txt</code>):</p>\n\n<pre><code>\"INC000111111111\", \"field2\", \"field3\"\n\n\"INC000222222222\", \"field2\", \"field3\",\"INC000123456789 blahblah\"\n\n\n\n\"INC000444444444\", \"fie\"\"\"ld2\", \"field3\"\n\"INC000123\n\n456789\", \"field2\", \"field3\",\n\"INC000333333333\", \"INC000123456789\", \"field3\"\"\n\"INC000555555555\", \"field2\", \"fiel\nd3\",\"field4\"\n</code></pre>\n\n<p>Here is the desired output for the above data:</p>\n\n<pre><code>\"INC000111111111\", \"field2\", \"field3\"    \n\"INC000222222222\", \"field2\", \"field3\",\"INC000123456789 blahblah\"\n\"INC000444444444\", \"fie\"\"\"ld2\", \"field3\"\n\"INC000123456789\", \"field2\", \"field3\",\n\"INC000333333333\", \"INC000123456789\", \"field3\"\"\n\"INC000555555555\", \"field2\", \"field3\",\"field4\"\n</code></pre>\n\n<p>I have tried several combinations of negative lookaheads/behinds, but I am not sure why it is not working.</p>\n\n<p>Here is one example:</p>\n\n<pre><code>perl -pe 's/\\n(?!\"INC\\d{12})/ /g;' test_input_so.txt \n</code></pre>\n\n<p>It strips all <code>\\n</code>, but incorrectly removes the <code>\\n</code> followed by \"INC123456789012\" which <strong>should</strong> have been left in place.</p>\n"}, {"tags": ["string", "perl", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547841004, "post_id": 54260170, "comment_id": 95345212, "body": "Can you do it by-character, in those cases when the conversion for the whole string (word I presume) breaks down?  It does read utf-8 correctly (right?), so you have the characters.  Not pretty perhaps but it should take care of it?"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547841346, "post_id": 54260170, "comment_id": 95345371, "body": "What&#39;s your suggestion of splitting some string into individual Unicode-characters while properly dealing with combining chars and stuff? I&#39;m a bit unsure currently about that part."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1547880546, "post_id": 54260170, "comment_id": 95353311, "body": "Since it seems that your have the conversion (to cp-1252 encoding) itself under control, I assume that it is about identifying a &quot;character&quot; for conversion, with all the Unicode marks and whatnot. That&#39;d be <code>\\X</code> in regex, which matches the logical character (as either single or multiple codepoints)."}], "answers": [{"comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1547887018, "post_id": 54261365, "comment_id": 95354429, "body": "Accepted this answer for now because it was first and seems to be the more complete recipe regarding my question about a &quot;most compatible&quot; way."}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1547845170, "creation_date": 1547845170, "answer_id": 54261365, "question_id": 54260170, "link": "https://stackoverflow.com/questions/54260170/how-to-use-unicodenormalize-to-create-most-compatible-windows-1252-encoded-str/54261365#54261365", "title": "How to use Unicode::Normalize to create most compatible windows-1252 encoded string?", "body": "<p>I don't think you're missing an API because a best-effort approach is rather involved. I'd try something like the following:</p>\n\n<ul>\n<li>Normalize using NFC. This combines decomposed sequences like LATIN SMALL LETTER U, COMBINING DIAERESIS.</li>\n<li>Extract all codepoints which aren't combining marks using the regex <code>/\\PM/g</code>. This throws away all combining marks remaining after NFC conversion which can't be converted to Windows-1252 anyway. Then for each code point:\n\n<ul>\n<li>If the codepoint can be converted to Windows-1252, do so.</li>\n<li>Otherwise try to normalize the codepoint with NFKC. If the NFKC mapping differs from the input, apply all steps recursively on the resulting string. This handles things like ligatures.</li>\n<li>As a bonus: If the codepoint is invariant under NFKC, convert to NFD and try to convert the first codepoint of the result to Windows-1252. This converts characters like \u011c to G.</li>\n<li>Otherwise ignore the character.</li>\n</ul></li>\n</ul>\n\n<p>There are of course other approaches that convert unsupported characters to ones that look similar but they require to create mappings manually.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "edited": false, "score": 0, "creation_date": 1548181710, "post_id": 54264053, "comment_id": 95448675, "body": "@DragosTrif  If the comment is meant for OP you should have at-username so that they get notified (like I have in this one).  Either way, I fully assumed that they have the actual conversion down, and that their problem was that their procedure may fail for whole words since it may not work the same way for all characters in the word; that&#39;s what the question states really.  If that is indeed the case then the post you kindly link doesn&#39;t help them (it is certainly not needed for this answer)."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1548265197, "post_id": 54264053, "comment_id": 95483247, "body": "@zdim Reading about <code>Text::Unidecode</code> was interesting, though. Nevertheless, what is <code>\\p{cM}</code> in your answer? I couldn&#39;t find that, only <code>\\p{Mc}</code> for <code>Spacing_Mark</code>. Simply a typo?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1548265653, "post_id": 54264053, "comment_id": 95483459, "body": "@ThorstenSch&#246;ning  Indeed, a bad typo, I meant the Nonspacing_Mark -- thank you! Fixed"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1548664007, "last_edit_date": 1548664007, "creation_date": 1547872116, "answer_id": 54264053, "question_id": 54260170, "link": "https://stackoverflow.com/questions/54260170/how-to-use-unicodenormalize-to-create-most-compatible-windows-1252-encoded-str/54264053#54264053", "title": "How to use Unicode::Normalize to create most compatible windows-1252 encoded string?", "body": "<p>Since it seems that you can convert individual characters as needed (to cp-1252 encoding), one way is to process character by character, as proposed, once a word fails the procedure.</p>\n\n<p>The <code>\\X</code> in Perl's regex matches a <em>logical</em> Unicode character, an <a href=\"http://perldoc.perl.org/perlunicode.html#Extended-Grapheme-Clusters-%28Logical-characters%29\" rel=\"nofollow noreferrer\">extended grapheme cluster</a>, either as a single codepoint or a sequence. So if you indeed can convert all individual (logical) characters into the desired encoding, then with</p>\n\n<pre><code>while ($word =~ /(\\X)/g) { ... }\n</code></pre>\n\n<p>you can access the logical characters and apply your working procedure to each.</p>\n\n<p>In case you can't handle all logical characters that may come up, piece together an equivalent of <code>\\X</code> using specific <a href=\"http://perldoc.perl.org/perlunicode.html#Unicode-Character-Properties\" rel=\"nofollow noreferrer\">character properties</a>, for finer granularity with combining marks or such (like <code>/((.)\\p{Mn}?)/</code>, or <code>\\p{Nonspacing_Mark}</code>). The full, grand, list is in <a href=\"https://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">perluniprops</a>.</p>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 3, "accepted_answer_id": 54261365, "answer_count": 2, "score": 2, "last_activity_date": 1548664007, "creation_date": 1547838880, "last_edit_date": 1548078099, "question_id": 54260170, "link": "https://stackoverflow.com/questions/54260170/how-to-use-unicodenormalize-to-create-most-compatible-windows-1252-encoded-str", "title": "How to use Unicode::Normalize to create most compatible windows-1252 encoded string?", "body": "<p>I have a legacy app in Perl processing XML encoded in <code>UTF-8</code> most likely and which needs to store some data of that XML in some database, which uses <code>windows-1252</code> for historical reasons. Yes, this setup can't support all possible characters of the Unicode standard, but in practice I don't need to anyway and can try to be reasonable compatible.</p>\n\n<p>The specific problem currently is a file containing <code>LATIN SMALL LETTER U, COMBINING DIAERESIS</code> (<code>U+0075 U+0308</code>), which makes Perl break the existing encoding of the Unicode string to <code>windows-1252</code> with the following exception:</p>\n\n<blockquote>\n  <p>\"\\x{0308}\" does not map to cp1252</p>\n</blockquote>\n\n<p>I was able to work around that problem using <a href=\"https://perldoc.perl.org/Unicode/Normalize.html#Normalization-Forms\" rel=\"nofollow noreferrer\">Unicode::Normalize::NFKC</a>, which creates the character <code>U+00FC</code> (<code>\u00fc</code>), which perfectly fine maps to <code>windows-1252</code>. That lead to some other problem of course, e.g. in case of the character <code>VULGAR FRACTION ONE HALF</code> (<code>\u00bd</code>, <code>U+00BD</code>), because <code>NFKC</code> creates <code>DIGIT ONE, FRACTION SLASH, DIGIT TWO</code> (<code>1/2</code>, <code>U+0031 U+2044 U+0032</code>) for that and Perl dies again:</p>\n\n<blockquote>\n  <p>\"\\x{2044}\" does not map to cp1252</p>\n</blockquote>\n\n<p>According to <a href=\"https://www.unicode.org/charts/normalization/chart_Number-Other.html\" rel=\"nofollow noreferrer\">normalization rules</a>, this is perfectly fine for <code>NFKC</code>. I used that because I thought it would give me the most compatible result, but that was wrong. Using <code>NFC</code> instead fixed both problems, as both characters provide a <a href=\"https://www.unicode.org/charts/normalization/chart_Latin.html\" rel=\"nofollow noreferrer\">normalization</a> compatible with <code>windows-1252</code> in that case.</p>\n\n<p>This approach gets additionally problematic for characters for which a normalization compatible with  <code>windows-1252</code> is available in general, only different from <code>NFC</code>. One example is <code>LATIN SMALL LIGATURE FI</code> (<code>\ufb01</code>, <code>U+FB01</code>). According to it's <a href=\"http://unicode.org/reports/tr15/#Norm_Forms\" rel=\"nofollow noreferrer\">normalization rules</a>, it's representation after <code>NFC</code> is incompatible with <code>windows-1252</code>, while using <code>NFKC</code> this time results in two characters compatible with <code>windows-1252</code>: <code>fi</code> (<code>U+0066 U+0069</code>).</p>\n\n<p>My current approach is to simply try encoding as <code>windows-1252</code> as is, if that fails I'm using <code>NFC</code> and try again, if that fails I'm using <code>NFKC</code> and try again and if that fails I'm giving up for now. This works in the cases I'm currently dealing with, but obviously fails if all three characters of my examples above are present in a string at the same time. There's always one character then which results in <code>windows-1252</code>-incompatible output, regardless the order of <code>NFC</code> and <code>NFKC</code>. The only question is which character breaks when.</p>\n\n<p>BUT the important point is that each character by itself could be normalized to something being compatible with <code>windows-1252</code>. It only seems that there's no one-shot-solution.</p>\n\n<p><strong>So, is there some API I'm missing, which already converts in the most backwards compatible way?</strong></p>\n\n<p><strong>If not, what's the approach I would need to implement myself to support all the above characters within one string?</strong></p>\n\n<p>Sounds like I would need to process each string Unicode-character by Unicode-character, normalize individually with what is most compatible with <code>windows-1252</code> and than concatenate the results again. Is there some incremental Unicode-character parser available which deals with combining characters and stuff already? Does a simple Unicode-character based regular expression handles this already?</p>\n\n<p><code>Unicode::Normalize</code> provides additional functions to work on <a href=\"https://perldoc.perl.org/Unicode/Normalize.html#Decomposition-and-Composition\" rel=\"nofollow noreferrer\">partial strings</a> and such, but I must admit that I currently don't fully understand their purpose. The examples focus on concatenation as well, but from my understanding I first need some parsing to be able to normalize individual characters differently.</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1547835953, "post_id": 54258748, "comment_id": 95343179, "body": "This code doesn&#39;t make sense: the first line <i>prints to</i> <code>$chnl</code> filehandle, but in the <code>while</code> condition you <i>read from</i> it, with <code>&lt;&gt;</code>. Also, you seem to be printing ... text of commands? (And why is all this under backticks?)  Can you post a short program that actually demonstrates the problem?"}, {"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 3, "creation_date": 1547837494, "post_id": 54258748, "comment_id": 95343807, "body": "I guess <code>$chnl</code> is an SSH channel to a remote shell session? You should <a href=\"https://stackoverflow.com/posts/54258748/edit\">edit</a> your question to show how you open this channel in the first place and any other commands which you run through it prior to this."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547902629, "post_id": 54258748, "comment_id": 95357846, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 9, "user_id": 10934526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PDp-AVuZb9Y/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbT8-FICATLClLe1NMpLHOgygiL0w/mo/photo.jpg?sz=128", "display_name": "Sanjay Prasad", "link": "https://stackoverflow.com/users/10934526/sanjay-prasad"}, "reply_to_user": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1547902664, "post_id": 54258748, "comment_id": 95357855, "body": "@kenster : I am opening the channel but i am not able to get the ouput traversed through the while loop."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547903085, "post_id": 54258748, "comment_id": 95357940, "body": "What does <code>print $chnl &quot;ls | grep $_[1] \\n&quot;;</code> do? Where is that documented?"}, {"owner": {"reputation": 9, "user_id": 10934526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PDp-AVuZb9Y/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbT8-FICATLClLe1NMpLHOgygiL0w/mo/photo.jpg?sz=128", "display_name": "Sanjay Prasad", "link": "https://stackoverflow.com/users/10934526/sanjay-prasad"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547903209, "post_id": 54258748, "comment_id": 95357965, "body": "@zdim : I have removed the backticks. The question here is i am not able to see the output get pushed in to output variable. Is there any other way which we can use to get the things done?"}, {"owner": {"reputation": 9, "user_id": 10934526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PDp-AVuZb9Y/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbT8-FICATLClLe1NMpLHOgygiL0w/mo/photo.jpg?sz=128", "display_name": "Sanjay Prasad", "link": "https://stackoverflow.com/users/10934526/sanjay-prasad"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547903527, "post_id": 54258748, "comment_id": 95358046, "body": "@melpomene : $_[1] is an input which contains ABC.csv file. It will grep and find the file. I am expecting that filename to be pushed to the $chnl  and that will be traversed through while loop and pushed  in to output variable.But,  i am not able to get the data in to output variable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547923929, "post_id": 54258748, "comment_id": 95363559, "body": "So it appears  printing to <code>$chnl</code> sends commands to be executed?  (The <code>Net::SSH2::Channel</code> docs don&#39;t really say much.)  If that is the case, <code>grep filename</code> isn&#39;t much of a command, and it actually shouldn&#39;t even return, for a while at least.  Can you explain what you are trying to do with <code>ls | grep filename</code>?  (I take it from your comments above that <code>$_[1]</code> is a filename)"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1548517171, "last_edit_date": 1548517171, "creation_date": 1548516168, "answer_id": 54379742, "question_id": 54258748, "link": "https://stackoverflow.com/questions/54258748/how-to-open-the-channel-and-push-the-data-into-while-loop/54379742#54379742", "title": "How to open the channel and push the data into while loop?", "body": "<p>Quoting <a href=\"https://metacpan.org/pod/Net::SSH2::Channel#process-(-request,-message-)\" rel=\"nofollow noreferrer\">Net::SSH2::Channel</a></p>\n\n<blockquote>\n  <p>Alternatively, it is also possible to launch a remote shell (using\n  shell) and simulate the user interaction printing commands to its\n  stdin stream and reading data back from its stdout and stderr. But\n  this approach should be avoided if possible; talking to a shell is\n  difficult and, in general, unreliable.</p>\n</blockquote>\n\n<p>Furthermore using <code>ls</code> to detect if a file/directory exists is fragile and unreliable. You should use file test operations instead, e.g.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub exec_remote($$) {\n    my($ssh2, $cmd) = @_;\n\n    # every exec() requires a new channel\n    my $chan = $ssh2-&gt;channel()\n        or $ssh2-&gt;die_with_error;\n\n    # send command to remote\n    $chan-&gt;exec($cmd)\n        or $ssh2-&gt;die_with_error;\n\n    # we're done from our side\n    $chan-&gt;send_eof;\n\n    # ignore command output\n    while (&lt;$chan&gt;) {}\n\n    # wait for remote command to complete and return its exit status\n    return $chan-&gt;exit_status;\n}\n\nsub copy_remote_if_necessary($$$$) {\n     my($ssh2, $source, $destination, $file) = @_;\n\n     if (exec_remote($ssh2, \"/usr/bin/test -f ${destination}/${file}\") ne 0) {\n         die \"Copy failed!\\n\"\n             unless (exec_remote($ssh2, \"cp ${source}/${file} ${destination}/\") ne 0);\n     }\n}\n\ncopy_remote_if_necessary($ssh2, '/data/Directory1', '/data/Directory2', 'ABC.csv');\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10934526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PDp-AVuZb9Y/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbT8-FICATLClLe1NMpLHOgygiL0w/mo/photo.jpg?sz=128", "display_name": "Sanjay Prasad", "link": "https://stackoverflow.com/users/10934526/sanjay-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548517171, "creation_date": 1547832254, "last_edit_date": 1547902596, "question_id": 54258748, "link": "https://stackoverflow.com/questions/54258748/how-to-open-the-channel-and-push-the-data-into-while-loop", "title": "How to open the channel and push the data into while loop?", "body": "<p>I am trying to traverse the <code>ls | grep</code> command in to the channel, which is while looping and pushing the output to the <code>@output</code> array. But, while loop is not providing the necessary output because of which the code will die with <code>die \"could not find the file $_[1] in $Source to $Destination \\n\" unless(@output);</code>. If I comment the die part of the code and proceed with the copy from source to destination is not working.</p>\n\n<p>Here is part of my code:</p>\n\n<pre><code>    my $host =\"$hash{Linux_Server_IP}\";\n    my $Uname = \"$hash{Linux_Server_Username}\";\n    my $password =\"$hash{Linux_Server_Password}\";\n    my $ssh2= Net::SSH2-&gt;new();\n\n    $ssh2-&gt;connect($host)or die \"Could not connect : $@ \\n \";\n    $ssh2-&gt;auth_password($Uname,$password) or die \"Could not login : Reason : $@\\n\";\n    $ssh2-&gt;blocking();\n    our $chnl = $ssh2-&gt;channel();\n    $chnl-&gt;shell();\n\nprint $chnl \"ls | grep $_[1] \\n\";\nmy @output;\nsleep(1);\nwhile (&lt;$chnl&gt;){push @output,$_};\ndie \"could not find the file $_[1] in $Source to $Destination \\n\" unless(@output);\nprint $chnl \"cp $Source $Destination \\n\";\n</code></pre>\n\n<p>Error in the log:</p>\n\n<blockquote>\n  <p>could not find the file ABC.csv in /data/Directory1/ABC.csv to /data/Directory2/ABC.csv </p>\n</blockquote>\n\n<p>I manually verified the file on the server and it does exist. Please advise. </p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 23, "user_id": 10934368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a48942c6ea2d648e712548139f6c63?s=128&d=identicon&r=PG", "display_name": "Apvast", "link": "https://stackoverflow.com/users/10934368/apvast"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1547829163, "post_id": 54257765, "comment_id": 95340080, "body": "Which one first, second or third?"}, {"owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 0, "creation_date": 1547829297, "post_id": 54257765, "comment_id": 95340148, "body": "For the third, try <code>print $$myarray[1][1]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1547830766, "post_id": 54258056, "comment_id": 95340851, "body": "Note that <code>$array-&gt;[1]-&gt;[2]</code> is the same as <code>@{ @{ $myarray }[0] }[0]</code>"}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 5, "last_activity_date": 1547829396, "creation_date": 1547829396, "answer_id": 54258056, "question_id": 54257765, "link": "https://stackoverflow.com/questions/54257765/perl-multidimensional-array-access/54258056#54258056", "title": "Perl multidimensional array access", "body": "<p>The first and second examples are functionally equivalent. One is just syntactic sugar for the other.</p>\n\n<p>The third is semantically different. Whereas it is acceptable to omit <code>-&gt;</code> operators between indices, it is not acceptable to do so between identifiers or subroutine calls and indices if the variable (or subroutine) contains (or returns) a reference, because Perl will treat those as non-references in that case.</p>\n\n<p>There is no situation where <code>$array-&gt;[1][2]</code> could mean anything aside from <code>$array-&gt;[1]-&gt;[2]</code>, but if it were permissible to omit the arrow between the identifier and the first index, it would be ambiguous as to whether the structure being indexed into looked like <code>[1,...]</code> or <code>(1,...)</code>, which are different things. </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1547831402, "last_edit_date": 1547831402, "creation_date": 1547830320, "answer_id": 54258302, "question_id": 54257765, "link": "https://stackoverflow.com/questions/54257765/perl-multidimensional-array-access/54258302#54258302", "title": "Perl multidimensional array access", "body": "<p><code>$myarray-&gt;[1]</code> means \"look up index 1 in an array using the array reference stored in <code>$myarray</code>\".</p>\n\n<p><code>$myarray[1]</code> means \"look up index 1 in the array <code>@myarray</code>\".</p>\n\n<p>The two variables <code>$myarray</code> and <code>@myarray</code> have no connection at all.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548095744, "post_id": 54258355, "comment_id": 95412274, "body": "Minor note: while <code>@$myarray</code> is how you dereference it as an array, to dereference and access one element would be <code>$$myarray[0]</code>, which is then equivalent to the arrow notation. The same way that you use <code>@array</code> and <code>$array[0]</code>."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 4, "last_activity_date": 1548146902, "last_edit_date": 1548146902, "creation_date": 1547830553, "answer_id": 54258355, "question_id": 54257765, "link": "https://stackoverflow.com/questions/54257765/perl-multidimensional-array-access/54258355#54258355", "title": "Perl multidimensional array access", "body": "<p>Three points</p>\n\n<ol>\n<li>$myarray is holding an array reference, not an array. </li>\n<li>$mayarray and @myarray are different variables</li>\n<li>Perl doesn't really do multidimensional arrays</li>\n</ol>\n\n<p>All references are held in scalars, so all references are held in variables that start with <code>$</code>.</p>\n\n<p>The <code>[ ... ]</code> creates an anonymous array reference so <code>[ [1, 2, 3], [4, 5, 6], [7, 8, 9]]</code> is creating an anonymous array reference containing 3 anonymous array references each containing 3 scalars.</p>\n\n<p>This means that the assignment to $myarray is assigning the outer anonymous array reference to it.</p>\n\n<p>In order two access what a reference is pointing two you need to dereference it. You can do that by placing the symbol for the type of what the reference points to in front of the reference like <code>@$myarray</code>. So <code>$$myarray[0]</code> is the first element of the anonymous array held in the reference <code>$myarray</code> or you can use the indirect syntax <code>$myarray-&gt;[0]</code>.</p>\n\n<p>In your example <code>$myarray-&gt;[0]</code> holds the array reference <code>[1,2,3]</code> So this can be de referenced in the same way giving <code>$myarray-&gt;[0]-&gt;[0]</code> This says dereference <code>$myarray</code> and give me the first element, which is an array reference, then dereference that and give me the first element of that.</p>\n\n<p>This gives your second example.</p>\n\n<p>Perl allows you to drop the <code>-&gt;</code> between <code>]</code> and <code>[</code> as well as <code>}</code> and <code>{</code> for anonymous hashes, as syntactic sugar. This gives <code>$myarray-&gt;[0][0]</code> which is your first example.</p>\n\n<p>Your third example is looking for the first element of <code>@myarray</code> which is a different variable than <code>$myarray</code>. if you had put <code>use strict</code> at the top of your script Perl would have caught this error for you.</p>\n\n<p>It is a good idea to put</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>As the first two lines of any Perl script or module as they will trap a multitude of bad and potentially fatal errors in your Program. If you are debugging a program then adding <code>use diagnostics</code> under <code>use strict</code> gives more verbose messages.</p>\n"}], "owner": {"reputation": 23, "user_id": 10934368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a48942c6ea2d648e712548139f6c63?s=128&d=identicon&r=PG", "display_name": "Apvast", "link": "https://stackoverflow.com/users/10934368/apvast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 54258355, "answer_count": 3, "score": 2, "last_activity_date": 1548146902, "creation_date": 1547828301, "question_id": 54257765, "link": "https://stackoverflow.com/questions/54257765/perl-multidimensional-array-access", "title": "Perl multidimensional array access", "body": "<p>Lets say the multidimensional array is like this,</p>\n\n<pre><code>$myarray = [ [1, 2, 3], [4, 5, 6], [7, 8, 9]];\n</code></pre>\n\n<p>Trying to access it in three ways,</p>\n\n<pre><code>print $myarray-&gt;[1][1] #prints 5\nprint $myarray-&gt;[1]-&gt;[1] #also prints 5\nprint $myarray[1][1] #prints nothing\n</code></pre>\n\n<p>I can't figure the difference between the first and the second type of access. Specifically, second one is more explicit but still first one works. That compels me to think third better work as well (which I know won't because <code>myarray</code> is actually a reference and not an array).</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1530, "user_id": 319296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898a9ad7ccedbe97f1febba2a9a377c8?s=128&d=identicon&r=PG", "display_name": "imran", "link": "https://stackoverflow.com/users/319296/imran"}, "edited": false, "score": 0, "creation_date": 1547825516, "post_id": 54256533, "comment_id": 95338117, "body": "instead of two loops, use just one loop. put the <code>s&#47;_&#47;&#47;g;</code> right below the space removal"}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1547826329, "post_id": 54256533, "comment_id": 95338577, "body": "What does your glob return? You have a double slash in the path you feed to glob."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1547830486, "last_edit_date": 1547830486, "creation_date": 1547829887, "answer_id": 54258203, "question_id": 54256533, "link": "https://stackoverflow.com/questions/54256533/perl-regex-string-replacement-is-not-recognizing-underscores-in-a-string/54258203#54258203", "title": "Perl Regex string replacement is not recognizing underscores in a string", "body": "<p>The problem is that your directory name contains an underscore. So when you remove all of the underscores from <code>$_</code>, you change the name of the directory and the <code>move()</code> tries to move your renamed file into a renamed directory which (presumably) doesn't exist.</p>\n\n<p>One solution is to use <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow noreferrer\">File::Basename</a> to split <code>$_</code> into the directory name and the filename and to only change the filename.</p>\n\n<p>Another solution would be to change directory into <code>$dir</code> before calling <code>glob()</code> (and then removing <code>$dir/</code> from the parameter you pass to <code>glob()</code>).</p>\n\n<p>You might have seen what the problem was is you have checked the return value of <code>move()</code> and displayed an appropriate error message.</p>\n\n<pre><code>move($orig, $_)\n  or die \"Could not move $orig to $_: $!\";\n</code></pre>\n\n<p>Also note, that by printing out <code>$orig</code> and <code>$_</code> before calling <code>move()</code> you would have a) probably seen what the problem was and b) realised that the problem has nothing to do with Perl's string replacement (as you would have seen that the replacement was carried out successfully). This is, surely, basic debugging practice and would have avoided (at the very least) you posting a question with a completely misleading title :-)</p>\n"}], "owner": {"reputation": 19, "user_id": 3288096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96cdc34165379e644c20e94ff6cd510?s=128&d=identicon&r=PG&f=1", "display_name": "user115657", "link": "https://stackoverflow.com/users/3288096/user115657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547830486, "creation_date": 1547823683, "question_id": 54256533, "link": "https://stackoverflow.com/questions/54256533/perl-regex-string-replacement-is-not-recognizing-underscores-in-a-string", "title": "Perl Regex string replacement is not recognizing underscores in a string", "body": "<p>I'm trying to batch rename a bunch of files using Perl and Regex.  I've been able to change most things so far but I'm having trouble removing underscores.  I've search and found several examples, all with similar syntax but for some reason it's not working for me.  </p>\n\n<p>Here's an an example of what my file names look like:</p>\n\n<p>HP_1 Level 1 Geology_Plan_1_400dpi.jpg</p>\n\n<p>Here's my code so far:</p>\n\n<pre><code>#  Declare directory path\nmy $dir = './Georeferenced_Images.tri/TEST/';\n\n#  Initialization message\nprintf \"Changing names...\\n\";\n\n#  Remove spaces\nmy @list = glob(\"$dir/*\");\nfor (@list) {\n      my $orig = $_;\n      s/\\s+//g;\n      move($orig, $_);  \n}\n\n#  Remove underscores\n@list = glob(\"$dir/*\");\nfor (@list) {\n      my $orig = $_;\n      s/_//g;\n      move($orig, $_);  \n}\n</code></pre>\n\n<p>The top part of the code removes the spaces.  The second part of the code is not removing the underscores.  I've played around with the code and it works if I do something like:</p>\n\n<pre><code>s/_Plan_//g;\n</code></pre>\n\n<p>It doesn't work if I just try to remove the underscores.  Any help would be great!</p>\n\n<p>Thanks</p>\n"}, {"tags": ["sql", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547823180, "post_id": 54256097, "comment_id": 95336670, "body": "I don&#39;t see any database related code. How do you send the data to the database?"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547823530, "post_id": 54256097, "comment_id": 95336917, "body": "for this moment i want only print"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547823761, "post_id": 54256097, "comment_id": 95337055, "body": "Also, what is <code>$fh</code>? Or did you mean <code>while (&lt;$fh&gt;)</code>?"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547824087, "post_id": 54256097, "comment_id": 95337239, "body": "yes, i mean while (&lt;$fh&gt;)"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547825991, "post_id": 54256097, "comment_id": 95338354, "body": "@choroba yes, i mean while (&lt;$fh&gt;)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547827468, "post_id": 54256097, "comment_id": 95339184, "body": "Also, why does it say 4 rows when there are only 3?"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547828220, "post_id": 54256097, "comment_id": 95339590, "body": "@ yes you are right"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1547828681, "post_id": 54256097, "comment_id": 95339831, "body": "how can i script that with fast printing"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547829044, "post_id": 54256097, "comment_id": 95340024, "body": "@dfgert: You seem to have forgotten to ask a question. What, exactly, do you want to change about the current behaviour?"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1547830027, "post_id": 54256097, "comment_id": 95340504, "body": "my question is how to do : SID OSUSER                  TERMINAL PROGRAM  rows selected            1 titi                    toto     tata     3       2 gigi                    gogo     gaga     3      4 fifi                    fofo     fafa     3"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1547831695, "post_id": 54258251, "comment_id": 95341304, "body": "this is not what i want"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 2, "creation_date": 1547845279, "post_id": 54258251, "comment_id": 95346903, "body": "Could you be more specific?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1547894356, "post_id": 54258251, "comment_id": 95355937, "body": "@choroba: It seems unlikely :-)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1547830086, "creation_date": 1547830086, "answer_id": 54258251, "question_id": 54256097, "link": "https://stackoverflow.com/questions/54256097/perl-slow-parsing-and-send-to-database/54258251#54258251", "title": "perl - slow parsing and send to database", "body": "<p>You don't know the number of rows until you've processed them all. So, keep the output in a buffer, and print it at the end of the file processing:</p>\n\n<pre><code>    #!/usr/bin/perl\n    use warnings;\n    use strict;\n    use feature qw{ say };\n\n    open my $fh, '&lt;', 'log' or die $!;\n\n    my @buffer;\n    while (&lt;$fh&gt;) {\n        next if $. &lt; 3;\n        if (/^([0-9]+) rows selected\\.$/) {\n            die \"Wrong number of rows reported: $1, seen \", scalar @buffer\n                if $1 != @buffer;\n        } else {\n            push @buffer, [ split ' ' ];\n        }\n    }\n    for (@buffer) {\n        say join \"\\t\", @$_, scalar @buffer;\n    }\n</code></pre>\n\n<p>or process the file twice. In the first run, just count the lines, in the second one, print them one by one, appending the count:</p>\n\n<pre><code>open my $fh, '&lt;', 'log' or die $!;\n\n1 while &lt;$fh&gt;;\nmy $size = $. - 3;\nseek $fh, $. = 0, 0;\nwhile (&lt;$fh&gt;) {\n    next if $. &lt; 3;\n    if (/^([0-9]+) rows selected\\.$/) {\n        die \"Wrong number of rows reported: $1, seen \", $size\n            if $1 != $size;\n    } else {\n        say join \"\\t\", split(' '), $size;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 54258251, "answer_count": 1, "score": 0, "last_activity_date": 1547830086, "creation_date": 1547822142, "last_edit_date": 1547829948, "question_id": 54256097, "link": "https://stackoverflow.com/questions/54256097/perl-slow-parsing-and-send-to-database", "title": "perl - slow parsing and send to database", "body": "<p>I have this code in perl, and I want send in a database.</p>\n\n<p>my code :</p>\n\n<pre><code>my $dir = '/mnt/Logs/';\nforeach my $fp (glob(\"$dir/SESSIONS*\")) {\n  printf \"%s\\n\", $fp;\n  open my $fh, \"&lt;\", $fp or die \"can't read open '$fp': $OS_ERROR\"\nwhile ($fh) {\n\n    @line = split(' ',$_);      \n    print \"$line[0] $line[1] $line[2] $line[3] $line[4] $line[5]\\n\";\n}\n</code></pre>\n\n<p>logs :</p>\n\n<pre><code>           SID OSUSER                    TERMINAL        PROGRAM                    \n    ---------- ------------------------- --------------- -------------------------  \n             1 titi                    toto     tata          \n             2 gigi                    gogo     gaga          \n             4 fifi                    fofo     fafa \n3 rows selected.\n</code></pre>\n\n<p>my question is how to do this :</p>\n\n<pre><code>SID OSUSER                  TERMINAL PROGRAM  rows selected         \n  1 titi                    toto     tata     3    \n  2 gigi                    gogo     gaga     3   \n  4 fifi                    fofo     fafa     3\n</code></pre>\n"}, {"tags": ["perl", "get"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1547809195, "post_id": 54252510, "comment_id": 95329190, "body": "I can&#39;t reproduce the problem. It does not return undef when I run it. <a href=\"https://i.imgur.com/NhlZ5xs.png\" rel=\"nofollow noreferrer\">i.imgur.com/NhlZ5xs.png</a>"}, {"owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1547809809, "post_id": 54252510, "comment_id": 95329525, "body": "weird. I have this error: Use of uninitialized value $content"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1547810059, "post_id": 54252510, "comment_id": 95329664, "body": "Does <code>perl -MLWP::Protocol::https -e 1</code> return an error message? If yes, then you do not have support for the <code>https:</code> protocol. Please install <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1547810441, "post_id": 54252510, "comment_id": 95329856, "body": "BTW: your URL also supports <code>http:</code> protocol (both return the same answer). If it works with that, then you are missing <code>https:</code> support or there are some issues with the SSL handshake."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1547918903, "post_id": 54252510, "comment_id": 95362093, "body": "While not obsolete, you&#39;ve discovered the reason it shouldn&#39;t be used: It&#39;s impossible to tell what went wrong. Best to use LWP::UserAgent; it&#39;s not any longer"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1547821546, "last_edit_date": 1547821546, "creation_date": 1547811485, "answer_id": 54253228, "question_id": 54252510, "link": "https://stackoverflow.com/questions/54252510/perl-get-from-lwpsimple-is-obsolete/54253228#54253228", "title": "Perl: get() from LWP::Simple is obsolete?", "body": "<p>If the function was obsolete, then that would be clearly documented somewhere.</p>\n\n<p>I see you're trying to get an <code>https</code> URL. Does it work if you try to get an <code>http</code> one?</p>\n\n<p>You need to do a little more work in order to use LWP::Simple with <code>https</code>. This is described in the <a href=\"https://metacpan.org/source/ETHER/libwww-perl-6.36/README.SSL\" rel=\"nofollow noreferrer\">README.SSL</a> that comes with the LWP distribution. Currently, it says this:</p>\n\n<blockquote>\n  <p>As of libwww-perl v6.02 you need to install the LWP::Protocol::https\n  module from its own separate distribution to enable support for\n  https://... URLs for LWP::UserAgent.</p>\n  \n  <p>This makes it possible for that\n  distribution to state the required dependencies as non-optional.  See\n  <a href=\"https://rt.cpan.org/Ticket/Display.html?id=66838\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Ticket/Display.html?id=66838</a> for further\n  discussion why we ended up with this solution.</p>\n</blockquote>\n\n<p>So the solution is (almost certainly) to install <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>.</p>\n"}], "owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547821546, "creation_date": 1547808959, "question_id": 54252510, "link": "https://stackoverflow.com/questions/54252510/perl-get-from-lwpsimple-is-obsolete", "title": "Perl: get() from LWP::Simple is obsolete?", "body": "<p>I just wanted to fetch data with the function get, but it always return undef, so I am wondering if this method still work ? Thanks for your feedback.</p>\n\n<p>Example of code:</p>\n\n<pre><code>my $content = get(\"https://www.uniprot.org/uniprot/?query=KZS17205.1&amp;format=tab&amp;columns=entry%20name\");\n\nprint $content;\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 0, "last_activity_date": 1548114760, "creation_date": 1548114760, "answer_id": 54299395, "question_id": 54250424, "link": "https://stackoverflow.com/questions/54250424/is-it-possible-to-restart-the-mojolicious-minion-worker-gracefully/54299395#54299395", "title": "Is it possible to restart the Mojolicious Minion worker gracefully?", "body": "<p>See this <a href=\"https://github.com/mojolicious/minion/issues/76\" rel=\"nofollow noreferrer\">proposed feature</a> - though nobody has worked on it yet.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54299395, "answer_count": 1, "score": 0, "last_activity_date": 1548114800, "creation_date": 1547801516, "last_edit_date": 1548114800, "question_id": 54250424, "link": "https://stackoverflow.com/questions/54250424/is-it-possible-to-restart-the-mojolicious-minion-worker-gracefully", "title": "Is it possible to restart the Mojolicious Minion worker gracefully?", "body": "<p>I'd like to be able to gracefully restart the Minion worker I am working on developing (i.e.: without gong back to the command line, killing it and restarting it, which is what I do now).</p>\n\n<p>Is that possible? I'm hoping for something similar to what one can do with a Plack server, i.e.: sending a HUP signal restarts the server.  </p>\n"}, {"tags": ["apache", "perl", "cgi.pm"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1547800850, "post_id": 54250230, "comment_id": 95324675, "body": "Please show us also how you send the POST request to your Perl program."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1547801740, "post_id": 54250230, "comment_id": 95325154, "body": "Also, why do you have <code>-d</code> on the hashbang line of the script?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1547801948, "post_id": 54250230, "comment_id": 95325270, "body": "(also, there is no data available on <code>*STDIN</code> because <code>CGI</code> will already have read all available data there. So, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can replicate this. This includes the HTML you&#39;re using to submit the POST request."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1547834987, "post_id": 54250230, "comment_id": 95342762, "body": "If you already have access to the POSTed request, I suggest adding it as well, including headers and body etc. I doesn&#39;t hurt if people can check actually sent values on their own."}, {"owner": {"reputation": 61, "user_id": 4072646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06a1a94234c8372dfb2cc554f7507f17?s=128&d=identicon&r=PG&f=1", "display_name": "curiousgage", "link": "https://stackoverflow.com/users/4072646/curiousgage"}, "edited": false, "score": 0, "creation_date": 1547835511, "post_id": 54250230, "comment_id": 95343002, "body": "Brilliant! The <code>-d</code> was the issue here and I&#39;ll mark that as the answer. I added the form submit code for posterity (I was using postman to test so I didn&#39;t have a sample form file before). And thanks for the explanation on the STDIN.  Unfortunately, the actual Perl app now breaks without the <code>-d</code>, but at least I have a new problem to solve. :)"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4072646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06a1a94234c8372dfb2cc554f7507f17?s=128&d=identicon&r=PG&f=1", "display_name": "curiousgage", "link": "https://stackoverflow.com/users/4072646/curiousgage"}, "is_accepted": true, "score": 0, "last_activity_date": 1547835809, "creation_date": 1547835809, "answer_id": 54259563, "question_id": 54250230, "link": "https://stackoverflow.com/questions/54250230/perl-scripts-on-apache-not-retrieving-post-data/54259563#54259563", "title": "Perl scripts on Apache not retrieving POST data", "body": "<p>Removing the <code>-d</code> from the shebang solves this issue. Kudos to Corion for the answer.</p>\n"}], "owner": {"reputation": 61, "user_id": 4072646, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06a1a94234c8372dfb2cc554f7507f17?s=128&d=identicon&r=PG&f=1", "display_name": "curiousgage", "link": "https://stackoverflow.com/users/4072646/curiousgage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 54259563, "answer_count": 1, "score": 0, "last_activity_date": 1547835809, "creation_date": 1547800747, "last_edit_date": 1547834485, "question_id": 54250230, "link": "https://stackoverflow.com/questions/54250230/perl-scripts-on-apache-not-retrieving-post-data", "title": "Perl scripts on Apache not retrieving POST data", "body": "<p>I'm trying to get a pre-existing PERL web application running on my local MAMP apache2 server and am having problems getting post data. The app uses cgi.pm to try to grab data from <code>$cgi-&gt;param</code>, but param is always empty even when properly formatted post data is sent in <code>x-www-form-urlencoded</code> format.</p>\n\n<p>Additionally, <code>STDIN</code> is always empty and throws an error if not prefaced with \\*.</p>\n\n<p>hello-world-form.cgi:</p>\n\n<pre><code>#!/[localpath]/perl5/perlbrew/perls/perl-5.24.0/bin/perl -d\n\nuse strict;\nuse warnings;\n\nprint \"Content-type: text/html\\n\\n\";\nprint qq(\n  &lt;!doctype html&gt;\n  &lt;html&gt;\n  &lt;body&gt;\n    &lt;form action=\\\"hello-world.cgi\\\" method=\\\"POST\\\"&gt;\n      &lt;input type=\\\"text\\\" name=\\\"myparam\\\" /&gt;\n      &lt;input type=\\\"submit\\\" value=\\\"submit post var\\\" /&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n  &lt;/html&gt;\n);\n</code></pre>\n\n<p>hello-world.cgi:</p>\n\n<pre><code>#!/[localpath]/perlbrew/perls/perl-5.24.0/bin/perl -d\n\nuse strict;\nuse warnings;\nuse CGI;\n\nmy $q = CGI-&gt;new();\n\nprint \"Content-type: text/html\\n\\n\";\nprint \"&lt;p&gt;key = \" . $q-&gt;param('myparam') . \"&lt;/p&gt;\\n\"; #this is always empty\nmy @names = $q-&gt;param;\nforeach my $name (@names) {\n  print \"&lt;p&gt;$name = \" . $q-&gt;param($name) . \"&lt;/p&gt;\"; #this never runs\n}\n\nmy $postdata = '';\nmy $in = \\*STDIN;\nmy $bytes = read($in, $postdata, $ENV{'CONTENT_LENGTH'});\nprint \"&lt;p&gt;postdata = $postdata&lt;/p&gt;\\n\"; # postdata is empty\nprint \"&lt;p&gt;content length = \" . $ENV{'CONTENT_LENGTH'} . \"&lt;/p&gt;\\n\"; # this number seems correct\n\nforeach my $key (keys %ENV) {\n  print \"&lt;p&gt;$key --&gt; $ENV{$key}&lt;/p&gt;\\n\"; # nothing special here\n}\n</code></pre>\n\n<p>httpd.conf:</p>\n\n<pre><code>...\nLoadModule cgi_module modules/mod_cgi.so\nLoadModule perl_module modules/mod_perl.so\n...\nScriptAlias /cgi-bin/ \"/[siteroot]/cgi-bin/\"\nAlias /perl/ \"/Applications/MAMP/cgi-bin/\"\n&lt;IfModule perl_module&gt;\n    PerlModule ModPerl::Registry\n    &lt;Location /perl&gt;\n        SetHandler perl-script\n        PerlResponseHandler ModPerl::Registry\n        PerlOptions +ParseHeaders\n        Options +ExecCGI\n    &lt;/Location&gt;\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>I'm running PERL v5.24.0 via perlbrew with these modules:</p>\n\n<pre><code>&gt; perlbrew list-modules\n\nCGI\nDate::Parse\nEncode::Locale\nHTML::Parser\nHTML::Tagset\nHTTP::Date\nHTTP::Message\nIO::HTML\nLWP::MediaTypes\nPerl\nSub::Uplevel\nTest::Deep\nTest::Needs\nTest::NoWarnings\nTest::Warn\nTry::Tiny\nURI\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["perl", "websocket"], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1547795476, "post_id": 54248500, "comment_id": 95322505, "body": "Is it the same for IO::Socket::SSL? Do I must use inet_ntoa()?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1547795942, "post_id": 54248500, "comment_id": 95322689, "body": "See <a href=\"https://metacpan.org/pod/distribution/IO-Socket-SSL/lib/IO/Socket/SSL.pod#new(...)\" rel=\"nofollow noreferrer\">IO::Socket::SSL#new</a>: &quot;You may use all the friendly options that came bundled with the super class (e.g. IO::Socket::IP, IO::Socket::INET, &quot;. <code>inet_ntoa()</code> is only required if you want the socket address in human-readable format. You apply <code>sockaddr</code> to the socket returned by <code>$server-&gt;accept()</code>, i.e. the one you pass to <code>IO::Socket::SSL-&gt;start_SSL()</code>"}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1547795973, "post_id": 54248500, "comment_id": 95322707, "body": "If the client and the server listener ar ethe same computer, &quot;localhost:$Port&quot; may actually be enough, I don&#39;t really need to figure out what is the exact IP address the server is, right?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "edited": false, "score": 0, "creation_date": 1547796196, "post_id": 54248500, "comment_id": 95322801, "body": "If that is enough, just use <code>sockport()</code> to retrieve the port number."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1547791435, "creation_date": 1547791435, "answer_id": 54248500, "question_id": 54248388, "link": "https://stackoverflow.com/questions/54248388/how-to-get-my-own-server-ip-address-with-iosocketssl/54248500#54248500", "title": "How to get my own server IP address with IO::Socket::SSL", "body": "<p>Use <code>sockaddr()</code> method on the IO::Socket:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IO::Socket::INET;\n\nmy $socket = IO::Socket::INET-&gt;new(\n    PeerAddr =&gt; 'localhost:3306'\n) or die \"$!\\n\";\n\nprint inet_ntoa($socket-&gt;sockaddr()), \"\\n\";\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ perl dummy.pl\n127.0.0.1\n</code></pre>\n\n<p><strong>EDIT:</strong> please note that you have to use <code>sockaddr</code> on the accepted socket for the client, not the listening socket. On the listening socket you'll only see the address(es) to which it is bound to, which might be IN_ADDR_ANY (AKA 0.0.0.0).</p>\n"}], "owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 54248500, "answer_count": 1, "score": 1, "last_activity_date": 1547798632, "creation_date": 1547790766, "last_edit_date": 1547798632, "question_id": 54248388, "link": "https://stackoverflow.com/questions/54248388/how-to-get-my-own-server-ip-address-with-iosocketssl", "title": "How to get my own server IP address with IO::Socket::SSL", "body": "<p>I need to issue local client in Perl for internal connection monitoring purpose, so for example (not intercepting, a separate client to an existing server): </p>\n\n<pre><code>my $srv_ip=????; # I know my server IP address, but this is general and may change, I want this to be taken programmatically somehow.\nmy $cl=IO::Socket::SSL-&gt;new($srv_ip:$Port);\n</code></pre>\n\n<p>1) I am inside an open websocket server using Net::Websocket::Server, but reading their spec I didn't found how to retreive my server IP addr and I think there shall be a much simpler way (maybe from %ENV, but I am not sure that this approach will be ok in every OS - it shall be portable, at least for Linux systems).\n2) The server connection listener I also opened with IO::Socket::SSL:</p>\n\n<pre><code>my @crt=&amp;SSLCerts(); die 'E101' if(@crt==0);\nmy $ssl=IO::Socket::SSL-&gt;new(\n    Listen        =&gt; 10000,\n    Timeout       =&gt; 45,\n    LocalPort     =&gt; $Port,\n    Proto         =&gt; 'tcp',\n    SSL_cert_file =&gt; \"$EF::Base/$crt[0][0].crt\",\n    SSL_key_file  =&gt; \"$EF::Base/$crt[1][0].key\"\n) or die \"E102: $!\";\n</code></pre>\n\n<p>but in their spec I also didn't found my own server IP adress variable that I can use.</p>\n\n<p>3) Note that the same pl program is for many systems, each one and it's port. Though they share the same host, the address is entered when loggin in from the client and NOT kept in any variable (this could help, but I think there must be a simple way to retreive it, maybe from %ENV).</p>\n\n<p>What should I put in $srv_ip to get it work?</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 0, "creation_date": 1547789971, "post_id": 54248136, "comment_id": 95320700, "body": "You&#39;ve quoted what looks like the source to your 2D array, but you haven&#39;t actually quoted the contents of the 2D array..  Try putting <code>use Data::Dumper; print Data::Dumper-&gt;Dump([\\@_], [&#39;*_&#39;]);</code>right after the <code>my %seen</code> line, and give us the output that provides.  I ask this, because there are multiple ways one could convert that table into a 2D array, and that could change the answer."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1547795663, "last_edit_date": 1547795663, "creation_date": 1547793819, "answer_id": 54248919, "question_id": 54248136, "link": "https://stackoverflow.com/questions/54248136/remove-duplicates-from-a-2d-array-in-perl/54248919#54248919", "title": "Remove duplicates from a 2D array in perl", "body": "<p>First: you really should try not to use outdated Perl syntax and side effects.</p>\n\n<p>Second: the answer depends on the data structure you generate from the input. Here are two example implementations:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# 2D Array: list of array references\nmy @data = (\n    ['Rafa', 'Nadal', 'Data1'],\n    ['Goran', 'Ivan', 'Data2'],\n    ['Leander', 'Paes', 'Data2'],\n    ['Leander', 'Paes', 'Data2'],\n);\nmy %seen;\n\nforeach my $unique (\n    grep {\n        not $seen{\n            join('', @{ $_ })\n        }++\n    } @data\n) {\n    print join(',', @{ $unique }), \"\\n\";\n}\nprint \"\\n\";\n\n# List of \"objects\", keys are table column names\n@data = (\n    { first =&gt; 'Rafa',    last =&gt; 'Nadal', data =&gt; 'Data1' },\n    { first =&gt; 'Goran',   last =&gt; 'Ivan',  data =&gt; 'Data2' },\n    { first =&gt; 'Leander', last =&gt; 'Paes',  data =&gt; 'Data2' },\n    { first =&gt; 'Leander', last =&gt; 'Paes',  data =&gt; 'Data2' },\n);\n%seen = ();\n\nmy @key_order = qw(first last data);\n\nforeach my $unique (\n    grep {\n        not $seen{ \n            join('', @{ $_ }{ @key_order } )\n        }++\n    } @data\n) {\n    print join(',', @{ $unique }{ @key_order }), \"\\n\";\n}\n</code></pre>\n\n<p>Output:\n</p>\n\n<pre><code>$ perl dummy.pl\nRafa,Nadal,Data1\nGoran,Ivan,Data2\nLeander,Paes,Data2\n\nRafa,Nadal,Data1\nGoran,Ivan,Data2\nLeander,Paes,Data2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1548664424, "last_edit_date": 1548664424, "creation_date": 1547793900, "answer_id": 54248932, "question_id": 54248136, "link": "https://stackoverflow.com/questions/54248136/remove-duplicates-from-a-2d-array-in-perl/54248932#54248932", "title": "Remove duplicates from a 2D array in perl", "body": "<p>The shown sub is good for the job, with an array which for elements has array references. That is indeed a basic way to organize 2D data, where your rows are arrayrefs.</p>\n\n<p>There are modules that can be leveraged for this, but this good old method works fine as well</p>\n\n<pre><code>use warnings;\nuse strict;    \nuse Data::Dump qw(dd);\n\nsub uniq_arys {\n    my %seen; \n    grep { not $seen{join $;, @$_}++ } @_; \n} \n\nmy @data = ( \n    [ qw(one two three) ],  \n    [ qw(ten eleven twelve) ],  \n    [ qw(10 11 12) ],  \n    [ qw(ten eleven twelve) ],  \n); \n\nmy @data_uniq = uniq_arys(@data); \n\ndd \\@data_uniq;\n</code></pre>\n\n<p>Prints as expected (last row is gone), using <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> to show data.</p>\n\n<p>The sub works by joining each array into a string, and those are then checked for duplicates using a hash. The <a href=\"https://perldoc.perl.org/perlvar.html#$;\" rel=\"nofollow noreferrer\">$;</a> is a <em>subscript separator</em>, and an empty string <code>''</code> is just fine instead. </p>\n\n<p>This approach creates a lot of ancillary data -- in principle doubles the data -- and if performance becomes a problem it may be better to simply compare element-wise (at the cost of complexity). This can be an issue only with rather large data sets.</p>\n\n<hr>\n\n<p>A module example: use <code>uniq_by</code> from <a href=\"https://metacpan.org/pod/List::UtilsBy#uniq_by\" rel=\"nofollow noreferrer\">List::UtilsBy</a></p>\n\n<pre><code>use List::UtilsBy qw(uniq_by);\n\nmy @no_dupes = uniq_by { join '', @$_ } @data;\n</code></pre>\n\n<p>This does, more or less, the same as the sub above.</p>\n"}], "owner": {"reputation": 147, "user_id": 8267952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ef54d99c06b6bf90bfe866cd939f2b?s=128&d=identicon&r=PG&f=1", "display_name": "ran1n", "link": "https://stackoverflow.com/users/8267952/ran1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 1, "accepted_answer_id": 54248919, "answer_count": 2, "score": 0, "last_activity_date": 1548664424, "creation_date": 1547788977, "question_id": 54248136, "link": "https://stackoverflow.com/questions/54248136/remove-duplicates-from-a-2d-array-in-perl", "title": "Remove duplicates from a 2D array in perl", "body": "<p>I have a 2D array in perl whose data is coming as rows in html format from a DB like the data shown below:</p>\n\n<pre><code>&lt;tr&gt;&lt;td&gt;Rafa&lt;/td&gt;&lt;td&gt;Nadal&lt;/td&gt;&lt;td&gt;Data1&lt;/td&gt;&lt;/tr&gt;,\n&lt;tr&gt;&lt;td&gt;Goran&lt;/td&gt;&lt;td&gt;Ivan&lt;/td&gt;&lt;td&gt;Data2&lt;/td&gt;&lt;/tr&gt;,\n&lt;tr&gt;&lt;td&gt;Leander&lt;/td&gt;&lt;td&gt;Paes&lt;/td&gt;&lt;td&gt;Data2&lt;/td&gt;&lt;/tr&gt;,\n&lt;tr&gt;&lt;td&gt;Leander&lt;/td&gt;&lt;td&gt;Paes&lt;/td&gt;&lt;td&gt;Data2&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>i want to remove the duplicate rows from the array. \n<code>\"&lt;tr&gt;&lt;td&gt;Leander&lt;/td&gt;&lt;td&gt;Paes&lt;/td&gt;&lt;td&gt;Data2&lt;/td&gt;&lt;/tr&gt;\"</code> should be removed in above case.\nI tried the below piece of code, but it's not working out. </p>\n\n<pre><code>sub unique {\n     my %seen;\n     grep ! $seen{ join $;, @$_ }++, @_\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1547792638, "last_edit_date": 1547792638, "creation_date": 1547786004, "answer_id": 54247799, "question_id": 54247718, "link": "https://stackoverflow.com/questions/54247718/how-to-sort-array-values-nested-inside-a-hash-with-different-keys/54247799#54247799", "title": "How to sort array values nested inside a hash with different keys?", "body": "<p>Don't store the time stamp as strings but as seconds-since-epoch. Then you can use normal numeric compare</p>\n\n<pre><code>foreach my $outage (sort { $a-&gt;{start} &lt;=&gt; $b-&gt;{start} values %outages) {\n</code></pre>\n\n<p><strong>EDIT:</strong> SOP for time stamp processing in any language/program, unless you have some really out-of-this-world requirements:</p>\n\n<ol>\n<li>parse the input format to convert time stamps to \"X since epoch\"\n\n<ul>\n<li>always convert to UTC, ie. determine time zone if it is not given</li>\n<li>determine resolution (seconds, milliseconds, microseconds) provided by input</li>\n<li><a href=\"https://metacpan.org/pod/distribution/Date-Manip/lib/Date/Manip.pod\" rel=\"nofollow noreferrer\">Date::Manip</a> can be your friend here</li>\n</ul></li>\n<li>process time stamps in your algorithm as numerical values\n\n<ul>\n<li>compare: <code>a &lt; b</code> -> a happens before b</li>\n<li>differences: <code>a - b</code> at your given resolution</li>\n</ul></li>\n<li>convert timestamps to desired output format\n\n<ul>\n<li>if you have control of the output format, always opt for a precise format, e.g. use the UTC timestamp directly or ISO-8601 format</li>\n<li>again <a href=\"https://metacpan.org/pod/distribution/Date-Manip/lib/Date/Manip/Date.pod#PRINTF-DIRECTIVES\" rel=\"nofollow noreferrer\">Date::Manip::Date printf() method</a> can be your friend here</li>\n</ul></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1547816801, "post_id": 54252146, "comment_id": 95333052, "body": "simple and nice explanation!..I liked it"}, {"owner": {"reputation": 39, "user_id": 10773441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fa1175c027604be8b0e3a13a4e2d97?s=128&d=identicon&r=PG&f=1", "display_name": "knxwledge", "link": "https://stackoverflow.com/users/10773441/knxwledge"}, "edited": false, "score": 0, "creation_date": 1547822450, "post_id": 54252146, "comment_id": 95336214, "body": "Thank you! This is perfect. I figured that I was formatting my data wrong. Was using an hash with an array instead of an array of hashes."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1547807691, "creation_date": 1547807691, "answer_id": 54252146, "question_id": 54247718, "link": "https://stackoverflow.com/questions/54247718/how-to-sort-array-values-nested-inside-a-hash-with-different-keys/54252146#54252146", "title": "How to sort array values nested inside a hash with different keys?", "body": "<p>I think this is a situation where you are making life difficult for yourself because your data structure is unnecessarily complicated. I don't know where your data is coming from, but it would be far easier if you could get an array of hashes like this:</p>\n\n<pre><code>my @outages = ({\n  type  =&gt; 'phone',\n  start =&gt; '00:00:00',\n  end   =&gt; '04:04:03',\n}, {\n  type  =&gt; 'phone',\n  start =&gt; '14:26:03',\n  end   =&gt; '18:00;00',\n}, {\n  type  =&gt; 'television',\n  start =&gt; '12:34:19',\n  end   =&gt; '12:34:25',\n});\n</code></pre>\n\n<p>The code to sort and print these then becomes almost trivial.</p>\n\n<pre><code>my $number = 1;\nfor (sort { $a-&gt;{start} cmp $b-&gt;{start} } @outages) {\n  my $row_html = '&lt;tr&gt;'\n               . \"&lt;td&gt;$number&lt;/td&gt;\"\n               . \"&lt;td&gt;$_-&gt;{type}&lt;/td&gt;\"\n               . \"&lt;td&gt;$_-&gt;{start}&lt;/td&gt;\"\n               . \"&lt;td&gt;$_-&gt;{end}&lt;/td&gt;\"\n               . \"&lt;/tr&gt;\\n\";\n  $number++;\n  print $row_html;\n}\n</code></pre>\n\n<p>It's worth noting that this only works because your timestamps can be treated as strings which are easily sorted. If the timestamps were more complicated and included dates then you're probably going to want to convert them to sortable data using something like <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> or <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a>.</p>\n\n<p>I'd also mention that one day you'll discover that including raw HTML tags in your Perl code is a recipe for disaster. Far better to use a templating system like the <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">Template Toolkit</a>.</p>\n"}], "owner": {"reputation": 39, "user_id": 10773441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fa1175c027604be8b0e3a13a4e2d97?s=128&d=identicon&r=PG&f=1", "display_name": "knxwledge", "link": "https://stackoverflow.com/users/10773441/knxwledge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1547807691, "creation_date": 1547785212, "question_id": 54247718, "link": "https://stackoverflow.com/questions/54247718/how-to-sort-array-values-nested-inside-a-hash-with-different-keys", "title": "How to sort array values nested inside a hash with different keys?", "body": "<p>I have an html table showing outage start and end times with different types of outages. Currently, I am sorting the outages in order of outage type, but I would like to be able to sort them by earliest to latest start times. The times in each start and end will already be in order, but I am trying to get them in order, regardless of type. I know for sorting by value, you usually use some sort of value compare like this \"sort { $h{$a} &lt;=> $h{$b} } keys(%h);\"</p>\n\n<pre><code>Currently they sort like:\n1 | phone | 00:00:00 | 04:08:03\n2 | phone | 14:26:03 | 18:00:00\n3 | television | 12:34:19 | 12:34:25\n\nBut it should be like:\n1 | phone | 00:00:00 | 04:08:03\n2 | television | 12:34:19 | 12:34:25\n3 | phone | 14:26:03 | 18:00:00\n</code></pre>\n\n<p>This is my code.</p>\n\n<pre><code>my %outages;\n\nmy @outage_times = qw(start end);\n\nmy %outage_reasons = (\n  'tv' =&gt; 'television',\n  'p' =&gt; 'phone'\n);\n\nforeach my $outage_reason (values %outage_reasons) {\n  foreach my $outage (@outage_times) {\n    $outages{$outage_reason}{$outage} = [];\n  }\n}\n\n$outages{television}{start} = ['00:00:00', '14:26:03'];\n$outages{television}{end} = ['04:08:03', '18:00:00'];\n$outages{phone}{start} = ['12:32:02'];\n$outages{phone}{end} = ['12:38:09'];\n\nmy $outage_number = 1;\n\nforeach my $outage (sort keys %outages){\n  for my $i (0 .. scalar (@{$outages{$outage}{start}})-1) {\n    my $outage_start_time = $outages{$outage}{start}[$i];\n    my $outage_end_time = $outages{$outage}{end}[$i];\n    my $row_html = \"&lt;tr&gt;&lt;td&gt;$outage_number&lt;/td&gt;&lt;td&gt;$outage&lt;/td&gt;\";\n        $row_html .= \"&lt;td&gt;$outage_start_time&lt;/td&gt;\";\n        $row_html .= \"&lt;td&gt;$outage_end_time&lt;/td&gt;&lt;/tr&gt;\";\n    $outage_number += 1;\n  }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1547786241, "post_id": 54247031, "comment_id": 95319878, "body": "This is not a general description of a more complicated needs. This is the actual problem. I got as far a \\t(.*?)\\t to capture groups. Of course this does not capture the first or last text strings, since there are no tabs on both ends. Besides this i have no idea how to extract the text from Line2 and replace with for example \\1(from Line1)\\2(from Line1)\\1(from Line2)\\3(from Line1)... Any ideas?"}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1547787805, "post_id": 54247031, "comment_id": 95320205, "body": "Thanks Tiw, I have modified the original post to add more details. Hopefully is clearer now and someone can help"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1547788219, "post_id": 54248039, "comment_id": 95320286, "body": "Last line stolen...^W <i>adapted</i> from <a href=\"https://stackoverflow.com/questions/38345/is-there-an-elegant-zip-to-interleave-two-lists-in-perl-5\" title=\"is there an elegant zip to interleave two lists in perl 5\">stackoverflow.com/questions/38345/&hellip;</a>"}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547789154, "post_id": 54248039, "comment_id": 95320499, "body": "This is to be implemented in a Filemaker solution and yes, it can be done in it&#39;s own scripting, however I am trying to use regex if at all possible. This will have several advantages if implemented the way I think it could in regex, maybe it can not. As far as both arrays with values for the same index, this will not happen, other than both empty."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 2, "creation_date": 1547789315, "post_id": 54248039, "comment_id": 95320535, "body": "Sorry, not familiar with Filemaker. This is probably information you should add to your question. Probably you should also show how you are using the regex you have."}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547789729, "post_id": 54248039, "comment_id": 95320634, "body": "I was just answering your question: &quot;Why do you use regex for this at all?&quot;, I am not seeking help on how to do this in Filemaker. My question is still on how to do it in regex. I showed how am I using the limited regex I have in &quot;Line1&quot; above. This is as far as I got. Thanks"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547790177, "post_id": 54248039, "comment_id": 95320756, "body": "Regex by itself has no facility for modifying anything; a regex can simply not match or match a single substring within a single string.  If you can show us how you get those two lines (are you reading consecutive lines from a file? Or are they available as variables? What if there is more than two lines?) then maybe somebody can devise something regex-based."}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547790301, "post_id": 54248039, "comment_id": 95320792, "body": "This is what I suspected, can not work on more than 1 string. Thank you very much"}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547790653, "post_id": 54248039, "comment_id": 95320871, "body": "Basically there could be any number of lines for both, and a big single string can be created with all lines of both strings as needed. I will add an example in my main post"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547790748, "post_id": 54248039, "comment_id": 95320892, "body": "Perl regex can straddle newlines so you could do something like <code>s&#47;(1)2(3)\\n4(5)6&#47;$1$2$3&#47;</code>"}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547791595, "post_id": 54248039, "comment_id": 95321119, "body": "I added a comment to the main post&quot; &quot;NOTE in response to Tripleee:&quot;. Please see if this will facilitate the use of regex in this case"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547792213, "post_id": 54248039, "comment_id": 95321307, "body": "Updated answer with a regex solution."}, {"owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547795138, "post_id": 54248039, "comment_id": 95322378, "body": "Got it! Thank you very much. One last question 1) what is the s at the beginning, I am using regexr.com to test this and it is not taking the s. Thanks again"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "edited": false, "score": 0, "creation_date": 1547797117, "post_id": 54248039, "comment_id": 95323185, "body": "It&#39;s a <a href=\"https://perldoc.perl.org/functions/s.html\" rel=\"nofollow noreferrer\">Perl built-in function to perform a regex substitution.</a>"}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 2, "last_activity_date": 1547792198, "last_edit_date": 1547792198, "creation_date": 1547788162, "answer_id": 54248039, "question_id": 54247031, "link": "https://stackoverflow.com/questions/54247031/regular-expresions-combine-2-lines/54248039#54248039", "title": "Regular Expresions combine 2 lines", "body": "<p>Why do you use regex for this at all?</p>\n\n<pre><code>@first = split('\\t', $line1);\n@second = split('\\t', $line2);\ndie \"Different length arrays\" unless($#first == $#second);\n@combined = map { $first[$_] || $second[$_] } [0..$#first];\n</code></pre>\n\n<p>You could add a check to die if both arrays have a value for the same index but that complicates the elegant <code>map</code> slightly.</p>\n\n<p>If you are hellbent on using regex, and can get the lines lined up next to each other, the regex you have is basically the way to go.  I would use <code>([^\\t]*)</code> instead of <code>(.*?)</code> to completely disambiguate it.</p>\n\n<pre><code>s/^([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)\\t([^\\t]*)$/$1\\t$2\\t$10\\t$4\\t$12\\t\\t$7/\n</code></pre>\n\n<p>where $1..$7 are from the first half and $8..$14 correspond to the first through seventh fields in the second (so we use 1 - 2 - 3+7=10 - 4 - 5+7=12 - nothing - 7 to get the fields you want).</p>\n"}], "owner": {"reputation": 161, "user_id": 10931148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e65d6216bf533dcf4f8c68a8c83212?s=128&d=identicon&r=PG&f=1", "display_name": "fionpo", "link": "https://stackoverflow.com/users/10931148/fionpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1547792198, "creation_date": 1547778892, "last_edit_date": 1547791874, "question_id": 54247031, "link": "https://stackoverflow.com/questions/54247031/regular-expresions-combine-2-lines", "title": "Regular Expresions combine 2 lines", "body": "<p>I have 2 tab delimited (I replaced the tabs with \u2192 below) lines as in:</p>\n\n<pre><code>Line1Word1\u2192Line1 Words2\u2192\u2192Line1Word3\u2192\u2192\u2192Line1 Words4\n\u2192\u2192Line2Word1\u2192\u2192Line2 Words2\u2192\u2192\n</code></pre>\n\n<p>Expected result</p>\n\n<pre><code>Line1Word1\u2192Line1 Words2\u2192Line2Word1\u2192Line1Word3\u2192Line2 Words2\u2192\u2192Line1 Words4\n</code></pre>\n\n<p>It's easy to see what the result should be, by copying the 3 lines in Excel</p>\n\n<p><img src=\"https://i.stack.imgur.com/LbTIf.png\" alt=\"Display in Excel\"></p>\n\n<p>Line1</p>\n\n<pre><code>Line1Word1  Line1 Words2        Line1Word3          Line1 Words4\n</code></pre>\n\n<p>For this line I got </p>\n\n<pre><code>^(.*?)\\t(.*?)\\t(.*?)\\t(.*?)\\t(.*?)\\t(.*?)\\t(.*?)$\n</code></pre>\n\n<p>which will get the Groups 1, 2, 4 and 7. However I believe there must be a more generic way to obtain these that will account for any amount of groups.</p>\n\n<p>Line2</p>\n\n<pre><code>Line2Words1     Line2 Words2        \n</code></pre>\n\n<p>I could do the same here for Line 2 as above. Still need help on a more elegant way to get the groups, if I do not know how many to expect or where they are located.</p>\n\n<p>RESULT</p>\n\n<pre><code>Line1Word1  Line1 Words2    Line2Words1 Line1Word3  Line2 Words2        Line1 Words4\n</code></pre>\n\n<p>Here I have no idea on how to combine the Groups from the 2 lines above as in:</p>\n\n<pre><code> \\1(from Line1)\\t\\2(from Line1)\\t\\1(from Line2)\\t\\4(from Line1)...\n</code></pre>\n\n<p>I used regex sparingly over the years, but everything I tried for this got me nowhere.\nAny help will be greatly appreciated.</p>\n\n<p>NOTE in response to Tripleee:</p>\n\n<p>Data is formatted as follows:</p>\n\n<p>Instead of Line1 and Line2, we will call them Array1 and Array2, which will contain multiple Lines, rows as described above. Both Arrays will have the same amount of rows</p>\n\n<p>As in the example:</p>\n\n<p>Array1 could have Indexes 1, 2, 4 and 7 only, with data in each row</p>\n\n<p>Array2 could have Indexes 3 and 5 only, with data in each row</p>\n\n<p>No index will have data in both arrays in any row</p>\n\n<p>However, arrays could have data in different indexes every time the script runs, with more or less indexes every time</p>\n\n<p>A variable containing ALL data, separated by |, can be created as in:</p>\n\n<pre><code>Row1Array1 | Row1Array2\nRow2Array1 | Row2Array2\nRow3Array1 | Row3Array2\n...\n</code></pre>\n\n<p>Or data can be arranged in any other way that will help the use of regex.</p>\n"}, {"tags": ["oracle", "perl", "dbi"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1547766678, "creation_date": 1547766678, "answer_id": 54245621, "question_id": 54245483, "link": "https://stackoverflow.com/questions/54245483/determining-what-ora-type-values-are-supported/54245621#54245621", "title": "determining what ora_type values are supported", "body": "<p>The available ora_type values are listed at <a href=\"https://metacpan.org/pod/DBD::Oracle#:ora_types\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBD::Oracle#:ora_types</a> and described at <a href=\"https://metacpan.org/pod/DBD::Oracle#ora_type\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBD::Oracle#ora_type</a>, and must be imported from DBD::Oracle like:</p>\n\n<pre><code>use DBD::Oracle ':ora_types';\n</code></pre>\n\n<p>If you want to pass a standard SQL type that you imported from DBI <code>:sql_types</code>, just pass it directly as the bind type:</p>\n\n<pre><code>$qryHandle-&gt;bind_param(1, \"765756556\", SQL_VARCHAR);\n</code></pre>\n\n<p>See <a href=\"https://metacpan.org/pod/DBD::Oracle#bind_param\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBD::Oracle#bind_param</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10930455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd920133bfd6dbda6541d4b10b8625b?s=128&d=identicon&r=PG&f=1", "display_name": "user10930455", "link": "https://stackoverflow.com/users/10930455/user10930455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547766678, "creation_date": 1547765815, "question_id": 54245483, "link": "https://stackoverflow.com/questions/54245483/determining-what-ora-type-values-are-supported", "title": "determining what ora_type values are supported", "body": "<pre><code>#!/usr/bin/perl\nuse diagnostics;\nuse DBI;\nuse DBI qw(:sql_types);\n\nmy $AIM_PSWD= $ENV{'AIM_PSWD'};\nmy $len=length($AIM_PSWD);\nmy $pwindex1=rindex($AIM_PSWD,'/');\nmy $pwindex2=rindex($AIM_PSWD,'@');\n\nmy $usr = substr($AIM_PSWD,0,$pwindex1);\nmy $pwd = substr($AIM_PSWD,$pwindex1+1,$pwindex2-($pwindex1+1));\nmy $db  = substr($AIM_PSWD,$pwindex2+1,$len-($pwindex2+1));\nmy $attr = {AutoCommit =&gt; 0};\n\nmy $dbh;\nmy $qryHandle;\nmy $row;\nmy $query = \"SELECT /*+ index(T_CAPITATION_HIST I_CAPITATION_HIST) */ SAK_CAPITATION FROM AIM.T_CAPITATION_HIST WHERE SAK_CAPITATION = ?\";\n\n$dbh = DBI-&gt;connect(\"dbi:Oracle:$db\", $usr, $pwd, $attr)\n   or die \"Unable to connect to $db\\n\";\n$qryHandle = $dbh-&gt;prepare($query) or die \"Unable to prepare query\\n\";\n$qryHandle-&gt;bind_param(1, \"765756556\", {ora_type =&gt; SQL_VARCHAR});\n$qryHandle-&gt;execute() or die \"Unable to execute query\\n\";\nif ($row = $qryHandle-&gt;fetchrow_hashref())\n{\n    print \"query succeeded\\n\";\n}\nelse\n{\n    print \"query failed\\n\";\n}\n$qryHandle-&gt;finish();\n$dbh-&gt;disconnect();\nexit(0);\n</code></pre>\n\n<p>Running this produces the error message from the bind_param statement:\nUncaught exception from user code:\n    Can't bind :p1, ora_type 12 not supported by DBD::Oracle at ./test.pl line 26.</p>\n\n<p>How do I determine what ora_type values are supported? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1547747358, "post_id": 54241279, "comment_id": 95307558, "body": "A couple things. <code>&quot;undef&quot;</code> is a very misleading string, since it is defined and true. You need to use the bareword <code>undef</code> function to get an undefined value. An undefined value can then be used as a hashref, as you are apparently doing, and a hashref will magically appear due to <a href=\"https://perldoc.pl/perlglossary#autovivification\" rel=\"nofollow noreferrer\">autovivification</a>. You could also instead assign an empty hashref <code>{}</code> explicitly, instead of undef. It&#39;s hard to say what is the correct thing to do without more context."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547747671, "post_id": 54241279, "comment_id": 95307687, "body": "Btw, <a href=\"https://metacpan.org/pod/List::MoreUtils#firstidx-BLOCK-LIST\" rel=\"nofollow noreferrer\">List::MoreUtils::first_idx</a> provides what your 6-line-<code>foreach</code>+comment does, with a fairly descriptive name I think (it also has the <code>first_index</code> alias)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1547748119, "post_id": 54241279, "comment_id": 95307885, "body": "@zdim the error mentioned would not occur at that assignment, but would occur when that string is attempted to be used like a hashref somewhere else."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547751895, "post_id": 54241279, "comment_id": 95309675, "body": "@Grinnz Ah, of course -- got mislead into thinking about how one could restrict a (part of a) hash or some such ... deleting that comment then, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547757189, "post_id": 54243496, "comment_id": 95312206, "body": "<code>if (ref($gene_hash{$some_var}) eq &quot;HASH&quot;)</code> will warn. <code>if ($gene_hash{$some_var})</code> will do the trick if it&#39;s either a reference or undef."}, {"owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1547757565, "post_id": 54243496, "comment_id": 95312370, "body": "Thanks, it help me"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547758986, "post_id": 54243496, "comment_id": 95313005, "body": "@ikegami it won&#39;t warn; ref always returns a defined value."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1547755497, "creation_date": 1547755497, "answer_id": 54243496, "question_id": 54241279, "link": "https://stackoverflow.com/questions/54241279/perl-cant-use-string-undef-as-a-hash-ref-while-strict-refs/54243496#54243496", "title": "PERL: Can&#39;t use string (&quot;undef&quot;) as a HASH ref while &quot;strict refs&quot;", "body": "<p>Let me guess: further down in your program you have at line 283 something like this:</p>\n\n<pre><code>my $function = $gene_hash{$some_var}-&gt;{Function};\n</code></pre>\n\n<p>This will fail with the mentioned error message, because you have scalars (i.e. \"undef\") stored as values in your hash. You either need to protect access e.g.</p>\n\n<pre><code>if (ref($gene_hash{$some_var}) eq \"HASH\") {\n    # access value as hash here\n    ...\n</code></pre>\n\n<p>or use some other method to detect \"unknown\", e.g.</p>\n\n<pre><code>} else {    # Gene has no function \n    $gene_hash{$gene_id} = {};\n}\n...\nif (exists $gene_hash{$some_var}-&gt;{Function}) {\n    # access function key in here\n    ...\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 54243496, "answer_count": 1, "score": 0, "last_activity_date": 1547755497, "creation_date": 1547746080, "question_id": 54241279, "link": "https://stackoverflow.com/questions/54241279/perl-cant-use-string-undef-as-a-hash-ref-while-strict-refs", "title": "PERL: Can&#39;t use string (&quot;undef&quot;) as a HASH ref while &quot;strict refs&quot;", "body": "<p>I got this weird error that I don't understand. I am trying to fill a hash by an another hash if I find a word ($target) else, fill it by \"undef\". </p>\n\n<pre><code># Parsing ...\n\n    my $target;\n    my $idx;\n    my $gene_description_ref  = \\@gene_description;\n\n    # ... the functional annotation \n\n    $target = $tax_function . \"_topblasthit\";\n    $idx = undef;\n\n    # Get the index of \"arth_topblasthit\" in the array @gene_description\n\n    foreach ( 0 .. $#gene_description ) {\n        if ( index ( $gene_description_ref-&gt;[ $_ ], $target ) &gt;= 0 ) {\n            $idx = $_;\n            last;\n        }\n    }\n\n    if (defined $idx){\n\n        my @result = func_formatting($gene_description[$idx]);\n        $gene_hash{$gene_id}{Function} = $result[0];\n        $gene_hash{$gene_id}{Accession} = $result[1];\n\n    } else {    # Gene has no function \n        $gene_hash{$gene_id} = \"undef\";\n    }\n</code></pre>\n\n<p>But I got this error:</p>\n\n<blockquote>\n  <p>Can't use string (\"undef\") as a HASH ref while \"strict refs\" in use at insert_genes_maker.pl line 283,  line 7731.</p>\n</blockquote>\n\n<p>any help please ?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1547741459, "post_id": 54239915, "comment_id": 95304447, "body": "Data::Dumper and Data::Dump are meant for this."}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547741731, "post_id": 54239915, "comment_id": 95304572, "body": "thanks will try that"}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547743919, "post_id": 54239915, "comment_id": 95305819, "body": "it almost work by doing print $FH Dumper ( \\%HoH ); but it adds a $VAR1 = { at the top which is annoying, is there a way to get rid of it ?"}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547744676, "post_id": 54239915, "comment_id": 95306220, "body": "(i mean i just need the hash contents, not the name of it), trying a couple of options atm"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1548117434, "post_id": 54239915, "comment_id": 95419718, "body": "At the risk of &quot;starting something&quot;, you might look at some of the JSON modules if it&#39;s going to interact with something other than perl.  I&#39;m not a big JSON fan, but I ran into it when interacting with perl, javascript and java in the same project."}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1547745811, "post_id": 54240928, "comment_id": 95306825, "body": "thanks a lot ! almost working like a charm except that it adds two braces at the top and the end of the file (arround the hash), will check if i can get rid of them in any way and mark the question as resolved"}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1548107219, "post_id": 54240928, "comment_id": 95416821, "body": "Thank you very much, it perfectly makes sense"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1547801686, "last_edit_date": 1592644375, "creation_date": 1547744733, "answer_id": 54240928, "question_id": 54239915, "link": "https://stackoverflow.com/questions/54239915/generate-a-data-structure-in-perl/54240928#54240928", "title": "Generate a data structure in Perl", "body": "<p>You want:</p>\n<pre><code>$Data::Dumper::Terse = 1;\n</code></pre>\n<p>See <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n<blockquote>\n<p>$Data::Dumper::Terse or $OBJ-&gt;Terse([NEWVAL])</p>\n<p>When set, Data::Dumper will emit single, non-self-referential values as atoms/terms rather than statements. This means that the <code>$VAR</code>n names will be avoided where possible, but be advised that such output may not always be parseable by <code>eval</code>.</p>\n</blockquote>\n<p><strong>Update (to address the comment below):</strong></p>\n<p>Data::Dumper will add the correct punctuation in order for you to get back exactly what you give it. If you give it a hash reference, then you will get a string that starts and ends with curly braces.</p>\n<pre><code>$ perl -MData::Dumper -E'$Data::Dumper::Terse=1; say Dumper { foo =&gt; { bar =&gt; &quot;baz&quot; }}'\n{\n  'foo' =&gt; {\n             'bar' =&gt; 'baz'\n           }\n}\n</code></pre>\n<p>If you give it an array reference, then you will get back a string that starts and ends with square brackets.</p>\n<pre><code>$ perl -MData::Dumper -E'$Data::Dumper::Terse=1; say Dumper [ foo =&gt; { bar =&gt; &quot;baz&quot; }]'\n[\n  'foo',\n  {\n    'bar' =&gt; 'baz'\n  }\n]\n</code></pre>\n<p>If, for some reason, you want neither of those, then give it a list of values.</p>\n<pre><code>$ perl -MData::Dumper -E'$Data::Dumper::Terse=1; say Dumper ( foo =&gt; { bar =&gt; &quot;baz&quot; })'\n'foo'\n{\n  'bar' =&gt; 'baz'\n}\n</code></pre>\n<p>If you have a hash reference and you don't want the surrounding braces (which seems like a strange requirement, to be honest) then dereference the reference before passing it to <code>Dumper()</code>. That will convert the hash reference to a hash and the hash will be &quot;unrolled&quot; to a list by being passed to a function.</p>\n<pre><code>$ perl -MData::Dumper -E'$Data::Dumper::Terse=1; $ref = { foo =&gt; { bar =&gt; &quot;baz&quot; }}; say Dumper %$ref'\n'foo'\n{\n  'bar' =&gt; 'baz'\n}\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 54240928, "answer_count": 1, "score": 1, "last_activity_date": 1547801686, "creation_date": 1547741362, "last_edit_date": 1547741531, "question_id": 54239915, "link": "https://stackoverflow.com/questions/54239915/generate-a-data-structure-in-perl", "title": "Generate a data structure in Perl", "body": "<p>i have Perl \"config files\" containing data structures like this:</p>\n\n<pre><code>'xyz' =&gt; {\n    'solaris'  =&gt; [\n                   \"value1\",\n                   \"valueN\",\n                  ],\n    'linux'    =&gt; [\n                   \"valueX\",\n                   \"valueN\",\n                  ],\n},\n</code></pre>\n\n<p>i call them doing a simple :</p>\n\n<pre><code>%config = do '/path/to/file.conf';\n</code></pre>\n\n<p>now, i would like to \"generate\" config files like this (construct a data structure \"structure\" directly and print it in a config file).\ni can fill the hash of hashes (of arrays or anything) in a normal way, but how do i dump it afterwards in a config file ?</p>\n\n<p>is there a clean &amp; easy way of doing it ?\ninstead of having to do dirty things like :</p>\n\n<pre><code>print $FH \"'xyz' =&gt; {\\n\";\nprint $FH \"   'solaris'  =&gt; [\\n\";\n</code></pre>\n\n<p>etc.  </p>\n\n<p>i \"guess\" Data::Dumper could do that..</p>\n\n<p>thanks!</p>\n"}, {"tags": ["perl", "parsing", "perl-module"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547741414, "post_id": 54239750, "comment_id": 95304420, "body": "Your <code>@ly_attr</code> should contain a hash reference, shouldn&#39;t it?"}, {"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547742249, "post_id": 54239750, "comment_id": 95304907, "body": "It doesn&#39;t seem to, hence my perplexity.  As far as I can say, it contains the name of the 1st attribute (and I just realise the other ones are missing, in fact)."}, {"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1547743958, "post_id": 54239750, "comment_id": 95305833, "body": "Well, I finaly found a solution, using &#39;attr&#39; instead of &#39;@attr&#39; in the parser definition.  Should I delete my question?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1547744544, "post_id": 54239750, "comment_id": 95306151, "body": "@JNM: No. Write it up as an answer and accept it."}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "is_accepted": false, "score": 1, "last_activity_date": 1547817064, "creation_date": 1547817064, "answer_id": 54254726, "question_id": 54239750, "link": "https://stackoverflow.com/questions/54239750/get-attribute-values-with-htmlpullparser/54254726#54254726", "title": "Get attribute values with HTML::PullParser", "body": "<p>As said in the comments, I didn't find the solution to make the parser work when declared with \"@attr\".</p>\n\n<p>Yet, with a slightly different approach, I finally got what I want.</p>\n\n<pre><code>my $lo_parser = HTML::PullParser-&gt;new(\n    file =&gt; $gs_html_doc,\n    start =&gt; 'event, tagname, attr',\n    ) or die \"Error: $!\";\n$lo_parser-&gt;unbroken_text(1);\n\nwhile (my $iY_token = $lo_parser-&gt;get_token)\n{\n    my $ls_event = $iY_token-&gt;[0]; # always \"start\"\n    my $ls_name = $iY_token-&gt;[1];\n    my $lH_attr = $iY_token-&gt;[2];\n\n    print \"$ls_name:\\n\";\n    foreach (keys %{$lH_attr})\n    {\n        print \"- $_ = $lH_attr-&gt;{$_} = \\n\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1547817064, "creation_date": 1547740818, "last_edit_date": 1547742350, "question_id": 54239750, "link": "https://stackoverflow.com/questions/54239750/get-attribute-values-with-htmlpullparser", "title": "Get attribute values with HTML::PullParser", "body": "<p>I wrote a piece of Perl code to parse an HTML file and list its tags with their attibutes :</p>\n\n<pre><code>my $lo_parser = HTML::PullParser-&gt;new(\n    file =&gt; $gs_html_doc,\n    start =&gt; 'event, tagname, @attr',\n    ) or die \"Error: $!\";\n$lo_parser-&gt;unbroken_text(1);\n\nwhile (my $iY_token = $lo_parser-&gt;get_token)\n{\n    my $ls_event = $iY_token-&gt;[0]; # always \"start\"\n    my $ls_name = $iY_token-&gt;[1];\n    my @ly_attr = $iY_token-&gt;[2];\n\n    print \"$ls_name:\\n\";\n    foreach (0 .. $#ly_attr)\n    {\n        print \"- $ly_attr[$_]\\n\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>It works fine, but I don't know how to get the VALUES of the different attributes. None of the sites I found about HTML::PullParser gave me the answer.</p>\n\n<p>Could anybody help, please?</p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1737, "user_id": 8261341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eyDTc.jpg?s=128&g=1", "display_name": "Ivan Kaloyanov", "link": "https://stackoverflow.com/users/8261341/ivan-kaloyanov"}, "edited": false, "score": 1, "creation_date": 1547738646, "post_id": 54239019, "comment_id": 95302754, "body": "Put them in a Hashmap where the key is the letter and the value is the time it appears then just print key value with where value &gt; 1 else print only the key."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547738656, "post_id": 54239019, "comment_id": 95302760, "body": "Please <a href=\"https://stackoverflow.com/posts/54239019/edit\">edit</a> your post and show us the code you already have. The easiest approach is to walk through the array and remember the last string and the current count and to output the last string+count whenever the last string is not equal to the current string."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1547738789, "post_id": 54239019, "comment_id": 95302859, "body": "I would do something like <code>my $count = 0; my $last_string; @filtered_list = map { $last_string = $_; if( $last_string ne $_ ) { &quot;$last_string x $count&quot; } else { $count++; (); } @original_list; push @filtered_list, &quot;$last x $count&quot;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1547741413, "post_id": 54239420, "comment_id": 95304419, "body": "This loses the original order of the input strings"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547805065, "post_id": 54239420, "comment_id": 95326851, "body": "The OP&#39;s sample input has a &#39;c&#39; between the &#39;d&#39; and the &#39;x&#39; at the end of the list which needs to be kept separate. This code includes it with the two &#39;c&#39;s that appear earlier in the list."}], "tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1547739759, "creation_date": 1547739759, "answer_id": 54239420, "question_id": 54239019, "link": "https://stackoverflow.com/questions/54239019/clusterize-group-array-of-strings/54239420#54239420", "title": "Clusterize (group) array of strings", "body": "<p>Lots of ways of doing this, I have:</p>\n\n<pre><code>$ cat file1\n'a'\n'a'\n'a'\n'b'\n'c'\n'c'\n'd'\n'x'\n\n$ perl -ne 'END{for(sort keys %count){if($count{$_}&gt;1){ print \"$_ \\(x$count{$_}\\)\\n\";} else{print \"$_\\n\";}}} chomp; $count{$_}++;' file1\n'a' (x3)\n'b'\n'c' (x2)\n'd'\n'x'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 2, "last_activity_date": 1547741092, "last_edit_date": 1547741092, "creation_date": 1547740223, "answer_id": 54239557, "question_id": 54239019, "link": "https://stackoverflow.com/questions/54239019/clusterize-group-array-of-strings/54239557#54239557", "title": "Clusterize (group) array of strings", "body": "<p>You may be overcomplicating the problem. Essentially, this is a variant of <a href=\"https://en.wikipedia.org/wiki/Run-length_encoding\" rel=\"nofollow noreferrer\">run-length encoding</a>.</p>\n\n<p>The idea is to walk through the list and increment a counter at each character to compute how long the \"run\" is, or how many subsequent characters are equal to the current character. Once you've found the length, add it to the result in the appropriate format and skip all of the elements you just squashed together.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @a = split //, \"aaabccdcx\";\nmy @rle;\n\nfor (my $i = 0; $i &lt; @a;) {\n    my $j = 1;\n\n    while ($i + $j &lt; @a &amp;&amp; $a[$i+$j] eq $a[$i]) {\n        $j++;\n    }\n\n    push @rle, $a[$i] . ($j &gt; 1 ? \" (x$j)\" : \"\");\n    $i += $j;\n}\n\nprint Dumper \\@rle;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          'a (x3)',\n          'b',\n          'c (x2)',\n          'd',\n          'c',\n          'x'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1547744239, "creation_date": 1547744239, "answer_id": 54240783, "question_id": 54239019, "link": "https://stackoverflow.com/questions/54239019/clusterize-group-array-of-strings/54240783#54240783", "title": "Clusterize (group) array of strings", "body": "<p>This seems to do what you want. It's longer than the other answers but (hopefully) less cryptic.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $string = 'aaabccdcx';\n\nmy $prev = '';\nmy $count;\nmy @out;\n\nfor (split //, $string) {\n  if ($_ eq $prev) {\n    $count++;\n  } else {\n    push @out, $prev . ($count &gt; 1 ? \" (x$count)\" : '') if $count;\n    $count = 1;\n    $prev = $_;\n  }\n}\n\npush @out, $prev . ($count &gt; 1 ? \" (x$count)\" : '');\n\nprint Dumper \\@out;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1547898488, "last_edit_date": 1547898488, "creation_date": 1547818142, "answer_id": 54255035, "question_id": 54239019, "link": "https://stackoverflow.com/questions/54239019/clusterize-group-array-of-strings/54255035#54255035", "title": "Clusterize (group) array of strings", "body": "<p>Another Perl - using backreference</p>\n\n<pre><code>$ echo \"aaabccdcx\"| perl -nle ' while( /(.)(\\1*)/g ) { $t=length(\"$1$2\"); print \"$1 -&gt; \",$t&gt; 1? \"x(\".$t.\")\" : \"\" } '\na -&gt; x(3)\nb -&gt;\nc -&gt; x(2)\nd -&gt;\nc -&gt;\nx -&gt;\n$\n</code></pre>\n\n<p>standalone</p>\n\n<pre><code>$  perl -le ' $str=\"aaabccdcx\"; while($str=~/(.)(\\1*)/g ) { $t=length(\"$1$2\"); print \"$1 -&gt; \",$t&gt; 1? \"x(\".$t.\")\" : \"\" } '\na -&gt; x(3)\nb -&gt;\nc -&gt; x(2)\nd -&gt;\nc -&gt;\nx -&gt;\n$\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 2, "accepted_answer_id": 54239557, "answer_count": 4, "score": 3, "last_activity_date": 1547898488, "creation_date": 1547738435, "last_edit_date": 1547738704, "question_id": 54239019, "link": "https://stackoverflow.com/questions/54239019/clusterize-group-array-of-strings", "title": "Clusterize (group) array of strings", "body": "<p>I need to group array of strings following way (merge same strings nearby)</p>\n\n<pre><code>Input          | Output\n---------------+--------------------\n[              | [\n    'a'        |    'a (x3)',\n    'a'        |    'b',\n    'a'        |    'c (x2)'\n    'b'        |    'd'\n    'c'        |    'c'\n    'c'        |    'x'\n    'd'        | ]\n    'c'        |\n    'x'        |\n]              |\n---------------+--------------------\n</code></pre>\n\n<p>How to do that ?</p>\n\n<p>I wrote this code</p>\n\n<pre><code>sub str_minus_multiplier {\n    my ( $str ) = @_;\n    $str =~ s/\\(x(\\d+)\\)//;\n    return $str;\n}\n\nsub str_add_multiplier {\n    my ( $str, $num ) = @_;\n    $num = 1 if !defined $num;\n    if ( my $n = str_has_multiplier($str) ) {\n        $str = str_minus_multiplier($str);\n        my $new_m = $n+$num;\n        $str.= '(x'.$new_m.')';\n    } else {\n        $str.= ' (x2)';\n    }\n    return $str;\n}\n\nsub fold_list {\n    my ( @x ) = @_;\n    for my $i (0 .. $#x-1) {\n\n        my $j = 1;\n        while ( str_minus_multiplier($x[$i]) eq $x[$i+$j] ) {\n            $x[$i] = str_add_multiplier($x[$i]);\n            $j++;\n        }\n        splice(@x, $i+1, $j-1) if ( $j &gt; 1 );\n    }\n    return @x;\n}\n</code></pre>\n\n<p>But it's not working as expected, output of <code>fold_list()</code> is </p>\n\n<pre><code>[\n          'a (x2)',\n          'a',\n          'b',\n          'c (x2)',\n          'd',\n          'c',\n          'x',\n          ' (x2)'\n        ];\n</code></pre>\n\n<p>I guess that problem is in <code>str_minus_multiplier($x[$i]) eq $x[$i+$j]</code> comparision, after splice one value in comparision is <code>undef</code>. How to avoid that ?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1547725746, "post_id": 54235205, "comment_id": 95295137, "body": "Yes you can use an array of array references. Each array reference can have its own dimension. See <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldoc perldsc</a> for more information"}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 1, "creation_date": 1547725893, "post_id": 54235205, "comment_id": 95295216, "body": "Technically there&#39;s no &quot;multidimensional array&quot; like in statically typed languages. You can define an array and put another array (references) inside, so yes. Your syntax is not valid Perl though. It should be something like: @Agenda = (&#39;Monday&#39;, [&#39;Tuesday&#39;,&#39;Lunch&#39;], ...);"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "edited": false, "score": 2, "creation_date": 1547726320, "post_id": 54235205, "comment_id": 95295439, "body": "@PerlAncar <code>{&#39;Tuesday&#39;,...}</code> is valid perl - it is as hash ref rather than an array ref though"}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1547735485, "post_id": 54235205, "comment_id": 95300744, "body": "@ChrisTurner Yes, should&#39;ve said &quot;is not the correct Perl syntax for creating array refs&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1547747087, "post_id": 54235205, "comment_id": 95307427, "body": "Further reading: <a href=\"https://p3rl.org/REF\" rel=\"nofollow noreferrer\">p3rl.org/REF</a>"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1547767435, "post_id": 54235205, "comment_id": 95315951, "body": "@ChrisTurner, but <code>... {&#39;Friday&#39;,&#39;Lunch&#39;,&#39;Dinner&#39;} ...</code> is going to be a problem under <code>strict</code> complaining: &quot;Odd number of elements in anonymous hash&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 5, "last_activity_date": 1547729437, "last_edit_date": 1547729437, "creation_date": 1547729008, "answer_id": 54236239, "question_id": 54235205, "link": "https://stackoverflow.com/questions/54235205/non-uniform-multidimensional-arrays-in-perl/54236239#54236239", "title": "Non uniform Multidimensional arrays in Perl", "body": "<p>Yes it is, just use array references. Using JSON as output format to illustrate your example:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse JSON;\n\nmy @agenda = (\n    'Monday',\n    ['Tuesday', 'Lunch'],\n    'Wednesday',\n    'Thursday',\n    ['Friday', 'Lunch', 'Dinner'],\n);\n\nprint JSON-&gt;new-&gt;pretty-&gt;encode(\\@agenda);\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>$ perl dummy.pl\n[\n   \"Monday\",\n   [\n      \"Tuesday\",\n      \"Lunch\"\n   ],\n   \"Wednesday\",\n   \"Thursday\",\n   [\n      \"Friday\",\n      \"Lunch\",\n      \"Dinner\"\n   ]\n]\n</code></pre>\n\n<p><strong>EDIT</strong> I personally would use a list of hash refs instead, i.e.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @agenda = (\n   {\n       day    =&gt; 'Monday',\n       events =&gt; [],\n   },\n   ...\n   {\n       day    =&gt; 'Friday',\n       events =&gt; ['Lunch', 'Dinner'],\n   },\n   ...\n);\n\nforeach my $entry (@agenda) {\n   my $day    = $entry-&gt;{day};\n   my $events = $entry-&gt;{events};\n\n   print $day . \": \" . join(\" \", @{ $events }) . \"\\n\";\n}\n</code></pre>\n\n<p>or even use a hash ref for <code>events</code>.</p>\n"}], "owner": {"reputation": 235, "user_id": 2536125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a36bb57906a8ffb4d5a388f9cd0fe04?s=128&d=identicon&r=PG", "display_name": "user2536125", "link": "https://stackoverflow.com/users/2536125/user2536125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1547729437, "creation_date": 1547725448, "question_id": 54235205, "link": "https://stackoverflow.com/questions/54235205/non-uniform-multidimensional-arrays-in-perl", "title": "Non uniform Multidimensional arrays in Perl", "body": "<p>Is it possible to define multidimensional arrays in Perl which can have non uniform dimension? Like the following example?</p>\n\n<pre><code>Agenda = @( 'Monday' , {'Tuesday',Lunch} , 'Wednesday' , 'Thursday', {'Friday','Lunch','Dinner'}) \n</code></pre>\n\n<p>Notice how how the second element <code>{'Tuesday',Lunch}</code> is an array itself.</p>\n"}, {"tags": ["linux", "postgresql", "perl", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1547738782, "post_id": 54233333, "comment_id": 95302851, "body": "This is weird. My installation (like you, I have Perl 5.26.1 on Ubuntu 18.4) has two identical copies of <code>warnings.pm</code> - <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;perl-base&#47;warnings.pm</code> and <code>&#47;usr&#47;share&#47;perl&#47;5.26.1&#47;warnings.pm</code>. Do you have those? I don&#39;t have the copy listed in your error message. And can you please tell us the exact comment you&#39;re using to get that error?"}, {"owner": {"reputation": 188, "user_id": 10694219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fx6TG.jpg?s=128&g=1", "display_name": "StackUser", "link": "https://stackoverflow.com/users/10694219/stackuser"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1547819413, "post_id": 54233333, "comment_id": 95334564, "body": "i  entered psql command only @DaveCross"}, {"owner": {"reputation": 188, "user_id": 10694219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fx6TG.jpg?s=128&g=1", "display_name": "StackUser", "link": "https://stackoverflow.com/users/10694219/stackuser"}, "edited": false, "score": 0, "creation_date": 1547819461, "post_id": 54233333, "comment_id": 95334594, "body": "now it is installed successfully by giving permission through the chmod -R 777 command."}], "owner": {"reputation": 188, "user_id": 10694219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fx6TG.jpg?s=128&g=1", "display_name": "StackUser", "link": "https://stackoverflow.com/users/10694219/stackuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1547719219, "creation_date": 1547719219, "question_id": 54233333, "link": "https://stackoverflow.com/questions/54233333/in-postgresql-error-usr-local-lib-x86-64-linux-gnu-perl-5-26-1-warnings-pm-pe", "title": "In Postgresql error :/usr/local/lib/x86_64-linux-gnu/perl/5.26.1/warnings.pm: Permission denied at /usr/bin/psql line 19", "body": "<p>i am trying to install POSTGRESQL in ubuntu 18.4,while installing after entering  psql,it is throwing message like </p>\n\n<blockquote>\n  <p>Can't locate warnings.pm:<br>\n  /usr/local/lib/x86_64-linux-gnu/perl/5.26.1/warnings.pm: Permission\n  denied at /usr/bin/psql line 19. BEGIN failed--compilation aborted at\n  /usr/bin/psql line 19.</p>\n</blockquote>\n\n<p>and i try to give permission then also it is showing same message,please help me to find a solution.</p>\n"}, {"tags": ["perl", "fasta"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1547710456, "post_id": 54230879, "comment_id": 95286849, "body": "Which part of the code do you think is supposed to remove <code>&gt;</code> from the first line?"}, {"owner": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1547712231, "post_id": 54230879, "comment_id": 95287646, "body": "Only first sequence has &#39;&gt;&#39; while others don&#39;t. That inconsistency is the problem."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1547712767, "post_id": 54230879, "comment_id": 95287913, "body": "Why not use Bioperl and it&#39;s fasta reading modules?"}, {"owner": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "edited": false, "score": 0, "creation_date": 1547713777, "post_id": 54230879, "comment_id": 95288365, "body": "I considered and decided against as I do not want to have dependencies. It is not worth the installation as FASTA sequence extraction is the only useful piece in BioPerl that I need."}], "answers": [{"comments": [{"owner": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "edited": false, "score": 0, "creation_date": 1547714231, "post_id": 54231557, "comment_id": 95288586, "body": "Thanks @Nahuel. The code works for 1st line of sequence and neglects rest of the (multi-line) sequence."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "reply_to_user": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "edited": false, "score": 0, "creation_date": 1547714452, "post_id": 54231557, "comment_id": 95288698, "body": "this is because <code>(\\S+)</code> doesnt match newlines you may change with <code>([\\S\\s]+)</code> or <code>((?s).+)</code>"}, {"owner": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "edited": false, "score": 0, "creation_date": 1547714619, "post_id": 54231557, "comment_id": 95288787, "body": "Ok, I understood now what <code>\\n&gt;</code> is doing so fixed the code by appending <code>&gt;</code> for all non-first sequences. Thanks!"}], "tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 1, "last_activity_date": 1547712834, "creation_date": 1547712834, "answer_id": 54231557, "question_id": 54230879, "link": "https://stackoverflow.com/questions/54230879/perl-with-fasta-sequence-extraction-has-problems-only-with-first-sequence/54231557#54231557", "title": "Perl with FASTA sequence extraction has problems (only) with first sequence", "body": "<p><code>$/</code> is the input record separator, setting <code>local $/=\"\\n&gt;\";</code> effect is that input is split into record ending with <code>\\n&gt;</code>, after chomp, the ending is removed however <code>/&gt;*(\\S+)/</code> may not match because <code>&gt;</code> is consumed from previous record.</p>\n\n<p>from FASTA wikipedia a line beginning by <code>&gt;</code> is a comment and may not always be an id. However in case it is always the case, following may fix.</p>\n\n<pre><code>my ($id,$seq) = $seq =~ /^&gt;*(.*)\\n(\\S+)/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "edited": false, "score": 0, "creation_date": 1547713883, "post_id": 54231586, "comment_id": 95288413, "body": "Thanks for the feedback @Stefan. As it is inside a function it is not appropriate here (ie, without repeating part of the code). I need to repeat the extraction for ~40k sequences -- I have just shown the minimal code for demonstrating the problem."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1547712955, "creation_date": 1547712955, "answer_id": 54231586, "question_id": 54230879, "link": "https://stackoverflow.com/questions/54230879/perl-with-fasta-sequence-extraction-has-problems-only-with-first-sequence/54231586#54231586", "title": "Perl with FASTA sequence extraction has problems (only) with first sequence", "body": "<p>You set the record separator to <code>\\n&gt;</code>. This does not apply to the first sequence.</p>\n\n<p>Fixed code sequence:</p>\n\n<pre><code>...\nchomp $seq;\n\n# for first sequence\n$seq =~ s/^&gt;//;\n\nmy ($id) = $seq =~ /^(\\S+)/;\nif ($id eq $lookup) {\n...\n</code></pre>\n\n<p>Please note that your implementation is extremely inefficient, because it reads &amp; parses the file contents for each query. How about splitting loading/parsing and querying into separate functions?</p>\n\n<p>Alternative solution: give the full list of lookup values to the loader. It would then fill an answer array as it encounters the matches during reading the file.</p>\n"}], "owner": {"reputation": 660, "user_id": 926918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2afb0f7fcdc829fd6273b762652427e?s=128&d=identicon&r=PG", "display_name": "Quiescent", "link": "https://stackoverflow.com/users/926918/quiescent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1547712955, "creation_date": 1547709831, "last_edit_date": 1547712297, "question_id": 54230879, "link": "https://stackoverflow.com/questions/54230879/perl-with-fasta-sequence-extraction-has-problems-only-with-first-sequence", "title": "Perl with FASTA sequence extraction has problems (only) with first sequence", "body": "<p>I am using a function/subroutine <code>extract_seq</code> available on internet to extract sequences in FASTA files. Briefly:</p>\n\n<ul>\n<li>A sequence begins with first line identified by '>', followed by ID and other information separated by spaces</li>\n<li>Subsequent lines (not beginning with '>' have multiple strings</li>\n<li>A FASTA file can have 1 or more sequences</li>\n<li>Bug is that the output has additional '>' character for first sequence (only) causing consistency problems.</li>\n</ul>\n\n<p>Program works fine in extracting sequences based on ID except for additional '>' in case of first sequence. Could you please suggest a solution as well as reason for the bug? A simple regex would fix the problem but I do not feel good about fixing bugs that I cannot understand.</p>\n\n<p>The Perl script is:</p>\n\n<pre><code>    #!/usr/bin/perl -w\n\n    use strict;\n\n    my $seq_all = \"seq_all.fa\";    # all proteins in fasta format\n\n    foreach my $q_seq (\"A0A1D8PC43\",\"A0A1D8PC38\") {\n        print \"Querying $q_seq\\n\";\n        &amp;extract_seq($seq_all, $q_seq);\n    }\n\nexit 0;\n\nsub extract_seq\n{\n    open(my $fh, \"&gt;query.seq\");\n\n    my $seq_all = $_[0];\n    my $lookup = $_[1];\n\n    local $/ = \"\\n&gt;\";\n\n    @ARGV = ($seq_all);\n    while (my $seq = &lt;&gt;) {\n        chomp $seq;\n        my ($id) = $seq =~ /^&gt;*(\\S+)/;\n        if ($id eq $lookup) {\n            print \"$seq\\n\";\n            last;\n        }\n    }\n}\n</code></pre>\n\n<p>The FASTA file is:</p>\n\n<pre><code>&gt;A0A1D8PC43 A0A1D8PC43_CANAL Diphosphomevalonate decarboxylase\nMYSASVTAPVNIATLKYWGKRDKSLNLPTNSSISVTLSQDDLRTLTTASASESFEKDQLW\nLNGKLESLDTPRTQACLADLRKLRASIEQSPDTPKLSQMKLHIVSENNFPTAAGLASSAA\nGFAALVSAIAKLYELPQDMSELSKIARKGSGSACRSLFGGFVAWEMGTLPDGQDSKAVEI\nAPLEHWPSLRAVILVVSDDKKDTPSTTGMQSTVATSDLFAHRIAEVVPQRFEAMKKAILD\nKDFPKFAELTMKDSNSFHAVCLDSYPPIFYLNDTSKKIIKMVETINQQEVVAAYTFDAGP\nNAVIYYDEANQDKVLSLLYKHFGHVPGWKTHYTAETPVAGVSRIIQTSIGPGPQETSESL\nTK\n&gt;A0A1D8PC56 A0A1D8PC56_CANAL Uncharacterized protein OS=Candida\nMSDTKKTTETDSEVGYLDIYLRFNDDMEKDYCFQVKTTTVFKDLYKVFRTLPISLRPSVF\nYHAQPIGFKKSVSPGYLTQDGNFIFDEDSQKQAVPVNDNDLINETVWPGQLILPVWQFND\nFGFYSFLAFLACWLYTDLPDFISPTPGICLTNQMTKLMAWVLVQFGKDRFAETLLADLYD\nTVGVGAQCVFFGFHIIKCLFIFGFLYTGVFNPMRVFRLTPRSVKLDVTKEELVKLGWTGT\nRKATIDEYKEYYREFKINQHGGMIQAHRAGLFNTLRNLGVQLESGEGYNTPLTEENKLRT\nMRQIVEDAKKPDFKLKLSYEYFAELGYVFATNAENKEGSELAQLIKQYRRYGLLVSDQRI\nKTVVRARKGETDEEKPKVEEVVEE\n&gt;A0A1D8PC67 A0A1D8PC67_CANAL Bfa1p OS=Candida albicans (strain\nMVSDKLTLLRQFSEEDELFGDIEGIDYHDGETLKINKFSFPSSASSPSFAITGQSPNMRS\nINGKRITRETLSEYSEENETDLTSEFSDQEFEWDGFNKNQSIYQQMNQRLIATKVAKQRE\nAEREQRELMQKRHKDYDPNQTLRLKDFNKLTNENLTLLDQLDDEKTVNYEYVRDDVEDFA\nQGFDKDFETKLRIQPSMPTLRSNAPTLKKYKSYGEFKCDNRVKQKLDRIPSFYNKNQLLS\nKFKETKSYHPHHKKMGTVRCLNNNSEVPVTYPSISNMKLNKEKNRWEGNDIDLIRFEKPS\nLITHKENKTKKRQGNMVYDEQNLRWINIESEHDVFDDIPDLAVKQLQSPVRGLSQFTQRT\nTSTTATATAPSKNNETQHSDFEISRKLVDKFQKEQAKIEKKINHWFIDTTSEFNTDHYWE\nIRKMIIEE\n&gt;A0A1D8PC38 A0A1D8PC38_CANAL Cta2p OS=Candida albicans (strain\nMPENLQTRLHNSLDEILKSSGYIFEVIDQNRKQSNVITSPNNELIQKSITQSLNGEIQNF\nHAILDQTVSKLNDAEWCLGVMVEKKKKHDELKVKEEAARKKREEEAKKKEEEAKKKAEEA\nKKKEEEAKKAEEAKKAEEAKKVEEAAKKAEEAKKAEEEARKKAETAPQKFDNFDDFIGFD\nINDNTNDEDMLSNMDYEDLKLDDKVPATTDNNLDMNNILENDESILDGLNMTLLDNGDHV\nNEEFDVDSFLNQFGN\n</code></pre>\n\n<p>Edit:\nThe problem, as explained above, I face is that the output has additional '>' character for first sequence (only). I do not see the reason for the same and this is causing a lot of trouble. Output is:</p>\n\n<pre><code>Querying A0A1D8PC43\n&gt;A0A1D8PC43 A0A1D8PC43_CANAL Diphosphomevalonate decarboxylase\nMYSASVTAPVNIATLKYWGKRDKSLNLPTNSSISVTLSQDDLRTLTTASASESFEKDQLW\nLNGKLESLDTPRTQACLADLRKLRASIEQSPDTPKLSQMKLHIVSENNFPTAAGLASSAA\nGFAALVSAIAKLYELPQDMSELSKIARKGSGSACRSLFGGFVAWEMGTLPDGQDSKAVEI\nAPLEHWPSLRAVILVVSDDKKDTPSTTGMQSTVATSDLFAHRIAEVVPQRFEAMKKAILD\nKDFPKFAELTMKDSNSFHAVCLDSYPPIFYLNDTSKKIIKMVETINQQEVVAAYTFDAGP\nNAVIYYDEANQDKVLSLLYKHFGHVPGWKTHYTAETPVAGVSRIIQTSIGPGPQETSESL\nTK\nQuerying A0A1D8PC38\nA0A1D8PC38 A0A1D8PC38_CANAL Cta2p OS=Candida albicans (strain\nMPENLQTRLHNSLDEILKSSGYIFEVIDQNRKQSNVITSPNNELIQKSITQSLNGEIQNF\nHAILDQTVSKLNDAEWCLGVMVEKKKKHDELKVKEEAARKKREEEAKKKEEEAKKKAEEA\nKKKEEEAKKAEEAKKAEEAKKVEEAAKKAEEAKKAEEEARKKAETAPQKFDNFDDFIGFD\nINDNTNDEDMLSNMDYEDLKLDDKVPATTDNNLDMNNILENDESILDGLNMTLLDNGDHV\nNEEFDVDSFLNQFGN\n</code></pre>\n"}, {"tags": ["perl", "perl-tidy"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1547706917, "last_edit_date": 1547706917, "creation_date": 1547703793, "answer_id": 54229683, "question_id": 54229423, "link": "https://stackoverflow.com/questions/54229423/perltidy-always-prints-to-standard-out/54229683#54229683", "title": "Perltidy always prints to standard out", "body": "<p>The documentation says in <a href=\"http://perltidy.sourceforge.net/perltidy.html#Styles\" rel=\"noreferrer\">Styles section</a></p>\n\n<blockquote>\n  <p>-pbp, --perl-best-practices<br>\n   -pbp is an abbreviation for the parameters in the book Perl Best Practices by Damian Conway:</p>\n\n<pre><code>-l=78 -i=4 -ci=4 -st -se -vt=2 -cti=0 -pt=1 -bt=1 -sbt=1 -bbt=1 -nsfs -nolq\n-wbb=\"% + - * / x != == &gt;= &lt;= =~ !~ &lt; &gt; | &amp; =\n      **= += *= &amp;= &lt;&lt;= &amp;&amp;= -= /= |= &gt;&gt;= ||= //= .= %= ^= x=\"\n</code></pre>\n  \n  <p>Please note that this parameter set <strong>includes -st and -se flags</strong>, which make perltidy act as a filter on one file only.  These can be <strong>overridden by placing -nst and/or -nse</strong> after the -pbp parameter.</p>\n</blockquote>\n\n<p>(my emphasis) &thinsp; The relevant flags are described in <a href=\"http://perltidy.sourceforge.net/perltidy.html#I-O-control\" rel=\"noreferrer\">I/O control section</a>.</p>\n\n<p>I don't know why <code>-pbp</code> includes the flags to print to standard streams, which imply that there must be only one input file, but there may be a reason; so it may be a good idea to inspect in detail what all those flags under it do.</p>\n\n<p>I find that <code>-nst</code> (<code>--nostandard-ouput</code>) works even <em>right</em> after the <code>-pbp</code>, on the same line.</p>\n"}], "owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 54229683, "answer_count": 1, "score": 3, "last_activity_date": 1547706917, "creation_date": 1547702072, "question_id": 54229423, "link": "https://stackoverflow.com/questions/54229423/perltidy-always-prints-to-standard-out", "title": "Perltidy always prints to standard out", "body": "<p>My <a href=\"http://perltidy.sourceforge.net/\" rel=\"nofollow noreferrer\">Perltidy</a> always prints to standard out instead of the default <code>test.pl.tdy</code>:</p>\n\n<pre><code>perltidy test.pl\n</code></pre>\n\n<p>And here is my <code>.perltidyrc</code>:</p>\n\n<pre><code>-pbp # Start with Perl Best Practices\n-w\n-l=100   # 100 characters per line\n-ce # 'cuddled' elses. elses appear on the same line as last brace\n-pt=2 # no parentheses spacing\n-pt=2    # High parenthesis tightness\n-bt=2    # High brace tightness\n-sbt=2   # High square bracket tightness\n-bar # opening braces right\n-nsbl # open subroutine brace on right\n-bbvt=1 # Block Brace Vertical Tightness\n-sot # stack opening tokens\n-sct # stack closing tokens\n-nsfs # no For Loop Semicolon Spaces\n-nolq # don't outdent long strings\n</code></pre>\n\n<p>Even if I do:</p>\n\n<pre><code>perltidy -b test.pl\n</code></pre>\n\n<p>It will still print to standard out and not go to <code>test.pl.bak</code>. The only way I can get it to go to a different file is by doing:</p>\n\n<pre><code>perltidy test.pl &gt; test.pl.tdy\n</code></pre>\n\n<p>Is there something in my <code>.perltidyrc</code> that could be causing this? I can't seem to find anything to explain it.</p>\n"}, {"tags": ["perl", "ffi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1547700292, "post_id": 54227827, "comment_id": 95283568, "body": "As for the age of Inline::ASM... Why does that matter?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1547717308, "post_id": 54227827, "comment_id": 95290314, "body": "It is also very simple to call assembly from Perl6 if you compile to a shared object and use the <code>NativeCall</code> interface, see <a href=\"https://archive.fosdem.org/2016/schedule/event/assembly_and_perl/\" rel=\"nofollow noreferrer\">this talk</a> at FOSDEM 2016."}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 1, "creation_date": 1547719248, "post_id": 54227827, "comment_id": 95291397, "body": "There&#39;s also the question of why you think you need to write code in asm.  It&#39;s very hard for humans to write efficient asm code these days (due to the increasing complexity of CPU&#39;s out of order execution).  Writing it in C with a decent optimizing compiler might be a better solution.  It&#39;s likely to be more portable and more maintainable as well."}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1547767291, "post_id": 54227827, "comment_id": 95315909, "body": "@ikegami nothing matter , i mean it seems not maintained 18 years , at any case i am going to give it a try"}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1547767614, "post_id": 54227827, "comment_id": 95316002, "body": "@DavidWohlferd sometimes there are an extreme cases , where you want to check some , for example i want to write a subrotine on perl which return the CPUID Manifcator Id , do you know if there a perl wrapper about such feature , or how to achive this using some perl module ?"}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1547787695, "post_id": 54227827, "comment_id": 95320174, "body": "A google search for <code>perl manufacturer id</code> turns up a few hits.  Failing that, duskwuff mentions a tool for accessing C code."}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 3, "last_activity_date": 1547690211, "creation_date": 1547690211, "answer_id": 54227939, "question_id": 54227827, "link": "https://stackoverflow.com/questions/54227827/writing-assembly-on-perl/54227939#54227939", "title": "Writing Assembly on Perl", "body": "<blockquote>\n  <p>any idea how to use FFI::Platypus::Lang::ASM with Perl , an example will be appreciated</p>\n</blockquote>\n\n<p>The author of that module hasn't provided any examples for that code themselves. It looks like it may be an unfinished project.</p>\n\n<p>Anyways, this is a pretty odd thing to want to do. Perl operates a couple levels of abstraction away from assembly -- interoperation between them is awkward at best.</p>\n\n<p>A more practical solution will be to write C code which calls into your assembly code (or embeds it as inline assembly), then adapt that code to Perl using XS.</p>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1547690211, "creation_date": 1547689178, "question_id": 54227827, "link": "https://stackoverflow.com/questions/54227827/writing-assembly-on-perl", "title": "Writing Assembly on Perl", "body": "<p>I want to write a small assembly code and call it from Perl :</p>\n\n<p>I look at cpan and find those 2  Perl modules</p>\n\n<ol>\n<li><a href=\"https://metacpan.org/pod/Inline::ASM\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Inline::ASM</a> which is very old</li>\n<li><a href=\"https://metacpan.org/pod/FFI::Platypus::Lang::ASM\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/FFI::Platypus::Lang::ASM</a> which mention that it possible to call assembly from perl , i look at the examples but didn't find any example related to assembly code.</li>\n</ol>\n\n<p>any idea how to use FFI::Platypus::Lang::ASM with Perl , an example will be appreciated</p>\n"}]