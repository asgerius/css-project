[{"tags": ["perl", "object", "testing", "mocking"], "answers": [{"tags": [], "owner": {"reputation": 188, "user_id": 1309515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cc6b8d9cfdae568bbb3fc57367fe59?s=128&d=identicon&r=PG", "display_name": "adrianp", "link": "https://stackoverflow.com/users/1309515/adrianp"}, "is_accepted": true, "score": 4, "last_activity_date": 1472082547, "last_edit_date": 1472082547, "creation_date": 1472081681, "answer_id": 39134530, "question_id": 39134402, "link": "https://stackoverflow.com/questions/39134402/test-perl-sub-without-instantiating-whole-file/39134530#39134530", "title": "Test perl sub without instantiating whole file", "body": "<p>Depending on how the subroutine works you might be able to get away with calling the method statically, such as:</p>\n\n<pre><code>use Your::Module::Here;\n\nYour::Module::Here::simple_thing();\n</code></pre>\n\n<p>Or if you have dependencies on <em>$self</em> inject a dummy object which pretends its the object instance as the first argument in your static call (of course you'll have to sort out what it provides yourself).</p>\n\n<pre><code>use Your::Module::Here;\n...\nYour::Module::Here::simple_thing($mocked_self);\n</code></pre>\n\n<p>Alternative to the last example you could use a library like <em>Test::MockModule</em></p>\n\n<pre><code>use Test::MockModule;\nuse Your::Module::Here;\n...\nmy $mock = Test::MockModule-&gt;new('Your::Module::Here');\n$mock-&gt;mock('new', sub { return $mocked_self; });\nmy $object = Your::Module::Here-&gt;new();\n$object-&gt;simple_thing();\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 2489837, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bf0da70a7974f20de06c1a3d9fd608bd?s=128&d=identicon&r=PG", "display_name": "north.mister", "link": "https://stackoverflow.com/users/2489837/north-mister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 39134530, "answer_count": 1, "score": 1, "last_activity_date": 1472082547, "creation_date": 1472080632, "question_id": 39134402, "link": "https://stackoverflow.com/questions/39134402/test-perl-sub-without-instantiating-whole-file", "title": "Test perl sub without instantiating whole file", "body": "<p>Given a perl file with something like this:</p>\n\n<pre><code>sub new {\n    my $package = shift;\n\n    my %params = @_;\n    tons_of_other_initializers(%params);\n\n}\n\nsub simple_thing{\n\n   print \"hello\";\n}\n</code></pre>\n\n<p>How would I go about testing only simple_thing() without having to do all the initialization for the \"object\" ?</p>\n\n<p>(The initialization includes a bunch of config files, setting up various data structures (that are mocked out for the test) and calls to external packages thus I really <em>really</em> don't want to run new)</p>\n"}, {"tags": ["c", "perl", "openssl", "pthreads", "xs"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1472087129, "post_id": 39134329, "comment_id": 65615550, "body": "What is &quot;pure C/C++&quot;?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472089253, "post_id": 39134329, "comment_id": 65615930, "body": "<i>&quot;Now I would say that is because I do not have any thread-handling...&quot;</i> - You would probably be right. <i>&quot;If I have a look into other Perl-Modules (e.g. Crypt::OpenSSL::RSA) I do not find and special thread-handling there too...&quot;</i> - You don&#39;t have to follow them over the cliff."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472093372, "post_id": 39134329, "comment_id": 65616810, "body": "Looked at C::O::RSA. If that works in threads, then yeah, yours should too. It does check if <code>bio</code> or <code>pk</code> are <code>NULL</code>, but I&#39;m guessing you made sure that neither <code>bio</code> nor <code>pk</code> are <code>NULL</code>."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1472109211, "post_id": 39134329, "comment_id": 65622074, "body": "I said addresses and pointers are ok. No problem with NULL or anything."}], "answers": [{"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1472110144, "post_id": 39136689, "comment_id": 65622672, "body": "I now made sure the init is only called once and not inside the thread. But it did not make a difference. I was hoping I do not need the MUTEX-locking of OpenSSL-threads. Therefore I was comparing with that other module."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1472110765, "post_id": 39136689, "comment_id": 65623083, "body": "@chris: with the code you&#39;ve shown so far it is impossible to say what exactly is going on and what interactions might happen with Perl or other modules. To get better help please provide a fully working minimal example which makes it possible to reproduce your problem, see <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1472111699, "post_id": 39136689, "comment_id": 65623668, "body": "Yes, I agree. I addes mutex-locking to my code and it is still not working. Same problem. I will post a sample. Thanks!"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1472099150, "creation_date": 1472099150, "answer_id": 39136689, "question_id": 39134329, "link": "https://stackoverflow.com/questions/39134329/openssl-and-threads-in-perl-xs/39136689#39136689", "title": "OpenSSL and Threads in Perl XS", "body": "<blockquote>\n<pre><code>printf (\"\\ninit=%d\", SSL_library_init ());   // init\n</code></pre>\n</blockquote>\n\n<p>From the documentation of <a href=\"https://www.openssl.org/docs/manmaster/ssl/SSL_library_init.html\" rel=\"nofollow\">SSL_library_init</a>:</p>\n\n<blockquote>\n  <p>SSL_library_init() must be called before any other action takes place. SSL_library_init() is not reentrant.</p>\n</blockquote>\n\n<p>Which means that you should better call <code>SSL_library_init</code> once before the threads are started or at least make sure that you have proper locking and that this function is not called multiple times, including not called from other modules you might use. Modules like <a href=\"https://metacpan.org/pod/Net::SSLeay\" rel=\"nofollow\">Net::SSLeay</a> actually take care of this <a href=\"https://metacpan.org/source/MIKEM/Net-SSLeay-1.78/SSLeay.xs#L2344\" rel=\"nofollow\">as can be seen in the source code</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472163158, "post_id": 39140167, "comment_id": 65654489, "body": "<i>&quot;If I include the h-file it works all fine. Even without the added openssl-mutex-thread-handling...&quot;</i> - that does not really make sense."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472202298, "post_id": 39140167, "comment_id": 65667874, "body": "My code did not work in threads. It was ok outside threads.   OpenSSL provides functions to handle multithreading (<a href=\"https://www.openssl.org/docs/man1.0.2/crypto/threads.html\" rel=\"nofollow noreferrer\">openssl.org/docs/man1.0.2/crypto/threads.html</a>). I thought the reason for the problem was that I did not use them.   But it still did not work after I added the suggested handling.  Hope it is clear now."}, {"owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "edited": false, "score": 0, "creation_date": 1472560578, "post_id": 39140167, "comment_id": 65792475, "body": "You wrote in your question: &quot;<i>That is working if I do pure C/C++.</i>&quot; Did it work in your &quot;pure C/C++&quot; test without including the h-file?"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1472560908, "post_id": 39140167, "comment_id": 65792705, "body": "With pure C I ment the XS. It is in C and if I tried the C-code it was working. I did not try it in C with threads. But then as XS with perl-threads."}], "tags": [], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "is_accepted": true, "score": 0, "last_activity_date": 1472113374, "creation_date": 1472113374, "answer_id": 39140167, "question_id": 39134329, "link": "https://stackoverflow.com/questions/39134329/openssl-and-threads-in-perl-xs/39140167#39140167", "title": "OpenSSL and Threads in Perl XS", "body": "<p>I found out the answer. I am not sure about it and I do not like it but it seems to be legit.</p>\n\n<p>I have a lot of openssl-includes in my xs. But I did not include ssl.h.</p>\n\n<pre><code>#include &lt;openssl/ssl.h&gt;\n</code></pre>\n\n<p>No compile-error, no linker-error. Only a segmentation-fault if I use it in threads. Works even outside threads.</p>\n\n<p>If I include the h-file it works all fine. Even without the added openssl-mutex-thread-handling. </p>\n\n<p>Found out after I tried to make my sample \"pretty\" to post it here. That is a bit weird.... I would prefer an compiler-error...</p>\n\n<p>But it explains why the other module is working.</p>\n\n<p>Thanks for help!!</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 39140167, "answer_count": 2, "score": 1, "last_activity_date": 1472113374, "creation_date": 1472080019, "last_edit_date": 1472089077, "question_id": 39134329, "link": "https://stackoverflow.com/questions/39134329/openssl-and-threads-in-perl-xs", "title": "OpenSSL and Threads in Perl XS", "body": "<p>I am working with OpenSSL inside a Perl-XS-Module. I have a C-function that calls OpenSSL-API-functions. It is very simple for test-purposes (init openssl, read a key, make the RSA-object and use it, no arguments). No big checks needed and addresses and memory are ok.</p>\n\n<p>XS is standard h2xs with <code>-lssl</code> and <code>-lcrypto</code> in the <code>Makefile</code>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void _foo (void)\n{\n    unsigned char key [3000];\n    memset (key, 0, 3000);\n    printf (\"\\ninit=%d\", SSL_library_init ());   // init\n    FILE *f = fopen (\"key.key\",\"r\");\n    printf (\"\\nf=%d\", f);\n    int keysize = fread (key, 1, 3000, f);   // readin\n    printf (\"\\nn=%d\",keysize);\n    fclose (f);\n    printf (\"\\nkey=%s\", key);\n\n    BIO *bio = BIO_new_mem_buf (key, keysize);\n    printf (\"\\nbio=%ld\", bio);\n    RSA *pk = (RSA *) PEM_read_bio_RSAPrivateKey (bio, NULL, NULL, NULL);\n    printf (\"\\npk=%ld\", pk);\n\n    printf (\"\\nsz=%d\" ,RSA_size(pk));  // ***** crash here if in a perl-thread\n    printf (\"\\n\\n\");\n}\n</code></pre>\n\n<p>That is working if I do pure C/C++. It is also ok if I have it in the XS-Module and use it in Perl outside a thread. But it crashes if I have it in Perl and inside a thread.</p>\n\n<p>Now I would say that is because I do not have any <a href=\"http://www.openssl.org/docs/man1.0.2/crypto/threads.html\" rel=\"nofollow\">thread-handling</a>. But if I have a look into other Perl-Modules (e.g. Crypt::OpenSSL::RSA) I do not find and special thread-handling there too.</p>\n\n<p>I am pretty new to XS and maybe I miss something. Maybe someone can give me a hint, thanks!</p>\n"}, {"tags": ["arrays", "perl", "hash", "associative"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472111854, "post_id": 39133825, "comment_id": 65623763, "body": "Note that you should invent better names than <code>%hash1</code> and <code>%hash2</code> for your variables."}, {"owner": {"reputation": 11, "user_id": 6754587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b324f4fa2c0d70efdf02687e673f67da?s=128&d=identicon&r=PG&f=1", "display_name": "largesock", "link": "https://stackoverflow.com/users/6754587/largesock"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472178501, "post_id": 39133825, "comment_id": 65658470, "body": "Oh yes, definitely. This is just an artificial test case I put together."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472178944, "post_id": 39133825, "comment_id": 65658567, "body": "It doesn&#39;t make sense that the sample &quot;artificial&quot; code that you write here for the world&#39;s consumption has very poor identifiers while the final code that will be read by only yourself and a few others will (presumably) have &quot;proper&quot; names."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1472434393, "post_id": 39133825, "comment_id": 65735140, "body": "You might take a look at ikegami&#39;s <a href=\"http://stackoverflow.com/questions/37288627/how-to-read-every-3-lines-in-perl/37289263#37289263\">third solution</a> which is almost what you could do (with a couple of modifications)."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472111785, "post_id": 39133872, "comment_id": 65623723, "body": "<i>&quot;When you later try to access these values, you&#39;ll have to dereference them with the arrow infix operator&quot;</i> That isn&#39;t necessary. Arrows between closing and opening braces or square brackets are optional, and the syntax that the OP has asked for will work fine."}, {"owner": {"reputation": 11, "user_id": 6754587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b324f4fa2c0d70efdf02687e673f67da?s=128&d=identicon&r=PG&f=1", "display_name": "largesock", "link": "https://stackoverflow.com/users/6754587/largesock"}, "edited": false, "score": 0, "creation_date": 1472178582, "post_id": 39133872, "comment_id": 65658490, "body": "Thanks -- I last truly studied Perl about 15 years ago in college, and just use it for little scripts here and there now. It is mostly a functional level of knowledge but it gets iffy when I have to use pointers, arrow operators, etc. This clarifies things greatly, and I appreciate the links for further reading too."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1472077875, "last_edit_date": 1472077875, "creation_date": 1472077200, "answer_id": 39133872, "question_id": 39133825, "link": "https://stackoverflow.com/questions/39133825/copying-the-contents-of-a-hash-into-another-larger-hash/39133872#39133872", "title": "Copying the contents of a hash into another larger hash", "body": "<p>When you're nesting data structures in Perl, you need to store references to the structures rather than the structures themselves. You take a reference to a variable in Perl by escaping the sigil, e.g.:</p>\n\n<pre><code>my (%hash1, %hash2);\n\n$hash2{'name'} = \"Alpha\";\n$hash2{'host'} = \"127.0.0.1\";\npush @{$hash1{'ObjectType1'}}, \\%hash2; # n.b. the \\\n</code></pre>\n\n<p>When you later try to access these values, you'll have to dereference them with the arrow infix operator (<code>-&gt;</code>):</p>\n\n<pre><code>say $hash1{ObjectType1}-&gt;[0]-&gt;{name};\n</code></pre>\n\n<p>In other words, dereference the array stored at <code>$hash1{ObjectType1}</code> and take the first element; dereference the hash stored at that element and take the <code>name</code> key. Modern Perls let you collapse and even omit (in some cases, I think as long as the \"head\" isn't itself a reference) arrow infix operators, so depending on your version, this should work:</p>\n\n<pre><code>say $hash1{ObjectType1}-&gt;[0]{name};\n</code></pre>\n\n<p>And possibly even this:</p>\n\n<pre><code>say $hash1{ObjectType1}[0]{name};\n</code></pre>\n\n<p>I would highly recommend reading <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">perlref</a>[<a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">tut</a>], <a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow\">perllol</a>, and <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">perldsc</a> when you have some time!</p>\n"}], "owner": {"reputation": 11, "user_id": 6754587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b324f4fa2c0d70efdf02687e673f67da?s=128&d=identicon&r=PG&f=1", "display_name": "largesock", "link": "https://stackoverflow.com/users/6754587/largesock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472077875, "creation_date": 1472076847, "question_id": 39133825, "link": "https://stackoverflow.com/questions/39133825/copying-the-contents-of-a-hash-into-another-larger-hash", "title": "Copying the contents of a hash into another larger hash", "body": "<p>I'm working on a configuration parser for a config file that includes an unknown number of various objects, all with their own field/value pairs.</p>\n\n<p>Config file looks something like this:</p>\n\n<pre><code>ObjectType1\n  name Alpha\n  host 127.0.0.1\nObjectType1\n  name Beta\n  host 10.11.12.13\nObjectType2\n  name AlphaPolicy\n  type This\n  useExtraWidgets true\n</code></pre>\n\n<p>So I'm trying to parse each individual object into a hash of fields/values, which works great. What's tripping me up is that I then want each of those individual objects added into a larger hash that holds the whole configuration. This larger hash should have an array for each object type, that holds the fields/values for one particular object. I simply can't figure out how to push my hash of fields/values onto the larger hash in a sensible way. </p>\n\n<p>Here's some pseudocode with comments -- can somebody help me with where I need @s, $s, brackets, etc.? I call it pseudocode because it doesn't actually work. It prints nothing. Thanks.</p>\n\n<pre><code>my %hash1,%hash2;\n\n$hash2{'name'} = \"Alpha\";\n$hash2{'host'} = \"127.0.0.1\";\npush @{$hash1{'ObjectType1'}}, %hash2;\n\nundef %hash2;\n\n$hash2{'name'} = \"Beta\";\n$hash2{'host'} = \"10.11.12.13\";\npush @{$hash1{'ObjectType1'}}, %hash2;\n\nundef %hash2;\n\n$hash2{'name'} = \"AlphaPolicy\";\n$hash2{'type'} = \"this\";\n$hash2{'useExtraWidgets'} = \"true\";\npush @{$hash1{'ObjectType2'}}, %hash2;\n\nprint $hash1{'ObjectType1'}[0]{'name'}; #I want this to print \"Alpha\"\nprint $hash1{'ObjectType1'}[1]{'host'}; #I want this to print \"10.11.12.13\"\nprint $hash1{'ObjectType2'}[0]{'name'}; #I want this to print \"AlphaPolicy\"\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1472073786, "post_id": 39132959, "comment_id": 65611806, "body": "<code>--force</code> almost never helps (bad advice, cpanm!). <code>--force</code> doesn&#39;t fix missing dependencies, it just installs the module if the tests fail; you generally don&#39;t want to install something that fails its own tests. Also, you don&#39;t need to switch to cpan just to find the exact error; the same output is in cpanm&#39;s build log, just like the error message told you."}], "answers": [{"tags": [], "owner": {"reputation": 108801, "user_id": 1269037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/mMk1e.jpg?s=128&g=1", "display_name": "Dan Dascalescu", "link": "https://stackoverflow.com/users/1269037/dan-dascalescu"}, "is_accepted": true, "score": 3, "last_activity_date": 1472072560, "creation_date": 1472072560, "answer_id": 39132973, "question_id": 39132959, "link": "https://stackoverflow.com/questions/39132959/cant-install-packagestashxs/39132973#39132973", "title": "Can&#39;t install Package::Stash::XS", "body": "<p><code>sys/types.h</code> was brought in by installing <code>libc6-dev</code>:</p>\n\n<pre><code>sudo apt install libc6-dev\n</code></pre>\n\n<p>After installing that library, <code>DateTime</code> could be installed as well.</p>\n"}], "owner": {"reputation": 108801, "user_id": 1269037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/mMk1e.jpg?s=128&g=1", "display_name": "Dan Dascalescu", "link": "https://stackoverflow.com/users/1269037/dan-dascalescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 39132973, "answer_count": 1, "score": -2, "last_activity_date": 1472072560, "creation_date": 1472072499, "question_id": 39132959, "link": "https://stackoverflow.com/questions/39132959/cant-install-packagestashxs", "title": "Can&#39;t install Package::Stash::XS", "body": "<p>I'm trying to install the DateTime module with Perl 5.22 on Linux Mint 18. <code>sudo cpanm DateTime</code> fails with:</p>\n\n<blockquote>\n  <p>Installing Package::Stash::XS failed. See [...] build.log for details. Retry with --force to force install it.</p>\n</blockquote>\n\n<p><code>--force</code> doesn't help, but using the plain old <code>cpan</code> revealed that</p>\n\n<blockquote>\n  <p>usr/lib/x86_64-linux-gnu/perl/5.22/CORE/perl.h:701:23: fatal error: sys/types.h: No such file or directory</p>\n</blockquote>\n"}, {"tags": ["bash", "perl", "unix"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1472051288, "post_id": 39126963, "comment_id": 65599486, "body": "The <code>2m</code> in <code>(int(-M _) &gt; 2m)</code> is problematic. You&#39;ll have to pass a number of days or manually adjust that line. <code>-mtime 2m</code> isn&#39;t even valid for GNU <code>find</code>."}, {"owner": {"reputation": 339, "user_id": 5000430, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f6de9dd22e8befaffb46827037b700be?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5000430/jacob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472051437, "post_id": 39126963, "comment_id": 65599588, "body": "Yeah, thanks, -M is only days, what if one wants minutes?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472051543, "post_id": 39126963, "comment_id": 65599664, "body": "You can divide the difference between <code>time()</code> and the file&#39;s <code>mtime</code> (which is conveniently returned by <code>lstat</code>) by 60."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1472052134, "post_id": 39126963, "comment_id": 65600078, "body": "minutes would be <code>-mmin</code> in GNU find, but find2perl doesn&#39;t know that one."}, {"owner": {"reputation": 339, "user_id": 5000430, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f6de9dd22e8befaffb46827037b700be?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5000430/jacob"}, "edited": false, "score": 0, "creation_date": 1472067994, "post_id": 39126963, "comment_id": 65609026, "body": "(int(-M _) &gt; 2m) vs (-M _) &gt; 2/24 works"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1472051961, "creation_date": 1472051961, "answer_id": 39127255, "question_id": 39126963, "link": "https://stackoverflow.com/questions/39126963/find2perl-output-does-not-compile/39127255#39127255", "title": "find2perl output does not compile", "body": "<p><code>-mtime 2m</code> is not supported by <code>find2perl</code> (nor by GNU's <code>find</code>).</p>\n\n<p>Put the following before the call to <code>find</code>:</p>\n\n<pre><code> my $time = time();\n</code></pre>\n\n<p>Replace the <code>wanted</code> sub with the following:</p>\n\n<pre><code>sub wanted {\n    my ($mtime);\n\n    ( ($mtime) = ( lstat($_) )[9] ) &amp;&amp;\n    -f _ &amp;&amp;\n    ( $time-$mtime &gt;= 2*60 )\n    &amp;&amp; print(\"$name\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 5000430, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f6de9dd22e8befaffb46827037b700be?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5000430/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472051961, "creation_date": 1472051059, "question_id": 39126963, "link": "https://stackoverflow.com/questions/39126963/find2perl-output-does-not-compile", "title": "find2perl output does not compile", "body": "<p>This is my find command:</p>\n\n<pre><code>find /test-data -type f -mtime +2m\n</code></pre>\n\n<p>I then run find2perl /test-data -type f -mtime +2m. It generates:</p>\n\n<pre><code>#! /usr/bin/perl -w\n    eval 'exec /usr/bin/perl -S $0 ${1+\"$@\"}'\n        if 0; #$running_under_some_shell\n\nuse strict;\nuse File::Find ();\n\n# Set the variable $File::Find::dont_use_nlink if you're using AFS,\n# since AFS cheats.\n\n# for the convenience of &amp;wanted calls, including -eval statements:\nuse vars qw/*name *dir *prune/;\n*name   = *File::Find::name;\n*dir    = *File::Find::dir;\n*prune  = *File::Find::prune;\n\nsub wanted;\n\n\n\n# Traverse desired filesystems\nFile::Find::find({wanted =&gt; \\&amp;wanted}, '/test-data');\nexit;\n\n\nsub wanted {\n    my ($dev,$ino,$mode,$nlink,$uid,$gid);\n\n    (($dev,$ino,$mode,$nlink,$uid,$gid) = lstat($_)) &amp;&amp;\n    -f _ &amp;&amp;\n    (int(-M _) &gt; 2m)\n    &amp;&amp; print(\"$name\\n\");\n}\n</code></pre>\n\n<p>This code generates errors. I am missing what is wrong.</p>\n\n<p>syntax error at ./test_older_files.pl line 32, near \"&amp;&amp; print(\"$name\\n\")\"\n  (Might be a runaway multi-line )) string starting on line 31)</p>\n"}, {"tags": ["perl", "charts"], "answers": [{"comments": [{"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1472092431, "post_id": 39132350, "comment_id": 65616612, "body": "an interesting idea.  It&#39;s arguably better, but still not right.  I updated the question with screenshots of what happens when I try that."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472069786, "creation_date": 1472069786, "answer_id": 39132350, "question_id": 39126172, "link": "https://stackoverflow.com/questions/39126172/histogram-in-chartclicker/39132350#39132350", "title": "Histogram in Chart::Clicker", "body": "<p>Reading the documentation for the module, it looks like you must include a value for all five bars in each data set if you want the bars in different colours</p>\n\n<p>Something like this, perhaps?</p>\n\n<pre><code>my $i = 0;\nfor my $set (sort keys %$data) {\n    my @values = (0) x keys %$data;\n    $values[$i++] = $data-&gt;{$set};\n    $chart-&gt;add_data($value, \\@values);   \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "is_accepted": true, "score": 1, "last_activity_date": 1472153952, "creation_date": 1472153952, "answer_id": 39153475, "question_id": 39126172, "link": "https://stackoverflow.com/questions/39126172/histogram-in-chartclicker/39153475#39153475", "title": "Histogram in Chart::Clicker", "body": "<p>I got it to work by switching to a single series, but that comes at the cost of color... oh well, can't have everything.</p>\n\n<p>Fixed a couple other issues:</p>\n\n<ul>\n<li>Adjusted X-axis ticks so that the left-most and right-most bars aren't cut off.</li>\n<li>Forced Y-axis ticks to be integers (since it's counting occurrences, the data will always be integers).</li>\n<li>Added workaround for Gtk3 &lt; 3.10.</li>\n</ul>\n\n<p>New code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Gtk3 -init;\nuse Chart::Clicker;\nuse Chart::Clicker::Renderer::Bar;\nuse POSIX qw/ceil/;\n\nmy $data = {\n    Alpha   =&gt; 3,\n    Bravo   =&gt; 1,\n    Charlie =&gt; 4,\n    Delta   =&gt; 1,\n    Echo    =&gt; 5,\n    Foxtrot =&gt; 9,\n};\n\nmy $points = keys %$data;\nmy $counter = 0;\nmy $max = 0;\nmy $chart = Chart::Clicker-&gt;new;\nfor my $series (sort keys %$data) {\n    $chart-&gt;add_data('histogram', {++$counter =&gt; $data-&gt;{$series}});\n    $max = $data-&gt;{$series} if $data-&gt;{$series} &gt; $max;\n}\nmy $context = $chart-&gt;get_context('default');\nmy $yaxis = $context-&gt;range_axis;\n$yaxis-&gt;range(Chart::Clicker::Data::Range-&gt;new(lower =&gt; 0));\n\n# Force Y-axis ticks to integers\n$yaxis-&gt;clear_tick_values;\nmy $increment = ceil($max / 10);\nfor(my $tick = 0; $tick &lt;= $max; $tick += $increment) {\n    $yaxis-&gt;add_to_tick_values($tick);\n}\n$yaxis-&gt;format('%d');\n\n# Fix cropped bars on the left and right end of the X-axis\nmy $xaxis = $context-&gt;domain_axis;\n$xaxis-&gt;tick_values([1 .. $counter]);\n$xaxis-&gt;tick_labels([sort keys %$data]);\n$xaxis-&gt;range(Chart::Clicker::Data::Range-&gt;new(lower =&gt; .5, upper =&gt; $counter+.5));\n$context-&gt;domain_axis($xaxis);\n\n$chart-&gt;set_renderer(Chart::Clicker::Renderer::Bar-&gt;new);\n$chart-&gt;legend-&gt;visible(0);\n$chart-&gt;draw;\n\nmy $win = Gtk3::Window-&gt;new;\nmy $loader = Gtk3::Gdk::PixbufLoader-&gt;new;\n$chart-&gt;driver-&gt;surface-&gt;write_to_png_stream(sub {\n    $loader-&gt;write([unpack 'C*', $_[1]]);\n});\n$loader-&gt;close;\nmy $img = Gtk3::Image-&gt;new_from_pixbuf($loader-&gt;get_pixbuf);\n$win-&gt;add($img);\n$win-&gt;signal_connect('delete-event' =&gt; sub{Gtk3::main_quit} );\n$win-&gt;show_all;\nGtk3::main;\n</code></pre>\n\n<p>Which looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bVKvI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bVKvI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 39153475, "answer_count": 2, "score": 2, "last_activity_date": 1472153952, "creation_date": 1472049082, "last_edit_date": 1472092363, "question_id": 39126172, "link": "https://stackoverflow.com/questions/39126172/histogram-in-chartclicker", "title": "Histogram in Chart::Clicker", "body": "<p>I'm new to using <a href=\"https://metacpan.org/pod/Chart::Clicker\" rel=\"nofollow noreferrer\"><code>Chart::Clicker</code></a> and am having trouble creating a histogram.  Using the following code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nuse Gtk3 -init;\nuse Chart::Clicker;\nuse Chart::Clicker::Renderer::Bar;\n\nmy $data = {\n        Alpha   =&gt; 3,\n        Bravo   =&gt; 1,\n        Charlie =&gt; 4,\n        Delta   =&gt; 1,\n        Echo    =&gt; 5,\n};\nmy $counter = 0;\n\nmy $chart = Chart::Clicker-&gt;new;\nmy $context = $chart-&gt;get_context('default');\n$context-&gt;range_axis-&gt;range(Chart::Clicker::Data::Range-&gt;new(lower =&gt; 0));\nfor my $value (sort keys %$data) {\n        $chart-&gt;add_data($value, {$counter++ =&gt; $data-&gt;{$value}});\n}\nmy $xaxis = Chart::Clicker::Axis-&gt;new(orientation =&gt; 'horizontal', position =&gt; 'bottom');\n$xaxis-&gt;{tick_values} = [0 .. $counter-1];\n$xaxis-&gt;{tick_labels} = [sort keys %$data];\n$context-&gt;{domain_axis} = $xaxis;\n$chart-&gt;set_renderer(Chart::Clicker::Renderer::Bar-&gt;new);\n$chart-&gt;legend-&gt;visible(0);\n$chart-&gt;draw;\n\nmy $win = Gtk3::Window-&gt;new;\nmy $img = Gtk3::Image-&gt;new_from_surface($chart-&gt;driver-&gt;surface);\n$win-&gt;add($img);\n$win-&gt;signal_connect('delete-event' =&gt; sub{Gtk3::main_quit} );\n$win-&gt;show_all;\nGtk3::main;\n</code></pre>\n\n<p>Produces the following output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/m7YRI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m7YRI.png\" alt=\"Undesirable result\"></a></p>\n\n<p>What I want is something more like this (graphically edited):</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xr9U4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xr9U4.png\" alt=\"Desired result\"></a></p>\n\n<p>I don't care about color on the x-axis labels.  While I'd prefer the bars to be in the order I specify, I don't care that much about order.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Trying @Borodin's suggestion produces the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2nJo0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2nJo0.png\" alt=\"enter image description here\"></a></p>\n\n<p>It's better, but not quite right.  There are now 25 data points, but 20 are zero so they don't show, but they still take up space on the X axis.  Two are cut off on the left and two are cut off on the right (the missing ones happen to be zeroes in this chart so it's not as bad as it might be in others).</p>\n\n<p>I tried extending the X axis one tick in each direction so nothing would get cut off, but that causes data values to overlap.  I changed the zero values to non-zero to illustrate what's happening:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ljozL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljozL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "edited": false, "score": 1, "creation_date": 1472055805, "post_id": 39125057, "comment_id": 65602446, "body": "Thank you, this helped a lot!!"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1472058921, "last_edit_date": 1472058921, "creation_date": 1472046289, "answer_id": 39125057, "question_id": 39124518, "link": "https://stackoverflow.com/questions/39124518/need-commands-to-be-run-in-parallel-in-perl-expect/39125057#39125057", "title": "Need Commands to be run in parallel in perl expect", "body": "<p>I believe <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow\">Parallel::ForkManager</a> will do what you want. I don't use <code>Expect</code>, so I've simplified the sub as an example. I've also added <code>use strict;</code> and <code>use warnings;</code>, removed the prototype parens from the sub definition, and changed from using a C-style <code>for()</code> loop implementation.</p>\n\n<p>Just change the number in the call to <code>Parallel::ForkManager-&gt;new()</code> to raise or lower the maximum number of forks to be executing at any one time.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Parallel::ForkManager;\n\nsub hostuser_expect {\n    my $num = shift;\n    print \"in child $num\\n\";\n}\n\nmy $pm = Parallel::ForkManager-&gt;new(5);\n\nCOMMANDS:\nfor (1..5){\n    $pm-&gt;start and next COMMANDS;\n    hostuser_expect($_);\n    $pm-&gt;finish;\n}\n\n$pm-&gt;wait_all_children;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>in child 1\nin child 2\nin child 5\nin child 3\nin child 4\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 39125057, "answer_count": 1, "score": 0, "last_activity_date": 1472058921, "creation_date": 1472044792, "question_id": 39124518, "link": "https://stackoverflow.com/questions/39124518/need-commands-to-be-run-in-parallel-in-perl-expect", "title": "Need Commands to be run in parallel in perl expect", "body": "<p>I have a script as mentioned below, I see the command mentioned as \"Command which needs to be run\" (in for loop) executes for some time and later the process which was forked to execute the command is killed and thus only part of my script in \"Command which needs to be run\" (in for loop) is executed. Instead, I want the command in \"Command which needs to be run\" (in for loop) to all run in parallel i.e. if the for loop runs for 50 iterations, 50 different process needs to be executing in parallel and none should be stopped in between. Could some one please suggest on this ? </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Expect;\n\nsub hostuser_expect() {\n    $expect= Expect-&gt;new;\n    $expect-&gt;raw_pty(1);\n    $expect-&gt;spawn($cmd)\n    or die \"Cannot spawn $cmd: $!\\n\";\n\n    $expect-&gt;expect($timeout,\n            [   qr/.*\\?/i, #/\n            sub {\n                    my $self = shift;\n                    $self-&gt;send(\"yes\\r\\n\");\n                    exp_continue;\n                    }\n            ]);\n\n    $expect-&gt;expect($timeout,\n            [   qr/password:/i, #/\n            sub {\n                    my $self = shift;\n                    $self-&gt;send(\"$password\\n\");\n                    exp_continue;\n            }\n    ]);\n    #$expect-&gt;expect(1500,'-re', 'Mails marked as moved successfully\\.$');\n    #$expect-&gt;hard_close();\n}\n\n$timeout     = 5;\n$password    = \"changeme\";\n\nfor ($i=1;$i&lt;=50;$i++)   {\n    $cmd=\"Command which needs to be run\";\n    print \"Invoking script - $cmd\\n\";\n    hostuser_expect();\n    sleep(30);\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1472043948, "post_id": 39124053, "comment_id": 65593825, "body": "Remove double quotes from param names. Like <code>perl test.pl --bindings &quot;+WBAOBtud&#47;UuM7uuCG2T+0ZvoCeuu&#47;x24ovYkwjI2YM=&quot; --filename ...</code>"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472046302, "post_id": 39124053, "comment_id": 65595623, "body": "@ChankeyPathak that will have no effect. (they will be removed by the shell before being passed to the script)."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472065884, "post_id": 39124053, "comment_id": 65607944, "body": "Ah I see. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472046522, "post_id": 39124628, "comment_id": 65595807, "body": "or as the option notes state you can call the command and enforcing POSIXLY_CORRECT by environment variable: <code>POSIXLY_CORRECT=1 perl test.pl &quot;-bindings&quot; &quot;+WBAOBtud&#47;UuM7uuCG2T+0ZvoCeuu&#47;x24ovYkwjI2YM=&quot;  ....</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 5, "last_activity_date": 1472045091, "creation_date": 1472045091, "answer_id": 39124628, "question_id": 39124053, "link": "https://stackoverflow.com/questions/39124053/unknown-option-when-using-getoptlong-perl/39124628#39124628", "title": "Unknown Option when using Getopt::Long Perl", "body": "<p>You need to disable the <code>getopt_compat</code> option to prevent leading <code>+</code> from being treated as equivalent to <code>--</code>:</p>\n\n<pre><code>getopt_compat\n            Allow \"+\" to start options. Default is enabled unless\n            environment variable POSIXLY_CORRECT has been set, in which\n            case \"getopt_compat\" is disabled.\n</code></pre>\n\n<p>as in</p>\n\n<pre><code>use Getopt::Long qw(:config no_getopt_compat);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Getopt::Long;\nGetopt::Long::Configure(\"no_getopt_compat\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1472052591, "creation_date": 1472052591, "answer_id": 39127442, "question_id": 39124053, "link": "https://stackoverflow.com/questions/39124053/unknown-option-when-using-getoptlong-perl/39127442#39127442", "title": "Unknown Option when using Getopt::Long Perl", "body": "<p>The underlying problem is that you used <code>:s</code> when you meant to use <code>=s</code>. Since you said it's perfectly valid to omit <code>--bindings</code>'s argument, and since <code>+</code> can be a valid option start, it thinks you mean to use <code>--bindings</code> with no argument.</p>\n\n<p>Fix:</p>\n\n<pre><code>sub parseCommandLineParams {\n    GetOptions(\n        'bindings=s'  =&gt; \\$hmpParams{bindings},\n        'bindings1=s' =&gt; \\$hmpParams{bindings1},\n        'bindings2=s' =&gt; \\$hmpParams{bindings2},\n        'filename=s'  =&gt; \\$hmpParams{filename},\n        'key=s'       =&gt; \\$hmpParams{key},\n    )\n        or die(\"usage\\n\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub parseCommandLineParams {\n    GetOptions(\n        \\%hmpParams,\n        'bindings=s',\n        'bindings1=s',\n        'bindings2=s',\n        'filename=s',\n        'key=s',\n    )\n        or die(\"usage\\n\");\n}\n</code></pre>\n\n<hr>\n\n<p>By the way, I also use Getopt::Long in POSIX-compliance mode by using something like the following:</p>\n\n<pre><code>use Getopt::Long qw( :config posix_default );\n</code></pre>\n\n<p>In this mode, <code>+</code> is not considered the start of an option.</p>\n\n<pre><code>perl test.pl                                                      \\\n    --bindings +WBAOBtud/UuM7uuCG2T+0ZvoCeuu/x24ovYkwjI2YM=       \\\n    --filename /tmp/keyMapperFile_2016-08-24-04:43:06             \\\n    --key avqijvmlf5ipq_5j0038opvhqmh_28jm8d913ptv0_3ie1ctia2cdqd \\\n    --bindings1 ''                                                \\\n    --bindings2 ''\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2650508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32be6d75830f30ae79626e434c474f4d?s=128&d=identicon&r=PG", "display_name": "mohitm", "link": "https://stackoverflow.com/users/2650508/mohitm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1472052591, "creation_date": 1472043626, "last_edit_date": 1472043711, "question_id": 39124053, "link": "https://stackoverflow.com/questions/39124053/unknown-option-when-using-getoptlong-perl", "title": "Unknown Option when using Getopt::Long Perl", "body": "<p>I have a perl file which basically takes input as follows:</p>\n\n<pre><code>use strict;\nuse File::Copy;\nuse File::Path;\nuse Sys::Hostname;\nuse Getopt::Long;\nuse File::Spec;\nuse File::Compare;\nuse MIME::Base64;\nuse Digest::MD5 qw(md5_hex);\nmy %hmpParams;\nmy $keybindings;\nmy $keybindings1;\nmy $keybindings2;\nmy $filename;\nmy $osname;\nmy $copy=\"cp\";\n\n&amp;parseCommandLineParams();\n\nwhile ((my $k, my $v) = each %hmpParams ){\n        print($k . \" = \" . $v . \"\\n\");\n}\n\n\nsub parseCommandLineParams(){\nGetOptions ( 'bindings:s' =&gt; \\$hmpParams{bindings},\n             'filename:s' =&gt; \\$hmpParams{filename},\n             'key:s' =&gt; \\$hmpParams{key},\n             'bindings1:s' =&gt; \\$hmpParams{bindings1},\n             'bindings2:s' =&gt; \\$hmpParams{bindings2}\n           );\n}\n</code></pre>\n\n<p>I am executing this Perl file as follows:</p>\n\n<pre><code>perl test.pl \"-bindings\" \"+WBAOBtud/UuM7uuCG2T+0ZvoCeuu/x24ovYkwjI2YM=\" \"-filename\" \"/tmp/keyMapperFile_2016-08-24-04:43:06\" \"-key\" \"avqijvmlf5ipq_5j0038opvhqmh_28jm8d913ptv0_3ie1ctia2cdqd\" \"-bindings1\" \"\" \"-bindings2\" \"\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Unknown option: wbaobtud/uum7uucg2t+0zvoceuu/x24ovykwji2ym\nbindings2 = \nfilename = /tmp/keyMapperFile_2016-08-24-04:43:06\nbindings = \nbindings1 = \nkey = avqijvmlf5ipq_5j0038opvhqmh_28jm8d913ptv0_3ie1ctia2cdqd\n</code></pre>\n\n<p>I see that whenever there is a preceding + sign in the value of an option it does not recognizes it as value but instead treats it as option. How do I get around this error? What is the reason behind this?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 0, "last_activity_date": 1472041001, "creation_date": 1472041001, "answer_id": 39123091, "question_id": 39122979, "link": "https://stackoverflow.com/questions/39122979/how-to-use-debugger-on-perl-script-executed-by-exec/39123091#39123091", "title": "How to use debugger on perl script executed by &quot;exec&quot;", "body": "<p>Add below to the script which is being called with <code>exec</code></p>\n\n<pre><code>#!/usr/bin/perl -d\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 2466437, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6f695ae2f7b45c0711a68be4f4ca87ae?s=128&d=identicon&r=PG", "display_name": "Gautam", "link": "https://stackoverflow.com/users/2466437/gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 39123091, "answer_count": 1, "score": 1, "last_activity_date": 1472041001, "creation_date": 1472040691, "question_id": 39122979, "link": "https://stackoverflow.com/questions/39122979/how-to-use-debugger-on-perl-script-executed-by-exec", "title": "How to use debugger on perl script executed by &quot;exec&quot;", "body": "<p>I trying to figure out how a Perl script which is doing test status reporting, is working. The script executes another piece of perl script via <code>exec</code>. I am able single step through code in first script but when it hits <code>exec</code>, the script executed by <code>exec</code> runs till completion. Is there a way by which I will be able single step and look at variables in the script executed  by <code>exec</code>?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 1, "last_activity_date": 1472040915, "last_edit_date": 1472040915, "creation_date": 1472039611, "answer_id": 39122604, "question_id": 39122099, "link": "https://stackoverflow.com/questions/39122099/perl-parse-second-instance-with-regex/39122604#39122604", "title": "Perl parse second instance with regex", "body": "<p>Assign the pattern match operator result to an array. The array will contain all capture groups from all matches:</p>\n\n<pre><code>my $content = \"abc 1,2345 def  0,9876    5,6789\";\nmy @dollars = $content =~ /\\s+(\\d,\\d{4})/g;\n\n# Now, use the captures in @dollars this way:\nforeach my $dollar (@dollars[0,1]) {\n    # process the $dollar items in a loop\n}\n\n# ... or this way:\nmy $dollar1 = shift @dollars;\n# process the $dollar1\nmy $dollar2 = shift @dollars;\n# process the $dollar2\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6736355, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046960102006178/picture?type=large", "display_name": "Hesperson", "link": "https://stackoverflow.com/users/6736355/hesperson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 39122604, "answer_count": 1, "score": 0, "last_activity_date": 1472040915, "creation_date": 1472038142, "last_edit_date": 1472038192, "question_id": 39122099, "link": "https://stackoverflow.com/questions/39122099/perl-parse-second-instance-with-regex", "title": "Perl parse second instance with regex", "body": "<p>I have code which get a rate of exchange:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse LWP::Simple;\nuse POSIX qw(strftime);\nuse Math::Round;\nuse CGI qw(header start_html end_html);\nuse DBI;\n\nsub isfloat {\nmy $val = shift; \nreturn $val =~ m/^\\d+.\\d+$/;\n}\n\n.....\n\n\nmy $content = get('URL PAGE');\n$content =~ /\\s+(\\d,\\d{4})/gi;\n\nmy $dolar = $1;\n$dolar =~ s/\\,/./g;\nif (!isfloat($dolar)) {\nerror(\"Error USD!\");\n}\n</code></pre>\n\n<p>How can I grab second instance /\\s+(\\d,\\d{4})/gi ??</p>\n\n<p>I tried solution from Perl Cookbook like this:</p>\n\n<pre><code>$content =~ /(?:\\s+(\\d,\\d{4})) {2} \\s+(\\d,\\d{4})/i;\n</code></pre>\n\n<p>but I have errors: </p>\n\n<pre><code>Use of uninitialized value $val in pattern match (m//)\nUse of uninitialized value $dolar in substitution (s///)\n</code></pre>\n"}, {"tags": ["perl", "xslt", "xslt-1.0", "exslt"], "comments": [{"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 0, "creation_date": 1472045629, "post_id": 39121169, "comment_id": 65595111, "body": "Consider adding a tag for Perl to get some help specific to Perl and libxslt. I am not sure many of the readers seeing questions on XSLT use Perl to run the stylesheet."}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 0, "creation_date": 1472046325, "post_id": 39121169, "comment_id": 65595638, "body": "Updated the question."}, {"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 1, "creation_date": 1472049233, "post_id": 39121169, "comment_id": 65597909, "body": "<a href=\"http://search.cpan.org/dist/XML-LibXSLT/LibXSLT.pm\" rel=\"nofollow noreferrer\">search.cpan.org/dist/XML-LibXSLT/LibXSLT.pm</a> says in the section &quot;XML::LibXSLT::Security&quot;: &quot;By default, create_dir is not allowed. To enable it a callback must be registered.&quot; so it look as if you have to allow it explicitly as described there by setting up a callback returning <code>1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "is_accepted": false, "score": 1, "last_activity_date": 1472041048, "creation_date": 1472041048, "answer_id": 39123115, "question_id": 39121169, "link": "https://stackoverflow.com/questions/39121169/xslt-1-0-generation-of-a-directory/39123115#39123115", "title": "XSLT 1.0 generation of a directory", "body": "<p>I tried</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:exsl=\"http://exslt.org/common\"\n    extension-element-prefixes=\"exsl\"\n    exclude-result-prefixes=\"xs exsl\"\n    version=\"1.0\"&gt;\n\n    &lt;xsl:template match=\"/\"&gt;\n        &lt;exsl:document href=\"outputTest1/test2016082403Result.xml\"&gt;\n            &lt;foo&gt;bar&lt;/foo&gt;\n        &lt;/exsl:document&gt;\n    &lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>with xsltproc as provided with oXygen and the directory <code>outputTest1</code> was created and contained the file <code>test2016082403Result.xml</code> so at least with xsltproc/libxslt the directory creation seems to be supported. I am not aware on any other XSLT 1.0 processor supporting <code>exsl:document</code> anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "is_accepted": true, "score": 1, "last_activity_date": 1472110106, "creation_date": 1472110106, "answer_id": 39139171, "question_id": 39121169, "link": "https://stackoverflow.com/questions/39121169/xslt-1-0-generation-of-a-directory/39139171#39139171", "title": "XSLT 1.0 generation of a directory", "body": "<p>Yes, one can write/read file and create directory in XSLT 1.0 if you are using Perl for triggering the transformation. As mentioned by Martin Honnen, all I had to do was add the few security callbacks such that it would all the XSLT engine to perform the file operations. Perl script now looks like</p>\n\n<pre><code>#!/usr/local/bin/perl -w\n\nuse strict;\nuse warnings;\nuse File::Path;\nuse File::Spec;\nuse File::Basename;\nuse XML::LibXSLT;\nuse XML::LibXML;\n\nmy $isfile;\n\nmy ($xmlfile,$xsltfile,$samplefile) = qw/ Example.xml trans.xsl sample.xml/;\n\nif(-f $samplefile)\n{\n    $isfile = \"true\";\n    print \"File is present\\n\";\n}\nelse\n{\n    $isfile = \"false\";\n    print \"File is absent\\n\";\n}\n\nmy %args = ( \"isfile\" =&gt; $isfile ); \nmy $xslt = XML::LibXSLT-&gt;new;\nmy $stylesheet = $xslt-&gt;parse_stylesheet_file($xsltfile);\n\n    my $security = XML::LibXSLT::Security-&gt;new();\n    $security-&gt;register_callback( read_file  =&gt; sub { return 1;} );\n    $security-&gt;register_callback( write_file =&gt; sub { return 1;} );\n    $security-&gt;register_callback( create_dir =&gt; sub { return 1;} );\n    $stylesheet-&gt;security_callbacks( $security );\n\nmy $results    = $stylesheet-&gt;transform_file($xmlfile,XML::LibXSLT::xpath_to_string(%{args}));\n\n0;\n</code></pre>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 39139171, "answer_count": 2, "score": -1, "last_activity_date": 1472110106, "creation_date": 1472035564, "last_edit_date": 1472046294, "question_id": 39121169, "link": "https://stackoverflow.com/questions/39121169/xslt-1-0-generation-of-a-directory", "title": "XSLT 1.0 generation of a directory", "body": "<p>Is there any facility available in XSLT 1.0 or exslt to generate a result document so that it also creates the directory(ies) in the path if they are not present? Or do I have to create the directory separately before generating the output document? </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I am using Perl to perform the XSLT 1.0 transformation.\nHere is the code that I use.</p>\n\n<pre><code>#!/usr/local/bin/perl -w\n\nuse strict;\nuse warnings;\nuse File::Path;\nuse File::Spec;\nuse File::Basename;\nuse XML::LibXSLT;\nuse XML::LibXML;\n\nmy $isfile;\n\nmy ($xmlfile,$xsltfile,$samplefile) = qw/ Example.xml trans.xsl sample.xml/;\n\nif(-f $samplefile)\n{\n    $isfile = \"true\";\n    print \"File is present\\n\";\n}\nelse\n{\n    $isfile = \"false\";\n    print \"File is absent\\n\";\n}\n\nmy %args = ( \"isfile\" =&gt; $isfile ); \nmy $xslt = XML::LibXSLT-&gt;new;\nmy $stylesheet = $xslt-&gt;parse_stylesheet_file($xsltfile);\nmy $results    = $stylesheet-&gt;transform_file($xmlfile,XML::LibXSLT::xpath_to_string(%{args}));\n\n0;\n</code></pre>\n\n<p>And my XSL file is as follows</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:xalan=\"http://xml.apache.org/xslt\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:exsl=\"http://exslt.org/common\"\n    extension-element-prefixes=\"exsl\"&gt;\n    &lt;xsl:output method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\" media-type=\"text/xml\"/&gt;\n\n    &lt;xsl:param name=\"isfile\"/&gt;\n\n    &lt;xsl:template match=\"/\"&gt;      \n            &lt;xsl:if test=\"$isfile = 'true'\"&gt;  \n                &lt;exsl:document href = \"/home/USER/Documents/XSLT/Dir1/Dir2/Dir3/outputfile1.xml\" method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\"&gt;                  \n                    Article:- &lt;xsl:value-of select=\"/Article/Title\"/&gt;\n                    Authors:- &lt;xsl:apply-templates select=\"/Article/Authors/Author\"/&gt;\n                &lt;/exsl:document&gt;\n            &lt;/xsl:if&gt;\n        &lt;/xsl:template&gt;\n\n        &lt;xsl:template match=\"Author\"&gt;\n            &lt;exsl:document href = \"outputfile2.xml\" method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\"&gt;                  \n                always Generate this output!! &lt;xsl:value-of select=\".\" /&gt;\n            &lt;/exsl:document&gt;\n        &lt;/xsl:template&gt;\n    &lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>I get following errors.</p>\n\n<pre><code>runtime error: file trans.xsl line 24 element document\nDirectory creation for /home/USER/Documents/XSLT/Dir1/Dir2/Dir3/outputfile1.xml refused\nruntime error: file trans.xsl line 24 element document\nxsltDocumentElem: write rights for /home/USER/Documents/XSLT/Dir1/Dir2/Dir3/outputfile1.xml denied\n at Transform.pl line 29\n</code></pre>\n\n<p>Even when I change the path as <code>Dir1/Dir2/Dir3/outputfile1.xml</code> (so that it uses the current directory where I have given full permissions),in the xsl file, I get following errors.</p>\n\n<pre><code>runtime error: file trans.xsl line 24 element document\nDirectory creation for Dir1/Dir2/Dir3/outputfile1.xml refused\nruntime error: file trans.xsl line 24 element document\nxsltDocumentElem: write rights for Dir1/Dir2/Dir3/outputfile1.xml denied\n at Transform.pl line 29\n</code></pre>\n\n<p>Does the libxslt in Perl 5.8.8 not support the directory creation?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472035690, "post_id": 39120650, "comment_id": 65588009, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1549685/how-can-i-use-a-variable-as-a-variable-name-in-perl\">How can I use a variable as a variable name in Perl?</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472036567, "post_id": 39120650, "comment_id": 65588579, "body": "Is that definitely <code>1..$#genome_list</code> - because <code>@genome_list</code> probably starts at <code>0</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1472035555, "post_id": 39120762, "comment_id": 65587917, "body": "Wouldn&#39;t this be better as an array, since the keys are a contiguous range of integers?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472035867, "post_id": 39120762, "comment_id": 65588131, "body": "Probably, yes. I was thinking in terms of it being a &#39;string&#39; they&#39;re trying to use as a key, despite it being numbered."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1472036535, "last_edit_date": 1472036535, "creation_date": 1472034471, "answer_id": 39120762, "question_id": 39120650, "link": "https://stackoverflow.com/questions/39120650/how-to-open-the-multiple-files-dynamically-using-a-dynamic-file-handle/39120762#39120762", "title": "How to open the multiple files dynamically using a dynamic file handle", "body": "<p>You're trying to do something that's a <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow\">little bit nasty</a>, and rather than tell you how to do that, I'm going to suggest an alternative. </p>\n\n<p>If you need multiple filehandles open at once, then what you need is a <em>hash</em>:</p>\n\n<pre><code>my %file_handle_for;\nfor my $i ( 1..$#genome_list ) { \n    open ( $file_handle_for{$i}, '&lt;', \"filename$i\" ) or die $!;\n}\n</code></pre>\n\n<p>Then you can just access the file as:</p>\n\n<pre><code>print {$file_handle_for{$i}} \"Some text\\n\"; \n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>while ( &lt;{$file_handle_for{$i}}&gt; ) {\n    print;\n }\n</code></pre>\n\n<p>etc. </p>\n\n<p>That's assuming of course, you need to open all your files concurrently, which you may well not need to. </p>\n\n<p>The above is the general solution to wanting to use variables as variable names.</p>\n\n<p>Looking at it in your case though - you're opening files in numeric order with no gaps, and that means an array is better suited. </p>\n\n<pre><code>my @filehandle_for; \n#note though - arrays start at zero normally, so you might be missing one here!\nforeach my $number ( 1..$#genome_list ) { \n  open ( $filehandle_for[$number], '&lt;', \"filename$number\" ) or die $!;\n}\n</code></pre>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 39120762, "answer_count": 1, "score": 0, "last_activity_date": 1472038244, "creation_date": 1472034201, "last_edit_date": 1472038244, "question_id": 39120650, "link": "https://stackoverflow.com/questions/39120650/how-to-open-the-multiple-files-dynamically-using-a-dynamic-file-handle", "title": "How to open the multiple files dynamically using a dynamic file handle", "body": "<p>I'm trying to opening multiple files using the a dynamic file handle but it doesn't work. </p>\n\n<pre><code>for my $i ( 1 .. $#genome_list ) {\n    my $fh = \"RESULT$i\";\n    open my $fh, \"&lt;\", \"filename$i\"; # here is the problem\n}\n</code></pre>\n\n<p>Then how to access the data of the given handler.</p>\n\n<p>When I run the program it shows this error</p>\n\n<pre><code>Can't use string (\"RESULT1\") as a symbol ref while \"strict refs\" \n</code></pre>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["perl", "associative-array"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472028318, "post_id": 39118440, "comment_id": 65583176, "body": "Need some source data as an example I think."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472032149, "post_id": 39118971, "comment_id": 65585625, "body": "You don&#39;t need to initialise, <code>++</code> (and autovivify) does that implicitly."}], "tags": [], "owner": {"reputation": 71, "user_id": 4369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc11ff0fc0b464d07dee0c51b5a7f93?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Loch", "link": "https://stackoverflow.com/users/4369588/wolfgang-loch"}, "is_accepted": true, "score": 0, "last_activity_date": 1472029606, "creation_date": 1472029606, "answer_id": 39118971, "question_id": 39118440, "link": "https://stackoverflow.com/questions/39118440/get-all-values-from-one-dimension-in-a-perl-hash/39118971#39118971", "title": "Get all values from one dimension in a Perl hash", "body": "<p>You have to sum up the values for each type. Either you do it with the existing loop</p>\n\n<pre><code>my %datavalue2;\nmy %totalsPerStatus;\nforeach my $alert ( @{ $data } )\n{\n   ...\n   $totalsPerStatus{$date[0]}{$status} //= 0; # initialize total per status\n   $totalsPerStatus{$date[0]}{$status}++; # increment total\n}\n\n$total_type1 += $totalsPerStatus{'2016-08-15'}{1};\n</code></pre>\n\n<p>... or afterwards ...</p>\n\n<pre><code>sub getTotalPerStatus {\n    my ($datavalue2, $date, $status) = @_;\n\n    $total = 0;\n    foreach my $type (keys %{$datavalue2-&gt;{$date}}) {\n        if (exists $datavalue2-&gt;{$date}-&gt;{$type}-&gt;{$status}) {\n            $total += $datavalue2-&gt;{$date}-&gt;{$type}-&gt;{$status} \n        }\n    }\n    return $total;\n}\n\n$total_type1 += getTotalPerStatus(\\%datavalue2, '2016-08-15', 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1472030380, "creation_date": 1472030380, "answer_id": 39119239, "question_id": 39118440, "link": "https://stackoverflow.com/questions/39118440/get-all-values-from-one-dimension-in-a-perl-hash/39119239#39119239", "title": "Get all values from one dimension in a Perl hash", "body": "<p>Note that <strong><em>none of this code is tested</em></strong> as I have only a tablet to use at present</p>\n\n<p>First of all, there's no need to check whether a hash element exists before incrementing it. Perl will <em>autovivify</em> the elements as necessary, so you can write your code like this</p>\n\n<pre><code>my %datavalue2;\n\nfor my $alert ( @$data ) {\n\n    my @date = split ' ', $alert-&gt;{logged};\n\n    $status = $alert-&gt;{status}{status};\n    $type   = $alert-&gt;{type};\n\n    ++$datavalue2{$date[0]}{$type}{$status};\n}\n</code></pre>\n\n<p>Your data structure isn't ideal for doing what you've asked for, and you may well be better off redesigning it. But what you want is certainly possible</p>\n\n<pre><code>my $date = '2016-08-15';\nmy $total_status1 = 0;\n\n$total_status1 += $_-&gt;{1} // 0 for values %{  $datavalue{$date} };\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6223882, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4yCGg.png?s=128&g=1", "display_name": "cterra", "link": "https://stackoverflow.com/users/6223882/cterra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 39118971, "answer_count": 2, "score": 0, "last_activity_date": 1472030380, "creation_date": 1472028098, "last_edit_date": 1472029484, "question_id": 39118440, "link": "https://stackoverflow.com/questions/39118440/get-all-values-from-one-dimension-in-a-perl-hash", "title": "Get all values from one dimension in a Perl hash", "body": "<p>I have a hash built like this:</p>\n\n<pre><code>my %datavalue2;\n\nforeach my $alert ( @{ $data } ) {\n\n    my @date = split(/ /,$alert-&gt;{logged});\n\n    $status = $alert-&gt;{status}-&gt;{status};\n    $type   = $alert-&gt;{type};\n\n    if  ( ! defined $datavalue2{$date[0]}{$type}{$status} ) {\n        # print \"initialisation de la variable du \".$date[0].\" de type \".$type.\" avec le status \".$status.\"&lt;br&gt;\";\n        $datavalue2{$date[0]}{$type}{$status}=1;\n    }\n    else {\n        # print \"incr&amp;eacute;mentation de la variable du \".$date[0].\" de type \".$type.\" avec le status \".$status.\"&lt;br&gt;\";\n        $datavalue2{$date[0]}{$type}{$status} +=1;\n    }\n\n    # print \"&lt;br&gt; \";\n}\n</code></pre>\n\n<p>How can I get the sum of all <code>$status=1</code> for one date and each type? </p>\n\n<p>I want something like <code>$total_type1 += $datavalue2{2016-08-15}{*}{1}</code> but I don't know the syntax. Is it possible?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1471991270, "post_id": 39111572, "comment_id": 65570633, "body": "What does <code>1</code> mean? Why do you want a default value of 1?"}, {"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 1, "creation_date": 1471991802, "post_id": 39111572, "comment_id": 65570789, "body": "What do you expect to do if there is a circular dependency? Your example has one (p1 -&gt; p4 -&gt; p1)"}, {"owner": {"reputation": 73, "user_id": 4293785, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-2EZVmydodK8/AAAAAAAAAAI/AAAAAAAAACU/MTgIkAEQ0v8/photo.jpg?sz=128", "display_name": "piecia", "link": "https://stackoverflow.com/users/4293785/piecia"}, "reply_to_user": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1472023007, "post_id": 39111572, "comment_id": 65579871, "body": "This was only an idea. I need dependency tree for sorting an array of programs. And this was wrong bad example. In fact I do not have a circular dependency."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1471998380, "last_edit_date": 1471998380, "creation_date": 1471992292, "answer_id": 39111827, "question_id": 39111572, "link": "https://stackoverflow.com/questions/39111572/perl-nested-hash-of-dependency-for-programs/39111827#39111827", "title": "Perl nested hash of dependency for programs", "body": "<p>Reducing the data to the following allows the problem to be examined more effectively:</p>\n\n<pre><code>program1: program2\nprogram2: program7\n</code></pre>\n\n<hr>\n\n<p>In the first case, what you do boils down to</p>\n\n<pre><code>$d-&gt;{p2} = 1;\n$d-&gt;{p1}{p2} = $d-&gt;{p2};     # $d-&gt;{p1}{p2} = 1;\n$d-&gt;{p2} = {};\n$d-&gt;{p7} = 1;\n$d-&gt;{p2}{p7} = $d-&gt;{p7};     # $d-&gt;{p2}{p7} = 1;\n</code></pre>\n\n<p><code>$d-&gt;{p1}{p2}</code> contains <code>1</code>, and <code>$d-&gt;{p2}</code> contains a reference to a hash which is modified in the last line.</p>\n\n<hr>\n\n<p>In the second case, what you do boils down to</p>\n\n<pre><code>$d-&gt;{p2} = {};\n$d-&gt;{p1}{p2} = $d-&gt;{p2};\n$d-&gt;{p7} = {};\n$d-&gt;{p2}{p7} = $d-&gt;{p7};\n</code></pre>\n\n<p><code>$d-&gt;{p1}{p2}</code> and <code>$d-&gt;{p2}</code> contain references to the same hash, which is modified in the last line.</p>\n\n<hr>\n\n<p>Your code could have been written as follows:</p>\n\n<pre><code>my %dependency_tree;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my ( $component, $depends ) = split /:/;\n    $dependency_tree{$component} ||= {};\n    for my $dependency (split ' ', $depends) {\n        $dependency_tree{$component}{$dependency} =\n            $dependency_tree{$dependency} ||= {};\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4293785, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-2EZVmydodK8/AAAAAAAAAAI/AAAAAAAAACU/MTgIkAEQ0v8/photo.jpg?sz=128", "display_name": "piecia", "link": "https://stackoverflow.com/users/4293785/piecia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471998380, "creation_date": 1471990789, "question_id": 39111572, "link": "https://stackoverflow.com/questions/39111572/perl-nested-hash-of-dependency-for-programs", "title": "Perl nested hash of dependency for programs", "body": "<p>I need create hash of dependency in Perl. The program1 depends from program2 program4 program10 program5 program7 program6 etc. Data are randomly generated for example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse English qw( -no_match_vars );\n\nmy $dependsOrder = {};\nwhile (my $line = &lt;DATA&gt;) {\n    chomp $line;\n    my ( $component, $depends ) = split /:/, $line;\n    if ( exists $dependsOrder-&gt;{$component} and $dependsOrder-&gt;{$component} == 1 ) {\n        $dependsOrder-&gt;{$component} = {};\n    }\n    if ( $depends ) {\n        $depends =~ s/^\\s+|\\s+$// if $depends;\n        my @depends = split /\\s+/, $depends;\n        for my $dependency ( @depends ) {\n            if ( not exists $dependsOrder-&gt;{$dependency} ) {\n                # default value\n                $dependsOrder-&gt;{$dependency} = 1;\n            }\n            $dependsOrder-&gt;{$component}-&gt;{$dependency} = $dependsOrder-&gt;{$dependency};\n        }\n    }\n    else {\n        $dependsOrder-&gt;{$component} = 1;\n    }\n}\nprint Dumper $dependsOrder-&gt;{'program1'};\n#print Dumper $dependsOrder-&gt;{'program6'};\n\n__DATA__\nprogram1: program2 program4 program10 program5 program7 program6\nprogram2: program7 program5 program9 program8 program10 program3 program6 program1\nprogram3: program2 program9 program8\nprogram4: program5 program8 program10 program1 program2 program2 program9\nprogram5: program3 program6 program4 program7\nprogram6: program5 program8 program7\nprogram7: program1 program2 program9 program10\nprogram8: program1 program9 program6 program10 program3 program2 \nprogram9: \nprogram10: program6 program9\n</code></pre>\n\n<p>This code not really works:</p>\n\n<pre><code>$VAR1 = {\n          'program7' =&gt; 1,\n          'program10' =&gt; 1,\n          'program6' =&gt; 1,\n          'program2' =&gt; 1,\n          'program4' =&gt; 1,\n          'program5' =&gt; 1\n        };\n</code></pre>\n\n<p>But if I change the 22nd line:</p>\n\n<pre><code>$dependsOrder-&gt;{$dependency} = 1;\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>$dependsOrder-&gt;{$dependency} = {};\n</code></pre>\n\n<p>It works fine, but I do not have a default value:</p>\n\n<pre><code>$VAR1 = {\n          'program7' =&gt; {\n                          'program2' =&gt; {\n                                          'program8' =&gt; {\n                                                          'program9' =&gt; {},\n                                                          'program6' =&gt; {\n</code></pre>\n\n<p>What is wrong in my reasoning with default values?</p>\n"}, {"tags": ["perl", "variables"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472027023, "post_id": 39111447, "comment_id": 65582344, "body": "You <b><i>must always</i></b> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl source file that you write. You should also indent your code properly so that its structure is clear, and it&#39;s only polite to do so when you&#39;re asking for help with it."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1471990825, "creation_date": 1471990825, "answer_id": 39111579, "question_id": 39111447, "link": "https://stackoverflow.com/questions/39111447/checking-which-lines-of-a-file-are-not-in-another-file-time-efficiently-in-perl/39111579#39111579", "title": "Checking which lines of a file are not in another file time efficiently in perl", "body": "<p>Use a hash instead of an array. If <code>file.txt</code> is really large, hash the smaller input file. You can use a concatenation of the important input fields as the key, and the rest as a value, or use a hash of hashes with each important field as a key of another level, and the remaining values as the value (as a string or array).</p>\n\n<pre><code>$hash{$name}{$start}{$stop}{$num} = [ $spot, $sStart, $sStop, $id ];\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1471990825, "creation_date": 1471990136, "question_id": 39111447, "link": "https://stackoverflow.com/questions/39111447/checking-which-lines-of-a-file-are-not-in-another-file-time-efficiently-in-perl", "title": "Checking which lines of a file are not in another file time efficiently in perl", "body": "<p>I want to compare a file to another file and find out what lines are found in the input file but not the file it is being compared to</p>\n\n<p>This is my script right now</p>\n\n<pre><code>#!/usr/bin/perl\nmy $data_file = \"file.txt\";\nmy @data;\n{\n    open my $fh, \"&lt;\", $data_file or die qq{Unable to open \"$data_file\" for input: $1};\nwhile ( &lt;$fh&gt; ) {\n    next unless /\\S/;\n    push @data, [ split ];\n    }\n}\nmy $found;\nwhile ( &lt;&gt; ) {\n    $found=0;\n    my ($num, $spot, $sStart, $sStop, $name, $id, $start, $stop) = split;\n    for $item ( @data ) {\n        ($uNum, $uSpotStart, $uSpotStop, $uSpot, $udontUse, $uStart, $uStop, $uName) = @$item;\n        if ( $uName eq $name and $start == $uStart and $stop == $uStop and $uNum eq $num ) {\n            $found=1;\n            last;\n        }\n    }\n    if ($found==0){\n        print $_;\n    }\n}\n</code></pre>\n\n<p>The script works but the problem is that it can never finish compiling because file.txt contains about 200,000 lines and the input file contains about 20,000 lines</p>\n\n<p>This is an example of what would be in file.txt</p>\n\n<pre><code>1   1729    1858    25  g   6600    6700    Sam\n15  9302    9030    12  t   3900    4500    Frodo\n19  0   2000    13  y   3300    3800    Merry\n20  0   510 13  h   6300    6500    Pippin\n</code></pre>\n\n<p>While this would be the input file to the program</p>\n\n<pre><code>1   25  1600    1700    Sam 40  6600    6700\n15  11  1500    2000    Frodo   67  3900    4500\n15  11  1500    2000    Frodo   67  3800    4500\n17  10  3000    3100    Bilbo   50  2300    2600\n19  20  3400    3700    Merry   39  3300    3800\n20  90  3900    4200    Pippin  80  6300    6500\n</code></pre>\n\n<p>This should be the output</p>\n\n<pre><code>15  11  1500    2000    Frodo   67  3800    4500\n17  10  3000    3100    Bilbo   50  2300    2600\n</code></pre>\n\n<p>And it is but with the amount of lines I'm looking at I just can't do this time efficiently</p>\n\n<p>I essentially want the script to do what it does now but with less processes involved when used on a larger scale</p>\n\n<p>Thank-you!</p>\n"}, {"tags": ["linux", "bash", "perl", "symbols", "substitution"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1471976637, "post_id": 39108136, "comment_id": 65563779, "body": "Use: <code>perl -pie &#39;s&#47;.*&#47;# \\$Header\\$&#47; if $.==2&#39;</code>"}, {"owner": {"reputation": 27, "user_id": 5511576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/637c9a5ea806bdfe76b6a62348115f79?s=128&d=identicon&r=PG&f=1", "display_name": "user5511576", "link": "https://stackoverflow.com/users/5511576/user5511576"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1471977212, "post_id": 39108136, "comment_id": 65564103, "body": "Thanks Bunch Anuchava, it worked!  :) perl -pie &#39;s/.*/# \\$Header\\$ / if $.==2&#39; ."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1471977379, "post_id": 39108136, "comment_id": 65564191, "body": "@anubhava&#39;s example pretty much works, except it replaces two lines with one because the <code>s&#47;&#47;&#47;</code> doesn&#39;t replace the &quot;\\n&quot; at the end of the string."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1471979737, "post_id": 39108136, "comment_id": 65565415, "body": "@AndyLester <code>.*</code> doesn&#39;t match the newline"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1471987787, "post_id": 39108136, "comment_id": 65569403, "body": "@ysth: My mistake.  Thanks."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1471987894, "post_id": 39108136, "comment_id": 65569451, "body": "@anubhava: That <code>-pie</code> won&#39;t do what you want.  Perl takes the <code>-ie</code> to mean that you want to replace in place, and to add <code>e</code> to the end of each backup file&#39;s name.  You have to do <code>perl -pi -e</code> or <code>perl -p -i -e</code>."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1471988588, "post_id": 39108136, "comment_id": 65569715, "body": "Thanks @AndyLester, I rarely use perl command line and those were the reasons why I left a comment not an answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5511576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/637c9a5ea806bdfe76b6a62348115f79?s=128&d=identicon&r=PG&f=1", "display_name": "user5511576", "link": "https://stackoverflow.com/users/5511576/user5511576"}, "edited": false, "score": 1, "creation_date": 1471977286, "post_id": 39108358, "comment_id": 65564146, "body": "Thanks for the explanation! I understand now! got it to work :)"}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": true, "score": 5, "last_activity_date": 1471977330, "last_edit_date": 1471977330, "creation_date": 1471977057, "answer_id": 39108358, "question_id": 39108136, "link": "https://stackoverflow.com/questions/39108136/perl-p-i-e-replace-line-with-text-containing-symbol/39108358#39108358", "title": "perl -p -i -e replace line with text containing symbol", "body": "<p>The error message tells you exactly what is wrong:</p>\n\n<pre><code>Final $ should be \\$ or $name at -e line 1, within string\n</code></pre>\n\n<p>You need to escape the <code>$</code>s.  It is seeing the second <code>$</code> as part of a variable, but it's not.</p>\n\n<p>You'll also need to escape the first <code>$</code> because Perl sees <code>$Header</code> as a variable, and will substitute the value of <code>$Header</code> instead of the actual string <code>$Header</code>.  Since <code>$Header</code> has no value, you'll just get an empty string.</p>\n\n<p>You also can't specify <code>.</code> as the files to operate on.  <code>.</code> is a directory, and Perl will tell you that if you try to use it as a file:</p>\n\n<pre><code>Can't do inplace edit: . is not a regular file.\n</code></pre>\n\n<p>You also want to use the <code>-l</code> flag to make sure that Perl handles line endings correctly.  When you replace the entire string with your new string, you're not including the <code>\\n</code> at the end.</p>\n\n<p>So what you want is:</p>\n\n<pre><code>perl -l -p -i -e 's/.*/# \\$Header\\$ / if $.==2' *.html\n</code></pre>\n\n<p>(replace <code>*.html</code> with your own filespec)</p>\n\n<p>Finally, you could also just replace the working variable <code>$_</code> with the string you want, rather than using the <code>s///</code>, like so:</p>\n\n<pre><code>perl -l -p -i -e '$_ = q{# $Header$} if $.==2'  *\n</code></pre>\n\n<p><code>q{xyz}</code> is the same as <code>'xyz'</code>, where no interpolation is done.</p>\n"}], "owner": {"reputation": 27, "user_id": 5511576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/637c9a5ea806bdfe76b6a62348115f79?s=128&d=identicon&r=PG&f=1", "display_name": "user5511576", "link": "https://stackoverflow.com/users/5511576/user5511576"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2686, "favorite_count": 1, "accepted_answer_id": 39108358, "answer_count": 1, "score": 2, "last_activity_date": 1471977330, "creation_date": 1471976244, "last_edit_date": 1471976348, "question_id": 39108136, "link": "https://stackoverflow.com/questions/39108136/perl-p-i-e-replace-line-with-text-containing-symbol", "title": "perl -p -i -e replace line with text containing symbol", "body": "<p>In a linux Vm, I am trying to change the second line of 50+ files.</p>\n\n<p>I have used this command below successfully for strings without symbols. </p>\n\n<pre><code>perl -p -i -e 's/.*/new_line / if $.==2' .\n</code></pre>\n\n<p>However now I am trying to add the new string  \" # $new_line $ \" using this command :</p>\n\n<pre><code>perl -p -i -e 's/.*/# $Header$ / if $.==2' .\n</code></pre>\n\n<p>But getting the following error:</p>\n\n<pre><code>Final $ should be \\$ or $name at -e line 1, within string\nsyntax error at -e line 1, near \"s/.*/# $Header$ /\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Any help is appreciated. Thank you in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 20361, "user_id": 312208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee4547c35ae70c13a4adc2aba1a585f5?s=128&d=identicon&r=PG", "display_name": "Ryley", "link": "https://stackoverflow.com/users/312208/ryley"}, "edited": false, "score": 0, "creation_date": 1471982646, "post_id": 39109154, "comment_id": 65566866, "body": "Yep, that seems to cover it, thanks.  I realize now that when I thought eval and try::tiny were failing, it was because of what you said - <code>defined($@)</code> vs  just <code>$@</code>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1471980517, "last_edit_date": 1592644375, "creation_date": 1471980032, "answer_id": 39109154, "question_id": 39107596, "link": "https://stackoverflow.com/questions/39107596/die-with-reference-to-an-object-that-overloads-bool/39109154#39109154", "title": "die with reference to an object that overloads bool", "body": "<h2>TL;DR</h2>\n<p>This is a bug in TryCatch. <code>$results</code> stringifies to the empty string and TryCatch calls <code>if $@</code> when it should call <code>if defined $@</code>.</p>\n<hr />\n<p>Here's an example without Data::FormValidator:</p>\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\npackage Foo;\n\nuse overload '&quot;&quot;' =&gt; sub { '' };\n\nsub new {\n    bless {}, $_[0];\n}\n\npackage main;\n\nuse TryCatch;\n\ntry {\n    my $foo = Foo-&gt;new;\n    die $foo;\n}\ncatch($e) {\n    say &quot;&lt;&lt;&lt;$e&gt;&gt;&gt;&quot;;\n}\n</code></pre>\n<p>TryCatch uses <a href=\"https://metacpan.org/pod/Devel::Declare\" rel=\"nofollow noreferrer\">Devel::Declare</a> to inject custom code when the Perl lexer encounters certain keywords. In this case, it generates something like this:<sup>*</sup></p>\n<pre><code>try;\n{\n    local $@;\n    eval {\n        my $foo = Foo-&gt;new;\n        die $foo;\n    };\n    $TryCatch::Error = $@;\n}\n\nif ($TryCatch::Error) {\n</code></pre>\n<p>Since <code>$@</code> is the empty string, <code>if ($TryCatch::Error)</code> is false and the <code>catch</code> block is never entered.</p>\n<p>This is a bug (one of <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=TryCatch\" rel=\"nofollow noreferrer\">many</a> for TryCatch). Use <code>eval</code> or Try::Tiny instead (just remember to check for <code>defined</code>, not truthy/falsey).</p>\n<hr />\n<p>* If you want to see exactly what gets injected, set the environment variable <code>TRYCATCH_DEBUG</code> to 1.</p>\n"}], "owner": {"reputation": 20361, "user_id": 312208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee4547c35ae70c13a4adc2aba1a585f5?s=128&d=identicon&r=PG", "display_name": "Ryley", "link": "https://stackoverflow.com/users/312208/ryley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 39109154, "answer_count": 1, "score": 3, "last_activity_date": 1471980517, "creation_date": 1471974015, "question_id": 39107596, "link": "https://stackoverflow.com/questions/39107596/die-with-reference-to-an-object-that-overloads-bool", "title": "die with reference to an object that overloads bool", "body": "<p>I'm using <a href=\"http://search.cpan.org/~markstos/Data-FormValidator-4.81/\" rel=\"nofollow\">Data::FormValidator</a> to deal with some data validation in DBIx::Class (via <a href=\"http://search.cpan.org/~claco/DBIx-Class-Validation-0.02005/\" rel=\"nofollow\">DBIx::Class::Validation</a>).  DBIC::Validation ultimately does <code>croak $results</code> if the validation fails, where <code>$results</code> is a <a href=\"http://search.cpan.org/~markstos/Data-FormValidator-4.81/lib/Data/FormValidator/Results.pm\" rel=\"nofollow\">Data::FormValidator::Results</a> object.  Unfortunately, that croak does not trigger my try/catch around the DBIC calls.</p>\n\n<p>Digging around a bit, I made this simplified test case (excluding DBIC entirely):</p>\n\n<pre><code>use strict;\nuse Data::FormValidator;                                                                                                                                                                                                                       \nuse TryCatch; #or Try::Tiny or eval, same results for each\n\n#setup a profile and values that fail under that profile\nmy $input_profile = {                                                                                                                                                                                                                          \n   required =&gt; [ qw( good_ip bad_ip ) ],                                                                                                                                                                                           \n   constraints =&gt; {                                                                                                                                                                                                                \n     good_ip =&gt; 'ip_address',                                                                                                                                                                                                    \n     bad_ip =&gt; 'ip_address',                                                                                                                                                                                                     \n   }                                                                                                                                                                                                                               \n};                                                                                                                                                                                                                         \n\nmy $validator = new Data::FormValidator({default =&gt; $input_profile});                                                                                                                                                                          \n\nmy $input_hashref = {                                                                                                                                                                                                                          \n   'good_ip' =&gt; '127.0.0.1',                                                                                                                                                                                                                   \n   'bad_ip'  =&gt; '300.23.1.1',                                                                                                                                                                                                                  \n                    };\ntry {                                                                                                                                                                                                                                          \n    my $results = $validator-&gt;check($input_hashref,'default');                                                                                                                                                                                 \n    die $results;                                                                                                                                                                                                                              \n} catch (Data::FormValidator::Results $e) {                                                                                                                                                                                                    \n    print STDERR \"failed with \".scalar(@{$e-&gt;invalid('bad_ip')}).\" invalid\\n\";                                                                                                                                                                 \n}    \n</code></pre>\n\n<p>I would expect that my catch block would get triggered.  Instead, nothing happens (execution continues).</p>\n\n<p>Looking at the source of the Results object, I see that it overloads <code>bool</code> with it's <code>success</code> method.  Removing that fixes my issue, but I don't understand why.  If that's the whole problem, is there a good way to work around it?</p>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1471970204, "post_id": 39106258, "comment_id": 65560075, "body": "For one thing, module names are case sensitive, so you don&#39;t want to say <code>package module2;</code> ... <code>use Module2;</code>. Even if this &quot;works&quot;, say, on Windows, you will quickly run into issues."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471971349, "post_id": 39106258, "comment_id": 65560792, "body": "Tip: <code>our @ISA = qw(Exporter);</code> is a backwards approach that&#39;s been replaced with <code>use Exporter qw( import );</code> a decade ago!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471971425, "post_id": 39106258, "comment_id": 65560840, "body": "Please be clear about what your modules&#39; file names and package names are. You have <code>module2</code>, <code>Module2</code> and <code>Module 2</code>, and if you are really using all of those variations then it is no wonder your code doesn&#39;t work. Do your module files end with <code>.pm</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471971598, "post_id": 39106258, "comment_id": 65560973, "body": "You mustn&#39;t use prototypes on Perl functions. Just <code>sub M1S1 { ... }</code> etc. is correct."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1471973744, "last_edit_date": 1471973744, "creation_date": 1471971950, "answer_id": 39107016, "question_id": 39106258, "link": "https://stackoverflow.com/questions/39106258/perl-script-and-module-calling-a-second-module/39107016#39107016", "title": "Perl: script and module calling a second module", "body": "<p>The file name, the name in the package directive, and the name in the <code>use</code> statement must match, and that includes case.</p>\n\n<pre><code> Module1.pm\n package Module1;\n use Module1;\n</code></pre>\n\n<p>Or if you had a non-flat namespace,</p>\n\n<pre><code> Foo/Bar.pm\n package Foo::Bar;\n use Foo::Bar;\n</code></pre>\n\n<p>Note that you can have similar <a href=\"http://www.perlmonks.org/?node_id=778639\" rel=\"nofollow\">problems</a> when you have two exporting modules that use each other (directly or indirectly), but that doesn't seem to the case.</p>\n\n<hr>\n\n<pre><code>$ cat Module1.pm\npackage Module1;\nuse strict;\nuse warnings;\nuse Exporter qw( import );\nour @EXPORT = qw( M1S1 );\nuse Module2;\nsub M1S1 { M2S1() }\n1;\n\n$ cat Module2.pm\npackage Module2;\nuse strict;\nuse warnings;\nuse Exporter qw( import );\nour @EXPORT = qw( M2S1 M2S2 );\nsub M2S1 { \"M2S1\" }\nsub M2S2 { \"M2S2\" }\n1;\n\n$ cat script.pl\n#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Module2;\nuse Module1;\nprint(M1S1(), \"\\n\");\nprint(M2S2(), \"\\n\");\n\n$ ./script.pl\nM2S1\nM2S2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2199767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5269a51ac8473895bfdd2274873edcf?s=128&d=identicon&r=PG", "display_name": "Swechsler", "link": "https://stackoverflow.com/users/2199767/swechsler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1471973744, "creation_date": 1471969183, "last_edit_date": 1471971291, "question_id": 39106258, "link": "https://stackoverflow.com/questions/39106258/perl-script-and-module-calling-a-second-module", "title": "Perl: script and module calling a second module", "body": "<p>I have the following:</p>\n\n<h3>Module1</h3>\n\n<pre><code>package module1;\nrequire Exporter;\nour @ISA = qw(Exporter);\nour @EXPORT = qw(&lt;list of subs within&gt;);\n\nuse Module2;\n\nsub M1S1 ()\n{\n  $x = M2S1();\n}\n</code></pre>\n\n<h3>Module 2</h3>\n\n<pre><code>package module2;\nrequire Exporter;\nour @ISA = qw(Exporter);\nour @EXPORT = qw(&lt;list of modules within&gt;);\nsub M2S1()\n{\n...\n}\n\nsub M2S2()\n{\n...\n}\n</code></pre>\n\n<h3>Script</h3>\n\n<pre><code>use Module2;\nuse Module1;\n\n$y = M1S1();\n$z = M2S2();\n</code></pre>\n\n<p>When the script calls a sub in <code>Module 1</code> which in turn calls a sub in <code>Module 2</code>, the sub is not found, even though the script can call those subs directly.</p>\n\n<p>I'm not a beginner to Perl by any means, but I've never fully gotten the hang of modules. Our environment has gotten very dependent on <code>module2</code>, so I don't want to make any changes that would require changing all the scripts that use it. <code>Module1</code> has limited use so I can make changes to it if necessary.</p>\n"}, {"tags": ["windows", "perl", "batch-file", "unix"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1471965734, "post_id": 39105076, "comment_id": 65557073, "body": "run cygwin then (most) CLI unix commands will work as expected"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1471965771, "post_id": 39105076, "comment_id": 65557105, "body": "@MarcB Or just use native Perl commands, since they can easily do the same work as <code>cat</code> and <code>grep</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1471966069, "post_id": 39105076, "comment_id": 65557279, "body": "Unrelated to your problem, but both uses of <code>cat</code> in your command are completely unnecessary: <code>grep -vf OEMDS.txt javasrc.txt &gt; javasrc_temp.txt</code> (I&#39;m assuming OEMDS.txt contains a single line)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471969516, "post_id": 39105076, "comment_id": 65559681, "body": "What is in <code>OEMDS.txt</code>?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1471973535, "post_id": 39105076, "comment_id": 65562036, "body": "I question why you expect &quot;unix&quot; commands like cat and grep to exist on a windows machine at all."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1471966096, "creation_date": 1471966096, "answer_id": 39105216, "question_id": 39105076, "link": "https://stackoverflow.com/questions/39105076/how-to-use-unix-commands-in-perl-to-be-used-on-a-windows-machine/39105216#39105216", "title": "How to use UNIX commands in Perl? (to be used on a Windows machine)", "body": "<p>I'd probably just do something like this in perl - no <code>system</code> commands needed.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nopen ( my $exclude_list, '&lt;', 'OEMDS.txt' ) or die $!; \nmy $exclude_regex = join ( \"|\", map { s/[\\r\\n]//r } &lt;$exclude_list&gt; );\n$exclude_regex = qr/($exclude_regex)/;\nopen ( my $src, '&lt;', 'javasrc.txt' ) or die $!;\nwhile ( &lt;$src&gt; ) { \n    print unless m/$exclude_regex/; \n}\n</code></pre>\n\n<p>Note - does mean that any meta characters in the exclude file will be treated as regular expressions. You can use <code>map { quotemeta }</code> if that's a problem. </p>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1471966147, "creation_date": 1471966147, "answer_id": 39105234, "question_id": 39105076, "link": "https://stackoverflow.com/questions/39105076/how-to-use-unix-commands-in-perl-to-be-used-on-a-windows-machine/39105234#39105234", "title": "How to use UNIX commands in Perl? (to be used on a Windows machine)", "body": "<p>As @ThisSuitIsBlackNot suggests, do this in perl.  It's not a lot of code, and is likely to be faster anyway:</p>\n\n<pre><code>my $oemds = do {\n    open my $fh, '&lt;', 'OEMDS.txt' or die \"Can't read OEMDS.txt: $!\";\n    local $/; # probably not required.\n    &lt;$fh&gt;;\n};\nchomp $oemds;\n\nopen my $js, '&lt;', 'javasrc.txt' or die \"Can't read javasrc.txt: $!\";\n\nmy @filtered;\nwhile(&lt;$js&gt;) {\n    chomp;\n    next if /$oemds/; # grep -v\n    push @filtered, $_;\n}\nclose $js;\n\n# write to javasrc_temp.txt if really required\n</code></pre>\n\n<p>I'm suspecting you really want the filtered lines in your program, not in a temp file, and this avoids the temp file.</p>\n"}, {"comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472025601, "post_id": 39117119, "comment_id": 65581403, "body": "&quot; know that Perl is capable of launching UNIX commands&quot; perl can launch any OS command or program. Perl has grep built in, on every platform. You&#39;ve wasted time shelling out to run other OS commands. It will take longer and is not portable."}], "tags": [], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "is_accepted": true, "score": -1, "last_activity_date": 1472024141, "creation_date": 1472024141, "answer_id": 39117119, "question_id": 39105076, "link": "https://stackoverflow.com/questions/39105076/how-to-use-unix-commands-in-perl-to-be-used-on-a-windows-machine/39117119#39117119", "title": "How to use UNIX commands in Perl? (to be used on a Windows machine)", "body": "<p>Meanwhile I have a solution for my answer, it's actually more simple than I could imagine.</p>\n\n<p>My reasoning was the following: I need to do something in batch (which I don't know), I know that Perl and Python can be used, I know my way around in UNIX commands and I know that Perl is capable of launching UNIX commands, hence my idea and the corresponding question.</p>\n\n<p>However, the answer is much easier: I want to use <code>grep</code>, as this is the UNIX command I'm familiar with, but there is a Windows command which is very similar: <code>findstr</code>. Using this command I can easily obtain what I want:</p>\n\n<pre><code>findstr /V /G:OEMDS.txt javasrc.txt &gt; javasrc_temp.txt\nmove /y javasrc_temp.txt javasrc.txt\n</code></pre>\n\n<p>Thank you all for the support, I've marked all your answers.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 39117119, "answer_count": 3, "score": 0, "last_activity_date": 1472024141, "creation_date": 1471965646, "question_id": 39105076, "link": "https://stackoverflow.com/questions/39105076/how-to-use-unix-commands-in-perl-to-be-used-on-a-windows-machine", "title": "How to use UNIX commands in Perl? (to be used on a Windows machine)", "body": "<p>I need to filter the content of one file (javasrc.txt) by the contents of a second file (OEMDS.txt). This needs to be done in a Windows environment. I don't know about Windows batchfiles, I know about UNIX commands, I'm new at Perl and I would like to make my life as easy as possible, so I have thought of writing a UNIX command, put \"system()\" around it and it should work.</p>\n\n<p>Unfortunately it seems not to be that simple: the following Perl script refuses to work:</p>\n\n<pre><code>system(\"cat javasrc.txt | grep -v qx(cat OEMDS.txt) &gt; javasrc_temp.txt\");\n</code></pre>\n\n<p>I get error message:</p>\n\n<pre><code>grep: OEMDS.txt): No such file or directory\n</code></pre>\n\n<p>For your information: I have already used the following for launching the <code>cat</code> command:</p>\n\n<pre><code>- backticks\n- $()\n- qx()\n- qx{}\n</code></pre>\n\n<p>Always the result is the same: Perl seems to have an issue with the terminating character (the second backtick or comma, ...)</p>\n\n<p>Now that I think about it, I launch this in the following way (I don't know if it's relevant):</p>\n\n<pre><code>perl filter_by_file_content.pl\n</code></pre>\n\n<p>Does anybody know what I can do?</p>\n"}, {"tags": ["arrays", "perl", "variables", "chemistry"], "comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 1, "creation_date": 1471963469, "post_id": 39104086, "comment_id": 65555423, "body": "You need to fix several syntax errors (<code>my</code> on <code>$n1</code> and <code>$n2</code>), <code>$i</code> is not declared with <code>my</code>, your <code>for</code> is not closed with <code>}</code>, your first <code>open</code> is not terminated properly (missing <code>)</code> ...). You should probably also implicity <code>close()</code> your file handles."}, {"owner": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1471963703, "post_id": 39104086, "comment_id": 65555626, "body": "True. I&#39;m about to edit this here. I ran the code and it&#39;s giving me problems with FILE1 and FILE2."}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1471964627, "creation_date": 1471964627, "answer_id": 39104703, "question_id": 39104086, "link": "https://stackoverflow.com/questions/39104086/how-do-i-specify-these-variables-correctly-on-perl/39104703#39104703", "title": "How do I specify these variables correctly on perl?", "body": "<p>If the file format is <code>au25-c2-benzalacetone.001</code>, your first problem appears to be that <code>$i</code> may not be three digits.  You <em>probably</em> want something like <code>my $tinker_file = sprintf \"%s.%03d\", $file1, $i;</code></p>\n\n<p>The other problem I'm noticing is that you keep opening \"coordinates_of_interest.dat\" for write, not append, so only the last file will have its three lines there.  I would suggest that if you're writing to a single file for all inputs, open that file <em>outside</em> (before) of your <code>for</code> loop, and close it after the loop is completed.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "edited": false, "score": 0, "creation_date": 1471967309, "post_id": 39104722, "comment_id": 65558204, "body": "When I add this to my code it gives me the following errors:                         Global symbol &quot;$tinker_file&quot; requires explicit package name at ./extract_coordinates.pl line 15. syntax error at ./extract_coordinates.pl line 15, near &quot;$tinker_file (&quot;"}, {"owner": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "edited": false, "score": 0, "creation_date": 1471967389, "post_id": 39104722, "comment_id": 65558249, "body": "Maybe I&#39;m implementing the file naming incorrectly."}, {"owner": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "edited": false, "score": 0, "creation_date": 1471967449, "post_id": 39104722, "comment_id": 65558286, "body": "I changed my code to reflect the changes you gave me"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "edited": false, "score": 0, "creation_date": 1471967541, "post_id": 39104722, "comment_id": 65558363, "body": "Well, my code doesn&#39;t include <code>$tinker_file</code> so it&#39;s not someting in that snippet..."}, {"owner": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "edited": false, "score": 0, "creation_date": 1471967773, "post_id": 39104722, "comment_id": 65558538, "body": "I changed the name filespec to tinker_file since I thought that was what you were referring to."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "edited": false, "score": 0, "creation_date": 1471967836, "post_id": 39104722, "comment_id": 65558569, "body": "Ugh, that&#39;s because your previous line (the <code>sprintf</code>) is missing a semicolon. So it&#39;s treating the <code>my</code> part as part of <code>sprintf</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": -1, "last_activity_date": 1471964680, "creation_date": 1471964680, "answer_id": 39104722, "question_id": 39104086, "link": "https://stackoverflow.com/questions/39104086/how-do-i-specify-these-variables-correctly-on-perl/39104722#39104722", "title": "How do I specify these variables correctly on perl?", "body": "<p><code>glob</code> is your friend here either use it with a wildcard and search the directory:</p>\n\n<pre><code>my ( $filespec, $n1, $n2 ) = @ARGV; \n\nforeach my $file ( glob \"$filespec.*\" ) { \n   print \"Filename: $file\\n\";\n}\n</code></pre>\n\n<p>Or you can use <code>glob</code> to expand a pattern:</p>\n\n<pre><code>my $expr = join \",\", 0..9;\n\nforeach my $entry ( glob ( \"test.{$expr}{$expr}{$expr}\" ) ) {\n   print $entry,\"\\n\";\n}\n</code></pre>\n\n<p>But I'd probably stick with the first one, as that'll make sure files actually exist. </p>\n"}, {"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": 0, "last_activity_date": 1471970838, "creation_date": 1471970838, "answer_id": 39106708, "question_id": 39104086, "link": "https://stackoverflow.com/questions/39104086/how-do-i-specify-these-variables-correctly-on-perl/39106708#39106708", "title": "How do I specify these variables correctly on perl?", "body": "<blockquote>\n  <p>These files have the file name format au25-c2-benzalacetone.001 up to 2000. </p>\n</blockquote>\n\n<pre><code>my $tinker_file = sprintf \"%s.%03d\"\n</code></pre>\n\n<p>Aside from the fact that this line is incomplete, you cannot fit the numbers from 1 to 2000 in a three-digit field.  This is probably why your script is not reading all of the files.</p>\n"}], "owner": {"reputation": 3, "user_id": 6748424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31b66808d6f343091bbf2050b933dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Heh", "link": "https://stackoverflow.com/users/6748424/heh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 39104722, "answer_count": 3, "score": -1, "last_activity_date": 1471970838, "creation_date": 1471962817, "last_edit_date": 1471967658, "question_id": 39104086, "link": "https://stackoverflow.com/questions/39104086/how-do-i-specify-these-variables-correctly-on-perl", "title": "How do I specify these variables correctly on perl?", "body": "<p>I ran a molecular dynamics simulations which gave me 2,000 trajectory files. These files have the file name format <code>au25-c2-benzalacetone.001</code> up to 2000. I wrote a general perl program but it isn't reading through the 2,000 files. How do I modify my code so it reads every file and extracts the coordinates I want for each file individually? I  need 2,000 <code>coordinates_of_interest.dat</code> files. The tinker file here is the <code>au25-c2-benzalacetone</code> file. Here is the code I wrote:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse Math::VectorReal;\nuse Math::Trig qw/acos/;\nuse strict;\nuse warnings;\n\n\n   my $file1 = $ARGV[0];\n   my $n1 = $ARGV[1];\n   my $n2 = $ARGV[2];\n   my $tinker_file = sprintf \"%s.%03d\"\n\n   my( $file1, $n1, $n2 ) = @ARGV; \n\n  foreach $tinker_file (glob \"$tinker_file.*\") {\n     print \"Filename: $tinker_file\\n\";\n  }\n\n   my $file2 = \"coordinates_of_interest.dat\";\n   my %lines_of_interest = map { $_ =&gt; 1 } 18, 25, 26;\n\n\n{\nopen(FILE2, '&gt;', $file2) or die \"couldn't open the file!\";\n\nfor(my $i=$n1;$i&lt;=$n2;$i++){\n{\nopen(FILE1, '&lt;', $tinker_file) or die \"couldn't open the file!\";\n{\n\nmy $num_lines = keys %lines_of_interest;\n\nwhile (&lt;FILE1&gt;) {\n   if ($lines_of_interest{$.}) {\n      print FILE2;\n      last unless --$num_lines;\n              }\n            }\n         }\n       }\n    }\n }                                                                                                                                     \n</code></pre>\n\n<p>~<br>\n~<br>\n~                            </p>\n"}, {"tags": ["php", "perl"], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 6701768, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JrO2v.png?s=128&g=1", "display_name": "hxtree", "link": "https://stackoverflow.com/users/6701768/hxtree"}, "is_accepted": false, "score": 0, "last_activity_date": 1471959910, "creation_date": 1471959910, "answer_id": 39102970, "question_id": 39102818, "link": "https://stackoverflow.com/questions/39102818/execute-perl-with-php-and-redirect-to-new-site/39102970#39102970", "title": "Execute Perl with PHP and redirect to new site", "body": "<p>PHP exec will wait until the execution of the called program is finished, before processing the next line, unless you use \"&amp;\" at the end of the string to run the program in background.</p>\n\n<pre><code>&lt;?php\n$result = exec(\"perl test.pl &amp;\");\necho $result;\n\nheader(\"Location: newpage.php\") ;\n?&gt;\n</code></pre>\n\n<p>Alternatively, you could consider adding a crono event to continuously run the exec, depending on what it is doing.</p>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1471960822, "creation_date": 1471960822, "answer_id": 39103336, "question_id": 39102818, "link": "https://stackoverflow.com/questions/39102818/execute-perl-with-php-and-redirect-to-new-site/39103336#39103336", "title": "Execute Perl with PHP and redirect to new site", "body": "<p>Another solution, which we've used, is to use a job queue of some sort, such as beanstalk or redis (technically, I don't think redis is a job queue, but its pub/sub model looks like it can be used as such, depending on your needs).</p>\n\n<p>The php code would post the job to be run, an always-running executable (perl or whatever) would be running in the background, listening for jobs, and then start a job as its own child, rather than a child of your php process, when a job came through.  Depending on your needs, the job could post its status, including final results, either in a cache on the file system or in a database, such as mysql or redis, so that if your end user clicks on a page to view the job status, it's available.</p>\n\n<p>It's more complex, but handles more edge cases.  The downside is that if your web site is on a shared server, the ISP may not like that always-running job server, or the beanstalk/redis daemons.  This works better if you have your own VM to work with.</p>\n"}], "owner": {"reputation": 49, "user_id": 4306055, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f47daa113897817e0ec600adabdbc898?s=128&d=identicon&r=PG&f=1", "display_name": "Cataras", "link": "https://stackoverflow.com/users/4306055/cataras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1471960822, "creation_date": 1471959468, "question_id": 39102818, "link": "https://stackoverflow.com/questions/39102818/execute-perl-with-php-and-redirect-to-new-site", "title": "Execute Perl with PHP and redirect to new site", "body": "<p>Basically i want to continously run a longer Perl-Script in the background and keep on running even after i redirect the user to a different page</p>\n\n<p>php</p>\n\n<pre><code>&lt;?php\n$result = exec(\"perl test.pl\");\necho $result;\n\nheader(\"Location: newpage.php\") ;\n?&gt;\n</code></pre>\n\n<p>perl</p>\n\n<pre><code>#!/usr/bin/perl\n\nsleep(1000000);\nprint \"Done\";\n</code></pre>\n\n<p>I read about fork() in php but how i understood it it just runs 2 scripts simoultaniously but i can't figure out how to work with redirection/header() in php. Thank you!</p>\n"}, {"tags": ["python", "perl", "awk", "rounding", "long-integer"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471953397, "post_id": 39100460, "comment_id": 65547516, "body": "Overflow and aproximations in short terms."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471953672, "post_id": 39100460, "comment_id": 65547699, "body": "@JohnDoe OK, but why such a huge difference?"}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1471953902, "post_id": 39100460, "comment_id": 65547871, "body": "In R it&#39;s clear, I guess it&#39;s because <code>%%</code> has a higher precedence over <code>&#47;</code>. In Python, <code>10190150730169267102&#47;1000</code> is a huge number, I guess it&#39;s truncated or something.."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1471954093, "post_id": 39100460, "comment_id": 65548010, "body": "@MarounMaroun good point about R, thanks. Question edited. And yes, I know it has something to do with huge numbers, but I am surprised to see such great differences between the different tools. That&#39;s what I&#39;m trying to understand."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1471954977, "post_id": 39100460, "comment_id": 65548647, "body": "I think most of the difference has to do with how <code>%</code> behaves when one side is a floating-point number and the other is an integer.  If you just calculate <code>10190150730169267102&#47;1000</code>, there should be less disagreement."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471956069, "post_id": 39100460, "comment_id": 65549464, "body": "@terdon There are known issues on Perl (look at this question, maybe you find the asnwer for Perl: <a href=\"http://stackoverflow.com/a/24493650/6594367\">link</a>"}, {"owner": {"reputation": 174367, "user_id": 1011995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1", "display_name": "Daniel Fischer", "link": "https://stackoverflow.com/users/1011995/daniel-fischer"}, "edited": false, "score": 4, "creation_date": 1471956125, "post_id": 39100460, "comment_id": 65549513, "body": "Perl, awk and R seem to convert to a double precision floating point number for the division, and the closest  <code>double</code> to <code>10190150730169267102</code> is <code>10190150730169266176</code>, which explains the <code>6</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1471962691, "post_id": 39100460, "comment_id": 65554845, "body": "Re &quot;<i>why such a huge difference</i>&quot;, It&#39;s a difference of 0.0000000000000001 of the original number. Hardly huge! That&#39;s 16 digits of precision!"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1471964739, "post_id": 39100460, "comment_id": 65556362, "body": "Add <code>-Mbigint</code> to the perl command line to get this done via integers instead of floating point there."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1471965006, "post_id": 39100460, "comment_id": 65556565, "body": "@Tanktalus that what I had assumed too but I tested this (just didn&#39;t mention in the question) and I get the same result. <code>perl -MMath::BigInt  -le &#39;print 10190150730169267102&#47;1000%10; &#39;</code> also prints 6."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471965063, "post_id": 39100460, "comment_id": 65556603, "body": "@ikegami the huge difference is between the results. I see 6,7 and 8. That&#39;s a pretty significant difference. I assume it rises from a small rounding error but I am still surprised to see a range of 3 integer results."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1471965548, "post_id": 39100460, "comment_id": 65556937, "body": "@terdon - no, use <code>-Mbigint</code> not <code>-MMath::BigInt</code> and you&#39;ll get 7.  What you did will only load the M::BI module, but won&#39;t convert all numbers to M::BI objects by default, only <code>bigint</code> does that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1471965769, "post_id": 39100460, "comment_id": 65557103, "body": "@terdon, No, a difference in the 17th significant digit is the very opposite of &quot;pretty significant&quot;."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471966113, "post_id": 39100460, "comment_id": 65557315, "body": "@ikegami indeed, no argument there. It&#39;s just that that small difference leads to a very significant one in the final output. And I still don&#39;t get how such a tiny difference can lead to both 6,7 and 8 as a result. Does Perl round down while Python rounds up or something?"}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1471966124, "post_id": 39100460, "comment_id": 65557330, "body": "@Tanktalus ah, I see now. Yes indeed, thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1471966310, "post_id": 39100460, "comment_id": 65557484, "body": "@terdon, That doesn&#39;t matter. The lesson you should be learning is that double-precision numbers are not appropriate for your solution."}, {"owner": {"reputation": 174367, "user_id": 1011995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1", "display_name": "Daniel Fischer", "link": "https://stackoverflow.com/users/1011995/daniel-fischer"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1471966368, "post_id": 39100460, "comment_id": 65557521, "body": "@Tanktalus <code>perl -Mbigint -le &#39;print 10190150730169267102&#47;10000%10&#39;</code> prints <code>6</code> here (v5.18.1). Did the behaviour change or is it a bug?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 174367, "user_id": 1011995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1", "display_name": "Daniel Fischer", "link": "https://stackoverflow.com/users/1011995/daniel-fischer"}, "edited": false, "score": 0, "creation_date": 1471966863, "post_id": 39100460, "comment_id": 65557853, "body": "@DanielFischer - bug. As in, the original question was <code>&#47;1e3</code> not <code>&#47;1e4</code> so your code has a bug :)"}, {"owner": {"reputation": 174367, "user_id": 1011995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1", "display_name": "Daniel Fischer", "link": "https://stackoverflow.com/users/1011995/daniel-fischer"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1471966960, "post_id": 39100460, "comment_id": 65557928, "body": "@Tanktalus D&#39;oh, copied the wrong line in the terminal to add <code>-Mbigint</code>. Indeed it prints 7 after the fix. Thanks."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471967096, "post_id": 39100460, "comment_id": 65558040, "body": "@ikegami heh, and that&#39;s a lesson well learnt. I&#39;m still trying to understand why the tools behave so differently though. I hear what you&#39;re saying and get that the original difference is small, but I&#39;m still trying to understand how that tiny difference can result in 3 separate integer results."}], "answers": [{"tags": [], "owner": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "is_accepted": false, "score": 3, "last_activity_date": 1471955134, "last_edit_date": 1471955134, "creation_date": 1471954499, "answer_id": 39100909, "question_id": 39100460, "link": "https://stackoverflow.com/questions/39100460/why-do-4-different-languages-give-4-different-results-here/39100909#39100909", "title": "Why do 4 different languages give 4 different results here?", "body": "<p>I can answer only for the difference between python 2 and python 3.\n\"/\" is integer division in python 2 while it is real division in python 3 (that's where the <code>.0</code> in python 3 comes from. The output is floating point.</p>\n\n<p>To summarize:</p>\n\n<ul>\n<li><p>Python 2</p>\n\n<pre><code>10190150730169267102/1000%10 \n</code></pre>\n\n<p>equals </p>\n\n<pre><code>10190150730169267%10\n</code></pre>\n\n<p>equals</p>\n\n<pre><code>7\n</code></pre></li>\n<li><p>Python 3</p>\n\n<pre><code>10190150730169267102/1000%10 \n</code></pre>\n\n<p>equals </p>\n\n<pre><code>10190150730169267,102%10\n</code></pre>\n\n<p>equals </p>\n\n<pre><code>7.102 \n</code></pre></li>\n</ul>\n\n<p>but because of internal representation it's (wrongly) computed to 8.0</p>\n\n<p>You may note that the correct answer may be 7 or 7.102 depending if we consider the division to be floating point or integer. So only Python(2) and bc have correct answers. And python 3 would have correct answer with integer division (<code>10190150730169267102//1000%10</code>).</p>\n\n<p>Python supports <strong>arbitrarily</strong> large <strong>integers</strong> natively!</p>\n"}, {"tags": [], "owner": {"reputation": 24600, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "is_accepted": true, "score": 9, "last_activity_date": 1471972357, "last_edit_date": 1471972357, "creation_date": 1471971687, "answer_id": 39106941, "question_id": 39100460, "link": "https://stackoverflow.com/questions/39100460/why-do-4-different-languages-give-4-different-results-here/39106941#39106941", "title": "Why do 4 different languages give 4 different results here?", "body": "<p>You're seeing different results for two reasons:</p>\n\n<ol>\n<li><p>The division step is doing two different things: in some of the languages you tried, it represents <em>integer</em> division, which discards the fractional part of the result and just keeps the integer part. In others it represents actual mathematical division (which following Python's terminology I'll call \"true division\" below), returning a floating-point result close to the true quotient.</p></li>\n<li><p>In some languages (those with support for arbitrary precision), the large numerator value <code>10190150730169267102</code> is being represented exactly; in others, it's replaced by the nearest representable floating-point value.</p></li>\n</ol>\n\n<p>The different combinations of the possibilities in 1. and 2. above give you the different results.</p>\n\n<p>In detail: in Perl, awk, and R, we're working with floating-point values and true division. The value <code>10190150730169267102</code> is too large to store in a machine integer, so it's stored in the usual IEEE 754 binary64 floating-point format. That format can't represent that particular value exactly, so what gets stored is the closest value that <em>is</em> representable in that format, which is <code>10190150730169266176.0</code>. Now we divide that approximation by <code>1000</code>, again giving a floating-point result. The exact quotient, <code>10190150730169266.176</code>, is again not exactly representable in the binary64 format, and we get the closest representable float, which happens to be <code>10190150730169266.0</code>. Taking a remainder modulo <code>10</code> gives <code>6</code>.</p>\n\n<p>In bc and Python 2, we're working with arbitrary-precision integers and integer division. Both those languages can represent the numerator exactly. The division result is then <code>10190150730169267</code> (we're doing <em>integer division</em>, not <em>true division</em>, so the fractional part is discarded), and the remainder modulo <code>10</code> is <code>7</code>. (This is oversimplifying a bit: the format that bc is using internally is somewhat closer to Python's <code>Decimal</code> type than to an arbitrary-precision integer type, but in this case the effect is the same.)</p>\n\n<p>In Python 3, we're working with arbitrary-precision integers and true division. The numerator is represented exactly, but the result of the division is the nearest floating-point value to the true quotient. In this case the exact quotient is <code>10190150730169267.102</code>, and the closest representable floating-point value is <code>10190150730169268.0</code>. Taking the remainder of that value modulo <code>10</code> gives <code>8</code>.</p>\n\n<p>Summary:</p>\n\n<ul>\n<li>Perl, awk, R: floating-point approximations, true division</li>\n<li>bc, Python 2: arbitrary-precision integers, integer division</li>\n<li>Python 3: arbitrary-precision integers, true division</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1518, "user_id": 332348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/694d53039b1ff43bdfcd2033c90a1647?s=128&d=identicon&r=PG", "display_name": "echo", "link": "https://stackoverflow.com/users/332348/echo"}, "is_accepted": false, "score": 1, "last_activity_date": 1472508291, "last_edit_date": 1472508291, "creation_date": 1472507918, "answer_id": 39215829, "question_id": 39100460, "link": "https://stackoverflow.com/questions/39100460/why-do-4-different-languages-give-4-different-results-here/39215829#39215829", "title": "Why do 4 different languages give 4 different results here?", "body": "<p>in perl6</p>\n\n<pre><code>\u279c  ~  perl6 -e 'say(10190150730169267102 div 1000 mod 10)'\n7\n\u279c  ~  perl6 -e 'say(10190150730169267102/1000%10)'\n7.102\n</code></pre>\n\n<p>so, If you are not sure which language is correct, try to ask Perl6. :)</p>\n"}], "owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 3, "accepted_answer_id": 39106941, "answer_count": 3, "score": 5, "last_activity_date": 1472508291, "creation_date": 1471953245, "last_edit_date": 1471954035, "question_id": 39100460, "link": "https://stackoverflow.com/questions/39100460/why-do-4-different-languages-give-4-different-results-here", "title": "Why do 4 different languages give 4 different results here?", "body": "<p>Consider this (all commands run on an 64bit Arch Linux system):</p>\n\n<ul>\n<li><p>Perl (v5.24.0)</p>\n\n<pre><code>$ perl -le 'print 10190150730169267102/1000%10'\n6\n</code></pre></li>\n<li><p><code>awk</code> (GNU Awk 4.1.3)</p>\n\n<pre><code>$ awk 'BEGIN{print 10190150730169267102/1000%10}'\n6\n</code></pre></li>\n<li><p>R (3.3.1)</p>\n\n<pre><code>&gt; (10190150730169267102/1000)%%10\n[1] 6\n</code></pre></li>\n<li><p><code>bc</code></p>\n\n<pre><code>$ echo 10190150730169267102/1000%10 | bc\n7\n</code></pre></li>\n<li><p>Python 2 (2.7.12)</p>\n\n<pre><code>&gt;&gt;&gt; print(10190150730169267102/1000%10)\n7\n</code></pre></li>\n<li><p>Python 3 (3.5.2)</p>\n\n<pre><code>&gt;&gt;&gt; print(10190150730169267102/1000%10)\n8.0\n</code></pre></li>\n</ul>\n\n<p>So, Perl, <code>gawk</code> and <code>R</code> agree, as do <code>bc</code> and Pyhon 2. Nevertheless, between the 6 tools tested, I got 4 different results. I understand that this has something to do with how very long integers are being rounded, but why do the different tools differ quite so much? I had expected that this would depend on the processor's ability to deal with large numbers, but it seems to depend on internal features (or bugs) of the language.</p>\n\n<p>Could someone explain what is going on behind the scenes here? What are the limitations in each language and why do they behave quite so differently?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 5, "creation_date": 1471949007, "post_id": 39098304, "comment_id": 65544488, "body": "You didn&#39;t tried even single line coding?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1471952453, "post_id": 39098304, "comment_id": 65546867, "body": "How do you know which array elements map to which keys? Hashes are unordered."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1471963187, "post_id": 39098468, "comment_id": 65555218, "body": "Tip: <code>@hash{(&#39;key1&#39;,&#39;key2&#39;)}</code> can be written as <code>@hash{qw( key1 key2 )}</code>."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 1, "last_activity_date": 1471963003, "last_edit_date": 1471963003, "creation_date": 1471947620, "answer_id": 39098468, "question_id": 39098304, "link": "https://stackoverflow.com/questions/39098304/how-do-i-create-a-hash-whos-values-come-from-any-array/39098468#39098468", "title": "how do I create a hash who&#39;s values come from any array?", "body": "<p>You could use a <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow\">hash slice</a>:</p>\n\n<pre><code>my %hash = ( key1 =&gt; \"\" , key2 =&gt; \"\") ;\nmy @array = (1 ,2);\n\n@hash{('key1','key2')} = @array;\n\nprint Dumper\\%hash;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n      'key1' =&gt; 1,\n      'key2' =&gt; 2\n    };\n</code></pre>\n\n<p>You can't use the existing keys of the hash (<code>@hash{ keys(%hash) } = @array;</code>), because you could just as easily end up with <code>{ key1 =&gt; 2, key2 =&gt; 1 }</code> as the desired output.</p>\n"}], "owner": {"reputation": 1, "user_id": 6747355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7VX3AruJJcM/AAAAAAAAAAI/AAAAAAAAPoM/7jItJvBRqUs/photo.jpg?sz=128", "display_name": "Soumi Mitra Majumdar", "link": "https://stackoverflow.com/users/6747355/soumi-mitra-majumdar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1471963003, "creation_date": 1471947138, "last_edit_date": 1471948609, "question_id": 39098304, "link": "https://stackoverflow.com/questions/39098304/how-do-i-create-a-hash-whos-values-come-from-any-array", "title": "how do I create a hash who&#39;s values come from any array?", "body": "<p>I have a hash with keys and now I want to fill the values of the hash from an array .</p>\n\n<pre><code>my %hash = ( key1 =&gt; \"\" , key2 =&gt; \"\")\nmy array = (1 ,2)\n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code>my %hash = ( key1 =&gt; 1 , key2 =&gt; 2)\n</code></pre>\n"}, {"tags": ["mysql", "perl", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 2, "creation_date": 1471941607, "post_id": 39095860, "comment_id": 65539423, "body": "I wish all questions were written up like this one..."}, {"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "reply_to_user": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1471942427, "post_id": 39095860, "comment_id": 65539973, "body": "@Shadow: It did me cost about 1 hour, maybe this is why almost nobody does it."}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 1, "creation_date": 1471942650, "post_id": 39095860, "comment_id": 65540127, "body": "Well, everyone should follow this example. Took me only 5 mins to write the answer because the question was clear and well structured."}], "answers": [{"comments": [{"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "edited": false, "score": 0, "creation_date": 1471942317, "post_id": 39096248, "comment_id": 65539900, "body": "Thanks! I just added the note about <code>mysql_enable_utf8mb4</code> to the end of your answer, becasue this seems to be the way you say <code>SET NAMES utf8mb4</code> in Perl."}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "reply_to_user": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "edited": false, "score": 1, "creation_date": 1471942410, "post_id": 39096248, "comment_id": 65539963, "body": "I must trust you on this one, since I do not really know perl, only MySQL :)"}], "tags": [], "owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "is_accepted": true, "score": 18, "last_activity_date": 1471942236, "last_edit_date": 1471942236, "creation_date": 1471941420, "answer_id": 39096248, "question_id": 39095860, "link": "https://stackoverflow.com/questions/39095860/how-to-connect-to-mysql-using-utf8-within-a-perl-script/39096248#39096248", "title": "How to connect to MySQL using UTF8 within a perl script?", "body": "<p>The problem is with the <code>SET NAMES utf8</code> command. In MySQL the utf8 character set is not truly utf8, it <a href=\"http://dev.mysql.com/doc/refman/5.7/en/charset-unicode-utf8.html\" rel=\"noreferrer\">supports characters up 3 bytes only</a> and the character in question has 4 bytes:</p>\n\n<blockquote>\n  <p>The utf8 character set in MySQL has these characteristics: </p>\n  \n  <p>\u2022 No support for supplementary characters (BMP characters only). </p>\n  \n  <p>\u2022 A maximum of three bytes per multibyte character.</p>\n</blockquote>\n\n<p>The true utf8 is the utf8mb4 that you use as character set in the field itself. So, use <code>SET NAMES utf8mb4</code> </p>\n\n<p>So from Perl you should use <code>{mysql_enable_utf8mb4 =&gt; 1}</code> instead of <code>{mysql_enable_utf8 =&gt; 1}</code>.</p>\n"}], "owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2915, "favorite_count": 2, "accepted_answer_id": 39096248, "answer_count": 1, "score": 19, "last_activity_date": 1471942236, "creation_date": 1471940223, "last_edit_date": 1495541789, "question_id": 39095860, "link": "https://stackoverflow.com/questions/39095860/how-to-connect-to-mysql-using-utf8-within-a-perl-script", "title": "How to connect to MySQL using UTF8 within a perl script?", "body": "<h2>In a nutshell:</h2>\n\n<p>Within a Perl-Script: How do I connect to MySQL in a way that allows to transmit the four-byte unicode character U+1F61C (\"\ud83d\ude1c\") from the perl script to a MySQL-Table where this character should be stored?</p>\n\n<p>Using <code>{mysql_enable_utf8 =&gt; 1}</code> doesn't solve the problem.</p>\n\n<h2>In detail:</h2>\n\n<p>I have exactly the same problem as described in the Question <a href=\"https://stackoverflow.com/q/34165523/1302716\">ERROR 1366 (HY000): Incorrect string value: &#39;\\xF0\\x9F\\x98\\x9C&#39; for column &#39;comment&#39; at row 1</a> and even with the same Unicode character (\ud83d\ude1c = U+1F61C = <a href=\"http://www.charbase.com/1f61c-unicode-face-with-stuck-out-tongue-and-winking-eye\" rel=\"noreferrer\">FACE WITH STUCK-OUT TONGUE AND WINKING EYE</a>) which produces the error message</p>\n\n<pre><code>DBD::mysql::st execute failed: Incorrect string value: '\\xF0\\x9F\\x98\\x9C' for column ...\n</code></pre>\n\n<p>But I don't use PHP, I use Perl.</p>\n\n<p>The accepted answer in the other question says:</p>\n\n<ul>\n<li><p><strong>Run MySQL 5.5 or later.</strong><br>\nI check the version:</p>\n\n<pre><code>mysql&gt; select version();\n+-------------------------+\n| version()               |\n+-------------------------+\n| 5.7.13-0ubuntu0.16.04.2 |\n+-------------------------+\n</code></pre>\n\n<p>So it is 5.7 which is later than 5.5.<br>\n\u2705checked</p></li>\n<li><p><strong>Set table's character to <code>utf8mb4</code>.</strong><br>\nI check the character set of my database, my table and even of the reported column:</p>\n\n<pre><code>mysql&gt; SELECT default_character_set_name FROM information_schema.SCHEMATA \n    -&gt; WHERE schema_name = \"myDatabase\";\n+----------------------------+\n| default_character_set_name |\n+----------------------------+\n| utf8mb4                    |\n+----------------------------+\n\nmysql&gt; SELECT CCSA.character_set_name FROM information_schema.`TABLES` T,\n    -&gt;        information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA\n    -&gt; WHERE CCSA.collation_name = T.table_collation\n    -&gt;   AND T.table_schema = \"myDatabase\"\n    -&gt;   AND T.table_name   = \"myTable\";\n+--------------------+\n| character_set_name |\n+--------------------+\n| utf8mb4            |\n+--------------------+\n\nmysql&gt;   SELECT character_set_name FROM information_schema.`COLUMNS` \n    -&gt; WHERE table_schema = \"myDatabase\"\n    -&gt;   AND table_name   = \"myTable\"\n    -&gt;   AND column_name  = \"myColumn\";\n+--------------------+\n| character_set_name |\n+--------------------+\n| utf8mb4            |\n+--------------------+\n</code></pre>\n\n<p>So my database, my table and the reported column all use the character set <code>utf8mb4</code>.<br>\n\u2705checked</p></li>\n<li><strong>Enable UTF8 on your MySQL connection.</strong><br>\nThis seems to be the problem. The <a href=\"https://stackoverflow.com/a/34165651/1302716\">answer to the other question</a> says: \n\n<blockquote>\n  <p><code>SET NAMES utf8</code>, or use an option when connecting that similarly enables it.</p>\n</blockquote></li>\n</ul>\n\n<p>I don't know how to <code>SET NAMES utf8</code> within a perl script, so I did it how I did it over the last years. I think that this is \"<em>an option when connecting that similarly enables it</em>\".<br>\nIt's at the end of the long line that begins with <code>my $dbh = DBI-&gt;connect</code>:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse utf8;\nuse Encode;\nuse DBI;\nbinmode STDOUT, \":utf8\";\n\n#Here I connect using the parameter mysql_enable_utf8 (create database handle):\nmy $dbh = DBI-&gt;connect('DBI:mysql:database=myDatabase;host=localhost','aUser','aPassword',{mysql_enable_utf8 =&gt; 1});\n\n#Prepare the statement (create statement handle):\nmy $sth = $dbh-&gt;prepare('INSERT INTO `myTable` (`myColumn`) VALUES(?);');\n\n#This doesn't work: \n$sth-&gt;execute('\ud83d\ude1c\uf61c');\n\n#This doesn't work either: \n$sth-&gt;execute(encode_utf8('\ud83d\ude1c\uf61c'));\n\n#end processing:\n$dbh-&gt;disconnect();\nexit(0);\n</code></pre>\n\n<p>Both executes throw the same error (only the line number at the end changes):</p>\n\n<pre><code>DBD::mysql::st execute failed: Incorrect string value: '\\xF0\\x9F\\x98\\x9C' for column 'myColumn' at row 1 at myTestScript.pl line 16.\n</code></pre>\n\n<p>What am I doing wrong?<br>\nHow can I do it better?  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1471938818, "post_id": 39095211, "comment_id": 65537718, "body": "When connecting manually to the host, is the password requested?"}, {"owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1471939137, "post_id": 39095211, "comment_id": 65537927, "body": "@choroba, yes - it is asking for password while connecting manually. Also I was able to connect manually after entering the pwd."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 1, "creation_date": 1471959672, "post_id": 39095211, "comment_id": 65552332, "body": "try adding <code>expect_log_user =&gt; 1, more =&gt; &#39;-v&#39; </code> to the <code>%args</code> for more debugging information. Also I note the source of <code>Net::SFTP::Foreign</code> <a href=\"https://github.com/salva/p5-Net-SFTP-Foreign/search?utf8=%E2%9C%93&amp;q=Password+not+requested+as+expected\" rel=\"nofollow noreferrer\">doesn&#39;t have that error message</a> (apart from in a sample program)."}, {"owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1471959770, "post_id": 39095211, "comment_id": 65552399, "body": "@DravSloan - I have tried expect_log_user, it has given a password prompt, but the same result after entering the password."}, {"owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1471959862, "post_id": 39095211, "comment_id": 65552472, "body": "@DravSloan -  I have added the relevant pieces from verbose log into the question, please have a look into it."}], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1471983127, "creation_date": 1471983127, "answer_id": 39109910, "question_id": 39095211, "link": "https://stackoverflow.com/questions/39095211/perl-netsftpforeign-issue-with-password-authentication/39109910#39109910", "title": "Perl Net::SFTP::Foreign issue with password authentication", "body": "<p>From my personal experience, Net::SFTP::Foreign works differently based on the setup of the server you are connecting to.</p>\n\n<p>Here are the steps I suggest you to try:</p>\n\n<p>Try to connect by hardcoding host, user, password, port (22 is default, or whatever the actual port is):</p>\n\n<pre><code>my %args = (user =&gt; \"username\", password =&gt; \"password\", port =&gt; 22, more =&gt; [-o =&gt; 'StrictHostKeyChecking no']);\n</code></pre>\n\n<p>If that does not work, try the following:</p>\n\n<pre><code>my %args = (user =&gt; \"username\", password =&gt; \"password\", port =&gt; 22, more =&gt; [-o =&gt; 'StrictHostKeyChecking no', -o =&gt; 'PreferredAuthentications=password']);\n\nmy %args = (user =&gt; \"username\", password =&gt; \"password\", port =&gt; 22, more =&gt; [-o =&gt; 'StrictHostKeyChecking no', -o =&gt; 'PreferredAuthentications=password,keyboard-interactive']);\n\nmy %args = (user =&gt; \"username\", password =&gt; \"password\", port =&gt; 22, more =&gt; [-o =&gt; 'StrictHostKeyChecking no', -o =&gt; 'PreferredAuthentications=keyboard-interactive,password']);\n</code></pre>\n\n<p>Once one of these connection strings work, try to replace hardcoded values with your variables.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "is_accepted": true, "score": 1, "last_activity_date": 1472485592, "creation_date": 1472485592, "answer_id": 39210234, "question_id": 39095211, "link": "https://stackoverflow.com/questions/39095211/perl-netsftpforeign-issue-with-password-authentication/39210234#39210234", "title": "Perl Net::SFTP::Foreign issue with password authentication", "body": "<p>I appreciate the support provided by everyone. I was able to figure the issue at last. Listing below my findings and solution for reference!</p>\n\n<p>Issue was with the password prompt from the remote host, it was not in the expected format. You can find the reference over here (look up for password_prompt ):\n<a href=\"http://search.cpan.org/~salva/Net-SFTP-Foreign-1.86/lib/Net/SFTP/Foreign.pm\" rel=\"nofollow\">http://search.cpan.org/~salva/Net-SFTP-Foreign-1.86/lib/Net/SFTP/Foreign.pm</a>.</p>\n\n<p>I have updated my sftp->new statement to have password_prompt in the args list, and it fixed my issue!</p>\n"}], "owner": {"reputation": 143, "user_id": 2955220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28ba746517092206fd2d04b55b3345d?s=128&d=identicon&r=PG&f=1", "display_name": "Siju Mohan MM", "link": "https://stackoverflow.com/users/2955220/siju-mohan-mm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1565, "favorite_count": 1, "accepted_answer_id": 39210234, "answer_count": 2, "score": 3, "last_activity_date": 1548836008, "creation_date": 1471938167, "last_edit_date": 1471960070, "question_id": 39095211, "link": "https://stackoverflow.com/questions/39095211/perl-netsftpforeign-issue-with-password-authentication", "title": "Perl Net::SFTP::Foreign issue with password authentication", "body": "<p>I am trying to transfer files to a remote host using perl Net::SFTP::Foreign. But I am gettting following error message through $sftp->error, while establishing the connection. This program is working fine for other remote hosts. </p>\n\n<p>Error Message:\n<strong>Password not requested as expected: 0</strong></p>\n\n<p>Corresponding code fragment:</p>\n\n<pre><code>my %args = (password =&gt; $config-&gt;[$i]-&gt;{'PSWD'}, user =&gt; $config-&gt;[$i]-&gt;{'USERNAME'}, port =&gt; $config-&gt;[$i]-&gt;{'PORT'}, more =&gt; [-o =&gt; 'StrictHostKeyChecking no'], more =&gt; '-v');\n$sftp = Net::SFTP::Foreign-&gt;new($config-&gt;[$i]-&gt;{'HOSTNAME'}, %args);\n</code></pre>\n\n<p>Verbose log (Relevant piece):</p>\n\n<pre><code>debug1: SSH2_MSG_SERVICE_REQUEST sent\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug1: Authentications that can continue: keyboard-interactive,password\ndebug1: Next authentication method: keyboard-interactive\nPassword authentication\n</code></pre>\n\n<p>After this, program gets terminated with the error mentioned above.</p>\n"}, {"tags": ["bash", "perl", "awk", "insert"], "comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 2, "creation_date": 1471937778, "post_id": 39095035, "comment_id": 65537074, "body": "How do you match the records or rows in the files?"}, {"owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "reply_to_user": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1471938198, "post_id": 39095035, "comment_id": 65537351, "body": "Updated the question, the two files are sorted and just need to be mixed, the first row of the second file going in the first row of the first file, after &quot;Name 1&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 3704, "user_id": 6518219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2810c9f3275b98c4c2f9928c730bfb9?s=128&d=identicon&r=PG&f=1", "display_name": "Mustafa DOGRU", "link": "https://stackoverflow.com/users/6518219/mustafa-dogru"}, "is_accepted": false, "score": 5, "last_activity_date": 1471939557, "last_edit_date": 1471939557, "creation_date": 1471938276, "answer_id": 39095229, "question_id": 39095035, "link": "https://stackoverflow.com/questions/39095035/adding-a-column-from-another-file/39095229#39095229", "title": "Adding a column from another file", "body": "<p>with paste and awk;</p>\n\n<pre><code>user@host:/tmp$ paste file1 file2 | awk '{print $1, $2, $3, $5$6, $4}' | column -t\nCode1  Number1  Name1  Surname1  Phone1\nCode1  Number1  Name1  Surname2  Phone1\nCode1  Number1  Name1  Surname3  Phone1\nCode1  Number1  Name1  Surname4  Phone1\n</code></pre>\n\n<p>paste is used to join files</p>\n\n<p>column -t is used to pretty formatting;</p>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": true, "score": 2, "last_activity_date": 1471945366, "last_edit_date": 1471945366, "creation_date": 1471940154, "answer_id": 39095842, "question_id": 39095035, "link": "https://stackoverflow.com/questions/39095035/adding-a-column-from-another-file/39095842#39095842", "title": "Adding a column from another file", "body": "<p>AWK only:</p>\n\n<pre><code>$ awk 'NR==FNR{a[FNR]=$1$2;next} {print $1,$2,$3,a[FNR],$4}' file2 file1\nCode1 Number1 Name1 Surname1 Phone1\nCode2 Number2 Name2 Surname2 Phone2\nCode3 Number3 Name3 Surname3 Phone3\nCode4 Number4 Name4 Surname4 Phone4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": false, "score": 1, "last_activity_date": 1471945337, "creation_date": 1471945337, "answer_id": 39097679, "question_id": 39095035, "link": "https://stackoverflow.com/questions/39095035/adding-a-column-from-another-file/39097679#39097679", "title": "Adding a column from another file", "body": "<p><strong>using paste and vim</strong></p>\n\n<pre><code>$ paste file1 file2 &gt; newfile.txt\n</code></pre>\n\n<p><strong>then open newfile.txt in vim</strong></p>\n\n<p>then do a regex substituiton as follows</p>\n\n<pre><code>:%s/\\(.*\\)\\t\\(.*\\)\\t\\(.*\\)\\t\\(.*\\)\\t\\(.*\\)/\\1\\t\\2\\t\\3\\t\\5\\6\\t\\4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1471948606, "creation_date": 1471948606, "answer_id": 39098835, "question_id": 39095035, "link": "https://stackoverflow.com/questions/39095035/adding-a-column-from-another-file/39098835#39098835", "title": "Adding a column from another file", "body": "<p>Just <code>cut</code> and <code>paste</code>:</p>\n\n<pre><code>$ paste &lt;(cut -f 1-3 a) b &lt;(cut -f 4 a)\nCode1   Number1 Name1   Surname 1       Phone1\nCode2   Number2 Name2   Surname 2       Phone2\nCode3   Number3 Name3   Surname 3       Phone3\nCode4   Number4 Name4   Surname 4       Phone4\n</code></pre>\n\n<p>Output delimiters are tabs. Space after <code>Surname</code>s can be dealt with piping above to <code>tr -d \\</code>.</p>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 2, "accepted_answer_id": 39095842, "answer_count": 4, "score": 0, "last_activity_date": 1471948606, "creation_date": 1471937649, "last_edit_date": 1471938154, "question_id": 39095035, "link": "https://stackoverflow.com/questions/39095035/adding-a-column-from-another-file", "title": "Adding a column from another file", "body": "<p>i have the following problem : </p>\n\n<p>There is a file, tab delimited :</p>\n\n<pre><code>Code1  Number1  Name1  Phone1\nCode2  Number2  Name2  Phone2\nCode3  Number3  Name3  Phone3\nCode4  Number4  Name4  Phone4\n</code></pre>\n\n<p>And i have a file :</p>\n\n<pre><code>Surname 1\nSurname 2\nSurname 3\nSurname 4\n</code></pre>\n\n<p>My desired output is :</p>\n\n<pre><code>Code1  Number1  Name1 Surname1 Phone1\nCode1  Number1  Name1 Surname2 Phone1\nCode1  Number1  Name1 Surname3 Phone1\nCode1  Number1  Name1 Surname4 Phone1\n</code></pre>\n\n<p>I know i propably have to use awk for this, but i only know how to insert a column of one fixed value in between others, using the :</p>\n\n<pre><code>awk '{ $2=$2\"newvalue\" print $0 }'\n</code></pre>\n\n<p>But i have no idea how to read lines from the other file and storing them in newvalue to pull the above desired output off. I do not require an awk specific advise. Thanks for the help.</p>\n"}, {"tags": ["javascript", "jquery", "ajax", "perl"], "comments": [{"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1471934109, "post_id": 39093810, "comment_id": 65534888, "body": "Which is the JS file? src=&quot;/min.js&quot; or src=&#39;/seq_new.js&#39; ? and why is src=&#39;/seq_new.js&#39; not in the head too? Do you perhaps have document.write in one of them?"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1471934367, "post_id": 39093810, "comment_id": 65535016, "body": "Try calling the function once the page has loaded. In jQuery you can do it by <code>$(document).ready( function() {...});</code>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1471934385, "post_id": 39093810, "comment_id": 65535026, "body": "@mplungjan <code>seq_new.js</code> file contain the <code>main_function</code>. I put the whole thing into the header but the ajax calling also not working so I put the <code>seq_new.js</code> inside the body. <code>min.js</code> is a jquery file"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1471934478, "post_id": 39093810, "comment_id": 65535066, "body": "@ChankeyPathak Ya I did it. I did also <code>window.onload</code> but it is also the same thing as I mentioned in my post."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1471934789, "post_id": 39093810, "comment_id": 65535235, "body": "Wrap the <code>file_load</code> method under <code>$(document).ready</code> and put <code>seq_new.js</code> in header (just below <code>min.js</code>)"}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1471934858, "post_id": 39093810, "comment_id": 65535284, "body": "<a href=\"http://pastebin.com/qrBUcEfE\" rel=\"nofollow noreferrer\">pastebin.com/qrBUcEfE</a>"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471943001, "creation_date": 1471933654, "last_edit_date": 1471943001, "question_id": 39093810, "link": "https://stackoverflow.com/questions/39093810/function-was-not-defined-in-javascript", "title": "Function was not defined in javascript?", "body": "<p>I have two script files - one is perl-cgi and the other is javascript. Inside the cgi script I have written the Javascript function for retrieving data from a text file (using ajax). I then pass the contents of the data into another function called <code>main_function()</code>. This writes into the javascript file (<code>seq_new.js</code>). When I load the page, the console.log reports <code>main_function</code> was not defined. Then I refresh the page and the result displays. I don't know why it behaves this way.</p>\n\n<p>The Perl script as follows:</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type:text/html\\n\\n\";\nuse CGI;\n\nmy $a= new CGI;\nmy $processId = $a-&gt;param(\"processId\");\n.\n.\nmy $file_path = \"/$processId/$file_name[1]\";\nprint &lt;&lt;HTML;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;RepEx - Result&lt;/title&gt;\n&lt;script type=\"text/javascript\" src=\"/min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;script&gt;\nfile_load(\"$file_path\",\"$filename\");\n\nfunction file_load(f1,f2)\n{\n    var fileNm = f2;\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() \n    {\n        if (xhttp.readyState == 4 &amp;&amp; xhttp.status == 200) \n        {\n            var pt = xhttp.responseText;\n            main_function(pt,fileNm,\"$file_path\",$file_cnt,\"$head_st\");\n        }\n    };\n    xhttp.open(\"GET\", f1, true);\n    xhttp.send();\n}\n&lt;/script&gt;\n&lt;script type=\"text/javascript\" charset=\"utf-8\" src='/seq_new.js'&gt; &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My javascript file contains this:</p>\n\n<pre><code>function  main_function (a,file_seq,main_file,fle_cnt,header_set)\n{\n   .\n   ..\n}\n</code></pre>\n\n<p><strong>The problem I am encountering</strong></p>\n\n<p>Loading the page for the first time, the <code>console.log</code> reports that the <code>main_function</code> was not defined and no results are displayed. After refreshing the page (by pressing F5 or clicking the reload button), the result is displayed. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1471936084, "post_id": 39092838, "comment_id": 65536026, "body": "You <b><i>must always</i></b> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program you write. This measure would have revealed the problem immediately."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1471964279, "post_id": 39092838, "comment_id": 65556048, "body": "You <i>should</i> do both of those things. The fact that it&#39;s <i>not</i> a &quot;must&quot; is sort of the problem..."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4205057, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/360e2a43408470a21efce5cbeca9f377?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik SV", "link": "https://stackoverflow.com/users/4205057/karthik-sv"}, "edited": false, "score": 0, "creation_date": 1471929571, "post_id": 39092901, "comment_id": 65532980, "body": "With the single quotes still i&#39;m getting the result as  Test Str"}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1471930262, "post_id": 39092901, "comment_id": 65533230, "body": "Then you changed the wrong quotes.  It&#39;s the ones around <code>Test Str$ing</code> that need to be singles."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1471930695, "post_id": 39092901, "comment_id": 65533384, "body": "Around the string!"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1471929486, "creation_date": 1471929486, "answer_id": 39092901, "question_id": 39092838, "link": "https://stackoverflow.com/questions/39092838/perl-regex-unable-to-select-word-with-special-character/39092901#39092901", "title": "Perl Regex unable to select word with Special character $", "body": "<p>You can do it with simple quotation marks:</p>\n\n<pre><code>#!/usr/bin/perl\n$test = 'Test Str$ing';\n\nmy @words = split(' ',$test);\n\nprint \"@words\";\n</code></pre>\n\n<p>Otherwise Perl considers <code>$ing</code> to be a variable (which is empty).</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 4205057, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/360e2a43408470a21efce5cbeca9f377?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik SV", "link": "https://stackoverflow.com/users/4205057/karthik-sv"}, "edited": false, "score": 0, "creation_date": 1534523281, "post_id": 39093020, "comment_id": 90750047, "body": "Thanks Accepted answer"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 9, "last_activity_date": 1472213055, "last_edit_date": 1472213055, "creation_date": 1471930221, "answer_id": 39093020, "question_id": 39092838, "link": "https://stackoverflow.com/questions/39092838/perl-regex-unable-to-select-word-with-special-character/39093020#39093020", "title": "Perl Regex unable to select word with Special character $", "body": "<p>In Perl, a dollar sign inside a double-quoted string triggers interpolation.  So this assignment:</p>\n\n<pre><code>$test = \"Test Str$ing\";\n</code></pre>\n\n<p>sets <code>$test</code> to the string <code>Test Str</code> followed by the value of the variable <code>$ing</code>.  If <code>$ing</code> is not set (and you don't have strictures enabled, which would cause the program to fail at this point), the result is just <code>Test Str</code>. </p>\n\n<p>To get a literal dollar sign you have to escape it with a backslash, or use single quotes instead:</p>\n\n<pre><code>$test = \"Test Str\\$ing\";\n# or\n$test = 'Test Str$ing';\n</code></pre>\n\n<p>In any case, the first line in your program, after the <code>#!</code> anyway, should be <code>use strict;</code>.  Then Perl will catch these errors and blow up instead of silently letting you shoot yourself in the foot. For good measure, you should add <code>use warnings;</code> too:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n$test = \"Test Str$ing\";\n</code></pre>\n\n<p>Watch what happens when I try to run the above:</p>\n\n<pre><code>Global symbol \"$test\" requires explicit package name (did you forget to declare \"my $test\"?) at foo.pl line 5.   \nGlobal symbol \"$ing\" requires explicit package name (did you forget to declare \"my $ing\"?) at foo.pl line 5.\nExecution of foo.pl aborted due to compilation errors.\n</code></pre>\n\n<p>Your program should look more like this, with minimal changes to pass strict:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $test = 'Test Str$ing';\n\nmy @words = split ' ', $test;\n\nprint \"@words\";\n\nprint \"-------1End------------\\n\";\n\nforeach my $str (split /(\\s)+/, $test) {\n  print \"$str\\n\";\n}\n\nprint \"-------End------------\\n\";\n</code></pre>\n\n<p>That still seems odd to me, as you're printing all the words on a single line without a newline before the <code>1End</code> sentinel, and then printing each of them on a line with blank lines between (not really blank, though - containing the whitespace from the original string). But if that's what you want, the above works.  Output:</p>\n\n<pre><code>Test Str$ing-------1End------------\nTest\n\nStr$ing\n-------End------------\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 3509459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9b35e2585460fb9c6ae4959f13f18e?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/3509459/sandeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1472207252, "creation_date": 1472207252, "answer_id": 39164118, "question_id": 39092838, "link": "https://stackoverflow.com/questions/39092838/perl-regex-unable-to-select-word-with-special-character/39164118#39164118", "title": "Perl Regex unable to select word with Special character $", "body": "<p>The best practice to assign data to a variable is by using single quotes.\nEx: </p>\n\n<pre><code>my $var_name = 'TEST MESSAGE'; \n</code></pre>\n\n<p>If the data which consists of variable and this is to be assigned to another variable then use double quotes. Data in double quotes will interpolated by PERL.\nEx: </p>\n\n<pre><code>my $var1 = 'TEST';\nmy $var2 = \"$var1 MESSAGE\";\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4205057, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/360e2a43408470a21efce5cbeca9f377?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik SV", "link": "https://stackoverflow.com/users/4205057/karthik-sv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 39093020, "answer_count": 3, "score": 1, "last_activity_date": 1495256293, "creation_date": 1471929082, "last_edit_date": 1495256293, "question_id": 39092838, "link": "https://stackoverflow.com/questions/39092838/perl-regex-unable-to-select-word-with-special-character", "title": "Perl Regex unable to select word with Special character $", "body": "<p>I tried to split a string into words (one of the words has the special character <code>$</code>) , but the split didn't work. I want to split the string below into \"Test\" \"Str$ing\"</p>\n\n<pre><code>$test = \"Test Str$ing\";\n\nmy @words = split(\" \",$test);\n\nprint \"@words\";\n\nprint \"-------1End------------\\n\";\n\n\nforeach my $str (split /(\\s)+/, $test) {        \n    print \"$str\\n\";\n}\n\nprint \"-------End------------\\n\";\n</code></pre>\n\n<p>I executed the above code and got the below result, and, as you can see, the 2nd word is only half there:</p>\n\n<pre><code>Test Str\n-------1End------------\nTest\n\nStr\n-------End------------\n</code></pre>\n\n<p>Any help on this?</p>\n"}, {"tags": ["linux", "perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472052208, "post_id": 39093100, "comment_id": 65600136, "body": "Awsome. greate solution. Also i am trying add another line &quot;#uuid date&quot; before each output. i tried bellow and its not working. its not giving any error also.  &lt;br/&gt;  d=&quot;<code>date +%D</code>&quot;   printf &quot;%s%s\\n&quot;, &quot;#\\&quot;&quot;,$1,&quot;\\&quot; d&quot;  &lt;br/&gt; printf &quot;%s%s%s%s%s&quot;, &quot;ACTION==\\&quot;add|change\\&quot;, ENV{DM_NAME}==\\&quot;&quot;,$1,&quot;\\&quot;,\\&quot;SYMLINK+=\\&quot;udevlinks/&quot;,i,&quot;\\&quot;\\n&quot;    output   &lt;br/&gt; # 360060e801605a400000105a4000039ba  &lt;br/&gt; ACTION==&quot;add|change&quot;, ENV{DM_NAME}==&quot;360060e801605a400000105a4000039ba&quot;,&quot;SYMLINK+=&zwnj;&#8203;&quot;udevlinks/DATA07_01"}, {"owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472052260, "post_id": 39093100, "comment_id": 65600178, "body": "Having issue with html line break."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472073566, "post_id": 39093100, "comment_id": 65611703, "body": "Please give an example of desired output."}, {"owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472075238, "post_id": 39093100, "comment_id": 65612419, "body": "Out put I am looking for"}, {"owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472075256, "post_id": 39093100, "comment_id": 65612429, "body": "# 360060e801605a400000105a4000039ba 08/24/16"}, {"owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472075273, "post_id": 39093100, "comment_id": 65612437, "body": "ACTION==&quot;add|change&quot;, ENV{DM_NAME}==&quot;360060e801605a400000105a4000039ba&quot;,&quot;SYMLINK+=&zwnj;&#8203;&quot;udevlinks/DATA07_01"}, {"owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "edited": false, "score": 0, "creation_date": 1472093264, "post_id": 39093100, "comment_id": 65616789, "body": "Also, disk name is allways started with 01, example DATA07_01. if i need to start it in middle of disk number how that  can be done. for example file1 has &quot; 3 - 128 GB DATA07_12&quot; then output of disk name should be started with DATA07_13"}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": true, "score": 0, "last_activity_date": 1471934210, "last_edit_date": 1471934210, "creation_date": 1471930565, "answer_id": 39093100, "question_id": 39092517, "link": "https://stackoverflow.com/questions/39092517/create-udev-rules-file-from-two-input-file/39093100#39093100", "title": "Create udev rules file from two input file", "body": "<p>Here is one in AWK:</p>\n\n<pre><code>$ cat &gt; test.awk\nBEGIN {FS=\"([.]| +)\"}   # field separator do deal with \".\" in file2 128.00\nFNR==1 {next}           # skip header\nNR==FNR {               # read available disks to pool from file1\n    for(i=1; i&lt;=$1; i++) \n        a[$5\"_\"0i]=$3   # name and set the disks into pool\n    next} \n{\n    for(i in a) {       # look for right sized disk\n        if(a[i]==$2) {  # when found, print...\n            printf \"%s%s%s%s%s\", \"ACTION==\\\"add|change\\\", ENV{DM_NAME}==\\\"\",$1,\"\\\",\\\"SYMLINK+=\\\"udevlinks/\",i,\"\\\"\\n\"\n            delete a[i] # ... and remove from pool\n            break\n        }\n    } # if no device was found:\n    old=len; len=length(a); if(old==len) {print \"No device found for \",$0}\n}\n$ awk -f test.awk file1 file2\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006700\",\"SYMLINK+=\"udevlinks/DATA12_01\"\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006701\",\"SYMLINK+=\"udevlinks/DATA12_02\"\n...\nNo device found for  THIS_IS_AN_EXAMPLE_OF_MISSING_DISK           666.00 GiB\n</code></pre>\n\n<p>Due to disk search using <code>for(i in a)</code> no order in which disks are read from the pool is guaranteed.</p>\n"}], "owner": {"reputation": 11, "user_id": 4928360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/230bbccab6fde4d0c1b38983a672afd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4928360/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 39093100, "answer_count": 1, "score": -1, "last_activity_date": 1471934210, "creation_date": 1471927559, "last_edit_date": 1471929295, "question_id": 39092517, "link": "https://stackoverflow.com/questions/39092517/create-udev-rules-file-from-two-input-file", "title": "Create udev rules file from two input file", "body": "<p>I am looking for a solution to create Oracle ASM udev rules file for linux. I have two input file. file1 has info of ASM disk requirement and file2 has disk information.</p>\n\n<p>For example, line 2 of file1 is showing DATA12 need 3 disk(DATA12_01,DATA12_02,DATA12_03) of each 128G. file2 has all disk info with size. From these two input file I need to create output file shown bellow.</p>\n\n<p><strong>cat file1</strong></p>\n\n<pre><code>Count - size - name\n3 - 128 GB DATA12\n1 - 128 GB TEMP02\n2 - 4 GB ARCH03\n2 - 1 GB ARCH04\n1 - 3 GB  ORAC01\n</code></pre>\n\n<p><strong>cat file2</strong></p>\n\n<pre><code>UUID                                        Size\n360060e80166ef70000016ef700006700           128.00 GiB\n360060e80166ef70000016ef700006701           128.00 GiB\n360060e80166ef70000016ef700006702           128.00 GiB\n360060e80166ef70000016ef700006703           128.00 GiB\n360060e80166ef70000016ef700006730             4.00 GiB\n360060e80166ef70000016ef700006731             4.00 GiB\n360060e80166ef70000016ef700006733             1.00 GiB\n360060e80166ef70000016ef700006734             1.00 GiB\n360060e80166ef70000016ef700006735             3.00 GiB\n</code></pre>\n\n<p><strong>Output File</strong></p>\n\n<pre><code>ACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006700\", SYMLINK+=\"udevlinks/DATA12_01\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006701\", SYMLINK+=\"udevlinks/DATA12_02\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006702\", SYMLINK+=\"udevlinks/DATA12_03\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006703\", SYMLINK+=\"udevlinks/TEMP02_01\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006730\", SYMLINK+=\"udevlinks/ARCH03_01\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006731\", SYMLINK+=\"udevlinks/ARCH03_02\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006733\", SYMLINK+=\"udevlinks/ARCH04_01\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006734\", SYMLINK+=\"udevlinks/ARCH04_02\"\n\nACTION==\"add|change\", ENV{DM_NAME}==\"360060e80166ef70000016ef700006735\", SYMLINK+=\"udevlinks/ORAC01_01\"\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1471923183, "post_id": 39091830, "comment_id": 65531321, "body": "Apologies, did not mention the problem faced.. I have updated it now"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1471924592, "post_id": 39091830, "comment_id": 65531620, "body": "You can get around that issue by setting up your ssh config ( ~/.ssh/config ) file with an entry like:  Host test.example.com     StrictHostKeyChecking no"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1471924693, "post_id": 39091830, "comment_id": 65531650, "body": "Alternatively, just login to that server once, and then it will be added to your ~/.ssh/known_hosts file so it won&#39;t ask you again.  ( More secure way )"}, {"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "edited": false, "score": 0, "creation_date": 1471932841, "post_id": 39091830, "comment_id": 65534253, "body": "I tried to add an entry to ssh config and also logged into the server.. but still am getting the authenticity question, saw entry in known_hosts and could see entry of the server, please let me know for any other options ?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1471933912, "post_id": 39091830, "comment_id": 65534794, "body": "you can add <code>ssh_option =&gt; &#39;-o StrictHostKeyChecking=no&#39;</code>  to constructor and check if it is working for you."}, {"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1471954803, "post_id": 39091830, "comment_id": 65548525, "body": "@AruneshSingh can i please know how to set <code>ssh_option =&gt; &#39;-o StrictHostKeyChecking=no&#39;</code> in perl expect ?"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "edited": false, "score": 0, "creation_date": 1471951958, "post_id": 39094984, "comment_id": 65546501, "body": "I need to run a command in same server which connects to another host to perform some actions and the command expects the password (along with authenticity part (yes/no)). In Net::SSH::Perl, everywhere I see that it first connects to another server and runs the command. Please let me know how to run a command and then provide password and authenticity using Net::SSH::Perl?"}], "tags": [], "owner": {"reputation": 11, "user_id": 6671040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ecfc64a3cfd49f50859627118c74f92?s=128&d=identicon&r=PG", "display_name": "Konstantin Cherednichenko", "link": "https://stackoverflow.com/users/6671040/konstantin-cherednichenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1471937510, "creation_date": 1471937510, "answer_id": 39094984, "question_id": 39091830, "link": "https://stackoverflow.com/questions/39091830/facing-issues-writing-code-with-perl-expect/39094984#39094984", "title": "Facing issues writing code with perl expect", "body": "<p>You can try to use <a href=\"http://search.cpan.org/~schwigon/Net-SSH-Perl-2.01/lib/Net/SSH/Perl.pm\" rel=\"nofollow\">Net::SSH::Perl</a> instead of using Expect module. You need to set strict_host_key_checking => 'no' if you want to skip SSH key checking...</p>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "is_accepted": true, "score": 0, "last_activity_date": 1472021727, "creation_date": 1472021727, "answer_id": 39116345, "question_id": 39091830, "link": "https://stackoverflow.com/questions/39091830/facing-issues-writing-code-with-perl-expect/39116345#39116345", "title": "Facing issues writing code with perl expect", "body": "<p>I changed the code as below, it was successful:</p>\n\n<pre><code>sub rehostuser_expect() {\n    $expect= Expect-&gt;new;\n    $expect-&gt;raw_pty(1);\n    $expect-&gt;spawn($cmd)\n    or die \"Cannot spawn $cmd: $!\\n\";\n\n    $expect-&gt;expect($timeout,\n            [   qr/.*\\?/i, #/\n            sub {\n                    my $self = shift;\n                    $self-&gt;send(\"yes\\r\\n\");\n                    exp_continue;\n                    }\n            ]);\n\n    $expect-&gt;expect($timeout,\n            [   qr/password:/i, #/\n            sub {\n                    my $self = shift;\n                    $self-&gt;send(\"$password\\n\");\n                    exp_continue;\n            }\n    ]);\n    $expect-&gt;hard_close();\n}\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 39116345, "answer_count": 2, "score": 0, "last_activity_date": 1472021727, "creation_date": 1471922654, "last_edit_date": 1471923158, "question_id": 39091830, "link": "https://stackoverflow.com/questions/39091830/facing-issues-writing-code-with-perl-expect", "title": "Facing issues writing code with perl expect", "body": "<p>I want to run a command which will connect to a remote host and perform some actions, while I try to run the command below actions are required.</p>\n\n<pre><code>The authenticity of host 'test.example.com' can't be established.\nRSA key fingerprint is 45:57:9e:d6:6f:b5:cc:c6:00:3f:90:ec:a1:9d:4e:5f.\nAre you sure you want to continue connecting (yes/no)?\nPlease type 'yes' or 'no': \n</code></pre>\n\n<p>also it asks for a password as below</p>\n\n<pre><code>tes@test.example.com's password:\n</code></pre>\n\n<p>I have written a perl script as below:</p>\n\n<pre><code>sub user_expect()\n{\n    print \"==== Now executing the following command:\\n\";\n    print \"$cmd\\n\";\n    $exp = new Expect();\n    $exp-&gt;raw_pty(1);\n    $exp-&gt;log_file(\"output2_user\", \"w\");\n    $exp-&gt;debug($debug);\n    $exp-&gt;spawn(\"$cmd\");\n    $exp-&gt;expect($timeout,'-re', '\\?\\s$'); # Authenticity question (yes/no)\n    $exp-&gt;send(\"yes\\n\");\n    $exp-&gt;expect($timeout,'-re', ':\\s$'); # In case on console am expected to type yes/no - Please type 'yes' or 'no': \n    $exp-&gt;send(\"yes\\n\");\n    $exp-&gt;expect($timeout,'-re', 'word:$'); # enter password\n    $exp-&gt;send(\"xyz\\n\");\n    $exp-&gt;expect(500,'-re', 'mailbox deleted successfully\\.$');\n    $exp-&gt;hard_close();\n    return 1;\n}\n</code></pre>\n\n<p>I needed a code which can answer the questions asked on console i.e. as below and also the password console</p>\n\n<pre><code>The authenticity of host 'test.example.com' can't be established.\nRSA key fingerprint is 45:57:9e:d6:6f:b5:cc:c6:00:3f:90:ec:a1:9d:4e:5f.\nAre you sure you want to continue connecting (yes/no)?\nPlease type 'yes' or 'no': \n</code></pre>\n\n<p>I am not sure on the mistake I have done regarding the script, can someone please help ?</p>\n\n<p>Problem is - I think the \"yes\" that needs to be typed for below query is not taken because of which the query \"Please type 'yes' or 'no': \" is shown on console. Then my script stops there and does not proceed with password prompt. </p>\n\n<p>Are you sure you want to continue connecting (yes/no)?</p>\n"}, {"tags": ["perl", "duplicates", "key", "trie"], "comments": [{"owner": {"reputation": 14421, "user_id": 836214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f33763395d06f0b8a68cb0cfa31a72d?s=128&d=identicon&r=PG", "display_name": "Krease", "link": "https://stackoverflow.com/users/836214/krease"}, "edited": false, "score": 2, "creation_date": 1471914457, "post_id": 39090819, "comment_id": 65529517, "body": "Have you tried it? This sounds like a question you could answer yourself with a few more minutes of investigation"}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1471914763, "creation_date": 1471914763, "answer_id": 39090879, "question_id": 39090819, "link": "https://stackoverflow.com/questions/39090819/can-a-patricia-trie-contain-duplicate-keys/39090879#39090879", "title": "Can a patricia trie contain duplicate keys", "body": "<p>A trie (or Patricia tree) is generally a map between keys and values. To make a map into a multimap, use a linked list or array as the value.</p>\n"}], "owner": {"reputation": 440, "user_id": 2489837, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bf0da70a7974f20de06c1a3d9fd608bd?s=128&d=identicon&r=PG", "display_name": "north.mister", "link": "https://stackoverflow.com/users/2489837/north-mister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1471915435, "creation_date": 1471914040, "last_edit_date": 1471915435, "question_id": 39090819, "link": "https://stackoverflow.com/questions/39090819/can-a-patricia-trie-contain-duplicate-keys", "title": "Can a patricia trie contain duplicate keys", "body": "<p>More specifically can a patricia trie: </p>\n\n<p><a href=\"http://search.cpan.org/~plonka/Net-Patricia-1.014/Patricia.pm\" rel=\"nofollow\">http://search.cpan.org/~plonka/Net-Patricia-1.014/Patricia.pm</a></p>\n\n<p>Contain duplicate IP addresses (duplicate key IP with different values)\nand if so how does it handles returning the values from that key?</p>\n\n<p>ie:</p>\n\n<pre><code>123.456.789.0-&gt; {\n  'value' =&gt; 'hai'\n}\n\n123.456.789.0-&gt;{\n  'value' =&gt; 'hey there'\n}\n\n\n\npatricia-trie-&gt;match_string(123.456.789.0)\n</code></pre>\n\n<p>returns  ???</p>\n\n<p>Edit:\nYes, I know I can implement my own that supports this behavior. I am asking how this specific trie implementation handles it.  The documentation is extremely limited and manual testing appears to show overwrites, but I was hoping someone has a definitive answer.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 145, "user_id": 3213754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04916f655bc2e48dfe1894cfd2a6e624?s=128&d=identicon&r=PG", "display_name": "RobertHannah89", "link": "https://stackoverflow.com/users/3213754/roberthannah89"}, "edited": false, "score": 0, "creation_date": 1471914095, "post_id": 39090376, "comment_id": 65529433, "body": "In the first snippet, <code>$1</code> contains the line ending matched."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1471910012, "creation_date": 1471910012, "answer_id": 39090376, "question_id": 39090265, "link": "https://stackoverflow.com/questions/39090265/unrecognized-escape-r-passed-through-at-test-pl-line-7/39090376#39090376", "title": "Unrecognized escape \\R passed through at test.pl line 7", "body": "<p><code>\\R</code> in a regex pattern matches a number of different line break sequences.</p>\n\n<p><code>\\R</code> in a string literals (such as the replacement expression<sup>[1]</sup>) is meaningless.</p>\n\n<p>Use</p>\n\n<pre><code>$data =~ s/(\\R)\\R+/$1/g;\n</code></pre>\n\n<p>Better yet,</p>\n\n<pre><code>$data =~ s/\\R\\K\\R+//g;\n</code></pre>\n\n<hr>\n\n<ol>\n<li><p>Remember,</p>\n\n<pre><code>s{...}{...}\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>s{...}{ qq{...} }e\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 145, "user_id": 3213754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04916f655bc2e48dfe1894cfd2a6e624?s=128&d=identicon&r=PG", "display_name": "RobertHannah89", "link": "https://stackoverflow.com/users/3213754/roberthannah89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1471910012, "creation_date": 1471909066, "question_id": 39090265, "link": "https://stackoverflow.com/questions/39090265/unrecognized-escape-r-passed-through-at-test-pl-line-7", "title": "Unrecognized escape \\R passed through at test.pl line 7", "body": "<p>I have perl 5, version 22, (on Cygwin, so pretty new version). Using \\R doesn't seem to work even though it should.</p>\n\n<p>I'm just replacing double new lines with single new lines:</p>\n\n<pre><code>my $data = read_file($filename);\n$data =~ s/\\R\\R/\\R/g;\n</code></pre>\n\n<p>However I get the error \"Unrecognized escape \\R passed through at test.pl line 7.\"</p>\n\n<p>Is there something I'm doing wrong?</p>\n"}, {"tags": ["perl", "testing", "devel-cover"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1472011494, "post_id": 39087149, "comment_id": 65575288, "body": "I would think this is a good place to start <a href=\"http://stackoverflow.com/questions/533553/perl-build-unit-testing-code-coverage-a-complete-working-example\" title=\"perl build unit testing code coverage a complete working example\">stackoverflow.com/questions/533553/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 6744992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/400f54b113d7d06554edba8a4ac8770b?s=128&d=identicon&r=PG&f=1", "display_name": "Tito", "link": "https://stackoverflow.com/users/6744992/tito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472202072, "creation_date": 1471893418, "last_edit_date": 1472202072, "question_id": 39087149, "link": "https://stackoverflow.com/questions/39087149/perl-develcover-to-test-cover-my-file-pl-with-different-command-line-input-a", "title": "Perl Devel::Cover to test (cover) my_file.pl with different command line input arguments", "body": "<p>I am a newbie and pardon my ignorance. I am trying to use Devel::Cover (DC) to get an idea of the code coverage of my my_file.pl Perf file ran with arg1, arg2 as command-line input arguments. I am using Perl 5.8.9 with DC 1.23. The steps I executed successfully to generate the html file are:</p>\n\n<ol>\n<li><p><code>perl -MDevel::Cover my_file.pl -arg1 arg1_value -arg2 arg2_value</code></p></li>\n<li><p><code>Devel-Cover-1.23/bin/cover cover_db --report=html</code></p></li>\n</ol>\n\n<p>Now, I do not have packages/modules to test directly. But I have the my_file.pl file which invokes several packages. </p>\n\n<p>And I need to test my_file.pl with several different combinations of command line i/p arguments (i.e. arg1_different_value, arg2_different_value, etc.). All these test combinations are a part of my regression suite (you can think of the options written in a test.txt file sequentially) and I am trying to see if Devel::Cover can assure that I have 100% code coverage with these tests.</p>\n\n<p>While I can run the above in a for-loop, each time with different arguments, I am not sure if that is the best way since I will end up with 100's of \nhtml/report files that need to be merged for any  meaningful purpose.</p>\n\n<p>Could you kindly provide some pointers?</p>\n"}, {"tags": ["perl", "csv", "unicode", "utf-8", "hex"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471893523, "post_id": 39086988, "comment_id": 65521990, "body": "BOM is U+FEFF, not U+FEBBBF."}, {"owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471893606, "post_id": 39086988, "comment_id": 65522022, "body": "@ikegami U+FEFF is the code for utf16 not for utf8"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1471893650, "post_id": 39086988, "comment_id": 65522049, "body": "U+FEFF means &quot;Unicode Code Point FEFF&quot;, and it has nothing to do with UTF-8 or UTF-16."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471893765, "post_id": 39087190, "comment_id": 65522113, "body": "that should be for utf-16 coding, but I am looking for utf8 I was saying how that works when I do either of the first two options that you reccomended, however I mean to use 8 bits not 16"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471893812, "post_id": 39087190, "comment_id": 65522140, "body": "Did you try it? You would have seen that you are mistaken. See the added paragraph."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1471894145, "last_edit_date": 1471894145, "creation_date": 1471893590, "answer_id": 39087190, "question_id": 39086988, "link": "https://stackoverflow.com/questions/39086988/setting-bom-to-unicode-u-code-utf8-perl/39087190#39087190", "title": "setting BOM to Unicode U code UTF8 perl", "body": "<p>The BOM is U+FEFF, not U+FEBBBF. Replace</p>\n\n<pre><code>\"\\x{FEBBBF}\"\n</code></pre>\n\n<p>with any one of following:</p>\n\n<pre><code>chr(0xFEFF)\n\"\\x{FEFF}\"\n\"\\N{U+FEFF}\"\n\"\\N{BOM}\"\n</code></pre>\n\n<p>This will create a string with a single character (<code>FEFF</code>), which <code>print</code> will encode using UTF-8 as requested (<code>EF BB BF</code>).</p>\n"}], "owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 39087190, "answer_count": 1, "score": 0, "last_activity_date": 1471894145, "creation_date": 1471892745, "last_edit_date": 1495535327, "question_id": 39086988, "link": "https://stackoverflow.com/questions/39086988/setting-bom-to-unicode-u-code-utf8-perl", "title": "setting BOM to Unicode U code UTF8 perl", "body": "<p>This question is similar to others that have been posted before. however trying all combinations nothing is working. </p>\n\n<p>I need to have my excel file read in Unicode Utf8, I am attempting to set my bom: </p>\n\n<p><code>my $csv = Text::CSV-&gt;new ({binary=&gt;1, eol =&gt;$/}) \n     or die \"cannot use CSV: \".Text::CSV-&gt;error_diag ();\nopen my $csvFile, \"&gt;:encoding(UTF-8)\", \"teht.csv\" or die \"teht.csv: $!\";\nprint($csvFile \"\\x{FEBBBF}\");</code></p>\n\n<p>however this gets an errror and says that \"0xFEBBBF is not Unicode...\"</p>\n\n<p>all information that I have found indicates that the code for utf8 should read \n<code>print($csvFile \"\\N{U+FEBBBF}\")</code> or <code>... \"\\xFE\\xBB\\xBF\"</code> or similar. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/6002256/is-it-possible-to-force-excel-recognize-utf-8-csv-files-automatically\">Is it possible to force Excel recognize UTF-8 CSV files automatically?</a> is one source which says this many times.</p>\n\n<p><a href=\"https://stackoverflow.com/a/22711105/6557829\">https://stackoverflow.com/a/22711105/6557829</a> is another source.</p>\n\n<p>So far I have actually been able to get UTF-16 to work with the same print statement: <code>print($csvFile \"\\N{U+FEFF}\");</code> however that is more space than I mean to use. \nThanks in advance for any help you can give me.</p>\n"}, {"tags": ["perl", "xml-parsing", "grep", "text-processing"], "comments": [{"owner": {"reputation": 1649, "user_id": 2616221, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/95e86e947ab529429b9182904f01540c?s=128&d=identicon&r=PG&f=1", "display_name": "gardenhead", "link": "https://stackoverflow.com/users/2616221/gardenhead"}, "edited": false, "score": 5, "creation_date": 1471890190, "post_id": 39100396, "comment_id": 65547292, "body": "You tagged this with <code>sed</code> and <code>grep</code>, but neither of these tools were designed to handle structured markup, which is generally too complex for standard unix filters. While your specific use case <i>might</i> be doable, I&#39;d probably just use an XML parsing library from your favorite language"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 2, "creation_date": 1471953160, "post_id": 39100396, "comment_id": 65547372, "body": "Have you tryed anything so far? SO is not a place for I have this, I expect this and wait for it to happen&#39;. Please post what you&#39;ve tryed."}, {"owner": {"reputation": 3, "user_id": 6747955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1108025022606014/picture?type=large", "display_name": "velu", "link": "https://stackoverflow.com/users/6747955/velu"}, "edited": false, "score": 0, "creation_date": 1471956565, "post_id": 39100396, "comment_id": 65549880, "body": "i tried with below cmd it working fine if i grep singe message out session but i can&#39;t use for 3 session   sed -n -e &#39;s/^.*Multiple-Services-Credit-Control//p&#39; xml.txt | sed -n -e &#39;s/^.*Result-Code&quot; value=//p&#39; |  cut -d&#39;&quot;&#39; -f2"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471960250, "post_id": 39100396, "comment_id": 65552782, "body": "Why not create a Perl script and read data line by line?"}, {"owner": {"reputation": 3, "user_id": 6747955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1108025022606014/picture?type=large", "display_name": "velu", "link": "https://stackoverflow.com/users/6747955/velu"}, "edited": false, "score": 0, "creation_date": 1471960759, "post_id": 39100396, "comment_id": 65553208, "body": "actually i&#39;m not aware perl , please suggest me which one is best perl, unix or xmllint for this job"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "edited": false, "score": 0, "creation_date": 1471961984, "post_id": 39100396, "comment_id": 65554256, "body": "Any tool that supports xpath should do the job"}], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 3, "user_id": 6747955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1108025022606014/picture?type=large", "display_name": "velu", "link": "https://stackoverflow.com/users/6747955/velu"}, "edited": false, "score": 0, "creation_date": 1472463228, "post_id": 39103499, "comment_id": 65745057, "body": "Yes, the script will read each line from the input file. After that it will search for the pattern. I used groups to catch the information, what you see inside the paranthesses, those are groupings. ` $_ ` will store the information in the order of the paranthesses from left to right."}], "tags": [], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "is_accepted": true, "score": 0, "last_activity_date": 1471961208, "creation_date": 1471961208, "answer_id": 39103499, "question_id": 39100396, "link": "https://stackoverflow.com/questions/39100396/how-to-grep-for-specific-string-in-a-file/39103499#39103499", "title": "How to grep for specific string in a file", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $filename = 'path_to_input_file\\data.txt';\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename)\nor die \"Could not open file '$filename' $!\";\n\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    $row =~ /.*?(\"CC-Request-Type\"\\svalue=\"\\d*\").*?(\"CC-Request-Number\"\\svalue=\"\\d*\").*?(\"Result-Code\" value=\"\\d*\")/;\n    if ( (defined $1) and (defined $2) and (defined $3)){\n        print \"\\n$1\\n$2\\n$3\\n\";\n    }\n}\n</code></pre>\n\n<p>This is the solution in Perl. If you need explanations for the reg-ex used I will gladly exlpain it.</p>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471961962, "post_id": 39103747, "comment_id": 65554242, "body": "Good asnwer. I was using the &quot;line pattern&quot; from the question, but this is working in all contexts."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471962706, "post_id": 39103747, "comment_id": 65554860, "body": "Yes. I didn&#39;t downvote it, because it does solve the problem, but I honestly believe that regexing XML is creating future problems."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1471961864, "last_edit_date": 1495542765, "creation_date": 1471961864, "answer_id": 39103747, "question_id": 39100396, "link": "https://stackoverflow.com/questions/39100396/how-to-grep-for-specific-string-in-a-file/39103747#39103747", "title": "How to grep for specific string in a file", "body": "<p>This is <code>XML</code>. <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">It's a bad idea to try and use regular expressions on <code>XML</code></a>, because <code>XML</code> is contextual, and regular expressions aren't. </p>\n\n<p>Use an XML Parser. Most will let you do <code>xpath</code> which is comparable to regular expressions - but specifically designed to handle the contextual nature of <code>XML</code>. </p>\n\n<p><code>perl</code> has multiple options. I like <code>XML::Twig</code> particularly.:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parsefile ( 'your_file.xml' );\n\nmy @attributes = qw ( CC-Request-Type CC-Request-Number Result-Code );\n\nforeach my $msg ( $twig -&gt; get_xpath('//MessageOut') ) {\n    foreach my $attribute ( @attributes ) {\n        print \"$attribute value=\",$msg -&gt; get_xpath(\"//Attribute[\\@name=\\'$attribute\\']\",0)-&gt;att('value'),\"\\n\"; \n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>With your sample data (slightly amended to include root tags) give:</p>\n\n<pre><code>CC-Request-Type value=2\nCC-Request-Number value=1\nResult-Code value=5031\n\nCC-Request-Type value=2\nCC-Request-Number value=1\nResult-Code value=5031\n\nCC-Request-Type value=2\nCC-Request-Number value=1\nResult-Code value=5031\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1471953009, "question_id": 305082}, "owner": {"reputation": 3, "user_id": 6747955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1108025022606014/picture?type=large", "display_name": "velu", "link": "https://stackoverflow.com/users/6747955/velu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 39103499, "answer_count": 2, "score": -2, "last_activity_date": 1471962184, "creation_date": 1471888175, "last_edit_date": 1471962184, "question_id": 39100396, "link": "https://stackoverflow.com/questions/39100396/how-to-grep-for-specific-string-in-a-file", "title": "How to grep for specific string in a file", "body": "<p>this is my input file </p>\n\n<pre><code>&lt;MessageOut&gt;\n&lt;Attribute name=\"Session-Id\" value=\"22250\"/&gt;&lt;Attribute name=\"CC-Request-Type\" value=\"2\"/&gt;&lt;Attribute name=\"CC-Request-Number\" value=\"1\"/&gt;&lt;Attribute name=\"Origin-Host\" value=\"indlnqw291\"/&gt;&lt;Attribute name=\"Origin-Realm\" value=\"amdocs.com\"/&gt;&lt;Attribute name=\"Auth-Application-Id\" value=\"4\"/&gt;&lt;Attribute name=\"Result-Code\" value=\"5031\"/&gt;&lt;Attribute name=\"CC-Session-Failover\" value=\"1\"/&gt;&lt;Attribute name=\"Low-Balance-Indication\" value=\"0\"/&gt;&lt;Attribute name=\"Multiple-Services-Credit-Control\"&gt;&lt;Group&gt;&lt;Attribute name=\"Result-Code\" value=\"5031\"/&gt;&lt;Attribute name=\"Service-Identifier\" value=\"0\"/&gt;&lt;Attribute name=\"Rating-Group\" value=\"2\"/&gt;&lt;/Group&gt;&lt;/Attribute&gt;&lt;/MessageOut&gt;\n&lt;MessageOut&gt;\n&lt;Attribute name=\"Session-Id\" value=\"22250\"/&gt;&lt;Attribute name=\"CC-Request-Type\" value=\"3\"/&gt;&lt;Attribute name=\"CC-Request-Number\" value=\"2\"/&gt;&lt;Attribute name=\"Origin-Host\" value=\"indlnqw291\"/&gt;&lt;Attribute name=\"Origin-Realm\" value=\"amdocs.com\"/&gt;&lt;Attribute name=\"Auth-Application-Id\" value=\"4\"/&gt;&lt;Attribute name=\"Result-Code\" value=\"5031\"/&gt;&lt;/MessageOut&gt;\n&lt;MessageOut&gt;\n&lt;Attribute name=\"Session-Id\" value=\"22250\"/&gt;&lt;Attribute name=\"CC-Request-Type\" value=\"1\"/&gt;&lt;Attribute name=\"CC-Request-Number\" value=\"0\"/&gt;&lt;Attribute name=\"Origin-Host\" value=\"indlnqw291\"/&gt;&lt;Attribute name=\"Origin-Realm\" value=\"amdocs.com\"/&gt;&lt;Attribute name=\"Auth-Application-Id\" value=\"4\"/&gt;&lt;Attribute name=\"Result-Code\" value=\"5031\"/&gt;&lt;Attribute name=\"CC-Session-Failover\" value=\"1\"/&gt;&lt;Attribute name=\"Low-Balance-Indication\" value=\"0\"/&gt;&lt;Attribute name=\"Multiple-Services-Credit-Control\"&gt;&lt;Group&gt;&lt;Attribute name=\"Result-Code\" value=\"5031\"/&gt;&lt;Attribute name=\"Service-Identifier\" value=\"0\"/&gt;&lt;Attribute name=\"Rating-Group\" value=\"2\"/&gt;&lt;/Group&gt;&lt;/Attribute&gt;&lt;/MessageOut&gt;\n</code></pre>\n\n<p>i want grep result code  after \"Multiple-Services-Credit-Control\"</p>\n\n<p>expected result:</p>\n\n<pre><code>\"CC-Request-Type\" value=\"1\"\n\"CC-Request-Number\" value=\"0\"\n\"Result-Code\" value=\"5031\"\n\n\"CC-Request-Type\" value=\"2\"\n\"CC-Request-Number\" value=\"1\"\n\"Result-Code\" value=\"5031\"\n\n\"CC-Request-Type\" value=\"3\"\n\"CC-Request-Number\" value=\"2\"\n\"Result-Code\" value=\"5031\"\n</code></pre>\n\n<p>thanks in advance</p>\n"}, {"tags": ["javascript", "perl", "fetch"], "answers": [{"comments": [{"owner": {"reputation": 617, "user_id": 2364438, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lhmZW.gif?s=128&g=1", "display_name": "tvs", "link": "https://stackoverflow.com/users/2364438/tvs"}, "edited": false, "score": 0, "creation_date": 1471905242, "post_id": 39085640, "comment_id": 65527167, "body": "Ok, if I do what you say I don&#39;t have &#39;undefined&#39; any more, but I still don&#39;t get the response data from the perl script"}, {"owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "reply_to_user": {"reputation": 617, "user_id": 2364438, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lhmZW.gif?s=128&g=1", "display_name": "tvs", "link": "https://stackoverflow.com/users/2364438/tvs"}, "edited": false, "score": 0, "creation_date": 1471909183, "post_id": 39085640, "comment_id": 65528332, "body": "Is the CGI script working? You do have a <code>Response</code> object, according to your own logs"}, {"owner": {"reputation": 617, "user_id": 2364438, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lhmZW.gif?s=128&g=1", "display_name": "tvs", "link": "https://stackoverflow.com/users/2364438/tvs"}, "edited": false, "score": 0, "creation_date": 1471909297, "post_id": 39085640, "comment_id": 65528367, "body": "Yes, I&#39;ve tested via command line using curl and returns the data correctly (see what I wrote at the end of my posting)"}], "tags": [], "owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "is_accepted": false, "score": 3, "last_activity_date": 1471887815, "creation_date": 1471887815, "answer_id": 39085640, "question_id": 39085575, "link": "https://stackoverflow.com/questions/39085575/javascript-fetch-cant-get-post-response-data-from-perl-script/39085640#39085640", "title": "javascript fetch: can&#39;t get POST response data from perl script", "body": "<p>You're not passing the data down the callback chain. You have to <code>return</code> something from the <code>then()</code> handler, if you expect it in the following <code>then()</code>.</p>\n\n<pre><code>function promiseOne() {\n  return Promise.resolve(1)\n}    \n\npromiseOne()\n  .then(one =&gt; { console.log(one) }) # 1\n  .then(one =&gt; { console.log(one) }) # undefined\n\npromiseOne()\n  .then(one =&gt; { console.log(one); return one }) # 1\n  .then(one =&gt; { console.log(one) })             # 1\n</code></pre>\n\n<p>Since the first <code>then()</code> handler has no <code>return</code> statement, it implicitly returns <code>undefined</code>, and that's what you see in the next handler.</p>\n\n<p>If you're not doing any additional async work, you usually don't need to invoke <code>then()</code> multiple times.</p>\n"}, {"tags": [], "owner": {"reputation": 617, "user_id": 2364438, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lhmZW.gif?s=128&g=1", "display_name": "tvs", "link": "https://stackoverflow.com/users/2364438/tvs"}, "is_accepted": true, "score": 0, "last_activity_date": 1471958218, "creation_date": 1471958218, "answer_id": 39102354, "question_id": 39085575, "link": "https://stackoverflow.com/questions/39085575/javascript-fetch-cant-get-post-response-data-from-perl-script/39102354#39102354", "title": "javascript fetch: can&#39;t get POST response data from perl script", "body": "<p>I finally solved this, I'm posting my solution here as it might be relevant for other people having a similar problem.</p>\n\n<p>The problem was twofold:</p>\n\n<ol>\n<li>I was printing an additional HTML header from the Perl script that make the JSON data wrong</li>\n<li>I haven't used response.json() within the premise to get the JSON data</li>\n</ol>\n\n<p>Here's the fixed code:</p>\n\n<p>JavaScript code:</p>\n\n<pre><code>    fetch('/test.pl', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: this.state.msgName,\n        email: this.state.msgEmail\n      })\n    })\n    .then((response) =&gt; {\n        response.json().then((data) =&gt; {\n          console.log(data);\n        });\n\n        return(response);\n      }\n    })\n</code></pre>\n\n<p>Perl code:</p>\n\n<pre><code>#/usr/bin/env perl\nuse strict;\nuse CGI;\nuse JSON;\n\nmy $q = new CGI;\nmy $json = new JSON;\n\nif ($q-&gt;param)\n{\n  print $q-&gt;header();\n  my $hash = $json-&gt;decode($q-&gt;param('POSTDATA'));\n  # NEXT LINE REMOVED, IT WAS WRONG!!\n  #print $q-&gt;header('application/json');\n  my $msg = [ sprintf \"data from %s received ok\", $hash-&gt;{name} ];\n  print $json-&gt;encode($msg);\n}\n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 2364438, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lhmZW.gif?s=128&g=1", "display_name": "tvs", "link": "https://stackoverflow.com/users/2364438/tvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 39102354, "answer_count": 2, "score": 1, "last_activity_date": 1471958218, "creation_date": 1471887563, "question_id": 39085575, "link": "https://stackoverflow.com/questions/39085575/javascript-fetch-cant-get-post-response-data-from-perl-script", "title": "javascript fetch: can&#39;t get POST response data from perl script", "body": "<p>I'm trying to get a response data back from a perl CGI script:</p>\n\n<p>I have the following JavaScript code:</p>\n\n<pre><code>    fetch('/test.pl', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: this.state.msgName,\n        email: this.state.msgEmail\n      })\n    })\n    .then((response) =&gt; {\n        console.log(\"been here\");\n        console.log(response);\n    })\n    .then((responseData) =&gt; {\n      console.log(\"been here 2\");\n      console.log(responseData);\n    })\n    .then((data) =&gt; {\n      console.log(\"been here 3\");\n      console.log(data);\n    })\n    .catch((error) =&gt; {\n      console.log(\"Failed!\", error)\n    });\n</code></pre>\n\n<p>and this perl script:</p>\n\n<pre><code>#/usr/bin/env perl\nuse strict;\nuse CGI;\nuse JSON;\n\nmy $q = new CGI;\nmy $json = new JSON;\n\nif ($q-&gt;param)\n{\n  print $q-&gt;header();\n  my $hash = $json-&gt;decode($q-&gt;param('POSTDATA'));\n  print $q-&gt;header('application/json');\n  my $msg = [ sprintf \"data from %s received ok\", $hash-&gt;{name} ];\n  print $json-&gt;encode($msg);\n}\n</code></pre>\n\n<p>but I'm only getting this (I'm using Chrome's Web Developer Tools) and no data:</p>\n\n<pre><code> been here\n Response {type: \"basic\", url: \"http://localhost/test.pl\", status: 200, ok: true, statusText: \"OK\"\u2026}\n been here 2\n undefined\n been here 3 \n undefined\n</code></pre>\n\n<p>I'm sure the perl script works ok, here's the output of testing it from the command line:</p>\n\n<pre><code> # curl -H \"Accept: application/json\" -H \"Content-Type: application/json\" -X POST -d '{\"name\":\"uvw\",\"email\":\"xyz\"}' http://localhost/test.pl\n Content-Type: application/json; charset=ISO-8859-1\n\n [\"data from uvw received ok\"]%\n</code></pre>\n\n<p>Anyone knows how to get the data response back to the js script? Thanks in advance for any help!</p>\n"}, {"tags": ["windows", "perl", "batch-file", "command-prompt"], "comments": [{"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 2, "creation_date": 1471886338, "post_id": 39083418, "comment_id": 65518351, "body": "What about <code>start cmd &#47;K title $myfile_nextnumber.pl &amp; $myfile_nextnumber.pl</code>?"}, {"owner": {"reputation": 429, "user_id": 2943191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7f8c3f216945a076981b9a993687f552?s=128&d=identicon&r=PG&f=1", "display_name": "Klaidonis", "link": "https://stackoverflow.com/users/2943191/klaidonis"}, "reply_to_user": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1471933520, "post_id": 39083418, "comment_id": 65534588, "body": "@aschipfl if you use the <code>&amp;</code> operator you must enclose all commands for <code>cmd</code> in double quotation marks as mentioned in the <a href=\"https://technet.microsoft.com/en-us/library/bb490880.aspx\" rel=\"nofollow noreferrer\">reference</a>, then you need to use single quotation marks to enclose all string starting from <code>start</code> but then you cannot pass variables in the string."}, {"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 1, "creation_date": 1471936236, "post_id": 39083418, "comment_id": 65536110, "body": "You can also escape the <code>&amp;</code> like <code>^&amp;</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 2943191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7f8c3f216945a076981b9a993687f552?s=128&d=identicon&r=PG&f=1", "display_name": "Klaidonis", "link": "https://stackoverflow.com/users/2943191/klaidonis"}, "edited": false, "score": 0, "creation_date": 1471933870, "post_id": 39084676, "comment_id": 65534774, "body": "In my case, I want that the current Perl script calls the next one, but not like when there is one main script calling other scripts. That means I would need to add the <code>print</code> statement to the beginning of every Perl script."}], "tags": [], "owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "is_accepted": false, "score": 1, "last_activity_date": 1471884103, "creation_date": 1471884103, "answer_id": 39084676, "question_id": 39083418, "link": "https://stackoverflow.com/questions/39083418/how-to-simulate-opening-of-bat-file-without-one/39084676#39084676", "title": "How to simulate opening of .BAT file without one?", "body": "<p>Why not just put a <code>print</code> statement before each system call?</p>\n\n<pre><code>foreach my $file (@filelist) {\n  print \"Calling $file\\n\";\n  system \"start cmd /k $file\";\n}\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 2943191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7f8c3f216945a076981b9a993687f552?s=128&d=identicon&r=PG&f=1", "display_name": "Klaidonis", "link": "https://stackoverflow.com/users/2943191/klaidonis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471884103, "creation_date": 1471879686, "last_edit_date": 1471881301, "question_id": 39083418, "link": "https://stackoverflow.com/questions/39083418/how-to-simulate-opening-of-bat-file-without-one", "title": "How to simulate opening of .BAT file without one?", "body": "<p>I want to launch several Perl scripts one after another (although, technically in parallel here) automatically.</p>\n\n<p>It is easy to make a routine where the script makes a trivial .BAT file consisting only with the next Perl script, for example:</p>\n\n<pre><code>write_file(\"Z.bat\", \"$myfile_nextnumber.pl\\n\");\nsystem \"start Z.bat\";\n</code></pre>\n\n<p>and you get nice output from each script in a separate window.</p>\n\n<p>But how to achieve this without creating any file?</p>\n\n<p>The closest what I got:</p>\n\n<pre><code>system \"start cmd /k $myfile_nextnumber.pl\";\n</code></pre>\n\n<p>but in this case, it does not show the path and file that was executed.</p>\n"}, {"tags": ["perl", "conditional-statements"], "comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1471878625, "post_id": 39083025, "comment_id": 65513880, "body": "check if a variable content starts with a dot. If it contains a file name, it checks if it is a hidden file."}, {"owner": {"reputation": 46287, "user_id": 143505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8873b6c42ea2d345bcafb32119700fca?s=128&d=identicon&r=PG", "display_name": "ccheneson", "link": "https://stackoverflow.com/users/143505/ccheneson"}, "edited": false, "score": 2, "creation_date": 1471878797, "post_id": 39083025, "comment_id": 65513997, "body": "<code>-d </code> check if the file IS a directory <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/-X.html</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1471879151, "post_id": 39083025, "comment_id": 65514250, "body": "Didn&#39;t you google &quot;equals sign tilde slash caret backslash dot slash?&quot; ;) Many of Perl&#39;s operators and built-in variables are hard to google because they contain special characters, so it helps to know where to look in the official documentation. Operators are documented in <a href=\"http://perldoc.perl.org/perlop\" rel=\"nofollow noreferrer\">perlop</a>; (<code>=~</code> is <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\">here</a>, the match operator, which follows <code>=~</code>, is <a href=\"http://perldoc.perl.org/perlop.html#m%2f_PATTERN_%2fmsixpodualngc\" rel=\"nofollow noreferrer\">here</a>). <i>continued</i>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471879198, "post_id": 39083025, "comment_id": 65514283, "body": "<code>^\\.</code> is a regular expression, documented in <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> and <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>. If you have the perldoc utility installed on your system, you can view these by entering e.g. <code>perldoc perlretut</code> on the command line."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471880171, "post_id": 39083025, "comment_id": 65514955, "body": "@ThisSuitIsBlackNot I&#39;ve added your comments to the accepted answer, for future reference (I know not everyone bothers to read comments)."}], "answers": [{"tags": [], "owner": {"reputation": 2747, "user_id": 110772, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5814a79c67340b6d63a9e3b4dda17f4e?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/110772/richard"}, "is_accepted": false, "score": 3, "last_activity_date": 1471879322, "last_edit_date": 1471879322, "creation_date": 1471879010, "answer_id": 39083197, "question_id": 39083025, "link": "https://stackoverflow.com/questions/39083025/what-does-file-mean-in-perl/39083197#39083197", "title": "What does &quot;$file =~ /^\\./&quot; mean in perl?", "body": "<p><code>=~</code>  is Perl's regular expression operator </p>\n\n<p>it is matching <code>$file</code> to the regular expression   <code>^\\.</code> </p>\n\n<p>briefly this means</p>\n\n<ul>\n<li><code>^</code>   - match to the beginning of the string </li>\n<li><code>\\.</code>  - search for a literal . character</li>\n</ul>\n\n<p>Thus: Since this expression is also negated with a <code>not</code> operator if the filename does not begin with a . character then this expression will return true.  </p>\n\n<p>More information <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": true, "score": 3, "last_activity_date": 1471880106, "last_edit_date": 1495540295, "creation_date": 1471879151, "answer_id": 39083239, "question_id": 39083025, "link": "https://stackoverflow.com/questions/39083025/what-does-file-mean-in-perl/39083239#39083239", "title": "What does &quot;$file =~ /^\\./&quot; mean in perl?", "body": "<p>The <code>not $file =~ /^\\./</code> part of that statement tests the string in the scalar <code>$file</code> against the regex <code>^\\.</code></p>\n\n<p>The regex checks for <code>^</code> begining of string, followed by <code>.</code></p>\n\n<p>Dots (periods) have to be escaped with a backquote <code>\\</code> because in regex dots have a special meaning (it means any single character).</p>\n\n<p>So it will check if the string inside <code>$file</code> starts with a dot. This operation will return 1 if it matches or 0 if it doesn't and the <code>not</code> negates it. The upshot can been read as \"if the file does not start with a dot\".</p>\n\n<p>You can also use the <code>!~</code> operator (does not match regex operator) to achieve the same result:</p>\n\n<pre><code>if ( -d \"$dirPath\\\\$file\" and $file !~ /^\\./ )\n</code></pre>\n\n<p>To link some of <a href=\"https://stackoverflow.com/users/176646/thissuitisblacknot\">ThisSuitIsNotBlack</a> comments here in an answer, the matches operator <code>=~</code> is documented inside perl documentation page perlop, which can be viewed with <code>perldoc perlop</code> and can be found online at the <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">Perl website</a>. The relevant section is <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\">Binding Operators</a>. Perl Regex has a couple of perl documentation pages <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> (<code>perldoc perlretut</code>) and <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> (<code>perldoc perlre</code>).</p>\n"}], "owner": {"reputation": 902, "user_id": 6603658, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b64a8d63af5dfca2ec635aac587001bb?s=128&d=identicon&r=PG&f=1", "display_name": "astudentofmaths", "link": "https://stackoverflow.com/users/6603658/astudentofmaths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "accepted_answer_id": 39083239, "answer_count": 2, "score": 0, "last_activity_date": 1471880106, "creation_date": 1471878500, "last_edit_date": 1471878630, "question_id": 39083025, "link": "https://stackoverflow.com/questions/39083025/what-does-file-mean-in-perl", "title": "What does &quot;$file =~ /^\\./&quot; mean in perl?", "body": "<p>I'm just getting started in Perl, and I've been given a script that I don't fully understand. Specifically, I don't understand this condition line:</p>\n\n<pre><code>if ( -d \"$dirPath\\\\$file\" and not $file =~ /^\\./ )\n</code></pre>\n\n<p>The first part of the condition is whether the file exists in the directory, but I don't understand the \"not $file =~ /^./ \", what does it mean ?\nI did some research through the internet but wasn't able to find anything.</p>\n"}, {"tags": ["regex", "perl", "recursive-regex"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1471878796, "post_id": 39082708, "comment_id": 65513995, "body": "So your C++ question is how to debug your perl script?"}, {"owner": {"reputation": 959, "user_id": 3526980, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hZFEP.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/3526980/richard"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1471878935, "post_id": 39082708, "comment_id": 65514106, "body": "I added the tag C++ because i think that some cpp devs may have encountered similar situations. It is mainly a perl question though."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1471881737, "post_id": 39082708, "comment_id": 65515942, "body": "You&#39;re doing the substitution line by line, so it doesn&#39;t work on multiline."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471884167, "post_id": 39082708, "comment_id": 65517260, "body": "&quot;Zero or more&quot; of anything will always match, so <code>[^\\{\\}]*</code> always matches and the recursion is never executed. Also, the <code>&#47;s</code> snd <code>&#47;c</code> modifiers are ineffective here and should be omitted, and you should use <code>$1</code> instead of <code>\\1</code> in the replacement string."}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3526980, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hZFEP.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/3526980/richard"}, "edited": false, "score": 0, "creation_date": 1471954503, "post_id": 39084153, "comment_id": 65548307, "body": "I literally hit my head on my desk when i saw your answer. Thanks a lot. It works now."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 2, "last_activity_date": 1471882173, "creation_date": 1471882173, "answer_id": 39084153, "question_id": 39082708, "link": "https://stackoverflow.com/questions/39082708/renamespacing-c-header-with-perl-multiline-issues/39084153#39084153", "title": "Renamespacing c++ header with perl - multiline issues", "body": "<p>You have to read the whole file in a string then do the substitution on this string:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Modern::Perl;\n\nundef$/;\n$_ = &lt;DATA&gt;;\n    s/namespace\\s+def\\s*\n    ( # group 1 - braced string with balanced number of lbraces and rbraces\n        \\{\n        ( # group 2 - String without braces or recursion to group 1\n            [^\\{\\}]* # some string that does not contain braces\n            | (?1) # recursion of group1\n        )*\n        \\}\n    )\n    /namespace abc {\\nnamespace def $1\\n}/gsx;\n    print;\n\n\n__DATA__\nnamespace def {}\nnamespace def { abc }\nnamespace def { { } }\nnamespace def { { abcd } }\nnamespace def {\n    abc\n}\nnamespace def { // some comment\n    do_something();\n}\nnamespace def {\n    do_something();\n    while (still_not_crashed()) {\n        do_even_more();\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>namespace abc {\nnamespace def {}\n}\nnamespace abc {\nnamespace def { abc }\n}\nnamespace abc {\nnamespace def { { } }\n}\nnamespace abc {\nnamespace def { { abcd } }\n}\nnamespace abc {\nnamespace def {\n    abc\n}\n}\nnamespace abc {\nnamespace def { // some comment\n    do_something();\n}\n}\nnamespace abc {\nnamespace def {\n    do_something();\n    while (still_not_crashed()) {\n        do_even_more();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 959, "user_id": 3526980, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hZFEP.jpg?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/3526980/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 39084153, "answer_count": 1, "score": 0, "last_activity_date": 1471882173, "creation_date": 1471877639, "last_edit_date": 1471879481, "question_id": 39082708, "link": "https://stackoverflow.com/questions/39082708/renamespacing-c-header-with-perl-multiline-issues", "title": "Renamespacing c++ header with perl - multiline issues", "body": "<p>I am trying to enclose the namespace of a c++ header-only library in a custom namespace to avoid symbol name collisions with customer code.</p>\n\n<p>Here is the perl script i wrote. It should enclose the def namespace in the abc namespace.</p>\n\n<pre><code>#!/usr/bin/perl\n\nwhile (&lt;&gt;) { \n    s/namespace\\s+def\\s*\n    ( # group 1 - braced string with balanced number of lbraces and rbraces\n        \\{\n        ( # group 2 - String without braces or recursion to group 1\n            [^\\{\\}]* # some string that does not contain braces\n            | (?1) # recursion of group1\n        )*\n        \\}\n    )\n    /namespace abc {\\nnamespace def \\1\\n}/gcsx;\n    print;\n}\n</code></pre>\n\n<p>and here is the testfile i am using:</p>\n\n<pre><code>namespace def {}\nnamespace def { abc }\nnamespace def { { } }\nnamespace def { { abcd } }\nnamespace def {\n    abc\n}\nnamespace def { // some comment\n    do_something();\n}\nnamespace def {\n    do_something();\n    while (still_not_crashed()) {\n        do_even_more();\n    }\n}\n</code></pre>\n\n<p>however running the script on the file only yields</p>\n\n<pre><code>namespace abc {\nnamespace def {}\n}\nnamespace abc {\nnamespace def { abc }\n}\nnamespace abc {\nnamespace def { { } }\n}\nnamespace abc {\nnamespace def { { abcd } }\n}\nnamespace def {\n    abc\n}\nnamespace def { // some comment\n    do_something();\n}\nnamespace def {\n    do_something();\n    while (still_not_crashed()) {\n        do_even_more();\n    }\n}\n</code></pre>\n\n<p>The one line namespace work just fine but as soon as the pattern that should be matched contains a newline it stops working eventhough i added the <em>s</em>-modifier to my regex.</p>\n\n<p>What am i doing wrong?</p>\n"}, {"tags": ["arrays", "regex", "perl", "filter"], "answers": [{"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 0, "last_activity_date": 1471875194, "creation_date": 1471875194, "answer_id": 39081821, "question_id": 39081477, "link": "https://stackoverflow.com/questions/39081477/filter-group-of-pattern-inside-array-in-perl/39081821#39081821", "title": "Filter group of pattern inside array in perl", "body": "<p>You need to <code>map</code> each item in the <code>@fileContent</code> to the capture <code>$4</code> and only then <code>grep</code> to find only matching ones:</p>\n\n<pre><code>my @include = grep {!/^$/} map {/^\\s*\\.(inc)(l(ude)?)?\\s+'(\\S+)'/i &amp;&amp; $4} @fileContent;\n</code></pre>\n\n<p>By the way, the first three capture groups are redundant, so you may rewrite the regex with only capture group <code>$1</code>:</p>\n\n<pre><code>my @include = grep {!/^$/} map {/^\\s*\\.inc(?:l(?:ude)?)?\\s+'(\\S+)'/i &amp;&amp; $1} @fileContent;\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 3544092, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7dfcf6ed90b09ba50588b9ed9be4d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3544092", "link": "https://stackoverflow.com/users/3544092/user3544092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 39081821, "answer_count": 1, "score": 0, "last_activity_date": 1471875194, "creation_date": 1471874229, "question_id": 39081477, "link": "https://stackoverflow.com/questions/39081477/filter-group-of-pattern-inside-array-in-perl", "title": "Filter group of pattern inside array in perl", "body": "<p>How do I filter and collect a group of pattern inside array using regex ?</p>\n\n<p>search pattern is <code>.include 'pathToFile'</code> where <code>pathToFile</code> have to be stored into <code>@include</code> array.</p>\n\n<pre><code>my @include = grep {$4 if /^\\s*\\.(inc)(l(ude)?)?\\s+'(\\S+)'/i} @fileContent;\n</code></pre>\n\n<p>Unfortunately my code doesn't store only <code>$4</code> which is the include file path. How can I make it work?</p>\n"}, {"tags": ["json", "string", "perl", "encode"], "comments": [{"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1471879851, "post_id": 39079252, "comment_id": 65514732, "body": "@Zaid Your close vote is unwarranted: this one is not about usage per se but encoding stuff that isn&#39;t a reference."}, {"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1471943840, "post_id": 39079252, "comment_id": 65540907, "body": "@Zaid Much obliged."}], "answers": [{"tags": [], "owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "is_accepted": false, "score": 4, "last_activity_date": 1471868786, "last_edit_date": 1471868786, "creation_date": 1471868273, "answer_id": 39079355, "question_id": 39079252, "link": "https://stackoverflow.com/questions/39079252/how-do-i-use-encode-json-with-string-in-perl/39079355#39079355", "title": "How do I use encode_json with string in Perl?", "body": "<p>I assume you're using either <a href=\"http://search.cpan.org/~makamaka/JSON-2.90/lib/JSON.pm\" rel=\"nofollow\"><code>JSON</code></a> or <a href=\"http://search.cpan.org/~mlehmann/JSON-XS-3.02/XS.pm\" rel=\"nofollow\"><code>JSON::XS</code></a>.</p>\n\n<p>Both allow for non-reference data, but not via the procedural <code>encode_json</code> routine.</p>\n\n<p>You'll need to use the object-oriented approach:</p>\n\n<pre><code>use strict;   # obligatory\nuse warnings; # obligatory\n\nuse JSON::XS;\n\nmy $encoder = JSON::XS-&gt;new();\n\n$encoder-&gt;allow_nonref();\nprint $encoder-&gt;encode('Hello, world.');\n# =&gt; \"Hello, world.\"\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6243652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8fbd3a0406745ebd636e318a41762375?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepz", "link": "https://stackoverflow.com/users/6243652/sleepz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471936744, "creation_date": 1471867999, "question_id": 39079252, "link": "https://stackoverflow.com/questions/39079252/how-do-i-use-encode-json-with-string-in-perl", "title": "How do I use encode_json with string in Perl?", "body": "<p>Here is my code that I try to open the file to get data and change it to UTF-8, then read each line and store it in variable my $abstract_text and send it back in JSON structure.</p>\n\n<pre><code>my $fh;\nif (!open($fh, '&lt;:encoding(UTF-8)',$path))\n    {\n    returnApplicationError(\"Cannot read abstract file: $path ($!)\\nERRORCODE|111|\\n\");\n    }\nprintJsonHeader;\nmy @lines = &lt;$fh&gt;;\nmy $abstract_text = '';\nforeach my $line (@lines)\n    {\n    $abstract_text .= $line;\n    }\n\nmy $json = encode_json($abstract_text);\nclose $fh;\nprint $json;\n</code></pre>\n\n<p>By using that code, I get this error;</p>\n\n<p>hash- or arrayref expected (not a simple scalar, use allow_nonref to allow this)</p>\n\n<p>error message also point out that the problem is in this line;\nmy $json = encode_json($abstract_text);</p>\n\n<p>I want to send the data back as a string (which is in UTF-8). Please help.</p>\n"}, {"tags": ["perl", "perl-module", "xapian"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1471867023, "post_id": 39078802, "comment_id": 65505365, "body": "show your code that produces this output"}, {"owner": {"reputation": 3262, "user_id": 6302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06e6248936fafb1e0d11d0a2e60b8ec?s=128&d=identicon&r=PG", "display_name": "James Aylett", "link": "https://stackoverflow.com/users/6302/james-aylett"}, "edited": false, "score": 0, "creation_date": 1471955449, "post_id": 39078802, "comment_id": 65548977, "body": "<code>get_data()</code> is deliberately opaque to Xapian. Whatever you put in there, you get out; different languages make it easier to use different formats. JSON, YAML, TOML and XML are all feasible. <code>omindex</code> and <code>scriptindex</code> however use a <i>sui generis</i> format which you can read by splitting on line ending then splitting on &#39;=&#39; to make key/value pairs."}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": true, "score": 0, "last_activity_date": 1471868959, "last_edit_date": 1471868959, "creation_date": 1471867812, "answer_id": 39079190, "question_id": 39078802, "link": "https://stackoverflow.com/questions/39078802/get-specific-data-form-xapian-database-with-perl/39079190#39079190", "title": "Get specific data form Xapian database with Perl", "body": "<p>You've not posted the code to produce this, or details of your setup. See the <a href=\"http://cpansearch.perl.org/src/OLLY/Search-Xapian-1.2.23.0/examples/simplesearch.pl\" rel=\"nofollow\">simplesearch.pl</a> example, rather than print it out, assign what you want to a variable:</p>\n\n<pre><code># Display the results.\nprintf \"%i results found.\\n\", $mset-&gt;get_matches_estimated();\nprintf \"Results 1-%i:\\n\", $mset-&gt;size();\n\nforeach my $m ($mset-&gt;items()) {\n    printf \"%i: %i%% docid=%i [%s]\\n\", $m-&gt;get_rank() + 1, $m-&gt;get_percent(), $m-&gt;get_docid(), $m-&gt;get_document()-&gt;get_data();\n}\n</code></pre>\n"}], "owner": {"reputation": 2337, "user_id": 3595992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a8fc8a00391b1282338f66de57e3fea0?s=128&d=identicon&r=PG&f=1", "display_name": "JeanJouX", "link": "https://stackoverflow.com/users/3595992/jeanjoux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 39079190, "answer_count": 1, "score": 0, "last_activity_date": 1471872509, "creation_date": 1471866659, "last_edit_date": 1471872509, "question_id": 39078802, "link": "https://stackoverflow.com/questions/39078802/get-specific-data-form-xapian-database-with-perl", "title": "Get specific data form Xapian database with Perl", "body": "<p>I'm writing a perl script to retrieve search results from a Xapian database.</p>\n\n<p>I uses the <strong>Search::Xapian</strong> module and tried the basic <a href=\"http://search.cpan.org/~olly/Search-Xapian-1.2.23.0/Xapian.pm\" rel=\"nofollow\">Xapian Query Example</a>. This basic program allow to make a query and get a array of results sorted by relevancy. My problem is that the  <code>get_data()</code> method return the whole datas from the document (url, filname, abstract, author, ...) mixed together as a string. </p>\n\n<p>I searched in the <a href=\"http://search.cpan.org/~olly/Search-Xapian-1.2.23.0/\" rel=\"nofollow\">CPAN module</a> for a method to get each data one by one but I didn't find it.</p>\n\n<p><strong>Is it possible to get the filename, url, author, ... one by one to put them in a specific variable ?</strong></p>\n"}, {"tags": ["perl", "winapi", "windows-10"], "comments": [{"owner": {"reputation": 570609, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1471860406, "post_id": 39075072, "comment_id": 65500995, "body": "Do some websearch. This question has been asked a bazillion times."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1471858872, "post_id": 39075304, "comment_id": 65499976, "body": "This doesn&#39;t address the question at all (<i>&quot;Is there any other way ...&quot;</i>)."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1471865186, "last_edit_date": 1471865186, "creation_date": 1471856558, "answer_id": 39075304, "question_id": 39075072, "link": "https://stackoverflow.com/questions/39075072/how-to-getosversion-on-windows-10-using-perl/39075304#39075304", "title": "How to GetOsVersion on Windows 10 using perl", "body": "<p><a href=\"https://metacpan.org/pod/Win32\" rel=\"nofollow\">Win32</a> module uses <code>GetVersionExA</code> (see <a href=\"https://metacpan.org/source/JDB/Win32-0.52/Win32.xs\" rel=\"nofollow\">Win32.xs</a>) and as per msdn:</p>\n\n<blockquote>\n  <p>In Windows 8.1 and Windows 10, the GetVersion and GetVersionEx\n  functions have been deprecated. In Windows 10, the VerifyVersionInfo\n  function has also been deprecated. While you can still call the\n  deprecated functions, if your application does not specifically target\n  Windows 8.1 or Windows 10, you will get Windows 8 version (6.2.0.0).</p>\n</blockquote>\n\n<p>Source: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn481241(v=vs.85).aspx\" rel=\"nofollow\">msdn</a></p>\n\n<p>Also see: <a href=\"https://msdn.microsoft.com/en-in/library/windows/desktop/dn905474(v=vs.85).aspx\" rel=\"nofollow\">IsWindows10OrGreater function</a></p>\n\n<p>If you get to fix it, kindly open a pull request :)</p>\n"}, {"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 1, "last_activity_date": 1471860946, "creation_date": 1471860946, "answer_id": 39076897, "question_id": 39075072, "link": "https://stackoverflow.com/questions/39075072/how-to-getosversion-on-windows-10-using-perl/39076897#39076897", "title": "How to GetOsVersion on Windows 10 using perl", "body": "<p>There are a few other ways to get the raw data, which you could then parse to fit your application, e.g.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $ver = `ver`;\n\nprint \"output of ver command: $ver\\n\";\n\nmy $reg = `reg query \"HKLM\\\\Software\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\" /v \"ProductName\"`;\n\n# alternatively query for 'CurrentVersion' rather than 'ProductName' above \nprint \"output of registry query: $reg\\n\";\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 2028164, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a69ba04a10e0922a9c4c7a9d8e4b1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshman", "link": "https://stackoverflow.com/users/2028164/lakshman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1471865186, "creation_date": 1471855951, "last_edit_date": 1471858546, "question_id": 39075072, "link": "https://stackoverflow.com/questions/39075072/how-to-getosversion-on-windows-10-using-perl", "title": "How to GetOsVersion on Windows 10 using perl", "body": "<p>I've been using Win32::GetOSVersion() perl function to get the destination's OS version. However, this API call does have support only upto Windows Server 2012.</p>\n\n<p><a href=\"http://search.cpan.org/~jdb/Win32-0.52/Win32.pm\" rel=\"nofollow\">http://search.cpan.org/~jdb/Win32-0.52/Win32.pm</a></p>\n\n<pre><code>OS                      ID    MAJOR   MINOR\n----------              ---   -----   -----\nWin32s                   0      -       -\nWindows 95               1      4       0\nWindows 98               1      4      10\nWindows Me               1      4      90\n\nWindows NT 3.51          2      3      51\nWindows NT 4             2      4       0\n\nWindows 2000             2      5       0\nWindows XP               2      5       1\nWindows Server 2003      2      5       2\nWindows Server 2003 R2   2      5       2\nWindows Home Server      2      5       2\n\nWindows Vista            2      6       0\nWindows Server 2008      2      6       0\nWindows 7                2      6       1\nWindows Server 2008 R2   2      6       1\nWindows 8                2      6       2\nWindows Server 2012      2      6       2\n</code></pre>\n\n<p>Is there any other way/approach where I can get the OS version on Windows 10 too?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471861700, "post_id": 39074165, "comment_id": 65501832, "body": "The Vim Editor doesn&#39;t match your needs?"}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471870189, "post_id": 39074165, "comment_id": 65507578, "body": "@JohnDoe: the Vim Editor is my reference... :), but Perl Tk is our language due to other reasons i can&#39;t describe here..."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 3, "last_activity_date": 1471869773, "creation_date": 1471869773, "answer_id": 39079878, "question_id": 39074165, "link": "https://stackoverflow.com/questions/39074165/is-there-a-perl-tk-text-widget-that-supports-line-folding/39079878#39079878", "title": "Is there a Perl Tk Text widget that supports line folding?", "body": "<p>Eliding Text</p>\n\n<p>You can actually include text in the widget that is not displayed; this is known as \"elided\" text, and is made available using the \"elide\" configuration option for tags. You can use this to implement for example an outliner, a \"folding\" code editor, or even just to bury some extra meta-data intermixed with your text. When specifying positioning with elided text you have to be a bit more careful, and so commands that deal with positions have extra options to either include or ignore the elided text.</p>\n\n<p><a href=\"http://www.tkdocs.com/tutorial/text.html\" rel=\"nofollow\">Giving Thanks to the references</a></p>\n"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 39079878, "answer_count": 1, "score": 2, "last_activity_date": 1471869773, "creation_date": 1471852941, "question_id": 39074165, "link": "https://stackoverflow.com/questions/39074165/is-there-a-perl-tk-text-widget-that-supports-line-folding", "title": "Is there a Perl Tk Text widget that supports line folding?", "body": "<p>I am trying to build a Perl TK text widget that supports line folding (similar to Visual Studio folding capabilities).</p>\n\n<ol>\n<li>Is there an existing one already? (tried googling it, and searching CPAN, didn't find any)</li>\n<li>Is there a way to make few lines disappear in the <code>Tk::Text</code> widget? (so i can write the logic behind the folding routines...)</li>\n</ol>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 5, "creation_date": 1471852853, "post_id": 39074086, "comment_id": 65496107, "body": "If you are parsing JSON, why not <code>use JSON</code> and save yourself the hassle?"}, {"owner": {"reputation": 1012, "user_id": 5866942, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-tFRIV7rG-M4/AAAAAAAAAAI/AAAAAAAAAHw/kUupZIXcBpI/photo.jpg?sz=128", "display_name": "The Gr8 Adakron", "link": "https://stackoverflow.com/users/5866942/the-gr8-adakron"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1471855656, "post_id": 39074086, "comment_id": 65497806, "body": "I dont know why this people downvote the question. I dont knew a better than only I asked the question. Thnx for answering and showing me better way to do it."}], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 5866942, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-tFRIV7rG-M4/AAAAAAAAAAI/AAAAAAAAAHw/kUupZIXcBpI/photo.jpg?sz=128", "display_name": "The Gr8 Adakron", "link": "https://stackoverflow.com/users/5866942/the-gr8-adakron"}, "edited": false, "score": 0, "creation_date": 1471856119, "post_id": 39074225, "comment_id": 65498106, "body": "Buddy I want to use it like this my $json_str = q($text); it is not working. I am using your solution only"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1012, "user_id": 5866942, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-tFRIV7rG-M4/AAAAAAAAAAI/AAAAAAAAAHw/kUupZIXcBpI/photo.jpg?sz=128", "display_name": "The Gr8 Adakron", "link": "https://stackoverflow.com/users/5866942/the-gr8-adakron"}, "edited": false, "score": 0, "creation_date": 1471856630, "post_id": 39074225, "comment_id": 65498473, "body": "It won&#39;t. <code>q()</code> is effectively a single quote (which I  use because of the quotes in the string). So it&#39;s trying to parse literally <code>&#39;$text&#39;</code>. Just use <code>my $json = from_json($text);</code> if it&#39;s already in a variable."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1471853546, "last_edit_date": 1471853546, "creation_date": 1471853160, "answer_id": 39074225, "question_id": 39074086, "link": "https://stackoverflow.com/questions/39074086/perl-regular-expression-not-working-for-long-description/39074225#39074225", "title": "Perl Regular Expression not working for long_description", "body": "<p>I'll suggest taking a step back. It's nasty to hack JSON with regex, because of the contextual nature of JSON. Regex is not contextual, so is always a hacky solution.</p>\n\n<p>Fortunately, perl has the <code>JSON</code> module that makes it simple:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse JSON;\n\nmy $json_str = q({\"product_id\": \"5I20SL43MWDD\", \"title\": \"Woodland Imports 2 Piece Ceramic Vase Set\", \"primary_shelf\": [{\"all_paths_str\": \"[[\\\"Home Page\\\",\\\"Home\\\",\\\"Decor\\\",\\\"Vases\\\"]]\", \"locale\": \"en_US\", \"value\": \"Vases\", \"path_id\": \"[\\\"0\\\",\\\"4044\\\",\\\"133012\\\",\\\"1043827\\\"]\", \"all_paths_id\": \"[[\\\"0\\\",\\\"4044\\\",\\\"133012\\\",\\\"1043827\\\"]]\", \"tag_source\": \"rule\", \"id\": \"1043827\", \"path_str\": \"[\\\"Home Page\\\",\\\"Home\\\",\\\"Decor\\\",\\\"Vases\\\"]\"}], \"alternate_shelves\": \"1043827\", \"last_updated_at\": 1471417348, \"primary_category_path\": \"0:4044:133012:1043827\", \"short_description\": \"Includes two vase. Gray and cream color palette. No assembly required. 5 in. L x 5 in. W x 12 in. H. Weight: 6 lbs.. Check out this Vase that will beautify your interiors. Can be kept assorted or separately depending upon your needs. For added beauty, you can also add flowers to this ceramic vase to flourish your interiors with fragrance. This vase will steal the spotlight and make you win appreciations from many. Besides, this vase can also be gifted to your beloved ones.\", \"item_id\": \"40966792\", \"attributes\": {\"package_quantity\": [\"1\"], \"assembled_product_width_raw_data\": [\"6.0\"], \"assembled_product_length_raw_data\": [\"6.0\"], \"is_always_show\": [\"N\"], \"assembled_product_height_raw_data\": [\"15.0\", \"15.0\"], \"color\": [\"Brown\", \"Brown\"], \"small_parts_warning_code\": [\"0\"], \"manufacturer_part_number\": [\"78681\"], \"primary_shelf_id\": [\"1043827\"], \"shape\": [\"Bud\"], \"manufacturer_suggested_retail_price\": [\"75.84\"], \"country_of_origin_components\": [\"Imported\"], \"assembled_product_length\": [\"6.0 IN\", \"6.0\"], \"category\": [\"Vases\", \"Vases\"], \"has_warranty\": [\"N\"], \"character_primary_category_path\": [\"Home/Decor/Vases\"], \"item_master_created_date\": [\"1414926519000\"], \"offer_lifecycle_status\": [\"ACTIVE\"], \"new\": [\"N\"], \"size\": [\"12\\\" H x 5\\\" W x 5\\\" D\", \"12\\\" H x 5\\\" W x 5\\\" D\"], \"type\": [\"Other Vases\"], \"brand\": [\"Woodland Imports\", \"Woodland Imports\"], \"all_shelves\": [\"Vases\"], \"is_preorder\": [\"N\"], \"primary_shelf\": [\"Vases\"], \"material\": [\"Ceramic\", \"Ceramic\"], \"assembled_product_width\": [\"6.0 IN\", \"6.0\"], \"california_residents_prop_65_warning_required\": [\"N\"], \"lifestage\": [\"Adult\", \"Adult\"], \"show_button_in\": [\"3\"], \"warranty_information\": [\"Warranty not available for this item\"], \"char_primary_category_path\": [\"Home/Decor/Vases\"], \"manufacturer\": [\"Woodland Imports\"], \"actual_color\": [\"Brown\", \"Brown\"], \"data_source\": [\"Catalog\"], \"product_type\": [\"Vases\"], \"size_raw_data\": [\"12\"], \"wupc\": [\"0083730378681\"], \"display_status\": [\"PUBLISHED\"], \"assembled_product_weight\": [\"7 Pounds\"], \"country_of_origin_assembly\": [\"Imported\"], \"assembled_product_height\": [\"15.0 IN\", \"15.0\"], \"warranty_length\": [\"Warranty not available for this item\"], \"model\": [\"78681\"], \"price_per_unit_quantity\": [\"1\"]}, \"long_description\": \"WLI15311&lt;br /&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;br /&gt;&lt;li&gt;Grey and cream color palette&lt;/li&gt;&lt;li&gt;Made of quality ceramic&lt;/li&gt;&lt;li&gt;Product Type: Floor vase&lt;/li&gt;&lt;li&gt;Shape: Bud&lt;/li&gt;&lt;li&gt;Color: Grey and cream&lt;/li&gt;&lt;li&gt;Primary Material: Ceramic&lt;/li&gt; &lt;br /&gt;&lt;strong&gt;Dimensions&lt;/strong&gt;&lt;br /&gt;Size 15'' H x 6'' W x 6'' D&lt;br /&gt;&lt;li&gt;Overall Height - Top to Bottom: 15''&lt;/li&gt;&lt;li&gt;Overall Width - Side to Side: 6''&lt;/li&gt;&lt;li&gt;Overall Depth - Front to Back: 6''&lt;/li&gt;&lt;li&gt;Overall Product Weight: 5.93 lbs&lt;/li&gt;&lt;br /&gt;Size 12'' H x 5'' W x 5'' D&lt;br /&gt;&lt;li&gt;Overall Height - Top to Bottom: 12''&lt;/li&gt;&lt;li&gt;Overall Width - Side to Side: 5''&lt;/li&gt;&lt;li&gt;Overall Depth - Front to Back: 5''&lt;/li&gt;&lt;li&gt;Overall Product Weight: 3.24 lbs&lt;/li&gt;\"});\nmy $json = from_json($json_str);\n\nprint Dumper $json;\n\nprint \"LONG:\", $json -&gt;{long_description},\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1012, "user_id": 5866942, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-tFRIV7rG-M4/AAAAAAAAAAI/AAAAAAAAAHw/kUupZIXcBpI/photo.jpg?sz=128", "display_name": "The Gr8 Adakron", "link": "https://stackoverflow.com/users/5866942/the-gr8-adakron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1471856695, "creation_date": 1471852666, "last_edit_date": 1471856695, "question_id": 39074086, "link": "https://stackoverflow.com/questions/39074086/perl-regular-expression-not-working-for-long-description", "title": "Perl Regular Expression not working for long_description", "body": "<pre><code>$text = &lt;&lt;\"EOF\";\n{\"product_id\": \"5I20SL43MWDD\", \"title\": \"Woodland Imports 2 Piece Ceramic Vase Set\", \"primary_shelf\": [{\"all_paths_str\": \"[[\\\"Home Page\\\",\\\"Home\\\",\\\"Decor\\\",\\\"Vases\\\"]]\", \"locale\": \"en_US\", \"value\": \"Vases\", \"path_id\": \"[\\\"0\\\",\\\"4044\\\",\\\"133012\\\",\\\"1043827\\\"]\", \"all_paths_id\": \"[[\\\"0\\\",\\\"4044\\\",\\\"133012\\\",\\\"1043827\\\"]]\", \"tag_source\": \"rule\", \"id\": \"1043827\", \"path_str\": \"[\\\"Home Page\\\",\\\"Home\\\",\\\"Decor\\\",\\\"Vases\\\"]\"}], \"alternate_shelves\": \"1043827\", \"last_updated_at\": 1471417348, \"primary_category_path\": \"0:4044:133012:1043827\", \"short_description\": \"Includes two vase. Gray and cream color palette. No assembly required. 5 in. L x 5 in. W x 12 in. H. Weight: 6 lbs.. Check out this Vase that will beautify your interiors. Can be kept assorted or separately depending upon your needs. For added beauty, you can also add flowers to this ceramic vase to flourish your interiors with fragrance. This vase will steal the spotlight and make you win appreciations from many. Besides, this vase can also be gifted to your beloved ones.\", \"item_id\": \"40966792\", \"attributes\": {\"package_quantity\": [\"1\"], \"assembled_product_width_raw_data\": [\"6.0\"], \"assembled_product_length_raw_data\": [\"6.0\"], \"is_always_show\": [\"N\"], \"assembled_product_height_raw_data\": [\"15.0\", \"15.0\"], \"color\": [\"Brown\", \"Brown\"], \"small_parts_warning_code\": [\"0\"], \"manufacturer_part_number\": [\"78681\"], \"primary_shelf_id\": [\"1043827\"], \"shape\": [\"Bud\"], \"manufacturer_suggested_retail_price\": [\"75.84\"], \"country_of_origin_components\": [\"Imported\"], \"assembled_product_length\": [\"6.0 IN\", \"6.0\"], \"category\": [\"Vases\", \"Vases\"], \"has_warranty\": [\"N\"], \"character_primary_category_path\": [\"Home/Decor/Vases\"], \"item_master_created_date\": [\"1414926519000\"], \"offer_lifecycle_status\": [\"ACTIVE\"], \"new\": [\"N\"], \"size\": [\"12\\\" H x 5\\\" W x 5\\\" D\", \"12\\\" H x 5\\\" W x 5\\\" D\"], \"type\": [\"Other Vases\"], \"brand\": [\"Woodland Imports\", \"Woodland Imports\"], \"all_shelves\": [\"Vases\"], \"is_preorder\": [\"N\"], \"primary_shelf\": [\"Vases\"], \"material\": [\"Ceramic\", \"Ceramic\"], \"assembled_product_width\": [\"6.0 IN\", \"6.0\"], \"california_residents_prop_65_warning_required\": [\"N\"], \"lifestage\": [\"Adult\", \"Adult\"], \"show_button_in\": [\"3\"], \"warranty_information\": [\"Warranty not available for this item\"], \"char_primary_category_path\": [\"Home/Decor/Vases\"], \"manufacturer\": [\"Woodland Imports\"], \"actual_color\": [\"Brown\", \"Brown\"], \"data_source\": [\"Catalog\"], \"product_type\": [\"Vases\"], \"size_raw_data\": [\"12\"], \"wupc\": [\"0083730378681\"], \"display_status\": [\"PUBLISHED\"], \"assembled_product_weight\": [\"7 Pounds\"], \"country_of_origin_assembly\": [\"Imported\"], \"assembled_product_height\": [\"15.0 IN\", \"15.0\"], \"warranty_length\": [\"Warranty not available for this item\"], \"model\": [\"78681\"], \"price_per_unit_quantity\": [\"1\"]}, \"long_description\": \"WLI15311&lt;br /&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;br /&gt;&lt;li&gt;Grey and cream color palette&lt;/li&gt;&lt;li&gt;Made of quality ceramic&lt;/li&gt;&lt;li&gt;Product Type: Floor vase&lt;/li&gt;&lt;li&gt;Shape: Bud&lt;/li&gt;&lt;li&gt;Color: Grey and cream&lt;/li&gt;&lt;li&gt;Primary Material: Ceramic&lt;/li&gt; &lt;br /&gt;&lt;strong&gt;Dimensions&lt;/strong&gt;&lt;br /&gt;Size 15'' H x 6'' W x 6'' D&lt;br /&gt;&lt;li&gt;Overall Height - Top to Bottom: 15''&lt;/li&gt;&lt;li&gt;Overall Width - Side to Side: 6''&lt;/li&gt;&lt;li&gt;Overall Depth - Front to Back: 6''&lt;/li&gt;&lt;li&gt;Overall Product Weight: 5.93 lbs&lt;/li&gt;&lt;br /&gt;Size 12'' H x 5'' W x 5'' D&lt;br /&gt;&lt;li&gt;Overall Height - Top to Bottom: 12''&lt;/li&gt;&lt;li&gt;Overall Width - Side to Side: 5''&lt;/li&gt;&lt;li&gt;Overall Depth - Front to Back: 5''&lt;/li&gt;&lt;li&gt;Overall Product Weight: 3.24 lbs&lt;/li&gt;\"}\nEOF\n</code></pre>\n\n<p>This is my text, which is in json format. I want extract specific fields such as <code>short_description</code> and <code>long_description</code></p>\n\n<p>I am using this regex:</p>\n\n<pre><code>my ($title)=$text=~/\"title\"\\s*:\\s*\"(.*?)\"\\s*,\\s*\"/is;**\nmy ($long_des)=$text=~/\"long_description\"\\s*:\\s*\"(.*?)\"\\s*,\\s*\"/is;\n</code></pre>\n\n<p>Everything is coming correctly, but I don't know why the <code>long_description</code> regex is not working, I get an empty string. What do I need to do to remedy this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 2, "creation_date": 1471849730, "post_id": 39073081, "comment_id": 65494450, "body": "Please try something on your own perl coding and it will helps better for you."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1471852667, "post_id": 39073081, "comment_id": 65496000, "body": "This smells like an XY problem. What are you trying to accomplish? I&#39;m wondering if a hash is more appropriate?"}], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471860113, "post_id": 39073814, "comment_id": 65500793, "body": "Can you please add an explanation for the last line?"}, {"owner": {"reputation": 406, "user_id": 6726492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eAMm5FnaLrI/AAAAAAAAAAI/AAAAAAAAAC0/WAfxmxfxUS8/photo.jpg?sz=128", "display_name": "Vida Wang", "link": "https://stackoverflow.com/users/6726492/vida-wang"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 1, "creation_date": 1471863977, "post_id": 39073814, "comment_id": 65503291, "body": "@JohnDoe Sure.Map function is useful.Just like:for($i=0;$i&lt;=$#arrar1;$i++){push(@array3,$array1[$_].&quot;|&zwnj;&#8203;&quot;.$array2[$_])}"}], "tags": [], "owner": {"reputation": 406, "user_id": 6726492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eAMm5FnaLrI/AAAAAAAAAAI/AAAAAAAAAC0/WAfxmxfxUS8/photo.jpg?sz=128", "display_name": "Vida Wang", "link": "https://stackoverflow.com/users/6726492/vida-wang"}, "is_accepted": false, "score": 2, "last_activity_date": 1471893206, "last_edit_date": 1471893206, "creation_date": 1471851663, "answer_id": 39073814, "question_id": 39073081, "link": "https://stackoverflow.com/questions/39073081/perl-join-two-array-elements-together/39073814#39073814", "title": "Perl - Join two array elements together", "body": "<p>Maybe you can use these codes,the loop is easy.</p>\n\n<pre><code>my @array1 = qw/test1 test2 test3 test4 test5/;\nmy @array2 = qw/answer1 answer2 answer3 answer4 answer5/;\nmy @array3 = map { $array1[$_].\"|\".$array2[$_] } 0..$#array1;\n</code></pre>\n\n<p>This assumes both arrays have the same size.</p>\n"}], "owner": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1471893206, "creation_date": 1471849212, "question_id": 39073081, "link": "https://stackoverflow.com/questions/39073081/perl-join-two-array-elements-together", "title": "Perl - Join two array elements together", "body": "<p>I'm looking for the best way to concatenate two array elements together:</p>\n\n<pre><code>@array1 = (test1, test2, test3, test4, test5);\n\n@array2 = (answer1, answer2, answer3, answer4, answer5);\n</code></pre>\n\n<p>I want to concatenate array1 &amp; array2 together to form the below pipe delimited array element. What is the most efficient way to do this?</p>\n\n<pre><code>@array3 = (test1|answer1, test2|answer2, test3|answer3, test4|answer4, test5|answer5);\n</code></pre>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 1, "creation_date": 1471851150, "post_id": 39072579, "comment_id": 65495212, "body": "<code>%E4%B8%8B</code> is <b>URL-encoded</b> because you asked for a URL. The characters making up the URL are already plain 7-bit ASCII, so you aren&#39;t getting anything when you decode with UTF-8. Since you wanted a URL, you got a URL - if you want a proper path, you&#39;ll have to URL-decode it first, then apply UTF-8 decoding."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1471851435, "post_id": 39072579, "comment_id": 65495353, "body": "@mneonneo OK , so how do I  URL-decode ? because if you do <code>gsettings list-recursively org.gnome.desktop.background</code> you&#39;ll see there is only one key, <code>picture-uri</code>, there is no option to decode it"}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1471852431, "post_id": 39072579, "comment_id": 65495850, "body": "So far I see a lot of hints that this is URL-encoded. OK , I get that. But what is the way to decode that URL ? Simply telling me  &quot;go fish&quot; without showing how doesn&#39;t seem like a proper answer"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1471879716, "post_id": 39072579, "comment_id": 65514647, "body": "I&#39;m not a Perl expert, but you could use something like the URL package (<a href=\"http://search.cpan.org/~rse/lcwa-1.0.0/lib/lwp/lib/URI/URL.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~rse/lcwa-1.0.0/lib/lwp/lib/URI/URL.pm</a>) to parse the URL and extract the unescaped path component."}], "answers": [{"comments": [{"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "edited": false, "score": 0, "creation_date": 1471850461, "post_id": 39073240, "comment_id": 65494852, "body": "Yes, that is correct string. I was trying to print out the output of <code>gsettings</code>. Turns out that gsettings outputs non-decoded strings for some odd reason. See my post"}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "edited": false, "score": 0, "creation_date": 1471850593, "post_id": 39073240, "comment_id": 65494918, "body": "<code>picture-filename</code> won&#39;t work, gsettings schema only has <code>picture-uri</code> key. That&#39;s not up to me"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "edited": false, "score": 1, "creation_date": 1471850625, "post_id": 39073240, "comment_id": 65494940, "body": "@Serg: You asked for a URI so it had no choice but to URL-encode the UTF-8. Anything else wouldn&#39;t be a valid URI."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1471850542, "last_edit_date": 1471850542, "creation_date": 1471849701, "answer_id": 39073240, "question_id": 39072579, "link": "https://stackoverflow.com/questions/39072579/getting-utf-string-from-perls-subprocess/39073240#39073240", "title": "Getting UTF string from perl&#39;s subprocess", "body": "<p>That looks correct to me. The characters have been UTF-8 encoded and then URL encoded, so the URL should identify the file correctly. You shouldn't expect to be able to read it</p>\n\n<p>The string <code>%E4%B8%8B%E8%BD%BD</code> corresponds to</p>\n\n<pre><code>- `E4 B8 8B`, which is the character U+4E0B or \u4e0b\n\n- `E8 BD BD`, which is the character U+8F7D or \u8f7d\n</code></pre>\n\n<p>\u4e0b\u8f7d is \"download\". Is that right?</p>\n\n<p>What do you actually want to do with the string? You may get something readable if you use <code>picture-filename</code> instead of <code>picture-uri</code></p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471851836, "post_id": 39073411, "comment_id": 65495550, "body": "As others have already explained, the issue isn&#39;t that gsettings is broken like you seem to be suggesting, it&#39;s that you asked it to give you a URI, which means you get a URI-encoded string."}, {"owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471852291, "post_id": 39073411, "comment_id": 65495781, "body": "I wasn&#39;t suggesting that <code>gsettings</code> is broken.  I merely said it returns what appears to be non-decoded string. OK, how can i decode URI ?  can you point me to a tutorial or another SO post ?"}], "tags": [], "owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1471850288, "creation_date": 1471850288, "answer_id": 39073411, "question_id": 39072579, "link": "https://stackoverflow.com/questions/39072579/getting-utf-string-from-perls-subprocess/39073411#39073411", "title": "Getting UTF string from perl&#39;s subprocess", "body": "<p>So apparently the issue was with <code>gsettings</code> itself. Even on command-line, it returns the same string with chinese characters not decoded.</p>\n\n<pre><code>$ gsettings get org.gnome.desktop.background picture-uri                                                                 \n'file:///home/xieerqi/%E4%B8%8B%E8%BD%BD/ad32d5d0615e9572-121171d86d0c8618-e11082638606a82c303fee0b29697811.jpg'\n</code></pre>\n\n<p>Even if forcing environment, it returns the same string</p>\n\n<pre><code>$ LC_ALL=C gsettings get org.gnome.desktop.background picture-uri                                                        \n'file:///home/xieerqi/%E4%B8%8B%E8%BD%BD/ad32d5d0615e9572-121171d86d0c8618-e11082638606a82c303fee0b29697811.jpg'\n</code></pre>\n\n<p>However, it seems that the proper way with subprocess output that goes to a scalar , is to use <code>decode_utf8()</code> method. Basically,here's what I tried, and successfully got output</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl \n\nuse strict;\nuse warnings;\nuse utf8;\nuse Encode;\nmy $stuff=qx/ls ~ /;\nmy $utf_string = decode_utf8( $stuff );\nprint \"$utf_string\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1471893398, "last_edit_date": 1471893398, "creation_date": 1471892139, "answer_id": 39086818, "question_id": 39072579, "link": "https://stackoverflow.com/questions/39072579/getting-utf-string-from-perls-subprocess/39086818#39086818", "title": "Getting UTF string from perl&#39;s subprocess", "body": "<p>Sounds like you want to extract the path from the URL.</p>\n\n<pre><code>use open ':std', ':locale';\nuse feature qw( say );\n\nuse Encode      qw( decode_utf8 );\nuse URI         qw( );\nuse URI::Escape qw( uri_unescape );\n\nmy $url = URI-&gt;new('file:///home/xieerqi/%E4%B8%8B%E8%BD%BD/testimage.jpg');\n\n$url-&gt;scheme eq 'file'\n   or die(\"Invalid input\\n\");\n\nmy $path = decode_utf8( uri_unescape( $url-&gt;path ) );\n\nsay $path;\n</code></pre>\n\n<p>As a one-liner:</p>\n\n<pre><code>perl -CS -MEncode=decode_utf8 -MURI -MURI::Escape=uri_unescape \\\n   -e'CORE::say( decode_utf8( uri_unescape( URI-&gt;new($ARGV[0])-&gt;path ) ) )' \\\n      file:///home/xieerqi/%E4%B8%8B%E8%BD%BD/testimage.jpg\n</code></pre>\n\n<p>Since the previous snippet assumes a UTF-8 terminal, we might as well avoid the decoding and the encoding that follows it practically immediately:</p>\n\n<pre><code>perl -MURI -MURI::Escape=uri_unescape \\\n   -e'CORE::say( uri_unescape( URI-&gt;new($ARGV[0])-&gt;path ) )' \\\n      file:///home/xieerqi/%E4%B8%8B%E8%BD%BD/testimage.jpg\n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 3701431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/U1Jy6.jpg?s=128&g=1", "display_name": "Sergiy Kolodyazhnyy", "link": "https://stackoverflow.com/users/3701431/sergiy-kolodyazhnyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 39086818, "answer_count": 3, "score": 3, "last_activity_date": 1471893398, "creation_date": 1471847240, "last_edit_date": 1471848678, "question_id": 39072579, "link": "https://stackoverflow.com/questions/39072579/getting-utf-string-from-perls-subprocess", "title": "Getting UTF string from perl&#39;s subprocess", "body": "<p>I am working on a simple script that gets and sets background in Ubuntu Linux ( version 16.04 , but that's irrelevant in this case ). The problem is that my folder names are UTF-8 encoded ( Chinese, specifically). Thus, getting path to current wallpaper fails , like so:</p>\n\n<pre><code>my $user_background=qx/gsettings get org.gnome.desktop.background picture-uri/;\n</code></pre>\n\n<p>Output of <code>print $user_background</code>:</p>\n\n<pre><code>file:///home/xieerqi/%E4%B8%8B%E8%BD%BD/testimage.jpg\n</code></pre>\n\n<p>Thus, the question is: <strong>how do I get properly encoded/decoded string from a shell command in perl</strong></p>\n\n<p>I did try this:</p>\n\n<pre><code>my $unicode_String=Encode::decode('utf-8', $user_background );\n</code></pre>\n\n<p>which didn't work.</p>\n\n<p>Adding <code>binmode(STDOUT,\":utf8\");</code> also didn't help</p>\n\n<p>Adding <code>use utf8;</code> didn't work</p>\n\n<p>Strangely, using that same string to set background does work. </p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1471840529, "post_id": 39071473, "comment_id": 65491106, "body": "Sorry your question is not clear at all. Please explain in more detail, showing the result you want to achieve."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1471841259, "post_id": 39071473, "comment_id": 65491308, "body": "@JimGarrison Post edited."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1471841839, "creation_date": 1471841839, "answer_id": 39071659, "question_id": 39071473, "link": "https://stackoverflow.com/questions/39071473/handle-range-operator-with-positive-and-negative-range/39071659#39071659", "title": "Handle range operator with positive and negative range?", "body": "<p>You can't do that directly. <code>2..-5</code> is an empty list because <code>2</code> is greater than <code>-5</code>.</p>\n\n<p>You'd have to use an array:</p>\n\n<pre><code>my $s = \"a-b-c-d-e-f-g-f-e-c-a-v-a-t-a-v\"; \nmy @ar = split /-/, $s;\nprint join(\"-\", @ar[2 .. $#ar-4]), \"\\n\";\n</code></pre>\n\n<p><code>$#ar</code> is the last index in <code>@ar</code>, which makes the range computation work.</p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1471849909, "post_id": 39072035, "comment_id": 65494549, "body": "I like your last method but I don&#39;t know the last index."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1471908901, "post_id": 39072035, "comment_id": 65528261, "body": "@mkHun: you don&#39;t have to know the last index, you just have to know how big it might ever be."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1471920900, "post_id": 39072035, "comment_id": 65530781, "body": "why did you use <code>defined</code> in two times.? Shall you explain it."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1471998201, "post_id": 39072035, "comment_id": 65572366, "body": "@mkHun added an explanation"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1472739536, "last_edit_date": 1472739536, "creation_date": 1471844426, "answer_id": 39072035, "question_id": 39071473, "link": "https://stackoverflow.com/questions/39071473/handle-range-operator-with-positive-and-negative-range/39072035#39072035", "title": "Handle range operator with positive and negative range?", "body": "<p>The easiest way is to put it in an array and then slice it:</p>\n\n<pre><code>my $s = 'a-b-c-d-e-f-g-f-e-c-a-v-a-t-a-v'; \nmy @arr1 = split /-/, $s;\nmy @arr2 = @arr1[2..@arr1-5];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @arr = do { my @arr = split /-/, $s; @arr[2..@arr-5] };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @arr = map @$_[2..$#$_-5], [ split /-/, $s ];\n</code></pre>\n\n<p>To do it all at once without an extra variable, you would need to pick an arbitrary size bigger than the array would be and do two slices:</p>\n\n<pre><code>my @arr = grep defined, (grep defined, (split /-/, $s)[2..999])[-999..-5];\n</code></pre>\n\n<p>(which is much less efficient than just using a separate array).</p>\n\n<p>Explanation: assuming $s is <code>'a-b-c-d-e-f-g-f-e-c-a-v-a-t-a-v'</code>:</p>\n\n<p>The first slice (2..999) will produce a list of <code>'c', 'd', 'e', ..., 't', 'a', 'v'</code> followed by 984 <code>undef</code> values, since the slice asks for that many elements that don't exist.  The inner <code>grep defined</code> removes those <code>undef</code> values, leaving the 14 element <code>c</code> through <code>v</code> list.</p>\n\n<p>The second slice (-999..-5) produces a list beginning with 985 <code>undef</code> elements (since indexes -999 through -15 don't exist) followed by <code>'c', 'd', 'e', ..., 'c', 'a', 'v'</code>.  The outer <code>grep defined</code> removes those <code>undef</code> values, leaving the desired 10 element list.</p>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 39072035, "answer_count": 2, "score": 1, "last_activity_date": 1472739536, "creation_date": 1471840402, "last_edit_date": 1471841236, "question_id": 39071473, "link": "https://stackoverflow.com/questions/39071473/handle-range-operator-with-positive-and-negative-range", "title": "Handle range operator with positive and negative range?", "body": "<p>I want to store the second index to fifth element from last index from splitting using range operator.</p>\n\n<pre><code>my $s = \"a-b-c-d-e-f-g-f-e-c-a-v-a-t-a-v\"; \nmy @ar = (split \"-\",$s)[2..-5]; \nprint @ar;   \n</code></pre>\n\n<p>Expected output is <code>c-d-e-f-g-f-e-c-a-v</code></p>\n\n<p>As like below I want to store</p>\n\n<pre><code>a-b-c-d-e-f-g-f-e-c-a-v-a-t-a-v\n    |                 |          \n    2                 |\n                      -5\n     __________________\n  How to store these element        \n</code></pre>\n"}, {"tags": ["perl", "parallel-processing", "fork", "ipc", "child-process"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471848232, "post_id": 39071281, "comment_id": 65493698, "body": "You shouldn&#39;t spin in an idle loop like that. Your parent process will use up all the CPU time it can get, endlessly testing the value of <code>$number_running</code>."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471870058, "post_id": 39071281, "comment_id": 65507484, "body": "How can I wait until <code>$number_running</code> is decremented to zero by the child processes?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471896029, "post_id": 39071281, "comment_id": 65523272, "body": "@CJ7  Child processes cannot affect <code>$number_running</code> used in the parent -- child and parent processes cannot write to each other&#39;s variables. The parent has to decrement this variable for itself.  Please see explanations added to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1471870455, "post_id": 39071940, "comment_id": 65507798, "body": "<code>run_on_finish</code> is executed every time a child process finishes. <code>$number_running</code>is updated by the child processes. I have tested this myself. I don&#39;t want to use <code>wait_for_children</code>.  I want to know how to wait for <code>$number_running</code> to be decremented to zero by the child processes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1471889269, "post_id": 39071940, "comment_id": 65519885, "body": "@CJ7 1. The child has nothing to do with the counter.  Child code is what we type after <code>start</code>.  2. You <i>want to</i> <code>wait</code> (or <code>waitpid</code>) for children, that is the first rule of forking. 3. The program is informed of child&#39;s exit via signals, which it must catch (and handle) in order to actually know that the child exited. The other way would be for a child to <code>pipe</code> back (or send a <code>SIGUSR</code> signal) to say that it is extiing, but we type child code so that is not the case. 4.  I finally got to look at the source code, this <code>wait</code>-ing is indeed done in <code>wait_all_children</code>. I&#39;ll update my post."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1471894087, "post_id": 39071940, "comment_id": 65522297, "body": "@CJ7  The <code>while</code> is clearly infinite, which can only be because <code>$number_running</code> doesn&#39;t get updated, even though the child processes do exit very shortly after they are created.  This can only be because the callback doesn&#39;t run.  When I comment out <code>wait_all_children</code> I see the confirmation of it -- the <code>Cleared PID</code> lines start being printed only after all processes have been forked."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1472016108, "post_id": 39071940, "comment_id": 65576707, "body": "OK, I can see in the source that <code>finish</code> is not calling <code>on_finish</code>, but I don&#39;t understand why that can&#39;t happen.  Why can&#39;t it do that?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1472018316, "post_id": 39071940, "comment_id": 65577571, "body": "@CJ7  I just tried it -- set the limit to 10 but ran only 5 processes (and removed <code>wait_all_children</code>).  It never printed <code>Cleared ...</code>, the callback never executed.  Please watch though, this can result in zombies. Some systems take care of that, but it cannot be expected in general."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1472018463, "post_id": 39071940, "comment_id": 65577631, "body": "@CJ7 If I may ask, why do you not like <code>wait_all_children</code>?  Its code is standard and clear, this is more or less what I do by hand in my signal handlers."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1472085320, "post_id": 39071940, "comment_id": 65615181, "body": "I just want to see that the callback can occur at the end of a child process because I may want to use for it for other reasons.  I don&#39;t see why a callback can&#39;t be called at the end of a child process."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1478753306, "post_id": 39071940, "comment_id": 68281523, "body": "Can <code>$pm-&gt;reap_finished_children</code> be used in this situation?  Would it achieve my aim?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1482910096, "post_id": 39071940, "comment_id": 69916155, "body": "@CJ7 I just got around to complete this -- the post is entirely rewritten.  There is a direct way to track each child, just as you expected, and it is by the method you mentioned.  There is also a direct way to wait for a batch to finish.  Let me know whether it needs edits.  (I will tweak and add anyway, it&#39;s just too much to get right at once, for me.)  I suggest that we clean up many of the comments, as they do not directly relate to the post now.  Let me know if you are OK with that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1483421209, "post_id": 39071940, "comment_id": 70079821, "body": "@CJ7  I hope that this provides both things that you needed, as I understood them.  Please let me know if that isn&#39;t the case, or if more code/source commentary would be useful."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1589188749, "last_edit_date": 1589188749, "creation_date": 1471843886, "answer_id": 39071940, "question_id": 39071281, "link": "https://stackoverflow.com/questions/39071281/how-to-wait-for-child-process-to-set-variable-in-parent-process/39071940#39071940", "title": "How to wait for child process to set variable in parent process?", "body": "<p><strong>Short</strong> &nbsp; The callback <code>run_on_finish</code> normally doesn't get triggered for every child's exit, so <code>$number_running</code> doesn't get reduced and thus it can't control the loop.  Ways to fix this:</p>\n\n<ul>\n<li><p>use <code>reap_finished_children</code> in order to communicate as individual children exit, so that<code>run_on_finish</code> indeed gets to run as each child exits</p></li>\n<li><p>use <code>wait_for_available_procs</code> to wait for the whole batch to finish before starting a new one</p></li>\n</ul>\n\n<p>As for the title, a child process cannot set anything in the parent (nor could parent in the child). They must communicate to accord actions, in a way outlined above for this porpose in this module.</p>\n\n<hr>\n\n<p>The callback <code>run_on_start</code> runs with every new process and the counter is incremented. But the callback <code>run_on_finish</code> is never triggered so the counter is never decremented. Thus once it reaches <code>5</code> the code sits in the <code>while</code> loop. Note that a parent and children are separate processes which thus don't know about each other's variables and cannot change them.</p>\n\n<p>The callback <code>run_on_finish</code> is commonly triggered by having <code>wait_all_children</code> after all processes were forked. Its job is also done\nwhen maximum number of processes run and one exits.  This is done in <code>start</code> by a call to <code>wait_one_child</code> (which calls <code>on_finish</code>, see below). </p>\n\n<p>Or, this can be done at will by calling <a href=\"https://metacpan.org/pod/Parallel::ForkManager#reap_finished_children\" rel=\"nofollow noreferrer\">reap_finished_children</a> method</p>\n\n<blockquote>\n  <p>This is a non-blocking call to reap children and execute callbacks independent of calls to<code>start</code> or <code>wait_all_children</code>. Use this in scenarios where <code>start</code> is called infrequently but you would like the callbacks executed quickly.</p>\n</blockquote>\n\n<p>This resolves the main concern of <strong>how to communicate as individual children exit</strong> (as clarified in comments), and not by <code>wait_all_children</code>.</p>\n\n<p>Here is an example of how to use it so that the callback runs right as a child exits. A good deal of the code is merely for diagnostics (prints).</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse Parallel::ForkManager;    \n$| = 1;\n\nmy $total_to_process = 3;  # only a few for this test\nmy $number_running   = 0;    \nmy @ds;\n\nmy $pm = Parallel::ForkManager-&gt;new(30);\n\n$pm-&gt;run_on_start( sub {\n    ++$number_running;\n    say \"Started $_[0], total: $number_running\";\n});\n$pm-&gt;run_on_finish( sub {\n    --$number_running;\n    my ($pid, $code, $iden, $sig, $dump, $rdata) = @_;\n    push @ds, \"gone-$pid\";\n    say \"Cleared $pid, \", ($rdata-&gt;[0] // ''), ($code ? \" exit $code\" : '');\n});\n\nforeach my $i (1 .. $total_to_process)\n{\n    $pm-&gt;start and next;\n    run_job($i);\n    $pm-&gt;finish(10*$i, [ \"kid #$i\" ]);\n}\nsay \"Running: \", map { \"$_ \" } $pm-&gt;running_procs;  # pid's of children\n\n# Reap right as each process exits, retrieve and print info\nmy $curr = $pm-&gt;running_procs;\nwhile ($pm-&gt;running_procs) \n{\n    $pm-&gt;reap_finished_children;    # may be fewer now\n    if ($pm-&gt;running_procs &lt; $curr) {\n        $curr = $pm-&gt;running_procs;\n        say \"Remains: $number_running. Data: @ds\";\n    }\n    sleep 1;  # or use Time::HiRes::sleep 0.1;\n}\n\nsub run_job {\n    my ($num) = @_;\n    my $sleep_time = ($num == 1) ? 1 : ($num == 2 ? 10 : 20);\n    sleep $sleep_time;\n    say \"\\tKid #$num slept for $sleep_time, exiting\";\n}\n</code></pre>\n\n<p>Use of this method is equivalent to calling <code>waitpid -1, POSIX::WNOHANG</code> in a loop after <code>fork</code>.  This forks fewer than the max (<code>30</code>) processes to see output more easily and demonstrate that the callback runs right as a child exits.  Change these numbers to see its full operation.</p>\n\n<p>We exit with <code>10*$i</code>, so to track children in output. The data returned in an anonymous array <code>[...]</code> is a descriptive string. As soon as <code>reap_finished_children</code> completes the <code>$number_running</code> is reduced, in the callback.  This is why we have the <code>$curr</code> variable, again for diagnostics.</p>\n\n<p>This prints</p>\n\n<pre>\nstart: Started 4656, running: 1\nstart: Started 4657, running: 2\nstart: Started 4658, running: 3\nRunning: 4656 4658 4657 \n        Kid #1 slept for 1, exiting\nCleared 4656, kid #1 exit 10\nRemains: 2. Data: gone-4656\n        Kid #2 slept for 10, exiting\nCleared 4657, kid #2 exit 20\nRemains: 1. Data: gone-4656 gone-4657\n        Kid #3 slept for 20, exiting\nCleared 4658, kid #3 exit 30\nRemains: 0. Data: gone-4656 gone-4657 gone-4658\n</pre>\n\n<hr>\n\n<p>The direct question is of <strong>how to wait for the whole batch to finish before starting a new one</strong>. This can be done directly by <a href=\"https://metacpan.org/pod/Parallel::ForkManager#wait_for_available_procs(-$n-)\" rel=\"nofollow noreferrer\">wait_for_available_procs($n)</a></p>\n\n<blockquote>\n  <p>Wait until <code>$n</code> available process slots are available. If <code>$n</code> is not given, defaults to <em>1</em>.</p>\n</blockquote>\n\n<p>If <code>$MAX</code> is used for <code>$n</code>, that many slots will become available only once the whole batch completed.  What to use for <code>$n</code> can also be decided at runtime. </p>\n\n<hr>\n\n<p><strong><em>Some details of module's operation</em></strong></p>\n\n<p>When a child exits the <code>SIGCHLD</code> signal is sent to the parent, which it must catch in order to know that the child is gone (and to avoid zombies, in the first place). This is done by using <code>wait</code> or <code>waitpid</code>, in code or in the <code>SIGCHLD</code> handler (but only at one place). See <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">fork</a>, <a href=\"http://perldoc.perl.org/perlipc.html#Signals\" rel=\"nofollow noreferrer\">Signals in perlipc</a>, <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">waitpid</a> and <a href=\"http://perldoc.perl.org/functions/wait.html\" rel=\"nofollow noreferrer\">wait</a>.</p>\n\n<p>We see from <a href=\"http://cpansearch.perl.org/src/DLUX/Parallel-ForkManager-0.7.5/ForkManager.pm\" rel=\"nofollow noreferrer\">P::FM's source</a> that this is done in <code>wait_one_child</code>  (via <code>_waitpid</code> sub)</p>\n\n<blockquote>\n<pre><code>sub wait_one_child { my ($s,$par)=@_;  \n  my $kid;\n  while (1) {\n    $kid = $s-&gt;_waitpid(-1,$par||=0);\n    last if $kid == 0 || $kid == -1; # AS 5.6/Win32 returns negative PIDs\n    redo if !exists $s-&gt;{processes}-&gt;{$kid};\n    my $id = delete $s-&gt;{processes}-&gt;{$kid};\n    $s-&gt;on_finish( $kid, $? &gt;&gt; 8 , $id, $? &amp; 0x7f, $? &amp; 0x80 ? 1 : 0);\n    last;\n  }\n  $kid;\n};  \n</code></pre>\n</blockquote>\n\n<p>which is used in <code>wait_all_children</code></p>\n\n<blockquote>\n<pre><code>sub wait_all_children { my ($s)=@_;\n  while (keys %{ $s-&gt;{processes} }) {\n    $s-&gt;on_wait;\n    $s-&gt;wait_one_child(defined $s-&gt;{on_wait_period} ? &amp;WNOHANG : undef);\n  };\n}\n</code></pre>\n</blockquote>\n\n<p>The method <code>reap_finished_children</code> used above is a synonym for this method.</p>\n\n<p>The method <code>wait_one_child</code> that gets the signal is used by <code>start</code> to reap child processes when maximum number of processes is filled and one exits. This is how the module knows when it can start another process and respect its maximum. (It is also used by a few other routines that wait for processes.\n). And this is when <code>run_on_finish</code> gets triggered, by <code>$s-&gt;on_finish( $kid, ... )</code></p>\n\n<blockquote>\n<pre><code>sub on_finish {\n  my ($s,$pid,@par)=@_;\n  my $code=$s-&gt;{on_finish}-&gt;{$pid} || $s-&gt;{on_finish}-&gt;{0} or return 0;\n  $code-&gt;($pid,@par);\n};\n</code></pre>\n</blockquote>\n\n<p>The callback is in the coderef <code>$code</code>, retrieved from the object's <code>on_finish</code> key, which itself is set in the sub <code>run_on_finish</code>. This is how the callback is set up, once that sub runs.</p>\n\n<p>The methods availed to the user for this are <code>wait_all_children</code> and <code>reap_finished_children</code>.</p>\n\n<p>Since none of this is used in the posted code the <code>$number_running</code> is not getting updated so <code>while</code> is an infinite loop. Recall that the variable <code>$number_running</code> in the parent <em>cannot be directly changed</em> by child processes.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1589188749, "creation_date": 1471838964, "last_edit_date": 1472011315, "question_id": 39071281, "link": "https://stackoverflow.com/questions/39071281/how-to-wait-for-child-process-to-set-variable-in-parent-process", "title": "How to wait for child process to set variable in parent process?", "body": "<pre><code> use Parallel::ForkManager;    \n my $number_running = 0;\n my $pm = new Parallel::ForkManager(30); \n $pm-&gt;run_on_start( sub { ++$number_running; } );\n $pm-&gt;run_on_finish( sub { --$number_running; } );\n for (my $i=0; $i&lt;=100; $i++)\n {\n     if ($number_running == 5) { while ($number_running &gt; 0) {} }  # waits forever\n     $pm-&gt;start and next;\n     print $i;\n     $pm-&gt;finish;\n }\n</code></pre>\n\n<p>The above code uses <a href=\"http://search.cpan.org/~dlux/Parallel-ForkManager-0.7.5/ForkManager.pm\" rel=\"nofollow\">Parallel::ForkManager</a> to execute code in a for loop using parallel processes.  It is counting how many child processes are running and setting the <code>$number_running</code> variable accordingly.  Once 5 child processes are running, I would like it to wait until 0 child processes are running before continuing.</p>\n\n<p>The first line in the for loop is designed to achieve this but it waits forever on that line.  It's like the change to the variable made by the child processes is not available to that line of code.  What am I doing wrong?  Note: I am aware of <code>wait_all_children</code> but I don't want to use it.</p>\n"}, {"tags": ["perl", "xml-parsing", "xml-twig"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "edited": false, "score": 0, "creation_date": 1471871679, "post_id": 39072348, "comment_id": 65508694, "body": "Hi, thank you for the quick response, I will try that tonight. But to your question - each patient has their own xml file - and we have about 40&#39;000+ of them that I need to parse. And yes, I forgot the closing of patient in the last line - had a bit of trouble figuring out the formatting in the question box - and then forgot to add that at the end (since copy&amp;paste doesn&#39;t work in the text box for code it seems)."}, {"owner": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "edited": false, "score": 0, "creation_date": 1472098530, "post_id": 39072348, "comment_id": 65618018, "body": "Hi Borodin, thank you so much for your help - what you posted helped me understand the Twig module much better and I am able to parse the data that I need. No I can work on cleaning up the data and run it through these files. Thank you!"}, {"owner": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "edited": false, "score": 0, "creation_date": 1472102425, "post_id": 39072348, "comment_id": 65618989, "body": "Lastly one more question - I love the pushing of the hash into the global array - very neat and clean. My question is - if I have to parse 40&#39;000 files, is this going to be an issue? Having 40&#39;000+ hashes in that array? Can perl handle such large arrays - or would it be better to write the results of each file parse straight into a csv file? I guess I am asking are small file operations more resource intensive than filling up the array with 40&#39;000 hashes and writing them at the end into a csv file? thank you! :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "edited": false, "score": 0, "creation_date": 1472138074, "post_id": 39072348, "comment_id": 65641394, "body": "@yoeddy: I&#39;m pleased to help, but I was unclear about the nature of your data and would have written something rather different if I knew that each file contained a single person&#39;s data. If all you need to do with this is to create a CSV (you should use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>  for that) then I would write a line of output for each input XML file and forget about the array of hashes altogether. Is that the entire content of an XML file, or is there more data? Is <code>patient</code> the root element, or is there more markup that encloses it?"}, {"owner": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "edited": false, "score": 0, "creation_date": 1472181170, "post_id": 39072348, "comment_id": 65659008, "body": "no worries, I should have been more clear. But I am actually happy because I liked that solution, even if I will look into the Text::CSV module. There is a bunch of other markup around the patient element - but I am able to isolate just the patient data I need and disregard the rest. But it was your examples code that helped me figure out how TWIG works, the help and examples were a bit generic and I couldn&#39;t figure out how to apply it to the weird xml files that were handed to us. So thank you, that was a big help. I will let you know if I need a little nudge with the text::CSV module. ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "edited": false, "score": 0, "creation_date": 1472181495, "post_id": 39072348, "comment_id": 65659086, "body": "@yoeddy: You should seriously consider storing <i>everything</i> in a proper database. (An SQLite database would need no persistent system process and would be a single data file.) You can be sure that you will be asked for &quot;just one other&quot; field from the original data tomorrow!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1471873860, "last_edit_date": 1471873860, "creation_date": 1471846150, "answer_id": 39072348, "question_id": 39070925, "link": "https://stackoverflow.com/questions/39070925/xmltwig-parsing-same-name-tag-in-same-path/39072348#39072348", "title": "XML::Twig parsing same name tag in same path", "body": "<p>It is very easy to assume from the documentation that you're <em>supposed</em> to use callbacks for everything. But it's just as valid to parse the whole document and interrogate it in its entirety, especially if the data size is small</p>\n\n<p>It's unclear from your question whether each patient has a separate XML file to themselves, and you don't show what encloses the <code>patient</code> elements, but I suggest that you use a compromise approach and write a handler for just the <code>patient</code> elements which extracts all of the information required</p>\n\n<p>I've chosen to build a hash of information <code>%patient</code> out of each <code>patient</code> element and push it onto an array <code>@patients</code> that contains all the data in the file. If you have only one patient per file then this will need to be changed</p>\n\n<p>I've resolved the problem with the <code>name/given</code> elements by fetching all of them and joining them into a single string with intervening spaces. I hope that's suitable</p>\n\n<p>This is completely untested as I have only a tablet to hand at present, so beware. It does stand a chance of compiling, but I would be surprised if it has no bugs</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::Twig;\n\nmy @patients;\n\nmy $twig = XML::Twig-&gt;new(\n    twig_handlers =&gt; { patient =&gt; \\&amp;get_patient }\n);\n$twig-&gt;parsefile('test.xml');\n\nsub get_patient {\n    my ($twig, $pat) = @_;\n\n    my %patient;\n\n    $patient{id} = $pat&gt;att('extension');\n\n    my $name         = $pat-&gt;first_child('name');yy\n    $patient{family} = $name-&gt;first_child_trimmed_text('family');\n    $patient{given}  = join ' ', $name-&gt;children_trimmed_text('given');\n\n    $patient{dob}    = $pat-&gt;first_child('birthTime')-&gt;att('value');\n\n    push @patients, \\%patient;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6741793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84dc224abba32fa9b99367350ec43660?s=128&d=identicon&r=PG&f=1", "display_name": "yoeddy", "link": "https://stackoverflow.com/users/6741793/yoeddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 39072348, "answer_count": 1, "score": 2, "last_activity_date": 1471873860, "creation_date": 1471835838, "last_edit_date": 1495535327, "question_id": 39070925, "link": "https://stackoverflow.com/questions/39070925/xmltwig-parsing-same-name-tag-in-same-path", "title": "XML::Twig parsing same name tag in same path", "body": "<p>I am trying to help out a client who was unhappy with an EMR (Electronic Medical Records) system and wanted to switch but the company said they couldn't extract patient demographic data from the database (we asked if they can get us name, address, dob in a csv file of some sort, very basic stuff) - yet they claim they couldn't do that. (crazy considering they are using a sql database).\nAnyway - the way they handed over the patients were in xml files and there are about 40'000+ of them. But they contain a lot more than the demographics.\nAfter doing some research and having done extensive Perl programming 15 years ago (I admit it got rusty over the years) - I thought this should be a good task to get done in Perl - and I came across the XML::Twig module which seems to be able to do the trick.\nUnfortunately the xml code that is of interest looks like this:</p>\n\n<p>&lt;==snip==></p>\n\n<pre><code>&lt;patient extension=\"Patient ID Number\"&gt;  // &lt;--Patient ID is 5 digit number)\n  &lt;name&gt;\n    &lt;family&gt;Patient Family name&lt;/family&gt;\n     &lt;given&gt;Patient First/Given name&lt;/given&gt;\n     &lt;given&gt;Patient Middle Initial&lt;/given&gt;\n  &lt;/name&gt;\n  &lt;birthTime value=YEARMMDD\"/&gt;\n</code></pre>\n\n<p>more fields for address etc.are following in the xml file.</p>\n\n<p>&lt;==snip==></p>\n\n<p>Here is what I coded:</p>\n\n<pre><code>my $twig=XML::Twig-&gt;new( twig_handlers =&gt; {\n  'patient/name/family'      =&gt; \\&amp;get_family_name,\n  'patient/name/given'       =&gt; \\&amp;get_given_name\n});\n$twig-&gt;parsefile('test.xml');\n\nmy @fields;\n\nsub get_family_name {my($twig,$data)=@_;$fields[0]=$data-&gt;text;$twig-&gt;purge;}\nsub get_given_name {my($twig,$data)=@_;$fields[1]=$data-&gt;text;$twig-&gt;purge;}\n</code></pre>\n\n<p>I have no problems reading out all the information that have unique tags (family, city, zip code, etc.) but XML:Twig only returns the middle initial for the  tag.\nHow can I address the first occurrence of \"given\" and assign it to $fields[1] and the second occurrence of \"given\" to $fields[2] for instance - or chuck the middle initial.</p>\n\n<p>Also how do I extract the \"Patient ID\" or the \"birthTime\" value with XML::Twig - I couldn't find a reference to that.\nI tried using $data->findvalue('birthTime') but that came back empty.</p>\n\n<p>I looked at: <a href=\"https://stackoverflow.com/questions/24106901/perl-xmltwig-how-to-reading-field-with-the-same-tag\">Perl, XML::Twig, how to reading field with the same tag</a> which was very helpful but since the duplicate tags are in the same path it is different and I can't seem to find an answer. Does XML::Twig only return the last value found when finding a match while parsing a file? Is there a way to extract all occurrences of a value?</p>\n\n<p>Thank you for your help in advance!</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 6495604, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/99cefa8fa63fc7928935c480376d2df9?s=128&d=identicon&r=PG&f=1", "display_name": "clearairturbulence", "link": "https://stackoverflow.com/users/6495604/clearairturbulence"}, "is_accepted": false, "score": 0, "last_activity_date": 1471822491, "creation_date": 1471822491, "answer_id": 39069748, "question_id": 39069206, "link": "https://stackoverflow.com/questions/39069206/how-to-set-custom-headers-for-httptiny-in-perl/39069748#39069748", "title": "How to set custom headers for HTTP::Tiny in Perl?", "body": "<p>Turns out the problem had a lot to do with me being stupid and not paying attention to the details. Basically,</p>\n\n<ol>\n<li>I was using the real money api, not the fake one</li>\n<li>I was not using a hashref properly</li>\n<li>I was setting 'default_headers' instead of 'headers'</li>\n</ol>\n\n<p>`   </p>\n\n<pre><code>my $api_key = \"::\"\n\nmy %headers = (\n    \"Content-Type\" =&gt; \"application/json\",\n    \"Authorization\" =&gt; sprintf 'Bearer %s', $api_key);\n\nmy $url = \"https://api-fxpractice.oanda.com/v1/accounts\";\n\nmy $response = HTTP::Tiny-&gt;new-&gt;get($url, { headers =&gt; \\%headers } );\n\nprint \"$response-&gt;{status} $response-&gt;{reason}\\n\";\n\nwhile ( my ( $k, $v ) = each %{ $response-&gt;{headers} } ) {\n    for ( ref $v eq 'ARRAY' ? @$v : $v ) {\n        print \"$k: $_\\n\";\n    }\n}\n\nprint $response-&gt;{content} if length $response-&gt;{content};\n</code></pre>\n\n<p>`</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4022466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "bes", "link": "https://stackoverflow.com/users/4022466/bes"}, "is_accepted": false, "score": 0, "last_activity_date": 1580173106, "last_edit_date": 1580173106, "creation_date": 1543407313, "answer_id": 53519261, "question_id": 39069206, "link": "https://stackoverflow.com/questions/39069206/how-to-set-custom-headers-for-httptiny-in-perl/53519261#53519261", "title": "How to set custom headers for HTTP::Tiny in Perl?", "body": "<p>hash means just <code>%hash=(key=&gt;value)</code></p>\n\n<p>hash references means just <code>$hashref={key=&gt;value}</code> and this equal to <code>$hashref=\\%hash;</code></p>\n\n<p>So</p>\n\n<p><code>$http = HTTP::Tiny-&gt;new( %attributes )</code> is just</p>\n\n<p><code>$http = HTTP::Tiny-&gt;new( attr1=&gt;value1, ... )</code></p>\n\n<p>And</p>\n\n<p><code>$response = $http-&gt;get($url, \\%options)</code> is</p>\n\n<p><code>$response = $http-&gt;get($url, {attr1=&gt;value1, ...} )</code></p>\n\n<p>illustrative examples:</p>\n\n<pre><code>use HTTP::Tiny;\nHTTP::Tiny-&gt;new-&gt;get($url);\nHTTP::Tiny-&gt;new-&gt;get($url, { headers =&gt; { header1=&gt;value1, header2=&gt;value2 } };\n\n# with headers set in one place\n$handle=HTTP::Tiny-&gt;new( default_headers=&gt;{h1=&gt;3, h2=&gt;4} );\n$handle-&gt;get($url);\n$handle-&gt;get($url, headers=&gt;{ h2=&gt;'overwrite' });\n\n# without shorthand\nHTTP::Tiny-&gt;new-&gt;request('GET', $url);\nHTTP::Tiny-&gt;new-&gt;request('GET',$url, { headers =&gt; { header1=&gt;value1, header2=&gt;value2 } };\n\n# post\nHTTP::Tiny-&gt;new-&gt;request('POST',$url, { headers =&gt; { header1=&gt;value1, header2=&gt;value2 }, content=&gt;'body to post' };\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 6495604, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/99cefa8fa63fc7928935c480376d2df9?s=128&d=identicon&r=PG&f=1", "display_name": "clearairturbulence", "link": "https://stackoverflow.com/users/6495604/clearairturbulence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3649, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1580173106, "creation_date": 1471816523, "last_edit_date": 1471820728, "question_id": 39069206, "link": "https://stackoverflow.com/questions/39069206/how-to-set-custom-headers-for-httptiny-in-perl", "title": "How to set custom headers for HTTP::Tiny in Perl?", "body": "<p>I'm having some trouble understanding the proper way to set headers for <code>HTTP::Tiny</code> in Perl 5. So far I have seen examples of hashes, hash references, and a myriad of other seemingly incomposable ways.</p>\n\n<p>What is the proper way of setting the headers for a request? What's an easy way to view the request before it is sent?</p>\n\n<p>Here is some example code:</p>\n\n<pre><code>#!/usr/bin/env perl                                                                                                                                                                             \nuse 5.12.1;                                                                                                                                                                                     \nuse HTTP::Tiny;                                                                                                                                                                                 \n\nmy $api_key = \"::\";                                                                                                                                                                             \n\nmy %headers = (Authorization =&gt; sprintf 'Bearer %s', $api_key);                                                                                                                                            \nmy $url = \"https://api-fxpractice.oanda.com/v3/accounts\";                                                                                                                                          \n\nmy $response = HTTP::Tiny-&gt;new($url, \n   default_headers =&gt; {'Content-Type' =&gt; 'application/json'});                                                              \n\nmy $response = HTTP::Tiny-&gt;new-&gt;get($url, { default_headers =&gt; \\%headers } );                                                                                                                    \n\nprint \"$response-&gt;{status} $response-&gt;{reason}\\n\";                                                                                                                                                                                                \nwhile ( my ( $k, $v ) = each %{ $response-&gt;{headers} } ) { \n        print \"$k: $_\\n\";   \n    }                                                                                                                                                                                           \n}\n\nprint $response-&gt;{content} if length $response-&gt;{content};  \n</code></pre>\n\n<p>And it is giving me a 401.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "loops", "text", "timeout", "next"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 4, "creation_date": 1471806894, "post_id": 39067758, "comment_id": 65484027, "body": "<a href=\"http://stackoverflow.com/questions/2423288/ways-to-do-timeouts-in-perl\" title=\"ways to do timeouts in perl\">stackoverflow.com/questions/2423288/ways-to-do-timeouts-in-p&zwnj;&#8203;erl</a>"}, {"owner": {"reputation": 99, "user_id": 6741150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1791871444381112/picture?type=large", "display_name": "user80407", "link": "https://stackoverflow.com/users/6741150/user80407"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1471813367, "post_id": 39067758, "comment_id": 65485893, "body": "Thank you, I had already looked into it but my problem is that I cannot figure out where to apply the patch of code."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 6741150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1791871444381112/picture?type=large", "display_name": "user80407", "link": "https://stackoverflow.com/users/6741150/user80407"}, "edited": false, "score": 0, "creation_date": 1471830942, "post_id": 39069239, "comment_id": 65489307, "body": "I will take this and experiment a little. Thanks"}, {"owner": {"reputation": 99, "user_id": 6741150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1791871444381112/picture?type=large", "display_name": "user80407", "link": "https://stackoverflow.com/users/6741150/user80407"}, "edited": false, "score": 0, "creation_date": 1471870136, "post_id": 39069239, "comment_id": 65507542, "body": "As attractive as you answer was, theres some huge problem going on with installing the module. I am using ActiveState Perl 5.24.0 on Win10 64bit. I have installed dmake via ppm but it isn&#39;t recognized if I access the cpan shell: &quot;dmake and MinGW gcc compiler&quot; are not installed. It still starts up cpan but if I type &quot;install Time::Out&quot; it fails because dmake is supposedly missing."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 99, "user_id": 6741150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1791871444381112/picture?type=large", "display_name": "user80407", "link": "https://stackoverflow.com/users/6741150/user80407"}, "edited": false, "score": 0, "creation_date": 1471891423, "post_id": 39069239, "comment_id": 65520940, "body": "@user80407 - Sounds like a path problem to me, but I&#39;m afraid I can&#39;t help beyond that, since I&#39;ve never used Perl in Windows, only various *nixes. Maybe ask another question about that?"}, {"owner": {"reputation": 99, "user_id": 6741150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1791871444381112/picture?type=large", "display_name": "user80407", "link": "https://stackoverflow.com/users/6741150/user80407"}, "edited": false, "score": 0, "creation_date": 1471919126, "post_id": 39069239, "comment_id": 65530389, "body": "You&#39;re probably right, this a completely different story. I was talking to another perler today and he said i might want to try it with cpanm instead of cpan. I will go ahead and try until something works out."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1471816798, "creation_date": 1471816798, "answer_id": 39069239, "question_id": 39067758, "link": "https://stackoverflow.com/questions/39067758/perl-how-to-skip-a-loop-if-the-task-takes-too-long/39069239#39069239", "title": "Perl: how to skip a loop if the task takes too long", "body": "<p>I haven't gone through your code closely enough to tell you exactly where the timeout code should go, but you should be able to easily accomplish what you want using <a href=\"https://metacpan.org/pod/Time::Out\" rel=\"nofollow\">Time::Out</a>.  Just use</p>\n\n<pre><code>use Time::Out 'timeout';\n\ntimeout 6 =&gt; sub {\n  # code that you want to time out after 6 seconds goes here\n}\n</code></pre>\n\n<p>and you should be set.</p>\n"}], "owner": {"reputation": 99, "user_id": 6741150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1791871444381112/picture?type=large", "display_name": "user80407", "link": "https://stackoverflow.com/users/6741150/user80407"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1471816798, "creation_date": 1471805632, "question_id": 39067758, "link": "https://stackoverflow.com/questions/39067758/perl-how-to-skip-a-loop-if-the-task-takes-too-long", "title": "Perl: how to skip a loop if the task takes too long", "body": "<p>This perl code processes txt files in a folder and it's subdirectories into a header, a body and an xml.</p>\n\n<pre><code>    #!perl -w\n\nuse strict;\nuse utf8;\nuse File::Copy;\nuse File::Basename;\n\nour @folders=();\nour %errors=();\nour $page_errors='';\nour $folder_out='';\nour $folder_in='';\nour $sub_folder=\"\";\nour $dev=0;\nour $anker='#a_';\nour $coded_lb=0;\nour $line_cnt=0;\n\nsub get_complete_filename\n{\n    my $return = $_[0];\n    $return=~m/([^\\d]+)(\\d+)/;\n    return $return if (!$1 || !$2);\n    my $name=$1;\n    my $number=$2;\n\n    open (IN,\"&lt;:encoding(utf-8)\",\"..\\\\..\\\\complete_filenames.txt\");\n    while (&lt;IN&gt;)\n    {\n        my $line=$_; chomp($line);\n        next if ($line eq '' || $line=~m/Datei/);       \n        if ($line=~m/$name[a-zA-Z_-]+$number/)\n        {\n            $return = $line;\n            last;\n        }       \n    }   \n    close IN;\n    return $return;\n}\n\nsub get_files \n{   \n    my $dir = $_[0];\n    my $file;\n    opendir(DIR, $dir) || die \"Unable to open $dir: $!\";\n    my @fl = grep {!/^\\.\\.?$/ } readdir(DIR);\n    closedir(DIR);\n    foreach (@fl) \n    {\n        if (-d ($file = \"$dir\\\\$_\")) \n        {\n            push(@folders,$file); \n            get_files($file); \n        } \n    }\n}\n\nsub header\n{\n    my $fn=$_[0];\n    my $folder_in=$_[1];\n    my $folder_out=$_[2];\n\n    if (-e ($folder_in.\"\\\\\".$fn.\".teih\"))\n    {\n        open (IN,\"&lt;:encoding(utf-8)\", $folder_in.\"\\\\\".$fn.\".teih\");\n        my $input = do { local $/; &lt;IN&gt; };\n        close IN;\n        my @lines=split(/[\\n\\r]/,$input);   \n        my $read=0;\n        my $output=\"\";\n        foreach my $line (@lines) \n        {\n            chomp($line);\n            if($line=~m/&lt;\\/teiHeader&gt;/)\n            {\n                $read=0;\n                $output.=$line.\"\\n\";\n                last;\n            }\n            elsif ($read eq 1 || $line=~m/&lt;teiHeader&gt;/)\n            {\n                $read=1;\n                $output.=$line.\"\\n\";\n            }\n        }           \n        open (OUT,\"&gt;:encoding(utf-8)\", $folder_out.($dev eq 0 ? \"\\\\\".$sub_folder : \"\").\"\\\\\".$fn.\".teih\");\n        print OUT $output;\n        close OUT;\n        #copy($folder_in.\"\\\\\".$fn.\".teih\", $folder_out.\"\\\\\".$fn.\"\\\\\".$fn.\".teih\"); \n    }\n    else\n    {   \n    open (H,\"&gt;:encoding(utf-8)\", $folder_out.($dev eq 0 ? \"\\\\\".$sub_folder : \"\").\"\\\\\".$fn.\".teih\");\n    print H \"\\n\\t&lt;!--\\n\\t copy of the main_header or empty header!!!\\n\\t please update its content\\n\\t--&gt;\\n\".\n'&lt;teiHeader&gt;\n    &lt;fileDesc&gt;\n        &lt;titleStmt&gt;\n            &lt;title/&gt;\n            &lt;respStmt&gt;\n                &lt;resp/&gt;\n                &lt;name/&gt;\n            &lt;/respStmt&gt;\n        &lt;/titleStmt&gt;\n        &lt;publicationStmt&gt;\n            &lt;distributor/&gt;\n        &lt;/publicationStmt&gt;\n        &lt;sourceDesc&gt;\n            &lt;bibl/&gt;\n        &lt;/sourceDesc&gt;\n    &lt;/fileDesc&gt;\n&lt;/teiHeader&gt;';\n    close H;\n    }\n\n    return '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;'; \n}\n\nsub check_linebreak\n{\n    my $line=$_[0]; my $pg=$_[1];\n    my $ret=\"\";\n\n    $line_cnt++;\n    if ($line=~m/([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6\\-]+)\\/([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6\\-]+[[:punct:]]*)/)\n    {                   \n        my $tmp1=$1; my $tmp2=$2;\n        my $z=\"TRENNENDERZBTRENNENDERZB\".($line_cnt+1).\"TRENNENDERZBTRENNENDERZB\";\n        $line=~s/\\Q$tmp1\\E\\/\\Q$tmp2\\E/$tmp1$z$tmp2/; $line.=\" \";\n        if ($coded_lb eq 0)\n        {\n            $ret=$pg.\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB \".$line;\n        }\n        else\n        {\n            $ret=$pg.$line; \n        }\n        $coded_lb=1;        \n    }\n    else\n    {\n        if ($coded_lb eq 0)\n        {\n            $ret=$pg.\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB \".$line;\n        }\n        else\n        {\n            $ret=$pg.$line;                     \n        }\n        $coded_lb=0;\n    }\n    return $ret;\n}\n\nsub anfangs_verarbeitung\n{\n    my $tmp=$_[0];\n\n    $tmp =~ s/^\\x{FEFF}//;  # removes BOM\n\n\n    $tmp =~ s/#(?:(?:\\r\\n)|\\n|\\r)+(\\-{2,})/#$1\\n/mg;\n    $tmp =~ s/^p\\s*$//g;\n\n    $tmp =~ s/^\\s*([pP]\\d+)\\s*([cC]\\s*[0-9IVX]+)/$1\\n$2/g;\n\n    $tmp =~ s/(?&lt;=#)\\|(?=[pppctPCT])//g;\n    $tmp =~ s/\\|(?=[pppctPCT])/#/g;\n    $tmp =~ s/(?&lt;![\\|#])([pppcPC]\\s*[\\dIVXMC]+)+/#$1/g;\n    $tmp =~ s/\\|(\\d+)/#p$1/g;\n\n    $tmp =~ s/\u00ab(?=[\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])/\u00bb/g;\n    $tmp =~ s/\u00bb(?![\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])/\u00ab/g;\n    $tmp =~ s/&lt;&lt;(?=[\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])/\u00bb/g;\n    $tmp =~ s/&gt;&gt;(?![\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])/\u00ab/g;\n    $tmp =~ s/(?:\u201e|,,|\")([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]+)\u00ab/\u00bb$1\u00ab/g;\n    $tmp =~ s/\u00bb([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]+)[\u201c\"']/\u00bb$1\u00ab/g;\n\n\n\n    $tmp =~ s/^(\\d{4}\\s*\u10ec\\.)\\s*$/#d $1/g;\n\n    $tmp =~ s/&lt;pol&gt;/&lt;pol&gt;/g;    \n\n    $tmp =~ s/&lt;\u10d0&gt;/&lt;a&gt;/g;    \n    $tmp =~ s/&lt;\\?([athzee])&gt;/&lt;\\/$1&gt;/g;                  #&lt;?a&gt;           \n    $tmp =~ s/[&lt;&gt;]\\/([athzee])(?![&lt;&gt;])/&lt;\\/$1&gt;/g;            #&lt;/a &gt;/a            \n    $tmp =~ s/&lt;([athzee])\\/&gt;/&lt;\\/$1&gt;/g;                  #&lt;a/&gt;\n    $tmp =~ s/[&lt;&gt;]\\/([athzee])[&lt;&gt;]/&lt;\\/$1&gt;/g;                #&gt;/a&gt; etc.          \n    $tmp =~ s/[&lt;&gt;]([athzee])[&lt;&gt;]/&lt;$1&gt;/g;                    #&gt;a&lt; etc.\n    $tmp =~ s/&lt;([athzee])(?![&lt;&gt;])/&lt;$1&gt;/g;                   #&lt;a &gt;a          \n    $tmp =~ s/(?&lt;=[^&gt;&lt;\\/#])([athzee])[&lt;&gt;]/&lt;$1&gt;/g;           #a&lt; a&gt;          \n    $tmp =~ s/(?&lt;=[^&gt;&lt;])\\/([athzee])[&lt;&gt;]/&lt;\\/$1&gt;/g;      #/a&lt; /a&gt;    \n\n    #$tmp =~ s/&lt;\\/([athze])&gt;([^&lt;]+)&lt;\\/[^\\1]&gt;/&lt;$1&gt;$2&lt;\\/$1&gt;/gm;\n\n    ##$tmp =~s/&lt;([athz])&gt;([^&lt;]+)&lt;\\/[^(?:$1)]&gt;/&lt;$1&gt;$2&lt;\\/$1&gt;/g;   \n    ##$tmp =~s/&lt;([athz])&gt;([^&lt;]+)&lt;[^(?:\\1)]&gt;/&lt;$1&gt;$2&lt;\\/$1&gt;/g;\n\n    $tmp =~ s/&lt;([pol])&gt;([^&lt;]+)&lt;\\/\\1&gt;-&lt;\\1&gt;([^&lt;]+)&lt;\\/\\1&gt;/&lt;$1&gt;$2-$3&lt;\\/$1&gt;/g;\n    #$tmp =~ s/&lt;([athze])&gt;([^&lt;]+)&lt;\\/\\1&gt;[\\-\\-]&lt;([athze])&gt;([^&lt;]+)&lt;\\/\\3&gt;/&lt;$1&gt;$2-$4&lt;\\/$1&gt;/g;\n\n    ##$tmp =~ s/([^\\s]+)\\-&lt;([athz])&gt;([^&lt;]+)&lt;\\/\\2&gt;/&lt;$2&gt;$1\\-$3&lt;\\/$2&gt;/g;\n    ##$tmp =~ s/&lt;name([^&gt;]+)&gt;([^&lt;]+)&lt;\\/name&gt;//g;\n\n    $tmp =~ s/&lt;\\/&lt;/&lt;/g;\n\n    ####$tmp =~ s/&lt;\\/(?![athzee])//g;\n\n    $tmp =~ s/#{2,}/#/g;\n\n    $tmp =~ s/\\(\\/\\/\\?([^\\)]*)\\)/&lt;unclear&gt;$1&lt;\\/unclear&gt;/gm;\n    $tmp =~ s/&lt;unclear&gt;&lt;\\/unclear&gt;/&lt;unclear\\/&gt;/g;\n    $tmp =~ s/\\(\\/\\/([^\\)]+)\\)/&lt;corr&gt;$1&lt;\\/corr&gt;/gm;\n\n    #$tmp =~ s/&lt;s(\\d+)&gt;([^&lt;]+)&lt;\\/s\\1&gt;/$2&lt;ref target=\"#a$1\" type=\"noteAnchor\"&gt;$1&lt;\\/ref&gt;/gm;\n    $tmp =~ s/&lt;[sS](\\d+)&gt;/&lt;ref target=\"a$1\" type=\"noteAnchor\"&gt;/g;\n    $tmp =~ s/&lt;\\/[sS]\\d+&gt;/&lt;\\/ref&gt;/g;\n    $tmp =~ s/\\([sS](\\d+)=?\\s*([^\\)]+)\\)/&lt;note xml:id=\"a$1\" type=\"footnote\"&gt;$2&lt;\\/note&gt;\\n/gm;\n\n    #$tmp =~ s/#f(\\d+)\\s*(.*)([^#\\|]+)/&lt;note xml:id=\"a$1\" type=\"footnote\"&gt;$2&lt;\\/note&gt;\\n\\n/gm;\n    #$tmp =~ s/\\(s\\s*(\\d+)\\s*([^\\)]+)\\)/&lt;note xml:id=\"a$1\" type=\"footnote\"&gt;$2&lt;\\/note&gt;\\n\\n/gm;\n    $tmp =~ s/\\n{1,}&lt;\\/note&gt;/&lt;\\/note&gt;/gm;\n\n    #$tmp =~ s/\\s*#\\-{2,}//gm;  \n\n    $tmp=~s/\u10d5\u10d8\\$/\u10f3/g;\n    $tmp=~s/\u10ee\\$/\u10f4/g;\n    $tmp=~s/\u10d4\\$/\u10f1/g;\n    $tmp=~s/\u10d8\\$/\u10f2/g;\n    $tmp=~s/\u10e4\\$/\u10f6/g;\n    $tmp=~s/\u10d5\\$/\u10e3/g;\n    $tmp=~s/\u10dd\\$/\u10f5/g;\n\n    $tmp=~s/#\\.{2,}/#\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-\\-/g;\n\n    return $tmp;\n}\n\nsub end_verarbeitung\n{\n    my $tmp=$_[0];\n    $tmp =~ s/[\\n\\r]{2,}/\\n/g;\n    $tmp =~ s/&lt;p&gt;\\s+/&lt;p&gt;/g;\n    $tmp =~ s/&lt;\\/p&gt;\\s+/&lt;\\/p&gt;/g;\n    $tmp =~ s/&lt;p&gt;&lt;\\/p&gt;//g;\n    $tmp =~ s/&lt;div&gt;&lt;p&gt;&lt;div type=\"dateline\"&gt;/&lt;div type=\"dateline\"&gt;/g;\n    $tmp =~ s/&lt;p&gt;&lt;div type=\"dateline\"&gt;/&lt;div type=\"dateline\"&gt;/g;\n\n    $tmp =~ s/&lt;pol&gt;([^&lt;]+)&lt;\\/pol&gt;/&lt;term type=\"political\"&gt;$1&lt;\\/term&gt;/g;\n    $tmp =~ s/&lt;term type=\"political\"&gt; ([^&lt;]+)&lt;\\/name&gt;/ &lt;term type=\"political\"&gt;$1&lt;\\/term&gt;/g;\n    $tmp =~ s/&lt;a&gt;&lt;name/&lt;name/g;\n\n    $tmp =~ s/&lt;t&gt;([^&lt;]+)&lt;\\/t&gt;/&lt;name type=\"toponym\"&gt;$1&lt;\\/name&gt;/g;\n\n    $tmp =~ s/&lt;z&gt;([^&lt;]+)&lt;\\/z&gt;/&lt;name type=\"zoonym\"&gt;$1&lt;\\/name&gt;/g;         \n    $tmp =~ s/&lt;h&gt;([^&lt;]+)&lt;\\/h&gt;/&lt;name type=\"hydronym\"&gt;$1&lt;\\/name&gt;/g;           \n    $tmp =~ s/&lt;e&gt;([^&lt;]+)&lt;\\/e&gt;/&lt;name type=\"ethnonym\"&gt;$1&lt;\\/name&gt;/g;           \n\n    #$tmp =~ s/&lt;a&gt;([^&lt;]+)/&lt;name type=\"anthroponym\"&gt;$1&lt;\\/name&gt;/g;\n    #$tmp =~ s/([^&gt;]+)&lt;\\/a&gt;/&lt;name type=\"anthroponym\"&gt;$1&lt;\\/name&gt;/g;\n\n    $tmp =~ s/&lt;u&gt;([^&lt;]+)&lt;?\\/u&gt;/&lt;name type=\"unknown\"&gt;$1&lt;\\/name&gt;/g;\n\n    $tmp =~ s/\\s+([\\.:,!\\?\\)])/$1/g;\n    $tmp =~ s/(\\()\\s+/$1/g;\n\n    $tmp=~s/&lt;p&gt;#&lt;\\/p&gt;//g;\n    $tmp=~s/&lt;div&gt;&lt;\\/div&gt;//g;\n\n    $tmp=~s/\\.\\s+\\./\\.\\./g;\n    $tmp=~s/\\.\\.(?!&lt;\\.)/\\.\\.\\./g;\n    $tmp=~s/\\.\\.\\./\u2026/g;\n    $tmp=~s/\u2026\\s*\\./\u2026/g; \n    $tmp=~s/ +([,\\.\u2026;:!\\?])/$1/g;\n    #$tmp=~s/([,\\.\u2026;:!\\?])(?!&lt; )/$1 /g;\n    $tmp=~s/-/\u2013/g;\n    $tmp=~s/,\u2013/, \u2013/g;\n    $tmp=~s/([\\.:,!\\?\\)])\u2013/$1 -/g;\n    $tmp=~s/\\. &lt;/\\.&lt;/g;\n\n    $tmp=~s/xml: id/xml:id/g;\n\n    $tmp=~s/#-{2,}//g;\n    $tmp=~s/&lt;p&gt;&lt;\\/p&gt;//g;\n    $tmp=~s/\\s*&lt;\\/p&gt;&lt;p&gt;/&lt;\\/p&gt;\\n\\t\\t\\t\\t&lt;p&gt;/g;\n    $tmp=~s/ +/ /g;\n\n    #$tmp =~ s/\u201e([^\u201e\u201c]+)\u201e/\u201e$1\u201c/g;\n\n    #$tmp=~s/&lt;pb n=\"(\\d+)\"\\/&gt;(?:\\r\\n)*n*\\s*&lt;\\/div&gt;/&lt;pb n=\"$1\"\\/&gt;/gm;\n    #$tmp=~s/&lt;div type=\"Section\"&gt;(?:\\r\\n)*\\n*\\s*&lt;head&gt;([^&lt;]+)&lt;\\/head&gt;/&lt;div type=\"Section\"&gt;\\n\\t\\t\\t\\t&lt;head&gt;$1&lt;\\/head&gt;\\n\\t\\t\\t\\t&lt;\\/div&gt;/gm;\n    #$tmp=~s/\\s*&lt;pb n=\"(\\d+)\"\\/&gt;(?:\\r\\n)*\\n*\\s*&lt;div type=\"Section\"&gt;/&lt;div type=\"Section\"&gt;\\n\\t\\t\\t\\t&lt;pb n=\"$1\"\\/&gt;/gm;\n\n    $tmp=~s/&lt;\\/p&gt;&lt;lg&gt;/&lt;\\/p&gt;\\n\\t\\t\\t\\t&lt;lg&gt;/g;\n    $tmp=~s/&lt;\\/p&gt;&lt;\\/div&gt;/&lt;\\/p&gt;\\n\\t\\t\\t\\&lt;\\/div&gt;/g;\n\n    $tmp=~s/(&lt;name[^&gt;]*&gt;) +/ $1/g;\n    $tmp=~s/([^\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]*) +&lt;\\/name&gt;/&lt;\\/name&gt;$1 /g;\n    $tmp=~s/\u2026\\s*&lt;\\/name&gt;/&lt;\\/name&gt;\u2026/g;\n    $tmp=~s/,\\s*\\./\\./g;\n    $tmp=~s/ +/ /g;\n\n    $tmp=~s/NORMALERZBNORMALERZB(\\d+)NORMALERZBNORMALERZB/\\n\\t\\t\\t\\t\\t&lt;lb n=\"$1\"\\/&gt; /g;\n    $tmp=~s/TRENNENDERZBTRENNENDERZB(\\d+)TRENNENDERZBTRENNENDERZB/&lt;lb n=\"$1\"\\/&gt;/g;  \n    $tmp=~s/PAGE PAGE PAGE PAGE PAGE(\\d+)PAGE PAGE PAGE PAGE PAGE/&lt;pb n=\"$1\"\\/&gt;/g;  #//&lt;pb n=\\\"\".$current_page.\"\\\"/&gt;\";  \n    $tmp=~s/&lt;\\/p&gt;(&lt;pb n=\"\\d+\"\\/&gt;)/&lt;\\/p&gt;\\n\\t\\t\\t\\t$1/g;\n    $tmp=~s/ (&lt;pb n=\"\\d+\"\\/&gt;)/$1/g;\n    $tmp=~s/&lt;\\/p&gt;[\\r\\n]+\\s+&lt;p&gt;(&lt;pb n=\"\\d+\"\\/&gt;)&lt;\\/p&gt;/$1&lt;\\/p&gt;/g;\n\n    $tmp=~s/&lt;\\/l&gt;(&lt;pb n=\"\\d+\"\\/&gt;)/$1&lt;\\/l&gt;/g;\n\n    $tmp=~s/ +/ /g;\n\n    $tmp=~s/&lt;a&gt;&lt;name/&lt;name/g;\n\n    $tmp=~s/&lt;head&gt;&lt;\\/head&gt;//;\n\n    my $sperr=\"\";   \n    if ($_[1]!~m/(?:04|07|11).1857/ &amp;&amp; $_[1]!~m/(?:04|08).1858/)\n    {\n        while ($tmp=~m/(?&lt;![\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])((?:[\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6][^\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6~\\\u2013\\-]){3,})/)\n        {\n            my $sperr_org=$1;\n            my $sperr_edit=$1;\n            my $rest=\"\";\n            $sperr_edit=~s/ //g;\n            $sperr.=$sperr_edit.\"\\n\";\n            if ($sperr_edit=~m/([^\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]+)$/)\n            {\n                $rest=($1 ne \"&lt;\"?\" \":\"\").$1;\n                $sperr_edit=~s/[^\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]+$//;\n            }       \n            else { $rest=\" \"; }\n            $tmp=~s/(?&lt;![\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])\\Q$sperr_org\\E/&lt;hi rend=\"letter-spacing\"&gt;$sperr_edit&lt;\\/hi&gt;$rest/;\n        }   \n        if ($sperr ne \"\")\n        {\n            open (OUT,\"&gt;&gt;:encoding(utf-8)\", $_[2].\"\\\\000_sperrschrift.txt\");\n            print OUT $_[1].\"\\n\\t\".$sperr;\n            close OUT;\n        }\n    }\n\n    $tmp=~s/&gt;([^&lt;])&lt;\\/name&gt;\\./&gt;$1\\.&lt;\\/name&gt;/g;\n\n    return $tmp;\n}\n\nsub go_go_gadget\n{\n    my $file_xml=$_[0];\n    my $file_html='';   my $output='';  my $output_filename=''; \n    my $chapter=0;  my $div=0; my $p=0; my $last_p=0;  my $v=0;\n    my $input_xml=''; my $chapter_type=''; my $written=0;\n    my $page=0; my $started=0;\n\n    (my $fn,my $pn)=fileparse $file_xml;\n    return if ($fn=~m/instruqcia/);\n\n    print \"\\tkonvertiere $fn\\n\";\n    $fn=~s/\\.txt//g;\n    $fn=~s/(\\d+)_/$1+/;\n    $fn=~s/_/-/g;   $fn=~s/^([a-z]+)-/$1_/g;\n    $sub_folder=\"\";\n    if ($fn=~m/^([^_]+_[a-zA-Z]+)/)\n    {   \n        $sub_folder=$1;     \n    }\n\n    $file_xml=~s/(?:\\/|\\\\+)/\\\\/g;\n\n    open (IN,\"&lt;:encoding(utf-8)\", $file_xml) || die \"konnte die datei nicht oeffnen: $!\\n\"; \n    $input_xml = do { local $/; &lt;IN&gt; } ;                        # Eingabedatei komplett in String einlesen\n    close IN;\n\n    # -----------------------------------------\n    $input_xml=anfangs_verarbeitung($input_xml);\n    # ----------------------------------------- \n\n    $div=0;\n    my $last_line='';   \n    my @lines=split(/\\n/,$input_xml);   \n    $line_cnt=0;    \n    my $group_cnt=0;\n    my $verse_cnt=0;\n    my $pg='';\n    my $first_page=0;\n    my $last_page=0;\n    my $has_chapters=0;\n    my $ut=0;\n    my $quote_open=0;\n    my $section_cnt=0;\n    my $chapter_cnt=0;\n\n    $coded_lb=0;\n    $chapter_type=\"Section\";\n    $has_chapters=1 if ($input_xml=~m/#\\s*[cC]\\s*[\\dIVXMC]+[\\\u2013\\-]?[\\dIVXMC]*/);\n    if ($has_chapters eq 0)\n    {\n        $output='&lt;div type=\"Section\"&gt;' ;\n        #$chapter=1; \n    }\n\n    $output='&lt;div type=\"Content\" n=\"1\"&gt;'.\"\\n\";\n    foreach my $line (@lines)\n    {   \n        $line=~s/^L\\s*//;\n\n        chomp($line); $line=~s/\\n//g; $line=~s/\\r//g;   $line=~s/(\\s){2,}/$1/g; $line =~ s/^\\s+//g; $line =~ s/\\s+$//g;\n        #$line=~s/([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])([,;\\.])([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6])/$1$2 $3/g;\n\n        if ($has_chapters eq 1 &amp;&amp; $line =~ m/^\\s*#?\\s*\\|?[cC]\\s*(\\d+)\\s*(.*)/)      # chapter\n        {\n            $output.=\"&lt;/note&gt;\" if ($ut == 1);\n            if ($p eq 1) { $output.=\"&lt;/p&gt;\";   } \n            elsif ($v eq 1) { $output.=\"\\n\\t\\t\\t\\t&lt;/lg&gt;\"; }\n            if ($started eq 1)\n            {\n                if ($div eq 1) { $output.=\"\\n\\t\\t\\t&lt;/div&gt;\"; }\n                elsif ($chapter eq 1) { $output.=\"\\n\\t\\t\\t&lt;/div&gt;\"; }\n            }\n\n            my $title=$2;\n            if ($title) { $title=~s/&lt;ref target=\"#a(\\d+)\" type=\"noteAnchor\"&gt;/&lt;ref target=\"#a_$page\\_$1\" type=\"noteAnchor\"&gt;/g; }\n            $chapter_cnt=$1;\n            $output.=\"\\n\\t\\t\\t\".'&lt;div type=\"Chapter\" n=\"'.$chapter_cnt.'\"&gt;'.\"\\n\\t\\t\\t\\t&lt;head&gt;\".($title?check_linebreak($title,$pg):$pg).\"&lt;/head&gt;\";\n\n            $chapter=1; $chapter_type=\"Chapter\"; #$div=0;\n            $p=0;  $written=0;  $v=0; $ut=0;\n            $last_line=\"\"; $started=0;\n            $pg='';\n        }\n        elsif ($line =~ m/^\\s*#\\s*[pP]\\s*(\\d+)/)                # page break\n        {\n            if ($v ne 1 &amp;&amp; $p eq 0) \n            { \n                if ($div == 0)\n                {\n                    if ($chapter_type eq \"Section\" || $has_chapters == 0) { $section_cnt++; $output.='&lt;div type=\"Section\" n=\"'.$section_cnt.'\"&gt;'; }\n                    else { $output.='&lt;div type=\"Chapter\" n=\"'.$chapter_cnt.'\"&gt;'; }\n                    $div=1;\n                }\n                $output.=\"&lt;p&gt;\"; $p=1;  \n            }\n            #$output.=\"&lt;pb n=\\\"\".$1.\"\\\"/&gt;\"; \n\n            # --- detecting page errors\n            my $current_page=$1; #0;            \n            #if ($first_page &gt; 0)\n            #{\n            #   $current_page=$1;\n            #   if ($current_page-$last_page&lt;1)\n            #   {\n            #       $current_page=$last_page+1;\n            #       $page_errors.=$fn.\"\\t\".$last_page.\"\\n\";\n            #   }               \n            #   elsif ($current_page-$last_page&gt;1)\n            #   {\n            #       $page_errors.=$fn.\"\\t\".$last_page.\"\\n\";\n            #   }               \n            #}\n            #else\n            #{\n            #   $first_page=$1;\n            #   $current_page=$1;\n            #}  \n            #$last_page=$current_page;\n            # ----\n\n            $pg.=\"PAGE PAGE PAGE PAGE PAGE\".$current_page.\"PAGE PAGE PAGE PAGE PAGE\";   \n            #$p=0;\n            $page=$1;\n            #$written=0; \n            $last_line=\"\";\n            $line_cnt=0;\n        }\n        elsif ($line =~ m/\\s*#[tT]\\s*(.+)/)             # title\n        {\n            $output.=\"&lt;/note&gt;\" if ($ut == 1);\n            if ($p eq 1) { $output.=\"&lt;/p&gt;\"; }\n            elsif ($v eq 1) { $output.=\"\\n\\t\\t\\t\\t&lt;/lg&gt;\"; }\n\n            if (($chapter eq 1 || $div eq 1) &amp;&amp; $chapter_type ne 'chapter')\n            {\n            #   if($chapter_type eq 'chapter') \n            #   {\n            #       if ($started eq 1)\n            #       {   $output.=\"\\n\\t\\t\\t&lt;/div&gt;\\n\\t\\t\\t\".'&lt;div type=\"Chapter\" n=\"'.$1.'\"&gt;';}\n            #       else { $output.='&lt;div type=\"Chapter\" n=\"'.$1.'\"&gt;';}\n            #   }\n            #   else\n            #   { \n                    if ($started eq 1) { $section_cnt++; $output.=\"\\n\\t\\t\\t&lt;/div&gt;\\n\\t\\t\\t\".'&lt;div type=\"Section\" n=\"'.$section_cnt.'\"&gt;'; }       \n                    else { $section_cnt++; $output.=\"\\n\\t\\t\\t\".'&lt;div type=\"Section\" n=\"'.$section_cnt.'\"&gt;'; }\n            #   }               \n            }\n            else\n            {\n                #$section_cnt++;\n                #$output.='&lt;div type=\"Section\" n=\"'.$section_cnt.'\"&gt;';\n                #$div=1;\n            }\n            #$line_cnt++;\n            $output.=\"\\n\\t\\t\\t\\t&lt;head&gt;\".$pg.$1.\"&lt;/head&gt;\"; \n            $pg='';\n            $p=0; $written=0; $v=0; $ut=0;\n            $last_line=''; $started=1;\n        }\n        elsif ($line =~ m/#v\\s*(.+)/)                           # verse\n        {\n            $output.=\"&lt;/note&gt;\" if ($ut == 1);\n            if ($p eq 1) { $output.=\"&lt;/p&gt;\" ;}\n            if ($v eq 0) { $group_cnt++; $verse_cnt=0; $output.=\"\\n\\t\\t\\t\\t\".'&lt;lg n=\"'.$group_cnt.'\"&gt;';  }\n            $verse_cnt++;\n            $last_line=$1;\n            $line_cnt++;            \n            $output.=\"\\n\\t\\t\\t\\t\\t\".'&lt;l n=\"'.$verse_cnt.'\"&gt;'.$pg.\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB\".$1.\"&lt;/l&gt;\";         \n            $p=0; \n            $written=1; $v=1;   \n            $started=1; $pg=''; $ut=0;\n        }\n        elsif ($line=~m/#\\s*\\-{2,}/) #elsif ($line eq '' &amp;&amp; $last_line ne '') # &amp;&amp; $last_line!~m/[\\.!\\?]\\s*$/)          # paragraph\n        {           \n            if ($written eq 1)\n            {\n                $output.=\"&lt;/note&gt;\" if ($ut == 1); \n                if ($p eq 1) { $output.=\"&lt;/p&gt;\"; $p=0;  }\n                elsif ($v eq 1 &amp;&amp; $written eq 0) { $output.=\"\\n\\t\\t\\t&lt;/lg&gt;\\n\\t\\t\\t\\t\"; $v=0; }\n            }               \n            #if ($p eq 0 &amp;&amp; $v eq 0) { $output.=\"\\n\\t\\t\\t\\t&lt;p&gt;\"; $p=1; }\n\n            $written=0; $last_line=''; $ut=0;\n        }\n        elsif ($line =~ m/^(?:#d)?\\s*(\\d{4}\\s*\u10ec\\.)$/ || $line=~m/^\\s*(\\d{4}(?: \u2013 \\d+\\s*\u10ec*\\.)?\\s*)$/ || $line=~m/^\\s*([0-9]+\\s*[\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]+\\s*[0-9]+\\s*[\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6]*)$/)          # dateline\n        {\n            if ($div eq 1 || $chapter eq 1)\n            { \n                $output.=\"&lt;/note&gt;\" if ($ut == 1);\n                if ($p eq 1) { $output.=\"&lt;/p&gt;\"; }\n                elsif ($v eq 1) { $output.=\"\\n\\t\\t\\t\\t&lt;/lg&gt;\"; }\n                $output.=\"\\n\\t\\t\\t&lt;/div&gt;\"; \n                $chapter=0; $div=0; $ut=0;\n            }\n            $line_cnt++;\n            $output.=\"\\n\\t\\t\\t\\t&lt;div type=\\\"dateline\\\"&gt;&lt;p&gt;\".$pg.\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB\".$1.\"&lt;/p&gt;&lt;/div&gt;\"; \n            $p=0;  $written=0; $v=0; $pg=''; \n            $last_line=\"\";\n        }\n        elsif ($div eq 1 || $chapter eq 1 || ($div eq 0 &amp;&amp; $chapter eq 0))\n        {\n            if ($line!~m/^\\s*$/)\n            {\n                $output.=\"\\n\\t\\t\\t\\t&lt;/lg&gt;\" if ($v eq 1);\n                if ($div eq 0 &amp;&amp; $chapter eq 0) { $div=1; $section_cnt++; $output.=\"\\n\\t\\t\\t\".'&lt;div type=\"Section\" n=\"'.$section_cnt.'\"&gt;';}\n                if ($p eq 0) { $output.=\"\\n\\t\\t\\t\\t&lt;p&gt;\";  }\n                $line=~s/\\s*#\\s*//g;\n\n                # --- quotes\n                $line=~s/([\\.,;\\?!:])\u201e/$1\u201c/g;       #\u201e \u201c\n                if ($line=~m/^\\s*\u201e/ &amp;&amp; $line!~m/\u201c/ &amp;&amp; $line=~m/[\\.\\?!:]+\\s*$/)\n                {   \n                    $line.=\"\u201c\"; \n                }               \n                else \n                {\n                    $line=~s/\u201e//g;\n                }\n                $line=~s/\u201c//g if ($line=~m/\u201c/ &amp;&amp; $line!~m/\u201e/);\n                # ---\n\n                # --- ref\n                $line=~s/&lt;ref target=\"a(\\d+)\" type=\"noteAnchor\"&gt;/&lt;ref target=\"#a_$page\\_$1\" type=\"noteAnchor\"&gt;/g;\n                $line=~s/&lt;note xml:id=\"a(\\d+)\" type=\"footnote\"&gt;/&lt;note xml:id=\"a_$page\\_$1\" type=\"footnote\"&gt;/g;          \n                # ---\n\n                if ($line=~m/\\|ut/)\n                {\n                    $line=~s/\\|ut/&lt;note type=\"comment\"&gt;/;\n                    $ut=1;\n                }\n\n                $output.=check_linebreak($line,$pg);\n                #$line_cnt++;\n                #if ($line=~m/([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6\\-]+)\\/([\u10d0\u10d1\u10d2\u10d3\u10d4\u10d5\u10d6\u10d7\u10d8\u10d9\u10da\u10db\u10dc\u10dd\u10de\u10df\u10e0\u10e1\u10e2\u10e3\u10e4\u10e5\u10e6\u10e7\u10e8\u10e9\u10ea\u10eb\u10ec\u10ed\u10ee\u10ef\u10f0\u10f1\u10f2\u10f3\u10f4\u10f5\u10f6\\-]+[[:punct:]]*)/)\n                #{                  \n                #   my $tmp1=$1; my $tmp2=$2;\n                #   my $z=\"TRENNENDERZBTRENNENDERZB\".($line_cnt+1).\"TRENNENDERZBTRENNENDERZB\";\n                #   $line=~s/\\Q$tmp1\\E\\/\\Q$tmp2\\E/$tmp1$z$tmp2/; $line.=\" \";\n                #   if ($coded_lb eq 0)\n                #   {\n                #       $output.=$pg.\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB \".$line;\n                #   }\n                #   else\n                #   {\n                #       $output.=$pg.$line; \n                #   }\n                #   $coded_lb=1;\n                #}\n                #else\n                #{\n                #   if ($coded_lb eq 0)\n                #   {\n                #       $output.=$pg.\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB \".$line;\n                #   }\n                #   else\n                #   {\n                #       $output.=$pg.$line;                     \n                #   }\n                #   $coded_lb=0;\n                #}              \n                #$output.=$pg.\" \".\"NORMALERZBNORMALERZB\".$line_cnt.\"NORMALERZBNORMALERZB\".$line;\n                $last_line=$line;\n                $p=1; $written=1; $v=0; $started=1;$pg='';\n            }\n        }\n    }\n\n    if ($p eq 1) { $output.=\"&lt;/p&gt;\";}\n    elsif ($v eq 1) { $output.=\"\\n\\t\\t\\t\\t&lt;/lg&gt;\"; }\n    if ($div eq 1) { $output.=\"\\n\\t\\t\\t&lt;/div&gt;\"; }\n    elsif ($chapter eq 1) { $output.=\"\\n\\t\\t\\t&lt;/div&gt;\"; }\n\n    # -----------------------------------------\n    $output=end_verarbeitung($output,$fn,$folder_out).\"&lt;/div&gt;\";\n    # -----------------------------------------\n\n    #$fn=get_complete_filename($fn);    \n    mkdir($folder_out.\"\\\\\".$sub_folder,0777) if ($dev eq 0 &amp;&amp; !(-d $folder_out.\"\\\\\".$sub_folder));  \n    my $txt='&lt;text rend=\"Section\" xml:lang=\"kat\"&gt;';\n    $txt='&lt;text rend=\"'.($section_cnt?\"Section \":\"\").'Chapter\" xml:lang=\"kat\"&gt;' if ($has_chapters eq 1);\n    $output=header($fn,$folder_in,$folder_out).\"\\n\\t\".$txt.'    \n        &lt;body&gt;\n            '.$output.' \n        &lt;/body&gt;\n    &lt;/text&gt;';\n\n    $output=~s/(&lt;body&gt;(?:\\r\\n)*\\s*&lt;pb n=\"\\d+\"\\/&gt;)(?:\\r\\n)*\\s*&lt;\\/div&gt;/$1/g;\n\n    $output_filename=$folder_out.($dev eq 0 ? \"\\\\\".$sub_folder : \"\").\"\\\\\".$fn.\".xml\";           \n    open (OUT, \"&gt;:encoding(utf-8)\", $output_filename);\n    print OUT '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;'.\"\\n\".'&lt;!DOCTYPE TEI [\n    &lt;!ENTITY header SYSTEM \"'.$fn.'.teih\"&gt;\n    &lt;!ENTITY text SYSTEM \"'.$fn.'.txml\"&gt;\n]&gt;\n&lt;TEI xmlns=\"http://www.tei-c.org/ns/1.0\" xmlns:gnc=\"http://iness.uib.no/ns/1.0\"&gt;\n    &amp;header;\n    &amp;text;\n&lt;/TEI&gt;';\n    close (OUT);\n    $output_filename=~s/\\.xml/\\.txml/gi;\n    open (OUT, \"&gt;:encoding(utf-8)\",$output_filename) || die \"konnte die ausgabedatei \\\"$output_filename\\\" nicht oeffnen: $!\\n\";\n    print OUT $output;\n    close OUT;          \n}\n\nsub main\n{\n    print \"\\nBeginne...\\n\";\n\n    my $root=\"D:\\\\bla\";\n    my @startfolders=($root.\"\\\\\");\n    $folder_out=\"D:\\\\bla\";\n    foreach my $startfolder(@startfolders)\n    {\n        @folders=();\n        get_files($startfolder);\n        if (scalar(@folders)&lt;1) { push(@folders,$startfolder); }\n        $root=~s/0_Eingabe/1_Ausgabe\\\\1/;\n        foreach $folder_in(@folders)\n        {\n            $page_errors='';\n            $folder_out=$folder_in;\n            $folder_out=~s/0_Eingabe/1_Ausgabe/;\n            # creating subfolders too\n            #my $tmp=$folder_out;\n            #$tmp=~s/\\Q$root\\E//;           \n            #my @arr_tmp=split(\"\\\\\\\\\",$tmp);\n            #$tmp=\"\";\n            #foreach my $dings (@arr_tmp)\n            #{              \n            #   next if ($dings eq '');\n            #   $tmp.=\"\\\\\".$dings;                              \n            #   mkdir($root.$tmp,0777) if (!(-d $root.$tmp));\n            #}#\n            # ----- \n\n            $folder_out=~s/\\\\+/\\\\/g;\n            $dev = 1;   # entwicklermodus an bei 1\n            $folder_out=~s/1_Ausgabe.*/1_Ausgabe/ if ($dev eq 1);\n\n            print \"Ordner \".$folder_in.\"\\n\";\n            foreach my $file_xml(&lt;${folder_in}/*.txt&gt;)\n            {\n                go_go_gadget($file_xml);\n            }\n\n            next;\n\n            if ($page_errors ne '')\n            {\n                $folder_in=~m/0_Eingabe\\\\(.+)/;\n                my $tmp=$1;\n                $tmp=~s/\\\\+/__/g;           \n                open (OUT, \"&gt;:encoding(utf-8)\", $root.\"\\\\\".$tmp.\".txt\") || die \"\\n\\tPage errors to file \".$tmp.\": \".$!.\"\\n\";\n                print OUT $page_errors;\n                close OUT;\n            }\n        }\n    }\n\n    print \"Fertig!\\n\\n\";\n}\n\nmain();\n</code></pre>\n\n<p>However some files are taking too long to process.\nI would like to skip either of the steps if they take more than 6 seconds. \nIn such way that if the handled file takes too long to convert, it skips to the next one.\nAny suggestions on how I can do this via timeout? </p>\n"}, {"tags": ["linux", "perl", "alpine", "libev", "cpanm"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1471804664, "post_id": 39066238, "comment_id": 65483377, "body": "I&#39;m sorry to tell you that EV is unlikely to work with many perl builds, and please don&#39;t take my word for this please read some recent reviews (<a href=\"http://cpanratings.perl.org/dist/EV\" rel=\"nofollow noreferrer\">cpanratings.perl.org/dist/EV</a>) and do some further research on p5p"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1471804989, "post_id": 39066238, "comment_id": 65483471, "body": "@Dr.Avalanche note that on debian it works with the same perl build."}, {"owner": {"reputation": 8398, "user_id": 2217862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061bdb74aa4a543108658b277a257b4b?s=128&d=identicon&r=PG", "display_name": "Jakub Jirutka", "link": "https://stackoverflow.com/users/2217862/jakub-jirutka"}, "edited": false, "score": 0, "creation_date": 1471989111, "post_id": 39066238, "comment_id": 65569930, "body": "@\u0421\u0443\u0445\u043e\u043927 Do you have perl-dev installed?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 8398, "user_id": 2217862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061bdb74aa4a543108658b277a257b4b?s=128&d=identicon&r=PG", "display_name": "Jakub Jirutka", "link": "https://stackoverflow.com/users/2217862/jakub-jirutka"}, "edited": false, "score": 0, "creation_date": 1472019355, "post_id": 39066238, "comment_id": 65577960, "body": "@JakubJirutka no, I&#39;m using my own perl built from source under my home dir. (<a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">github.com/tokuhirom/plenv</a> similar to perlbrew)"}], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 2, "last_activity_date": 1472107396, "creation_date": 1472107396, "answer_id": 39138381, "question_id": 39066238, "link": "https://stackoverflow.com/questions/39066238/cant-install-ev-cpan-module-on-alpine-linux/39138381#39138381", "title": "Can&#39;t install EV cpan module on alpine linux", "body": "<p>So <a href=\"http://www.musl-libc.org/\" rel=\"nofollow\"><code>musl-libc</code></a> which is used in alpine linux instead of glibc, doesn't implement <code>__register_atfork</code> which is part of <a href=\"http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/baselib--register-atfork.html\" rel=\"nofollow\"><code>the linux standard base</code></a></p>\n\n<p>If you're absolutely sure you can live without non-working fork detection, you can install <a href=\"https://metacpan.org/release/EV\" rel=\"nofollow\"><code>EV</code></a> by instructing it to skip that feature,</p>\n\n<pre><code>export EV_EXTRA_DEFS=\"-DEV_NO_ATFORK\"\ncpanm EV\n</code></pre>\n"}], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1472107396, "creation_date": 1471795972, "question_id": 39066238, "link": "https://stackoverflow.com/questions/39066238/cant-install-ev-cpan-module-on-alpine-linux", "title": "Can&#39;t install EV cpan module on alpine linux", "body": "<p>While this works on debian, alpine refuses to compile (<code>perl 5.20.3 &amp;&amp; plenv</code>).</p>\n\n<p>Modules instaled =></p>\n\n<pre><code>apk update &amp;&amp; apk upgrade\napk add bash wget curl perl make g++ libev-dev patch git openssl-dev openssl\n</code></pre>\n\n<p>How to explain relevant error from cpanm log?</p>\n\n<pre><code>Running Mkbootstrap for EV ()\nchmod 644 EV.bs\n/root/.plenv/versions/5.20.3/bin/perl5.20.3 /root/.plenv/versions/5.20.3/lib/perl5/5.20.3/ExtUtils/xsubpp  -typemap /root/.plenv/versions/5.20.3/lib/perl5/5.\n20.3/ExtUtils/typemap -typemap typemap  EV.xs &gt; EV.xsc &amp;&amp; mv EV.xsc EV.c\ncc -c  -Ilibev -fwrapv -fno-strict-aliasing -pipe -fstack-protector -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"4.22\\\" -DXS_VERSION=\\\"4.22\\\"\n -fPIC \"-I/root/.plenv/versions/5.20.3/lib/perl5/5.20.3/x86_64-linux/CORE\"  -DEV_USE_REALTIME=0 -DEV_USE_SELECT=1 -DEV_USE_POLL=1 -DEV_USE_EPOLL=1 -DEV_USE_K\nQUEUE=0 -DEV_USE_PORT=0 -DEV_USE_INOTIFY=1 -DEV_USE_EVENTFD=1 -DEV_USE_SIGNALFD=1  EV.c\nrm -f blib/arch/auto/EV/EV.so\ncc  -shared -O2 -L/usr/local/lib -fstack-protector EV.o  -o blib/arch/auto/EV/EV.so     \\\n        \\\n\nchmod 755 blib/arch/auto/EV/EV.so\n/root/.plenv/versions/5.20.3/bin/perl5.20.3 -MExtUtils::Command::MM -e 'cp_nonempty' -- EV.bs blib/arch/auto/EV/EV.bs 644\nManifying blib/man3/EV.0\nManifying blib/man3/EV::MakeMaker.0\nManifying blib/man3/EV::libev.0\nRunning Mkbootstrap for EV ()\nchmod 644 EV.bs\nPERL_DL_NONLAZY=1 /root/.plenv/versions/5.20.3/bin/perl5.20.3 \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(\n0, 'blib/lib', 'blib/arch')\" t/*.t\nsyntax error at t/00_load.t line 10, near \"EV::idle sub \"\nsyntax error at t/00_load.t line 10, near \"-&gt;stop }\"\nsyntax error at t/00_load.t line 16, near \"EV::idle sub \"\nsyntax error at t/00_load.t line 16, near \"-&gt;stop }\"\nExecution of t/00_load.t aborted due to compilation errors.\nt/00_load.t ........\nDubious, test returned 255 (wstat 65280, 0xff00)\nFailed 4/5 subtests\nCan't load '/root/.cpanm/work/1471788690.18875/EV-4.22/blib/arch/auto/EV/EV.so' for module EV: Error relocating /root/.cpanm/work/1471788690.18875/EV-4.22/bl\nib/arch/auto/EV/EV.so: __register_atfork: symbol not found at /root/.plenv/versions/5.20.3/lib/perl5/5.20.3/x86_64-linux/DynaLoader.pm line 193.\n at /root/.cpanm/work/1471788690.18875/EV-4.22/blib/lib/EV.pm line 128.\nBEGIN failed--compilation aborted at /root/.cpanm/work/1471788690.18875/EV-4.22/blib/lib/EV.pm line 128.\nCompilation failed in require at t/01_timer.t line 15.\nBEGIN failed--compilation aborted at t/01_timer.t line 15.\nt/01_timer.t .......\nDubious, test returned 255 (wstat 65280, 0xff00)\nFailed 6002/6002 subtests\n</code></pre>\n"}, {"tags": ["regex", "perl", "replace"], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471789647, "post_id": 39065150, "comment_id": 65479154, "body": "Thank you for your quick answer. I&#39;m getting an error though, saying: <code>Use of uninitialized value $corres{&quot;&quot;} in substitution iterator at &#47;Users&#47;me&#47;Library&#47;Scripts&#47;script.pl line 18, &lt;$fh_in&gt; line 3.</code> I&#39;m running from the command line with <code>perl script.pl input.txt output.txt</code>"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471789681, "post_id": 39065150, "comment_id": 65479169, "body": "also I corrected in line 12 there seems to be an &quot;s&quot; missing in &lt;$fh_peudo&gt;"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471793692, "post_id": 39065150, "comment_id": 65480310, "body": "@jan: I&#39;ve modified the script to take into account null name or pseudo. Also, you&#39;re right about missing <code>s</code>."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471794760, "post_id": 39065150, "comment_id": 65480614, "body": "That works! Thanks so much.  Just one more question if I may: If I want to integrate that part into another script that already has a (rather complex) while-loop like this <code>while (&lt;$fh_in&gt;) { if</code> ... and then some other stuff ...  <code>print $fh_out $_; }</code> how would I combine them? I tried writing one <code>while</code> block after the other but that didn&#39;t do it."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471797697, "post_id": 39065150, "comment_id": 65481450, "body": "@jan: The best way is to change <code>$_</code> by <code>$line</code> in the the whole while loop."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471798439, "post_id": 39065150, "comment_id": 65481655, "body": "I figured it out.  \u2014  Just out of curiosity, since I&#39;m not very used to voting behavior here on SO, aside from accepting your answer I also upvoted it, but then someone downvoted right away so it&#39;s back to 0.  Should I not have upvoted?  What is considered an answer worthy of a vote?  Whomever downvoted also didn&#39;t leave any comment explaining why ..."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471855904, "post_id": 39065150, "comment_id": 65497975, "body": "@jan: There&#39;re no real rules for up/down voting. It&#39;s up to you, If the answer seems usefull for you, upvote it, if it seems totaly wrong, downvote. Some people never gives reason for downvoting, here, my answer and the other one have been downvoting without any reason, c&#39;est la vie."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471856279, "post_id": 39065150, "comment_id": 65498236, "body": "Nonetheless it&#39;s weird why someone would do that?  Even the other answer is useful too, so I upvoted too, but then it got a downvote.  Well at least now you got another upvote :)"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 1, "last_activity_date": 1471793616, "last_edit_date": 1471793616, "creation_date": 1471788777, "answer_id": 39065150, "question_id": 39065011, "link": "https://stackoverflow.com/questions/39065011/replace-words-with-perl-script-reading-from-table-to-anonymize-names/39065150#39065150", "title": "replace words with perl script reading from table (to anonymize names)", "body": "<p>Read the file that contains the correspondances in a hash then do the substitution like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nopen my $fh_in, '&lt;', $ARGV[0] or die \"No input: $!\";\nopen my $fh_out, '&gt;', $ARGV[1] or die \"No output: $!\";\n\nopen my $fh_pseudo, '&lt;', \"path/to/pseudo\" or die \"unable to open pseudo: $!\";\nmy %corres;\nwhile (&lt;$fh_pseudo&gt;) {\n    chomp;\n    my ($name, $pseudo) = split /\\t/, $_;\n    $corres{$name} = $pseudo if $name &amp;&amp; $pseudo;\n}\n\nwhile (my $line = &lt;$fh_in&gt;) {\n    $line =~ s/\\b$_\\b/$corres{$_}/g for keys %corres;\n    print $fh_out $line;\n}   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471793359, "post_id": 39065645, "comment_id": 65480213, "body": "Thanks for this.  There are two reasons, why I prefer to have the DATA in a separate file. (a) this is part of a larger setup in which two or three different scripts that already do other replacements should as a last step do the anonymizations and they all need the same replacement data, and (b) new names will continuously be added to the file, and I&#39;d rather not have to add them to all the scripts.  Would it be possible to adapt your answer to separate the DATA part from the script itself?"}, {"owner": {"reputation": 173, "user_id": 6317042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1057926774279190/picture?type=large", "display_name": "Marco Silva", "link": "https://stackoverflow.com/users/6317042/marco-silva"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1471799951, "post_id": 39065645, "comment_id": 65482105, "body": "Yes it is, simply:  open(my $fh, &quot;&lt;&quot;, $nickname_file) and change while ( &lt;DATA&gt;) to while (&lt;$fh&gt;)"}], "tags": [], "owner": {"reputation": 173, "user_id": 6317042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1057926774279190/picture?type=large", "display_name": "Marco Silva", "link": "https://stackoverflow.com/users/6317042/marco-silva"}, "is_accepted": false, "score": 0, "last_activity_date": 1471791983, "creation_date": 1471791983, "answer_id": 39065645, "question_id": 39065011, "link": "https://stackoverflow.com/questions/39065011/replace-words-with-perl-script-reading-from-table-to-anonymize-names/39065645#39065645", "title": "replace words with perl script reading from table (to anonymize names)", "body": "<p>It is easier if you read all the contents of the file you will perform the substitutions in memory before to make the substitutions.</p>\n\n<p>Also you should be careful to not substitute a particular substring. If you have your Input file: \"Hello Fred\". And in the substitution list \"Fred Frank\" and \"Frank Frankstein\" you will end up with \"Hello Frankstein\"...</p>\n\n<p>I put the substitution list under the <strong>DATA</strong> section, to make it self contained.</p>\n\n<pre><code>use strict;                                                                      \nuse warnings;                                                                    \nuse utf8;                                                                        \nuse IO::All;                                                                        \n\nmy %list;                                                                        \n\ndie \"File not found or can't be read\\n\"                                          \nunless $ARGV[0] &amp;&amp; -e $ARGV[0] &amp;&amp; -r $ARGV[0];                                 \n\ndie \"Need an output file name\\n\" unless $ARGV[1];                                \nmy $output = $ARGV[1];                                                           \n\nwhile (&lt;DATA&gt;) {                                                                 \n    my ( $name, $nick ) = m/(\\w+)\\t(\\w+)$/;                                      \n    next unless $name &amp;&amp; $nick;                                                  \n    $list{$name} = $nick;                                                        \n}                                                                                   \n\nmy $contents = io-&gt;file($ARGV[0])-&gt;slurp;                                           \n\nfor my $name ( keys %list ) {                                                    \n    $contents =~ s/\\b$name\\b/$list{$name}/g;                                         \n}                                                                                \n\n$contents &gt; io($output);                                                         \n\n__DATA__                                                                         \n\nJohn    Jack                                                                     \nFred    Frank\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 39065150, "answer_count": 2, "score": 0, "last_activity_date": 1471793616, "creation_date": 1471787863, "question_id": 39065011, "link": "https://stackoverflow.com/questions/39065011/replace-words-with-perl-script-reading-from-table-to-anonymize-names", "title": "replace words with perl script reading from table (to anonymize names)", "body": "<p>I am looking for a way to replace words in a large text with perl and would like to read the words from another file containing the substitutions. I know I can do:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nopen my $fh_in, '&lt;', $ARGV[0] or die \"No input: $!\";\nopen my $fh_out, '&gt;', $ARGV[1] or die \"No output: $!\";\n\nwhile (&lt;$fh_in&gt;) \n{\n    s/John/Jack/g;\n\n    print $fh_out $_;\n}   \n</code></pre>\n\n<p>... and put any number of <code>s/Fred/Frank/g;</code> lines. \nIs it possible to refer to an external text file containing all the substitutions?  It's in order to anonymize Names in interviews. </p>\n\n<p>I'm thinking of keeping a simple text file in the Format:  </p>\n\n<pre><code>Name    Pseudonym   \nJohn    Jack  \nFred    Frank  \netc.\n</code></pre>\n\n<p>(separated by tabs)<br>\nIf there are better ways to do it I'd be thankful for suggestions. \nThe original comes from an Excel database that has all the name substitutions in two columns but it's fairly easy to get that into a text file and I don't want to make it too complicated since I'm not very familiar with scripting and stuff.  </p>\n"}, {"tags": ["perl", "snmp", "cpan", "net-snmp", "snmpd"], "owner": {"reputation": 71, "user_id": 5509994, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/afbe127414909f6706ae7e24faeb47f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5509994/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471841432, "creation_date": 1471785335, "last_edit_date": 1471841432, "question_id": 39064612, "link": "https://stackoverflow.com/questions/39064612/which-api-should-i-use-for-sending-snmpv3-trap", "title": "Which API should I use for sending snmpv3 trap", "body": "<p>I am using perl module Net::SNMP to create snmpv3 session. Can you please let me know which api can be used to send snmpv3 trap.</p>\n\n<p>I can see below information about <code>snmpv2_trap</code> api, so I think same cannot be used for sending snmpv3 trap</p>\n\n<p>NOTE: This method can only be used when the version of the object is set to SNMPv2c. SNMPv2-Trap-PDUs are supported by SNMPv3, but require the sender of the message to be an authoritative SNMP engine which is not currently supported by the Net::SNMP module.</p>\n\n<p><a href=\"http://search.cpan.org/~dtown/Net-SNMP-v6.0.1/lib/Net/SNMP.pm\" rel=\"nofollow\">http://search.cpan.org/~dtown/Net-SNMP-v6.0.1/lib/Net/SNMP.pm</a></p>\n"}, {"tags": ["perl", "intellij-idea", "ide", "editor", "helpers"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1471773388, "post_id": 39062634, "comment_id": 65474738, "body": "Did you try <a href=\"https://andrew.stwrt.ca/posts/vim-ctags/\" rel=\"nofollow noreferrer\"><code>ctags for vim</code></a> (supports Perl) and/or Perl&#39;s module <a href=\"http://search.cpan.org/~osfameron/Perl-Tags-0.30/README.pod\" rel=\"nofollow noreferrer\"><code>Perl::Tags</code></a>?"}, {"owner": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471774533, "post_id": 39062634, "comment_id": 65475032, "body": "I haven&#39;t. I&#39;m on Windows."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1471775208, "post_id": 39062634, "comment_id": 65475190, "body": "I believe that all of that can be used on Windows. The use of <code>ctags</code> is a very old, traditional (and effective) method of doing what you want.  On the other hand, I&#39;d imagine that major integrated environments have that functionality. Have you looked at <a href=\"http://padre.perlide.org/\" rel=\"nofollow noreferrer\"><code>Padre</code></a>, and how is ActiveState in this regard?"}, {"owner": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471775524, "post_id": 39062634, "comment_id": 65475263, "body": "I don&#39;t know how to install Padre without the additional unwanted stuff. I already have StrawberryPerl installed, so I don&#39;t need another one. ActiveState requires its own flavour of Perl installed, as well. It would take a day just to reinstall all the CPAN modules that I need in a new Perl installation."}, {"owner": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471777862, "post_id": 39062634, "comment_id": 65475842, "body": "Thank you to whoever gave the <code>-1</code> without explaining why."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1471810323, "post_id": 39062634, "comment_id": 65484992, "body": "I didn&#39;t realize that Padre for Windows only comes in a big bundle. As for ActiveState, it has a separate editor, which comes in two versions, &quot;Komodo Edit&quot; (free) and &quot;Komodo IDE&quot;.  The feature you need may not be in the free version (I don&#39;t know) but there is the 21-day trial for the other one.  This is a very good editor.  But again, the ctags-with-gvim and the Perl module, from my first comment, can surely help you out. I don&#39;t know what is your editor of choice, but Perl::Tags seems to not depend on that.."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "edited": false, "score": 0, "creation_date": 1471856902, "post_id": 39073024, "comment_id": 65498676, "body": "Can I give it a folder for it to search for <code>.pl&#47;.pm</code> files and exclude the rest from indexing?"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "edited": false, "score": 0, "creation_date": 1471859620, "post_id": 39073024, "comment_id": 65500501, "body": "You can go on the menu-&gt;file-&gt;open and in the windows that appears go to the wanted folder and type in the search box <code>*.pm|*.pl</code>. Then select all of them and press open."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "edited": false, "score": 0, "creation_date": 1471859931, "post_id": 39073024, "comment_id": 65500692, "body": "I added a screenshot"}, {"owner": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "edited": false, "score": 0, "creation_date": 1471870357, "post_id": 39073024, "comment_id": 65507724, "body": "Which version of Eclipse should I install? Isn&#39;t there a blank version? They all have flavours, Java, C, PHP, etc. I went for PHP and added EPIC module, but the menus are still PHP related."}], "tags": [], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1471859897, "last_edit_date": 1471859897, "creation_date": 1471849013, "answer_id": 39073024, "question_id": 39062634, "link": "https://stackoverflow.com/questions/39062634/perl-editor-helper-features-go-to-declaration-go-to-implementations/39073024#39073024", "title": "Perl Editor helper features - go to declaration / go to implementations", "body": "<p>How about eclipse?<br>\nYou can open all your modules in separate tabs. If you want to find the next use of a soubroutine, just select it's name and press <code>Ctrl+K</code>. If you want to jump to the declatation of the subroutine in current module just select it's name and press <code>F3</code>. If it is defined in another module just <code>Ctrl+H</code> (this will search in all the project modules for the given name; tip: if you want to search for soubroutine <code>do_something</code>, search for <code>sub do_something</code>) and it will return you were in which the soubroutine is defined.<br> It also indexes your soubroutines (clicking on a soubroutnie will jump you straight to your sub declaration).<br>\nTo asnwwer your comment, yes you can add a filter to select only the wanted extensions.\n<a href=\"https://i.stack.imgur.com/64GQ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/64GQ0.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 191, "user_id": 997613, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf6c303f4dd1f5181593a1f50d577536?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/997613/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1471859897, "creation_date": 1471770761, "question_id": 39062634, "link": "https://stackoverflow.com/questions/39062634/perl-editor-helper-features-go-to-declaration-go-to-implementations", "title": "Perl Editor helper features - go to declaration / go to implementations", "body": "<p>I want to refactor some local <code>Perl packages</code> that I wrote poorly, but I have calls to their subroutines in a bunch of scripts scattered in a tree of directories.</p>\n\n<p>I need an editor to allow me to jump to subroutine declaration and to find implementations/usages. </p>\n\n<p>I have tried <code>https://github.com/Camelcade/Perl5-IDEA</code> and <code>Notepad++ SourceCookiefier</code>.</p>\n\n<p>SourceCookiefier isn't a real solution, it cannot find implementations, and you have to manually specify the files that you want it to index.</p>\n\n<p>On the other hand, <code>Perl5-IDEA</code>seems to be more up to the job, but when I specify the module's root folder, it starts to index everything that it finds, until it hangs/runs out of memory. \nBesides those <code>.pl/.pm</code> scripts I have lots of other data files, which I cannot separate for the moment from those directories. I would have needed an exclude type filter for them. I cannot find an exclude filter in <code>IntelliJ + Perl5-IDEA plugin</code>. </p>\n\n<p>So, do you know what editor could I use to benefit from <code>go to declaration / go to implementations</code> and capable of importing <code>.pl/.pm</code> files from subdirectories of a specified root directory?</p>\n"}, {"tags": ["perl", "selenium", "ubuntu"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1471759750, "post_id": 39060712, "comment_id": 65471949, "body": "<code>libtest-www-selenium-perl</code> provides <code>Test::WWW::Selenium</code> and <code>WWW::Selenium</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 0, "last_activity_date": 1471764102, "creation_date": 1471764102, "answer_id": 39061818, "question_id": 39060712, "link": "https://stackoverflow.com/questions/39060712/how-to-install-seleniumremotedriver-in-ubuntu/39061818#39061818", "title": "How to install Selenium::Remote::Driver in Ubuntu?", "body": "<p><a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow\">Selenium::Remote::Driver</a> is not part of <a href=\"https://metacpan.org/pod/Test::WWW::Selenium\" rel=\"nofollow\">Test::WWW::Selenium</a>. From the <a href=\"https://metacpan.org/source/GEMPESAW/Selenium-Remote-Driver-0.2701/INSTALL.md\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>Installation<br>\n  It's probably easiest to use the <code>cpanm</code> or <code>CPAN</code>\n  commands:   <code>bash $ cpanm Selenium::Remote::Driver</code></p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 981698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7438cdb5cb9d0e114554ad4ea489b72?s=128&d=identicon&r=PG", "display_name": "Aishwarya Shukla", "link": "https://stackoverflow.com/users/981698/aishwarya-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1471764102, "creation_date": 1471751670, "last_edit_date": 1471759653, "question_id": 39060712, "link": "https://stackoverflow.com/questions/39060712/how-to-install-seleniumremotedriver-in-ubuntu", "title": "How to install Selenium::Remote::Driver in Ubuntu?", "body": "<p>I am trying to write a small code but as soon as i am importing \"<strong>Selenium::Remote::Driver:</strong>\", i get an error stating \n\"Can't locate Selenium/Remote/Driver.pm in @INC\"</p>\n\n<p>I have tried installing it using below command</p>\n\n<pre><code>sudo apt-get install libtest-www-selenium-perl\n</code></pre>\n\n<p>still i get same error </p>\n\n\n\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e 'use Selenium::Remote::Driver;'\nCan't locate Selenium/Remote/Driver.pm in @INC (you may need to install the Selenium::Remote::Driver module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.22.1 /usr/local/share/perl/5.22.1 /usr/lib/x86_64-linux-gnu/perl5/5.22 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.22 /usr/share/perl/5.22 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base .) at -e line 1.\nBEGIN failed--compilation aborted at -e line 1.\n</code></pre>\n</blockquote>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1471735792, "post_id": 39059572, "comment_id": 65468615, "body": "What have you tried? What exactly is a &quot;duplicate&quot;? Why is this tagged <code>perl</code>?"}, {"owner": {"reputation": 130, "user_id": 2437599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WWK3O.jpg?s=128&g=1", "display_name": "ChathuraG", "link": "https://stackoverflow.com/users/2437599/chathurag"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1471737545, "post_id": 39059572, "comment_id": 65468893, "body": "I tried to do this in perl and I felt like there should be better way using unix. a duplicate is x,y = y,x. so my 2 and 3 columns can interchange but it is same information."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1471740314, "post_id": 39059572, "comment_id": 65469280, "body": "What do you mean by &quot;using unix&quot;?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1471748152, "post_id": 39059572, "comment_id": 65470393, "body": "Your latest update says &quot;it worked&quot; while there is residual commentary &quot;This is my Perl code but it does not work&quot;.  Since they contradict each other, at most one of them is correct.  It is also generally not a good idea to post broken code and then update it so it is working code.  At minimum, keep the broken code around and add the working code, or consider adding a self-answer (an answer by the person asking the question) with the fixed code and an explanation of what you fixed.  You can accept that a couple of days later if it is still the best answer."}], "answers": [{"tags": [], "owner": {"reputation": 14359, "user_id": 5384363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/975cbfcd1c4997cb9e85887a5271d48f?s=128&d=identicon&r=PG&f=1", "display_name": "for_stack", "link": "https://stackoverflow.com/users/5384363/for-stack"}, "is_accepted": false, "score": 1, "last_activity_date": 1471747346, "creation_date": 1471747346, "answer_id": 39060407, "question_id": 39059572, "link": "https://stackoverflow.com/questions/39059572/delete-duplicates-when-the-duplicates-are-not-in-the-same-column-and-not-same-or/39060407#39060407", "title": "Delete duplicates when the duplicates are not in the same column and not same order in Unix", "body": "<p>You can reorder each line before put it into the hash:</p>\n\n<ol>\n<li>Split each line with <code>,</code> into fields: <code>my @fields = split /,/; pop @fields;</code></li>\n<li>Sort the fields: <code>@fields = sort @fields</code>;</li>\n<li>Join the sorted fields into a new string: <code>my $str = join \"\\t\", @fields;</code></li>\n<li>Check if the new string exists in hash: <code>$hash{$str} = $_ unless exists $hash{$str}</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1471768664, "creation_date": 1471768664, "answer_id": 39062391, "question_id": 39059572, "link": "https://stackoverflow.com/questions/39059572/delete-duplicates-when-the-duplicates-are-not-in-the-same-column-and-not-same-or/39062391#39062391", "title": "Delete duplicates when the duplicates are not in the same column and not same order in Unix", "body": "<p>There is no need for such complication. If you <em>sort</em> the fields in a record so that any given pair of values is always in the same order then you can simply print a record if its contents haven't been seen before</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %seen;\n\nwhile ( &lt;DATA&gt; ) {\n    my @fields = sort /[^,\\s]+/g;\n    print unless $seen{\"@fields[0,1]\"}++;\n}\n\n\n__DATA__\nAB006589__ESR2,BC024181__ESR2,0.47796\nAB006589__ESR2,X55739__CSN2,0.47232\nAB006589__ESR2,NM_004991__MDS1,0.46704\nAB006589__ESR2,NM_003476__CSRP3,0.45767\nAB006589__ESR2,NM_012101__TRIM29,0.45094\nAB006589__ESR2,NM_006897__HOXC9,0.41748\nAB006589__ESR2,NM_000278__PAX2,0.4161\nNM_003476__CSRP3,AB006589__ESR2,0.45767\nNM_012101__TRIM29,AB006589__ESR2,0.45094\nNM_006897__HOXC9,AB006589__ESR2,0.41748\nNM_000278__PAX2,AB006589__ESR2,0.4161\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>AB006589__ESR2,BC024181__ESR2,0.47796\nAB006589__ESR2,X55739__CSN2,0.47232\nAB006589__ESR2,NM_004991__MDS1,0.46704\nAB006589__ESR2,NM_003476__CSRP3,0.45767\nAB006589__ESR2,NM_012101__TRIM29,0.45094\nAB006589__ESR2,NM_006897__HOXC9,0.41748\nAB006589__ESR2,NM_000278__PAX2,0.4161\n</code></pre>\n"}], "owner": {"reputation": 130, "user_id": 2437599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WWK3O.jpg?s=128&g=1", "display_name": "ChathuraG", "link": "https://stackoverflow.com/users/2437599/chathurag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39062391, "answer_count": 2, "score": 0, "last_activity_date": 1471768664, "creation_date": 1471735513, "last_edit_date": 1471767901, "question_id": 39059572, "link": "https://stackoverflow.com/questions/39059572/delete-duplicates-when-the-duplicates-are-not-in-the-same-column-and-not-same-or", "title": "Delete duplicates when the duplicates are not in the same column and not same order in Unix", "body": "<pre class=\"lang-none prettyprint-override\"><code>AB006589__ESR2,BC024181__ESR2,0.47796\nAB006589__ESR2,X55739__CSN2,0.47232\nAB006589__ESR2,NM_004991__MDS1,0.46704\nAB006589__ESR2,NM_003476__CSRP3,0.45767\nAB006589__ESR2,NM_012101__TRIM29,0.45094\nAB006589__ESR2,NM_006897__HOXC9,0.41748\nAB006589__ESR2,NM_000278__PAX2,0.4161\nNM_003476__CSRP3,AB006589__ESR2,0.45767\nNM_012101__TRIM29,AB006589__ESR2,0.45094\nNM_006897__HOXC9,AB006589__ESR2,0.41748\nNM_000278__PAX2,AB006589__ESR2,0.4161\n</code></pre>\n\n<p>Now, the problem is that line 4</p>\n\n<pre><code>AB006589__ESR2,NM_003476__CSRP3,0.45767\n</code></pre>\n\n<p>is a duplicate of line 8</p>\n\n<pre><code>NM_003476__CSRP3,AB006589__ESR2,0.45767\n</code></pre>\n\n<p>There are many cases like this in my large CSV file.</p>\n\n<p>So, my question is to identify all duplicates and somehow delete one of them.</p>\n\n<pre><code>use strict;\n\nmy %hash = ();\n\nopen(tf, \"tf_tf_mic.csv\");\n\nwhile ( &lt;tf&gt; ) {\n    chomp;\n#    print \"$_\\n\";                                                                                                    \n    my @words = split \",\", $_;\n    if ( exists $hash{\"$words[0]\\t$words[1]\"} || exists $hash{\"$words[1]\\t$words[0]\"} ) {\n\n    }\n    else{\n        $hash{\"$words[0]\\t$words[1]\"} = $_;\n    }\n}\n\nforeach ( keys %hash ) {\n    print \"$hash{$_}\\n\";\n}\n</code></pre>\n\n<p>This actually worked in 10 seconds for a 4 million line file. </p>\n"}, {"tags": ["regex", "perl", "replace", "sed"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1471724142, "post_id": 39058294, "comment_id": 65466098, "body": "Since when does sed support <code>.*?</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471724217, "post_id": 39058294, "comment_id": 65466111, "body": "I see you have Perl as one of your tags, which is good because you need a proper XML parser like <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> which sed doesn&#39;t have. You should also use <a href=\"http://search.cpan.org/~sixtease/XML-Entities-1.0002/lib/XML/Entities.pm\" rel=\"nofollow noreferrer\"><code>XML::Entities</code></a> to encode your text."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471724350, "post_id": 39058294, "comment_id": 65466157, "body": "@Borodin Used to have. I removed the &quot;perl&quot; tag because nothing in the title or question was related to perl. :-/"}, {"owner": {"reputation": 39, "user_id": 4457179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okaI1.jpg?s=128&g=1", "display_name": "Spy", "link": "https://stackoverflow.com/users/4457179/spy"}, "edited": false, "score": 0, "creation_date": 1471724360, "post_id": 39058294, "comment_id": 65466159, "body": "Could you provide an example using XML::Entities?  Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471724387, "post_id": 39058294, "comment_id": 65466164, "body": "I now see that you have removed your Perl tag. That is a very bad move. Parsing XML reliably using regex patterns is impossible."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471724437, "post_id": 39058294, "comment_id": 65466177, "body": "There are examples in the documentation that I linked to."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1471729408, "post_id": 39058294, "comment_id": 65467402, "body": "I see you re-added the <code>perl</code> tag. But your question asks &quot;... in sed?&quot;, so I don&#39;t see how perl is relevant here."}, {"owner": {"reputation": 39, "user_id": 4457179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okaI1.jpg?s=128&g=1", "display_name": "Spy", "link": "https://stackoverflow.com/users/4457179/spy"}, "edited": false, "score": 0, "creation_date": 1471730026, "post_id": 39058294, "comment_id": 65467521, "body": "I could use perl as an option.  I&#39;ve generated the xml &#39;by hand&#39;, using XML::Entities I will be able to escape the reserved characters?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471803759, "post_id": 39058294, "comment_id": 65483148, "body": "They&#39;re trying to fix bad XML. Suggestions to use a proper parser are not helpful."}], "answers": [{"tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 0, "last_activity_date": 1471769244, "creation_date": 1471769244, "answer_id": 39062452, "question_id": 39058294, "link": "https://stackoverflow.com/questions/39058294/replace-characters-with-entities-within-xml-attributes/39062452#39062452", "title": "Replace characters with entities within XML attributes", "body": "<p>Using perl you are able to do a find and replace like so:</p>\n\n<p>Find:</p>\n\n<pre><code>(?&lt;!=)(\")(?![^\"]*\\s+\\w+=|[^\"]*\\/?&gt;)\n</code></pre>\n\n<p>Replace with:</p>\n\n<pre><code>&amp;quot;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/eQ3aB3/1\" rel=\"nofollow\">Live demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1471804034, "creation_date": 1471804034, "answer_id": 39067522, "question_id": 39058294, "link": "https://stackoverflow.com/questions/39058294/replace-characters-with-entities-within-xml-attributes/39067522#39067522", "title": "Replace characters with entities within XML attributes", "body": "<pre><code>perl -i~ -pe's{&lt;person name=\"\\K(.*?)(?=\" sex)}{ $1 =~ s/\"/&amp;quot;/gr }eg' sample.xml\n</code></pre>\n\n<p>Or if you don't have 5.14,</p>\n\n<pre><code>perl -i~ -pe's{&lt;person name=\"\\K(.*?)(?=\" sex)}{ ( my $s = $1 ) =~ s/\"/&amp;quot;/g; $s }eg' sample.xml\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4457179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okaI1.jpg?s=128&g=1", "display_name": "Spy", "link": "https://stackoverflow.com/users/4457179/spy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1471804034, "creation_date": 1471723868, "last_edit_date": 1471730112, "question_id": 39058294, "link": "https://stackoverflow.com/questions/39058294/replace-characters-with-entities-within-xml-attributes", "title": "Replace characters with entities within XML attributes", "body": "<p>I want to escape double quotes inside a XML element. For instance</p>\n\n<p>FROM</p>\n\n<pre><code>&lt;person name=\"Tiberius Claudius \"Maximus\"\" sex=\"M\"&gt;\n</code></pre>\n\n<p>TO</p>\n\n<pre><code>&lt;person name=\"Tiberius Claudius &amp;quot;Maximus&amp;quot;\" sex=\"M\"&gt;\n</code></pre>\n\n<p>I was able to isolate the attribute value using sed:</p>\n\n<pre><code>$ cat sample.xml | sed -r 's/(&lt;person name=\")(.*)(\" sex.*)/\\2/'\n  Tiberius Claudius \"Maximus\"\n</code></pre>\n\n<p>Is there a way to replace double quotes <code>\"</code> with <code>&amp;quot;</code> within the second group?</p>\n"}, {"tags": ["perl", "hadoop", "hadoop2", "hadoop-streaming"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "edited": false, "score": 0, "creation_date": 1471793718, "post_id": 39065126, "comment_id": 65480317, "body": "Thank you Zaid. Last night I attempted to build the lookup by first aggregating the col and the value and using that aggregation as the key and just assigning a 1 to the value. this did free up some memory as it was no longer having to allocate 2 hashes for every entry. But your method would be even more efficient I think in terms of memory. I will give this a try and see what gains i see. thanks!"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "edited": false, "score": 0, "creation_date": 1471805297, "post_id": 39065126, "comment_id": 65483574, "body": "@marmalope there is even more scope for reducing the footprint. If I have time I will add more details, but the gist of the enhancement is to avoid creating the array references altogether and use strings directly"}, {"owner": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "edited": false, "score": 0, "creation_date": 1471805659, "post_id": 39065126, "comment_id": 65483692, "body": "So this approach significantly shrunk the memory consumed by about 65%... but it increased the run time from 15 to 90 minutes per pass. Thank you for the suggestion though."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "edited": false, "score": 0, "creation_date": 1471805987, "post_id": 39065126, "comment_id": 65483787, "body": "@marmalope There will be a trade-off for sure, but the speed may have something to do with the way I set up the regex. I just posted an alternative approach that might fare a little better."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "edited": false, "score": 0, "creation_date": 1471806522, "post_id": 39065126, "comment_id": 65483937, "body": "@marmalope I think it would be relevant for you to post what version of Perl your system is using, because certain regex trie optimizations were introduced after version 5.10."}, {"owner": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "edited": false, "score": 0, "creation_date": 1471814825, "post_id": 39065126, "comment_id": 65486298, "body": "thank you again. it looks like the increase in run time is only partially due to the regex lookup. 60% of the run time is now spent in building the hash lookup. I very much appreciate the help. but i am starting to think, this solution may not be the optimal fit to the problem... I&#39;m just not sure what is at this point. Also. I am updating the post with the Perl version ( v5.10.1). Thank you."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1471805839, "last_edit_date": 1471805839, "creation_date": 1471788578, "answer_id": 39065126, "question_id": 39058152, "link": "https://stackoverflow.com/questions/39058152/efficient-method-of-blanking-values-that-appear-less-than-x-times-in-a-column-us/39065126#39065126", "title": "Efficient method of blanking values that appear less than X times in a column using Hadoop", "body": "<p>I don't know Hadoop, but the memory issue is likely the byproduct of building <code>%LookupHash</code> in <em>Pass 2</em>.</p>\n\n<p>Based on the description of the problem, <em>Pass 2</em> doesn't need to know how many times the value 123 occurred in column 1, just that the value 123 needs to be blanked out.</p>\n\n<p>In that case, your <code>%LookupHash</code> can be made to consume a lot less memory by storing array references instead of hash references. My testing shows that this should reduce memory by 50%:</p>\n\n<pre><code>my %LookupHash;\nwhile (&lt;&gt;) {\n    my ( $col, $value ) = split /\\t/, $_, 2;\n    push @{ $LookupHash{$col} }, $value;\n}\n</code></pre>\n\n<p>Come to think of it, a list of values to match against is what is required, so regex-ify it:</p>\n\n<pre><code>for my $col ( keys %LookupHash ) {\n    my $values = join '|', map { '^' . $_. '$' } @{ $LookupHash{$col} };\n    $LookupHash{$col} = $values;\n}\n</code></pre>\n\n<p>And then using it should be a doddle:</p>\n\n<pre><code>$value = '' if $value =~ qr/$LookupHash{$col}/;\n</code></pre>\n\n<hr>\n\n<p>Better yet, avoid creating the array references altogether and rely instead on building the regex strings manually (this should consume an order of magnitude less memory):</p>\n\n<pre><code>my %LookupHash;\nwhile (&lt;&gt;) {\n    my ( $col, $value ) = split /\\t/, $_, 2;\n    if ( $LookupHash{$col} ) {\n       $LookupHash{$col} = join '|', $LookupHash{$col}, $value;\n    }\n    else {\n       $LookupHash{$col} = $value;\n    }\n}\n</code></pre>\n\n<p>And then to use it:</p>\n\n<pre><code>$value = '' if $value =~ qr/^(?:$LookupHash{$col})$/;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6738810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850e7916366f039b9f175e78eeb51e26?s=128&d=identicon&r=PG&f=1", "display_name": "marmalope", "link": "https://stackoverflow.com/users/6738810/marmalope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471816469, "creation_date": 1471722838, "last_edit_date": 1471816469, "question_id": 39058152, "link": "https://stackoverflow.com/questions/39058152/efficient-method-of-blanking-values-that-appear-less-than-x-times-in-a-column-us", "title": "Efficient method of blanking values that appear less than X times in a column using Hadoop", "body": "<p><em>UPDATED TO NOTE CHANGE TO AGGREGATE KEY</em></p>\n\n<h2>Description</h2>\n\n<p>I have a requirement in an anonymized environment to remove <strong>all values</strong> from a column of a file that occur less than a specified number of times. There will be multiple columns specified that require values to appear more than X times within that column and the blanking is relative to a column. Meaning if X = 4 and the value 123 occurs 3 times in column 1 and 4 times in column 4 then all 3 occurrences must be blanked in column 1 but are allowable in column 4.</p>\n\n<p>I have solved this issues using a 2 pass approach leveraging Hadoop Streaming and Perl that has been stable for the past half year. The issue is that a new file has been provided that, although my process will handle it, it will take roughly 5 days to process on our 862 container (54 Node) hadoop cluster. I will explain my solution/approach and ask for any optimizations or alternative methods that would fit this problem and allow for optimized run times.  </p>\n\n<p>File stats being processed: </p>\n\n<ul>\n<li>Size 1.4TB  </li>\n<li>Columns 19,427  </li>\n<li>Records 22.1mil</li>\n<li>Elements 429,336,700,000</li>\n</ul>\n\n<h2>2 Pass Approach (Current)</h2>\n\n<h3>Pass 1</h3>\n\n<p>This Pass uses Hadoop streaming with a Perl (v5.10.1) Mapper and Perl reducer to get a count for every value in every column (count relative to each column) of the input file and build a lookup file if the count is greater the the specified X containing column, value, count.  </p>\n\n<p><strong>Mapper:</strong> Use Perl hashing to build a hash of hashes that contains the column, value, count where the count is incremented with each occurrence of the value for that column:</p>\n\n<pre><code>$ColValCntHash{ $col }{ $value }++;\n</code></pre>\n\n<p>As this is the mapper using hadoop streaming, I print the results in the following Key Value format to allow a more distributed allocation to the reducers:</p>\n\n<pre><code>col|value\\tcount\n</code></pre>\n\n<p>this produces an aggregate key of column # and the field value and then assigns the count of that value in that column as the key. </p>\n\n<p><strong>Reducer:</strong> read the col|value\\tcount passed to it, parse the key, build a hash to sum the counts of the values passed in from multiple mappers.</p>\n\n<pre><code>$FinalCountHash{ $col }{ $value } += $count;\n</code></pre>\n\n<p>At the end, each reducer prints col, value, and count into the output file if the count is less than the specified X. </p>\n\n<p><strong>First Pass Results:</strong> Pass 1 produces a \"lookup\" list that is sourced into pass 2 where the blanking occurs and is structured as :</p>\n\n<pre><code>Col\\tValue\\tCount\n1\\t123\\t3\n3\\t234\\t2\n</code></pre>\n\n<h3>Pass 2</h3>\n\n<p>This Pass uses Hadoop streaming with only a Perl Mapper (no reduce phase) to blank the values in the input file if they exist on the lookup file generated by pass 1. </p>\n\n<p><strong>Mapper:</strong> The mapper requires that the lookup file be shipped along side the Perl code distributed to each node so that it can be used to build a lookup hash like: </p>\n\n<pre><code>$aggKey = $col . \"|\" . $value;\n$LookupHash{ $aggKey }=1;\n</code></pre>\n\n<p>the aggKey is used to reduce the memory overhead of the Hash of Hashes and now is just a hash which brought the number of values i can buffer into memory to around 22 mil.</p>\n\n<p>As the input records are passed through the mapper, the columns are iterated over and the hash is checked to see if the column and value exists. if so, then the value in the column is replaced with a blank. </p>\n\n<p><strong>Pass 2 output:</strong>\nPass 2 generated an output file (part files) that contains an \"anonymized\" version of the input file. </p>\n\n<h2>Issue</h2>\n\n<p>Even though the cluster has plenty of memory (2.4TB combined), this is divided among containers and at most pass 2 can load around 22mil values from the look up file before the container fails with a memory issue. This required a iterative blanking to occur on the input by splitting the lookup file into 22mil chunks and running them against the main file in multiple passes of pass 2. the entire process of a 10-100 GB file runs in 5 to 20 minutes depending on the number of values to blank.  </p>\n\n<p>Now that I have a file of the 1.4TB size to process through this with almost 20k columns, the resulting lookup file contains 4.6 Billion records (roughly 1% of the total values in the file which is relative % for previous files). </p>\n\n<p>With the memory limitation of only loading 22mil lookup values at a time... this leaves my current process needing to pass over the input file in pass 2 210 times.. and with it having to read the 1.4 TB file (which shrinks slightly with each pass of removals), each of these passes take ~25 minutes. </p>\n\n<p>I hope this adequately describes the problem/current solution/issues adequately. Any help would be greatly appreciated. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "linux", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1471705515, "post_id": 39055441, "comment_id": 65460055, "body": "This isn&#39;t very clear. Some sample data would help."}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1471707839, "post_id": 39055441, "comment_id": 65460834, "body": "I&#39;ve updated the question, hope that its clearer now."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1471708534, "post_id": 39055441, "comment_id": 65461096, "body": "What does &quot;is blank&quot; mean  to you? Will the data be undefined? Will it be an empty string? Will it consist of whitespace?"}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1471708731, "post_id": 39055441, "comment_id": 65461170, "body": "The file will have some blank lines where there is no date, so however that would be defined? I&#39;m not sure whether that would be considered an empty string or undefined?"}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "edited": false, "score": 0, "creation_date": 1471710797, "post_id": 39055441, "comment_id": 65461842, "body": "@bms9nmh It depends on how you parse the file. There are many different ways of parsing files, of parsing delimited or fixed-width fields, and so whether a variable that is intended to represent a single field from a single line of the input file can become <code>undef</code> or <i>a sequence of spaces</i> or <i>a single space</i> or <i>the empty string</i> or something else entirely depends on what the parsing code spits out. Neither your question nor the answers that have been given so far focus on parsing files, because the question is focused on the comparison logic. How to parse is a different question entirely."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1471766647, "post_id": 39055441, "comment_id": 65473206, "body": "Were you looking for a <a href=\"https://en.wikipedia.org/wiki/Finite-state_machine\" rel=\"nofollow noreferrer\">state machine</a>? There are very nice CPAN modules for that like <a href=\"https://metacpan.org/pod/FSA::Rules\" rel=\"nofollow noreferrer\"><code>FSA::Rules</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1471707763, "post_id": 39055910, "comment_id": 65460799, "body": "sorry I just edited my question prob not long after you posted to make it clearer. Hope this doesn&#39;t confuse matters!."}], "tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": false, "score": 0, "last_activity_date": 1471708168, "last_edit_date": 1471708168, "creation_date": 1471707617, "answer_id": 39055910, "question_id": 39055441, "link": "https://stackoverflow.com/questions/39055441/perl-what-function-am-i-looking-for-assigning-multiple-rules-to-a-specified-ou/39055910#39055910", "title": "Perl- What function am I looking for? Assigning multiple rules to a specified outcome", "body": "<p>There's no standard library function or name for exactly what you've described. You have two arrays and you want to compare their elements using complex criteria. There are an infinite number of ways two arrays could be compared using complex criteria; we can't create a snappy name and write a standard library function for all of them!</p>\n\n<p>Using the minimal assumptions, we can write this function as follows:</p>\n\n<pre><code>sub compareArrayElementsForEitherBlankSpaceOrMatch {\n    ## takes two array references to compare; assumes they're the same length\n    my ($A,$B) = @_;\n    my @res;\n    if (@$A &gt; 0) {\n        $#res = @$A-1; ## preallocate array\n        for (my $i = 0; $i &lt; @$A; ++$i) {\n            $res[$i] = $A-&gt;[$i] eq ' ' || $B-&gt;[$i] eq ' ' || $A-&gt;[$i] eq $B-&gt;[$i] ? 1 : 0;\n        }\n    }\n    return @res;\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>my @res = compareArrayElementsForEitherBlankSpaceOrMatch(\n    [' ', ' ' , 2000, 2000, 2000 ],\n    [' ', 2000, ' ' , 2000, 1900 ]\n);\nprint(\"@res\\n\");'\n## 1 1 1 1 0\n</code></pre>\n\n<hr>\n\n<p><strong>Update:</strong> Based on your edit, you're not comparing two arrays against each other, but rather you are comparing one array against a single value. This can be accomplished as follows:</p>\n\n<pre><code>sub compareArrayElementsForEitherBlankSpaceOrMatch {\n    ## takes an array reference and compares its elements with a given value\n    ## an element is considered to match if it is blank or equal to the value\n    my ($A,$x) = @_;\n    my @res;\n    if (@$A &gt; 0) {\n        $#res = @$A-1; ## preallocate array\n        for (my $i = 0; $i &lt; @$A; ++$i) {\n            $res[$i] = $A-&gt;[$i] =~ m(^\\s*$) || $A-&gt;[$i] eq $x ? 1 : 0;\n        }\n    }\n    return @res;\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>my @res = compareArrayElementsForEitherBlankSpaceOrMatch(\n    [1978,1989,\"\",1978,1999,\"\",1768],\n    1978\n);\nprint(\"@res\\n\");\n## 1 0 1 1 0 1 0\n</code></pre>\n\n<p>Note that the line 5 result should be a fail, since 1999 does not equal 1978.</p>\n\n<p>I enhanced the blank check to use a regex test against <code>m(^\\s*$)</code> rather than a fixed equality check against a single space.</p>\n\n<p>My original comment is still correct regarding the non-existence of a standard function or name for this exact operation.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1471708369, "last_edit_date": 1471708369, "creation_date": 1471708258, "answer_id": 39056030, "question_id": 39055441, "link": "https://stackoverflow.com/questions/39055441/perl-what-function-am-i-looking-for-assigning-multiple-rules-to-a-specified-ou/39056030#39056030", "title": "Perl- What function am I looking for? Assigning multiple rules to a specified outcome", "body": "<p>Why does line 5 match? The input is 1978 and the file contains 1999? [Ah, you've just edited your question to fix that]</p>\n\n<p>With the proviso that my code returns false for that match (which seems correct to me). Here's my version:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @years = (1978, 1989, undef, 1978, 1999, undef, 1768);\nmy $year = 1978;\n\nsay compare($year, \\@years);\n\nsub compare {\n  my ($year, $years) = @_;\n  my @return;\n\n  foreach (@$years) {\n    push @return, 1 and next if ! defined $_;\n    push @return, 1 and next if $_ == $year;\n    push @return, 0;\n  }\n\n  return @return;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1471716749, "post_id": 39056452, "comment_id": 65463924, "body": "ok, thats good because the result is stored in a variable which i&#39;m happy about because I want to use the result in an if statement later in something I have planned. Could you just explain to me how the line  my $result = $line &amp;&amp; $input &amp;&amp; $line ne $input ? &#39;Fail&#39; : &#39;Pass&#39;;  works?   At the moment I can&#39;t see how it is calculating the Pass Fail, although I can see its working."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 1, "creation_date": 1471717111, "post_id": 39056452, "comment_id": 65464035, "body": "Perl&#39;s <a href=\"http://perldoc.perl.org/perlop.html#Conditional-Operator\" rel=\"nofollow noreferrer\"><i>conditional operator</i> <code>?:</code></a> works just like an <code>if .. then .. else</code> construct, except that it is usually used to choose one or other of two values depending on a condition. An empty string is <i>false</i> in Perl, so <code>$line &amp;&amp; $input</code> is <i>true</i> if both variables contain some characters. Then <code>$line ne $input</code> is <i>true</i> if the strings are unequal, so the result is an encoding of your criterion <b><i>Both the input and the file record contain a year, but they are different</i></b>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1471717504, "post_id": 39056452, "comment_id": 65464160, "body": "You need to be careful of any whitespace in the file or input data, as a string containing just a space or a newline is <i>true</i> and this expression will not work."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1471711139, "creation_date": 1471711139, "answer_id": 39056452, "question_id": 39055441, "link": "https://stackoverflow.com/questions/39055441/perl-what-function-am-i-looking-for-assigning-multiple-rules-to-a-specified-ou/39056452#39056452", "title": "Perl- What function am I looking for? Assigning multiple rules to a specified outcome", "body": "<p>This should help you. It simply tests each line for the failure condition. Everything else is a pass.</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $input = 1978;\n\nwhile ( my $line = &lt;DATA&gt; ) {\n\n    $line =~ s/\\s*\\z//;\n\n    my $result = $line &amp;&amp; $input &amp;&amp; $line ne $input ? 'Fail' : 'Pass';\n\n    printf \"%4s %s\\n\", $line, $result;\n}\n\n\n__DATA__\n1978\n1989\n\n1978\n1999\n\n1768\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1978 Pass\n1989 Fail\n     Pass\n1978 Pass\n1999 Fail\n     Pass\n1768 Fail\n</code></pre>\n"}], "owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 39056452, "answer_count": 3, "score": 2, "last_activity_date": 1471711139, "creation_date": 1471704756, "last_edit_date": 1471710193, "question_id": 39055441, "link": "https://stackoverflow.com/questions/39055441/perl-what-function-am-i-looking-for-assigning-multiple-rules-to-a-specified-ou", "title": "Perl- What function am I looking for? Assigning multiple rules to a specified outcome", "body": "\n\n<p>I've conceptualized a function in my head,and I imagine it exists, but if it does, I don't know the name of it, and for that reason it's difficult to google.</p>\n\n<p>Lets say I want to define two outcomes- I'll call them <code>Pass</code> and <code>Fail</code></p>\n\n<p>I want several different rules to apply to each of the two outcomes.</p>\n\n<p>So, for clarity (hopefully), let's say imagine I have a file with different years stored on each line, or blank spaces.</p>\n\n<p>File</p>\n\n<pre><code>line1    1978\nline2    1989\nline3    \nline4    1978\nline5    1999\nline6    \nline7    1768\n</code></pre>\n\n<p>Now lets say there is a user input of <code>1978</code> to compare to the file.</p>\n\n<p>This date will be compared to each line in the file.</p>\n\n<p>There can only be two results base on the comparison- they are <code>Pass</code> and <code>Fail</code>.</p>\n\n<p>For a comparison to be in the <code>Pass</code> group it would need to meet the following criteria:</p>\n\n<pre><code>1) It matches the year in the file\n2) Neither the input, or the line in the file contains a year\n3) Only one line contains a year, and the other is blank\n</code></pre>\n\n<p>For a line to meet the <code>Fail</code> condition:</p>\n\n<pre><code>1) Both the input and the file record contain a year, but they are different. \n</code></pre>\n\n<p>So for my example input of <code>1978</code> the results would look like this</p>\n\n<pre><code>line1    1978   Pass\nline2    1989   Fail\nline3           Pass\nline4    1978   Pass\nline5    1999   Fail \nline6           Pass\nline7    1768   Fail\n</code></pre>\n\n<p>So basically I want to assign different (and multiple) condition to <code>Pass</code> and <code>Fail</code> as outlined above. </p>\n\n<p>What I want to know is, what (if anything) is the name of this type of function.  </p>\n\n<p>What is the name of some sort of function where I can apply these rules to <code>Pass</code> and <code>Fail</code>. As far as I'm aware, I can't create <code>Pass</code> and <code>Fail</code> variables because there is multiple rules for each condition. Is there some other built in function I can use?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1471660812, "last_edit_date": 1471660812, "creation_date": 1471659991, "answer_id": 39049881, "question_id": 39049594, "link": "https://stackoverflow.com/questions/39049594/perl-file-read-multiple-lines-combined-while-reading-in-list-context/39049881#39049881", "title": "Perl File Read: multiple lines combined while reading in list context", "body": "<p><strong>Please check your original script and posted script are same.</strong>\nYou did mention the last line is only printing by your example program. It won't. It will print the whole lines.</p>\n\n<p>Always put <code>use warnings;</code> and <code>use strict;</code> in top of the program.</p>\n\n<p>Then storing the whole file into an array then read from an array is a very poor method. Use while loop instead. </p>\n\n<pre><code>open ($myfile, \"&lt;\",\"file.txt\") or die \"Could not open the file\";\n\n while(&lt;$myfile&gt;)\n {\n     print ; # Data are store into the default variable $_. So no need to mention the $_ in print statement.\n\n }\n</code></pre>\n\n<p>The below script will produce the your mentioned output.</p>\n\n<pre><code>foreach (@lines)\n{\n   $line = $_; # this or\n   @new = $_; # this\n}\nprint $line;  #last line\nprint @new; #last line\n</code></pre>\n\n<p>If you want to store the particular data into another variable, look at concatenation for string($) and push or unshift for an array(@)</p>\n"}, {"comments": [{"owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1471714443, "post_id": 39051751, "comment_id": 65463164, "body": "Perfect answer. Learned a lot.  As you would tell, I&#39;m a beginner Perl coder. Could you suggest me any Perl practice resources? I am currently using Wiley - <a href=\"http://www.wiley.com/legacy/compbooks/chapman/perl/exercises.html\" rel=\"nofollow noreferrer\">link</a>  Any other resources will be much appreciated."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "edited": false, "score": 0, "creation_date": 1471716595, "post_id": 39051751, "comment_id": 65463873, "body": "@Aditya: I&#39;m pleased to help. There are several sites like <a href=\"https://projecteuler.net/archives\" rel=\"nofollow noreferrer\"><b>Project Euler</b></a> and <a href=\"https://www.hackerrank.com/domains\" rel=\"nofollow noreferrer\"><b>HackerRank</b></a> which have very useful exercises at all levels. Once you become more proficient it is a good idea to try answering questions here on Stack Overflow where you will get feedback if your code is especially good or bad."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1471716811, "last_edit_date": 1471716811, "creation_date": 1471678983, "answer_id": 39051751, "question_id": 39049594, "link": "https://stackoverflow.com/questions/39049594/perl-file-read-multiple-lines-combined-while-reading-in-list-context/39051751#39051751", "title": "Perl File Read: multiple lines combined while reading in list context", "body": "<p>Your original file has just a carriage-return (CR) at the end of each line when it should have a linefeed (LF) or possibly both CR and LF if it originated from a  Windows system and you are reading it on Linux</p>\n\n<p>Without any newlines to split up the data, <code>@lines</code> has only a single element which contains the entire file contents</p>\n\n<p>Printing that text to the terminal results in all of the lines being displayed on top of one another as you have seen</p>\n\n<p>You need to fix the creation of your file, but in the mean time you can read it correctly by changing Perl's record separator <code>$/</code> like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nopen my $fh, '&lt;', 'file.txt' or die \"Could not open the file: $!\";\n\nmy @lines = do {\n    local $/ = \"\\r\";\n    &lt;$fh&gt;;\n};\n\nchomp @lines;\n\nprint \"$_\\n\" for @lines;\n</code></pre>\n"}], "owner": {"reputation": 242, "user_id": 2095777, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4373a11d6c454a9845ec5028a03eb9df?s=128&d=identicon&r=PG", "display_name": "tabs_over_spaces", "link": "https://stackoverflow.com/users/2095777/tabs-over-spaces"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 39051751, "answer_count": 2, "score": 0, "last_activity_date": 1471716811, "creation_date": 1471655932, "question_id": 39049594, "link": "https://stackoverflow.com/questions/39049594/perl-file-read-multiple-lines-combined-while-reading-in-list-context", "title": "Perl File Read: multiple lines combined while reading in list context", "body": "<p>I am reading a file using the following code:</p>\n\n<pre><code>open ($myfile, \"&lt;file.txt\") or die \"Could not open the file\";\n\n@lines = &lt;$myfile&gt;;\n\nforeach $line (@lines){\n    print $line;\n}\n\nclose myfile;\n</code></pre>\n\n<p>The contents of the file are:</p>\n\n<pre><code>Crossroads Blues\nTerraplane Blues\nCome on in My Kitchen\nWalking Blues\nMister Jelly Roll Maker\nLast Fair Deal Gone Down\n32-20 Blues\nKindhearted Woman Blues\nIf I Had Possession Over Judgement Day\nPreaching Blues\nBlind Willie's Blues\nWhen You Got a Good Friend\nRambling on My Mind\nStones in My Passway\nWild Jelly Roll Blues\nTraveling Riverside Blues\nRoll My Jellyroll\nMilkcow's Calf Blues\nMe and the Devil Blues\nHellhound on My Trail\n</code></pre>\n\n<p>But the output of the program is: </p>\n\n<pre><code>Hellhound on My Trailsuesdudgement Day\n</code></pre>\n\n<p>It looks like the code reads only one line, and replaces the first characters with the new line that is read. I have tried different files. Only one line is printed, which is basically aggregated over all the lines.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 1, "last_activity_date": 1471657308, "creation_date": 1471657308, "answer_id": 39049686, "question_id": 39049479, "link": "https://stackoverflow.com/questions/39049479/reading-from-csv-into-a-1d-array-perl/39049686#39049686", "title": "Reading from .csv into a 1d array - perl", "body": "<p>I think you have way more code than you need.  Within your <code>while</code> loop, you are already reading a line at a time -- just do all of your processing there.</p>\n\n<p>Building the <code>@linearray</code> ahead of time buys you nothing in your example and will eat up unnecessary memory.  If you wanted to sort the data before pushing it to <code>@resultarray</code>, there may be some justification for doing it that way, but if you don't need to it's best to avoid the extra data structure.</p>\n\n<pre><code>my $filename = $ARGV[0];\nopen my $filehandle, '&lt;', $filename or die \"Could not open $filename\\n\";\n\nmy @resultarray;\nwhile(&lt;$filehandle&gt;) {\n    chomp;\n    my @linearray = split /,/;\n\n    ## What did you want to do here, just add them to @resultarray?\n\n    push @resultarray, @linearray;\n}\n</code></pre>\n\n<p>Bearing in mind, you could have done that in one step:</p>\n\n<pre><code>push @resultarray, split /,/;\n</code></pre>\n\n<p>Don't forget to close your filehandle.</p>\n\n<pre><code>close $filehandle;\n</code></pre>\n\n<p>All that said, if this is how you handle a comma-delimited file.  If you file is truly CSV (fields can have commas, return characters), then you really want to use <code>Text::CSV</code> which will handle all of that nastiness for you.</p>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 6726492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eAMm5FnaLrI/AAAAAAAAAAI/AAAAAAAAAC0/WAfxmxfxUS8/photo.jpg?sz=128", "display_name": "Vida Wang", "link": "https://stackoverflow.com/users/6726492/vida-wang"}, "is_accepted": false, "score": -1, "last_activity_date": 1471658067, "last_edit_date": 1471658067, "creation_date": 1471657679, "answer_id": 39049706, "question_id": 39049479, "link": "https://stackoverflow.com/questions/39049479/reading-from-csv-into-a-1d-array-perl/39049706#39049706", "title": "Reading from .csv into a 1d array - perl", "body": "<pre><code>open IN,$filename || die \"$!\";\nmy @res=();\nwhile(defined($line=&lt;IN&gt;)){\n    chomp($line);\n    @info=split(/,/,$line);\n    push(@res,[@info]);\n}\nprint $res[1][1];\nclose IN;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6736848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d7c1a1a324d9178b7745193f9e364f?s=128&d=identicon&r=PG&f=1", "display_name": "Shanky", "link": "https://stackoverflow.com/users/6736848/shanky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471658067, "creation_date": 1471654323, "question_id": 39049479, "link": "https://stackoverflow.com/questions/39049479/reading-from-csv-into-a-1d-array-perl", "title": "Reading from .csv into a 1d array - perl", "body": "<p>I'm very new to perl. I'd like to read elements from a file and store them into a 1d array. For example,</p>\n\n<pre><code>1,6,1,0         \n2,3,0,0         \n3,2,0,0  \n\nmy $filename = $ARGV[0];\nopen(my $filehandle, '&lt;', $filename) or die \"Could not open $filename\\n\";\n#\nmy @resultarray;\nwhile(my $line = &lt;$filehandle&gt;){\n    my @linearray = split(\"/n\", $line);\n}\nwhile(foreach(@linearray){\n    my @resultarray = split(\",\", $linearray);\n}\n</code></pre>\n\n<p>Is this approach okay? If I'd like to read it into a 2d array, is it easier?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "perl", "ubuntu", "awk"], "comments": [{"owner": {"reputation": 6032, "user_id": 2964982, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ymPSQ.png?s=128&g=1", "display_name": "FunkySayu", "link": "https://stackoverflow.com/users/2964982/funkysayu"}, "edited": false, "score": 0, "creation_date": 1471644122, "post_id": 39048242, "comment_id": 65446306, "body": "Code example maybe?"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1471644261, "post_id": 39048242, "comment_id": 65446342, "body": "&quot;I want to parse my table in the following format.&quot; What have you tried? Good luck."}, {"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1471644741, "post_id": 39048242, "comment_id": 65446488, "body": "Why the python tag?"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "edited": false, "score": 0, "creation_date": 1471724097, "post_id": 39048276, "comment_id": 65466081, "body": "Thanks. Can you explain that what is &#39;a&#39; in in first section of code?"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "edited": false, "score": 0, "creation_date": 1471773867, "post_id": 39048276, "comment_id": 65474848, "body": "@pali as seen in the link I provide, it is the array in which the slices are stored."}, {"owner": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "edited": false, "score": 0, "creation_date": 1471782268, "post_id": 39048276, "comment_id": 65476939, "body": "Thanks for information"}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": true, "score": 1, "last_activity_date": 1471644252, "last_edit_date": 1495541315, "creation_date": 1471644252, "answer_id": 39048276, "question_id": 39048242, "link": "https://stackoverflow.com/questions/39048242/parse-a-tab-and-comma-separated-file/39048276#39048276", "title": "Parse a tab and comma separated file", "body": "<p>Easy with <code>awk</code>: just <a href=\"https://stackoverflow.com/a/36211699/1983854\"><code>split()</code></a> the second column and loop through the slices:</p>\n\n<pre><code>$ awk '{n=split($2, a, \",\"); for (i=1;i&lt;=n;i++) print $1,a[i]}' file\nA GO:0008150\nA GO:0050789\nA GO:0050794\nA GO:0051726\nA GO:0065007\nB GO:0008150\nB GO:0050789\nB GO:0050794\nB GO:0051726\nB GO:0065007\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245, "user_id": 2781983, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100004839157666/picture?type=large", "display_name": "Jianli Cheng", "link": "https://stackoverflow.com/users/2781983/jianli-cheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1471717657, "last_edit_date": 1471717657, "creation_date": 1471646768, "answer_id": 39048652, "question_id": 39048242, "link": "https://stackoverflow.com/questions/39048242/parse-a-tab-and-comma-separated-file/39048652#39048652", "title": "Parse a tab and comma separated file", "body": "<p>You can use Python with the <code>re</code> module.</p>\n\n<pre><code>import re\ntext = '''A   GO:0008150,GO:0050789,GO:0050794,GO:0051726,GO:0065007\nB   GO:0008150,GO:0050789,GO:0050794,GO:0051726,GO:0065007'''\npattern = {\n'A': re.compile('A\\s+(GO.*)\\n'),\n'B': re.compile('B\\s+(GO.*)\\n*')\n}\nA = 'A  ' + '\\nA  '.join(pattern['A'].findall(text)[0].split(','))\nB = 'B  ' + '\\nB  '.join(pattern['B'].findall(text)[0].split(','))\nprint A\nprint B\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>A  GO:0008150\nA  GO:0050789\nA  GO:0050794\nA  GO:0051726\nA  GO:0065007\nB  GO:0008150\nB  GO:0050789\nB  GO:0050794\nB  GO:0051726\nB  GO:0065007\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1471655375, "creation_date": 1471655375, "answer_id": 39049557, "question_id": 39048242, "link": "https://stackoverflow.com/questions/39048242/parse-a-tab-and-comma-separated-file/39049557#39049557", "title": "Parse a tab and comma separated file", "body": "<p><code>awk</code> without loops, requires multi-char RS.</p>\n\n<pre><code>$ awk -v RS=\",|\\n\" 'NF==2{t=$1;$1=$2} {print t,$1}' file\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1471668038, "accepted_answer_id": 39048276, "answer_count": 3, "score": -1, "last_activity_date": 1471717657, "creation_date": 1471644067, "question_id": 39048242, "link": "https://stackoverflow.com/questions/39048242/parse-a-tab-and-comma-separated-file", "closed_reason": "Needs more focus", "title": "Parse a tab and comma separated file", "body": "<p>I have a table containing several thousands line like this    </p>\n\n<pre><code>A   GO:0008150,GO:0050789,GO:0050794,GO:0051726,GO:0065007\nB   GO:0008150,GO:0050789,GO:0050794,GO:0051726,GO:0065007\n</code></pre>\n\n<p>I want to parse my table in the following format.</p>\n\n<pre><code>A   GO:0008150\nA   GO:0050789\nA   GO:0050794\nA   GO:0051726\nA   GO:0065007\nB   GO:0008150\nB GO:0050789\nB GO:0050794\nB GO:0051726\nC GO:0065007\n</code></pre>\n\n<p>Any help will be greatly appreciated. Thanks</p>\n"}, {"tags": ["perl", "initialization", "cosine-similarity"], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1471650373, "creation_date": 1471650373, "answer_id": 39049096, "question_id": 39047635, "link": "https://stackoverflow.com/questions/39047635/variable-used-to-measure-cosinesimilarity-in-textdocument-is-uninitialized/39049096#39049096", "title": "Variable used to measure CosineSimilarity in Text::Document is uninitialized", "body": "<p>Taking a peek at the source, I see that <code>CosineSimilarity</code> has this nugget:</p>\n\n<pre><code>    if( ($nD==0) || ($nE==0) ){\n            return undef;\n    } else {\n            return $dotProduct / $nD / $nE;\n    }\n</code></pre>\n\n<p>It will return undef rather than blowing up with a divide-by-zero error.  (While it's nice to handle your errors, sometimes the error handling makes it less obvious that an error has occurred.  I think yours is one such case - once you know about it, checking for undef is more obvious, but if you had got a divide by zero exception, you likely would have looked at things differently.)</p>\n\n<p>Anyway, <code>$nD</code> and <code>$nE</code> are both determined through the <code>EuclideanNorm</code> method called on both <code>$d</code> (<code>$self</code>) and <code>$e</code>.  You should probably try printing those out as a next debugging step, I'm going to guess that your <code>$data4_prior</code> will come out with a 0, but it really could be either.  Without your actual data, I can't try to find out, so hopefully this gives you a good starting point for further debugging.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 0, "creation_date": 1471731514, "post_id": 39055421, "comment_id": 65467822, "body": "Your answer is helpful in clarifying the syntax for this module.  Thanks!"}], "tags": [], "owner": {"reputation": 30809, "user_id": 1375695, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df08e9e25d8fa6007a35d9c906864516?s=128&d=identicon&r=PG", "display_name": "foundry", "link": "https://stackoverflow.com/users/1375695/foundry"}, "is_accepted": true, "score": 2, "last_activity_date": 1471704607, "creation_date": 1471704607, "answer_id": 39055421, "question_id": 39047635, "link": "https://stackoverflow.com/questions/39047635/variable-used-to-measure-cosinesimilarity-in-textdocument-is-uninitialized/39055421#39055421", "title": "Variable used to measure CosineSimilarity in Text::Document is uninitialized", "body": "<p>You have a couple of issues..</p>\n\n<pre><code>my $data2 = Text::Document-&gt;new(file=&gt;'$data1') ;\n</code></pre>\n\n<p>Here you seem to imagine that <code>$data2</code> will be initialised with the content of <code>$data1</code>. </p>\n\n<p>In fact the <code>file</code> keyword does nothing here, and the line is equivalent to </p>\n\n<pre><code>my $data2 = Text::Document-&gt;new() ;\n</code></pre>\n\n<p>You have successfully initialised a <code>Text::Document</code> object but it has no data.</p>\n\n<p>You do the same for the prior object, so you end up comparing two objects with no comparision terms. <code>$sim</code> is empty. </p>\n\n<p>The fix is to add some content to your new objects:</p>\n\n<pre><code>my $data2 = Text::Document-&gt;new() ;\n$data2-&gt;AddContent($data1);\n</code></pre>\n\n<p>...and the same for the prior object.</p>\n\n<p>In addition you can remove these lines:</p>\n\n<pre><code>my $data3 = $data2-&gt;WriteToString() ;\nmy $data4 = Text::Document::NewFromString($data3) ;\n</code></pre>\n\n<p>They are redundant. You are just recreating the same (empty) objects.</p>\n"}], "owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 39055421, "answer_count": 2, "score": 2, "last_activity_date": 1471704607, "creation_date": 1471640601, "question_id": 39047635, "link": "https://stackoverflow.com/questions/39047635/variable-used-to-measure-cosinesimilarity-in-textdocument-is-uninitialized", "title": "Variable used to measure CosineSimilarity in Text::Document is uninitialized", "body": "<p>I am using Text::Document to compute the cosine similarity between two documents.  When I try to print the variable holding the resulting cosine similarity score ($sim), I get an error message saying: \"Use of unitialized value $sim in concatenation (.) or string...\".  As far as I can tell, I initialize this variable immediately above the print command.  Admittedly, this is my first foray into the Text::Document module and my object construction here is probably faulty/ugly/potentially problematic.  Any ideas what's wrong with the variable initialization? </p>\n\n<pre><code>use strict ;\nuse warnings ;\nuse autodie ;\nuse Text::Document ;\n\n### BEGIN BY READING IN EACH FILE ONE BY ONE. ###\n################## LOOP BEGIN ##################\n# Process every file with a `txt` file type\n\nmy $parent = \"D:/Cleaned 10Ks\" ;\nmy ($par_dir, $sub_dir);\nopendir($par_dir, $parent);\n\nwhile (my $sub_folders = readdir($par_dir)) {\nnext if ($sub_folders =~ /^..?$/);  # skip . and ..\nmy $path = $parent . '/' . $sub_folders;\nnext unless (-d $path);   # skip anything that isn't a directory\nchdir($path) or die \"Cant chdir to $path $!\";\n\nfor my $filename ( grep -f, glob('*') ) {\n\nopen my ($fh), '&lt;', $filename;\nmy $data1 = do {local $/; &lt;$fh&gt; } ;\nmy $data2 = Text::Document-&gt;new(file=&gt;'$data1') ;\nmy $data3 = $data2-&gt;WriteToString() ;\nmy $data4 = Text::Document::NewFromString($data3) ;\n\nmy ($comp_id, $year, $rest) = split '-', $filename, 3;\nmy $prev_year = ($year ne '00') ? $year - 1 : 99;\nmy $prev_year_base = join '-', $comp_id, $year ;\nmy ($prev_year_file) = glob \"$prev_year_base*\" ;\n\nopen my ($fh_prior), '&lt;', $prev_year_file ;\nmy $data1_prior = do {local $/; &lt;$fh_prior&gt; } ;\nmy $data2_prior = Text::Document-&gt;new(file=&gt;'$data1_prior') ;\nmy $data3_prior = $data2-&gt;WriteToString() ;\nmy $data4_prior = Text::Document::NewFromString($data3_prior) ;\nmy $sim = $data4-&gt;CosineSimilarity( $data4_prior ) ;\n\nprint \"The cosine similarity score is $sim\\n\" ;\n}\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1471638303, "last_edit_date": 1471638303, "creation_date": 1471638105, "answer_id": 39047108, "question_id": 39047054, "link": "https://stackoverflow.com/questions/39047054/applying-shift-to-a-variable/39047108#39047108", "title": "Applying (shift || &#39;.&#39;) to a variable", "body": "<p>That statement says: \"pull the next element from the argument list and assign it to <code>$path</code>. If there is no argument in the list, or the first element evaluates to false, put <code>.</code> in <code>$path</code> instead\".</p>\n\n<p><code>shift</code>, when used in the main part of a program and not in a subroutine uses <code>@ARGV</code> (command line arguments) as its list to <code>shift</code> elements off of.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $x = shift || 'bye';\n\nprint \"$x\\n\";\n</code></pre>\n\n<p>Run it:</p>\n\n<pre><code>$ perl script.pl\nbye\n\n$ perl script.pl hi\nhi\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 2, "last_activity_date": 1471638150, "creation_date": 1471638150, "answer_id": 39047120, "question_id": 39047054, "link": "https://stackoverflow.com/questions/39047054/applying-shift-to-a-variable/39047120#39047120", "title": "Applying (shift || &#39;.&#39;) to a variable", "body": "<p>Outside of a subroutine, <code>shift</code> with no arguments does <code>shift @ARGV</code>, getting the first command-line argument.</p>\n\n<p>The <code>||</code> operator returns the left side if the left side is truthy or the right side if the left side is falsy.  So if the <code>shift</code> succeeded, <code>$path</code> probably gets set to the command-line argument.  If <code>@ARGV</code> was empty, <code>shift</code> returns <code>undef</code>, so <code>$path</code> will get set to <code>'.'</code> instead.</p>\n\n<p>Note this will do the wrong thing if for example you have a directory named \"0\" and try to run <code>myscript.pl 0</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 6363373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f5ddc474fa4da5aa4e2f76565f6d5511?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi Nounou", "link": "https://stackoverflow.com/users/6363373/hadi-nounou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1167, "favorite_count": 0, "closed_date": 1471638265, "accepted_answer_id": 39047120, "answer_count": 2, "score": 1, "last_activity_date": 1471638887, "creation_date": 1471637803, "question_id": 39047054, "link": "https://stackoverflow.com/questions/39047054/applying-shift-to-a-variable", "closed_reason": "Duplicate", "title": "Applying (shift || &#39;.&#39;) to a variable", "body": "<p>I am currently learning perl and when I encountered a piece of code explainng how to traverse a directory tree using recursive subroutines. This is the code in question</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nmy $path = shift || '.';\ntraverse($path);\n\nsub traverse {\nmy ($thing) = @_;\n\n    return if not -d $thing;\n    opendir my $dh, $thing or die;\n    while (my $sub = readdir $dh) {\n        next if $sub eq '.' or $sub eq '..';\n        say \"$thing/$sub\";\n        traverse(\"$thing/$sub\");\n    }\n    close $dh;\n    return;\n}\n</code></pre>\n\n<p>I understood the subroutine and how it works, however I did not understand this statement:\n(my $path = shift || '.';)\nI know that it is the variable that is passed to the subroutine, but I do not know what value it takes. Thanks in advance.</p>\n"}, {"tags": ["perl", "gtk3", "pdl"], "answers": [{"comments": [{"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1471869918, "post_id": 39054995, "comment_id": 65507368, "body": "You&#39;d think, but when I print sum($pdlImg) after $pl-&gt;close, it&#39;s zero."}, {"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1471870426, "post_id": 39054995, "comment_id": 65507777, "body": "Clarification:  @Derek, When I change the size to 500x500x3 and print sum($pdlImg) after $pl-&gt;close, it&#39;s zero."}, {"owner": {"reputation": 43, "user_id": 5987822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb2a3cddd3d79f3c2c77d36c2bf264bb?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/5987822/derek"}, "reply_to_user": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1471900329, "post_id": 39054995, "comment_id": 65525379, "body": "I&#39;ll have to take your word for it.  I haven&#39;t used PLplot in a long time, don&#39;t have a working PDL::Graphics::PLplot at the moment, can&#39;t seem to get it installed, and don&#39;t have the time to mess with it.  You might try asking on the PDL mailing list."}], "tags": [], "owner": {"reputation": 43, "user_id": 5987822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb2a3cddd3d79f3c2c77d36c2bf264bb?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/5987822/derek"}, "is_accepted": false, "score": 1, "last_activity_date": 1471701839, "creation_date": 1471701839, "answer_id": 39054995, "question_id": 39046872, "link": "https://stackoverflow.com/questions/39046872/how-to-convert-pdl-image-to-gdkpixbuf/39054995#39054995", "title": "How to convert PDL image to GdkPixbuf", "body": "<p>To answer your first question, you are having PLplot put the plot into a piddle that is 10 pixels wide and 10 pixels high. I'm not sure if you're just going to get one corner of the normal plot in that case, or if you're getting the whole plot sampled into those 10x10 pixels. But in either case it's no surprise that <code>$pdlImg</code> is entirely zeroes.  Try passing in a piddle with larger size (perhaps <code>1000, 1000, 3</code>), or perhaps even using <code>MEM =&gt; $pdlImg=null</code> when you create the PLplot plot object.</p>\n\n<p>I can't help with your second question, I have no experience with Gtk3, sorry.</p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1471701839, "creation_date": 1471636849, "question_id": 39046872, "link": "https://stackoverflow.com/questions/39046872/how-to-convert-pdl-image-to-gdkpixbuf", "title": "How to convert PDL image to GdkPixbuf", "body": "<p>I'm trying to display a graph generated by PDL (using PLplot) inside a Gtk3 app.  When I try the following code, I see two problems:</p>\n\n<ol>\n<li>$pdlImg isn't a GdkPixbuf so new_from_pixbuf() doesn't work.</li>\n<li>$pdlImg appears to be empty as because the error message prints out the 10x10x3 array as a string and they're all zeroes.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse PDL;\nuse PDL::Graphics::PLplot;\nuse Gtk3 -init;\n\nmy $pdlImg = zeroes(byte, 10, 10, 3);\nmy $pl = PDL::Graphics::PLplot-&gt;new(DEV =&gt; 'mem', MEM =&gt; $pdlImg);\nmy $x = sequence(10);\nmy $y = $x**2;\n$pl-&gt;xyplot($x, $y);\n$pl-&gt;close;\n\nmy $win = Gtk3::Window-&gt;new;\nmy $img = Gtk3::Image-&gt;new_from_pixbuf($pdlImg);\n$win-&gt;add($img);\n$win-&gt;show_all;\nGtk3::main();\n</code></pre>\n"}, {"tags": ["perl", "directory", "matching", "file-find"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 0, "creation_date": 1471634067, "post_id": 39046035, "comment_id": 65442301, "body": "Thank you for your response.  The third component ($rest) will be different between this year&#39;s filing and last year&#39;s filing, so joining the three components won&#39;t give me the prior year&#39;s filing.  Any way around this?  I guess I could try to delete the last component out of all filenames, so this is no longer an issue, but I&#39;d prefer not to."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 0, "creation_date": 1471634235, "post_id": 39046035, "comment_id": 65442372, "body": "@Rick Ah, I see -- but do the first two components still uniquely determine the last year&#39;s filename? If yes, the &#39;rest&#39; need be found which is easy. I&#39;ll fix that (I see now that they are different, sorry I didn&#39;t look)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 0, "creation_date": 1471634848, "post_id": 39046035, "comment_id": 65442635, "body": "@Rick Fixed.  The remaining question -- I take it that the base of the filename (<code>join &#39;-&#39;, $comp_id, $year</code>) will be matched by just one entry, the desired last year&#39;s filename.  If there are other files/dirs with names that start that way you&#39;d want to <code>grep</code> the <code>glob</code>s return, or further process it otherwise."}, {"owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "edited": false, "score": 0, "creation_date": 1471634874, "post_id": 39046035, "comment_id": 65442652, "body": "Yes, the first two components uniquely determine the last year&#39;s filename."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1471635799, "last_edit_date": 1471635799, "creation_date": 1471633074, "answer_id": 39046035, "question_id": 39045835, "link": "https://stackoverflow.com/questions/39045835/reading-in-document-with-similar-filename-from-directory/39046035#39046035", "title": "Reading in document with similar filename from directory", "body": "<p>Parse the filename for the components, say by splitting on <code>-</code>, and then you can reduce the year by 1 and reassemble the name. The snag is the date -- if the year is <code>00</code> you can't just subtract 1.  A proper way is to use a module for dates, but since <code>00</code> is the only tricky case you can do it manually.</p>\n\n<pre><code>my ($comp_id, $year) = split '-', $filename;\n\nmy $prev_year = ($year ne '00') ? $year - 1 : 99;\n\nmy $prev_year_base   = join '-', $comp_id, $year;\n\nmy ($prev_year_file) = glob \"$prev_year_base*\";\n</code></pre>\n\n<p>Only the first two fields are asked for from <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a>, since the rest differs between files. The last year's filename is completed by globbing on these two components, taken to make it unique. If there may be other entries with names beginning the same way, the return from <code>glob</code> should be processed.  Since <code>glob</code> returns a list (here with one element) we need <code>()</code> around that (sole) filename.</p>\n"}], "owner": {"reputation": 107, "user_id": 3088548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/838e66b635d28b2760e6bd902ab6ab0c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/3088548/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 39046035, "answer_count": 1, "score": 0, "last_activity_date": 1471635799, "creation_date": 1471632157, "question_id": 39045835, "link": "https://stackoverflow.com/questions/39045835/reading-in-document-with-similar-filename-from-directory", "title": "Reading in document with similar filename from directory", "body": "<p>I have a batch of annual corporate filings, each named using the following format: company identifier, two digit year, and a random set of digits (e.g., 00000217-12-00010.txt).  I want to compare the contents of each annual filing to the filing submitted by the same company in the prior year (e.g., 000002178-13-00010.txt compared to 000002178-12-00005.txt).  As I loop through each file, how can I identify the preceding year\u2019s filing for each document so that I can read both documents in as separate strings?</p>\n\n<pre><code>use strict ;\nuse warnings ;\nuse autodie ;\nuse File::Find  ;\n\n### BEGIN BY READING IN EACH FILE ONE BY ONE. ###\n################## LOOP BEGIN ##################\n# Process every file with a `txt` file type\n\nmy $parent = \"D:/Cleaned 10Ks\" ;\nmy ($par_dir, $sub_dir);\nopendir($par_dir, $parent);\n\nwhile (my $sub_folders = readdir($par_dir)) {\nnext if ($sub_folders =~ /^..?$/);  # skip . and ..\nmy $path = $parent . '/' . $sub_folders;\nnext unless (-d $path);   # skip anything that isn't a directory\nchdir($path) or die \"Cant chdir to $path $!\";\n\nfor my $filename ( grep -f, glob('*') ) {\n#### FIND THE PRIOR YEAR'S CORRESPONDING FILING AND READ BOTH IN AS STRINGS###\n</code></pre>\n"}, {"tags": ["arrays", "perl", "file", "csv", "file-read"], "comments": [{"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1471623977, "post_id": 39043372, "comment_id": 65437115, "body": "You can go to a different approach and write to a CSV by just <code>print</code>ing to <code>$csvfile</code> the values you want delimited by commas and <code>print $csvfile &quot;\\n&quot;</code> at the end of a line"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471625275, "post_id": 39043713, "comment_id": 65437811, "body": "Thank you very much, this fixed my line issue, It does not however solve my permission issue, The file is stil not closing properly. I am getting the same <code>tegt.csv: Permission denied at perlScript.pl line 97 #the open line</code>"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471625568, "post_id": 39043713, "comment_id": 65437965, "body": "@BrendanL.: Add the reason why the file isn&#39;t closed, <code>$!</code> in the die after the close."}, {"owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471878012, "post_id": 39043713, "comment_id": 65513444, "body": ".: I actually do not get a did not close message on the close or die, which is why I am so confused by this issue. It does not print the or die message and does not end the program after the close or die. Ie: I can print things after the statement and run subfunctions and other such things."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471878891, "post_id": 39043713, "comment_id": 65514069, "body": "@BrendanL.: You&#39;ve said before <code>The file is stil not closing properly</code>, that&#39;s why I asked about the message on close.  What are the permissions of the file? Are you running the script under the same user account?"}, {"owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471879075, "post_id": 39043713, "comment_id": 65514195, "body": "the file is being created by the script and then it is expected to be oppenned again by the same script. but on the seccond run of the script I get that errror with the permissions. also the File cannot be deleted from my text editor but only from file explorer"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1471881177, "post_id": 39043713, "comment_id": 65515609, "body": "May be this link will help you: <a href=\"http://www.perlmonks.org/?node_id=1121545\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1121545</a>"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 4, "last_activity_date": 1471623730, "creation_date": 1471623730, "answer_id": 39043713, "question_id": 39043372, "link": "https://stackoverflow.com/questions/39043372/putting-newline-in-writing-csv-documents-perl/39043713#39043713", "title": "Putting NewLine in writing CSV documents Perl", "body": "<p>You've forgotten to declared end of line:</p>\n\n<pre><code>my $csv = Text::CSV-&gt;new ({binary=&gt;1, eol =&gt; $/}) or die \"cannot use CSV: \".Text::CSV-&gt;error_diag ();\n#                           here __^^^^^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471623730, "creation_date": 1471622435, "question_id": 39043372, "link": "https://stackoverflow.com/questions/39043372/putting-newline-in-writing-csv-documents-perl", "title": "Putting NewLine in writing CSV documents Perl", "body": "<p>I am trying to write data calculated by my perl script into a csv file which will be repeatedly opened and input to. I have encountered two issues. One, the CSV created ocupies a single row, adding each new field to a new column. The seccond is that the CSV file once created does not succesfully close so I am unable to reopen and edit it by running the script again. \nthe code that I am using is this: </p>\n\n<pre><code>push my @rows, [\"Entries Missing from English doc:\",\" \" , \"Entries Missing  from French doc:\"];\npush @rows, [\"$englishUnincluded[0]\", \" \", \"$frenchUnincluded[0]\"];\nmy $csv = Text::CSV-&gt;new ({binary=&gt;1}) or die \"cannot use CSV: \".Text::CSV-&gt;error_diag ();\nopen my $csvFile, \"&gt;:encoding(utf8)\", \"telt.csv\" or die \"telt.csv: $!\";\n$csv-&gt;column_names(@{$rows[0]});\n$csv-&gt;print($csvFile, $_) for @rows;\nclose $csvFile or die \"teet.csv: didnt close at all\";\n</code></pre>\n\n<p>I have also tried using consecutive print statements rather than the <code>$csv-&gt;print(..) for @rows;</code> I previously had statments looking like </p>\n\n<p><code>$field_vals = [\"$val\", \"something\", \" \"];\n$csv-&gt;print($csvFile, $field_vals);</code> and reloaded all the values into field vals and printed them as lines to the CSV but had the same two issues continuously. </p>\n\n<p>** note that CSV not closing issue goes away if only one line is printed. \nAlso, script does not print the \"or die\" message on not closing the file properly.</p>\n\n<p>thank you in advance for any help you provide!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1471620040, "post_id": 39042509, "comment_id": 65434719, "body": "<code>512</code> <i>can&#39;t</i> be an exit code -- exit codes are single-byte, making the value too large to fit."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1471621427, "post_id": 39042509, "comment_id": 65435623, "body": "@CharlesDuffy: Perl&#39;s <code>system()</code> returns a rather funky version of an exit code. To get the actual value, you need to shift right by 8. So 512 is a valid return value which actually means 2 :-/"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1471621630, "post_id": 39042509, "comment_id": 65435751, "body": "@DaveCross, yes, the answer specifying that already existed; my point was that what perl was capturing is clearly not a literal exit code at all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1471803268, "post_id": 39042509, "comment_id": 65483022, "body": "@Charles Duffy, They are 16-bit in Windows"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471805212, "post_id": 39042509, "comment_id": 65483547, "body": "@ikegami, ...if the OP hadn&#39;t been using shebangs on their scripts, I might have considered Windows a plausible platform, but as the situation is..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1471805339, "post_id": 39042509, "comment_id": 65483584, "body": "@Charles Duffy, I never said the OP was using Windows. Your comment wasn&#39;t even about the OP (since he used <code>exit(2)</code>, not <code>exit(512)</code>). I just pointed out an error in your claim."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1471805617, "post_id": 39042509, "comment_id": 65483674, "body": "The context (of a UNIX platform) was present in the question to which the comment was applied. If I make a claim about <code>printf</code> on a question talking about C, it&#39;s very different from a claim about <code>printf</code> on a question talking about shell. I keep myself outside of win32-specific contexts for the most part, and when outside them have no intent of saying &quot;except on Windows&quot; every time I open my mouth."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471884272, "post_id": 39042509, "comment_id": 65517319, "body": "Re &quot;<i>The context (of a UNIX platform) was present in the question to which the comment was applied</i>&quot;, No, it wasn&#39;t. There&#39;s nothing unix-specific about the question. Executing the exact same program on Windows will give you exactly the same result. A reader would have no reason to believe the comment is unix-specific, and would thus be misinformed by your incorrect comment. You failed to take Win32 out of the context as you claim you do. If you had, I would not have needed to comment."}], "answers": [{"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 5, "last_activity_date": 1471619854, "creation_date": 1471619854, "answer_id": 39042568, "question_id": 39042509, "link": "https://stackoverflow.com/questions/39042509/why-is-the-result-of-system-in-perl-not-the-exact-exit-code-of-my-script/39042568#39042568", "title": "Why is the result of system() in Perl not the exact exit code of my script?", "body": "<p><a href=\"http://perldoc.perl.org/functions/system.html\">The documentation</a> says <em>\"To get the actual exit value, shift right by eight\"</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1471621630, "creation_date": 1471621630, "answer_id": 39043117, "question_id": 39042509, "link": "https://stackoverflow.com/questions/39042509/why-is-the-result-of-system-in-perl-not-the-exact-exit-code-of-my-script/39043117#39043117", "title": "Why is the result of system() in Perl not the exact exit code of my script?", "body": "<p>The child might not even have gotten to call <code>exit</code>. As such, <code>system</code>'s returns value (aka <code>$?</code>) packs more information than just the <code>exit</code> parameter. </p>\n\n<pre><code>if    ( $? == -1  ) { die \"Can't launch child: $!\\n\"; }\nelsif ( $? &amp; 0x7F ) { die \"Child killed by signal \".( $? &amp; 0x7F ).\"\\n\"; }\nelsif ( $? &gt;&gt; 8   ) { die \"Child exited with error \".( $? &gt;&gt; 8 ).\"\\n\"; }\nelse                { print \"Child executed successfully\\n\"; }\n</code></pre>\n\n<p>This is <a href=\"http://perldoc.perl.org/functions/system.html\">documented</a>.</p>\n"}], "owner": {"reputation": 13766, "user_id": 1040752, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/46118f7ba2a0994306d82d4340aa3c5c?s=128&d=identicon&r=PG", "display_name": "Hailiang Zhang", "link": "https://stackoverflow.com/users/1040752/hailiang-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "closed_date": 1471623082, "accepted_answer_id": 39043117, "answer_count": 2, "score": 3, "last_activity_date": 1471621630, "creation_date": 1471619642, "last_edit_date": 1471620017, "question_id": 39042509, "link": "https://stackoverflow.com/questions/39042509/why-is-the-result-of-system-in-perl-not-the-exact-exit-code-of-my-script", "closed_reason": "Duplicate", "title": "Why is the result of system() in Perl not the exact exit code of my script?", "body": "<p>I have the following perl script (<code>test.pl</code>):</p>\n\n<pre><code>my $exit_code = system('./test.py');\nprint $exit_code.\"\\n\";\n</code></pre>\n\n<p>that is trying to capture the exit code from a python executable (<code>test.py</code>):</p>\n\n<pre><code>#!/bin/env python\nimport sys\nsys.exit(2)\n</code></pre>\n\n<p>Directly running python executable returns 2, which is what I expected:</p>\n\n<pre><code>&gt; ./test.py\n&gt; echo $?\n2\n</code></pre>\n\n<p>However, running perl returns something different:</p>\n\n<pre><code>&gt; perl test.pl\n512\n</code></pre>\n\n<p>Why did perl capture a different exit code from python?</p>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1471607936, "post_id": 39038431, "comment_id": 65426364, "body": "Quantifiers are greedy by default, consequence the first <code>.*</code> will match the largest possible string."}, {"owner": {"reputation": 142, "user_id": 1958020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FWpb.jpg?s=128&g=1", "display_name": "Greco", "link": "https://stackoverflow.com/users/1958020/greco"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1471608114, "post_id": 39038431, "comment_id": 65426495, "body": "Ups, true. I put just the &quot;(/.*xml):1:1&quot; part in the Notepad++ regex search. Thanks for the correction."}], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 1958020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FWpb.jpg?s=128&g=1", "display_name": "Greco", "link": "https://stackoverflow.com/users/1958020/greco"}, "edited": false, "score": 0, "creation_date": 1471608439, "post_id": 39038519, "comment_id": 65426716, "body": "Thanks, works for perl, not for sed...  &quot;sed &#39;s#.*\\?&#40;/.*xml&#41;:1:1.*#\\1#&#39;&quot; is returning the same  &quot;/audit_1471504114103_postnodes.xml&quot;"}], "tags": [], "owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "is_accepted": false, "score": 1, "last_activity_date": 1471608310, "last_edit_date": 1471608310, "creation_date": 1471607791, "answer_id": 39038519, "question_id": 39038431, "link": "https://stackoverflow.com/questions/39038431/why-sed-and-perl-are-matching-shortest-string-from-the-right/39038519#39038519", "title": "Why sed and Perl are matching shortest string from the right", "body": "<p>Change the regex to:</p>\n\n<pre><code>perl -pe 's#.*?(/.*xml):1:1.*#$1#'\n              ^\n</code></pre>\n\n<p>To match the whole path.</p>\n"}, {"tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1471609823, "creation_date": 1471609823, "answer_id": 39039112, "question_id": 39038431, "link": "https://stackoverflow.com/questions/39038431/why-sed-and-perl-are-matching-shortest-string-from-the-right/39039112#39039112", "title": "Why sed and Perl are matching shortest string from the right", "body": "<p>Instead of matching <code>.*</code>, match the string you really want: zero or more <em>non-slash</em> characters.</p>\n\n<pre><code>'s#[^/]*\\(/.*xml\\):1:1.*#\\1#'\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 1958020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FWpb.jpg?s=128&g=1", "display_name": "Greco", "link": "https://stackoverflow.com/users/1958020/greco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1471609823, "creation_date": 1471607493, "last_edit_date": 1471607598, "question_id": 39038431, "link": "https://stackoverflow.com/questions/39038431/why-sed-and-perl-are-matching-shortest-string-from-the-right", "title": "Why sed and Perl are matching shortest string from the right", "body": "<p>I'm trying to extract the full path of the file on a line like this: </p>\n\n<pre><code>\"2016-08-18 09:08:35.453 ERROR manager.impl.AuditManager (default task-149)         ISS:961|EXTERNALID:0182.1507.895.48259763|CAT:1|LOGID:75|DESCRIP:Exception while auditing postnodes: /data/bea/wls/92/repository/master_one/clients/961/082016/04/001001-0001-000000008746601.par_POSTNODES/audit_1471504114103_postnodes.xml:1:1: error: Unexpected end of file after null in org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3486) with original cause Unexpected end of file after null in org.apache.xmlbeans.impl.piccolo.xml.Piccolo.reportFatalError(Piccolo.java:1038)\"\n</code></pre>\n\n<p>And I find that when I'm using sentences like</p>\n\n<pre><code>perl -pe 's#.*(/.*xml):1:1.*#\\1#'\n</code></pre>\n\n<p>or the sed equivalent </p>\n\n<pre><code>sed 's#.*\\(/.*xml\\):1:1.*#\\1#'\n</code></pre>\n\n<p>im just obtaining the shortest match from the right <code>\"/audit_1471504114103_postnodes.xml\"</code> and not the whole path from the first \"/\" (while other regex engines like the one from Notepad++ are behaving the standard and right way (greedy) and returning <code>\"/data/bea/wls/92/repository/master_one/clients/961/082016/04/001001-0001-000000008746601.par_POSTNODES/audit_1471504114103_postnodes.xml\")</code></p>\n\n<p>What is happening here? The behavior of the engine is different or there is some hidden configuration variable i'm missing?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1471605803, "post_id": 39037772, "comment_id": 65425021, "body": "Why not returning an arrayref then de-reference it in the caller?"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1471606034, "post_id": 39037772, "comment_id": 65425156, "body": "Why not just return the list (if that&#39;s what the &quot;rest of the code&quot; expects)? I&#39;m trying to understand where the problem arises, how does the &quot;rest of the code&quot; expect its arguments to be provided?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3337516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16559c436ba3c781ad3a7e3c30036cad?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/3337516/kathryn"}, "edited": false, "score": 1, "creation_date": 1471606799, "post_id": 39038022, "comment_id": 65425604, "body": "Thanks - the double quotes were correct in my working copy, this was a typo here.  Returning @subtrackTable instead of \\@subtrackTable fixed it, but I don&#39;t understand why - can you give me an explanation?  I don&#39;t work in Perl often and sometimes the differences between an arrayref and an array are confusing to  me!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1471608012, "post_id": 39038022, "comment_id": 65426424, "body": "It looks like your code is called like this: <code>@values = subTrackTable(...);</code> So your caller expects a list of values which it then stores in an array. Returning <code>@subTrackTable</code> does this. If you return <code>\\@subTrackTable</code> then you&#39;re returning a single value which is a reference to the array. Then the caller&#39;s <code>@values</code> array only gets a single element assigned to it - which isn&#39;t what it expects at all."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 3337516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16559c436ba3c781ad3a7e3c30036cad?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/3337516/kathryn"}, "edited": false, "score": 1, "creation_date": 1471608607, "post_id": 39038022, "comment_id": 65426828, "body": "@Kathryn: If you return an array reference then you are sending back just a single scalar value which points to the array <code>@subtrackTable</code> that you&#39;ve populated within the subroutine. All the information is still there, but the calling code must expect a reference to be able to use it. Using <code>return @subtrackTable</code> just returns the <i>contents</i> of the array as a list, which corresponds to what your dummy <code>return</code> statement does, which you said works."}, {"owner": {"reputation": 3, "user_id": 3337516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16559c436ba3c781ad3a7e3c30036cad?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/3337516/kathryn"}, "edited": false, "score": 0, "creation_date": 1471610685, "post_id": 39038022, "comment_id": 65428234, "body": "Thanks for the explanations.  I mostly write Python which just takes care of this stuff under the hood, so it&#39;s good to know where I went wrong."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1471606384, "creation_date": 1471606384, "answer_id": 39038022, "question_id": 39037772, "link": "https://stackoverflow.com/questions/39037772/perl-return-list-of-array-refs-of-unknown-length/39038022#39038022", "title": "Perl return list of array refs of unknown length", "body": "<p>It looks like you just need to</p>\n\n<pre><code>return @subtrackTable;\n</code></pre>\n\n<p>Also, this line</p>\n\n<pre><code>my $subtrack = [':$value', $value];\n</code></pre>\n\n<p>must be changed to use double quotes, like this</p>\n\n<pre><code>my $subtrack = [ \":$value\", $value ];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3337516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16559c436ba3c781ad3a7e3c30036cad?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/3337516/kathryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 39038022, "answer_count": 1, "score": 0, "last_activity_date": 1471606384, "creation_date": 1471605603, "question_id": 39037772, "link": "https://stackoverflow.com/questions/39037772/perl-return-list-of-array-refs-of-unknown-length", "title": "Perl return list of array refs of unknown length", "body": "<p>I have a sub in Perl that needs to return a list of array refs to fit in with the rest of the package.  The problem is that I don't know in advance how many array refs I will generate.  My usual method of pushing the array refs that I generate into an array and returning a reference to that doesn't work with the rest of the code, which I can't change without breaking some legacy stuff.</p>\n\n<pre><code>sub subTrackTable {\n    my ($self, $experimentName, $subTrackAttr) = @_;\n\n    # return nothing if no subtracks required\n    if ($subTrackAttr eq 'no_sub') {\n        return;\n    }\n\n    # get distinct values for subtrack attr (eg antibody) from db\n    my $dbh = $self-&gt;dbh();\n    my $sh = $dbh-&gt;prepare(\"SELECT DISTINCT * blah sql\");\n    $sh-&gt;execute();\n    my @subtrackTable;\n    while (my ($term, $value) = $sh-&gt;fetchrow_array()) {\n        my $subtrack = [':$value', $value];\n        push (@subtrackTable, $subtrack);\n    }\n    $sh-&gt;finish();\n\n    # this is hard-coded for one experiment and does what I want\n    # Want to loop through @subtrackTable and return a list of all the array refs it contains\n    # Returning nested array refs doesn't work with external code\n    return ([\":H3K4me3\", \"H3K4me3\"],[\":H4K20me3\", \"H4K20me3\"]);\n}\n</code></pre>\n\n<p>The problem is that because I am dynamically getting values from a database, I don't know how many there will be.  Just returning \\@subtrackTable, which would be my usual strategy breaks the rest of the code.  If I knew in advance how many there would be I could also do something like</p>\n\n<pre><code>my $a1 = [\":$value1\", $value1];\nmy $a2 = [\":$value2\", $value2];\n...\nmy $an = [\":$valuen\", $valuen];\nreturn($a1, $a2,...$an);\n</code></pre>\n\n<p>but I can't see how to  make this work with an unknown number of arrayrefs.</p>\n\n<p>Help appreciated!</p>\n"}, {"tags": ["perl", "scripting", "storage"], "comments": [{"owner": {"reputation": 436, "user_id": 2130930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50ef9365054872b0356606359aa9b615?s=128&d=identicon&r=PG", "display_name": "iMan", "link": "https://stackoverflow.com/users/2130930/iman"}, "edited": false, "score": 0, "creation_date": 1471599092, "post_id": 39035627, "comment_id": 65420957, "body": "How does your  &#39;report&#39; look like? Something that can be depicted in tabular format? Edit your question with more information please."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1471599123, "post_id": 39035627, "comment_id": 65420975, "body": "Are you trying to convert txt file to html or just want to send an html email with attachment of text file?"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471599142, "post_id": 39035627, "comment_id": 65420984, "body": "You need to separate your question, right now it&#39;s unclear. You need to 1)convert text to html using perl 2)send a file to e-mail using perl? Is that correct?"}, {"owner": {"reputation": 11, "user_id": 5783748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ba6da8e3e1d53cc2682dcc891c62e4?s=128&d=identicon&r=PG&f=1", "display_name": "raju", "link": "https://stackoverflow.com/users/5783748/raju"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1471689091, "post_id": 39035627, "comment_id": 65455378, "body": "@john doe, Yes you are correct, I need to convert text to html using perl and send a file to email using perl."}, {"owner": {"reputation": 11, "user_id": 5783748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ba6da8e3e1d53cc2682dcc891c62e4?s=128&d=identicon&r=PG&f=1", "display_name": "raju", "link": "https://stackoverflow.com/users/5783748/raju"}, "reply_to_user": {"reputation": 436, "user_id": 2130930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50ef9365054872b0356606359aa9b615?s=128&d=identicon&r=PG", "display_name": "iMan", "link": "https://stackoverflow.com/users/2130930/iman"}, "edited": false, "score": 0, "creation_date": 1471689236, "post_id": 39035627, "comment_id": 65455428, "body": "@iMan, Yes my report is in tabular format."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1471601226, "last_edit_date": 1471601226, "creation_date": 1471600489, "answer_id": 39036062, "question_id": 39035627, "link": "https://stackoverflow.com/questions/39035627/how-to-convert-txt-file-to-html-using-perl/39036062#39036062", "title": "How to convert txt file to html using perl", "body": "<p>Your question is very vague, so it's hard to be of much help. This might point you in the right direction though.</p>\n\n<p>You basically have three tasks here.</p>\n\n<ol>\n<li>Parse your report into data structures.</li>\n<li>Use your data structures to generate an HTML document.</li>\n<li>Send the HTML document by email.</li>\n</ol>\n\n<p>I can't really help with step 1 as I know nothing about your report. If you have your file in CSV format, then <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\">Text:CSV</a> will be useful to you. It's worth pointing out that if you're generating this report, then you could generate it in a format that is easier to parse - JSON, for example.</p>\n\n<p>For step 2, I'd recommend a templating engine. I'd use the <a href=\"https://metacpan.org/release/Template-Toolkit\" rel=\"nofollow\">Template Toolkit</a>, but other options are available. The idea is that you create a template file that contains all of your HTML with \"tags\" where you want your variable data to go. On a simple level it might look something like this:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;&lt;title&gt;Some Title&lt;/title&gt;&lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Some Title&lt;/h1&gt;\n    &lt;p&gt;Blah...&lt;/p&gt;\n    &lt;table&gt;\n[% FOREACH row IN data -%]\n      &lt;tr&gt;&lt;td&gt;[% row.value %]&lt;/td&gt;&lt;td&gt;[% row.another_value %]&lt;/td&gt;&lt;/tr&gt;\n[% END -%]\n    &lt;table&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Assuming that's in a file called <code>email.tt</code> and you have your data in an array of hashes called <code>@data</code>, then you'd process the template like this:</p>\n\n<pre><code>use Template;\n\n@data = ({\n  value =&gt; 'something',\n  another_value =&gt; 'something else',\n}, {\n  value =&gt; 'something',\n  another_value =&gt; 'something else',\n});\n\nmy $tt = Template-&gt;new;\n\n$tt-&gt;process('email.tt', { data =&gt; \\@data }, \\$email_body)\n  or die $tt-&gt;error;\n</code></pre>\n\n<p>That will give you your expanded HTML in <code>$email_body</code>. And that brings us to step 3.</p>\n\n<p>I recommend <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow\">Email::Stuffer</a> for sending email.</p>\n\n<pre><code>use Email::Stuffer;\n\nEmail::Stuffer-&gt;from     ('you@example.com')\n              -&gt;to       ('someone_else@example.com')\n              -&gt;html_body($email_body)\n              -&gt;send;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5783748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ba6da8e3e1d53cc2682dcc891c62e4?s=128&d=identicon&r=PG&f=1", "display_name": "raju", "link": "https://stackoverflow.com/users/5783748/raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1471601226, "creation_date": 1471598965, "question_id": 39035627, "link": "https://stackoverflow.com/questions/39035627/how-to-convert-txt-file-to-html-using-perl", "title": "How to convert txt file to html using perl", "body": "<p>I have run some scripts to generate storage capacity report and configuration settings report using perl.  I would like send this report to my mail id in html using perl.</p>\n\n<p>Please note that I am new to perl programming.</p>\n"}, {"tags": ["perl", "websocket", "psgi"], "owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1471875892, "creation_date": 1471597331, "last_edit_date": 1471875892, "question_id": 39035049, "link": "https://stackoverflow.com/questions/39035049/how-to-close-psgi-connection-without-response", "title": "How to close PSGI connection without response?", "body": "<p>My application wants to pass <code>$env-&gt;{'psgix.io'}</code> handle to separate process for further WebSocket processing. Pass via UNIX socket <code>dup()</code>s handle, so I don't really care to return any answer from application to PSGI server. But I see no option to just silently close connection without returning any response from application. When I return nothing, PSGI server is not happy and logs \"500 Internal Server Error\". When I return just code reference like <code>sub {}</code>, then Twiggy is happy but uWSGI is not. Any other valid PSGI answer breaks WebSocket protocol. </p>\n\n<p>I tried to <code>dup()</code> raw handle and return last part of the WebSocket handshake as the PSGI answer, it worked with uWSGI but didn't with Twiggy.</p>\n\n<p>I looked through different PSGI/WebSocket implemetation and they do one of: </p>\n\n<ol>\n<li>don't return from handler at all until WebSocket is closed; </li>\n<li>return some kind of <code>sub {}</code>.</li>\n</ol>\n\n<p>What is the right way to return no answer and silently close connection in PSGI protocol?</p>\n\n<p><strong>UPDATE:</strong> It looks like Twiggy uses <code>[]</code> as <em>PSGI cancel</em> message. My patch for <code>uwsgi</code> to do the same was successfully merged.</p>\n"}, {"tags": ["perl", "unix"], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1471594343, "creation_date": 1471594343, "answer_id": 39034164, "question_id": 39033066, "link": "https://stackoverflow.com/questions/39033066/copy-without-overwrite-and-preserve-existing-files-with-extended-name/39034164#39034164", "title": "copy without overwrite and preserve existing files with extended name", "body": "<p>The below perl script recursively finding the files and copying into the destination folders however if already exists it will rename the file as filename_1, filename_2</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Find;\nuse File::Spec::Functions qw'catfile';\nuse File::Copy qw'move';\n#use autodie    qw'move';\nuse File::Basename;\n\nmy ($filename);#    = 'DUMBFILE';\nmy $origin      = '/home/itadmin/FoldersFind/OriginalFolder';\nmy $destination = '/home/itadmin/FoldersFind/Destination';\n\nmkdir($destination, 0777); \nmy ($path);\nfind(\\&amp;wanted, $origin);\n\nsub wanted\n{\n    if(-e $origin)\n    {\n        if($File::Find::name=~m/\\.(txt|html|xml)$/gs)\n        {\n            $filename = basename($File::Find::name);\n        }\n    }\n    $path = \"$destination/$filename\";\n    my $cnt;\n    while(-e $path)\n    {\n        $cnt++;\n        $path = catfile $destination, \"$filename.$cnt\";\n    }\n    move($filename, $path);\n}\n</code></pre>\n\n<p>Input: (Fetching files may be duplicate)</p>\n\n<pre><code>/OriginalFolder/&lt;folders1&gt;/*file\n/OriginalFolder/&lt;folders2&gt;/*file\n</code></pre>\n\n<p>Output: (Renaming)</p>\n\n<pre><code>/Destination/*file_&lt;count&gt; #/Destination/*file_1\n/Destination/*file_&lt;count&gt; #/Destination/*file_2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 522, "user_id": 6695750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e0b542466dff46af4db5137c618adc0?s=128&d=identicon&r=PG&f=1", "display_name": "ralfg", "link": "https://stackoverflow.com/users/6695750/ralfg"}, "is_accepted": true, "score": 3, "last_activity_date": 1471595097, "creation_date": 1471595097, "answer_id": 39034398, "question_id": 39033066, "link": "https://stackoverflow.com/questions/39033066/copy-without-overwrite-and-preserve-existing-files-with-extended-name/39034398#39034398", "title": "copy without overwrite and preserve existing files with extended name", "body": "<p>You can also use the <code>cp --backup=numbered</code> option. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1471600310, "creation_date": 1471600310, "answer_id": 39036013, "question_id": 39033066, "link": "https://stackoverflow.com/questions/39033066/copy-without-overwrite-and-preserve-existing-files-with-extended-name/39036013#39036013", "title": "copy without overwrite and preserve existing files with extended name", "body": "<p>In Perl (untested)</p>\n\n<pre><code>perl -MFile::Copy=cp -e '-e ($n = \"~/destination/$_\") or cp $_, $n for @ARGV' *.txt\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6693855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f8e568f8dd43434aff377e17e924337?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6693855/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 39034398, "answer_count": 3, "score": 0, "last_activity_date": 1471600310, "creation_date": 1471590591, "question_id": 39033066, "link": "https://stackoverflow.com/questions/39033066/copy-without-overwrite-and-preserve-existing-files-with-extended-name", "title": "copy without overwrite and preserve existing files with extended name", "body": "<p>i need to copy files with specific extensions. but the problem is there are multiple files with same file name.i dont want to overwrite them and store as copy like file _1,file_2 etc. when i tried using unix command line the files are overwitten though i used cp -n.\nis there any way i can do this task using command line or perl ?\nthe command i used was </p>\n\n<blockquote>\n  <p>find -L . -name \"*.txt\" -exec cp -n {} -t ~/destination</p>\n</blockquote>\n"}, {"tags": ["perl", "pdf", "module", "ocr"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "edited": false, "score": 0, "creation_date": 1471600208, "post_id": 39033471, "comment_id": 65421557, "body": "it&#39;s not work, it checkout successfully but another steps not works, means  ./runautoconf give error: bash: ./runautoconf: No such file or directory,i think it is another way to proceed further,Do you know that way?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "edited": false, "score": 0, "creation_date": 1471685893, "post_id": 39033471, "comment_id": 65454545, "body": "You aren&#39;t reading the installation notes from the link I gave you. <a href=\"https://github.com/tesseract-ocr/tesseract/wiki/Compiling\" rel=\"nofollow noreferrer\">github.com/tesseract-ocr/tesseract/wiki/Compiling</a> if you want to use software please at least read the documentation that it comes with. The perl module you&#39;re using has not been updated in 5 years, consider that you&#39;ll have to do some research here, or at least follow the links you&#39;re given and read what&#39;s there."}], "tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 0, "last_activity_date": 1471591938, "creation_date": 1471591938, "answer_id": 39033471, "question_id": 39032558, "link": "https://stackoverflow.com/questions/39032558/how-can-i-install-module-pdfocr2-in-perl/39033471#39033471", "title": "How can I install module PDF::OCR2 in perl?", "body": "<p>Tesseract, like many things has moved to github:</p>\n\n<p><a href=\"https://github.com/tesseract-ocr\" rel=\"nofollow\">https://github.com/tesseract-ocr</a></p>\n\n<p>You need to clone and build this software from here before trying to install the <a href=\"https://metacpan.org/pod/distribution/PDF-OCR2/lib/PDF/OCR2.pod\" rel=\"nofollow\">PDF::OCR2</a> module. Submit a ticket or a patch to update the INSTALL instructions.</p>\n"}], "owner": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1471591938, "creation_date": 1471588653, "question_id": 39032558, "link": "https://stackoverflow.com/questions/39032558/how-can-i-install-module-pdfocr2-in-perl", "title": "How can I install module PDF::OCR2 in perl?", "body": "<p>I am trying to fetch text from scanned PDF using perl, so I use PDF::OCR2 module in perl but I can not install this module,it is fail at installation of Image::OCR::Tesseract module, I am using CentOS7,here is my error during installation</p>\n\n<pre><code>one dependency not OK (Image::OCR::Tesseract); additionally test harness failed\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports LEOCHARRE/PDF-OCR2-1.21.tar.gz\nRunning make install\nAppending installation info to /usr/lib64/perl5/perllocal.pod\n  LEOCHARRE/PDF-OCR2-1.21.tar.gz\n  sudo /usr/bin/make install  -- OK\nFailed during this command:\n LEOCHARRE/PDF-OCR2-1.21.tar.gz  : make_test NO one dependency not OK (Image::OCR::Tesseract); additionally test harness failed\n</code></pre>\n\n<p>I read it's installation guid,they suggested to install gcc-c++ and automake first and then run following commands</p>\n\n<pre><code> svn checkout http://tesseract-ocr.googlecode.com/svn/trunk/ tesseract-ocr\n ./runautoconf\n mkdir build-directory\n cd build-directory\n ../configure\n make\n make install \n</code></pre>\n\n<p>but it's url does not work\nIs there any other way to install the module PDF::OCR2 successfully?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 184, "user_id": 6520782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd987047e2b9be21f470e295cb4e8fa4?s=128&d=identicon&r=PG&f=1", "display_name": "xCodeZone", "link": "https://stackoverflow.com/users/6520782/xcodezone"}, "edited": false, "score": 0, "creation_date": 1471585840, "post_id": 39031864, "comment_id": 65413706, "body": "If you are comparing, use  /i expression. This will lead to case insensitive comparison."}, {"owner": {"reputation": 41, "user_id": 6733429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37370808bf4b475ac5a1a44795d54e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Anon_Syndicate", "link": "https://stackoverflow.com/users/6733429/anon-syndicate"}, "reply_to_user": {"reputation": 184, "user_id": 6520782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd987047e2b9be21f470e295cb4e8fa4?s=128&d=identicon&r=PG&f=1", "display_name": "xCodeZone", "link": "https://stackoverflow.com/users/6520782/xcodezone"}, "edited": false, "score": 0, "creation_date": 1471586288, "post_id": 39031864, "comment_id": 65413859, "body": "I am really new to perl what exactly would this look like?"}, {"owner": {"reputation": 184, "user_id": 6520782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd987047e2b9be21f470e295cb4e8fa4?s=128&d=identicon&r=PG&f=1", "display_name": "xCodeZone", "link": "https://stackoverflow.com/users/6520782/xcodezone"}, "edited": false, "score": 0, "creation_date": 1471587061, "post_id": 39031864, "comment_id": 65414157, "body": "if (lc($value) eq lc(&quot;Anon&quot;))  what it basically does is, converts your input string and the string to compare with to lower case, and no matter what you enter, it accepts it. Also check the responses given by other guys below. They have pointed out some neat examples as well."}], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1471586889, "last_edit_date": 1471586889, "creation_date": 1471586277, "answer_id": 39032020, "question_id": 39031864, "link": "https://stackoverflow.com/questions/39031864/how-to-let-perl-recognize-both-lower-and-uppercase-input/39032020#39032020", "title": "How to let Perl recognize both lower and uppercase input?", "body": "<p>For your hash keys (<strong>single alphabet as a key</strong>) try the logical defined operator.</p>\n\n<blockquote>\n  <p>// => logical defined operator. If the left hand side is true give the result else if evaluate the right side.</p>\n</blockquote>\n\n<pre><code>print $channels{$input} // $channels{lc($input)};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1471586365, "creation_date": 1471586365, "answer_id": 39032032, "question_id": 39031864, "link": "https://stackoverflow.com/questions/39031864/how-to-let-perl-recognize-both-lower-and-uppercase-input/39032032#39032032", "title": "How to let Perl recognize both lower and uppercase input?", "body": "<p>It is not fully clear what your requirement is but from the example it looks like you are asking for a hash which is case insensitive regarding the keys, i.e. that  <code>$hash{foo}</code>, <code>$hash{FoO}</code> etc all result in the same value.</p>\n\n<p>This can be implemented with <a href=\"http://perldoc.perl.org/perltie.html\" rel=\"nofollow\">tied hashes</a> by defining appropriate <code>FETCH</code>,<code>STORE</code> and <code>DELETE</code> methods for the hash. And there are already implementations which do this, like <a href=\"https://metacpan.org/pod/distribution/Hash-Case/lib/Hash/Case.pod\" rel=\"nofollow\">Hash::Case</a>.</p>\n\n<p>Of course you could also simply normalize all keys (lower case, upper case etc) before accessing the hash.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 4369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc11ff0fc0b464d07dee0c51b5a7f93?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Loch", "link": "https://stackoverflow.com/users/4369588/wolfgang-loch"}, "is_accepted": false, "score": 1, "last_activity_date": 1471588708, "creation_date": 1471588708, "answer_id": 39032570, "question_id": 39031864, "link": "https://stackoverflow.com/questions/39031864/how-to-let-perl-recognize-both-lower-and-uppercase-input/39032570#39032570", "title": "How to let Perl recognize both lower and uppercase input?", "body": "<p>I would keep all the hash keys lower case and convert the input value keys to lower case:</p>\n\n<pre><code>for my $inputKey ('a', 'A', 'b', 'B') {\n    print $channels{lc($inputKey)}, \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "is_accepted": false, "score": 0, "last_activity_date": 1471592006, "creation_date": 1471592006, "answer_id": 39033488, "question_id": 39031864, "link": "https://stackoverflow.com/questions/39031864/how-to-let-perl-recognize-both-lower-and-uppercase-input/39033488#39033488", "title": "How to let Perl recognize both lower and uppercase input?", "body": "<p>With a <code>regex</code> it's not shorter but another way to solve it:</p>\n\n<pre><code>my %hash = {a =&gt; 'test', b =&gt; 'test2'};\nmy $read_input;\n\nforeach my $key (keys %hash){\n  if($key =~ /${read_input}/i){ #note the i for 'ignore case'\n    print $hash{$key}; \n  }\n}\n</code></pre>\n\n<p>You basically iterate through the keys of your hash and compare them against the input. If you found the right one you can print the value.</p>\n\n<p>But nevertheless: You may just convert every input to lower case and then access the hash. </p>\n"}, {"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1471651017, "post_id": 39035246, "comment_id": 65447907, "body": "This one. Have your keys in your code be all lower case, and then lowercase the input when using it to look up the key in your hash.  No need to be complex."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1471597890, "creation_date": 1471597890, "answer_id": 39035246, "question_id": 39031864, "link": "https://stackoverflow.com/questions/39031864/how-to-let-perl-recognize-both-lower-and-uppercase-input/39035246#39035246", "title": "How to let Perl recognize both lower and uppercase input?", "body": "<p>One simple solution for your input</p>\n\n<pre><code>print $channels{lc($input)};\n</code></pre>\n\n<p>If the input is uppercase it will convert to lowercase. Don't get worry about lowercase characters.</p>\n"}], "owner": {"reputation": 41, "user_id": 6733429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37370808bf4b475ac5a1a44795d54e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Anon_Syndicate", "link": "https://stackoverflow.com/users/6733429/anon-syndicate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "answer_count": 5, "score": 4, "last_activity_date": 1471597890, "creation_date": 1471585473, "last_edit_date": 1471587300, "question_id": 39031864, "link": "https://stackoverflow.com/questions/39031864/how-to-let-perl-recognize-both-lower-and-uppercase-input", "title": "How to let Perl recognize both lower and uppercase input?", "body": "<p>I'm currently trying to figure out how I can make my perl script accept both the lowercase and uppercase variant of a letter.</p>\n\n<p>For Example.</p>\n\n<pre><code>my %channels = (a =&gt; 'test', b =&gt; 'test2', c =&gt; 'test3', d =&gt; 'test4', e =&gt; 'test5', f =&gt; 'test6', g =&gt; 'test7');\n</code></pre>\n\n<p>So when I want to enter test I can either do a or A and it will accept it</p>\n\n<p>To Sum up the problem:</p>\n\n<p>When running the script I ran into an issue where you had to input a if you wanted test. This is all fine to me but other people wanted the option to do capital A instead. I am trying to give them the option to do either.</p>\n\n<p>Thanks All</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1471580034, "post_id": 39030973, "comment_id": 65412180, "body": "Store the all file names in an array. Then iterate the loop for this array. Then open the file and read it"}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1471581386, "post_id": 39031159, "comment_id": 65412441, "body": "There is no need to close file handle in your script  because it will automatically close by the lexical file handle :)"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 2, "creation_date": 1471581456, "post_id": 39031159, "comment_id": 65412454, "body": "Right. But since OP is new to Perl, I thought it&#39;d be nice to be explicit about it."}, {"owner": {"reputation": 3, "user_id": 6693855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f8e568f8dd43434aff377e17e924337?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6693855/vivek"}, "edited": false, "score": 0, "creation_date": 1471591166, "post_id": 39031159, "comment_id": 65416230, "body": "Thanks for the reply. i need to compare the contents of the files .so at same point of time i need to open two files and compare. in the above solution u mentioned i can only open one file at a time and compare with a string ."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1471581118, "last_edit_date": 1495541312, "creation_date": 1471581118, "answer_id": 39031159, "question_id": 39030973, "link": "https://stackoverflow.com/questions/39030973/open-files-sequentially-and-search-for-content-match-in-perl/39031159#39031159", "title": "open files sequentially and search for content match in perl", "body": "<p>As <a href=\"https://stackoverflow.com/questions/39030973/open-files-sequentially-and-search-for-content-match-in-perl/39031159#comment65412180_39030973\">mkHun suggested</a>,  you can use an array to store filenames then loop over it. See the below template to get an idea:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy @files = qw(file.txt file2.txt file3.txt filen.txt);\nforeach my $file (@files){\n    #open file in read mode to check contents\n    open (my $fh, \"&lt;\", $file) or die \"Couldn't open file $!\";\n    #loop over file's content line by line\n    while(&lt;$fh&gt;){\n        #$_ contains each line of file. You can manipulate $_ below\n        if($_ =~ /cat/){\n            print \"Line $. contains cat\";   \n        };\n    }\n    close $fh;\n}\n</code></pre>\n\n<p>Also read:</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/perlsyn.html#Loop-Control\" rel=\"nofollow noreferrer\">Loop Control in Perl (perlsyn)</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "is_accepted": false, "score": 0, "last_activity_date": 1471590290, "creation_date": 1471590290, "answer_id": 39032983, "question_id": 39030973, "link": "https://stackoverflow.com/questions/39030973/open-files-sequentially-and-search-for-content-match-in-perl/39032983#39032983", "title": "open files sequentially and search for content match in perl", "body": "<p>In addition to Chankey Pathak's answer, if you want to iterate over files in some directory (meaning you don't know what are the names of the files you want to process, but you know their location), the <a href=\"https://www.google.co.il/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjPtOj488zOAhUFvRQKHYsWA-AQFggcMAA&amp;url=http%3A%2F%2Fperldoc.perl.org%2FFile%2FFind.html&amp;usg=AFQjCNF6oM_MS5oJQ8Qp9QhQ3QLaSOOf5Q&amp;sig2=DmxDerTHfWh_9erK2cF9kg\" rel=\"nofollow\"><code>File::Find</code></a> module is an easy and straightforward solution.</p>\n"}], "owner": {"reputation": 3, "user_id": 6693855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f8e568f8dd43434aff377e17e924337?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6693855/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471651106, "creation_date": 1471579850, "last_edit_date": 1471651106, "question_id": 39030973, "link": "https://stackoverflow.com/questions/39030973/open-files-sequentially-and-search-for-content-match-in-perl", "title": "open files sequentially and search for content match in perl", "body": "<p>I am new to perl.</p>\n\n<p>I am comfortable with opening two files and checking their contents, but how do I open files one after another in a loop and check their contents?</p>\n"}, {"tags": ["perl", "module", "config"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471590277, "post_id": 39032958, "comment_id": 65415716, "body": "@h3g0r_ I am not certain that I understand the problem, please let me know whether this helps and if I need to add or explain."}, {"owner": {"reputation": 199, "user_id": 1739663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1327540d4cf198f9281d9cd34e6d582?s=128&d=identicon&r=PG&f=1", "display_name": "h3g0r_", "link": "https://stackoverflow.com/users/1739663/h3g0r"}, "edited": false, "score": 0, "creation_date": 1471627880, "post_id": 39032958, "comment_id": 65439061, "body": "that&#39;s the problem. But, my scenario is different because I can&#39;t modify all the script (.pl) that use the ModuleB. For that cause I want to modify only the ModuleB. I want to &quot;include&quot; or &quot;require&quot; the conf file in the ModuleB independent of those who use. Somethings like a &quot;pwd&quot; of the moduleB.pm as file. Can I do that? Thanks a lot for your help"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 199, "user_id": 1739663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1327540d4cf198f9281d9cd34e6d582?s=128&d=identicon&r=PG&f=1", "display_name": "h3g0r_", "link": "https://stackoverflow.com/users/1739663/h3g0r"}, "edited": false, "score": 0, "creation_date": 1471633442, "post_id": 39032958, "comment_id": 65441995, "body": "@h3g0r_ Ah. So you can only edit ModuleB, is that correct? What is the actual hierarchy?  You don&#39;t need to touch script.pl if the paths can be found once it&#39;s executed -- just supply the full path when you <code>require</code> the config file.  Did you try the above, with <code>require &quot;Path3&#47;conf.cfg&quot;</code> as the only to change to whatever you have?"}, {"owner": {"reputation": 199, "user_id": 1739663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1327540d4cf198f9281d9cd34e6d582?s=128&d=identicon&r=PG&f=1", "display_name": "h3g0r_", "link": "https://stackoverflow.com/users/1739663/h3g0r"}, "edited": false, "score": 0, "creation_date": 1471635448, "post_id": 39032958, "comment_id": 65442929, "body": "Yes, I must only modify the ModuleB, because is not possible modify all the script that use ModuleB. The hierarchy is similar to you said:   /admin/process1/Script.pl /admin/process1/lib/ModuleA.pm /admin/perlmod/lib/site_perl/5.10.1/common/ModuleB.pm      The idea of this is not put the full path in the module, the real path as a string, because in some moment the perl lib will be upagrade and the 5.10.1 will be 5.12.0 and then I must change again the ModuleB to fix the reference."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 199, "user_id": 1739663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1327540d4cf198f9281d9cd34e6d582?s=128&d=identicon&r=PG&f=1", "display_name": "h3g0r_", "link": "https://stackoverflow.com/users/1739663/h3g0r"}, "edited": false, "score": 0, "creation_date": 1471675922, "post_id": 39032958, "comment_id": 65451930, "body": "@h3g0r_OK.  I added one way to do that. The path for <code>ModuleB</code> (and thus <code>conf.cfg</code>) can be found at runtime, and that used in <code>require</code> (which goes at runtime, not at BEGIN). It&#39;s added to the end of the post."}, {"owner": {"reputation": 199, "user_id": 1739663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1327540d4cf198f9281d9cd34e6d582?s=128&d=identicon&r=PG&f=1", "display_name": "h3g0r_", "link": "https://stackoverflow.com/users/1739663/h3g0r"}, "edited": false, "score": 0, "creation_date": 1471886935, "post_id": 39032958, "comment_id": 65518664, "body": "Thank you very much zdim!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1471894466, "last_edit_date": 1471894466, "creation_date": 1471590211, "answer_id": 39032958, "question_id": 39030912, "link": "https://stackoverflow.com/questions/39030912/external-conf-file-in-perl-module/39032958#39032958", "title": "External conf file in perl module", "body": "<p><strong>Update</strong> &nbsp; Added code to get the <code>ModuleB</code> path at runtime for <code>require</code>, to avoid hard-coding it since the module's location may be moved in updates (separate section at the end).</p>\n\n<hr>\n\n<p>Specify the full path for <code>conf.cfg</code> when requiring it.</p>\n\n<p>Consider the following hierarchy and files, where all paths start from <code>/path/</code></p>\n\n<pre>\n/path/Path1/script.pl \n/path/Path2/ModuleA.pm \n/path/Path3/ModuleB.pm \n/path/Path3/conf.cfg\n</pre>\n\n<p>The main <strong>script.pl</strong></p>\n\n<pre><code>use warnings;\nuse lib '/path';\nuse Path2::ModuleA;\n</code></pre>\n\n<p>File <strong>Path2/ModuleA.pm</strong></p>\n\n<pre><code>package ModuleA;    \nuse warnings;\nuse Path3::ModuleB;\n1;\n</code></pre>\n\n<p>File <strong>Path3/ModuleB.pm</strong></p>\n\n<pre><code>package ModuleB;\nuse warnings;\nrequire \"Path3/conf.cfg\";\n1;\n</code></pre>\n\n<p>File <strong>Path3/conf.cfg</strong></p>\n\n<pre><code>use feature 'say';\nsay \"This is conf.cfg\";\n</code></pre>\n\n<p>Running the <code>script.pl</code> (from inside <code>Path1/</code>) prints the line <code>This is conf.cfg</code>  </p>\n\n<hr>\n\n<p>Note the line <code>use lib '/path'</code>, where <code>/path</code> is a literal string specifying the path to directory from which <code>Path2</code> and <code>Path3</code> start. See <a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow\"><code>lib</code></a> pragma</p>\n\n<blockquote>\n  <p>It is typically used to add extra directories to perl's search path so that later use or require statements will find modules which are not located on perl's default search path.</p>\n</blockquote>\n\n<p>Using library path relative to where the script is can be made easier. In <code>script.pl</code></p>\n\n<pre><code># Load relative path for modules.\nuse FindBin qw($Bin);\nuse lib \"$Bin/../lib\";\nuse Path2::ModuleA;\n# ...\n</code></pre>\n\n<p>In this case <code>Path2</code> (etc) for modules start in the directory <code>../lib</code>, relative to where the script is</p>\n\n<pre>\n./bin/script.pl\n./lib/Path2/ModuleA.pm\n./lib/Path3/...\n</pre>\n\n<p>where I picked the name <code>bin</code> just as an example.  See the core module <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow\"><code>FindBin</code></a>.</p>\n\n<p>This quick note barely scratches the surface of how modules can be organized.</p>\n\n<hr>\n\n<p>A specific constraint emerged in comments. The <code>ModuleB</code> lives in a path that may change with future updates, thus hard-coding that path in the <code>require</code> statement is not optimal.  </p>\n\n<p>One solution is that the path is found inside <code>ModuleB</code> at runtime and that used in the <code>require</code>.  This can be done using Perl's <em>special literal</em> <a href=\"http://perldoc.perl.org/perldata.html#Scalar-values\" rel=\"nofollow\"><code>__FILE__</code></a>.</p>\n\n<p>File <strong>Path3/ModuleB.pm</strong></p>\n\n<pre><code>package ModuleB;\n\nuse warnings;\nuse strict;\nuse Cwd qw(abs_path);    \n\nmy ($this_dir) = abs_path(__FILE_) =~ m|(.*)/|;\n\nrequire \"$this_dir/conf.cfg\";\n\n1;\n</code></pre>\n\n<p>The <code>abs_path</code> from the core module <a href=\"http://perldoc.perl.org/Cwd.html\" rel=\"nofollow\"><code>Cwd</code></a> is needed since <code>__FILE__</code> may not return the absolute path. The regex used to find the directory itself matches everything up to a <code>/</code> <em>greedily</em>, all the way up to the last <code>/</code> -- thus the whole path without the filename itself.  Instead of doing that you can use functions from either of the <a href=\"http://perldoc.perl.org/File/Spec.html\" rel=\"nofollow\"><code>File::Spec</code></a> or <a href=\"http://perldoc.perl.org/File/Basename.html\" rel=\"nofollow\"><code>File::Basename</code></a> core modules.</p>\n"}], "owner": {"reputation": 199, "user_id": 1739663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1327540d4cf198f9281d9cd34e6d582?s=128&d=identicon&r=PG&f=1", "display_name": "h3g0r_", "link": "https://stackoverflow.com/users/1739663/h3g0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 39032958, "answer_count": 1, "score": 0, "last_activity_date": 1471894466, "creation_date": 1471579359, "question_id": 39030912, "link": "https://stackoverflow.com/questions/39030912/external-conf-file-in-perl-module", "title": "External conf file in perl module", "body": "<p>I'm pretty new in Perl and need an advice for this, please.</p>\n\n<p>I have a script <strong>Script.pl</strong> in a \"<strong>Path 1</strong>\".\nBeside, I have a module <strong>ModuleA.pm</strong> in a \"<strong>Path 2</strong>\".\nFinally, I have a common module <strong>ModuleB.pm</strong> in a \"<strong>Path 3</strong>\". This ModuleB is common and other script in other path use it.\nAll path are differents. The Script.pl use the ModuleA, and the ModuleA use the ModuleB.</p>\n\n<p>I need put a external file of configuration in the ModuleB. This conf file is in the same \"Path 3\". The conf.cfg is require in the ModuleB:</p>\n\n<pre><code>use strict;\nrequire \"conf.cfg\";\n</code></pre>\n\n<p>How can I include the conf.cfg in the ModuleB as a dynamic way?, because if I compile the Script.pl, doesn't compile because can't find the conf.cfg, because now ModuleB path is \"Path 1\" and in the \"Path 1\" doesn't exist the conf file.</p>\n\n<p>So I need require the conf file independently of the *.pl and path that use the ModuleB.</p>\n\n<p>I was clear enough?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["bash", "perl", "awk", "sed", "sum"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 2, "creation_date": 1471572555, "post_id": 39030057, "comment_id": 65410577, "body": "cmon, just remove the <code>print $1</code>, right? Good luck!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2616677"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1471572923, "post_id": 39030057, "comment_id": 65410652, "body": "now can anyone tell me how  5.90 5.90 5.53 6.00 SUM up to 47"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1471573245, "post_id": 39030057, "comment_id": 65410724, "body": "I get 23.33. Are you saying that you are getting 47 as your answer from those numbers? OR do you really want 47 to be your answer, regardless of your inputs? ;-)  Good luck."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1471573397, "post_id": 39030057, "comment_id": 65410754, "body": "oh yeah, just noticed that your intput data has <code>.</code> on a line by itself. Is that in tentional? What do you expect to happen when you try to sum 1+7+.+2? Or has reformatting your Q messed up your data. Use 4 spaces at the front of  a line to have it format as code/data/errMsgs. Good luck."}, {"owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1471592470, "post_id": 39030057, "comment_id": 65417000, "body": "@shellter, I guess the three first lines are the input file and the next ones are the output of the command line. @user17707 expects to sum up the values <code>17.28</code>, <code>17.01</code>, <code>17.00</code> and <code>18.72</code> but he gets a line for each digit (and the decimal point) of those values. This is due to the wrong <code>grep</code> regular expression as @Jonahtan pointed in his answer."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1471627959, "last_edit_date": 1471627959, "creation_date": 1471573734, "answer_id": 39030233, "question_id": 39030057, "link": "https://stackoverflow.com/questions/39030057/having-sum-issues-with-a-bash-script/39030233#39030233", "title": "Having SUM issues with a bash script", "body": "<p>The regex in <code>grep -o \"[0.00-9.99]\" \"/location/$value-1.txt\"</code> is equivalent to <code>[0-9.]</code>, but you're probably looking for numbers in the range 0.00 to 9.99.  For that, you need a different regex:</p>\n\n<pre><code>grep -o \"[0-9]\\.[0-9][0-9]\" \"/location/$value-1.txt\"\n</code></pre>\n\n<p>That looks for a digit, a dot, and two more digits.  It was almost tempting to use <code>[.]</code> in place of <code>\\.</code>; it would also work.  A plain <code>.</code> would not; that would select entries such as 0X87.</p>\n\n<p>Note that the pattern shown (<code>[0-9]\\.[0-9][0-9]</code>) will match <code>192.16.24.231</code> twice (<code>2.16</code> and <code>4.23</code>).  If that's not what you want, you have to be a lot more precise.  OTOH, it may not matter in the slightest for the actual data you have.  If you'd want it to match <code>192.16</code> and <code>24.231</code> (or <code>.24</code> and <code>.231</code>), you have to refine your regex.</p>\n\n<p>Your command structure:</p>\n\n<pre><code>grep \u2026\u00a0filename | awk '\u2026' &gt;&gt; filename\n</code></pre>\n\n<p>is living dangerously.  In the example, it is 'OK' (but there's a huge grimace on my face as I type 'OK') because the <code>awk</code> script doesn't write anything to the file until <code>grep</code> has read it all.  But change the <code>&gt;&gt;</code> to <code>&gt;</code> and you have an empty input, or have <code>awk</code> write material before the <code>grep</code> is complete and suddenly it gets very tricky to determine what happens (it depends, in part, on what <code>awk</code> writes to the end of the file).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2616677"}, "edited": false, "score": 0, "creation_date": 1471611448, "post_id": 39033919, "comment_id": 65428775, "body": "Thank you, I Much appreciate the help"}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1471593518, "creation_date": 1471593518, "answer_id": 39033919, "question_id": 39030057, "link": "https://stackoverflow.com/questions/39030057/having-sum-issues-with-a-bash-script/39033919#39033919", "title": "Having SUM issues with a bash script", "body": "<p>Why not stick with AWK completely? Code:</p>\n\n<pre><code>$ cat &gt; summer.awk \n{\n    while(match($0,/[0-9]+\\.[0-9]+/))    # while matches on record\n    {\n        sum+=substr($0, RSTART, RLENGTH) # extract matches and sum them\n        $0=substr($0, RSTART + RLENGTH)  # reset to start after previous match\n        count++                          # count matches\n    }\n} \nEND {\n    print sum\"/\"count\"=\"sum/count        # print stuff\n</code></pre>\n\n<p>Data:</p>\n\n<pre><code>$ cat &gt; data.txt\n    Morningtemp:17.28\nNoontemp:17.01\nLowtemp:17.00 Hightemp:18.72\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>$ awk -f summer.awk file\n70.01/4=17.5025\n</code></pre>\n\n<p>It might work in the winter too.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2616677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471627959, "creation_date": 1471572357, "last_edit_date": 1471572612, "question_id": 39030057, "link": "https://stackoverflow.com/questions/39030057/having-sum-issues-with-a-bash-script", "title": "Having SUM issues with a bash script", "body": "<p>I'm trying to write a script to pull the integers out of 4 files that store temperature readings from 4 industrial freezers, this is a hobby script it generates the general readouts I wanted, however when I try to generate a SUM of the temperature readings I get the following printout into the file and my goal is to print the end SUM only not the individual numbers printed out in a vertical format\nAny help would be greatly appreciated;here's my code</p>\n\n<pre><code>grep -o \"[0.00-9.99]\" \"/location/$value-1.txt\" | awk '{ SUM += $1; print $1} END { print SUM }' &gt;&gt; \"/location/$value-1.txt\"\n</code></pre>\n\n<p>here is what I am getting in return</p>\n\n<pre><code>    Morningtemp:17.28\nNoontemp:17.01\nLowtemp:17.00 Hightemp:18.72\n1\n7\n.\n2\n8\n1\n7\n.\n0\n1\n1\n7\n.\n0\n0\n1\n8\n.\n7\n2\n53\n</code></pre>\n\n<p>It does generate the SUM I don't need the already listed numbers, just the SUM total</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1471572420, "post_id": 39030045, "comment_id": 65410545, "body": "Also, there is no longer a need to put a <code>&amp;</code> at the front of a function call."}, {"owner": {"reputation": 1148, "user_id": 1055951, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc54eea970101df2fb300d22fe96e24a?s=128&d=identicon&r=PG", "display_name": "David Green", "link": "https://stackoverflow.com/users/1055951/david-green"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1471572480, "post_id": 39030045, "comment_id": 65410558, "body": "sorry.  clarified.  it is complaining about %countershash.   I realized I&#39;d removed the line that defines $counter by mistake"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1471572525, "post_id": 39030045, "comment_id": 65410571, "body": "Call it as <code>$countershash-&gt;{$counter}</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1471572578, "post_id": 39030045, "comment_id": 65410584, "body": "Perl is complaining about a hash named <code>%countershash</code> which you did not define, instead you have a hashref named <code>$countershash</code>."}, {"owner": {"reputation": 1148, "user_id": 1055951, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc54eea970101df2fb300d22fe96e24a?s=128&d=identicon&r=PG", "display_name": "David Green", "link": "https://stackoverflow.com/users/1055951/david-green"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1471572798, "post_id": 39030045, "comment_id": 65410623, "body": "ah.  thanks.  that makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1471593083, "post_id": 39030081, "comment_id": 65417356, "body": "Please don&#39;t show people that horrible syntax. The recommended way to get elements from a hash reference is using <code>-&gt;</code>. So, <code>my $counterdesc = $counterhash-&gt;{$counter};</code>."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1471596476, "post_id": 39030081, "comment_id": 65419324, "body": "@DaveCross Thank you for your comment post edited. :)"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1471596267, "last_edit_date": 1471596267, "creation_date": 1471572549, "answer_id": 39030081, "question_id": 39030045, "link": "https://stackoverflow.com/questions/39030045/perl-global-symbol-requires-explicit-package-name/39030081#39030081", "title": "Perl - Global symbol requires explicit package name", "body": "<p>The problem is dereferencing. you should dereference the hash inside the subroutine</p>\n\n<pre><code>my $counterdesc = $countershash-&gt;{$counter};\n</code></pre>\n\n<p><code>-&gt;</code> this is called <a href=\"http://perldoc.perl.org/perlop.html#The-Arrow-Operator\" rel=\"nofollow\">arrow operator</a> which is used to deference the array and hashes.  </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1471596558, "last_edit_date": 1471596558, "creation_date": 1471593539, "answer_id": 39033932, "question_id": 39030045, "link": "https://stackoverflow.com/questions/39030045/perl-global-symbol-requires-explicit-package-name/39033932#39033932", "title": "Perl - Global symbol requires explicit package name", "body": "<p>The code <code>$counterhash{$counter}</code> means \"look up the key <code>$counter</code> in the hash <code>%counterhash</code>\". You don't have a hash called <code>%counterhash</code>, you have a hash reference in a scalar variable called <code>$counterhash</code>. <code>%counterhash</code> and <code>$counterhash</code> are two completely different variables.</p>\n\n<p>In order to look up an element in a hash reference, you need to use different syntax.</p>\n\n<pre><code>my $counterdesc = $countershash-&gt;{$counter};\n</code></pre>\n\n<p>Please don't use the <code>$$countershash{$counter}</code> syntax (previously) used in another answer. That will only confuse whoever needs to maintain your code in six months time (which might well be you).</p>\n"}], "owner": {"reputation": 1148, "user_id": 1055951, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc54eea970101df2fb300d22fe96e24a?s=128&d=identicon&r=PG", "display_name": "David Green", "link": "https://stackoverflow.com/users/1055951/david-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 39030081, "answer_count": 2, "score": 0, "last_activity_date": 1471596558, "creation_date": 1471572233, "last_edit_date": 1471572415, "question_id": 39030045, "link": "https://stackoverflow.com/questions/39030045/perl-global-symbol-requires-explicit-package-name", "title": "Perl - Global symbol requires explicit package name", "body": "<p>I am calling a perl subroutine</p>\n\n<pre><code>&amp;ProcessInput($line, \\%txcountershash, \\%txhash);\n</code></pre>\n\n<p>I have this definition: </p>\n\n<pre><code>sub ProcessInput() {    \nmy $word;\nmy $counterkey;   \nmy $line = $_[0];\nmy $countershash = $_[1];\nmy $outputhash = $_[2];  \n\n# remove all the blanks from the line\n$line =~ s/\\s+//g;  \n\nmy ($port,$counter,$value,$datetime) = split('\\|',$line,4);\n\nmy $counterdesc = $countershash{$counter};\n</code></pre>\n\n<p>the line that causes the problem is the last line.  It says that global symbol %countershash requires explicit package name.   I'm not sure why it's giving me the error.  There aren't any problems otherwise, if I comment that line out the script runs. The hash is set up as an error code for a key and a description that is the value.  I'm trying to get the value at a particular key in $countershash so I can add the error description to the output hash.  </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1471569376, "post_id": 39029708, "comment_id": 65409940, "body": "I need to replace the double and single quotes with flags so after the encoding they can be replaced back as not encoded. this leaves still encoded"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1471574377, "last_edit_date": 1471574377, "creation_date": 1471569212, "answer_id": 39029708, "question_id": 39029664, "link": "https://stackoverflow.com/questions/39029664/preserving-cetain-entities-from-being-encoded-algorithm/39029708#39029708", "title": "Preserving cetain entities from being encoded algorithm", "body": "<p>It is possible to reset the values in the translation table (char2entity hash). </p>\n\n<pre><code>use HTML::Entities;\n$HTML::Entities::char2entity{'\\''} = '\\'';\n$HTML::Entities::char2entity{'\"'} = '\"';\n\n\nmy $comment = qq(&lt;br/&gt;Test&lt;br/&gt;[url=#|onclick=\"printcoupon('3569')\"]test comment[/url]);\n$comment  =  HTML::Entities::encode_entities( $comment);\n</code></pre>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 39029708, "answer_count": 1, "score": 0, "last_activity_date": 1471574377, "creation_date": 1471568779, "last_edit_date": 1471570011, "question_id": 39029664, "link": "https://stackoverflow.com/questions/39029664/preserving-cetain-entities-from-being-encoded-algorithm", "title": "Preserving cetain entities from being encoded algorithm", "body": "<p>I have a string that gets parsed through the function <code>encode_entities</code>. I need to preserve double-quotes and single-quotes from being encoded so I tried replacing these characters with a flag and then <strong>after the encoding function call we replace the flags back with the double and single quote characters, un encoded</strong></p>\n\n<p>Here's my strategy:</p>\n\n<pre><code>// this is a value in the database\nmy $comment = \"&lt;br/&gt;Test&lt;br/&gt;[url=#|onclick=\"printcoupon('3569')\"]test comment[/url]\";\n$comment =~ s/\"/[dq]/g;\n$comment =~ s/'/[sq]/g;\n$comment = encode_entities($comment);\nif(index($comment,\"onclick\") != -1){\n my $start = index($comment,\"onclick=\");\n my $length = index($comment,\"\\\"]\");\n my $newStr = substr($comment,$start,$length-$start+1);\n $comment =~ s!\\[url=(.+?)\\](.+?)\\[\\/url\\]!&lt;a href=\"#\" style=\"text-decoration:none;color:#336699\" $newStr&gt;$2&lt;/a&gt;!g;\n} else {\n $comment =~ s!\\[url=(.+?)\\](.+?)\\[\\/url\\]!&lt;a href=\"$1\" style=\"text-decoration:none;color:#336699\"&gt;$2&lt;/a&gt;!g;\n}\n$comment =~ s/\\[dq\\]/\"/g;\n$comment =~ s/\\[sq\\]/'/g;\n</code></pre>\n\n<p>This code does not work, but its my strategy. Without these replacement calls, the end result is:</p>\n\n<pre><code>&lt;a href=\"#\" style=\"text-decoration:none;color:#336699\" onclick=&amp;quot;printcoupon(&amp;#39;3569&amp;#39;)&gt;test comment&lt;/a&gt;\n</code></pre>\n\n<p>When it should be</p>\n\n<pre><code>&lt;a href=\"#\" style=\"text-decoration:none;color:#336699\" onclick=\"printcoupon('3569')\"&gt;test comment&lt;/a&gt;\n</code></pre>\n\n<p><strong>Also, you can see that the end double quotes for the printcoupon function text call do not exist</strong></p>\n\n<p>I need help past this point as i am still a <strong>very new perl user</strong></p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>$comment =~ s/&amp;quot;/\"/g;\n$comment =~ s/&amp;#39;/'/g;\n</code></pre>\n\n<p>Seems to work but it still does not have an end double quote</p>\n"}, {"tags": ["perl", "sockets", "csv", "udp"], "comments": [{"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1471727797, "post_id": 39027757, "comment_id": 65466987, "body": "It&#39;s good you <code>use warnings;</code>; I would suggest adding a <code>use strict;</code> at the beginning as well. It may give you trouble for a week or so, but will save time &amp; neural cells big time."}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1471729616, "post_id": 39027757, "comment_id": 65467445, "body": "Not sure what format your hardware expects? Comma-separated strings, space-separated strings, binary data?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6732474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce2a5c36a5c8e1d5529df84fbff1ae6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sinha", "link": "https://stackoverflow.com/users/6732474/a-sinha"}, "edited": false, "score": 0, "creation_date": 1472062089, "post_id": 39028086, "comment_id": 65605859, "body": "Is there any way I can send Numbers instead of String ?  What do u mean by saying &quot;Can send only bytes"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 6732474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce2a5c36a5c8e1d5529df84fbff1ae6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sinha", "link": "https://stackoverflow.com/users/6732474/a-sinha"}, "edited": false, "score": 0, "creation_date": 1472063045, "post_id": 39028086, "comment_id": 65606400, "body": "I don&#39;t know how else to explain it. The only thing you can write to a file handle (and thus <code>print</code> or <code>send</code>) is a sequence of bytes. There&#39;s nothing special about this one. It&#39;s just like every other time you&#39;ve used <code>print</code>. If you want to place some data in a file or send it using <code>send</code>, you need to serialize it into bytes (i.e. using CSV, XML, JSON or some packed binary structure) first."}, {"owner": {"reputation": 11, "user_id": 6732474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce2a5c36a5c8e1d5529df84fbff1ae6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sinha", "link": "https://stackoverflow.com/users/6732474/a-sinha"}, "edited": false, "score": 0, "creation_date": 1472064770, "post_id": 39028086, "comment_id": 65607391, "body": "Thanks ikegami for trying to help me. So , Send($_);  transmits my Data which is numbers in string format to the IP Address. I need to pack the data (Numbers ) first inorder to send it ...  And also to unpack the data at the Receiving End after my UDp Receive block gets the data"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1471557884, "last_edit_date": 1471557884, "creation_date": 1471557196, "answer_id": 39028086, "question_id": 39027757, "link": "https://stackoverflow.com/questions/39027757/send-five-decimal-numbers-using-udp-in-perl/39028086#39028086", "title": "Send five decimal numbers using UDP in PERL", "body": "<p>You can only send bytes, which you provide as a string. Just like any other file handles. Seeing as you already have the numbers serialized, you could simply use the following:</p>\n\n<pre><code>while (&lt;INFILE&gt;) {\n    next if $. == 1;\n    $socket-&gt;send($_);\n} \n</code></pre>\n\n<p>Why are you using UDP instead of TCP!?!? It's completely inappropriate here because it doesn't guarantee that the packets will arrive, much less in the same order as they were sent. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6732474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce2a5c36a5c8e1d5529df84fbff1ae6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sinha", "link": "https://stackoverflow.com/users/6732474/a-sinha"}, "edited": false, "score": 0, "creation_date": 1472062377, "post_id": 39058930, "comment_id": 65606014, "body": "I used a statement kind of this.  $socket-&gt;send( pack &quot;d&lt;*&quot;,@ReqData);       Perl interpreter abruplty stops"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 6732474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce2a5c36a5c8e1d5529df84fbff1ae6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sinha", "link": "https://stackoverflow.com/users/6732474/a-sinha"}, "edited": false, "score": 1, "creation_date": 1472062636, "post_id": 39058930, "comment_id": 65606155, "body": "@A. Sinha, What do you mean by &quot;abruptly stops&quot;? Killed by a signal? If so, which one? Exits with an error? If so, what error message is printed and what error code is returned?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472062745, "post_id": 39058930, "comment_id": 65606220, "body": "Wow! I&#39;ve never seen <code>d[5]</code> before! It&#39;s documented to be equivalent to the far more commonly-used <code>d5</code>."}], "tags": [], "owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "is_accepted": false, "score": 1, "last_activity_date": 1472062785, "last_edit_date": 1472062785, "creation_date": 1471729197, "answer_id": 39058930, "question_id": 39027757, "link": "https://stackoverflow.com/questions/39027757/send-five-decimal-numbers-using-udp-in-perl/39058930#39058930", "title": "Send five decimal numbers using UDP in PERL", "body": "<p><strong>UPD</strong> Ok, it seems I misread the requirements, but just in case someone stumbles upon similar task...</p>\n\n<p>If you're really asking for sending raw floating-point numbers in binary format, <code>pack</code> is indeed what you're looking for. Specifically, for sending an array of 5 numbers it should be</p>\n\n<pre><code>$socket-&gt;send( pack \"d[5]\", @tempData );\n</code></pre>\n\n<p>Or you may want to send as many numbers as you have, in which case it's <code>\"d*\"</code>. </p>\n\n<p>You may also need to change to <code>d&lt;*</code> (<a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow\">little endian byte order</a>) or <code>d&gt;*</code> (big endian) depending on device's native byte order. (Hope it's not a pacemaker, so you can find out by experiment which is correct). </p>\n\n<p>Here <code>d</code> denotes type (\"double\"), <code>&lt;</code> and <code>&gt;</code> denote byte order, and <code>[5]</code> and <code>*</code> denotes a quantity (<code>*</code> = all that you have). </p>\n\n<p>P.S. If the device expects text data, say newline-separated numbers, then <code>join</code> should do the trick.</p>\n"}], "owner": {"reputation": 11, "user_id": 6732474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce2a5c36a5c8e1d5529df84fbff1ae6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sinha", "link": "https://stackoverflow.com/users/6732474/a-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472062785, "creation_date": 1471555565, "question_id": 39027757, "link": "https://stackoverflow.com/questions/39027757/send-five-decimal-numbers-using-udp-in-perl", "title": "Send five decimal numbers using UDP in PERL", "body": "<p>I am new to Perl and Networking part. \nI have to send some bunch of floating point numbers (Which I get from a CSV File) to a hardware using UDP protocol on Perl Platform.</p>\n\n<pre><code> #!/usr/bin/perl\n#udpclient.pl\n\nuse IO::Socket;\nuse warnings;\nuse Time::HiRes qw (sleep);\n\n\nmy ($socket,$data);\n#my $in_file_name = $ARGV[0];\n$in_file_name='C:\\Users\\Aryan Sinha\\Documents\\RecordedData.csv';\n\nopen(INFILE,\"&lt;\",$in_file_name) or die \"Not able to open test file $!\";\n\n$socket = IO::Socket::INET-&gt;new (PeerAddr   =&gt; '21.22.32.214',\n                                 PeerPort  =&gt; 5005,\n                                 Type      =&gt; SOCK_DGRAM,\n                                 Proto      =&gt; 'udp') or die \"ERROR in\n+ Socket Creation : $!\\n\";\n\nwhile (&lt;INFILE&gt;)\n{\n    chomp;\n    if($. != 1) #skip first line\n    {\n        $data=$_;  # Data would be in String format\n\n        my @tempData = split(',', $data);\n\n        $socket-&gt;send(@tempData);  #This throws an Erro\n        sleep(0.25);\n    } \n\n}\n\n$socket-&gt;close();\n</code></pre>\n\n<p>@tempData is an Array with 5 Deciaml values which needs to be sent in a single packet. Because these values are from single line . </p>\n\n<p>The hardware can recevie single , double and long double.  I tried to understand pack- unpack functions .. but it doesn't make any sense to me. THis is my 4th day os using perl ..May be I need some more experience. </p>\n\n<p>I also observed that I can transmit the different Hex numbers like this ..</p>\n\n<pre><code>$socket-&gt;send(\\x21\\x43\\xA2);\n</code></pre>\n\n<p>Do we have anything like this to send floating numbers in a single packet. ?</p>\n\n<p>Any suggestions are highly apreciated.  </p>\n"}, {"tags": ["image", "perl", "url", "save"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1471558985, "post_id": 39027627, "comment_id": 65407462, "body": "I use <code>$ua-&gt;get($url, :content_file   =&gt; $filename);</code> to trigger a PHP script and get the content it serves. Try that?"}, {"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471611311, "post_id": 39027627, "comment_id": 65428666, "body": "Thanks.  I just tried it and it did exactly the same thing.  Creates the local file but the size is zero.  :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471634072, "post_id": 39027627, "comment_id": 65442305, "body": "I just got to try it out with the url you provide -- and I get the image, using your code (also with bare <code>$response-&gt;decoded_content</code>), with or without <code>binmode</code>."}, {"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471660451, "post_id": 39027627, "comment_id": 65449364, "body": "Fascintating.  So perhaps something different about the server making the call?  I even tried setting the request headers so they&#39;d match the request headers sent by my browser (which gets the correct image back), but that didn&#39;t help either.  I thought for a moment that perhaps my server was being blocked, but it works for a regular direct PNG file URL, so their server isn&#39;t blocking my server.  I wish they&#39;d return an error message indicating why the call failed, but no such luck  I get absolutely nothing back  Even &quot;is_success&quot; is true when the call returns..."}, {"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471661686, "post_id": 39027627, "comment_id": 65449532, "body": "Just tried it again with the image URL above and it worked!  First I tried it in a simple test script with nothing but the code above and it worked, so I restored my main app to that code and it also worked, saving the image using:     $ua-&gt;get($iconlink, &#39;:content_file&#39; =&gt; &quot;$cachefile&quot;); But then I tried it with a different PHP icon link returned from the weather.gov API tonight:      <a href=\"http://forecast.weather.gov/DualImage.php?i=hi_tsra&amp;amp;j=hi_shwrs&amp;amp;ip=20&amp;amp;jp=30\" rel=\"nofollow noreferrer\">forecast.weather.gov/&hellip;</a>  And this link does not work in my small test app or my main app.  Same as before it creates a zero-byte file."}, {"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471661824, "post_id": 39027627, "comment_id": 65449560, "body": "Actually, the new &quot;bad&quot; link above (returned from the weather API) doesn&#39;t even work in my browser, so I have no idea what&#39;s going on now!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471662608, "post_id": 39027627, "comment_id": 65449680, "body": "Heh. One of those things.  This new link that you provide in the comment -- I don&#39;t see it in my browser either.  So I guess you can write it off as a bad link. Can you just use the one that works?"}, {"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471663103, "post_id": 39027627, "comment_id": 65449751, "body": "Ok, I think I just figured it out.  When I dumped the link(s) returned from the weather.gov API before calling the -&gt;get, it printed to the browser and I copied it from there and pasted it here, and it looked fine.  But I just checked the actual data returned from their API and and the link has the &quot;&amp;&quot; character replaced by the HTML entity code &amp; amp ; (ignore spaces -- added so it shows up here).  Anyway, if I replace the entities with actual ampersand characters before calling the -&gt;get with that URL, it works!  Sorry about that - I should have noticed it earlier... :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471664487, "post_id": 39027627, "comment_id": 65449958, "body": "Ah, good! Lesson learned -- and it was good for me to hear about it, too. Consider posting this as an answer, for those who come along with a similar problem.  You can accept it, too, so the question is listed as answered.  This is completely OK and actually encouraged -- see <a href=\"http://stackoverflow.com/help/self-answer\">&#39;Can I answer my own question`</a>"}, {"owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471698519, "post_id": 39027627, "comment_id": 65458070, "body": "Thanks, I will. I don&#39;t think I have enough points to get the &quot;answer your own question box&quot;  (since it doesn&#39;t appear for me now) and I have to wait 48 hours to accept my response above. But I was hoping that posting what I had found could potentially help someone with a similar issue in the future."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471725297, "post_id": 39027627, "comment_id": 65466392, "body": "I think that the box is about posting the answer along with the question, as you are ask it. People sometimes do that, to highlight an issue that they think is worth attention. You can post an answer (no rep needed), and then you need to wait for 48 hours, after which you can accept it like you would any other. The difference is that you don&#39;t get the (2) points for accepting and that it doesn&#39;t float to the top of all answers. I wouldn&#39;t push that when there are good answers but when you figure it out and there aren&#39;t good answers I think that it&#39;s a good thing to do."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "is_accepted": true, "score": 0, "last_activity_date": 1471740340, "creation_date": 1471740340, "answer_id": 39059934, "question_id": 39027627, "link": "https://stackoverflow.com/questions/39027627/using-perl-how-do-i-save-an-image-from-an-external-script-php-url/39059934#39059934", "title": "Using Perl, How do I save an image from an external script (PHP) URL", "body": "<p>The problem was that the actual data returned from the weather API had the \"&amp;\" character replaced by the HTML entity code &amp; amp ; (ignore spaces -- added so it shows up here).  I didn't notice this when I dumped the returned URL to the browser since it simply displayed as a regular ampersand (&amp;).  The simple solution was to replace the HTML entities with actual ampersand characters before calling the ->get with that URL, which works perfectly and returns the image data or saves it directly when using \":content_file => $filename\" in the ->get call.</p>\n"}], "owner": {"reputation": 73, "user_id": 4289832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74ce44d525090632fb3429ba224b473?s=128&d=identicon&r=PG&f=1", "display_name": "vdawg", "link": "https://stackoverflow.com/users/4289832/vdawg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 39059934, "answer_count": 1, "score": 2, "last_activity_date": 1471740340, "creation_date": 1471554826, "last_edit_date": 1471660188, "question_id": 39027627, "link": "https://stackoverflow.com/questions/39027627/using-perl-how-do-i-save-an-image-from-an-external-script-php-url", "title": "Using Perl, How do I save an image from an external script (PHP) URL", "body": "<p>I have a Perl script that needs to retrieve an image from an external URL and save it locally.  In some cases, the URL is a direct URL to a PNG file and my code works perfectly to capture the image data and save it locally.</p>\n\n<p>My Perl code looks like this:</p>\n\n<pre><code>$ua = LWP::UserAgent-&gt;new();\n$ua-&gt;agent(\"MyAgent\");\n$response = $ua-&gt;get($iconpath);\n$content = $response-&gt;decoded_content(charset =&gt; 'none');\n\nopen(ICONFILE, \"&gt;$localimagefile\");\nbinmode(ICONFILE);\nprint ICONFILE $content;\nclose(ICONFILE);\n</code></pre>\n\n<p>But in some cases, the URL for the image on the external site (iconpath) is a PHP script, like this:</p>\n\n<pre><code>http://forecast.weather.gov/DualImage.php?i=sct&amp;j=hi_tsra&amp;jp=30\n</code></pre>\n\n<p>In this case, the local image file is created, but it's zero bytes. When I try to dump $content after the request, it's empty and it's length is zero.  For a direct URL to a PNG file, this same code works perfectly and saves a valid copy of the image file on the server.</p>\n\n<p>I've tried various methods using wget, curl, backticks, and LWP:Simple (getstore), but I always have the same empty file results with the images generated externally using the PHP URL.</p>\n\n<p>Any ideas how to do this would be greatly appreciated.</p>\n"}, {"tags": ["perl", "pdf", "indexing", "swish"], "comments": [{"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "edited": false, "score": 0, "creation_date": 1471555468, "post_id": 39027338, "comment_id": 65406230, "body": "Have a look at <a href=\"https://www.lesbonscomptes.com/recoll/features.html\" rel=\"nofollow noreferrer\">recoll</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471637006, "post_id": 39028869, "comment_id": 65443663, "body": "@JeanJouX Let me know if more specifics would be useful.  For example, I can post (a few lines of) example code that would generate a list of words, filter and count them."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1489601850, "last_edit_date": 1495540430, "creation_date": 1471562067, "answer_id": 39028869, "question_id": 39027338, "link": "https://stackoverflow.com/questions/39027338/index-pdf-files-and-generate-keywords-summary/39028869#39028869", "title": "Index PDF files and generate keywords summary", "body": "<p>Given that points 2 and 3 seem custom I'd recommend to have your own script, use a tool out of it to parse pdf, process its output as you please, and write HTML (perhaps using another tool). </p>\n\n<p>Perl is well suited for that, since it excels in processing that you'll need and also provides support for working with all kinds of file formats, via modules.</p>\n\n<p>As for reading <code>pdf</code>, here are some options if your needs aren't too elaborate</p>\n\n<ul>\n<li><p>Use <a href=\"http://search.cpan.org/dist/CAM-PDF/\" rel=\"nofollow noreferrer\"><code>CAM::PDF</code></a> (and <a href=\"http://search.cpan.org/dist/CAM-PDF/lib/CAM/PDF/PageText.pm\" rel=\"nofollow noreferrer\"><code>CAM::PDF::PageText</code></a>) or <a href=\"http://search.cpan.org/dist/PDF-API2/lib/PDF/API2.pm\" rel=\"nofollow noreferrer\"><code>PDF-API2</code></a> modules</p></li>\n<li><p>Use <code>pdftotext</code> from the <a href=\"https://poppler.freedesktop.org/\" rel=\"nofollow noreferrer\"><code>poppler</code></a> library (probably in <code>poppler-utils</code> package)</p></li>\n<li><p>Use <code>pdftohtml</code> with <code>-xml</code> option, read the generated simple XML file with <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\"><code>XML::libXML</code></a> or <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a>  </p></li>\n</ul>\n\n<p>The last two are external tools which you use via Perl's builtins like <code>system</code>.  </p>\n\n<p>The following text processing, to build your summary and design the output, is precisely what languages like Perl are for. The couple of tasks that are mentioned take a few lines of code. </p>\n\n<p>Then write out HTML, either directly if simple or using a suitable module. Given your purpose, you may want to look into <a href=\"http://search.cpan.org/~wonko/HTML-Template-2.95/lib/HTML/Template.pm\" rel=\"nofollow noreferrer\"><code>HTML::Template</code></a>. Also see <a href=\"https://stackoverflow.com/a/1644484/4653379\"><code>this post</code></a>, for example.</p>\n\n<p>Full parsing of PDF may be infeasible, but if the files aren't too complex it should work.</p>\n\n<p>If your process for selecting keywords and building statistics is fairly common, there are integrated tools for document management (search for bibliography managers).  However, I think that most of them resort to external tools to parse <code>pdf</code> so you may still be better off with your own script.</p>\n"}], "owner": {"reputation": 2337, "user_id": 3595992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a8fc8a00391b1282338f66de57e3fea0?s=128&d=identicon&r=PG&f=1", "display_name": "JeanJouX", "link": "https://stackoverflow.com/users/3595992/jeanjoux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 39028869, "answer_count": 1, "score": 2, "last_activity_date": 1489601850, "creation_date": 1471553671, "last_edit_date": 1471971323, "question_id": 39027338, "link": "https://stackoverflow.com/questions/39027338/index-pdf-files-and-generate-keywords-summary", "title": "Index PDF files and generate keywords summary", "body": "<p>I have a large amount of PDF files in my local filesystem I use as documentation base and I would like to create an index of these files.\nI would like to : </p>\n\n<ol>\n<li>Parse the contents of the PDF files to get keywords.</li>\n<li>Select the most relevant keywords to make a summary.</li>\n<li>Create static HTML pages for some keywords with entries linked to the appropriate files.</li>\n</ol>\n\n<p>My questions are :</p>\n\n<ul>\n<li><strong>Is there an existing tool to perform the whole job ?</strong></li>\n<li><strong>What is the most appropriate tool to parse PDF files content, filter (by words size) and counting the words?</strong> </li>\n<li><strong>I consider using <code>Perl</code>, <code>swish-e</code>, <code>pdfgrep</code> to make a script. Do you know other tools which could be useful?</strong></li>\n</ul>\n"}, {"tags": ["perl", "templates"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1471545751, "post_id": 39025239, "comment_id": 65401483, "body": "Can you please show <a href=\"http://meta.stackexchange.com/q/66377/234299\">the actual problem you&#39;re trying to solve instead of just the approach you&#39;ve decided on?</a> Even though you can do really complex things with Template Toolkit, it&#39;s usually better not to. Why a <code>[% PERL %]</code> block instead of a simple <a href=\"http://template-toolkit.org/docs/manual/Directives.html#section_Loop_Processing\" rel=\"nofollow noreferrer\">loop</a>?"}, {"owner": {"reputation": 2053, "user_id": 1539216, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/8344afd4bffe759d7d3ae86e933fb29e?s=128&d=identicon&r=PG", "display_name": "ivo Welch", "link": "https://stackoverflow.com/users/1539216/ivo-welch"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471551662, "post_id": 39025239, "comment_id": 65404610, "body": "because I like perl as a language instead of Template as a language.  less to remember, too."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1471552067, "post_id": 39025239, "comment_id": 65404811, "body": "That&#39;s exactly why you should do as much as possible in your Perl code <i>before</i> invoking the template engine. Even simple templates can be a pain to debug; things get much more complicated when you start adding arbitrary Perl code."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1471551840, "last_edit_date": 1592644375, "creation_date": 1471550424, "answer_id": 39026582, "question_id": 39025239, "link": "https://stackoverflow.com/questions/39025239/template-pm-accessing-passed-hash-in-perl/39026582#39026582", "title": "Template.pm : accessing passed hash in [% perl %]", "body": "<p>The documentation for <code>[% PERL %]</code> is pretty clear.</p>\n<blockquote>\n<p>Perl code is evaluated in the Template::Perl package. The <code>$context</code> package variable contains a reference to the current Template::Context object. This can be used to access the functionality of the Template Toolkit to process other templates, load plugins, filters, etc. See <a href=\"http://search.cpan.org/perldoc?Template::Context\" rel=\"nofollow noreferrer\">Template::Context</a> for further details.</p>\n<pre><code>[% PERL %]\n    print $context-&gt;include('myfile');\n[% END %]\n</code></pre>\n<p>The <code>$stash</code> variable contains a reference to the top-level stash object which manages template variables. Through this, variable values can be retrieved and updated. See <a href=\"http://search.cpan.org/perldoc?Template::Stash\" rel=\"nofollow noreferrer\">Template::Stash</a> for further details.</p>\n<pre><code>[% PERL %]\n   $stash-&gt;set(foo =&gt; 'bar');\n   print &quot;foo value: &quot;, $stash-&gt;get('foo');\n[% END %]\n</code></pre>\n</blockquote>\n<p>So,</p>\n<pre><code>$ tpage --eval_perl --define a=4 --define b=5 &lt;&lt;&lt;'\n   [%- PERL -%]\n      print($stash-&gt;get(&quot;a&quot;), &quot;\\n&quot;);\n      print($stash-&gt;get(&quot;b&quot;), &quot;\\n&quot;);\n   [%- END -%]\n'\n4\n5\n</code></pre>\n<p>From the documentation of ::Stash, it sounds like it's safe to treat <code>$stash</code> like a hash.</p>\n<pre><code>$ tpage --eval_perl --define a=4 --define b=5 &lt;&lt;&lt;'\n   [%- PERL -%]\n      print(&quot;$stash-&gt;{a}\\n&quot;);\n      print(&quot;$stash-&gt;{b}\\n&quot;);\n   [%- END -%]\n'\n4\n5\n</code></pre>\n<p>(Note that <code>$stash</code> contains more than the contents of <code>%vars</code>.)</p>\n"}], "owner": {"reputation": 2053, "user_id": 1539216, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/8344afd4bffe759d7d3ae86e933fb29e?s=128&d=identicon&r=PG", "display_name": "ivo Welch", "link": "https://stackoverflow.com/users/1539216/ivo-welch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 39026582, "answer_count": 1, "score": 0, "last_activity_date": 1471551840, "creation_date": 1471545237, "question_id": 39025239, "link": "https://stackoverflow.com/questions/39025239/template-pm-accessing-passed-hash-in-perl", "title": "Template.pm : accessing passed hash in [% perl %]", "body": "<p>I know how to access my passed hash in the Template.pm mini-language, but how do I access it in [% PERL %] fragments?  I am missing the obvious.</p>\n\n<pre><code>%vars = ( perldefined =&gt; \"abc\", somehash =&gt; { a =&gt; 'aa', b =&gt; 'bb' } );\n$template = Template-&gt;new( { INTERPOLATE =&gt; 1, EVAL_PERL =&gt; 1} );\n</code></pre>\n\n<p>and now some examples</p>\n\n<pre><code>$in1 = 'a plain variables \"[% perldefined %]\".  a hashcontent variable \"[% somehash.a %]\".  good.bye'.\"\\n\";\n($template-&gt;process( \\$in1, \\%vars )) or die \"bad\";\n</code></pre>\n\n<p>works.</p>\n\n<pre><code>print \"\\niterating over Hash in Template code\\n\";\n$in1 = 'a plain variables [% perldefined %].  a hashcontent variable [% FOREACH key IN somehash.keys %] [% key %] =&gt; [% somehash.$key %] [% END %]  good.bye..'.\"\\n\";\n($template-&gt;process( \\$in1, \\%vars )) or die \"bad\";\n</code></pre>\n\n<p>works.</p>\n\n<pre><code>print \"\\nHash print\\n\";\n$in1 = 'a plain variables [% perldefined %].  [% somehash %] ]  good.bye.'.\"\\n\";\n($template-&gt;process( \\$in1, \\%vars )) or die \"bad\";\n</code></pre>\n\n<p>works.  prints the hash reference.</p>\n\n<p>and now where I am stuck:</p>\n\n<pre><code>print \"\\nHash print in Perl subcode, lack of knowledge making iterating impossible \\n\";\n$in1 = 'a plain variables [% perldefined %].  [% PERL %] print somehash [% END %]  good.bye.'.\"\\n\";\n($template-&gt;process( \\$in1, \\%vars )) or warn \"huh?\";\n</code></pre>\n\n<p>I need to know how to get this so that I can iterate over the hash keys and do other things.  probably trivially obvious answer, but I have tried all I could think of and failed.</p>\n"}, {"tags": ["json", "perl", "mod-perl2", "xs"], "comments": [{"owner": {"reputation": 2753, "user_id": 3230003, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/NhVUp.jpg?s=128&g=1", "display_name": "Severun", "link": "https://stackoverflow.com/users/3230003/severun"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471566012, "post_id": 39024743, "comment_id": 65409209, "body": "Nope that does the same thing."}], "answers": [{"comments": [{"owner": {"reputation": 2753, "user_id": 3230003, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/NhVUp.jpg?s=128&g=1", "display_name": "Severun", "link": "https://stackoverflow.com/users/3230003/severun"}, "edited": false, "score": 0, "creation_date": 1472080657, "post_id": 39029381, "comment_id": 65614101, "body": "Some more info on this.  In order to use +Parent you must be using the mpm_worker mod which runs Apache multi-threaded.  When using mpm_worker, the +Parent worked, but then I got random hangs on requests when the server started to load up (not much load, like 10 or 20 simultaneous connections)  The solution I ended up going with is running multiple Apache instances with the mpm_prefork module, then adding my PerlSwitches -I to the global apache2.conf"}], "tags": [], "owner": {"reputation": 2753, "user_id": 3230003, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/NhVUp.jpg?s=128&g=1", "display_name": "Severun", "link": "https://stackoverflow.com/users/3230003/severun"}, "is_accepted": false, "score": 0, "last_activity_date": 1471566193, "creation_date": 1471566193, "answer_id": 39029381, "question_id": 39024743, "link": "https://stackoverflow.com/questions/39024743/jsonxs-under-mod-perl-fails-with-post-requests/39029381#39029381", "title": "JSON::XS under mod_perl fails with POST requests", "body": "<p>OK So this was a rather wild goose chase, analyzing apache core dumps and stack traces, fixing bugs that weren't really there... Long story short.</p>\n\n<p>I was trying to add an include directory to my perl by using </p>\n\n<p>PerlSwitches -I/usr/local/lib/site_perl/my_new_directory</p>\n\n<p>As part of that I added</p>\n\n<p><strong>PerlOptions +Parent</strong> so that I would get a new interpreter for each virtual host so my -I was effective for only one virtual host at a time.</p>\n\n<p>I had added those flags before I enabled mod_perl, so when I enabled mod_perl, it just never worked.</p>\n\n<p>By removing the <strong>PerlOptions +Parent</strong> things started working as expected.</p>\n\n<p>As a side note, it appears +Parent makes things wonky in genral.</p>\n"}], "owner": {"reputation": 2753, "user_id": 3230003, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/NhVUp.jpg?s=128&g=1", "display_name": "Severun", "link": "https://stackoverflow.com/users/3230003/severun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471566193, "creation_date": 1471543310, "question_id": 39024743, "link": "https://stackoverflow.com/questions/39024743/jsonxs-under-mod-perl-fails-with-post-requests", "title": "JSON::XS under mod_perl fails with POST requests", "body": "<p>I am using the default install of Apache and mod_perl on Ubuntu 16.04.1 LTS, I also have reproduced this with the default JSON::XS and I updated to the latest from CPAN JSON-XS-3.02.</p>\n\n<p>The code below works in all cases if I am not using mod_perl.  </p>\n\n<p>The script and html below work when using perl via mod_cgi with both POST and GET requests.</p>\n\n<p>If however I am using mod_perl and I use a POST (as in the html provided) it fails, \"Hello\" does not print,  and I get the following error in my apache log file.</p>\n\n<p>Usage: JSON::XS::new(klass).</p>\n\n<p>If I pass the same parameter(s) via a GET method, the script works fine.</p>\n\n<p>test2.pl</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse CGI;\nuse JSON::XS;\n\nmy $q = new CGI();\nprint $q-&gt;header(-type =&gt; 'text/plain');\nmy $action = $q-&gt;param('a');\nmy $json_str = '{\"foo\":\"bar\"}';\nmy $pscalar = JSON::XS-&gt;new-&gt;utf8-&gt;decode($json_str);\nprint \"Hello\";\nexit 1;\n</code></pre>\n\n<p>HTML to call the above (named test2.pl on the server)</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;form action=\"test2.pl\" method=\"POST\"&gt;\n&lt;input type=\"text\" name=\"a\"/&gt;\n&lt;button type=\"submit\"&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["perl", "ibm-mq", "cpan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471541634, "post_id": 39024014, "comment_id": 65399330, "body": "I don&#39;t know anything about MQSeries, but the tests try to connect to queue manager YOURQM by default. You may need to set environment variables or something if your configuration doesn&#39;t match the defaults. See the note in the bundled config file <a href=\"https://metacpan.org/source/MQSERIES/MQSeries-1.34/CONFIG#L12\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 629, "user_id": 2658627, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69136752a616944293eb856cf75a637f?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/2658627/anonymous"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471547553, "post_id": 39024014, "comment_id": 65402482, "body": "@ThisSuitIsBlackNot, thanks! I completely missed that in the doc I was reading. I did do a <code>get MQSeries</code>, modified the file and the IIH.pm files, and then did the install (even set the environment variable they recommended) and I am still getting that error. I see they recommend a <code>make test TEST_VERBOSE=1</code>, so trying that now, if possible through CPAN."}], "owner": {"reputation": 629, "user_id": 2658627, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69136752a616944293eb856cf75a637f?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/2658627/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1472050636, "creation_date": 1471540622, "last_edit_date": 1472050636, "question_id": 39024014, "link": "https://stackoverflow.com/questions/39024014/perl-issue-installing-or-connecting-to-queue-manager-from-mqseries-1-34-rea", "title": "Perl - Issue installing or connecting to queue manager from MQSeries - 1.34 (Reason = 2059)", "body": "<p>I tried to install <code>MQSeries</code> <code>1.34</code> from <code>CPAN</code>, and I was getting an error, which I found a fix for on the CPAN bug tracking website. So I applied the fix and still got a few test errors, but the build seemed okay. Installing it with a <code>force install MQSeries</code> worked. Once I had installed it, I can construct objects and reference the libraries in my other perl scripts, but when I try to connect to the queue manager or queue, I get an error back.</p>\n\n<p>Any advice on what is wrong with the setup or how to fix this and get my connection back up and running would be much appreciated.</p>\n\n<p>Here are specifics about my configuration:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ uname -srvpio\nLinux 2.6.32-573.22.1.el6.x86_64 #1 SMP Thu Mar 17 03:23:39 EDT 2016 x86_64 x86_64 GNU/Linux\n\n$ /opt/mqm/bin/dspmqsver\nName:        WebSphere MQ Advanced Message Security\nVersion:     7.5.0.0\nLevel:       p000-L120604\nBuildType:   IKAP - (Production)\n\n$ rpm -qa |grep 'MQ' |sort\nMQSeriesAMS-7.5.0-0.x86_64\nMQSeriesClient-7.5.0-0.x86_64\nMQSeriesExplorer-7.5.0-0.x86_64\nMQSeriesFTAgent-7.5.0-0.x86_64\nMQSeriesFTBase-7.5.0-0.x86_64\nMQSeriesFTLogger-7.5.0-0.x86_64\nMQSeriesFTService-7.5.0-0.x86_64\nMQSeriesFTTools-7.5.0-0.x86_64\nMQSeriesGSKit-7.5.0-0.x86_64\nMQSeriesJava-7.5.0-0.x86_64\nMQSeriesJRE-7.5.0-0.x86_64\nMQSeriesMan-7.5.0-0.x86_64\nMQSeriesMsg_cs-7.5.0-0.x86_64\nMQSeriesMsg_de-7.5.0-0.x86_64\nMQSeriesMsg_es-7.5.0-0.x86_64\nMQSeriesMsg_fr-7.5.0-0.x86_64\nMQSeriesMsg_hu-7.5.0-0.x86_64\nMQSeriesMsg_it-7.5.0-0.x86_64\nMQSeriesMsg_ja-7.5.0-0.x86_64\nMQSeriesMsg_ko-7.5.0-0.x86_64\nMQSeriesMsg_pl-7.5.0-0.x86_64\nMQSeriesMsg_pt-7.5.0-0.x86_64\nMQSeriesMsg_ru-7.5.0-0.x86_64\nMQSeriesMsg_Zh_CN-7.5.0-0.x86_64\nMQSeriesMsg_Zh_TW-7.5.0-0.x86_64\nMQSeriesRuntime-7.5.0-0.x86_64\nMQSeriesSamples-7.5.0-0.x86_64\nMQSeriesSDK-7.5.0-0.x86_64\nMQSeriesServer-7.5.0-0.x86_64\nMQSeriesXRClients-7.5.0-0.x86_64\nMQSeriesXRService-7.5.0-0.x86_64\n\n$ ./dispModVersion.pl MQSeries\nModule                Installed       CPAN\nMQSeries                   1.34       1.34\n\n$ perl -v\n\nThis is perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux\n\nCopyright 1987-2015, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the GNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on this system using \"man perl\" or \"perldoc perl\".  If you have access to the Internet, point your browser at http://www.perl.org/, the Perl Home Page.\n\n$ perl -V\nSummary of my perl5 (revision 5 version 22 subversion 1) configuration:\n\n  Platform:\n    osname=linux, osvers=2.6.32-573.22.1.el6.x86_64, archname=x86_64-linux\n    uname='linux ******* 2.6.32-573.22.1.el6.x86_64 #1 smp thu mar 17 03:23:39 edt 2016 x86_64 x86_64 x86_64 gnulinux '\n    config_args='-des -Dprefix=******'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=undef, usemultiplicity=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags ='-fwrapv -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2',\n    optimize='-O2',\n    cppflags='-fwrapv -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include'\n    ccversion='', gccversion='4.4.7 20120313 (Red Hat 4.4.7-16)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678, doublekind=3\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16, longdblkind=3\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='cc', ldflags =' -fstack-protector -L/usr/local/lib'\n    libpth=/usr/local/lib /usr/lib /lib/../lib64 /usr/lib/../lib64 /lib /lib64 /usr/lib64 /usr/local/lib64\n    libs=-lpthread -lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lc\n    perllibs=-lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\n    libc=libc-2.12.so, so=so, useshrplib=false, libperl=libperl.a\n    gnulibc_version='2.12'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'\n    cccdlflags='-fPIC', lddlflags='-shared -O2 -L/usr/local/lib -fstack-protector'\n\n\nCharacteristics of this binary (from libperl):\n  Compile-time options: HAS_TIMES PERLIO_LAYERS PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD PERL_MALLOC_WRAP\n                        PERL_NEW_COPY_ON_WRITE PERL_PRESERVE_IVUV\n                        USE_64_BIT_ALL USE_64_BIT_INT USE_LARGE_FILES\n                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE\n                        USE_LOCALE_NUMERIC USE_LOCALE_TIME USE_PERLIO\n                        USE_PERL_ATOF\n  Built under linux\n  Compiled at Apr 18 2016 15:46:59\n  %ENV:\n    PERL5BIN=\"*******/bin\"\n    PERL5HOME=\"*******\"\n    PERL5SITE=\"*******/lib/site_perl/5.22.1\"\n  @INC:\n    *******/lib/site_perl/5.22.1/x86_64-linux\n    *******/lib/site_perl/5.22.1\n    *******/lib/5.22.1/x86_64-linux\n    *******/lib/5.22.1\n</code></pre>\n\n<p>When I first tried to install MQSeries, I got the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>t/99-pod.t .. 2/63\n#   Failed test 'POD test for MQSeries/Message/IIH.pm'\n#   at Test/Pod.pm line 187.\n# MQSeries/Message/IIH.pm (415): Non-ASCII character seen before =encoding in 'Villag\u2592mez'. Assuming CP1252\n# Looks like you failed 1 test of 63.\nt/99-pod.t .. Dubious, test returned 1 (wstat 256, 0x100)\nFailed 1/63 subtests\n\nTest Summary Report\n-------------------\nt/99-pod.t (Wstat: 256 Tests: 63 Failed: 1)\n  Failed test:  61\n  Non-zero exit status: 1\nFiles=1, Tests=63,  1 wallclock secs ( 0.02 usr  0.01 sys +  0.34 cusr  0.00 csys =  0.37 CPU)\nResult: FAIL\nFailed 1/1 test programs. 1/63 subtests failed.\n</code></pre>\n\n<p>Then, I modified the file <code>MQSeries/Message/IIH.pm</code> to add <code>=encoding ISO-8859-1</code> at the start of the file, per bug report on CPAN, I ran the install again and got the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>t/99-pod.t .. ok\nAll tests successful.\nFiles=1, Tests=63,  0 wallclock secs ( 0.03 usr  0.01 sys +  0.34 cusr  0.01 csys =  0.39 CPU)\nResult: PASS\nmake[1]: Entering directory `build/MQSeries-1.34-SLJq6K/MQClient'\nPERL_DL_NONLAZY=1 \"perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, '../blib/lib', '../blib/arch')\" t/*.t\nt/10constants.t ........... ok\nt/20convert.t ............. Failed 5/6 subtests\nt/30basic.t ............... ok\nt/31properties.t .......... ok\nt/32async_put.t ........... ok\nt/40oo-qmgr.t ............. 3/14 MQCONN failed (Reason = 2059) (Queue manager not available for connection.) at t/40oo-qmgr.t line 38.\n\n#   Failed test 'MQSeries::QueueManager - constructor'\n#   at t/40oo-qmgr.t line 39.\nt/40oo-qmgr.t ............. 5/14 MQCONN failed (Reason = 2059) (Queue manager not available for connection.) at t/40oo-qmgr.t line 52.\n\n#   Failed test 'MQSeries::QueueManager - Connect'\n#   at t/40oo-qmgr.t line 58.\nt/40oo-qmgr.t ............. 7/14 MQCONN failed (Reason = 2059) (Queue manager not available for connection.) at t/40oo-qmgr.t line 73.\n\n#   Failed test 'MQSeries::QueueManager - constructor'\n#   at t/40oo-qmgr.t line 74.\nCan't call method \"Open\" on an undefined value at t/40oo-qmgr.t line 77.\n# Looks like you planned 14 tests but ran 7.\n# Looks like you failed 3 tests of 7 run.\n# Looks like your test exited with 13 just after 7.\nt/40oo-qmgr.t ............. Dubious, test returned 13 (wstat 3328, 0xd00)\nFailed 10/14 subtests\nt/50oo-command.t .......... ok\nt/51oo-command-changes.t .. ok\nt/52oo-command-filter.t ... ok\nt/60-logs.t ............... ok\nt/70-config.t ............. ok\n\nTest Summary Report\n-------------------\nt/20convert.t           (Wstat: 0 Tests: 2 Failed: 1)\n  Failed test:  2\n  Parse errors: Bad plan.  You planned 6 tests but ran 2.\nt/40oo-qmgr.t           (Wstat: 3328 Tests: 7 Failed: 3)\n  Failed tests:  3, 5, 7\n  Non-zero exit status: 13\n  Parse errors: Bad plan.  You planned 14 tests but ran 7.\nFiles=11, Tests=5334, 1264 wallclock secs ( 0.96 usr  0.02 sys +  1.56 cusr  0.18 csys =  2.72 CPU)\nResult: FAIL\nFailed 2/11 test programs. 4/5334 subtests failed.\n</code></pre>\n\n<p>If I force the install, I can get it to finish the install after everything is said and done, but then I get the following error when trying to connect:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>MQCONN failed (Reason = 2059) (Queue manager not available for connection.) at testMQConnectivity.pl line 16.\nMQCONN failed (Reason = 2059) (Queue manager not available for connection.) at testMQConnectivity.pl line 16.\nat MQSeries/QueueManager.pm line 809.\n        MQSeries::QueueManager::Connect(MQSeries::QueueManager=HASH(0x24a7180)) called at MQSeries/QueueManager.pm line 155\n        MQSeries::QueueManager::new(undef, \"QueueManager\", \"*******\", \"Reason\", SCALAR(0x151d4f0), \"CompCode\", SCALAR(0x151d610), \"ClientConn\", ...) called at testMQConnectivity.pl line 16\n</code></pre>\n\n<p>I edited the <code>CONFIG</code> file after pulling the data from CPAN to reference my remote MQ Queues that I can connect to using <code>/opt/mqm/samp/bin/amqsputc</code> or <code>/opt/mqm/samp/bin/amqsgetc</code>, after setting <code>export MQSERVER=...</code>, if I run <code>make test TEST_VERBOSE=1</code> from the working <code>CPAN</code> directory, I see the following output:</p>\n\n<p><strong>t/20convert.t:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>t/20convert.t .............\n1..6\nok 1\nok 2\nok 3\nok 4\nMQGET failed: CompCode =&gt; 2, Reason =&gt; 2033\nnot ok 5\nMessage conversion failed.\nShould be: 'This msg is in EBCDIC'\nIs:        ''\nnot ok 6\nFailed 2/6 subtests\n</code></pre>\n\n<p><strong>t/31properties.t:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>t/31properties.t ..........\n1..22\nok 1 - use MQClient::MQSeries;\nConnecting to queue manager '*******' (MQCONN)\nok 2 - MQCONN\nOpening queue manager for inquire\nok 3 - MQOPEN - queue manager\nQuerying queue manager attributes (MQINQ)\nok 4 - MQINQ\nClosing queue manager object handle (MQCLOSE)\nok 5 - MQCLOSE - queue manager\nCreate message handle object (MQCRTMH)\nok 6 - MQCRTMH\nSet message property (MQSETMP - string)\nok 7 - MQSETMP - string\nSet message property (MQSETMP - float)\nok 8 - MQSETMP - float\nSet message property (MQSETMP - int)\nok 9 - MQSETMP - int\nInquire message property (MQINQMP - float)\nok 10 - MQINQMP - float\nok 11 - MQINQMP - float value okay (3.14164996147156)\nDelete float property\nok 12 - MQDLTMP - float\nOpening queue '*******' (MQOPEN)\nok 13 - MQOPEN - queue\nPutting message with properties (MQPUT)\nok 14 - MQPUT\nCreate message handle object (MQCRTMH #2)\nok 15 - MQCRTMH \\#2\nGetting message (MQGET)\nnot ok 16 - MQGET\n\n#   Failed test 'MQGET'\n#   at t/31properties.t line 146.\nInquire message property (MQINQMP - int)\nnot ok 17 - MQINQMP - int\n\n#   Failed test 'MQINQMP - int'\n#   at t/31properties.t line 156.\nUse of uninitialized value $prop in concatenation (.) or string at t/31properties.t line 157.\nnot ok 18 - MQINQMP - int value okay ()\n\n#   Failed test 'MQINQMP - int value okay ()'\n#   at t/31properties.t line 157.\n#          got: undef\n#     expected: '42'\nDelete message handle (MQDLTMH)\nok 19 - MQDLTMH\nDelete message handle (MQDLTMH #2)\nok 20 - MQDLTMH \\#2\nClosing queue (MQCLOSE)\nok 21 - MQCLOSE\nDisconnecting (MQDISC)\nok 22 - MQDISC\n# Looks like you failed 3 tests of 22.\nDubious, test returned 3 (wstat 768, 0x300)\nFailed 3/22 subtests\n</code></pre>\n\n<p><strong>t/32async_put.t:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>t/32async_put.t ...........\n1..25\nok 1 - use MQClient::MQSeries;\nConnecting to queue manager '*******' (MQCONN)\nok 2 - MQCONN\nOpening queue manager for inquire\nok 3 - MQOPEN - queue manager\nQuerying queue manager attributes (MQINQ)\nMQINQ returned: CompCode =&gt; 0, Reason =&gt; 0\nok 4 - MQINQ\nClosing queue manager object handle (MQCLOSE)\nok 5 - MQCLOSE - queue manager\nOpening queue '*******' (MQOPEN)\nok 6 - MQOPEN - queue\nPutting message #1 (async MQPUT)\nok 7 - MQPUT - 1\nPutting message #2 (async MQPUT)\nok 8 - MQPUT - 2\nPutting message #3 (async MQPUT)\nok 9 - MQPUT - 3\nPutting message #4 (async MQPUT)\nok 10 - MQPUT - 4\nPutting message #5 (async MQPUT)\nok 11 - MQPUT - 5\nGetting status info (MQSTAT)\nok 12 - MQSTAT\nnot ok 13 - MQSTAT result\n\n#   Failed test 'MQSTAT result'\n#   at t/32async_put.t line 120.\n#     Structures begin differing at:\n#          $got-&gt;{PutSuccessCount} = '5'\n#     $expected-&gt;{PutSuccessCount} = '0'\nGetting message #1 (MQGET)\nok 14 - MQGET - 1\nok 15 - MQGET message content - 1\nGetting message #2 (MQGET)\nok 16 - MQGET - 2\nok 17 - MQGET message content - 2\nGetting message #3 (MQGET)\nok 18 - MQGET - 3\nok 19 - MQGET message content - 3\nGetting message #4 (MQGET)\nok 20 - MQGET - 4\nok 21 - MQGET message content - 4\nGetting message #5 (MQGET)\nok 22 - MQGET - 5\nok 23 - MQGET message content - 5\nClosing queue (MQCLOSE)\nok 24 - MQCLOSE\nDisconnecting (MQDISC)\nok 25 - MQDISC\n# Looks like you failed 1 test of 25.\nDubious, test returned 1 (wstat 256, 0x100)\nFailed 1/25 subtests\n</code></pre>\n\n<p>And <code>t/40oo-qmgr.t</code>, which was previously failing now executes successfully:</p>\n\n<p><strong>t/40oo-qmgr.t:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>t/40oo-qmgr.t .............\n1..14\nok 1 - use MQClient::MQSeries;\nok 2 - use MQSeries::QueueManager;\nok 3 - MQSeries::QueueManager - constructor\nok 4 - MQSeries::QueueManager - constructor - AutoConnect=0\nok 5 - MQSeries::QueueManager - Connect\nok 6 - MQSeries::QueueManager - Disconnect\nok 7 - MQSeries::QueueManager - constructor\nok 8 - MQSeries::QueueManager - Open\nok 9 - MQSeries::QueueManager - Inquire\nok 10 - MQSeries::QueueManager - Inquire - Platform\nok 11 - MQSeries::QueueManager - Inquire - CodedCharSetId\nok 12 - MQSeries::QueueManager - Inquire - CommandLevel\nok 13 - MQSeries::QueueManager - Inquire - DeadLetterQName\nok 14 - MQSeries::QueueManager - Close\nok\n</code></pre>\n\n<p>Yielding the final results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Test Summary Report\n-------------------\nt/20convert.t           (Wstat: 0 Tests: 6 Failed: 2)\n  Failed tests:  5-6\nt/31properties.t        (Wstat: 768 Tests: 22 Failed: 3)\n  Failed tests:  16-18\n  Non-zero exit status: 3\nt/32async_put.t         (Wstat: 256 Tests: 25 Failed: 1)\n  Failed test:  13\n  Non-zero exit status: 1\nFiles=11, Tests=5345, 183 wallclock secs ( 1.02 usr  0.08 sys +  1.48 cusr  0.18 csys =  2.76 CPU)\nResult: FAIL\nFailed 3/11 test programs. 6/5345 subtests failed.\n</code></pre>\n\n<p>Any ideas on how to get this resolved and get the package up and running?</p>\n\n<p>If I run <code>/opt/mqm/samp/bin/amqsputc</code> or <code>/opt/mqm/samp/bin/amqsgetc</code>, I can connect to the same host, port, channel, queue manager, and queue from this host.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["excel", "perl", "csv", "unix"], "comments": [{"owner": {"reputation": 27, "user_id": 2510164, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c0881d312e1e2db95ac1f06c980513?s=128&d=identicon&r=PG", "display_name": "Prajakta", "link": "https://stackoverflow.com/users/2510164/prajakta"}, "reply_to_user": {"reputation": 54586, "user_id": 1505120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49dbeced705687b92e851736d48f208?s=128&d=identicon&r=PG", "display_name": "pnuts", "link": "https://stackoverflow.com/users/1505120/pnuts"}, "edited": false, "score": 1, "creation_date": 1471541085, "post_id": 39023992, "comment_id": 65398988, "body": "I have highlighted the Error ."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 2, "creation_date": 1471558743, "post_id": 39023992, "comment_id": 65407385, "body": "It looks like you&#39;ve just unpacked the tar files downloaded from CPAN. That&#39;s not how you install Perl modules. In particular, modules like Compress::Raw::Zlib that are written in C need to be compiled during installation. Have a read of: <a href=\"http://www.cpan.org/modules/INSTALL.html\" rel=\"nofollow noreferrer\">How to install CPAN modules</a>."}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1471544962, "creation_date": 1471544962, "answer_id": 39025160, "question_id": 39023992, "link": "https://stackoverflow.com/questions/39023992/unix-script-convert-csv-into-xlsx/39025160#39025160", "title": "Unix Script Convert CSV into XLSX", "body": "<p>The paths you're specifying in these <code>use lib</code> statements look wrong. Make sure that you have actually installed these modules (i.e, using the <code>cpan</code> or <code>cpanm</code> tools). Simply unpacking the tarballs from the CPAN web site is not sufficient, and will not work, as some of these modules must be compiled to function.</p>\n\n<p>Once you've installed these modules correctly, they should be available on the default Perl <code>@INC</code> path, and you will not need to use any extra <code>use lib</code> lines.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 6862482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e34797c19926fbd865607b8aa8670c?s=128&d=identicon&r=PG&f=1", "display_name": "Venugopal", "link": "https://stackoverflow.com/users/6862482/venugopal"}, "is_accepted": false, "score": 0, "last_activity_date": 1499325564, "creation_date": 1499325564, "answer_id": 44942187, "question_id": 39023992, "link": "https://stackoverflow.com/questions/39023992/unix-script-convert-csv-into-xlsx/44942187#44942187", "title": "Unix Script Convert CSV into XLSX", "body": "<p>You can try with a python script which convert any ff - flat file to required file format. csv2xls.py\nRef link: <a href=\"https://pypi.python.org/pypi/csv2xls/0.4\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/csv2xls/0.4</a></p>\n"}], "owner": {"reputation": 27, "user_id": 2510164, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c0881d312e1e2db95ac1f06c980513?s=128&d=identicon&r=PG", "display_name": "Prajakta", "link": "https://stackoverflow.com/users/2510164/prajakta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3998, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1499325564, "creation_date": 1471540512, "last_edit_date": 1471541061, "question_id": 39023992, "link": "https://stackoverflow.com/questions/39023992/unix-script-convert-csv-into-xlsx", "title": "Unix Script Convert CSV into XLSX", "body": "<p>I am trying to convert CSV file into XLSX.</p>\n\n<p>I have done successfully in XLS before but when trying to do in XLSX , I keep getting errors.</p>\n\n<p>This is sample script I am trying to execute.</p>\n\n<p><a href=\"https://github.com/jmcnamara/excel-writer-xlsx/blob/master/examples/a_simple.pl\" rel=\"nofollow\">https://github.com/jmcnamara/excel-writer-xlsx/blob/master/examples/a_simple.pl</a></p>\n\n<p>I have included all these Lib in my script :-\n!/usr/bin/perl -w</p>\n\n<p>use lib qw(/Scripts/perl/excel-writer-xlsx-master/lib);</p>\n\n<p>use lib qw(/Scripts/perl/File-Temp-0.19/lib);</p>\n\n<p>use lib qw(/Scripts/perl/Archive-Zip-1.30/lib);</p>\n\n<p>use lib qw(/Scripts/perl/IO-1.25/lib);</p>\n\n<p>use lib qw(/Scripts/perl/Compress-Raw-Zlib-2.069/lib);</p>\n\n<p><strong>Error :-\nCan't locate loadable object for module Compress::Raw::Zlib in @INC \nCompilation failed in require  /Archive-Zip-1.30/lib/Archive/Zip.pm line</strong> 12</p>\n\n<p>XLS working successfully with this package: Spreadsheet-WriteExcel-2.40</p>\n\n<p>Perl XLSX Module downloaded from </p>\n\n<p><a href=\"http://search.cpan.org/dist/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm\" rel=\"nofollow\">http://search.cpan.org/dist/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm</a> </p>\n"}, {"tags": ["arrays", "perl", "mesh", "sliding-window"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471544666, "post_id": 39022768, "comment_id": 65400944, "body": "Your line <code>my $list = &quot;@combined&quot;;</code> has the array interpolated <i>with spaces added between characters</i>.  I am not sure that you want that -- any sequence of three characters then must have one or two spaces.  It seems to me that you want <code>my $list = join &#39;&#39;, @combined;</code>.  Btw, I do not understand your problem description at all."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471547652, "post_id": 39022768, "comment_id": 65402540, "body": "Hi zdim, Thanks for your answer! How should I improve my question, if at all? Maybe I could just simplify it...Thanks again."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471549542, "post_id": 39022768, "comment_id": 65403535, "body": "It is good that you gave all code and described the problem!  However, you used the word &quot;<i>mesh</i>&quot; and I thought that you were referring to some technique in your field.  (I added the link, I hope you don&#39;t mind.)  Then, with &quot;<i>count as substitution</i>&quot; I thought you meant computing, until it downed on me that it&#39;s biology. I&#39;d suggest that you avoid terms from your field, and if you need them explain them briefly. Also, while I do see the problem (extra spaces in strings) it is not clear from your description.  So it&#39;s all about how descriptions are worded. My $.02."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471549819, "post_id": 39022768, "comment_id": 65403672, "body": "Thank you for the feedback. I try to be as descriptive as possible, without being OVERLY descriptive. Proving just the right amount of information is always a very fine line to walk it seems, especially since I am a biologist talking to computer programmers! :) Thanks again zdim. I really appreciate your help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1471559607, "post_id": 39022768, "comment_id": 65407666, "body": "I meant to say -- firstly, it&#39;s a good question. You clearly put thought and effort in and provide a lot.  As for writing effectively here, it&#39;s not that easy. I still struggle a lot :). Sometimes I&#39;m in disbelief when I read my text after a little while."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1471545936, "creation_date": 1471545936, "answer_id": 39025437, "question_id": 39022768, "link": "https://stackoverflow.com/questions/39022768/perl-sliding-window-search-along-mesh-array/39025437#39025437", "title": "perl: sliding window search along mesh array", "body": "<p>The statement <code>my $list = \"@combined\";</code> produces a string which contains array elements and spaces added between them. This completely throws off <code>substr</code> processing below. Double-quoting an array (<code>\"@array\"</code>) is a convenience so that when printed it is easier to read.  Here you want</p>\n\n<pre><code>my $list = join '', @combined; \n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 39025437, "answer_count": 1, "score": 1, "last_activity_date": 1471545936, "creation_date": 1471535975, "last_edit_date": 1471544889, "question_id": 39022768, "link": "https://stackoverflow.com/questions/39022768/perl-sliding-window-search-along-mesh-array", "title": "perl: sliding window search along mesh array", "body": "<p>I am ultimately trying to combine three arrays of letters using <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.416/lib/List/MoreUtils.pm#mesh_ARRAY1_ARRAY2_[_ARRAY3_..._]\" rel=\"nofollow\"><code>List::MoreUtils::mesh</code></a>, so that I can then compare each position among the sequences. \nFor example, if I have three files that look like: </p>\n\n<pre><code>    &gt;file_1 \n    TAGCTAGCCAGC-T\n</code></pre>\n\n<p>the first comparison would be between TTT (this would count as no substitution). If the first letters are TAA, this would count as a substitution. The first challenge is to get the three corresponding letters together to compare. </p>\n\n<p>Here is my code so far: </p>\n\n<pre><code>    use strict; \n    use warnings; \n    use List::MoreUtils qw{mesh}; \n\n    open (SEQ_ONE, \"&lt;\", \"/path/to/file_1.txt\") or die $!; \n    open (SEQ_TWO, \"&lt;\", \"/path/to/file_2.txt\") or die $!; \n    open (REFERENCE, \"&lt;\", \"/path/to/reference_sequence.txt\") or die $!; \n\n    my @first; \n    my @second; \n    my @reference; \n    my @combined; \n    my $sequence; \n    my $secondsequence; \n    my $thirdsequence; \n    my $windowsize = 3; \n    my $step = 3; \n\n    while (my $line = &lt;SEQ_ONE&gt;){ \n            chomp $line; \n            if ($line !~ /^&gt;+/) { \n                    $sequence .= $line; \n            } \n            @first = split //, $sequence; \n     }\n\n    while (my $secondline = &lt;SEQ_TWO&gt;){ \n            chomp $secondline; \n            if ($secondline !~ /^&gt;+/){\n                     $secondsequence .= $secondline; \n            }\n            @second = split //, $secondsequence; \n    } \n\n    while (my $thirdline = &lt;REFERENCE&gt;){ \n            chomp $thirdline; \n            if ($thirdline !~ /^&gt;+/){ \n                    $thirdsequence .= $thirdline; \n            } \n            @reference = split //, $thirdsequence; \n    } \n\n    @combined = mesh @reference, @first, @second; \n    my $list = \"@combined\"; \n\n    for (my $windowstart = 0; $windowstart &lt;= (length($list) - $windowsize); $windowstart += $step){ \n            my $windowSeq = substr($list, $windowstart, $windowsize); \n            print $windowSeq, \"\\n\"; \n    } \n</code></pre>\n\n<p>This seems to break up the letters in chunks of letters, alternating in lengths of 2 and 1 letters. Output for the above code looks something like: </p>\n\n<pre><code>    T T\n     T \n    A A\n     A \n    G G\n     G  \n</code></pre>\n\n<p>I have experimented with different window and step sizes, but I still can't get the desired output of separate three letters at a time. I am close, just not quite there. Thanks for the help. </p>\n"}, {"tags": ["perl", "module", "packages", "perl-module"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471536391, "post_id": 39022692, "comment_id": 65396166, "body": "Where did you get your quote? Please add a source. That might already point you to the explanation. I right now can think of several, but there are exceptions."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471536772, "post_id": 39022692, "comment_id": 65396386, "body": "@simbabque I don&#39;t remember where I got the quote"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471536894, "post_id": 39022692, "comment_id": 65396455, "body": "Please don&#39;t accept my answer just yet. That discourages other answers and there will likely be someone who has more time and does more research to give a better one than mine."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1471540978, "post_id": 39022692, "comment_id": 65398933, "body": "Don&#39;t change it for the sake of changing it, but yes, using separate .pm files avoids a couple of issues."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1471545553, "post_id": 39022950, "comment_id": 65401390, "body": "It makes your users&#39; lives harder, too. What if your user gets a warning in a <code>Classes::Cities</code> subroutine and wants to look at the source code?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1471536609, "creation_date": 1471536609, "answer_id": 39022950, "question_id": 39022692, "link": "https://stackoverflow.com/questions/39022692/multiple-perl-packages-in-one-file/39022950#39022950", "title": "Multiple Perl packages in one file?", "body": "<p>The main reason is that Perl loads modules for you automatically when you <code>use</code> or <code>require</code> them with package names. It does so by converting the package name to path in your file system and checking each of your <code>@INC</code> directories for that file.</p>\n\n<pre><code>use Classes::City;\n# will be converted to on Linux:\nClasses/City.pm\n</code></pre>\n\n<p>If you have both Classes::City and Classes::Cities in one file, you cannot load ::Cities without loading City because the file Classes/Cities.pm does not exist anywhere in your <code>@INC</code>.</p>\n\n<pre><code>use Classes::City\n# blows up\n</code></pre>\n\n<p>You now need to keep track which packages are in what file. That makes your life harder.</p>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1564951212, "post_id": 57350075, "comment_id": 101187896, "body": "I recognize that the question was &quot;list all reasons&quot;, and this is only one."}], "tags": [], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1564951119, "creation_date": 1564951119, "answer_id": 57350075, "question_id": 39022692, "link": "https://stackoverflow.com/questions/39022692/multiple-perl-packages-in-one-file/57350075#57350075", "title": "Multiple Perl packages in one file?", "body": "<p>A single answer is that this is not the intended usage model, and the compiler/interpreter will fight with you in ways that aren't always obvious.</p>\n\n<p>Your example is very similar to something I try to do: create a class, and then a container class for the original class within the same file.</p>\n\n<p>I've found that 8 times out of 10, I can get it to work without too much pain.</p>\n\n<p>If the original class contains BEGIN blocks for (say) accessors, it's not always clear that they get executed before you try to use the accessors in your container class.  I'm sure there are combinations of gyrations which will make this happen, but at that point, it seems cleaner to just use the 1 package/file model.</p>\n\n<p>Even forcing a <code>BEGIN { import class;}</code> from within the container class won't always be enough to get things to run in the necessary order.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1564951119, "creation_date": 1471535785, "question_id": 39022692, "link": "https://stackoverflow.com/questions/39022692/multiple-perl-packages-in-one-file", "title": "Multiple Perl packages in one file?", "body": "<p>Please enumerate all reasons supporting the following saying: \"Each Perl package should be placed into a separate file (no several packages in one file)\".</p>\n\n<p>For example, I have a code like this:</p>\n\n<pre><code>{\npackage Classes::City;\n# ...\n}\n{\npackage Classes::Cities; # for lists of multiple cities\n# ...\n}\n</code></pre>\n\n<p>Should I refactor this code into two separate <code>.pm</code> files? (Consider this question as an example of the above question, not as an additional opinion-based question. I want just the list arguments, not an opinion-based answer.)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 5, "creation_date": 1471557004, "post_id": 39022108, "comment_id": 65406797, "body": "If you&#39;re looking for <i>clumsier</i> alternatives, be sure to visit <a href=\"https://codegolf.stackexchange.com\">Code Golf</a>"}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1483373659, "post_id": 39022108, "comment_id": 70065839, "body": "In Perl 6 it would be <code>my @choices = @options[ ^( * min $limit ) ]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1471535581, "post_id": 39022270, "comment_id": 65395646, "body": "This one is actually way better than anything I&#39;d come up with. Expresses the intent far more clearly. That -1 is an eyesore :)"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 5, "last_activity_date": 1471534557, "creation_date": 1471534557, "answer_id": 39022270, "question_id": 39022108, "link": "https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements/39022270#39022270", "title": "Is there a less clumsy alternative for copying up to &quot;n&quot; array elements?", "body": "<p>Of the options you provided I actually like #1 and #4 and have definitely written statements like those before. If those options <em>really</em> bothered me, I might write it this way:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw(min);\nuse Data::Dumper;\n\nmy @options = ('a'..'c');\nmy $limit   = 5;\n\nmy @choices = @options[0..min($limit-1, $#options)];\nprint Dumper \\@choices;\n# $VAR1 = [\n#      'a',\n#      'b',\n#      'c'\n#    ];    \n\n$limit = 2;\n@choices = @options[0..min($limit-1, $#options)];\nprint Dumper \\@choices;\n# $VAR1 = [\n#       'a',\n#       'b'\n#   ];\n</code></pre>\n\n<p>but this is largely opinion based and I am sure other people would do it differently. </p>\n"}, {"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1471534718, "post_id": 39022313, "comment_id": 65395105, "body": "... man, this solution is way better. The first statement is a copy, then splice works in place right?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1471534861, "post_id": 39022313, "comment_id": 65395191, "body": "Tragically, <code>splice @choices=@options,$limit</code> doesn&#39;t work"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1471534903, "post_id": 39022313, "comment_id": 65395222, "body": "But <code>my @choices = splice ( @options, 0, $limit );</code> does."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 1, "creation_date": 1471535090, "post_id": 39022313, "comment_id": 65395337, "body": "This is not an exact answer, because the question was how to copy just a maximum number of elements. You copy all of them, before you throw away those you have copied unnecessarily. This might be a performance problem with big arrays."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1471535476, "post_id": 39022313, "comment_id": 65395574, "body": "@ceving - performance was not a concern here, I was just after something more elegant. The two-statement option was far better than my alternatives, but the one-liner is pure theatre. Hats off to mob, this one&#39;s a winner :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1471542176, "post_id": 39022313, "comment_id": 65399634, "body": "<code>@choices = splice @{ sub{ \\@_ }-&gt;( @options ) }, 0, $limit;</code> avoids copying the values of <code>@options</code> twice."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 12, "last_activity_date": 1471542780, "last_edit_date": 1471542780, "creation_date": 1471534689, "answer_id": 39022313, "question_id": 39022108, "link": "https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements/39022313#39022313", "title": "Is there a less clumsy alternative for copying up to &quot;n&quot; array elements?", "body": "<pre><code>@choices = @options; splice @choices, $limit;  # \"splice() offset past end\" before v5.16\n</code></pre>\n\n<p>It can also be done in a single statement!</p>\n\n<pre><code>@choices = splice @{[@options]}, 0, $limit;\n</code></pre>\n\n<p>And also</p>\n\n<pre><code>splice @{$choices_ref=[@options]}, $limit;  # Warns \"splice() offset past end\" before v5.16\nsplice $choices_ref=[@options], $limit;     # Ditto. Requires Perl v5.14. \"Experimental\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1471536032, "post_id": 39022346, "comment_id": 65395927, "body": "You have my +1... the caveat is important because the original array does get altered with this approach. Fixing that issue then leaves little difference between this answer and <a href=\"http://stackoverflow.com/a/39022313/133939\">mob&#39;s solution</a>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1471534770, "creation_date": 1471534770, "answer_id": 39022346, "question_id": 39022108, "link": "https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements/39022346#39022346", "title": "Is there a less clumsy alternative for copying up to &quot;n&quot; array elements?", "body": "<p>I'd probably use <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow\"><code>splice</code></a>:</p>\n\n<pre><code>my @choices = splice ( @options, 0, $limit ); \n</code></pre>\n\n<p>Note that <code>splice</code> acts like <code>shift</code>/<code>pop</code> and modifies the source array - if that's undesirable, then copy it first. </p>\n"}, {"comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1471604368, "post_id": 39024373, "comment_id": 65424141, "body": "The <code>min</code> function requires <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\"><code>List::Util</code></a>, because Perl has <a href=\"http://www.perlmonks.org/?node_id=406883\" rel=\"nofollow noreferrer\">no built-in</a> function."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1471611400, "post_id": 39024373, "comment_id": 65428740, "body": "Weird that we have the same answer, yet I generated less votes :( I guess people really do prefer short(er) answers"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1471617099, "post_id": 39024373, "comment_id": 65432737, "body": "@Hunter McMillen, There&#39;s more to presentation than just length. You buried your answer in a code snippet, so I didn&#39;t even see it. If you had simply added it to the top of your answer, it would have been a better answer. But worse, the OP wanted something a clear and elegant solution, and including a 24-line program yells the opposite."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1471542088, "last_edit_date": 1471542088, "creation_date": 1471541950, "answer_id": 39024373, "question_id": 39022108, "link": "https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements/39024373#39024373", "title": "Is there a less clumsy alternative for copying up to &quot;n&quot; array elements?", "body": "<pre><code>my @choices = @options[0..min($#options, $limit-1)];\n</code></pre>\n\n<p>Short, straightforward, clear.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1471622479, "creation_date": 1471622479, "answer_id": 39043386, "question_id": 39022108, "link": "https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements/39043386#39043386", "title": "Is there a less clumsy alternative for copying up to &quot;n&quot; array elements?", "body": "<pre><code>my @choices = first_x_ele($limit, @options);\n</code></pre>\n\n<p>If you think something is unclear, use a sub! How you implement the sub isn't very important, but a short one would be:</p>\n\n<pre><code>sub first_x_ele { my $x = shift; splice(@_, 0, $x) }\n</code></pre>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 1, "accepted_answer_id": 39022313, "answer_count": 5, "score": 12, "last_activity_date": 1477322849, "creation_date": 1471534114, "last_edit_date": 1477322849, "question_id": 39022108, "link": "https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements", "title": "Is there a less clumsy alternative for copying up to &quot;n&quot; array elements?", "body": "<blockquote>\n  <p>In a world of many <code>@choices</code><br>\n  With a <code>$limit</code> to what one can do,<br>\n  Life proposes many <code>@options</code><br>\n  But at times just one or two.<br>\n  In a bid to minimize line noise<br>\n  What can <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow\">Tim Toady</a> do?</p>\n</blockquote>\n\n<p>Here are a few ways I've thought of, but they just seem so clumsy. Surely there's a more elegant way to DWIM:</p>\n\n<ul>\n<li><p><em>Verbose one-liner</em></p>\n\n<pre><code>my @choices = @options &lt;= $limit ? @options : @options[0..$limit-1];  # Blech\n</code></pre></li>\n<li><p><em>Slice control</em></p>\n\n<pre><code>my @choices = @options[0..(@options &lt;= $limit ? $#options : $limit - 1)]; # Even worse\n</code></pre></li>\n<li><p><em>Cheesy slice inside a slice</em></p>\n\n<pre><code>my @choices = @options[0..($#options, $limit-1 )[@options &gt; $limit]];  # Crazy eyes\n</code></pre></li>\n<li><p><em>Clearer intent, but over two lines</em></p>\n\n<pre><code>my @choices = @options;\n   @choices = @options[0..$limit-1] if $limit &lt; @options;\n</code></pre></li>\n</ul>\n"}, {"tags": ["arrays", "perl", "sorting", "set", "scalar"], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 1, "last_activity_date": 1471534285, "creation_date": 1471534285, "answer_id": 39022168, "question_id": 39022002, "link": "https://stackoverflow.com/questions/39022002/getting-a-set-into-a-sorted-array-perl/39022168#39022168", "title": "getting A set into a sorted array perl", "body": "<pre><code>my @arr = sort $set-&gt;elements;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 39022168, "answer_count": 1, "score": 0, "last_activity_date": 1471534285, "creation_date": 1471533832, "question_id": 39022002, "link": "https://stackoverflow.com/questions/39022002/getting-a-set-into-a-sorted-array-perl", "title": "getting A set into a sorted array perl", "body": "<p>I have been looking for a way to convert a set into a sorted array. </p>\n\n<p>I have found a solution but it seems a little bit rediculous: </p>\n\n<pre><code>use Set::Scalar;\nSet::Scalar-&gt;as_string_callback(sub{join(\"\\n\", sort $_[0]-&gt;elements)});\n#above formats print so that a line is added between each element\n... #assume things are added to the set in this code\nmy @arr = split(\"\\n\", \"$set\"); #array contains each sorted element of the set \n</code></pre>\n\n<p>my only issue is that in my eyes this shouldn't be a fast/memory efficient method of doing this. Please let me know if you have any advice. Thank you in advance. </p>\n"}, {"tags": ["perl", "logging", "error-handling", "dbi"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1471529557, "post_id": 39020213, "comment_id": 65391368, "body": "The chances are that the DBD::Oracle driver is producing that extra information, and the <code>$err</code> string is all that the DBMS tells the driver; the rest is determined by the driver from its own context information."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471529962, "post_id": 39020213, "comment_id": 65391646, "body": "Have you tried using Try::Tiny to catch the error? It might get the full error message. You can also access <code>$dbh-&gt;errstr</code> after your <code>eval</code> block."}, {"owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471530389, "post_id": 39020213, "comment_id": 65391984, "body": "@simbabque, does not work, both return the same like <code>$@</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1471531014, "post_id": 39020213, "comment_id": 65392471, "body": "If you remove the <code>print</code> in the last line, do you still get he first line of output? I think that&#39;s on STDERR and is actually a <i>warning</i> issued by DBI or the driver. Try to locally overwrite or hook the <code>$SIG{WARN}</code>, or use Capture::Tiny around the <code>execute or die</code> or the whole <code>eval</code> block to catch STDERR."}], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "is_accepted": true, "score": 4, "last_activity_date": 1471593750, "last_edit_date": 1471593750, "creation_date": 1471535827, "answer_id": 39022716, "question_id": 39020213, "link": "https://stackoverflow.com/questions/39020213/get-full-error-message-in-perl-dbi-module/39022716#39022716", "title": "Get full error message in Perl DBI module", "body": "<p>Take a look at the <a href=\"https://metacpan.org/pod/DBI#PrintError\" rel=\"nofollow\">documentation for the PrintError attribute</a>. It's enabled by default and is why the error is being logged to the console. It's also the source of the <code>DBD::Oracle::st execute failed:</code> prefix.</p>\n\n<p>Then take a look at the <a href=\"https://metacpan.org/pod/DBI#ShowErrorStatement\" rel=\"nofollow\">ShowErrorStatement attribute</a>. It's also enabled by default (in DBD::Oracle but not all drivers) and is the source of the <code>[for Statement \"...\" with ParamValues: :p1='foo', :p2='bar']</code> suffix.</p>\n\n<p>Then take a look at the <a href=\"https://metacpan.org/pod/DBI#RaiseError\" rel=\"nofollow\">RaiseError attribute</a>. If that was set then the DBI would throw an exception (containing the message you saw logged to the console) when the error occurs. You could catch that exception and handle it however you want.</p>\n\n<p>In general, I <em>strongly</em> recommend that all applications using the DBI enable RaiseError. It makes your applications more robust and you life <em>much</em> easier.</p>\n\n<p>p.s. For advanced use-cases you <em>might</em> want to use look into the <a href=\"https://metacpan.org/pod/DBI#HandleError\" rel=\"nofollow\">HandleError</a> attribute, or in very rare cases, the <a href=\"https://metacpan.org/pod/DBI#HandleSetErr\" rel=\"nofollow\">HandleSetError</a> attribute.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1471644296, "post_id": 39032224, "comment_id": 65446354, "body": "Your first solution will print <code>$err =&gt; ...</code> for <i>any</i> warning, not just those raised by DBI. It will also keep running even if there&#39;s a DBI error, which is almost never a good idea; you should pretty much always use <code>RaiseError</code>. To automatically log errors without having to wrap your code in <code>eval</code> blocks, use <a href=\"https://metacpan.org/pod/DBI#HandleError\" rel=\"nofollow noreferrer\"><code>HandleError</code></a>."}], "tags": [], "owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "is_accepted": false, "score": 0, "last_activity_date": 1471587224, "creation_date": 1471587224, "answer_id": 39032224, "question_id": 39020213, "link": "https://stackoverflow.com/questions/39020213/get-full-error-message-in-perl-dbi-module/39032224#39032224", "title": "Get full error message in Perl DBI module", "body": "<p>Based on given comments and answer I found these solutions:</p>\n\n<pre><code>use DBI;\n\nlocal $SIG{__WARN__} = sub {\n    my $err = shift;\n    print \"\\$err =&gt; $err\\n\";\n};\n\nmy $dbh = DBI-&gt;connect(\"dbi:Oracle:&lt;database&gt;\", \"&lt;user&gt;\", \"&lt;password&gt;\", { PrintError =&gt; 1, ShowErrorStatement =&gt; 1 } );\nmy $sth = $dbh-&gt;prepare(\"INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (?,?)\");\n$sth-&gt;execute( \"foo\", \"bar\" );\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>use DBI;\n\neval {\n    my $dbh = DBI-&gt;connect(\"dbi:Oracle:&lt;database&gt;\", \"&lt;user&gt;\", \"&lt;password&gt;\", { RaiseError =&gt; 1} );\n    my $sth = $dbh-&gt;prepare(\"INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (?,?)\");\n    $sth-&gt;execute( \"foo\", \"bar\" );\n    $dbh-&gt;disconnect;\n};\nmy $err = $@;   \nprint \"\\$err =&gt;\\n$err\\n\";\n</code></pre>\n"}], "owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1271, "favorite_count": 1, "accepted_answer_id": 39022716, "answer_count": 2, "score": 3, "last_activity_date": 1471593750, "creation_date": 1471528829, "last_edit_date": 1471529624, "question_id": 39020213, "link": "https://stackoverflow.com/questions/39020213/get-full-error-message-in-perl-dbi-module", "title": "Get full error message in Perl DBI module", "body": "<p>I have a Perl script like this:</p>\n\n<pre><code>use DBI;\n\neval {\n    my $dbh = DBI-&gt;connect(\"dbi:Oracle:&lt;database&gt;\", \"&lt;user&gt;\", \"&lt;password&gt;\") or die ($DBI::errstr);\n    my $sth = $dbh-&gt;prepare(\"INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (?,?)\");\n    $sth-&gt;execute( \"foo\", \"bar\" ) or die($dbh-&gt;errstr);\n    $dbh-&gt;disconnect;\n};\n\nmy $err = $@;   \nprint \"\\$err =&gt; $err\\n\";\n</code></pre>\n\n<p>When I run it the console produce following output:</p>\n\n<pre><code>DBD::Oracle::st execute failed: ORA-01722: invalid number (DBD ERROR: error possibly near &lt;*&gt; indicator at char 53 in 'INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (:&lt;*&gt;p1,:p2)') [for Statement \"INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (?,?)\" with ParamValues: :p1='foo', :p2='bar'] at C:\\Temp\\Perl-1.pl line 6.\n$err =&gt; ORA-01722: invalid number (DBD ERROR: error possibly near &lt;*&gt; indicator at char 53 in 'INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (:&lt;*&gt;p1,:p2)') at C:\\Temp\\Perl-1.pl line 6.\n</code></pre>\n\n<p>I would like to store the <strong>full</strong> error message, but variable <code>$err</code> contains only <code>ORA-01722: invalid number (DBD ERROR: error possibly near &lt;*&gt; indicator at char 53 in 'INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (:&lt;*&gt;p1,:p2)') at C:\\Temp\\Perl-1.pl line 6.</code> </p>\n\n<p>But I would like to get also <code>[for Statement \"INSERT INTO WT_APPCERT_LH (STATUS, APPCERT) VALUES (?,?)\" with ParamValues: :p1='foo', :p2='bar']</code> which is missing.</p>\n\n<p>Any idea how to catch this additional information?</p>\n"}, {"tags": ["python", "ruby", "perl", "awk", "bioinformatics"], "comments": [{"owner": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 1, "creation_date": 1471525787, "post_id": 39018943, "comment_id": 65388551, "body": "Sorry, I&#39;m not familiar enough with bioinformatics terminology to interpret terms like &#39;SNP&#39;, to know which columns correspond to which alleles, or otherwise infer things about a PLINK file. Please clarify."}, {"owner": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 1, "creation_date": 1471526041, "post_id": 39018943, "comment_id": 65388742, "body": "Come to think of it, I think you&#39;ve overloaded the PLINK tag here. This PLINK tag applies to PuTTY-Link, not the plink genomics tool."}, {"owner": {"reputation": 141, "user_id": 5510006, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51d2ced93ab5a91a16d0549f62ba2066?s=128&d=identicon&r=PG&f=1", "display_name": "Svalf", "link": "https://stackoverflow.com/users/5510006/svalf"}, "reply_to_user": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 0, "creation_date": 1471526688, "post_id": 39018943, "comment_id": 65389196, "body": "@kojiro: I corrected the tag, I though it was applying for the plink genomic tool as you have guessed it. I also added some more information (especially headers for the files) to make it more understandable. I hope it is more clear now. Thank you for your comments!"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1471527170, "post_id": 39018943, "comment_id": 65389545, "body": "I think you would have more productivity with Python / Perl / Ruby / awk for projects like this."}, {"owner": {"reputation": 141, "user_id": 5510006, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51d2ced93ab5a91a16d0549f62ba2066?s=128&d=identicon&r=PG&f=1", "display_name": "Svalf", "link": "https://stackoverflow.com/users/5510006/svalf"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1471527308, "post_id": 39018943, "comment_id": 65389655, "body": "@dawg: Thank you for this advice, I changed the tags."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1471528090, "post_id": 39018943, "comment_id": 65390228, "body": "Do we really need to see 36 columns summarized to 21? Can you reduce the <b>sample data</b> to 1--2 sample column sets that should be reduced, +1-2 columns that should have no processing and remain in output  (if appropriate)?  <code>awk</code> is designed for such data processing issues, and has a lower learning threshold (and setup) than other more fully featured languages. Good luck."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1471528154, "post_id": 39018943, "comment_id": 65390274, "body": "Do we REALLY need to see 36 columns for you to express your problem? Couldn&#39;t you express your problem in, say, 6 or 7 columns so it&#39;s a <b>Minimal</b> example for us to look at (see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1471529854, "post_id": 39018943, "comment_id": 65391563, "body": "you&#39;re missing the case when for values are {0,1}."}, {"owner": {"reputation": 141, "user_id": 5510006, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51d2ced93ab5a91a16d0549f62ba2066?s=128&d=identicon&r=PG&f=1", "display_name": "Svalf", "link": "https://stackoverflow.com/users/5510006/svalf"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1471531357, "post_id": 39018943, "comment_id": 65392724, "body": "@karakfa: this case does not exist"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1471531544, "post_id": 39018943, "comment_id": 65392869, "body": "Well, it doesn&#39;t exist in this data. Are you saying it can never exist? I know next to nothing about bioinformatics."}, {"owner": {"reputation": 141, "user_id": 5510006, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51d2ced93ab5a91a16d0549f62ba2066?s=128&d=identicon&r=PG&f=1", "display_name": "Svalf", "link": "https://stackoverflow.com/users/5510006/svalf"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1471532033, "post_id": 39018943, "comment_id": 65393235, "body": "@DaveCross: Exactly, in a PLINK bed file, either both alleles should be missing (i.e. 0) or neither."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1471544518, "post_id": 39018943, "comment_id": 65400871, "body": "I&#39;m torn.  This is a fairly well stated question, nicely formatted.  On the other hand, it is a request for others to write your code for you.  I want to vote it up and down at the same time."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1471596685, "last_edit_date": 1471596685, "creation_date": 1471529086, "answer_id": 39020309, "question_id": 39018943, "link": "https://stackoverflow.com/questions/39018943/bash-summarising-information-present-in-2-genotype-data-columns-in-one-column/39020309#39020309", "title": "BASH - Summarising information present in 2 genotype data columns in one column (ped file)", "body": "<p>What have you tried? We're not here to write your code for you.</p>\n\n<p>But as I'm feeling generous, here's a pretty basic Perl solution that seems to work for your data. I'm not going to explain it as I think you should put in some effort :-)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\n# Skip header\n&lt;DATA&gt;;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  my @data = split;\n  my @fixed = @data[0..5];\n  my @snps = @data[6..$#data];\n  my @new_snps;\n  while (my ($s1, $s2) = splice @snps,0, 2) {\n    push @new_snps, summarise($s1, $s2);\n  }\n  say join ' ', @fixed, @new_snps;\n}\n\nsub summarise {\n  my ($s1, $s2) = @_;\n\n  return 2 if $s1 == 2 or $s2 == 2;\n  return 1 if $s1 == 1 and $s2 == 1;\n  return 'NA' if $s1 == 0 and $s2 == 0;\n  return '?';\n}\n\n__DATA__\nFID IID PID MID SEX PHENO SNP_1a SNP_1b SNP_2a SNP_2b SNP_3a SNP_3b SNP_4a SNP_4b SNP_5a SNP_5b SNP_6a SNP_6b SNP_7a SNP_7b SNP_8a SNP_8b SNP_9a SNP_9b SNP_10a SNP_10b SNP_11a SNP_11b SNP_12a SNP_12b SNP_13a SNP_13b SNP_14a SNP_14b SNP_15a SNP_15b\nA1  A1  0   0   1   1   0   0   0   0   2   2   1   2   1   2   1   2   2   1   2   1   1   1   1   2   0   0   0   0   0   0   2   1   2   2\nA2  A2  0   0   1   1   1   1   1   1   0   0   1   2   2   2   2   2   1   1   0   0   2   1   2   2   0   0   0   0   0   0   1   1   0   0\nA3  A3  0   0   1   2   1   1   1   1   0   0   2   2   2   2   2   2   1   1   0   0   1   1   2   2   0   0   0   0   0   0   1   1   0   0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 5510006, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51d2ced93ab5a91a16d0549f62ba2066?s=128&d=identicon&r=PG&f=1", "display_name": "Svalf", "link": "https://stackoverflow.com/users/5510006/svalf"}, "edited": false, "score": 0, "creation_date": 1471533207, "post_id": 39020479, "comment_id": 65394007, "body": "Worked perfectly! Thank you!"}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": true, "score": 4, "last_activity_date": 1471531933, "last_edit_date": 1471531933, "creation_date": 1471529541, "answer_id": 39020479, "question_id": 39018943, "link": "https://stackoverflow.com/questions/39018943/bash-summarising-information-present-in-2-genotype-data-columns-in-one-column/39020479#39020479", "title": "BASH - Summarising information present in 2 genotype data columns in one column (ped file)", "body": "<pre><code>$ cat &gt; test.awk\nNR&gt;1{\n    for(i=j=7; i&lt;NF; i+=2)                                              # for fields 7-(NF-1)\n        $(j++) = ($i$(i+1)~/2/) ? \"2\" : (($i$(i+1)==\"11\") ? \"1\" : \"NA\") # see below *)\n    for (i=1; i&lt;=21; i++)                                               # reduced to 21 fields\n        printf \"%-2s%s\", $i,(i&lt;21?OFS:ORS)                              # print\n} \n$ awk -f test.awk test.in\nA1 A1 0  0  1  1  NA NA 2  2  2  2  2  2  1  2  NA NA NA 2  2\nA2 A2 0  0  1  1  1  1  NA 2  2  2  1  NA 2  2  NA NA NA 1  NA\nA3 A3 0  0  1  2  1  1  NA 2  2  2  1  NA 1  2  NA NA NA 1  NA\n</code></pre>\n\n<p>If rules 1 (2 OR 2) or 2 (1 AND 1) fail, it returns <code>NA</code>.</p>\n\n<p>*) Catenate a and b fields (<code>$i$(i+1)</code>, add 2 to <code>i</code> on every iteration) and check them for 2 or 11 and write result to already processed cols (ie. result from fields 7 &amp; 8 is stored to field 7, 9 &amp; 10 to 8 etc. grow <code>j</code> by 1 on every iteration).</p>\n"}, {"comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1471537427, "post_id": 39021717, "comment_id": 65396777, "body": "Love it. I had the headers too with <code>gensub</code> in my ternary operator chain but it got too long and didn&#39;t fit on the screen so I ditched it."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 3, "last_activity_date": 1471532960, "creation_date": 1471532960, "answer_id": 39021717, "question_id": 39018943, "link": "https://stackoverflow.com/questions/39018943/bash-summarising-information-present-in-2-genotype-data-columns-in-one-column/39021717#39021717", "title": "BASH - Summarising information present in 2 genotype data columns in one column (ped file)", "body": "<p>here is another cryptic <code>awk</code> with  headers</p>\n\n<pre><code>$ awk '{for(i=1;i&lt;7;i++) printf \"%s \",$i; \n        for(i=7;i&lt;=NF;i+=2) \n           {c=$i^2+$(i+1)^2; \n            r=(c&gt;1)+(c&gt;3); \n            printf \"%2s \",(NR&gt;1)?(r?r:\"NA\"):substr($i,1,length($i)-1)}; \n            print \"\"}' file\n\nFID IID PID MID SEX PHENO SNP_1 SNP_2 SNP_3 SNP_4 SNP_5 SNP_6 SNP_7 SNP_8 SNP_9 SNP_10 SNP_11 SNP_12 SNP_13 SNP_14 SNP_15\nA1 A1 0 0 1 1 NA NA  2  2  2  2  2  2  1  2 NA NA NA  2  2\nA2 A2 0 0 1 1  1  1 NA  2  2  2  1 NA  2  2 NA NA NA  1 NA\nA3 A3 0 0 1 2  1  1 NA  2  2  2  1 NA  1  2 NA NA NA  1 NA\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 5510006, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51d2ced93ab5a91a16d0549f62ba2066?s=128&d=identicon&r=PG&f=1", "display_name": "Svalf", "link": "https://stackoverflow.com/users/5510006/svalf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1471577439, "accepted_answer_id": 39020479, "answer_count": 3, "score": 0, "last_activity_date": 1471596685, "creation_date": 1471525230, "last_edit_date": 1471592140, "question_id": 39018943, "link": "https://stackoverflow.com/questions/39018943/bash-summarising-information-present-in-2-genotype-data-columns-in-one-column", "closed_reason": "Needs details or clarity", "title": "BASH - Summarising information present in 2 genotype data columns in one column (ped file)", "body": "<p>I have a PLINK ped file with 36 columns (6+30) that looks like this:</p>\n\n<pre><code>FID IID PID MID SEX PHENO SNP_1a SNP_1b SNP_2a SNP_2b SNP_3a SNP_3b SNP_4a SNP_4b SNP_5a SNP_5b SNP_6a SNP_6b SNP_7a SNP_7b SNP_8a SNP_8b SNP_9a SNP_9b SNP_10a SNP_10b SNP_11a SNP_11b SNP_12a SNP_12b SNP_13a SNP_13b SNP_14a SNP_14b SNP_15a SNP_15b\nA1  A1  0   0   1   1   0   0   0   0   2   2   1   2   1   2   1   2   2   1   2   1   1   1   1   2   0   0   0   0   0   0   2   1   2   2\nA2  A2  0   0   1   1   1   1   1   1   0   0   1   2   2   2   2   2   1   1   0   0   2   1   2   2   0   0   0   0   0   0   1   1   0   0\nA3  A3  0   0   1   2   1   1   1   1   0   0   2   2   2   2   2   2   1   1   0   0   1   1   2   2   0   0   0   0   0   0   1   1   0   0\n</code></pre>\n\n<p>I am interested in modifying the genotype columns (column 7 onwards) so that:</p>\n\n<ul>\n<li><p>If allele a <strong>and/or</strong> allele b for a SNP (SNP_#a and/or SNP_#b) is \"<strong>2</strong>\": summarise the 2 columns by a single column containing a \"2\"</p></li>\n<li><p>If <strong>both</strong> alleles (a and b) for a SNP are \"<strong>1</strong>\": summarise it with a \"1\" in the single column</p></li>\n<li><p>Finally, if <strong>both</strong> alleles (a and b) for a SNP are \"<strong>0</strong>\": summarise it with a \"NA\"</p></li>\n</ul>\n\n<p>The output for the example above would thereby contain 21 columns (6+15) and look like this:</p>\n\n<pre><code>FID IID PID MID SEX PHENO SNP_1 SNP_2 SNP_3 SNP_4 SNP_5 SNP_6 SNP_7 SNP_8 SNP_9 SNP_10 SNP_11 SNP_11 SNP_12 SNP_13 SNP_14 SNP_15\nA1  A1  0   0   1   1   NA  NA  2   2   2   2   2   2   1   2   NA  NA  NA  2   2\nA2  A2  0   0   1   1   1   1   NA  2   2   2   1   NA  2   2   NA  NA  NA  1   NA\nA3  A3  0   0   1   2   1   1   NA  2   2   2   1   NA  1   2   NA  NA  NA  1   NA\n</code></pre>\n\n<p>I hope someone can help me, thank you in advance!</p>\n"}, {"tags": ["mysql", "perl", "munin"], "comments": [{"owner": {"reputation": 239, "user_id": 5003115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d0856e4ebec0e1dfd404b0a40201dc7?s=128&d=identicon&r=PG&f=1", "display_name": "rexkogitans", "link": "https://stackoverflow.com/users/5003115/rexkogitans"}, "reply_to_user": {"reputation": 1425, "user_id": 6304349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c4a1ce11469805ba79d576fa2f013c?s=128&d=identicon&r=PG", "display_name": "dorukayhan", "link": "https://stackoverflow.com/users/6304349/dorukayhan"}, "edited": false, "score": 0, "creation_date": 1472925350, "post_id": 39047680, "comment_id": 65952301, "body": "@dorukayhan this script is perl, not php."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 5003115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d0856e4ebec0e1dfd404b0a40201dc7?s=128&d=identicon&r=PG&f=1", "display_name": "rexkogitans", "link": "https://stackoverflow.com/users/5003115/rexkogitans"}, "edited": false, "score": 0, "creation_date": 1471525279, "post_id": 39047681, "comment_id": 65445202, "body": "Thank you for the hint; yes, the original plugin code misses this point, but I have already added it. No success."}, {"owner": {"reputation": 115, "user_id": 4684895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af764dcd60caddb44e40e5aeb6a2c852?s=128&d=identicon&r=PG&f=1", "display_name": "Ctrl-alt-dlt", "link": "https://stackoverflow.com/users/4684895/ctrl-alt-dlt"}, "edited": false, "score": 0, "creation_date": 1471535973, "post_id": 39047681, "comment_id": 65445203, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post. - <a href=\"/review/low-quality-posts/566802\">From Review</a>"}], "tags": [], "owner": {"reputation": 2929, "user_id": 6481121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8w4Hk.png?s=128&g=1", "display_name": "Ipor Sircer", "link": "https://stackoverflow.com/users/6481121/ipor-sircer"}, "is_accepted": false, "score": 0, "last_activity_date": 1471525101, "creation_date": 1471525101, "answer_id": 39047681, "question_id": 39047680, "link": "https://stackoverflow.com/questions/39047680/why-does-perl-reuse-the-same-mysql-connection-in-this-munin-script/39047681#39047681", "title": "Why does Perl reuse the same MySQL connection in this Munin script?", "body": "<p>Use the manual:</p>\n\n<pre><code>$dsn-&gt;disconnect;\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1471640781, "question_id": 1114973}, "owner": {"reputation": 239, "user_id": 5003115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d0856e4ebec0e1dfd404b0a40201dc7?s=128&d=identicon&r=PG&f=1", "display_name": "rexkogitans", "link": "https://stackoverflow.com/users/5003115/rexkogitans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471641184, "creation_date": 1471524595, "last_edit_date": 1471641184, "question_id": 39047680, "link": "https://stackoverflow.com/questions/39047680/why-does-perl-reuse-the-same-mysql-connection-in-this-munin-script", "title": "Why does Perl reuse the same MySQL connection in this Munin script?", "body": "<p>I have modified the script <code>mysql_</code> from Munin, so that the function <code>do_connect</code> looks like this:</p>\n\n<pre><code>sub db_connect {\n    my $dsn =     \"$config{dsn};mysql_socket=$config{mysqlsocket};mysql_connect_timeout=5;\";\n\n    return DBI-&gt;connect($dsn, $config{user}, $config{password}, {\n        RaiseError       =&gt; 1,\n        PrintError       =&gt; 0,\n        FetchHashKeyName =&gt; 'NAME_lc',\n    });\n}\n</code></pre>\n\n<p>I have configured <code>plugins-conf</code> to set different values for the socket reflected in the environment variable <code>mysqlsocket</code>. So, each instance has its own value for <code>env.mysqlsocket</code>. When I run my instances with</p>\n\n<pre><code>$ for i in a b c; do munin-run mysql_${i}_innodb_rows; done\n</code></pre>\n\n<p>then the first one that connects (<code>a</code> in this order) opens a connection which is used by the subsequent ones, instead of their sockets. The connection strings are correct, they really change.</p>\n\n<p>The <code>DBI-&gt;connect</code> is not executed. I can prove this by setting the socket filenames to non-existent files; it reuses the same connection again.</p>\n\n<p>I wonder, since these are independent processes of a symlinked script.</p>\n\n<p>How can I force my Perl script to open a new connection anyway?</p>\n"}, {"tags": ["regex", "linux", "bash", "perl", "grep"], "comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 1, "creation_date": 1471524562, "post_id": 39018672, "comment_id": 65387687, "body": "because it returns everything that gets matched with the regex. You may want to use <code>\\K</code> or some look-ahead/behind."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1471524600, "post_id": 39018672, "comment_id": 65387704, "body": "You print Group 1 contents in the first case, and the whole match in the second. Try <code>grep -oP &quot;(\\d{5})(?=&#39;?:)&quot; courses.yaml</code>"}, {"owner": {"reputation": 102079, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 1, "creation_date": 1471524752, "post_id": 39018672, "comment_id": 65387806, "body": "<a href=\"http://unix.stackexchange.com/a/13472\">This answer</a> provides more detail about the use of lookahead/lookbehind assertions to make <code>-o</code> work the way you want it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1471526291, "post_id": 39018672, "comment_id": 65388917, "body": "Why not just stick with <code>perl</code>? Or better yet, use a <code>YAML</code> parser, and don&#39;t regex it in the first place?"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1471525764, "creation_date": 1471525764, "answer_id": 39019130, "question_id": 39018672, "link": "https://stackoverflow.com/questions/39018672/can-grep-print-just-the-matched-buffer/39019130#39019130", "title": "Can grep print just the matched buffer?", "body": "<p>You print Group 1 contents in the first case, and the whole match in the second. When using <code>grep</code> with <code>-oP</code>, you can only print the whole match, thus, use a <code>(?='?:)</code> lookahead that will only return a 5-digit chunk if there is a <code>:</code> after them preceded with an optional single quote:</p>\n\n<pre><code>echo \"'00000':  '01005':\" | grep -Po \"\\d{5}(?='?:)\"\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/I1ThGC\" rel=\"nofollow\">demo</a></p>\n\n<p>I think there is no point in using a lookbehind here since the <code>'</code> is optional in your pattern.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1471551460, "creation_date": 1471551460, "answer_id": 39026794, "question_id": 39018672, "link": "https://stackoverflow.com/questions/39018672/can-grep-print-just-the-matched-buffer/39026794#39026794", "title": "Can grep print just the matched buffer?", "body": "<p><code>-o</code> is outputs the match (<code>$&amp;</code>), not the first capture (<code>$1</code>).</p>\n\n<p>You can use <code>\\K</code>, look-behinds and/or look-aheads to control what's considered matched.</p>\n\n<p>In your case, you can use the following:</p>\n\n<pre><code>grep -oP \"'?\\K\\d{5}(?='?:)\" courses.yaml \n</code></pre>\n\n<p>But that simplifies to the following:</p>\n\n<pre><code>grep -oP \"\\d{5}(?='?:)\" courses.yaml \n</code></pre>\n\n<p>Using a proper YAML parser would make far more sense, and it would still be quite short.</p>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 39019130, "answer_count": 2, "score": 3, "last_activity_date": 1471551460, "creation_date": 1471524471, "question_id": 39018672, "link": "https://stackoverflow.com/questions/39018672/can-grep-print-just-the-matched-buffer", "title": "Can grep print just the matched buffer?", "body": "<p>If I do</p>\n\n<pre><code># perl -lne \"print \\$1 if /'?(\\d{5})'?:/\" courses.yaml\n00000\n01005\n</code></pre>\n\n<p>then I get the result I want, but now I want to do it with <code>grep</code> instead.</p>\n\n<p>Why doesn't the following get me the same output?</p>\n\n<pre><code># grep -oP \"\\'?(\\d{5})\\'?:\" courses.yaml \n'00000':\n'01005':\n</code></pre>\n"}, {"tags": ["xml", "perl", "xslt", "xsd"], "comments": [{"owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1471523108, "post_id": 39017729, "comment_id": 65386642, "body": "I am getting the same results with libxslt and Saxon. That is putting aside what your expression means. -- P.S. Is there a schema involved in this?"}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1471524319, "post_id": 39017729, "comment_id": 65387510, "body": "@michael.hor257k.. .there is a schema file which defines <code>dothis</code> as <code>xsd:boolean</code>. Or you meant something else?"}, {"owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 1, "creation_date": 1471525769, "post_id": 39017729, "comment_id": 65388535, "body": "Yes, that&#39;s exactly what I meant. If you&#39;re using a schema-aware processor, then <code>@dothis</code> will be a boolean and its value will be its content. The libxslt processor is <b>not</b> schema-aware, and <code>@dothis</code> will be a node-set. And a node-set is true if it&#39;s not empty, no matter what its string-value is."}], "answers": [{"tags": [], "owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "is_accepted": true, "score": 2, "last_activity_date": 1471534413, "last_edit_date": 1471534413, "creation_date": 1471533970, "answer_id": 39022047, "question_id": 39017729, "link": "https://stackoverflow.com/questions/39017729/xsdboolean-in-xslt-1-0-vs-xslt-2-0/39022047#39022047", "title": "xsd:boolean in XSLT 1.0 vs XSLT 2.0", "body": "<p><strong>Case 1</strong></p>\n\n<pre><code>&lt;xsl:if test=\"not(@dothis) or @dothis=true()\"&gt;\n</code></pre>\n\n<p>Whether you are using XSLT 1.0 or 2.0, schema-aware or non-schema-aware, not(@dothis) returns true if and only if the attribute is absent. (In 2.0 terminology, not() uses the effective boolean value of its argument, and the effective boolean value of @dothis is true if the attribute exists, false if it is absent.)</p>\n\n<p>By constrast, the value of @dothis=true() depends on the circumstances.</p>\n\n<p>In XPath 1.0 you are comparing a node-set to a boolean, and the comparison is done by converting the node-set to a boolean - true if the attribute exists, false if not.</p>\n\n<p>In XPath 2.0 in backwards compatibility mode (i.e. if the stylesheet specifies <code>version='1.0'</code>) then it behaves like XPath 1.0.</p>\n\n<p>In XPath 2.0 without BCM, with an untyped source document, the node-set @dothis is atomized. If the attribute is absent this produces an empty sequence and the comparison is false. If the attribute is present then the untypedAtomic value \"true\" or \"false\" is cast to the type of the other operand (xs:boolean), producing the value true() or false() respectively, so the expression returns true if the attribute is present with the value \"true\", and false if it is present with the value \"false\" or absent. (If it has any other value, e.g. \"yes\", you get an error).</p>\n\n<p>In schema-aware XPath 2.0 without BCM, with a schema-validated source document, atomizing the attribute value produces either true() or false() or an empty sequence. This is compared with the boolean true(), and the effective result is the same as in the untyped case.</p>\n\n<p><strong>Case 2</strong></p>\n\n<pre><code>&lt;xsl:if test=\"not(@dothis) or (@dothis = 'true')\"&gt;\n</code></pre>\n\n<p>The condition <code>@dothis = 'true'</code> is evaluated as follows:</p>\n\n<p>In XPath 1.0 you are comparing a node-set to a string, and the comparison is done by converting the node-set to a string - true if the attribute exists and has the value \"true\", false otherwise.</p>\n\n<p>In XPath 2.0 in backwards compatibility mode (i.e. if the stylesheet specifies <code>version='1.0'</code>) then it behaves like XPath 1.0.</p>\n\n<p>In XPath 2.0 without BCM, with an untyped source document, the node-set @dothis is atomized. If the attribute is absent this produces an empty sequence and the comparison is false. If the attribute is present then the untypedAtomic value \"true\" or \"false\" is cast to the type of the other operand (xs:string), producing the value \"true\" or \"false\" respectively, so the expression returns true if the attribute is present with the value \"true\", and false otherwise. (There is no error case).</p>\n\n<p>In schema-aware XPath 2.0 without BCM, with a schema-validated source document, atomizing the attribute value produces either true() or false() or an empty sequence. If it's the empty sequence, the result is false. Otherwise, the boolean is compared with the string \"true\", and comparison of a boolean to a string always produces a type error.</p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 39022047, "answer_count": 1, "score": 1, "last_activity_date": 1471534413, "creation_date": 1471521741, "last_edit_date": 1495540849, "question_id": 39017729, "link": "https://stackoverflow.com/questions/39017729/xsdboolean-in-xslt-1-0-vs-xslt-2-0", "title": "xsd:boolean in XSLT 1.0 vs XSLT 2.0", "body": "<p>Based on first few lines of <a href=\"https://stackoverflow.com/a/38856047/1410711\">this</a> answer, I infer that </p>\n\n<p><code>&lt;xsl:if test=\"not(@dothis) or @dothis=true()\"&gt;</code></p>\n\n<p>attribute <code>dothis</code> will be treated as node-set and not boolean value. Also, this value will always be true unless its not defined. However, I have observed that in XLST 2.0 transformation (using SAXON engine in JAVA), above condition gets satisfied and nodes such as following </p>\n\n<p><code>&lt;entry node=\"node1\" dothis=\"false\"&gt;Dr.Manhattan in rebirth!&lt;/entry&gt;</code></p>\n\n<p>are skipped appropriately.</p>\n\n<p>However when I use XSLT 1.0 (using libxslt engine in Perl), I have to modify the condition as</p>\n\n<p><code>&lt;xsl:if test=\"not(@dothis) or (@dothis = 'true')\"&gt;</code></p>\n\n<p>and only then does the nodes like <code>node1</code> are skipped.</p>\n\n<p>Why can't the Perl XSLT 1.0 engine understands <code>true()</code> correctly and needs the value as <code>'true'</code> explicitly?</p>\n"}, {"tags": ["macos", "perl", "soap"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471520099, "post_id": 39017135, "comment_id": 65384616, "body": "Please <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> your question to include the code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471520237, "post_id": 39017135, "comment_id": 65384691, "body": "Please <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> your question. You can click this <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> link that I conveniently placed in my comment. Comments with code are hard to read, and because I don&#39;t know where the linebreaks are I cannot do that for you. So here is the <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> link again. Please click that <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> link it and <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> your question to make the <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a>ing <a href=\"https://stackoverflow.com/posts/39017135/edit\">edit</a> yourself. :)"}, {"owner": {"reputation": 29, "user_id": 5695154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7cc07415d015a4651c42e843619f5a?s=128&d=identicon&r=PG&f=1", "display_name": "chemlali", "link": "https://stackoverflow.com/users/5695154/chemlali"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471521046, "post_id": 39017135, "comment_id": 65385193, "body": "&#39;m writing this file perl to test it with my webservice ."}, {"owner": {"reputation": 29, "user_id": 5695154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7cc07415d015a4651c42e843619f5a?s=128&d=identicon&r=PG&f=1", "display_name": "chemlali", "link": "https://stackoverflow.com/users/5695154/chemlali"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471521051, "post_id": 39017135, "comment_id": 65385199, "body": "#!/usr/bin/perl - w use SOAP ::Lite; my $url = &#39;<a href=\"http://localhost:8883/hello?wsdl\" rel=\"nofollow noreferrer\">localhost:8883/hello?wsdl</a>&#39;; my $service = SOAP::Lite-&gt;service($url); print &quot;\\nResultat : &quot;, $service-&gt;ditBonjour(&#39;Objis&#39;);"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1471522129, "post_id": 39017135, "comment_id": 65385982, "body": "Please <b><i>edit</i></b> your question and <b><i>copy and paste</i></b> your code into it. You have been asked several times already; what is your problem with revealing what you have written?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5695154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7cc07415d015a4651c42e843619f5a?s=128&d=identicon&r=PG&f=1", "display_name": "chemlali", "link": "https://stackoverflow.com/users/5695154/chemlali"}, "edited": false, "score": 0, "creation_date": 1471521199, "post_id": 39017371, "comment_id": 65385290, "body": "when i write : use SOAP::Lite;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 29, "user_id": 5695154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7cc07415d015a4651c42e843619f5a?s=128&d=identicon&r=PG&f=1", "display_name": "chemlali", "link": "https://stackoverflow.com/users/5695154/chemlali"}, "edited": false, "score": 0, "creation_date": 1471521217, "post_id": 39017371, "comment_id": 65385300, "body": "You should fix the error in the script, not in the command line."}, {"owner": {"reputation": 29, "user_id": 5695154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7cc07415d015a4651c42e843619f5a?s=128&d=identicon&r=PG&f=1", "display_name": "chemlali", "link": "https://stackoverflow.com/users/5695154/chemlali"}, "edited": false, "score": 0, "creation_date": 1471521401, "post_id": 39017371, "comment_id": 65385437, "body": "<a href=\"http://objis.com/formation-java/tutoriel-web-services-clients-perl-ruby-java.html\" rel=\"nofollow noreferrer\">objis.com/formation-java/&hellip;</a>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1471520687, "creation_date": 1471520687, "answer_id": 39017371, "question_id": 39017135, "link": "https://stackoverflow.com/questions/39017135/i-cant-locate-soap-pm-in-inc/39017371#39017371", "title": "I Can&#39;t locate SOAP.pm in @INC", "body": "<p>There should be no space between <code>SOAP</code> and <code>::Lite</code>.</p>\n\n<pre><code>use SOAP::Lite;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5695154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7cc07415d015a4651c42e843619f5a?s=128&d=identicon&r=PG&f=1", "display_name": "chemlali", "link": "https://stackoverflow.com/users/5695154/chemlali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1471550068, "creation_date": 1471519968, "last_edit_date": 1471550068, "question_id": 39017135, "link": "https://stackoverflow.com/questions/39017135/i-cant-locate-soap-pm-in-inc", "title": "I Can&#39;t locate SOAP.pm in @INC", "body": "<p>I'm writing this perl file to test it with my web service. Run this code through the command: <code>perl clientWSperl.pl</code></p>\n\n<p>But it appears to me:</p>\n\n<pre><code>Can not locate SOAP.pm in @INC ( May you need to install the SOAP module) ( @INC contains: /Library/Perl/5.18/darwin-th. BEGIN failed - compilation aborted at clientWSperl.pl line 2\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471519370, "post_id": 39016842, "comment_id": 65384128, "body": "What are you going to do with this later on? Please <code>use strict</code> and fix your resulting errors."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1471519372, "post_id": 39016842, "comment_id": 65384130, "body": "Exactly what <i>do</i> you want to store for multiple records with the same ID? The first record? The last one? All of them in an array?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471519415, "post_id": 39016842, "comment_id": 65384166, "body": "And what does the expected output overall look like?"}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1471519775, "post_id": 39016842, "comment_id": 65384408, "body": "In the previous question you asked you had quite the answer for that. all you have to do is alter it a bit, but the structure of the code is approximately the same @Goku."}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1471519947, "post_id": 39016842, "comment_id": 65384521, "body": "@simbabque : Edited my question for the final output."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1471525982, "post_id": 39016842, "comment_id": 65388703, "body": "Why do you set <code>$&#47;</code> to a value that doesn&#39;t appear in your data set?"}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1471584958, "post_id": 39017434, "comment_id": 65413419, "body": "Thanks much for an alternate solution :)"}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 1, "last_activity_date": 1471520869, "creation_date": 1471520869, "answer_id": 39017434, "question_id": 39016842, "link": "https://stackoverflow.com/questions/39016842/perl-process-and-store-unique-values-in-array/39017434#39017434", "title": "Perl process and store unique values in array", "body": "<p>This doesn't handle the final output, but this may be a simplified approach to storing lists of lists for each hash element (ticket id), along with some sample output at the end.  It's not formatted the way you want, but that should be easy enough:</p>\n\n<pre><code>use strict;\n\nmy (%jira, @values, $ticket_id);\n\nopen my $IN, '&lt;', 'jira.txt' or die;\nwhile (&lt;$IN&gt;) {\n  chomp;\n  my ($key, $val) = split /:\\s*/;\n\n  if ($key eq 'JIRA') {\n    if (@values) {\n      push @{$jira{$ticket_id}}, [ @values ];\n      @values = ();\n    }\n    $ticket_id = $val;\n\n  } elsif ($key eq 'Program') {\n    $values[0] = $val;\n  } elsif ($key eq 'Reviewer') {\n    $values[1] = $val;\n  } elsif ($key eq 'Description') {\n    $values[2] = $val;\n  } elsif ($key eq 'rev') {\n    $values[3] = $val;\n  }\n}\nclose $IN;\n\npush @{$jira{$ticket_id}}, [ @values ];\n\nwhile (my ($ticket, $ref) = each %jira) {\n  print \"$ticket =&gt;\\n\";\n  foreach my $line_ref (@$ref) {\n    print join \"\\t\", @$line_ref, \"\\n\";\n  }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>COM-1234 =&gt;\nDevelopment     John Wick       Genral fix      r345676\nDevelopment     None    Updating Received       r909276\nCOM-6789 =&gt;\nTesting Balise Mat      Audited r876391\nTesting Chan Joe        SO hwat         r698392\nTesting Chan Joe        Paid the Due    r327896\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1471584884, "post_id": 39017676, "comment_id": 65413402, "body": "@IImari Karonen : Really appreciate your inputs.Thanks for your time."}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1471522426, "last_edit_date": 1471522426, "creation_date": 1471521564, "answer_id": 39017676, "question_id": 39016842, "link": "https://stackoverflow.com/questions/39016842/perl-process-and-store-unique-values-in-array/39017676#39017676", "title": "Perl process and store unique values in array", "body": "<p>Since your data is nicely structured into one line per data item, and since Perlby default processes input line by line, I suggest doing that instead of messing with <code>$/</code> or regexps to split the input records. This does require you to remember the JIRA issue ID from the first line of each record, but that's simple &mdash; just store it in a variable declared outside the loop, like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\n\nmy %records;\nmy $jiraID;\nwhile (&lt;&gt;) {\n    chomp;\n    if (/^JIRA: (.*)/ and not defined $jiraID) {\n        $jiraID = $1;\n        $records{$jiraID} = {};  # wipe out any old data for this ID\n    } elsif (/^(Program|Reviewer|Description|rev):(.*)/ and defined $jiraID) {\n        $records{$jiraID}{$1} = $2;\n    } elsif (/^-{20,}$/) {\n        undef $jiraID;  # end of record\n    } else {\n        die qq(Unexpected input line \"$_\");\n    }\n}\n\nprint Dumper(\\%records);\n</code></pre>\n\n<p>The code above reads its input from any file(s) provided as command line arguments, or from standard input if there aren't any, using the <code>&lt;&gt;</code> default input operator. If you <em>want</em> to read from a specific file handle that you've opened yourself, you can of course provide one.</p>\n\n<p>Note that the code above stores only the last record for each ID. If you want to store all of them in an array, replace the line:</p>\n\n<pre><code>        $records{$jiraID} = {};  # wipe out any old data for this ID\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>        push @{$records{$jiraID}}, {};  # start new record for this ID\n</code></pre>\n\n<p>and change the line:</p>\n\n<pre><code>        $records{$jiraID}{$1} = $2;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>        $records{$jiraID}[-1]{$1} = $2;\n</code></pre>\n\n<p>Ps. The regexps in the code above are based on your sample data. If your real data has other types of lines in it (or variations e.g. in the amount of whitespace), you'll need to adjust them to match those lines too. I coded the script to <code>die</code> if it sees anything unexpected, so it's easy to tell if that happens.</p>\n\n<hr>\n\n<p><strong>Update:</strong> Based on the sample output you posted while I was writing this answer, it looks like you want to group the data by both the <code>JIRA</code> and the <code>Program</code> lines. That's easy enough to do as well, e.g. like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\n\nmy %records;\nmy $jiraID, $progID;\nwhile (&lt;&gt;) {\n    chomp;\n    if (/^JIRA:\\s*(.*)/ and not defined $jiraID) {\n        $jiraID = $1;\n    } elsif (/^Program:\\s*(.*)/ and defined $jiraID and not defined $progID) {\n        $progID = $1;\n        push @{$records{$jiraID}{$progID}}, {};  # start new record for these IDs\n    } elsif (/^(Reviewer|Description|rev):(.*)/ and defined $progID) {\n        $records{$jiraID}{$progID}[-1]{$1} = $2;\n    } elsif (/^-{20,}$/) {\n        undef $jiraID, $progID;  # end of record\n    } else {\n        die qq(Unexpected input line \"$_\");\n    }\n}\n\nprint Dumper(\\%records);\n</code></pre>\n\n<p>Note that I grouped the output data structure first by the JIRA ID and then by the program, but of course those would be easy to swap (or even combine into a single hash key, if you prefer).</p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1471523728, "post_id": 39018130, "comment_id": 65387130, "body": "I have seen you using <code>use 5.010;</code> instead of <code>use 5.24</code> in most of your posts, why do you use this?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1471524021, "post_id": 39018130, "comment_id": 65387312, "body": "I consider 5.10 to be the minimum version acceptable for modern Perl programming so I regularly use 5.10 features in my posts. If I have a need for more modern features then I&#39;ll require a higher version of Perl, but I try to keep to 5.10 in order to keep my answers accessible to a larger number of people."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1471524298, "post_id": 39018130, "comment_id": 65387493, "body": "Thank you for your sharing. Afterwards I&#39;ll also keep your hint"}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1471584491, "post_id": 39018130, "comment_id": 65413287, "body": "@DaveCross : Thanks a lot for your input , worked perfectly ."}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1472039524, "post_id": 39018130, "comment_id": 65590526, "body": "@DaveCross : I&#39;m now trying to get Hash of Hash of Arrays, like keep Development as my first hash and keep the JIRA ID as the 2nd hash and the associated values.Not getting the results. Could you pls. help me out here"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472042066, "post_id": 39018130, "comment_id": 65592371, "body": "If you have a new question, then please ask a new question."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472042451, "post_id": 39018130, "comment_id": 65592665, "body": "How about if you just replace the <code>push</code> line with: <code>push @{$jira{$rec{Program}}{$rec{JIRA}}}, \\%rec;</code>"}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1472045580, "post_id": 39018130, "comment_id": 65595067, "body": "@DaveCross : Thanks again for your valuable time and input. My sincere apologies, will create a new post in future."}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1472048656, "post_id": 39018130, "comment_id": 65597498, "body": "@DaveCross  Thought the query was related to this post hence will ask on the same thread.If not please let me know will create a new question.  When I try to access the display of the data:  foreach (@{$jira{$j}}) {     say &quot;Program: $_-&gt;{Program}&quot;;     say &quot;Revision: $_-&gt;{rev}&quot;;     # etc...   }    I&#39;m facing the message  Not an ARRAY reference at log.pl line 55, &lt;&gt; line 8.    I tried to get a display of the data like aforementioned format(HTML) but failed to do so."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472048800, "post_id": 39018130, "comment_id": 65597601, "body": "You asked for a hash. Why are you reading it like an array? This really should be a new question."}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1472051154, "post_id": 39018130, "comment_id": 65599388, "body": "@DaveCross : Requested in a new question:  <a href=\"http://stackoverflow.com/questions/39126657/display-format-of-hash-in-perl\" title=\"display format of hash in perl\">stackoverflow.com/questions/39126657/&hellip;</a>  Thanks"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1471524298, "last_edit_date": 1471524298, "creation_date": 1471522978, "answer_id": 39018130, "question_id": 39016842, "link": "https://stackoverflow.com/questions/39016842/perl-process-and-store-unique-values-in-array/39018130#39018130", "title": "Perl process and store unique values in array", "body": "<p>It sounds like this data should be in a database.</p>\n\n<p>But it is relatively simple to parse it into a data structure. Here, I've gone for a hash where the key is the Jira identifier and the value is a reference to an array that contains hash references. Each of the referenced hashes contains the details from one of the records.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Data::Dumper;\n\nmy @records = do {\n  local $/ = '------------------------------------------';\n  &lt;&gt;;\n};\n\nchomp @records;\n\nmy %jira;\n\nforeach (@records) {\n  next unless /\\S/;\n\n  my %rec = /^(\\w+):\\s*(.+?)$/mg;\n  push @{$jira{$rec{JIRA}}}, \\%rec;\n}\n\nsay Dumper \\%jira;\n</code></pre>\n\n<p>When you run it on your given data, you get this output:</p>\n\n<pre><code>$VAR1 = {\n          'COM-6789' =&gt; [\n                          {\n                            'Program' =&gt; 'Testing',\n                            'JIRA' =&gt; 'COM-6789',\n                            'rev' =&gt; 'r876391',\n                            'Reviewer' =&gt; 'Balise Mat',\n                            'Description' =&gt; 'Audited'\n                          },\n                          {\n                            'Program' =&gt; 'Testing',\n                            'JIRA' =&gt; 'COM-6789',\n                            'rev' =&gt; 'r698392',\n                            'Reviewer' =&gt; 'Chan Joe',\n                            'Description' =&gt; 'SO hwat '\n                          },\n                          {\n                            'Program' =&gt; 'Testing',\n                            'JIRA' =&gt; 'COM-6789',\n                            'rev' =&gt; 'r327896',\n                            'Reviewer' =&gt; 'Chan Joe',\n                            'Description' =&gt; 'Paid the Due'\n                          }\n                        ],\n          'COM-1234' =&gt; [\n                          {\n                            'Program' =&gt; 'Development',\n                            'JIRA' =&gt; 'COM-1234',\n                            'rev' =&gt; 'r345676',\n                            'Reviewer' =&gt; 'John Wick ',\n                            'Description' =&gt; 'Genral fix'\n                          },\n                          {\n                            'Program' =&gt; 'Development',\n                            'JIRA' =&gt; 'COM-1234',\n                            'rev' =&gt; 'r909276',\n                            'Reviewer' =&gt; 'None',\n                            'Description' =&gt; 'Updating Received '\n                          }\n                        ]\n        };\n</code></pre>\n\n<p>From there, it's relatively simple to get a display of the data:</p>\n\n<pre><code>foreach my $j (keys %jira) {\n  say \"JIRA: $j\";\n  foreach (@{$jira{$j}}) {\n    say \"Program: $_-&gt;{Program}\";\n    say \"Revision: $_-&gt;{rev}\";\n    # etc...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 39018130, "answer_count": 3, "score": 0, "last_activity_date": 1471524298, "creation_date": 1471519098, "last_edit_date": 1471519910, "question_id": 39016842, "link": "https://stackoverflow.com/questions/39016842/perl-process-and-store-unique-values-in-array", "title": "Perl process and store unique values in array", "body": "<p>Below is the log file content and I'm reading the log file and grouping it based on the string - JIRA.</p>\n\n<pre><code>JIRA: COM-1234\nProgram:Development\nReviewer:John Wick \nDescription:Genral fix\nrev:r345676\n------------------------------------------\nJIRA:COM-1234\nProgram:Development\nReviewer:None\nDescription:Updating Received \nrev:r909276\n------------------------------------------\nJIRA: COM-6789\nProgram:Testing\nReviewer:Balise Mat\nDescription:Audited\nrev:r876391\n------------------------------------------\nJIRA: COM-6789\nProgram:Testing\nReviewer:Chan Joe\nDescription:SO hwat \nrev:r698392\n------------------------------------------\nJIRA: COM-6789\nProgram:Testing\nReviewer:Chan Joe\nDescription:Paid the Due\nrev:r327896\n------------------------------------------\n</code></pre>\n\n<p>My requirement is , iterate thru every unique JIRA value - COM-1234 , COM-6789, etc and store the following or immediate details in to individual array like</p>\n\n<p>(for COM-1234)</p>\n\n<pre><code>@prog = Development;\n@Reviewer = John Wick;\n@Description = Genral fix;\n@rev = r345676;\n</code></pre>\n\n<p>(for COM-6789)</p>\n\n<pre><code>@prog = Testing;\n@Reviewer = Balise Mat;\n@Description = Audited;\n@rev = r876391;\n</code></pre>\n\n<p>If the JIRA value is identical , say COM-1234 repeated 2 times and COM-6789 for 3 times , still push only the following or immediate details to the respective arrays. (i.e. values of the keys 'Program','Reviewer' ....)</p>\n\n<p>(COM-1234)</p>\n\n<pre><code>@prog = Development;\n@Reviewer = None;\n@Description = Updating Received ;\n@rev = r909276;\n</code></pre>\n\n<p>I'm very new to Perl and I can manage to reach only for the unique values and not sure how to push  the following values to individual arrays.\nAny inputs will be really helpful. Thanks.</p>\n\n<p>My incomplete code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse Data::Dumper;\n\n$/ = \"%%%%\";\nopen (AFILE, \"\"&lt;\", \"\"D:\\\\mine\\\\out.txt\");\n    while (&lt;AFILE&gt;)\n    {\n     @temp = split(/-{20,}/, $_);\n    }\nclose (AFILE);\n\nmy %jiraHash;\nfor ($i=0; $i&lt;=@temp; $i++) {\n      if (($temp[$i] =~ /(((JIRA|SVN)\\s{0,1}:(\\s{0,2}[A-Za-z0-9-\\s]{4,9}),\n          {0,1}\\s{0,2}){1,5})\\nProgram\\s{0,1}:\\s{0,2}Development/) || \n          ($temp[$i] =~ /(((JIRA|SVN):(\\s{0,2}[A-Za-z0-9-\\s]{4,9}),\n          {0,1}\\s{0,2}){1,5})\\nProgram\\:\\s{0,2}Testing/))    {\n\n            $jiraId = $2;\n            $jiraId =~ s/JIRA\\s*\\://;\n            $temp[$i] =~ s/\\w{3,}\\s?:\\s?//g;\n            #print \"==&gt;$jiraId\\n\";\n            $jiraHash{$jiraId}  = $temp[$i];\n\n        } else {\n            #print \"NOT\\n\";\n        }   \n}\nprint Dumper(%jiraHash);\n</code></pre>\n\n<p>I'm planning display as HTML report in below format</p>\n\n<pre><code>Program: Development\nFOR ID:  COM-1234\n\nRevision    Reviewer    Comment\nr345676     John Wick   Genral fix\n\nRevision    Reviewer    Comment\nr909276     None        Updating Received \n\nProgram: Testing\nFOR ID: COM-6789\n\nRevision    Reviewer    Comment\nr876391     Balise Mat  Audited\n\nRevision    Reviewer    Comment\nr698392     Chan Joe    SO hwat \n\nRevision    Reviewer    Comment\nr327896     Chan Joe    Paid the Due\n</code></pre>\n"}]