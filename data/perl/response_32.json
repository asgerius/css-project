[{"tags": ["regex", "perl", "text", "field"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1440023777, "post_id": 32106666, "comment_id": 52107984, "body": "<code>$line =~ m&#47;(\\S+)&#47;g</code> is commonly written <code>split &#39; &#39;, $line</code>, and the preceding <code>chomp</code> is unnecessary for either"}, {"owner": {"reputation": 41, "user_id": 3034187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2229450851817032b852d0c810196dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3034187", "link": "https://stackoverflow.com/users/3034187/user3034187"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1440023973, "post_id": 32106666, "comment_id": 52108042, "body": "Quite, I simply forgot to remove chomp - I use it in my actual code. I have tried a variety of split variants as well as regexes to split the lines, and they all throw up the same curious output. Awk handles it perfectly, though, so I don&#39;t think it&#39;s a matter of unrecognised whitespace characters"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1440024277, "post_id": 32106666, "comment_id": 52108136, "body": "Also, missing semicolon after the first line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1440025652, "post_id": 32106666, "comment_id": 52108494, "body": "@user3034187: The first parameter to <code>split</code> is ordinarily processed as a regex, but passing a <i>single literal space</i> is a special case that does the same thing as <code>&#47;\\S+&#47;g</code>, and is different from <code>split &#47; &#47;</code> which just splits on all occurrences of a space"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3034187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2229450851817032b852d0c810196dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3034187", "link": "https://stackoverflow.com/users/3034187/user3034187"}, "edited": false, "score": 0, "creation_date": 1440024343, "post_id": 32106811, "comment_id": 52108162, "body": "I appreciate the response (and it does sound like this should resolve my &#39;small arrays&#39; issue), but it&#39;s still not compiling on account of uninitialised values. Have you got any ideas for that?  Thanks all the same"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 41, "user_id": 3034187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2229450851817032b852d0c810196dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3034187", "link": "https://stackoverflow.com/users/3034187/user3034187"}, "edited": false, "score": 1, "creation_date": 1440024385, "post_id": 32106811, "comment_id": 52108169, "body": "Skip input lines with only whitespace?"}, {"owner": {"reputation": 41, "user_id": 3034187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2229450851817032b852d0c810196dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3034187", "link": "https://stackoverflow.com/users/3034187/user3034187"}, "edited": false, "score": 0, "creation_date": 1440024563, "post_id": 32106811, "comment_id": 52108228, "body": "There shouldn&#39;t be any, but I&#39;ll have a gander"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1440025302, "post_id": 32106811, "comment_id": 52108407, "body": "<code>@thisline[1 .. $#thisline]</code> is not an array, it&#39;s a slice. <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">Slices in scalar context return the last item of the slice.</a>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1440034887, "last_edit_date": 1440034887, "creation_date": 1440024128, "answer_id": 32106811, "question_id": 32106666, "link": "https://stackoverflow.com/questions/32106666/file-processing-perl-split-produces-very-small-arrays/32106811#32106811", "title": "File processing perl - split produces very small arrays", "body": "<pre><code>$resolvedreads{$thisline[0]} = @thisline[1 .. $#thisline];\n</code></pre>\n\n<p>assigns an array to a hash value in scalar context, which is actually the same as</p>\n\n<pre><code>$resolvedreads{$thisline[0]} = scalar @thisline[1 .. $#thisline];\n</code></pre>\n\n<p>or</p>\n\n<p><strike><code>$resolvedreads{$thisline[0]} = $#thisline;</code></strike></p>\n\n<pre><code>$resolvedreads{$thisline[0]} = $thisline[$#thisline];\n</code></pre>\n\n<p>From the rest of your post it looks like you wanted to assign an array reference to the hash value</p>\n\n<pre><code>$resolvedreads{$thisline[0]} = [ @thisline[1 .. $#thisline] ];\n</code></pre>\n\n<p>Equivalently, you could assign a list to a list in list context</p>\n\n<pre><code>@{$resolvedreads{$thisline[0]}} = @thisline[1 .. $#thisline];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 3034187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2229450851817032b852d0c810196dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3034187", "link": "https://stackoverflow.com/users/3034187/user3034187"}, "edited": false, "score": 0, "creation_date": 1440025187, "post_id": 32106882, "comment_id": 52108377, "body": "Well, now I just feel foolish. Many thanks, I&#39;m fairly sure that did it."}], "tags": [], "owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "is_accepted": true, "score": 1, "last_activity_date": 1440024591, "creation_date": 1440024591, "answer_id": 32106882, "question_id": 32106666, "link": "https://stackoverflow.com/questions/32106666/file-processing-perl-split-produces-very-small-arrays/32106882#32106882", "title": "File processing perl - split produces very small arrays", "body": "<p>So I see a couple of things. The scalar vs. list context in assigning the array, mentioned above. The other thing is that your slice [1...#@array] starts with \"1\", but index 1 doesn't exist for row A, thus your error message. Here is working code: </p>\n\n<pre><code>use Modern::Perl '2013';\nuse Data::Dumper;\n\nmy $text = 'A\nB 87368911\nC 165368993    165369000       165369007       165369014       165369021       165369028\nD 3299941\nE 3221521\nF 5909327\nG 14740025      14740019        14740031        14740037\nH 4446477      4640745';\n\nmy $fh;\nopen($fh, '&lt;', \\$text);\n\nmy %resolvedreads;\n\nwhile (my $line = &lt;$fh&gt;) {\n  chomp $line;\n  my @thisline = $line =~ m/(\\S+)/g;\n  my $index    = shift @thisline;\n  $resolvedreads{$index} = \\@thisline;\n\n}\n\nsay Dumper(\\%resolvedreads);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1440025314, "creation_date": 1440025314, "answer_id": 32107013, "question_id": 32106666, "link": "https://stackoverflow.com/questions/32106666/file-processing-perl-split-produces-very-small-arrays/32107013#32107013", "title": "File processing perl - split produces very small arrays", "body": "<p>The problem is that when a file record has only got one field, <code>$#thisline</code> is zero so <code>@thisline[1 .. $#thisline]</code> is <code>@thisline[1 .. 0]</code> which is an empty list. Assigning that to a scalar given you <code>undef</code></p>\n\n<p>Aside from that there is a problem with</p>\n\n<pre><code>$resolvedreads{$thisline[0]} = @thisline[1 .. $#thisline]\n</code></pre>\n\n<p>because you are assigning a list to a scalar, and you will generally get only the last element of the list which is <code>$thisline[-1]</code>. You should really be assigning an <em>array reference</em> at this point</p>\n\n<p>This is how I would code your problem</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %resolvedreads;\n\nwhile ( &lt;DATA&gt;) {\n    my ($key, @values) = split;\n    next unless defined $key;        # Skip blank records\n    $resolvedreads{$key} = \\@values;\n}\n\nuse Data::Dump;\ndd %resolvedreads;\n\n__DATA__\nA\nB 87368911\nC 165368993    165369000       165369007       165369014       165369021       165369028\nD 3299941\nE 3221521\nF 5909327\nG 14740025      14740019        14740031        14740037\nH 4446477      4640745\n</code></pre>\n\n<h2>output</h2>\n\n<pre><code>{\n  A =&gt; [],\n  B =&gt; [87368911],\n  C =&gt; [165368993, 165369000, 165369007, 165369014, 165369021, 165369028],\n  D =&gt; [3299941],\n  E =&gt; [3221521],\n  F =&gt; [5909327],\n  G =&gt; [14740025, 14740019, 14740031, 14740037],\n  H =&gt; [4446477, 4640745],\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3034187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2229450851817032b852d0c810196dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3034187", "link": "https://stackoverflow.com/users/3034187/user3034187"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 32106882, "answer_count": 3, "score": 1, "last_activity_date": 1440038086, "creation_date": 1440023193, "last_edit_date": 1440024840, "question_id": 32106666, "link": "https://stackoverflow.com/questions/32106666/file-processing-perl-split-produces-very-small-arrays", "title": "File processing perl - split produces very small arrays", "body": "<p>Good day. I have a large text file I want to process, organised like so:</p>\n\n<pre><code>A\nB 87368911\nC 165368993    165369000       165369007       165369014       165369021       165369028\nD 3299941\nE 3221521\nF 5909327\nG 14740025      14740019        14740031        14740037\nH 4446477      4640745\n</code></pre>\n\n<p>I want to split it up into a hash of arrays, with the first column as the key, with the values in an iterable array if there are any (in the case of A, there are none, as you may see). To this end, I have produced the following code (slightly amputated, I obviously open files and have surrounding code):</p>\n\n<pre><code>my %resolvedreads;\n\nwhile (my $line = &lt;IN&gt;) {\n    my @thisline = $line =~ m/(\\S+)/g;\n    $resolvedreads{$thisline[0]} = @thisline[1 .. $#thisline];\n    print join \"\\t\", @{$resolvedreads{$thisline[0]}}, \"\\n\";\n}\n</code></pre>\n\n<p>I didn't even really test this, because it seemed so trivial. Apparently I ought to have, because it's giving me this:</p>\n\n<pre><code>Use of uninitialized value $thisline[0] in hash element at resolved_reads_purifier.pl line X-1, &lt;IN&gt; line 1.\nUse of uninitialized value $thisline[0] in hash element at resolved_reads_purifier.pl line X, &lt;IN&gt; line 1.\nCan't use an undefined value as an ARRAY reference at resolved_reads_purifier.pl line X, &lt;IN&gt; line 1.\n</code></pre>\n\n<p>I find myself somewhat baffled by this. Further investigation revealed that the line is indeed split, but every array has a length of 1 or 2.</p>\n\n<p>So what gives? I feel like I've missed something fundamental here, and I'm at my wit's end. My previous code actually compiled despite being to my eyes almost entirely identical.</p>\n"}, {"tags": ["c", "perl", "variables"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1440020323, "post_id": 32105815, "comment_id": 52106751, "body": "<a href=\"http://p3rl.org/Inline::C\" rel=\"nofollow noreferrer\">Inline::C</a>?"}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440020569, "post_id": 32105815, "comment_id": 52106854, "body": "or change the permissions on <code>myCProg</code> so only folks with permission to execute it can."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440020619, "post_id": 32105815, "comment_id": 52106869, "body": "@thrig, You&#39;d have to make the Perl script an set-uid script for that to be useful."}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 1, "creation_date": 1440021030, "post_id": 32105815, "comment_id": 52107014, "body": "I completely fail to see what setuid on a perl script would have to do with controlling who has permissions to execute <code>myCProg</code>, e.g. <code>chmod go-rwx myCProg</code> to restrict execution (and thus viewing the output) to just the owner."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440050635, "post_id": 32105815, "comment_id": 52114791, "body": "@thrig 1. create user to own <code>myPerlProg</code> and <code>myCProg</code>.  2. <code>chmod 700 myCProg</code>.  3. make <code>myPerlProg</code> setuid so other users can execute <code>myPerlProg</code> and it can execute <code>myCProg</code> (but they can&#39;t execute <code>myCProg</code> directly)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440073445, "post_id": 32105815, "comment_id": 52128683, "body": "@thrig, If you do that, the user won&#39;t be able to execute it, but the OP wants the user to be able to execute it. He just doesn&#39;t want the user to see its output. So changing the permissions of the C program isn&#39;t enough. You additionally have to make the Perl script a set-uid script."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "edited": false, "score": 0, "creation_date": 1440074787, "post_id": 32105815, "comment_id": 52129643, "body": "If we&#39;re talking permissions, both the myCProg and perl script will be chmod 700 and owned/group root. The perl script will also have code in it that will not let it run unless it&#39;s run by root or sudo (double checks and if not then it will print to console that it must be run by root). I&#39;m wondering, is all this enough? Also I heard that anything printed to console is stored somewhere and can be recalled (like in a profile cache). I want the output of the C Program to not end up in one of these caches."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "edited": false, "score": 0, "creation_date": 1440076482, "post_id": 32105815, "comment_id": 52130884, "body": "Wait... I think I was wrong about caching output. I remembered that things you type in at the command line can be cached in the profile (so that you can use the up arrow to recall them) but not anything printed out to the screen by a program. I assume this is true?"}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440081839, "post_id": 32105815, "comment_id": 52134951, "body": "Nope, still not seeing where the setuid is coming from. Maybe the poster could clarify the requirements?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440116782, "post_id": 32105815, "comment_id": 52151963, "body": "@thrig, see my last two comments. I don&#39;t know how else to explain it."}], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440165866, "post_id": 32106136, "comment_id": 52174039, "body": "Besides wondering why setuid has been proposed as a solution to this problem (perhaps the poster could clarify what exactly &quot;anyone could also run&quot; means?), I could point out that suidperl support was eliminated from perl five years ago (<code>perldoc perl5120delta</code>). Thus, the above is certainly not a valid solution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440175146, "post_id": 32106136, "comment_id": 52180163, "body": "@thrig, Perhaps you should read your own reference, cause you are completely wrong. What was removed from 5.12 was an emulation of setuid scripts for systems that didn&#39;t support them. Setuid Perl scripts still work on systems that support setuid scripts."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1440073505, "last_edit_date": 1440073505, "creation_date": 1440020552, "answer_id": 32106136, "question_id": 32105815, "link": "https://stackoverflow.com/questions/32105815/how-do-i-securely-get-data-transferred-from-c-to-perl/32106136#32106136", "title": "How do I securely get data transferred from C to Perl?", "body": "<p>You could encrypt the communication. You could communicate via fd 3. You could create a socket and have the C program connect to that socket. But whatever you do can be done by anyone else too.</p>\n\n<p>The only solution that comes to mind involves file permissions: Remove the ability to access the C program, and make the Perl program a set-uid script whose owner has access to the C program. In detail,</p>\n\n<ol>\n<li>Create a user to own this application. Let's call it <code>myProg</code>.</li>\n<li><code>chown myProg myCProg myPerlProg</code></li>\n<li><code>chmod 700 myCProg</code></li>\n<li><code>chmod 4755 myPerlProg</code></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440073505, "creation_date": 1440019045, "last_edit_date": 1440020927, "question_id": 32105815, "link": "https://stackoverflow.com/questions/32105815/how-do-i-securely-get-data-transferred-from-c-to-perl", "title": "How do I securely get data transferred from C to Perl?", "body": "<p>Suppose I have a perl program such as:</p>\n\n<pre><code>my $c = \"MyDataToCProg\";\nopen my $h, '-|', 'myCProg', \"$c\";\nmy @result = &lt;$h&gt;;\nclose $h;\nprint \"Result: \" . $result[0] . \"\\n\";\n</code></pre>\n\n<p>Now, myCProg is a program compiled with gcc. The C program's output would be a printf statement which would end up in the perl program's $result[0] variable.</p>\n\n<p>Is there a better way to extract output out of a C program than through printing with printf? For example, anyone could also run 'myCProg' from the command line and also see output. I want the output to only be seen in the perl program an NOT viewable if someone ran the program at the command line.</p>\n\n<p>Anyone know how to do this?</p>\n\n<p>Sorry, I don't have a C Program handy, but anything that has a printf statement (even a simple Hello World) and takes an argument (maybe prints \"Hello [yourname]\" would work for this example.</p>\n"}, {"tags": ["perl", "oop", "destructor", "weak-references"], "comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440015113, "post_id": 32104720, "comment_id": 52104086, "body": "I don&#39;t exactly understand what you are trying to say? The code works I&#39;m just wondering why it claims that the parent no longer exists.  It shouldn&#39;t allow the parent object to be destroyed until all of the children are destroyed.  ACTUALLY the other 2 children should never be destroyed either since the parent contains strong references to both of them."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440015185, "post_id": 32104720, "comment_id": 52104141, "body": "You have a memory reference cycle causing a memory leak. But the leaked objects are still deallocated on program exit. But since they weren&#39;t properly freed, they may not be freed in the order you expect."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440015259, "post_id": 32104720, "comment_id": 52104184, "body": "@ikegami, are you saying that since the parent references the children and the 2 non weak children reference the parent that Perl doesn&#39;t know which one to destroy first at the end of the script so it just chooses one?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440015402, "post_id": 32104720, "comment_id": 52104256, "body": "I didn&#39;t study the code to determine what the leak is, but your objects are surviving past the end of the block in which your lexicals are declared because they are getting freed <i>during global destruction</i>, which happens after the file has finished executing."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440015524, "post_id": 32104720, "comment_id": 52104324, "body": "@ikegami, that makes sense.  This code appears to work without errors (and all 3 children are destroyed) if i weaken all 3 children like so: <code>map { weaken($_) } @{$parent-&gt;children()}</code>"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440015545, "post_id": 32104720, "comment_id": 52104332, "body": "This may be the answer I&#39;m looking for."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1440015582, "post_id": 32104720, "comment_id": 52104353, "body": "<code>weaken($_) for @{$parent-&gt;children()};</code>  would be more idiomatic. <code>map</code>&#39;s intended use is to translate one list into another."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440015737, "post_id": 32104720, "comment_id": 52104425, "body": "Ah you&#39;re right, I always forget I can just use a postfix for loop."}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440014899, "creation_date": 1440014899, "last_edit_date": 1592644375, "question_id": 32104720, "link": "https://stackoverflow.com/questions/32104720/object-with-a-strong-reference-to-it-is-being-destroyed-before-the-reference-goe", "title": "Object with a strong reference to it is being destroyed before the reference goes out of scope?", "body": "<p>I have the following Perl code:</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# Parent object\npackage Parent;\n{\n    use Moose;\n\n    has 'children' =&gt; (is =&gt; 'rw', isa =&gt; 'ArrayRef[Child]', default =&gt; sub { [] });\n}\n\n# Child object\npackage Child;\n{\n    use Moose;\n\n    has 'parent' =&gt; (is =&gt; 'ro', isa =&gt; 'Parent', required =&gt; 1);\n\n    # Child DEMOLISHER!!!! &gt;:)\n    sub DEMOLISH {\n        my ($self) = @_;\n\n        # Loop through the known children of the parent\n        for my $index (0 .. $#{$self-&gt;parent-&gt;children()}) {\n\n            # Remove the destroyed child\n            if ($self-&gt;parent-&gt;children-&gt;[$index] == $self) {\n                splice @{$self-&gt;parent-&gt;children()}, $index, 1;\n                return;\n            }\n        }\n    }\n}\n\npackage Test;\n{\n    use Scalar::Util qw(weaken);\n    use Data::Dumper;\n\n    # Create a parent object\n    my $parent = Parent-&gt;new();\n    {\n    \n        # Create children (with STRONG refs to the parent)\n        my $child  = Child-&gt;new('parent' =&gt; $parent);\n        my $child2 = Child-&gt;new('parent' =&gt; $parent);\n        my $child3 = Child-&gt;new('parent' =&gt; $parent);\n\n        # Add children to the parents list of children\n        push @{$parent-&gt;children()}, ($child, $child2, $child3);\n\n        # Weaken the last childref\n        weaken($parent-&gt;children-&gt;[-1]);\n\n        # Print the children\n        print Dumper($parent-&gt;children());\n    }\n\n    # The weakened child is out of scope and should be removed\n    print Dumper($parent-&gt;children());\n}\n</code></pre>\n<p>This code creates a parent object, then creates 3 child objects (each with a strong reference to the parent).  Then one child is weakened.  When the children go out of scope it is expected that the weakened child will be DESTROYED and removed from the parent's <code>children</code> array (wow that sounds brutal) while the other two children remain.</p>\n<p>However upon running this code I get the following output:</p>\n<p><a href=\"https://i.stack.imgur.com/Uco1W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uco1W.png\" alt=\"enter image description here\" /></a></p>\n<p>With these error messages:</p>\n<blockquote>\n<p><strong>Use of uninitialized value in numeric eq (==) at line 28 during global destruction.</strong></p>\n<p><strong>(in cleanup) Can't call method &quot;children&quot; on an undefined value at line 25 during global destruction.</strong></p>\n</blockquote>\n<p>Now to clarify this error . . .</p>\n<p>line 25 is this line: <code>for my $index (0 .. $#{$self-&gt;parent-&gt;children()}) {</code></p>\n<p>It is failing to call <code>$self-&gt;parent()</code>! (This can be tested by trying to print the value of <code>$self-&gt;parent()</code>)</p>\n<hr />\n<p>The error appears to indicate that the child is being destroyed AFTER the parent has already been destroyed, so the parent is now undefined.  <strong>BUT</strong> the child object being destroyed contains a <strong>STRONG</strong> reference to the parent and thus should not allow the parent object to be destroyed until AFTER the child is destroyed.</p>\n<p>How can this be?</p>\n"}, {"tags": ["perl", "solaris", "x11"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440014820, "post_id": 32104517, "comment_id": 52103911, "body": "What makes you think you need admin rights to install those?"}, {"owner": {"reputation": 1, "user_id": 5244919, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102769953562820/picture?type=large", "display_name": "rocketman521", "link": "https://stackoverflow.com/users/5244919/rocketman521"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440015251, "post_id": 32104517, "comment_id": 52104181, "body": "The system is on a company intranet and I don&#39;t have any ability to transfer files/code over to the system.  Its a silly policy especially since they&#39;ll let us write all the perl scripts we could want."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1440059065, "post_id": 32104517, "comment_id": 52119345, "body": "For GUIs you are probably out of luck.  Terminal windows in CDE would be <code>dtterm</code>, which do respond to escape sequences."}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1440104408, "last_edit_date": 1592644375, "creation_date": 1440104408, "answer_id": 32128306, "question_id": 32104517, "link": "https://stackoverflow.com/questions/32104517/how-to-move-gui-windows-in-cde-via-command-line-without-additional-software-i-e/32128306#32128306", "title": "How to move GUI windows in CDE via command line without additional software (i.e. no wmctrl,xdotool, etc)", "body": "<p>The manual page for <a href=\"http://www.x.org/archive/X11R7.5/doc/man/man1/xprop.1.html\" rel=\"nofollow noreferrer\"><code>xprop</code></a> indicates that it is capable of setting property values:</p>\n<blockquote>\n<p><strong>-set property-name</strong> <em>value</em></p>\n<p>Specifies the <em>name</em> of a property and a property <em>value</em>, to be set on the indicated window.</p>\n</blockquote>\n<p>No sample script was given to show the way OP is using <code>xprop</code> to retrieve values, but the output of <code>xprop</code> is easily parsed.  Here is an example:</p>\n<pre><code>WM_STATE(WM_STATE):\n            window state: Normal\n            icon window: 0x0\n_NET_WM_STATE(ATOM) = \n_NET_WM_ALLOWED_ACTIONS(ATOM) = _NET_WM_ACTION_MOVE, _NET_WM_ACTION_RESIZE, _NET_WM_ACTION_MINIMIZE, _NET_WM_ACTION_MAXIMIZE_HORZ, _NET_WM_ACTION_MAXIMIZE_VERT, _NET_WM_ACTION_FULLSCREEN, _NET_WM_ACTION_CLOSE\nWM_PROTOCOLS(ATOM): protocols  WM_DELETE_WINDOW\n_NET_WM_PID(CARDINAL) = 1942\nWM_CLIENT_LEADER(WINDOW): window id # 0x600023\nWM_LOCALE_NAME(STRING) = &quot;en_US.UTF-8&quot;\nWM_CLASS(STRING) = &quot;xterm-319&quot;, &quot;UXTerm&quot;\nWM_HINTS(WM_HINTS):\n            Client accepts input or input focus: True\n            Initial state is Normal State.\n            bitmap id # to use for icon: 0x600030\n            bitmap id # of mask for icon: 0x600032\nWM_NORMAL_HINTS(WM_SIZE_HINTS):\n            program specified size: 804 by 804\n            program specified minimum size: 16 by 51\n            program specified resize increment: 10 by 20\n            program specified base size: 6 by 31\n            window gravity: NorthWest\nWM_CLIENT_MACHINE(STRING) = &quot;michener.jexium-island.net&quot;\nWM_COMMAND(STRING) = { &quot;xterm-319&quot;, &quot;-class&quot;, &quot;UXTerm&quot;, &quot;-title&quot;, &quot;uxterm&quot;, &quot;-u8&quot; }\nWM_ICON_NAME(STRING) = &quot;[unnamed] - vile&quot;\nWM_NAME(STRING) = &quot;[unnamed] - vile&quot;\n</code></pre>\n<p>As for how to proceed: if I were developing a script like that, I would have a function to parse that output into name/value pairs, and have an option for updating one of the window properties\u2014referring to the source code of <a href=\"https://sites.google.com/site/tstyblo/wmctrl/\" rel=\"nofollow noreferrer\"><code>wmctrl</code></a> and <a href=\"http://cgit.freedesktop.org/xorg/app/xprop\" rel=\"nofollow noreferrer\"><code>xprop</code></a> to see how the properties should be formatted.  The documentation for <a href=\"https://tronche.com/gui/x/xlib/ICC/client-to-window-manager/wm-normal-hints.html\" rel=\"nofollow noreferrer\"><code>WM_SIZE_HINTS</code></a> is required to make sense of <em>that</em>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5244919, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102769953562820/picture?type=large", "display_name": "rocketman521", "link": "https://stackoverflow.com/users/5244919/rocketman521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1440148219, "creation_date": 1440014164, "last_edit_date": 1440148219, "question_id": 32104517, "link": "https://stackoverflow.com/questions/32104517/how-to-move-gui-windows-in-cde-via-command-line-without-additional-software-i-e", "title": "How to move GUI windows in CDE via command line without additional software (i.e. no wmctrl,xdotool, etc)", "body": "<p>I work on a system that is using Solaris/CDE and have to manipulate the location of many windows manually hundreds of times a day.  I'd like to automate this process via a shell or perl script. </p>\n\n<p>I've done tons of research so far and found that most people can use wmctrl or xdotool to solve this problem.  I have no admin rights in order to install these packages.  I also lack a java/c compiler. I do however have access to perl (of which I'm fairly fluent in) or can write command line scripts.   </p>\n\n<p>I don't need anything as fully featured as wmctrl or xdotool, I only need to move the windows.  I've been able to get the details of my GUIs via xprop but am unsure on where to go from here.   Thanks!</p>\n"}, {"tags": ["c#", "perl"], "comments": [{"owner": {"reputation": 1361, "user_id": 4983713, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1300402182/picture?type=large", "display_name": "DrewB", "link": "https://stackoverflow.com/users/4983713/drewb"}, "edited": false, "score": 0, "creation_date": 1440012149, "post_id": 32103766, "comment_id": 52102268, "body": "I know that the RSACryptoServiceProvider in C# emits bytes in reverse order from any other library.  It&#39;s possible the HMCASHA1 has does as well."}, {"owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "reply_to_user": {"reputation": 1361, "user_id": 4983713, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1300402182/picture?type=large", "display_name": "DrewB", "link": "https://stackoverflow.com/users/4983713/drewb"}, "edited": false, "score": 0, "creation_date": 1440012864, "post_id": 32103766, "comment_id": 52102744, "body": "that seems confusing. I&#39;ll post above (where the formatting will be better) what I tried to test this, which didn&#39;t seem to get me there, but again not sure if I&#39;m handling the bytes correctly."}, {"owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "reply_to_user": {"reputation": 1361, "user_id": 4983713, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1300402182/picture?type=large", "display_name": "DrewB", "link": "https://stackoverflow.com/users/4983713/drewb"}, "edited": false, "score": 0, "creation_date": 1440019525, "post_id": 32103766, "comment_id": 52106373, "body": "why is my question being down-voted? Is there something I need to include? Did I mis-state something? I am completely baffled."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1440031026, "post_id": 32103766, "comment_id": 52109802, "body": "@DevinCeartas I can&#39;t speak for the people who down-voted your question, but you might want to make the title more specific. Also, it might help to get to the point more quickly and be more obvious about what the question is. Finally, if you have any sample output to compare, that could also be helpful."}, {"owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "edited": false, "score": 0, "creation_date": 1440070087, "post_id": 32103766, "comment_id": 52126489, "body": "OK, thanks. I&#39;ve tried to make the title more descriptive and cut out most of my preamble. Unfortunately I have only real values (real passwords and salt) for the windows code, so I&#39;m not sure it would be wise to publish that output. It&#39;s base64 encoded SHA1 hashes, so it all looks a bit like wjA5+piE4zXBHlMReIBt3J4iLeo="}], "answers": [{"comments": [{"owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "edited": false, "score": 0, "creation_date": 1440283942, "post_id": 32160644, "comment_id": 52210693, "body": "Bingo. Thanks. encodings are frustrating for me; thanks for helping me learn."}], "tags": [], "owner": {"reputation": 5778, "user_id": 5236003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2KP9.jpg?s=128&g=1", "display_name": "Roman Pletnev", "link": "https://stackoverflow.com/users/5236003/roman-pletnev"}, "is_accepted": true, "score": 2, "last_activity_date": 1440276600, "creation_date": 1440276600, "answer_id": 32160644, "question_id": 32103766, "link": "https://stackoverflow.com/questions/32103766/trying-to-replicate-c-hashing-in-perl-on-linux/32160644#32160644", "title": "Trying to replicate C# hashing in Perl (on Linux)", "body": "<p>In the original C# code, in this line:</p>\n\n<pre><code>encodedPassword = Convert.ToBase64String(hash.ComputeHash(Encoding.Unicode.GetBytes(password)));\n</code></pre>\n\n<p>a call to <code>Encoding.Unicode.GetBytes</code> transforms the password to a byte array via a <code>UTF-16LE</code> encoder.</p>\n\n<p>You have to do the same transformation to get the same hash in Perl:</p>\n\n<pre><code>use Digest::SHA qw(hmac_sha1);\nuse MIME::Base64 qw(decode_base64 encode_base64);\nuse Encode qw(encode);\n\n$utf16LEPassword = encode(\"UTF-16LE\", $password);\nprint encode_base64(hmac_sha1($utf16LEPassword, decode_base64($salt)));\n</code></pre>\n"}], "owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 32160644, "answer_count": 1, "score": 1, "last_activity_date": 1440276600, "creation_date": 1440011522, "last_edit_date": 1440070004, "question_id": 32103766, "link": "https://stackoverflow.com/questions/32103766/trying-to-replicate-c-hashing-in-perl-on-linux", "title": "Trying to replicate C# hashing in Perl (on Linux)", "body": "<p>I'm not coming up with the same values (using a known password). </p>\n\n<p>I suspect it may be something having to do with encodings, but all the things I've tried haven't worked thus far:</p>\n\n<p>windows code (c#?):</p>\n\n<pre><code>private static string EncodePassword(string password, string salt)\n{\n    string encodedPassword = password;\n    HMACSHA1 hash = new HMACSHA1 { Key = Convert.FromBase64String(salt) };\n    encodedPassword = Convert.ToBase64String(hash.ComputeHash(Encoding.Unicode.GetBytes(password)));\n\n    return encodedPassword;\n}\n</code></pre>\n\n<p>perl code run on linux:</p>\n\n<pre><code>use Modern::Perl '2015';\nuse Digest::SHA qw(hmac_sha1 hmac_sha1_base64);\nuse MIME::Base64 qw(decode_base64 encode_base64);\nuse Unicode::String qw(utf16be utf16le);\n\nsay encode_base64(hmac_sha1($password, decode_base64($salt)));\n# (or, equivalently)\nsay hmac_sha1_base64($password, decode_base64($salt));\n\nmy $le16 = utf16le($password);\nmy $be16 = utf16be($password);\nsay \"ok, try utf-16 (le, then be)...\";\nsay encode_base64(hmac_sha1($le16, decode_base64($salt)));\nsay encode_base64(hmac_sha1($be16, decode_base64($salt)));\n\n# try reversing the hmac output?                                                                                                                                          \nmy $hmac_bytes = hmac_sha1($password, decode_base64($salt));\nmy $rev_bytes = reverse $hmac_bytes;\nsay encode_base64($rev_bytes);\n</code></pre>\n"}, {"tags": ["perl", "character-encoding"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1440006599, "post_id": 32102070, "comment_id": 52098970, "body": "And what happens if you do <code>$s = unac_string(&#39;utf-8&#39;, $my_string); print &quot;$s&quot;;</code> in your script? It maybe that you&#39;re trying to print the string before it&#39;s been converted perhaps."}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1440006999, "post_id": 32102070, "comment_id": 52099174, "body": "Sorry, forgot to mention that. Question is updated..."}], "answers": [{"comments": [{"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440007780, "post_id": 32102454, "comment_id": 52099604, "body": "So, is it safe / reliable to only use <code>encode_utf8</code> without specifying the encoding when opening the file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440008056, "post_id": 32102454, "comment_id": 52099762, "body": "@RTF: No. You have to specify the encoding of the source file"}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440008403, "post_id": 32102454, "comment_id": 52099993, "body": "Fair enough, I will then. It does work for me though, without specifying the encoding when opening the file."}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440009100, "post_id": 32102454, "comment_id": 52100417, "body": "When I specify the encoding <code>encoding(ISO-8859-1)</code>while opening the file, the word <code>CUIL</code> changes to <code>C&#195;&#186;il</code>. I still need the raw unconverted value in addition to the unnaccented version. Is there another charset that might work?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440009133, "post_id": 32102454, "comment_id": 52100440, "body": "@RTF, What encoding was used to create the file? Alternatively, provide the output of <code>perl -ne&#39;binmode STDIN; printf(&quot;%vX\\n&quot;, $_)&#39; &lt;my_file.dat</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 1, "creation_date": 1440009433, "post_id": 32102454, "comment_id": 52100643, "body": "@RTF: That&#39;s because the extended ASCII characters in ISO-8859-1 happen to have the same encodings as the Unicode character points from 0x80 to 0xFF. That doesn&#39;t apply to character sets like CP-1252 which is very slightly different, and your code should say what encoding it&#39;s expecting even if there are shortcuts for some encodings"}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440009786, "post_id": 32102454, "comment_id": 52100879, "body": "@ikegami here&#39;s a line from the file containing the string in question: <a href=\"http://pastebin.com/HWuK9Kih\" rel=\"nofollow noreferrer\">pastebin.com/HWuK9Kih</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440009963, "post_id": 32102454, "comment_id": 52100999, "body": "@RTF: That&#39;s ISO-8859-1 or something very similar. The sequence <code>43.DA.49.4C</code> is <code>C&#218;IL</code>. You&#39;ll have to show your code for us to be able to fix it. It translates to <code>BO~542664~PETER CADOGAN~19 C&#218;IL BEAG~TRAMORE~CO. WATERFORD~~~~1646579~27&#47;04&#47;2015~~P</code> is that correct?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440010465, "post_id": 32102454, "comment_id": 52101291, "body": "@RTF, That would be iso-8859-1, iso-8859-15 or cp1252. Both snippets in my answer work (now that I fixed them so they run at all)."}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440012097, "post_id": 32102454, "comment_id": 52102245, "body": "@Borodin see comment in Itegami&#39;s comment section about code snippet, also applies to your last code snippet"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1440012758, "post_id": 32102454, "comment_id": 52102681, "body": "You need to <code>binmode STDOUT, &#39;:encoding(CP-1252)&#39;;</code> at the top of your program if your terminal is expecting encoded characters. That may need to be <code>ISO-8859-1</code> instead, or even something else. Essentially your output encoding has to match what the terminal is expecting or it will display the wrong characters. My Windows terminal defaults to CP-850 so I wrote <code>binmode STDOUT, &#39;:encoding(CP-850)&#39;;</code> and my code worked fine with your real data. If you&#39;re not sure what it&#39;s expecting then just enter the command <code>chcp</code> and it will tell you. I&#39;ve changed my code to give you an example"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1440012723, "last_edit_date": 1440012723, "creation_date": 1440007024, "answer_id": 32102454, "question_id": 32102070, "link": "https://stackoverflow.com/questions/32102070/perl-textunaccent-invalid-or-incomplete-multibyte-or-wide-character/32102454#32102454", "title": "Perl Text::Unaccent: Invalid or incomplete multibyte or wide character", "body": "<p>You need to <code>use utf8</code> to say that the contents of the script are encoded using UTF-8. Then it will work fine with a hard-coded string</p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Encode 'encode_utf8';\nuse Text::Unaccent 'unac_string';\n\nbinmode STDOUT, ':encoding(CP-1252)';\n\nmy $s = 'C\u00daIL BEAG';\n\nmy $unaccented = unac_string('UTF-8', encode_utf8($s));\nsay $unaccented;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>CUIL BEAG\n</code></pre>\n\n<p>You don't show how you're fetching the string from the file, but it needs to be reencoded to Perl internal format correctly. You may find that adding</p>\n\n<pre><code>use open qw/ :std IN :encoding(ISO-8859-1) /;\n</code></pre>\n\n<p>at the head of your program will help, or you could specify the encoding when you open the file with</p>\n\n<pre><code>open my $fh, '&lt;:encoding(CP-1252)', 'myfile.txt' or die $!;\n</code></pre>\n\n<p>but I can't tell what encoding you should be using without seeing some data</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>It's very straightforward to read from a file once you know the encoding and I'm afraid I can't fathom what you may have done wrong</p>\n\n<p>This program will print the whole of a file encoded in ISO-8859-1 with the accents removed. You should compare it to your own code</p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Encode 'encode_utf8';\nuse Text::Unaccent 'unac_string';\n\nbinmode STDOUT, ':encoding(CP-1252)';\n\nopen my $fh, '&lt;:encoding(CP-1252)', 'myfile.txt' or die $!;\n\nwhile ( &lt;$fh&gt; ) {\n    my $unaccented = unac_string('UTF-8', encode_utf8($_));\n    print $unaccented;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1440010495, "post_id": 32102943, "comment_id": 52101307, "body": "The OP says <i>&quot;I still need the raw unconverted value in addition to the unnaccented version&quot;</i> so leaving the data encoded when it&#39;s read from the file isn&#39;t the right thing for him"}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440011906, "post_id": 32102943, "comment_id": 52102121, "body": "I&#39;ve tried using your last code snippet on the following input: <a href=\"http://filebin.ca/2Chzf0Csmcaz/accent.dat\" rel=\"nofollow noreferrer\">filebin.ca/2Chzf0Csmcaz/accent.dat</a> (it&#39;s just got the accented string in it and nothing else). It converts the accented character fine, but the accented character (printed out before conversion) is not recognized (it&#39;s a question mark)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440012892, "post_id": 32102943, "comment_id": 52102759, "body": "You never encoded your output. What does your terminal expect? I&#39;ve updated my answer assuming your terminal expects UTF-8."}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440013221, "post_id": 32102943, "comment_id": 52102944, "body": "I&#39;m sorry, I should have mentioned earlier that the unusual characters I&#39;ve been getting for the raw input <code>C&#195;&#186;il</code> are what shows up in a MySQL database after putting it there. If I don&#39;t initially open the file with any encoding specified, the raw value put into the database shows up fine as<code>CUIL</code>. So, I&#39;m not really bothered about the terminal not displaying the raw string correctly. The DB table that I&#39;m using has <code>latin1</code> as the char encoding."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440013562, "post_id": 32102943, "comment_id": 52103170, "body": "How do you view the data in the database?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440013615, "post_id": 32102943, "comment_id": 52103205, "body": "Do you have phpMyAdmin? I trust it to accurately display what&#39;s in the DB."}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440013732, "post_id": 32102943, "comment_id": 52103294, "body": "I don&#39;t. If I don&#39;t specify any character encoding when opening the file, everything looks fine. Is that not recommended?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1440013811, "post_id": 32102943, "comment_id": 52103357, "body": "Your logic shouldn&#39;t deal with encoded text. Decode inputs; encode outputs. Do you use <code>mysql_enable_utf8 =&gt; 1</code>?"}, {"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1440013945, "post_id": 32102943, "comment_id": 52103423, "body": "No, I&#39;m not using that option at all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440014612, "post_id": 32102943, "comment_id": 52103801, "body": "Add it to <code>connect</code>&#39;s attributes."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1440012868, "last_edit_date": 1440012868, "creation_date": 1440008734, "answer_id": 32102943, "question_id": 32102070, "link": "https://stackoverflow.com/questions/32102070/perl-textunaccent-invalid-or-incomplete-multibyte-or-wide-character/32102943#32102943", "title": "Perl Text::Unaccent: Invalid or incomplete multibyte or wide character", "body": "<pre><code>use utf8;                              # Source code is encoded using UTF-8.\nuse open ':std', ':encoding(UTF-8)';   # Terminal uses UTF-8.\n\nuse Encode         qw( encode_utf8 );\nuse Text::Unaccent qw( unac_string );\n\nopen(my $fh, '&lt;:encoding(cp1252)', $qfn)\n   or die(\"Can't open file \\\"$qfn\\\": $!\\n\");\n\nwhile (my $uni = &lt;$fh&gt;) {\n   my $unaccented = unac_string('UTF-8', encode_utf8($uni));\n   print(\"$uni =&gt; $unaccented\\n\");\n}\n</code></pre>\n\n<ul>\n<li><p>Well, your file is actually entirely ASCII, so the <code>use utf8;</code> doesn't actually do anything.</p></li>\n<li><p>The second line tells Perl to decode/encode IO sent to/from STDIN/STDOUT/STDERR/files using UTF-8, since this is what your terminal expects.</p></li>\n<li><p>Your particular file, however, is encoded using Windows-1252 aka cp1252, so we'll override the earlier pragma by using an <code>:encoding</code> layer.</p></li>\n<li><p><code>unac_string</code> expects encoded strings, so we'll reencode it using UTF-8.</p></li>\n</ul>\n"}], "owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 0, "accepted_answer_id": 32102943, "answer_count": 2, "score": 1, "last_activity_date": 1440012868, "creation_date": 1440005677, "last_edit_date": 1440012347, "question_id": 32102070, "link": "https://stackoverflow.com/questions/32102070/perl-textunaccent-invalid-or-incomplete-multibyte-or-wide-character", "title": "Perl Text::Unaccent: Invalid or incomplete multibyte or wide character", "body": "<p>I'm getting the error <code>Invalid or incomplete multibyte or wide character</code> when I try to convert a string with some diacritical marks to it's unaccented counterpart using Perl's <code>Text::Unaccent</code> module. The string is taken from a file that I'm processing. The string is <code>C\u00daIL BEAG</code>, which I'm trying to convert into <code>CUIL BEAG</code>.</p>\n\n<pre><code>use Text::Unaccent;\n...\nprint unac_string('utf-8', $my_string)\n</code></pre>\n\n<p>The <code>chardet</code> utility told me:</p>\n\n<pre><code>my_file.dat: windows-1252 (confidence: 0.50)\n</code></pre>\n\n<p>...so I tried that charset as well as <code>utf-16</code>, <code>unicode</code>, <code>ISO_8859-2</code> ...\nHowever, if I run it on the command line, like:</p>\n\n<pre><code>perl -e ' use strict; use warnings; use Text::Unaccent; my $s = \"C\u00daIL BEAG\"; $s = unac_string(\"utf-8\",$s); print \"$s\\n\"; '\n</code></pre>\n\n<p>...it works fine, and converts the letter properly to a plain old 'U'.</p>\n\n<p>If I hardcode the string <code>C\u00daIL BEAG</code> into my script, I get the same error and no conversion.  </p>\n\n<p>When I print the string before attempting to convert it, I get <code>C\ufffdIL BEAG</code>.<br>\nThe string is undefined after the conversion attempt.</p>\n\n<hr>\n\n<p>I've tried running:</p>\n\n<pre><code>#!/usr/bin/perl\nuse utf8;\nuse strict;\nuse warnings;\n\nuse Encode qw/ encode_utf8 /;\nuse Text::Unaccent 'unac_string';\n\nopen my $fh, '&lt;:encoding(cp1252)', $ARGV[0] or die \"Unable to open file: \" . $!; # also tried '&lt;:encoding(ISO-8859-1)'\n\nwhile ( &lt;$fh&gt; ) {\n    print $_;\n    my $unaccented = unac_string('UTF-8', encode_utf8($_));\n    print $unaccented . \"\\n\";\n}\n</code></pre>\n\n<p>Supplied file path is to my dat file with just one line in it, containing the string <code>C\u00daIL BEAG</code>. Output is:</p>\n\n<pre><code>C\ufffdIL BEAG\nCUIL BEAG\n</code></pre>\n"}, {"tags": ["mysql", "sql", "perl", "sql-insert", "dbi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1440005354, "post_id": 32101823, "comment_id": 52098282, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/8421711/perl-dbi-insert-multiple-rows-using-mysql-native-multiple-insert-ability\">Perl DBI insert multiple rows using mysql native multiple insert ability</a>"}, {"owner": {"reputation": 1896, "user_id": 3339122, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/207a1240480a5176fa783cb60efbb57d?s=128&d=identicon&r=PG&f=1", "display_name": "Lain", "link": "https://stackoverflow.com/users/3339122/lain"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1440005473, "post_id": 32101823, "comment_id": 52098367, "body": "@ThisSuitIsBlackNot That was the only one I found on it, and the guy suggests doing it one at a time, and most other comments agree, which is NOT what I want. He says he would not use that method to do multiple insert statements, most answers say to do one at a time. I was wondering if there was an answer that was not that"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1440005624, "post_id": 32101823, "comment_id": 52098453, "body": "Read the first approach in the accepted answer, beginning with &quot;You can insert <code>(?, ?, ?)</code> a number of times based on the size of the array.&quot; That shows how to generate a single insert statement for multiple rows."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1440006003, "post_id": 32101823, "comment_id": 52098663, "body": "Unrelated to the duplicate: a common performance issue in DBI scripts is calling <code>prepare</code> inside a loop; you haven&#39;t shown all of your code, so I don&#39;t know if this is the case for you, but you should make sure you&#39;re only calling <code>prepare</code> once for a given query."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1440006369, "post_id": 32101823, "comment_id": 52098861, "body": "Also, if you&#39;re inserting a very large number of rows, <a href=\"https://dev.mysql.com/doc/refman/5.7/en/load-data.html\" rel=\"nofollow noreferrer\"><code>LOAD DATA INFILE</code></a> is likely to be faster than a series of compound inserts. To do this, parse your raw data as you&#39;re doing now and write it out to a CSV file, then load it with <code>LOAD DATA INFILE</code>. At which point this approach becomes faster than compound inserts depends on your application and your database setup, but you can get a significant performance boost this way."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1454101912, "last_edit_date": 1454101912, "creation_date": 1454101576, "answer_id": 35094051, "question_id": 32101823, "link": "https://stackoverflow.com/questions/32101823/perl-many-insert-statments-into-mysql-database/35094051#35094051", "title": "Perl many insert statments into mysql database", "body": "<p>You can insert multiple rows at once with the same syntax as in regular SQL, but you need to build your INSERT statemtent properly with Perl. Perl's slice() may help you:</p>\n\n<p>Suppose you have 7 rows of data and want to insert them in chunks of 3 rows. \"Regular\" SQL would be like so:</p>\n\n<pre><code>insert into T (col1, col2) values ( 1, 2), ( 3, 4), ( 5, 6);\ninsert into T (col1, col2) values ( 7, 8), ( 9,10), (11,12);\ninsert into T (col1, col2) values (13,14);\n</code></pre>\n\n<p>Let's suppose your perl structure is like this:</p>\n\n<pre><code>my $values = [ [1,2], [3,4], ..., [13,14] ];\n</code></pre>\n\n<p>If it's not, bring it into this shape. Now:</p>\n\n<pre><code>use constant CHUNKSIZE =&gt; 3;\n\nmy $stmt = sprintf( 'insert into T (col1, col2) values %s', \n                    join(',', '(?,?)' x CHUNKSIZE) );\n# $stmt is now 'insert into T (col1, col2) values (?,?),(?,?),(?,?)'\n\nmy $sth = $dbh-&gt;prepare($stmt);\n\nwhile( my @chunk = splice( @{$values}, 0, CHUNKSIZE ) ) {\n    # @chunk has 3 elements (rows), or less for the last chunk\n    if (scalar @chunk == CHUNKSIZE) {\n        $sth-&gt;execute( @chunk ); # inserts 3 rows at once\n    } else {\n        # build and prepare a new statement for the remaining rows.\n        # in our sample there is only 1 remaining row.\n        $stmt = sprintf( 'insert into T (col1, col2) values %s',\n                         join(',', '(?,?)' x scalar @chunk) );\n        $sth = $dbh-&gt;prepare($stmt);\n        $sth-&gt;execute( @chunk ); # inserts the last row\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 6257110, "user_type": "registered", "profile_image": "https://graph.facebook.com/1648701948694271/picture?type=large", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/6257110/alex-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1461683074, "creation_date": 1461683074, "answer_id": 36868788, "question_id": 32101823, "link": "https://stackoverflow.com/questions/32101823/perl-many-insert-statments-into-mysql-database/36868788#36868788", "title": "Perl many insert statments into mysql database", "body": "<pre><code>my $sql_values = join( ' ', ('(?, ?, ?)') x scalar(@array) );\n</code></pre>\n\n<p>As said before, then you can just flatten it.</p>\n"}], "owner": {"reputation": 1896, "user_id": 3339122, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/207a1240480a5176fa783cb60efbb57d?s=128&d=identicon&r=PG&f=1", "display_name": "Lain", "link": "https://stackoverflow.com/users/3339122/lain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 36868788, "answer_count": 2, "score": 2, "last_activity_date": 1461683074, "creation_date": 1440004782, "last_edit_date": 1495539920, "question_id": 32101823, "link": "https://stackoverflow.com/questions/32101823/perl-many-insert-statments-into-mysql-database", "title": "Perl many insert statments into mysql database", "body": "<p>I currently have code for perl that looks like this:</p>\n\n<pre><code>@valid = grep { defined($column_mapping{ $headers[$_] }) } 0 .. $#headers;\n\n...\n\nmy $sql = sprintf 'INSERT INTO tablename ( %s ) VALUES ( %s )',\n  join( ',', map { $column_mapping{$_} } @headers[@valid] ),\n  join( ',', ('?') x scalar @valid);\nmy $sth = $dbh-&gt;prepare($sql);\n\n...\n\nmy @row = split /,/, &lt;INPUT&gt;; \n$sth-&gt;execute( @row[@valid] );\n</code></pre>\n\n<p><em>(Taken from <a href=\"https://stackoverflow.com/users/168657/mob\">mob</a>'s <a href=\"https://stackoverflow.com/a/31842226/176646\">answer</a> to a previous question.)</em></p>\n\n<p>That is basically dynamically building a sql insert statement from csv data, and only allowing the csv data with proper headers from my column mapping to be picked.</p>\n\n<p>I have been looking for examples on how to do an insert statment with multiple rows of data at once.</p>\n\n<p>My perl script needs to run around a few hundred million insert statments, and doing it one at a time seems really slow, especially since the server I am running it on only has 6gb of ram and a slowish internet connection. </p>\n\n<p>Is there a way I can upload more than 1 row at a time of data? So one insert statment uploads maybe 50 rows, or 100 rows at once? I cant find out how with perl DBI.</p>\n"}, {"tags": ["python", "perl", "python-2.7"], "comments": [{"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440080991, "post_id": 32101715, "comment_id": 52134330, "body": "When you can predict the input expected by the program, i.e. if you know beforehand which answers in which order the user would have to enter when the external program prompts for it, then you can use the <code>communicate()</code> method of <code>pipe</code>."}, {"owner": {"reputation": 93, "user_id": 5240400, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10207309073554648/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/5240400/scott"}, "reply_to_user": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440086466, "post_id": 32101715, "comment_id": 52138178, "body": "Thank you  I&#39;ll check that out."}, {"owner": {"reputation": 1354, "user_id": 2122007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/563KL.jpg?s=128&g=1", "display_name": "Jim Black", "link": "https://stackoverflow.com/users/2122007/jim-black"}, "edited": false, "score": 0, "creation_date": 1440132615, "post_id": 32101715, "comment_id": 52155768, "body": "If the Perl script is interactive, you may want to check out <a href=\"https://pypi.python.org/pypi/pexpect\" rel=\"nofollow noreferrer\">pexpect</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440080772, "post_id": 32117899, "comment_id": 52134150, "body": "The question as far as I understand it was how to communicate with a running perl program which asks for user input."}, {"owner": {"reputation": 93, "user_id": 5240400, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10207309073554648/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/5240400/scott"}, "edited": false, "score": 0, "creation_date": 1440086418, "post_id": 32117899, "comment_id": 52138149, "body": "Yes that is part of my question, Blackjack."}], "tags": [], "owner": {"reputation": 1033, "user_id": 2438993, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7fb2ebd0f86e26419f14addbff6d1bd7?s=128&d=identicon&r=PG", "display_name": "nagordon", "link": "https://stackoverflow.com/users/2438993/nagordon"}, "is_accepted": false, "score": -1, "last_activity_date": 1440072550, "creation_date": 1440072550, "answer_id": 32117899, "question_id": 32101715, "link": "https://stackoverflow.com/questions/32101715/running-a-perl-script-and-entering-commands-into-it-from-python/32117899#32117899", "title": "Running a Perl script and entering commands into it from Python", "body": "<p>you can do some really cool stuff in ipython. Check out <a href=\"https://github.com/nagordon/technotes/blob/master/ipython-perl-octave.ipynb\" rel=\"nofollow\">this notebook</a> for some specific examples. As far as waiting for a subprocess to finish, I think you need to put a <code>pause</code> in your script. Also, for data handling and export to csv and excel, I'd recommend <a href=\"http://pandas.pydata.org/pandas-docs/stable/\" rel=\"nofollow\">pandas</a>\nJust something to get you started.</p>\n"}], "owner": {"reputation": 93, "user_id": 5240400, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10207309073554648/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/5240400/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440072550, "creation_date": 1440004391, "question_id": 32101715, "link": "https://stackoverflow.com/questions/32101715/running-a-perl-script-and-entering-commands-into-it-from-python", "title": "Running a Perl script and entering commands into it from Python", "body": "<p>I'm a week into learning Python and am trying to write a piece of code that allows me to run a text-based Perl script in LXTerminal automatically.  I have a couple of questions regarding some specifics.</p>\n\n<p>I need my code to start the Perl script with a user-inputted environment file, enter a few specific settings into the Perl script, and then read in many .txt files, one at a time, into the Perl script.  It also needs to restart the process for every single .txt file and capture each individual output (it would help if every output could be written to a single .csv file).</p>\n\n<p>To call the Perl script, I'm starting with the following:</p>\n\n<pre><code>alphamelts=\"/home/melts/Desktop/alphamelts\"\npipe=subprocess.Popen([\"perl\", \"/home/Desktop/melts/alphaMELTS\", \"run_alphamelts.command -f %s\"]) % raw_input(\"Enter an environment  file:\"), stdout=PIPE\n</code></pre>\n\n<p>Assuming that's correct, I now need it to read in a .txt file, enter number-based commands, have my code wait for the Perl script to finish its calculations, and I need it to write the output to a .csv file.  If it helps, the Perl script I'm running automatically generates a space delimited file containing the results of its calculations once the program exists, but it would be super helpful if only a few of its outputs were written onto a single seperate .csv file for each .txt file processed.</p>\n\n<p>No idea where to go from here but I absolutely have to get this working.  Sorry for the complexity.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["regex", "perl", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1440005655, "post_id": 32101455, "comment_id": 52098474, "body": "It works. It will take me some time to understand the innermost trick, though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 2, "creation_date": 1440005921, "post_id": 32101455, "comment_id": 52098615, "body": "Just think of <code>(?-1)</code> as <code>text</code> in the grammar."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1440007120, "post_id": 32101455, "comment_id": 52099224, "body": "Added alternate regex solution"}, {"owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1440250113, "post_id": 32101455, "comment_id": 52201497, "body": "May I edit your answer to add a disjunct, <code>(?&lt;=\\\\)[{}]</code>, to allow for escaped curly brackets?"}, {"owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1440253833, "post_id": 32101455, "comment_id": 52202535, "body": "That&#39;s true. Do you know how to improve it?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1440008228, "last_edit_date": 1440008228, "creation_date": 1440003505, "answer_id": 32101455, "question_id": 32101294, "link": "https://stackoverflow.com/questions/32101294/how-to-find-the-next-unbalanced-brace/32101455#32101455", "title": "How to find the next unbalanced brace?", "body": "<p>So you want to match</p>\n\n<pre><code>[noncurlies [block noncurlies [...]]] \"}\"\n</code></pre>\n\n<p>where a <code>block</code> is</p>\n\n<pre><code>\"{\" [noncurlies [block noncurlies [...]]] \"}\"\n</code></pre>\n\n<p>As a grammar:</p>\n\n<pre><code>start    : text \"}\"\ntext     : noncurly* ( block noncurly* )*\nblock    : \"{\" text \"}\"\nnoncurly : /[^{}]/\n</code></pre>\n\n<p>As a regex (5.10+):</p>\n\n<pre><code>/\n   ^\n   (\n      (\n         [^{}]*\n         (?:\n             \\{ (?-1) \\}\n             [^{}]*\n         )*\n      )\n      \\}\n   )\n/x\n</code></pre>\n\n<p>As a regex (5.10+):</p>\n\n<pre><code>/\n   ^ ( (?&amp;TEXT) \\} )\n\n   (?(DEFINE)\n      (?&lt;TEXT&gt;   [^{}]* (?: (?&amp;BLOCK) [^{}]* )*   )\n      (?&lt;BLOCK&gt;  \\{ (?&amp;TEXT) \\}                   )\n   )\n/x\n</code></pre>\n"}], "owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 32101455, "answer_count": 1, "score": 4, "last_activity_date": 1440008228, "creation_date": 1440002947, "question_id": 32101294, "link": "https://stackoverflow.com/questions/32101294/how-to-find-the-next-unbalanced-brace", "title": "How to find the next unbalanced brace?", "body": "<p>The regex below captures everything up to the last balanced <code>}</code>.</p>\n\n<p>Now, what regex would be able to capture everything up to the next <strong>unbalanced</strong> <code>}</code>?  In other words, how can I can get <code>... {three {four}} five}</code> from <code>$str</code> instead of just <code>... {three {four}}</code>?</p>\n\n<pre><code>my $str = \"one two {three {four}} five} six\";\n\nif ( $str =~ /\n              (\n                .*?\n                {\n                  (?&gt; [^{}] | (?-1) )+\n                }\n              )\n            /sx\n   )\n   {\n     print \"$1\\n\";\n   }\n</code></pre>\n"}, {"tags": ["arrays", "perl", "oop", "weak-references"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1440003141, "post_id": 32101202, "comment_id": 52097040, "body": "Do you mean <code>my @array = ( ... )</code> or <code>my $array = [ ... ]</code>?"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1440003269, "post_id": 32101202, "comment_id": 52097104, "body": "I meant <code>()</code>, I will correct it.  Sorry this is just some quickly written pseudo code, it&#39;s more just to get the point across than to be syntactically correct."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1440003462, "post_id": 32101202, "comment_id": 52097205, "body": "Quickly written pseudo-answer: clear the lists in the destructor of the objects. Or, use an object instead of the array that would clean itself before any operation that needs it."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1440003642, "post_id": 32101202, "comment_id": 52097311, "body": "You should post that as a real answer, the destructor method sounds like a good idea.  Upon destructing the object I can (probably) remove all undefined values from the array. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1440012303, "post_id": 32101202, "comment_id": 52102362, "body": "Re &quot;the weak references are still defined until the DESTROY method is completed...&quot;, np. Search your a reference to yourself rather than undef."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440012537, "post_id": 32101202, "comment_id": 52102538, "body": "I&#39;m not sure I understand what you&#39;re trying to say, could you elaborate?"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440012589, "post_id": 32101202, "comment_id": 52102572, "body": "Do you mean search &quot;for&quot; a reference to yourself? I think I get it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440014166, "post_id": 32101202, "comment_id": 52103549, "body": "What are you trying to accomplish by doing so?"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440014994, "post_id": 32101202, "comment_id": 52104008, "body": "I want to have some sort of parent object that can keep track of it&#39;s children in an array, but children can be destroyed unexpectedly and I want the array to be updated accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1440004361, "post_id": 32101522, "comment_id": 52097693, "body": "The problem with the <code>grep</code> approach is that copying a weakened reference makes it a strong reference. From the Scalar::Util docs: &quot;This may be less obvious in other situations, such as <code>grep()</code>, for instance when grepping through a list of weakened references to objects that may have been destroyed already: <code>@object = grep { defined } @object;</code> This will indeed remove all references to destroyed objects, but the remaining references to objects will be strong, causing the remaining objects to never be destroyed because there is now always a strong reference to them in the <code>@object</code> array.&quot;"}, {"owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1440004646, "post_id": 32101522, "comment_id": 52097862, "body": "@ThisSuitIsBlackNot So would you have to <code>map</code> them back to weakrefs?"}], "tags": [], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "is_accepted": false, "score": 0, "last_activity_date": 1440003705, "creation_date": 1440003705, "answer_id": 32101522, "question_id": 32101202, "link": "https://stackoverflow.com/questions/32101202/self-deleting-array-elements-once-they-become-undefined/32101522#32101522", "title": "Self-deleting array elements (once they become undefined)", "body": "<p>Perl won't do this for you automatically.  You have a couple of options.  The first is to clean it yourself whenever you use it:</p>\n\n<pre><code>my @clean = grep { defined $_ } @dirty;\n</code></pre>\n\n<p>Or you could create a <a href=\"http://perldoc.perl.org/Tie/Array.html\" rel=\"nofollow\">tie'd array</a> and add that functionality to the <code>FETCH*</code> and <code>POP</code> hooks.</p>\n"}, {"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440005515, "post_id": 32101967, "comment_id": 52098390, "body": "Would this essentially run the grep command whenever the array is accessed?  Sorry I&#39;m not too familiar with code references and how they work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440005549, "post_id": 32101967, "comment_id": 52098414, "body": "You would run the command whever you want to clear the undefined values, yes."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440005628, "post_id": 32101967, "comment_id": 52098455, "body": "What about the comment from ThisSuitIsBlackNot below, he claims that using grep on a weak reference converts it to a strong reference.  This would be a problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440005704, "post_id": 32101967, "comment_id": 52098495, "body": "What he said is correct, but it&#39;s different than when you claim he said, so there&#39;s no contradiction between my answer and his comment."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440008647, "post_id": 32101967, "comment_id": 52100153, "body": "I attempted your solution and it didn&#39;t appear to work.  Please see the details above."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440009744, "post_id": 32101967, "comment_id": 52100855, "body": "Ohhh I see, your method is a function call that will need to be called every time I want to remove the values.  I was looking for a solution that would avoid that.  Perhaps choroba&#39;s comment might be the best solution for this particular problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440009949, "post_id": 32101967, "comment_id": 52100993, "body": "Re &quot;The undef is not removed from the array automatically. Am I missing something?&quot;, Yes, that I said that it can&#39;t be automatic, at least not without using a magical (e.g. tied) array."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440010024, "post_id": 32101967, "comment_id": 52101040, "body": "Re &quot;Perhaps choroba&#39;s comment might be the best solution&quot;, Yup. If the array members have a ref back to the object that owns the array, then this would be best."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440010509, "post_id": 32101967, "comment_id": 52101319, "body": "This seems to be very picky... I noticed your change above, do I have to weaken the reference after I already put it in the array?  I tried weakening it before putting it in the array and it wouldn&#39;t become <code>undef</code> anymore."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1440010859, "post_id": 32101967, "comment_id": 52101533, "body": "Re &quot;do I have to weaken the reference after I already put it in the array?&quot;, Yes. Like ThisSuitIsBlackNot pointed out earlier, a copy of a weak reference isn&#39;t weak. So if you want <code>$array-&gt;[1]</code> to be a weak ref, you need to weaken <code>$array-&gt;[1]</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1440005626, "last_edit_date": 1440005626, "creation_date": 1440005309, "answer_id": 32101967, "question_id": 32101202, "link": "https://stackoverflow.com/questions/32101202/self-deleting-array-elements-once-they-become-undefined/32101967#32101967", "title": "Self-deleting array elements (once they become undefined)", "body": "<p>No, there isn't, short of using a magical (e.g. tied) array.</p>\n\n<p>If you have a reference to an array instead of an array, you can use the following to filter out the undefined element efficiently without \"hardening\" any of the references.</p>\n\n<pre><code>$array = sub { \\@_ }-&gt;( grep defined, @$array );\n</code></pre>\n\n<p>This doesn't copy the values at all, in fact. Only \"C pointers\" get copied.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1442523157, "creation_date": 1440002576, "last_edit_date": 1442523157, "question_id": 32101202, "link": "https://stackoverflow.com/questions/32101202/self-deleting-array-elements-once-they-become-undefined", "title": "Self-deleting array elements (once they become undefined)", "body": "<p>I have a Perl script generating an array of weak references to objects.  Once one of these objects goes out of scope, the reference to it in the array will become undefined.</p>\n\n<p>ex (pseudo code):</p>\n\n<pre><code># Imagine an array of weak references to objects\nmy @array = ( $obj1_ref, $obj2_ref, $obj3_ref );\n\n# Some other code here causes the last strong reference\n# of $obj2_ref to go out of scope.\n\n# We now have the following array\n@array = ( $obj1_ref, undef, $obj3_ref )\n</code></pre>\n\n<p><strong><em>Is there a way to make the undefined reference automatically remove itself from the array once it becomes undefined?</em></strong></p>\n\n<p>I want <code>@array = ($obj1_red, $obj3_ref )</code>.</p>\n\n<h2>EDIT:</h2>\n\n<p>I tried this solution and it didn't work:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n{\n    package Object;\n    sub new { my $class = shift; bless({ @_ }, $class) }\n}\n\n{\n    use Scalar::Util qw(weaken);\n    use Data::Dumper;\n\n    my $object = Object-&gt;new();\n\n    my $array;\n    $array = sub { \\@_ }-&gt;( grep defined, @$array );\n\n    {\n        my $object = Object-&gt;new();\n        @$array = ('test1', $object, 'test3');\n        weaken($array-&gt;[1]);\n        print Dumper($array);\n    }\n\n    print Dumper($array);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          'test1',\n          bless( {}, 'Object' ),\n          'test3'\n        ];\n$VAR1 = [\n          'test1',\n          undef,\n          'test3'\n        ];\n</code></pre>\n\n<p>The undef is not removed from the array automatically.</p>\n\n<p>Am I missing something?</p>\n\n<h2>EDIT 2:</h2>\n\n<blockquote>\n  <p>I also tried removing undefined values from the array in the DESTROY method of the object, but that doesn't appear to work either.  It appears that since the object is still technically not \"destroyed\" yet, the weak references are still defined until the DESTROY method is completed...</p>\n</blockquote>\n"}, {"tags": ["bash", "perl", "sorting"], "comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1440000491, "post_id": 32100589, "comment_id": 52095623, "body": "Your example already appears to be sorted.  Do you want it in some other order than it already is?  Please show us your input data, your intended output, your attempt to get there, and what&#39;s going wrong with that attempt."}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1440001169, "post_id": 32100589, "comment_id": 52095920, "body": "I apologize. The example is what I want. I have them in the order of file-55_357-122.csv, file-55_357-2.csv, ... I was looking this up on some other forums, and couldn&#39;t get sort command to work correctly."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1440000523, "creation_date": 1440000523, "answer_id": 32100663, "question_id": 32100589, "link": "https://stackoverflow.com/questions/32100589/sort-files-by-number-at-end-in-bash-perl/32100663#32100663", "title": "Sort files by number at end in bash/perl", "body": "<pre><code>use Sort::Key::Natural qw( natsort );\n\nmy @sorted = natsort @file_names;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440002058, "post_id": 32100745, "comment_id": 52096444, "body": "I don&#39;t have all the list of files in a .txt file -- in essence, I was wondering if I can sort all the files directly in the directory."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440002816, "post_id": 32100745, "comment_id": 52096875, "body": "The directory is just a list, not implicitly sorted. The best way to sort will be determined by what you want to <i>do</i> with the resultant list. The reason for this is explained pretty clearly (and with some humour) in the <a href=\"http://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XyProblem</a> page on <a href=\"http://mywiki.wooledge.org/BashFAQ\" rel=\"nofollow noreferrer\">greycat&#39;s BASH FAQ</a>."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440003039, "post_id": 32100745, "comment_id": 52096989, "body": "Oh, and if you put the file list into a bash array with something like <code>a=(*)</code>, you may be able to sort it with a variation of the answer to <a href=\"http://stackoverflow.com/a/30576368/1072112\">this question</a>."}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440005077, "post_id": 32100745, "comment_id": 52098095, "body": "I just need to have them sorted numerically so that I can run a script through them and append them all. I think I will try sorting it in perl first, unless there is a better solution. I will edit my question."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440016529, "post_id": 32100745, "comment_id": 52104881, "body": "I don&#39;t understand &quot;append them all&quot;. You want to <a href=\"http://stackoverflow.com/q/10865947/1072112\">append text to every file</a>?  Or just concatenate the files together in natural order?  If the latter, <code>ls | sort -t- -nk3 | xargs -n 1 cat &gt; output.txt</code> might be sufficient, if you don&#39;t have special characters (including spaces) in your filenames."}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440016950, "post_id": 32100745, "comment_id": 52105097, "body": "The latter. I&#39;d like to concatenate the files together in the natural order. Thank you for your help -- it works nicely, but could you explain to me <code>xargs -n 1 cat</code>? I&#39;m trying to learn for future reference. Also, if I wanted to concatenate all files ending in .csv, would I just do <code>... xargs -n 1 cat *.csv &gt; output.txt</code>? Thanks!"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440067935, "post_id": 32100745, "comment_id": 52125119, "body": "So... The <code>xargs</code> command takes standard input and turns it into command line options.  Normally, <code>echo one two | xargs echo</code> would run <code>echo one two</code>. With the <code>-n 1</code> option, you tell xargs to process one option at a time, so <code>echo one two | xargs -n 1 echo</code> would run <code>echo one</code> and then <code>echo two</code>. Try it for yourself! In your case, we may have more files than will fit on one command line, so we&#39;ll <code>cat</code> each of them separately, but aggregate the output with the redirect."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440068071, "post_id": 32100745, "comment_id": 52125206, "body": "And no, that&#39;s not now you would capture just the <code>*.csv</code> files. Your source file list is provided by the output of the <code>ls</code> command. Again, if you have more files than will fit on one command line, <code>ls *.csv</code> won&#39;t work, and you may need to use the <code>find</code> command to process things. In that case, <code>find &#47;path -name &quot;*.csv&quot; -exec cat {} \\; &gt; output.txt</code> would likely be the way to go. Though you might also need to use the <code>-maxdepth</code> option depending on what&#39;s in your directories."}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 2, "last_activity_date": 1440000840, "creation_date": 1440000840, "answer_id": 32100745, "question_id": 32100589, "link": "https://stackoverflow.com/questions/32100589/sort-files-by-number-at-end-in-bash-perl/32100745#32100745", "title": "Sort files by number at end in bash/perl", "body": "<p>You can use the <code>sort</code> command, which is neither part of bash nor part of perl.</p>\n\n<p>With input data in <code>input.txt</code>:</p>\n\n<pre><code>file-55_357-123.csv\nfile-55_357-0.csv\nfile-55_357-21.csv \nfile-55_357-3.csv \n</code></pre>\n\n<p>From my shell, (any shell, not just bash) I can do the following:</p>\n\n<pre><code>$ sort -t- -nk3 input.txt\nfile-55_357-0.csv\nfile-55_357-3.csv\nfile-55_357-21.csv\nfile-55_357-123.csv\n</code></pre>\n\n<p>The <code>-t</code> option specifies a delimiter, <code>-n</code> says to compare numeric values (so that 21 comes after 3 rather than before) and <code>-k 3</code> says to sort on the third field (per the delimiter).</p>\n"}], "owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440005649, "creation_date": 1440000345, "last_edit_date": 1440005649, "question_id": 32100589, "link": "https://stackoverflow.com/questions/32100589/sort-files-by-number-at-end-in-bash-perl", "title": "Sort files by number at end in bash/perl", "body": "<p>I'm trying to sort a huge list of files into the following format:</p>\n\n<pre><code>file-55_357-0.csv\nfile-55_357-1.csv\nfile-55_357-2.csv \nfile-55_357-3.csv \n...\n</code></pre>\n\n<p>Is there a simple way to do this in bash or perl? In other words, is there a way to write the perl script such that it goes through all of them in numerical order? For instance, when I create <code>my @files</code>, can I make sure the script goes through them all in this sorting -- how could I create a <code>my @sorted</code> array? I ask because I want to append all these files together vertically, and they need to be in the sorted order. Thanks so much!  </p>\n"}, {"tags": ["perl", "email", "imap"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1440001398, "post_id": 32099789, "comment_id": 52096050, "body": "What have you tried? What problems are you having? Show us your code. Have you tried reading the <a href=\"https://metacpan.org/pod/Net::IMAP::Client\" rel=\"nofollow noreferrer\">documentation</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 4571, "user_id": 14897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5c8015d480cc5148e39aa9eaa149577?s=128&d=identicon&r=PG", "display_name": "Devin Ceartas", "link": "https://stackoverflow.com/users/14897/devin-ceartas"}, "is_accepted": false, "score": 0, "last_activity_date": 1440012397, "creation_date": 1440012397, "answer_id": 32104020, "question_id": 32099789, "link": "https://stackoverflow.com/questions/32099789/perl-netimapclient-how-to-get-unseen-emails/32104020#32104020", "title": "perl Net::IMAP::Client how to get unseen emails", "body": "<p>I have code which I know is working. It uses a different module, but may get you where you need to go? </p>\n\n<pre><code>use Mail::IMAPClient;\n\nsub get_imap {\n  my ($user, $pass) = @_;\n  my $imap = Mail::IMAPClient-&gt;new(  \n    'User'    =&gt; $user,\n    'Password'=&gt; $pass,\n    'Ssl'     =&gt; 1 ) or die \"IMAP Failure: $@\";\n  $imap-&gt;Timeout(120);\n  $imap-&gt;Server('smtp.gmail.com');\n  $imap-&gt;connect or die \"Could not connect: $@\\n\";\n  $imap-&gt;select('Inbox') or die \"IMAP Select Error: $!\";\n\n  return $imap;\n}\n\nsub check_msgs {\n  my ($imap) = @_;\n\n  my @msgs = $imap-&gt;messages or die \"Could not get messages: $@\\n\";\n\n  MSGITR:   \n  foreach my $msg_id (@msgs) {\n    print \"looking at msg_id $msg_id\\n\";\n    my $string = $imap-&gt;body_string($msg_id);\n    my @lines  = split( /[\\n\\r]/, $string );\n    print scalar @lines . \" lines\\n\";\n    foreach my $line (@lines) {\n      ...\n    }\n  }\n}\n</code></pre>\n\n<p>(actual snippet from my working code, which checks messages for bounces)</p>\n"}], "owner": {"reputation": 57, "user_id": 3366045, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/78102669375d49433656e590bd2ae246?s=128&d=identicon&r=PG&f=1", "display_name": "user3366045", "link": "https://stackoverflow.com/users/3366045/user3366045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440012397, "creation_date": 1439998142, "last_edit_date": 1440007123, "question_id": 32099789, "link": "https://stackoverflow.com/questions/32099789/perl-netimapclient-how-to-get-unseen-emails", "title": "perl Net::IMAP::Client how to get unseen emails", "body": "<p>I am using Net::IMAP::Client</p>\n\n<p>Code:</p>\n\n<pre><code>my $imap = Net::IMAP::Client-&gt;new(\n   server =&gt; 'imap.server.com',\n   user   =&gt; $user,\n   pass   =&gt; $pass,\n   ssl    =&gt; 1,                              # (use SSL? default no)\n   ssl_verify_peer =&gt; 0,                     # (use ca to verify server, default yes)\n   #ssl_ca_file =&gt; '/etc/ssl/certs/certa.pm', # (CA file used for verify server) or\n   # ssl_ca_path =&gt; '/etc/ssl/certs/',         # (CA path used for SSL)\n   port   =&gt; 993                             # (but defaults are sane)\n\n) or die \"Could not connect to IMAP server\";\n\n\n$imap-&gt;login or die('Login failed: ' . $imap-&gt;last_error);\n$imap-&gt;select('INBOX');\n</code></pre>\n\n<p>Then I tried:</p>\n\n<pre><code>my $status = $imap-&gt;status(INBOX);\n</code></pre>\n\n<p>Now I have hash like this:</p>\n\n<pre><code>name : INBOX \nUIDNEXT : 312 \nMESSAGES : 298 \nRECENT : 0 \nUNSEEN : 1 \nUIDVALIDITY : 1420542773\n</code></pre>\n\n<p>Now want to get text of this one unseen e-mail.\nI read documentation but didnt find how to do that.</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["git", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1440014727, "post_id": 32098938, "comment_id": 52103862, "body": "The language is named &quot;Perl&quot;, not PERL or perl. (&quot;perl&quot; can be used to denote the executable.)"}], "answers": [{"tags": [], "owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1439996388, "creation_date": 1439996388, "answer_id": 32099097, "question_id": 32098938, "link": "https://stackoverflow.com/questions/32098938/git-revert-command-opens-a-vi-session-for-entering-additional-messages-i-need-to/32099097#32099097", "title": "git revert command opens a vi session for entering additional messages I need to capture that and do it through perl", "body": "<p>Git respects your <code>$EDITOR</code> environment variable when opening an editor. Set <code>$EDITOR</code> to the full path to your Perl script, which should read the name of the temporary file as its first argument.</p>\n\n<p>Make sure to save your modified message back to the temporary file and exit with a 0 status.</p>\n"}], "owner": {"reputation": 23, "user_id": 4777849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c892bfd09e285fe63820ab953d7be3d?s=128&d=identicon&r=PG&f=1", "display_name": "pws", "link": "https://stackoverflow.com/users/4777849/pws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 32099097, "answer_count": 1, "score": 1, "last_activity_date": 1442523004, "creation_date": 1439995990, "last_edit_date": 1442523004, "question_id": 32098938, "link": "https://stackoverflow.com/questions/32098938/git-revert-command-opens-a-vi-session-for-entering-additional-messages-i-need-to", "title": "git revert command opens a vi session for entering additional messages I need to capture that and do it through perl", "body": "<p>I am performing git revert , it redirects to a vi session in which I need to put in some additional information for it to submit.</p>\n\n<p>Is there a way to achieve it through Perl.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439995432, "post_id": 32098655, "comment_id": 52091905, "body": "I see no subroutine called <code>CheckLoginAttempts</code>. But bear in mind <code>return \\$LoginCounter;</code> returns a reference, not the value. And also - <code>exists</code> will still work if it&#39;s <code>undef</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439995587, "post_id": 32098655, "comment_id": 52092031, "body": "Misspelled routine name, fixed that."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "edited": false, "score": 0, "creation_date": 1439996205, "post_id": 32098880, "comment_id": 52092526, "body": "As I wrote earlier, misspelled subroutine name. Yes, <code>strict</code> and <code>warnings</code> are in every script. Get no errors though. Will try it now."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439996511, "post_id": 32098880, "comment_id": 52092757, "body": "There&#39;s no point in the <code>close</code> as the file handle is lexical. And anyway it should be <code>close($fh)</code>. The name of the handle in your <code>open</code> is also wrong"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1439996246, "last_edit_date": 1439996246, "creation_date": 1439995867, "answer_id": 32098880, "question_id": 32098655, "link": "https://stackoverflow.com/questions/32098655/perl-get-key-value/32098880#32098880", "title": "Perl: Get key value", "body": "<p>Well, for starters - you've got <code>CheckUserLogins</code> not <code>CheckLoginAttempts</code>. </p>\n\n<p>Assuming that's just a typo - <code>UserLogins</code> returns a hash reference - a single scalar value. You're getting <code>0</code> if the <code>exists</code> check fails presumably.</p>\n\n<p>If it <em>does</em> exist though, you're doing this:</p>\n\n<pre><code>$LoginCounter = %{UserLogins{$UsersToCheck}};\n</code></pre>\n\n<p>Which isn't valid. Do you have <code>strict</code> and <code>warnings</code> turned on? Because you're trying to assign a hash to a scalar, which isn't going to do what you want. </p>\n\n<p>You probably mean:</p>\n\n<pre><code>$LoginCounter = ${UserLogins()} -&gt; {$UsersToCheck};\n</code></pre>\n\n<p>Which dereferences the reference from <code>UserLogins</code> and then looks up a key.</p>\n\n<p>I might however, approach your problem a little differently - it'll only work once when you do what you're doing, because each time you call <code>UserLogins</code> it creates a new hash, but you <em>don't</em> rewind <code>$fh</code>. </p>\n\n<p>So I'd suggest:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n{\n    my %userlogins;\n\n    sub inituserlogins {\n        open( my $fh, \"&lt;\", '/var/log/secure' )\n            or die \"Could not open file: $!\";\n        while ( my $array = &lt;$fh&gt; ) {\n            if ( $array =~ /Accepted\\s+password\\s+for\\s+(\\S+)/ ) {\n                $userlogins{$1}++;\n            }\n        }\n        close($fh);\n    }\n\n    sub CheckUserLogins {\n        my ($UsersToCheck) = @_;\n        inituserlogins() unless %userlogins;\n        return $userlogins{$UsersToCheck} ? $userlogins{$UsersToCheck} : 0;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439996388, "post_id": 32099063, "comment_id": 52092652, "body": "Does that first declaration need a <code>%</code> rather than a <code>$</code>? Or a deref afterwards?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439996604, "post_id": 32099063, "comment_id": 52092833, "body": "@Sobrique: You&#39;re right; the access to the hash should be indirect. Thanks"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1440005360, "last_edit_date": 1440005360, "creation_date": 1439996303, "answer_id": 32099063, "question_id": 32098655, "link": "https://stackoverflow.com/questions/32098655/perl-get-key-value/32099063#32099063", "title": "Perl: Get key value", "body": "<p>You mustn't use capital letters in lexical identifiers as Perl reserves them for global identifiers like package names</p>\n\n<p>One of the main problems is that you're using</p>\n\n<pre><code>exists %{UserLogins()}{$UsersToCheck}\n</code></pre>\n\n<p>which should be</p>\n\n<pre><code>exists UserLogins()-&gt;{$UsersToCheck}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>exists ${UserLogins()}{$UsersToCheck}\n</code></pre>\n\n<p>Do you have <code>use strict</code> and <code>use warnings</code> in place as you should have?</p>\n\n<p>Another problem is that you will read all the way through the file every time you call <code>UserLogins</code>. That means the second and later calls to <code>CheckUserLogins</code> (which calls <code>UserLogins</code>) will find nothing, as the end of the file has been reached</p>\n\n<p>You should call your suibroutine <code>user_logins</code> and call it just <em>once</em>, storing the result as a scalar variable. This program shows how</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.14;  # For state variables\n\nsub user_logins {\n\n    open my $fh, '&lt;', '/var/log/secure' or die $!;\n\n    my %user_logins;\n\n    while ( &lt;$fh&gt; ) {\n        if ( /Accepted\\s+password\\s+for\\s+(\\S+)/ ) {\n            ++$user_logins{$1};\n        }\n    }\n\n    \\%user_logins;\n}\n\nsub check_user_logins {\n    my ($users_to_check) = @_;\n    state $user_logins = user_logins();\n    $user_logins-&gt;{$users_to_check} // 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 32098880, "answer_count": 2, "score": 0, "last_activity_date": 1440005360, "creation_date": 1439995286, "last_edit_date": 1439995536, "question_id": 32098655, "link": "https://stackoverflow.com/questions/32098655/perl-get-key-value", "title": "Perl: Get key value", "body": "<p>I'm trying to get key values from hash inside my module:</p>\n\n<p><strong>Module.pm</strong></p>\n\n<pre><code>...\nmy $logins_dump = \"tmp/logins-output.txt\";\nsystem(\"cat /var/log/secure | grep -n -e 'Accepted password for' &gt; $logins_dump\");\nopen (my $fh, \"&lt;\", $logins_dump) or die \"Could not open file '$logins_dump': $!\";\n\nsub UserLogins {\n    my %user_logins;\n    while (my $array = &lt;$fh&gt;) {\n        if ($array =~ /Accepted\\s+password\\s+for\\s+(\\S+)/) {\n            $user_logins{$1}++;\n         }\n    }\n    return \\%user_logins;\n}\n\nsub CheckUserLogins {\n    my $LoginCounter;\n    my $UsersToCheck = shift @_;\n    if (exists %{UserLogins()}{$UsersToCheck}){\n        $LoginCounter = %{UserLogins{$UsersToCheck}}; #How many logins?\n    }\n    else {\n        $LoginCounter = \"0\";\n    }\n    return \\$LoginCounter;\n}\n</code></pre>\n\n<p><strong>Script.pl</strong></p>\n\n<pre><code>$UserLoginCounter = Module::CheckUserLogins($UsersToPass);\n</code></pre>\n\n<p>I pass usernames to script and check if username is in hash, if it is, I need to return number of logins, which I'm trying to do with <code>$LoginCounter</code>. For some reason scripts returns only 0 or undef.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 4, "creation_date": 1439982968, "post_id": 32093888, "comment_id": 52082405, "body": "&quot;I&#39;m expecting the $lc_i value as : 8.&quot; <b><i>WHY?!</i></b>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1439983028, "post_id": 32093888, "comment_id": 52082443, "body": "Position of the second pipe in the string; just a wild guess.."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 4, "creation_date": 1439983193, "post_id": 32093888, "comment_id": 52082563, "body": "The &#39;2&#39; in <code>index( $string, &quot;|&quot;, 2);</code> means start from character 2, not get the second match."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439985767, "post_id": 32093888, "comment_id": 52084299, "body": "You must need the index of these characters for a second step, for instance to then use <code>substr</code> to extract the words between the pipe <code>|</code> characters? If you explain what that next step is then we will be able to help you much better; I suspect that your purpose is much better served by using regular expressions"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1439985834, "post_id": 32093888, "comment_id": 52084349, "body": "@xxfelixxx: It actually means to start from <i>offset</i> 2, at character 3"}, {"owner": {"reputation": 147, "user_id": 3655447, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/0a1baa0d654451502657e9c68967a868?s=128&d=identicon&r=PG&f=1", "display_name": "user3655447", "link": "https://stackoverflow.com/users/3655447/user3655447"}, "edited": false, "score": 0, "creation_date": 1439987500, "post_id": 32093888, "comment_id": 52085574, "body": "@Boradin/xxfelixxx : Thanks for the info. Then, how can I know the index of  second occurrence of character &quot;|&quot;."}, {"owner": {"reputation": 147, "user_id": 3655447, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/0a1baa0d654451502657e9c68967a868?s=128&d=identicon&r=PG&f=1", "display_name": "user3655447", "link": "https://stackoverflow.com/users/3655447/user3655447"}, "edited": false, "score": 0, "creation_date": 1439988323, "post_id": 32093888, "comment_id": 52086221, "body": "@Boradin/xxfelixxx : <a href=\"http://www.perlmeme.org/howtos/perlfunc/index_function.html\" rel=\"nofollow noreferrer\">perlmeme.org/howtos/perlfunc/index_function.html</a> #  check Example 3a. It&#39;s working"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1439983548, "last_edit_date": 1439983548, "creation_date": 1439983231, "answer_id": 32094053, "question_id": 32093888, "link": "https://stackoverflow.com/questions/32093888/find-index-of-special-character-in-string-by-its-offset-using-perl/32094053#32094053", "title": "Find index of special character in string by its offset using perl", "body": "<p>The third argument to <a href=\"http://p3rl.org/index\" rel=\"nofollow\">index</a> is the position in the string, not the number of occurrence. You have to create your own subroutine:</p>\n\n<pre><code>sub nth_index {\n    my ($string, $substr, $count) = @_;\n    my $pos = 0;\n    for (1 .. $count) {\n        $pos = 1 + index $string, $substr, $pos;\n        return -1 if $pos == 0;\n    }\n    return $pos - 1\n}\n\nmy $string = '|json|xsp|xml|dml|xspt|';\nfor my $i (0 .. 8) {\n    my $lc_i = nth_index($string, '|', $i);\n    print \"lobcol $i-th index of string : $string is : $lc_i.\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1439991540, "last_edit_date": 1495540681, "creation_date": 1439991049, "answer_id": 32096972, "question_id": 32093888, "link": "https://stackoverflow.com/questions/32093888/find-index-of-special-character-in-string-by-its-offset-using-perl/32096972#32096972", "title": "Find index of special character in string by its offset using perl", "body": "<p>I think the tidiest way to do this is with a global regular expression</p>\n\n<p>This program scans the string for all pipe <code>|</code> characters and pushes the offset of each one onto the array <code>@indices</code>. After that is done, you can access the location of, say, the second pipe by <code>$indices[1]</code> which is 8</p>\n\n<p>I have added a working solution using <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\"><code>index</code></a>. As <a href=\"https://stackoverflow.com/a/32094053/622310\"><strong>choroba</strong> has explained</a>, the last parameter, <em>POSITION</em>, to <code>index</code> is a <em>character offset</em> into the string where it should start looking. So if <code>index</code> finds your first pipe at offset 4, you want to call it the second time with a <em>POSITION</em> of 5, otherwise it will just find the same pipe again</p>\n\n<p>I hope you'll agree with me that the regex solution is cleaner and more concise</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nmy $string = \"json|xsp|xml|dml|xspt\";\n\n{\n    my @indices;\n    push @indices, $-[0] while $string =~ /\\|/g;\n    say \"@indices\";\n}\n\n{\n    my @indices;\n    my $offset = 0;\n    while () {\n        my $index = index($string, '|', $offset);\n        last if $index &lt; 0;\n        push @indices, $index;\n        $offset = $index + 1;\n    }\n\n    say \"@indices\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>4 8 12 16\n4 8 12 16\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 3655447, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/0a1baa0d654451502657e9c68967a868?s=128&d=identicon&r=PG&f=1", "display_name": "user3655447", "link": "https://stackoverflow.com/users/3655447/user3655447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1439991540, "creation_date": 1439982769, "last_edit_date": 1439988153, "question_id": 32093888, "link": "https://stackoverflow.com/questions/32093888/find-index-of-special-character-in-string-by-its-offset-using-perl", "title": "Find index of special character in string by its offset using perl", "body": "<p>I've a string which has special character \"|\" [pipe]. Here, I want to know the pipe index value on it offset value.</p>\n\n<p>Trying with below code.</p>\n\n<pre><code>my $string = \"json|xsp|xml|dml|xspt\";\nmy $lc_i = index( $string, \"|\", 2);\nprint \" lobcol index of string : $string is : $lc_i \\n\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>lobcol index of string : json|xsp|xml|dml|xspt is : 4\n</code></pre>\n\n<p>But, I'm expecting the <code>$lc_i</code> value as : 8.</p>\n\n<p>Is the above approach is correct ? \nLet me know, where I went wrong. Please help me in this regard.\nThanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1439981466, "post_id": 32089500, "comment_id": 52081330, "body": "<a href=\"http://www.libusb.org/\" rel=\"nofollow noreferrer\">libusb</a>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1439971771, "post_id": 32089898, "comment_id": 52074753, "body": "It&#39;s probalby also required to install a Windows version of libusb first."}], "tags": [], "owner": {"reputation": 854, "user_id": 3022528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f696c88e9042ab5110ecf4452e376aea?s=128&d=identicon&r=PG&f=1", "display_name": "fast", "link": "https://stackoverflow.com/users/3022528/fast"}, "is_accepted": false, "score": 1, "last_activity_date": 1439972033, "last_edit_date": 1439972033, "creation_date": 1439971724, "answer_id": 32089898, "question_id": 32089500, "link": "https://stackoverflow.com/questions/32089500/not-able-to-install-the-perl-module-deviceusb-on-windows/32089898#32089898", "title": "Not able to install the Perl module Device::USB on Windows", "body": "<p>As the error msg states, you should define the two environment variables <code>LIBUSB_LIBDIR</code> and <code>LIBUSB_INCDIR</code>.\nUnder windows on the command line you can add env vars (temporarily, for the currend cmd process) via <code>SET name=value</code>, e.g.: <code>SET LIBUSB_LIBDIR=C:\\your\\path\\to\\the\\libs</code>.</p>\n\n<p>Also, libusb has to be installed on your machine - maybe this also will set the lib&amp;include path env vars permanently. (thx for comment! :)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1440000365, "creation_date": 1440000365, "answer_id": 32100596, "question_id": 32089500, "link": "https://stackoverflow.com/questions/32089500/not-able-to-install-the-perl-module-deviceusb-on-windows/32100596#32100596", "title": "Not able to install the Perl module Device::USB on Windows", "body": "<p>First, you need to install the <em>libusb</em> library on your system.</p>\n\n<blockquote>\n  <p>Device-USB</p>\n  \n  <p>This module provides a relatively complete Perl wrapper on the libusb\n  library. Using this module provides an object-oriented interface to any \n  installed USB devices.</p>\n  \n  <p>Obviously, the module requires a copy of the libusb library compiled for the\n  target system. The module also requires a C compiler compatible with the\n  Perl installation, because it uses the Inline::C module to create the \n  interface to libusb.</p>\n</blockquote>\n\n<p>Then, you need to tell Device::USB where to locate the library by setting env var <code>LIBUSB_LIBDIR</code> to the directory that contains the libusb DLL, and by setting env var <code>LIBUSB_INCDIR</code> to the directory that contains the libusb <code>.h</code> files.</p>\n\n<p>You can set those env vars by right-clicking \"My Computer\", clicking \"Properties\", clicking \"Advanced system settings\", clicking \"Environment Variables\".</p>\n"}], "owner": {"reputation": 1, "user_id": 5240991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a4d1f3b809542b49cfc918df5f78777?s=128&d=identicon&r=PG&f=1", "display_name": "mpierrat25", "link": "https://stackoverflow.com/users/5240991/mpierrat25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1440000365, "creation_date": 1439970477, "last_edit_date": 1439971813, "question_id": 32089500, "link": "https://stackoverflow.com/questions/32089500/not-able-to-install-the-perl-module-deviceusb-on-windows", "title": "Not able to install the Perl module Device::USB on Windows", "body": "<p>I need to run a perl program on Windows. I install Strawberry Perl.\nI am not able to install Device::USB module.\nHere is the revelant error in log :</p>\n\n<pre><code>-&gt; OK\nSuccessfully installed Inline-0.80\nInstalling C:\\Dwimperl\\perl\\site\\lib\\MSWin32-x86-multi-thread\\.meta\\Inline-0.80\\install.json\nInstalling C:\\Dwimperl\\perl\\site\\lib\\MSWin32-x86-multi-thread\\.meta\\Inline-0.80\\MYMETA.json\nConfiguring Device-USB-0.36\nRunning Makefile.PL\nERROR: Missing required environment variables to compile under Windows.\n\n    LIBUSB_LIBDIR should contain the path to the libusb libraries\n    LIBUSB_INCDIR should contain the path to the libusb include files\n\n-&gt; N/A\n-&gt; FAIL Configure failed f\n</code></pre>\n"}, {"tags": ["perl", "events", "asynchronous", "firebird"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439969864, "post_id": 32089163, "comment_id": 52073614, "body": "Note: Always put <code>use strict; use warnings;</code> after shebang."}, {"owner": {"reputation": 41, "user_id": 2049193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5295ad82897d6834d5eaa9e93a145614?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/2049193/vlad"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1439970602, "post_id": 32089163, "comment_id": 52074034, "body": "ok, but that won&#39;t help :-) I need some kind of proper main loop or smth."}, {"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 0, "creation_date": 1439986008, "post_id": 32089163, "comment_id": 52084480, "body": "How do you trigger the event? Make sure that you commit, as events are only fired on commit of the transaction, not at the moment you raise it."}, {"owner": {"reputation": 41, "user_id": 2049193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5295ad82897d6834d5eaa9e93a145614?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/2049193/vlad"}, "edited": false, "score": 0, "creation_date": 1440041256, "post_id": 32089163, "comment_id": 52112124, "body": "Mark, you were right, I&#39;ve fixed the problem, now the event is being sent to perl client. But now the perl script fails with segfault. The same functionality php script works though. I&#39;m using [link]<a href=\"http://php.net/manual/ru/book.ibase.php\" rel=\"nofollow noreferrer\">php.net/manual/ru/book.ibase.php</a>"}, {"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 0, "creation_date": 1440078676, "post_id": 32089163, "comment_id": 52132645, "body": "I don&#39;t know perl, but callbacks from the native client library can be troublesome. When rewriting the native implementation in Jaybird I also had some segfaults because I was handling the pointers and the reference to the callback function incorrectly."}], "owner": {"reputation": 41, "user_id": 2049193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5295ad82897d6834d5eaa9e93a145614?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/2049193/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1478145073, "creation_date": 1439969504, "last_edit_date": 1478145073, "question_id": 32089163, "link": "https://stackoverflow.com/questions/32089163/handle-firebird-events-asynchronously-with-perl", "title": "handle firebird events asynchronously with perl", "body": "<p>I'm creating an info board app with data taken from firebird 1.5 database.\nI would like not to use polling but events. </p>\n\n<p>I've created sample trigger which fires up an event in firebird database.\nNow I need a client to listen for and handle the event.\nI've decided to go with perl.\nHere is the doc <a href=\"http://search.cpan.org/dist/DBD-Firebird/Firebird.pm#EVENT_ALERT_SUPPORT\" rel=\"nofollow noreferrer\">DBD::Firebird</a>.\nI'm trying to go with async events.</p>\n\n<p>Here's the code, I give the skeleton which won't work anyway.</p>\n\n<p>The event won't fire up in perl. What am I doing wrong. Please help, thanks!</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse DBI;\n\n$dsn =&lt;&lt; \"DSN\";\ndbi:Firebird:dbname=/home/firebird/dev/db.gdb;\nhost=localhost;\nport=3050;\nib_dialect=3;\nDSN\n\n$dbh =  DBI-&gt;connect($dsn, \"user\", \"password\");\n\n# events of interest\n@event_names = (\"schedule_event\");\n\n$evh = $dbh-&gt;func(@event_names, 'ib_init_event');\n\nmy $cb = sub {.\n    print \"got event\";\n};\n\n$dbh-&gt;func($evh, $cb, 'ib_register_callback');\n\nwhile (1) {\n}\n</code></pre>\n\n<p>UPDATE:\nok here's the php script I'm going with right now, just leave it here maybe it helps someone:</p>\n\n<pre><code>&lt;?php\n\ndeclare(ticks = 1);\n\n$username = \"user\";\n$password = \"password\";\n$host = 'localhost:/home/firebird/base/base.gdb';\n$sockets = array();\n\n$dbh = ibase_connect($host, $username, $password);\n\nfunction event_handler($event_name, $link) {\n    echo $event_name . \"\\n\";\n    send_message($event_name);\n}\n\n# we need to unregister event in firebird before exit\nfunction terminate($signal) {\n    global $event;\n    if (is_null($event)) {\n        die ( \"no event has been registered yet, exiting\" );\n    } else {\n        ibase_free_event_handler($event);\n        die ( \"unregistered evented and exiting\\n\" );\n    }\n}\n\nfunction send_message($msg)\n{\n    $localsocket = 'tcp://127.0.0.1:8010';\n    $instance = stream_socket_client ($localsocket, $errno, $errstr);\n    fwrite($instance, json_encode(['message' =&gt; $msg, 'userId' =&gt; 824])  . \\n\");\n}\n\n$event = ibase_set_event_handler($dbh, \"event_handler\", \"schedule_update\");\n\npcntl_signal(SIGTERM, \"terminate\");\n\nwhile (true) {\n    sleep(1);\n}\n\n?&gt;\n</code></pre>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439969261, "post_id": 32089033, "comment_id": 52073235, "body": "Have you started working on the problem and got stuck?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439970203, "post_id": 32089033, "comment_id": 52073809, "body": "What is stopping you from using your existing program? How is it different? Also, how large are the two files? Can they be held in memory or are we talking GBs of text files?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1439970568, "post_id": 32089033, "comment_id": 52074010, "body": "<code>157784</code> is in file1 (column4) but not in file2. How are you comparing? Your output have this value."}, {"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439970680, "post_id": 32089033, "comment_id": 52074082, "body": "True, its an error in the example output."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1439970746, "post_id": 32089033, "comment_id": 52074121, "body": "So what do you expect us to help you with? There is no question in your question. Do you want to just have the program changed so it works for this file format, or have you tried doing that and couldn&#39;t figure it out?"}], "answers": [{"comments": [{"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439983652, "post_id": 32091442, "comment_id": 52082858, "body": "I&#39;ve updated my answer using the new sample files.  Can you show the exact awk command you are using?"}, {"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439984702, "post_id": 32091442, "comment_id": 52083563, "body": "awk &#39;BEGIN {FS=&quot;[ :-]*&quot;} NR==FNR {a[$4]=$0; next} $2 in a {print a[$2], $0}&#39; rfam.csv rfamFastaTab.csv"}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439985085, "post_id": 32091442, "comment_id": 52083821, "body": "Make sure you you have the files in the right order on the command line. <code>rfam.csv</code> should be the one with the match in column 4, <code>rfamFastaTab.csv</code> should be the one with the ATGC sequences. If it&#39;s the opposite, switch their order on the command line."}, {"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439985977, "post_id": 32091442, "comment_id": 52084460, "body": "the order is corrent, dont know why its does not work"}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439987872, "post_id": 32091442, "comment_id": 52085865, "body": "What does this output?  <code>awk &#39;BEGIN {FS=&quot;[ :-]*&quot;} {print $4}&#39; rfam.csv</code>. And this? <code>awk &#39;BEGIN {FS=&quot;[ :-]*&quot;} {print $2}&#39; rfamFastaTab.csv</code>"}, {"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439988264, "post_id": 32091442, "comment_id": 52086168, "body": "the first outputs numbers with a lot of blank lines"}, {"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439988279, "post_id": 32091442, "comment_id": 52086177, "body": "the second outputs lines with numbers without blank lines"}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1439989428, "post_id": 32091442, "comment_id": 52087055, "body": "The numbers we expect (e.g., &quot;157783&quot;, &quot;564951&quot;, etc.)?"}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 1, "creation_date": 1439992908, "post_id": 32091442, "comment_id": 52089878, "body": "Can you try replacing the <code>BEGIN</code> block with <code>BEGIN {FS=&quot;[\\t :-]+&quot;}</code> (the change is in the file separator)?"}], "tags": [], "owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "is_accepted": true, "score": 1, "last_activity_date": 1440003090, "last_edit_date": 1440003090, "creation_date": 1439976093, "answer_id": 32091442, "question_id": 32089033, "link": "https://stackoverflow.com/questions/32089033/combine-two-files-based-in-a-common-string/32091442#32091442", "title": "Combine two files based in a common string", "body": "<p>This will join the two files on the columns/data requested. It will only print lines if there's a match.</p>\n\n<p><strong>EDIT</strong>: Showing results with new sample data:</p>\n\n<pre><code>$ cat f1\nchr1    Rfam    ncRNA   157783  157887  66.91   -   0   ID=RF00026.1;Name=RF00026;Alias=U6;Note=AL627309.15/147374-147271\nchr1    Rfam    ncRNA   564812  564881  36.11   +   0   ID=RF00005.1;Name=RF00005;Alias=tRNA;Note=AC114498.2/43445-43513\nchr1    Rfam    ncRNA   564878  564950  32.3    -   0   ID=RF00005.2;Name=RF00005;Alias=tRNA;Note=AC114498.2/43582-43511\nchr1    Rfam    ncRNA   564951  565019  28.17   +   0   ID=RF00005.3;Name=RF00005;Alias=tRNA;Note=AC114498.2/43584-43651\nchr1    Rfam    ncRNA   566061  566129  31.36   +   0   ID=RF00005.4;Name=RF00005;Alias=tRNA;Note=AC114498.2/44694-44761\nchr1    Rfam    ncRNA   566136  566205  30.82   -   0   ID=RF00005.5;Name=RF00005;Alias=tRNA;Note=AC114498.2/44837-44769\nchr1    Rfam    ncRNA   566206  566279  35.81   -   0   ID=RF00005.6;Name=RF00005;Alias=tRNA;Note=AC114498.2/44911-44839\nchr1    Rfam    ncRNA   566310  566376  26.05   -   0   ID=RF00005.7;Name=RF00005;Alias=tRNA;Note=AC114498.2/45008-44943\nchr1    Rfam    ncRNA   566376  566441  37.46   -   0   ID=RF00005.8;Name=RF00005;Alias=tRNA;Note=AC114498.2/45073-45009\nchr1    Rfam    ncRNA   568068  568136  31.45   +   0   ID=RF00005.9;Name=RF00005;Alias=tRNA;Note=AC114498.2/46701-46768\n\n$ cat f2\nchr1:157783-157887  aaaaatatggaatgcttcacaaatttgcatgtcattctttcacagaggccgtgccaatctctctattgttccaacttaagtatgtgtgctactgaggcaagcaT\nchr1:564812-564881  AGAAATATGTCTGATAAAAGAGTTACTTTGATAGAGTAAATAATAGGAGTTTAAATCCCCTTATTTcta\nchr1:564878-564950  ctaggactatgagaatcgaacccatccctgagaatccaaaattctccgtgccacctatcacaccccatccta\nchr1:564951-565019  AGTAAGGTCAGCTAAATAAGCTATCGGGCCCATACCCCGAAAATGTTGGTTATATCCTTCCCGTACTA\nchr1:566061-566129  AGAAATTTAGGTTAAATACAGACCAAGAGCCTTCAAAGCCCTCAGTAAGTTGCAATACTTAATTTCTG\nchr1:566136-566205  TAAGGACTGCAAAACCCCACTCTGCATCAACTGAACGCAAATCAGCCACTTTAATTAAGCTAAGCCCTT\nchr1:566206-566279  CTAGACCAATGGGACTTAAACCCACAAACACTTAGTTAACAGCTAAGCACCCTAATCAACTGGCTTCAATCTA\nchr1:566310-566376  AAGCCCCGGCAGGTTTGAAGCTGCTTCTTCGAATTTGCAATTCAATATGAAAATCACCTCAGAGCT\nchr1:566376-566441  GGTAAAAAGAGGCTTAACCCCTGTCTTTAGATTTACAGTCCAATGCTTCACTCAGCCATTTTACC\nchr1:568068-568136  AAGATATTAGAAAAACCATTTCATAACTTTGTCAAAGTTAAATTATAGGCTAAATCCTATATATCTTA\n\n\n$ awk 'BEGIN {FS=\"[\\t :-]+\"} NR==FNR {a[$4]=$0; next} $2 in a {print a[$2], $0}' f1 f2\nchr1    Rfam    ncRNA   157783  157887  66.91   -   0   ID=RF00026.1;Name=RF00026;Alias=U6;Note=AL627309.15/147374-147271 chr1:157783-157887  aaaaatatggaatgcttcacaaatttgcatgtcattctttcacagaggccgtgccaatctctctattgttccaacttaagtatgtgtgctactgaggcaagcaT\nchr1    Rfam    ncRNA   564812  564881  36.11   +   0   ID=RF00005.1;Name=RF00005;Alias=tRNA;Note=AC114498.2/43445-43513 chr1:564812-564881  AGAAATATGTCTGATAAAAGAGTTACTTTGATAGAGTAAATAATAGGAGTTTAAATCCCCTTATTTcta\nchr1    Rfam    ncRNA   564878  564950  32.3    -   0   ID=RF00005.2;Name=RF00005;Alias=tRNA;Note=AC114498.2/43582-43511 chr1:564878-564950  ctaggactatgagaatcgaacccatccctgagaatccaaaattctccgtgccacctatcacaccccatccta\nchr1    Rfam    ncRNA   564951  565019  28.17   +   0   ID=RF00005.3;Name=RF00005;Alias=tRNA;Note=AC114498.2/43584-43651 chr1:564951-565019  AGTAAGGTCAGCTAAATAAGCTATCGGGCCCATACCCCGAAAATGTTGGTTATATCCTTCCCGTACTA\nchr1    Rfam    ncRNA   566061  566129  31.36   +   0   ID=RF00005.4;Name=RF00005;Alias=tRNA;Note=AC114498.2/44694-44761 chr1:566061-566129  AGAAATTTAGGTTAAATACAGACCAAGAGCCTTCAAAGCCCTCAGTAAGTTGCAATACTTAATTTCTG\nchr1    Rfam    ncRNA   566136  566205  30.82   -   0   ID=RF00005.5;Name=RF00005;Alias=tRNA;Note=AC114498.2/44837-44769 chr1:566136-566205  TAAGGACTGCAAAACCCCACTCTGCATCAACTGAACGCAAATCAGCCACTTTAATTAAGCTAAGCCCTT\nchr1    Rfam    ncRNA   566206  566279  35.81   -   0   ID=RF00005.6;Name=RF00005;Alias=tRNA;Note=AC114498.2/44911-44839 chr1:566206-566279  CTAGACCAATGGGACTTAAACCCACAAACACTTAGTTAACAGCTAAGCACCCTAATCAACTGGCTTCAATCTA\nchr1    Rfam    ncRNA   566310  566376  26.05   -   0   ID=RF00005.7;Name=RF00005;Alias=tRNA;Note=AC114498.2/45008-44943 chr1:566310-566376  AAGCCCCGGCAGGTTTGAAGCTGCTTCTTCGAATTTGCAATTCAATATGAAAATCACCTCAGAGCT\nchr1    Rfam    ncRNA   566376  566441  37.46   -   0   ID=RF00005.8;Name=RF00005;Alias=tRNA;Note=AC114498.2/45073-45009 chr1:566376-566441  GGTAAAAAGAGGCTTAACCCCTGTCTTTAGATTTACAGTCCAATGCTTCACTCAGCCATTTTACC\nchr1    Rfam    ncRNA   568068  568136  31.45   +   0   ID=RF00005.9;Name=RF00005;Alias=tRNA;Note=AC114498.2/46701-46768 chr1:568068-568136  AAGATATTAGAAAAACCATTTCATAACTTTGTCAAAGTTAAATTATAGGCTAAATCCTATATATCTTA\n</code></pre>\n"}], "owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 32091442, "answer_count": 1, "score": -1, "last_activity_date": 1440003090, "creation_date": 1439969154, "last_edit_date": 1439969534, "question_id": 32089033, "link": "https://stackoverflow.com/questions/32089033/combine-two-files-based-in-a-common-string", "title": "Combine two files based in a common string", "body": "<p>I would like to combine two files based on a matching string between the two files. in File1 the string is found in column 4 and in File2 the string is found between the symbols \":\" and \"-\"</p>\n\n<p>File1:</p>\n\n<pre><code>chr1    Rfam    ncRNA   157784  157887  66.91   -       .       ID=RF00026.1;Name=RF00026;Alias=U6;Note=AL627309.15/147374-147271\nchr1    Rfam    ncRNA   564813  564881  36.11   +       .       ID=RF00005.1;Name=RF00005;Alias=tRNA;Note=AC114498.2/43445-43513\nchr1    Rfam    ncRNA   564879  564950  32.30   -       .       ID=RF00005.2;Name=RF00005;Alias=tRNA;Note=AC114498.2/43582-43511\nchr1    Rfam    ncRNA   564952  565019  28.17   +       .       ID=RF00005.3;Name=RF00005;Alias=tRNA;Note=AC114498.2/43584-43651\nchr1    Rfam    ncRNA   566062  566129  31.36   +       .       ID=RF00005.4;Name=RF00005;Alias=tRNA;Note=AC114498.2/44694-44761\nchr1    Rfam    ncRNA   566137  566205  30.82   -       .       ID=RF00005.5;Name=RF00005;Alias=tRNA;Note=AC114498.2/44837-44769\nchr1    Rfam    ncRNA   566207  566279  35.81   -       .       ID=RF00005.6;Name=RF00005;Alias=tRNA;Note=AC114498.2/44911-44839\nchr1    Rfam    ncRNA   566311  566376  26.05   -       .       ID=RF00005.7;Name=RF00005;Alias=tRNA;Note=AC114498.2/45008-44943\n</code></pre>\n\n<p>File2:</p>\n\n<pre><code>chr1:157783-157887      aaaaatatggaatgcttcacaaatttgcatgtcattctttcacagaggccgtgccaatctctctattgttccaacttaagtatgtgtgctactgaggcaagcaT\nchr1:564812-564881      AGAAATATGTCTGATAAAAGAGTTACTTTGATAGAGTAAATAATAGGAGTTTAAATCCCCTTATTTcta\nchr1:564878-564950      ctaggactatgagaatcgaacccatccctgagaatccaaaattctccgtgccacctatcacaccccatccta\nchr1:564951-565019      AGTAAGGTCAGCTAAATAAGCTATCGGGCCCATACCCCGAAAATGTTGGTTATATCCTTCCCGTACTA\nchr1:566061-566129      AGAAATTTAGGTTAAATACAGACCAAGAGCCTTCAAAGCCCTCAGTAAGTTGCAATACTTAATTTCTG\nchr1:566136-566205      TAAGGACTGCAAAACCCCACTCTGCATCAACTGAACGCAAATCAGCCACTTTAATTAAGCTAAGCCCTT\nchr1:566206-566279      CTAGACCAATGGGACTTAAACCCACAAACACTTAGTTAACAGCTAAGCACCCTAATCAACTGGCTTCAATCTA\nchr1:566310-566376      AAGCCCCGGCAGGTTTGAAGCTGCTTCTTCGAATTTGCAATTCAATATGAAAATCACCTCAGAGCT\nchr1:566376-566441      GGTAAAAAGAGGCTTAACCCCTGTCTTTAGATTTACAGTCCAATGCTTCACTCAGCCATTTTACC\nchr1:568068-568136      AAGATATTAGAAAAACCATTTCATAACTTTGTCAAAGTTAAATTATAGGCTAAATCCTATATATCTTA\nchr1:568843-568913      CACTGTAAAGCTAACTTAGCATTAACCTTTTAAGTTAAAGATTAAGAGAACCAACACCTCTTTACAGTGA\n</code></pre>\n\n<p>Output:</p>\n\n<p>The output should contain all the columns from both files. </p>\n\n<pre><code>chr1    Rfam    ncRNA   157784  157887  66.91   -       .       ID=RF00026.1;Name=RF00026;Alias=U6;Note=AL627309.15/147374-147271 chr1:157783-157887      aaaaatatggaatgcttcacaaatttgcatgtcattctttcacagaggccgtgccaatctctctattgttccaacttaagtatgtgtgctactgaggcaagcaT\n....\n....\n</code></pre>\n\n<p>I wrote this code to a  similar but not identical problem before:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @files = qw| input.log input1.log |; #you can give here path of files, or use @ARGV if you wish to pass files from command line \nmy %data;\n\nforeach my $filename (@files)\n{\n    open my $fh, '&lt;', $filename or die \"Cannot open $filename for reading: $!\";\n    while (my $line = &lt;$fh&gt;)\n    {\n        chomp $line;\n        my ($col1, $col2) = split /\\s+/, $line;\n        push @{ $data{$col1} }, $col2; #create an hash of array\n    }\n}\nforeach my $col1 (sort keys %data)\n{\n    print join(\"\\t\", $col1, @{ $data{$col1} }), \"\\n\";    \n}\n</code></pre>\n"}, {"tags": ["json", "perl", "data-dumper"], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "edited": false, "score": 0, "creation_date": 1439967775, "post_id": 32088545, "comment_id": 52072447, "body": "Thanks Matt for your response. So this is expected output, is there anyway of printing the correct values like true or false in structure?"}, {"owner": {"reputation": 15514, "user_id": 272193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gj3WX.jpg?s=128&g=1", "display_name": "Matt Healy", "link": "https://stackoverflow.com/users/272193/matt-healy"}, "reply_to_user": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "edited": false, "score": 1, "creation_date": 1439968083, "post_id": 32088545, "comment_id": 52072589, "body": "I have edited my answer to show how to stop this from happening. But note, if you want the literal string <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code> to be printed, your JSON packet will actually need to use <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code> - currently it uses <code>true</code> and <code>false</code> which are not strings."}], "tags": [], "owner": {"reputation": 15514, "user_id": 272193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gj3WX.jpg?s=128&g=1", "display_name": "Matt Healy", "link": "https://stackoverflow.com/users/272193/matt-healy"}, "is_accepted": true, "score": 3, "last_activity_date": 1439967996, "last_edit_date": 1439967996, "creation_date": 1439967622, "answer_id": 32088545, "question_id": 32088196, "link": "https://stackoverflow.com/questions/32088196/perl-json-decode-is-not-giving-expected-result/32088545#32088545", "title": "perl JSON decode is not giving expected result", "body": "<p>The JSON decoder is just \"mapping/pointing\" the values to previous values that have already been parsed. You can see your first <code>created</code> points to</p>\n\n<p><code>$VAR1-&gt;{'data'}[0]{'attributes'}{'active'},</code></p>\n\n<p>, the value of which is <code>true</code>, just like <code>active</code> should be. You are looking at the <code>Data::Dumper</code> representation of the hash array.</p>\n\n<p>If you were to retrieve an element from the Perl variable, you would find that it matches up with your original input:</p>\n\n<p><code>print $result-&gt;{\"data\"}[0]-&gt;{\"attributes\"}-&gt;{\"created\"}; # prints 1</code></p>\n\n<p>To print the <code>Data::Dumper</code> output without this occurring, simply set this flag in your script:</p>\n\n<p><code>$Data::Dumper::Deepcopy = 1;</code></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1440001306, "last_edit_date": 1440001306, "creation_date": 1440001006, "answer_id": 32100789, "question_id": 32088196, "link": "https://stackoverflow.com/questions/32088196/perl-json-decode-is-not-giving-expected-result/32100789#32100789", "title": "perl JSON decode is not giving expected result", "body": "<p>Why do you think it's inaccurate? If we look at the JSON, <code>active</code> and <code>created</code> both have the same value: true. Maybe you'll find it clearer to dump the structure as follows:</p>\n\n<pre><code>use JSON::XS     qw( decode_json );\nuse Data::Dumper qw( );\n\nmy $data = decode_json(&lt;&lt;'__EOI__');\n{\"links\":{\"self\":\"/some/path\"},\"data [{\"type\":\"some_service\",\"id\":\"foo\",\"attributes\": {\"created\":true,\"active\":true,\"suspended\":false}}, {\"type\":\"some_service\",\"id\":\"dummy\",\"attributes\":{\"created\":false}}]}\n__EOI__\n\nprint(Data::Dumper-&gt;Dump(\n   [ JSON::XS::true, JSON::XS::false, $data ],\n   [qw( true false data )],\n));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$true = bless( do{\\(my $o = 1)}, 'JSON::PP::Boolean' );\n$false = bless( do{\\(my $o = 0)}, 'JSON::PP::Boolean' );\n$data = {\n          'data' =&gt; [\n                      {\n                        'attributes' =&gt; {\n                                          'active' =&gt; $true,\n                                          'created' =&gt; $true,\n                                          'suspended' =&gt; $false\n                                        },\n                        'id' =&gt; 'foo',\n                        'type' =&gt; 'some_service'\n                      },\n                      {\n                        'attributes' =&gt; {\n                                          'created' =&gt; $false\n                                        },\n                        'id' =&gt; 'dummy',\n                        'type' =&gt; 'some_service'\n                      }\n                    ],\n          'links' =&gt; {\n                       'self' =&gt; '/some/path'\n                     }\n        };\n</code></pre>\n"}], "owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 32088545, "answer_count": 2, "score": 1, "last_activity_date": 1440001306, "creation_date": 1439966456, "last_edit_date": 1440000942, "question_id": 32088196, "link": "https://stackoverflow.com/questions/32088196/perl-json-decode-is-not-giving-expected-result", "title": "perl JSON decode is not giving expected result", "body": "<p>I have below JSON input -</p>\n\n<blockquote>\n  <p>{\"links\":{\"self\":\"/some/path\"},\"data\": \n  [{\"type\":\"some_service\",\"id\":\"foo\",\"attributes\":\n  {\"created\":true,\"active\":true,\"suspended\":false}},\n  {\"type\":\"some_service\",\"id\":\"dummy\",\"attributes\":{\"created\":false}}]}</p>\n</blockquote>\n\n<p>I am using below code -</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::XS;\nuse Data::Dumper;\n\nmy $result = decode_json($input);\nprint Dumper($result) . \"\\n\";\n</code></pre>\n\n<p>But i am getting below output -</p>\n\n<pre><code>$VAR1 = {\n      'data' =&gt; [\n                  {\n                    'attributes' =&gt; {\n                                      'active' =&gt; bless( do{\\(my $o = 1)}, 'JSON::XS::Boolean' ),\n                                      'created' =&gt; $VAR1-&gt;{'data'}[0]{'attributes'}{'active'},\n                                      'suspended' =&gt; bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' )\n                                    },\n                    'id' =&gt; 'foo',\n                    'type' =&gt; 'some_service'\n                  },\n                  {\n                    'id' =&gt; 'dummy',\n                    'attributes' =&gt; {\n                                      'created' =&gt; $VAR1-&gt;{'data'}[0]{'attributes'}{'suspended'}\n                                    },\n                    'type' =&gt; 'some_service'\n                  }\n                ],\n      'links' =&gt; {\n                   'self' =&gt; '/some/path'\n                 }\n    };\n</code></pre>\n\n<p>Looks like the value in 'created' is $VAR1->{'data'}[0]{'attributes'}{'active'} which does not seems to be accurate and same happens at other places too.</p>\n\n<p>Am i missing somewhere in code or the JSON input has some error?\nKindly provide your suggestions.</p>\n"}, {"tags": ["sql", "linux", "perl", "crontab"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1439953060, "post_id": 32085562, "comment_id": 52067421, "body": "Do you have a reason to avoid the <a href=\"http://metacpan.org/module/DBI\" rel=\"nofollow noreferrer\"><code>DBI</code> module</a>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1439966046, "post_id": 32085562, "comment_id": 52071600, "body": "Can you change your <code>printf</code> to a <code>print</code>? The <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">docs</a> have something interesting to say about using <code>printf</code> with a filehandle and without a list."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1440007459, "post_id": 32085562, "comment_id": 52099432, "body": "@MattJacob: There&#39;s no problem with using <code>printf</code> with just a format string and no parameters. The &quot;list&quot; that the documentation talks about omitting includes the format, as in <code>printf FH</code> which is equivalent to <code>printf FH $_</code>, but with a lexical file handle like <code>printf $fh</code> Perl interprets as printing to the currently-selected output handle using the stringified file handle <code>&quot;$fh&quot;</code> as a format string"}], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1440127085, "post_id": 32085603, "comment_id": 52154409, "body": "It says <code>sh: mysql: command not found fail</code> for a couple of times then there&#39;s <code>SQL file size is 0</code>. The latter is a check I&#39;ve added to check whether the file size is 0. Not sure why the <code>command is not found</code> though. It runs and inserts when I execute the file manually, but not when it&#39;s by cronjob. Sorry for the late (to whoever is reading as well)."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1440129692, "post_id": 32085603, "comment_id": 52155015, "body": "@hzq, then it is indeed what I thought. MySQL is not on the path for your cronjob, because <code>cron</code> gives you a rather minimal environment. On how to fix, see <a href=\"http://stackoverflow.com/questions/1972690/cannot-get-php-cron-script-to-run/1972763#1972763\" title=\"cannot get php cron script to run\">stackoverflow.com/questions/1972690/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/3295611/how-can-i-troubleshoot-why-my-php-script-wont-work-in-cron-when-it-does-from-th/3295657#3295657\" title=\"how can i troubleshoot why my php script wont work in cron when it does from th\">stackoverflow.com/questions/3295611/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/1068071/include-path-and-cron/1068084#1068084\" title=\"include path and cron\">stackoverflow.com/questions/1068071/include-path-and-cron/&hellip;</a>."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 2, "last_activity_date": 1440129982, "last_edit_date": 1495535199, "creation_date": 1439951557, "answer_id": 32085603, "question_id": 32085562, "link": "https://stackoverflow.com/questions/32085562/cronjob-does-not-execute-command-line-in-perl-script/32085603#32085603", "title": "Cronjob does not execute command line in perl script", "body": "<p>First things first, get rid of the <code>&gt; /dev/null 2&gt;&amp;1</code> at the end of your <code>crontab</code> entry (at least temporarily) so you can actually <em>see</em> any errors that may be occurring.</p>\n\n<p>In other words, change it temporarily to something like:</p>\n\n<pre><code>08 10 * * * perl /opt/lampp/htdocs/otpms/Data_Tsunami/scripts/test.pl &gt;/tmp/myfile 2&gt;&amp;1\n</code></pre>\n\n<p>Then you can examine the <code>/tmp/myfile</code> file to see what's being output.</p>\n\n<p>The most <em>likely</em> case is that <code>mysql</code> is not actually on the path in your <code>cron</code> job, because <code>cron</code> itself gives a rather minimal environment.</p>\n\n<p>To fix that problem (assuming that's what it is), see <a href=\"https://stackoverflow.com/questions/3295611/how-can-i-troubleshoot-why-my-php-script-wont-work-in-cron-when-it-does-from-th/3295657#3295657\">this answer</a>, which gives some guidelines on how best to expand the <code>cron</code> environment to give you what you need. That will probably just involve adding the MySQL executable directory to your <code>PATH</code> variable.</p>\n\n<p>The other thing you may want to consider is closing the <code>out_fh</code> file before trying to pass it to <code>mysql</code> - if the buffers haven't been flushed, it may still be an empty file as far as other processes are concerned.</p>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1439965635, "post_id": 32085690, "comment_id": 52071412, "body": "Even better: don&#39;t use <code>glob</code> and construct full paths for all files and directories."}, {"owner": {"reputation": 2291, "user_id": 1577662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4cP0W.jpg?s=128&g=1", "display_name": "Joe T", "link": "https://stackoverflow.com/users/1577662/joe-t"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1440000084, "post_id": 32085690, "comment_id": 52095365, "body": "that would be better but my attempt was to answer the person&#39;s question most directly <code>&quot;why doesn&#39;t this work?&quot;</code> rather than to get all didactic."}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1440127172, "post_id": 32085690, "comment_id": 52154428, "body": "Yeah I just want to understand why. I&#39;ve tried as you suggested but I&#39;m getting the same problem."}], "tags": [], "owner": {"reputation": 2291, "user_id": 1577662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4cP0W.jpg?s=128&g=1", "display_name": "Joe T", "link": "https://stackoverflow.com/users/1577662/joe-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1439952419, "last_edit_date": 1439952419, "creation_date": 1439952107, "answer_id": 32085690, "question_id": 32085562, "link": "https://stackoverflow.com/questions/32085562/cronjob-does-not-execute-command-line-in-perl-script/32085690#32085690", "title": "Cronjob does not execute command line in perl script", "body": "<blockquote>\n  <p>The expression glob(\".* *\") matches all files in the current working\n  directory.\n  - <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/glob.html</a></p>\n</blockquote>\n\n<p>you should not rely on the wd in a cron job. If you want to use a glob (or any file operation) with a relative path, set the wd with chdir first.\nsource: <a href=\"http://www.perlmonks.org/bare/?node_id=395387\" rel=\"nofollow\">http://www.perlmonks.org/bare/?node_id=395387</a></p>\n\n<p>So if your working directory is, for example <code>/home/user</code>, you should insert </p>\n\n<pre><code>chdir('/home/user/');\n</code></pre>\n\n<p>before the <code>WHILE</code>, ie:  </p>\n\n<pre><code>sub insert()\n{\n    my $SQL_COMMAND = \"mysql -u $USERNAME -p'$PASSWORD' \";\n\n    chdir('/home/user/');\n\n    while( my $sql_file = glob '*.sql' )\n    {\n...\n</code></pre>\n\n<p>replace <code>/home/user</code> with wherever your sql files are being created.</p>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1440004169, "post_id": 32085920, "comment_id": 52097576, "body": "The original post says that DBI isn&#39;t installed on the server."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1439953918, "creation_date": 1439953918, "answer_id": 32085920, "question_id": 32085562, "link": "https://stackoverflow.com/questions/32085562/cronjob-does-not-execute-command-line-in-perl-script/32085920#32085920", "title": "Cronjob does not execute command line in perl script", "body": "<p>It's better to do as much processing within Perl as possible. It avoids the overhead of generating a separate shell process and leaves everything under the control of the program so that you can handle any errors much more simply</p>\n\n<p>Database access from Perl is done using the <a href=\"http://metacpan.org/module/DBI\" rel=\"nofollow\"><code>DBI</code> module</a>. This program demonstrates how to achieve what you have written using the <code>mysql</code> utility. As you can see it's also much more concise</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DBI;\n\nmy $host     = \"i\";\nmy $username = \"need\";\nmy $password = \"help\";\n\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:database=test;host=$host\", $username, $password);\n\nmy $insert = $dbh-&gt;prepare('INSERT INTO BOL_LOCK.test(name) VALUES (?)');\n\nmy $rv = $insert-&gt;execute('wow');\n\nprint $rv ? \"pass\\n\" : \"fail\\n\";\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1441242714, "creation_date": 1439951252, "last_edit_date": 1441242714, "question_id": 32085562, "link": "https://stackoverflow.com/questions/32085562/cronjob-does-not-execute-command-line-in-perl-script", "title": "Cronjob does not execute command line in perl script", "body": "<p>I am unfamiliar with linux/linux environment so do pardon me if I make any mistakes, do comment to clarify.</p>\n\n<p>I have created a simple perl script. This script creates a sql file and as shown, it would execute the lines in the file to be inserted into the database.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse POSIX 'strftime';\n\nmy $SQL_COMMAND;\nmy $HOST = \"i\";\nmy $USERNAME = \"need\";\nmy $PASSWORD = \"help\";\nmy $NOW_TIMESTAMP = strftime '%Y-%m-%d_%H-%M-%S', localtime;\n\nopen my $out_fh, '&gt;&gt;', \"$NOW_TIMESTAMP.sql\" or die 'Unable to create sql file';\n\nprintf {$out_fh} \"INSERT INTO BOL_LOCK.test(name) VALUES ('wow');\";\n\nsub insert()\n{\n    my $SQL_COMMAND = \"mysql -u $USERNAME -p'$PASSWORD' \";\n\n    while( my $sql_file = glob '*.sql' )\n    {\n        my $status = system ( \"$SQL_COMMAND &lt; $sql_file\" );\n        if ( $status == 0 )\n        {\n           print \"pass\";\n        }\n        else\n        {\n           print \"fail\";\n        }\n    }\n}\n\ninsert();\n</code></pre>\n\n<p>This works if I execute it while I am logged in as a user(I do not have access to Admin). However, when I set a cronjob to run this file let's say at 10.08am by using the line(in <code>crontab -e</code>):</p>\n\n<pre><code>08 10 * * * perl /opt/lampp/htdocs/otpms/Data_Tsunami/scripts/test.pl &gt; /dev/null 2&gt;&amp;1\n</code></pre>\n\n<p>I know the script is being executed as the sql file is created. However no new rows are inserted into the database after 10.08am. I've searched for solutions and some have suggested using the DBI module but it's not available on the server.</p>\n\n<p>EDIT: Didn't manage to solve it in the end. A root/admin account was used to to execute the script so that \"solved\" the problem.</p>\n"}, {"tags": ["perl", "hadoop"], "comments": [{"owner": {"reputation": 2155, "user_id": 1737350, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/228ebe0b05fe0a8d6c7aff91cb09702b?s=128&d=identicon&r=PG", "display_name": "Amal G Jose", "link": "https://stackoverflow.com/users/1737350/amal-g-jose"}, "edited": false, "score": 0, "creation_date": 1439960392, "post_id": 32084931, "comment_id": 52069436, "body": "Keep the scripts in local file system"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1439959350, "post_id": 32085974, "comment_id": 52069096, "body": "Can you please give the specific command that &quot;link both the files from the local filesystem: as /path/to/mapper&quot;? I actually saw this answer in another post, but I could not figure out how to do that."}, {"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1439960257, "post_id": 32085974, "comment_id": 52069398, "body": "Link to local file system did not work. I tested &quot;hadoop jar /usr/local/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.&zwnj;&#8203;6.0.jar -input words.txt -output output -mapper /path/to/wordCount -file /path/to/wordCountMap.pl -reducer /path/to/wordCountReduce.pl -file /path/to/wordCountReduce.pl&quot; and Hadoop gave &quot;15/08/19 00:48:30 ERROR streaming.PipeMapRed: configuration exception java.io.IOException: Cannot run program &quot;/path/to&quot;: error=13, Permission denied&quot;. But I did change chmod 777 /path/to. Did I miss anything?"}, {"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1439962551, "post_id": 32085974, "comment_id": 52070199, "body": "I finally figured it out. The command should be: hadoop jar /usr/local/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.&zwnj;&#8203;6.0.jar -input words.txt -output output -mapper wordCountMap.pl -file /local_path/to/wordCountMap.pl -reducer wordCountReduce.pl -file /local_path/to/wordCountReduce.pl."}], "tags": [], "owner": {"reputation": 437, "user_id": 5231639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E8Sqr.jpg?s=128&g=1", "display_name": "java_bee", "link": "https://stackoverflow.com/users/5231639/java-bee"}, "is_accepted": false, "score": 0, "last_activity_date": 1439954400, "creation_date": 1439954400, "answer_id": 32085974, "question_id": 32084931, "link": "https://stackoverflow.com/questions/32084931/why-hadoop-streaming-cannot-find-my-script/32085974#32085974", "title": "Why Hadoop Streaming cannot find my script?", "body": "<p>If you checked the instructions carefully on the  <a href=\"http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/\" rel=\"nofollow\">http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/</a></p>\n\n<pre><code>hduser@ubuntu:/usr/local/hadoop$ bin/hadoop jar contrib/streaming/hadoop-*streaming*.jar -file /home/hduser/mapper.py -mapper /home/hduser/mapper.py -file /home/hduser/reducer.py -reducer /home/hduser/reducer.py -input /user/hduser/gutenberg/* -output /user/hduser/gutenberg-output\n</code></pre>\n\n<p>there it clearly shows there is no need to copy the mapper.py and reducer.py to the HDFS, you can link both the files from the local filesystem: as /path/to/mapper. I am sure you can avoid the above error.</p>\n"}], "owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439954400, "creation_date": 1439946402, "last_edit_date": 1439947751, "question_id": 32084931, "link": "https://stackoverflow.com/questions/32084931/why-hadoop-streaming-cannot-find-my-script", "title": "Why Hadoop Streaming cannot find my script?", "body": "<p>I am streaming two scripts wordCountMap.pl and wordCountReduce.pl in Hadoop, which are supposed to count the occurrences of each word in a file.</p>\n\n<p>But Hadoop kept complaining about wordCountMap.pl. My command and output are below.</p>\n\n<p>Command: </p>\n\n<pre><code>hadoop jar /usr/local/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.6.0.jar -input wordCount/words.txt -output output -mapper wordCount/wordCountMap.pl -file wordCount/wordCountMap.pl -reducer wordCount/wordCuntReduce.pl -file wordCount/wordCountReduce.pl\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>15/08/18 20:09:50 WARN streaming.StreamJob: -file option is deprecated, please use generic option -files instead.\n15/08/18 20:09:50 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\nFile: /home/hduser/wordCount/wordCountMap.pl does not exist, or is not readable.\nTry -help for more information\nStreaming Command Failed!\n</code></pre>\n\n<p>However wordCountMap.pl is good (to me), as I typed:</p>\n\n<pre><code>hadoop fs -cat wordCount/wordCountMap.pl\n</code></pre>\n\n<p>and got:</p>\n\n<pre><code>15/08/18 20:21:10 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n    #!/usr/bin/perl -w\n    while(&lt;STDIN&gt;) {\n        chomp;\n        @words = split;\n        foreach $w (@words) {\n            $key = $w;\n            $value = \"1\";\n            print \"$key\\t$value\\n\";\n        }\n    }\n</code></pre>\n\n<p>Can anybody tell me what is wrong in my command? (I think we can safely ignore the WARN message above.)</p>\n\n<p>FYI, wordCountReduce.pl is</p>\n\n<pre><code>#!/usr/bin/perl -w\n$count = 0;\nwhile(&lt;STDIN&gt;) {\n    chomp;\n    ($key,$value) = split \"\\t\";\n\n    if (!defined($oldkey)) {\n        $oldkey = $key;\n        $count  = $value;\n    } else {\n        if ($oldkey eq $key) {\n        $count = $count + $value;\n        } else {\n        print \"$oldkey\\t$count\\n\";\n        $oldkey = $key;\n        $count  = $value;\n        }\n    }\n}\nprint \"$oldkey\\t$count\\n\";\n</code></pre>\n\n<p>and words.txt</p>\n\n<pre><code>a a b\nb c\na\n</code></pre>\n\n<p>and the result of \"hadoop fs -ls wordCount\" is</p>\n\n<pre><code>15/08/18 21:27:54 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\nFound 3 items\n-rw-r--r--   1 hduser supergroup        145 2015-08-18 20:04 wordCount/wordCountMap.pl\n-rw-r--r--   1 hduser supergroup        346 2015-08-18 20:04 wordCount/wordCountReduce.pl\n-rw-r--r--   1 hduser supergroup         12 2015-08-18 20:04 wordCount/words.txt\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["linux", "perl", "oracle11g"], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 3217883, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/20207bb1ce15daab1fc8efd9c637b7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user3217883", "link": "https://stackoverflow.com/users/3217883/user3217883"}, "edited": false, "score": 0, "creation_date": 1439950838, "post_id": 32084889, "comment_id": 52066854, "body": "Thanks!  I wasn&#39;t sure how to deal with the microseconds"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 622, "user_id": 3217883, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/20207bb1ce15daab1fc8efd9c637b7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user3217883", "link": "https://stackoverflow.com/users/3217883/user3217883"}, "edited": false, "score": 0, "creation_date": 1439952632, "post_id": 32084889, "comment_id": 52067317, "body": "@user3217883: If they&#39;re always zeroes then just put them in the format string. If not then remove them first with <code>$s =~ s&#47;.*\\K\\.\\d+&#47;&#47;a</code>. Or you can probably tell Oracle what format to use for the date-time string"}, {"owner": {"reputation": 622, "user_id": 3217883, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/20207bb1ce15daab1fc8efd9c637b7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user3217883", "link": "https://stackoverflow.com/users/3217883/user3217883"}, "edited": false, "score": 0, "creation_date": 1440000755, "post_id": 32084889, "comment_id": 52095691, "body": "Thanks Borodin.  You did in one line what took me 5 using a combination of length, rindex, and substr!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1439947421, "last_edit_date": 1439947421, "creation_date": 1439946047, "answer_id": 32084889, "question_id": 32084580, "link": "https://stackoverflow.com/questions/32084580/convert-oracle-date-to-linux-time/32084889#32084889", "title": "convert Oracle DATE to linux time", "body": "<p>I presume you need all the <code>localtime</code> fields for some sort of date calculation?</p>\n\n<p>The <a href=\"http://metacpan.org/module/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> module is the usual solution to this. It allows you to parse your database time and also overloads <code>localtime</code> to that it returns a <code>Time::Piece</code> object in scalar context</p>\n\n<p>Unfortunately <code>Time::Piece</code> won't parse the fractional seconds field, so if it's not always zero then you will need to remove it from the date-time string</p>\n\n<p>Clearly other calculations are possible once you have both the database value and the current date as <code>Time::Piece</code> objects</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Time::Piece;\nuse Time::Seconds 'ONE_DAY';\n\nmy $s = '14-OCT-14 08.35.00.000000 PM';\n\nmy $dt = Time::Piece-&gt;strptime($s, '%d-%b-%y %H.%M.%S.000000 %p');\n\nmy $now = localtime;\n\nprintf \"%s was %.3f days ago\\n\",\n        $dt-&gt;strftime('%a %d-%b-%Y at %H:%M:%S'),\n        ($now - $dt)-&gt;days;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Tue 14-Oct-2014 at 20:35:00 was 308.190 days ago\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 3217883, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/20207bb1ce15daab1fc8efd9c637b7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user3217883", "link": "https://stackoverflow.com/users/3217883/user3217883"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 32084889, "answer_count": 1, "score": 2, "last_activity_date": 1439947421, "creation_date": 1439943524, "question_id": 32084580, "link": "https://stackoverflow.com/questions/32084580/convert-oracle-date-to-linux-time", "title": "convert Oracle DATE to linux time", "body": "<p>I'm having trouble converting an Oracle DATE field to a linux time format in perl. \nI'm pulling the date field like this:</p>\n\n<pre><code>my $query = \"SELECT RESPONSE_DATE FROM TABLENAME\";\nmy $sth = $dbh-&gt;prepare($query);\n$sth-&gt;execute() or die \"Couldn't execute statement: \" . $sth-&gt;errstr;\nmy @results = $sth-&gt;fetchrow_array();\nprintf \"response_date=%s\",$results[0];\nprintf \"localtime(time)=%s\",localtime(time);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>response_date=14-OCT-14 08.35.00.000000 PM\nlocaltime(time)=Tue Aug 18 23:35:13 2015\n</code></pre>\n\n<p>I can get all the pieces of the local time like this:</p>\n\n<pre><code>my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime(time);\n</code></pre>\n\n<p>But now I need to compare those pieces with similar pieces of response_date.  Any ideas?</p>\n"}, {"tags": ["bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439941622, "post_id": 32084306, "comment_id": 52064740, "body": "Thank you so much -- I&#39;ll keep this in mind when using print in the future!"}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439942084, "post_id": 32084306, "comment_id": 52064866, "body": "One last question -- now the DIS.number files are getting created, but only when the DIS file &gt;0 KB (has something in it). The following code does not seem to output any DIS.number file with &quot;0&quot; in it : <code>if ($string eq &quot;&quot;){           print OUT_FILE &quot;0&quot;;               }</code>   Any idea why this may be? Is this because there isn&#39;t even a line for perl to compare the empty string to?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439944693, "post_id": 32084306, "comment_id": 52065393, "body": "@Justin I suspect that if condition is not being triggered. <code>$string</code> may not be completely empty; it may contain whitespace such as spaces and newlines.  You&#39;re better off checking for <code>$string !~ &#47;\\S&#47;</code> which checks to see if the string doesn&#39;t contain non-whitespace characters.  That&#39;s a double negative and hard to understand, so flip your condition around: <code>if( $string =~ &#47;\\S&#47; ) { print the first two characters } else { print 0 }</code>"}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439948031, "post_id": 32084306, "comment_id": 52066190, "body": "I tried the fix but still have no luck.   In essence, I have a bunch of files in the following format: file-55_357-#.csv.DIS, where # represents all even numbers 0 to 604 (303 files in total). Do you know of a quick workaround perl script or perhaps bash script that would scan to see if, for instance, file-55_357-80.csv.DIS existed and file-55_357-80.csv.DIS.number did not, I would print out another file with &quot;0&quot; in a file titled file-55_357-80.csv.DIS.number.   I&#39;m not sure how to start and isolate the number."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1439941301, "creation_date": 1439941301, "answer_id": 32084306, "question_id": 32084242, "link": "https://stackoverflow.com/questions/32084242/extracting-the-first-two-characters-from-a-file-in-perl-into-another-file/32084306#32084306", "title": "Extracting the first two characters from a file in perl into another file", "body": "<blockquote>\n  <p>When I run this code, I get a list of numbers are concatenated together and empty .DIS.number files.</p>\n</blockquote>\n\n<p>This is because of this line.</p>\n\n<pre><code>print substr($string,0,2);\n</code></pre>\n\n<p><code>print</code> defaults to printing to STDOUT (ie. the screen).  You need to give it the filehandle to print to.</p>\n\n<pre><code>print OUT_FILE substr($string,0,2);\n</code></pre>\n\n<p>They're being concatenated because <code>print</code> just prints what you tell it to, it won't put newlines in for you (there are some <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\">global variables which can change this</a>, don't mess with them).  You have to add the newline yourself.</p>\n\n<pre><code>print OUT_FILE substr($string,0,2), \"\\n\";\n</code></pre>\n\n<hr>\n\n<p>As a final note, when working with files in Perl I would suggest using <a href=\"https://stackoverflow.com/questions/3276674/which-one-is-good-practice-a-lexical-filehandle-or-a-typeglob\">lexical filehandles</a>, <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a>, and <a href=\"http://perldoc.perl.org/autodie.html\" rel=\"nofollow\">autodie</a>.  They will avoid a great number of classic problems working with files in Perl.</p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439950657, "post_id": 32084736, "comment_id": 52066806, "body": "Thanks for the explanation -- where would I exactly provide the argument, if I wanted to print &quot;0&quot; when the length(pre) !=2? Sorry about this, I&#39;m just really new to bash and unused to the syntax."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439951271, "post_id": 32084736, "comment_id": 52066981, "body": "ternary operator assigns zero if length is not equal to two.  <code>a=p?b:c</code> is equivalent to <code>if(p) a=b else a=c</code>.  You can rewrite the last part as <code>if(length(pre)==2) print pre else print 0</code>"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": -1, "last_activity_date": 1439949274, "last_edit_date": 1439949274, "creation_date": 1439944831, "answer_id": 32084736, "question_id": 32084242, "link": "https://stackoverflow.com/questions/32084242/extracting-the-first-two-characters-from-a-file-in-perl-into-another-file/32084736#32084736", "title": "Extracting the first two characters from a file in perl into another file", "body": "<p>this awk script extract the first two chars of each file to it's own file.  Empty files expected to have one empty line based on the spec.</p>\n\n<pre><code>awk 'FNR==1{pre=substr($0,1,2);pre=length(pre)==2?pre:0; print pre &gt; FILENAME\".number\"}' *.DIS\n</code></pre>\n\n<p>This will remove the first 3 chars</p>\n\n<pre><code>cut -c 4-\n</code></pre>\n\n<p>Bash for loop will be better to do both, which we'll need to modify the awk script little bit</p>\n\n<pre><code>for f in *.DIS; \ndo awk 'NR==1{pre=substr($0,1,2);$0=length(pre)==2?pre:0; print}' $f &gt; $f.number; \ncut -c 4- $f &gt; $f.cut; \ndone\n</code></pre>\n\n<p>explanation:  loop through all files in *.DTS, for the first line of each file, try to get first two chars (1,2) of the line ($0) assign to pre.  If the length of pre is not two (either the line is empty or with 1 char only) set the line to 0 or else use pre; print the line, output file name will be input file appended with .number suffix.  The $0 assignment is a trick to save couple keystrokes since print without arguments prints $0, otherwise you can provide the argument.</p>\n\n<p>Ideally you should quote \"$f\" since it may contain space in file name...</p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1439998498, "post_id": 32086008, "comment_id": 52094198, "body": "Thanks -- all files are now showing up, but I am getting a few errors. num_files where the original dis_file had nothing do not have &quot;0&quot; in them. Many of these files just have the same number as another num_file where the original dis_file was nonzero. I receive the error of &quot;Use of uninitialized value $text in print at line 20&quot; and &quot;Use of uninitialized value $text in substitution (s///) at line 13.&quot; I&#39;m not quite sure how to fix this. Is this because some of the dis_files are not defined? Lastly, is there a way to print a &quot;-&quot; in the original DIS files if they are empty? Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440000547, "post_id": 32086008, "comment_id": 52095664, "body": "@Justin: Sorry, I made a silly mistake. It should work better now"}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440002718, "post_id": 32086008, "comment_id": 52096832, "body": "Thanks so much for the help. It does work better now, but I&#39;m still getting an error of &quot;use of uninitialized value $text in substitution (s///) at line 13.&quot; Also, I changed <code>print $fh &quot;-\\n&quot;;</code> to <code>print $fh &quot;0&quot;;</code> -- I was wondering if if I could print &quot;-&quot; in original DIS file, not the new num_file."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440005966, "post_id": 32086008, "comment_id": 52098646, "body": "@Justin: If the substitution is on your line 13 then you&#39;ve omitted two lines from my script; I hope they&#39;re just blank lines! And I&#39;m sorry I&#39;m not thinking straight today; try the new version"}, {"owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "edited": false, "score": 0, "creation_date": 1440008536, "post_id": 32086008, "comment_id": 52100079, "body": "Thanks so much -- it all works correctly now! Just had one question -- I understand that <code>s&#47;^(..).?&#47;&#47;</code> is a substitution, but I was wondering if you could explain to me exactly what is happening there. I would like to keep note of it as I move forward learning perl!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1440005893, "last_edit_date": 1440005893, "creation_date": 1439954646, "answer_id": 32086008, "question_id": 32084242, "link": "https://stackoverflow.com/questions/32084242/extracting-the-first-two-characters-from-a-file-in-perl-into-another-file/32086008#32086008", "title": "Extracting the first two characters from a file in perl into another file", "body": "<p>I suggest you do it like this</p>\n\n<p>Each <code>*.dis</code> file is opened and the contents read into <code>$text</code>. Then a regex substitution is used to remove the first three characters from the string and capture the first two in <code>$1</code></p>\n\n<p>If the substitution succeeded then the contents of <code>$1</code> are written to the number file, otherwise the original file is empty (or shorter than two characters) and a zero is written instead. The remaining contents of <code>$text</code> are then written back to the <code>*.dis</code> file</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10.1;\nuse autodie;\n\nfor my $dis_file ( glob '*.DIS' ) {\n\n    my $text = do {\n        open my $fh, '&lt;', $dis_file;\n        &lt;$fh&gt;;\n    };\n\n    my $num_file = \"$dis_file.number\";\n\n    open my $dis_fh, '&gt;', $dis_file;\n    open my $num_fh, '&gt;', $num_file;\n\n    if ( defined $text and $text =~ s/^(..).?// ) {\n        print $num_fh \"$1\\n\";\n        print $dis_fh $text;\n    }\n    else {\n        print $num_fh \"0\\n\";\n        print $dis_fh \"-\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 5237185, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/kADBj.png?s=128&g=1", "display_name": "JDY", "link": "https://stackoverflow.com/users/5237185/jdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 32086008, "answer_count": 3, "score": 2, "last_activity_date": 1440005893, "creation_date": 1439940675, "last_edit_date": 1439962824, "question_id": 32084242, "link": "https://stackoverflow.com/questions/32084242/extracting-the-first-two-characters-from-a-file-in-perl-into-another-file", "title": "Extracting the first two characters from a file in perl into another file", "body": "<p>I'm having a little bit of trouble with my code below -- I'm trying to figure out how to open up all these text files (.csv files that end in DIS that <strong>all have one line in them</strong>) and get the first two characters (these are all numbers) from them and print them into another file of the same name, with a \".number\" suffix. Some of these .DIS files don't have anything in them, in which case I want to print \"0\". </p>\n\n<p>Lastly, I would like to go through each original .DIS file and delete the first 3 characters -- I did this through bash. </p>\n\n<pre><code>my @DIS = &lt;*.DIS&gt;; \nforeach my $file (@DIS){\n    my $name = $file;\n    my $output = \"$name.number\";\n    open(INHANDLE, \"&lt; $file\") || die(\"Could not open file\"); \n    while(&lt;INHANDLE&gt;){\n        open(OUT_FILE,\"&gt;$output\") || die; \n        my $line = $_;\n        chomp ($line);\n        my $string = $line;\n        if ($string eq \"\"){  \n        print \"0\";      \n        } else {\n        print substr($string,0,2);\n        }   \n    }\n    system(\"sed -i 's/\\(.\\{3\\}\\)//' $file\");  \n}\n</code></pre>\n\n<p>When I run this code, I get a list of numbers are concatenated together and empty .DIS.number files. I'm rather new to Perl, so any help would be appreciated!</p>\n"}, {"tags": ["html", "perl", "cgi", "template-toolkit"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1439940576, "post_id": 32083977, "comment_id": 52064463, "body": "Perhaps you should describe exactly what <i>you</i> have in mind by <i>Dynamic HTML</i>? It is an imprecise term that means different things to different people. And you shouldn&#39;t be waiting until run time to generate fixed markup. There are plenty of HTML editors that will look after keeping what you write well-formed, and you can create the necessary HTML that way and hand it as a template file to <code>Template::Toolkit</code> to insert any parameterised sections. You could do the same with the CSS and JavaScript files, but I suggest that those should remain static"}, {"owner": {"reputation": 697, "user_id": 1670156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aBJai.jpg?s=128&g=1", "display_name": "Arnon Weinberg", "link": "https://stackoverflow.com/users/1670156/arnon-weinberg"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439964000, "post_id": 32083977, "comment_id": 52070732, "body": "OK, I guess that question gives me a hint that generating HTML at run-time is maybe not a common practice.  I&#39;ll see what I can do to clarify my question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440086263, "post_id": 32083977, "comment_id": 52138067, "body": "I&#39;ve moved to <code>Mojolicious</code> - but it&#39;s a bit of a different mindset, as it &#39;runs&#39; as a standalone app."}, {"owner": {"reputation": 697, "user_id": 1670156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aBJai.jpg?s=128&g=1", "display_name": "Arnon Weinberg", "link": "https://stackoverflow.com/users/1670156/arnon-weinberg"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440095842, "post_id": 32083977, "comment_id": 52143237, "body": "@Sobrique, I know Mojo has a different templating system than TT, but does it have a way to generate HTML dynamically in place of CGI?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440098959, "post_id": 32083977, "comment_id": 52144895, "body": "Yes. You can mix perl and html to do for example a table from an array."}, {"owner": {"reputation": 697, "user_id": 1670156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aBJai.jpg?s=128&g=1", "display_name": "Arnon Weinberg", "link": "https://stackoverflow.com/users/1670156/arnon-weinberg"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440102317, "post_id": 32083977, "comment_id": 52146724, "body": "@Sobrique, can you give an example?  I can mix Perl and HTML in TT as well, but still need something better than &quot;print &#39;&lt;tag&gt;&#39;;&quot; to generate HTML...  Is there a link to documentation on generating HTML dynamically in Mojo?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440103931, "post_id": 32083977, "comment_id": 52147605, "body": "Example posted. There&#39;s lots of docs on Mojolicious - almost too much IMO."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 1670156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aBJai.jpg?s=128&g=1", "display_name": "Arnon Weinberg", "link": "https://stackoverflow.com/users/1670156/arnon-weinberg"}, "edited": false, "score": 0, "creation_date": 1440004784, "post_id": 32089917, "comment_id": 52097923, "body": "Re &lt;select&gt;: I think by the time you get to handling default values, optional labels, tag attributes, not to mention optgroups, it does get complicated (same with the attribute list example re handling boolean attributes, and self-closing tags), but this was not a question about preference but about modern Perl standards, so my question is answered, and I appreciate the help.  Building a library of these templates / macros sounds like the way to go (has anyone else done that?)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1439989845, "last_edit_date": 1439989845, "creation_date": 1439971770, "answer_id": 32089917, "question_id": 32083977, "link": "https://stackoverflow.com/questions/32083977/generating-html-dynamically-in-modern-perl-web-frameworks/32089917#32089917", "title": "Generating HTML dynamically in modern Perl web frameworks", "body": "<p>Personally, I'd build the HTML in the template in the same way as the <code>&lt;select&gt;</code> example that you give. The idea is that by separating it out into template that only contain HTML and a small amount of TT code, then it becomes easier for a front-end developer to edit the code without having to know Perl. And I really don't think it's as complex as you make it out to be:</p>\n\n<pre><code>&lt;select name=\"[% select.name %]\"&gt;\n[% FOREACH option IN select.options -%]\n  &lt;option value=\"[% option.value %]\"&gt;[% option.text %]&lt;/option&gt;\n[% END -%]\n&lt;/select&gt;\n</code></pre>\n\n<p>But I also hear people talking about libraries like <a href=\"https://metacpan.org/pod/HTML::FormFu\" rel=\"nofollow\">HTML::FormFu</a>. Something like that might be what you're looking for.</p>\n\n<p><strong>Update:</strong> Got bored at lunch and wrote a tag/attribute example:</p>\n\n<pre><code>&lt;tag [% FOREACH p IN attr.pairs; p.key %]=\"[% p.value %]\" [% END %]&gt;\n</code></pre>\n\n<p>(Assumes that <code>attr</code> is a hash of attribute names and values).</p>\n\n<p>Which got me thinking that writing a library of these TT macros really wouldn't be hard.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1440103884, "creation_date": 1440103884, "answer_id": 32128149, "question_id": 32083977, "link": "https://stackoverflow.com/questions/32083977/generating-html-dynamically-in-modern-perl-web-frameworks/32128149#32128149", "title": "Generating HTML dynamically in modern Perl web frameworks", "body": "<p><a href=\"http://mojolicio.us/\" rel=\"nofollow\">Mojolicious</a> is what I've adopted since stopping using CGI. </p>\n\n<p>A very basic sample of how you could pass an array through into some HTML. You can do more dynamic things with it - from static content all the way to completely on the fly. </p>\n\n<p>A very basic example looks a bit like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Mojolicious::Lite;\n\nget '/' =&gt; sub {\n    my ( $mojo ) = @_; \n\n    my @stuff = qw ( fish carrot egg spoon banana ); \n    $mojo -&gt; stash ( 'stuff' =&gt; \\@stuff ); \n    $mojo -&gt; render (template =&gt; 'index' );\n};\n\napp -&gt; start;\n\n__DATA__\n@@index.html.ep\n\n&lt;BODY&gt;\n  &lt;TABLE BORDER=1&gt;\n      % foreach my $value ( @{ stash('stuff') } ) {\n      &lt;TR&gt;&lt;TD&gt; &lt;%= $value %&gt;&lt;/TR&gt;&lt;/TD&gt;\n      % }\n  &lt;/TABLE&gt;\n&lt;/BODY&gt; \n</code></pre>\n\n<p>You can pass arbitrary variables in via the <code>stash</code> to a template - in this case we pass an array ref. </p>\n\n<p>Couple of caveats - it can actually be a bit overkill for a 'simple' CGI - it's pretty powerful, and runs off it's own process - <code>morbo</code> for dev (defaults to <code>:3000</code> - auto reloads when you change the script) and <code>hypnotoad</code> for prod (defaults to <code>:8080</code>).</p>\n\n<p>This suits me fine, because I run nginx as a reverse proxy, and redirect - so I can fiddle about with a \"dev\" instance, to my heart's content, and just swap ports and runners when I'm ready to go 'live'.  </p>\n\n<p>You can pick out things passed in to your script via <code>param</code> (this picks out either <code>GET</code> parameters or <code>POST</code> parameters.)</p>\n"}], "owner": {"reputation": 697, "user_id": 1670156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aBJai.jpg?s=128&g=1", "display_name": "Arnon Weinberg", "link": "https://stackoverflow.com/users/1670156/arnon-weinberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 1, "accepted_answer_id": 32089917, "answer_count": 2, "score": 4, "last_activity_date": 1440103884, "creation_date": 1439938938, "last_edit_date": 1439972378, "question_id": 32083977, "link": "https://stackoverflow.com/questions/32083977/generating-html-dynamically-in-modern-perl-web-frameworks", "title": "Generating HTML dynamically in modern Perl web frameworks", "body": "<p>What is the \"modern Perl\" recommended way to generate HTML dynamically?</p>\n\n<p>I used to be able to just use <code>CGI::tag ( @attr )</code>, but seems this is <a href=\"https://metacpan.org/pod/CGI::HTML::Functions#SYNOPSIS\" rel=\"nofollow\">deprecated</a> now.  However, reading through <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow\">CGI::Alternatives</a>, I only see examples using static HTML.</p>\n\n<p>I suppose under Template::Toolkit, I would use something like <code>[% html %]</code>, but that still leaves the problem of generating the corresponding $html string.  I'm looking for a library, like CGI, that generates correct HTML tags, with correct escaping, knows about self-closing tags, etc, and is not being deprecated ... unless there is a way of doing things in modern Perl web frameworks that supersedes this altogether.</p>\n\n<p>EDIT:</p>\n\n<p>Some examples:</p>\n\n<ul>\n<li>How do I generate the HTML for a dropdown (<code>&lt;select&gt;</code>) when the values\nand labels are only known at run-time?  The CGI method was just 1\nline: $q->popup_menu ({ name => $name, values => \\@values, labels =>\n\\%labels }); The Template::Toolkit method involves so many lines of\ncode (here is an <a href=\"http://www.perlmonks.org/?node_id=507250\" rel=\"nofollow\">example</a>) ... isn't there another way?</li>\n<li>How do I generate the HTML for a tag whose attributes are not known\nuntil run-time?  In CGI it's just <code>$q-&gt;tag ( \\%attr );</code> ... what is the\nTemplate::Toolkit equivalent?</li>\n<li>How do I generate HTML when a list of tags and their content is not\nknown until run-time?  In CGI it's: <code>$q-&gt;parent ( \\%attr, @child );</code>\n... how is this done in Template::Toolkit?  I realize this is kind of\nvague, but I deal with situations where large amounts of content are\nnot known until run-time, so coming up with a template in advance\nseems untenable to me, but I may not be aware of some advanced\nfeatures of Template::Toolkit.</li>\n<li>I have more complicated cases to deal with as well, such as involving\nrecursion, but if I get the above sorted out, then the rest might fall\ninto place.</li>\n</ul>\n"}, {"tags": ["git", "perl", "continuous-integration", "project-management", "perl-tidy"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1439942303, "post_id": 32083029, "comment_id": 52064912, "body": "Highlight in Vim, execute shell <code>perltidy</code> on visual selection?"}, {"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1439990327, "post_id": 32083029, "comment_id": 52087747, "body": "Oh I see now there is <a href=\"https://github.com/kraih/atom-perltidy\" rel=\"nofollow noreferrer\">github.com/kraih/atom-perltidy</a> and <a href=\"https://github.com/Glavin001/atom-beautify\" rel=\"nofollow noreferrer\">github.com/Glavin001/atom-beautify</a> that worth considering."}], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "edited": false, "score": 1, "creation_date": 1439983856, "post_id": 32084494, "comment_id": 52083001, "body": "So @xxfelixxx it looks like best approach would be for everybody to use respective plugin for the editor they use?. We will discuss the suggested approach."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 10, "last_activity_date": 1441243320, "last_edit_date": 1441243320, "creation_date": 1439942816, "answer_id": 32084494, "question_id": 32083029, "link": "https://stackoverflow.com/questions/32083029/how-to-apply-use-perltidy-with-an-existing-perl-project/32084494#32084494", "title": "How to apply/use Perl::Tidy with an existing Perl project?", "body": "<blockquote>\n  <ol>\n  <li>Define a coding standard and create a <code>.perltidyrc</code> to share with all of the developers.</li>\n  <li>Have tidying be one of the tasks that teams perform for their projects (along with testing and code review), so they tidy/test/review code they touch.</li>\n  <li>Test the code very well.  Tidying can introduce subtle bugs, so it is better in small manageable amounts (as opposed to just tidying the whole codebase, and wondering why things stopped working...)</li>\n  <li>Tidy commits should be on their own, with no other changes, so that regressions can be tied to code changes or tidy changes respectively.  <a href=\"http://git-scm.com/docs/git-bisect\" rel=\"nofollow\">git bisect</a> is great for finding the offending commits.</li>\n  </ol>\n</blockquote>\n\n<p>As for my own perltidy usage, using <em>emacs</em>, I tend to tidy up small chunks of code at a time by highlighting a region ( creating a mark with <code>C-space</code>, navigating to highlight a region, and then running <code>M-p</code> which I have mapped to <code>perltidy-region</code>.  To get this to work, install <code>perltidy</code> and add the following to your <code>.emacs</code> file:</p>\n\n<pre><code>(defun perltidy-region ()\n    \"Run perltidy on the current region.\"\n    (interactive)\n    (save-excursion\n      (shell-command-on-region (point) (mark) \"perltidy -q\" nil t)))\n(defun perltidy-defun ()\n    \"Run perltidy on the current defun.\"\n    (interactive)\n    (save-excursion (mark-defun)\n    (perltidy-region)))\n\n(global-set-key \"\\M-p\" 'perltidy-region)\n</code></pre>\n"}], "owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "accepted_answer_id": 32084494, "answer_count": 1, "score": 7, "last_activity_date": 1441243320, "creation_date": 1439933951, "last_edit_date": 1439983578, "question_id": 32083029, "link": "https://stackoverflow.com/questions/32083029/how-to-apply-use-perltidy-with-an-existing-perl-project", "title": "How to apply/use Perl::Tidy with an existing Perl project?", "body": "<p>This question is not so much technical than looking for advise to find the proper approach that will not hurt.</p>\n\n<p>Assuming the following:</p>\n\n<ol>\n<li>We have a big application developed in Perl.</li>\n<li>We want to start using perltidy on the commandline to impose uniform\nstyle/rules for formatting</li>\n<li>We have many branches that we do not know exactly when will be\nmerged to the master branch. They should be tidied too somehow before or after the merge</li>\n<li>We want to avoid any conflicts in commits caused by formating.</li>\n</ol>\n\n<p>I thought about starting to format on subroutine level, but I do not find such feature in perltidy. There is another feature \"<a href=\"https://metacpan.org/pod/perltidy#Skipping-Selected-Sections-of-Code\" rel=\"nofollow\">Skipping Selected Sections of Code</a>\", but now I may want the opposite -- format only selected sections of code. The idea is that when a developer touches part of the code he/she will tidy only the modified part.</p>\n\n<p>The best would be to find a way to format the whole project once without disrupting the development cycle and making sure we do not break any part of the code (during merging). We have unit tests, but some parts of the code may still be uncovered. </p>\n\n<p>Let me also clarify that everybody in the team uses potentially different editor. For example I use Sublime Text 3 with <a href=\"https://github.com/vifo/SublimePerlTidy\" rel=\"nofollow\">SublimePerlTidy</a>. Other people use <a href=\"http://kate-editor.org/\" rel=\"nofollow\">Kate</a> or <a href=\"https://atom.io/\" rel=\"nofollow\">Atom</a> or <a href=\"http://www.vim.org/\" rel=\"nofollow\">VIM</a>. A proper approach seem to be to format only pieces of code that we touch as pointed by @xxfelixxx (Thank you!)</p>\n"}, {"tags": ["perl", "catalyst", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 872, "user_id": 2826892, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/477460f653d800b374ce3451d6ddba49?s=128&d=identicon&r=PG&f=1", "display_name": "mikew", "link": "https://stackoverflow.com/users/2826892/mikew"}, "edited": false, "score": 0, "creation_date": 1439958540, "post_id": 32084234, "comment_id": 52068874, "body": "The model doesn&#39;t want the instantiated dbic schema instance. It wants the class and the connect_info in order to instantiate it itself, which is all i&#39;ve ever seen done. passing a schema object as a parameter to schema_class doesn&#39;t seem proper. your connect_info sub did not return any connection info. It wants to know how to connect to get a connected schema object."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 872, "user_id": 2826892, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/477460f653d800b374ce3451d6ddba49?s=128&d=identicon&r=PG&f=1", "display_name": "mikew", "link": "https://stackoverflow.com/users/2826892/mikew"}, "edited": false, "score": 0, "creation_date": 1439958838, "post_id": 32084234, "comment_id": 52068961, "body": "the connect_info sub isn&#39;t getting called at all. Afaik, the code, as linked, is called <code>$schema_class-&gt;storage-&gt;connect_info</code>. You only have a <code>$schema_class-&gt;storage</code> if $schema_class, is really already a schema object (if you&#39;ve already connected)."}], "tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": false, "score": 0, "last_activity_date": 1448387428, "last_edit_date": 1448387428, "creation_date": 1439940628, "answer_id": 32084234, "question_id": 32082540, "link": "https://stackoverflow.com/questions/32082540/how-do-i-create-a-catalystmodeldbicschema-from-a-dbicschema/32084234#32084234", "title": "How do I create a Catalyst::Model::DBIC::Schema from a DBIC::Schema?", "body": "<p>So.. I'm not sure this is right so I won't mark it as accepted but I was pretty damn close.. This line is dead on..</p>\n\n<pre><code>__PACKAGE__-&gt;config('schema_class', MyApp::Schema-&gt;new_schema)\n</code></pre>\n\n<p>And the code is in place for that to work, as per the link above on <a href=\"https://metacpan.org/source/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema.pm#L480\" rel=\"nofollow\">line 480 of Catalyst::Model::DBIC::Schema</a>. However, the type is wrong..</p>\n\n<p>The <a href=\"https://metacpan.org/source/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema.pm#L435\" rel=\"nofollow\">type of schema_class is <code>SchemaClass</code></a>. And, <a href=\"https://metacpan.org/source/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema/Types.pm#L29\" rel=\"nofollow\">SchemaClass is defined here</a></p>\n\n<pre><code>subtype SchemaClass,\n    as LoadableClass,\n    where { $_-&gt;isa('DBIx::Class::Schema') };\n</code></pre>\n\n<p>Now, <code>SchemaClass</code> is a subtype of a <a href=\"https://metacpan.org/pod/MooseX::Types::LoadableClass\" rel=\"nofollow\"><code>MooseX::Types::LoadableClass</code></a> which essentially just takes a package name and requires it..</p>\n\n<p>The problem is LoadableClass doesn't take an instance of DBIC::Schema. Anyway.. I was just changed it too..</p>\n\n<pre><code>has schema_class =&gt; (\n    is =&gt; 'ro',\n    isa =&gt; 'Object',\n    required =&gt; 1\n);\n</code></pre>\n\n<p>Now I can stuff an instantiated schema into schema_class and pass the conditional <code>if($schema_class-&gt;storage &amp;&amp; $schema_class-&gt;storage-&gt;connect_info)</code>.</p>\n\n<p>I filed a <a href=\"https://rt.cpan.org/Ticket/Display.html?id=106530&amp;results=84ac4e9ace366aafb37553d7548d666a\" rel=\"nofollow\">bug on this here</a></p>\n"}, {"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1439962034, "post_id": 32086665, "comment_id": 52069988, "body": "No, it wouldn&#39;t that&#39;s one example. My Schema has very complex connection logic, and it can connect itself. I want to let the Schema handle the connection and logic and clearly, as the code referenced supports there is logic to do that... And, as the error message supports the functionality should be there <i>or MyApp::Schema must have connect info defined on it.</i>"}, {"owner": {"reputation": 872, "user_id": 2826892, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/477460f653d800b374ce3451d6ddba49?s=128&d=identicon&r=PG&f=1", "display_name": "mikew", "link": "https://stackoverflow.com/users/2826892/mikew"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1439964472, "post_id": 32086665, "comment_id": 52070900, "body": "Ahh good deal then. We also have complicated connection logic but at the end of the day, it&#39;s always a dsn, user pass and options. That logic is encapsulated and both the schema and model adapter class use it. In the Model an <code>around BUILDARGS</code> modifier is used to call the complicated logic to get the dsn user pass and adjust the connection_info and the model is happily instantiated. Glad you got yours working as well. Cheers."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1440000872, "post_id": 32086665, "comment_id": 52095750, "body": "Well, I got mine working by hacking <code>C:M:DBIC:S</code>. But, afaik, that was that intent. Unless someone can explain to me how the code on L480 was supposed to work, I think it&#39;s a bug."}], "tags": [], "owner": {"reputation": 872, "user_id": 2826892, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/477460f653d800b374ce3451d6ddba49?s=128&d=identicon&r=PG&f=1", "display_name": "mikew", "link": "https://stackoverflow.com/users/2826892/mikew"}, "is_accepted": false, "score": -1, "last_activity_date": 1439959400, "last_edit_date": 1439959400, "creation_date": 1439959056, "answer_id": 32086665, "question_id": 32082540, "link": "https://stackoverflow.com/questions/32082540/how-do-i-create-a-catalystmodeldbicschema-from-a-dbicschema/32086665#32086665", "title": "How do I create a Catalyst::Model::DBIC::Schema from a DBIC::Schema?", "body": "<p>From the documentation you <a href=\"https://metacpan.org/pod/release/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema.pm\" rel=\"nofollow\">referenced</a>, your <code>MyCatApp::Model::MyApp</code> would look like this:</p>\n\n<pre><code>__PACKAGE__-&gt;config(\n  schema_class =&gt; 'MyApp::Schema',\n  connect_info =&gt; {\n    dsn =&gt; 'dbi:Pg:dbname=mypgdb',\n    user =&gt; 'postgres',\n    password =&gt; '',\n    pg_enable_utf8 =&gt; 1,\n    on_connect_do =&gt; [\n      'some SQL statement',\n      'another SQL statement',\n    ],\n  }\n);\n</code></pre>\n\n<p>And in your controller, you would:</p>\n\n<p><code>my $db = $c-&gt;model('MyApp');</code></p>\n"}, {"tags": [], "owner": {"reputation": 3918, "user_id": 669631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sOwLc.jpg?s=128&g=1", "display_name": "M Somerville", "link": "https://stackoverflow.com/users/669631/m-somerville"}, "is_accepted": false, "score": 0, "last_activity_date": 1499852018, "creation_date": 1499852018, "answer_id": 45053878, "question_id": 32082540, "link": "https://stackoverflow.com/questions/32082540/how-do-i-create-a-catalystmodeldbicschema-from-a-dbicschema/45053878#45053878", "title": "How do I create a Catalyst::Model::DBIC::Schema from a DBIC::Schema?", "body": "<p>You could instantiate the connection info in your <code>MyApp::Schema</code> by in it doing:</p>\n\n<p><code>__PACKAGE__-&gt;connection(@your_connection_details);</code></p>\n\n<p>This will set up a Storage on the class itself, not a schema object. This will then pass the <code>Catalyst::Model::DBIC::Schema</code> check and work successfully. I think this achieves what you're after without changing the underlying classes (though might depend on the details not included).</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 521, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1499852018, "creation_date": 1439931976, "last_edit_date": 1440108813, "question_id": 32082540, "link": "https://stackoverflow.com/questions/32082540/how-do-i-create-a-catalystmodeldbicschema-from-a-dbicschema", "title": "How do I create a Catalyst::Model::DBIC::Schema from a DBIC::Schema?", "body": "<p>Total lack of documentation makes this difficult..</p>\n\n<p>Essentially, I have</p>\n\n<pre><code>package MyApp::Schema;\nsub new_schema {\n   __PACKAGE__-&gt;connect(...)\n}\n</code></pre>\n\n<p>Then I have</p>\n\n<pre><code>package MyCatApp::Model::MyApp;\nuse Moose;\nextends 'Catalyst::Model::DBIC::Schema';\n\n## what here;\n\n_PACKAGE__-&gt;make_immutable;\n</code></pre>\n\n<p>How do I make this work? If I have this in my config...</p>\n\n<pre><code>&lt;Model::MyApp&gt;\n        schema_class   MyApp::Schema\n        traits Caching\n        user_defined_schema_accessor foo\n&lt;/Model::MyApp&gt;\n</code></pre>\n\n<p>I get the <a href=\"https://metacpan.org/source/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema.pm#L480\" rel=\"nofollow\">following error</a>:</p>\n\n<blockquote>\n  <p>BEGIN failed--compilation aborted at MyCatapp.psgi line 4,  line 1.\n  Error while loading MyCatapp.psgi: Couldn't instantiate component \"Either ->config->{connect_info} must be defined for MyCatApp::Model::MyApp or MyApp::Schema must have connect info defined on it.</p>\n</blockquote>\n\n<p>But adding <code>sub connect_info {}</code> in <code>MyApp::Schema</code> does not change anything. That error is generated on <a href=\"https://metacpan.org/source/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema.pm#L480\" rel=\"nofollow\">line 480 of this file</a>.</p>\n\n<p>That method seems to be looking at <code>$schema_class-&gt;storage-&gt;connect_info</code> which I believe is an method on an instantiated object, and not a function in the package. However, if I try to set </p>\n\n<pre><code>__PACKAGE__-&gt;config('schema_class', MyApp::Schema-&gt;new_schema)\n</code></pre>\n\n<p>I then get...</p>\n\n<blockquote>\n  <p>Error while loading : Couldn't instantiate component \"MyCatApp::Model::MyApp\", \"Attribute (schema_class) does not pass the type constraint because: Validation failed for 'Catalyst::Model::DBIC::Schema::Types::SchemaClass' with value MyApp::Schema=HASH(0xb4a5ff0) at /usr/local/lib/perl/5.18.2/Moose/Exception.pm line 37</p>\n</blockquote>\n\n<p>So, how do I go about doing this...</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 1406, "user_id": 3337836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FBbZh.jpg?s=128&g=1", "display_name": "isosceleswheel", "link": "https://stackoverflow.com/users/3337836/isosceleswheel"}, "edited": false, "score": 1, "creation_date": 1439930906, "post_id": 32082237, "comment_id": 52060720, "body": "What language is actually doing the comparison as the end step?"}, {"owner": {"reputation": 139, "user_id": 1307285, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d26ba719843acfe8397365cd46452fc3?s=128&d=identicon&r=PG", "display_name": "panchanan", "link": "https://stackoverflow.com/users/1307285/panchanan"}, "reply_to_user": {"reputation": 1406, "user_id": 3337836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FBbZh.jpg?s=128&g=1", "display_name": "isosceleswheel", "link": "https://stackoverflow.com/users/3337836/isosceleswheel"}, "edited": false, "score": 0, "creation_date": 1440009542, "post_id": 32082237, "comment_id": 52100714, "body": "it may be python or perl. anything is fine."}, {"owner": {"reputation": 139, "user_id": 1307285, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d26ba719843acfe8397365cd46452fc3?s=128&d=identicon&r=PG", "display_name": "panchanan", "link": "https://stackoverflow.com/users/1307285/panchanan"}, "reply_to_user": {"reputation": 1406, "user_id": 3337836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FBbZh.jpg?s=128&g=1", "display_name": "isosceleswheel", "link": "https://stackoverflow.com/users/3337836/isosceleswheel"}, "edited": false, "score": 0, "creation_date": 1440011615, "post_id": 32082237, "comment_id": 52101968, "body": "I am executing all python and perl files in window system.so how can I compare?"}], "answers": [{"comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1439933333, "post_id": 32082301, "comment_id": 52061918, "body": "Why not strip using the shell instead of <code>sed</code>?  <code>python_result=${python_result#*:}</code>"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1439933964, "post_id": 32082301, "comment_id": 52062207, "body": "Good idea, old habits... :)"}, {"owner": {"reputation": 139, "user_id": 1307285, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d26ba719843acfe8397365cd46452fc3?s=128&d=identicon&r=PG", "display_name": "panchanan", "link": "https://stackoverflow.com/users/1307285/panchanan"}, "edited": false, "score": 0, "creation_date": 1440073672, "post_id": 32082301, "comment_id": 52128834, "body": "Thanks for the input. I am doing all comparison in windows machine. pls help."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440085006, "post_id": 32082301, "comment_id": 52137311, "body": "You could instead have one of the scripts invoke the other script, and capture its output into a variable. E.g. perl can do <code>$python_result=`python_prog`;</code>."}, {"owner": {"reputation": 139, "user_id": 1307285, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d26ba719843acfe8397365cd46452fc3?s=128&d=identicon&r=PG", "display_name": "panchanan", "link": "https://stackoverflow.com/users/1307285/panchanan"}, "edited": false, "score": 0, "creation_date": 1440096229, "post_id": 32082301, "comment_id": 52143458, "body": "while i am doing likethis , it is saying &quot;illegal declaration of anonymous subroutine at test1.pl&quot;.   test1.pl contains function average . and i am calling function sub here.  could you please give the example by taking above 2 subroutines."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440096586, "post_id": 32082301, "comment_id": 52143634, "body": "I don&#39;t use Windows much, but I suspect <code>#!&#47;usr&#47;bin&#47;perl</code> doesn&#39;t work there."}], "tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1439933954, "last_edit_date": 1439933954, "creation_date": 1439930917, "answer_id": 32082301, "question_id": 32082237, "link": "https://stackoverflow.com/questions/32082237/how-to-compare-two-variable-one-is-perl-variable-and-another-is-python-variable/32082301#32082301", "title": "How to compare two variable. one is perl variable and another is python variable", "body": "<p>Call the programs from the shell, strip off the words before the numbers, and compare them:</p>\n\n<pre><code>python_result=$(python_prog)\nperl_result=$(perl_prog)\nperl_result\nif [ \"${python_result#*:}\" = \"${perl_result#*: }\" ]\nthen echo They match\nelse echo No match\nfi\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 1307285, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d26ba719843acfe8397365cd46452fc3?s=128&d=identicon&r=PG", "display_name": "panchanan", "link": "https://stackoverflow.com/users/1307285/panchanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439933954, "creation_date": 1439930624, "last_edit_date": 1439930747, "question_id": 32082237, "link": "https://stackoverflow.com/questions/32082237/how-to-compare-two-variable-one-is-perl-variable-and-another-is-python-variable", "title": "How to compare two variable. one is perl variable and another is python variable", "body": "<p>I am getting one output from perl subroutine and another output from python function.</p>\n\n<p>I want to compare these two variables so that I can conclude both outputs are same.</p>\n\n<p>ex-python function</p>\n\n<pre><code>#!usr/bin/lib/python\nimport os,sys\ndef sub(a, b):\n   e= a-b\n   return e\n\n   #calling function\n   p = sub(9,2)\n   print \"value of P:%s\" %p\n</code></pre>\n\n<p>o/p  value of p : 7</p>\n\n<p>perl subroutine---</p>\n\n<pre><code>#!/usr/bin/perl\nmy $average;\nsub Average{\n   $n = scalar(@_);\n   $sum = 0;\n\n   foreach $item (@_){\n      $sum += $item;\n      }\n      $average = $sum / $n;\n      return $average;\n      }\n\n #calling subroutine\n $average = Average(11,3);\n print \"my avearage : $average\";\n</code></pre>\n\n<p>o/p   my avarage: 7</p>\n\n<p>since this is two different language, I am facing problem in comparing p value with average.</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1439922613, "post_id": 32079809, "comment_id": 52056151, "body": "What&#39;s your logic on picking one of the multiple join results?  First one?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1439923178, "post_id": 32079809, "comment_id": 52056474, "body": "You should have also matched first records of the files!"}, {"owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1439923475, "post_id": 32079809, "comment_id": 52056644, "body": "I forgot to mention, if field 2 matches from files 1 and 2, then the output should reflect fields 2, 7, 8 and 9 from the same entry in File 2"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1439924832, "post_id": 32079809, "comment_id": 52057342, "body": "I have absolutely no idea what <code>if field 2 matches from files 1 and 2, then the output should reflect fields 2, 7, 8 and 9 from the same entry in File 2</code> means or how that statement relates to your other requirements. Update your question to show a clear example that demonstrates all of your requirements."}], "answers": [{"comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1439923262, "post_id": 32080206, "comment_id": 52056523, "body": "This ignores duplicate keys from the first file but matches them to multiple records from the second.  Uniqueness is not consistently applied."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1439923393, "post_id": 32080206, "comment_id": 52056595, "body": "@karakfa absolutely correct. Until the OP tells us more about his requirements we&#39;re stuck and hopefully this shows him one way in which what he&#39;s told us so far is inadequate (or his posted sample input/output is wrong)."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1439922979, "creation_date": 1439922979, "answer_id": 32080206, "question_id": 32079809, "link": "https://stackoverflow.com/questions/32079809/script-to-find-fields-1-and-5-matching-in-two-files-print-combination-of-fields/32080206#32080206", "title": "script to find fields 1 and 5 matching in two files, print combination of fields from both files for those lines", "body": "<p>From your description all you need is:</p>\n\n<pre><code>$ cat tst.awk\nNR==FNR { file1[$1,$5] = $3 OFS $6 OFS $7; next }\n($1,$5) in file1 { print file1[$1,$5], $7, $8, $9 }\n\n$ awk -f tst.awk file1 file2\nrs201370260 rs201370260 1 1.05876 0.0112 3.69E-7\nrs201370260 rs1052977 0.894315 1.05306 0.0117 9.224E-6\nrs201370260 rs1052977 0.894315 1.05043 0.0107 4.477E-6\n</code></pre>\n\n<p>but I've no idea why your expected output is the 2 lines you show in your question instead of the 3 lines above. You need to edit your question to tell us how you want to resolve duplicate keys in file1 and in file2.</p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1439926706, "creation_date": 1439926706, "answer_id": 32081214, "question_id": 32079809, "link": "https://stackoverflow.com/questions/32079809/script-to-find-fields-1-and-5-matching-in-two-files-print-combination-of-fields/32081214#32081214", "title": "script to find fields 1 and 5 matching in two files, print combination of fields from both files for those lines", "body": "<p>Does the following do what you want? It's not very elegant with the time I had to play around. Note that arrays start at <code>0</code>, so every 'field' number you specified has been reduced by 1.    </p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen my $fh1, '&lt;', 'f1.txt' or die $!;\nopen my $fh2, '&lt;', 'f2.txt' or die $!;\n\nmy @fh2 = &lt;$fh2&gt;;\n\nwhile (&lt;$fh1&gt;){\n\n    my $fh2_elem = shift @fh2;\n\n    my $same = 0;\n\n    for my $col (qw(0 4)){\n        if(((split)[$col]) eq ((split /\\s+/, $fh2_elem)[$col])){\n            $same = 1;\n        }\n        last if ! $same;\n    }\n\n    if ($same){\n       print( (join ' ', (split)[2,5,4,6], (split /\\s+/, $fh2_elem)[6,7,8]) );\n       print \"\\n\";\n    }\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>rs201370260 rs201370260 49841950 1 1.05876 0.0112 3.69E-7\nrs201370260 rs75811775 49841652 0.983883 0.98738 0.0131 0.3326\nrs201370260 rs200980145 49694713 0.899981 1.05306 0.0117 9.224E-6\nrs201370260 rs1052977 49694713 0.894315 1.05043 0.0107 4.477E-6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1439928454, "last_edit_date": 1439928454, "creation_date": 1439928132, "answer_id": 32081623, "question_id": 32079809, "link": "https://stackoverflow.com/questions/32079809/script-to-find-fields-1-and-5-matching-in-two-files-print-combination-of-fields/32081623#32081623", "title": "script to find fields 1 and 5 matching in two files, print combination of fields from both files for those lines", "body": "<p>Simply use hash to filter out duplicates coming from the file.Make a <code>2D</code> hash of <code>1st</code> and <code>5th</code> field and check it before pushing values in <code>@loci</code> array.</p>\n\n<p>Try This:</p>\n\n<pre><code>#!/usr/bin/perl -w                                                                                                              \nuse strict;\nuse warnings;\n\nmy @loci;\nmy %hash;\nopen( my $loci_in, \"&lt;\", \"file2\" ) or die $!;\nwhile (&lt;$loci_in&gt;) {\n    my ( $chr, $rsID, $A1, $A2, $bp, $info, $or, $se, $p, $ngt ) = split;\n    next if m/hg19chrc/;\n    if ( !$hash{$chr}{$bp} ) {    # check if previously the same record exists\n        push @loci, [ $chr, $rsID, $A1, $A2, $bp, $info, $or, $se, $p, $ngt ];\n        $hash{$chr}{$bp} = 1;     # otherwise set the record\n    }\n}\nclose $loci_in;\n\n#my $filename = shift @ARGV;\nopen( my $input, \"&lt;\", \"file1\" ) or die $!;\n\n#print \"rsID1 rsID2 bp2 r2 or se p\\n\";\nwhile (&lt;$input&gt;) {\n    next if m/chr/;\n    my ( $chr1, $bp1, $rsID1, $chr2, $bp2, $rsID2, $r2 ) = split;\n    foreach my $locus (@loci) {\n        if (    $chr2 =~ /^$locus-&gt;[0]$/\n            and $bp2 =~ /^$locus-&gt;[4]$/ )\n        {\n            print\n              \"$rsID1 $rsID2 $bp2 $r2 $locus-&gt;[6] $locus-&gt;[7] $locus-&gt;[8]\\n\";\n            next;\n        }\n    }\n}\nclose($input);\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>rs201370260 rs201370260 49841950 1 1.05876 0.0112 3.69E-7\nrs201370260 rs200980145 49694713 0.899981 1.05306 0.0117 9.224E-6\nrs201370260 rs1052977 49694713 0.894315 1.05306 0.0117 9.224E-6\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1439928454, "creation_date": 1439921689, "last_edit_date": 1439925862, "question_id": 32079809, "link": "https://stackoverflow.com/questions/32079809/script-to-find-fields-1-and-5-matching-in-two-files-print-combination-of-fields", "title": "script to find fields 1 and 5 matching in two files, print combination of fields from both files for those lines", "body": "<p>I would like to find rows where fields 1 and 5 from File 1 match fields 1 and 5 from File 2, and from those rows, print fields 3, 6, 5, and 7 from File 1 and fields 7, 8, and 9 from File 2.</p>\n\n<p>File 1:</p>\n\n<pre><code> 5     49841950  rs201370260      5     49841950  rs201370260            1 \n 5     49841950  rs201370260      5     49841652   rs75811775     0.983883 \n 5     49841950  rs201370260      5     49694713  rs200980145     0.899981 \n 5     49841950  rs201370260      5     49694713    rs1052977     0.894315 \n</code></pre>\n\n<p>File 2: </p>\n\n<pre><code>5 5_49841950_D I2 D 49841950 0.882 1.05876 0.0112 3.69E-7 0\n5 rs28680688 C G 12114 0.842 0.98738 0.0131 0.3326 0\n5 5_49694713_I I2 D 49694713 0.864 1.05306 0.0117 9.224E-6 0\n5 rs1052977 A T 49694713 0.982 1.05043 0.0107 4.477E-6 0\n</code></pre>\n\n<p>I have a script to do this:</p>\n\n<pre><code>#! perl -w                                                                                                              \nuse strict;\nuse warnings;\n\nmy @loci;\nopen( my $loci_in, \"&lt;\", \"File 2\" ) or die $!;\nwhile (&lt;$loci_in&gt;) {\n    my ( $chr, $rsID, $A1, $A2, $bp, $info, $or, $se, $p, $ngt ) = split;\n    next if m/hg19chrc/;\n    push @loci, [$chr, $rsID, $A1, $A2, $bp, $info, $or, $se, $p, $ngt];\n}\nclose $loci_in;\n\nmy $filename = shift @ARGV;\nopen( my $input, \"&lt;\", \"File 1\") or die $!;\nprint \"rsID1 rsID2 bp2 r2 or se p\\n\";\nwhile (&lt;$input&gt;) {\n    next if m/chr/;\n        my ( $chr1, $bp1, $rsID1, $chr2, $bp2, $rsID2, $r2 ) = split;\n    foreach my $locus (@loci) {\n        if (    $chr2 =~ /^$locus-&gt;[0]$/\n                and $bp2 =~ /^$locus-&gt;[4]$/)                                                                            \n        {\n            print \"$rsID1 $rsID2 $bp2 $r2 $locus-&gt;[6] $locus-&gt;[7] $locus-&gt;[8]\\n\";\n            next;\n        }\n    }\n}\nclose($input);\n</code></pre>\n\n<p>I'm having a problem when there are multiple matching fields 1 and 5. For example, File 1 entries</p>\n\n<pre><code> 5     49841950  rs201370260      5     49694713  rs200980145     0.899981 \n 5     49841950  rs201370260      5     49694713    rs1052977     0.894315 \n</code></pre>\n\n<p>match the two File 2 entries:</p>\n\n<pre><code>5 5_49694713_I I2 D 49694713 0.864 1.05306 0.0117 9.224E-6 0\n5 rs1052977 A T 49694713 0.982 1.05043 0.0107 4.477E-6 0\n</code></pre>\n\n<p>So the output has 4 output lines where it should only have two:</p>\n\n<pre><code>rs201370260 rs200980145 49694713 0.899981 1.05306 0.0117 9.224E-6\nrs201370260 rs200980145 49694713 0.899981 1.05043 0.0107 4.477E-6\nrs201370260 rs1052977 49694713 0.894315 1.05306 0.0117 9.224E-6\nrs201370260 rs1052977 49694713 0.894315 1.05043 0.0107 4.477E-6\n</code></pre>\n\n<p>Desired output would be:</p>\n\n<pre><code>rs201370260 rs200980145 49694713 0.899981 1.05306 0.0117 9.224E-6\nrs201370260 rs1052977 49694713 0.894315 1.05043 0.0107 4.477E-6\n</code></pre>\n\n<p>Does anyone have a perl or awk solution?</p>\n"}, {"tags": ["arrays", "regex", "perl", "relevance"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1439921605, "post_id": 32079669, "comment_id": 52055583, "body": "See <a href=\"http://stackoverflow.com/questions/4519979/in-perl-how-do-i-sort-by-frequency-of-a-value\">In Perl, how do I sort by frequency of a value?</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439988645, "post_id": 32079669, "comment_id": 52086493, "body": "Seems like <code>@old_array</code> in your example only contains a single element. What is then the purpose of grepping?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1439926915, "post_id": 32080155, "comment_id": 52058487, "body": "Wouldn&#39;t building <code>%seen</code> without a <code>for</code> loop make more sense, so you&#39;re not iterating <code>@old</code> multiple times grepping it? And then doing the sort from <code>@given_terms</code> rather than <code>keys</code>?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439927577, "post_id": 32080155, "comment_id": 52058910, "body": "Yes, thanks Sobrique. I was looking at the problem backwards."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1439927535, "last_edit_date": 1439927535, "creation_date": 1439922797, "answer_id": 32080155, "question_id": 32079669, "link": "https://stackoverflow.com/questions/32079669/sort-results-by-words-occuring-in-array-from-grepperl/32080155#32080155", "title": "Sort results by words occuring in array from grep(Perl)", "body": "<p>It's difficult to figure out exactly what you need without any data, but try out the following:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @old = qw(nine one one one two three three);\nmy @given_terms = qw(one two three);\n\nmy %seen;\n%seen = map {$_ =&gt; ++$seen{$_}} @old;\n\nprint \"$_\\n\" for sort {$seen{$b} &lt;=&gt; $seen{$a}} @given_terms;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5240420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439988557, "creation_date": 1439921326, "last_edit_date": 1439988557, "question_id": 32079669, "link": "https://stackoverflow.com/questions/32079669/sort-results-by-words-occuring-in-array-from-grepperl", "title": "Sort results by words occuring in array from grep(Perl)", "body": "<p>Any simple solution that Perl supports, which can sort results based on words occurring in array from grep?</p>\n\n<p>For example you have a database which gets results from array grep and you want to show results first with the most repeated word which is matched.</p>\n\n<p>Like a search engine which gives results by relevance.</p>\n\n<p>Does that exists in Perl like in this expression:</p>\n\n<pre><code>@array_relevance = grep(/given_term/i, @old_array);\n</code></pre>\n\n<p>or </p>\n\n<p><code>@array_relevance = grep{$_ =~ /given_term/i}@old_array;</code></p>\n\n<p>where @array_relevance shows results first where \"given_term\" is occurring the most(like 5 times) and then shows results where \"given_term\" is occurring the least(4,3,2,1 times) descending</p>\n\n<p>I mean \"@old_array\" is the data which contains multiple lines and it is a database which is in text file where there are titles, descriptions, time of submitted post etc.</p>\n\n<p>Example of <code>@old_array</code>:</p>\n\n<pre><code>@old_array = \"Title:Best marketing firm, Description:Check us out, we have many products which are innovative, Time of post:14:05:2015\";\n</code></pre>\n\n<p>Then <code>@array_relevance</code> with <code>grep</code> selects its content which is requested showing results first which contain the most same terms descending.</p>\n\n<p>Hope its understandable.</p>\n"}, {"tags": ["perl", "output"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1439910276, "post_id": 32076032, "comment_id": 52048505, "body": "<code>use autodie; use diagnostics;</code>"}, {"owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1439910379, "post_id": 32076032, "comment_id": 52048586, "body": "where would I put that?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1439910515, "post_id": 32076032, "comment_id": 52048700, "body": "<code>open my $output1, &quot;&gt;&quot;, &quot;gwasfiles4&#47;$filename.txt&quot; or die $!;</code>. Also, put <code>use strict;</code> and <code>use warnings;</code> at the top of your script, and fix any errors/warnings they produce."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1439910615, "post_id": 32076032, "comment_id": 52048774, "body": "Trying something on your own takes less time than asking."}, {"owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 0, "creation_date": 1439910692, "post_id": 32076032, "comment_id": 52048833, "body": "That is returning &quot;No such file or directory at line (line of that code)&quot;"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1439911553, "post_id": 32076032, "comment_id": 52049457, "body": "What do you get when you run <code>ls gwasfiles4</code> from within the directory the script is located in?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1439914129, "post_id": 32076032, "comment_id": 52051286, "body": "The code you&#39;ve shown doesn&#39;t generate that warning. Please show the code around line 94, which should contain <code>print $output</code> (the filehandle mentioned in the warning), not <code>print $output1</code> (completely different filehandle)."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1439914276, "post_id": 32076032, "comment_id": 52051376, "body": "<code>my $length1 = scalar(@chr1);</code> will never evaluate to true, as there&#39;s nothing in that array. For that reason, nothing is printed to your file. What&#39;s the purpose of that line? What is supposed to be in <code>@chr1</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1439910708, "post_id": 32076202, "comment_id": 52048848, "body": "With single-quotes, the <code>$filename</code> won&#39;t be interpolated. I made the same typo ;)"}, {"owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 0, "creation_date": 1439911833, "post_id": 32076202, "comment_id": 52049665, "body": "I have strict and warnings on earlier in the code, this block is at about line 100.  I tried this and it opened the file but the file was empty which it should not be. Here is the exact code I used:"}, {"owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 0, "creation_date": 1439911892, "post_id": 32076202, "comment_id": 52049711, "body": "<code>my $filename = &quot;Related_Traits_Chromosome_1_$ARGV[0]&quot;;     open (my $output1, &#39;&gt;&#39;, &quot;gwasfiles4&#47;$filename&quot;) or die $!;     my $length1 = scalar(my @chr1);     if ($length1 &gt; 1) {     \t@chr1 = sort {$a &lt;=&gt; $b} @chr1;     \tfor (my $x = 0; $x &lt;= $length1; $x++){ \t    \tfor (my $y = $x + 1; $y &lt;= $length1 - 1; $y++){ \t\t    \tif (abs($chr1[$x] - $chr1[$y]) &lt; 500000){ \t\t\t    \tprint $output1 &quot;$chr1[$x]\\t$chr1[$y]\\n&quot;; \t\t\t    }     \t\t} \t    }     }</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1439912353, "post_id": 32076202, "comment_id": 52050047, "body": "probably worth editing that into your question, rather than posting as a comment."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 1, "creation_date": 1439912489, "post_id": 32076202, "comment_id": 52050139, "body": "@Jack <code>scalar(my @foo)</code> will always be zero. Nothing inside your <code>if</code> statement will run."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1439913586, "last_edit_date": 1439913586, "creation_date": 1439910653, "answer_id": 32076202, "question_id": 32076032, "link": "https://stackoverflow.com/questions/32076032/i-cant-open-a-new-file-to-write-to-in-perl/32076202#32076202", "title": "I can&#39;t open a new file to write to in perl", "body": "<p><code>use strict;</code> and <code>use warnings;</code> should always be at the start of your program. Fix the errors they generate first, and you'll have better code. </p>\n\n<p>So too - you should check the error code from <code>open</code>:</p>\n\n<pre><code>open my $output1, '&gt;', \"gwasfiles4/$filename.txt\" or die $!;\n</code></pre>\n\n<p>This will print the error that <code>open</code> generated if it failed. I'll guess either <code>gwasfiles4</code> doesn't exist, or your OS doesn't like the filename with an embedded <code>:</code>. </p>\n\n<p>If <code>strict</code> and <code>warnings</code> don't help enough, <code>use diagnostics;</code> will give you yet another layer of information about the problem. </p>\n\n<p><code>autodie</code> is particularly useful - it puts that <code>or die $!</code> line after each <code>open</code> statement automatically. (and a few other things besides).</p>\n\n<p>I would suggest as a point of style - enclose your lexical filehandle in <code>{}</code> when printing, as this makes it very clear it's a filehandle. </p>\n\n<pre><code>print {$output1} \"$chr1[$x]\\t$chr1[$y]\\n\";\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Following your changes, you have a completely different problem:</p>\n\n<pre><code>my @chr1;                    #create empty array\nmy $length1 = scalar(@chr1); # scalar here takes length, array is empty, therefore length is _always_ zero. \nif ($length1 &gt; 1) {          #therefore never happens\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 0, "creation_date": 1439913193, "post_id": 32077019, "comment_id": 52050653, "body": "<code>gwasfiles4</code> does exist, I&#39;m on a mac using text wrangler and can you please check the question again, I edited it. Thanks"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 1, "creation_date": 1439913304, "post_id": 32077019, "comment_id": 52050731, "body": "@Jack: As others have said, <code>$length1</code> will always be zero in that code so your <code>if</code> block will never be executed"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439913487, "post_id": 32077019, "comment_id": 52050849, "body": "But in that case - you couldn&#39;t get a <code>print to closed filehandle</code> either."}, {"owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 0, "creation_date": 1439913605, "post_id": 32077019, "comment_id": 52050934, "body": "Why would <code>$length1</code> always be zero and how can I fix that?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "edited": false, "score": 0, "creation_date": 1439913708, "post_id": 32077019, "comment_id": 52051007, "body": "@Jack Because you&#39;re declaring a new empty array with <code>my @chr1</code>, and the length of an empty array is zero. How to fix that is an entirely different question from the one you originally asked, so it would probably be best to ask a new question."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1439913771, "post_id": 32077019, "comment_id": 52051050, "body": "@Sobrique The <code>print</code> is probably happening later in code the OP hasn&#39;t shown. Notice that the error message mentions filehandle <code>$output</code>, while the <code>print</code> in their snippet uses <code>$output1</code>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1439912944, "creation_date": 1439912944, "answer_id": 32077019, "question_id": 32076032, "link": "https://stackoverflow.com/questions/32076032/i-cant-open-a-new-file-to-write-to-in-perl/32077019#32077019", "title": "I can&#39;t open a new file to write to in perl", "body": "<p>I suggest that either the directory <code>gwasfiles4</code> doesn't exist or you'rte working on a Windows system which doesn't allow colons <code>:</code> in its filenames</p>\n"}], "owner": {"reputation": 1, "user_id": 5144661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64efc949b216c2fd8f0b8cc2c26e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5144661/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1439913586, "creation_date": 1439910145, "last_edit_date": 1439913086, "question_id": 32076032, "link": "https://stackoverflow.com/questions/32076032/i-cant-open-a-new-file-to-write-to-in-perl", "title": "I can&#39;t open a new file to write to in perl", "body": "<p>I have looked on several links and other questions to try and find a solution but I still can't open the file that I'm trying to open. This is the block of code that I can't get to function:</p>\n\n<pre><code>$filename = \"Related Traits: Chromosome 1\";\nopen ($output1, \"&gt;\", \"gwasfiles4/$filename\".\".txt\");\n$length1 = scalar(@chr1);\nif ($length1 &gt; 1) {\n    @chr1 = sort {$a &lt;=&gt; $b} @chr1;\n    for ($x = 0; $x &lt;= $length1; $x++){\n        for ($y = $x + 1; $y &lt;= $length1 - 1; $y++){\n            if (abs($chr1[$x] - $chr1[$y]) &lt; 500000){\n                print $output1 \"$chr1[$x]\\t$chr1[$y]\\n\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When  I run this, I got the error: </p>\n\n<pre><code>print() on closed filehandle $output at file.pl line 94\n</code></pre>\n\n<p>Why is the file not opened?</p>\n\n<p>The file now opens with this but is empty: </p>\n\n<pre><code>my @chr1;\nmy $filename = \"Related_Traits_Chromosome_1_$ARGV[0]\";\nopen (my $output1, '&gt;', \"gwasfiles4/$filename\") or die $!;\nmy $length1 = scalar(@chr1);\nif ($length1 &gt; 1) {\n    @chr1 = sort {$a &lt;=&gt; $b} @chr1;\n    for (my $x = 0; $x &lt;= $length1; $x++){\n        for (my $y = $x + 1; $y &lt;= $length1 - 1; $y++){\n            if (abs($chr1[$x] - $chr1[$y]) &lt; 500000){\n                print $output1 \"$chr1[$x]\\t$chr1[$y]\\n\";\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "shell"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1439909033, "post_id": 32075267, "comment_id": 52047543, "body": "is your perl script running on linux too?  or something else?"}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1439909063, "post_id": 32075267, "comment_id": 52047564, "body": "yes running on linux"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1439911689, "post_id": 32075267, "comment_id": 52049563, "body": "hum, that doesn&#39;t generate a <i>number</i>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1439911877, "post_id": 32075267, "comment_id": 52049696, "body": "What have you tried in Perl? Please show us your code that doesn&#39;t work. Also, please explain what you&#39;re trying to do. The best way to do it in Perl is almost certainly not by stringing together a series of Unix commands."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1439912461, "last_edit_date": 1439912461, "creation_date": 1439912030, "answer_id": 32076711, "question_id": 32075267, "link": "https://stackoverflow.com/questions/32075267/dev-urandom-in-perl-code/32076711#32076711", "title": "/dev/urandom in perl code", "body": "<p>You can use the following, although it's not up to cryptographical standards:</p>\n\n<pre><code>my @syms = ('a'..'z', 'A'..'Z', '0'..'9', split(//, '-_!@#$%^&amp;*()_+{}|:&lt;&gt;?=') );\n\nmy $random = join '', map $syms[rand(@syms)], 1..10;\n</code></pre>\n\n<p>The following is an improvement to your original solution, if you're trying to generate a password. While it decreases the entropy of the password (making it more vulnerable to brute force attacks that noone uses), it increases its chances of resisting a dictionary attack by guaranteeing a mix of character types.</p>\n\n<pre><code>my @lc = 'a'..'z';\nmy @uc = 'A'..'Z';\nmy @na = ( '0'..'9', split(//, '-_!@#$%^&amp;*()_+{}|:&lt;&gt;?=') );\n\n@$_ = grep !/^[0O1liI]\\z/, @$_\n    for \\@lc, \\@uc, \\@na;\n\nmy @all = ( @lc, @uc, @na );\n\nsub gen_password {\n    return\n        join '',\n            shuffle\n                map($all[rand(@all)], 1..4),\n                map($lc[rand(@lc)],   1..2),\n                map($uc[rand(@uc)],   1..2),\n                map($na[rand(@na)],   1..2);\n}\n</code></pre>\n"}], "owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 32076711, "answer_count": 1, "score": -1, "last_activity_date": 1439912461, "creation_date": 1439908139, "question_id": 32075267, "link": "https://stackoverflow.com/questions/32075267/dev-urandom-in-perl-code", "title": "/dev/urandom in perl code", "body": "<p>I am trying to generate random number for some specific use within my perl code.</p>\n\n<p>I am able to figure out command for linux and its working fine.</p>\n\n<pre><code>cat /dev/urandom | tr -dc 'a-zA-Z0-9-_!@#$%^&amp;*()_+{}|:&lt;&gt;?=' | fold -w 10 | grep -i '[!@#$%^&amp;*()_+{}|:&lt;&gt;?=]' | head -n 1\n</code></pre>\n\n<p>I am not able to make the same command work in perl. I am very new to perl and programming.</p>\n\n<p>I tried researching about same but not able to make it work in perl.</p>\n\n<p>Any suggestions or any other ways if someone can suggest how i can generate random numbers in perl.</p>\n\n<p>Let me know if any questions.\nThanks for help</p>\n"}, {"tags": ["perl", "soap", "docker"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439910356, "post_id": 32074304, "comment_id": 52048572, "body": "Without an error message, it&#39;s going to be really hard to help. My first suggestion would be - check which versions of Docker you&#39;re running. It is designed for isolation, but doesn&#39;t cross CPU families well either."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439910388, "post_id": 32074304, "comment_id": 52048593, "body": "Bear in mind your <code>RUN cpanm</code> is going to try and fetch from <code>cpan</code> which could be firewalled."}, {"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439984832, "post_id": 32074304, "comment_id": 52083641, "body": "I have formulated this question in a clearer way here: <a href=\"http://stackoverflow.com/questions/32094606/perl-iosocketssl-pm-module-fails-to-initialize-in-my-docker-linux-environmen\" title=\"perl iosocketssl pm module fails to initialize in my docker linux environmen\">stackoverflow.com/questions/32094606/&hellip;</a>"}, {"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440003910, "post_id": 32074304, "comment_id": 52097449, "body": "Error output I was asked out error output on the stack overflow thread I mentioned above:DEBUG: .../IO/Socket/SSL.pm:2649: new ctx 54231968 DEBUG: .../IO/Socket/SSL.pm:562: socket not yet connected DEBUG: ...22.0/Net/HTTPS.pm:69: local error: IO::Socket::IP configuration failed DEBUG: .../IO/Socket/SSL.pm:2682: free ctx 54231968 open=54231968 DEBUG: .../IO/Socket/SSL.pm:2694: OK free ctx 54231968 Debugg: 500 Can&#39;t connect to control.akamai.com:443 Content-Type: text/plain Client-Date: Wed, 19 Aug 2015 17:03:04 GMT Client-Warning: Internal response  Can&#39;t connect to control.akamai.com:443"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440004593, "post_id": 32074304, "comment_id": 52097827, "body": "Can you wget that url?"}, {"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440006742, "post_id": 32074304, "comment_id": 52099040, "body": "Yes. I got &quot;unauthorized&quot;, but that&#39;s because I didn&#39;t put authorization in my wget."}, {"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1440016136, "post_id": 32074304, "comment_id": 52104669, "body": "See <a href=\"http://stackoverflow.com/questions/32094606/perl-iosocketssl-pm-module-fails-to-initialize-in-my-docker-linux-environmen\" title=\"perl iosocketssl pm module fails to initialize in my docker linux environmen\">stackoverflow.com/questions/32094606/&hellip;</a> , for my updated solution, I appended to the question there. Thanks for everyone&#39;s help."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "edited": false, "score": 0, "creation_date": 1440070194, "post_id": 32104041, "comment_id": 52126568, "body": "Yeah, that wasn&#39;t it. It wasn&#39;t a firewall problem. It turned out, the low-level Perl SSL code wasn&#39;t working, so I had to alter my Perl environment to use another code path. And thanks for letting me know about the magic tunnels , or lack thereof :-)"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "edited": false, "score": 0, "creation_date": 1440071033, "post_id": 32104041, "comment_id": 52127103, "body": "@egilchri: Since I&#39;m the maintainer of IO::Socket::SSL I would be curious to know what the underlying issue really was. I can not get this information from this nor from your other question, only that you claim you forced the use of IO::Socket::SSL while linking to the solution which describes forcing Crypt::SSLeay (i.e. the other one)."}, {"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "edited": false, "score": 0, "creation_date": 1440092557, "post_id": 32104041, "comment_id": 52141396, "body": "Sorry. I meant to say that I forced the use of Net:SSL.  I don&#39;t know why IO::Socket::SSL wasn&#39;t working for me. But what I found out was that my machine inside my firewall that was working, was using Net::SSL. So I decided my task was to coerce my machine built by Docker to use Net:SSL as well. It could well be user error, that I&#39;m not able to get IO::Socket::SSL working. All I know is that the connection was hanging."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "edited": false, "score": 0, "creation_date": 1440094136, "post_id": 32104041, "comment_id": 52142278, "body": "@egilchri: Where there any proxies involved in your setup? Because proxy support with IO::Socket:SSL was only fixed with LWP 6.06 (about a year ago)."}, {"owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "edited": false, "score": 0, "creation_date": 1440331252, "post_id": 32104041, "comment_id": 52219637, "body": "Yes, there are proxies involved in my setup.  I&#39;ll need to check the version of LWP that was being used."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1440012476, "last_edit_date": 1592644375, "creation_date": 1440012476, "answer_id": 32104041, "question_id": 32074304, "link": "https://stackoverflow.com/questions/32074304/dockerfile-runs-on-mac-but-wont-run-on-linux-behind-my-proxy/32104041#32104041", "title": "Dockerfile runs on Mac but won&#39;t run on Linux behind my proxy", "body": "<blockquote>\n<p>... and just run the container in my Linux environment, behind my firewall?</p>\n<pre><code>...Can't connect to control.akamai.com:443 \n</code></pre>\n<p>... but I thought a feature of docker is that I can be shielded from these platform gotchas.</p>\n</blockquote>\n<p>If you run docker behind a firewall which prohibits connections to outside you can not expect to get a connection. Docker does not create some magic tunnel through the firewall but relies instead on the existing network, same es it relies on the existence of the CPU, RAM and storage. Proper network is just another resource you need to provide for your docker image.</p>\n"}], "owner": {"reputation": 693, "user_id": 400732, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9cf2d56acc9d7ade135c381be55da3cb?s=128&d=identicon&r=PG", "display_name": "egilchri", "link": "https://stackoverflow.com/users/400732/egilchri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440012476, "creation_date": 1439905751, "last_edit_date": 1439908187, "question_id": 32074304, "link": "https://stackoverflow.com/questions/32074304/dockerfile-runs-on-mac-but-wont-run-on-linux-behind-my-proxy", "title": "Dockerfile runs on Mac but won&#39;t run on Linux behind my proxy", "body": "<p>I have the following Dockerfile , for a container that runs just fine on my Mac, (I'm using docker-machine)</p>\n\n<pre><code>FROM perl:latest\nRUN cpanm SOAP::Lite\nRUN cpanm LWP::Simple\nCOPY . /usr/src/myapp\nWORKDIR /usr/src/myapp\nENTRYPOINT [ \"perl\", \"./doceng_purge_tools/bin/akamai_purge_pattern_generic.pl\"  ]\n# CMD /bin/bash\n# docker build -t my_perl_purger_001 .\n# docker run -t my_perl_purger_001 -pattern cd/Q14299_01 -server prod\n</code></pre>\n\n<p>However, when I run it using docker on my corporate network. I get a low-level SSL error.</p>\n\n<p>Forgive my ignorance, but I thought a feature of docker is that I can be shielded from these platform gotchas.</p>\n\n<p>Is there a way I can package this up, on my Mac, and just run the container in my Linux environment, behind my firewall?</p>\n\n<p>I can supply more details about the SSL errors, if that helps. </p>\n"}, {"tags": ["matlab", "perl"], "comments": [{"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439904856, "post_id": 32073802, "comment_id": 52044243, "body": "read this: <a href=\"http://stackoverflow.com/questions/9253883/perl-executing-multiple-systems-processes-and-waiting-for-them-to-finish\" title=\"perl executing multiple systems processes and waiting for them to finish\">stackoverflow.com/questions/9253883/&hellip;</a>"}, {"owner": {"reputation": 419, "user_id": 2014451, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43e00500aa626b286cd6c3240084e050?s=128&d=identicon&r=PG", "display_name": "Royeh", "link": "https://stackoverflow.com/users/2014451/royeh"}, "reply_to_user": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439974604, "post_id": 32073802, "comment_id": 52076569, "body": "@PYPL I edited my question."}, {"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439982023, "post_id": 32073802, "comment_id": 52081724, "body": "Here is another solution (I&#39;m pretty sure i have used this before): <a href=\"http://stackoverflow.com/questions/1380516/how-can-i-use-perls-system-call-to-spawn-independent-threads\" title=\"how can i use perls system call to spawn independent threads\">stackoverflow.com/questions/1380516/&hellip;</a>"}, {"owner": {"reputation": 419, "user_id": 2014451, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43e00500aa626b286cd6c3240084e050?s=128&d=identicon&r=PG", "display_name": "Royeh", "link": "https://stackoverflow.com/users/2014451/royeh"}, "reply_to_user": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439990315, "post_id": 32073802, "comment_id": 52087729, "body": "@PYPL I used both method but does not work at all.  <code>First Link:</code> As soon as start Matlab then runs next. <code>Second Link:</code>even I divided my perl script into two files and called these two files from a main file to use the second link you&#39;ve mentioned, but unfortunately it doesn&#39;t work, too. Please Help!! <b>PS: I think this question is not a duplicate from both mentioned link and should be open!</b>"}, {"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439992055, "post_id": 32073802, "comment_id": 52089181, "body": "There is no way the second method is not working, you can view my example here:  <a href=\"http://txt.do/a6ee2\" rel=\"nofollow noreferrer\">txt.do/a6ee2</a>, i just wrote the code where 2 codes are counting a number and outprints them, as you can see <code>Thread Count</code> is the program which is running in a thread and they both work parallel"}, {"owner": {"reputation": 419, "user_id": 2014451, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43e00500aa626b286cd6c3240084e050?s=128&d=identicon&r=PG", "display_name": "Royeh", "link": "https://stackoverflow.com/users/2014451/royeh"}, "reply_to_user": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439993730, "post_id": 32073802, "comment_id": 52090541, "body": "@PYPL Can you please show me your method in this simple example:   <a href=\"http://textuploader.com/a6e8e\" rel=\"nofollow noreferrer\">textuploader.com/a6e8e</a>. I am confused somehow!"}, {"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1440004583, "post_id": 32073802, "comment_id": 52097819, "body": "my shown code was totally enough for you to do it yourself, but here is another example: <a href=\"http://txt.do/a68ku\" rel=\"nofollow noreferrer\">txt.do/a68ku</a> pay attantion to comments"}], "owner": {"reputation": 419, "user_id": 2014451, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43e00500aa626b286cd6c3240084e050?s=128&d=identicon&r=PG", "display_name": "Royeh", "link": "https://stackoverflow.com/users/2014451/royeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1439914988, "answer_count": 0, "score": 0, "last_activity_date": 1439974569, "creation_date": 1439904481, "last_edit_date": 1495542119, "question_id": 32073802, "link": "https://stackoverflow.com/questions/32073802/not-wait-for-the-computation-and-runs-next", "closed_reason": "Duplicate", "title": "Not wait for the computation and runs next", "body": "<p>I have written a code which calls Matlab and then runs an <code>*.m</code> file (here <code>main.m</code>) using:</p>\n\n<pre><code>system('matlab -r main');\n</code></pre>\n\n<p>After this line there are some other computations which not use any results from Matlab file. When I run the perl code it goes to next line instead of waiting for completing the computation by Matlab, and then it finishes the whole code while Matlab is still running. I put a pause right after the above command, but because I do not want to use any pause/key in the whole code this is pitty</p>\n\n<p>My question is that is there any way which the code waits for the running of Matlab and then runs the next line?</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>I look at the question which was suggest by <a href=\"https://stackoverflow.com/users/1984756/pypl\">PYPL</a>, but I think that question is the answer for waiting inside <code>system</code>, where my problem is that outside if system and passes from <code>system</code> very quick and won't wait to finish the <code>system()</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1439904122, "post_id": 32073269, "comment_id": 52043731, "body": "<a href=\"http://www.fileformat.info/info/unicode/char/301a/index.htm\" rel=\"nofollow noreferrer\">U+301A</a>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1439904556, "post_id": 32073269, "comment_id": 52044036, "body": "Add newlines to the ends of both of your <code>print</code> statements. I think you&#39;ll find that your interpretation of the situation is wrong."}, {"owner": {"reputation": 103, "user_id": 5239369, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d2df3d38127b9d2473811ea0ec33abd7?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Jaquez", "link": "https://stackoverflow.com/users/5239369/alfonso-jaquez"}, "edited": false, "score": 0, "creation_date": 1439904815, "post_id": 32073269, "comment_id": 52044208, "body": "I put a letter in the middle of the two symbols and functions, but as the functionality of the code is that logic that the two symbols need to be together, just to make the substr takes two symbols as if they were one."}], "answers": [{"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1439903384, "creation_date": 1439903384, "answer_id": 32073401, "question_id": 32073269, "link": "https://stackoverflow.com/questions/32073269/why-the-square-bracket-next-to-another-square-bracket-is-considered-one-single-c/32073401#32073401", "title": "why the square bracket next to another square bracket is considered one single character?", "body": "<p>Your first print statement only prints <code>[</code>, you just can't see it because you are not printing a newline. Your second print statement outputs <code>[SELECT</code> which is expected from your inputs to <code>substr</code>:</p>\n\n<pre><code>my $str = \"[[SELECT * FROM Personnel]]\";\n\nprint substr($str, 0, 1),\"\\n\";\nprint substr($str, 1, 6),\"\\n\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[\n[SELEC\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 3, "last_activity_date": 1439906199, "creation_date": 1439906199, "answer_id": 32074495, "question_id": 32073269, "link": "https://stackoverflow.com/questions/32073269/why-the-square-bracket-next-to-another-square-bracket-is-considered-one-single-c/32074495#32074495", "title": "why the square bracket next to another square bracket is considered one single character?", "body": "<p>When I run into these problems, I break the problem down and ensure I have ways to see where each part of the output comes from. My process through this particular problem would have gone something like this:</p>\n\n<p>First, get rid of parts of the program until I stop seeing the problem. Once I've done that, I've probably found the point that's causing the problem since it's the bit I just removed. I would have removed the second output statement. Here I use Perl 5.10's <code>say</code> which appends a newline automatically: </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse v5.10;\n\nmy $str = \"[[SELECT * FROM Personnel]]\";\n\nsay substr($str, 0, 1); #that return [[ not [\n</code></pre>\n\n<p>If I run that, I see that it's not that output statement that's giving the doubled <code>]</code>.</p>\n\n<p>Now I put the next bit of code back and keep doing that until I see the problem again. I know that I removed the problem and got closer to the problem, but now it's time to zero in on the statement that causes it.</p>\n\n<p>In this case, I have two output statements together that show the problem. I want to see what output comes from each statement. Adding some text around the output and numbering the strings can show me which statement did what:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse v5.10;\n\nmy $str = \"[[SELECT * FROM Personnel]]\";\n\nsay \"1. &lt;\" . substr($str, 0, 1) . \"&gt;\"; \nsay \"2. &lt;\" . substr($str, 1, 6) . \"&gt;\";\n</code></pre>\n\n<p>Now I see what each <code>say</code> did:</p>\n\n<pre><code> 1. &lt;[&gt;\n 2. &lt;[SELEC&gt;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 5239369, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d2df3d38127b9d2473811ea0ec33abd7?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Jaquez", "link": "https://stackoverflow.com/users/5239369/alfonso-jaquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 32074495, "answer_count": 2, "score": -3, "last_activity_date": 1439906199, "creation_date": 1439903075, "last_edit_date": 1439905590, "question_id": 32073269, "link": "https://stackoverflow.com/questions/32073269/why-the-square-bracket-next-to-another-square-bracket-is-considered-one-single-c", "title": "why the square bracket next to another square bracket is considered one single character?", "body": "<pre><code>my $str = \"[[SELECT * FROM Personnel]]\";\n\nprint substr($str, 0, 1); #that return [[ not [\nprint substr($str, 1, 6); #that return SELECT\n</code></pre>\n\n<p>Take the two square bracket like only one, this is my html return example:</p>\n\n<pre><code>[[SELECT\n</code></pre>\n\n<p><code>[[</code> is the first print. That is wrong must be only one <code>[</code>.\n<code>SELECT</code> is the second print</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "edited": false, "score": 1, "creation_date": 1439902946, "post_id": 32073198, "comment_id": 52042843, "body": "Try: <code>rename</code> utility."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1439904389, "creation_date": 1439904389, "answer_id": 32073765, "question_id": 32073198, "link": "https://stackoverflow.com/questions/32073198/move-files-with-new-filenames/32073765#32073765", "title": "Move files with new filenames", "body": "<p>You can use parameter expansion to extract the file extension (<code>${file##*.}</code> deletes everything up to the last dot).</p>\n\n<p>The <code>$RANDOM</code> variable can be used to create the random names.</p>\n\n<pre><code>for file in folder/file* ; do\n    newname=''\n    for i in {1..12} ; do\n        newname+=$(( RANDOM % 9 ))\n    done\n\n    newname=new_folder/$newname.\"${file##*.}\"\n    if [[ -f $newname ]] ; then\n        echo \"Target $newname already exists. $file not moved.\" &gt;&amp;2\n    else\n        mv \"$file\" \"$newname\"\n    fi\ndone\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5239360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7a8d82442a77d75647103e801907c9?s=128&d=identicon&r=PG&f=1", "display_name": "Jiho21", "link": "https://stackoverflow.com/users/5239360/jiho21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 32073765, "answer_count": 1, "score": -2, "last_activity_date": 1439904389, "creation_date": 1439902872, "question_id": 32073198, "link": "https://stackoverflow.com/questions/32073198/move-files-with-new-filenames", "title": "Move files with new filenames", "body": "<p>I have files</p>\n\n<pre><code>/folder/file1.mp4\n/folder/file2.wmv\n/folder/file3.mov\n</code></pre>\n\n<p>I need to move them to new folder with new filename, which randomly generated from 12 symbols.</p>\n\n<pre><code>/new-folder/345457567452.mp4\n/new-folder/890897687685.wmv\n/new-folder/235344783456.mov\n</code></pre>\n\n<p>How can I do it?</p>\n\n<p>The problem is: I don't know extesion of original file, and I need rename only name of ile and save extension.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1439903183, "post_id": 32073140, "comment_id": 52043034, "body": "Note: filehandles do not necessarily point to files; they could point to external commands or sockets, etc... As far as I know there is no <i>direct</i> way of doing what you are asking, there are several roundabout ways of doing this though: 1) Maintain a listing of files you create by name in a hash 2) Use <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\"><code>stat</code></a> to find the inode of the file and use another tool to look up metadata about that inode"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1439903129, "creation_date": 1439903129, "answer_id": 32073292, "question_id": 32073140, "link": "https://stackoverflow.com/questions/32073140/print-out-glob-instead-of-variable-name/32073292#32073292", "title": "Print out GLOB() instead of variable name", "body": "<p>The first argument to <a href=\"http://p3rl.org/open\">open</a> is a file handle, not the file name. If you want to keep the filename in a variable, use a separate one:</p>\n\n<pre><code>my $filename = 'test_dll.txt';\nopen my $FH, '&lt;', $filename or die $!;\nprint \"The name of file is: $filename\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1439903180, "creation_date": 1439903180, "answer_id": 32073314, "question_id": 32073140, "link": "https://stackoverflow.com/questions/32073140/print-out-glob-instead-of-variable-name/32073314#32073314", "title": "Print out GLOB() instead of variable name", "body": "<p>It's because you did</p>\n\n<pre><code># Create a file handle and assign it to $file1.\nopen my $file1, '&lt;', 'test_dll.txt';\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code># Assign a string to $file1.\nmy $file1 = 'test_dll.txt';\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 2014451, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43e00500aa626b286cd6c3240084e050?s=128&d=identicon&r=PG", "display_name": "Royeh", "link": "https://stackoverflow.com/users/2014451/royeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 32073292, "answer_count": 2, "score": -1, "last_activity_date": 1439903180, "creation_date": 1439902755, "last_edit_date": 1439903144, "question_id": 32073140, "link": "https://stackoverflow.com/questions/32073140/print-out-glob-instead-of-variable-name", "title": "Print out GLOB() instead of variable name", "body": "<p>I have defined and opened a file name as:</p>\n\n<pre><code>open my $file1, '&lt;', 'test_dll.txt';\n</code></pre>\n\n<p>Now when I am calling it and want to say that for example print the name of file it prints out <code>GLOB()</code> instead of <code>test_dll.txt</code>. </p>\n\n<pre><code>print \"The name of file is: $file1\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The name of file is: GLOB(0x389e74)\n</code></pre>\n\n<p>Would one please let me know why this happens? and how could I have the name of variable?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1439901266, "post_id": 32072405, "comment_id": 52041560, "body": "You are mixing up references and arrays."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1439902755, "post_id": 32072405, "comment_id": 52042698, "body": "<code>print STDERR</code> is more simply written as <code>warn</code>."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1439901581, "last_edit_date": 1439901581, "creation_date": 1439901263, "answer_id": 32072592, "question_id": 32072405, "link": "https://stackoverflow.com/questions/32072405/parsing-incoming-ldap-filter-with-perl/32072592#32072592", "title": "Parsing incoming LDAP filter with perl", "body": "<p><code>$orValue</code> is an array reference. Dereference it to get a real array:</p>\n\n<pre><code>my @or = @$orValue;\n</code></pre>\n\n<p>You need to be more careful with references, they (usually) don't dereference automatically:</p>\n\n<pre><code>print STDERR \"Filter : $myFilter \\n\";\nprint STDERR Dumper($myFilter), \"\\n\";\n\nfor my $and (@{ $myFilter-&gt;{and} }) {\n    print STDERR \"Filter AND: $and \\n\";\n    print STDERR Dumper($and) .\"\\n\";\n\n    for my $or (@{ $and-&gt;{or} }) {\n        print STDERR \"Inside Filter OR: $or : $and\\n\";\n        print STDERR \"Keys: \";\n        print STDERR Dumper($or), \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 32072592, "answer_count": 1, "score": 1, "last_activity_date": 1563095990, "creation_date": 1439900759, "last_edit_date": 1563095990, "question_id": 32072405, "link": "https://stackoverflow.com/questions/32072405/parsing-incoming-ldap-filter-with-perl", "title": "Parsing incoming LDAP filter with perl", "body": "<p>I'm trying to write a LDAP server with Net::LDAP::Server</p>\n\n<p>The request routing/handling works fine, but the parsing of the incoming ldap filter causes me some troubles.</p>\n\n<p>The incoming filter has this value/structure:</p>\n\n<pre><code>$VAR1 = {\n          'and' =&gt; [\n                     {\n                       'or' =&gt; [\n                                 {\n                                   'substrings' =&gt; {\n                                                     'substrings' =&gt; [\n                                                                       {\n                                                                         'initial' =&gt; '233'\n                                                                       }\n                                                                     ],\n                                                     'type' =&gt; 'sn'\n                                                   }\n                                 },\n                                 {\n                                   'substrings' =&gt; {\n                                                     'substrings' =&gt; [\n                                                                       {\n                                                                         'initial' =&gt; '233'\n                                                                       }\n                                                                     ],\n                                                     'type' =&gt; 'sn'\n                                                   }\n                                 },\n                                 {\n                                   'equalityMatch' =&gt; {\n                                                        'assertionValue' =&gt; '233',\n                                                        'attributeDesc' =&gt; 'telephoneNumber'\n                                                      }\n                                 },\n                                 {\n                                   'equalityMatch' =&gt; {\n                                                        'assertionValue' =&gt; '233',\n                                                        'attributeDesc' =&gt; 'telephoneNumber'\n                                                      }\n                                 }\n                               ]\n                     }\n                   ]\n        };\n</code></pre>\n\n<p>Here my code to parse the LDAP filter</p>\n\n<pre><code>my $myFilter= $reqData-&gt;{'filter'};\nprint STDERR \"Filter : $myFilter \\n\";\nprint STDERR Dumper($myFilter) .\"\\n\";\nmy @andloop= $myFilter-&gt;{'and'};\nmy $and;\n\nforeach $and(@andloop) \n{\n    print STDERR \"Filter AND: $and \\n\";\n    print STDERR Dumper($and) .\"\\n\";\n\n    my $orValue;\n\n    foreach $orValue ($and) \n    {\n        print STDERR \"Inside Filter OR: $orValue : $and\\n\";\n        print STDERR \"Keys: \";\n        print STDERR Dumper($orValue) . \"\\n\";\n        print STDERR \"KeysOR: \";\n\n        my @or= $orValue;\n\n        print STDERR Dumper(@or[0]-&gt;{'or'}) . \"\\n\";\n        print STDERR \"OR Value[0]: \" . Dumper(@or[0]) . \"\\n\";\n    }\n}\n</code></pre>\n\n<p>I can loop via the AND, but don't seem to dive down into the 'or' parts</p>\n"}, {"tags": ["linux", "perl", "gcc", "ssh", "cpanm"], "comments": [{"owner": {"reputation": 515, "user_id": 3417978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded5d4a533f2bfd6204cbcfacd5d824c?s=128&d=identicon&r=PG", "display_name": "MC10", "link": "https://stackoverflow.com/users/3417978/mc10"}, "edited": false, "score": 0, "creation_date": 1439908364, "post_id": 32072356, "comment_id": 52047074, "body": "Which Linux distro is this? Since you are using <code>yum</code> I assume Fedora or CentOS/RHEL."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3407271, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c559d897d63f8fcd8e135ad95d7a544?s=128&d=identicon&r=PG&f=1", "display_name": "user3407271", "link": "https://stackoverflow.com/users/3407271/user3407271"}, "edited": false, "score": 0, "creation_date": 1439904408, "post_id": 32072442, "comment_id": 52043921, "body": "when i am trying to install compiler using the command: yum install gcc getting the error as: Loaded plugins: product-id, security, subscription-manager Updating certificate-based repositories. Setting up Install Process No package gcc available. Error: Nothing to do........please help @Chankey Pathak"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 25, "user_id": 3407271, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c559d897d63f8fcd8e135ad95d7a544?s=128&d=identicon&r=PG&f=1", "display_name": "user3407271", "link": "https://stackoverflow.com/users/3407271/user3407271"}, "edited": false, "score": 0, "creation_date": 1439911140, "post_id": 32072442, "comment_id": 52049149, "body": "Install it manually, refer the guide which I&#39;ve linked. Search google for tutorials specific to your distro."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 4, "last_activity_date": 1439900891, "creation_date": 1439900891, "answer_id": 32072442, "question_id": 32072356, "link": "https://stackoverflow.com/questions/32072356/unable-to-install-perl-modules-on-linux/32072442#32072442", "title": "unable to install perl modules on linux", "body": "<p>The error message is self-explanatory.</p>\n\n<p>Install <code>gcc</code> and add it to <code>PATH</code>.</p>\n\n<p>Refer: <a href=\"https://gcc.gnu.org/wiki/InstallingGCC\" rel=\"nofollow\">Installing GCC guide</a></p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3407271, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c559d897d63f8fcd8e135ad95d7a544?s=128&d=identicon&r=PG&f=1", "display_name": "user3407271", "link": "https://stackoverflow.com/users/3407271/user3407271"}, "edited": false, "score": 0, "creation_date": 1439904457, "post_id": 32072548, "comment_id": 52043965, "body": "when i am trying to install compiler using the command: yum install gcc getting the error as: Loaded plugins: product-id, security, subscription-manager Updating certificate-based repositories. Setting up Install Process No package gcc available. Error: Nothing to do........please help @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25, "user_id": 3407271, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c559d897d63f8fcd8e135ad95d7a544?s=128&d=identicon&r=PG&f=1", "display_name": "user3407271", "link": "https://stackoverflow.com/users/3407271/user3407271"}, "edited": false, "score": 0, "creation_date": 1439905968, "post_id": 32072548, "comment_id": 52045114, "body": "Perhaps you have the wrong package name. If you need help with your package manager, that&#39;s a separate question for <a href=\"http://superuser.com/\">a different site</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1439901146, "creation_date": 1439901146, "answer_id": 32072548, "question_id": 32072356, "link": "https://stackoverflow.com/questions/32072356/unable-to-install-perl-modules-on-linux/32072548#32072548", "title": "unable to install perl modules on linux", "body": "<p>At least some of the modules you mention are implemented in C. You need the C compiler that what used to install your <code>perl</code>, namely <code>gcc</code>. Use your system's package manager (<code>apt-get</code>, <code>yum</code>, etc) to install it.</p>\n"}], "owner": {"reputation": 25, "user_id": 3407271, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c559d897d63f8fcd8e135ad95d7a544?s=128&d=identicon&r=PG&f=1", "display_name": "user3407271", "link": "https://stackoverflow.com/users/3407271/user3407271"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439901146, "creation_date": 1439900668, "question_id": 32072356, "link": "https://stackoverflow.com/questions/32072356/unable-to-install-perl-modules-on-linux", "title": "unable to install perl modules on linux", "body": "<p>i tried to install perl modules IO::Tty,IO::Pty,Net::SSH2,Net::SSH::Perl....but i have failed to instal a single module.i tried to debug ,but unable to completely fix it.i came to know there is some issue with the compiler.as the below commands have given me the output which indicate something wrong.</p>\n\n<pre><code>which gcc\noutput \n/usr/bin/which: no gcc in (/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin)\n\nwhereis gcc\noutput\ngcc:\n</code></pre>\n\n<p>and when i check the error logs after trying to instal the modules , i get the below mentioned error:</p>\n\n<pre><code>   [root@GTheGandalf ~]# cat /root/.cpanm/work/1439895011.19383/build.log\n   ERROR: cannot run the configured compiler 'gcc'\n(see conf/compilerok.log). Suggestions:\n1) The compiler 'gcc' is not in your PATH. Add it\nto the PATH and try again. OR\n2) The compiler isn't installed on your system. Install it. OR\n3) You only have a different compiler installed (e.g. 'gcc').\nEither fix the compiler config in the perl Config.pm\nor install a perl that was built with the right compiler\n(you could build perl yourself with the available compiler).\n</code></pre>\n\n<p>Please help me to fix it as i am unable to execute perl scripts which have a dependency on the above mentioned modules.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1439900321, "post_id": 32072185, "comment_id": 52040897, "body": "its an hash value, <code>%continenttxt_cached</code> must be defined somewhere in your code"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1439902364, "post_id": 32072185, "comment_id": 52042386, "body": "Not necessarily - if you don&#39;t <code>use strict;</code> and <code>use warnings;</code> a hash is implicitly created when you access it and set values in it. (This is bad style, but it can be done)"}], "answers": [{"comments": [{"owner": {"reputation": 2763, "user_id": 2691879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/100002074119375/picture?type=large", "display_name": "Adam Baranyai", "link": "https://stackoverflow.com/users/2691879/adam-baranyai"}, "edited": false, "score": 0, "creation_date": 1439900727, "post_id": 32072239, "comment_id": 52041180, "body": "so this is basicaly like an associative array in php?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2763, "user_id": 2691879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/100002074119375/picture?type=large", "display_name": "Adam Baranyai", "link": "https://stackoverflow.com/users/2691879/adam-baranyai"}, "edited": false, "score": 3, "creation_date": 1439901332, "post_id": 32072239, "comment_id": 52041615, "body": "@Adam Baranyai, Yes, a hash is a kind of associative array. I don&#39;t know what type of associative arrays PHP uses, so the performance characteristics may be different."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 6, "last_activity_date": 1439902328, "last_edit_date": 1439902328, "creation_date": 1439900318, "answer_id": 32072239, "question_id": 32072185, "link": "https://stackoverflow.com/questions/32072185/what-does-this-mean-in-perl/32072239#32072239", "title": "What does this mean in Perl?", "body": "<p><code>{}</code> in this context denotes a hash accessor - <code>hashes</code> are key-value pairs. </p>\n\n<p>So you have a hash called <code>%continenttxt_cached</code> from which you're trying to extract the value associated with <code>$savedcontinentid.'_'.$savedcountrygroupid</code></p>\n\n<p>See <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow\"><code>perldata</code></a> for more information. </p>\n"}], "owner": {"reputation": 2763, "user_id": 2691879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/100002074119375/picture?type=large", "display_name": "Adam Baranyai", "link": "https://stackoverflow.com/users/2691879/adam-baranyai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 32072239, "answer_count": 1, "score": 1, "last_activity_date": 1439902328, "creation_date": 1439900174, "last_edit_date": 1439900338, "question_id": 32072185, "link": "https://stackoverflow.com/questions/32072185/what-does-this-mean-in-perl", "title": "What does this mean in Perl?", "body": "<p>I am converting some Perl code to php, and I've stumbled on something, which I don't know for sure what it is.</p>\n\n<pre><code>if(!$continenttxt_cached{$savedcontinentid.'_'.$savedcountrygroupid})\n</code></pre>\n\n<p>What does the <code>{}</code> bracket do here? Is this a standard array element accessed this way? Because I am converting only a small part of a rather large code, I can't find how was <code>$continenttxt_cached</code> defined, so I can only presume this is an array. Is the <code>{}</code> used for something else in Perl?</p>\n"}, {"tags": ["perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439900102, "post_id": 32072057, "comment_id": 52040732, "body": "When I click that link it directly downloads the file. It cannot be a cookie."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1439901450, "post_id": 32072057, "comment_id": 52041704, "body": "Why not contact the owners of the web site and ask them how they would like you to download that data from their site?"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1439901940, "last_edit_date": 1439901940, "creation_date": 1439900754, "answer_id": 32072404, "question_id": 32072057, "link": "https://stackoverflow.com/questions/32072057/perl-lwp-get-blocked-by-server-404-not-found/32072404#32072404", "title": "Perl LWP get blocked by server 404 not found", "body": "<p>When I use LWP::UserAgent on that URL without your headers I get a <em>403 Forbidden</em> error back. Same with <code>curl</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n\nmy $res = $ua-&gt;get(\n    'http://www.nseindia.com/content/equities/scripvol/datafiles/18-08-2013-TO-17-08-2015ADANIPOWERALLN.csv');\nprint $res-&gt;as_string;\n\n__END__\nHTTP/1.1 403 Forbidden\nConnection: close\nDate: Tue, 18 Aug 2015 12:19:13 GMT\nServer: AkamaiGHost\nContent-Length: 388\nContent-Type: text/html\nExpires: Tue, 18 Aug 2015 12:19:13 GMT\nClient-Date: Tue, 18 Aug 2015 12:19:13 GMT\nClient-Peer: 104.85.166.76:80\nClient-Response-Num: 1\nMime-Version: 1.0\nTitle: Access Denied\n\n&lt;HTML&gt;&lt;HEAD&gt;\n&lt;TITLE&gt;Access Denied&lt;/TITLE&gt;\n&lt;/HEAD&gt;&lt;BODY&gt;\n&lt;H1&gt;Access Denied&lt;/H1&gt;\n\nYou don't have permission to access \"http&amp;#58;&amp;#47;&amp;#47;www&amp;#46;nseindia&amp;#46;com&amp;#47;content&amp;#47;equities&amp;#47;scripvol&amp;#47;datafiles&amp;#47;18&amp;#45;08&amp;#45;2013&amp;#45;TO&amp;#45;17&amp;#45;08&amp;#45;2015ADANIPOWERALLN&amp;#46;csv\" on this server.&lt;P&gt;\nReference&amp;#32;&amp;#35;18&amp;#46;48a65568&amp;#46;1439900353&amp;#46;1006096e\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<p>When I added your headers, it worked the first time I tried. When I re-ran it, it also gave <em>404 Not Found</em>. Now when I click the link in the browser, it gives a 404 as well. </p>\n\n<p>I believe they are preventing you from dowloading the file multiple times. If you are on a dial-up connection or broadband with a non-static IP address, <strong>try to reconnect to get a fresh one, or use a proxy</strong>.</p>\n\n<hr>\n\n<p>Maybe they also have terms of services that forbid using automation tools to access their ressources because they are not ment to be APIs.</p>\n\n<h2>Update</h2>\n\n<p>In fact they do not allow what you are trying to do! Point 12 of <a href=\"http://nseindia.com/global/content/termsofuse.htm\" rel=\"nofollow\">their terms of services</a> clearly states that.</p>\n\n<blockquote>\n  <p>You may not conduct any systematic or automated data collection activities (including scraping, data mining, data extraction and data harvesting) on or in relation to our website without our express written consent.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 0, "last_activity_date": 1439907710, "creation_date": 1439907710, "answer_id": 32075100, "question_id": 32072057, "link": "https://stackoverflow.com/questions/32072057/perl-lwp-get-blocked-by-server-404-not-found/32075100#32075100", "title": "Perl LWP get blocked by server 404 not found", "body": "<p>In general, make your LWP user-agent look like a known browser. You can set the name of the user-agent with a parameter to <code>new</code> or set it later:</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new(\n    agent =&gt; ...,\n    );\n\n$ua-&gt;agent( ... );\n</code></pre>\n\n<p>You can do other things, such as adding a cookie jar. LWP::UserAgent doesn't do that by default. Following a particular path through a website, setting referers, and other human-like behavior sometimes solve the problem. You may want to look at <a href=\"http://www.metacpan.org/module/WWW::Mechanize\" rel=\"nofollow\">WWW::Mechanize</a> for that sort of thing.</p>\n\n<p>Some sites will use Javascript to do various things which your basic Perl-based user-agent can't do for you. In those cases, you might use Perl to control a UI-based browser like I show in <a href=\"http://perltricks.com/article/138/2014/12/8/Controlling-Firefox-from-Perl\" rel=\"nofollow\">Controlling Firefox from Perl</a>.</p>\n"}], "owner": {"reputation": 655, "user_id": 3437575, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e544c010c1e8447af0af0fe8056fde8f?s=128&d=identicon&r=PG&f=1", "display_name": "asb", "link": "https://stackoverflow.com/users/3437575/asb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 32072404, "answer_count": 2, "score": 1, "last_activity_date": 1442439512, "creation_date": 1439899804, "last_edit_date": 1442439512, "question_id": 32072057, "link": "https://stackoverflow.com/questions/32072057/perl-lwp-get-blocked-by-server-404-not-found", "title": "Perl LWP get blocked by server 404 not found", "body": "<p>I am using <code>LWP::UserAgent</code> to download an csv in unix server</p>\n\n<pre><code>my $ua1 = LWP::UserAgent-&gt;new();\nmy $res = $ua1-&gt;get($equity_history_url, @netscape_like_headers);\n</code></pre>\n\n<p>The server keeps giving me an error with code 404 (not found)</p>\n\n<p>Despite that I can download this file from the browser -> \n<a href=\"http://www.nseindia.com/content/equities/scripvol/datafiles/18-08-2013-TO-17-08-2015ADANIPOWERALLN.csv\" rel=\"nofollow\">http://www.nseindia.com/content/equities/scripvol/datafiles/18-08-2013-TO-17-08-2015ADANIPOWERALLN.csv</a></p>\n\n<p>and the code works with other pages</p>\n\n<p>I think the issue is one of the <a href=\"http://www.perlmonks.org/bare/?node_id=251057\" rel=\"nofollow\">below</a></p>\n\n<ul>\n<li>The site is looking for a cookie. </li>\n<li>The site is decoding the agent string. </li>\n<li>The site is making a decision based on some other part of the\nHTTP request header.</li>\n</ul>\n\n<p>I tried passing a header similar to my browser which I captured using wireshark</p>\n\n<pre><code>my @netscape_like_headers = (\n    'User-Agent' =&gt; 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.155 Safari/537.36',\n    'Accept-Language' =&gt; 'en-US,en;q=0.8',\n    'Accept-Charset' =&gt; 'iso-8859-1,*,utf-8',\n    'Accept-Encoding' =&gt; 'gzip, deflate, sdch',\n    'Upgrade-Insecure-Requests' =&gt; '1',\n    'Accept' =&gt;     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n    'Connection' =&gt; 'keep-alive'\n);\n</code></pre>\n\n<p>still no luck. any suggestions?</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1616090376, "post_id": 32071385, "comment_id": 117901284, "body": "<a href=\"https://www.perl.com/article/bang-bang/\" rel=\"nofollow noreferrer\">perl.com/article/bang-bang</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "edited": false, "score": 0, "creation_date": 1439898376, "post_id": 32071470, "comment_id": 52039606, "body": "If that is so, I&#39;ve <code>#!&#47;usr&#47;bin&#47;env perl </code> in my perl script by Python fails to interpret it. Why in this case <code>shebang line</code> doesn&#39;t help?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "edited": false, "score": 4, "creation_date": 1439898506, "post_id": 32071470, "comment_id": 52039696, "body": "@BHAT, possibly Python is one of those programs that <i>doesn&#39;t</i> work with the shebang line."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 10, "last_activity_date": 1439899248, "last_edit_date": 1439899248, "creation_date": 1439898184, "answer_id": 32071470, "question_id": 32071385, "link": "https://stackoverflow.com/questions/32071385/how-perl-is-able-to-compile-python-scripts/32071470#32071470", "title": "How Perl is able to compile python scripts?", "body": "<p>If the first line of your Python script is something like:</p>\n\n<pre><code>#!/usr/bin/env python\n</code></pre>\n\n<p>(a <a href=\"https://en.wikipedia.org/wiki/Shebang_%28Unix%29\">shebang</a> line) then Perl will know what to do with it.</p>\n\n<p>This is no different to what <code>bash</code> does when it tries to run that file, the shebang line lets it know which <em>actual</em> program should be used to run it.</p>\n"}], "owner": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "closed_date": 1439912931, "accepted_answer_id": 32071470, "answer_count": 1, "score": 2, "last_activity_date": 1439899248, "creation_date": 1439897942, "question_id": 32071385, "link": "https://stackoverflow.com/questions/32071385/how-perl-is-able-to-compile-python-scripts", "closed_reason": "Duplicate", "title": "How Perl is able to compile python scripts?", "body": "<p>Today I was building a tokenizer for English language in Python and I mistakenly executed the script with Perl. I was surprised to find out that Perl actually compiled this Python code and gave correct results. </p>\n\n<p>So my question is how Perl is able to compile/interpret Python scripts as it should be completely unaware of the python syntax, semantics and all other information required by a compiler/interpreter to compile/interpret a code?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 4, "creation_date": 1439897861, "post_id": 32071286, "comment_id": 52039273, "body": "OK, so what have you tried for that?"}, {"owner": {"reputation": 21, "user_id": 1360444, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5b7e503cb20f6dbd8b518f7505383900?s=128&d=identicon&r=PG", "display_name": "Priyaranjan", "link": "https://stackoverflow.com/users/1360444/priyaranjan"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439898200, "post_id": 32071286, "comment_id": 52039484, "body": "No i am not able to fix i want to replace the string   like HP&amp;HEV to  HP&amp;amp;HEV then the Xml will open correctly"}, {"owner": {"reputation": 368, "user_id": 2670066, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2a74bd33ab91f3acdb22eb886ec194ec?s=128&d=identicon&r=PG", "display_name": "Amareesh", "link": "https://stackoverflow.com/users/2670066/amareesh"}, "edited": false, "score": 1, "creation_date": 1439898281, "post_id": 32071286, "comment_id": 52039535, "body": "Please post your code which you have tried so far."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439898293, "post_id": 32071286, "comment_id": 52039549, "body": "All you need to do is study <a href=\"http://perldoc.perl.org/perlrequick.html#Search-and-replace\" rel=\"nofollow noreferrer\">how to search and replace strings in Perl</a>."}, {"owner": {"reputation": 21, "user_id": 1360444, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5b7e503cb20f6dbd8b518f7505383900?s=128&d=identicon&r=PG", "display_name": "Priyaranjan", "link": "https://stackoverflow.com/users/1360444/priyaranjan"}, "edited": false, "score": 0, "creation_date": 1439898452, "post_id": 32071286, "comment_id": 52039656, "body": "foreach my $ActiveLinkInfo (@ActiveLinkInfos) \t\t\t{ \t\t\t\tmy ($SubCID, $Subf, $Subt, $Subclosed, $SubCName) = ($ActiveLinkInfo-&gt;{&#39;SubCID&#39;},$ActiveLinkInfo-&gt;{&#39;Subf&#39;},$Acti&zwnj;&#8203;veLinkInfo-&gt;{&#39;Subt&#39;}&zwnj;&#8203;,$ActiveLinkInfo-&gt;{&#39;&zwnj;&#8203;Subclosed&#39;},$ActiveL&zwnj;&#8203;inkInfo-&gt;{&#39;SubCName&#39;&zwnj;&#8203;});#@$ActiveLinkInfo \t\t\t\tif($Subf eq &quot;HEADING&quot;) \t\t\t\t{ \t\t\t\t\tpush(@menu, {&quot;Name&quot;=&gt; &quot;$SubCName&quot;, &quot;Dir&quot;=&gt;&quot;HEADING&quot;}); \t\t\t\t} \t\t\t\telse \t\t\t\t{ \t\t\t\t\tmy $res = GetChildren(&quot;$path$SubCID\\\\&quot;, $SubCID, $VID); \t\t\t\t\t$SubCName =~ s/ - .*//; \t\t\t\t\tpush(@menu, {&quot;Name&quot;=&gt; &quot;$SubCName&quot;, &quot;Dir&quot;=&gt;&quot;$SubCID/default.aspx&quot;}); \t\t\t\t} \t\t\t}"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439898796, "post_id": 32071286, "comment_id": 52039886, "body": "Please edit your post with code - comments lose formatting."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439899769, "post_id": 32071286, "comment_id": 52040513, "body": "I added your code to the question. That was not easy as there are comments in it, and there were invisible characters that I needed to delete in order to format it properly with perltidy. Your code also does not compile."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1439900248, "post_id": 32071286, "comment_id": 52040836, "body": "I&#39;m confused. There is nothing in your code that reads from a database, opens a file or writes XML to a file - so I really don&#39;t see how it relates to your question. Please give a lot more detail."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439900353, "post_id": 32071286, "comment_id": 52040916, "body": "@simbabque: Your edit didn&#39;t compile because you deleted one of the commas along with the extended ASCII character"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439900871, "post_id": 32071286, "comment_id": 52041276, "body": "@Borodin while that is the case, that&#39;s not what I meant. <code>@menu</code>, <code>$path</code> and <code>$VID</code> are not declared. Also you broke it again with your fix, you deleted two <code>$</code> when you put the <code>,</code> in ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439901521, "post_id": 32071286, "comment_id": 52041746, "body": "The code you posted has nothing to do with your question???"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1439901485, "creation_date": 1439901485, "answer_id": 32072659, "question_id": 32071286, "link": "https://stackoverflow.com/questions/32071286/string-replace-amp-with-in-perl/32072659#32072659", "title": "String replace &amp;amp with &amp; in Perl", "body": "<p>If you're trying to convert text to HTML, use <a href=\"http://search.cpan.org/perldoc?HTML::Entities\" rel=\"nofollow\">HTML::Entities</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1439909480, "creation_date": 1439909480, "answer_id": 32075782, "question_id": 32071286, "link": "https://stackoverflow.com/questions/32071286/string-replace-amp-with-in-perl/32075782#32075782", "title": "String replace &amp;amp with &amp; in Perl", "body": "<p>You should take a look at the <a href=\"http://metacpan.org/module/HTML::Escape\" rel=\"nofollow\"><code>HTML::Escape</code></a> module, which only translates in one direction -- from text to entities -- but does it very quickly</p>\n"}], "owner": {"reputation": 21, "user_id": 1360444, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5b7e503cb20f6dbd8b518f7505383900?s=128&d=identicon&r=PG", "display_name": "Priyaranjan", "link": "https://stackoverflow.com/users/1360444/priyaranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1439909480, "creation_date": 1439897665, "last_edit_date": 1439900838, "question_id": 32071286, "link": "https://stackoverflow.com/questions/32071286/string-replace-amp-with-in-perl", "title": "String replace &amp;amp with &amp; in Perl", "body": "<p>I have a script(Perl) which is taking a string from database through a variable and  writing to a xml file. if the string contain  <strong>\"&amp;\"</strong>  then while opening xml file it is giving parser error  want to replace <strong>\"&amp;\"</strong> with  <strong>&amp;amp</strong>  through Perl script.</p>\n\n<p>This is what I have tried</p>\n\n<pre><code>foreach my $ActiveLinkInfo ( @ActiveLinkInfos ) {\n\n    my ( $SubCID, $Subf, $Subt, $Subclosed, $SubCName ) = (\n        $ActiveLinkInfo-&gt;{'SubCID'},\n        $ActiveLinkInfo-&gt;{'Subf'},\n        $ActiveLinkInfo-&gt;{'Subt'},\n        $ActiveLinkInfo-&gt;{'Subclosed'},\n        $ActiveLinkInfo-&gt;{'SubCName'}\n    );\n\n    #@$ActiveLinkInfo\n\n    if ( $Subf eq \"HEADING\" ) {\n        push( @menu, { \"Name\" =&gt; \"$SubCName\", \"Dir\" =&gt; \"HEADING\" } );\n    }\n    else {\n        my $res = GetChildren( \"$path$SubCID\\\\\", $SubCID, $VID );\n        $SubCName =~ s/ - .*//;\n        push( @menu, { \"Name\" =&gt; \"$SubCName\", \"Dir\" =&gt; \"$SubCID/default.aspx\" } );\n    }\n}\n</code></pre>\n"}, {"tags": ["json", "perl", "d3.js"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1439902056, "post_id": 32070574, "comment_id": 52042132, "body": "Your Question seems to contain more than one question."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1439902017, "last_edit_date": 1439902017, "creation_date": 1439901669, "answer_id": 32072725, "question_id": 32070574, "link": "https://stackoverflow.com/questions/32070574/building-ordered-json-in-perl/32072725#32072725", "title": "Building ordered JSON in perl", "body": "<blockquote>\n  <p><em>is there a way I can enforce an order in the JSON output?</em></p>\n</blockquote>\n\n<p>Yeah, use an array instead of an object. JSON objects are unordered.</p>\n\n<blockquote>\n  <p>An <em>object</em> is an unordered set of name/value pairs.</p>\n</blockquote>\n\n<p>But it seems you're already using arrays for your lists.</p>\n\n<p>Maybe you're want to be able to perform diffs, in which case JSON.pm provides a coarse means of specifying keys in the form of <code>sort_by</code>. Useful if you want to perform diffs.</p>\n"}, {"tags": [], "owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "is_accepted": false, "score": 0, "last_activity_date": 1439903307, "last_edit_date": 1495535237, "creation_date": 1439903307, "answer_id": 32073363, "question_id": 32070574, "link": "https://stackoverflow.com/questions/32070574/building-ordered-json-in-perl/32073363#32073363", "title": "Building ordered JSON in perl", "body": "<p>If you just want to \"enforce\" some sorting by the hash key, you can use the \"canonical\" feature, as also said <a href=\"https://stackoverflow.com/questions/3532067/perl-how-to-sort-a-json-structure-on-something-other-than-root-key-attributes\">here</a>.</p>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1439903307, "creation_date": 1439895655, "question_id": 32070574, "link": "https://stackoverflow.com/questions/32070574/building-ordered-json-in-perl", "title": "Building ordered JSON in perl", "body": "<p>I'm having a bit of a fiddle with JSON and D3, trying to represent some disk usage information in a 'bubble' style. </p>\n\n<p>Based on this initially: <a href=\"http://bl.ocks.org/mbostock/4063269\" rel=\"nofollow\">http://bl.ocks.org/mbostock/4063269</a></p>\n\n<p>The JSON is pretty simple - hierarchical data looking a bit like this: </p>\n\n<p><a href=\"http://bl.ocks.org/mbostock/raw/4063530/flare.json\" rel=\"nofollow\">http://bl.ocks.org/mbostock/raw/4063530/flare.json</a></p>\n\n<pre><code>{\n \"name\": \"flare\",\n \"children\": [\n  {\n   \"name\": \"analytics\",\n   \"children\": [\n    {\n     \"name\": \"cluster\",\n     \"children\": [\n      {\"name\": \"AgglomerativeCluster\", \"size\": 3938},\n      {\"name\": \"CommunityStructure\", \"size\": 3812},\n      {\"name\": \"HierarchicalCluster\", \"size\": 6714},\n      {\"name\": \"MergeEdge\", \"size\": 743}\n     ]\n    }\n   ]\n  }\n ]\n}\n</code></pre>\n\n<p>Now, what I'm <em>trying</em> to do is take a <code>quotas</code> report from a NetApp - in XML form. </p>\n\n<p>I have multiple 'per server' XML files looking approximately like:</p>\n\n<pre><code>&lt;quotas&gt;\n  &lt;quota&gt;\n    &lt;quota-target&gt;/vol/vol1/qtree1&lt;/quota-target&gt;\n    &lt;volume&gt;vol1&lt;/volume&gt;\n    &lt;disk-used&gt;554444&lt;/disk-used&gt;\n    &lt;disk-limit&gt;2000000&lt;/disk-limit&gt;\n  &lt;/quota&gt;\n  &lt;quota&gt;\n    &lt;quota-target&gt;/vol/vol1/qtree2&lt;/quota-target&gt;\n    &lt;volume&gt;vol1&lt;/volume&gt;\n    &lt;disk-used&gt;1235655&lt;/disk-used&gt;\n    &lt;disk-limit&gt;2000000&lt;/disk-limit&gt;\n  &lt;/quota&gt;\n  &lt;quota&gt;\n    &lt;quota-target&gt;/vol/vol2/qtree1&lt;/quota-target&gt;\n    &lt;volume&gt;vol2&lt;/volume&gt;\n    &lt;disk-used&gt;987664&lt;/disk-used&gt;\n    &lt;disk-limit&gt;2000000&lt;/disk-limit&gt;\n  &lt;/quota&gt;\n&lt;/quotas&gt;\n</code></pre>\n\n<p>What I'm trying to do is assemble some JSON for use with D3 that's hierarchical:</p>\n\n<ul>\n<li>site</li>\n<li>server</li>\n<li>volume</li>\n<li>quota-target</li>\n<li>disk-used</li>\n</ul>\n\n<p>I'm doing ok with a foreach loop:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\nuse JSON;\n\nmy %sites = (\n    'site1' =&gt; [qw ( servera serverb )],\n    'site2' =&gt; [qw ( s2serverc s2serverd)],\n);\n\nmy $data;\n$data-&gt;{'name'} = \"quotas\";\nforeach my $sitename ( keys %sites ) {\n    my $site = { 'name' =&gt; $sitename };\n    push( @{ $data-&gt;{'children'} }, $site );\n    foreach my $server ( @{ $sites{$sitename} } ) {\n        my $server = { 'name' =&gt; $server };\n        push( @{ $site-&gt;{'children'} }, $server );\n\n        $twig-&gt;parsefile(\"$server.quotas.xml\");\n        foreach my $quota ( $twig-&gt;get_xpath('//quota') ) {\n            push(\n                @{ $server-&gt;{'children'} },\n                {   'name' =&gt; $quota-&gt;first_child_text('quota-target'),\n                    'size' =&gt; $quota-&gt;first_child_text('disk-used')\n                }\n                )\n\n        }\n    }\n}\n\nopen( my $output, \"&gt;\", \"quotas.json\" ) or die $!;\nprint {$output} to_json( $data, { 'pretty' =&gt; 1 } );\nclose($output);\n</code></pre>\n\n<p>This is broadly working, and producing me pretty pictures. </p>\n\n<p>However I'm having two problems:</p>\n\n<p>Ordering of the JSON changes each run, because I'm using a hash. Whilst not a show stopper - is there a way I can enforce an order in the JSON output? (Not necessarily just 'sorted' alphabetically)</p>\n\n<p>Similarly - I'm looking at how to insert a 'volume' level node which isn't currently present, as I'm creating new anonymous hashes to insert into <code>children</code> at each layer of the <code>foreach</code> loop. This feels a bit clunky, but what I'm thinking is:</p>\n\n<ul>\n<li>Extract a list of volumes with <code>get_xpath('//volume')</code> and uniqueify it. </li>\n<li>Either iterate <code>per volume</code> finding subnodes that match (Is there an <code>xpath</code> expression to specify a child value?)</li>\n<li>Or create a 'staging' hash of hashes that I then 'merge' into <code>children</code> in the JSON. </li>\n</ul>\n\n<p>Does anyone have any better suggestions? </p>\n\n<p>I can quite easily create a hash of the desired structure e.g.</p>\n\n<pre><code>$stuff{$site}{$server}{$volume}{$qtree} = $size; \n</code></pre>\n\n<p>But then would have to turn that into the appropriate JSON (which I suppose might be a better approach overall). </p>\n"}, {"tags": ["perl", "security", "encryption", "token", "recaptcha"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1440135685, "post_id": 32069438, "comment_id": 52156707, "body": "Is there any reason why you&#39;re not using the JavaScript library to <a href=\"https://developers.google.com/recaptcha/docs/display\" rel=\"nofollow noreferrer\">render the widget</a>?"}, {"owner": {"reputation": 801, "user_id": 1198965, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/meqwa.jpg?s=128&g=1", "display_name": "manu_dilip_shah", "link": "https://stackoverflow.com/users/1198965/manu-dilip-shah"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1440154741, "post_id": 32069438, "comment_id": 52166978, "body": "@MattJacob The javascript library requires a unique key per domain.I wan&#39;t to use secure token for recaptcha that&#39;s one part.Other I want to do it using perl itself.Thanks"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1440168041, "post_id": 32069438, "comment_id": 52175743, "body": "Have you  tried any of the <a href=\"https://metacpan.org/search?q=recaptcha\" rel=\"nofollow noreferrer\">modules</a> available?"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 2766901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afeb1fb4ec44bacd941146277da94ece?s=128&d=identicon&r=PG", "display_name": "Anthony Petty", "link": "https://stackoverflow.com/users/2766901/anthony-petty"}, "is_accepted": true, "score": 1, "last_activity_date": 1447693417, "creation_date": 1447693417, "answer_id": 33740746, "question_id": 32069438, "link": "https://stackoverflow.com/questions/32069438/how-to-generate-a-google-recaptcha-v2-secure-token-with-perl/33740746#33740746", "title": "How to generate a Google ReCaptcha V2 secure token with Perl?", "body": "<p>I started with your code, but ended up with something a bit different. I'm no crypto expert, so I'm not exactly sure why my method works and yours doesn't. But here is what I've got - and it does work:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Crypt::ECB;\nuse UUID::Tiny ':std';\nuse Digest::SHA1 qw(sha1);\nuse MIME::Base64::URLSafe;\nuse Time::HiRes qw(time);\nuse Math::Round qw(round);\n\nmy $uuid = create_uuid_as_string(UUID_V4);\nmy $t = round(time * 1000);\nmy $json = '{\"session_id\":\"' . $uuid . '\",\"ts_ms\":' . $t . '}';\n\nmy $pad = 16 - (length($json) % 16);\n$json = $json . chr($pad)x$pad;\n\nmy $crypt = Crypt::ECB-&gt;new;\n$crypt-&gt;padding(PADDING_NONE);\n$crypt-&gt;cipher('Rijndael') || die $crypt-&gt;errstring;\n$crypt-&gt;key(substr(sha1($c-&gt;{captcha_secret_key}), 0, 16));\nmy $enc = urlsafe_b64encode($crypt-&gt;encrypt($json));\n</code></pre>\n\n<p>I basically converted <a href=\"https://github.com/slushie/recaptcha-secure-token\" rel=\"nofollow\">this php library</a> to rough perl to get this to work.</p>\n"}], "owner": {"reputation": 801, "user_id": 1198965, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/meqwa.jpg?s=128&g=1", "display_name": "manu_dilip_shah", "link": "https://stackoverflow.com/users/1198965/manu-dilip-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1485, "favorite_count": 0, "accepted_answer_id": 33740746, "answer_count": 1, "score": 0, "last_activity_date": 1447693417, "creation_date": 1439892512, "last_edit_date": 1439902474, "question_id": 32069438, "link": "https://stackoverflow.com/questions/32069438/how-to-generate-a-google-recaptcha-v2-secure-token-with-perl", "title": "How to generate a Google ReCaptcha V2 secure token with Perl?", "body": "<p>I am trying to use google secure token using perl as described in the link\n<a href=\"https://developers.google.com/recaptcha/docs/secure_token\" rel=\"nofollow\">https://developers.google.com/recaptcha/docs/secure_token</a></p>\n\n<p>However it always throws up that the secure token is invalid.\nI checked this link as well but with no success\n<a href=\"https://developers.google.com/recaptcha/docs/secure_token\" rel=\"nofollow\">https://stackoverflow.com/questions/31478724/how-to-generate-a-google-recaptcha-v2-secure-token-with-php</a></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Data::UUID;\nuse JSON;\nuse Time::HiRes qw/gettimeofday/;\nuse MIME::Base64::URLSafe;\nuse Digest::SHA1  qw(sha1 sha1_hex sha1_base64);\nuse Crypt::Rijndael;\n\nuse constant PUBLIC_KEY  =&gt; '...';\nuse constant PRIVATE_KEY =&gt; '...';\n\nmy $public_key = PUBLIC_KEY;\n\nprint \"Content-type: text/html;charset=UTF-8\\n\\n\";\n\nmy $uuid = Data::UUID-&gt;new();\n\nmy $uuid1 = $uuid-&gt;create_str();\nmy $uuidstr = $uuid-&gt;to_string( $uuid );\n\nmy $seconds = gettimeofday(); #in scalar context it returns a\nmy $ms      = int($seconds*1000);\n\nmy %hash;\n\n$hash{'session_id'} = $uuidstr;\n$hash{'timestamp'} = $ms;\n\nmy $json = JSON-&gt;new-&gt;allow_nonref;\nmy $json_text = $json-&gt;encode(\\%hash);\n$json_text =~ s/\"//g;\n\nmy $sha_one = sha1(PRIVATE_KEY);\nmy $new_secret_key = substr $sha_one, 0, 16;\n\nmy $block_size = 16;\nmy $pad = $block_size - ((length $json_text) % $block_size);\nmy $append_str = $pad x $pad;\n\n$json_text = $json_text . $append_str;\n\nmy $cipher = Crypt::Rijndael-&gt;new($new_secret_key, Crypt::Rijndael::MODE_ECB);\nmy $cipher_text = $cipher-&gt;encrypt($json_text);\nmy $encoded_text = urlsafe_b64encode($cipher_text);\n\nprint &lt;&lt;EOT;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;script src='//www.google.com/recaptcha/api.js'&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;form&gt;\n    &lt;div class=\"g-recaptcha\" data-sitekey=\"$public_key\" data-stoken=\"$encoded_text\"&gt;&lt;/div&gt;\n  &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nEOT\n</code></pre>\n\n<p>Can anybody point out any obvious mistakes in my code or suggest some already existing perl code?</p>\n"}, {"tags": ["perl", "selenium", "webdriver", "epic"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439890734, "post_id": 32068642, "comment_id": 52034572, "body": "Have you run selenium webdriver using <code>java -jar pathtowebdriver&#47;selenium-server-standalone-2.43.0.jar</code>?"}, {"owner": {"reputation": 609, "user_id": 5238575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b59ccbce8d379c42b9f4eaa17a48074?s=128&d=identicon&r=PG&f=1", "display_name": "prasannajit", "link": "https://stackoverflow.com/users/5238575/prasannajit"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439891156, "post_id": 32068642, "comment_id": 52034878, "body": "Hi Chankey, Just now i did that , after running  the firefox is opened but i got the below error Hello, World! Hello, king! Could not create new session: HASH(0x3f0e3e8) at (eval 76) line 482."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439891492, "post_id": 32068642, "comment_id": 52035098, "body": "Which version of firefox and webdriver are you using? I tested this on <code>selenium-server-standalone-2.44.0</code> and <code>firefox 33.0</code>. It worked fine. Try using latest version of both."}, {"owner": {"reputation": 609, "user_id": 5238575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b59ccbce8d379c42b9f4eaa17a48074?s=128&d=identicon&r=PG&f=1", "display_name": "prasannajit", "link": "https://stackoverflow.com/users/5238575/prasannajit"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439893174, "post_id": 32068642, "comment_id": 52036182, "body": "Hi Chankey, I am using firefox 34.0 and  and selenium-server-standalone-2.40.0 . I cannot change it due do my projecr restriction . Can u tell me how we can do this in CHROME. How to set the system properties ."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439893370, "post_id": 32068642, "comment_id": 52036303, "body": "According to the bug mentioned here: <a href=\"https://github.com/gempesaw/Selenium-Remote-Driver/issues/127#issuecomment-44372561\" rel=\"nofollow noreferrer\">github.com/gempesaw/Selenium-Remote-Driver/issues/&hellip;</a> you must be using Selenium 2.42 or greater."}, {"owner": {"reputation": 609, "user_id": 5238575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b59ccbce8d379c42b9f4eaa17a48074?s=128&d=identicon&r=PG&f=1", "display_name": "prasannajit", "link": "https://stackoverflow.com/users/5238575/prasannajit"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439893882, "post_id": 32068642, "comment_id": 52036633, "body": "hurray... !!! It  is working after adding selenium-44. Thank you very much friend Chankey  :)"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439896036, "post_id": 32068642, "comment_id": 52038070, "body": "You are welcome, please mark the answer as accepted in that case :) See <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">How does accepting an answer work</a>"}, {"owner": {"reputation": 116, "user_id": 833600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf217b04a8a9620c946af0ca273a248?s=128&d=identicon&r=PG", "display_name": "Freddy Vega", "link": "https://stackoverflow.com/users/833600/freddy-vega"}, "edited": false, "score": 0, "creation_date": 1450110629, "post_id": 32068642, "comment_id": 56285583, "body": "by the way, although you should be using the latest anyways, the issue mentioned here <a href=\"https://github.com/gempesaw/Selenium-Remote-Driver/issues/127#issuecomment-44372561\" rel=\"nofollow noreferrer\">github.com/gempesaw/Selenium-Remote-Driver/issues/&hellip;</a> is not a bug. The reporter simply upgraded and the issue went away. Which can also be due to a misconfiguration of some type. just an FYI."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 5238575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b59ccbce8d379c42b9f4eaa17a48074?s=128&d=identicon&r=PG&f=1", "display_name": "prasannajit", "link": "https://stackoverflow.com/users/5238575/prasannajit"}, "edited": false, "score": 0, "creation_date": 1439891673, "post_id": 32069030, "comment_id": 52035218, "body": "I have done that . Browser is started but getting the error  -Could not create new session: HASH(0x3f01a18) at (eval 76) line 482."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 609, "user_id": 5238575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b59ccbce8d379c42b9f4eaa17a48074?s=128&d=identicon&r=PG&f=1", "display_name": "prasannajit", "link": "https://stackoverflow.com/users/5238575/prasannajit"}, "edited": false, "score": 0, "creation_date": 1439892271, "post_id": 32069030, "comment_id": 52035624, "body": "Which version of webdriver are you using? Try 2.44."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1439893400, "last_edit_date": 1439893400, "creation_date": 1439891343, "answer_id": 32069030, "question_id": 32068642, "link": "https://stackoverflow.com/questions/32068642/perl-script-not-working-through-epic-plug-in-in-eclipse/32069030#32069030", "title": "Perl script not working through EPIC plug in in Eclipse", "body": "<p>Your code looks correct. Add <code>use strict; use warnings;</code> at the top after <code>shebang</code> and make sure the selenium standalone server is running.</p>\n\n<p>So steps would be</p>\n\n<ol>\n<li>Run selenium server: <code>java -jar selenium-server-standalone-2.44.0.jar</code></li>\n</ol>\n\n<p>Observe below output</p>\n\n<pre><code>\u27a4 java -jar selenium-server-standalone-2.44.0.jar\n15:18:56.677 INFO - Launching a standalone server\n15:18:56.900 INFO - Java: Oracle Corporation 25.40-b25\n15:18:56.900 INFO - OS: Windows 7 6.1 x86\n15:18:56.914 INFO - v2.44.0, with Core v2.44.0. Built from revision 76d78cf\n15:18:57.174 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub\n15:18:57.175 INFO - Version Jetty/5.1.x\n15:18:57.176 INFO - Started HttpContext[/selenium-server,/selenium-server]\n15:18:57.325 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@af7cc2\n15:18:57.325 INFO - Started HttpContext[/wd,/wd]\n15:18:57.325 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]\n15:18:57.325 INFO - Started HttpContext[/,/]\n15:18:57.329 INFO - Started SocketListener on 0.0.0.0:4444\n15:18:57.329 INFO - Started org.openqa.jetty.jetty.Server@133314b\n</code></pre>\n\n<ol start=\"2\">\n<li>Run your script.</li>\n</ol>\n\n<p>I tested this on selenium-server-standalone-2.44.0 and firefox 33.0. It worked fine. </p>\n\n<p><strong>Update:</strong> According to the bug mentioned <a href=\"https://github.com/gempesaw/Selenium-Remote-Driver/issues/127#issuecomment-44372561\" rel=\"nofollow\">here</a> you must be using Selenium 2.42 or greater.</p>\n"}], "owner": {"reputation": 609, "user_id": 5238575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b59ccbce8d379c42b9f4eaa17a48074?s=128&d=identicon&r=PG&f=1", "display_name": "prasannajit", "link": "https://stackoverflow.com/users/5238575/prasannajit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 32069030, "answer_count": 1, "score": 1, "last_activity_date": 1439893400, "creation_date": 1439890315, "last_edit_date": 1439890832, "question_id": 32068642, "link": "https://stackoverflow.com/questions/32068642/perl-script-not-working-through-epic-plug-in-in-eclipse", "title": "Perl script not working through EPIC plug in in Eclipse", "body": "<p>I have the below Perl script in my eclipse:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Selenium::Remote::Driver;\nprint \"Hello, World!\\n\";\nmy $name = \"king\";\nprint \"Hello, $name!\\n\";\nmy $driver = new Selenium::Remote::Driver('browser_name' =&gt; 'firefox');   \n$driver-&gt;get('http://www.google.com');\nprint $driver-&gt;get_title();\n$driver-&gt;quit();\n</code></pre>\n\n<p><strong>Output :</strong>                                                               </p>\n\n<pre><code>Hello, World!                                        \nHello, king!                                              \nSelenium server did not return proper status at (eval 91) line 64.\n</code></pre>\n\n<p>Why I am getting the error message:</p>\n\n<pre><code>\"Selenium server did not return proper status at (eval 91) line 64\"\n</code></pre>\n\n<p>The browser is not starting. Kindly help if anyone knows the solution.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1439879970, "post_id": 32065108, "comment_id": 52028017, "body": "<a href=\"http://stackoverflow.com/questions/6256633/how-can-you-determine-what-perl-module-is-causing-undefined-symbol-perl-tstack\" title=\"how can you determine what perl module is causing undefined symbol perl tstack\">stackoverflow.com/questions/6256633/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1439883732, "last_edit_date": 1495541677, "creation_date": 1439883732, "answer_id": 32066429, "question_id": 32065108, "link": "https://stackoverflow.com/questions/32065108/redhat-perl-5-10-1-getting-error-symbol-lookup-errorauto-math-pari-pari-so-un/32066429#32066429", "title": "RedHat Perl 5.10.1-Getting error &#39;symbol lookup error:auto/Math/Pari/Pari.so: undefined symbol: Perl_Tstack_sp_ptr&#39;", "body": "<p>See this previously asked question: <a href=\"https://stackoverflow.com/questions/6256633/how-can-you-determine-what-perl-module-is-causing-undefined-symbol-perl-tstack\">How can you determine what Perl module is causing &quot;undefined symbol: Perl_Tstack_sp_ptr?&quot;</a></p>\n\n<p>Also see this thread on perlmonks: <a href=\"http://www.perlmonks.org/?node_id=832773\" rel=\"nofollow noreferrer\">Symbol lookup error</a></p>\n\n<p>Quoting from thread on perlmonks:</p>\n\n<blockquote>\n  <p>Major Perl versions (5.6, 5.8, 5.10, 5.12) aren't binary compatible\n  with each other. You can't use a module with a compiled component if\n  you're using a different major version of Perl than the one that was\n  used to install the module. (I think you can also have problems if you\n  use an earlier minor version of Perl than the one with which the\n  module was installed.)</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 5237875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHtLW.jpg?s=128&g=1", "display_name": "Niljos", "link": "https://stackoverflow.com/users/5237875/niljos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2625, "favorite_count": 0, "closed_date": 1439884259, "answer_count": 1, "score": 0, "last_activity_date": 1439883732, "creation_date": 1439879513, "last_edit_date": 1439880990, "question_id": 32065108, "link": "https://stackoverflow.com/questions/32065108/redhat-perl-5-10-1-getting-error-symbol-lookup-errorauto-math-pari-pari-so-un", "closed_reason": "Duplicate", "title": "RedHat Perl 5.10.1-Getting error &#39;symbol lookup error:auto/Math/Pari/Pari.so: undefined symbol: Perl_Tstack_sp_ptr&#39;", "body": "<p>Need help with Perl version 5.10.1 on RedHat Linux 6.0.\nI have searched related topics on StackOverflow but this does not relate to common \"Symbol lookup error\"</p>\n\n<p>I am trying to run a perl script returns </p>\n\n<blockquote>\n  <p>/usr/bin/perl: symbol lookup error: ./../lib/i386-linux-thread-multi/auto/Math/Pari/Pari.so: undefined symbol: Perl_Tstack_sp_ptr.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>./../lib/i386-linux-thread-multi/auto/IO/Tty/Tty.so: undefined symbol: Perl_Tstack_sp_ptr</p>\n</blockquote>\n\n<p>I have tried:</p>\n\n<ol>\n<li>updated IO module from CPAN to latest IO-1.25</li>\n<li>yum update: to get system up-to-date.</li>\n<li>updated Math-Pari-2.010808 from CPAN</li>\n<li>updated Tty from CPAN</li>\n</ol>\n"}, {"tags": ["regex", "perl", "unix", "cut"], "comments": [{"owner": {"reputation": 842, "user_id": 1468236, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WA1OU.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1468236/ravi"}, "edited": false, "score": 0, "creation_date": 1439873719, "post_id": 32063777, "comment_id": 52025560, "body": "which language are you trying to code this in?"}, {"owner": {"reputation": 177, "user_id": 5191328, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5987664be1f388144a483a5adbf53f99?s=128&d=identicon&r=PG&f=1", "display_name": "Gloom", "link": "https://stackoverflow.com/users/5191328/gloom"}, "edited": false, "score": 0, "creation_date": 1439873782, "post_id": 32063777, "comment_id": 52025586, "body": "Unix or perl (one-liner) preferably."}, {"owner": {"reputation": 177, "user_id": 5191328, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5987664be1f388144a483a5adbf53f99?s=128&d=identicon&r=PG&f=1", "display_name": "Gloom", "link": "https://stackoverflow.com/users/5191328/gloom"}, "edited": false, "score": 0, "creation_date": 1439873909, "post_id": 32063777, "comment_id": 52025627, "body": "I&#39;ve tried the different cut syntaxes and all I can seem to do is split into columns, cut-c1-4 individually and paste, however this is very inefficient"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1439874563, "creation_date": 1439874563, "answer_id": 32063962, "question_id": 32063777, "link": "https://stackoverflow.com/questions/32063777/how-to-cut-each-word-in-a-file/32063962#32063962", "title": "How to cut each word in a file", "body": "<p>Use <code>substr</code> to trim each word.  Name the following <code>trim.pl</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n    chomp;\n    my @words = split /\\s+/;\n    my @trim;\n    for my $word (@words) {\n        push @trim, substr($word,0,4);\n    }\n    print join ' ', @trim;\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Run it as:</p>\n\n<pre><code>cat names.txt | trim.pl\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>Jack Poor King Twin\nVisc Geor Liza\nSton Goos Elep Yvon Chic\nGeck Amoe\nRich\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1439874603, "creation_date": 1439874603, "answer_id": 32063972, "question_id": 32063777, "link": "https://stackoverflow.com/questions/32063777/how-to-cut-each-word-in-a-file/32063972#32063972", "title": "How to cut each word in a file", "body": "<p>Try this Pattern matching enough for to do it</p>\n\n<pre><code>while(&lt;DATA&gt;)\n{\n(@ar) = $_ =~m/(.{4}).+?\\s/g;\nprint \"@ar\\n\";\n}\n__DATA__\nJackal Poorest Kingship Twinkle\nViscount George Lizard\nStone Goose Elephant Yvonne Chicken\nGecko Amoeba\nRichard\n\noutput\nJack Poor King Twin\nVisc Geor Liza\nSton Goos Elep Yvon Chic\nGeck Amoe\nRich\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 1, "creation_date": 1439876425, "post_id": 32063976, "comment_id": 52026508, "body": "Some explanation to go with the code would make it a better answer."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 2, "creation_date": 1439876583, "post_id": 32063976, "comment_id": 52026565, "body": "Yes, but it would also steal from the reader the joy of figuring it out!"}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 6, "creation_date": 1439876643, "post_id": 32063976, "comment_id": 52026586, "body": "Well, the explanation should be short enough to arouse interest and long enough to cover the subject; like a skirt :)"}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 1, "last_activity_date": 1439874613, "creation_date": 1439874613, "answer_id": 32063976, "question_id": 32063777, "link": "https://stackoverflow.com/questions/32063777/how-to-cut-each-word-in-a-file/32063976#32063976", "title": "How to cut each word in a file", "body": "<pre><code>perl -lane '$,=\" \"; print map substr($_,0,4),@F' input\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1439875038, "last_edit_date": 1439875038, "creation_date": 1439874705, "answer_id": 32063996, "question_id": 32063777, "link": "https://stackoverflow.com/questions/32063777/how-to-cut-each-word-in-a-file/32063996#32063996", "title": "How to cut each word in a file", "body": "<p>Perl from command line,</p>\n\n<pre><code>perl -anE 'say join \" \", map /(.{1,4})/, @F' file.txt\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use feature 'say';\n\nwhile (my $line = &lt;&gt;) {\n  my @F = split ' ', $line;\n  say join \" \", map /(.{1,4})/, @F; \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1441028575, "post_id": 32099280, "comment_id": 52500438, "body": "without any explanation and naming variables with L, I wouldn&#39;t call this readable."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1439996788, "creation_date": 1439996788, "answer_id": 32099280, "question_id": 32063777, "link": "https://stackoverflow.com/questions/32063777/how-to-cut-each-word-in-a-file/32099280#32099280", "title": "How to cut each word in a file", "body": "<p>A more readable awk version</p>\n\n<pre><code>awk '{l=sep=\"\"; for(i=1;i&lt;=NF;i++){l = l sep substr($i,1,4); sep=FS}; print l}'\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5191328, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5987664be1f388144a483a5adbf53f99?s=128&d=identicon&r=PG&f=1", "display_name": "Gloom", "link": "https://stackoverflow.com/users/5191328/gloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 32063962, "answer_count": 5, "score": 1, "last_activity_date": 1439996788, "creation_date": 1439873551, "last_edit_date": 1439876365, "question_id": 32063777, "link": "https://stackoverflow.com/questions/32063777/how-to-cut-each-word-in-a-file", "title": "How to cut each word in a file", "body": "<p>Is there a command which can turn a tab delimited file to give just the first 4 letters of each word? </p>\n\n<p>Eg. Turning this file</p>\n\n<pre><code>Jackal Poorest Kingship Twinkle\nViscount George Lizard\nStone Goose Elephant Yvonne Chicken\nGecko Amoeba\nRichard\n</code></pre>\n\n<p>To this file</p>\n\n<pre><code>Jack Poor King Twin\nVisc Geor Liza\nSton Goos Elep Yvon Chic\nGeck Amoe\nRich\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1439872389, "post_id": 32063517, "comment_id": 52025206, "body": "Hint: <code>\\d</code> matches digits in a regular expression, <code>\\D</code> matches non-digits"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 4, "creation_date": 1439872660, "post_id": 32063517, "comment_id": 52025271, "body": "Then why there is a space in this <code>XYZ 10</code> and not in <code>Rama1</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1439872873, "last_edit_date": 1439872873, "creation_date": 1439872532, "answer_id": 32063618, "question_id": 32063517, "link": "https://stackoverflow.com/questions/32063517/remove-spaces-between-words-only-not-between-numbers/32063618#32063618", "title": "Remove spaces between words only not between numbers", "body": "<p>You may use the below lookaround based regex.</p>\n\n<pre><code>perl -pe 's/\\s+(?=\\D)|(?&lt;=\\D)\\s+//g' file\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>$ echo 'Rama 1 * 2.34 * ( L - 0.45 ) XYZ 10 20.05 30.06 40 P &gt; 25.' | perl -pe 's/\\s+(?=\\D)|(?&lt;=\\D)\\s+//g'\nRama1*2.34*(L-0.45)XYZ10 20.05 30.06 40P&gt;25.\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ echo 'Rama 1 * 2.34 * ( L - 0.45 ) XYZ 10 20.05 30.06 40 P &gt; 25.' | perl -pe 's/(?&lt;=[^\\s\\w])\\s+|\\s+(?=[^\\w\\s])//g'\nRama 1*2.34*(L-0.45)XYZ 10 20.05 30.06 40 P&gt;25.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 1, "last_activity_date": 1439873954, "creation_date": 1439873954, "answer_id": 32063839, "question_id": 32063517, "link": "https://stackoverflow.com/questions/32063517/remove-spaces-between-words-only-not-between-numbers/32063839#32063839", "title": "Remove spaces between words only not between numbers", "body": "<pre><code>(?&lt;!\\d)\\h+|\\h+(?!\\d)\n</code></pre>\n\n<p>You can use <code>lookarounds</code> here.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/uF4oY4/62\" rel=\"nofollow\">https://regex101.com/r/uF4oY4/62</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5237610, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153557102814176/picture?type=large", "display_name": "Mukesh Baranwal", "link": "https://stackoverflow.com/users/5237610/mukesh-baranwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439883334, "creation_date": 1439871991, "last_edit_date": 1439883334, "question_id": 32063517, "link": "https://stackoverflow.com/questions/32063517/remove-spaces-between-words-only-not-between-numbers", "title": "Remove spaces between words only not between numbers", "body": "<p>I have a string consist of words, special characters (*, |, ( etc.) and numbers(floating). I want to remove white spaces between only words and special characters. Spaces between numbers should not be removed. How I can do it in Perl? </p>\n\n<p>E.g.:</p>\n\n<p><code>Rama 1 * 2.34 * ( L - 0.45 ) XYZ 10 20.05 30.06 40 P  &gt;  25.</code></p>\n\n<p>It should be after conversion:</p>\n\n<p><code>Rama1*2.34*(L-0.45)XYZ 10 20.05 30.06 40 P&gt;25.</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1439871799, "post_id": 32063424, "comment_id": 52025066, "body": "Why aren&#39;t you using Time modules available on CPAN?"}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439872933, "post_id": 32063424, "comment_id": 52025340, "body": "I can use the module to convert. however, I need to change the resulted date format again like my $date_time = &quot;$1-$2-$3T$4:$5:$6Z&quot;;(2015-08-11T21:17:41Z), so I am trying to manage code in simple lines instead of multiple lines like above code posted. since I need to convert this format to many individual hash output . thanks"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439873127, "post_id": 32063424, "comment_id": 52025376, "body": "You could use <code>DateTime::Format::ISO8601</code> for that."}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1439875209, "post_id": 32063424, "comment_id": 52026069, "body": "thanks for your suggestion"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439884011, "post_id": 32063424, "comment_id": 52030312, "body": "Trying to put too much stuff into a &quot;simple line&quot; will likely result in code that is very hard to read. Instead you should organize it in a <code>sub</code> and use clear names for your variables. It&#39;s better to have a few more lines of code, but concise and easy to understand blocks of those. Add some comments explaining why you need to do that conversion between formats back and forth."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1440066972, "post_id": 32066672, "comment_id": 52124524, "body": "hi , now able to convert this format , however, I would like to assign the output time format to some varabile , if I assign the output , I am not getting , please let me know how to fix this  say format_custom_to_iso($row-&gt;{update_time}); say format_custom_to_iso($row-&gt;{next_check});  2015-05-11T21:17:41Z 2015-05-12T09:17:41Z  like   $old_time = say format_custom_to_iso($row-&gt;{update_time}); $new_time = say format_custom_to_iso($row-&gt;{next_check});"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1440067081, "post_id": 32066672, "comment_id": 52124582, "body": "Putting code into a StackOverflow comment is a really bad idea. If you have a new question then please ask a new question."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1440067450, "post_id": 32066672, "comment_id": 52124837, "body": "<code>$new_time = say format_custom_to_iso($row-&gt;{next_check}</code> makes no sense at all. You&#39;re storing the return value from <code>say</code> (which will just be a true or false value). If you want to display the result and copy the value in the same line then use <code>say $new_time = format_custom_to_iso($row-&gt;{next_check}</code> instead. But this is pretty basic programming."}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1440071090, "post_id": 32066672, "comment_id": 52127142, "body": "hi, thank you so much. I didn;t use that &#39;say&#39; before. sorry for that.  Now I am able to get it, thanks again"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1439884458, "creation_date": 1439884458, "answer_id": 32066672, "question_id": 32063424, "link": "https://stackoverflow.com/questions/32063424/perl-different-time-format-output/32066672#32066672", "title": "perl different time format output", "body": "<p>Use <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a>. It's a standard part of the Perl distribution. Use <code>strptime</code> (string parse time) to parse your string into a Time::Piece object. Then use <code>strftime</code> (string format time) to display your Time::Piece object in whatever format you want.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece;\n\nmy $in_format  = '%Y-%m-%d %H:%M:%S';\nmy $out_format = '%Y-%m-%dT%H:%M:%SZ';\n\nmy $in_date = '2015-08-18 08:51:00';\n\nmy $date = Time::Piece-&gt;strptime($in_date, $in_format);\n\nsay $date-&gt;strftime($out_format);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1439884507, "creation_date": 1439884507, "answer_id": 32066693, "question_id": 32063424, "link": "https://stackoverflow.com/questions/32063424/perl-different-time-format-output/32066693#32066693", "title": "perl different time format output", "body": "<p>Your timestamps are already almost in the right format. There are only two or maybe three things that are not.</p>\n\n<ul>\n<li>Your regex has a <code>$</code> in the end but not a <code>^</code> in the beginning, so maybe the timestamp fields are starting with garbage. If yes, that needs to be removed. If not, ignore this point.</li>\n<li>The space should be a <code>T</code></li>\n<li>There should be a <code>Z</code> in the end</li>\n</ul>\n\n<p>You are also repeating the same pattern twice. That is an indication that you really want a subroutine so you only need to write the code once. </p>\n\n<p>Then you are assigning a bunch of variables (<code>$year</code>, <code>$month</code>, ...) that you are never using. That's very inefficient if this is in a loop with lots of iterations. There would also be a warning saying you redeclared all of those, because you declare them again with <code>my</code> a few lines down. <code>use warnings</code> would tell you about that.</p>\n\n<p>Especially if this is run a lot of times, rolling your own for this simple substitution is faster than using a full-featured parser.</p>\n\n\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy $row = {\n  update_time =&gt; 'foo 2015-05-11 21:17:41',\n  next_check =&gt; '2015-05-12 09:17:41',\n};\n\nsay format_custom_to_iso($row-&gt;{update_time});\nsay format_custom_to_iso($row-&gt;{next_check});\n\nsub format_custom_to_iso {\n  my ($timestamp) = @_;\n\n  # remove non-digits from the front (maybe this can be omitted)\n  $timestamp =~ s/^[^0-9]+//;\n\n  # replace the space with a T in the middle\n  $timestamp =~ tr/ /T/;\n\n  # and add a Z in the end\n  return  $timestamp . 'Z';\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>2015-05-11T21:17:41Z\n2015-05-12T09:17:41Z\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 32066672, "answer_count": 2, "score": -3, "last_activity_date": 1439884507, "creation_date": 1439871213, "question_id": 32063424, "link": "https://stackoverflow.com/questions/32063424/perl-different-time-format-output", "title": "perl different time format output", "body": "<p>I am trying to convert to some date format from the below hash output.  I am in need of convert many hash output to this date format below. I am using this below code now. it seems this code is not proper way I used. </p>\n\n<p>Please share your thoughts to get that time format as simple way from the each hash output</p>\n\n<pre><code>my $status_update_time = \"$row-&gt;{'update_time'}\";\n$status_update_time =~ m/(\\d{4})-(\\d{2})-(\\d{2})\\ (\\d{2}):(\\d{2}):(\\d{2})$/;\nmy ($year, $month, $date,$hours,$minute,$second) = ($1, $2, $3, $4, $5, $6);\nmy $date_time = \"$1-$2-$3T$4:$5:$6TZ\"; #2015-08-11T04:31:41Z# expecting this time output\n\nmy $next_check = \"$row-&gt;{'next_check'}\";\n$next_check =~ m/(\\d{4})-(\\d{2})-(\\d{2})\\ (\\d{2}):(\\d{2}):(\\d{2})$/;\nmy ($year, $month, $date,$hours,$minute,$second) = ($1, $2, $3, $4, $5, $6);\nmy $next_check_time = \"$1-$2-$3T$4:$5:$6Z\"; #2015-08-11T04:31:41Z# expecting this time output\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "join", "split"], "answers": [{"tags": [], "owner": {"reputation": 3973, "user_id": 266747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/da5e3914edcd58b1abd64a38a2cff8a5?s=128&d=identicon&r=PG", "display_name": "Barton Chittenden", "link": "https://stackoverflow.com/users/266747/barton-chittenden"}, "is_accepted": false, "score": 1, "last_activity_date": 1439861190, "creation_date": 1439861190, "answer_id": 32062154, "question_id": 32062057, "link": "https://stackoverflow.com/questions/32062057/how-can-i-separate-six-digits-in-perl-and-have-a-between-each-section/32062154#32062154", "title": "How can I separate six digits in perl and have a / between each section?", "body": "<p>Instead of capturing $datestring, you can use capture groups to capture month day and year individually:</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) {\n    my ( $month, $day, $year ) = $line =~ /(\\d{2})(\\d{2})(\\d{2})/;\n    print \"$month/$day/$year\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5152917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636686673d6c223ee24fef0eee0ce443?s=128&d=identicon&r=PG&f=1", "display_name": "JoJA", "link": "https://stackoverflow.com/users/5152917/joja"}, "edited": false, "score": 0, "creation_date": 1439916183, "post_id": 32062464, "comment_id": 52052455, "body": "Awesome!  Thank you!  I had something similar, but it was putting double slashes.  This I believe will work perfectly!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1439863784, "creation_date": 1439863784, "answer_id": 32062464, "question_id": 32062057, "link": "https://stackoverflow.com/questions/32062057/how-can-i-separate-six-digits-in-perl-and-have-a-between-each-section/32062464#32062464", "title": "How can I separate six digits in perl and have a / between each section?", "body": "<p>This solution uses the fact that a non-matching regex pattern will return an empty list in list context. Using <code>join</code> on an empty list will return the null string, which is a <em>false</em> value</p>\n\n<p>So the statement <code>$date = join '/',  /=\\((\\d\\d)(\\d\\d)(\\d\\d)/</code> will set <code>$date</code> to either the null string or a date like <code>12/34/56</code> if a sequence like <code>=(123456</code> appears in the current line</p>\n\n<p>It is usually easier to use <code>$_</code> to hold the current line, as it is the default parameter for many built-in functions and often makes for clearer more concise code</p>\n\n<p>It's hard to know what to write as an example as you don't say what else you want to do with your file data. I hope this code is clear enough for you to extrapolate to your own solution; it just prints the reformatted date when the first matching line is read</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.14;\nuse autodie;\nuse re '/a';\n\nmy $file = 'd1528235.txt';\n\nopen my $fh, '&lt;', $file;\n\nmy $date;\n\nwhile ( &lt;$fh&gt; ) {\n\n    chomp;\n    if ( not $date and $date = join '/', /=\\((\\d\\d)(\\d\\d)(\\d\\d)/ ) {\n        say $date;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1439864354, "creation_date": 1439864354, "answer_id": 32062541, "question_id": 32062057, "link": "https://stackoverflow.com/questions/32062057/how-can-i-separate-six-digits-in-perl-and-have-a-between-each-section/32062541#32062541", "title": "How can I separate six digits in perl and have a / between each section?", "body": "<p>The simplest method is:</p>\n\n<pre><code>my $s = '151211';\nsay join('/', $s =~ /([0-9]{2})/g);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5152917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636686673d6c223ee24fef0eee0ce443?s=128&d=identicon&r=PG&f=1", "display_name": "JoJA", "link": "https://stackoverflow.com/users/5152917/joja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 32062464, "answer_count": 3, "score": 0, "last_activity_date": 1439864354, "creation_date": 1439860235, "question_id": 32062057, "link": "https://stackoverflow.com/questions/32062057/how-can-i-separate-six-digits-in-perl-and-have-a-between-each-section", "title": "How can I separate six digits in perl and have a / between each section?", "body": "<p>I have grabbed a string from a file that contains a date, but without formatting.  I want to format that date with a / in between the month, day, and year.  It currently returns mmddyy, but I want it to format as mm/dd/yy for use in a spreadsheet.  Any help is appreciated.  Here is what I have so far...</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $file = 'd1528235.txt';\nopen my $fh, '&lt;', $file or die \"Could not open '$file' $!\\n\";\nmy $datestring;\nmy $date;\nwhile (my $line = &lt;$fh&gt;) {\n  chomp $line;\n  if ( !$datestring and $line =~  m/=\\((\\d{6})/ ) {\n    $datestring = $1;\n #   print $datestring;\n  my $date;  \n  my @date = split(/(\\d\\d)/, $datestring);\n  #foreach my $d (@date) \n    $date = join(\"/\",@date);\n#    print \"@date\\n\";\n    print \"$date\\n\";\n }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1439854607, "post_id": 32061186, "comment_id": 52021249, "body": "Are you using the <a href=\"https://metacpan.org/pod/TryCatch\" rel=\"nofollow noreferrer\">TryCatch</a> module? Also, what do you mean by &quot;doesn&#39;t work?&quot; Please <a href=\"https://stackoverflow.com/posts/32061186/edit\">edit</a> your question to show the exact error you&#39;re getting, if any, and the reason you think it isn&#39;t working."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1439856178, "post_id": 32061186, "comment_id": 52021600, "body": "not many perl builtins throw exceptions when they encounter something unexpected; instead, they give a warning (and you should always enable warnings so that you see them).  you may want to tell perl to promote warnings to exceptions with <code>use warnings &#39;FATAL&#39; =&gt; &#39;all&#39;;</code>"}, {"owner": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1439859574, "post_id": 32061186, "comment_id": 52022368, "body": "@ElliottFrisch Or, hardball tactics: <code>&quot;If you terminate this program without entering an integer, all your files will be erased&quot;</code>."}, {"owner": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "reply_to_user": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1439859694, "post_id": 32061186, "comment_id": 52022396, "body": "@Kaz Pffft.... &quot;If you terminate this program without entering an integer, skynet will send a T800 back in time to murder your mother.&quot; Jon Connor didn&#39;t enter an integer. And we all know what happened to him."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1439855963, "post_id": 32061360, "comment_id": 52021545, "body": "for some value of &quot;digits&quot;.  that will include all sorts of unicode &quot;digit&quot; characters.  with 5.14+, specify that you only mean ascii digits: <code>&#47;^\\d+$&#47;a</code>. or explicitly say <code>&#47;^[0-9]+$&#47;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439856846, "post_id": 32061360, "comment_id": 52021775, "body": "Note that the <code>&#47;a</code> modifier requires Perl 5 version 14 or better"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1439856822, "last_edit_date": 1439856822, "creation_date": 1439854602, "answer_id": 32061360, "question_id": 32061186, "link": "https://stackoverflow.com/questions/32061186/how-can-i-force-the-user-to-enter-an-integer/32061360#32061360", "title": "How can I force the user to enter an integer?", "body": "<p>Check to see if input has only digits and nothing else...</p>\n\n<pre><code>use warnings;\nuse strict;\n\nprint \"Enter integer: \";\n\nmy $input = &lt;&gt;;\nchomp $input;\n\nprint \"is int\\n\" if $input =~ /^[0-9]+$/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439864277, "post_id": 32061943, "comment_id": 52023353, "body": "The non-greedy quantifiers don&#39;t appear to have any advantage over the standard ones in this case"}, {"owner": {"reputation": 51, "user_id": 3945352, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/89a8893f60e3f84b6fc633735468f65a?s=128&d=identicon&r=PG&f=1", "display_name": "Blue Master", "link": "https://stackoverflow.com/users/3945352/blue-master"}, "edited": false, "score": 0, "creation_date": 1440276518, "post_id": 32061943, "comment_id": 52208893, "body": "Thanks so muchm,i will see that."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1439864420, "last_edit_date": 1439864420, "creation_date": 1439859160, "answer_id": 32061943, "question_id": 32061186, "link": "https://stackoverflow.com/questions/32061186/how-can-i-force-the-user-to-enter-an-integer/32061943#32061943", "title": "How can I force the user to enter an integer?", "body": "<p>You really do not want to punish users for leading/trailing spaces (as too many web sites these days seem to be doing), but also avoid leading zeros. Also, make sure the output is flushed before asking for input:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $input;\n\nuntil (defined $input) {\n    local $| = 1;\n    print 'Enter an integer: ';\n    ($input) = (&lt;STDIN&gt; =~ /\\A \\s* (-? [1-9] [0-9]* ) \\s* \\z/x);\n}\n\nprint \"$input\\n\";\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/perlfunc#int\" rel=\"nofollow\">int</a> function does not check if something is an integer. Instead, it converts its argument to an integer. So, <code>int(1)</code> is <code>1</code>, <code>int(1.11)</code> is also <code>1</code>, and <code>int('a')</code> is <code>0</code> &mdash; with a warning if you enabled warnings.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><p><a href=\"https://metacpan.org/pod/perlfaq4#How-do-I-determine-whether-a-scalar-is-a-number-whole-integer-float\" rel=\"nofollow\">\"How do I determine whether a scalar is a number/whole/integer/float?\" in perlfaq4</a>. You should read the excellent documentation that comes with Perl.</p></li>\n<li><p><a href=\"https://metacpan.org/pod/perlvar#OUTPUT_AUTOFLUSH\" rel=\"nofollow\">perldoc -v '$|'</a></p></li>\n</ul>\n"}], "owner": {"reputation": 51, "user_id": 3945352, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/89a8893f60e3f84b6fc633735468f65a?s=128&d=identicon&r=PG&f=1", "display_name": "Blue Master", "link": "https://stackoverflow.com/users/3945352/blue-master"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439864420, "creation_date": 1439853216, "last_edit_date": 1439854524, "question_id": 32061186, "link": "https://stackoverflow.com/questions/32061186/how-can-i-force-the-user-to-enter-an-integer", "title": "How can I force the user to enter an integer?", "body": "<p>I want to check that the input from the user is an integer number. I tried the following, but it doesn't work:</p>\n\n<pre><code>try {\n    print \"Enter int\";\n    $num=int(&lt;&gt;);\n    print \"okej\";\n}\ncatch (ValueError $e{\n    print\"not int\";\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "system"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439848677, "post_id": 32060288, "comment_id": 52019513, "body": "It could be worth noting that <code>system</code> uses <code>sh</code> shell, and in the <code>sh</code> shell there is no <code>source</code> command.. therefore the error message"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1439849049, "post_id": 32060288, "comment_id": 52019657, "body": "@H&#229;konH&#230;gland while that&#39;s true, system called like that doesn&#39;t even use sh; it is perl trying and failing to find the source executable"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439849535, "post_id": 32060288, "comment_id": 52019804, "body": "I see.. the reason that a call to <code>sh</code> is omitted is that there is no shell meta characters in the argument. Thanks."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1439848288, "creation_date": 1439848288, "answer_id": 32060288, "question_id": 32059777, "link": "https://stackoverflow.com/questions/32059777/how-to-use-the-source-command-with-the-system-function/32060288#32060288", "title": "How to use the source command with the system() function?", "body": "<p>source is a shell built-in that executes a shell script using the current shell interpreter.  So it doesn't work as an external command and won't change the environment of your perl process even if you change your system call to invoke a shell instead of it trying to run an external program directly.</p>\n\n<p>You could run your <code>env.mk</code> and then output the resulting environment and update perl's environment accordingly, though:</p>\n\n<pre><code>for my $env (`bash -c 'source env.mk;env'`) {\n    chomp $env;\n    my ($var,$val) = split /=/, $env, 2;\n    $ENV{$var} = $val;\n}\n</code></pre>\n\n<p>(with obvious problems if environment variables contain newlines).</p>\n\n<p>Update: just read <em>all</em> of your question, not just the beginning.  If all you want to do is execute a shell script, just do:</p>\n\n<pre><code>system \"sh env.mk\";\n</code></pre>\n\n<p>source is completely unnecessary for this.</p>\n"}], "owner": {"reputation": 15, "user_id": 4682176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98bd0c0c72e4ae78dd233751b44c0382?s=128&d=identicon&r=PG&f=1", "display_name": "Samss77", "link": "https://stackoverflow.com/users/4682176/samss77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439929702, "creation_date": 1439845872, "last_edit_date": 1439929702, "question_id": 32059777, "link": "https://stackoverflow.com/questions/32059777/how-to-use-the-source-command-with-the-system-function", "title": "How to use the source command with the system() function?", "body": "<p>I need to source a few environment variables in another file. If I use the <code>source</code> command with <code>system()</code> function, it's complaining about \"No such file or directory\". Am I missing something?</p>\n\n<p>My code looks like below. In my code, I have only the <code>system()</code> function running the <code>source</code> command. The source file has just only one command: <code>pwd</code> (Present working directory).</p>\n\n<p><strong>perl_system.pl</strong></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nsystem \"source env.mk\"\n</code></pre>\n\n<p><strong>env.mk</strong> (contents of env.mk which I want to source has just pwd for now\"</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pwd\n</code></pre>\n\n<p>When I run this command, I see the below error</p>\n\n<pre><code>$ perl -w perl_system.pl\nCan't exec \"source\": No such file or directory at perl_system.pl line 2.\n</code></pre>\n"}, {"tags": ["perl", "uwsgi", "dancer"], "comments": [{"owner": {"reputation": 5851, "user_id": 1107226, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CDrjO.png?s=128&g=1", "display_name": "leanne", "link": "https://stackoverflow.com/users/1107226/leanne"}, "edited": false, "score": 1, "creation_date": 1575323234, "post_id": 32059663, "comment_id": 104520120, "body": "They&#39;re still kissing up in December of 2019, lol"}], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1648, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1439845400, "creation_date": 1439845400, "question_id": 32059663, "link": "https://stackoverflow.com/questions/32059663/uwsgi-deployment-using-emperor-repeated-announcing-my-loyalty-to-the-emperor", "title": "uwsgi deployment using Emperor: Repeated &quot;announcing my loyalty to the emperor&quot;", "body": "<p>Using uwsgi running two psgi Perl Dancer apps.</p>\n\n<p>Is it normal for uwsgi vassals to repeatedly announce their loyalty to the Emperor, upon nearly every request?</p>\n\n<p>Here's a small portion of my uwsgi.log file:</p>\n\n<pre><code>announcing my loyalty to the Emperor...\nMon Aug 17 20:51:59 2015 - [emperor] vassal www.ini is now loyal\n[pid: 1713|app: 0|req: 4/11] 0.0.0.0 () {44 vars in 873 bytes} [Mon Aug 17 20:52:12 2015] GET /sitemap-index.xml =&gt; generated 284 bytes in 7 msecs (HTTP/1.1 200) 4 headers in 146 bytes (0 switches on core 0)\n[pid: 1706|app: 0|req: 2/12] 0.0.0.0 () {42 vars in 808 bytes} [Mon Aug 17 20:52:22 2015] GET / =&gt; generated 113840 bytes in 207 msecs (HTTP/1.1 200) 4 headers in 143 bytes (0 switches on core 0)\n[pid: 1709|app: 0|req: 1/13] 0.0.0.0 () {42 vars in 844 bytes} [Mon Aug 17 20:52:35 2015] GET /about =&gt; generated 124031 bytes in 1325 msecs (HTTP/1.1 200) 4 headers in 143 bytes (0 switches on core 0)\nannouncing my loyalty to the Emperor...\nMon Aug 17 20:52:36 2015 - [emperor] vassal www.ini is now loyal\n[pid: 1713|app: 0|req: 5/14] 0.0.0.0 () {44 vars in 865 bytes} [Mon Aug 17 20:52:38 2015] GET / =&gt; generated 113840 bytes in 129 msecs (HTTP/1.1 200) 4 headers in 143 bytes (0 switches on core 0)\n</code></pre>\n\n<p>These announcements of loyalty to the Emperor appear to occur with nearly every request.</p>\n\n<p>Are these poor vassals trying to kiss up to the Emperor for special favors, or (more likely) is there something wrong with my configuration?</p>\n"}, {"tags": ["perl", "for-loop"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1439843937, "post_id": 32059111, "comment_id": 52017392, "body": "If you&#39;re using &#39;dynamic names&#39; at any point, what you want is a hash."}, {"owner": {"reputation": 1, "user_id": 5228575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631d64ecbb4b97a1b84483fff95c9f26?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/5228575/ash"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439844505, "post_id": 32059111, "comment_id": 52017675, "body": "@Sobrique- can you show me one example of that ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1439844623, "post_id": 32059111, "comment_id": 52017732, "body": "<code>my %hash_of_arrays; @{$hash_of_arrays{&quot;a1&quot;}} = ( &quot;some value&quot; ); </code> - similar approach works with array of arrays. What you definitely <i>shouldn&#39;t</i> do is use symbolic names for a variable - that way lies madness."}], "owner": {"reputation": 1, "user_id": 5228575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631d64ecbb4b97a1b84483fff95c9f26?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/5228575/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1439843182, "answer_count": 0, "score": 0, "last_activity_date": 1439843097, "creation_date": 1439843097, "question_id": 32059111, "link": "https://stackoverflow.com/questions/32059111/dynamic-array-using-perl-code-begineer", "closed_reason": "Duplicate", "title": "Dynamic array using perl code. Begineer", "body": "<p>I have a PERL code and i wanted to know if i can assign the names of the array dynamically. For eg, here is the code.</p>\n\n<pre><code>my @a0=();\nmy @a2=();\nmy @a2=();\nmy @a3=();\nmy @a4=(); \nmy @a5=();\nmy @a6=();\nmy @a7=();\n</code></pre>\n\n<p>USing a for loop, can we assign these names dynamically rather than initializing like the one above. Pls let me know....</p>\n\n<p>I tried this but it didnt work. </p>\n\n<pre><code>for (my $c=0; $c&lt;= 7; $c++) \n     {\n      my @a.$c=();\n     }\n</code></pre>\n"}, {"tags": ["function", "recursion", "subroutine", "perl"], "comments": [{"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 3, "creation_date": 1439839557, "post_id": 32058087, "comment_id": 52015114, "body": "You modify the variable <code>$function</code> from a name to a subroutine reference, and then pass the reference to the iterate method.   You probably want to pass the name again."}, {"owner": {"reputation": 75, "user_id": 4893212, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61e7b9c72beca0dc44da26057f485abc?s=128&d=identicon&r=PG&f=1", "display_name": "JQKP", "link": "https://stackoverflow.com/users/4893212/jqkp"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1439840222, "post_id": 32058087, "comment_id": 52015487, "body": "@Miller, many thanks."}, {"owner": {"reputation": 75, "user_id": 4893212, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61e7b9c72beca0dc44da26057f485abc?s=128&d=identicon&r=PG&f=1", "display_name": "JQKP", "link": "https://stackoverflow.com/users/4893212/jqkp"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 1, "creation_date": 1439841627, "post_id": 32058087, "comment_id": 52016218, "body": "There are three answers, each of which is correct AFAICT and each of which touches more strongly on a point that the others gloss over (<a href=\"/a/32058259\">Hunter McMillen&#39;s</a> on using the ref as an argument directly, <a href=\"/a/32058320\">Borodin&#39;s</a> on what exactly caused my version to fail, and <a href=\"/a/32058474\">Schwern&#39;s</a> on smart variable usage). I don&#39;t know which to accept: all were very helpful."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1439847105, "post_id": 32058087, "comment_id": 52018920, "body": "@JQKP <code>perl -wle &#39;@choices = qw(Schwern Borodin Hunter); print $choices[rand @choices]&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4893212, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61e7b9c72beca0dc44da26057f485abc?s=128&d=identicon&r=PG&f=1", "display_name": "JQKP", "link": "https://stackoverflow.com/users/4893212/jqkp"}, "edited": false, "score": 0, "creation_date": 1439840154, "post_id": 32058259, "comment_id": 52015442, "body": "Note <code>=</code> not <code>==</code>. I was assigning not comparing. But many thanks for the (rest of the) answer."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 75, "user_id": 4893212, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61e7b9c72beca0dc44da26057f485abc?s=128&d=identicon&r=PG&f=1", "display_name": "JQKP", "link": "https://stackoverflow.com/users/4893212/jqkp"}, "edited": false, "score": 0, "creation_date": 1439840298, "post_id": 32058259, "comment_id": 52015531, "body": "@JQKP ah my mistake, thought it was a typo."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1439839936, "creation_date": 1439839936, "answer_id": 32058259, "question_id": 32058087, "link": "https://stackoverflow.com/questions/32058087/reason-my-subroutine-wont-recurse/32058259#32058259", "title": "Reason my subroutine won&#39;t recurse", "body": "<p>This line:</p>\n\n<pre><code>return $argument unless $function = $functiontable{$function};\n</code></pre>\n\n<p>doesn't make sense. In your subroutine <code>iterate</code>, <code>$function</code> is a string and <code>$functiontable{$function}</code> is a reference to a subroutine. I am not sure what the purpose of this is: is it to compare against the stored function? is it to use the function referenced by the name <code>$function</code>? </p>\n\n<p>Assuming the latter it would make more sense to simply pass in a reference to a function when you call iterate:</p>\n\n<pre><code>sub iterate {\n  my ($function, $iterations, $argument) = @_;\n  return $argument unless 0 &lt; $iterations;\n\n  my @functioned = $function-&gt;($argument);\n  my @refunctioned = ();\n  for my $i (0 .. @functioned - 1) {\n    push @refunctioned, iterate ($function, ($iterations - 1), $functioned[$i]);\n  }\n  return uniq @refunctioned;\n}\n\nmy @results = iterate($functiontable{foo}, 2, 'the');\nprint \"@results\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>the the. the, the.. the., the,. the,,\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 4893212, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61e7b9c72beca0dc44da26057f485abc?s=128&d=identicon&r=PG&f=1", "display_name": "JQKP", "link": "https://stackoverflow.com/users/4893212/jqkp"}, "edited": false, "score": 0, "creation_date": 1439840292, "post_id": 32058320, "comment_id": 52015522, "body": "Many thanks. (Note incidentally that this matches <a href=\"http://stackoverflow.com/users/1733163/miller\">Miller</a>&#39;s earlier comment on the question.)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1439840684, "last_edit_date": 1439840684, "creation_date": 1439840154, "answer_id": 32058320, "question_id": 32058087, "link": "https://stackoverflow.com/questions/32058087/reason-my-subroutine-wont-recurse/32058320#32058320", "title": "Reason my subroutine won&#39;t recurse", "body": "<p>The first time your subroutine <code>iterate</code> is called it translates the subroutine name in <code>$function</code> from a name to a subroutine reference</p>\n\n<p>So the first time <code>iterate</code> calls itself it is passing the subroutine reference, and the line</p>\n\n<pre><code>return $argument unless $function = $functiontable{$function};\n</code></pre>\n\n<p>will stringify the reference and attempt to find an element of the hash using a key something like <code>CODE(0x23e0838)</code></p>\n\n<p>Clearly that element doesn't exist, so your <code>unless</code> fails and <code>$argument</code> is returned immediately without continuing the recursion</p>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>I would write something like this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.10.0;\n\nmy %functions = ( foo =&gt; \\&amp;foo );\n\nsub iterate {\n    my ($func, $arg, $depth) = @_;\n    return $arg unless $depth;\n    map {iterate($func, $_, $depth - 1); } $functions{$func}-&gt;($arg);\n}\n\nsub foo {\n    my ($arg) = @_;\n    map \"$arg$_\", '', '.', ',';\n}\n\nmy @results = iterate('foo', 'the', 2);\nsay \"@results\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>the the. the, the. the.. the., the, the,. the,,\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1439840767, "creation_date": 1439840767, "answer_id": 32058474, "question_id": 32058087, "link": "https://stackoverflow.com/questions/32058087/reason-my-subroutine-wont-recurse/32058474#32058474", "title": "Reason my subroutine won&#39;t recurse", "body": "<p>The problem is this line.</p>\n\n<pre><code>return $argument unless $function = $functiontable{$function};\n</code></pre>\n\n<p>The variable <code>$function</code> is being repurposed and overwritten from a string (the function name) to a code reference (the function to be executed).  Later, it's passed into <code>iterate</code> which faithfully ignores it.</p>\n\n<p>Two things would improve this code and avoid that sort of problem.  First is to not repurpose variables, use two variables.</p>\n\n<pre><code>return $argument unless $function_ref = $functiontable{$function_name};\n</code></pre>\n\n<p>Now the mistake cannot happen.  One strong indicator that you're repurposing a variable is that it changes type, like from a string to a code reference.</p>\n\n<p>Note that I threw out <code>$function</code> entirely because it's too generic in this context.  Is that the function's name or the function's reference?  Neither one is obvious, so make it obvious.</p>\n\n<p>Finally, <code>iterate</code> can be made more flexible by eliminating the function table entirely.  Pass in the code reference directly.  If you want a function table, write a wrapper.</p>\n\n<pre><code>sub select_iteration {\n    my($iteration_type, $iterations, $argument) = @_;\n\n    my $iteration_code = $iteration_types{$iteration_type};\n    return iterate($iteration_code, $iterations, $argument);\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4893212, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61e7b9c72beca0dc44da26057f485abc?s=128&d=identicon&r=PG&f=1", "display_name": "JQKP", "link": "https://stackoverflow.com/users/4893212/jqkp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 32058320, "answer_count": 3, "score": 1, "last_activity_date": 1439840767, "creation_date": 1439839241, "question_id": 32058087, "link": "https://stackoverflow.com/questions/32058087/reason-my-subroutine-wont-recurse", "title": "Reason my subroutine won&#39;t recurse", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::MoreUtils 'uniq';\n\nmy %functiontable =();\n$functiontable{foo} = \\&amp;foo;\n\nsub iterate {\n  my ($function, $iterations, $argument) = @_;\n  return $argument unless 0 &lt; $iterations;\n  return $argument unless $function = $functiontable{$function};\n  my @functioned = $function-&gt;($argument);\n  my @refunctioned = ();\n  for my $i (0 .. @functioned - 1) {\n    push @refunctioned, iterate ($function, ($iterations - 1), $functioned[$i]);\n  }\n  return uniq @refunctioned;\n}\n\nsub foo {\n  my ($argument) = @_;\n  my @list = ($argument, $argument.'.', $argument.',');\n  return @list;\n}\n\nmy @results = iterate 'foo', 2, 'the';\nprint \"@results\";\n</code></pre>\n\n<p>This prints <code>the the. the,</code>, i.e. it doesn't iterate (recurse). I would expect it to print <code>the the. the, the.. the., the,. the,,</code>.</p>\n\n<p>(I used Smart::Comments to check whether it enters <code>iterate</code> a second time, and it does, but it doesn't seem to do everything in the function.)</p>\n\n<p>I can't figure out why. Can someone please help me figure out why, or propose a fix?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 13, "last_activity_date": 1439840888, "last_edit_date": 1439840888, "creation_date": 1439836764, "answer_id": 32057424, "question_id": 32056872, "link": "https://stackoverflow.com/questions/32056872/warn-if-declaring-a-variable-in-a-statement-modifier/32057424#32057424", "title": "Warn if declaring a variable in a statement modifier", "body": "<p>The <a href=\"https://metacpan.org/pod/Perl::Critic::Policy::Variables::ProhibitConditionalDeclarations\"><code>Perl::Critic::Policy::Variables::ProhibitConditionalDeclarations</code></a> policy in <code>perlcritic</code> warns about these constructions.</p>\n"}], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 1, "accepted_answer_id": 32057424, "answer_count": 1, "score": 11, "last_activity_date": 1439840888, "creation_date": 1439834612, "last_edit_date": 1495542175, "question_id": 32056872, "link": "https://stackoverflow.com/questions/32056872/warn-if-declaring-a-variable-in-a-statement-modifier", "title": "Warn if declaring a variable in a statement modifier", "body": "<p>I just came by the following line of code:</p>\n\n<pre><code>my $foo = $bar if $cond;\n</code></pre>\n\n<p>I'm going to fix this since it will of course lead to <a href=\"https://stackoverflow.com/a/5915308/1733163\">subtle bugs</a>.</p>\n\n<p>Is there a version of Perl, a module, or pragma that would warn if this type of statement was reached?</p>\n\n<p>For now I'm just going to use a combination of grep and PPI to scan the codebase to fix all of these issues.  Have found a total of 102 of them thus far.  However, a way of automatically warning other programmers if they add a new invalid line would be helpful.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1439832408, "post_id": 32055326, "comment_id": 52011414, "body": "Try adding the word: regex to your question title. You will see a popup with  information about how you can learn more about regular expressions, and also about tools like <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a> that can help you interactively develop the expression(s) you need. That way you won&#39;t have to ask three questions about the same basic problem: <a href=\"http://stackoverflow.com/questions/32055326/how-to-capture-text-within-a-negate-class-character-using-perl\" title=\"how to capture text within a negate class character using perl\">stackoverflow.com/questions/32055326/&hellip;</a> <a href=\"http://stackoverflow.com/questions/31949142/whats-the-regular-expression-to-find-two-sets-of-parenthesis-in-a-row-using-per\" title=\"whats the regular expression to find two sets of parenthesis in a row using per\">stackoverflow.com/questions/31949142/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439841891, "post_id": 32055326, "comment_id": 52016344, "body": "My answer to <a href=\"http://stackoverflow.com/questions/32053450/missing-last-character-in-perl-regex\">your previous question</a> answered exactly this"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "edited": false, "score": 0, "creation_date": 1439829642, "post_id": 32055451, "comment_id": 52009932, "body": "Just tested it and your solution works. I have to wait two minutes to accept your answer."}, {"owner": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "edited": false, "score": 0, "creation_date": 1439829872, "post_id": 32055451, "comment_id": 52010051, "body": "I like your short version solution because I can also use it in notepad++, which allow you to see the solution in real time faster."}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "reply_to_user": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "edited": false, "score": 0, "creation_date": 1439832606, "post_id": 32055451, "comment_id": 52011538, "body": "@BruceWalker There&#39;s better tools than Notepad++ available on Windows to try out a real time solution: <a href=\"http://www.hongkiat.com/blog/regular-expression-tools-resources/\" rel=\"nofollow noreferrer\">hongkiat.com/blog/regular-expression-tools-resources</a>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1439829289, "creation_date": 1439829289, "answer_id": 32055451, "question_id": 32055326, "link": "https://stackoverflow.com/questions/32055326/how-to-capture-text-within-a-negate-class-character-using-perl/32055451#32055451", "title": "How to capture text within a negate class character using perl", "body": "<p>You can tell Perl that the text after \"log\" doesn't contain <code>(</code>:</p>\n\n<pre><code>/^\\(log ([^(]*)\\)\\s*\\(log ([^(]*)\\)$/\n</code></pre>\n\n<p>Or, if <code>(</code> is possible and you only want to exclude <code>(log</code>, check that in two steps:</p>\n\n<pre><code>for my $s ('(log this) (log matches)',\n           '(log these) (log do) (log not)'\n          ) {\n    my @matches = $s =~ /^\\(log (.*)\\)\\s*\\(log (.*)\\)$/;\n    next if $matches[0] =~ /\\(log /; # More than 2 logs, skip.\n\n    say \"($_)\" for @matches;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1439829899, "post_id": 32055524, "comment_id": 52010074, "body": "Unfortunately, this is exactly the case where non-greedy search doesn&#39;t help."}, {"owner": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "edited": false, "score": 0, "creation_date": 1439830140, "post_id": 32055524, "comment_id": 52010204, "body": "I originally tried this solution and it does not work for me.."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1439830236, "post_id": 32055524, "comment_id": 52010258, "body": "The initial solution had a <code>$</code> at the end of the regex, which would prevent it from working. But this solution has been edited and works (for me, anyway) now."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1439830097, "last_edit_date": 1439830097, "creation_date": 1439829548, "answer_id": 32055524, "question_id": 32055326, "link": "https://stackoverflow.com/questions/32055326/how-to-capture-text-within-a-negate-class-character-using-perl/32055524#32055524", "title": "How to capture text within a negate class character using perl", "body": "<p>You can use a non-greedy search</p>\n\n<pre><code>/^\\(log (.*?)\\) \\(log (.*?)\\)/\n</code></pre>\n\n<p>Saying <code>.*?</code> instead of <code>.*</code> makes the regex engine try to match the pattern with the minimum number of characters necessary.</p>\n"}], "owner": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "closed_date": 1439841811, "accepted_answer_id": 32055451, "answer_count": 2, "score": -1, "last_activity_date": 1439830097, "creation_date": 1439828877, "question_id": 32055326, "link": "https://stackoverflow.com/questions/32055326/how-to-capture-text-within-a-negate-class-character-using-perl", "closed_reason": "Duplicate", "title": "How to capture text within a negate class character using perl", "body": "<p>My first problem is, I need to search for two consecutive sets of parenthesis, for example, \n         (log dkdkdkd) (log edksks)</p>\n\n<p>This code below solves this first problem:</p>\n\n<pre><code>      ^\\([^)]*\\) \\([^)]*\\)$\n</code></pre>\n\n<p>Second problem, in addition to using the solution above, I need to capture the text after the log something like this:</p>\n\n<pre><code>       ^\\(log (.*)\\) \\(log (.*)\\)$\n</code></pre>\n\n<p>But this above solution does not work because it find more than two sets of parenthesis, for example:</p>\n\n<pre><code>           (log dkdkdkd) (log edksks) (log riwqoq)\n</code></pre>\n\n<p>What I really need is to find two sets of consecutive parenthesis while capturing the text after the log text?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1439832178, "post_id": 32053450, "comment_id": 52011300, "body": "Iterative coding assistance? <a href=\"http://stackoverflow.com/questions/32055326/how-to-capture-text-within-a-negate-class-character-using-perl\" title=\"how to capture text within a negate class character using perl\">stackoverflow.com/questions/32055326/&hellip;</a> <a href=\"http://stackoverflow.com/questions/31949142/whats-the-regular-expression-to-find-two-sets-of-parenthesis-in-a-row-using-per\" title=\"whats the regular expression to find two sets of parenthesis in a row using per\">stackoverflow.com/questions/31949142/&hellip;</a> May I direct you to <a href=\"http://stackoverflow.com/q/22937618\">stackoverflow.com/q/22937618</a> to learn more about regex?"}], "answers": [{"tags": [], "owner": {"reputation": 5423, "user_id": 937922, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VsV8g.png?s=128&g=1", "display_name": "Takkun", "link": "https://stackoverflow.com/users/937922/takkun"}, "is_accepted": false, "score": 0, "last_activity_date": 1439823349, "creation_date": 1439823349, "answer_id": 32053596, "question_id": 32053450, "link": "https://stackoverflow.com/questions/32053450/missing-last-character-in-perl-regex/32053596#32053596", "title": "missing last character in perl regex", "body": "<pre><code>^\\(log (.*)\\)\\s*\\(log (.*)\\)$\n</code></pre>\n\n<p>You don't need to negate the <code>)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "edited": false, "score": 0, "creation_date": 1439823554, "post_id": 32053607, "comment_id": 52006164, "body": "I need the [^)] to make sure it search for two consecutive sets of parenthesis and not three or four or .etc."}, {"owner": {"reputation": 5423, "user_id": 937922, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VsV8g.png?s=128&g=1", "display_name": "Takkun", "link": "https://stackoverflow.com/users/937922/takkun"}, "edited": false, "score": 0, "creation_date": 1439824435, "post_id": 32053607, "comment_id": 52006734, "body": "Do you need to use (.*)? If you&#39;re only concerned about alphanumeric characters you can use (\\w*)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "edited": false, "score": 0, "creation_date": 1439824604, "post_id": 32053607, "comment_id": 52006850, "body": "@BruceWalker: Then please show the input that shows why you need it."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1439823373, "creation_date": 1439823373, "answer_id": 32053607, "question_id": 32053450, "link": "https://stackoverflow.com/questions/32053450/missing-last-character-in-perl-regex/32053607#32053607", "title": "missing last character in perl regex", "body": "<p>The <code>[^)]</code> eats your <code>s</code>-es. Why do you need it?</p>\n\n<pre><code>my $s = '(log doggies) (log needs)';\nsay for $s =~ /^\\(log (.*)\\)\\s*\\(log (.*)\\)$/;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>doggies\nneeds\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1439832932, "creation_date": 1439832932, "answer_id": 32056449, "question_id": 32053450, "link": "https://stackoverflow.com/questions/32053450/missing-last-character-in-perl-regex/32056449#32056449", "title": "missing last character in perl regex", "body": "<p>It looks like your <code>.*</code> should be <code>[^)]*</code>, i.e. *any number of characters that are not closing parentheses. Giving</p>\n\n<pre><code>^\\(log ([^)]*)\\)\\s*\\(log ([^)]*)\\)$\n</code></pre>\n\n<p>Or you could fetch all instances of <code>(log xxx)</code> with</p>\n\n<pre><code>while ( $s =~ /\\(log ([^)]*)\\)/g ) {\n    print $1, \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4175743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0eb14a2b0ab668f3492c2da318b7369e?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Walker", "link": "https://stackoverflow.com/users/4175743/bruce-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1439832932, "creation_date": 1439822999, "last_edit_date": 1439823185, "question_id": 32053450, "link": "https://stackoverflow.com/questions/32053450/missing-last-character-in-perl-regex", "title": "missing last character in perl regex", "body": "<p>(log doggies) (log needs)</p>\n\n<pre><code>^\\(log (.*)[^)]\\)\\s*\\(log (.*)[^)]\\)$\n</code></pre>\n\n<p>It works with the exception of missing character at the end \"s\" as:</p>\n\n<p>doggie\nneed</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 3, "creation_date": 1439822439, "post_id": 32053178, "comment_id": 52005405, "body": "You initialize <code>@F = ();</code>, then never assign/push anything else to the array. What value did you expect to find in <code>$F[1]</code>, and how did you expect it to get there?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439822587, "post_id": 32053178, "comment_id": 52005495, "body": "You have clearly used a bunch of different sources to come up with this code. There are a few issues here. What is <code>$k</code> supposed to do?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439822609, "post_id": 32053178, "comment_id": 52005509, "body": "Is the table-like file tab-delimited?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439833334, "post_id": 32053178, "comment_id": 52011891, "body": "You should choose between bareword file handles like <code>VAL</code> and lexical ones like <code>$info</code> and stick to it. Don&#39;t mix them up. (And your choice should be lexical handles.)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439833534, "post_id": 32053950, "comment_id": 52011991, "body": "<i>\u201cthe construct you are using to read from VAL is nice\u201d</i> I wouldn&#39;t go as far as <i>nice</i>. It&#39;s hideously inefficient"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439844991, "post_id": 32053950, "comment_id": 52017899, "body": "Can I offer <code>split &#47;\\s+&#47; ; shift if...</code> can be replaced with <code>split;</code> - it defaults to <code>&#39; &#39;</code> as the delimiter which skips leading whitespace."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439845354, "post_id": 32053950, "comment_id": 52018073, "body": "@sob go ahead. I&#39;m on my phone. Change it :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439883247, "post_id": 32053950, "comment_id": 52029880, "body": "@Borodin I changed that phrase. You&#39;re right that I was not clear on that. Thank you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439883276, "post_id": 32053950, "comment_id": 52029899, "body": "@Sobrique thanks for changing it. Next time update the comment as well, it didn&#39;t fit with your edit  ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439883494, "post_id": 32053950, "comment_id": 52030035, "body": "Just read about the <code>split &#39; &#39;</code>. It says from 5.18 it works with any expression that evaluates to <code>&quot; &quot;</code>, but before it had to be <code>&quot; &quot;</code>, so it&#39;s safer to use the double quotes instead of <code>&#39; &#39;</code> because we don&#39;t know which version of Perl OP has. Not sure though if the doc means that <code>q{ }</code> will not work in older Perls, or that even <code>&#39; &#39;</code> will not work. Can&#39;t test right now either."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1439883204, "last_edit_date": 1439883204, "creation_date": 1439824567, "answer_id": 32053950, "question_id": 32053178, "link": "https://stackoverflow.com/questions/32053178/perl-replacing-field-values-with-hash/32053950#32053950", "title": "perl - Replacing field values with hash", "body": "<p>It looks like this is homework. I'm going to provide a working solution and explanation, but I hope I don't have to remind you that you should try to solve this yourself rather than having someone else do it for you.</p>\n\n<ul>\n<li>it's good that you have <code>use strict</code> and <code>use warnings</code> :)</li>\n<li>you are mixing lexical filehandles (<code>$fh</code>) and old-fashioned GLOB ones (<code>OUT</code>). Just use the lexical ones, and <a href=\"http://modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html\" rel=\"nofollow\">always use three-argument open</a> like <code>open my $fh, '&lt;', 'in.csv';</code></li>\n<li>the construct you are using to read from <code>VAL</code> is very <em>Perlish</em>, but as Borodin points out it is extremely inefficient, because it merges and constructs a fresh hash with every iteration. I am also not sure if you can explain it. If you want to go for fancy Perl stuff, use <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\"><code>map</code></a> instead. It's easier to explain what that does. ;)</li>\n<li><code>close ... || die</code> might work, but you should rather use <code>or</code>. There is a difference. <code>and</code> and <code>or</code> are less <em>sticky</em>. That is called <em>precedence</em>. See in perlop <a href=\"http://perldoc.perl.org/perlop.html#C-style-Logical-And\" rel=\"nofollow\">here</a> and <a href=\"http://perldoc.perl.org/perlop.html#Logical-And\" rel=\"nofollow\">here</a>.</li>\n<li>you are declaring variables outside of the loop that you never use\n\n<ul>\n<li>always declare variables in the smallest lexical scope</li>\n<li>use meaningful variable names. <code>$k</code> is or <code>@F</code> are not</li>\n<li>do not create two variables with the same name. It's ok to have <code>%F</code> and <code>@F</code> for Perl, but you will most certainly mix it up.</li>\n</ul></li>\n<li>in your <code>while</code> loop you are <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code>ting</a> into a different variable, and you are using <code>$_</code> as the input of <code>split</code>. But because you are assigning <code>$line</code> in the head of the loop, that is <code>undef</code>.</li>\n<li>because you are splitting on a single space, you will end up with a lot of <code>undef</code> fields. Try to use <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow\">Data::Dumper</a> or better <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow\">Data::Printer</a> to output what is in <code>@fields</code></li>\n<li>you are trying to replace stuff that with variables that are never filled</li>\n<li>the substitution part of the <code>s///</code> has invalid syntax. It will try to replace with the literal <code>'%hash(){}'</code> where there is an <code>undef</code> warning in the parenthesis because <code>$k</code> is empty, and another <code>undef</code> warning because of <code>$F[0]</code>.</li>\n<li>that substitution is also trying to work on <code>$_</code></li>\n<li>since you are aiming on replacing on <code>$line</code> you can skip the <code>else</code> and just print <code>$line</code> after the loop, regardless of it has been substituted or not</li>\n<li>it's nice to <code>close</code> your filehandles, but be consistent and close all of them</li>\n</ul>\n\n<hr>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;    # always die when open fails\n\n# Slurp the mapping. This works on $_ and returns a list\n# that ends up in the hash.\nopen my $fh_values, \"&lt;\", \"scratch/example_values.txt\";\nmy %group_value_map = map { chomp; split /,/; } (&lt;$fh_values&gt;);\nclose $fh_values;\n\nopen my $fh_out, '&gt;', '...';\n\nmy $file = 'scratch/example_data.txt';\nopen my $fh_in, '&lt;', $file;\n\nwhile ( my $line = &lt;$fh_in&gt; ) {\n    if ( $line =~ /ID/ ) {\n        # split in \" \" discards preceeding whitespace and splits\n        # on arbitrary long whitespace sequences (but only if you\n        # use it on the right variable)\n        my @fields = split \" \", $line;\n\n        # This replacement works nicely now, but will break horribly\n        # in case an additional column is added :)\n        $line =~ s/$fields[2]/$group_value_map{$fields[1]}/;\n    }\n\n    # since we modified $line we don't need an else block that prints the\n    # same value as the last line of the then block\n    print $line;\n}\n\nclose $fh_in;\nclose $fh_out;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Name   Group Value\n ID1    1      6.00\n ID2    1      6.00\n ID3    1      6.00\n ID4    1      6.00\n ID5    2      7.00\n ID6    2      7.00\nID10   10      15.00\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5235438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f7ba63921c0b3c347af2a0e2a2e626?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/5235438/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439883204, "creation_date": 1439822290, "question_id": 32053178, "link": "https://stackoverflow.com/questions/32053178/perl-replacing-field-values-with-hash", "title": "perl - Replacing field values with hash", "body": "<p>I need to replace values in txt file's column based on the value of column 2.</p>\n\n<p>I have example_data.txt file:</p>\n\n<pre><code>Name   Group Value\n ID1    1      1.00\n ID2    1      2.00\n ID3    1      3.00\n ID4    1      4.00\n ID5    2      5.00\n ID6    2      6.00\n......................\nID10   10      7.00\n</code></pre>\n\n<p>And example_values.csv file, which is comma-separated:</p>\n\n<pre><code>1,6.00\n2,7.00\n......\n10,15.00\n</code></pre>\n\n<p>Replaced file should look like this:</p>\n\n<pre><code>Name   Group Value\n ID1    1      6.00\n ID2    1      6.00\n ID3    1      6.00\n ID4    1      6.00\n ID5    2      7.00\n ID6    2      7.00\n......................\nID10   10     15.00\n</code></pre>\n\n<p>Keeping format and number of spaces between fields is important.</p>\n\n<p>So far I have come up with this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n\nopen(VAL, \"&lt;\", \"example_values.csv\") or die $!;\nmy %hash;\n%hash = ( %hash, (split(/,/, $_))) while ( &lt;VAL&gt; );\n\n\nmy $file = '&lt;example_data.txt';\nopen my $info, $file or die \"Could not open $file: $!\";\nopen OUT, \"&gt;values_replaced.txt\";\nmy @F = ();\nmy $k = ();\nmy %F = ();\n\nwhile( my $line = &lt;$info&gt;)  {\n    if ($line =~ /ID/) {   \n        my @fields = split \" \";\n        s/$F[1]/%hash($k){$F[0]}/; \n        print OUT $line; \n    } else {\n        print OUT $line;\n    }\n}\n\nclose(OUT) || die \"Couldn't close OUT properly\";\n</code></pre>\n\n<p>Error message I get is:</p>\n\n<pre><code>Use of uninitialized value $F[1] in regexp compilation at perl.pl line 22, &lt;$info&gt; line 18.\nUse of uninitialized value $_ in substitution (s///) at perl.pl line 22, &lt;$info&gt; line 18.\n</code></pre>\n\n<p>But OUT file is written and it's simply copy of input file. </p>\n\n<p>I appreciate any help, I am new to perl and really stuck now.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "edited": false, "score": 1, "creation_date": 1439818301, "post_id": 32051534, "comment_id": 52002649, "body": "In the two middle cases, you are returning an <i>array</i>. Standard behavior for an array in a scalar context is to return the number of elements. <code>&quot;Hi&quot;</code> is a scalar, and so is <code>pop</code>."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439819801, "post_id": 32051748, "comment_id": 52003647, "body": "Thanks, maybe I understand it better now.. You do not create a list until a comma is given. So <code>(&quot;Hi&quot;)</code> is not a list, but <code>(&quot;Hi&quot;, &quot;I&quot;)</code> is a list?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1439820207, "post_id": 32051748, "comment_id": 52003929, "body": "@H&#229;kon H&#230;gland, &quot;List&quot; is a pretty generic word. In the pilcrow&#39;s quote, &quot;list&quot; refers to the list operator, also known as the comma operator. So <code>&quot;Hi&quot;</code> isn&#39;t a list, but <code>&quot;Hi&quot;, &quot;I&quot;</code> is. (Parens just change precedence.)  // List also commonly refers to what a sub or function returns. It simply means &quot;some number of scalars&quot;. // In list context, the list/comma operator <code>&quot;Hi&quot;, &quot;I&quot;</code> returns a list consisting of two scalars. Like all other operators, the list/comma operator <code>&quot;Hi&quot;, &quot;I&quot;</code> returns a single scalar in scalar context."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439821182, "post_id": 32051748, "comment_id": 52004532, "body": "s/returns a list consisting of two scalars\\K/ (which is a fancy way of saying it returns two scalars)/"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1555216839, "last_edit_date": 1555216839, "creation_date": 1439818265, "answer_id": 32051748, "question_id": 32051534, "link": "https://stackoverflow.com/questions/32051534/list-or-scalar-context-when-returning-an-array-or-list-with-a-single-element/32051748#32051748", "title": "List or scalar context when returning an array or list with a single element", "body": "<p>The return expression is evaluated in the same context as the function itself. <a href=\"http://www.perlmonks.org/?node_id=347416\" rel=\"nofollow noreferrer\">Here</a>'s a pretty comprehensive list of what returns what in scalar context.</p>\n\n<p>As it applies here:</p>\n\n<ul>\n<li><p><code>func1</code>: String literals don't care about context. <code>\"Hi\"</code> evaluates to the string <code>Hi</code>, so <code>func1</code> returns <code>Hi</code>.</p></li>\n<li><p><code>func2</code>: In scalar context, <code>@a</code> evaluates to the number of elements in <code>@a</code>, so <code>func2</code> returns <code>1</code>.</p></li>\n<li><p><code>func3</code>: In scalar context, <code>@a</code> evaluates to the number of elements in <code>@a</code>, so <code>func3</code> returns <code>1</code>.</p></li>\n<li><p><code>func4</code>: <code>pop</code> doesn't care about context. <code>pop(@a)</code> evaluates to the removed element (or undef if <code>@a</code> was empty), so <code>func4</code> returns <code>Hi</code>.</p></li>\n</ul>\n\n<p>Note that parentheses just override precedence, which has no effect in any of your examples.</p>\n\n<p>You want</p>\n\n<pre><code>sub func {\n   my @a = ...;\n   return wantarray ? @a : $a[-1];\n}\n</code></pre>\n\n<p>If you want to be clever, you could also use the following, since a slice in scalar context returns the last element if would have returned in list context:</p>\n\n<pre><code>sub func {\n   my @a = ...;\n   return @a[0..$#a];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439818771, "post_id": 32051794, "comment_id": 52002957, "body": "Thanks, this was probably the point I missed, that is: lists return the last value (a scalar) and therefore behaves differently than arrays."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439819095, "post_id": 32051794, "comment_id": 52003159, "body": "@H&#229;kon H&#230;gland, But you didn&#39;t use any lists in your question? Anyway, what you want is <a href=\"http://www.perlmonks.org/?node_id=347416\" rel=\"nofollow noreferrer\">this</a>. Added to me answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1439819247, "post_id": 32051794, "comment_id": 52003281, "body": "Also note that the quote is a little inaccurate. Lists in scalar context don&#39;t evaluate return the last value (it would have returned in list context); lists in scalar context return the last item of the list evaluated in scalar context. <code>perl -E&#39;@a=qw(x y); say @a,@a; say scalar(@a,@a)&#39;</code>."}], "tags": [], "owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "is_accepted": false, "score": 2, "last_activity_date": 1439819736, "last_edit_date": 1439819736, "creation_date": 1439818386, "answer_id": 32051794, "question_id": 32051534, "link": "https://stackoverflow.com/questions/32051534/list-or-scalar-context-when-returning-an-array-or-list-with-a-single-element/32051794#32051794", "title": "List or scalar context when returning an array or list with a single element", "body": "<p>From <a href=\"http://perldoc.perl.org/perldata.html#Scalar-values\" rel=\"nofollow\"><code>perldata</code></a>:</p>\n\n<blockquote>\n  <p>If you evaluate an array in scalar context, it returns the length of the array. (Note that this is not true of lists, which return the last value, like the C comma operator, nor of built-in functions, which return whatever they feel like returning.)</p>\n</blockquote>\n\n<p>Sometimes you return the result of an array in scalar context (<code>func2</code>, <code>func3</code>), sometimes the result of a string literal in scalar context (<code>func1</code>) and sometimes the result of <code>pop</code> in scalar context (<code>func4</code>).  Hence the difference.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 32051748, "answer_count": 2, "score": 3, "last_activity_date": 1555216839, "creation_date": 1439817656, "question_id": 32051534, "link": "https://stackoverflow.com/questions/32051534/list-or-scalar-context-when-returning-an-array-or-list-with-a-single-element", "title": "List or scalar context when returning an array or list with a single element", "body": "<p>I have a function <code>func</code> that can return a single value or a list of values, depending on how the function is called. So for this particular function,  the caller would know when to expect only a single return value, and therefore would like to use the simpler syntax <code>my $var = func( ... )</code> instead of <code>my ($var) = func( ... )</code>. The problem is that in some cases the single value is converted into the size of a list/array with one element, and in some cases not. For example:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nfor (1..4) {\n    no strict 'refs';\n    my $a = &amp;{\"func\".$_}();\n    say $a;\n}\n\nsub func1 {\n    return (\"Hi\");\n}\n\nsub func2 {\n    my @a = (\"Hi\");\n    return @a;\n}\n\nsub func3 {\n    my @a = (\"Hi\");\n    return (@a);\n}\n\nsub func4 {\n    my @a = (\"Hi\");\n    return (pop @a);\n}\n</code></pre>\n\n<p>Gives output:</p>\n\n<pre><code>Hi\n1\n1\nHi\n</code></pre>\n\n<p>Why do I get a 1 in some cases and <code>\"Hi\"</code> in other cases?</p>\n"}, {"tags": ["perl", "sockets", "ipv6"], "comments": [{"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "edited": false, "score": 0, "creation_date": 1439831849, "post_id": 32051123, "comment_id": 52011102, "body": "are you running this as <code>root</code>?  otherwise you should pick a <a href=\"http://stackoverflow.com/questions/10182798/why-are-ports-below-1024-privileged\">non-privileged port</a> above 1024."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1439821243, "post_id": 32052757, "comment_id": 52004570, "body": "I don&#39;t see anything in the docs about this, but if others can confirm this behaviour, I&#39;ll be glad to write a patch for the docs."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1439833482, "post_id": 32052757, "comment_id": 52011963, "body": "Because the same network (fe80::/10) is used for the link-local network on all interfaces, you must specify the zone (interface) when using link-local addresses. If you had more than one interface, each would use the link-local network, so the only way the OS has to determine which interface to use is with the zone designation on the end of the address. Different OSes have different zone identifiers (%eth0, %2, etc.)."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 0, "last_activity_date": 1439821055, "creation_date": 1439821055, "answer_id": 32052757, "question_id": 32051123, "link": "https://stackoverflow.com/questions/32051123/want-to-send-udp-packet-over-ipv6-link-local-ip-in-perl/32052757#32052757", "title": "Want to send UDP packet over IPv6 link local IP in Perl", "body": "<p>I have a feeling this is failing because you're using link-local, but don't specify the interface in your <code>LocalAddr</code> string. The following seems to work for me:</p>\n\n<pre><code>LocalAddr  =&gt; \"fe80::a00:27ff:fe49:51ce%eth0\",\nPeerAddr   =&gt; \"fe80::a00:27ff:fe49:51ce\",\nPeerPort   =&gt; 22,\nProto      =&gt; 'tcp',\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1439909653, "creation_date": 1439909653, "answer_id": 32075842, "question_id": 32051123, "link": "https://stackoverflow.com/questions/32051123/want-to-send-udp-packet-over-ipv6-link-local-ip-in-perl/32075842#32075842", "title": "Want to send UDP packet over IPv6 link local IP in Perl", "body": "<p>You also don't want to be using <code>Socket6</code> or <code>IO::Socket::INET6</code>, as both are very old \"transition\" things written very early on in IPv6, before core's <code>Socket</code> supported 'v6 natively. Now it does that fine, you should stick to regular <code>Socket</code> and <code>IO::Socket::IP</code>.</p>\n\n<p>(Via the disclaimer: I'm the maintainer of both)</p>\n"}], "owner": {"reputation": 23, "user_id": 5235320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204486134260164/picture?type=large", "display_name": "Prashanth Kumar", "link": "https://stackoverflow.com/users/5235320/prashanth-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 1, "accepted_answer_id": 32052757, "answer_count": 2, "score": 2, "last_activity_date": 1439909653, "creation_date": 1439816482, "last_edit_date": 1439832296, "question_id": 32051123, "link": "https://stackoverflow.com/questions/32051123/want-to-send-udp-packet-over-ipv6-link-local-ip-in-perl", "title": "Want to send UDP packet over IPv6 link local IP in Perl", "body": "<p>I have written a script to send a UDP packet over IPv6 link local IP.\nBoth source and destination are IPv6 link local IP.</p>\n\n<pre><code>#!/usr/bin/perl\nuse IO::Socket::INET6;\nuse Socket6;\n\nmy ($socket,$data);\n\n$socket = new IO::Socket::INET6(\n    LocalAddr   =&gt; 'fe80::21b:21ff:fe39:8cce',\n    LocalPort   =&gt; '547',\n    PeerAddr   =&gt; 'fe80::240:43ff:feb9:2f44',\n    PeerPort   =&gt; '546',\n    Proto        =&gt; 'udp',\n) or die \"ERROR in Socket Creation : $@\\n\";\n\nfor (my $i=1; $i &lt;= 1; $i++) {\n    $data =pack('H*',\"123455550\");\n\n    $socket-&gt;send($data);\n\n}\n\n$socket-&gt;close();\n</code></pre>\n\n<p>After executing this above script I am getting below error:</p>\n\n<pre><code>ERROR in Socket Creation : IO::Socket::INET6: bind: Invalid argument\n</code></pre>\n\n<p>Any one please help me on this .</p>\n"}, {"tags": ["arrays", "perl", "hash", "bioinformatics"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439817356, "post_id": 32050898, "comment_id": 52001998, "body": "How large are those files?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439817525, "post_id": 32050898, "comment_id": 52002102, "body": "The gap between the <code>names</code> and the <code>score.data</code> columns is a tab in File1 and a space in File2. Is that correct for the real data?"}, {"owner": {"reputation": 308, "user_id": 1468737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6ee9e506f5955cca5c7e221b2b45ef6?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1468737/neal"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439818591, "post_id": 32050898, "comment_id": 52002842, "body": "@simbabque File 1 is about 30,000 lines long and File 2 about 1000 line long"}, {"owner": {"reputation": 308, "user_id": 1468737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6ee9e506f5955cca5c7e221b2b45ef6?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1468737/neal"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439818673, "post_id": 32050898, "comment_id": 52002896, "body": "@Borodin Hei! The gap is a tab for both files...I guess it is not displaying here properly"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439821776, "post_id": 32050898, "comment_id": 52004941, "body": "@Neal: Okay you can change <code>split</code> to <code>split &#47;\\t&#47;</code> in my code if you wish, but you will also have to <code>chomp</code> each record and it makes a difference only if there may be spaces in the data fields themselves"}], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 1468737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6ee9e506f5955cca5c7e221b2b45ef6?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1468737/neal"}, "edited": false, "score": 0, "creation_date": 1439819390, "post_id": 32051701, "comment_id": 52003384, "body": "Wow! Elegant! I have a few quick questions so that I can better understand the code. <b>1</b> What does <code>delete $mapping{NA}</code> accomplish? <b>2</b> Could you please explain what kind of data structure is <code>@matching{@$_}</code>and <code>@mapping{@entries}</code>  <b>3</b> How <code>@matching{@$_} = () for grep defined, @mapping{@entries};</code> works ? This is a novel way to use grep for me."}, {"owner": {"reputation": 308, "user_id": 1468737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6ee9e506f5955cca5c7e221b2b45ef6?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1468737/neal"}, "edited": false, "score": 0, "creation_date": 1439819734, "post_id": 32051701, "comment_id": 52003609, "body": "And yes thank you for pointing outt hat <code>DMR7</code>should have <code>LOC100130417 </code>. My bad."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 308, "user_id": 1468737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6ee9e506f5955cca5c7e221b2b45ef6?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1468737/neal"}, "edited": false, "score": 1, "creation_date": 1439822262, "post_id": 32051701, "comment_id": 52005285, "body": "<b><i>1.</i></b> My code creates an entry for <code>NA</code> in <code>%mapping</code> because of the way it treats the <code>score.data</code> column. Rather than add code to avoid it I&#39;ve just let it happen and deleted it when the hash is complete. <b><i>2.</i></b> <code>@mapping{@entries}</code> is a <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\"><b><i>hash slice</i></b></a> -- essentially a way of accessing multiple hash elements in a single expression. <b><i>3.</i></b> In this case, <code>grep</code> is filtering out elements of <code>@entries</code> for which no element of <code>%mapping</code> exists. Accessing a non-existent hash element gives the value <code>undef</code> so <code>grep defined, ...</code> skips those"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1439818529, "last_edit_date": 1439818529, "creation_date": 1439818120, "answer_id": 32051701, "question_id": 32050898, "link": "https://stackoverflow.com/questions/32050898/perl-print-keys-from-2-hashes-if-array-of-values-intersect/32051701#32051701", "title": "Perl: Print keys from 2 hashes if array of values intersect", "body": "<p>This will do as you ask. It build a hash <code>%mapping</code> that relates each score entry to all the names that they correspond to in File1, and then interrogates that hash while reading through File2 to build a list of names joined by score entry</p>\n\n<p>The program expects the paths to the two input files as parameters on the comamnd line, like</p>\n\n<p>Note that I have just split each record on whitespace, as the separators in your example data aren't consistent</p>\n\n<p>The output for <code>DRM7</code> includes <code>LOC100130417</code> which is missing from your desired output. This is correct as <code>DRM7</code> from File2 has score entry <code>rs13</code> which also appears in the line for <code>LOC100130417</code> in File1</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl find_joined.pl path/to/file1 path/to/file2\n</code></pre>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse v5.10.1;\nuse autodie;\n\nmy %mapping;\n\n{\n    open my $fh, '&lt;', $ARGV[0];\n    &lt;$fh&gt;; # Drop the header line\n\n    while ( &lt;$fh&gt; ) {\n        my @fields = split;\n        my $name = $fields[-2];\n        my @entries = $fields[-1] =~ /[^\";]+/g;\n        push @{ $mapping{$_} }, $name for @entries;\n    }\n\n    delete $mapping{NA};\n}\n\nopen my $fh, '&lt;', $ARGV[1];\n&lt;$fh&gt;; # Drop the header line\n\nwhile ( &lt;$fh&gt; ) {\n    my @fields = split;\n    my $name = $fields[-2];\n    my @entries = $fields[-1] =~ /[^\";]+/g;\n\n    my %matching;\n    @matching{@$_} = () for grep defined, @mapping{@entries};\n\n    if ( keys %matching ) {\n        print join(' ', $name, sort keys %matching), \"\\n\"\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>DMR1 FAM87B LINC00115\nDMR2 LINC00115\nDMR3 FAM41C LINC01128\nDMR4 FAM41C LINC01128\nDMR5 FAM41C LOC100130417 SAMD11\nDMR7 LOC100130417 NOC2L SAMD11\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 1468737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6ee9e506f5955cca5c7e221b2b45ef6?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1468737/neal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 32051701, "answer_count": 1, "score": 2, "last_activity_date": 1439818529, "creation_date": 1439815857, "last_edit_date": 1495535200, "question_id": 32050898, "link": "https://stackoverflow.com/questions/32050898/perl-print-keys-from-2-hashes-if-array-of-values-intersect", "title": "Perl: Print keys from 2 hashes if array of values intersect", "body": "<p>I have 2 files which look like the following:  </p>\n\n<p><strong>File1</strong>: All columns except the last are tab delimited  </p>\n\n<pre><code>space   start   end width   names   score.data  \n1   1   1873    24409   22537   DDX11L1 NA\n2   1   4361    39370   35010   WASH7P  NA\n23  1   690244  724068  33825   LOC100288069    NA\n24  1   742750  765214  22465   FAM87B  \"rs1;rs2;rs3,\"\n25  1   751585  772902  21318   LINC00115   \"rs3;rs4\"\n26  1   752970  804826  51857   LINC01128   \"rs5;rs6;rs7;rs8;rs9\"\n27  1   793450  822182  28733   FAM41C  \"rs9;rs10;rs11\"\n28  1   842197  865072  22876   LOC100130417    \"rs12;rs13;rs14;rs15;rs16\"\n29  1   851120  889961  38842   SAMD11  \"rs14;rs15;rs16;rs17\"\n30  1   869582  904679  35098   NOC2L   \"rs13;rs17;rs20;rs25;rs27\"  \n31  1   885966  911099  25134   KLHL17  \"rs23;rs25;rs34;rs49\"\n78  1   1582938 1634243 51306   SLC35E2B    rs45\n</code></pre>\n\n<p><strong>File2</strong>: All columns except last are tab delimited  </p>\n\n<pre><code>space   start   end width   names   score.data  \n1   1   1096679 1097517 839     DMR1 rs2;rs3  \n2   1   1229025 1229590 566     DMR2 rs4  \n3   1   1267955 1269432 1478    DMR3 rs7;rs8;rs9  \n4   1   1279248 1279795 548     DMR4 rs9;rs10  \n5   1   1372628 1374653 2026    DMR5 rs11;rs12;rs14;rs18  \n6   1   1842116 1842456 341     DMR6 NA  \n7   1   1896556 1897211 656     DMR7 rs13;rs17;rs20  \n</code></pre>\n\n<p><strong>Desired Output</strong>: All columns tab delimited  </p>\n\n<pre><code>DMR1 FAM87B LINC00115   \nDMR2 LINC00115    \nDMR3 LINC01128 FAM41C    \nDMR4 LINC01128 FAM41C\nDMR5 FAM41C LOC100130417 SAMD11\nDMR7 SAMD11 NOC2L \n</code></pre>\n\n<p>So basically, I need to check if any <code>score.data</code>entries(rs2,rs3...) from <code>file2</code>are intersecting with <code>score.data</code>entries of <code>file1</code>. If they do, I should obtain the key(<code>names column</code>) from <code>file2</code> and the corresponding keys(<code>names column</code>) from <code>file1</code>.  </p>\n\n<p>eg <code>DMR1</code> in <code>file2</code> has score.data <code>rs2;rs3</code> which intersects with score.data <code>rs1;rs2;rs3</code> of <code>FAM87B</code> and also <code>rs3;rs4</code> of <code>LINC00115</code> in <code>file 1</code> </p>\n\n<p>Most of the code I've written so far has dealt with cleaning up the first file of \"\" and NA entries and creating hashes:</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nmy $file1 = '/path/to/file1';\nmy $file2 = '/path/to/file2';\n\n#Open files\nopen my $fh1 , '&lt;', $file1 or die $!;\nopen my $fh2, '&lt;', $file2 or die $!;\n\n\n#Read file1\nmy %gene_hash;\nwhile(&lt;$fh1&gt;){\n    chomp;\n    my @arr = split; \n    next if $arr[0] eq \"space\";\n    next if $arr[6] eq 'NA';\n\n    my $key = $arr[5]; #Hash key\n\n    my @snps = split /;/, $arr[6]; #to be used as value in hash\n    my $first_snp = shift @snps; #remove 1st element from start\n\n    my @first_snp = split /\"/, $first_snp; #remove \" from start\n    unshift @snps, $first_snp[1]; #add 1st element back to beginning\n\n\n    my $last_snp = pop @snps; #remove last element\n    my @last_snp = split /\"/, $last_snp; #remove \" from end\n\n    push @snps, $last_snp[0];# add last element back to the end\n    push @snps, $arr[6] if $arr[6] =~/^rs.*/; #add element even if there are no \"\" eg SLC35E2B\n\n    push @{ $gene_hash{$key} }, @snps; #assign values to hash\n}\n\n\n\nmy %dmr_hash;\nwhile(&lt;$fh2&gt;){\n   chomp;\n   my @arr = split;\n\n   next if $arr[0] eq \"space\";\n   next if $arr[6] eq 'NA';\n\n   my $key = $arr[5]; #Hash key\n\n   my @snps = split /;/, $arr[6];#to be used as value in hash\n   push @{ $dmr_hash{$key} }, @snps; #assign values to hash\n\n}  \n</code></pre>\n\n<p>I tried searching other hash comparison questions here on stackoverflow and all of them had same keys in both the hashes. I also found the <a href=\"https://stackoverflow.com/questions/2933347/comparing-two-arrays-using-perl\">Array::Utils</a> tool to intersect two arrays but I'm really not sure how to implement it in my problem.</p>\n\n<p>Thank you for taking the time to go through my question and I will be grateful for ideas and solutions.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1439816144, "post_id": 32050786, "comment_id": 52001189, "body": "Stick another capture bracket in."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1439816763, "last_edit_date": 1439816763, "creation_date": 1439816155, "answer_id": 32051019, "question_id": 32050786, "link": "https://stackoverflow.com/questions/32050786/how-to-do-regular-expression-pattern-matching-expression-in-perl/32051019#32051019", "title": "how to do regular expression pattern matching expression in perl", "body": "<p>If you just want to adapt your regular expression, you can add another capture group inside. I suggest to be a bit more specific and use <code>\\d</code> instead of <code>.</code> to match numbers only.</p>\n\n<pre><code>/^(CUSTEVSUMMROW_GPRS).*?\\s(.*?)\\|(\\d+)\\|.*\\|(.*?)\\s/\n</code></pre>\n\n<p>The <code>12920</code> will end up in <code>$3</code> and <code>(243)</code> will now be <code>$4</code>.</p>\n\n<hr>\n\n<p><sub>Note that you're not actually capturing the <code>CUSTEVSUMMROW_GPRS_SIMPLE</code> from your example data. The <code>_SIMPLE</code> is lost. You are also not outputting the number in parenthesis <code>(243)</code>. Did you make a mistake when copying your code into the question?</sub></p>\n\n<hr>\n\n<p>However it's probably better to use <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a>. If the data has the same format in every line, it might look like the following. Of course I had to make some guesses here as the question is rather vauge.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nwhile (my $line = &lt;DATA&gt;) {\n  chomp $line;\n  my ($first_part, @details) = split /\\|/, $line;\n  my ($tag, $line_txt) = split /\\s/, $first_part, 2;\n\n  say \"Tag: $tag\";\n  say \"amt: $details[3]\";\n  say \"lineTxt: $line_txt\";\n  say \"usage: $details[0]\";\n}\n\n__DATA__\nCUSTEVSUMMROW_GPRS_SIMPLE GPRS - Intl Roaming - Mexico - Simple All In Plan (Monthly)|12920|MB|7750|1000|(243)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4764990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de9f8fab0f265efabf8d740ab771fe68?s=128&d=identicon&r=PG&f=1", "display_name": "Rock Star", "link": "https://stackoverflow.com/users/4764990/rock-star"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 32051019, "answer_count": 1, "score": 0, "last_activity_date": 1439816763, "creation_date": 1439815516, "last_edit_date": 1439815600, "question_id": 32050786, "link": "https://stackoverflow.com/questions/32050786/how-to-do-regular-expression-pattern-matching-expression-in-perl", "title": "how to do regular expression pattern matching expression in perl", "body": "<p>I am reading line from the file :</p>\n\n<pre><code>CUSTEVSUMMROW_GPRS_SIMPLE GPRS - Intl Roaming - Mexico - Simple All In Plan (Monthly)|12920|MB|7750|1000|(243)\n</code></pre>\n\n<p>I use the below logic</p>\n\n<pre><code>$line=~m/^(CUSTEVSUMMROW_GPRS).*?\\s(.*?)\\|.*\\|(.*?)\\s\n</code></pre>\n\n<p>I am able to extract the data separately like below</p>\n\n<pre><code>print\"\nTag:CUSTEVSUMMROW_GPRS,\namt:1000,\nlineTxt:GPRS - Intl Roaming - Mexico - Simple All In Plan (Monthly)\\n\";\n</code></pre>\n\n<p>How to extract another item called <code>$usage = 12920</code>?</p>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1439813638, "post_id": 32049401, "comment_id": 51999578, "body": "Could you give some example of these non-numeric values?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1439813773, "post_id": 32049401, "comment_id": 51999669, "body": "Updated with sample."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1439814260, "post_id": 32049401, "comment_id": 51999958, "body": "This code will sort a string such as <code>2A</code> falsely as the number <code>2</code>, while giving the numeric warning. I suppose your data does not have those, but it might be a problem down the line."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1439814438, "post_id": 32049401, "comment_id": 52000072, "body": "That&#39;s acceptable in this context. All the fields I have to work with are either/or."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1439812441, "last_edit_date": 1439812441, "creation_date": 1439812280, "answer_id": 32049656, "question_id": 32049401, "link": "https://stackoverflow.com/questions/32049401/hiding-argument-isnt-numeric-in-a-custom-sort/32049656#32049656", "title": "Hiding &quot;Argument isn&#39;t numeric&quot; in a custom sort", "body": "<p>You could just use </p>\n\n<pre><code>no warnings 'numeric';\n</code></pre>\n\n<p>The following handles negative numbers too:</p>\n\n<pre><code>sub custom_sort {\n    my @a_cols = split( /\\|/, $a );\n    my @b_cols = split( /\\|/, $b );\n\n    my $a_cols_1_is_text = $a_cols[1] =~ /^-?\\d+\\z/ ? 0 : 1;\n    my $b_cols_1_is_text = $b_cols[1] =~ /^-?\\d+\\z/ ? 0 : 1;\n\n    return $a_cols[0] &lt;=&gt; $b_cols[0]\n        || $a_cols_1_is_text &lt;=&gt; $b_cols_1_is_text\n        || $a_cols_1_is_text ? $a_cols[1] cmp $b_cols[1] : $a_cols[1] &lt;=&gt; $b_cols[1];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439816633, "post_id": 32050538, "comment_id": 52001511, "body": "Added checks for both values."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1439817021, "post_id": 32050538, "comment_id": 52001783, "body": "The trick this solution relies on is that 0-9 lexically sorts before a-zA-Z on modern machines. This will give a different result on an EBCDIC machine, but who uses those anymore!"}], "tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 3, "last_activity_date": 1439816605, "last_edit_date": 1439816605, "creation_date": 1439814816, "answer_id": 32050538, "question_id": 32049401, "link": "https://stackoverflow.com/questions/32049401/hiding-argument-isnt-numeric-in-a-custom-sort/32050538#32050538", "title": "Hiding &quot;Argument isn&#39;t numeric&quot; in a custom sort", "body": "<p>First off, I notice that you do not pre-process your input, which could be bad if you have a larger data set. I have done that with a pseudo-Schwartzian transform. That also allows me to get rid of the splitting inside the subroutine.</p>\n\n<p>Then I just add a check for whether or not the second column contains a number to the existing code, with parentheses to secure precedence issues.</p>\n\n<p>As ikegami has mentioned, the simplest solution might be to just use <code>no warnings 'numeric'</code> inside the subroutine. Although this will sort non-numerical and <code>0</code> as the same value.</p>\n\n<h2>Code</h2>\n\n<pre><code>use strict;\nuse warnings;\n\nprint $_-&gt;[-1] for sort custom_sort(),\n    map [ split(/\\|/, $_),  $_ ], &lt;DATA&gt;;\n\nsub custom_sort {\n    return $a-&gt;[0] &lt;=&gt; $b-&gt;[0]     \n        || ($a-&gt;[1] =~ /\\d/ &amp;&amp; $b-&gt;[1] =~ /\\d/ &amp;&amp;\n            $a-&gt;[1] &lt;=&gt; $b-&gt;[1])     #second column numeric compare\n          # ^----------------- this\n        || $a-&gt;[1] cmp $b-&gt;[1];    \n}\n\n\n__DATA__\n128114529000000|10|0\n1212835|A|0\n128114529000000|1|0\n1212835|G|0\n128114529000000|3|0\n1212835|T|0\n128114529000000|2|0\n1212835|H|0\n128114529000000|9|0\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>1212835|A|0\n1212835|G|0\n1212835|H|0\n1212835|T|0\n128114529000000|1|0\n128114529000000|2|0\n128114529000000|3|0\n128114529000000|9|0\n128114529000000|10|0\n</code></pre>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1439816605, "creation_date": 1439811444, "last_edit_date": 1439813765, "question_id": 32049401, "link": "https://stackoverflow.com/questions/32049401/hiding-argument-isnt-numeric-in-a-custom-sort", "title": "Hiding &quot;Argument isn&#39;t numeric&quot; in a custom sort", "body": "<p>I have a sort function that looks like this:</p>\n\n<pre><code>sub custom_sort {\n    my @a_cols = split( /\\|/, $a );\n    my @b_cols = split( /\\|/, $b );\n\n    return $a_cols[0] &lt;=&gt; $b_cols[0]     #numeric compare first column;\n        || $a_cols[1] &lt;=&gt; $b_cols[1]     #second column numeric compare\n        || $a_cols[1] cmp $b_cols[1];    #alphabetic compare second column\n}\n</code></pre>\n\n<p>This works nicely for it's desired purpose - column <code>1</code> can either be alphabetic or numeric, and I want to sort these things separately. </p>\n\n<p>There's just one problem - I get warnings if this column isn't just numeric. Whilst I can separate out the comparison and test/return - is there a neater way? </p>\n\n<p>I'm sort of thinking perhaps using <code>r</code> regex:</p>\n\n<pre><code>$a_cols[1] =~ s/^\\D+/0/r \n</code></pre>\n\n<p>Or maybe a ternary operator.</p>\n\n<p>But is there a more elegant way to say \"if it's text, treat it as zero\"? </p>\n\n<pre><code>128114529000000|10|0\n1212835|A|0\n128114529000000|1|0\n1212835|G|0\n128114529000000|3|0\n1212835|T|0\n128114529000000|2|0\n1212835|H|0\n128114529000000|9|0\n</code></pre>\n\n<p>And desired output is:</p>\n\n<pre><code>1212835|A|0\n1212835|G|0\n1212835|H|0\n1212835|T|0\n128114529000000|1|0\n128114529000000|2|0\n128114529000000|3|0\n128114529000000|9|0\n128114529000000|10|0\n</code></pre>\n\n<p>e.g. sorting based on first key, then second - but comparing alphabetically or numerically depending on context. Vanilla 'alpha' sort doesn't work, because of the <code>10</code> in there. </p>\n"}, {"tags": ["perl", "config"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439809350, "post_id": 32048553, "comment_id": 51996915, "body": "I don&#39;t understand what you are trying to do. What is <code>config</code> and what is <code>file</code>? Are those variable names? What variable do you want to import? Where is the line <code>fil&#47;etc&#47;wvdial.conf</code>? Is your current code working?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439811420, "post_id": 32049095, "comment_id": 51998160, "body": "What does the <code>qfn</code> in <code>$config_qfn</code> stand for?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439811770, "post_id": 32049095, "comment_id": 51998395, "body": "@simbabque, &quot;Qualified file name&quot; (a relative or absolute path), in contrast to &quot;fully qualified file name&quot; (an absolute path). I reserve &quot;file name&quot; for just the file name part of the path."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1439810462, "creation_date": 1439810462, "answer_id": 32049095, "question_id": 32048553, "link": "https://stackoverflow.com/questions/32048553/perl-configsimple/32049095#32049095", "title": "Perl: Config::Simple", "body": "<p>Don't create two variables with the same name!</p>\n\n<pre><code>Config::Simple-&gt;import_from($config_qfn, \\my %config) \n   or die(Config::Simple-&gt;error());\n\nConfig::Simple-&gt;import_from($config{file}, \\my %config2) \n   or die(Config::Simple-&gt;error());\n\nprint($config2{x}, \"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5214056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9981e4c298ddf323fa79f656c437d63?s=128&d=identicon&r=PG&f=1", "display_name": "ashvak", "link": "https://stackoverflow.com/users/5214056/ashvak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1439810462, "creation_date": 1439808842, "last_edit_date": 1439809354, "question_id": 32048553, "link": "https://stackoverflow.com/questions/32048553/perl-configsimple", "title": "Perl: Config::Simple", "body": "<p>I am doing the config file using <a href=\"https://metacpan.org/pod/Config::Simple\" rel=\"nofollow\">Config::Simple</a> module.</p>\n\n<pre><code>my $cfg = Config::Simple-&gt;import_from($config{'file'}, \\my %config) \n  or die Config::Simple-&gt;error();\n</code></pre>\n\n<p>I am trying to import the variable from different file i.e <code>config</code> and in that variable called <code>file</code>.</p>\n\n<p>And my <code>config</code> file</p>\n\n<pre><code>file=/etc/wvdial.conf\n</code></pre>\n\n<p>How would I do that?</p>\n"}, {"tags": ["perl", "path", "cpanm"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439808428, "post_id": 32047828, "comment_id": 51996435, "body": "Just use cpan to reinstall <code>App::cpanminus</code>"}, {"owner": {"reputation": 6638, "user_id": 8127, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "sundar - Remember Monica", "link": "https://stackoverflow.com/users/8127/sundar-remember-monica"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439810436, "post_id": 32047828, "comment_id": 51997561, "body": "Thanks, I just did a <code>cpanm App::cpanminus</code> and it appears to have worked. And to prevent potential other problems similar to this, I moved Perl to under <code>C:\\Programs\\berry\\ </code> (just to keep it under 8 letters), and edited <code>lib&#47;CPAN&#47;Config.pm</code>, <code>lib&#47;Config_heavy.pl</code>, <code>lib&#47;Config.pm</code> to replace <code>STRAWB~1</code> with <code>berry</code> in every path."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439810769, "post_id": 32047828, "comment_id": 51997753, "body": "That&#39;s odd. <code>cpanm --self-upgrade</code> is supposed to be exactly equivalent to <code>cpanm App::cpanminus</code>, which is why I suggested using <code>cpan</code> instead. I don&#39;t know how you came to have this problem. I have had Strawberry Perl installed to <code>C:\\Strawberry</code> for around ten years and have never come across any short file names, which are relevant only to 16-bit systems"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439810841, "post_id": 32047828, "comment_id": 51997800, "body": "You should write your own solution and accept it"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439811025, "post_id": 32047828, "comment_id": 51997905, "body": "@Borodin, I think his SP was installed to <code>C:\\Programs\\STRAWB~1</code> from the beginning."}, {"owner": {"reputation": 6638, "user_id": 8127, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "sundar - Remember Monica", "link": "https://stackoverflow.com/users/8127/sundar-remember-monica"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439811125, "post_id": 32047828, "comment_id": 51997962, "body": "@Borodin Seems it is doing a <code>check_upgrade</code> before installation only if you do a self-upgrade (<code>sub self_upgrade</code> in <a href=\"https://metacpan.org/source/MIYAGAWA/App-cpanminus-1.7039/lib/App/cpanminus/fatscript.pm\" rel=\"nofollow noreferrer\">metacpan.org/source/MIYAGAWA/App-cpanminus-1.7039/lib/App/&hellip;</a> ). With <code>cpanm App::cpanminus</code>, it treats it like any other package and doesn&#39;t do the check."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439811165, "post_id": 32047828, "comment_id": 51997987, "body": "@ikegami: So where has <code>C:\\Programs\\Strawberry\\perl\\site\\bin\\cpanm.bat</code> come from if it&#39;s an alias?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439811313, "post_id": 32047828, "comment_id": 51998088, "body": "@sundar: <code>cpanm Module</code> always does a <code>check_upgrade</code> first if that module is already installed"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439811364, "post_id": 32047828, "comment_id": 51998127, "body": "@Borodin, It comes from his PATH, not from <code>lib&#47;Config_heavy.pl</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6638, "user_id": 8127, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "sundar - Remember Monica", "link": "https://stackoverflow.com/users/8127/sundar-remember-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1524264881, "last_edit_date": 1524264881, "creation_date": 1439814867, "answer_id": 32050554, "question_id": 32047828, "link": "https://stackoverflow.com/questions/32047828/cpanm-self-upgrade-choking-due-windows-style-8-3-format-path-to-site-bin/32050554#32050554", "title": "cpanm self-upgrade choking due Windows style 8.3 format path to site/bin", "body": "<p>Instead of <code>cpanm --self-upgrade</code>, simply doing it as <code>cpanm App::cpanminus</code> did the trick. (There was an error that <code>cpanm.bat.AAA</code> could not be renamed into <code>cpanm.bat</code>, and that it would be renamed at next boot, but I just renamed it manually.)</p>\n\n<hr>\n\n<p>And to prevent potential other problems similar to this, I moved Perl to under <code>C:\\Programs\\berry\\</code> (just to keep it under 8 letters), and edited <code>lib/CPAN/Config.pm</code>, <code>lib/Config_heavy.pl</code>, <code>lib/Config.pm</code> to replace <code>STRAWB~1</code> with <code>berry</code> in every path.<br>\n(The last two files here are as suggested by an answer in <a href=\"http://www.perlmonks.org/?node_id=680994\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=680994</a> , and the first one is from <code>cpan</code>'s output during <code>o conf</code>. )   </p>\n\n<p>This path change unfortunately doesn't help with making cpanm's <code>--self-upgrade</code> work though, as it prints the same error message as in the question, with these shown as the differing paths now: </p>\n\n<pre><code>cpanm path   : C:\\Programs\\berry\\perl\\site\\bin\\cpanm.bat\nInstall path : C:\\Programs\\berry\\perl\\site\\bin\n</code></pre>\n\n<p>Huh? Aren't they the same paths? Well, line 634 of <a href=\"https://metacpan.org/source/MIYAGAWA/App-cpanminus-1.7039/lib/App/cpanminus/fatscript.pm\" rel=\"nofollow noreferrer\">https://metacpan.org/source/MIYAGAWA/App-cpanminus-1.7039/lib/App/cpanminus/fatscript.pm</a> seems to be where this check is happening, and that line is assuming the <code>$install_base</code> won't contain special characters - but the backslashes in Windows paths are seen as special characters by Perl. So, Perl sees weird characters in the Install path that are different from the cpanm path, and declares it a non-match.<br>\nChanging the regex match there to <code>/\\Q$install_base\\E/</code> would fix this, but an immediate solution as an end user is the <code>cpanm App::cpanminus</code> one at the top. </p>\n"}], "owner": {"reputation": 6638, "user_id": 8127, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "sundar - Remember Monica", "link": "https://stackoverflow.com/users/8127/sundar-remember-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 32050554, "answer_count": 1, "score": 2, "last_activity_date": 1524264881, "creation_date": 1439806476, "question_id": 32047828, "link": "https://stackoverflow.com/questions/32047828/cpanm-self-upgrade-choking-due-windows-style-8-3-format-path-to-site-bin", "title": "cpanm self-upgrade choking due Windows style 8.3 format path to site/bin", "body": "<pre><code>PS&gt; cpanm --self-upgrade\nYou are running cpanm from the path where your current perl won't install executables to.\nBecause of that, cpanm --self-upgrade won't upgrade the version of cpanm you're running.\n\n  cpanm path   : C:\\Programs\\Strawberry\\perl\\site\\bin\\cpanm.bat\n  Install path : C:\\Programs\\STRAWB~1\\perl\\site\\bin\n\nIt means you either installed cpanm globally with system perl, or use distro packages such\nas rpm or apt-get, and you have to use them again to upgrade cpanm.\n</code></pre>\n\n<p>How do I either (a) make cpanm understand that these are the same paths, or (b) change the configured executable-installation path of Perl? </p>\n"}, {"tags": ["perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1439828921, "post_id": 32047412, "comment_id": 52009482, "body": "<code>{print $0&quot;_&quot;col[$3]-1;next}1</code> might be better as <code>{$0=$0&quot;_&quot;col[$3]-1}1</code> since that latter only prints from one common location and avoids the need for <code>next</code>."}], "tags": [], "owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "is_accepted": false, "score": 1, "last_activity_date": 1439805136, "creation_date": 1439805136, "answer_id": 32047412, "question_id": 32047234, "link": "https://stackoverflow.com/questions/32047234/i-want-to-add-a-series-number-on-duplicates-lines/32047412#32047412", "title": "I want to add a series number on duplicates lines", "body": "<p>Using <code>awk</code> you can write something like</p>\n\n<pre><code>awk 'col[$3]++{print $0\"_\"col[$3]-1;next}1' input\n</code></pre>\n\n<ul>\n<li><p><code>col[$3]++</code> The third column is incremented, and saved in associative array <code>col</code>. If this count is greater than 1, then the corresponding action of printing the line followed by count is done.</p></li>\n<li><p><code>print $0</code> prints the entire record.</p></li>\n<li><p><code>1</code> Always true, takes the default action to print the entire line.</p></li>\n</ul>\n\n<p><strong>Test</strong></p>\n\n<pre><code>$ awk 'col[$3]++{print $0\"_\"col[$3]-1;next}1' input\nadd sample A1\nadd sample A2\nadd sample A2_1\nadd sample A3\nadd sample A3_1\nadd sample A3_2\nadd sample A4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1439805393, "creation_date": 1439805393, "answer_id": 32047501, "question_id": 32047234, "link": "https://stackoverflow.com/questions/32047234/i-want-to-add-a-series-number-on-duplicates-lines/32047501#32047501", "title": "I want to add a series number on duplicates lines", "body": "<p>Perlishly:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy %seen;\nwhile (&lt;&gt;) {\n    chomp;\n    print;\n    my ($doodad) = m{\\b(\\w+)$};   #grab last word on line\n    if ( $seen{$doodad}++ ) {\n        print \"_\", $seen{$doodad} - 1; #print taggy thing if it has been seen. \n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Could condense down to a one liner - and it'd look a bit like the <code>awk</code> answer you've got already. </p>\n"}, {"tags": [], "owner": {"reputation": 75423, "user_id": 1066031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qSp5N.jpg?s=128&g=1", "display_name": "Chris Seymour", "link": "https://stackoverflow.com/users/1066031/chris-seymour"}, "is_accepted": true, "score": 1, "last_activity_date": 1439827366, "last_edit_date": 1439827366, "creation_date": 1439805399, "answer_id": 32047503, "question_id": 32047234, "link": "https://stackoverflow.com/questions/32047234/i-want-to-add-a-series-number-on-duplicates-lines/32047503#32047503", "title": "I want to add a series number on duplicates lines", "body": "<p>One way with <code>awk</code>:</p>\n\n<pre><code>awk '{count=seen[$0]++; print $0 (count ? \"_\"count: \"\")}' file\nadd sample A1\nadd sample A2\nadd sample A2_1\nadd sample A3\nadd sample A3_1\nadd sample A3_2\nadd sample A4\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>count=seen[$0]++     # Increment the number of times this line has been seen\nprint $0             # Print the line ($0 contains the whole line)\n(count?\"_\"count:\"\")  # If the count if truthy (&gt;0) also print \"_\" count\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5234656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83647f28424e4be4abc3bc871443e786?s=128&d=identicon&r=PG&f=1", "display_name": "Hargu", "link": "https://stackoverflow.com/users/5234656/hargu"}, "edited": false, "score": 0, "creation_date": 1439820298, "post_id": 32049238, "comment_id": 52004000, "body": "Although those answers are working for me, however this 1 liner is the best one that I do not modify any variable and fit my requirement."}, {"owner": {"reputation": 13, "user_id": 5234656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83647f28424e4be4abc3bc871443e786?s=128&d=identicon&r=PG&f=1", "display_name": "Hargu", "link": "https://stackoverflow.com/users/5234656/hargu"}, "reply_to_user": {"reputation": 75423, "user_id": 1066031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qSp5N.jpg?s=128&g=1", "display_name": "Chris Seymour", "link": "https://stackoverflow.com/users/1066031/chris-seymour"}, "edited": false, "score": 0, "creation_date": 1439821118, "post_id": 32049238, "comment_id": 52004488, "body": "@iiSeymour thanks for your explanation, sorry for my poor English and your hard work. Your 1 liner script also useful."}], "tags": [], "owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "is_accepted": false, "score": 0, "last_activity_date": 1439810924, "creation_date": 1439810924, "answer_id": 32049238, "question_id": 32047234, "link": "https://stackoverflow.com/questions/32047234/i-want-to-add-a-series-number-on-duplicates-lines/32049238#32049238", "title": "I want to add a series number on duplicates lines", "body": "<p>If you wanted to consider the whole line in your comparison it is more like:</p>\n\n<pre><code>awk '{print $0 (done[$0]++ ? \"_\" done[$0] : \"\") }'\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5234656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83647f28424e4be4abc3bc871443e786?s=128&d=identicon&r=PG&f=1", "display_name": "Hargu", "link": "https://stackoverflow.com/users/5234656/hargu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32047503, "answer_count": 4, "score": 0, "last_activity_date": 1439827366, "creation_date": 1439804606, "last_edit_date": 1439820858, "question_id": 32047234, "link": "https://stackoverflow.com/questions/32047234/i-want-to-add-a-series-number-on-duplicates-lines", "title": "I want to add a series number on duplicates lines", "body": "<p>I have to check find duplicates lines in a file and add a character to the end of the line.\nHowever, I would like to add a series number on the end of each duplicate line.</p>\n\n<p>The data format as following:</p>\n\n<pre><code>add sample A1\nadd sample A2\nadd sample A2\nadd sample A3\nadd sample A3\nadd sample A3\nadd sample A4\n</code></pre>\n\n<p>And how to using awk to formatting the data looks like following ?</p>\n\n<pre><code>add sample A1\nadd sample A2\nadd sample A2_1\nadd sample A3\nadd sample A3_1\nadd sample A3_2\nadd sample A4\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439803296, "post_id": 32046707, "comment_id": 51993290, "body": "The text nodes that were <i>level3</i> in the input are <i>level2</i> in the ouput. Is that on purpose?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1439803455, "post_id": 32046707, "comment_id": 51993416, "body": "This smells like an XY problem. Why are you trying to rename the &#39;levels&#39; like this? Also - use a parser."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1439804199, "post_id": 32046707, "comment_id": 51993937, "body": "Use an XML parser: <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1439804281, "post_id": 32046707, "comment_id": 51993995, "body": "Use an XML Parser, but please, don&#39;t use <code>XML::Simple</code> - even the docs call it deprecated."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 2, "creation_date": 1439804306, "post_id": 32046707, "comment_id": 51994016, "body": "<a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">The use of <code>XML::Simple</code> module in new code is discouraged.</a>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1439804347, "post_id": 32046707, "comment_id": 51994051, "body": "@Dr.Avalanche: I am not used any xml modules like XML... any examples...?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439804432, "post_id": 32046707, "comment_id": 51994108, "body": "I like <code>XML::Twig</code>. <code>XML::LibXML</code> has a good reputation too."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439804533, "post_id": 32046707, "comment_id": 51994183, "body": "@simbabque: I have changed.... Its my typo issues."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1439815725, "post_id": 32046707, "comment_id": 52000900, "body": "@ssr1012 if you had looked at the link I gave you, you&#39;d see examples"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1439805054, "post_id": 32047178, "comment_id": 51994545, "body": "Based on the section hierarchy, &lt;?xmltex \\pgtag{\\HIfollowedHII}?&gt;|&lt;?xmltex \\pgtag{\\HIIfollowedHIII}?&gt;|&lt;?xmltex \\pgtag{\\HIIIfollowedHIV}?&gt; tags should be inserted.  And also I am not aware of the XML::Parser and I haven&#39;t used too. Hence forth I will try to do by the way modules. Thanks a lot..."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1439805236, "post_id": 32047178, "comment_id": 51994661, "body": "Inserting tags is a different beast to <i>changing</i> existing ones."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1439804465, "last_edit_date": 1490005774, "creation_date": 1439804465, "answer_id": 32047178, "question_id": 32046707, "link": "https://stackoverflow.com/questions/32046707/find-the-level-of-sections-in-xml-structured-document-perl/32047178#32047178", "title": "Find the Level of Sections in XML Structured Document - perl", "body": "<p>Seriously - don't use regular expresssions for XML. It's bad news. There's a bunch of perfectly valid things you can do with XML that break regular expressions - so what you get is broken XML, and brittle code that may well break horribly one day,  and no one will know quite why. </p>\n\n<p>Use a parser. Personally - I like <a href=\"http://search.cpan.org/perldoc?XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> </p>\n\n<p>It's quite easy to take and rename tags as you ask:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nsub process_section {\n    my ( $section, $depth ) = @_;\n    $depth++;\n    $section-&gt;set_tag(\"section$depth\");\n    foreach my $subsection ( $section-&gt;children('section') ) {\n        process_section( $subsection, $depth );\n    }\n}\n\nmy $twig = XML::Twig-&gt;new( 'pretty_print' =&gt; 'indented_a' );\n$twig-&gt;parsefile ( 'your_file.xml' ); \n\nforeach my $section ( $twig-&gt;findnodes('section') ) {\n    process_section( $section, 0 );\n}\n\n$twig-&gt;print;\n</code></pre>\n\n<p>I would also point out though - your initial question sounds like an <a href=\"https://meta.stackexchange.com/a/66378/270186\">XY problem</a>. What are you trying to accomplish? It's often undesirable to do this sort of operation - changing tags based on hierarchy, because then ... well, then you <em>couldn't</em> do what I've just done - iterate recursively through the data structure. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1439816218, "creation_date": 1439816218, "answer_id": 32051037, "question_id": 32046707, "link": "https://stackoverflow.com/questions/32046707/find-the-level-of-sections-in-xml-structured-document-perl/32051037#32051037", "title": "Find the Level of Sections in XML Structured Document - perl", "body": "<p>Here's a variant using the <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a> module. It simply finds all the <code>section</code> elements and caclulates their hierarchy by counting the number of slashes in the XPath expression to reach them</p>\n\n<p>However, as others have said, this is a strange thing to want to do, and it very much sounds like its a bad solution to a different problem. If you explained the complete problem then we could help you a lot better</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $doc = XML::LibXML-&gt;load_xml(IO =&gt; \\*DATA);\n\nfor my $section ( $doc-&gt;findnodes('//section') ) {\n    my $n = $section-&gt;nodePath =~ tr|/|| - 1;\n    $section-&gt;setNodeName(\"section$n\");\n}\n\nprint $doc;\n\n__DATA__\n&lt;root&gt;\n    &lt;section&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;section&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;section&gt;\n                &lt;para&gt;...level 3&lt;/para&gt;\n                &lt;para&gt;...level 3&lt;/para&gt;\n                &lt;para&gt;...level 3&lt;/para&gt;\n            &lt;/section&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section&gt;\n        &lt;section&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section&gt;\n    &lt;/section&gt;\n    &lt;section&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;section&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section&gt;\n        &lt;section&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section&gt;\n    &lt;/section&gt;\n&lt;/root&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n    &lt;section1&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;section2&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;section3&gt;\n                &lt;para&gt;...level 3&lt;/para&gt;\n                &lt;para&gt;...level 3&lt;/para&gt;\n                &lt;para&gt;...level 3&lt;/para&gt;\n            &lt;/section3&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section2&gt;\n        &lt;section2&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section2&gt;\n    &lt;/section1&gt;\n    &lt;section1&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;para&gt;...level 1&lt;/para&gt;\n        &lt;section2&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section2&gt;\n        &lt;section2&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n            &lt;para&gt;...level 2&lt;/para&gt;\n        &lt;/section2&gt;\n    &lt;/section1&gt;\n&lt;/root&gt;\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32047178, "answer_count": 2, "score": 2, "last_activity_date": 1439816218, "creation_date": 1439803074, "last_edit_date": 1439815342, "question_id": 32046707, "link": "https://stackoverflow.com/questions/32046707/find-the-level-of-sections-in-xml-structured-document-perl", "title": "Find the Level of Sections in XML Structured Document - perl", "body": "<p>Find the Level of Sections in XML Structured Document - perl\nInput:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;section&gt;\n   &lt;para&gt;...level 1&lt;/para&gt;\n   &lt;para&gt;...level 1&lt;/para&gt;\n   &lt;para&gt;...level 1&lt;/para&gt;\n   &lt;section&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;section&gt;\n         &lt;para&gt;...level 3&lt;/para&gt;\n         &lt;para&gt;...level 3&lt;/para&gt;\n         &lt;para&gt;...level 3&lt;/para&gt;\n      &lt;/section&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section&gt;\n   &lt;section&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section&gt;\n&lt;/section&gt;\n&lt;section&gt;\n   &lt;para&gt;...level 1&lt;/para&gt;\n   &lt;para&gt;...level 1&lt;/para&gt;\n   &lt;para&gt;...level 1&lt;/para&gt;\n   &lt;section&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section&gt;\n   &lt;section&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section&gt;\n&lt;/section&gt;\n</code></pre>\n\n<p>I need to fetch all the section level elements and insert the value based on the levels. And the desired output like as follows:</p>\n\n<pre><code>&lt;section1&gt;\n&lt;para&gt;...level 1&lt;/para&gt;\n&lt;para&gt;...level 1&lt;/para&gt;\n&lt;para&gt;...level 1&lt;/para&gt;\n   &lt;section2&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n      &lt;section3&gt;\n      &lt;para&gt;...level 3&lt;/para&gt;\n      &lt;para&gt;...level 3&lt;/para&gt;\n      &lt;para&gt;...level 3&lt;/para&gt;\n      &lt;/section3&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section2&gt;\n   &lt;section2&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section2&gt;\n&lt;/section1&gt;\n&lt;section1&gt;\n&lt;para&gt;...level 1&lt;/para&gt;\n&lt;para&gt;...level 1&lt;/para&gt;\n&lt;para&gt;...level 1&lt;/para&gt;\n   &lt;section2&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section2&gt;\n   &lt;section2&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;para&gt;...level 2&lt;/para&gt;\n   &lt;/section2&gt;\n&lt;/section1&gt;\n</code></pre>\n\n<p>First try:</p>\n\n<pre><code>foreach my $lines ( @splitCnt ) {\n\n    if ( $lines =~ m/&lt;section\\s+/g ) {\n        $opn++;\n        $lines =~ s/&lt;section\\s+/&lt;section$opn /i;\n        $cls = $opn;\n        $opn++;\n    }\n    elsif ( $lines =~ m/&lt;\\/section&gt;/g ) {\n        $opn = $opn - 1;\n        $lines =~ s/&lt;\\/section&gt;/&lt;\\/section$opn&gt;/i;\n    }\n\n    $all_lines .= \"$lines\\n\";\n}\n</code></pre>\n\n<p>Second Try:</p>\n\n<pre><code>my ( $pre1, $match1, $post1 ) = \"\";\n\nwhile ( $incnt =~ m/&lt;section\\s+[^&gt;]*&gt;/g ) {\n\n    $pre1   = $`;\n    $match1 = $&amp;;\n    $post1  = $';\n    my $Opn = '1';\n    my $Cls = \"\";\n\n    $match1 =~ s/&lt;section\\s+/&lt;section$Opn /gi;\n\n    if ( $post1 =~ m/&lt;section\\s+/i ) {\n        $Opn++;\n        $post1 =~ s/&lt;section\\s+/&lt;section$Opn /;\n        $Opn = $Cls;\n    }\n    elsif ( $post1 =~ m/&lt;\\/section&gt;/i ) {\n        $post1 =~ s/&lt;\\/section/&lt;\\/section$Cls/;\n    }\n\n    $pre1 .= $match1;\n    $incnt = $post1;\n\n    print \"$pre1\\n\";\n    system 'pause';\n}\n\nif ( length $pre1 ) {\n    $incnt = $pre1 . $post1;\n}\n</code></pre>\n\n<p>Anyone could help on this one...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4731, "user_id": 1737957, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SiIu7.png?s=128&g=1", "display_name": "jwg", "link": "https://stackoverflow.com/users/1737957/jwg"}, "edited": false, "score": 0, "creation_date": 1439795129, "post_id": 32044487, "comment_id": 51988934, "body": "Please try and fix the code markup. Both the input file and the code file should be indented with four spaces on each line. Leave the line before the start blank, and put four spaces on any blank line in the middle of the code so that you get a single code block. Preview is your friend!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1439800174, "post_id": 32044487, "comment_id": 51991446, "body": "What&#39;s the desired output?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1439803411, "post_id": 32044487, "comment_id": 51993383, "body": "Unquoted string &quot;i&quot; may clash with future reserved word at test.pl line 13."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1439797622, "post_id": 32045052, "comment_id": 51990135, "body": "Your <code>next unless $line ne &quot;&quot;</code> is not very good style. It&#39;s confusing. Juts say <code>if $line eq&quot;&quot;</code> or <code>unless $line</code>."}, {"owner": {"reputation": 2476, "user_id": 1092785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3463f1ed04180b8e766f35772096b16?s=128&d=identicon&r=PG", "display_name": "rplantiko", "link": "https://stackoverflow.com/users/1092785/rplantiko"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439798288, "post_id": 32045052, "comment_id": 51990477, "body": "@simbabque Agreed. Double negation is never not bad. :-) I changed it"}], "tags": [], "owner": {"reputation": 2476, "user_id": 1092785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3463f1ed04180b8e766f35772096b16?s=128&d=identicon&r=PG", "display_name": "rplantiko", "link": "https://stackoverflow.com/users/1092785/rplantiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1439798213, "last_edit_date": 1439798213, "creation_date": 1439797135, "answer_id": 32045052, "question_id": 32044487, "link": "https://stackoverflow.com/questions/32044487/matching-and-appendingcopying-every-3rd-line-without-disturbing-the-3rd-line-u/32045052#32045052", "title": "matching and appending(copying) every 3rd line without disturbing the 3rd line using perl", "body": "<p>For tasks like this, it is useful to form groups of lines in a first step. Then, in a second loop, you have each group in your access, and you can rearrange or modify easily:  </p>\n\n<pre><code>use strict;\nuse warnings;\n\n# First, form the groups\n# Each group starts with a line matching a certain pattern, e.g. /^\\-/\nmy @groups = ();\nmy $current;\nforeach my $line (&lt;DATA&gt;) {  \n  chomp $line;\n  next unless $line;  \n  if ($line =~ /^\\-/) {\n    push @groups, $current if $current;\n    $current = [];\n    }\n  push @$current, $line;\n  }\npush @groups,$current if (scalar @$current &gt; 0); # last group\n\n# Now you have the groups, you can manipulate the output \n# and print it comfortably in a modified form \nforeach (@groups) {\n  my @current = @{ $_ };\n  foreach my $i (0..$#current) {\n    if ($i==0) {\n      print \"$current[$i] $current[$i+2] +SPECIAL\\n\";\n      }\n    else {\n       print \"$current[$i]\\n\";\n      }  \n    } \n  }\n\n\n__DATA__\n- VSSC!.extra196 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1055560 1571000 ) N ;\n- VSSC!.extra197 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1055560 1571000 ) N ;\n- VSSC!.extra198 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1043560 1571000 ) N ;\n</code></pre>\n\n<p>To make it standalone, I have put your sample data as <code>__DATA__</code> at the end of the script. You can, of course, read in the lines from a file as well, this would require some slight changes of the first part of the script.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1439800376, "creation_date": 1439800376, "answer_id": 32045915, "question_id": 32044487, "link": "https://stackoverflow.com/questions/32044487/matching-and-appendingcopying-every-3rd-line-without-disturbing-the-3rd-line-u/32045915#32045915", "title": "matching and appending(copying) every 3rd line without disturbing the 3rd line using perl", "body": "<p>This is easier than it sounds - your data has a delimiter <code>;</code>. \nSo you can set <code>$/</code> and use that. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nlocal $/ = \";\\n\";\nwhile ( &lt;DATA&gt; ) {\n    chomp;\n    my @chunk = split /\\n/; \n    print join ( \" \", @chunk[0,2], \" + SPECIAL\" ),\"\\n\";\n}\n\n\n__DATA__\n- VSSC!.extra196 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1055560 1571000 ) N ;\n- VSSC!.extra197 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1055560 1571000 ) N ;\n- VSSC!.extra198 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1043560 1571000 ) N ;\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>- VSSC!.extra196 + NET VSSC!    + USE GROUND  + SPECIAL\n- VSSC!.extra197 + NET VSSC!    + USE GROUND  + SPECIAL\n- VSSC!.extra198 + NET VSSC!    + USE GROUND  + SPECIAL\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5227065, "user_type": "registered", "profile_image": "https://graph.facebook.com/870372709684916/picture?type=large", "display_name": "RajaSekhar Busapalli", "link": "https://stackoverflow.com/users/5227065/rajasekhar-busapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 32045052, "answer_count": 2, "score": -1, "last_activity_date": 1439802658, "creation_date": 1439794929, "last_edit_date": 1439802658, "question_id": 32044487, "link": "https://stackoverflow.com/questions/32044487/matching-and-appendingcopying-every-3rd-line-without-disturbing-the-3rd-line-u", "title": "matching and appending(copying) every 3rd line without disturbing the 3rd line using perl", "body": "<p>I have a following lines in a file..</p>\n\n<pre><code>- VSSC!.extra196 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1055560 1571000 ) N ;\n- VSSC!.extra197 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1055560 1571000 ) N ;\n- VSSC!.extra198 + NET VSSC!\n   + DIRECTION INOUT\n   + USE GROUND\n   + LAYER BA ( 0 0 ) ( 1500 80870 )\n   + PLACED ( 1043560 1571000 ) N ;\n</code></pre>\n\n<p>I want to append every 3rd line with first line..</p>\n\n<p>eg: `- VSSC!.extra198 + NET VSSC!  + USE GROUND + SPECIAL</p>\n\n<p>by using match operator I am able to catch the first line and 3rd line. and next task is, how to append and add a word called <code>+SPECIAL</code> to it?</p>\n\n<pre><code>use warnings;\nmy @array;\n\nopen(my $fh, \"&lt;\", \"sample.txt\") or die \"Failed to \n\nopen file: $!\\n\";\nwhile(&lt;$fh&gt;) {\n     my $i; chomp; push @array, $_;\n}\n\nclose $fh;\n\nfor(i=0;i&lt;3;i++)\n{\n\n     print \"$array[i] $array[i+2] +SPECIAL \\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "file", "spreadsheet", "cpan"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1439794631, "post_id": 32044380, "comment_id": 51988703, "body": "use <a href=\"http://search.cpan.org/~dmow/Spreadsheet-XLSX-0.13-withoutworldwriteables/lib/Spreadsheet/XLSX.pm\" rel=\"nofollow noreferrer\">Spreadsheet::XLSX</a> for parseing xlsx files"}, {"owner": {"reputation": 315, "user_id": 1318749, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e721fb22c889eb795cb9065be09d790?s=128&d=identicon&r=PG", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/1318749/ganesh"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1439794813, "post_id": 32044380, "comment_id": 51988783, "body": "already there is code written for .xls parsing using &quot;Spreadsheet::Read&quot;, i just want to enhance the same for .xlsx files, if using Spreadsheet::XLSX wont required any change in code then its ok for me.[also i dont have Spreadsheet::XLSX installed and no access for installations either]"}, {"owner": {"reputation": 315, "user_id": 1318749, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e721fb22c889eb795cb9065be09d790?s=128&d=identicon&r=PG", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/1318749/ganesh"}, "edited": false, "score": 0, "creation_date": 1439796102, "post_id": 32044380, "comment_id": 51989373, "body": "ok, but if we pass the .xlsx file stored on server to same function it returns the proper out. i guess there is some problem with stream data (bless( *{&#39;Fh::fh00001308_4_template.xls&#39;}, &#39;Fh&#39; )) here."}, {"owner": {"reputation": 10361, "user_id": 673018, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/564a944115df1873570d0aa24d619292?s=128&d=identicon&r=PG", "display_name": "Mandar Pande", "link": "https://stackoverflow.com/users/673018/mandar-pande"}, "edited": false, "score": 0, "creation_date": 1439797174, "post_id": 32044380, "comment_id": 52032978, "body": "Try the module: <code>Spreadsheet::ParseXLSX</code>."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439801606, "post_id": 32044380, "comment_id": 51992250, "body": "@simbabque - The docs for <a href=\"https://metacpan.org/pod/Spreadsheet::Read\" rel=\"nofollow noreferrer\">Spreadsheet::Read</a> indicate that it&#39;s basically a wrapper around several spreadsheet parsing modules, including several for XLSX."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 1318749, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e721fb22c889eb795cb9065be09d790?s=128&d=identicon&r=PG", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/1318749/ganesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1439799297, "last_edit_date": 1439799297, "creation_date": 1439798959, "answer_id": 32045501, "question_id": 32044380, "link": "https://stackoverflow.com/questions/32044380/unable-to-parse-xlsx-with-spreadsheetread/32045501#32045501", "title": "unable to parse xlsx with Spreadsheet::Read", "body": "<p>Here instead of passing stream data directly we are suppose to store the file at temporary location, and then pass the file name with location to the ReadData() function.<br>Please refer below code:<br></p>\n\n<pre><code>use CGI;\nuse Spreadsheet::Read;\nuse Spreadsheet::ParseExcel;\nuse Data::Dumper qw(Dumper);\n\nmy $corrected_filename = $query-&gt;param('csv_path');\n$corrected_filename =~ s/ /_/g;\n# $corrected_filename .= \"$username\";\n#store file locally\nlocal $| = 1;\nmy ($bytesread,$buffer,$file);\nmy $fh = $query-&gt;upload('csv_path');\nopen(OUTF, '&gt;' . \"/tmp/upload-\".$corrected_filename);\nwhile ($bytesread = read($fh, $buffer, 1024)) {\n    print(OUTF $buffer);\n}\nclose(OUTF);\nmy $data_xls  = ReadData (\"/tmp/upload-\".$corrected_filename, \"strip\"=&gt;3, \"dtfmt\" =&gt; \"mm/dd/yyyy\");#here if we pass .xlsx file name(stored on server) to ReadData() it works properly.\n\n\n#print out of Spreadsheet::Read\nprint \"&lt;pre&gt;\";\nprint Dumper($data_xls);\n</code></pre>\n\n<p>And  when code read finish we can unlink the file.</p>\n"}], "owner": {"reputation": 315, "user_id": 1318749, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e721fb22c889eb795cb9065be09d790?s=128&d=identicon&r=PG", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/1318749/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2454, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439799297, "creation_date": 1439794531, "last_edit_date": 1439795937, "question_id": 32044380, "link": "https://stackoverflow.com/questions/32044380/unable-to-parse-xlsx-with-spreadsheetread", "title": "unable to parse xlsx with Spreadsheet::Read", "body": "<p>I am Trying to parse a <strong>.xlsx</strong> file using <strong><a href=\"http://search.cpan.org/~hmbrand/Spreadsheet-Read/Read.pm\" rel=\"nofollow\">Spreadsheet::Read</a></strong> same code works for <strong>.xls</strong> files but throws an error <strong>.xlsx</strong> below is procedure followed:</p>\n\n<ol>\n<li>We are creating a file upload(browse) button in <strong>.cgi</strong> file with name <strong>\"csv_path\"</strong>.</li>\n<li>when user submits the form (of course its <em>multipart/form-data</em>)</li>\n<li><p>code on next page</p>\n\n<pre><code>use CGI;\nuse Spreadsheet::Read;\nuse Spreadsheet::ParseExcel;\nuse Data::Dumper qw(Dumper);\n\n#will catch uploaded file.\nmy $fname = $query-&gt;param(\"csv_path\");\n\nprint Dumper($fname); \n#just for confirmation we printed variable $fname\n#when .xls is uploaded $fname contains:\n#$VAR1 = bless( \\*{'Fh::fh00001308_4_template.xls'}, 'Fh' );\n#when .xlsx is uploaded $fname contains:\n#$VAR1 = bless( \\*{'Fh::fh00001308_4_template.xlsx'}, 'Fh' );\n\n#now read the file with \"Spreadsheet::Read\"\nmy $data_xls  = ReadData ( $fname, \"strip\"=&gt;3, \"dtfmt\" =&gt; \"mm/dd/yyyy\");#here if we pass .xlsx file name(stored on server) to ReadData() it works properly.\n\n\n#print out of Spreadsheet::Read\nprint \"&lt;pre&gt;\";\nprint Dumper($data_xls);\n\n#when .xls is uploaded $data_xls comes up with all required data\n\n#when .xlsx is uploaded below error occurs\n#   XLSX parser cannot parse data: Undefined subroutine Fh::opened\n</code></pre></li>\n</ol>\n\n<p>Please suggest if any changes required or any thing missing.</p>\n"}, {"tags": ["html", "forms", "perl", "email", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1439795999, "post_id": 32042594, "comment_id": 51989329, "body": "This stuff is prehistoric and only really has the name in common with modern Perl. In short, don&#39;t use it any more. There are way better things around today. If you just want to collect form data for your client and you do not know about programming, consider using <a href=\"https://www.google.com/forms/about/\" rel=\"nofollow noreferrer\">Google Forms</a>."}, {"owner": {"reputation": 1, "user_id": 2384061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbEiZ.jpg?s=128&g=1", "display_name": "SylviaVanHorn", "link": "https://stackoverflow.com/users/2384061/sylviavanhorn"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439942969, "post_id": 32042594, "comment_id": 52065041, "body": "i can&#39;t use Google Forms; they are not secure and are not HIPAA compliant."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1439971020, "post_id": 32042594, "comment_id": 52074271, "body": "What does &quot;How can I get the output to resemble a regular email and not just a list&quot; mean?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2384061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbEiZ.jpg?s=128&g=1", "display_name": "SylviaVanHorn", "link": "https://stackoverflow.com/users/2384061/sylviavanhorn"}, "edited": false, "score": 0, "creation_date": 1439943001, "post_id": 32046472, "comment_id": 52065047, "body": "So would I use other scripts? Like a PHP script?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 2384061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbEiZ.jpg?s=128&g=1", "display_name": "SylviaVanHorn", "link": "https://stackoverflow.com/users/2384061/sylviavanhorn"}, "edited": false, "score": 0, "creation_date": 1439970939, "post_id": 32046472, "comment_id": 52074222, "body": "Well, you haven&#39;t explained what is wrong with the output from FormMail. What, exactly, are you looking for? And, as I said above, it&#39;s pretty likely that what you want can be done with TFMail."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1439802344, "creation_date": 1439802344, "answer_id": 32046472, "question_id": 32042594, "link": "https://stackoverflow.com/questions/32042594/perl-script-not-processing-html-form-correctly/32046472#32046472", "title": "Perl script not processing html form correctly", "body": "<p>The title to your question is \"Perl script not processing html form correctly\". I'm not sure what that means. In what way is formmail not processing the form correctly? It is taking all your form inputs and sending an email that contains all of the information. That is what it it supposed to do. It is working exactly as expected. It is not correct to say that it is not working correctly.</p>\n\n<p>As simbabque says in his comment, this stuff really is antique and shouldn't be used any more. And I speak as the person who started the nms project. It's really only still there because otherwise there's a danger that people would gravitate back to Matt's scripts (Which are even worse!)</p>\n\n<p>The original intention with the nms programs was that they reproduced what Matt's scripts did. So, yes, Formmail produces an unformatted list of its inputs. That's how things worked back then. I'm not really sure why anyone would need anything else.</p>\n\n<p>If you really want formatted output from a 15-year-old CGI program, then look at the TFMail program from nms (<a href=\"http://nms-cgi.sourceforge.net/scripts.shtml\" rel=\"nofollow\">http://nms-cgi.sourceforge.net/scripts.shtml</a>) but, really, there are far better ways to do this these days.</p>\n"}], "owner": {"reputation": 1, "user_id": 2384061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbEiZ.jpg?s=128&g=1", "display_name": "SylviaVanHorn", "link": "https://stackoverflow.com/users/2384061/sylviavanhorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439802344, "creation_date": 1439784064, "last_edit_date": 1439787087, "question_id": 32042594, "link": "https://stackoverflow.com/questions/32042594/perl-script-not-processing-html-form-correctly", "title": "Perl script not processing html form correctly", "body": "<p>I am using a formmail Perl script (Matt's script archive) from London Perl mongers to process several web forms I created. I have the script in the cgi-bin and it seems to be working; however the email output is just a long list with no formatting. I am working on the Perl script in Notepad and I am on a windows computer. I only did a few modifications to personalized the script for my client. I barely now anything about Perl. I have used this script before; but I don't know why the output is a long list with no formatting. I uploaded the script through the server's cpanel as I can't get it to ftp with my current ftp program. The server they are using is old and apparently insecure. I don't know if that makes a difference. How can I get the output to resemble a regular email and not just a list.</p>\n\n<p>the email looks like this below:</p>\n\n<pre><code>Below is the result of your feedback form.  It was submitted by\nhello () on Thursday, August 13, 2015 at 17:35:02\n---------------------------------------------------------------------------\ntodayDate: 08/13/2015\nssn: 123456789\nrefer: self\nbirthdate: 08/02/2015\nage: 32\ngender1: Female\nreligion: yes\nethnicity: ethnic\naddress: 1234\ncity: big\nstate: CA\nzip: 12345\nhomephone: 5105105100 32135684\nworkphone: 5105105100\ncellphone: 5105105100\ncreditcard: na\nnameOnCard: na\nOccupation: work\nemployerName: hello there\nemployerAddress: 1234 street\nemployerCity: all city\nemployerState: CA\nemployerZip: 12345\neducation: BA Degree\ninSchool2: No\nmarriedOrcommit: Yes\nhowLong: forever\nnamePartner: honey\noccupationPartner: working hard\nyouPrev: none\n</code></pre>\n\n<p>I am using the following Perl script:</p>\n\n<pre><code>#!/usr/bin/perl -wT\n#\n# NMS FormMail Version 3.14c1\n#\n\nuse strict;\nuse vars qw(\n  $DEBUGGING $emulate_matts_code $secure %more_config\n  $allow_empty_ref $max_recipients $mailprog @referers\n  @allow_mail_to @recipients %recipient_alias\n  @valid_ENV $date_fmt $style $send_confirmation_mail\n  $confirmation_text $locale $charset $no_content\n  $double_spacing $wrap_text $wrap_style $postmaster \n  $address_style\n);\n\n# PROGRAM INFORMATION\n# -------------------\n# FormMail.pl Version 3.14c1\n#\n# This program is licensed in the same way as Perl\n# itself. You are free to choose between the GNU Public\n# License &lt;http://www.gnu.org/licenses/gpl.html&gt;  or\n# the Artistic License\n# &lt;http://www.perl.com/pub/a/language/misc/Artistic.html&gt;\n#\n# For help on configuration or installation see the\n# README file or the POD documentation at the end of\n# this file.\n\n# USER CONFIGURATION SECTION\n# --------------------------\n# Modify these to your own settings. You might have to\n# contact your system administrator if you do not run\n# your own web server. If the purpose of these\n# parameters seems unclear, please see the README file.\n#\nBEGIN\n{\n  $DEBUGGING         = 1;\n  $emulate_matts_code= 0;\n  $secure            = 1;\n  $allow_empty_ref   = 1;\n  $max_recipients    = 2;\n  $mailprog          = '/usr/lib/sendmail -oi -t';\n  $postmaster        = 'sylviavanhorn@gmail.com';\n  @referers          = qw(expressivehearts.com localhost);\n  @allow_mail_to     = qw(sylviavanhorn@gmail.com localhost);\n  @recipients        = ();\n  %recipient_alias   = ();\n  @valid_ENV         = qw(REMOTE_HOST REMOTE_ADDR REMOTE_USER  HTTP_USER_AGENT);\n  $locale            = '';\n  $charset           = 'iso-8859-1';\n  $date_fmt          = '%A, %B %d, %Y at %H:%M:%S';\n  $style             = '/public/css/jane.css';\n  $no_content        = 0;\n  $double_spacing    = 0;\n  $wrap_text         = 0;\n  $wrap_style        = 1;\n  $address_style     = 0;\n  $send_confirmation_mail = 0;\n  $confirmation_text = &lt;&lt;'END_OF_CONFIRMATION';\nFrom: expressivehearts@gmail.com\nSubject: New Client Forms Submission\n\nThank you for your submission.\n\nEND_OF_CONFIRMATION\n\n# You may need to uncomment the line below and adjust the path.\n# use lib './lib';\n\n# USER CUSTOMISATION SECTION\n# --------------------------\n# Place any custom code here\n\n# Email Header\nprint MAIL \"To: $postmaster\\n\";\nprint MAIL \"From: $realname\\n\";\nprint MAIL \"Subject: $subject\\n\\n\";\nprint MAIL \"Content-type: text/html\\n\";\n\n\n\n\n# USER CUSTOMISATION &lt;&lt; END &gt;&gt;\n# ----------------------------\n# (no user serviceable parts beyond here)\n}\n\n#\n# The code below consists of module source inlined into this\n# script to make it a standalone CGI.\n</code></pre>\n\n<p>Please note: I only pasted a part of the Perl script as it is very long; it is supposed to be a standalone script.</p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1439783641, "post_id": 32042287, "comment_id": 51985260, "body": "what you tried so far.?"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1439787183, "creation_date": 1439787183, "answer_id": 32043012, "question_id": 32042287, "link": "https://stackoverflow.com/questions/32042287/extract-the-string-in-each-line-in-a-text-file-and-count-the-occurrence-of-that/32043012#32043012", "title": "Extract the string in each line in a text file and count the occurrence of that string in the file", "body": "<p>Use a regular expression to grab the string you care about, and a hash to count the occurrences.  Save the following as count.pl:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $leader = 'ThreadDistributor Dispatch';\nmy %dispatch_types;\nwhile (&lt;&gt;) {\n    chomp;\n    next unless m|^$leader|; # Ignore anything else\n    my ($type) = m|^$leader (k=\\'.+?\\'),|;\n    defined $type\n        or die \"Invalid row : '$_'\";\n    # print \"Type is $type\\n\";\n    $dispatch_types{$type}++;\n}\n\nfor my $type ( sort keys %dispatch_types ) {\n    print \"$type occurs \" . $dispatch_types{$type} . \" times\\n\";\n}\n</code></pre>\n\n<p>And run it as:</p>\n\n<pre><code>cat my_log_file | count.pl\n\nk='/678605358297;type=F' occurs 1 times\nk='/678605358297;type=W' occurs 2 times\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5233647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175fa5dab90dcb28efacba2c9ec0410e?s=128&d=identicon&r=PG&f=1", "display_name": "rs123", "link": "https://stackoverflow.com/users/5233647/rs123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1439787665, "creation_date": 1439781397, "last_edit_date": 1439787665, "question_id": 32042287, "link": "https://stackoverflow.com/questions/32042287/extract-the-string-in-each-line-in-a-text-file-and-count-the-occurrence-of-that", "title": "Extract the string in each line in a text file and count the occurrence of that string in the file", "body": "<p>I have a log file with sample output as below. I want to extract the value of string starting with k= in each line using Perl and then count the frequency of that string in the full log file.</p>\n\n<pre><code>ThreadDistributor Dispatch k='/678605358297;type=F', i=2\nThreadDistributor Dispatch k='/678605358297;type=W', i=0\nThreadDistributor Dispatch k='/678605358297;type=W', i=1\n</code></pre>\n\n<p>Expected Result:</p>\n\n<pre><code>k='/678605358297;type=F' occurs 1 times\nk='/678605358297;type=W' occurs 2 times\n</code></pre>\n\n<p>This is what I have tried thus far:</p>\n\n<pre><code>use Test::More qw(no_plan);\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n$Data::Dumper::Sortkeys=1;\nmy @key;\nmy @keystrings;\n\nopen (INFILE, \"1.txt\") or die \"ERROR:cannot open test result file $!\";\nforeach my $line (&lt;INFILE&gt;) {\n\n    @key = split(' ',$line);\n    push @keystrings, $key[2]\n\n}\n\nprint \"$key[2]\\n\";\n\n\nmy %counts;\n$counts{$_}++ for @keystrings;\nprint Dumper(\\%counts);\n\nclose INFILE;\n</code></pre>\n"}, {"tags": ["perl", "osx-yosemite", "perl-module", "cpan"], "comments": [{"owner": {"reputation": 13, "user_id": 1399234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0eacb4fb0051305a6710bfbec0206b?s=128&d=identicon&r=PG", "display_name": "jrg", "link": "https://stackoverflow.com/users/1399234/jrg"}, "edited": false, "score": 0, "creation_date": 1439770194, "post_id": 32040832, "comment_id": 51982812, "body": "I&#39;ve found the newly installed modules in /Library/Perl/5.18/."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439778037, "post_id": 32040832, "comment_id": 51984188, "body": "How can you &quot;explicitly use 5.16&quot;? Wasn&#39;t it replaced by 5.18?"}, {"owner": {"reputation": 13, "user_id": 1399234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0eacb4fb0051305a6710bfbec0206b?s=128&d=identicon&r=PG", "display_name": "jrg", "link": "https://stackoverflow.com/users/1399234/jrg"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439839248, "post_id": 32040832, "comment_id": 52014937, "body": "They don&#39;t remove the old versions, so you can point to whichever version you want."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439841464, "post_id": 32040832, "comment_id": 52016140, "body": "I can help you with the old version problem, if you want. Start a new question. Provide <code>perl -V</code> from that version. Specify where the modules <code>perl</code> can&#39;t find are located. (Search your entire drive for a module you installed if you need to.)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1399234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0eacb4fb0051305a6710bfbec0206b?s=128&d=identicon&r=PG", "display_name": "jrg", "link": "https://stackoverflow.com/users/1399234/jrg"}, "edited": false, "score": 0, "creation_date": 1439839318, "post_id": 32041918, "comment_id": 52014978, "body": "On another Mac of mine, I freshly installed CPAN and had the same issue. Perl can&#39;t find any modules, old or new."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1439777933, "creation_date": 1439777933, "answer_id": 32041918, "question_id": 32040832, "link": "https://stackoverflow.com/questions/32040832/perl-update-in-os-x-10-10-5-cannot-locate-perl-modules/32041918#32041918", "title": "Perl Update in OS X 10.10.5, Cannot Locate Perl Modules", "body": "<p>Locating them is not going to help. You need to reinstall them anyway. Perl doesn't maintain binary API compatibility between version (though you can safely upgrade to a newer release of the same version).</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 1399234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0eacb4fb0051305a6710bfbec0206b?s=128&d=identicon&r=PG", "display_name": "jrg", "link": "https://stackoverflow.com/users/1399234/jrg"}, "is_accepted": false, "score": 0, "last_activity_date": 1439870398, "creation_date": 1439870398, "answer_id": 32063308, "question_id": 32040832, "link": "https://stackoverflow.com/questions/32040832/perl-update-in-os-x-10-10-5-cannot-locate-perl-modules/32063308#32063308", "title": "Perl Update in OS X 10.10.5, Cannot Locate Perl Modules", "body": "<p>I'm going to go ahead and answer this as I figured out a way for it to work, though it poses yet another question: Why were permissions changed for where Perl modules are installed? Thankfully, this is only on my dev computers and nothing is accessed via the web, for which I use linux servers.</p>\n\n<p>I tried again and realized that perl said that when it tried to load the module, it got a \"permission denied\" error. So, I just re-ran the script using sudo...and it worked. I guess it must be some sort of permissions changes.</p>\n"}], "owner": {"reputation": 13, "user_id": 1399234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0eacb4fb0051305a6710bfbec0206b?s=128&d=identicon&r=PG", "display_name": "jrg", "link": "https://stackoverflow.com/users/1399234/jrg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439870398, "creation_date": 1439766699, "last_edit_date": 1439839678, "question_id": 32040832, "link": "https://stackoverflow.com/questions/32040832/perl-update-in-os-x-10-10-5-cannot-locate-perl-modules", "title": "Perl Update in OS X 10.10.5, Cannot Locate Perl Modules", "body": "<p><strong>UPDATE:</strong> I tried again and realized that perl said that when it tried to load the module, it got a \"permission denied\" error. So, I just re-ran the script using sudo...and it worked. I guess it must be some sort of permissions changes.</p>\n\n<p>Original:<p>\nI just updated OS X to 10.10.5 and suddenly, Perl can no longer locate any of my CPAN-installed modules. Even newly installed modules are not found. I know that the update installed Perl 5.18.2, but even when I explicitly use 5.16, the modules still cannot be located.</p>\n\n<p>The output of perl -V is here:</p>\n\n<pre>\nSummary of my perl5 (revision 5 version 18 subversion 2) configuration:\n\n  Platform:\n    osname=darwin, osvers=14.0, archname=darwin-thread-multi-2level\n    uname='darwin osx228.apple.com 14.0 darwin kernel version 14.0.0: tue jun 2 11:49:04 pdt 2015; root:xnu-2782.1.97.1.3~1development_x86_64 x86_64 '\n    config_args='-ds -e -Dprefix=/usr -Dccflags=-g  -pipe  -Dldflags= -Dman3ext=3pm -Duseithreads -Duseshrplib -Dinc_version_list=none -Dcc=cc'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=define, usemultiplicity=define\n    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags ='-arch i386 -arch x86_64 -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector',\n    optimize='-Os',\n    cppflags='-g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector'\n    ccversion='', gccversion='4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='cc -mmacosx-version-min=10.10.5', ldflags ='-arch i386 -arch x86_64 -fstack-protector'\n    libpth=/usr/lib /usr/local/lib\n    libs= \n    perllibs=\n    libc=, so=dylib, useshrplib=true, libperl=libperl.dylib\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=' '\n    cccdlflags=' ', lddlflags='-arch i386 -arch x86_64 -bundle -undefined dynamic_lookup -fstack-protector'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS\n                        PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD\n                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP\n                        PERL_PRESERVE_IVUV PERL_SAWAMPERSAND USE_64_BIT_ALL\n                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES\n                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE\n                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF\n                        USE_REENTRANT_API\n  Locally applied patches:\n    /Library/Perl/Updates/ comes before system perl directories\n    installprivlib and installarchlib points to the Updates directory\n  Built under darwin\n  Compiled at Jul  9 2015 01:30:43\n  %ENV:\n    PERL5LIB=\"/Users/jrg/perl5/lib/perl5:\"\n    PERL_LOCAL_LIB_ROOT=\":/Users/jrg/perl5\"\n    PERL_MB_OPT=\"--install_base /Users/jrg/perl5\"\n    PERL_MM_OPT=\"INSTALL_BASE=/Users/jrg/perl5\"\n  @INC:\n    /Users/jrg/perl5/lib/perl5/darwin-thread-multi-2level\n    /Users/jrg/perl5/lib/perl5\n    /Library/Perl/5.18/darwin-thread-multi-2level\n    /Library/Perl/5.18\n    /Network/Library/Perl/5.18/darwin-thread-multi-2level\n    /Network/Library/Perl/5.18\n    /Library/Perl/Updates/5.18.2/darwin-thread-multi-2level\n    /Library/Perl/Updates/5.18.2\n    /System/Library/Perl/5.18/darwin-thread-multi-2level\n    /System/Library/Perl/5.18\n    /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level\n    /System/Library/Perl/Extras/5.18\n    .\n</pre>\n\n<p>Any help and suggestions would be greatly appreciated!</p>\n"}, {"tags": ["linux", "perl", "mutt"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1439788487, "post_id": 32037755, "comment_id": 51986386, "body": "<a href=\"http://search.cpan.org/~rjbs/Email-MIME-1.934/lib/Email/MIME.pm\" rel=\"nofollow noreferrer\">Email::MIME</a> or for simple use <a href=\"http://search.cpan.org/~rjbs/Email-Stuffer-0.012/lib/Email/Stuffer.pm\" rel=\"nofollow noreferrer\">Email::Stuffer</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "is_accepted": false, "score": 0, "last_activity_date": 1439769669, "last_edit_date": 1495541848, "creation_date": 1439769669, "answer_id": 32041123, "question_id": 32037755, "link": "https://stackoverflow.com/questions/32037755/perl-how-to-send-local-mail/32041123#32041123", "title": "Perl - How to send local mail?", "body": "<ol>\n<li>there are a few ways to send command line emails in Linux: <a href=\"https://stackoverflow.com/questions/17359/how-do-i-send-a-file-as-an-email-attachment-using-linux-command-line\">How do I send a file as an email attachment using Linux command line?</a></li>\n<li>why is the <code>--</code> in your command?  that maybe confusing <code>mutt</code>.</li>\n<li><a href=\"https://unix.stackexchange.com/questions/108916/automatically-attach-a-file-to-a-mail-with-mutt\">https://unix.stackexchange.com/questions/108916/automatically-attach-a-file-to-a-mail-with-mutt</a> has a few more suggestions for sending mail with <code>mutt</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1439787298, "post_id": 32041574, "comment_id": 51986128, "body": "FYI, <a href=\"https://metacpan.org/pod/MIME::Lite#WAIT\" rel=\"nofollow noreferrer\">WAIT! MIME::Lite is not recommended by its current maintainer</a>. <code>There are a number of alternatives, like Email::MIME or MIME::Entity and Email::Sender, which you should probably use instead. MIME::Lite continues to accrue weird bug reports, and it is not receiving a large amount of refactoring due to the availability of better alternatives. Please consider using something else.</code>"}, {"owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1439790859, "post_id": 32041574, "comment_id": 51987144, "body": "@serenesat Hmm. Had not noticed that. It certainly works pretty well in the use cases I have, but YMMV"}], "tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": false, "score": 0, "last_activity_date": 1439776182, "last_edit_date": 1439776182, "creation_date": 1439774692, "answer_id": 32041574, "question_id": 32037755, "link": "https://stackoverflow.com/questions/32037755/perl-how-to-send-local-mail/32041574#32041574", "title": "Perl - How to send local mail?", "body": "<p>I prefer to use <a href=\"https://metacpan.org/pod/MIME::Lite\" rel=\"nofollow\">MIME::Lite</a> to send emails, rather than spawning an external command, which avoids the problems you are having. MIME::Lite is able to handle sending emails with attachments.</p>\n\n<p>Here is a quick example:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse MIME::Lite;\n\nmy $msg = MIME::Lite-&gt;new(\n    To      =&gt; 'foo.bar@foobar.com',\n    Subject =&gt; 'Test message with attachments',\n    Type    =&gt; 'multipart/mixed'\n);\n\n$msg-&gt;attach(\n    Type     =&gt; 'TEXT',\n    Data     =&gt; \"Here's the file you wanted\"\n);\n$msg-&gt;attach(\n    Type     =&gt; 'image/png',\n    Path     =&gt; 'somefile.png',\n    Filename =&gt; 'somefile.png',\n    Disposition =&gt; 'attachment'\n);\n\n$msg-&gt;send();\n</code></pre>\n\n<p>This would send a message containing a small amount of text and a single attachment.</p>\n\n<p>There are a lot more examples given in the POD for <a href=\"https://metacpan.org/pod/MIME::Lite\" rel=\"nofollow\">MIME::Lite</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 2856027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ccae1203ca0542bcb733c50c36fe703f?s=128&d=identicon&r=PG&f=1", "display_name": "Anden120", "link": "https://stackoverflow.com/users/2856027/anden120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 861, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439776182, "creation_date": 1439744710, "question_id": 32037755, "link": "https://stackoverflow.com/questions/32037755/perl-how-to-send-local-mail", "title": "Perl - How to send local mail?", "body": "<p>I would like to integrate the following terminal command into a <strong>Perl</strong> script.</p>\n\n<p>Terminal command:  </p>\n\n<pre><code>mutt -s \"User Monitoring\" -a \"/home/mipa/Documents/System_Monitoring/protocol_name.csv\" -- mipa@localhost.localdomain\n</code></pre>\n\n<p>The command sends local mail containing a file attachment to a user on the same system.</p>\n\n<p>I have a small problem with the command though. It does seem to require more user interaction than just the command listed here. The command requires the user to follow a menu to confirm the values and hit the \"y\" key to send.</p>\n\n<p>My question here is two-folded. Is there a similar mail command that does not require user interaction and works by just following a single command with predefined flags? And how would I integrate this command into a <strong>Perl</strong> script where I would be able to choose the file name, and the receiving user followed by issuing the command?</p>\n\n<p>Any guidance regarding a possible solution is highly appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1439733801, "post_id": 32035894, "comment_id": 51972654, "body": "Yes, but I&#39;m reluctant to tell you about it because I&#39;m afraid you&#39;re going to use it for evil."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439733829, "post_id": 32035894, "comment_id": 51972663, "body": "I certainly will. Please?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439733891, "post_id": 32035894, "comment_id": 51972682, "body": "I am using Moose nowadays for OO-related, but I do not want to redo this."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439733921, "post_id": 32035894, "comment_id": 51972693, "body": "What possible use could you have for that kind of check?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439734131, "post_id": 32035894, "comment_id": 51972780, "body": "some methods of children call SUPER methods that need attributes that are not set. So in new, I want to check if there is a parent, so I can let it set those needed attributes if necessary. Perhaps I have misunderstood something, but that was my first idea to approach this instead of having to edit all parent or child classes that potentially cause this problem. But it is unnecessary if there is no parent."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439734223, "post_id": 32035894, "comment_id": 51972814, "body": "Whose <code>new</code> are we talking about? If you&#39;re writing a class, you already know if you&#39;re inheriting from anything."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439734229, "post_id": 32035894, "comment_id": 51972820, "body": "Also, now that I have thought of it, I want to know how to do it, I guess..."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439734275, "post_id": 32035894, "comment_id": 51972837, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/87092/discussion-between-bytepusher-and-melpomene\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1439795009, "post_id": 32040683, "comment_id": 51988868, "body": "well, in the end, I thought I wanted to, then discovered it was somewhat unnecessary, but could not let go of trying to figure out how to do it. Thank you for answering, I have now solved it another way, but still am glad to know."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1439765709, "last_edit_date": 1439765709, "creation_date": 1439765349, "answer_id": 32040683, "question_id": 32035894, "link": "https://stackoverflow.com/questions/32035894/perl-oo-with-use-parent-checking-if-class-has-a-parent/32040683#32040683", "title": "Perl: oo with use parent - checking if class has a parent", "body": "<p>I can't picture why you'd ever want to know this, but it's possible using the following:</p>\n\n<pre><code>use mro;\nmy $inherits = @{ mro::get_linear_isa($class) } &gt; 1;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $isa = do { no strict 'refs'; \\@{ $class . '::ISA' } };\nmy $inherits = @$isa;\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li>All classes inherit from UNIVERSAL, but that's ignored unless a class explicitly declares it inherits from it.</li>\n<li>These methods don't care how the inheritance was declared (<code>use parent</code> or some other means).</li>\n</ol>\n"}], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 32040683, "answer_count": 1, "score": 2, "last_activity_date": 1439765709, "creation_date": 1439733550, "question_id": 32035894, "link": "https://stackoverflow.com/questions/32035894/perl-oo-with-use-parent-checking-if-class-has-a-parent", "title": "Perl: oo with use parent - checking if class has a parent", "body": "<p>I have some Perl objects which were built some time ago not with Moose,\nbut with bless, inheritance is implemented using the 'parent' pragma.</p>\n\n<p>Now I would like to know whether there is a way to check whether a certain class has used 'parent' or not.</p>\n\n<p>e.g. if I have two classes</p>\n\n<pre><code>package Animal;\nsub new { \n   my $class = shift;\n   return bless {}, $class;\n}\n1;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>package Cat;\nuse parent 'Animal';\n\nsub new { \n   my $class = shift;\n   return bless {}, $class;\n}\n1;\n</code></pre>\n\n<p>would there be some check I could make to determine that the 'Cat' class \nhas a parent ( do not care which, but not itself ), and Animal does not, given a $foo which is either of them?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5287, "user_id": 4607417, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tLqOt.png?s=128&g=1", "display_name": "m.cekiera", "link": "https://stackoverflow.com/users/4607417/m-cekiera"}, "edited": false, "score": 0, "creation_date": 1439728579, "post_id": 32035108, "comment_id": 51971162, "body": "try with help of sites like <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a> so you can look is it working or not with every added character"}, {"owner": {"reputation": 5287, "user_id": 4607417, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tLqOt.png?s=128&g=1", "display_name": "m.cekiera", "link": "https://stackoverflow.com/users/4607417/m-cekiera"}, "edited": false, "score": 1, "creation_date": 1439729696, "post_id": 32035108, "comment_id": 51971467, "body": "most examples of valid input have more that 1 space on the end of line, so are these line valid or not?"}], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1439730244, "post_id": 32035181, "comment_id": 51971621, "body": "You should add an end_of_line anchor."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1439730344, "post_id": 32035181, "comment_id": 51971638, "body": "@CasimiretHippolyte, the start anchor is good enough. In order to add <code>$</code> I would also need to add the final part (the one after <code>User_Message</code>), which OP hasn&#39;t yet defined a pattern for."}, {"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1439730461, "post_id": 32035181, "comment_id": 51971677, "body": "This is the sort of thing I&#39;m looking for, but in my code it&#39;s not matching anything.  If I take off the User_Message bit it matches even bad lines."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1439730537, "post_id": 32035181, "comment_id": 51971691, "body": "@ndn: if you read carefully the description you can see at the end <code>(0 or 1 space)(new line)</code>."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 1, "creation_date": 1439730746, "post_id": 32035181, "comment_id": 51971747, "body": "@PeteG: instead of trying to count the exact number of spaces, use <code>\\h+</code> or <code>[ \\t]+</code> to figure them."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1439730808, "post_id": 32035181, "comment_id": 51971762, "body": "@PeteG, you can see it working <a href=\"https://code.hackerearth.com/84dd13i\" rel=\"nofollow noreferrer\">here</a>. There must be a problem somewhere else in your code."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1439730898, "post_id": 32035181, "comment_id": 51971781, "body": "@CasimiretHippolyte, if you read carefully, you will see that I have implemented the <i>User Message</i> part as only <code>User_Message</code> instead of <code>User_Message B02</code>."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1439731065, "post_id": 32035181, "comment_id": 51971828, "body": "You are right, I didn&#39;t notice the description was wrong."}, {"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1439732961, "post_id": 32035181, "comment_id": 51972374, "body": "Still struggling.  I hope this <a href=\"https://code.hackerearth.com/e0a594U?key=9fdc1a419c9d8b653a28d8f81e5e0e18\" rel=\"nofollow noreferrer\">link</a> helps?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1439733208, "post_id": 32035181, "comment_id": 51972461, "body": "@PeteG, <a href=\"https://code.hackerearth.com/e0a594U\" rel=\"nofollow noreferrer\">here</a> I commented the file reading related part of your code. You can see that it is still working. Therefore, I guess there is a problem with the contents of your file."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1439733419, "post_id": 32035181, "comment_id": 51972526, "body": "@PeteG, actually I saw that in the code you gave you showed an example of good line where the sum of (4 to 9 letters or numbers) and (1 to 6 spaces) wasn&#39;t 10 characters. You could try the first version of the regex instead if that is the case."}, {"owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "edited": false, "score": 0, "creation_date": 1439735065, "post_id": 32035181, "comment_id": 51973092, "body": "Done!  I was having issues with the number of spaces just as @ndn pointed out."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1439729979, "last_edit_date": 1439729979, "creation_date": 1439728759, "answer_id": 32035181, "question_id": 32035108, "link": "https://stackoverflow.com/questions/32035108/regex-to-match-valid-lines-only/32035181#32035181", "title": "Regex to match valid lines only", "body": "<p>Lets translate this exactly:</p>\n\n<blockquote>\n  <p>(2 digits)(forward slash)(2 digits)(forward slash)(2 digits)(3 spaces)(2 digits)(colon)(2 digits)(3 spaces)(4 to 9 letters or numbers)(1 to 6 spaces)(4 digits)(4 spaces)(\"User_Message string\")(0 or 1 space)(new line)</p>\n</blockquote>\n\n<pre><code>/^\\d{2}\\/\\d{2}\\/\\d{2} {3}\\d{2}:\\d{2} {3}\\w{4,9} {1,6}\\d{4} {4}E?User_Message ?/\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/cP2dU4/1\" rel=\"nofollow\">See it in action</a></p>\n\n<p>The only line that it matches right now and you said you didn't want to is</p>\n\n<pre><code>17/04/14   10:04   134TP   0869    EUser_Message 01\n</code></pre>\n\n<p>which I can't see why shouldn't match by the rules you described.</p>\n\n<p>I am guessing that it was because you wanted the <em>(4 to 9 letters or numbers)</em> and <em>(1 to 6 spaces)</em> to always add up to <em>10</em> characters. We can ensure this with a <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">positive lookahead</a> - <code>(?=.{10}\\b\\d)</code></p>\n\n<p>Giving us the final:</p>\n\n<pre><code>/^\\d{2}\\/\\d{2}\\/\\d{2} {3}\\d{2}:\\d{2} {3}(?=.{10}\\b\\d)\\w{4,9} {1,6}\\d{4} {4}E?User_Message ?/\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/cP2dU4/2\" rel=\"nofollow\">See it in action</a></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439734224, "post_id": 32035184, "comment_id": 51972815, "body": "<i>&quot;The exact numbers of spaces between columns is not relevant&quot;</i> This looks like it may be fixed-width fields, and since we don&#39;t know how the data is being corrupted, incorrect spacing of the fields may reflect problems in the non-space data"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1439735015, "last_edit_date": 1439735015, "creation_date": 1439728776, "answer_id": 32035184, "question_id": 32035108, "link": "https://stackoverflow.com/questions/32035108/regex-to-match-valid-lines-only/32035184#32035184", "title": "Regex to match valid lines only", "body": "<p>The exact numbers of spaces between columns may or may not be relevant. If this is supposed to be fixed-width field data, then you should use <a href=\"https://metacpan.org/pod/perlfunc#unpack-TEMPLATE-EXPR\" rel=\"nofollow\">unpack</a>.</p>\n\n<p>A valid log line must have six (or maybe five) fields consisting of:</p>\n\n<ol>\n<li>A date</li>\n<li>A time</li>\n<li>Some kind of identifier</li>\n<li>Another identifier</li>\n<li>Message identifier</li>\n<li>Another identifier</li>\n</ol>\n\n<p>With unpack, you can extract the fields using <code>unpack 'A11 A9 A11 A9 A20', $line</code>. You can still validate those fields individually.</p>\n\n<p>Instead of messing around with <em>one regex pattern to rule them all</em>, you should extract each field and validate it separately.</p>\n\n<p>Here is a self-contained example. It assumes space-separated data for field extraction, but it would work almost the same way for fixed width field data just by replacing <code>split</code> with <code>unpack</code> and figuring out the correct number and names of the fields.</p>\n\n<p>I have left a few validators for you to fill in given uncertainties in my understanding of your problem description.</p>\n\n<p>There are many more ways to do this kind of thing such as <a href=\"https://metacpan.org/pod/Params::Validate\" rel=\"nofollow\">Params::Validate</a> as well as just building a large regex pattern from constituent pieces. But, it seems to me you have space-separated columns, and sometimes the cognitive burden of six separate small checks is lighter than one regex.</p>\n\n<p>Also, this make it easier to add further code to check if the date really is a valid date, if it falls in certain ranges etc without crowding out the actual flow of the program.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\npackage My::LogEntry;\n\nuse Carp qw( croak );\nuse Moo;\n\nmy @fields = qw( date time field3 field4 msg_type field6 );\nhas $_ =&gt; (is =&gt; 'ro', trigger =&gt; 1) for @fields;\n\nsub _trigger_date {\n    my $self = shift;\n    my $date = shift;\n    unless ($date =~ m{\\A [0-9]{2} / [0-9]{2} / [0-9]{2} \\z}x) {\n        croak \"Invalid date '$date'\";\n    }\n    return;\n}\n\nsub _trigger_time {\n    my $self = shift;\n    my $time = shift;\n    unless ($time =~ m{\\A [0-9]{2} : [0-9]{2} \\z}x) {\n        croak \"Invalid time '$time'\";\n    }\n    return;\n}\n\nsub _trigger_field3 {}\n\nsub _trigger_field4 {}\n\nsub _trigger_msg_type {\n    my $self = shift;\n    my $msg_type = shift;\n    unless ($msg_type =~ m{ \\A E? User_Message \\z }x) {\n        croak \"Invalid message type '$msg_type'\";\n    }\n    return;\n}\n\nsub _trigger_field6 {}\n\nsub do_something { }\n\nsub BUILDARGS {\n    my $class = shift;\n    unless (@fields == @_) {\n        croak sprintf(\n            '%s constructor called with %d args (%s), need %d',\n            $class,\n            scalar @_,\n            join(',', @_),\n            scalar @fields\n        );\n    }\n    my $ret = {\n        map +( $fields[$_] =&gt; $_[$_] ), 0 .. $#_\n    };\n}\n\nwhile (my $line = &lt;DATA&gt;) {\n    my @entry = split ' ', $line;\n    my $entry;\n    eval { $entry = My::LogEntry-&gt;new(@entry) };\n    if ( $entry ) {\n       $entry-&gt;do_something;\n    }\n    else {\n       warn \"$.: $@\";\n    }\n}\n\n__DATA__\n21/05/14   09:17   134U      0993    EUser_Message 01\n21/05/14   11:07   134UD     0994    User_Message B02\n21/05/14   11:47   134P      0995    User_Message UOD1\n21/05/14   12:41   134B18    0996    User_Message UOD2\n21/05/14   14:00   134B      0997    User_Message T02\n21/05/14   14:22   134NV     0998    User_Message D02\n21/05/14   15:25   121U      0999    EUser_Message 03\n21/05/14   16:38   121UD     1000    EUser_Message 04\n22/05/14   07:39   134TP     1001    EUser_Message 08\n22/05/14   09:55   134P      1002    EUser_Message 13\n22/05/14   10:46   134B      1003    EUser_Message 14\n22/05/14   12:00   134NonVac 1004    User_Message UOD3\nUser_Message UOD1\n19/08/14   11:46   1388    EUser_Message 01\n03/07/13   0645    03/07/13   0646    03/07/13   0647    03/07/13   15:36   134U    0648\n0862    17/04/14   0866    17/04/14   0867    17/04/14   0868    17/04/14\n17/04/14   10:04   134TP   0869    EUser_Message 01\n21/05/14   14:02   134B    0982\n0983    22/05/14   22/05/14   12:48   134U    0984    User_Message UOD1\n1015    03/06/14\n11/07/13   08:12   134B    0011\n11/07/13   12:39   134B    0012\n11/07/13   13:53   134B    0013\n12/07/13   08:01   134P    0014\n12/07/13   08:29   134B    0015\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1439734398, "creation_date": 1439734398, "answer_id": 32036037, "question_id": 32035108, "link": "https://stackoverflow.com/questions/32035108/regex-to-match-valid-lines-only/32036037#32036037", "title": "Regex to match valid lines only", "body": "<p>I wouldn't single-regex this - regular expressions are powerful, but they're ... well, rather prone to being unintelligible and vulnerable to edge cases. </p>\n\n<p>I would approach this by first <code>split</code>ing your line into fields, and validating each of them. One particularly useful trick is you can use <code>eval</code> and <code>Time::Piece-&gt;strptime</code> to validate a date quite effectively. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Time::Piece; \n\nwhile ( &lt;DATA&gt; ) {\n   my ( $date, $time, $somecode, $othercode, $msgtype, $msgcode ) = split;\n\n   if ( $date =~ m,^\\d+/\\d+/\\d+$, \n   and $time =~ m,^\\d+:\\d+$, \n   and eval { Time::Piece-&gt;strptime(\"$date $time\", \"%d/%m/%y %H:%M\") } ) {\n       print \"Date is ok\\n\";\n   }\n   else { print \"$date $time is invalid\\n\"; next; }\n\n   if ( $somecode =~ m/^\\w+\\d+$/ ) {  \n       print \"somecode is ok\\n\";\n   }\n   else {\n       print \"Error with somecode $somecode\\n\";\n   }\n\n   if ( $othercode =~ m,^\\d{4}$, ) {\n       print \"othercode is ok\\n\";\n   }\n   else { \n        print \"Error with $othercode \\n\";\n        next;\n   }\n\n   if ( $msgtype =~ m/User_Message/ \n   and $msgcode =~ m/\\w+/ ) {\n       print \"$msgtype $msgcode ok\\n\";\n   }\n   else {\n       print \"Error with $msgtype $msgcode\\n\"; \n       next;\n   }\n\n   print \"Line: $. is ok\\n$_\";\n}\n\n__DATA__\n21/05/14   09:17   134U      0993    EUser_Message 01    \n21/05/14   11:07   134UD     0994    User_Message B02   \n21/05/14   11:47   134P      0995    User_Message UOD1   \n21/05/14   12:41   134B18    0996    User_Message UOD2   \n21/05/14   14:00   134B      0997    User_Message T02   \n21/05/14   14:22   134NV     0998    User_Message D02   \n21/05/14   15:25   121U      0999    EUser_Message 03   \n21/05/14   16:38   121UD     1000    EUser_Message 04   \n22/05/14   07:39   134TP     1001    EUser_Message 08   \n22/05/14   09:55   134P      1002    EUser_Message 13  \n22/05/14   10:46   134B      1003    EUser_Message 14  \n22/05/14   12:00   134NonVac 1004    User_Message UOD3\nUser_Message UOD1     \n19/08/14   11:46   1388    EUser_Message 01    \n03/07/13   0645    03/07/13   0646    03/07/13   0647    03/07/13   15:36   134U    0648      \n0862    17/04/14   0866    17/04/14   0867    17/04/14   0868    17/04/14  \n17/04/14   10:04   134TP   0869    EUser_Message 01      \n21/05/14   14:02   134B    0982    \n0983    22/05/14   22/05/14   12:48   134U    0984    User_Message UOD1  \n1015    03/06/14   \n11/07/13   08:12   134B    0011    \n11/07/13   12:39   134B    0012   \n11/07/13   13:53   134B    0013    \n12/07/13   08:01   134P    0014    \n12/07/13   08:29   134B    0015\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1439741084, "last_edit_date": 1495535199, "creation_date": 1439736174, "answer_id": 32036311, "question_id": 32035108, "link": "https://stackoverflow.com/questions/32035108/regex-to-match-valid-lines-only/32036311#32036311", "title": "Regex to match valid lines only", "body": "<p>I would take the same approach as <a href=\"https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr\">Sinan \u00dcn\u00fcr</a> and split the data into fields first before verifying each one of them</p>\n\n<p>It looks very much like your data has fixed-width fields, which are conveniently parsed using <a href=\"http://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\"><code>unpack</code></a> with multiple <code>An</code> templates, where <code>n</code> is the number of characters ocupied by the field. This template extracts the given number of characters and trims any trailing whitespace, so will correctly process your data if given the size of each column from the start of one field to the start of the next</p>\n\n<p>This program keeps a separate array <code>@validation</code> of regex patterns that will match only valid contents of the corresponding fields. Each record is first split into fields using an appropriate <code>unpack</code> pattern (the trailing <code>A*</code> simply soaks up <em>everything else</em>). It is then verified by first assuming validity with <code>$valid = 1</code> and then comparing each field with its corresponding validation pattern; the loop terminates either when all fields have been validated or an invalid field has been found</p>\n\n<p>I have used all of the data you provide in your question: the twelve valid lines followed by the thirteen invalid ones. The output correctly shows just the initial twelve lines</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse v5.14;    # For regex /a modifier\nuse re '/a';  # Regex patterns match only ASCII characters\n\nmy $template = 'A11 A8 A10 A8 A*';\n\nmy @validation = (\n    qr{^\\d\\d/\\d\\d/\\d\\d$},\n    qr{^\\d\\d:\\d\\d$},\n    qr{^[0-9A-Z]+$}i,\n    qr{^\\d+$},\n    qr{^E?User_Message\\s+\\w+$},\n);\n\nmy ($total, $n) = (0, 0);\n\nwhile ( &lt;DATA&gt; ) {\n\n    ++$total;\n\n    my @fields = unpack $template, $_;\n\n    my $valid = 1;\n    for my $i ( 0 .. $#fields ) {\n        $valid = $fields[$i] =~ $validation[$i];\n        last if not $valid;\n    }\n\n    if ( $valid ) {\n        ++$n;\n        print;\n    }\n}\n\n\nprint \"\\n$n valid records of $total\\n\";\n\n__DATA__\n21/05/14   09:17   134U      0993    EUser_Message 01\n21/05/14   11:07   134UD     0994    User_Message B02\n21/05/14   11:47   134P      0995    User_Message UOD1\n21/05/14   12:41   134B18    0996    User_Message UOD2\n21/05/14   14:00   134B      0997    User_Message T02\n21/05/14   14:22   134NV     0998    User_Message D02\n21/05/14   15:25   121U      0999    EUser_Message 03\n21/05/14   16:38   121UD     1000    EUser_Message 04\n22/05/14   07:39   134TP     1001    EUser_Message 08\n22/05/14   09:55   134P      1002    EUser_Message 13\n22/05/14   10:46   134B      1003    EUser_Message 14\n22/05/14   12:00   134NonVac 1004    User_Message UOD3\nUser_Message UOD1\n19/08/14   11:46   1388    EUser_Message 01\n03/07/13   0645    03/07/13   0646    03/07/13   0647    03/07/13   15:36   134U    0648\n0862    17/04/14   0866    17/04/14   0867    17/04/14   0868    17/04/14\n17/04/14   10:04   134TP   0869    EUser_Message 01\n21/05/14   14:02   134B    0982\n0983    22/05/14   22/05/14   12:48   134U    0984    User_Message UOD1\n1015    03/06/14\n11/07/13   08:12   134B    0011\n11/07/13   12:39   134B    0012\n11/07/13   13:53   134B    0013\n12/07/13   08:01   134P    0014\n12/07/13   08:29   134B    0015\n</code></pre>\n\n<h2>output</h2>\n\n<pre><code>21/05/14   09:17   134U      0993    EUser_Message 01\n21/05/14   11:07   134UD     0994    User_Message B02\n21/05/14   11:47   134P      0995    User_Message UOD1\n21/05/14   12:41   134B18    0996    User_Message UOD2\n21/05/14   14:00   134B      0997    User_Message T02\n21/05/14   14:22   134NV     0998    User_Message D02\n21/05/14   15:25   121U      0999    EUser_Message 03\n21/05/14   16:38   121UD     1000    EUser_Message 04\n22/05/14   07:39   134TP     1001    EUser_Message 08\n22/05/14   09:55   134P      1002    EUser_Message 13\n22/05/14   10:46   134B      1003    EUser_Message 14\n22/05/14   12:00   134NonVac 1004    User_Message UOD3\n\n12 valid records of 25\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Note that, if you're able and willing to install the <a href=\"https://metacpan.org/pod/Regexp::Common\" rel=\"nofollow noreferrer\"><code>Regexp::Common</code></a> and <a href=\"https://metacpan.org/pod/Regexp::Common::time\" rel=\"nofollow noreferrer\"><code>Regexp::Common::time</code></a> modules, then you can make the patterns for the date and time fields even more selective like this</p>\n\n<pre><code>my @validation = (\n    qr{^$RE{time}{tf}{ -pat =&gt; 'd/m/yy' }$},\n    qr{^$RE{time}{tf}{ -pat =&gt; 'h:m' }$},\n    qr{^[0-9A-Z]+$}i,\n    qr{^\\d+$},\n    qr{^E?User_Message\\s+\\w+$},\n);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5207891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTXux.jpg?s=128&g=1", "display_name": "Pete G", "link": "https://stackoverflow.com/users/5207891/pete-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 32036037, "answer_count": 4, "score": 0, "last_activity_date": 1439741084, "creation_date": 1439728278, "last_edit_date": 1439730435, "question_id": 32035108, "link": "https://stackoverflow.com/questions/32035108/regex-to-match-valid-lines-only", "title": "Regex to match valid lines only", "body": "<p>I have written a script that summarises very long log files.  The one little problem I have is that the logs are prone to having corrupt entries and as such my summary sometimes contains some of these bad lines.\nMy script produces an intermediate temporary file which I need to pick out only the valid lines from it.</p>\n\n<p>The following lines are valid and I need to match lines such as these:</p>\n\n<pre>21/05/14   09:17   134U      0993    EUser_Message 01    \n21/05/14   11:07   134UD     0994    User_Message B02   \n21/05/14   11:47   134P      0995    User_Message UOD1   \n21/05/14   12:41   134B18    0996    User_Message UOD2   \n21/05/14   14:00   134B      0997    User_Message T02   \n21/05/14   14:22   134NV     0998    User_Message D02   \n21/05/14   15:25   121U      0999    EUser_Message 03   \n21/05/14   16:38   121UD     1000    EUser_Message 04   \n22/05/14   07:39   134TP     1001    EUser_Message 08   \n22/05/14   09:55   134P      1002    EUser_Message 13  \n22/05/14   10:46   134B      1003    EUser_Message 14  \n22/05/14   12:00   134NonVac 1004    User_Message UOD3</pre>\n\n<p>These are valid because they contain the string <em>\"User_Message\"</em> and they are formed quite specifically in a certain way:</p>\n\n<blockquote>\n  <p>(2 digits)(forward slash)(2 digits)(forward slash)(2 digits)(3 spaces)(2 digits)(colon)(2 digits)(3 spaces)(4 to 9 letters or numbers)(1 to 6 spaces)(4 digits)(4 spaces)(\"User_Message string\")(0 or 1 space)(new line)</p>\n</blockquote>\n\n<p>Examples of entries that need to be ignored would be:</p>\n\n<pre>User_Message UOD1     \n19/08/14   11:46   1388    EUser_Message 01    \n03/07/13   0645    03/07/13   0646    03/07/13   0647    03/07/13   15:36   134U    0648      \n0862    17/04/14   0866    17/04/14   0867    17/04/14   0868    17/04/14  \n17/04/14   10:04   134TP   0869    EUser_Message 01      \n21/05/14   14:02   134B    0982    \n0983    22/05/14   22/05/14   12:48   134U    0984    User_Message UOD1  \n1015    03/06/14   \n11/07/13   08:12   134B    0011    \n11/07/13   12:39   134B    0012   \n11/07/13   13:53   134B    0013    \n12/07/13   08:01   134P    0014    \n12/07/13   08:29   134B    0015</pre> \n\n<p>My section of code that's attempting to match valid lines is:  </p>\n\n<pre><code>if ($line =~ /\\d{2}\\/\\d{2}\\/\\d{2}\\s{3}\\d{2}:d{2}\\s{3}\\d{4}\\s{4}.*\\n/) {  \n</code></pre>\n\n<p>I would really appreciate it if someone could show me how to correctly build a regex that would match only the valid lines of text shown above.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 1, "creation_date": 1439717364, "post_id": 32033251, "comment_id": 51968282, "body": "There is an extra twist. In the example above the third and forth line would print $fh and $bar to the currently selected filehandle. On the other hand &quot;print FH&quot; would print $_ to the real filehandle FH."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1439714556, "last_edit_date": 1439714556, "creation_date": 1439714211, "answer_id": 32033251, "question_id": 32033003, "link": "https://stackoverflow.com/questions/32033003/function-parameter-separator-in-perl/32033251#32033251", "title": "Function parameter separator in Perl?", "body": "<p>In that example, because <code>print</code> takes a list of arguments and has a default. So you need to tell the difference between printing a scalar, and printing <em>to</em> a filehandle.</p>\n\n<p>The interpreter can tell the difference between:  </p>\n\n<pre><code>print $fh \"some scalar text\";\nprint $bar, \"set to a value \",\"\\n\";\nprint $fh;\nprint $bar;\n</code></pre>\n\n<p>But this is rather a special case - most functions don't work like that. I normally suggest for print, that surrounding the filehandle arg in braces differentiates. </p>\n\n<p>You can look at prototypes as a way to get perl to do things with parameters, but I'd also normally suggest that makes for less clear code </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1439747754, "post_id": 32033540, "comment_id": 51977235, "body": "Unfortunately, this is wrong. <code>print</code> is an operator with custom parsing rules. <code>print HANDLE LIST</code> is not an indirect method call. It will disregard HANDLE&#39;s class. You can verify this using <code>perl -MScalar::Util=blessed -E&#39;sub IO::File::print { die } say blessed(*STDOUT{IO}); print STDOUT &quot;foo\\n&quot;; STDOUT-&gt;print(&quot;foo\\n&quot;);&#39;</code>"}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": true, "score": 10, "last_activity_date": 1439801039, "last_edit_date": 1439801039, "creation_date": 1439716899, "answer_id": 32033540, "question_id": 32033003, "link": "https://stackoverflow.com/questions/32033003/function-parameter-separator-in-perl/32033540#32033540", "title": "Function parameter separator in Perl?", "body": "<p><code>print</code> is special builtin Perl function with special syntax rules. <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">Documentation</a> lists four possible invocations:</p>\n\n<pre><code>print FILEHANDLE LIST\nprint FILEHANDLE\nprint LIST\nprint\n</code></pre>\n\n<p>So while in general function arguments are separated by comma (<code>,</code>), this is an exception that disambiguates print destination from contents to be printed. Another function that exhibit this behavior is <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a>.</p>\n\n<p>Other feature that shares this syntax is called <a href=\"http://perldoc.perl.org/perlobj.html#Invoking-Class-Methods\" rel=\"nofollow noreferrer\">\"Indirect Object Notation\"</a>. The expression in form:</p>\n\n<pre><code>function object arg1, arg2, \u2026 angn\n#              ^- no comma here\n</code></pre>\n\n<p>Is equivalent to:</p>\n\n<pre><code>object-&gt;function(arg1, arg2, \u2026 argn)\n</code></pre>\n\n<p>So that following statement pairs are equivalent:</p>\n\n<pre><code>$foo = new Bar;\n$foo = Bar-&gt;new;\n</code></pre>\n\n<p>The Indirect Object Notation has <a href=\"http://modernperlbooks.com/mt/2009/08/the-problems-with-indirect-object-notation.html\" rel=\"nofollow noreferrer\">several problems</a> and generally should be avoided, save for few well-known idioms such as <code>print F \"something\"</code></p>\n"}], "owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "accepted_answer_id": 32033540, "answer_count": 2, "score": 4, "last_activity_date": 1439801039, "creation_date": 1439711781, "last_edit_date": 1439789716, "question_id": 32033003, "link": "https://stackoverflow.com/questions/32033003/function-parameter-separator-in-perl", "title": "Function parameter separator in Perl?", "body": "<p>Function parameters are usually separated by comma(<code>,</code>), but seems also by space in some cases, like <code>print FILEHANDLE 'string'</code>. Why are both of such separators necessary?</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 5, "creation_date": 1439674830, "post_id": 32029623, "comment_id": 51960733, "body": "... you&#39;re already in Perl. Why are you calling out to awk?   Perl can do everything awk can, in about as much code.."}, {"owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1439674912, "post_id": 32029623, "comment_id": 51960754, "body": "I&#39;m a perl novice. Not sure how to do this simply."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1439675211, "post_id": 32029623, "comment_id": 51960822, "body": "First convert each of the <code>awk</code> output commands to Perl, then incorporate the result into the <code>while</code> loop.."}, {"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 0, "creation_date": 1439841508, "post_id": 32029623, "comment_id": 52016158, "body": "Use a2p to convert your awk program to perl."}], "answers": [{"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 4, "last_activity_date": 1439676721, "creation_date": 1439676721, "answer_id": 32029896, "question_id": 32029623, "link": "https://stackoverflow.com/questions/32029623/call-awk-within-perl-script/32029896#32029896", "title": "call awk within perl script", "body": "<p>Here's one Perl solution to your problem as I understand it.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse autodie;  # avoid a bunch of `or die` clauses\n\n# First, load the criteria for splitting into the output files\nmy %files = ();\n\n# extra block level wrapping the $ranges file access; file\n# is automatically closed at the end of the block\n{ \n  open my $ranges, '&lt;', 'sim.snps';\n  while (&lt;$ranges&gt;)  {\n    (undef, my $key, undef, my ($min, $max)) = split;\n    $files{$key} = { min =&gt; $min, max =&gt; $max };\n\n    # go ahead and open the output file while we're here\n    open $files{$file}{fh}, '&gt;', \"$key.legend\";\n  }\n} # $ranges filehandle closed here\n\n# another file-access block\n{\n  # open the data file\n  open my $data, '&lt;', '../phasing_and_imputation/1000GP_Phase3_chr1.legend';\n\n  while (&lt;$data&gt;) {\n    # split the data into fields\n    my @f = split;\n\n    # loop over the output files and write the relevant parts of this line\n    # to the ones that want it\n    while (my ($file, $data) = each %files) {\n      if ($f[1] &gt;= $data-&gt;{min}  &amp;&amp; $f[1] &lt;= $data-&gt;{max}) {\n        print { $data-&gt;{fh} } join(' ', @f[0..3]), \"\\n\";\n      }\n    }\n  }\n} # data file closed here\n\n# close the output files\nforeach my $data (values %files) {\n  close $data-&gt;{fh};\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439676721, "creation_date": 1439674735, "last_edit_date": 1439675013, "question_id": 32029623, "link": "https://stackoverflow.com/questions/32029623/call-awk-within-perl-script", "title": "call awk within perl script", "body": "<p>I would like to input a file and call awk using elements from each row of the file, one awk command per line. Right now I'm using a perl script to create an array and the print the awk command line I want to run. However, I'm sure there is a better way to actually run the awk command within the perl script. </p>\n\n<p>File looks like:</p>\n\n<pre><code>1 rs78641116 8374297 3374297 13374297\n1 rs34269918 8424984 3424984 13424984\n1 rs533123 29141155 24141155 34141155\n1 rs1498232 30433951 25433951 35433951\n</code></pre>\n\n<p>Code below:</p>\n\n<pre><code>#! perl -w\n\nopen( my $file, \"&lt;\", \"sim.snps\" ) or die $!;\nwhile (&lt;$file&gt;) {\n    my @snps=split;\n    print \"awk \\'\\$2&gt;=$snps[3]\\&amp;\\&amp;\\$2&lt;=$snps[4]\\{print\\$1,\\$2,\\$3,\\$4\\}\\' \\..\\/phasing_and_imputation\\/1000GP_Phase3_chr$snps[0].legend &gt; $snps[1]\\.legend\\n\"\n    }\n</code></pre>\n\n<p>Output awk commands:</p>\n\n<pre><code>awk '$2&gt;=3374297&amp;&amp;$2&lt;=13374297{print$1,$2,$3,$4}' ../phasing_and_imputation/1000GP_Phase3_chr1.legend &gt; rs78641116.legend\nawk '$2&gt;=3424984&amp;&amp;$2&lt;=13424984{print$1,$2,$3,$4}' ../phasing_and_imputation/1000GP_Phase3_chr1.legend &gt; rs34269918.legend\nawk '$2&gt;=24141155&amp;&amp;$2&lt;=34141155{print$1,$2,$3,$4}' ../phasing_and_imputation/1000GP_Phase3_chr1.legend &gt; rs533123.legend\nawk '$2&gt;=25433951&amp;&amp;$2&lt;=35433951{print$1,$2,$3,$4}' ../phasing_and_imputation/1000GP_Phase3_chr1.legend &gt; rs1498232.legend\n</code></pre>\n\n<p>Does anyone have a solution to run awk instead of printing the awk commands?</p>\n"}, {"tags": ["regex", "perl", "email", "tld"], "comments": [{"owner": {"reputation": 2841, "user_id": 1974671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Un4Se.jpg?s=128&g=1", "display_name": "d0nut", "link": "https://stackoverflow.com/users/1974671/d0nut"}, "edited": false, "score": 1, "creation_date": 1439674538, "post_id": 32029527, "comment_id": 51960661, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/9267389/regex-extract-domain-name-and-tld\">regex - extract domain name and TLD</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439675160, "post_id": 32029527, "comment_id": 51960808, "body": "You don&#39;t have a specific problem other than your lack of knowledge of Perl. You shouldn&#39;t learn the language incrementally by relying on the good will of people on Stack Overflow, and I believe what you need is a <a href=\"https://www.perl.org/learn.html\" rel=\"nofollow noreferrer\">Perl tutorial</a>"}, {"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1439682276, "post_id": 32029527, "comment_id": 51962472, "body": "You could do a hacky solution with <code>@.*\\.(.*)</code> This would store everything after the last <code>.</code> into <code>$1</code> or <code>\\1</code>. However for foreign domains this wouldn&#39;t work or rather you&#39;d also want the second level domain I suspect (e.g. co.uk)."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1439684345, "post_id": 32030012, "comment_id": 51962794, "body": "This answer is so wrong in so many ways ... First, what do you think <code>$Mail</code> contains after <code>$Mail = &quot;mail@mail.com&quot;</code>? Second, do you realize <code>.</code> is special in a regex pattern? Third, what if <code>$Mail</code> contains <code>acommander@example.org</code>? What is the point of posting stuff like this?"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1439686011, "post_id": 32030012, "comment_id": 51962998, "body": "@Sinan&#220;n&#252;r Thank you for your rant, and for publicly displaying your lack of social skills on Stack Overflow. The answer works, provides self-contained examples, and will solve the OP&#39;s <i>posted problem</i>, and is not intended to solve every imaginable edge case. However, the answer has been updated to anchor the regex since I agree that it <code>&#47;.com&#47;</code> would be overbroad."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1439689038, "post_id": 32030012, "comment_id": 51963418, "body": "Should the pattern match succeed if <code>$Mail</code> ends with <code>&quot;.com\\n&quot;</code>? Also, do you realize that <code>.</code> is special in a regex pattern?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1446064589, "post_id": 32030012, "comment_id": 54593476, "body": "Among the problems Sinan notes, I advise against the end of line anchor, <code>$</code>, since that can now change behavior with default regex flags. Use the <code>\\z</code> if you want end-of-string."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": -2, "last_activity_date": 1439688316, "last_edit_date": 1439688316, "creation_date": 1439677631, "answer_id": 32030012, "question_id": 32029527, "link": "https://stackoverflow.com/questions/32029527/perl-regex-e-mail-tld/32030012#32030012", "title": "Perl Regex E-Mail TLD", "body": "<h2>Naive Regex Solutions</h2>\n\n<p>The following solutions will solve your problem as posted, but are not intended to address every possible edge case. Parsing email addresses in a comprehensive way is non-trivial, and requires a parser such as <a href=\"https://metacpan.org/pod/Email::Address\" rel=\"nofollow\">Email::Address</a> if you want to handle the full complexity of the RFCs.</p>\n\n<h3>Printing Your TLD from a String</h3>\n\n<p>Since you already know the string you want to print on success (e.g. \".com\"), you don't actually need the <em>result</em> of your regular expression match; you can print the string stored in <em>$Tld</em> when the match is true using a post-statement condition. For example:</p>\n\n<pre><code>$Mail = 'mail@mail.com';\n$Tld  = '.com';\n\nprint \"$Tld\\n\" if $Mail =~ /${Tld}$/;\n</code></pre>\n\n<p>This will correctly print:</p>\n\n<blockquote>\n  <p>.com</p>\n</blockquote>\n\n<h3>Printing the Match</h3>\n\n<p>If you really want the full match, there are a number of ways to do it. One way would be to use the special <em>$&amp;</em> variable:</p>\n\n<pre><code>$Mail = 'mail@mail.com';\n$Tld  = '.com';\n\nif ($Mail =~ /${Tld}$/) {\n    print \"$&amp;\\n\";\n}\n</code></pre>\n\n<p>This will also correctly print:</p>\n\n<blockquote>\n  <p>.com</p>\n</blockquote>\n\n<h2>Partitioning the String</h2>\n\n<p>All of the previous examples will solve your problem as posted, but the best <em>generic</em> solution short of a parser is really to partition the TLD, and treat the last segment of the domain as an unvalidated TLD. Ruby has the super-handy <a href=\"http://ruby-doc.org/core-2.2.2/String.html#method-i-rpartition\" rel=\"nofollow\">String#rpartition</a> method, but I'm unaware of a similar function in Perl. However, you can use an anchored match to accomplish much the same thing. For example:</p>\n\n<pre><code>$Mail = 'mail@mail.com';\n\n$Mail =~ /(\\.[[:alpha:]]+)$/;\nprint \"$1\\n\";\n</code></pre>\n\n<p>If you need to validate the TLD against an expected value such as <code>.com</code>, you can compare it to a string or variable. For example:</p>\n\n<pre><code>$Mail = 'mail@mail.com';\n$Tld  = '.com';\n\n$Mail =~ /(\\.[[:alpha:]]+)$/;\nprint \"$1\\n\" if $1 eq $Tld\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1439686197, "post_id": 32030706, "comment_id": 51963021, "body": "While I agree with your first sentence, your answer <i>creates</i> needless complexity not required by the original question. Your approach would require an exhaustive list of TLDs, which is overkill for this particular problem."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1446064290, "post_id": 32030706, "comment_id": 54593318, "body": "I&#39;ve mostly found that when people say &quot;not required&quot;, they end up spending their weekends and holidays fighting the fires that later causes. You don&#39;t need an exhaustive list: just one comprehensive enough for the problem. Even then, what&#39;s that? Five minutes of googling?"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1446121570, "last_edit_date": 1446121570, "creation_date": 1439684917, "answer_id": 32030706, "question_id": 32029527, "link": "https://stackoverflow.com/questions/32029527/perl-regex-e-mail-tld/32030706#32030706", "title": "Perl Regex E-Mail TLD", "body": "<p>You should use <a href=\"https://metacpan.org/pod/Email::Address\" rel=\"nofollow\">Email::Address</a> to parse email addresses.</p>\n\n<p>To be able to extract a TLD with certainty requires a list of what you consider to be TLDs. For example, do <code>.co.uk</code>, or <code>.com.tr</code> count? Or, do you just want the last string of non-dot characters?</p>\n\n<p>If you restrict your attention to 2 - 3 character TLDs such as <code>.co</code>, <code>.com</code>, <code>.io</code>, <code>.net</code>, <code>.org</code>, <code>.us</code> etc, you can do <code>my ($tld) = ($email =~ /[.] ([a-z]{2,3}) \\z/x);</code> and then check with <code>if ($tld and ($tld eq 'com')) { ... }</code> etc, but you really want a good list of acceptable strings that can be TLDs: <a href=\"http://p3rl.org/Net::Domain::TLD\" rel=\"nofollow\">Net::Domain::TLD</a>, <a href=\"http://p3rl.org/Mozilla::PublicSuffix\" rel=\"nofollow\">Mozilla::PublicSuffix</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5231143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c9079f4907366570e210eb03220605?s=128&d=identicon&r=PG&f=1", "display_name": "MrWein", "link": "https://stackoverflow.com/users/5231143/mrwein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 2, "score": -7, "last_activity_date": 1446121570, "creation_date": 1439674080, "question_id": 32029527, "link": "https://stackoverflow.com/questions/32029527/perl-regex-e-mail-tld", "title": "Perl Regex E-Mail TLD", "body": "<p>i have this code:</p>\n\n<pre><code>    if ( $Mail =~ /$Tld{$_}/ ) {\n        $TldFound = 1;      \n    }\n</code></pre>\n\n<p>The variable $Mail has for example the info \"mail@mail.com\". The variable $Tld has the info \".com\". How can i cut the variable $Mail that only the tld .com will remain?</p>\n"}, {"tags": ["perl", "recursion", "data-structures", "tree"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439673522, "post_id": 32029393, "comment_id": 51960439, "body": "Possibly related: <a href=\"http://stackoverflow.com/questions/31108400/perl-two-column-flat-file-to-a-complex-unordered-list-tree\" title=\"perl two column flat file to a complex unordered list tree\">stackoverflow.com/questions/31108400/&hellip;</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1439674746, "post_id": 32029393, "comment_id": 51960716, "body": "If the first hash had level 1 instead of level 7, how would it then look like?"}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439675811, "post_id": 32029393, "comment_id": 51960981, "body": "It would look the same.  The level itself is the overall level within the greater tree.  So, 13 is level 7 of the overall tree, but level 1 of this group."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439676590, "post_id": 32029393, "comment_id": 51961178, "body": "@melpomene I think it&#39;s only distantly related as the solution of that question takes DATA and creates an array of hashes.  I have an array of hashes that I need to make into a HOH."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439721625, "post_id": 32029393, "comment_id": 51969332, "body": "@Mel 1) You don&#39;t have an array of hashes, you have data (a list of records represented as a JSON string). The other question had a list of records represented as lines with tab-separated fields. 2) What do you mean, &quot;creates an array of hashes&quot;? I don&#39;t see an AoH there."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439740555, "post_id": 32029393, "comment_id": 51974960, "body": "@melpomene  Right above the JSON data I wrote  &quot;This is a sample array of hashes (shown in JSON):&quot;  Each JSON line is an array element, each element is a HASH (key,value pair)... which I just happen to show you via a JSON representation.  I have that data in an AoH, and need to get it into an HoH that I can then use JSON.pm to create the needed data format."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439740873, "post_id": 32029393, "comment_id": 51975075, "body": "@melpomene 2) From that example:   &quot;push @{$underlings_of{$mgr}}, $emp;&quot;  Creating an AoH in the while loop."}, {"owner": {"reputation": 84, "user_id": 5194894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc98a9f9281d5f1406740ba7d931947?s=128&d=identicon&r=PG&f=1", "display_name": "jan_kowalski_314", "link": "https://stackoverflow.com/users/5194894/jan-kowalski-314"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1439750811, "post_id": 32029393, "comment_id": 51978135, "body": "@Mel what does placement_id mean? Is it important?"}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "reply_to_user": {"reputation": 84, "user_id": 5194894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc98a9f9281d5f1406740ba7d931947?s=128&d=identicon&r=PG&f=1", "display_name": "jan_kowalski_314", "link": "https://stackoverflow.com/users/5194894/jan-kowalski-314"}, "edited": false, "score": 0, "creation_date": 1439750888, "post_id": 32029393, "comment_id": 51978159, "body": "@jan_kowalski_314 Yes, see update.  &quot;position_id is a node in the tree. placement_id is the parent&#39;s position_id (adjacency referential tree).&quot;"}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439858275, "post_id": 32029393, "comment_id": 52022106, "body": "The following question while more generic than mine is essentially asking the same question.  I think the final solution I presented answers his question nicely.  <a href=\"http://stackoverflow.com/questions/4884260/generate-json-from-nested-sets-perl-sql-jquery\" title=\"generate json from nested sets perl sql jquery\">stackoverflow.com/questions/4884260/&hellip;</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439965028, "post_id": 32029393, "comment_id": 52071122, "body": "@Mel That&#39;s a hash of arrrays, not an array of hashes."}, {"owner": {"reputation": 69864, "user_id": 444991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c57f597182ae324d8eb33b935f7d38af?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/444991/matt"}, "edited": false, "score": 0, "creation_date": 1439975055, "post_id": 32029393, "comment_id": 52076864, "body": "@RedSands: In future, please do not edit the solution into your question; either accept the answer which provided that solution, or post your own answer to your question."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "reply_to_user": {"reputation": 69864, "user_id": 444991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c57f597182ae324d8eb33b935f7d38af?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/444991/matt"}, "edited": false, "score": 0, "creation_date": 1439990160, "post_id": 32029393, "comment_id": 52087617, "body": "@matt Valid point.  Since you can see that I am some what new to stackoverflow, would you help me understand?  The solution presented was close but not 100%.  It started out with some bugs, had no explanation, and wasn&#39;t complete.  So, I posted adapted versions within edits to solicit a better answer.  In the end I accepted his answer, but added a few additional things that I believe would be very helpful should anyone else want to read this question and answer in the future.  To be clear: are you saying that I should do that as my own answer?  If so, okay... but, that seems odd. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439741061, "post_id": 32030246, "comment_id": 51975132, "body": "Walk me through your approach please  You provide no explanation.  Not sure who down voted your answer, or why exactly.  However, your answer isn&#39;t helpful and seems to have issues, but I&#39;ll let you explain."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439748521, "post_id": 32030246, "comment_id": 51977483, "body": "Each line is self-contained, so I&#39;m not sure what there is to explain. Which part do you need help with?"}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439750120, "post_id": 32030246, "comment_id": 51977941, "body": "The &#39;children&#39; key isn&#39;t being created to have a full nested HOH.  See Edit."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439753653, "post_id": 32030246, "comment_id": 51978925, "body": "I think a while needs to be part of the solution as there will be even potentially thousands of levels within the tree.  Thoughts?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 1, "creation_date": 1439760048, "post_id": 32030246, "comment_id": 51980678, "body": "@Mel, You dumped <code>\\%children_by_parent_name</code> when you should have dumped <code>$roots</code>. I thought it was obvious since it&#39;s the only variable that exists at the end of the code, but I made it even more obvious."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439761471, "post_id": 32030246, "comment_id": 51981004, "body": "Tested. Fixed two bugs."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439771680, "post_id": 32030246, "comment_id": 51983020, "body": "Those fixes solved my issue.  We do have other attributes as well, including level.  How might those be added ad additional attributes in the JSON?  like {&quot;name&quot;: &quot;13&quot;, &quot;level&quot;: 7, &quot;children&quot;: []},"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439771896, "post_id": 32030246, "comment_id": 51983054, "body": "i don&#39;t know why you keep saying JSON since your question has nothing to do with JSON. If you want to add stuff to the records, add stuff to the records."}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439773583, "post_id": 32030246, "comment_id": 51983342, "body": "My questions has everything to do with JSON.  From the start, I needed to get data into a format I could pass to JSON.pm.  Thanks for your assistance.  My question was &quot;How might those records be added?&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439774061, "post_id": 32030246, "comment_id": 51983449, "body": "No, your question is about getting the data into a specific format. The fact that you will pass that data structure to <code>encode_json</code> is irrelevant. // Re: &#39;My question was &quot;How might those records be added?&quot;&#39; huh? What records? Added to what?"}, {"owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439821387, "post_id": 32030246, "comment_id": 52004687, "body": "A satisfactory answer would have also included going directly from the data I had... to a JSON format.  REREAD my questions  &quot;essentially an unknown set of nodes has to be converted to JSON&quot;.  JSON was ALWAYS the point.  To simply narrow in on what you felt was important shows that you were less interested in what my question ACTUAL was (via also changing the title... to something 100% incorrect)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 0, "creation_date": 1439822984, "post_id": 32030246, "comment_id": 52005758, "body": "Not so. It doesn&#39;t change the answer at all whether you save the data structure using JSON, YAML, XML or something else.  As such, it&#39;s irrelevant and off-topic that you save the data structure using JSON, YAML, XML or something else. Contrary to what you claim, I didn&#39;t decide this; you did when you said which structure you wanted to end up with. Learn to keep your questions limited to problem at hand. Speaking of the title, I made a typo. Fixing it.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "edited": false, "score": 1, "creation_date": 1439823264, "post_id": 32030246, "comment_id": 52005957, "body": "Are you saying you also have problem encoding a data structure using JSON? If so, that&#39;s a separate problem, and should be a separate question. Show your effort, and clearly state what problem you are having."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1439761584, "last_edit_date": 1439761584, "creation_date": 1439679998, "answer_id": 32030246, "question_id": 32029393, "link": "https://stackoverflow.com/questions/32029393/convert-a-flat-datastructure-into-a-tree/32030246#32030246", "title": "Convert a flat datastructure into a tree", "body": "<pre><code>my $data = [\n   {  position_id =&gt; 123, placement_id =&gt; undef },\n   {  position_id =&gt; 456, placement_id =&gt; 123 },\n   {  position_id =&gt; 789, placement_id =&gt; 123 },\n   # ...\n];\n\nmy $roots;\n{\n   my %recs_by_name;\n   my %children_by_parent_name;\n   for my $row (@$data) {\n      my $name        = $row-&gt;{position_id};\n      my $parent_name = $row-&gt;{placement_id};\n\n      my $rec = {\n         name =&gt; $name,\n      };\n\n      push @{ $children_by_parent_name{$parent_name // 'root'} }, $rec;\n      $recs_by_name{$name} = $rec;\n   }\n\n   $roots = delete($children_by_parent_name{root}) || [];\n\n   for my $name (keys(%children_by_parent_name)) {\n      my $children = $children_by_parent_name{$name};\n      if ( my $rec = $recs_by_name{$name} ) {\n         $rec-&gt;{children} = $children;\n      } else {\n         die(\"Parent $name doesn't exist.\\n\");\n         push @$roots, @$children;\n      }\n   }\n}\n\nprint(Dumper($roots));\n</code></pre>\n\n<p>Tested.</p>\n\n<p>You appear to have the depth of each node available to you (<code>level</code>). Simpler code could be used if your data was sorted by increasing depths.</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "is_accepted": false, "score": 0, "last_activity_date": 1439998455, "last_edit_date": 1439998455, "creation_date": 1439991985, "answer_id": 32097365, "question_id": 32029393, "link": "https://stackoverflow.com/questions/32029393/convert-a-flat-datastructure-into-a-tree/32097365#32097365", "title": "Convert a flat datastructure into a tree", "body": "<p>While it was @ikegami who ultimately answered the question that led to the solution.  I believe the following adaptation adds 4 important elements/clarifications I found helpful, and thought others reading this question and answer would also find useful.</p>\n\n<p>1- Clear addition of all key,value pairs from the originating AoH to the resulting HOH.  See while loop.</p>\n\n<p>2- A Child node counter.</p>\n\n<p>3- Inclusion and use of the encode_json function from <a href=\"http://search.cpan.org/~makamaka/JSON-2.90/lib/JSON.pm\" rel=\"nofollow\">JSON</a></p>\n\n<p>4- The result is also an Array with a Hash as the first element.  Newbies (like me) might find the explicit @{$roots}[0] passed to encode_json as helpful.</p>\n\n<p>At first I had a similar adapted solution posted as an UPDATE within my question, but was admonished that it was bad etiquette and instructed to post an answer.</p>\n\n<p>@ikegami's deserves the credit for the core of the solution.</p>\n\n<pre><code>sub get_jsonTree {\n    my ($array_of_hashes_ref) = @_;\n\n    my $roots;\n    my %recs_by_name;\n    my %children_by_parent_name;\n    my %count;\n    for my $row (@$array_of_hashes_ref) {\n        my $name        = $row-&gt;{position_id};\n        my $parent_name = $row-&gt;{placement_id};\n\n        my $rec = {\n            name =&gt; $name,\n        };\n\n        ## Added to loop through all key,value pairs and add them to $rec\n        while ( my ($key, $value) = each(%$row) ) {\n            $rec-&gt;{$key} = $value;\n        }\n\n        ##Added To Count Child Nodes\n        $count{$parent_name} = 0 if (!$count{$parent_name});        \n        $rec-&gt;{'child_count'} = $count{$parent_name};\n        $count{$parent_name}++;\n\n        push @{ $children_by_parent_name{$parent_name // 'root'} }, $rec;\n        $recs_by_name{$name} = $rec;\n    }\n\n    $roots = delete($children_by_parent_name{root}) || [];\n\n    for my $name (keys(%children_by_parent_name)) {\n        my $children = $children_by_parent_name{$name};\n        if ( my $rec = $recs_by_name{$name} ) {\n            $rec-&gt;{children} = $children;\n        } else {\n            $util{'test'} .=  \"Parent $name doesn't exist.\\n&lt;BR&gt;\";\n            push @$roots, @$children;\n        }\n    }\n\n    use JSON;\n    my $json_str = encode_json(@{$roots}[0]);\n\n    return $json_str;\n}\n\nmy $array_of_hashes_ref = [\n    {  position_id =&gt; 123, placement_id =&gt; undef },\n    {  position_id =&gt; 456, placement_id =&gt; 123 },\n    {  position_id =&gt; 789, placement_id =&gt; 123 },\n    # ...\n];\n\nmy $json_str = &amp;get_jsonTree($array_of_hashes_ref);\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 3249240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v5tdF.jpg?s=128&g=1", "display_name": "RedSands", "link": "https://stackoverflow.com/users/3249240/redsands"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 32030246, "answer_count": 2, "score": 1, "last_activity_date": 1439998455, "creation_date": 1439673133, "last_edit_date": 1439990663, "question_id": 32029393, "link": "https://stackoverflow.com/questions/32029393/convert-a-flat-datastructure-into-a-tree", "title": "Convert a flat datastructure into a tree", "body": "<p>I have an array of hashes.  Each element in the array is a node in a hierarchical tree and has referential data for who the parent is.  I will have thousands and hundreds of thousands of nodes in the tree... essentially an unknown set of nodes has to be converted to JSON (shown below) for use with <a href=\"http://bl.ocks.org/robschmuecker/7880033\" rel=\"nofollow\">http://bl.ocks.org/robschmuecker/7880033</a></p>\n\n<p>UPDATE:  position_id is a node in the heretical tree.  placement_id is the parent's position_id (adjacency referential tree).</p>\n\n<p>UPDATE: Here's the full AoH Data::Dumper result with Nested Set and Adjacency result from a modified version of <a href=\"http://search.cpan.org/~djcp/DBIx-Tree-NestedSet-0.16/lib/DBIx/Tree/NestedSet.pm\" rel=\"nofollow\">DBIx::Tree::NestedSet</a> (custom).</p>\n\n<pre><code>$VAR1 = [\n          {\n            'lft' =&gt; '673',\n            'id' =&gt; '109',\n            'date_created' =&gt; '2015-08-15',\n            'level' =&gt; '7',\n            'user_id' =&gt; '13',\n            'placement_id' =&gt; '11',\n            'position_id' =&gt; '13',\n            'status' =&gt; '1',\n            'structure_id' =&gt; '1',\n            'rght' =&gt; '684'\n          },\n          {\n            'placement_id' =&gt; '13',\n            'position_id' =&gt; '22',\n            'status' =&gt; '1',\n            'structure_id' =&gt; '1',\n            'rght' =&gt; '679',\n            'lft' =&gt; '674',\n            'date_created' =&gt; '2015-08-15',\n            'id' =&gt; '116',\n            'level' =&gt; '8',\n            'user_id' =&gt; '22'\n          },\n          {\n            'user_id' =&gt; '101',\n            'level' =&gt; '9',\n            'id' =&gt; '200',\n            'date_created' =&gt; '2015-08-15',\n            'lft' =&gt; '675',\n            'rght' =&gt; '676',\n            'structure_id' =&gt; '1',\n            'status' =&gt; '1',\n            'position_id' =&gt; '101',\n            'placement_id' =&gt; '22'\n          },\n          {\n            'date_created' =&gt; '2015-08-15',\n            'id' =&gt; '201',\n            'level' =&gt; '9',\n            'user_id' =&gt; '374',\n            'lft' =&gt; '677',\n            'structure_id' =&gt; '1',\n            'rght' =&gt; '678',\n            'placement_id' =&gt; '22',\n            'position_id' =&gt; '374',\n            'status' =&gt; '1'\n          },\n          {\n            'lft' =&gt; '680',\n            'user_id' =&gt; '95',\n            'level' =&gt; '8',\n            'id' =&gt; '117',\n            'date_created' =&gt; '2015-08-15',\n            'status' =&gt; '1',\n            'position_id' =&gt; '95',\n            'placement_id' =&gt; '13',\n            'rght' =&gt; '681',\n            'structure_id' =&gt; '1'\n          }\n        ];\n</code></pre>\n\n<p>THIS IS THE GOAL, For this example I need to end up with:</p>\n\n<pre><code>{\n    \"name\": \"13\",\n    \"children\": [\n        {\n            \"name\": \"22\",\n            \"children\": [\n                {\n                    \"name\": \"101\"\n                },\n                {\n                    \"name\": \"374\"\n                }\n            ]\n        },\n        {\n            \"name\": \"95\"\n        }\n    ]\n}\n</code></pre>\n\n<p>You can also see the format I am trying to arrive at here (minus size): \n<a href=\"http://bl.ocks.org/robschmuecker/7880033#flare.json\" rel=\"nofollow\">http://bl.ocks.org/robschmuecker/7880033#flare.json</a></p>\n\n<p>My failed approach(es) included various attempts at looping through the array of hashes to create a recursive Hash of Hashes that can then be used with the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow\">JSON Perl module</a> to create the actual JSON I need.</p>\n"}, {"tags": ["perl", "bless"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439670981, "post_id": 32029042, "comment_id": 51959728, "body": "I can&#39;t imagine why you would want to do this. As the OP of the original question, presumably you have a scenario in mind? If so then it would be useful if you explained it"}, {"owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439671190, "post_id": 32029042, "comment_id": 51959781, "body": "@Borodin, I opened this question in a separate thread to avoid XYProblem. I need to understand from design perspective why it should be avoided (Should it?). Not asking about a specific scenario. I need to know in general why should I avoid its usage ? i.e. performance issue ? or design issue ? or another thing which I am missing ? ... etc. It would be great if you may elaborate more on this topic in responses. Thanks :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1439671627, "post_id": 32029042, "comment_id": 51959895, "body": "@AshrafBashir Design issue, because the language doesn&#39;t even support it (using C code to mess with the interpreter&#39;s data structures doesn&#39;t count)."}], "answers": [{"tags": [], "owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "is_accepted": false, "score": 4, "last_activity_date": 1439671615, "last_edit_date": 1439671615, "creation_date": 1439670767, "answer_id": 32029077, "question_id": 32029042, "link": "https://stackoverflow.com/questions/32029042/is-unblessing-perl-objects-a-dreadful-design/32029077#32029077", "title": "Is unblessing perl objects a dreadful design?", "body": "<p>Needing <code>unbless</code> certainly raises eyebrows. Since you can still use the object as the original data structure, it's almost never needed.</p>\n\n<p>Modules that are picky about receiving unblessed hash references vs objects tend to have options to not be so picky, for example allow_blessed and convert_blessed in JSON. </p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1439672526, "post_id": 32029276, "comment_id": 51960158, "body": "&quot;assign <code>undef</code> to the object&quot; is nonsense. You can&#39;t assign <code>undef</code> to a hash or array, only to a scalar. And even then it won&#39;t affect method calls, because having an object that is a scalar contain <code>undef</code> is perfectly fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439672838, "post_id": 32029276, "comment_id": 51960251, "body": "@melpomene: As you know, a Perl object is always a <i>reference to blessed data</i>. There is no way to call an object&#39;s method without a reference, so I think it is clear that what I meant was to assign <code>undef</code> to the scalar variable holding the reference"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1439673015, "post_id": 32029276, "comment_id": 51960305, "body": "I&#39;d say an object is the blessed data. <code>bless \\%foo; (\\%foo)-&gt;bar()</code> works fine. You can&#39;t assign <code>undef</code> because there&#39;s no &quot;the scalar variable&quot; there. Even in a more conventional setting, you normally have many different variables storing a reference to the object (several of them called <code>$self</code> if you&#39;re currently in a method call of that object). :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1439673695, "post_id": 32029276, "comment_id": 51960473, "body": "@melpomene: You may well say that, but I think you&#39;d be different from the crowd. I am sure you don&#39;t think <code>(\\%foo)-&gt;bar</code> is a common construction, and I am also sure you know what I mean by <i>&quot;assign <code>undef</code> to the object &quot;</i>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1439673899, "post_id": 32029276, "comment_id": 51960520, "body": "&quot;I am also sure you know what I mean by <i>&quot;assign undef to the object &quot;</i>&quot; - no, I don&#39;t. If an &quot;object&quot; is the blessed thing, it&#39;s not a scalar; if an &quot;object&quot; is a reference to a blessed thing, there is no &quot;<i>the</i> object&quot; because there can be 0 or more of it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1439674813, "post_id": 32029276, "comment_id": 51960729, "body": "@melpomene: In a Perl world where <code>my $object = Class-&gt;new</code> makes sense, so does <code>$object = undef</code>. I don&#39;t believe you&#39;re as na&#239;ve as you pretend"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1439678144, "post_id": 32029276, "comment_id": 51961581, "body": "Re &quot;If you&#39;re relying on Perl to give you this fatal error then it&#39;s just as easy to assign undef to the object which gives rise to this fatal error instead&quot;  No, that&#39;s not true. <code>perl -MData::Structure::Util=unbless -e&#39;sub m { } $o1 = $o2 = $o = bless({}); undef($o1); $o-&gt;m; unbless($o2); $o-&gt;m;&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439680408, "post_id": 32029276, "comment_id": 51962078, "body": "@ikegami: So can I put you down as recommending <code>unbless</code> as a useful design construct?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439680679, "post_id": 32029276, "comment_id": 51962136, "body": "@Borodin, No, I think unblessing and reblessing are awful practices."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1439720907, "post_id": 32029276, "comment_id": 51969155, "body": "@Borodin Sure, <code>$object = undef</code> makes sense and I never argued against that. I&#39;m saying <code>$object</code> is not <i>the</i> object (singular and unique) because the same reference may be stored in dozens of other places (making them all objects, too). I don&#39;t believe you&#39;re as na&#239;ve as you pretend."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1439672263, "creation_date": 1439672263, "answer_id": 32029276, "question_id": 32029042, "link": "https://stackoverflow.com/questions/32029042/is-unblessing-perl-objects-a-dreadful-design/32029276#32029276", "title": "Is unblessing perl objects a dreadful design?", "body": "<p>This is an idle and silly question. You have no purpose in mind for <code>unbless</code> but have chosen it at random from an obscure CPAN module to ask why it reflects bad design. You may as well ask how to <em>undeclare</em> a variable that has been declared with <code>my</code>. That is also quite possible in XS code, but I hope it's clearly rather stupid?</p>\n\n<p>The issue I have with <code>unbless</code> is that you have created a data structure -- anything from a scalar variable or a file handle to a nested hash or array -- and called <code>bless</code> so that Perl know how to resolve method calls on that object</p>\n\n<p>So now you want to <code>unbless</code> it. That will leave the data intact, and the main difference will be that any method calls will now result in a fatal error</p>\n\n<pre><code>Can't call method ... on unblessed reference\n</code></pre>\n\n<p>So what was your <code>unbless</code> for? If you're relying on Perl to give you this fatal error then it's just as easy to assign <code>undef</code> to the object which gives rise to this fatal error instead</p>\n\n<pre><code>Can't call method ... on an undefined value\n</code></pre>\n\n<p>but has the advantage that your data structure may be destroyed so that the memory is released</p>\n\n<p>If you want something more solid then, because references may be passed to multiple sections of code, <code>unbless</code> would be an example of <a href=\"https://en.wikipedia.org/wiki/Action_at_a_distance_%28computer_programming%29\" rel=\"nofollow\"><strong><em>action at a distance</em></strong></a> which is discredited by many more people than myself</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439721094, "post_id": 32029806, "comment_id": 51969207, "body": "I&#39;d be very, very careful with that. If you execute any code between <code>unbless</code> and re-<code>bless</code>, there&#39;s a chance it will explode and never reach <code>bless</code> again, permanently &quot;sabotaging&quot; your object."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 2, "creation_date": 1439729232, "post_id": 32029806, "comment_id": 51971342, "body": "Why not use <code>no overloading &#39;%{}&#39;; return $self-&gt;{bar}</code> instead of monkey around with bless/unbless? <a href=\"https://metacpan.org/pod/overloading\" rel=\"nofollow noreferrer\">overloading</a>."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1439758925, "post_id": 32029806, "comment_id": 51980393, "body": "@mob, yes you are right! I said <code>no overloading</code>, not <code>no overload</code>, read the documentation for <a href=\"https://metacpan.org/pod/overloading\" rel=\"nofollow noreferrer\">overloading</a>!"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1439816389, "post_id": 32029806, "comment_id": 52001353, "body": "Thanks @charsen, didn&#39;t know about <code>overloading</code>. It has been available since v5.10.1."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1439816554, "last_edit_date": 1439816554, "creation_date": 1439676053, "answer_id": 32029806, "question_id": 32029042, "link": "https://stackoverflow.com/questions/32029042/is-unblessing-perl-objects-a-dreadful-design/32029806#32029806", "title": "Is unblessing perl objects a dreadful design?", "body": "<p>One application is an object implemented as a hash reference and you also wish to \n<a href=\"http://metacpan.org/pod/overload\" rel=\"nofollow\">overload</a> the <code>%{}</code> dereferencing operator [EDIT: and you also want to support perls older than v5.10.1 -- otherwise you should just use <a href=\"http://metacpan.org/pod/overloading\" rel=\"nofollow\"><code>no overloading</code></a>.]</p>\n\n<pre><code>package Foo;\nuse overload '+' =&gt; sub { $_[0]-&gt;get + $_[1] },\n             ...,\n             '%{}' =&gt; sub { return { foo =&gt; \"bar\", this =&gt; $_[0] } },\n             ...;\n</code></pre>\n\n<p>Now for any <code>$foo</code> that has type <code>Foo</code>, trying to access an element like <code>$foo-&gt;{$key}</code> will invoke your overloaded <code>%{}</code> method, and your access will fail.</p>\n\n<p>The workaround is to change your object's type temporarily while you access your object's member, and change it back when you are done. You could do this by unblessing your object, but it is more often done (and more easily done) by blessing it to a garbage value.</p>\n\n<pre><code>sub Foo::bar {   # access 'bar' member of Foo object\n  my $self = shift;\n  # $self-&gt;{bar} will invoke Foo::{'%{}'}, and we don't wan't that\n\n  my $ref = ref $self;\n  unbless($self);    #   or  bless $self, 'Not::An::Object::Name'\n  # now $self-&gt;{bar} is accessible\n\n  my $value = $self-&gt;{bar};\n  bless $self, $ref;        # restore object type\n  return $value;\n}\n</code></pre>\n\n<p>Another example is given in the section on <a href=\"https://metacpan.org/pod/overload#Two-face-References\" rel=\"nofollow\">\"Two-face-References\" in <code>overload</code></a></p>\n\n<hr>\n\n<p>I use this pattern <a href=\"https://metacpan.org/source/MOB/Forks-Super-0.77/lib/Forks/Super/LazyEval/BackgroundScalar.pm#L231\" rel=\"nofollow\">here</a>, for another example.</p>\n"}], "owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1439816554, "creation_date": 1439670453, "last_edit_date": 1495540682, "question_id": 32029042, "link": "https://stackoverflow.com/questions/32029042/is-unblessing-perl-objects-a-dreadful-design", "title": "Is unblessing perl objects a dreadful design?", "body": "<p>Is <a href=\"https://metacpan.org/pod/release/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm#unbless-ref\" rel=\"nofollow noreferrer\">unblessing</a> Perl objects means having a dreadful design ?\n<br/>If yes, can any one explain this to me ?\n<br/>BTW, Here's <a href=\"https://stackoverflow.com/questions/32028898/unbless-implementation-in-perl?noredirect=1#comment51959356_32028898\">the discussion</a> which fired this question, check comments on the question</p>\n"}, {"tags": ["perl", "bless"], "comments": [{"owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "edited": false, "score": 2, "creation_date": 1439669569, "post_id": 32028898, "comment_id": 51959304, "body": "I&#39;ve been a Perl developer for twenty years and have never heard of <code>unbless</code>..."}, {"owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "reply_to_user": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "edited": false, "score": 0, "creation_date": 1439669625, "post_id": 32028898, "comment_id": 51959325, "body": "Changed &#39;any&#39; to &#39;many&#39; :) ... So how do you unbless objects ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1439669706, "post_id": 32028898, "comment_id": 51959356, "body": "<b><i>&quot;As any Perl developer knows, unbless is used to remove the blessing from objects&quot;</i></b> No. <code>unbless</code> is a function exported by <code>Data::Structure::Util</code>. It isn&#39;t a core module and I have never seen it used. If you need to <code>unbless</code> an object then your design is dreadful. What is it yuou&#39;re trying to do?"}, {"owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439670029, "post_id": 32028898, "comment_id": 51959464, "body": "@Borodin, my final destination is to have a JSON object as a return from some webservices, I have objects, and I need to unbless them as hashes then convert them to JSON objects. But I was just wondering from where unbless_xs came in the implementation of the module ?"}, {"owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "edited": false, "score": 0, "creation_date": 1439670085, "post_id": 32028898, "comment_id": 51959483, "body": "quote: &quot;If you need to unbless an object then your design is dreadful. &quot; .... wondering why ?"}, {"owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439670495, "post_id": 32028898, "comment_id": 51959596, "body": "@Borodin another question is opened to discuss your quote in details: <a href=\"http://stackoverflow.com/questions/32029042/is-unblessing-perl-objects-a-dreadful-design\" title=\"is unblessing perl objects a dreadful design\">stackoverflow.com/questions/32029042/&hellip;</a>"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1439684385, "post_id": 32028898, "comment_id": 51962802, "body": "Write a role for these objects that has a <code>TO_JSON</code> method.  Even if you don&#39;t have control over how the objects are originally created, better to rebless them into a subclass that provides the additional functionality than to unbless them and start leaking the guts out all over the place."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1439684712, "post_id": 32028898, "comment_id": 51962840, "body": "One reason that unblessing an object is poor design is because it intentionally breaks the encapsulation that the object provides, and exposes the reliant code on implementation details of the object.  By, instead, subclassing the object and providing a TO_JSON method, you get to keep the encapsulation in place, and simply add the behavior your external code needs.  It keeps internals where they should be, and keeps the external code free from reliance on specific object internal characteristics.  If you cannot new the object as a subclass, write your subclass with the ability to rebless."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "edited": false, "score": 0, "creation_date": 1439669826, "post_id": 32028927, "comment_id": 51959397, "body": "Yup, I was searching for this, thanks a lot. I&#39;ll mark it as answer in 10 minutes"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439695742, "post_id": 32028927, "comment_id": 51964367, "body": "That&#39;s the source of <code>_unbless</code>. <code>_unbless_xs</code> is generated from the directives at line 858. <code>_unbless_xs</code> does call <code>_unbless</code>, though (<code>_unbless(sv, (HV*) sv_2mortal((SV*) newHV()));</code>)"}], "tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": true, "score": 2, "last_activity_date": 1439669588, "creation_date": 1439669588, "answer_id": 32028927, "question_id": 32028898, "link": "https://stackoverflow.com/questions/32028898/unbless-implementation-in-perl/32028927#32028927", "title": "unbless implementation in Perl?", "body": "<p>It's implemented in C, you can check the source of the function at <a href=\"https://metacpan.org/source/ANDYA/Data-Structure-Util-0.16/Util.xs#L239\" rel=\"nofollow\">https://metacpan.org/source/ANDYA/Data-Structure-Util-0.16/Util.xs#L239</a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1439670485, "creation_date": 1439670485, "answer_id": 32029047, "question_id": 32028898, "link": "https://stackoverflow.com/questions/32028898/unbless-implementation-in-perl/32029047#32029047", "title": "unbless implementation in Perl?", "body": "<p>If you look for <a href=\"https://metacpan.org/pod/release/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm\" rel=\"nofollow\"><code>Data::Structure::Util</code> on metacpan.org</a> you will see a <a href=\"https://metacpan.org/source/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure\" rel=\"nofollow\">Browse</a> link to the left that will let you explore the contents of the distribution</p>\n\n<p>The same applies to any CPAN module: there is no need for a download to examine the source code. In this case you will find <code>Util.xs</code> at the root of the structure</p>\n\n<p>If you prefer, you can do the same thing on the CPAN site <a href=\"http://search.cpan.org/~andya/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm\" rel=\"nofollow\"><code>search.cpan.org</code></a> but you must ascend to the (currently) Data-Structure-Util-0.16 distribution to find the browse link</p>\n"}], "owner": {"reputation": 9030, "user_id": 202940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JNQ86.jpg?s=128&g=1", "display_name": "Ashraf Bashir", "link": "https://stackoverflow.com/users/202940/ashraf-bashir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 32028927, "answer_count": 2, "score": 0, "last_activity_date": 1439670485, "creation_date": 1439669417, "last_edit_date": 1439669598, "question_id": 32028898, "link": "https://stackoverflow.com/questions/32028898/unbless-implementation-in-perl", "title": "unbless implementation in Perl?", "body": "<p>As many Perl developers know, <a href=\"https://metacpan.org/pod/release/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm#unbless-ref\" rel=\"nofollow\">unbless</a> is used to remove the <a href=\"http://perldoc.perl.org/functions/bless.html\" rel=\"nofollow\">blessing</a> from objects. <br/>I am trying to understand how does it internally work by investigating its implementation. <br/>I tried to check <a href=\"https://metacpan.org/source/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm#L51\" rel=\"nofollow\">its implementation</a> in its package <a href=\"https://metacpan.org/pod/release/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm\" rel=\"nofollow\">Data::Structure::Util</a>. Here's the <a href=\"https://metacpan.org/source/ANDYA/Data-Structure-Util-0.16/lib/Data/Structure/Util.pm\" rel=\"nofollow\">Source</a>:</p>\n\n<pre><code>sub unbless {\n    unbless_xs( $_[0] );\n}\n</code></pre>\n\n<p>Where may I find <code>unbless_xs</code> sub implementation/source ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1439669490, "post_id": 32028883, "comment_id": 51959279, "body": "Barewords should be avoided like the plague they are.  Personally, I have no plans to find out &#39;why&#39; the difference; I&#39;ll continue to avoid them all the time.  They&#39;re a relic left over from the wild west days of Perl (circa 1990) and would have been eliminated from the language except for the need to maintain backwards compatibility."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1439669646, "post_id": 32028883, "comment_id": 51959335, "body": "In any case, in that context, it prints <code>$_</code> to the file handle <code>hello</code>, doesn&#39;t it?  That&#39;s the sort of reason why barewords are worth avoiding.  (Compare: <code>print STDERR &quot;Hello\\n&quot;;</code> and <code>print STDERR;</code>, and <code>print hello;</code>.)"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1439670182, "post_id": 32028985, "comment_id": 51959509, "body": "... and that&#39;s why we don&#39;t do it, and suggest turning on <code>strict</code> and <code>warnings</code> :)"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1439694866, "last_edit_date": 1439694866, "creation_date": 1439670081, "answer_id": 32028985, "question_id": 32028883, "link": "https://stackoverflow.com/questions/32028883/print-doesnt-recognize-barewords-as-parameter/32028985#32028985", "title": "print doesn&#39;t recognize barewords as parameter?", "body": "<p>In cases like this, the <a href=\"https://metacpan.org/pod/B::Deparse\" rel=\"nofollow\"><code>B::Deparse</code></a> module can be very helpful:</p>\n\n<pre><code>$ perl -MO=Deparse -e 'print hello;'\nprint hello $_;\n-e syntax OK\n</code></pre>\n\n<p>As you see, it interprets the identifier as a filehandle and takes the value to be printed from <code>$_</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 3, "last_activity_date": 1439670101, "creation_date": 1439670101, "answer_id": 32028988, "question_id": 32028883, "link": "https://stackoverflow.com/questions/32028883/print-doesnt-recognize-barewords-as-parameter/32028988#32028988", "title": "print doesn&#39;t recognize barewords as parameter?", "body": "<p>Barewords should be avoided like the plague they are. Personally, I'll continue to avoid them all the time. They're a relic left over from the wild west days of Perl (circa 1990) and would have been eliminated from the language except for the need to maintain backwards compatibility.</p>\n\n<p>In any case, in that context, it prints <code>$_</code> to the file handle <code>hello</code>, doesn't it? That's the sort of reason why barewords are worth avoiding. (Compare: <code>print STDERR \"Hello\\n\";</code> and <code>print STDERR;</code>, and <code>print hello;</code>).</p>\n\n<p>For example:</p>\n\n<pre><code>open hello, \"&gt;junk.out\";\nwhile (&lt;&gt;)\n{\n    print STDERR \"Hello\\n\";\n    print STDERR;\n    print hello;\n}\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>$ perl hello.pl\nabc\nHello\nabc\ndef\nHello\ndef\n$ cat junk.out\nabc\ndef\n$\n</code></pre>\n\n<p>In case it isn't clear, I typed one line of <code>abc</code>, which was followed by <code>Hello</code> and <code>abc</code> on standard error; then I typed <code>def</code>, which was followed by <code>Hello</code> and <code>def</code> on standard error.  I typed <kbd>Control-D</kbd> to indicate EOF, and showed the contents of the file <code>junk.out</code> (which didn't exist before I ran the script).  It contained the two lines that I'd typed.</p>\n\n<p>So, don't use barewords \u2014 they're confusing.  And do use <code>use strict;</code> and <code>use warnings;</code> so that you have less opportunity to be confused.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1439694818, "last_edit_date": 1439694818, "creation_date": 1439694488, "answer_id": 32031430, "question_id": 32028883, "link": "https://stackoverflow.com/questions/32028883/print-doesnt-recognize-barewords-as-parameter/32031430#32031430", "title": "print doesn&#39;t recognize barewords as parameter?", "body": "<p>An identifier is only a bareword if it has no other meaning.</p>\n\n<blockquote>\n  <p>A word that has no other interpretation in the grammar will be treated as if it were a quoted string. These are known as \"barewords\". </p>\n</blockquote>\n\n<p>So, for example, there are no barewords in the following program:</p>\n\n<pre><code>sub f { print STDOUT \"f()\\n\"; }\nX: f;\n</code></pre>\n\n<p>In other circumstances, all of <code>sub</code>, <code>f</code>, <code>print</code>, <code>STDOUT</code> and <code>X</code> could be barewords, but they all have other meanings here. I could add <code>use strict;</code>, and it'll still work fine.</p>\n\n<p>In your code, you used <code>print hello</code> as I used <code>print STDOUT</code>. If an identifier follows <code>print</code>, you are using the <code>print FILEHANDLE LIST</code> syntax of <code>print</code>, where the identifier is the name of a file handle.</p>\n"}], "owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 32028985, "answer_count": 3, "score": 2, "last_activity_date": 1439694866, "creation_date": 1439669329, "question_id": 32028883, "link": "https://stackoverflow.com/questions/32028883/print-doesnt-recognize-barewords-as-parameter", "title": "print doesn&#39;t recognize barewords as parameter?", "body": "<p>In non-strict mode of Perl, barewords could be recognized as string, like below:</p>\n\n<pre><code>$x = hello;\nprint $x;\n</code></pre>\n\n<p>But it seems barewords cannot be passed to print directly, like below one doesn't output the string. Why are they different?</p>\n\n<pre><code>print hello;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "edited": false, "score": 0, "creation_date": 1439665615, "post_id": 32027976, "comment_id": 51958109, "body": "Seems this is only applicable to UNIX-like platform."}, {"owner": {"reputation": 1607, "user_id": 1983944, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nb9Ms.gif?s=128&g=1", "display_name": "Amit Bhaira", "link": "https://stackoverflow.com/users/1983944/amit-bhaira"}, "reply_to_user": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "edited": false, "score": 0, "creation_date": 1439786944, "post_id": 32027976, "comment_id": 51986033, "body": "Indeed .. but i presume there must be an env variable in other OS too to change the timezone."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439808353, "post_id": 32027976, "comment_id": 51996394, "body": "<code>TZ</code> does affect <code>localtime</code> on Windows too. Just not sure what values to pass to it. Do note that you&#39;re supposed to call <code>POSIX::tzset()</code> after changing <code>$ENV{TZ}</code>."}], "tags": [], "owner": {"reputation": 1607, "user_id": 1983944, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nb9Ms.gif?s=128&g=1", "display_name": "Amit Bhaira", "link": "https://stackoverflow.com/users/1983944/amit-bhaira"}, "is_accepted": false, "score": 0, "last_activity_date": 1439664282, "last_edit_date": 1439664282, "creation_date": 1439663573, "answer_id": 32027976, "question_id": 32027726, "link": "https://stackoverflow.com/questions/32027726/convert-a-time-in-different-time-zone-to-localtime-in-perl/32027976#32027976", "title": "Convert a time in different time zone to localtime in Perl?", "body": "<p>Localtime() function uses your local system time zone. You can specify timezone  before executing the program using TZ environment variable. </p>\n\n<p>Here is a perl script named time.pl </p>\n\n<pre><code>#!/usr/bin/perl -w\n\nmy $time = localtime;\nprint $time;\n</code></pre>\n\n<p>output of executing it with and without TZ is following .. </p>\n\n<pre><code>./time.pl \nSun Aug 16 00:12:33 2015 \n\nTZ=GST ./time.pl \nSat Aug 15 18:42:36 2015\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1439678418, "creation_date": 1439678418, "answer_id": 32030089, "question_id": 32027726, "link": "https://stackoverflow.com/questions/32027726/convert-a-time-in-different-time-zone-to-localtime-in-perl/32030089#32030089", "title": "Convert a time in different time zone to localtime in Perl?", "body": "<p>I use DateTime.</p>\n\n<pre><code>$ perl -MDateTime -E'say DateTime-&gt;now( time_zone =&gt; $ARGV[0] )' America/Toronto\n2015-08-15T18:39:54\n\n$ perl -MDateTime -E'say DateTime-&gt;now( time_zone =&gt; $ARGV[0] )' America/Halifax\n2015-08-15T19:39:55\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439808255, "post_id": 32046173, "comment_id": 51996341, "body": "This is the just a longer version of the answer the OP already rejected. Windows definitely doesn&#39;t know <code>Europe&#47;Paris</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439808281, "post_id": 32046173, "comment_id": 51996359, "body": "Also, you&#39;re supposed to call <code>POSIX::tzset()</code> after changing <code>$ENV{TZ}</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1439801254, "creation_date": 1439801254, "answer_id": 32046173, "question_id": 32027726, "link": "https://stackoverflow.com/questions/32027726/convert-a-time-in-different-time-zone-to-localtime-in-perl/32046173#32046173", "title": "Convert a time in different time zone to localtime in Perl?", "body": "<p><a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> will respect the TZ environment variable.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece;\n\nsay scalar localtime-&gt;strftime('%F %T %Z');\n\nforeach ('UTC', 'Europe/Paris', 'America/New_York') {\n  $ENV{TZ} = $_;\n  say scalar localtime-&gt;strftime('%F %T %Z');\n}\n</code></pre>\n\n<p>Output (when run in London):</p>\n\n<pre><code>2015-08-17 09:46:53 BST\n2015-08-17 08:46:53 UTC\n2015-08-17 10:46:53 CEST\n2015-08-17 04:46:53 EDT\n</code></pre>\n"}], "owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 1, "accepted_answer_id": 32030089, "answer_count": 3, "score": 0, "last_activity_date": 1439801254, "creation_date": 1439662016, "question_id": 32027726, "link": "https://stackoverflow.com/questions/32027726/convert-a-time-in-different-time-zone-to-localtime-in-perl", "title": "Convert a time in different time zone to localtime in Perl?", "body": "<p>Perl built-in function localtime can convert specified date time value to local time, but it doesn't accept time zone number. What is the most easy way to do this transformation for different time zones? Import other modules looks a little complex, especially for one-liner.</p>\n"}, {"tags": ["perl", "uwsgi", "dancer"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1439705176, "post_id": 32027422, "comment_id": 51965794, "body": "Try the dancer-users@dancer.pm mailing l ist"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439796049, "post_id": 32027422, "comment_id": 51989356, "body": "Or #dancer on irc.perl.org. The core devs are very quick to respond."}], "answers": [{"comments": [{"owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1564138393, "post_id": 34623559, "comment_id": 100941349, "body": "Again you saved me. Got similar issue in Mojolicious."}], "tags": [], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1452039123, "creation_date": 1452039123, "answer_id": 34623559, "question_id": 32027422, "link": "https://stackoverflow.com/questions/32027422/perl-dancer-forward-appears-to-throw-warning-when-deployed-in-uwsgi/34623559#34623559", "title": "Perl Dancer &#39;forward&#39; appears to throw warning when deployed in uWSGI", "body": "<p>Answering my own question, the problem seems to be triggered by an exception within <code>forward</code>.  Adding:</p>\n\n<pre><code> perl-no-die-catch = true\n</code></pre>\n\n<p>to the uwsgi vassal initialization file appears to fix the problem.</p>\n"}], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1452039123, "creation_date": 1439660206, "question_id": 32027422, "link": "https://stackoverflow.com/questions/32027422/perl-dancer-forward-appears-to-throw-warning-when-deployed-in-uwsgi", "title": "Perl Dancer &#39;forward&#39; appears to throw warning when deployed in uWSGI", "body": "<p>Deploying a Perl Dancer app.  It appears that every time a Dancer 'forward'</p>\n\n<p><a href=\"http://search.cpan.org/~yanick/Dancer-1.3140/lib/Dancer.pm#forward\" rel=\"nofollow\">http://search.cpan.org/~yanick/Dancer-1.3140/lib/Dancer.pm#forward</a></p>\n\n<p>within a uWSGI-deployed app, uWSGI logs this warning even though the forward works just fine:</p>\n\n<blockquote>\n  <p>Trace begun at (eval 839) line 1\n  main::<strong>ANON</strong>('Dancer::Continuation::Route::Forwarded=HASH(0x65e4d60)') called at /usr/share/perl5/Dancer/Continuation.pm line 12\n  Dancer::Continuation::throw('Dancer::Continuation::Route::Forwarded=HASH(0x65e4d60)') called at /usr/share/perl5/Dancer.pm line 151\n  Dancer::forward('/error/msg/Unknown+user') called at /home/i2/www/lib/user/profile.pm line 103\n  user::profile::<strong>ANON</strong> at /usr/share/perl5/Dancer/Route.pm line 262\n  Dancer::Route::execute('Dancer::Route=HASH(0x5b40ca0)') called at /usr/share/perl5/Dancer/Route.pm line 177\n  Dancer::Route::try {...}  at /usr/local/share/perl/5.18.2/Try/Tiny.pm line 76\n  eval {...} at /usr/local/share/perl/5.18.2/Try/Tiny.pm line 72\n  Try::Tiny::try('CODE(0x275a590)', 'Try::Tiny::Catch=REF(0x65e4cb8)') called at /usr/share/perl5/Dancer/Route.pm line 191\n  Dancer::Route::run('Dancer::Route=HASH(0x5b40ca0)', 'Dancer::Request=HASH(0x2266fb0)') called at /usr/share/perl5/Dancer/Renderer.pm line 135\n  Dancer::Renderer::try {...}  at /usr/local/share/perl/5.18.2/Try/Tiny.pm line 81\n  eval {...} at /usr/local/share/perl/5.18.2/Try/Tiny.pm line 72\n  Try::Tiny::try('CODE(0x60a4458)', 'Try::Tiny::Catch=REF(0x65e4ac0)') called at /usr/share/perl5/Dancer/Renderer.pm line 144\n  Dancer::Renderer::get_action_response('Dancer::Renderer') called at /usr/share/perl5/Dancer/Renderer.pm line 31\n  Dancer::Renderer::render_action('Dancer::Renderer') called at /usr/share/perl5/Dancer/Handler.pm line 84\n  Dancer::Handler::try {...}  at /usr/local/share/perl/5.18.2/Try/Tiny.pm line 76\n  eval {...} at /usr/local/share/perl/5.18.2/Try/Tiny.pm line 72\n  Try::Tiny::try('CODE(0x1b5cfa8)', 'Try::Tiny::Catch=REF(0x60a4350)') called at /usr/share/perl5/Dancer/Handler.pm line 113\n  Dancer::Handler::render_request('Dancer::Request=HASH(0x2266fb0)') called at /usr/share/perl5/Dancer/Handler.pm line 76\n  Dancer::Handler::handle_request('Dancer::Handler::PSGI=HASH(0x5f3f150)', 'Dancer::Request=HASH(0x2266fb0)') called at /usr/share/perl5/Dancer/Handler.pm line 123\n  Dancer::Handler::<strong>ANON</strong>('HASH(0xe4e720)') called at bin/app.pl line 0\n  eval {...} at bin/app.pl line 0</p>\n</blockquote>\n\n<p>I do have PCRE enabled. I'm sure of this because PCRE=True on install, and I'm not getting the warning.</p>\n\n<p>Any thoughts?  I can obviously just ignore, but I want to make sure I'm not creating a race condition, and I also just want nice clean code.</p>\n"}, {"tags": ["regex", "perl", "capture-group"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1439652228, "creation_date": 1439652228, "answer_id": 32026180, "question_id": 32026086, "link": "https://stackoverflow.com/questions/32026086/perl-capture-variables-in-multiple-binding-operators/32026180#32026180", "title": "Perl capture variables in multiple binding operators", "body": "<p>No, every successful match resets all capture variables. But you can do this:</p>\n\n<pre><code>sub countDays {\n    my @match1 = $_[0] =~ m/([1-7])/\n        and\n    my @match2 = $_[1] =~ m/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/\n        and\n    my @match3 = $_[2] =~ m/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/\n        or die \"Check formatting\";\n\n    print \"@match1\\n@match2\\n@match3\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 5231673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Am4GD.jpg?s=128&g=1", "display_name": "Joaqu&#237;n Ferrero", "link": "https://stackoverflow.com/users/5231673/joaqu%c3%adn-ferrero"}, "is_accepted": false, "score": 1, "last_activity_date": 1439704373, "creation_date": 1439704373, "answer_id": 32032253, "question_id": 32026086, "link": "https://stackoverflow.com/questions/32026086/perl-capture-variables-in-multiple-binding-operators/32032253#32032253", "title": "Perl capture variables in multiple binding operators", "body": "<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\ncountDays(1,\"2015-3-21\",\"2016-3-24\");\n\nsub countDays {\n    my $countDays = join ',', @_;\n\n    die \"Check formatting\"\n        unless $countDays =~\n            m/([1-7]),(\\d{4})-(\\d{1,2})-(\\d{1,2}),(\\d{4})-(\\d{1,2})-(\\d{1,2})/;\n\n    # testing\n    print \"$1\\n$2\\n$3\\n$4\\n$5\\n$6\\n$7\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 527, "user_id": 2561579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bbbe41b11b947fed6fe1e10a366a01e4?s=128&d=identicon&r=PG", "display_name": "EarthIsHome", "link": "https://stackoverflow.com/users/2561579/earthishome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 32026180, "answer_count": 2, "score": 0, "last_activity_date": 1439704373, "creation_date": 1439651641, "last_edit_date": 1439652033, "question_id": 32026086, "link": "https://stackoverflow.com/questions/32026086/perl-capture-variables-in-multiple-binding-operators", "title": "Perl capture variables in multiple binding operators", "body": "<p>Is there a way to use capture groups in more than binding expression and capture all the groups?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\ncountDays(1,\"2015-3-21\",\"2016-3-24\");\n\nsub countDays {\n    die \"Check formatting\"\n        unless ($_[0] =~ m/([1-7])/ &amp;&amp;\n                $_[1] =~ m/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/ &amp;&amp;\n                $_[2] =~ m/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/);\n\n            # testing\n            print \"$1\\n$2\\n$3\\n$4\\n$5\\n$6\\n$6\\n\";\n\n}\n</code></pre>\n\n<p>This only captures the last three groups: <code>$1</code>, <code>$2</code>, and <code>$3</code>.</p>\n\n<p>Edit for expected output as Avinash Raj suggested:</p>\n\n<pre><code>1\n2015\n3\n21\n2016\n3\n24\n</code></pre>\n"}, {"tags": ["mysql", "perl", "utf-8"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1439651046, "post_id": 32025810, "comment_id": 51953626, "body": "when connecting, do you have { mysql_enable_utf8 =&gt; 1} set?"}, {"owner": {"reputation": 11, "user_id": 3564738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8911f0e54f94edfd9dc00446867e3284?s=128&d=identicon&r=PG&f=1", "display_name": "Adspectus", "link": "https://stackoverflow.com/users/3564738/adspectus"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1439651576, "post_id": 32025810, "comment_id": 51953792, "body": "Yes, on new server it is set. On old server I did not need it for any reason."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1439651930, "post_id": 32025810, "comment_id": 51953873, "body": "well then the question is unfortunately quite broad: you will have to check each time data comes in and when it comes out. use utf8, btw, only says that characters in that specific file are utf8, so most of the time does not help. use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;; should ensure your print output works, so if print output is mangled then, it would probably be off.   For some more in-depth look at utf8, see e.g. this post, I found it useful debugging my own problems: <a href=\"http://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default/6163129#6163129\" title=\"why does modern perl avoid utf 8 by default\">stackoverflow.com/questions/6162484/&hellip;</a>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1439652076, "post_id": 32025810, "comment_id": 51953911, "body": "I have also had problems at some point with regexes on utf8 strings and perl versions, though that was prior to 5.18 if I remember correctly, still, might be something to look at as well."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439662110, "post_id": 32025810, "comment_id": 51956941, "body": "How can you not know if this is an input or output problem? What does <code>sprintf(&quot;%vX&quot;, $str_from_database)</code> give?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3564738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8911f0e54f94edfd9dc00446867e3284?s=128&d=identicon&r=PG&f=1", "display_name": "Adspectus", "link": "https://stackoverflow.com/users/3564738/adspectus"}, "is_accepted": true, "score": 0, "last_activity_date": 1439727848, "creation_date": 1439727848, "answer_id": 32035038, "question_id": 32025810, "link": "https://stackoverflow.com/questions/32025810/double-encoding-issue-with-perl-cgi-and-mysql/32035038#32035038", "title": "Double encoding issue with perl/cgi and mysql", "body": "<p>The post suggested by bytepusher helped me. When I use <code>use utf8;</code> AND <code>use open ':std', ':encoding(UTF-8)';</code> everything works fine. However, I am still wondering why it did work without these statements on the old machine...</p>\n"}], "owner": {"reputation": 11, "user_id": 3564738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8911f0e54f94edfd9dc00446867e3284?s=128&d=identicon&r=PG&f=1", "display_name": "Adspectus", "link": "https://stackoverflow.com/users/3564738/adspectus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 32035038, "answer_count": 1, "score": -1, "last_activity_date": 1439727848, "creation_date": 1439649882, "question_id": 32025810, "link": "https://stackoverflow.com/questions/32025810/double-encoding-issue-with-perl-cgi-and-mysql", "title": "Double encoding issue with perl/cgi and mysql", "body": "<p>I switched an self developed Web-Application based on Perl/CGI and MySQL from one server to another and since then, special characters from database content like german umlauts are shown as black diamond with question mark. Everything else, even text with umlauts which is coming from the script is ok. After lot of research I have still no clue what might cause the issue.</p>\n\n<p>The original server is openSuSE 13.1 with Perl 5.18.1 and MySQL 5.6.25 while the new server is Debian 8 with Perl 5.20.2 and MySQL 5.5.44. I transfered all files with zipped tar files and configured MySQL and Apache identically, i.e. setting utf-8 and so on. After dumping and restoring sql data I was able to verify that data in new MySQL is fine.</p>\n\n<p>I tried many things so far, playing around with use Encode and use utf8 in Perl, setting DBI with utf8 but nothing helps. Feel quite lost now, so any hint is appreciated. Let me know if more info is necessary.</p>\n\n<p>Kind regards,\nUwe</p>\n"}, {"tags": ["perl", "reference"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1439644653, "post_id": 32024688, "comment_id": 51951764, "body": "I know that <a href=\"http://search.cpan.org/~lds/Devel-Cycle-1.10/lib/Devel/Cycle.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~lds/Devel-Cycle-1.10/lib/Devel/Cycle.pm</a> and <a href=\"http://search.cpan.org/~ilyaz/Devel-Peek-0.96/Peek.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~ilyaz/Devel-Peek-0.96/Peek.pm</a> both help with these issues, but I&#39;ve never used them when the vars fall out of scope and get &#39;lost&#39;, so I don&#39;t know if they&#39;re useful in those cases. Worth a look though"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1439648840, "post_id": 32024688, "comment_id": 51953033, "body": "Maybe <a href=\"https://metacpan.org/pod/Devel::LeakTrace::Fast\" rel=\"nofollow noreferrer\">Devel::LeakTrace::Fast</a>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1439651552, "post_id": 32024688, "comment_id": 51953784, "body": "<a href=\"https://metacpan.org/pod/Devel::Gladiator\" rel=\"nofollow noreferrer\">metacpan.org/pod/Devel::Gladiator</a>, <a href=\"https://metacpan.org/pod/Devel::MAT::Dumper\" rel=\"nofollow noreferrer\">metacpan.org/pod/Devel::MAT::Dumper</a>, <code>pmat-explore-gtk</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439660285, "post_id": 32024688, "comment_id": 51956379, "body": "I don&#39;t see how Devel::Peek would help, but this is what Devel::Cycle is meant for"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439660452, "post_id": 32024688, "comment_id": 51956426, "body": "If you wanted to check a specific class for leaks, you could give it a destructor, and see if it&#39;s called when you expect it to be."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 6, "last_activity_date": 1439664029, "last_edit_date": 1592644375, "creation_date": 1439663686, "answer_id": 32028002, "question_id": 32024688, "link": "https://stackoverflow.com/questions/32024688/finding-lost-variables-circular-references/32028002#32028002", "title": "Finding &#39;lost&#39; variables (circular references)", "body": "<p>This is just a curation of the modules recommended in the comments on the question. It includes a link to each module's POD documentation, and quotes the <em><strong>name</strong></em> and <em><strong>description</strong></em> sections. It is meant to be accessible. Nowhere have I added to or changed what the author wrote, or pulled information from anywhere other than the name and description sections</p>\n<p>Anyone is welcome to update it with additional modules as long as they keep to this format. Alternatively, anyone may draw my attention to the fact that it needs to be updated and I will do so when I am able</p>\n<p>Many great programmers are not so great with English so, while I have tried to quote the documentation exactly, I have cut what I believe to be less relevant sections in keeping with the purpose of this post</p>\n<blockquote>\n<p><a href=\"https://metacpan.org/pod/Devel::Cycle\" rel=\"noreferrer\"><code>Devel::Cycle</code></a> - Find memory cycles in objects</p>\n<p>This is a simple developer's tool for finding circular references in objects and other types of references. Because of Perl's reference-count based memory management, circular references will cause memory leaks.</p>\n</blockquote>\n\n<blockquote>\n<p><a href=\"https://metacpan.org/pod/Devel::LeakTrace::Fast\" rel=\"noreferrer\"><code>Devel::LeakTrace::Fast</code></a> - Indicate where leaked variables are coming from.</p>\n<p><code>Devel::LeakTrace::Fast</code> is a rewrite of <code>Devel::LeakTrace</code>. Like <code>Devel::LeakTrace</code> it uses the pluggable <code>runops</code> feature found in perl 5.6 and later in order to trace SV allocations of a running program.</p>\n<p>At <code>END</code> time <code>Devel::LeakTrace::Fast</code> identifies any remaining variables, and reports on the lines in which the came into existence.</p>\n</blockquote>\n\n<blockquote>\n<p><a href=\"https://metacpan.org/pod/Devel::Gladiator\" rel=\"noreferrer\"><code>Devel::Gladiator</code></a> - Walk Perl's arena</p>\n<p><code>Devel::Gladiator</code> iterates Perl's internal memory structures and can be used to enumerate all the currently live SVs.</p>\n<p>This can be used to hunt leaks and to profile memory usage.</p>\n</blockquote>\n\n<blockquote>\n<p><a href=\"https://metacpan.org/pod/Devel::MAT::Dumper\" rel=\"noreferrer\"><code>Devel::MAT::Dumper</code></a> - Write a heap dump file for later analysis</p>\n<p>This module provides the memory-dumping function that creates a heap dump file which can later be read by <a href=\"https://metacpan.org/pod/Devel::MAT::Dumpfile\" rel=\"noreferrer\"><code>Devel::MAT::Dumpfile</code></a>. It provides a single function which is not exported, which writes a file to the given path.</p>\n<p>The dump file will contain a representation of every SV in Perl's arena, providing information about pointers between them, as well as other information about the state of the process at the time it was created. It contains a snapshot of the process at that moment in time, which can later be loaded and analysed by various tools using <code>Devel::MAT::Dumpfile</code>.</p>\n</blockquote>\n\n<blockquote>\n<p><a href=\"https://metacpan.org/pod/Devel::Peek\" rel=\"noreferrer\"><code>Devel::Peek</code></a> - A data debugging tool for the XS programmer</p>\n<p><code>Devel::Peek</code> contains functions which allows raw Perl datatypes to be manipulated from a Perl script. This is used by those who do XS programming to check that the data they are sending from C to Perl looks as they think it should look.</p>\n</blockquote>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 4, "answer_count": 1, "score": 8, "last_activity_date": 1439664029, "creation_date": 1439641485, "question_id": 32024688, "link": "https://stackoverflow.com/questions/32024688/finding-lost-variables-circular-references", "title": "Finding &#39;lost&#39; variables (circular references)", "body": "<p>So, it's a bit of a simplistic case - but if I set up a circular reference like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n{ \n   my $thing; \n   my $otherthing;\n   $thing -&gt; {otherthing} = \\$otherthing;\n   $otherthing -&gt; {thing} = \\$thing; \n}\n</code></pre>\n\n<p>I create a memory leak - because by reference counting, the memory allocated here will never be freed, despite not having any outward 'access point'. </p>\n\n<p>So what I'm wondering - in this sort of scenario, is there any way I could - via debugging or similar - 'rediscover' these variables and gain access to them again? </p>\n\n<p>Hypothetically I'm thinking in a less trivial case - you've a memory leaked object, but would like to 'catch' it again to see what's in it, to give a hint as to what was in said object and thus where the problem was starting. </p>\n"}, {"tags": ["javascript", "ajax", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5228575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631d64ecbb4b97a1b84483fff95c9f26?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/5228575/ash"}, "edited": false, "score": 0, "creation_date": 1439832283, "post_id": 32019323, "comment_id": 52011349, "body": "Unur- I edited my code after your inputs. can u please suggest me what i am doing wrong here. Any inputs are appreciated. I am still getting alert as &quot;Error&quot; from the ajax function&#39;s error."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1439590050, "last_edit_date": 1592644375, "creation_date": 1439590050, "answer_id": 32019323, "question_id": 32018555, "link": "https://stackoverflow.com/questions/32018555/simple-pass-perl-variable-to-ajax-success/32019323#32019323", "title": "Simple.... Pass perl variable to ajax success ?", "body": "<p>The first argument to the <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\"><code>success</code> callback</a> is the data received from the server:</p>\n<blockquote>\n<p><strong>success</strong></p>\n<p>Type: <code>Function( Anything data, String textStatus, jqXHR jqXHR )</code></p>\n<p>A function to be called if the request succeeds. The function gets passed three arguments: The data returned from the server, formatted according to the dataType parameter or the dataFilter callback function, if specified; a string describing the status; and the jqXHR (in jQuery 1.4.x, XMLHttpRequest) object. As of jQuery 1.5, the success setting can accept an array of functions. Each function will be called in turn. This is an Ajax Event.</p>\n</blockquote>\n<p>You can specify the <code>dataType</code> as JSON, and send the appropriate content type and response from the Perl side.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5228575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631d64ecbb4b97a1b84483fff95c9f26?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/5228575/ash"}, "is_accepted": false, "score": 0, "last_activity_date": 1440012242, "creation_date": 1440012242, "answer_id": 32103983, "question_id": 32018555, "link": "https://stackoverflow.com/questions/32018555/simple-pass-perl-variable-to-ajax-success/32103983#32103983", "title": "Simple.... Pass perl variable to ajax success ?", "body": "<p>i got an answer for this. if it helps anyone, i wld be glad. </p>\n\n<pre><code>sub File_Check {\n    print $cgi-&gt;header('text/plain;charset=UTF-8');\n    if (-e $filename) {\n        my $file_check=\"\";\n        if (open(TXT,\"&gt;&gt;$filename\")){\n            close TXT;\n            $file_check=\"TRUE\";\n        } \n        else {\n            $file_check=\"FALSE\";\n        } \n    print $file_check;\n    }\n}\n</code></pre>\n\n<p>The above one is a perl subroutine. heres the ajax call i made to get the data from perl subroutine. </p>\n\n<pre><code>var perlURL= \"$thiscode\";\n\\$.ajax({\n        url: perlURL,\n        type: 'post\n        data: form_data,\n        datatype: \"script\",\n        success: function (result) {\n        console.log(result); // gives true or false depending on value from perl subroutine.\n        },\n        error: function(result) {\n\n        }\n});\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5228575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631d64ecbb4b97a1b84483fff95c9f26?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/5228575/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440012242, "creation_date": 1439585948, "last_edit_date": 1439935971, "question_id": 32018555, "link": "https://stackoverflow.com/questions/32018555/simple-pass-perl-variable-to-ajax-success", "title": "Simple.... Pass perl variable to ajax success ?", "body": "<p>Can anyone please let me know how can i pass a variable from perl subroutine back to ajax's success part for further manipulation ?</p>\n\n<p>Here is the code for understanding more in detail</p>\n\n<pre><code>sub File_Check {\n    print header('application/json');\n    if (-e $filename) {\n        my @file_check=();\n\n        if (open(TXT,\"&gt;&gt;$filename\")){\n            close TXT;\n            $file_check[0] = TRUE;} \n        else {\n            $file_check[0] = FALSE;\n        } \n\n        my $json-&gt;{\"entries\"} =\\@file_check;\n        my $json_text= to_json($json);\n        prin $json_text;\n    }\n}\n</code></pre>\n\n<p>The perl subroutine is File_Check. It will check if the file is open or not. If open, $file_check[0] variable would have TRUE as result. I want to pass this result in the below ajax success method. </p>\n\n<pre><code>$.ajax({\n        url: perlURL,\n        data: { action: \"File_Check\"},\n        type: 'get',\n        datatype: \"json\",\n\n        success: function (result) {\n            // data should be returned here for manipulation. \n        },\n        error: function (data) {\n            alert('Error');\n        }                                                                       \n});\n</code></pre>\n"}, {"tags": ["perl", "ssl", "lwp"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1439579827, "post_id": 32017258, "comment_id": 51936830, "body": "500 is a server-side code. did you look at what&#39;s in the webserver&#39;s error log?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1439580136, "post_id": 32017258, "comment_id": 51937001, "body": "@MarcB: LWP generates such 500 codes by itself on errors to pack the error into a valid HTTP response."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439580364, "post_id": 32017258, "comment_id": 51937100, "body": "hum.... LWP messages are usually longer."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1439580417, "post_id": 32017258, "comment_id": 51937133, "body": "Please add the full response you get from LWP. Also try to run your code with <code>perl -MIO::Socket::SSL=debug4 program.pl</code> and add the resulting debug output to your question."}, {"owner": {"reputation": 11, "user_id": 5228537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63dae1ff126409a13d224f00f7d5d613?s=128&d=identicon&r=PG&f=1", "display_name": "edsh", "link": "https://stackoverflow.com/users/5228537/edsh"}, "edited": false, "score": 0, "creation_date": 1439581731, "post_id": 32017258, "comment_id": 51937746, "body": "$resp-&gt;content says LWP::Protocol::https::Socket: SSL connect attempt failed because of handshake problemserror:00000000:lib(0):func(0):reason(0) at /System/Library/Perl/Extras/5.12/LWP/Protocol/http.pm line 51."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439581874, "post_id": 32017258, "comment_id": 51937813, "body": "You have given your request a <code>Content-Type </code> header of <code>application&#47;json</code>, but it has no content"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439581953, "post_id": 32017258, "comment_id": 51937836, "body": "@Borodin: while you are right it does not matter in this case because the HTTP request will not even be send if the SSL handshake fails."}, {"owner": {"reputation": 11, "user_id": 5228537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63dae1ff126409a13d224f00f7d5d613?s=128&d=identicon&r=PG&f=1", "display_name": "edsh", "link": "https://stackoverflow.com/users/5228537/edsh"}, "edited": false, "score": 0, "creation_date": 1439582042, "post_id": 32017258, "comment_id": 51937889, "body": "Added additional debug output Steffen requested"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1439582048, "post_id": 32017258, "comment_id": 51937891, "body": "@SteffenUllrich: Yes, that is why I posted a comment instead of a solution"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1439583335, "last_edit_date": 1439583335, "creation_date": 1439582763, "answer_id": 32017878, "question_id": 32017258, "link": "https://stackoverflow.com/questions/32017258/perl-useragent-wont-connect-to-tls1-2-server/32017878#32017878", "title": "Perl UserAgent won&#39;t connect to TLS1.2 server", "body": "<blockquote>\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:392: Net::SSLeay::connect -&gt; 0\nDEBUG: .../IO/Socket/SSL.pm:440: connection failed - connect returned 0\nDEBUG: .../IO/Socket/SSL.pm:1276: SSL connect attempt failed because of handshake problemserror:00000000:lib(0):func(0):reason(0)\n</code></pre>\n</blockquote>\n\n<p>This looks like the server did not like what the client sent as the SSL handshake and thus the server closed the connection. Why the server did this is not clear but you might find error messages on the server side. </p>\n\n<blockquote>\n  <p>Same HTTP call through curl works fine.</p>\n</blockquote>\n\n<p>If this is really a HTTP call (i.e. no HTTPS) you do with curl than your problem is that the server expects HTTP w/o SSL but your code with LWP uses HTTP with SSL (HTTPS). But if a HTTPS call with curl succeeds then you can debug the problem by making packet captures of the successful call with curl and the unsuccessful with LWP and compare the handshakes. </p>\n\n<blockquote>\n  <p>I have tried various SSL_versions string tlsv12, tslv1.2, TSLv1, TLSv12, TLS, etc. to no avail.</p>\n</blockquote>\n\n<p>With current versions of IO::Socket::SSL it will accept TLSv12 and TLSv1_2 for TLS 1.2 and TLSv1 for TLS 1.*, case does not matter. Specifying only \"TLS\" will cause IO::Socket::SSL to croak. Older versions of IO::Socket::SSL (before version 1.70 from 2012) simply ignored invalid settings. See also the documentation which describes the settings.</p>\n"}], "owner": {"reputation": 11, "user_id": 5228537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63dae1ff126409a13d224f00f7d5d613?s=128&d=identicon&r=PG&f=1", "display_name": "edsh", "link": "https://stackoverflow.com/users/5228537/edsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9493, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1439583335, "creation_date": 1439579770, "last_edit_date": 1439582015, "question_id": 32017258, "link": "https://stackoverflow.com/questions/32017258/perl-useragent-wont-connect-to-tls1-2-server", "title": "Perl UserAgent won&#39;t connect to TLS1.2 server", "body": "<blockquote>\n  <p>Perl version is = v5.12.4</p>\n  \n  <p>LWP::UserAgent->VERSION = 6.03</p>\n</blockquote>\n\n<pre><code>   #.... \n   # Setup HTTP request\n   my $req = HTTP::Request-&gt;new();\n   $req-&gt;method($cmd);\n   $req-&gt;uri($uri);\n   $req-&gt;header('content-type' =&gt; 'application/json');\n   $req-&gt;header('Accept' =&gt; 'application/json');\n\n   # Setup the call\n   my $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; { verify_hostname =&gt; 0,\n                                              SSL_version =&gt; 'tlsv12' });\n   $ua-&gt;timeout(60);\n\n   # Do the call\n   my $resp = $ua-&gt;request($req);\n   # ....\n</code></pre>\n\n<p>The http code is always <code>500</code> and I get the error message - </p>\n\n<blockquote>\n  <p>\"Can't connect to 10.0.0.1:443\".</p>\n</blockquote>\n\n<p>I have tried various SSL_versions string tlsv12, tslv1.2, TSLv1, TLSv12, TLS, etc. to no avail. I know the server expects TLS 1.2. Same HTTP call through curl works fine. </p>\n\n<p>Additional Debug output..</p>\n\n<pre><code>Perl -MIO::Socket::SSL=debug4  powervc_cli.pl -O\nDEBUG: .../IO/Socket/SSL.pm:193: set domain to 2\nDEBUG: .../IO/Socket/SSL.pm:1545: new ctx 140528264056208\nDEBUG: .../IO/Socket/SSL.pm:334: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:336: socket connected\nDEBUG: .../IO/Socket/SSL.pm:349: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:379: set socket to non-blocking to enforce timeout=60\nDEBUG: .../IO/Socket/SSL.pm:392: Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:402: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:412: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:432: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:392: Net::SSLeay::connect -&gt; 0\nDEBUG: .../IO/Socket/SSL.pm:440: connection failed - connect returned 0\nDEBUG: .../IO/Socket/SSL.pm:1276: SSL connect attempt failed because of handshake problemserror:00000000:lib(0):func(0):reason(0)\n\nDEBUG: .../IO/Socket/SSL.pm:1276: IO::Socket::INET6 configuration failederror:00000000:lib(0):func(0):reason(0)\n\nDEBUG: .../IO/Socket/SSL.pm:1582: free ctx 140528264056208 open=140528264056208\nDEBUG: .../IO/Socket/SSL.pm:1590: OK free ctx 140528264056208\n</code></pre>\n\n<p>Please help! -Eddie</p>\n"}, {"tags": ["perl", "unit-testing", "jenkins", "code-coverage"], "comments": [{"owner": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439585337, "post_id": 32017066, "comment_id": 51939360, "body": "No, <code>cover</code> processes the <code>cover_db</code>, which is the information about which lines of code have been executed, with which truth values, etc.. This is interesting information, regardless of whether or not all the tests pass."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439585400, "post_id": 32017066, "comment_id": 51939388, "body": "So it&#39;s just a matter of <i>not</i> exiting on error?"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439585424, "post_id": 32017066, "comment_id": 51939400, "body": "Or why not run cover before you run the tests?"}, {"owner": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439585693, "post_id": 32017066, "comment_id": 51939506, "body": "It&#39;s a matter of not exiting prematurely. I still want the build to be marked as a failure, but <code>cover</code> needs to run after the tests."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439585914, "post_id": 32017066, "comment_id": 51939594, "body": "I clearly don&#39;t understand &#39;cover&#39; very well... I don&#39;t understand how it&#39;s important for it to run <i>after</i> the tests, but that it can succeed if the tests don&#39;t.  But I&#39;ll leave that for you and whoever can provide an answer to worry about... I&#39;m clearly out of my league :)"}, {"owner": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439586293, "post_id": 32017066, "comment_id": 51939763, "body": "The 3rd line in my example runs the tests. The <code>-MDevel::Cover</code> bit means that as the tests execute (some pass, some fail.. doesn&#39;t really matter), it records information about <i>which lines of source code are executed</i>. The idea is that you can look at this information to assess the quality of your tests; in other words, you can see how much of your source code is <i>covered</i> by your tests. As-is, it&#39;s not human-readable; the <code>cover</code> command just makes it pretty."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1439586421, "post_id": 32017066, "comment_id": 51939825, "body": "It&#39;s just a shell script right? It should be pretty easy to find posts here about how to capture and delay failures in shell scripts"}], "answers": [{"comments": [{"owner": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "edited": false, "score": 0, "creation_date": 1439663924, "post_id": 32028033, "comment_id": 51957609, "body": "Perfect! I was looking for a post-build option, and was disappointed that it didn&#39;t exist. Didn&#39;t think to look in the plugin library though :)"}], "tags": [], "owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "is_accepted": true, "score": 0, "last_activity_date": 1439663854, "creation_date": 1439663854, "answer_id": 32028033, "question_id": 32017066, "link": "https://stackoverflow.com/questions/32017066/how-can-i-generate-a-code-coverage-report-for-a-failed-jenkins-build/32028033#32028033", "title": "How can I generate a code coverage report for a failed Jenkins build", "body": "<p>You could put the <code>cover</code> part into a <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task\" rel=\"nofollow\">Post Build</a> task so it always executed and you wouldn't need any additional logic to check status as you go along</p>\n"}], "owner": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 1, "accepted_answer_id": 32028033, "answer_count": 1, "score": 0, "last_activity_date": 1439663854, "creation_date": 1439578940, "last_edit_date": 1439586179, "question_id": 32017066, "link": "https://stackoverflow.com/questions/32017066/how-can-i-generate-a-code-coverage-report-for-a-failed-jenkins-build", "title": "How can I generate a code coverage report for a failed Jenkins build", "body": "<p>I'm trying to build my Perl project with Jenkins in such a way that I get a JUnit report and a test coverage report. I'm having trouble getting my code report when my build fails. Here's how the build is configured:</p>\n\n<pre><code>perl Build.PL; ./Build;\ncover -delete;\nPERL5OPT=-MDevel::Cover prove -b --formatter=TAP::Formatter::JUnit t/ &gt; junit.xml;\ncover;\n</code></pre>\n\n<p>The problem with this is when <code>prove</code> exits with a non-zero status (i.e. when some of my tests fail) the <code>cover</code> command never runs; the build aborts, reporting:</p>\n\n<pre><code>Build step 'Execute shell' marked build as failure\n</code></pre>\n\n<p>Is there a good way to get a test coverage report, even when some of the tests are currently failing?</p>\n"}, {"tags": ["perl", "unicode", "newline", "utf-16", "byte-order-mark"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1439572418, "post_id": 32013968, "comment_id": 51933064, "body": "The method you have tagged with <i>CORRECT WAY?</i> is the recommended approach, but as I commented on ikegami&#39;s answer, my preference is to print the BOM explicitly immediately after opening the file. Rather than relying on the &quot;magic number&quot; FEFF you can specify the character by Unicode name, as in <code>print $UTF &quot;\\N{BOM}&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1439570043, "post_id": 32014346, "comment_id": 51931837, "body": "As I mentioned in the blog post referenced in <a href=\"http://www.nu42.com/2014/05/why-is-perliofcrlf-set-on-bottom-most.html\" rel=\"nofollow noreferrer\">my answer</a>, it seems to me <code>PERLIO_F_CRLF</code> should <b><i>not</i></b> be set on the bottom-most &#39;unix&#39; layer on Windows. At least, that how I read <a href=\"http://perldoc.perl.org/perliol.html#Core-Layers\" rel=\"nofollow noreferrer\">perliol</a>: &quot;<i>Even on platforms that distinguish between <code>O_TEXT</code> and <code>O_BINARY</code> this layer is always <code>O_BINARY</code>.</i>&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1439570503, "post_id": 32014346, "comment_id": 51932098, "body": "@Sinan &#220;n&#252;r, <code>:unix</code> does use <code>O_BINARY</code> as perliol documents. And not adding <code>:crlf</code> will make the Perl output &quot;unreadable&quot; to a lot of programs. Try <code>perl -e&quot;binmode STDOUT; print qq{a\\nb\\nc\\n}&quot; &gt;a.txt &amp;&amp; notepad a.txt</code> It will also mess up virtually all Perl code that reads text files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439571968, "post_id": 32014346, "comment_id": 51932849, "body": "Note that a &quot;manual BOM&quot; can be printed as <code>&quot;\\N{BOM}&quot;</code> which I think is cleaner than adding <code>use File::BOM</code> and <code>:via(File::BOM)</code> to your program. If you use an open mode of just <code>UTF-16</code> then <code>Encode</code> will add a BOM for you but assumes BE encoding. There really should be a way if influencing that assumption. It would also be nice if the <code>open</code> pragma allowed multiple layers to be specified"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439572508, "post_id": 32014346, "comment_id": 51933111, "body": "So that something like <code>:encoding(UTF-16LE):via(File::BOM):crlf</code> could be specified"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439572587, "post_id": 32014346, "comment_id": 51933151, "body": "@Borodin, Should just be <code>:via(File::BOM,UTF-16le):crlf</code> (i.e. <code>UTF-16le</code> should be parameter to the BOM handler), though the syntax is probably not currently supported by <code>:via</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1439695298, "last_edit_date": 1439695298, "creation_date": 1439568629, "answer_id": 32014346, "question_id": 32013968, "link": "https://stackoverflow.com/questions/32013968/create-utf-16le-with-bom-and-crlf-line-separator-on-windows/32014346#32014346", "title": "create UTF-16LE with BOM and CRLF line separator on Windows", "body": "<blockquote>\n  <p><em>manual BOM, but CRLF OK</em></p>\n</blockquote>\n\n<p>Yes, the following is indeed correct:</p>\n\n<pre><code>:raw:encoding(UTF-16LE):crlf + manual BOM\n</code></pre>\n\n<ul>\n<li><code>:raw</code> \"clears\" the existing <code>:crlf</code> and <code>:encoding</code> layers.</li>\n<li><code>:encoding</code> converts between bytes and Code Points.</li>\n<li><code>:crlf</code> converts between CRLF and LF.</li>\n</ul>\n\n<p>So,</p>\n\n<pre><code>                               Read\n        ===================================================&gt;\n\n                               Code                 Code\n+------+   bytes   +------+   Points   +-------+   Points   +------+\n| File |-----------| :enc |------------| :crlf |------------| Code |\n+------+           +------+    CRLF    +-------+     LF     +------+ \n\n        &lt;===================================================\n                               Write\n</code></pre>\n\n<p>You want to perform the CRLF&hArr;LF conversion on the Code Points (not the bytes), as it does with this setup.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>CORRECT WAY?? : Automatic BOM, CRLF is OK</em></p>\n</blockquote>\n\n<p>While <code>:raw:encoding(UTF-16LE):crlf:via(File::BOM)</code> may work for a write handle, it doesn't look right (I would have expected <code>:raw:via(File::BOM,UTF-16LE):crlf</code>), and it fails miserably for a read handle (at least for me with Perl 5.16.3).</p>\n\n<p>I just looked, and the code behind <code>:via(File::BOM)</code> does some very questionable things. I wouldn't use it.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>why Perl is making a valid UTF-16 big-endian with correct BOM with encoding(UTF-16) while there is no BOM if I use either UTF-16LE or UTF-16BE without using an additional package File::BOM</em></p>\n</blockquote>\n\n<p>Because you might not want a BOM.</p>\n\n<blockquote>\n  <p><em>why out-of-the-box the <code>CRLF</code> handling seems buggy</em></p>\n</blockquote>\n\n<p>Adding layers adds them at the end of the list. If you want to add a layer elsewhere (as is the case here), you need to rebuild the list.</p>\n\n<p>It was suggested on the development list for Perl that there should be a way distinguishing between byte layers (e.g. <code>:unix</code>) and text layers (e.g. <code>:crlf</code>), and that adding a byte or encoding layer should dig down and place it at the appropriate spot. But noone's acted on this yet.</p>\n\n<p>In addition to simplifying your code, it would allow an UTF-16*<sup>[1]</sup> encoding layer to be added to <code>STDIN</code>/<code>STDOUT</code>/<code>STDERR</code> (or other existing handles). I believe that's not currently possible.</p>\n\n<hr>\n\n<ol>\n<li>Technically, any encoding for which CR != 13 or LF != 10 has this problem, so EBCDIC is also affected.</li>\n</ol>\n"}], "owner": {"reputation": 10389, "user_id": 317266, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b4f5deafa991b6d0f2b87ef20e9159fd?s=128&d=identicon&r=PG", "display_name": "Seki", "link": "https://stackoverflow.com/users/317266/seki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 1, "accepted_answer_id": 32014346, "answer_count": 1, "score": 4, "last_activity_date": 1439909783, "creation_date": 1439567290, "last_edit_date": 1439909783, "question_id": 32013968, "link": "https://stackoverflow.com/questions/32013968/create-utf-16le-with-bom-and-crlf-line-separator-on-windows", "title": "create UTF-16LE with BOM and CRLF line separator on Windows", "body": "<p>I need to produce some UTF-16LE encoded files with CRLF line separators on a <strong>Windows</strong> 7 box. (Currently with a Strawberry 5.20.1)</p>\n\n<p>I needed to mess a long time before getting a correct output and I wonder if my solution is the correct way to do because it seems overcomplicated in regard of other languages along Perl. In particular:</p>\n\n<ul>\n<li>why Perl is making a valid UTF-16 big-endian with correct BOM with <code>encoding(UTF-16)</code> while there is no BOM if I use either <code>UTF-16LE</code> or <code>UTF-16BE</code> without using an additional package <code>File::BOM</code>?</li>\n<li>why out-of-the-box the <code>CRLF</code> handling seems buggy (it is outputted as <code>0D 0A 00</code> instead of <code>0D 00 0A 00</code>) whithout some twiddling of the filters? I doubt it could be a true bug for a language with so many users...</li>\n</ul>\n\n<p>Here are my attempts with comments, what I found correct is the last statements</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse File::BOM;\nuse feature 'say';\n\nmy $UTF;\nmy $data = \"Hello, h\u00e9h\u00e9, \u4e2d\u6587.\\nsecond line : my 2\u20ac\"; # \u4e2d\u6587 = zhong wen = chinese\n\n# UTF16 BE + BOM but incorrect CRLF: \"0D 0A 00\" instead of \"0D 00 0A 00\"\nopen $UTF, \"&gt;:encoding(UTF-16)\", \"utf-16-std-be.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n# same as UTF-16BE (no BOM, incorrect CRLF)\nopen $UTF, \"&gt;:encoding(ucs2)\", \"utf-ucs2.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n# UTF16 BE, no BOM, incorrect CRLF\nopen $UTF, \"&gt;:encoding(UTF-16BE)\", \"utf-16-be-nobom.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n# UTF16 LE, no BOM, incorrect CRLF\nopen $UTF, \"&gt;:encoding(UTF-16LE)\", \"utf-16-le-nobom-wrongcrlf.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n# UTF16 LE, BOM OK but still incorrect CRLF\nopen $UTF, \"&gt;:encoding(UTF-16LE):via(File::BOM)\", \"utf-16-le-bom-wrongcrlf.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n# UTF16 LE non raw incorrect \n# (crlf by default on windows) -&gt; 0A =&gt; 0D 0A\nopen $UTF, \"&gt;:encoding(UTF-16LE):via(File::BOM)\", \"utf-16-le-bom-wrongcrlf2.txt\" or die $!;\nprint $UTF $data, \"\\x0a\"; # 0A is magically expanded to 0D 0A but wrong\nclose $UTF;\n\n# UTF16 LE + BOM + LF \n# raw -&gt; 0A =&gt; 0A\n# could be correct on UNIX but I need CRLF\nopen $UTF, \"&gt;raw::encoding(UTF-16LE):via(File::BOM)\", \"utf-16-le-bom-wrongcrlf3.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n# manual BOM, but CRLF OK\nopen $UTF, \"&gt;:raw:encoding(UTF-16LE):crlf\", \"utf-16-le-bommanual-crlfok.txt\" or die $!;\nprint $UTF \"\\x{FEFF}\";\nsay $UTF $data;\nclose $UTF;\n\n#auto BOM, CRLF OK ?\n#incorrect, says utf8 \"\\xA9\" does not map to Unicode at c:/perl/Dwimperl-5.14/perl/lib/Encode.pm line 176.\n# But I cannot see where the A9 comes from ??!\n#~ open $UTF, \"&gt;:raw:encoding(UTF-16LE):via(File::BOM):crlf\", \"utf-16-le-autobom-crlfok1.txt\" or die $!;\n#~ print $UTF $data;\n#~ say $UTF $data;\n#~ close $UTF;\n\n# WTF? \\n becomes 0D 00 0D 0A 00\nopen $UTF, \"&gt;:encoding(UTF-16LE):crlf:via(File::BOM)\", \"utf-16-le-autobom-crlf2.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n\n#CORRECT WAY?? : Automatic BOM, CRLF is OK\nopen $UTF, \"&gt;:raw:encoding(UTF-16LE):crlf:via(File::BOM)\", \"utf-16-le-autobom-crlfok3.txt\" or die $!;\nsay $UTF $data;\nclose $UTF;\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "hypnotoad"], "answers": [{"comments": [{"owner": {"reputation": 62484, "user_id": 20745, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dc5d9e7efea07afc78d5408680438507?s=128&d=identicon&r=PG", "display_name": "friedo", "link": "https://stackoverflow.com/users/20745/friedo"}, "edited": false, "score": 3, "creation_date": 1439571150, "post_id": 32013930, "comment_id": 51932458, "body": "<code>hypnotoad</code> is meant for production use, so hopefully you have fixed all your bugs before you need it. :)"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1466681843, "post_id": 32013930, "comment_id": 63424625, "body": "<code>hypnotoad</code> exec threads and just exits so debugger interface lost; with <code>morbo</code> there error: <code>######### Forked, but do not know how to create a new TTY. #########</code>"}, {"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 0, "creation_date": 1521369100, "post_id": 32013930, "comment_id": 85693378, "body": "And with <code>carton</code> that gives us: <code>carton exec perl -d $(carton exec which morbo) .&#47;site.pl</code>."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 8, "last_activity_date": 1439567165, "creation_date": 1439567165, "answer_id": 32013930, "question_id": 32013380, "link": "https://stackoverflow.com/questions/32013380/how-can-you-invoke-interactive-perl-debugging-with-hypnotoad-or-morbo/32013930#32013930", "title": "How can you invoke interactive Perl debugging with hypnotoad or morbo?", "body": "<p><code>morbo</code> and <code>hypnotoad</code> are perl programs, so you can launch them with the <code>-d</code> switch.</p>\n\n<pre><code>perl -d $(which morbo) myMojoApp.pl\n</code></pre>\n\n<p>It's probably easiest to sprinkle a bunch of <code>$DB::single = 1</code> statements around you app where you want your initial breakpoints to go and run <code>c</code> as the first debugger command. When you run a request that hits a breakpoint, you'll get a debugger prompt in the terminal that launched <code>morbo</code>.</p>\n\n<p><code>hypnotoad</code> will be trickier to use with the debugger because it quickly closes all the standard filehandles, calls <code>fork</code> several times, and becomes a daemon. </p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1466683264, "creation_date": 1466683264, "answer_id": 37991043, "question_id": 32013380, "link": "https://stackoverflow.com/questions/32013380/how-can-you-invoke-interactive-perl-debugging-with-hypnotoad-or-morbo/37991043#37991043", "title": "How can you invoke interactive Perl debugging with hypnotoad or morbo?", "body": "<p>Thanks to 'pink_mist'. You can do:</p>\n\n<pre><code>perl -d myMojoApp.pl daemon -l http://*:29849\n</code></pre>\n\n<p>But application config is not applyied. I do not know why.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3925410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQL3C.jpg?s=128&g=1", "display_name": "William Lindley", "link": "https://stackoverflow.com/users/3925410/william-lindley"}, "is_accepted": false, "score": 2, "last_activity_date": 1468605609, "last_edit_date": 1468605609, "creation_date": 1468590966, "answer_id": 38397938, "question_id": 32013380, "link": "https://stackoverflow.com/questions/32013380/how-can-you-invoke-interactive-perl-debugging-with-hypnotoad-or-morbo/38397938#38397938", "title": "How can you invoke interactive Perl debugging with hypnotoad or morbo?", "body": "<p>As JHThorsen <a href=\"https://groups.google.com/d/msg/mojolicious/iaddblZ4mV0/6K0Xdsj6iycJ\" rel=\"nofollow\">points out</a>, standard Mojolicious tests are actually ordinary Perl scripts, so you can debug your tests with:</p>\n\n<pre><code>perl -d t/mytest.t\n</code></pre>\n\n<p>The <code>-Ilib</code> adds the <code>lib/</code> directory to the @INC include list so your modules will be loaded.</p>\n\n<p>One catch is that many modules are not loaded until execution time, so if the debugger hassles you about symbols that aren't loaded yet, you'll probably want to set breakpoints after forcing a debug prompt with a carefully inserted</p>\n\n<pre><code>$DB::single = 1;\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5227901, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yRJJLLmj7yQ/AAAAAAAAAAI/AAAAAAAAAAs/jlEOwg0MHkk/photo.jpg?sz=128", "display_name": "George Menyhert", "link": "https://stackoverflow.com/users/5227901/george-menyhert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 2, "answer_count": 3, "score": 8, "last_activity_date": 1468605609, "creation_date": 1439565403, "question_id": 32013380, "link": "https://stackoverflow.com/questions/32013380/how-can-you-invoke-interactive-perl-debugging-with-hypnotoad-or-morbo", "title": "How can you invoke interactive Perl debugging with hypnotoad or morbo?", "body": "<p>I'm new to mojolicious but have been using Perl for some time.  I have to jump through some hoops but I can get the interactive Perl debugger (and Komodo) working with remote connections for Apache but I can't find anything about interactive debugging with hypnotoad or morbo.</p>\n\n<p>The command line examples in the basic tutorial on <a href=\"http://mojolicio.us/perldoc/Mojolicious/Guides/Tutorial#Hello-World\">http://mojolicio.us/perldoc/Mojolicious/Guides/Tutorial#Hello-World</a> work fine because you can launch them with perl -d, but I don't see anyway to tell the hypnotoadctl script to put the service in interactive debug mode ala apache.</p>\n\n<p>Is this not possible? Hints? Tips? Pointers?</p>\n"}, {"tags": ["perl", "oop", "memory-management", "reference", "cyclic-reference"], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1439569145, "post_id": 32013304, "comment_id": 51931327, "body": "So then what is the best practice? Is it to make parents always have strong references to children and children always have weak references to the parent?  I believe that would make it so if a child goes out of scope but the parent is still in scope, the child would still exist in memory."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 2, "creation_date": 1439572566, "post_id": 32013304, "comment_id": 51933142, "body": "It depends on the exact structure you&#39;ve got and the way you expect it to be used.  I think the weak ref from child to parent is the most common, but there may be instances where the other direction would be better."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1439998055, "post_id": 32013304, "comment_id": 52093879, "body": "Funny . . . I was thinking to myself why would you ever do it the other way around, but as my problem unravels it seems like that might actually be the better way to go!"}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": false, "score": 5, "last_activity_date": 1439565192, "creation_date": 1439565192, "answer_id": 32013304, "question_id": 32013133, "link": "https://stackoverflow.com/questions/32013133/can-using-scalarutils-weaken-cause-invalid-reference-problems/32013304#32013304", "title": "Can using Scalar::Util&#39;s weaken cause invalid reference problems?", "body": "<p>It wouldn't be an \"invalid reference\", it would be <code>undef</code>.  When the last non-weak reference to something goes out of scope (or is weakened), then all weak references to that something become <code>undef</code>.</p>\n\n<p>But yes, if the parent has only weak references to its children, and the children have only a weak reference to their parent, then if the only strong reference <code>$parent</code> goes out of scope, any children you still have other references to will now have <code>undef</code> in their <code>parent</code> field.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1439566991, "last_edit_date": 1439566991, "creation_date": 1439565698, "answer_id": 32013462, "question_id": 32013133, "link": "https://stackoverflow.com/questions/32013133/can-using-scalarutils-weaken-cause-invalid-reference-problems/32013462#32013462", "title": "Can using Scalar::Util&#39;s weaken cause invalid reference problems?", "body": "<ol>\n<li><p><code>my $x = { };</code></p>\n\n<pre><code>          +============+      +==========+\n$x -----&gt; [ Reference -------&gt;[ Hash     ]\n          [ REFCNT=1   |      [ REFCNT=1 ]\n          +============+      [          ]\n                              +==========+\n</code></pre></li>\n<li><p><code>my $y = $x;</code></p>\n\n<pre><code>          +============+      +==========+\n$x -----&gt; [ Reference -------&gt;[ Hash     ]\n          [ REFCNT=1   |  +--&gt;[ REFCNT=2 ]\n          +============+  |   [          ]\n                          |   +==========+\n          +============+  |\n$y -----&gt; [ Reference ----+\n          [ REFCNT=1   |\n          +============+\n</code></pre></li>\n<li><p><code>weaken($y);</code></p>\n\n<pre><code>          +============+      +==========+\n$x -----&gt; [ Reference -------&gt;[ Hash     ]\n          [ REFCNT=1   |  +--&gt;[ REFCNT=1 ]\n          +============+  |   [ BACKREFS ---+\n                          |   +==========+  |\n          +============+  |                 |\n$y -----&gt; [ Weak Ref -----+                 |\n     +--&gt; [ REFCNT=1   |                    |\n     |    +============+                    |\n     +--------------------------------------+\n</code></pre>\n\n<p>In addition to setting the <code>WEAKREF</code> flag in the reference, the referenced variable's reference count was lowered, and a backreference was created.</p></li>\n</ol>\n\n<h2>Scenario 1</h2>\n\n<p>If <code>$y</code> goes out of scope, the second reference's REFCNT will drop to zero, which will free the reference. This would normally drop the hash's reference count, except the freed reference was a weak reference. So it will simply remove itself from the list of backreferences instead.</p>\n\n<pre><code>          +============+      +==========+\n$x -----&gt; [ Reference -------&gt;[ Hash     ]\n          [ REFCNT=1   |      [ REFCNT=1 ]\n          +============+      [          ]\n                              +==========+\n</code></pre>\n\n<h2>Scenario 2</h2>\n\n<p>If <code>$x</code> goes out of scope, the first reference's REFCNT will drop to zero, which will free the reference, which will drop the reference count of the hash to zero, which will cause the hash to be freed. As part of that, each backreferenced variables will be made undef.</p>\n\n<pre><code>          +============+\n$y -----&gt; [ Undefined  |\n          [ REFCNT=1   |\n          +============+\n</code></pre>\n\n<p>At this point <code>print(\"$y-&gt;{foo}\\n\");</code> will croak (exit with an error message, not a segmentation violation), which you can avoid by checking if <code>$y</code> is defined first.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1439566991, "creation_date": 1439564600, "last_edit_date": 1495541642, "question_id": 32013133, "link": "https://stackoverflow.com/questions/32013133/can-using-scalarutils-weaken-cause-invalid-reference-problems", "title": "Can using Scalar::Util&#39;s weaken cause invalid reference problems?", "body": "<p>Please see this <a href=\"https://stackoverflow.com/questions/32011106/preventing-cyclic-reference-memory-leaks-in-perl\">related question</a> for some background information.</p>\n\n<p><em>Note: When I say \"invalid reference\" I mean a reference that points to no data.</em></p>\n\n<hr>\n\n<p>Assume we have the following data structure containing cyclic references:</p>\n\n<pre><code>       +-----------------------------------------------------+\n       |                                                     |\n       +--&gt;+============+    +==========+                    |\n           [ Reference -----&gt;[ Blessed  ]                    |\n$parent --&gt;+============+    [ Hash     ]                    |\n                             [          ]   +==========+     |\n                             [ children ---&gt;[ Array    ]     |\n                             [          ]   [          ]     |\n                             +==========+   [ 0: ---------+  |\n                                            [          ]  |  |\n                                            +==========+  |  |\n                                                          |  |\n       +--------------------------------------------------+  |\n       |                                                     |\n       +--&gt;+============+    +==========+                    |\n           [ Reference -----&gt;[ Blessed  ]                    |\n$child ---&gt;+============+    [ Hash     ]                    |\n                             [          ]                    |\n                             [ parent: ----------------------+\n                             [          ]\n                             +==========+\n</code></pre>\n\n<p>I understand that I can use <a href=\"http://search.cpan.org/~pevans/Scalar-List-Utils-1.42/lib/Scalar/Util.pm\" rel=\"nofollow noreferrer\"><code>Scalar::Util</code></a>'s <code>weaken</code> function to \"weaken\" references . . . but what happens if I weaken the reference from <code>parent-&gt;child</code> and also weaken the reference from <code>child-&gt;parent</code> and then either <code>$child</code> or <code>$parent</code> goes out of scope, but not the other?</p>\n\n<p><strong>Example:</strong> <code>$parent</code> goes out of scope so the reference is gone.</p>\n\n<pre><code>       +-----------------------------------------------------+\n       |                                                     |\n       +--&gt;+============+    +==========+                    |\n           [ Reference -----&gt;[ Blessed  ]                    |\n           +============+    [ Hash     ]                    |\n                             [          ]   +==========+     |\n                             [ children ---&gt;[ Array    ]     |\n                             [          ]   [          ]     |\n                             +==========+   [ 0: ---------+  |\n                                            [          ]  |  |\n                                            +==========+  |  |\n                                                          |  |\n                 would this break the link? ------------&gt; X  X\n                                                          |  |\n       +--------------------------------------------------+  |\n       |                                                     |\n       +--&gt;+============+    +==========+                    |\n           [ Reference -----&gt;[ Blessed  ]                    |\n$child ---&gt;+============+    [ Hash     ]                    |\n                             [          ]                    |\n                             [ parent: ----------------------+ &lt;--- would this parent object pointer now be invalid?\n                             [          ]\n                             +==========+\n</code></pre>\n\n<hr>\n\n<p>If I did this, and then the \"parent\" went out of scope, <strong><em>would the parent object be removed from memory because Perl's internal reference count for that object goes to 0?</em></strong> I ask this, because if <code>$child</code> still exists and needs to use some data from the parent object this would cause problems because the child object would now hold an invalid pointer to the parent.</p>\n"}, {"tags": ["perl", "junit", "perl-module", "tap"], "answers": [{"comments": [{"owner": {"reputation": 2005, "user_id": 328977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3610fa6c9f38e6f252d19e918632b8ba?s=128&d=identicon&r=PG", "display_name": "buff", "link": "https://stackoverflow.com/users/328977/buff"}, "edited": false, "score": 0, "creation_date": 1443389899, "post_id": 32372395, "comment_id": 53462786, "body": "I tried, unfortunately without any success. The file just didn&#39;t appear."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1441273979, "creation_date": 1441273979, "answer_id": 32372395, "question_id": 32012679, "link": "https://stackoverflow.com/questions/32012679/how-to-generate-junit-xml-using-minil-test/32372395#32372395", "title": "How to generate junit.xml using minil test?", "body": "<p>Just a guess: can't you use the <code>a&lt;file.tgz&gt;</code> option in HARNESS_OPTIONS in <a href=\"http://p3rl.org/TAP::Harness::Env\" rel=\"nofollow\">TAP::Harness::Env</a>?</p>\n"}], "owner": {"reputation": 2005, "user_id": 328977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3610fa6c9f38e6f252d19e918632b8ba?s=128&d=identicon&r=PG", "display_name": "buff", "link": "https://stackoverflow.com/users/328977/buff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441273979, "creation_date": 1439563120, "question_id": 32012679, "link": "https://stackoverflow.com/questions/32012679/how-to-generate-junit-xml-using-minil-test", "title": "How to generate junit.xml using minil test?", "body": "<p>I am using <a href=\"https://metacpan.org/release/Minilla\" rel=\"nofollow\"><code>minilla</code></a> for generating my module scaffold. While it works very well for me, I'd like to get generated <code>junit.xml</code> file with test results when running <code>minil test</code>.</p>\n\n<p>I found that it is possible to specify <code>tap_harness_args</code> in <code>minil.toml</code> configuration file. I tried </p>\n\n<pre><code>[tap_harness_args]\nformatter_class = \"TAP::Formatter::JUnit\"\n</code></pre>\n\n<p>which ensures that the tests output is formatted in JUnit format. That works well but the output is mixed up with minilla's other output so I can't easily redirect it to a file. Is there a way how to get only the test results to a file? Optimally, I'd still like to see the test results in TAP format in my terminal output at the same time (but I can live without it).</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1439764280, "post_id": 32013478, "comment_id": 51981677, "body": "The <a href=\"https://github.com/salva/p5-Net-SSH-Any\" rel=\"nofollow noreferrer\">development version</a> from GitHub already supports that via the <code>pipe</code> method. It should be considered an experimental feature yet though. Another option is to use the <code>stdin_data</code> option when calling <code>capture</code> or any other method. For instance: <code>$ssh-&gt;capture({stdin_data =&gt; join(&quot;\\n&quot;, @cmds, &quot;&quot;)})</code>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 3, "last_activity_date": 1439568840, "last_edit_date": 1439568840, "creation_date": 1439565740, "answer_id": 32013478, "question_id": 32012122, "link": "https://stackoverflow.com/questions/32012122/how-can-i-execute-a-series-of-commands-using-the-netsshany-module/32013478#32013478", "title": "How can I execute a series of commands using the Net::SSH::Any module?", "body": "<p>You'll have to chain your commands in the remote shell like this:</p>\n\n<pre><code>my $cwd = $ssh-&gt;capture( q{cd /usr/script &amp;&amp; pwd} );\n</code></pre>\n\n<hr>\n\n<p>You have to do it this way because even though both currently-supported backends to Net::SSH::Any provide other ways to do this (Net::OpenSSH has <a href=\"https://metacpan.org/pod/Net::OpenSSH#pty-pid-ssh-open2pty-opts-cmd\" rel=\"nofollow\"><code>open2pty</code></a> and Net::SSH2 has <a href=\"https://metacpan.org/pod/Net::SSH2::Channel\" rel=\"nofollow\">channels</a>), the Net::SSH::Any API doesn't expose these.</p>\n\n<p>For example, <code>system</code> invokes either Net::OpenSSH's <code>system</code> method or creates a Net::SSH2::Channel and invokes <code>process('exec' =&gt; $cmd)</code> (limited to one command per channel).</p>\n"}], "owner": {"reputation": 123, "user_id": 4132987, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ec93db1587110e3ff9040c50a93a4d11?s=128&d=identicon&r=PG&f=1", "display_name": "hanish", "link": "https://stackoverflow.com/users/4132987/hanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1439571023, "creation_date": 1439561389, "last_edit_date": 1439571023, "question_id": 32012122, "link": "https://stackoverflow.com/questions/32012122/how-can-i-execute-a-series-of-commands-using-the-netsshany-module", "title": "How can I execute a series of commands using the Net::SSH::Any module?", "body": "<p>I want to execute multiple commands in the same session after connecting to a server with Net::SSH::Any.</p>\n\n<p>My sample code is as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Net::SSH::Any;\n\nmy $host = \"ip address\";\nmy $user = \"user\";\nmy $passwd = \"pass\";\nmy $cmd1 = 'cd /usr/script';\n\nmy $ssh = Net::SSH::Any-&gt;new($host, user =&gt; $user, password =&gt; $passwd);\n$ssh-&gt;system($cmd1);\nmy $pwd = $ssh-&gt;capture(\"pwd\");\nprint $pwd;\n</code></pre>\n\n<p>I expected the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/usr/script\n</code></pre>\n\n<p>but instead I am getting:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/home/user\n</code></pre>\n\n<p>How can I execute multiple commands in a single session?</p>\n"}, {"tags": ["perl", "oop", "memory-leaks", "cyclic-reference"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1439558855, "post_id": 32011106, "comment_id": 51924760, "body": "Regarding the epic artwork: <a href=\"http://asciiflow.com/\" rel=\"nofollow noreferrer\">asciiflow.com</a>"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 3, "creation_date": 1439561125, "post_id": 32011106, "comment_id": 51926337, "body": "We talk about this in <a href=\"http://www.intermediateperl.com\" rel=\"nofollow noreferrer\">Intermediate Perl</a> when we create an object registry to track all animals in our barnyard example. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1439562796, "post_id": 32011106, "comment_id": 51927444, "body": "@simbabque, It was handrolled."}], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 2, "creation_date": 1439558565, "post_id": 32011124, "comment_id": 51924585, "body": "Cool I will try that out.  I wish I knew about this about a month ago... I&#39;ve got lots of references to weaken!"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1439819386, "post_id": 32011124, "comment_id": 52003380, "body": "Hmm there can still be some issues with this depending on how the objects are used... (see <a href=\"http://stackoverflow.com/questions/32013133/can-using-scalarutils-weaken-cause-invalid-reference-problems\">here</a>) But overall this does solve the primary problem of the memory leak so I have selected this answer."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 13, "last_activity_date": 1439558567, "last_edit_date": 1439558567, "creation_date": 1439558431, "answer_id": 32011124, "question_id": 32011106, "link": "https://stackoverflow.com/questions/32011106/preventing-cyclic-reference-memory-leaks-in-perl/32011124#32011124", "title": "Preventing cyclic reference memory leaks in Perl", "body": "<p><a href=\"http://search.cpan.org/perldoc?Scalar::Util#weaken\"><code>Scalar::Util</code></a> and specifically the <code>weaken</code> function. </p>\n\n<blockquote>\n  <p>The lvalue $ref will be turned into a weak reference. This means that it will not hold a reference count on the object it references. Also when the reference count on that object reaches zero, the reference will be set to undef. This function mutates the lvalue passed as its argument and returns no value.</p>\n</blockquote>\n\n<p>Set one - or both - of your references as \"weak\" and the daisy chain will unravel automagically when the anchors are destructed. </p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 1, "accepted_answer_id": 32011124, "answer_count": 1, "score": 11, "last_activity_date": 1439564596, "creation_date": 1439558378, "last_edit_date": 1495540702, "question_id": 32011106, "link": "https://stackoverflow.com/questions/32011106/preventing-cyclic-reference-memory-leaks-in-perl", "title": "Preventing cyclic reference memory leaks in Perl", "body": "<p>I recently asked a <a href=\"https://stackoverflow.com/questions/31971633/perl-memory-management-when-overwriting-objects\">question</a> about overwriting objects and memory management in Perl.  One of the answers I received notified me that I may have an issue with a script I recently wrote.</p>\n\n<p>I have a script with some very complex data structures that have many <code>parent-&gt;child / child-&gt;parent</code> relationships.  This also means that there are many objects that have cyclic references.  According to <a href=\"https://stackoverflow.com/questions/31971633/perl-memory-management-when-overwriting-objects/31974608#31974608\">this answer</a>, cyclic references can \"trick\" Perl's reference counting mechanism and cause memory leaks if they are not dealt with properly.</p>\n\n<hr>\n\n<p><strong>Example of a cyclic reference:</strong></p>\n\n<pre><code>       +-----------------------------------------------------+\n       |                                                     |\n       +--&gt;+============+    +==========+                    |\n           [ Reference -----&gt;[ Blessed  ]                    |\n$parent --&gt;+============+    [ Hash     ]                    |\n                             [          ]   +==========+     |\n                             [ children ---&gt;[ Array    ]     |\n                             [          ]   [          ]     |\n                             +==========+   [ 0: ---------+  |\n                                            [          ]  |  |\n                                            +==========+  |  |\n                                                          |  |\n       +--------------------------------------------------+  |\n       |                                                     |\n       +--&gt;+============+    +==========+                    |\n           [ Reference -----&gt;[ Blessed  ]                    |\n$child ---&gt;+============+    [ Hash     ]                    |\n                             [          ]                    |\n                             [ parent: ----------------------+\n                             [          ]\n                             +==========+\n</code></pre>\n\n<p>(<em>Disclaimer -- this is not my epic artwork -- Thanks @Ikegami for this sweet ASCII diagram!</em>)</p>\n\n<p><strong>Problem:</strong> Each object has a reference to the other . . . this means that once <code>$parent</code> and <code>$child</code> go out of scope, Perl's reference counter still thinks that a reference to each object exists so the memory is never freed.  You wind up with two objects in memory with no way to access the data of either of them!</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>My question is:</strong>  What is the proper way to deal with cyclic references to ensure Perl handles its cleanup properly?  How do you make sure Perl doesn't leave any pieces behind when all external references to a self-referential object are eliminated?</p>\n</blockquote>\n"}, {"tags": ["perl", "crypt", "cbc-mode"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1439557302, "post_id": 32010593, "comment_id": 51923736, "body": "Using <code>cat</code> and a system call to read a file is not the best of options to get the file&#39;s content."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439557836, "post_id": 32010826, "comment_id": 51924110, "body": "@Borodin Meh. I clicked the wrong button for the quote. Thanks. I overwrote it, though :P"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1439557755, "last_edit_date": 1439557755, "creation_date": 1439557474, "answer_id": 32010826, "question_id": 32010593, "link": "https://stackoverflow.com/questions/32010593/perl-cryptcbc-encrypts-decrypts-only-first-list/32010826#32010826", "title": "Perl Crypt:CBC encrypts/decrypts only first list", "body": "<p>The <a href=\"https://metacpan.org/pod/Crypt::CBC#finish\" rel=\"nofollow\">Crypt::CBC docs actually explain</a> how to encrypt a whole file.</p>\n\n<blockquote>\n  <p>The CBC algorithm must buffer data blocks internally until they are even multiples of the encryption algorithm's blocksize (typically 8 bytes). After the last call to crypt() you should call finish(). This flushes the internal buffer and returns any leftover ciphertext.</p>\n  \n  <p>In a typical application you will read the plaintext from a file or input stream and write the result to standard output in a loop that might look like this:</p>\n\n<pre><code>   $cipher = new Crypt::CBC('hey jude!');\n   $cipher-&gt;start('encrypting');\n   print $cipher-&gt;crypt($_) while &lt;&gt;;\n   print $cipher-&gt;finish();\n</code></pre>\n</blockquote>\n\n<p>So your program might look like this.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Crypt::CBC;\nuse File::Slurp;\n\nmy $scriptkey = read_file( '/tmp/scriptkeyfile' );\nchomp $scriptkey;\n\nopen my $fh, '&lt;', $ARGV[0] or die $!; # sanitize this!!!\n\nmy $encrypted;\nmy $cipher = Crypt::CBC-&gt;new( -key =&gt; $scriptkey, -salt =&gt; \"my_salt\" );\n$cipher-&gt;start('encrypting');\n$encrypted .= $cipher-&gt;crypt($_) while &lt;$fh&gt;;\n$encrypted .= $cipher-&gt;finish;\n\nclose $fh;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 4403108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dhlv9.jpg?s=128&g=1", "display_name": "Artur Szymczak", "link": "https://stackoverflow.com/users/4403108/artur-szymczak"}, "edited": false, "score": 0, "creation_date": 1439565997, "post_id": 32012508, "comment_id": 51929530, "body": "Thank you. It was what I was missing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1439562640, "creation_date": 1439562640, "answer_id": 32012508, "question_id": 32010593, "link": "https://stackoverflow.com/questions/32010593/perl-cryptcbc-encrypts-decrypts-only-first-list/32012508#32012508", "title": "Perl Crypt:CBC encrypts/decrypts only first list", "body": "<p><code>qx</code> is list context returns a list of lines, so</p>\n\n<pre><code>-&gt;encrypt(qx( ... ))\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>-&gt;encrypt($line1, $line2, $line3, ...)\n</code></pre>\n\n<p>but</p>\n\n<pre><code>-&gt;encrypt($plaintext)\n</code></pre>\n\n<p>is expected. Use <code>qx</code> in scalar context to return the entire output as one scalar.</p>\n\n<pre><code>my $file = qx( prog ... );\ndie(\"Can't execute prog: $!\\n\") if $? == -1;\ndie(\"prog killed by signal \".( $? &amp; 0x7F ).\"\\n\") if $? &amp; 0x7F;\ndie(\"prog exited with error \".( $? &gt;&gt; 8 ).\"\\n\") if $? &gt;&gt; 8;\n\nmy $cypher = Crypt::CBC-&gt;new( ... );\nprint $cypher-&gt;encrypt($file);\n</code></pre>\n\n<p>I'm assuming you aren't actually using <code>cat</code>, that it's just an example.</p>\n"}], "owner": {"reputation": 135, "user_id": 4403108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dhlv9.jpg?s=128&g=1", "display_name": "Artur Szymczak", "link": "https://stackoverflow.com/users/4403108/artur-szymczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 32012508, "answer_count": 2, "score": 2, "last_activity_date": 1439562640, "creation_date": 1439556746, "question_id": 32010593, "link": "https://stackoverflow.com/questions/32010593/perl-cryptcbc-encrypts-decrypts-only-first-list", "title": "Perl Crypt:CBC encrypts/decrypts only first list", "body": "<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse Crypt::CBC;\n\nmy $scriptkey = qx(cat /tmp/scriptkeyfile);\nchomp $scriptkey;\n\nprint new Crypt::CBC(-key=&gt;\"$scriptkey\",-salt=&gt;\"my_salt\")-&gt;encrypt(qx(cat $ARGV[0]));\n</code></pre>\n\n<p>This script only encrypts first line of given file. If I change encrypt to decrypt, it will only decrypt one line of given file. How to change this, to crypt whole file.</p>\n"}, {"tags": ["perl", "csv", "awk", "grep"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1439554677, "post_id": 32009755, "comment_id": 51922018, "body": "Please show the code that you are having a problem with. If there is none, as I suspect, then you should go away and write some as Stack Overflow is a nowledge base, not a free way of getting your job done. We will help you with <i>specific problems</i> with your code, but we won&#39;t ordinarily implement a solution to your specification"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1439554842, "post_id": 32009755, "comment_id": 51922105, "body": "@Borodin editwar! :D"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1439554878, "post_id": 32009755, "comment_id": 51922123, "body": "That is actually pretty clear Perl code on the first glance. Did you write that yourself?"}, {"owner": {"reputation": 141, "user_id": 3767953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d63deb1aec93f67b9add5fa30a235bc4?s=128&d=identicon&r=PG&f=1", "display_name": "user3767953", "link": "https://stackoverflow.com/users/3767953/user3767953"}, "edited": false, "score": 1, "creation_date": 1439554895, "post_id": 32009755, "comment_id": 51922136, "body": "I included the perl code I was talking about."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439555051, "post_id": 32009755, "comment_id": 51922244, "body": "How large are those files?"}, {"owner": {"reputation": 141, "user_id": 3767953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d63deb1aec93f67b9add5fa30a235bc4?s=128&d=identicon&r=PG&f=1", "display_name": "user3767953", "link": "https://stackoverflow.com/users/3767953/user3767953"}, "edited": false, "score": 0, "creation_date": 1439555231, "post_id": 32009755, "comment_id": 51922362, "body": "The first file is 49kB and the second file is 670kB."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439555417, "post_id": 32009755, "comment_id": 51922483, "body": "Ok. So not very long. I meant rows actually. But that is fine."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1439555595, "post_id": 32009755, "comment_id": 51922590, "body": "First, a tip for you: Parse the names into a hash with the numbers as keys. Then use that when reading the other file. I&#39;m going to answer with a very different approach."}], "answers": [{"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1439556296, "post_id": 32010293, "comment_id": 51923016, "body": "beat me to it! I would have added a warning perhaps in case IDs occur in one of the files that are not in the other - but probably unnecessary or an exercise for OP ;)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1439556225, "last_edit_date": 1439556225, "creation_date": 1439555800, "answer_id": 32010293, "question_id": 32009755, "link": "https://stackoverflow.com/questions/32009755/two-csv-files-change-one-csv-by-the-other-and-pull-out-that-line/32010293#32010293", "title": "Two csv files: Change one csv by the other and pull out that line", "body": "<p>Your code was failing because you only read the first line from the <code>$csv_score</code> file, and you tried to print <code>$string</code> every time it is changed. You also failed to remove the newline from the end of the lines from your <code>$csv_list</code> file. If you fix those things then it looks like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $csv_score, '&lt;', \"$ARGV[0]\" or die qq{Failed to open \"$ARGV[0]\" for input: $!\\n};\nopen my $csv_list, '&lt;', \"$ARGV[1]\" or die qq{Failed to open \"$ARGV[1]\" for input: $!\\n};\nopen my $out, \"&gt;$ARGV[0]_final.txt\" or die qq{Failed to open for output: $!\\n};\n\nmy $string = do {\n    local $/;\n    &lt;$csv_score&gt;;\n};\n\nwhile ( &lt;$csv_list&gt; ) {\n    chomp;\n\n    my ( $find, $replace ) = split /,/;\n    $string =~ s/$find/$replace/g;\n}\n\nprint $out $string;\n\nclose $csv_score;\nclose $csv_list;\nclose $out;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Acanthometra fusca,1,0.60042\nAcanthocyrta haeckeli,1,0.819671\nAcanthocolla cruciata,2,0.50421,0.527007\n10207,3,0.530422,0.624466\n</code></pre>\n\n<p>However that's not a safe way of doing things, as IDs may be found elsewhere than at the start of a line</p>\n\n<p>I would build a hash out of the <code>$csv_list</code> file like this, which also makes the program more concise</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10.1;\nuse autodie;\n\nmy %ids;\n{\n    open my $fh, '&lt;', $ARGV[1];\n    while ( &lt;$fh&gt; ) {\n        chomp;\n        my ($id, $name) = split /,/;\n        $ids{$id} = $name;\n    }\n}\n\nopen my $in_fh,  '&lt;',  $ARGV[0];\nopen my $out_fh, '&gt;', \"$ARGV[0]_final.txt\";\n\nwhile ( &lt;$in_fh&gt; ) {\n    s{^(\\d+)}{$ids{$1} // $1}e;\n    print $out_fh $_;\n}\n</code></pre>\n\n<p>The output is identical to that of the first program above</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1439556594, "creation_date": 1439556594, "answer_id": 32010550, "question_id": 32009755, "link": "https://stackoverflow.com/questions/32009755/two-csv-files-change-one-csv-by-the-other-and-pull-out-that-line/32010550#32010550", "title": "Two csv files: Change one csv by the other and pull out that line", "body": "<p>The problem with the code as written is that you only do this once:</p>\n\n<pre><code>my $string = &lt;$csv_score&gt;;\n</code></pre>\n\n<p>This reads <em>one line</em> from <code>$csv_score</code> and you don't ever use the rest. </p>\n\n<p>I would suggest that you need to:</p>\n\n<ul>\n<li>Read the first file into a hash</li>\n<li>Iterate the second file, and do a replace on the first column. </li>\n<li>using <code>Text::CSV</code> is generally a good idea for processing it, but it doesn't <em>seem</em> to be necessary for your example. </li>\n</ul>\n\n<p>So:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Text::CSV;\nuse Data::Dumper;\n\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1 } );\n\nmy %replace;\n\nwhile ( my $row = $csv-&gt;getline( \\*DATA ) ) {\n    last if $row-&gt;[0] =~ m/NEXT/;\n    $replace{ $row-&gt;[0] } = $row-&gt;[1];\n}\n\nprint Dumper \\%replace;\n\nmy $search = join( \"|\", map {quotemeta} keys %replace );\n$search =~ qr/($search)/;\n\nwhile ( my $row = $csv-&gt;getline( \\*DATA ) ) {\n    $row-&gt;[0] =~ s/^($search)$/$replace{$1}/;\n    $csv-&gt;print( \\*STDOUT, $row );\n    print \"\\n\";\n}\n\n__DATA__\n1127100,Acanthocolla cruciata  \n1127103,Acanthocyrta haeckeli  \n1127108,Acanthometra fusca \nNEXT\n1127108,1,0.60042  \n1127103,1,0.819671  \n1127100,2,0.50421,0.527007  \n10207,3,0.530422,0.624466 \n</code></pre>\n\n<p>Note - this still prints that last line of your source content:</p>\n\n<pre><code>\"Acanthometra fusca \",1,\"0.60042  \"\n\"Acanthocyrta haeckeli  \",1,\"0.819671  \"\n\"Acanthocolla cruciata  \",2,0.50421,\"0.527007  \"\n</code></pre>\n\n<p>(Your data contained whitespace, so <code>Text::CSV</code> wraps it in quotes)</p>\n\n<p>If you want to discard that, then you could test if the replace actually occurred:</p>\n\n<pre><code>if ( $row-&gt;[0] =~ s/^($search)$/$replace{$1}/ ) {\n    $csv-&gt;print( \\*STDOUT, $row );\n    print \"\\n\";\n}\n</code></pre>\n\n<p>(And you can of course, keep on using <code>split /,/</code> if you're sure you won't have any of the whacky things that <code>CSV</code> supports normally). </p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1439557119, "creation_date": 1439557119, "answer_id": 32010733, "question_id": 32009755, "link": "https://stackoverflow.com/questions/32009755/two-csv-files-change-one-csv-by-the-other-and-pull-out-that-line/32010733#32010733", "title": "Two csv files: Change one csv by the other and pull out that line", "body": "<p>I would like to provide a very different approach. </p>\n\n<p>Let's say you are way more comfortable with databases than with Perl's data structures. You can use <a href=\"https://metacpan.org/pod/DBD::CSV\" rel=\"nofollow\">DBD::CSV</a> to turn your CSV files into kind of relational databases. It uses Text::CSV under the hood (hat tip to @Sobrique). You will need to install it from CPAN as it's not bundled in the default <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow\">DBI</a> distribution though.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Printer; # for p\nuse DBI;\n\nmy $dbh = DBI-&gt;connect( \"dbi:CSV:\", undef, undef, { f_ext =&gt; '.csv' } );\n$dbh-&gt;{csv_tables}-&gt;{names}   = { col_names =&gt; [qw/id name/] };\n$dbh-&gt;{csv_tables}-&gt;{numbers} = { col_names =&gt; [qw/id int float/] };\n\nmy $sth_select = $dbh-&gt;prepare(&lt;&lt;'SQL');\nSELECT names.name, numbers.int, numbers.float\nFROM names\nJOIN numbers ON names.id = numbers.id\nSQL\n\n# column types will be silently discarded\n$dbh-&gt;do('CREATE TABLE result ( name CHAR(255), int INTEGER, float INTEGER )');\nmy $sth_insert = \n  $dbh-&gt;prepare('INSERT INTO result ( name, int, float ) VALUES ( ?, ?, ? ) ');\n\n$sth_select-&gt;execute;\nwhile (my @res = $sth_select-&gt;fetchrow_array ) {\n  p @res;\n  $sth_insert-&gt;execute(@res);\n}\n</code></pre>\n\n<p>What this does is set up column names for the two <em>tables</em> (your CSV files) as those do not have a first row with names. I made the names up based on the data types. It will then create a new <em>table</em> (CSV file) named <code>result</code> and fill it by writing one row at a time.</p>\n\n<p>At the same time it will output data (for debugging purposes) to <code>STDERR</code> through <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow\">Data::Printer</a>.</p>\n\n<pre><code>[\n    [0] \"Acanthocolla cruciata\",\n    [1] 2,\n    [2] 0.50421\n]\n[\n    [0] \"Acanthocyrta haeckeli\",\n    [1] 1,\n    [2] 0.819671\n]\n[\n    [0] \"Acanthometra fusca\",\n    [1] 1,\n    [2] 0.60042\n]\n</code></pre>\n\n<p>The resulting file looks like this:</p>\n\n<pre><code>$ cat scratch/result.csv \nname,int,float\n\"Acanthocolla cruciata\",2,0.50421\n\"Acanthocyrta haeckeli\",1,0.819671\n\"Acanthometra fusca\",1,0.60042\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1439572481, "last_edit_date": 1439572481, "creation_date": 1439571473, "answer_id": 32015170, "question_id": 32009755, "link": "https://stackoverflow.com/questions/32009755/two-csv-files-change-one-csv-by-the-other-and-pull-out-that-line/32015170#32015170", "title": "Two csv files: Change one csv by the other and pull out that line", "body": "<p>The general purpose text processing tool that comes with all UNIX installations is named <code>awk</code>:</p>\n\n<pre><code>$ awk -F, -v OFS=, 'NR==FNR{m[$1]=$2;next} $1=m[$1]' file1 file2\nAcanthometra fusca,1,0.60042\nAcanthocyrta haeckeli,1,0.819671\nAcanthocolla cruciata,2,0.50421,0.527007\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 3767953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d63deb1aec93f67b9add5fa30a235bc4?s=128&d=identicon&r=PG&f=1", "display_name": "user3767953", "link": "https://stackoverflow.com/users/3767953/user3767953"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 32010293, "answer_count": 4, "score": 1, "last_activity_date": 1439572481, "creation_date": 1439554161, "last_edit_date": 1439571917, "question_id": 32009755, "link": "https://stackoverflow.com/questions/32009755/two-csv-files-change-one-csv-by-the-other-and-pull-out-that-line", "title": "Two csv files: Change one csv by the other and pull out that line", "body": "<p>I have two CSV files. The first is a list file, it contains the ID and names. For example</p>\n\n<pre><code>1127100,Acanthocolla cruciata  \n1127103,Acanthocyrta haeckeli  \n1127108,Acanthometra fusca \n</code></pre>\n\n<p>The second is what I want to exchange and extract the line by the first number if a match is found. The first column of numbers correspond in each file. For example </p>\n\n<pre><code>1127108,1,0.60042  \n1127103,1,0.819671  \n1127100,2,0.50421,0.527007  \n10207,3,0.530422,0.624466   \n</code></pre>\n\n<p>So I want to end up with CSV file like this</p>\n\n<pre><code>Acanthometra fusca,1,0.60042  \nAcanthocyrta haeckeli,1,0.819671  \nAcanthocolla cruciata,2,0.50421,0.527007\n</code></pre>\n\n<p>I tried Perl but opening two files at once proved messy. So I tried converting one of the CSV files to a string and parse it that way, but didnt work. But then I was reading about <code>grep</code> and other one-liners but I am not familiar with it. Would this be possible with grep?</p>\n\n<p>This is the Perl code I tried</p>\n\n<pre><code>use strict;\nuse warnings;\n\n open my $csv_score, '&lt;', \"$ARGV[0]\" or die qq{Failed to open \"$ARGV[0]\" for input: $!\\n};\n open my $csv_list,  '&lt;', \"$ARGV[1]\" or die qq{Failed to open \"$ARGV[1]\" for input: $!\\n};\n open my $out, \"&gt;$ARGV[0]_final.txt\" or die qq{Failed to open for output: $!\\n};\n\n  my $string = &lt;$csv_score&gt;;\n\n  while ( &lt;$csv_list&gt; ) {\n\n    my ($find, $replace) = split /,/; \n    $string =~ s/$find/$replace/g;\n\n         if ($string =~ m/^$replace/){\n         print $out $string;\n      }\n  }\n\nclose $csv_score;\nclose $csv_list;\nclose $out;\n</code></pre>\n"}, {"tags": ["regex", "perl", "parsing", "split"], "comments": [{"owner": {"reputation": 19900, "user_id": 2899618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0aHX.jpg?s=128&g=1", "display_name": "Narendrasingh Sisodia", "link": "https://stackoverflow.com/users/2899618/narendrasingh-sisodia"}, "edited": false, "score": 1, "creation_date": 1439553298, "post_id": 32009327, "comment_id": 51921188, "body": "I think you&#39;ve misplaced backslash <code>ab cd q{ef gh \\&#39;&quot;} ij&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2470, "user_id": 2254382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b5fff7f4b2cddee56d3f0120339f84?s=128&d=identicon&r=PG", "display_name": "melwil", "link": "https://stackoverflow.com/users/2254382/melwil"}, "edited": false, "score": 1, "creation_date": 1439553565, "post_id": 32009515, "comment_id": 51921343, "body": "That&#39;s brilliant, sir. I was trying to sort this out myself. Good answer!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1439554205, "post_id": 32009515, "comment_id": 51921728, "body": "Note that the <code>q</code> operator 1) allows the delimiters and <code>\\ </code> to be escaped, 2) allows a variety of delimiters, and 3) allows whitespace between the <code>q</code> and the delimiter. But it&#39;s not clear whether these should be supported or not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439554287, "post_id": 32009515, "comment_id": 51921780, "body": "I mean that <code>q {foo}</code> and <code>q{foo}</code> are equivalent. And so is <code>q!foo!</code>. At least in Perl. It&#39;s not clear whether the OP wants to support this or not."}, {"owner": {"reputation": 11, "user_id": 1444462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7569a9cc9fa915b444db935ee5bb0eee?s=128&d=identicon&r=PG", "display_name": "user1444462", "link": "https://stackoverflow.com/users/1444462/user1444462"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439554582, "post_id": 32009515, "comment_id": 51921961, "body": "@ikegami Yes, I want to support all such combinations. In a nutshell, I want to treat the quoted-string as a single word, irrespective of its content."}, {"owner": {"reputation": 2470, "user_id": 2254382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b5fff7f4b2cddee56d3f0120339f84?s=128&d=identicon&r=PG", "display_name": "melwil", "link": "https://stackoverflow.com/users/2254382/melwil"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1439555313, "post_id": 32009515, "comment_id": 51922429, "body": "@ikegami can you link a doc for perl where it&#39;s explained what delimiters are allowed?"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 2, "last_activity_date": 1439554075, "last_edit_date": 1439554075, "creation_date": 1439553430, "answer_id": 32009515, "question_id": 32009327, "link": "https://stackoverflow.com/questions/32009327/how-to-parse-single-quoted-string-with-nested-quote-operator-in-perl/32009515#32009515", "title": "How to parse single-quoted string with nested quote-operator in perl?", "body": "<pre><code>\\s+(?![^{]*})\n</code></pre>\n\n<p>You can split by this.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/uF4oY4/33\" rel=\"nofollow\">https://regex101.com/r/uF4oY4/33</a></p>\n\n<p>If you have nested <code>{}</code> you can use this.</p>\n\n<pre><code>{(?:[^{}]*|(?R))*}\\K|\\s\n</code></pre>\n\n<p>See demo.</p>\n\n<p><a href=\"https://regex101.com/r/uF4oY4/34\" rel=\"nofollow\">https://regex101.com/r/uF4oY4/34</a></p>\n"}], "owner": {"reputation": 11, "user_id": 1444462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7569a9cc9fa915b444db935ee5bb0eee?s=128&d=identicon&r=PG", "display_name": "user1444462", "link": "https://stackoverflow.com/users/1444462/user1444462"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439575740, "creation_date": 1439552854, "last_edit_date": 1439575740, "question_id": 32009327, "link": "https://stackoverflow.com/questions/32009327/how-to-parse-single-quoted-string-with-nested-quote-operator-in-perl", "title": "How to parse single-quoted string with nested quote-operator in perl?", "body": "<p>I have following string:</p>\n\n<pre><code>my $str = 'ab cd q{ef gh '\\\"} ij';\n</code></pre>\n\n<p>I would like to split the string as:</p>\n\n<pre><code>$VAR1 = ['ab', 'cd', 'q{ef gh '\\\"}', 'ij']; \n</code></pre>\n\n<p>I have used parse_line() to parse it:</p>\n\n<pre><code>my @arr = parse_line('\\s+', 1, $str);\n</code></pre>\n\n<p>However, since the single-quote within the input string is not escaped and parse_line() cannot interpret q() operator, I'm getting empty array as output.</p>\n\n<p><strong>To be precise, I want to treat the quoted-string as a single word, irrespective of its content.</strong> The only solution I can think of is to write a custom function which can interpret the quote-operator. Is there any simple way to achieve it?</p>\n\n<p>Thanks!</p>\n"}]