[{"tags": ["linux", "bash", "perl", "sed", "tr"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1504147432, "post_id": 45969954, "comment_id": 78903735, "body": "How can we help you come up with a script to parse your data if the sample you show us is only <code>a bit like</code> your real data? This feels like we&#39;ll be peeling the onion for a while before getting to your real requirements."}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1504128873, "creation_date": 1504128873, "answer_id": 45970042, "question_id": 45969954, "link": "https://stackoverflow.com/questions/45969954/extract-multiple-items-on-single-line-using-grep-sed-perl/45970042#45970042", "title": "extract multiple items on single line using grep/sed/perl", "body": "<p>This <code>awk</code> should work:</p>\n\n<pre><code>awk -F ';' '{gsub(/=[^=]*=/, \"\"); $1=$1} 1' file\n\nP12345 999\nQ19283 777\nA918282 888\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1504129011, "creation_date": 1504129011, "answer_id": 45970066, "question_id": 45969954, "link": "https://stackoverflow.com/questions/45969954/extract-multiple-items-on-single-line-using-grep-sed-perl/45970066#45970066", "title": "extract multiple items on single line using grep/sed/perl", "body": "<pre><code>sed -r 's/.*accession=([^;]*);.*position=([^;]*).*/\\1 \\2/' textfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1504129772, "last_edit_date": 1504129772, "creation_date": 1504129466, "answer_id": 45970160, "question_id": 45969954, "link": "https://stackoverflow.com/questions/45969954/extract-multiple-items-on-single-line-using-grep-sed-perl/45970160#45970160", "title": "extract multiple items on single line using grep/sed/perl", "body": "<p>This perl one-liner</p>\n\n<pre><code>perl -wnE'say join \" \", /(?:accession|position)=([^;]+)/g' input.txt\n</code></pre>\n\n<p>prints the desired output.</p>\n"}, {"comments": [{"owner": {"reputation": 2776, "user_id": 8300271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0ORw.jpg?s=128&g=1", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/8300271/rahul-verma"}, "edited": false, "score": 0, "creation_date": 1504159769, "post_id": 45974364, "comment_id": 78907352, "body": "@brucezepplin: You can slightly modify your grep as mentioned here . Cheers !"}, {"owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1504167897, "post_id": 45974364, "comment_id": 78911958, "body": "thanks very much - that paste command was the key, and the <code>\\K\\w+</code> is neat. thanks."}, {"owner": {"reputation": 2776, "user_id": 8300271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0ORw.jpg?s=128&g=1", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/8300271/rahul-verma"}, "reply_to_user": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1504168277, "post_id": 45974364, "comment_id": 78912178, "body": "Glad I could help. :)  Welcome ^_^"}, {"owner": {"reputation": 950, "user_id": 977046, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8oeOa.jpg?s=128&g=1", "display_name": "Rick Riensche", "link": "https://stackoverflow.com/users/977046/rick-riensche"}, "edited": false, "score": 1, "creation_date": 1573315949, "post_id": 45974364, "comment_id": 103846082, "body": "Fantastic!  To make this an even stronger answer might consider adding a little explanation around that paste command (yes, people can rtfm to understand why two hyphens but that info could be included here to save them an extra google search :) )"}], "tags": [], "owner": {"reputation": 2776, "user_id": 8300271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0ORw.jpg?s=128&g=1", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/8300271/rahul-verma"}, "is_accepted": true, "score": 3, "last_activity_date": 1504159675, "creation_date": 1504159675, "answer_id": 45974364, "question_id": 45969954, "link": "https://stackoverflow.com/questions/45969954/extract-multiple-items-on-single-line-using-grep-sed-perl/45974364#45974364", "title": "extract multiple items on single line using grep/sed/perl", "body": "<ol>\n<li><p>You can update your <strong>grep</strong> expression like this.</p>\n\n<pre><code>grep -oP \"(accession=\\K\\w+)|(position=\\K\\d+)\" file\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>P12345\n999\nQ19283\n777\nA918282\n888\n</code></pre>\n\n<p>To format it the way you want, use <code>paste</code> : </p>\n\n<pre><code>grep -oP \"(accession=\\K\\w+)|(position=\\K\\d+)\" file | paste -d ' ' - -\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>P12345 999\nQ19283 777\nA918282 888\n</code></pre></li>\n<li><p>Another simple <strong>awk</strong> solution : </p>\n\n<pre><code>awk -F\"=|;\" '{print $3, $6}' file\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>P12345 999\nQ19283 777\nA918282 888\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2006, "favorite_count": 3, "accepted_answer_id": 45974364, "answer_count": 4, "score": 2, "last_activity_date": 1504159675, "creation_date": 1504128428, "question_id": 45969954, "link": "https://stackoverflow.com/questions/45969954/extract-multiple-items-on-single-line-using-grep-sed-perl", "title": "extract multiple items on single line using grep/sed/perl", "body": "<p>I have a massive text file a bit like this:</p>\n\n<pre><code>=?accession=P12345;=?position=999;\n=?accession=Q19283;=?position=777;\n=?accession=A918282;=?position=888;\n</code></pre>\n\n<p>and I would like to extract terms between <code>accession=</code> and <code>;</code>, and then also between <code>position=</code> and <code>;</code></p>\n\n<p>so that I get:</p>\n\n<pre><code>P12345 999\nQ19283 777\nA918282 888\n</code></pre>\n\n<p>The strings I need to grep between do get more complicated, so I imagine a hardcoded solution.</p>\n\n<p>I know I can take the \"grep between two strings\" approach:</p>\n\n<pre><code>grep -Po 'accession= \\K.*(?= ;)'\n</code></pre>\n\n<p>but I don't know how to get subsequent extractions from the same line of the input to also appear on the same line as the output. </p>\n\n<p>I really don't mind how this is done as long as I can call it from a linux command line.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "raspberry-pi", "raspbian"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1504118093, "post_id": 45967508, "comment_id": 78894057, "body": "You keep overwriting <code>$newCard</code> instead of appending to it"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1504118128, "post_id": 45967508, "comment_id": 78894077, "body": "<a href=\"https://stackoverflow.com/questions/10765311/how-to-read-to-and-write-from-a-pipe-in-perl\" title=\"how to read to and write from a pipe in perl\">stackoverflow.com/questions/10765311/&hellip;</a>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1504118245, "post_id": 45967508, "comment_id": 78894149, "body": "<code>&quot;-|&quot;</code> is for reading."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8539650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c727b2d571b12ef4eb6a99e3b001a36?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago Martins", "link": "https://stackoverflow.com/users/8539650/tiago-martins"}, "edited": false, "score": 0, "creation_date": 1504118401, "post_id": 45967550, "comment_id": 78894246, "body": "I swear this was my first try and didn&#39;t work. worked now. TY"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1504118583, "post_id": 45967550, "comment_id": 78894327, "body": "Don&#39;t use backticks.  Use <code>qx</code>.  eg. <code>my $newCard = qx@ python &#47;home&#47;pi&#47;myRead.py@;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1504118673, "post_id": 45967550, "comment_id": 78894388, "body": "@William Pursell, Why??? <code>`...`</code> is short for <code>qx`...`</code>, which is short for <code>readpipe(qq`...`)</code>."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1504119925, "post_id": 45967550, "comment_id": 78895054, "body": "@ikegami.  For the same reason one uses <code>$()</code> instead of backticks in a shell script.  Better readability."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1504120072, "post_id": 45967550, "comment_id": 78895114, "body": "@William Pursell, You could argue that <code>qx(...)</code> is more readable, but that&#39;s not what you recommended."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1504124826, "post_id": 45967550, "comment_id": 78897544, "body": "Argue on what basis? <code>qq@@</code> adds noise, unfamiliarity and complexity, all <i>deterrents</i> to readability. On top of that, it changes the meaning of <code>@</code>, a huge reduction in readability. Finally, <code>qq@@</code> also reduces usability (by preventing the interpolation of arrays). All that, and no benefits are added. It clearly hurts readability (and usability). /// On the other hand, <code>qq()</code> also adds noise and unfamiliarity, but also adds balanced delimiters which adds a modicum of readability. Enough to overcome the noise and unfamiliarity? debatable."}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1504150779, "post_id": 45967550, "comment_id": 78904489, "body": "Backticks in perl/shellscripts cannot be nested. Neither can <code>qx@@</code>. When you tell people not to use backticks, you give the impression that <code>qx</code> is somehow intrinsically different. The <code>qx</code> proponent voice is so loud it made me think <code>qx</code> had real advantages, like better argument parsing. It does not. To get strong argument handling, you need to use <code>open()</code>, <code>open2()</code>, or <code>open3()</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1504118074, "creation_date": 1504118074, "answer_id": 45967550, "question_id": 45967508, "link": "https://stackoverflow.com/questions/45967508/run-a-program-and-capture-its-output/45967550#45967550", "title": "Run a program and capture its output", "body": "<pre><code>my $newCard = `python2 /home/pi/myRead.py`;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8539650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c727b2d571b12ef4eb6a99e3b001a36?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago Martins", "link": "https://stackoverflow.com/users/8539650/tiago-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 45967550, "answer_count": 1, "score": 0, "last_activity_date": 1504118074, "creation_date": 1504117924, "last_edit_date": 1504118046, "question_id": 45967508, "link": "https://stackoverflow.com/questions/45967508/run-a-program-and-capture-its-output", "title": "Run a program and capture its output", "body": "<p>I have a Perl script that runs a python script but i need to pass information back to the Perl script.\nAnyone can help me to achieve this?</p>\n\n<p>This is my code so far</p>\n\n<pre><code>open(my $py, \"|-\", \"python2 /home/pi/myRead.py\") or die \"Cannot run Python script: $!\";\nwhile (&lt;$py&gt;) {\n    $newCard = $py;\n}\nclose($py);\n</code></pre>\n"}, {"tags": ["perl", "process"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1504115364, "post_id": 45966464, "comment_id": 78892500, "body": "The feature you are looking for is process throttling. Check out a module like <a href=\"http://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> or <a href=\"http://metacpan.org/pod/Forks::Super\" rel=\"nofollow noreferrer\"><code>Forks::Super</code></a>."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1504115415, "post_id": 45966464, "comment_id": 78892538, "body": "GNU Parallel is a Perl program that happens to do exactly what you want."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1504117732, "creation_date": 1504117732, "answer_id": 45967443, "question_id": 45966464, "link": "https://stackoverflow.com/questions/45966464/perl-running-unix-processes-and-monitoring-them-using-perl/45967443#45967443", "title": "perl: Running unix processes and monitoring them using perl", "body": "<pre><code>use Parallel::ForkManager qw( );\n\nmy $pm = Parallel::ForkManager-&gt;new(5);\nfor my $task (@tasks) {\n   $pm-&gt;start() and next;\n   my $exit_code = 0;\n   if (!eval {\n      ...\n      return 1;  # No exception\n   }) {\n      $exit_code = $! || $? &gt;&gt; 8 || 255;\n      warn($@);\n   }\n\n   $pm-&gt;finish($exit_code);\n}\n\n$pm-&gt;wait_all_children();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1504124119, "creation_date": 1504124119, "answer_id": 45968984, "question_id": 45966464, "link": "https://stackoverflow.com/questions/45966464/perl-running-unix-processes-and-monitoring-them-using-perl/45968984#45968984", "title": "perl: Running unix processes and monitoring them using perl", "body": "<p>You can get info from your process monitoring with <a href=\"https://metacpan.org/pod/Proc::ProcessTable\" rel=\"nofollow noreferrer\">Proc::ProcessTable</a></p>\n\n<p>This is an example: </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Proc::ProcessTable;\n\n$ref = new Proc::ProcessTable;\n\nforeach $proc (@{$ref-&gt;table}) {\n  if(@ARGV) {\n    next unless grep {$_ == $proc-&gt;{pid}} @ARGV;\n  }\n\n  print \"--------------------------------\\n\";\n  foreach $field ($ref-&gt;fields){\n    print $field, \":  \", $proc-&gt;{$field}, \"\\n\";\n  }\n}\n</code></pre>\n\n<p>If you\u00b4re using Windows, maybe you can use Win32::Process* modules. But I never used!</p>\n"}], "owner": {"reputation": 11, "user_id": 5455351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952e977dc152d8b7efee882efe3d4431?s=128&d=identicon&r=PG&f=1", "display_name": "Mitya Sheynman", "link": "https://stackoverflow.com/users/5455351/mitya-sheynman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1504125967, "answer_count": 2, "score": -1, "last_activity_date": 1504124119, "creation_date": 1504114124, "question_id": 45966464, "link": "https://stackoverflow.com/questions/45966464/perl-running-unix-processes-and-monitoring-them-using-perl", "closed_reason": "Needs details or clarity", "title": "perl: Running unix processes and monitoring them using perl", "body": "<p>I have 24 tasks (unix commands) in the list (file). they need to be executed by 5 at the given time. When a task completes the script should execute a next one until all 24 tasks are executed/competed. Meanwhile in foreground I have a while loop with \"ps\" command to monitor the activity. Any ideas?</p>\n"}, {"tags": ["perl", "design-patterns", "zeromq"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1504114544, "post_id": 45965914, "comment_id": 78892082, "body": "ZMQ looks more like for inter-process communication. SQL table can be easily used as queue, and it has persistence."}, {"owner": {"reputation": 316, "user_id": 2267790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec11f9459327dcdbd6febb5e67f25c21?s=128&d=identicon&r=PG", "display_name": "andyabel", "link": "https://stackoverflow.com/users/2267790/andyabel"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1504114682, "post_id": 45965914, "comment_id": 78892171, "body": "Thanks. That&#39;s where we started from, unfortunately we ended up with locking problems on the MySQL tables."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1504115268, "post_id": 45965914, "comment_id": 78892449, "body": "<code>select for update</code> should not cause problems. Redis lists can also be used as queues."}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1504118735, "post_id": 45965914, "comment_id": 78894429, "body": "Sounds like the Load Balancing Broker from The Guide would be a good fit. Maybe extended with some of the reliability patterns."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 2, "last_activity_date": 1504122176, "last_edit_date": 1504122176, "creation_date": 1504120519, "answer_id": 45968158, "question_id": 45965914, "link": "https://stackoverflow.com/questions/45965914/zeromq-choosing-correct-client-worker-model-for-a-call-center/45968158#45968158", "title": "ZeroMQ Choosing Correct Client-Worker Model for a Call Center", "body": "<h2>Sure. <sup> ... there is not a single, solo Archetype to match the Requirement List </sup><br>use several ZeroMQ Scalable Formal Communication Patterns</h2>\n\n<p>Typical software Project uses many ZeroMQ sockets ( with various Archetypes ) as a certain form of node-node signalisation and message-passing platform.</p>\n\n<p>It is fair to note, that automated Load-Balancers may work fine for automated processes, but not always so for processes, executed by Humans or interacting with Humans.</p>\n\n<p>Humans ( both the Call centre Agents and their Line-Supervisors ) introduce another layer of requirements - sometimes with a need to introduce non-just-Round-Robin workload distribution logic, sometimes need to switch a call from Agent A to another Agent B ( which a trivial archetype will simply not be capable of and might get into troubles, if it's hardwired-logic runs into a collision ( mutually blocked <code>REQ-REP</code> stale-mate being one such example ).</p>\n\n<p>So simply forget to wait for one super-powered archetype, but rather create a smart network of behaviours, that will cover your distributed-computing problem desired event-handling.</p>\n\n<p>There are many other aspects, one ought learn before taking the first ZeroMQ socket into service.</p>\n\n<ul>\n<li><p>failure resillience</p></li>\n<li><p>performance scaling</p></li>\n<li><p>latency-profiling ( high-priority voice-traffic, vs. low-priority logging )</p></li>\n<li><p>watchdog acknowledgements and timeout situations handling</p></li>\n<li><p>cross-compatibility issues ( version 2.1x vs 3.x vs 4.+ API )</p></li>\n<li><p>processing robustness against a malfunctioning agent / malicious attack / deadly spurious traffic storms ... to name just a few of problems</p></li>\n</ul>\n\n<p>all of which has some built-ins in the ZeroMQ toolbox, some of which may need some advanced thinking, so as to handle known constraints.</p>\n\n<hr>\n\n<h2>The Best Next Step?</h2>\n\n<p>A would advocate for a fabulous Pieter HINTJENS' book \"Code Connected, Volume 1\" -- for everyone, who is serious into distributed processing, this is a must-read -- do not hesitate to <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20%5Bzeromq%5D%20is%3Aanswer\">check other my posts</a> to find a direct URL to a <strong>PDF-version</strong> of this ZeroMQ Bible.</p>\n\n<p>Worth time and one's tears and sweat.</p>\n"}], "owner": {"reputation": 316, "user_id": 2267790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec11f9459327dcdbd6febb5e67f25c21?s=128&d=identicon&r=PG", "display_name": "andyabel", "link": "https://stackoverflow.com/users/2267790/andyabel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 45968158, "answer_count": 1, "score": 1, "last_activity_date": 1504122176, "creation_date": 1504112080, "question_id": 45965914, "link": "https://stackoverflow.com/questions/45965914/zeromq-choosing-correct-client-worker-model-for-a-call-center", "title": "ZeroMQ Choosing Correct Client-Worker Model for a Call Center", "body": "<p>I have a project that needs to be written in Perl so I've chosen ZeroMQ.</p>\n\n<p>There is a single client program, generating work for a variable number of workers. The workers are real human operators who will complete a task then request a new task. The job of the client program is keep all available workers busy all day. It's a call center.</p>\n\n<p>So each worker can only process one task at time, and there may be some time before requesting a new task. And the number of workers may vary during the day.</p>\n\n<p>The client needs to keep a queue of tasks ready to give to workers as and when they request them. Whenever the client queue gets low the client can generate more tasks to top-up the queue.</p>\n\n<p>What design pattern (i.e. what ZeroMQ Socket combination) should I use for this? I've skimmed through all the patterns in the 0MQ Guide and can't find anything that matches this.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "terminal"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8532893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cf11c1949ad96378a6406ccc2baab3?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/8532893/laurent"}, "edited": false, "score": 0, "creation_date": 1504112195, "post_id": 45965188, "comment_id": 78890774, "body": "I&#39;m sorry but this command does not work, both for html files in the desktop folder and some in subfolders."}, {"owner": {"reputation": 41, "user_id": 8532893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cf11c1949ad96378a6406ccc2baab3?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/8532893/laurent"}, "edited": false, "score": 0, "creation_date": 1504114386, "post_id": 45965188, "comment_id": 78891999, "body": "I have a folder on my desktop called sample_dir. Inside this folder, I have html files and subfolders also containing html files. I have used cd /Users/me/Desktop/sample_dir with the terminal and then paste @davecross answer, but none of the files (html inside the folder and subfolders) were changed."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1504115389, "post_id": 45965188, "comment_id": 78892520, "body": "Please run <code>ls -lR ~&#47;Desktop&#47;sample_dir | pbcopy</code> and then click <code>edit</code> under your question and paste the listing from your Clipboard - select the listing and format as code by clicking <code>{}</code> in the Formatting menu."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 41, "user_id": 8532893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cf11c1949ad96378a6406ccc2baab3?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/8532893/laurent"}, "edited": false, "score": 0, "creation_date": 1504173299, "post_id": 45965188, "comment_id": 78915739, "body": "@laurent: The test I just ran worked fine. It doesn&#39;t deal with sub-directories (because that&#39;s not what you originally asked for) but it successfully changed the files in my current directory. Are you sure that it&#39;s actually a pipe symbol in your files?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1504115559, "last_edit_date": 1504115559, "creation_date": 1504109466, "answer_id": 45965188, "question_id": 45965134, "link": "https://stackoverflow.com/questions/45965134/replace-a-pipe-on-osx-terminal-with-perl/45965188#45965188", "title": "Replace a pipe on OSX terminal with Perl", "body": "<p>The pipe character is a special symbol in regular expressions (it means \"or\"), so it needs to be escaped with <code>\\</code>.</p>\n\n<pre><code>perl -pi -e 's!Abel\\|Source!Abel%7CSource!g' *.html\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8532893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1cf11c1949ad96378a6406ccc2baab3?s=128&d=identicon&r=PG&f=1", "display_name": "laurent", "link": "https://stackoverflow.com/users/8532893/laurent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504115559, "creation_date": 1504109266, "question_id": 45965134, "link": "https://stackoverflow.com/questions/45965134/replace-a-pipe-on-osx-terminal-with-perl", "title": "Replace a pipe on OSX terminal with Perl", "body": "<p>I would like to mass replace a pipe with an encoding (%7C) in multiple html files that are on a folder on my desktop. I have tried the following commands without any success. Any help would be appreciated. </p>\n\n<pre><code>cd /Users/me/Desktop/sample_dir\nperl -pi -e 's!Abel|Source!Abel%7CSource!g;' *.html\nperl -pi -e 'sAbel|\\/Source!Abel%7CSource!g;' *.html\nperl -pi -e 'sAbel|\\Source!Abel%7CSource!g;' *.html\n</code></pre>\n"}, {"tags": ["perl", "routing", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 8512365, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/971607a9565ee39a9b5dbe46c49c7d4b?s=128&d=identicon&r=PG&f=1", "display_name": "artless boy", "link": "https://stackoverflow.com/users/8512365/artless-boy"}, "edited": false, "score": 0, "creation_date": 1504168320, "post_id": 45965311, "comment_id": 78912207, "body": "didn&#39;t succeed, must have failed somewhere :) but I change decided to change totally the app but thx anyway"}], "tags": [], "owner": {"reputation": 81, "user_id": 3444631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3203f1fb25ced51f6f026df8e2669cf0?s=128&d=identicon&r=PG&f=1", "display_name": "dubs", "link": "https://stackoverflow.com/users/3444631/dubs"}, "is_accepted": false, "score": 1, "last_activity_date": 1504109813, "creation_date": 1504109813, "answer_id": 45965311, "question_id": 45964185, "link": "https://stackoverflow.com/questions/45964185/mojolicious-routes-and-templates/45965311#45965311", "title": "Mojolicious routes and templates", "body": "<p>If you've started the web server correctly using defaults, your browser would point to x.x.x.x:3000 using the ip of the webserver. Mojolicious comes with a landing page and you can add .html files under public that will be served also. So if your angular app is already built out, that whole structure will need to go under public and you will need to delete the default template served under a new mojolicious app, should look something like this:</p>\n\n<pre><code>get '/' =&gt; sub {\n  my $c = shift;\n  $c-&gt;render(template =&gt; 'index');\n};\n</code></pre>\n\n<p>The commands to start over:</p>\n\n<pre><code>mojo generate lite_app myapp\nmkdir public\n&lt;copy your angular app into new directory public&gt;\n&lt;delete default route&gt;\nmorbo myapp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "is_accepted": false, "score": 0, "last_activity_date": 1543305007, "last_edit_date": 1543305007, "creation_date": 1543304270, "answer_id": 53494822, "question_id": 45964185, "link": "https://stackoverflow.com/questions/45964185/mojolicious-routes-and-templates/53494822#53494822", "title": "Mojolicious routes and templates", "body": "<p>You will have to point your index.html page as the static page in Mojolicious. \nFor example in full app:</p>\n\n<p><strong>In App:</strong></p>\n\n<pre><code>package MojoNg4;\nuse Mojo::Base 'Mojolicious';\nuse Mojo::SQLite;\n\n# This method will run once at server start\nsub startup {\n  my $self = shift;\n\n  # Load configuration from hash returned by \"my_app.conf\"\n  my $config = $self-&gt;plugin('Config');\n  $self-&gt;plugin('PODRenderer') if $config-&gt;{perldoc};\n\n  if (my $secrets = $self-&gt;config-&gt;{secrets}) {\n      $self-&gt;secrets($secrets);\n  }\n\n\n  $self-&gt;hook(\n      before_dispatch =&gt; sub {\n          my $c = shift;\n          $c-&gt;res-&gt;headers-&gt;header('Access-Control-Allow-Origin' =&gt; '*');\n      }\n  );\n\n  $self-&gt;helper( dbh =&gt; sub {state $dbh = Mojo::SQLite-&gt;new('sqlite:db/mojo-ng.db') });\n  $self-&gt;plugin(Minion =&gt; {SQLite =&gt; $self-&gt;dbh});\n  $self-&gt;plugin('Minion::Admin');\n\n  push @{$self-&gt;static-&gt;paths} =&gt; '/Users/Sachin/workspace/project/mojo_ng4/public/Demo';\n  # Router\n  my $r = $self-&gt;routes;\n  $r-&gt;get('/Demo/hello')-&gt;to('Demo#hello');\n\n  # Normal route to controller\n  #$r-&gt;get('/Demo/index.html')-&gt;to('Demo#index');\n  #$r-&gt;get('/Demo')-&gt;to('Demo#index');\n\n}\n\n1;\n</code></pre>\n\n<p>The magic line above is:</p>\n\n<pre><code> push @{$self-&gt;static-&gt;paths} =&gt; '/Users/Sachin/workspace/project/mojo_ng4/public/Demo';\n</code></pre>\n\n<p><strong>In Controller:</strong></p>\n\n<pre><code>package MojoNg4::Controller::Demo;\n\nuse Mojo::Base 'Mojolicious::Controller';\n\n# This action will render a template\nsub index {\n  my $self = shift;\n\n  # render demo app index page. rest of the routes will be taken care by\n  # angular4\n  $self-&gt;reply-&gt;static('Demo/index.html');\n}\n\n1;\n</code></pre>\n\n<p>Magic line is:</p>\n\n<pre><code>$self-&gt;reply-&gt;static('Demo/index.html');\n</code></pre>\n\n<p>I have a git repo demonstrating how angular project can be served using Mojolicious. Please have a look:\n<a href=\"https://github.com/tryorfry/mojolicious-ng4\" rel=\"nofollow noreferrer\">https://github.com/tryorfry/mojolicious-ng4</a></p>\n"}], "owner": {"reputation": 301, "user_id": 8512365, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/971607a9565ee39a9b5dbe46c49c7d4b?s=128&d=identicon&r=PG&f=1", "display_name": "artless boy", "link": "https://stackoverflow.com/users/8512365/artless-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1543305007, "creation_date": 1504106372, "question_id": 45964185, "link": "https://stackoverflow.com/questions/45964185/mojolicious-routes-and-templates", "title": "Mojolicious routes and templates", "body": "<p>I am trying to make my first app with mojolicious and I have some routing issue. I have an angular app and I just would like to implement it and makeit work on my web werver. So I have a \"app/index.html\" file but I don't know how to make my webserver point on it when I am like on this adress \"/appAngular\".</p>\n\n<p>I haven't find anythingabout it even if it seems to be basic, so if you can help i will be grateful.</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 1354, "user_id": 1007709, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iuIAp.jpg?s=128&g=1", "display_name": "jmcneirney", "link": "https://stackoverflow.com/users/1007709/jmcneirney"}, "edited": false, "score": 0, "creation_date": 1504106049, "post_id": 45963733, "comment_id": 78886947, "body": "<a href=\"https://metacpan.org/pod/DBIx::Abstract#DEPRICATED\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBIx::Abstract#DEPRICATED</a>   DBIx::Class isn&#39;t deprecated. That&#39;s a pretty significant difference :)"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1504107739, "creation_date": 1504107739, "answer_id": 45964659, "question_id": 45963733, "link": "https://stackoverflow.com/questions/45963733/difference-between-dbixclass-and-dbixabstract/45964659#45964659", "title": "Difference between DBIx::Class and DBIx::Abstract?", "body": "<p>DBIx::Abstract is a low-level tool for manipulating databases (it's quite like <a href=\"https://metacpan.org/pod/SQL::Abstract\" rel=\"nofollow noreferrer\">SQL::Abstract</a>, which DBIx::Class uses). It is not an ORM at all.</p>\n\n<p>It has also been deprecated (sorry, \"<a href=\"https://metacpan.org/pod/DBIx::Abstract#DEPRICATED\" rel=\"nofollow noreferrer\">depricated</a>\"!). So I can't recommend using it.</p>\n"}], "owner": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504107739, "creation_date": 1504105069, "question_id": 45963733, "link": "https://stackoverflow.com/questions/45963733/difference-between-dbixclass-and-dbixabstract", "title": "Difference between DBIx::Class and DBIx::Abstract?", "body": "<p>I am very new to perl and I was going through Perl ORM , I encountered DBIx::Class and DBIx::Abstract, from what I inferred they both seem to be ORMs . Is there any difference I am missing?\nThanks</p>\n"}, {"tags": ["html", "perl", "overriding", "stderr"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1504098109, "post_id": 45961095, "comment_id": 78880480, "body": "Or <a href=\"https://stackoverflow.com/a/3673935/1207195\">stackoverflow.com/a/3673935/1207195</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1504118168, "post_id": 45961095, "comment_id": 78894099, "body": "It&#39;s called a &quot;file handle&quot; (it holds a resources), not a file handler (it doesn&#39;t handle events)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1504099230, "post_id": 45961603, "comment_id": 78881477, "body": "Reminds me of the time I needed to delete something from <code>%INC</code> and realized we had <code>use vars &#39;%INC&#39;</code> for some weird global hash stuff that was sharing product details between .pl files..."}, {"owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "edited": false, "score": 0, "creation_date": 1504107596, "post_id": 45961603, "comment_id": 78887971, "body": "<code>CORE::select</code> worked like a charm for me! I don&#39;t think I need to import a library for this. Now, sorry if this looks like a silly question, but where is the output of <code>html()</code> going to @simbabque ? I thought I had to redirect it to STDERR, but it&#39;s not there. Is it being discarded?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "edited": false, "score": 0, "creation_date": 1504107780, "post_id": 45961603, "comment_id": 78888089, "body": "@JorgeFreitas you can of course redirect it to STDOUT, but you don&#39;t have to. That would mean it would end up in your web server&#39;s error log, and your sysadmin is not going to like it very much. We are opening a handle to write to a variable, that&#39;s what the <code>\\my $string</code> does. Your output is on that variable and you can even use it later on, or change it before using it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1504099177, "creation_date": 1504099177, "answer_id": 45961603, "question_id": 45961095, "link": "https://stackoverflow.com/questions/45961095/trouble-using-perls-select-to-redirect-prints-to-stderr-method-is-overwritte/45961603#45961603", "title": "Trouble using Perl&#39;s select() to redirect prints to STDERR, method is overwritten in a library", "body": "<p>As already mentioned in a <a href=\"https://stackoverflow.com/questions/45961095/trouble-using-perls-select-to-redirect-prints-to-stderr-method-is-overwritte/45961603#comment78880452_45961095\">comment by toolic</a>, the most obvious solution is to use <code>CORE::select</code>. The <code>CORE::</code> namespace always gives you the built-ins.</p>\n\n<pre><code>sub select { 1; }\n\nsub html {\n    print \"&lt;html&gt;&lt;/html&gt;\";\n}\n\nopen my $string_fh, '&gt;', \\my $string or die $!;\nmy $stdout = CORE::select $string_fh;\n\nhtml();\n\nCORE::select $stdout;\nprint \"hello world\";\n</code></pre>\n\n<p>As an alternative you could use <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"noreferrer\">Capture::Tiny</a>, which really only does the same thing under the hood, but looks nicer.</p>\n\n<pre><code>use Capture::Tiny 'capture';\n\nmy ($stdout, undef, undef) = capture { html() };\n</code></pre>\n\n<hr>\n\n<p>As an aside, this might be a good time to refactor that <code>select</code> function and all the code that uses it, and to tell the colleague how much you like them. Also, watch <a href=\"https://www.youtube.com/watch?v=4G5EaUNOhR0\" rel=\"noreferrer\">this talk from the Swiss Perl Workshop 2017</a>, which is relevant to the topic.</p>\n"}], "owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 45961603, "answer_count": 1, "score": 0, "last_activity_date": 1504099177, "creation_date": 1504097849, "question_id": 45961095, "link": "https://stackoverflow.com/questions/45961095/trouble-using-perls-select-to-redirect-prints-to-stderr-method-is-overwritte", "title": "Trouble using Perl&#39;s select() to redirect prints to STDERR, method is overwritten in a library", "body": "<p>I\u00b4m trying to run a specific subroutine from a Perl library that prints a big amount of HTML code while executing. After doing some research, I found out that it is possible to use <code>select()</code> method to temporarily change <code>print</code> output to, say, STDERR, hiding it from the front end completely and then restoring it to STDOUT once the library has done its job.</p>\n\n<p>Simple enough, but this won\u00b4t work for me. For some reason, someone created a method <code>select()</code> inside a critical library that has nothing to do with the above, but is a method to interact with our database. Therefore, whenever I try to use <code>my $filehandler = select(STDERR);</code>, I get the database method instead, which results in an error. And I can\u00b4t comment this method or remove it from the exported methods within that library without causing too much trouble on other scripts - including the library I'm trying to run.</p>\n\n<p>I can\u00b4t even use HTML block comment to get out of this because the library also prints comments. Are there any other alternatives to run the correct <code>select()</code> method? Or any other alternatives at all to temporarily prevent HTML from being printed?</p>\n\n<p>EDIT: For reference, my Perl version is v5.10.1 (*) built for x86_64-linux-thread-multi</p>\n"}, {"tags": ["perl", "cgi", "backticks"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1504097532, "post_id": 45960816, "comment_id": 78879977, "body": "Your content type is wrong. It should be <code>text&#47;plain</code> (that&#39;s not causing your problem, I just thought you should know)."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1504097903, "post_id": 45960816, "comment_id": 78880288, "body": "&quot;returns an empty string&quot; doesn&#39;t mean &quot;without issue&quot;. Some other things to try are to capture the stderr of the command (<code>$result = qx(lpc status all 2&gt;&amp;1)</code>) and to output the exit status (<code>$?</code>)."}, {"owner": {"reputation": 15, "user_id": 6241543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55227bea4449aedb29663c8d3ca3b72?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Kubik", "link": "https://stackoverflow.com/users/6241543/jan-kubik"}, "edited": false, "score": 0, "creation_date": 1504099719, "post_id": 45960816, "comment_id": 78881876, "body": "ah damn ..  in my original it is correct .. the latest one is my test case with IPC::System::Simple module and i wrote this snippet from memory and turned that around :)  -----------  the suggestion with STDERR to STDOUT still returns an empty string and $? returns &quot;0&quot;"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1504111577, "post_id": 45960816, "comment_id": 78890462, "body": "Does the shell script work without the sudo? If not, why do you expect the perl script executing a command to work without? If it does, why are you using sudo? This seems like a permission issue to me."}, {"owner": {"reputation": 15, "user_id": 6241543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55227bea4449aedb29663c8d3ca3b72?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Kubik", "link": "https://stackoverflow.com/users/6241543/jan-kubik"}, "edited": false, "score": 0, "creation_date": 1504127012, "post_id": 45960816, "comment_id": 78898574, "body": "yes it works without sudo"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6241543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55227bea4449aedb29663c8d3ca3b72?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Kubik", "link": "https://stackoverflow.com/users/6241543/jan-kubik"}, "edited": false, "score": 0, "creation_date": 1505912078, "post_id": 46102645, "comment_id": 79605965, "body": "you are actually totally correct .. i found that little tidbid out aswell and commands like lpc status all will work like this ---- commands like &quot;service lpd restart&quot; that actually need root access are still problematic but my solution for that is to have a small perl deamon running that waits on a socket"}], "tags": [], "owner": {"reputation": 689, "user_id": 5683411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef57d432c88881f4e9f9f52347d8a8a?s=128&d=identicon&r=PG", "display_name": "Ken Schumack", "link": "https://stackoverflow.com/users/5683411/ken-schumack"}, "is_accepted": true, "score": 0, "last_activity_date": 1504807696, "creation_date": 1504807696, "answer_id": 46102645, "question_id": 45960816, "link": "https://stackoverflow.com/questions/45960816/perl-cgi-script-backticks-with-root/46102645#46102645", "title": "Perl CGI Script backticks with root", "body": "<p>The key is to remember that the web server is running your program not you. When you run ls or lpc it works because you have /bin and /usr/sbin in your PATH. Run: which lpc ... when I do I get /usr/sbin/lpc which means that I need /usr/sbin in my PATH in order to run lpc without giving full path. Try adding the line:</p>\n\n<pre><code>print \"\\nPATH=\" . $ENV{'PATH'};\n</code></pre>\n\n<p>to the end of your program. If the required directory is not present, one thing you could do is add:</p>\n\n<pre><code>$ENV{'PATH'} .= \":/usr/sbin\";\n</code></pre>\n\n<p>or some such to your program before any system or back-tick calls</p>\n"}], "owner": {"reputation": 15, "user_id": 6241543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55227bea4449aedb29663c8d3ca3b72?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Kubik", "link": "https://stackoverflow.com/users/6241543/jan-kubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 46102645, "answer_count": 1, "score": 0, "last_activity_date": 1504807696, "creation_date": 1504097128, "last_edit_date": 1504109277, "question_id": 45960816, "link": "https://stackoverflow.com/questions/45960816/perl-cgi-script-backticks-with-root", "title": "Perl CGI Script backticks with root", "body": "<p>I wanted to run a Perl CGI script with backticks. </p>\n\n<p><strong>EXAMPLE:</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse warnings;\nuse strict;\n\nuse JSON;\nuse CGI;\nuse CGI::Carp 'fatalsToBrowser';\n\nmy $cgi = CGI-&gt;new;  \n\nmy $result = `lpc status all`;\nprint $cgi-&gt;header(-type =&gt; \"plain/text\", -charset =&gt; \"utf-8\"); \nprint $result;  \n</code></pre>\n\n<p>The script runs without issue but returns an empty string.<br>\nWhen I use a command like <code>ls</code> it works perfectly.<br>\nMy guess is that in this case the lpc command I need elevated privileges because when i just run the script from the bash as root it works fine.</p>\n\n<p><strong>The Question:</strong><br>\nIs there a way to run such a script with backticks over Apache? Is there a Perl module that can help me achieve it otherwise?  </p>\n\n<p>The only solution that came to my mind would be to write a service programm that listens to TCP ports themselves but I didn't want to go down that route.</p>\n\n<p><strong>NEW TRY:</strong><br>\nI have also tried making a bash script with the following content</p>\n\n<pre><code>#!/bin/bash\nsudo lpc status all  \n</code></pre>\n\n<p>I edited /etc/sudoers to this</p>\n\n<pre><code>apache   ALL=(ALL)   NOPASSWD:/path/to/script/lpcsa.sh\n</code></pre>\n\n<p>and changed the perl script as followed</p>\n\n<pre><code>my  $result = qx(bash lpcsa.sh);\n</code></pre>\n\n<p>out of the command line it works now but over HTTP it just does not want to :/</p>\n"}, {"tags": ["windows", "perl", "batch-file", "command-line"], "comments": [{"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1504360391, "post_id": 45957365, "comment_id": 78989020, "body": "What happens if you try : <code>perl time_calulation.pl &gt; d:\\Public\\Sample-Programs\\testlog.txt</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 47296, "user_id": 2152082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4e4a832231681b8a80323832e8af00?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/2152082/stephan"}, "edited": false, "score": 0, "creation_date": 1504621175, "post_id": 46048361, "comment_id": 79074342, "body": "if you introduce the <code>cmd</code> command, you can simply <code>cmd &#47;c &quot;perl time_calulation.pl &gt; d:\\Public\\Sample-Programs\\testlog.txt&quot; (doesn&#39;t even need the </code>start` command) (note the quotes!)"}], "tags": [], "owner": {"reputation": 160, "user_id": 6027771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e6b84a2a791c8e260ed0b95cbac292?s=128&d=identicon&r=PG&f=1", "display_name": "dasgar", "link": "https://stackoverflow.com/users/6027771/dasgar"}, "is_accepted": false, "score": 1, "last_activity_date": 1504593164, "creation_date": 1504593164, "answer_id": 46048361, "question_id": 45957365, "link": "https://stackoverflow.com/questions/45957365/start-command-in-bat-file-create-a-zero-byte-log/46048361#46048361", "title": "Start command in bat file create a zero byte log", "body": "<p>The start command from your post is telling Windows to do the following:  Use \"start\" to open a new command prompt, run the program \"time_calulation.pl\" in the new command prompt and pipe the STDOUT of the \"start\" command to the file \"d:\\Public\\Sample-Programs\\testlog.txt\".</p>\n\n<p>My first inclination would be to modify the Perl script to handle creating a log file.  Since you haven't shared the source code of that script, I'll provide a different solution.</p>\n\n<p>First, create batch file (time_calulation.bat) that calls the Perl script and pipes the STDOUT of the Perl script into a file.  From your example, the batch file would contain:</p>\n\n<pre><code>perl time_calulation.pl &gt; d:\\Public\\Sample-Programs\\testlog.txt\n</code></pre>\n\n<p>One might be tempted to then just do something like this:</p>\n\n<pre><code>start time_calulation.bat\n</code></pre>\n\n<p>However, the newly opened command prompt doesn't go away.  I'm going to guess that you do want it to go away after running the Perl script.  This behavior is described in the help for the start command.  It refers to the /K option for cmd.exe.  If you look at the help for cmd.exe, there is a /C option to cause the command prompt to terminate.</p>\n\n<p>So I believe the following will then do what you want:</p>\n\n<pre><code>start cmd.exe /C time_calulation.bat\n</code></pre>\n\n<p>This will open a new command prompt to run the batch file and will close that new command prompt after the batch file is finished.  And that batch file is running the Perl script and piping the STDOUT of the Perl script to a file.</p>\n"}], "owner": {"reputation": 101, "user_id": 5951584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZVPFa.jpg?s=128&g=1", "display_name": "shinoy.m", "link": "https://stackoverflow.com/users/5951584/shinoy-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504593164, "creation_date": 1504087183, "last_edit_date": 1504360288, "question_id": 45957365, "link": "https://stackoverflow.com/questions/45957365/start-command-in-bat-file-create-a-zero-byte-log", "title": "Start command in bat file create a zero byte log", "body": "<p>I have used <code>Start</code> command (in command prompt) to concurrently execute some programs. I just used a command like this :</p>\n\n<pre><code>start time_calulation.pl &gt; d:\\Public\\Sample-Programs\\testlog.txt\n</code></pre>\n\n<ul>\n<li><p>The program executes correctly, but <code>testlog.txt</code>log files has no data, it's a 0 (zero) byte file.</p></li>\n<li><p>With out <code>Start</code> the log file creates perfectly but I need to use <code>Start</code>. </p></li>\n</ul>\n\n<p>Please anybody help me to find a solution for this.</p>\n"}, {"tags": ["excel", "perl", "csv", "slurp"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1504089661, "post_id": 45956977, "comment_id": 78874120, "body": "Your third example has syntax errors. The quotes are broken. Having <code>\\r</code> as the line ending character is normal on MacOS. If you run this on the same mac, you can just use <code>chomp</code> and Perl will do the right thing. But then it seems like you want to read the whole file at once, so why bother with line endings anyway?"}, {"owner": {"reputation": 731, "user_id": 2129178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c325d9c68c23531633e54f8a1f77b18d?s=128&d=identicon&r=PG", "display_name": "Nicola Mingotti", "link": "https://stackoverflow.com/users/2129178/nicola-mingotti"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1504098005, "post_id": 45956977, "comment_id": 78880383, "body": "[1] Thank you for the syntax correction, but results are the same after it. [2] About line ending I disagree with you, if you run <code>ls -1 | hexdump -C</code> you can see line ending are encoded as NL not CR. [3] I put the chomp before <code>print $_</code> and now it prints all lines ! Great, now I understood what happened. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 731, "user_id": 2129178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c325d9c68c23531633e54f8a1f77b18d?s=128&d=identicon&r=PG", "display_name": "Nicola Mingotti", "link": "https://stackoverflow.com/users/2129178/nicola-mingotti"}, "is_accepted": false, "score": 0, "last_activity_date": 1504098897, "creation_date": 1504098897, "answer_id": 45961491, "question_id": 45956977, "link": "https://stackoverflow.com/questions/45956977/perl-slurp-in-excel-csv-file/45961491#45961491", "title": "Perl Slurp in Excel csv file", "body": "<p>Thank to a comment I was able to understand that strange behaviour in examples [2] and [3]. I write here the solution for people that may in future have the same problem.</p>\n\n<p>The point is that OSX encodes newlines with NL ='\\n' = 'x0a' and in the CVS file line endings are encoded with CR = '\\r' = 'x0d'. Perl was reading lines correctly but the output was mangled because the CR was keeping Perl writing always on the same line.</p>\n\n<p>So, the corrected code for examples [2] and [3] is:</p>\n\n<pre><code>[2] $&gt; cat coord2.csv | perl -e 'undef $/; $t=&lt;&gt;; \n           $t =~ s/\\x0d/\\x0a/g; print \"$t \\n\"; '\n\n\n[3] $&gt; cat coord2.csv | perl -e '$/=\"\\x0d\"; @L=&lt;&gt;; \n          for (@L) { s/\\x0d/\\x0a/g; print $_; } print \"\\n\"; '\n</code></pre>\n"}], "owner": {"reputation": 731, "user_id": 2129178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c325d9c68c23531633e54f8a1f77b18d?s=128&d=identicon&r=PG", "display_name": "Nicola Mingotti", "link": "https://stackoverflow.com/users/2129178/nicola-mingotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1504098897, "creation_date": 1504086054, "last_edit_date": 1504097091, "question_id": 45956977, "link": "https://stackoverflow.com/questions/45956977/perl-slurp-in-excel-csv-file", "title": "Perl Slurp in Excel csv file", "body": "<p>I am parsing an Excel CSV file in OSX El Capitan, the CSV is <a href=\"https://drive.google.com/open?id=0B14CFQt4kOBIODhyRVNOTWswS2s\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>The problem is newlines are marked as '\\x0d' (CR). </p>\n\n<p>1] I have been able to transform the file with newlines set as 'x0a' (NL) with</p>\n\n<pre><code>$&gt; perl -e 'open(fh, \"&lt;coord2.csv\") or die(\"can t open file\"); \n   binmode(fh); $/=\\10; \n   while ($t=&lt;fh&gt;) { $t =~ s/\\x0d/\\x0a/g; print \"$t\"; } print \"\\n\"; '\n</code></pre>\n\n<p>but before that i tried two other way and they failed, i would like to know if you have some exmplanation for the reason they fail.</p>\n\n<p>2]  I tried for a while to slurp all the file at once with:</p>\n\n<pre><code>$&gt; cat coord2.csv | perl -e 'undef $/; $t=&lt;&gt;; print \"$t \\n\"; '\n</code></pre>\n\n<p>but in output I don't see all the file, I see only:</p>\n\n<pre><code>Prelevacampioni ZARA;45.0640, 11.1943;F ;F 9.954467;F00;F599242;F\n</code></pre>\n\n<p>3] I tried also to set the <code>$/</code> variable, with:</p>\n\n<pre><code>$&gt; cat coord2.csv | perl -e '$/=\"\\x0d\"; @L=&lt;&gt;; \n                       for (@L) { print $_; } print \"\\n\"; '\n</code></pre>\n\n<p>but again, I see only the same output as in point [2].</p>\n\n<p>I am puzzled, can you explain me what I am doing wrong in point [2] and [3] ?</p>\n"}, {"tags": ["regex", "perl", "hex"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504086285, "post_id": 45956786, "comment_id": 78871885, "body": "What about <code>&quot;1234 1234&quot;</code> where the first is hexadecimal?"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504086483, "post_id": 45956786, "comment_id": 78872015, "body": "@Toto, yes they will be the case so i confuse how to separate it"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504086556, "post_id": 45956786, "comment_id": 78872072, "body": "Do you allways want the second number in the string?"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504086781, "post_id": 45956786, "comment_id": 78872249, "body": "@Toto, thanks for pointing out my problem , i has edited my question with the clarification."}], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1504086863, "post_id": 45956973, "comment_id": 78872309, "body": "thanks for the answer, then i think i need to match by <code>=</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1504204901, "last_edit_date": 1504204901, "creation_date": 1504086050, "answer_id": 45956973, "question_id": 45956786, "link": "https://stackoverflow.com/questions/45956786/matching-nth-occurrence-number-in-a-string-that-contain-hex-number/45956973#45956973", "title": "Matching nth occurrence number in a string that contain hex number", "body": "<p>Since the hex may contain only digits (<code>1234</code>) the two numbers can't be distinguished by format. </p>\n\n<p>The shown strings allow to match positionally (end of string) or based on <code>=</code> preceding it</p>\n\n<pre><code>my ($num) = $string =~ /([0-9]+)$/;\n\nmy ($num) = $string =~ /=\\s*([0-9]+)\\b/;\n</code></pre>\n\n<p>or make use of some other \"landmark\" in your strings, if different from shown samples.</p>\n\n<p>Given the clarification in the question's edit the second example above is suitable.</p>\n\n<hr>\n\n<p><em>Original post, before comments (edited)</em></p>\n\n<p>A number won't have letters (unless it involves exponents), so use a word boundary</p>\n\n<pre><code>my ($num) = $string =~ /\\b([0-9]+)\\b/;\n</code></pre>\n\n<p>for an (unsigned) integer. </p>\n\n<p>To allow <code>+/-</code> and/or a floating point format</p>\n\n<pre><code>my ($num) = $string =~ /( [+-]? [0-9]+\\.?[0-9]* )/x;\n</code></pre>\n\n<p>but note that this leaves out some formats used for numbers.  The <code>looks_like_number</code> from core <a href=\"http://perldoc.perl.org/5.8.9/Scalar/Util.html\" rel=\"nofollow noreferrer\">Scalar::Util</a> is more reliable, and one can first match more broadly and then filter the list with it.</p>\n\n<p>You can use <code>\\d</code> instead of <code>0-9</code> but this matches many extra characters unless it is used with <code>/a</code> modifier(s), available since 5.14. But note that the <code>/a</code> has a broader effect than restricting to ASCII only numbers (<code>\\d</code>). See <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> (search for <code>/a</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 3347, "user_id": 5722505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2356a75bc16cc5aae3fce6b5ff1b9e?s=128&d=identicon&r=PG&f=1", "display_name": "Egan Wolf", "link": "https://stackoverflow.com/users/5722505/egan-wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1504086201, "creation_date": 1504086201, "answer_id": 45957024, "question_id": 45956786, "link": "https://stackoverflow.com/questions/45956786/matching-nth-occurrence-number-in-a-string-that-contain-hex-number/45957024#45957024", "title": "Matching nth occurrence number in a string that contain hex number", "body": "<p>You can use <code>(\\d+$)</code> to match numbers only if they are at the end of string.</p>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1504086940, "creation_date": 1504086940, "answer_id": 45957281, "question_id": 45956786, "link": "https://stackoverflow.com/questions/45956786/matching-nth-occurrence-number-in-a-string-that-contain-hex-number/45957281#45957281", "title": "Matching nth occurrence number in a string that contain hex number", "body": "<p>How about?</p>\n\n<p>This is matching the second number that exists in the string:</p>\n\n<pre><code>while(&lt;DATA&gt;) {\n    my ($dec) = $_ =~ /.+\\b(\\d+)\\b/a;\n    say $dec;\n}\n\n__END__\nhex abc123 dec 456 blah\nhex 123123 dec 789456 blah\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>456\n789456\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 45956973, "answer_count": 3, "score": 1, "last_activity_date": 1504204901, "creation_date": 1504085474, "last_edit_date": 1504086648, "question_id": 45956786, "link": "https://stackoverflow.com/questions/45956786/matching-nth-occurrence-number-in-a-string-that-contain-hex-number", "title": "Matching nth occurrence number in a string that contain hex number", "body": "<p>I have string that contain both word, hex and digit I want to match the number in the string but when the hex contain digit it will mesh out with my digit.</p>\n\n<pre><code>my $string = \" aabb is = 35\"; #where aabb is hex number  \nmy $string1 = \" abc0 is = 75\" ; #where abc0 is hex number\nmy (@val1) = $string =~ /(\\d+)/g;\nprint \"$val1[0]\\n\";\n@val1 = $string1 =~ /(\\d+)/g;\nprint \" $val1[1]\\n\";\n</code></pre>\n\n<p>The above scripts can get the number after <code>=</code> that I want but I need to hard code <code>$val[0]</code> <code>$val1[1]</code> to get the number. Anyway I able to match the digit by ignore the hex number in case i am not sure which number will reach the number I want? So I can just print <code>$val1</code> to get the number I want.</p>\n\n<p>8/30 Update, Thanks for Toto point out</p>\n\n<p>Will be the case that first hex number contain all digit <code>1234</code> and also the number I want to match will not necessary be a last word in string. The number I want will not necessary the second number but will be after <code>=</code></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504085440, "post_id": 45956735, "comment_id": 78871271, "body": "<a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">named captures</a>"}, {"owner": {"reputation": 21, "user_id": 2914547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kmwqw.jpg?s=128&g=1", "display_name": "MadLord", "link": "https://stackoverflow.com/users/2914547/madlord"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504085546, "post_id": 45956735, "comment_id": 78871340, "body": "Where i can read about it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504085578, "post_id": 45956735, "comment_id": 78871367, "body": "just edited to add a link :)  Search for that term, &quot;named captures&quot;.  See an example of use in <a href=\"https://stackoverflow.com/a/45528723/4653379\">this post</a>, for instance"}, {"owner": {"reputation": 21, "user_id": 2914547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kmwqw.jpg?s=128&g=1", "display_name": "MadLord", "link": "https://stackoverflow.com/users/2914547/madlord"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504085658, "post_id": 45956735, "comment_id": 78871413, "body": "Oh, its from Perl 5.10. Thanks."}], "owner": {"reputation": 21, "user_id": 2914547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kmwqw.jpg?s=128&g=1", "display_name": "MadLord", "link": "https://stackoverflow.com/users/2914547/madlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "closed_date": 1504087774, "answer_count": 0, "score": 2, "last_activity_date": 1504087799, "creation_date": 1504085351, "question_id": 45956735, "link": "https://stackoverflow.com/questions/45956735/what-does-this-regular-expression-mean-word", "closed_reason": "Duplicate", "title": "What does this regular expression mean - &#39;(?&lt;word&#39;?", "body": "<p>I found this regular expression in <a href=\"http://search.cpan.org/~rtkh/Raisin-0.72/lib/Raisin.pm\" rel=\"nofollow noreferrer\">Raisin</a> code:</p>\n\n<pre><code>my ($a, $b, $r) = (\"(?&lt;$token&gt;\", ')', undef);\n</code></pre>\n\n<p>In this case $token is some word (param name). This code used in functon for creating regular expression. Sample result for <code>/users/:id</code> is:</p>\n\n<pre><code>/users/(?&lt;id&gt;[^/]+?)(?:\\.[^.]+?)?\n</code></pre>\n\n<p>I dont understand what does its mean: <code>(?&lt;id&gt;</code> ?</p>\n\n<p>I know positive and negative look-behind - <code>(?&lt;=</code> and <code>(?&lt;!</code>. But i don`t know this.</p>\n"}, {"tags": ["linux", "perl", "linux-kernel", "inotify", "procfs"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1504067474, "post_id": 45951874, "comment_id": 78862109, "body": "I believe the whole point of the <code>&#47;proc</code> pseudo-filesystem is to aggregate under one simple structure what would be many different system calls or direct access to protected kernel memory."}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1504093434, "post_id": 45951874, "comment_id": 78876871, "body": "Inotify watches <i>can not</i> prevent unmounting of filesystem. The documentation even mentions the specialized inotify event, that gets dispatched when the filesystem is unmounted: &quot;IN_UNMOUNT - Filesystem containing watched object was unmounted&quot;. And if you were to read a tiny bit on the subject, you would discover, that inotify/fanotify have been specifically created to address issue of their predecessor dnotify, which didn&#39;t support unmounting watched directory."}, {"owner": {"reputation": 24624, "user_id": 5353461, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh4.googleusercontent.com/-kpRTzH5zyzs/AAAAAAAAAAI/AAAAAAAAAAA/ICc26Nac6mY/photo.jpg?sz=128", "display_name": "Tom Hale", "link": "https://stackoverflow.com/users/5353461/tom-hale"}, "edited": false, "score": 0, "creation_date": 1504235087, "post_id": 45951874, "comment_id": 78945328, "body": "Incorrect, they <a href=\"https://sort.symantec.com/public/documents/sfha/5.1sp1/linux/productguides/html/sf_notes/ch01s09s04s12.htm\" rel=\"nofollow noreferrer\">can indeed</a>."}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1504302955, "post_id": 45951874, "comment_id": 78977786, "body": "@TomHale No, they can not. The passage, cited in my comment, comes from the <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow noreferrer\">Linux manpage of inotify</a>, and it explicitly says, that partitions with inotify-watched objects can be unmounted. You have linked to Symantec article, which mentions a known issue of Veritas File System (a proprietary HP UX file system, ported to Linux a while ago). That article acknowledges the issue as a bug, and notes lack of workaround. AFAIK, none of filesystems, officially supported by upstream Linux, exhibit such issues."}, {"owner": {"reputation": 24624, "user_id": 5353461, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh4.googleusercontent.com/-kpRTzH5zyzs/AAAAAAAAAAI/AAAAAAAAAAA/ICc26Nac6mY/photo.jpg?sz=128", "display_name": "Tom Hale", "link": "https://stackoverflow.com/users/5353461/tom-hale"}, "edited": false, "score": 0, "creation_date": 1504325652, "post_id": 45951874, "comment_id": 78981316, "body": "I have experienced it on <code>btrfs</code>, the transcript showing it happening is shown <a href=\"https://unix.stackexchange.com/q/386877/143394\">here</a>."}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1504335532, "post_id": 45951874, "comment_id": 78982862, "body": "@TomHale &quot;the transcript showing it&quot; \u2014 the transcript hardly shows anything. At most, it can be taken to mean, that: 1. syncthing is preventing unmounting of the directory 2. <code>lsof</code> fails to identify the source of issue. Why do you assume, that this has something to do with inotify, rather than, for example, some brtfs-specific bug in <code>lsof</code>? What are contents of syncthing&#39;s <code>&#47;proc&#47;xxx&#47;fd&#47;</code> when <code>unmount</code> fails?"}], "answers": [{"comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1504072115, "post_id": 45951937, "comment_id": 78863517, "body": "<i>&quot;an alternate interface wouldn&#39;t be any faster&quot;</i> - the difference is that &quot;files&quot; in proc are text streams, so kernel has to write data in textual format and then application has to parse it back, whereas alternative interface could provide &quot;raw&quot; data."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1504078918, "post_id": 45951937, "comment_id": 78867141, "body": "@el.pescado: Converting single integer to a string and back is rarely a bottleneck. Opening a file is much more consuming (at least, because it is a <i>syscall</i>, not a pure user-space function). But, as @duskwuff said, there is no other interface to <code>&#47;proc</code>."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1504067442, "creation_date": 1504067442, "answer_id": 45951937, "question_id": 45951874, "link": "https://stackoverflow.com/questions/45951874/system-call-interface-to-proc-information/45951937#45951937", "title": "System call interface to /proc information", "body": "<p>No, there is no other interface to <code>/proc</code> nodes besides the <code>open()</code> and <code>read()</code> system calls.</p>\n\n<p>Keep in mind that nodes under <code>/proc</code> aren't real files. Reads from them will return as quickly as the content can be generated by the kernel -- an alternate interface wouldn't be any faster.</p>\n\n<p>That all being said, reimplementing your shell script in any programming language that can read files directly (like Perl) will already speed it up dramatically. In a shell script, you're launching a new process, or possibly even multiple processes, every time you call <code>ls</code> or <code>grep</code>. Launching processes is relatively slow -- getting away from that will probably solve your speed problems.</p>\n"}], "owner": {"reputation": 24624, "user_id": 5353461, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh4.googleusercontent.com/-kpRTzH5zyzs/AAAAAAAAAAI/AAAAAAAAAAA/ICc26Nac6mY/photo.jpg?sz=128", "display_name": "Tom Hale", "link": "https://stackoverflow.com/users/5353461/tom-hale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1601070841, "creation_date": 1504066932, "last_edit_date": 1601070841, "question_id": 45951874, "link": "https://stackoverflow.com/questions/45951874/system-call-interface-to-proc-information", "title": "System call interface to /proc information", "body": "<p>Can I get the information stored in <code>/proc</code> via system calls instead of processing text from files?</p>\n\n<hr>\n\n<p>I am trying to <a href=\"https://unix.stackexchange.com/q/386877/143394\">list inotify watches which are preventing the unmount of a filesystem</a>.</p>\n\n<p>Ive written part of a shell script, but it's already too slow. I'm thinking of rewriting in Perl.</p>\n\n<p>Is there a way to get the <code>/proc</code> information from system calls for a further speed up?</p>\n"}, {"tags": ["perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1504068112, "post_id": 45951187, "comment_id": 78862285, "body": "Hi , i am not sure how to add the code above with my @array. Can you explain more to me?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1504080540, "post_id": 45951187, "comment_id": 78868171, "body": "<code>@sorted = sort { &lt;ikegami answer&gt; } @array</code>;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1504081668, "post_id": 45951187, "comment_id": 78868839, "body": "This type of sorting would greatly profit from a <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian Transformation</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1504061975, "creation_date": 1504061975, "answer_id": 45951187, "question_id": 45951050, "link": "https://stackoverflow.com/questions/45951050/multiple-sorting-by-alphabet-and-hexadecimal-in-perl/45951187#45951187", "title": "Multiple sorting by alphabet and hexadecimal in perl", "body": "<pre><code>sort {\n   my @a_keys = $a =~ /\\{([^{}]*)\\}/g;\n   my @b_keys = $b =~ /\\{([^{}]*)\\}/g;\n\n   $a_keys[0] cmp $b_keys[0]\n      ||\n   hex($a_keys[1]) &lt;=&gt; hex($b_keys[1])\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1504147164, "post_id": 45958004, "comment_id": 78903671, "body": "Thanks @Dave for the clear explanation. This help me more understand in <code>sort</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1504089588, "last_edit_date": 1504089588, "creation_date": 1504088927, "answer_id": 45958004, "question_id": 45951050, "link": "https://stackoverflow.com/questions/45951050/multiple-sorting-by-alphabet-and-hexadecimal-in-perl/45958004#45958004", "title": "Multiple sorting by alphabet and hexadecimal in perl", "body": "<p>I hope it's obvious why your code didn't work.</p>\n\n<pre><code>my @sorted = sort { $a &lt;=&gt; $b } @array;\nmy @sorted1 = sort { hex $a &lt;=&gt; hex $b } @sorted;\n</code></pre>\n\n<p>Two problems here. Firstly, your second sort is just going to overwrite the first. The first sort you're running is completely pointless. Your code has exactly the same effect as:</p>\n\n<pre><code>my @sorted1 = sort { hex $a &lt;=&gt; hex $b } @array;\n</code></pre>\n\n<p>And secondly, you're sorting by the wrong things. Your first sort is sorting by the whole string and the second one sorts by the whole string passed through the <code>hex()</code> function (and given that your strings aren't valid hex strings, that's not a good idea).</p>\n\n<p>Let's address the two issues separately.</p>\n\n<p>What does it actually mean to sort by two different things? Usually, it implies a hierarchy in the sorts - one will be more important than the other. It means \"sort by this and if two records have the same value as each other for that, then sort them by this secondary value\". In your case, you're probably saying \"sort by the string between the first pair of braces and if two records have the same value there, then sort by the hex value between the second pair of braces\". The second sort value is a \"tie-breaker\" when the first sort value is the same in two records.</p>\n\n<p>And Perl's <code>sort</code> is great for multi-level sorts like this. When you write a sort expression, it needs to return -1, 0 or 1. It returns -1 or 1 if the two values you're comparing are different and 0 if they are the same. And, as 0 is a false value to Perl, that makes it easy to stack sorts on top of each other.</p>\n\n<pre><code>my @sorted = sort {\n   sort_expression_1\n     or\n   sort_expression_2\n} @array;\n</code></pre>\n\n<p>If <code>sort_expression_1</code>  returns -1 or 1, then that's true and the Boolean expression \"short-circuits\" at that point. If the two values are the same, then <code>sort_expression_1</code> returns 0 and the Boolean expression goes on to evaluate <code>sort_expression_2</code>.</p>\n\n<p>So what do we actually want to sort by? Well, we need to extract the strings between the braces and sort by those. Something like this, perhaps:</p>\n\n<pre><code>my @sorted = sort {\n  # Extract the sortable bits into arrays\n  my @a_bits = $a =~ /\\{(.+?)}/g;\n  my @b_bits = $b =~ /\\{(.+?)}/g;\n\n  # Compare the strings\n  $a_bits[0] cmp $b_bits[0]\n    or\n  # If the strings are the same, compare the hex numbers\n  hex($a_bits[1]) &lt;=&gt; hex($b_bits[i])\n} @array;\n</code></pre>\n\n<p>For more efficient sorting, you can use the \"<a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian Transform</a>\" which breaks out the bits you want to sort by before starting the actual sort.</p>\n\n<pre><code>my @sorted =\n  map { $_-&gt;[0] }\n  sort { $a-&gt;[1] cmp $b-&gt;[1] or hex($a-&gt;[2]) &lt;=&gt; hex($b-&gt;[2]) }\n  map { [ $_, /\\{(.+?)}/g ] } @array;\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 45958004, "answer_count": 2, "score": -1, "last_activity_date": 1504089588, "creation_date": 1504060741, "last_edit_date": 1504065197, "question_id": 45951050, "link": "https://stackoverflow.com/questions/45951050/multiple-sorting-by-alphabet-and-hexadecimal-in-perl", "title": "Multiple sorting by alphabet and hexadecimal in perl", "body": "<p>I want to sort an array by hex number and alphabet, but I have no idea how. My array looks something like this:</p>\n\n<pre><code>my @array = ( \n    \"{John}{1} is a boy\", \"{Emily}{a} is a girl\", ..., \"{Alba}{f} is a brand\"\n);\n</code></pre>\n\n<p>I want to first sort the name in first <code>{}</code> by alphabet and then sort by second <code>{}</code> by hex number regardless of the word behind.</p>\n\n<pre><code>my @sorted = sort { $a &lt;=&gt; $b } @array;\nmy @sorted1 = sort { hex $a &lt;=&gt; hex $b } @sorted;\nprint \"@sorted1\\n\";\n</code></pre>\n\n<p>I try something like this, but it does not work. How do I sort the array the way I described above?</p>\n"}, {"tags": ["perl", "authentication", "hash", "passwords", "dancer"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1504062335, "post_id": 45950799, "comment_id": 78860928, "body": "It doesn&#39;t look like you have even skimmed through <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Auth::Extensible</a> documentation."}, {"owner": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1504063793, "post_id": 45950799, "comment_id": 78861251, "body": "I only post on places like this as a last resort after reading all the documentation i can find. If your going to just give a typical rtfm type response at least back it up with some reasoning otherwise &quot;It doesn&#39;t look like you have even skimmed through&quot; the question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1504080942, "post_id": 45950799, "comment_id": 78868408, "body": "Where did you get the idea that the password needs to be stored in plain text? The code you&#39;ve shown takes the credentials supplied by the user. They are obviously plain text, but they are not stored anywhere, just received over the wire. <code>authenticate_user</code> will take care of hashing and comparing under the hood. How it does that is completely transparent. It comes with a bunch of different providers, but you can also roll your own if you need something else."}, {"owner": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "edited": false, "score": 0, "creation_date": 1504145143, "post_id": 45950799, "comment_id": 78903219, "body": "To clarify i am using &quot;provider: &#39;Database&#39;&quot; so i have a db with a users table. The reason why i say it encourages plain text password storage is because authenticate_user will not authenticate unless params-&gt;{password} matches exactly whats in the database. It doesn&#39;t hash it.  However - &quot;user_password username =&gt; &#39;jbloggs&#39;, new_password =&gt; &#39;secret&#39;&quot; will hash it in sha512 before storing it."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "edited": false, "score": 0, "creation_date": 1504146474, "post_id": 45955291, "comment_id": 78903522, "body": "Correct the encryption stuff should be handled by the authentication provider. The documentation for Auth::Extensible::Provider::Database says Crypt::SaltedHash is used. However authenticate_user still appears to only match on a plain text password in the db. I have ended up using Dancer2::Plugin::Passphrase to do authentication myself but i&#39;m sure what i am trying to do isn&#39;t anything special needing that level of work."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "edited": false, "score": 0, "creation_date": 1504168847, "post_id": 45955291, "comment_id": 78912536, "body": "@jeffez: But why are you calling <code>authenticate_user()</code>? For most uses, it&#39;s unnecessary."}, {"owner": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "edited": false, "score": 0, "creation_date": 1504493113, "post_id": 45955291, "comment_id": 79019331, "body": "My understanding is that authenticate_user() is used for checking the username and password before you add the session variables logging in the user. This was all i needed, but passwords would only match on plain text which isn&#39;t supposed to happen by default going by the Auth::Extensible::Provider::Database docs. I ended up writing my own username/password matching but it kind of goes against &#39;convention over configuration&#39;."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "edited": false, "score": 0, "creation_date": 1504523208, "post_id": 45955291, "comment_id": 79031397, "body": "<i>My understanding is that authenticate_user() is used for checking the username and password before you add the session variables logging in the user.</i> Then I can only suggest that you take a closer look at <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible\" rel=\"nofollow noreferrer\">the documentation</a>. In normal use, that is all handled for you and you have no need to call <code>authenticate_user()</code> yourself."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1504080904, "creation_date": 1504080904, "answer_id": 45955291, "question_id": 45950799, "link": "https://stackoverflow.com/questions/45950799/perl-dancer2-authentication-password-management/45955291#45955291", "title": "Perl Dancer2 Authentication Password Management", "body": "<p>In the documentation for <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Auth::Extensible</a>, the description for <code>authenticate_user()</code> says:</p>\n\n<blockquote>\n  <p>Usually you'll want to let the built-in login handling code deal with authenticating users, but in case you need to do it yourself, this keyword accepts a username and password ...</p>\n</blockquote>\n\n<p>Which strongly implies to me that you shouldn't be calling this function at all unless you're doing something particularly clever.</p>\n\n<p>I haven't used this module myself, but it seems to me that all the hashing and encryption stuff should be handled by one of the <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible#AUTHENTICATION-PROVIDERS\" rel=\"nofollow noreferrer\">authentication providers</a> and if there's not one that covers the case you use, then you can <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible::Role::Provider\" rel=\"nofollow noreferrer\">write one yourself</a>.</p>\n\n<p>Whenever I need to store secure passwords for a Dancer app, I reach for <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Passphrase\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Passphrase</a>. I wonder if I should consider writing an Auth::Extensible style authentication provider for it.</p>\n"}, {"tags": [], "owner": {"reputation": 6364, "user_id": 4040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77a97b7bec8a0dc42fee8ecb640cb25?s=128&d=identicon&r=PG", "display_name": "David Precious", "link": "https://stackoverflow.com/users/4040/david-precious"}, "is_accepted": true, "score": 1, "last_activity_date": 1507799255, "creation_date": 1507799255, "answer_id": 46705610, "question_id": 45950799, "link": "https://stackoverflow.com/questions/45950799/perl-dancer2-authentication-password-management/46705610#46705610", "title": "Perl Dancer2 Authentication Password Management", "body": "<p>Firstly, I'll echo the \"you almost certainly don't need to be using <code>authenticate_user()</code>\" comments.  The plugin can handle all that for you.</p>\n\n<p>However, \"it doesn't hash it\" is wrong; here's how it works.  The\n<code>authenticate_user</code> keyword loops through all auth realms configured, and for\neach one, asks that provider's <code>authenticate_user()</code> method to see if it accepts\nthe username and password.  The <code>Database</code> provider (and the others) fetch the\nrecord from the DB, and use <code>$self-&gt;match_password()</code> (which comes from the\n<a href=\"https://metacpan.org/source/Dancer2::Plugin::Auth::Extensible::Role::Provider\" rel=\"nofollow noreferrer\">Provider role</a>) to validate it; that code checks if the stored password from\nthe database starts with <code>{scheme}</code> and if so, uses\n<code>Crypt::SaltedHash-&gt;validate</code> to validate that the user-supplied password (in\nplain text, as it's just come in over the wire) matches the stored, hashed\npasssword (<code>$correct</code> in the code below is the stored password):</p>\n\n<pre><code>if ( $correct =~ /^{.+}/ ) {\n\n    # Looks like a crypted password starting with the scheme, so try to\n    # validate it with Crypt::SaltedHash:\n    return Crypt::SaltedHash-&gt;validate( $correct, $given );\n}\n</code></pre>\n\n<p>So, yes, if your stored password in the database is hashed, then it will match\nit if the password supplied matches that hash.</p>\n\n<p>For an example of what a stored hashed password should look like, here's\nthe output of the bundled <code>generate-crypted-password</code> utility:</p>\n\n<pre><code>[davidp@supernova:~]$ generate-crypted-password \nEnter plain-text password ?&gt; hunter2\nResult: {SSHA}z9llSLkkAXENw8FerEchzRxABeuJ6OPs\n</code></pre>\n\n<p>See the <a href=\"https://metacpan.org/pod/Crypt::SaltedHash\" rel=\"nofollow noreferrer\">Crypt::SaltedHash doco</a> for details on which algorhythms are\nsupported by it, and the format it uses (which \"comes from RFC-3112 and \nis extended by the use of different digital algorithms\").</p>\n\n<p>Do bear in mind that the code behind <code>authenticate_user</code> is exactly what's used\nunder the hood for you.</p>\n\n<p>For an example of just letting the plugin do the work for you, consider:</p>\n\n<pre><code>get '/secret' =&gt; require_login sub {\n    my $user = logged_in_user();\n    return \"Hi, $user-&gt;{username}, let me tell you a secret\";\n};\n</code></pre>\n\n<p>... that's it.  The <code>require_login</code> means that the plugin will check\nif the user is logged in, and if not, redirect them to the login page\nto log in.  You don't need to call <code>authenticate_user</code> yourself, you\ndon't need to set any session variables or anything.  <code>logged_in_user()</code>\nwill return a hashref of information about the logged in user (and because\nthe route code has <code>require_login</code>, there's guaranteed to be one at this\npoint, so you don't need to check).</p>\n\n<p>If you need to check they have a suitable role, instead of just that they\nare logged in, then look at <code>require_role</code> in the documentation instead.</p>\n"}], "owner": {"reputation": 185, "user_id": 6637870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a75ddfea86f9aefce671d0c92e5d39?s=128&d=identicon&r=PG&f=1", "display_name": "jeffez", "link": "https://stackoverflow.com/users/6637870/jeffez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 46705610, "answer_count": 2, "score": 0, "last_activity_date": 1507799255, "creation_date": 1504058619, "question_id": 45950799, "link": "https://stackoverflow.com/questions/45950799/perl-dancer2-authentication-password-management", "title": "Perl Dancer2 Authentication Password Management", "body": "<p>So any one who has used perl dancer knows that to authenticate a user on login you can call authenticate_user</p>\n\n<pre><code>authenticate_user(\n    params-&gt;{username}, params-&gt;{password}\n);\n</code></pre>\n\n<p>This is part of the Auth::Extensible plugin.</p>\n\n<p>To me it looks like it encourages the use of storing passwords in plain text! Sure you can hash the password first then make sure the stored password is the same hash but this seems to be more of a work around and i found isn't guaranteed to work. I have only got this to work using sha1 which shouldn't be used. I want to use Bcrypt but the passphrase simply wont match. Possibly odd characters not matching i'm not sure.</p>\n\n<p>The thing is using the dancer Passphrase plugin i can already validate the username and password without even needing to rely on authenticate_user to verify them. But for the dancer framework to consider the user logged in you still have to call authenticate_user which must be passed the password.</p>\n\n<p>I'm completely stuck. I'm curious how other people have managed to use proper password management in dancer2?</p>\n"}, {"tags": ["shebang", "perl"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1504050197, "post_id": 45949339, "comment_id": 78858293, "body": "Already answered here: <a href=\"https://stackoverflow.com/a/29563961/152948\">stackoverflow.com/a/29563961/152948</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1504051236, "post_id": 45949339, "comment_id": 78858574, "body": "@hobbs  Not quite, that answers one part of the question."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 2, "last_activity_date": 1504049788, "creation_date": 1504049788, "answer_id": 45949783, "question_id": 45949339, "link": "https://stackoverflow.com/questions/45949339/how-does-perl-handle-the-shebang-line/45949783#45949783", "title": "How does Perl handle the shebang line?", "body": "<p>Unlike most other interpreters, perl does its own processing of the <code>#!</code> line. This enables it to take multiple option arguments, even though the kernel's <code>#!</code> handler will only pass a single string.</p>\n\n<p>Details are in the perlrun man page. The relevant portion for you is this:</p>\n\n<blockquote>\n  <p>If the \"#!\" line does not contain the word \"perl\" nor the word \"indir\" the program named after the \"#!\" is executed instead of the Perl interpreter.  This is slightly bizarre, but it helps people on machines that don't do \"#!\", because they can tell a program that their SHELL is /usr/bin/perl, and Perl will then dispatch the program to the correct interpreter for them.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 8, "last_activity_date": 1559798681, "last_edit_date": 1559798681, "creation_date": 1504049987, "answer_id": 45949805, "question_id": 45949339, "link": "https://stackoverflow.com/questions/45949339/how-does-perl-handle-the-shebang-line/45949805#45949805", "title": "How does Perl handle the shebang line?", "body": "<p>There are a couple of different cases in your tests.</p>\n\n<p>When you use <code>./demo...</code> the kernel finds the <code>#!</code> in the magic number (first 16 bits) and runs that program, or passes the line to the shell if it fails, which starts what's on it.</p>\n\n<p>But when you invoke a perl on the command line, that perl binary is started by the shell and then that perl interpreter  itself processes the shebang. In this case it discards the perl part but takes account of the switches &ndash; if the line contains \"perl\".</p>\n\n<p>If the shebang does <em>not</em> invoke perl, we have behavior special to Perl. \nFrom <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a></p>\n\n<blockquote>\n  <p>If the <code>#!</code> line does not contain the word \"perl\" nor the word \"indir\", the program named after the <code>#!</code> is executed instead of the Perl interpreter. This is slightly bizarre, but it helps people on machines that don't do <code>#!</code>, because they can tell a program that their SHELL is <em>/usr/bin/perl</em>, and Perl will then dispatch the program to the correct interpreter for them.</p>\n</blockquote>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "accepted_answer_id": 45949805, "answer_count": 2, "score": 2, "last_activity_date": 1559798681, "creation_date": 1504046691, "question_id": 45949339, "link": "https://stackoverflow.com/questions/45949339/how-does-perl-handle-the-shebang-line", "title": "How does Perl handle the shebang line?", "body": "<p>I'm trying to understand how <code>perl</code> deals with the shebang line.</p>\n\n<p>I <em>used</em> to think that any interpreter mentioned in the \"command position\" on the command line would take precedence over one mentioned in the shebang line.  For example, if an executable script called <code>demo</code> looks like this</p>\n\n<pre><code>#!/usr/local/bin/perl-5.00503\n\nprintf \"$]\\n\";\n</code></pre>\n\n<p>...then I would observe the following:</p>\n\n<pre><code>$ ./demo\n5.00503\n% /usr/local/bin/perl-5.22 ./demo\n5.022003\n</code></pre>\n\n<p>IOW, in the first execution, the interpreter in the shebang is the one running, while in the second it is the one mentioned on the command line.  So far so good.</p>\n\n<p>But now, if I change the \"interpreter\" on the shebang to something like <code>/usr/bin/wc</code>, then it always beats any <em><code>perl</code></em> interpreter I mention on the command line:</p>\n\n<pre><code>% cat demo-wc\n#!/usr/bin/wc\n\nprintf \"$]\\n\";\n\n% ./demo-wc                           # produces the expected behavior\n       4       3      31 ./demo-wc\n% /usr/local/bin/perl-5.22 ./demo-wc\n       4       3      31 ./demo-wc\n% /usr/local/bin/perl-5.14 ./demo-wc\n       4       3      31 ./demo-wc\n</code></pre>\n\n<p>AFAICT, this special behavior seems to be limited <code>perl</code> interpreters; non-<code>perl</code> interpreters, such as <code>/bin/bash</code>, do \"overrule\" the shebang:</p>\n\n<pre><code>% /bin/bash ./demo-wc\n$]\n</code></pre>\n\n<hr>\n\n<p>The bottom line is that <code>perl</code> seems to have radically different policies for handling the shebang depending on the interpreter mentioned.</p>\n\n<hr>\n\n<ol>\n<li>How does <code>perl</code> determine which policy to follow?</li>\n<li>What exactly are the policies in either case?</li>\n</ol>\n"}, {"tags": ["perl", "stdin"], "comments": [{"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 1, "creation_date": 1504043978, "post_id": 45948646, "comment_id": 78856550, "body": "Every program hangs on STDIN when put in the background. From where should it get its input?"}, {"owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1504044137, "post_id": 45948646, "comment_id": 78856609, "body": "user should input within x seconds or program should exit the while loop. Since this is in background, user input is not possible, so the program should exit in x seconds, which is not happening."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1504044973, "post_id": 45948646, "comment_id": 78856895, "body": "I see. Try getc and set tty options like here: <a href=\"https://perldoc.perl.org/functions/getc.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/getc.html</a>"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1504045091, "post_id": 45948646, "comment_id": 78856920, "body": "@yacc there is a <code>tostop</code> flag, but not a <code>tistop</code> flag :)"}], "answers": [{"comments": [{"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1504045570, "post_id": 45949095, "comment_id": 78857060, "body": "Reading this I miss the days where we were on Unix all the time. :)"}, {"owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 0, "creation_date": 1504045711, "post_id": 45949095, "comment_id": 78857103, "body": "Thanks for the detailed explanation. <code>local $SIG{TTIN} = sub { die &quot;process is backgrounded&quot; };</code> works :)"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "edited": false, "score": 1, "creation_date": 1504047333, "post_id": 45949095, "comment_id": 78857563, "body": "@SrikanthJeeva always happy to help :)"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 3, "last_activity_date": 1504044981, "creation_date": 1504044981, "answer_id": 45949095, "question_id": 45948646, "link": "https://stackoverflow.com/questions/45948646/perl-stdin-hangs-in-background-works-fine-in-foreground/45949095#45949095", "title": "Perl STDIN hangs in background, works fine in foreground", "body": "<p>When a backgrounded process attempts terminal input, it gets sent the signal <code>SIGTTIN</code>, which has a default action of \"stop\" \u2014 i.e. the process is paused, the same as if it had received <code>SIGSTOP</code>. Since it's stopped, it doesn't get a chance to process its alarm, or exit, or do anything else.</p>\n\n<p>So, you're going to want to set a <code>SIGTTIN</code> handler to override that default stop behavior.</p>\n\n<p>The simplest thing you could do would be <code>local $SIG{TTIN} = 'IGNORE';</code> which would cause signal to be ignored. The read of <code>STDIN</code> would then immediately fail (returns undef with <code>$!</code> set to <code>EIO</code>), and you would hit the \"input is undefined\" case in your code.</p>\n\n<p>You could also set <code>local $SIG{TTIN} = sub { die \"process is backgrounded\" };</code> which would let you distinguish that case more clearly.</p>\n\n<p>Or you could set up something clever with a signal handler and retrying the read, so that in case the user decided to background and re-attach before the timeout expired, they would still be able to provide input, but I leave that up to you.</p>\n"}], "owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 45949095, "answer_count": 1, "score": 2, "last_activity_date": 1504044981, "creation_date": 1504042474, "last_edit_date": 1504044254, "question_id": 45948646, "link": "https://stackoverflow.com/questions/45948646/perl-stdin-hangs-in-background-works-fine-in-foreground", "title": "Perl STDIN hangs in background, works fine in foreground", "body": "<p>This is my program </p>\n\n<pre><code>my $input;\nmy $finish = 0;\nmy $timer = 5; # 5 seconds\neval {\n    while( ! $finish ) {\n        local $SIG{ALRM} = sub {\n          # check counter and set alarm again\n          if (--$timer) { alarm 1 }\n          # no more waiting\n          else { die \"timeout getting the input \\n\" }\n        };\n        # alarm every second\n        alarm 1;\n        $input = &lt;STDIN&gt;;\n        alarm 0;\n        if ( $input ) {\n            chomp $input;\n            if( $input ){\n                print( \"Received input : $input\" );\n                $finish = 1;\n            } else {\n                print( \"Please enter valid input\" );\n            }\n        } else {\n            print( \"input is undefined\" );\n            last;\n        }\n    }\n};\n\nif ($@ || !$input) {\n    print( \"Timeout in getting input.\" );\n    return undef;\n}\n\nreturn $input;\n</code></pre>\n\n<p>STDIN works fine in foreground. But fails when running the same program background. The logic is to go out of the loop if user did not enter any input within 5 seconds. But when running in background, the process should exit within x seconds but the process gets stuck in line <code>&lt;STDIN&gt;</code>. </p>\n\n<p>How to fix this?  </p>\n"}, {"tags": ["perl", "sorting", "integer", "range"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1504039755, "post_id": 45948007, "comment_id": 78854733, "body": "There&#39;s no built-in functionality for that. Perl has a range operator <code>..</code> that builds lists from ranges, but there is nothing to turn that around. There might be a module that has it implemented already on CPAN, but that will essentially do the same as you proposed to do yourself."}, {"owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 0, "creation_date": 1504041009, "post_id": 45948007, "comment_id": 78855343, "body": "Thanks, I&#39;ll check it out. I also posted a quick attempt at doing this. It seems to be working for me including some basic corner cases like array starting and ending with standalone elements (not part of a range), as well as negatives. I&#39;m curious how this compares to the suggested module. I&#39;ve probably missed a bunch of weird corner cases."}], "answers": [{"tags": [], "owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "is_accepted": false, "score": 0, "last_activity_date": 1504102884, "last_edit_date": 1504102884, "creation_date": 1504040922, "answer_id": 45948357, "question_id": 45948007, "link": "https://stackoverflow.com/questions/45948007/perl-find-ranges-of-numbers-in-an-array/45948357#45948357", "title": "Perl: Find ranges of numbers in an array", "body": "<p>OK, after messing around with this for a few minutes, the following seems to be working fairly well on a few quick test sets I tried. If anyone has any thoughts on this method, I'd appreciate it. </p>\n\n<pre><code>use strict;\nuse warnings;\nmy @numbers=(-7,-3,-2,-1,3,4,5,6,9,10,12,14,15,16,17);\n\nmy @ranges=();\nmy $start;\n$start=$numbers[0];\nfor(my $i=0; $i&lt;@numbers; $i++){\n    if($numbers[$i]&gt;$numbers[$i-1]+1){\n\n        push @ranges, ($start == $numbers[$i-1] ? $start : $start.\":\".$numbers[$i-1]);\n        $start=$numbers[$i];\n        print \"New start: \".$numbers[$i].\"\\n\";\n    }\n}\npush @ranges, ($start == $numbers[@numbers-1] ? $start : $start.\":\".$numbers[@numbers-1]);\n\nprint join(\",\",@ranges).\"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 0, "creation_date": 1504102976, "post_id": 45950257, "comment_id": 78884530, "body": "Thanks for the input. Interesting approach, but it feels unnecessarily complicated. The methods shown by my and ikegami both get the job done in just a few lines of code and I haven&#39;t found any cases yet that break them."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 1, "creation_date": 1504108349, "post_id": 45950257, "comment_id": 78888445, "body": "Of course they do. You asked a not so well formulated question and gave a not so well formulated answer. I just felt like posting something different. Otherwise, it is trivial to come up with ikegami&#39;s answer."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1504062893, "last_edit_date": 1504062893, "creation_date": 1504053950, "answer_id": 45950257, "question_id": 45948007, "link": "https://stackoverflow.com/questions/45948007/perl-find-ranges-of-numbers-in-an-array/45950257#45950257", "title": "Perl: Find ranges of numbers in an array", "body": "<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse autouse 'YAML::XS' =&gt; 'Dump';\n\nuse Const::Fast;\nuse Graph::Undirected;\nuse List::Util qw( min max shuffle );\nuse Test::More;\n\nconst my %I =&gt; (in =&gt; 0, out =&gt; 1);\n\nmy @cases = (\n    [[shuffle 3 .. 6, 9 .. 12, 14 .. 17] =&gt; [[3, 6], [9, 12], [14, 17]]],\n    [[shuffle 3 .. 6, 9 .. 12, 14 .. 17, 21] =&gt; [[3, 6], [9, 12], [14, 17], [21]]],\n);\n\nfor my $case ( @cases ) {\n    is_deeply(\n        spans($case-&gt;[$I{in}]),\n        $case-&gt;[$I{out}],\n        Dump($case-&gt;[$I{in}]) . ' = ' . Dump($case-&gt;[$I{out}])\n    );\n}\n\ndone_testing;\n\nsub spans {\n    my $sequence = shift;\n    my $g = Graph::Undirected-&gt;new;\n\n    $g-&gt;add_vertex($_) for @$sequence;\n    $g-&gt;has_vertex($_ + 1) and $g-&gt;add_edge($_, $_ + 1) for @$sequence;\n\n    return [\n        sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] }\n        map $_-&gt;[0] == $_-&gt;[1] ? [ $_-&gt;[0] ] : $_,\n        map [min(@$_), max(@$_)],\n        $g-&gt;connected_components\n    ];\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ prove -v spans.pl \nok 1 - ---\n# - 9\n# - 4\n# - 10\n# - 14\n# - 6\n# - 5\n# - 3\n# - 15\n# - 12\n# - 17\n# - 11\n# - 16\n#  = ---\n# - - 3\n#   - 6\n# - - 9\n#   - 12\n# - - 14\n#   - 17\n# \nok 2 - ---\n# - 17\n# - 16\n# - 12\n# - 11\n# - 6\n# - 9\n# - 10\n# - 5\n# - 3\n# - 4\n# - 21\n# - 14\n# - 15\n#  = ---\n# - - 3\n#   - 6\n# - - 9\n#   - 12\n# - - 14\n#   - 17\n# - - 21\n# \n1..2\nok\nAll tests successful.\nFiles=1, Tests=2,  1 wallclock secs ( 0.04 usr  0.01 sys +  0.25 cusr  0.02 csys =  0.32 CPU)\nResult: PASS\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1504064989, "last_edit_date": 1504064989, "creation_date": 1504064659, "answer_id": 45951539, "question_id": 45948007, "link": "https://stackoverflow.com/questions/45948007/perl-find-ranges-of-numbers-in-an-array/45951539#45951539", "title": "Perl: Find ranges of numbers in an array", "body": "<pre><code>my @ranges;\nfor (@numbers) {\n   if (@ranges &amp;&amp; $_ == $ranges[-1][1]+1) {\n      ++$ranges[-1][1];\n   } else {\n      push @ranges, [ $_, $_ ];\n   }\n}\n\nsay join ',', map { $_-&gt;[0] == $_-&gt;[1] ? $_-&gt;[0] : \"$_-&gt;[0]-$_-&gt;[1]\" } @ranges;\n</code></pre>\n"}], "owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 2, "accepted_answer_id": 45951539, "answer_count": 3, "score": 0, "last_activity_date": 1504102884, "creation_date": 1504039356, "question_id": 45948007, "link": "https://stackoverflow.com/questions/45948007/perl-find-ranges-of-numbers-in-an-array", "title": "Perl: Find ranges of numbers in an array", "body": "<p>In Perl, if I have a sorted array of integers, is there a compact way to convert it to a list or array of <em>ranges</em> of integers? </p>\n\n<p>E.g. suppose I have: </p>\n\n<pre><code>my @numbers=(3,4,5,6,9,10,12,14,15,16,17);\n</code></pre>\n\n<p>I would like a way to determine that the ranges of numbers present are:</p>\n\n<pre><code>3-6,9-10,12,14-17\n</code></pre>\n\n<p>I know I can go through it with a For loop checking to see if we've hit a gap between two array elements, etc. But before I do that, I thought I'd see if there was some compact notation or core functionality that would accomplish this. </p>\n\n<p>I'd prefer not to have to load any non-core libraries. I'm using Cygwin Perl 5.22. </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "edited": false, "score": 0, "creation_date": 1504028146, "post_id": 45944985, "comment_id": 78848688, "body": "Note: I tried using MongoDB::OID which has a to_string method but when I try &#39;my $oid = MongoDB::OID-&gt;new(&quot;value&quot; =&gt; $row-&gt;{&#39;_id&#39;});&#39; I get &#39;is not a valid OID (in $args-&gt;{&quot;value&quot;})&#39;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1504033511, "post_id": 45944985, "comment_id": 78851581, "body": "Re &quot;<i>In the end, all I really want is to be able to do the mongo equivalent of &quot;select column from table where _id = (select id from other table where name = bla)&quot;</i>&quot;, What have you tried?"}, {"owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1504041061, "post_id": 45944985, "comment_id": 78855372, "body": "In the Mongo Robo 3t UI, this query works: db.getCollection(&#39;TestSuiteMetrics&#39;).find({&quot;TestRunId&quot;:LUUID&zwnj;&#8203;(&quot;83b0c82e-676b-6841&zwnj;&#8203;-b358-d50af1cbb1d3&quot;)&zwnj;&#8203;}) In perl, I saved the _id hash thing I got in the original query and used it in this find using perl: $collection-&gt;find({&quot;TestRunId&quot; =&gt; $testRunId}); This does not work but the UI shows that the LUUID guid value is the same in both cases. I think the problem is in the &#39;data&#39; value of the hash returned using the MongoDB perl module."}, {"owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1504098937, "post_id": 45944985, "comment_id": 78881213, "body": "MongoDB document <code>_id</code> can be any type.  In this case, it looks like binary data.  That&#39;s odd but not impossible.  More odd is that your example is <code>$cursor-&gt;{&#39;_id&#39;}</code>.  Could you please post an <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a>?"}, {"owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "edited": false, "score": 0, "creation_date": 1504123142, "post_id": 45944985, "comment_id": 78896657, "body": "The &#39;data&#39; value from the _id hash object ended up being the value from the Mongo _id field as a .NET guid. By changing the &#39;Legacy UUID Encoding&#39; in Robo 3T to &#39;Use .NET Encoding&#39; and then using the Data::UUID.to_string() method on the _id hash object, I was able to see that the values matched between perl and Robo 3T and using the _id object as is in the find method worked as expected."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "is_accepted": false, "score": 0, "last_activity_date": 1504192856, "creation_date": 1504192856, "answer_id": 45984982, "question_id": 45944985, "link": "https://stackoverflow.com/questions/45944985/convert-mongodb-id-to-string-perl/45984982#45984982", "title": "convert mongodb _id to string perl", "body": "<p>The 'data' value from the _id hash object ended up being the value from the Mongo _id field as a .NET guid. By changing the 'Legacy UUID Encoding' in Robo 3T to 'Use .NET Encoding' and then using the Data::UUID.to_string() method on the _id hash object, I was able to see that the values matched between perl and Robo 3T and using the _id object as is in the find method worked as expected.</p>\n"}], "owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1504192856, "creation_date": 1504027523, "last_edit_date": 1504081736, "question_id": 45944985, "link": "https://stackoverflow.com/questions/45944985/convert-mongodb-id-to-string-perl", "title": "convert mongodb _id to string perl", "body": "<p>Trying to get the guid / string representation of the mongodb _id field.</p>\n\n<p>I'm using the MongoDB Perl module and when I print the <code>$cursor-&gt;{'_id'}</code>, it looks like a bunch of special chars (<code>\u256a\u00aba\u00f1\u03c3%C\u00f1Q</code>).</p>\n\n<p>Dumper says it is actually a hash:</p>\n\n<pre><code>$VAR1 = bless( {\n                 'data' =&gt; '\u256a\u00aba\u00f1\u03c3%C\u00f1Q\n\u00f4\u2562_\u00fa',\n                 'subtype' =&gt; 3\n               }, 'MongoDB::BSON::Binary' );\n</code></pre>\n\n<p>The problem is, the data field does not appear to be something I can convert to a string and I have been unable to find any info on how to do this using Perl. Mongo version is: 3.2.5.</p>\n\n<p>In the end, all I really want is to be able to do the mongo equivalent of <code>select column from table where _id = (select id from other table where name = bla)</code>.</p>\n"}, {"tags": ["string", "perl", "numbers"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1504028126, "post_id": 45944516, "comment_id": 78848679, "body": "Don&#39;t feel, benchmark."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504028348, "post_id": 45945154, "comment_id": 78848820, "body": "Exponents would throw that off?  <code>perl -wE&#39;$x += $_ for @ARGV; say $x&#39; 1 2e18</code> prints the whole thing but it prints it rounded for <code>2e19</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504028369, "post_id": 45945154, "comment_id": 78848835, "body": "I don&#39;t see where exponents come in."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504028438, "post_id": 45945154, "comment_id": 78848863, "body": "A string <code>2e19</code> has length four but it exceeds the precision limit.  Maybe I am misunderstanding it?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504028466, "post_id": 45945154, "comment_id": 78848877, "body": "Did the OP say anything about arguments containing exponents?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504028548, "post_id": 45945154, "comment_id": 78848926, "body": "Well, no no, they did not. But it&#39;s conceivable, specially with big numbers."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504039575, "post_id": 45945154, "comment_id": 78854645, "body": "@zdim No, you are not misunderstanding, but I should have mentioned that the stringified number in question will <i>always</i> be in the general, natural, usual format (no scientific notation, no other chars than digits, just a sequence of digits how you would expect it)."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504074429, "post_id": 45945154, "comment_id": 78864549, "body": "@Sinan&#220;n&#252;r What you are describing in your answer is exactly what I have tested. But the key point in your answer is the statement that the ordering of Arabic digits is the same in <i>every</i> locale. I believe you because of your reputation score and since this was my expectation as well, but nevertheless: Do you have a reference for that?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504090230, "post_id": 45945154, "comment_id": 78874531, "body": "@Binarus See, for example, <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">this draft of the C standard</a>: &quot;<i>In both the source and execution basic character sets, the value of each character after <code>0</code> in the above list of decimal digits shall be one greater than the value of the previous.</i>&quot; I believe the C++ language has the exact same sentence as well. These are all laying down as a rule what has for a long time been true. The code of <code>3</code> is  less than <code>4</code> (in fact, the code of <code>3</code> is exactly 1 less than the code of <code>4</code>) regardless of locale."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1504087909, "last_edit_date": 1504087909, "creation_date": 1504028130, "answer_id": 45945154, "question_id": 45944516, "link": "https://stackoverflow.com/questions/45944516/most-efficient-way-to-check-if-a-stringified-number-is-above-max-uint64/45945154#45945154", "title": "Most efficient way to check if a stringified number is above MAX_UINT64?", "body": "<p>You can use a simple shortcut that should eliminate most numbers. Any number that has 19 or fewer digits in the decimal representation can fit in a 64 bit integer, so if the length of the string containing the integer is less than 20, it is good.</p>\n\n<p>Any string with length greater than or equal to 21 is bad.</p>\n\n<p><code>UINT64_MAX</code> is <code>18446744073709551615</code>. So, there are some numbers with 20 decimal digits can fit a 64 bit unsigned integer. Some can't.</p>\n\n<p>At this point, simple string comparison using <code>ge</code> will be enough because the ordering of Arabic digits is the same regardless of locale.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -E \"say 'yes' if $ARGV[1] ge $ARGV[0]\" 18446744073709551615 18446744073709551616\nyes\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504074121, "post_id": 45945279, "comment_id": 78864398, "body": "This is nearly identical to the solution I have tried, and your assumption regarding the input is correct. So you are suggesting the string comparison method, and thus we have to think about collations. Sinan &#220;n&#252;r in his answer has stated that the ordering of Arabic digits is the same for <i>every</i> locale (which can be reached from Perl). I believe him, but would be interested in further opinions and references. Could you give additional pointers regarding this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 1, "creation_date": 1504081126, "post_id": 45945279, "comment_id": 78868521, "body": "Locales don&#39;t come into play with <code>cmp</code> unless you use <code>use locale;</code> (which you shouldn&#39;t use), if at all. Normally, <code>cmp</code> performs a straight up character comparison."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504084645, "post_id": 45945279, "comment_id": 78870727, "body": "Yes, this is what <code>perldoc perlop</code> and <code>perldoc perllocale</code> are saying, and this is my understanding problem: To compare characters, there must be a rule saying if a character is &quot;higher&quot; (&quot;greater&quot;) than another one. So, if no locale is in effect, which are the rules used by <code>cmp()</code> to compare characters? In other words, what is a &quot;straight character comparison&quot;? Is it based on Unicode code points? If yes, my problem would be solved (since the code points for Arabic digits in Unicode are the same as their ASCII codes, and those are definitely ordered as expected)."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504090311, "post_id": 45945279, "comment_id": 78874609, "body": "@Binarus see <a href=\"https://perldoc.perl.org/perlunifaq.html#I-lost-track%3B-what-encoding-is-the-internal-format-really%3F\" rel=\"nofollow noreferrer\">I lost track; what encoding is the internal format really?</a>"}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1504097349, "post_id": 45945279, "comment_id": 78879849, "body": "@Sinan&#220;n&#252;r The source you gave deals with the internal <i>encoding</i> of strings in Perl. Although I know that character ordering based on the encoding can be done, I can&#39;t believe (yet) that it is the default. I think that ordering characters based on Unicode code points would make more sense. But to make it clear to me: Do you say that Perl&#39;s default character ordering as used by <code>cmp()</code> is based on the <i>internal character encodings</i> (i.e. the byte sequences representing those characters in memory) instead of <i>Unicode code points</i>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1504100586, "post_id": 45945279, "comment_id": 78882601, "body": "A string is just an array of numbers.  It&#39;s literally comparing those numbers. In this case, those numbers are Unicode Code Points if you properly decoded your inputs"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504108110, "post_id": 45945279, "comment_id": 78888317, "body": "@Binarus I answered the literal question you asked in your comment. Seriously?"}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1504163609, "post_id": 45945279, "comment_id": 78909284, "body": "@Sinan&#220;n&#252;r Please excuse me, but (unless I have misunderstood something) I think you didn&#39;t. How characters are <i>internally encoded</i> does not have to do anything with their ordering or meaning (although you <i>could</i> do an ordering based on <i>encoding</i>). Finally, ikegami (in the previous comment) has pointed out that the comparison is done based on <i>Unicode code points</i> (and <i>not</i> based on their <i>encoding</i>), as I already suspected."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1504163785, "post_id": 45945279, "comment_id": 78909381, "body": "@Ikegami Thanks, answer accepted and +1 for all your comments. Finally, your statement that the ordering is based on the Unicode code points (as I already suspected) solved my problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1504171685, "post_id": 45945279, "comment_id": 78914589, "body": "It&#39;s only based on Unicode Code Points if you provide Unicode Code Points. It&#39;s actually just a simple numerical comparison"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1504029346, "last_edit_date": 1504029346, "creation_date": 1504028570, "answer_id": 45945279, "question_id": 45944516, "link": "https://stackoverflow.com/questions/45944516/most-efficient-way-to-check-if-a-stringified-number-is-above-max-uint64/45945279#45945279", "title": "Most efficient way to check if a stringified number is above MAX_UINT64?", "body": "<pre><code>use constant MAX_UINT64 = '18446744073709551615';\n\nmy $larger_than_max =\n      length($s) &gt; length(MAX_UINT64)\n   || length($s) == length(MAX_UINT64) &amp;&amp; $s gt MAX_UINT64;\n</code></pre>\n\n<p>Assumes input matches <code>/^(?:0|[1-9][0-9]*)\\z/</code>. Adjust to liking (e.g. to handle leading zeros or signs).</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 12038400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fd9a82943326efc8bb953881273e54?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Farmbrough", "link": "https://stackoverflow.com/users/12038400/rich-farmbrough"}, "is_accepted": false, "score": 0, "last_activity_date": 1590576188, "last_edit_date": 1590576188, "creation_date": 1590575635, "answer_id": 62041044, "question_id": 45944516, "link": "https://stackoverflow.com/questions/45944516/most-efficient-way-to-check-if-a-stringified-number-is-above-max-uint64/62041044#62041044", "title": "Most efficient way to check if a stringified number is above MAX_UINT64?", "body": "<p>I'll assume the input is a string of digits for clarity.</p>\n\n<p>You ask for the most efficient way.  This can't be determined without understanding the distribution of inputs.   For example if the inputs are uniform in 128 bit integers, the most efficient is to start with something like:</p>\n\n<pre><code>if (length(@ARGV[0]) &gt; 20) {die \"Number too large.\\n\"}\n</code></pre>\n\n<p>This deals with over 99.9999999999 % of cases.  In fact if the inputs were uniform in 256 bit integers you might be forgiven for simply writing:</p>\n\n<pre><code>warn \"Number too large.\\n\";\n</code></pre>\n\n<p>As to repeatedly and consistently testing in a reasonable amount of time you could consider something like this regex from Damian Conway's Regexp::Number (for signed 64 bit numbers but the principle is valid).  Notice, being real code, it deals with leading zeros. </p>\n\n<pre><code> '0*(?:(?:9(?:[0-1][0-9]{17}'  .\n        '|2(?:[0-1][0-9]{16}'  .\n        '|2(?:[0-2][0-9]{15}'  .\n        '|3(?:[0-2][0-9]{14}'  .\n        '|3(?:[0-6][0-9]{13}'  .\n        '|7(?:[0-1][0-9]{12}'  .\n        '|20(?:[0-2][0-9]{10}' .\n        '|3(?:[0-5][0-9]{9}'   .\n        '|6(?:[0-7][0-9]{8}'   .\n        '|8(?:[0-4][0-9]{7}'   .\n        '|5(?:[0-3][0-9]{6}'   .\n        '|4(?:[0-6][0-9]{5}'   .\n        '|7(?:[0-6][0-9]{4}'   .\n        '|7(?:[0-4][0-9]{3}'   .\n        '|5(?:[0-7][0-9]{2}'   .\n        '|80(?:[0-6])))))))))))))))))' .\n  '|[1-8]?[0-9]{0,18})'\n</code></pre>\n\n<p>This should be blindingly fast compared with perl run-up time for example, or even a keystroke.</p>\n\n<p>As to bigint, it executes very quickly and includes some cool optimization features, but unless you are testing many numbers in code the above should suffice.</p>\n\n<p>If you really want to burn rubber, though, take a look at perl guts, and use something that exposes the macro SvIOK(SV*).   (See <a href=\"https://metacpan.org/pod/release/KRISHPL/pod2texi-0.1/perlguts.pod#What-is-an-%22IV%22\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/KRISHPL/pod2texi-0.1/perlguts.pod#What-is-an-%22IV%22</a>? for more details.) </p>\n"}], "owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 45945279, "answer_count": 3, "score": 0, "last_activity_date": 1590576188, "creation_date": 1504025696, "last_edit_date": 1504029044, "question_id": 45944516, "link": "https://stackoverflow.com/questions/45944516/most-efficient-way-to-check-if-a-stringified-number-is-above-max-uint64", "title": "Most efficient way to check if a stringified number is above MAX_UINT64?", "body": "<p>Suppose I have a script which is executed by a 64-bit Perl and which is taking one parameter which actually is a number, but of course is a string in the first place (because all command line parameters are strings). </p>\n\n<p>Now, if that parameter's value fits into a 64 bit unsigned int, the script should do something with the parameter; otherwise, it should abort with an appropriate error message.</p>\n\n<p>What would be the most efficient way to check if that parameter (as a string, i.e. before using it in mathematical operations) fits into a 64-bit unsigned integer?</p>\n\n<p>What I already have thought of:</p>\n\n<ol>\n<li><p>I could do a string comparison</p>\n\n<p>I don't want to do that because in that case I had to cope with collations, and the documentation for <a href=\"https://metacpan.org/pod/Unicode::Collate\" rel=\"nofollow noreferrer\">Unicode::Collate</a> looks a bit oversized for my small problem.</p>\n\n<p>But this is just a feeling, so I'd be grateful for comments or other opinions.</p>\n\n<p>Side note: I have tried this, and it worked like expected. But this was just a quick test; I did not play around with locales, so on other systems it might not work (although I doubt that there is a collation which puts \"2\" before \"1\", but you never know).</p></li>\n<li><p>Converting to numbers before comparing won't work:</p>\n\n<pre><code>root@spock:/root/test# perl -e '$i=\"18446744073709551615\"+0; $j=\"18446744073709551616\"+0; print \"$i  $j\\n\"; print(($i &lt; $j) ? \"less\\n\" : \"greater or equal\\n\")'\n18446744073709551615  1.84467440737096e+19\ngreater or equal\n</code></pre>\n\n<p>Note how Perl prints the second number. This is the smallest unsigned integer which does not fit into 64 bits, so Perl converts it to a double. When it then compares <code>$i</code> and <code>$j</code> numerically, it has to convert <code>$i</code> to a double as well; due to the loss of precision involved herein, <code>$i</code> is converted to the same value as <code>$j</code>, so the comparison goes wrong.</p></li>\n<li><p>I could do <code>use bigint;</code>. I have tried this, and it behaved as expected.</p>\n\n<p>But that probably would lead to a dramatic loss of performance. As far as I have understood, <code>use bigint;</code> implies the use of various heavy libraries.</p>\n\n<p>But this is just a feeling as well, so if this is the way to go, please let me know.</p></li>\n<li><p>Another idea (not tried yet): Could I use <code>pack()</code> to generate a byte sequence from the stringified number somehow? Then I could check the length of that byte sequence. If it is less or equal to 8 bytes, the stringified number fits into a 64-bit unsigned integer.</p></li>\n</ol>\n\n<p>How would you solve this problem?</p>\n"}, {"tags": ["perl", "ipv6"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1504020736, "post_id": 45942932, "comment_id": 78844425, "body": "There is no mention of the compact notation in Net::IP besides the function you&#39;ve already found. We cannot tell you what&#39;s included in your Perl because we don&#39;t know which version of Perl (and on what OS, because certain vendors include different things) you have. You can check your Perl version by running <code>perl -v</code>. You can check if a certain module is in code with the <code>corelist</code> utility. You can check if a module is available with <code>perl -MModule::Name=99</code>, which will either complain about the module missing, or tell you that your version is too low."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1504078718, "post_id": 45942932, "comment_id": 78867019, "body": "@simbabque That <code>=99</code> trick only works if the module uses <code>Exporter</code>, which does a version check on any import argument that looks like a number. For a general solution you need <code>&#39;-MModule::Name 99&#39;</code> (with a space). And even that fails for modules (like <code>File::Slurp</code>) that have a version number greater than 2000."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1504021090, "creation_date": 1504021090, "answer_id": 45943193, "question_id": 45942932, "link": "https://stackoverflow.com/questions/45942932/perl-convert-long-ipv6-address-to-compact-notation/45943193#45943193", "title": "Perl Convert Long IPv6 Address To Compact Notation", "body": "<p>The module <a href=\"https://metacpan.org/pod/IPv6::Address\" rel=\"nofollow noreferrer\">IPv6::Address</a> can do that when you call its <code>addr_string</code> method, but it's not in core. However, you can borrow <a href=\"https://metacpan.org/source/ADUITSIS/IPv6-Address-0.207/lib/IPv6/Address.pm#L298\" rel=\"nofollow noreferrer\">the code that does it</a> fairly quickly. </p>\n\n<p>All I did was take the part that creates the compact notation, and wrap it in a <code>sub</code>.</p>\n\n<pre><code>sub compact {\n\n    # taken from IPv6::Address on CPAN\n    my $str = shift;\n    return '::' if($str eq '0:0:0:0:0:0:0:0');\n    for(my $i=7;$i&gt;1;$i--) {\n            my $zerostr = join(':',split('','0'x$i));\n            ###print \"DEBUG: $str $zerostr \\n\";\n            if($str =~ /:$zerostr$/) {\n                    $str =~ s/:$zerostr$/::/;\n                    return $str;\n            }\n            elsif ($str =~ /:$zerostr:/) {\n                    $str =~ s/:$zerostr:/::/;\n                    return $str;\n            }\n            elsif ($str =~ /^$zerostr:/) {\n                    $str =~ s/^$zerostr:/::/;\n                    return $str;\n            }\n    }\n    return $str;\n}\n\n\nprint compact('2001:0db8:0:0:0:0:0:0');\n</code></pre>\n\n<p>This will print</p>\n\n<pre><code>2001:0db8::\n</code></pre>\n\n<p>It seems to be ok with already compacted strings too.</p>\n"}, {"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 2, "last_activity_date": 1504021318, "creation_date": 1504021318, "answer_id": 45943273, "question_id": 45942932, "link": "https://stackoverflow.com/questions/45942932/perl-convert-long-ipv6-address-to-compact-notation/45943273#45943273", "title": "Perl Convert Long IPv6 Address To Compact Notation", "body": "<p>The <code>NetAddr::IP</code> module offers the <code>short</code> method to do just that.</p>\n\n<p>example:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse NetAddr::IP;\n\nmy $ip = NetAddr::IP-&gt;new( '2001:0db8:0:0:0:0:0:0' );\n\nprint \"Long version: \" . $ip-&gt;addr . \"\\n\";\nprint \"Short/Compact version: \" . $ip-&gt;short . \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8533369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab868377264d9cb2d619589d1286e01?s=128&d=identicon&r=PG&f=1", "display_name": "Bash", "link": "https://stackoverflow.com/users/8533369/bash"}, "is_accepted": true, "score": 0, "last_activity_date": 1504076660, "creation_date": 1504076660, "answer_id": 45954040, "question_id": 45942932, "link": "https://stackoverflow.com/questions/45942932/perl-convert-long-ipv6-address-to-compact-notation/45954040#45954040", "title": "Perl Convert Long IPv6 Address To Compact Notation", "body": "<p>Net::IP indeed offers the <a href=\"http://search.cpan.org/dist/Net-IP/IP.pm#ip_compress_address\" rel=\"nofollow noreferrer\">ip_compress_address</a> method to compress an IP.</p>\n"}], "owner": {"reputation": 1, "user_id": 8533369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab868377264d9cb2d619589d1286e01?s=128&d=identicon&r=PG&f=1", "display_name": "Bash", "link": "https://stackoverflow.com/users/8533369/bash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 45954040, "answer_count": 3, "score": 0, "last_activity_date": 1504420179, "creation_date": 1504020313, "last_edit_date": 1504420179, "question_id": 45942932, "link": "https://stackoverflow.com/questions/45942932/perl-convert-long-ipv6-address-to-compact-notation", "title": "Perl Convert Long IPv6 Address To Compact Notation", "body": "<p>I have a long IPv6 address in a scalar like </p>\n\n<pre><code>2001:0db8:0:0:0:0:0:0\n</code></pre>\n\n<p>and would like to get the compact notation:</p>\n\n<pre><code>2001:db8::.\n</code></pre>\n\n<p>Does the main Perl package <code>/usr/lib/perl5/...</code> contain a module that will do this? </p>\n\n<p>Does the Net::IP module?</p>\n\n<p>If not, does someone have a few lines that would do this?</p>\n\n<p>Sort of the opposite of what <a href=\"http://search.cpan.org/dist/Net-IP/IP.pm#ip_expand_address\" rel=\"nofollow noreferrer\">Net::IP::ip_expand_address</a> does.</p>\n"}, {"tags": ["c", "arrays", "perl", "xs"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1504020074, "post_id": 45942716, "comment_id": 78843982, "body": "1) We can&#39;t really say what&#39;s wrong, without the XS code to look at. There&#39;s nothing wrong per se about the unpack. 2) That post is pretty bad advice IMO, and if you&#39;re trying to follow it straightforwardly for return values, you&#39;re probably making memory management mistakes. I would really suggest doing things the normal way, on the stack."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1504020418, "post_id": 45942716, "comment_id": 78844235, "body": "The post calls a C function from perl that takes <code>char *</code> as an argument, which works well enough. The reverse -- passing <code>char *</code> from C to Perl -- is trickier because Perl will stop reading when it encounters a NULL (<code>\\0</code>) in the C output."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1504022004, "post_id": 45942716, "comment_id": 78845170, "body": "We can&#39;t tell what you mistake you&#39;ve made because you didn&#39;t show your code. Please provide a minimal, runnable demonstration of the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1504022973, "post_id": 45942716, "comment_id": 78845807, "body": "@mob, Re &quot;<i>is trickier because Perl will stop reading when it encounters a NULL (\\0) in the C output.</i>&quot;, No. It reads as many as you specify. <code>newSVpv((char*)array, num_ele*sizeof(array[0]))</code>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1504023621, "post_id": 45942716, "comment_id": 78846242, "body": "I&#39;m saying that for an XS function like <code>char* foobar() { return &quot;foo\\0bar\\0&quot; }</code>, a Perl call to <code>foobar()</code> will receive the string <code>foo</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1504030149, "post_id": 45942716, "comment_id": 78849834, "body": "@mob, Well yeah, but you shouldn&#39;t <i>ever</i> use <code>char*</code> as the type of arguments or return value in XS. (Well, you could use it if you can guarantee ASCII, but that&#39;s it.) So, I repeat, there&#39;s no problems with NULs in XS. Quite the opposite, XS is actually capable of handling NULs in strings; it&#39;s C that can&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1504023443, "creation_date": 1504023443, "answer_id": 45943891, "question_id": 45942716, "link": "https://stackoverflow.com/questions/45942716/perl-c-xs-unpack-float-array/45943891#45943891", "title": "Perl, C, XS - unpack float array", "body": "<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Inline C =&gt; &lt;&lt;'__EOS__';\n\n#include &lt;stdio.h&gt;\n\nSV* test(SV* sv) {\n   float* array;\n   size_t num_eles;\n   {\n      STRLEN len;\n      char* s = SvPVbyte(sv, len);\n      num_eles = len/sizeof(float);\n\n      /* We can't just cast s because we could */\n      /* run afoul of alignment restrictions. */\n      array = malloc(len);\n      memcpy(array, s, len);\n   }\n\n   {\n      size_t i;\n      for (i=0; i&lt;num_eles; ++i) {\n         printf(\"%zu %.6f\\n\", i, (double)(array[i]));\n      }\n   }\n\n   {\n      SV* return_sv = newSVpv((char*)array, num_eles*sizeof(float));\n      free(array);\n      return return_sv;  /* The typemap will mortalize. */\n   }\n}\n\n__EOS__\n\nmy @a = (1.2, 1.3, 1.4);\nsay sprintf \"%u %.6f\", $_, $a[$_] for 0..$#a;\nmy $a = pack('f*', @a);\nmy $b = test($a);\nmy @b = unpack('f*', $b);\nsay sprintf \"%u %.6f\", $_, $b[$_] for 0..$#b;\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 7174381, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/56e8d49cc03f1b0f1e422018e712e73e?s=128&d=identicon&r=PG&f=1", "display_name": "Jen Mer", "link": "https://stackoverflow.com/users/7174381/jen-mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1504023443, "creation_date": 1504019660, "question_id": 45942716, "link": "https://stackoverflow.com/questions/45942716/perl-c-xs-unpack-float-array", "title": "Perl, C, XS - unpack float array", "body": "<p>I have Perl Code and C Code and I am calling C functions in my Perl Code.\nI have passed a float array from Perl to C by packing it (like this <a href=\"http://www.perlmonks.org/?node_id=39697\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=39697</a>) and it works nicely!</p>\n\n<pre><code>my $p_angle = pack(\"f*\", @angle);\n</code></pre>\n\n<p>But now I am trying to return that array from my C function to Perl and I want to be able to do stuff with it, e.g read values, print...</p>\n\n<p>I have tried to unpack it with </p>\n\n<pre><code>my @array = unpack(\"f*\", $entropy);\n</code></pre>\n\n<p>but that does not work at all, I always see the same not reasonable values when I print the @array.</p>\n\n<p>So I guess I am doing it wrong, does anybody know how to unpack the array properly?</p>\n"}, {"tags": ["json", "perl", "encoding", "utf-8"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1504017124, "creation_date": 1504017124, "answer_id": 45941817, "question_id": 45941522, "link": "https://stackoverflow.com/questions/45941522/parsing-utf-8-json-with-perl/45941817#45941817", "title": "Parsing utf-8 json with Perl", "body": "<p><code>JSON</code> does not expect input to have the byte order mark. Strip it before you run the JSON decoder.</p>\n\n<pre><code>$json_text =~ s/^[^\\x00-\\x7f]+//;\nmy $data = $json-&gt;decode($json_text);\n</code></pre>\n\n<p>The byte-order mark was not pasted to JSONlint, so JSONlint was not evaluating the same document that you have.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1504032451, "creation_date": 1504032451, "answer_id": 45946300, "question_id": 45941522, "link": "https://stackoverflow.com/questions/45941522/parsing-utf-8-json-with-perl/45946300#45946300", "title": "Parsing utf-8 json with Perl", "body": "<pre><code>use strict;\nuse warnings qw( all );\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\nuse feature qw( say );\n\nuse JSON qw( );\n\nmy $filename = 'k2.json';\n\nmy $json_text = do {\n   open(my $json_fh, '&lt;', $filename)\n      or die(\"Can't open $filename: $!\\n\");\n\n   local $/;\n   &lt;$json_fh&gt;\n};\n\n$json_text =~ s/^\\N{BOM}//;\n\nmy $data = JSON-&gt;new-&gt;decode($json_text);\n\nsay $_-&gt;{lng} for @{ $data-&gt;{data} };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\nuse feature qw( say );\n\nuse File::BOM qw( open_bom );\nuse JSON      qw( );\n\nmy $filename = 'k2.json';\n\nmy $json_text = do {\n   open_bom(my $fh, $file, ':encoding(UTF-8)')\n      or die(\"Can't open $filename: $!\\n\");\n\n   local $/;\n   &lt;$json_fh&gt;\n};\n\nmy $data = JSON-&gt;new-&gt;decode($json_text);\n\nsay $_-&gt;{lng} for @{ $data-&gt;{data} };\n</code></pre>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li><p><code>use open ':std', ':encoding(UTF-8)';</code> causes printing STDOUT to encode using UTF-8. This will be required to print the <code>display_name</code> in your example.</p>\n\n<p>It also sets the default encoding that's used to decode the JSON file in the first snippet.</p></li>\n<li><p>I left in <code>use utf8;</code>, but it doesn't do anything since the source code is entirely ASCII.</p></li>\n</ul>\n"}], "owner": {"reputation": 425, "user_id": 5547553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f225ea4837d3be18c806f798328b7c?s=128&d=identicon&r=PG&f=1", "display_name": "lmocsi", "link": "https://stackoverflow.com/users/5547553/lmocsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 45941817, "answer_count": 2, "score": 0, "last_activity_date": 1504032451, "creation_date": 1504016415, "question_id": 45941522, "link": "https://stackoverflow.com/questions/45941522/parsing-utf-8-json-with-perl", "title": "Parsing utf-8 json with Perl", "body": "<p>I'm trying to parse an utf-8 json file in Perl.\n<a href=\"https://jsonlint.com/\" rel=\"nofollow noreferrer\">https://jsonlint.com/</a> says the json is valid.\nStill I get the error message:</p>\n\n<blockquote>\n  <p>malformed JSON string, neither tag, array, object, number, string or atom, at character offset 0 (before \"\\x{ef}\\x{bb}\\x{bf}{\"...\") at parse.pl line 15.</p>\n</blockquote>\n\n<p>The code is:</p>\n\n<pre><code>use strict;\nuse utf8;\nuse JSON qw( );\n\nmy $filename = 'k2.json';\n\nmy $json_text = do {\n   open(my $json_fh, $filename) or die(\"Can't open $filename: $!\\n\");\n   local $/;\n   &lt;$json_fh&gt;\n};\n\nmy $json = JSON-&gt;new;\nmy $data = $json-&gt;decode($json_text);\n\nfor ( @{$data-&gt;{data}} ) {\n   print $_-&gt;{lng}.\"\\n\";\n}\n</code></pre>\n\n<p>The utf-8 coded json is:</p>\n\n<pre><code>{\"data\":\n[{\"lng\":\"19.03252602\",\n\"lat\":\"47.49795914\",\n\"display_name\":\"I. ker\u00fclet (Attila \u00fat)\",\n\"active\":\"1\",\n\"url\":\"/hu/kormanyablakok/budapest/i-kerulet/i-kerulet-attila-ut/283\"\n}]\n}\n</code></pre>\n\n<p>I see that (ef, bb, bf) are the three bytes that indicate that it's an utf-8 document, so I don't understand what JSON package is missing here. How can I make it work?<br>\nSpecifying <b>\"&lt;:encoding(UTF-8)\"</b> at opening the file did not help either...</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1504005206, "post_id": 45937535, "comment_id": 78832998, "body": "You can&#39;t do it without a loop, because you&#39;re iterating elements. That&#39;s what a loop is. You might be able to do it with <code>grep</code>, but could you clarify? Are you checking each key against each array member?"}, {"owner": {"reputation": 71, "user_id": 8283156, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/42f7c3e86ead5ffb5e683365e415c307?s=128&d=identicon&r=PG&f=1", "display_name": "\u738b\u4e91\u9f99", "link": "https://stackoverflow.com/users/8283156/%e7%8e%8b%e4%ba%91%e9%be%99"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1504005269, "post_id": 45937535, "comment_id": 78833049, "body": "Sorry maybe I make my situation more clear: I can iterate through array and I want the array elements to be compared against all the hash values and returns the matching key. Thanks"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1504006501, "post_id": 45937535, "comment_id": 78833895, "body": "Hashes are for looking up data by <b>key</b>. If you are looking up data by <b>value</b>, you might want to reconsider your design decisions."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504029186, "post_id": 45937535, "comment_id": 78849302, "body": "There are also a number of modules which can find intersection between lists/arrays."}], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1504005875, "post_id": 45937718, "comment_id": 78833475, "body": "<code>grep { $Hash2Check{$_} ? $_ : () }</code> translates to <code>grep { $Hash2Check{$_} }</code> when <code>$_</code> is true."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1504006136, "post_id": 45937718, "comment_id": 78833642, "body": "Yep. You&#39;re quite correct. I was getting muddled and thinking <code>map</code> returning the values. More correctly <code>exists</code> might be appropriate."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1504006111, "last_edit_date": 1504006111, "creation_date": 1504005273, "answer_id": 45937718, "question_id": 45937535, "link": "https://stackoverflow.com/questions/45937535/perl-how-to-compare-hash-value-against-a-list-and-returns-keys-matching/45937718#45937718", "title": "Perl how to compare hash value against a list and returns keys matching", "body": "<p>You cannot do it without a loop. You are iterating a list, and that's a loop.</p>\n\n<p>But you can pretend a little, and use <code>grep</code>:</p>\n\n<pre><code>my @matches = grep { exists $Hash2Check{$_} } @Value2CompareList; \n</code></pre>\n\n<p>But be under no illusions - <code>grep</code> is still iterating the list. Each iteration, it sets <code>$_</code> to the current element, and checks if it exists in the hash. </p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 8283156, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/42f7c3e86ead5ffb5e683365e415c307?s=128&d=identicon&r=PG&f=1", "display_name": "\u738b\u4e91\u9f99", "link": "https://stackoverflow.com/users/8283156/%e7%8e%8b%e4%ba%91%e9%be%99"}, "edited": false, "score": 0, "creation_date": 1504007509, "post_id": 45937730, "comment_id": 78834562, "body": "Thanks bro. Your method works out fine, at least more faster than using nested loop. In my case the value is unique."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1504005658, "last_edit_date": 1504005658, "creation_date": 1504005323, "answer_id": 45937730, "question_id": 45937535, "link": "https://stackoverflow.com/questions/45937535/perl-how-to-compare-hash-value-against-a-list-and-returns-keys-matching/45937730#45937730", "title": "Perl how to compare hash value against a list and returns keys matching", "body": "<p>You can use grep inside a grep:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @Value2CompareList = qw( a b c d e f );\nmy %Hash2Check = (\n    A =&gt; 'a',\n    B =&gt; 'b',\n    C =&gt; 'c');\n\nsay for grep {\n    my $k = $_;\n    grep $Hash2Check{$k} eq $_, @Value2CompareList\n} keys %Hash2Check;\n</code></pre>\n\n<p>It's complex because the data structure is not suitable for what you need. An inverted hash would be much better:</p>\n\n<pre><code>my %Inverted = reverse %Hash2Check;\nsay for grep defined, @Inverted{@Value2CompareList};\n</code></pre>\n\n<p>This only works if the values are unique. If not, you need to create a hash of arrays:</p>\n\n<pre><code>my %Inverted;\nwhile (my ($k, $v) = each %Hash2Check) {\n    push @{ $Inverted{$v} }, $k;\n}\nsay for map @$_, grep defined, @Inverted{@Value2CompareList};\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8283156, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/42f7c3e86ead5ffb5e683365e415c307?s=128&d=identicon&r=PG&f=1", "display_name": "\u738b\u4e91\u9f99", "link": "https://stackoverflow.com/users/8283156/%e7%8e%8b%e4%ba%91%e9%be%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 2, "accepted_answer_id": 45937730, "answer_count": 2, "score": -1, "last_activity_date": 1504006111, "creation_date": 1504004727, "question_id": 45937535, "link": "https://stackoverflow.com/questions/45937535/perl-how-to-compare-hash-value-against-a-list-and-returns-keys-matching", "title": "Perl how to compare hash value against a list and returns keys matching", "body": "<p>Consider this case:\nI have a list:</p>\n\n<pre><code>@Value2CompareList\n</code></pre>\n\n<p>And I have a hash table:</p>\n\n<pre><code>%Hash2Check\n</code></pre>\n\n<p>Now I want to achieve the following:</p>\n\n<pre><code>if($Hash2Check{$keys} eq $ElementFromArray) {return matching keys}\n</code></pre>\n\n<p>How do I do it in a faster way without Loop?</p>\n\n<p>Thanks folks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1504015009, "post_id": 45937281, "comment_id": 78840172, "body": "using Boolean Algebra, you are more or less correct, it could have rewritten as: <code>grep { not ( $_ eq &#39;.&#39; || $_ eq &#39;..&#39; ) }</code> See &#39;De Morgans Law&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": false, "score": 3, "last_activity_date": 1504004337, "creation_date": 1504004337, "answer_id": 45937386, "question_id": 45937281, "link": "https://stackoverflow.com/questions/45937281/checking-if-a-folder-is-empty-what-are-and/45937386#45937386", "title": "Checking if a folder is empty (what are &quot;.&quot; and &quot;..&quot;)", "body": "<p>I'm assuming you looked at <a href=\"https://stackoverflow.com/questions/4493482/detect-empty-directory-with-perl\">Detect empty directory with Perl</a>.</p>\n\n<p>Even an empty directory contains the <code>.</code> and <code>..</code> directories.</p>\n\n<p><code>.</code> means the current directory.</p>\n\n<p><code>..</code> means the parent directory.</p>\n\n<p>So your function is excluding those two results, because they will always be there.</p>\n"}, {"tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 2, "last_activity_date": 1504004349, "creation_date": 1504004349, "answer_id": 45937392, "question_id": 45937281, "link": "https://stackoverflow.com/questions/45937281/checking-if-a-folder-is-empty-what-are-and/45937392#45937392", "title": "Checking if a folder is empty (what are &quot;.&quot; and &quot;..&quot;)", "body": "<p>A directory has alway an entry . (this Directory) and .. (parent Directory).\nThe code you are mentioned reads all entries of the Directory, and if there only These entries it is empty. </p>\n\n<p>Hope i am understandable</p>\n"}], "owner": {"reputation": 69, "user_id": 4392509, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dKiSx7g27m0/AAAAAAAAAAI/AAAAAAAAAE4/LEQXobdUJlU/photo.jpg?sz=128", "display_name": "khairul alam", "link": "https://stackoverflow.com/users/4392509/khairul-alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1506838254, "creation_date": 1504004068, "last_edit_date": 1504117627, "question_id": 45937281, "link": "https://stackoverflow.com/questions/45937281/checking-if-a-folder-is-empty-what-are-and", "title": "Checking if a folder is empty (what are &quot;.&quot; and &quot;..&quot;)", "body": "<p>I'm new to perl and intended to check if a folder is empty. I found this function: </p>\n\n<pre><code>is_folder_empty {\n    my $dirname = shift;\n    opendir(my $dh, $dirname) or die \"Not a directory\";\n    return scalar(grep { $_ ne \".\" &amp;&amp; $_ ne \"..\" } readdir($dh)) == 0;\n}\n</code></pre>\n\n<p>It's working fine but I don't understand why it's doing <code>grep { $_ ne \".\" &amp;&amp; $_ ne \"..\" }</code>. What is the meaning of <code>.</code> and <code>..</code> here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503994431, "post_id": 45933869, "comment_id": 78826018, "body": "The module <code>IO::String</code> provides very specific functionality.  Are you sure that you need that?  What do you mean by &quot;<i>open a file from an URL</i>&quot; -- do you have a particular reason to use file-style operations? There are many ways to retrieve and manage content from Internet. What exactly do you need to do?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503998601, "post_id": 45933869, "comment_id": 78828600, "body": "I&#39;ve re-opened this question. It&#39;s certainly not a duplicate of the question that people suggested. It looked like a duplicate because it appears the OP went off on the wrong track in looking for a solution."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1503999084, "post_id": 45933869, "comment_id": 78828910, "body": "<code>my $handle = IO::String-&gt;new(get(&quot;google.com&quot;)); my @lines = &lt;$handle&gt;;</code> is utterly pointless."}, {"owner": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "edited": false, "score": 0, "creation_date": 1504003166, "post_id": 45933869, "comment_id": 78831681, "body": "problem solved. the hosting company just (unexpectedly) installed the module.  And I&#39;m not sure why you think it&#39;s pointless, as it does exactly what I want it to do... reads a .csv file in from a 3rd party website into an array."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1504011116, "post_id": 45933869, "comment_id": 78837186, "body": "@jxm: If you just want the lines in an array, then  the filehandle part of your code is completely unnecessary. You just want: <code>my @lines = split &#47;\\n&#47;, get($url);</code>"}, {"owner": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "edited": false, "score": 0, "creation_date": 1504016206, "post_id": 45933869, "comment_id": 78841108, "body": "ok, that also seems to work (if I take the split out). thanks."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1503999352, "post_id": 45935509, "comment_id": 78829093, "body": "Actually LEONT wrote <a href=\"https://metacpan.org/pod/PerlIO::http\" rel=\"nofollow noreferrer\">metacpan.org/pod/PerlIO::http</a> a few years back, which lets you simply <code>open</code> a URL. But OP wouldn&#39;t have that installed on their shared hosting either I guess."}, {"owner": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "edited": false, "score": 0, "creation_date": 1504016480, "post_id": 45935509, "comment_id": 78841314, "body": "Thanks, that does what I need and gets rid of the IO:string problem"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1504011425, "last_edit_date": 1504011425, "creation_date": 1503999105, "answer_id": 45935509, "question_id": 45933869, "link": "https://stackoverflow.com/questions/45933869/perl-open-a-file-from-a-url/45935509#45935509", "title": "Perl: Open a file from a URL", "body": "<p>There is no way to \"open a file from a URL\" as you ask. Well, I suppose you could throw something together using the <a href=\"https://metacpan.org/pod/LWP::UserAgent#progress\" rel=\"nofollow noreferrer\"><code>progress()</code></a> callback from LWP::UserAgent, but even then I don't think it would work how you want it to.</p>\n\n<p>But you can make something that looks like it's doing what you want pretty easily. Actually, what we're really doing is pulling all the data back from the URL and then opening a filehandle on a string that contains that data.</p>\n\n<pre><code>use LWP::Simple;\n\nmy $data = get('https://google.com');\nopen my $url_fh, '&lt;', \\$data or die $!;\n\n# Now $url_fh is a filehandle wrapped around your data.\n# Treat it like any other filehandle.\n\nwhile (&lt;$url_fh&gt;) {\n  print;\n}\n</code></pre>\n\n<p>Your problem was that IO::String wasn't installed. But there's no need to install it, as it's simple enough to do what it does with standard Perl features (simply open a filehandle on a reference to a string).</p>\n\n<p><strong>Update:</strong> IO::String is completely unnecessary here. Not only because you can do what it does very simply, by just opening a filehandle on a reference to your string, but also because all you want to do is to read a file from a web site into an array. And in that case, your code is simply:</p>\n\n<pre><code>use LWP::Simple;\n\nmy $url = 'something';\nmy @records = split /\\n/, get($url);\n</code></pre>\n\n<p>You might even consider adding some error handing.</p>\n\n<pre><code>use LWP::Simple;\n\nmy $url = 'something';\nmy $data = get($url);\ndie \"No data found\\n\" unless defined $data;\nmy @array = split /\\n/, get($url);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1503999650, "creation_date": 1503999650, "answer_id": 45935700, "question_id": 45933869, "link": "https://stackoverflow.com/questions/45933869/perl-open-a-file-from-a-url/45935700#45935700", "title": "Perl: Open a file from a URL", "body": "<p>You can install <a href=\"https://metacpan.org/pod/PerlIO::http\" rel=\"noreferrer\">PerlIO::http</a>, which will give you an input layer for opening a filehandle from a URL via <code>open</code>. This thing is not included in the Perl core, but it <a href=\"http://matrix.cpantesters.org/?dist=PerlIO-http%200.004\" rel=\"noreferrer\">will work with Perls as early as 5.8.9</a>.</p>\n\n<p>Once you've installed it, all you need to do is <code>open</code> with a layer <code>:http</code> in the mode argument. There is nothing to <code>use</code> here. That happens automatically.</p>\n\n<pre><code>open my $fh, '&lt;:http', 'https://metacpan.org/recent';\n</code></pre>\n\n<p>You can then read from <code>$fh</code> like a regular file. Under the hood it will take care of getting the data over the wire.</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) { ... }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1340, "favorite_count": 0, "accepted_answer_id": 45935509, "answer_count": 2, "score": 0, "last_activity_date": 1504011425, "creation_date": 1503994112, "question_id": 45933869, "link": "https://stackoverflow.com/questions/45933869/perl-open-a-file-from-a-url", "title": "Perl: Open a file from a URL", "body": "<p>I wanted to know how to open a file from a URL rather than a local file and I found the following answer on another thread:</p>\n\n<pre><code>use IO::String;\nmy $handle = IO::String-&gt;new(get(\"google.com\"));\nmy @lines = &lt;$handle&gt;;                       \nclose $handle; \n</code></pre>\n\n<p>This works perfectly... on my PC...</p>\n\n<p>But when I transferred the code over to my hosted server it complains that it can't find the IO module.  So is there another way to open a file from an URL, that doesn't require any external modules (or uses one that is pretty much installed on every server)...?</p>\n"}, {"tags": ["perl", "sha512", "pbkdf2"], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 5225876, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207411739871974/picture?type=large", "display_name": "Richard Thomas", "link": "https://stackoverflow.com/users/5225876/richard-thomas"}, "is_accepted": false, "score": 5, "last_activity_date": 1503997703, "last_edit_date": 1503997703, "creation_date": 1503965039, "answer_id": 45928879, "question_id": 45928713, "link": "https://stackoverflow.com/questions/45928713/how-to-implement-sha-512-with-cryptpbkdf2-in-perl/45928879#45928879", "title": "How to implement sha-512 with Crypt::PBKDF2 in Perl?", "body": "<p>Passing this to the new() call works.</p>\n\n<pre><code>  hash_args=&gt;{sha_size =&gt; 512}\n</code></pre>\n\n\n\n<pre><code>{X-PBKDF2}HMACSHA2+512:AAAIAA:bW5lbW9uaWM=:WG00S/OSlPeYJ/HWeIPkVdQHpSXnpzG0Ixb+j70pbgDgdCAemPBLbjYBbcUtnfSS2dzMJng73eAlGSSnDi+dDQ==\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 1635333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6d7309fbe6178e4cfab1640f6faece?s=128&d=identicon&r=PG", "display_name": "karel-m", "link": "https://stackoverflow.com/users/1635333/karel-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1504381280, "creation_date": 1504381280, "answer_id": 46017534, "question_id": 45928713, "link": "https://stackoverflow.com/questions/45928713/how-to-implement-sha-512-with-cryptpbkdf2-in-perl/46017534#46017534", "title": "How to implement sha-512 with Crypt::PBKDF2 in Perl?", "body": "<pre><code>use Crypt::KeyDerivation 'pbkdf2';\nmy $data = pbkdf2(\"Hellothere\", \"mnemonic\", 2048, 'SHA512', 64);\nprint unpack(\"H*\", $data), \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 5225876, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207411739871974/picture?type=large", "display_name": "Richard Thomas", "link": "https://stackoverflow.com/users/5225876/richard-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1504381280, "creation_date": 1503963578, "last_edit_date": 1504004333, "question_id": 45928713, "link": "https://stackoverflow.com/questions/45928713/how-to-implement-sha-512-with-cryptpbkdf2-in-perl", "title": "How to implement sha-512 with Crypt::PBKDF2 in Perl?", "body": "<p>So I'm looking to use SHA-512 with PBKDF2 to implement <a href=\"https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki\" rel=\"nofollow noreferrer\">Bitcoin BIP-039</a>. I have managed to work out that SHA-512 falls under SHA2 but when I specify that as the hashing function, even with 64 byte output, it still reports as using SHA-256. Am I missing something? I tried adding +512 to the hash_class but that didn't work.</p>\n\n<pre><code>#!/usr/bin/perl\n#\nuse Crypt::PBKDF2;\nmy $sentence=\"Hellothere\";\nmy $salt=\"mnemonic\";\nmy $pbkdf2 = Crypt::PBKDF2-&gt;new(\n  hash_class =&gt; 'HMACSHA2', # \n  iterations =&gt; 2048,      # \n  output_len =&gt; 64,        # \n);\nmy $hash = $pbkdf2-&gt;generate($sentence,$salt);\nprint \"$hash\\n\";\n</code></pre>\n\n<p>Gives</p>\n\n<pre><code>{X-PBKDF2}HMACSHA2+256:AAAIAA:bW5lbW9uaWM=:NLw67sZbhQYsPhrEYm9e5ruslS6/ivK1vDfICtCN07rb7RuBkQxAoZIyTG7sTmsob30JwoP64Fvzpjx6Cqc+KQ==\n</code></pre>\n"}, {"tags": ["regex", "perl", "sorting"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1503959035, "post_id": 45928119, "comment_id": 78814928, "body": "When you say Perl, you should show some code in context. This <code>[1900] ABC 15</code> means nothing."}, {"owner": {"reputation": 521, "user_id": 2586598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNA2C.png?s=128&g=1", "display_name": "dougtesting.net", "link": "https://stackoverflow.com/users/2586598/dougtesting-net"}, "edited": false, "score": 0, "creation_date": 1503959273, "post_id": 45928119, "comment_id": 78814996, "body": "I would think you will need to define your own sorting subroutine then examine the parts of the string inside you want to compare. You could possibly append the second number to the first to get one number (190015) for the comparison."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503987823, "post_id": 45928119, "comment_id": 78822099, "body": "@sin That <code>=</code> is just from a pattern in the example, quoted from the docs.  Note that one does need to take the element <code>(...)[0]</code> since otherwise the <code>&lt;=&gt;</code> would be comparing two <i>lists</i> (even if with a single element each), and since it  imposes the scalar context  we&#39;d have the comparison of numbers of elements in each, <code>1 &lt;=&gt; 1</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1504021826, "post_id": 45928119, "comment_id": 78845031, "body": "@zdim - Ah, I remember. You have to make the regex respond to wantarray to get a list, and of course I don&#39;t think &lt;=&gt; expects list context, therefore the index. Thanks for clearing that up."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1504023262, "post_id": 45928119, "comment_id": 78846010, "body": "Remember, as the docs say, this is hugely inefficient."}], "answers": [{"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504082736, "post_id": 45928281, "comment_id": 78869445, "body": "With <code>&#47;a</code> modifier, <code>\\d</code> matches only <code>[0-9]</code>, see: <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlretut.html</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504083218, "post_id": 45928281, "comment_id": 78869737, "body": "@Toto  Thank you, that is what I was referring to by &quot;<i>without modifiers</i>&quot;.  I didn&#39;t want to get into details since then <code>&#47;aa</code> need be involved as well, while this was a side note.  But it&#39;s better to state it, thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1504130746, "post_id": 45928281, "comment_id": 78900033, "body": "@Toto I did add this to text, thanks for the comment."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1574318888, "last_edit_date": 1574318888, "creation_date": 1503960009, "answer_id": 45928281, "question_id": 45928119, "link": "https://stackoverflow.com/questions/45928119/how-to-sort-by-numbers-in-alpha-numeric-string/45928281#45928281", "title": "How to sort by numbers in alpha numeric string?", "body": "<p>The example pulled from docs shows the idea: Compare by one criterion and if they are found equal by the <code>cmp</code> or <code>&lt;=&gt;</code> <a href=\"http://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\">equality operators</a>, which then return <code>0</code>, go to the next criterion.  </p>\n\n<p>So in this case compare by the first number in the string, then by the second.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @old = ('[1900] ABC 15', '[1900] ABC 5', '[1800] ABC 20'); \n\nmy @new = sort { \n    my ($a1, $a2) = $a =~ /([0-9]+)/g;\n    my ($b1, $b2) = $b =~ /([0-9]+)/g;\n\n    $a1 &lt;=&gt; $b1  or $a2 &lt;=&gt; $b2;\n\n} @old;\n\nsay for @new;\n</code></pre>\n\n<p>prints</p>\n\n<pre>\n[1800] ABC 20\n[1900] ABC 5\n[1900] ABC 15\n</pre>\n\n<p>If the sort needs to be in the descending order swap <code>a</code> and <code>b</code> in comparisons.</p>\n\n<p>This can be done more efficiently, in the first place by pre-computing the regexes for the whole list so that they aren't re-done every time an element is compared. The continuation of the example from docs shows this, the last version being the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>.</p>\n\n<p>But recall that such optimizations are demonstrable only for larger data sets, and that for simple calculations their overhead counts, too.\nThe above basic <code>sort</code> generally suffices.</p>\n\n<hr>\n\n<p>Having discussed the problem \"<em>using perl <code>sort</code></em>\", as asked for, I'd like to add that there are also modules written precisely for this purpose, \"natural sorting,\" as they call it.</p>\n\n<p>An example with <a href=\"https://metacpan.org/pod/Sort::Key::Natural\" rel=\"nofollow noreferrer\">Sort::Key::Natural</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Sort::Key::Natural qw(natsort);\n\nmy @strings = qw(\n    19_b_2\n    13_z_7\n    13_b_7\n    20_a_1 \n    13_b_5 \n);\n\nsay for natsort @strings;\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n13_b_5\n13_b_7\n13_z_7\n19_b_2\n20_a_1\n</pre>\n\n<p>This sorts on numerical parts first, and then alphabetically. That second sort wasn't asked for and the <code>sort</code> above doesn't do it. But that manual sort can easily be amended with criterion while the nice module of course can't be as flexible (can't drop the alphabetical sort).</p>\n\n<hr>\n\n<p><strong>Note</strong> &nbsp; A <code>[0-9]</code> is matched by <code>\\d</code> but so are other characters (360 more I'm told), it being Unicode aware. This isn't the case with <code>/a</code> <em>character set modifier</em>, available since 5.14. But that has an effect broader than restricting just <code>\\d</code>.  Search for <code>/a</code> in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>.\nThus here I used <code>0-9</code> for precision and a small measure of efficiency, and without restricting <code>\\s</code>, <code>\\w</code> and POSIX character classes.  </p>\n"}, {"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": -1, "last_activity_date": 1503960666, "last_edit_date": 1503960666, "creation_date": 1503960248, "answer_id": 45928321, "question_id": 45928119, "link": "https://stackoverflow.com/questions/45928119/how-to-sort-by-numbers-in-alpha-numeric-string/45928321#45928321", "title": "How to sort by numbers in alpha numeric string?", "body": "<p>I wrote a function doing that kind of sorting some time ago.\nIt does numeric sorting using all numbers within a string.\nI didn't care about performance, sorry. Hope it helps.</p>\n\n<pre><code>sub num_sort($$) {\n  my ($a,$b)=@_;\n  my @sa=reverse grep /./s, split /(\\d+)/,$a;\n  my @sb=reverse grep /./s, split /(\\d+)/,$b;\n  for (;; ) {\n    last if !@sa || !@sb;\n    my $ea=pop @sa;\n    my $eb=pop @sb;\n    my $rc= ($ea &lt;=&gt; $eb) || ($ea cmp $eb);\n    if ($rc) {\n      return $rc;\n    }\n  }\n  return @sa &lt;=&gt; @sb;\n}\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1574318888, "creation_date": 1503958914, "last_edit_date": 1503959313, "question_id": 45928119, "link": "https://stackoverflow.com/questions/45928119/how-to-sort-by-numbers-in-alpha-numeric-string", "title": "How to sort by numbers in alpha numeric string?", "body": "<p>If I have an array of strings with the following format:</p>\n\n<pre><code>[1900] ABC 15\n</code></pre>\n\n<p>How can I sort the array using perl <code>sort</code> so that it sorts by the first number, then by the second?</p>\n\n<p>This example from <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">perldoc sort</a> seems to be relevant:</p>\n\n<pre><code>my @new = sort {\n    ($b =~ /=(\\d+)/)[0] &lt;=&gt; ($a =~ /=(\\d+)/)[0]\n                        ||\n                fc($a)  cmp  fc($b)\n} @old;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1503953572, "post_id": 45927053, "comment_id": 78813046, "body": "l always get confused about || and &quot;or&quot;. Should I always use &quot;or&quot; whenever I think about &quot;||&quot;?. When must you use &quot;||&quot;? In your example, I don&#39;t see why I would do what the &quot;||&quot; is forcing the operation to do, so I would like an example of when it would be a good idea to use &quot;||&quot;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1503954559, "post_id": 45927053, "comment_id": 78813470, "body": "@JohnnyLoo  The <code>or</code> is nice for flow control -- <code>my $v = open ...   or die $!;</code> does everything before <code>or</code> and only then, if that finally returns false, goes to the other option.  The other one is good to bind things together which you really want handled first, say <code>my $arg = shift &#47;&#47; &#39;default&#39;;</code> -- if <code>shift</code> returned <code>undef</code> make sure to use <code>default</code>, before assigning (the same goes with <code>||</code>).  And don&#39;t forget the scalar context.  (The parenthesis in the answer are there only to <i>emphasize</i> what the order is because of precedence rules.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503962268, "post_id": 45927053, "comment_id": 78815794, "body": "I concur, use <code>||</code> by default, but use <code>or</code> for flow control (<code>or next</code>, <code>or die</code>, <code>or return</code>)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1503952926, "creation_date": 1503952926, "answer_id": 45927053, "question_id": 45926980, "link": "https://stackoverflow.com/questions/45926980/or-vs-when-returning-multiple-values-from-sub/45927053#45927053", "title": "&quot;or&quot; vs &quot;||&quot; when returning multiple values from sub", "body": "<p><code>||</code> and <code>or</code> have different precedence, so you have</p>\n\n<pre><code>my ($href_hash, $aref_array) = ( return_hash_and_array() || die(\"ERROR: blah\") );\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>( my ($href_hash, $aref_array) = return_hash_and_array() ) or die(\"ERROR: blah\");\n</code></pre>\n\n<p>Both operators evaluate their left-hand side in scalar context, but they have different LHS operands. In your first snippet &mdash;the one using <code>||</code>&mdash; you are evaluating <code>return_hash_and_array()</code> in scalar context, forcing it to return exactly one scalar (<code>\\@array</code> or <code>undef</code>).</p>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "closed_date": 1503984352, "accepted_answer_id": 45927053, "answer_count": 1, "score": 0, "last_activity_date": 1503953077, "creation_date": 1503952548, "last_edit_date": 1503953077, "question_id": 45926980, "link": "https://stackoverflow.com/questions/45926980/or-vs-when-returning-multiple-values-from-sub", "closed_reason": "Duplicate", "title": "&quot;or&quot; vs &quot;||&quot; when returning multiple values from sub", "body": "<p>Could you please explain why the following does NOT work</p>\n\n<pre><code>my ($href_hash, $aref_array) = return_hash_and_array() \n                                  || die \"ERROR: blah\";\n</code></pre>\n\n<p>But this works</p>\n\n<pre><code>my ($href_hash, $aref_array) = return_hash_and_array() \n                                  or die \"ERROR: blah\";\n</code></pre>\n\n<p>When using this sub  </p>\n\n<pre><code>sub return_hash_and_array{\n  my %hash = ('key_1' =&gt; \"value_1\", 'key_2' =&gt; 'value_2');\n  my @array = (\"item\", \"item2\");\n\n  if (@array &gt; 0){\n    return(\\%hash, \\@array);\n  }else{\n    return;\n  }\n}\n</code></pre>\n\n<p>I would expect both do the same thing.</p>\n"}, {"tags": ["algorithm", "perl", "depth-first-search"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1503931810, "post_id": 45921739, "comment_id": 78802272, "body": "Why are all your variables global? Are you not using <code>strict</code> and <code>warnings</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503931854, "post_id": 45921739, "comment_id": 78802303, "body": "Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If we were to reproduce the problem, do you expect us to write the parsing code ourselves?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503932857, "post_id": 45921739, "comment_id": 78802943, "body": "See <a href=\"https://metacpan.org/pod/Graph\" rel=\"nofollow noreferrer\">Graph</a>."}, {"owner": {"reputation": 777, "user_id": 2102977, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef83a2599e11464c00dfda371645b9c8?s=128&d=identicon&r=PG", "display_name": "Jenthe", "link": "https://stackoverflow.com/users/2102977/jenthe"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503934519, "post_id": 45921739, "comment_id": 78803946, "body": "I included the hash that is returned from my parsing code. Now you should be able to run the code. @melpomene: currently not using strict in this code, will look into that."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1503935273, "post_id": 45921739, "comment_id": 78804321, "body": "<b><code>20 =&gt; [1,5],</code></b>?!"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1503937033, "post_id": 45921739, "comment_id": 78805228, "body": "<code>13 =&gt; [1,4]</code>?!"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1503939237, "post_id": 45921739, "comment_id": 78806326, "body": "In your call to <code>depth_search</code> you are passing in <code>%search, @path</code>. You should instead pass in references <code>\\%search, \\@path</code>. The way your code works now is that the things you&#39;re passing in make no sense, which is pretty confusing. Alternatively, you could get rid of the <code>$seen, $path</code> in your function args, which makes clear what&#39;s happening ( you&#39;re using global variables to work on )."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1503940379, "post_id": 45921739, "comment_id": 78806848, "body": "Please add <code>use strict; use warnings;</code> at the top of your program."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1503942398, "post_id": 45921739, "comment_id": 78807837, "body": "Numerical equality is tested with <code>==</code> not <code>eq</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503942843, "post_id": 45921739, "comment_id": 78808079, "body": "You are missing the point. <code>20 =&gt; [1,5]</code> and <code>13 =&gt; [1,4]</code> are inconsistent with the figure you show. There really is no good reason for others to waste their time trying to help you for free if you cannot be bothered to post correct information."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1503944309, "post_id": 45921739, "comment_id": 78808815, "body": "It seems that your code is simply adding every visited node to <code>@curr_path</code>, including those that hit a wall.  This is on top of @bytepusher&#39;s comments. And please fix your post as people have told you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503945349, "post_id": 45921739, "comment_id": 78809326, "body": "Breadth-first search is far better to solve mazes!!! Why do you want to do a DFS?"}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 5, "last_activity_date": 1503946979, "last_edit_date": 1503946979, "creation_date": 1503945458, "answer_id": 45925385, "question_id": 45921739, "link": "https://stackoverflow.com/questions/45921739/returning-path-of-maze-in-perl-with-depth-first-algorithm/45925385#45925385", "title": "Returning path of maze in Perl with Depth First Algorithm", "body": "<p>Note that <a href=\"https://metacpan.org/pod/Graph\" rel=\"noreferrer\">Graph</a> provides <a href=\"https://metacpan.org/pod/Graph::Traversal\" rel=\"noreferrer\">Graph::Traversal</a> which is backed by <a href=\"https://metacpan.org/pod/Graph::Traversal::BFS\" rel=\"noreferrer\">Graph::Traversal::BFS</a> and <a href=\"https://metacpan.org/pod/Graph::Traversal::DFS\" rel=\"noreferrer\">Graph::Traversal::DFS</a>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Graph::Directed;\nuse Graph::Traversal::BFS;\n\nmy $graph = Graph::Directed-&gt;new;\n\n# Note: Maze definition corrected to match maze graphic\nmy %maze = (\n    1 =&gt; [6, 2],\n    2 =&gt; [1,3],\n    3 =&gt; [8, 2],\n    4 =&gt; [5],\n    5 =&gt; [10, 4],\n    6 =&gt; [1, 11],\n    7 =&gt; [8],\n    8 =&gt; [3, 7],\n    9 =&gt; [14, 10],\n    10 =&gt; [5, 15, 9],\n    11 =&gt; [6, 12],\n    12 =&gt; [17, 11],\n    13 =&gt; [14],\n    14 =&gt; [9, 19, 13],\n    15 =&gt; [10, 20],\n    16 =&gt; [17],\n    17 =&gt; [12, 16, 18],\n    18 =&gt; [17, 19],\n    19 =&gt; [14,18],\n    20 =&gt; [15],\n);\n\nfor my $node (keys %maze) {\n    $graph-&gt;add_edge($node, $_) for @{ $maze{$node} };\n}\n\nmy $traversal = Graph::Traversal::DFS-&gt;new($graph,\n    start =&gt; 2,\n    next_numeric =&gt; 1,\n    pre =&gt; sub {\n        my ($v, $self) = @_;\n        print \"$v\\n\";\n        $self-&gt;terminate if $v == 5;\n    }\n);\n\n$traversal-&gt;dfs;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2\n1\n6\n11\n12\n17\n16\n18\n19\n14\n9\n10\n5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 11, "last_activity_date": 1569829052, "last_edit_date": 1569829052, "creation_date": 1503946850, "answer_id": 45925703, "question_id": 45921739, "link": "https://stackoverflow.com/questions/45921739/returning-path-of-maze-in-perl-with-depth-first-algorithm/45925703#45925703", "title": "Returning path of maze in Perl with Depth First Algorithm", "body": "<p>You have a single <code>@curr_path</code> variable. For that to work, you would have to remove entries from it when you backtrack. (Renamed to <code>@path</code> below.)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( current_sub say );\n\nsub find_all_solutions_dfs {\n    my ($passages, $entrance, $exit) = @_;\n\n    my @path = $entrance;\n    my %seen = ( $entrance =&gt; 1 );\n\n    my $helper = sub {\n        my $here = $path[-1];\n        if ($here == $exit) {\n            say \"@path\";\n            return;\n        }\n\n        for my $passage (grep { !$seen{$_} } @{ $passages-&gt;{$here} }) {\n            push @path, $passage;\n            ++$seen{$passage};\n            __SUB__-&gt;();\n            --$seen{$passage};\n            pop @path;\n        }\n    };\n\n    $helper-&gt;();\n}\n\n{\n    my %passages = ( 1 =&gt; [6, 2], ..., 20 =&gt; [15] );\n    my $entrance = 2;\n    my $exit = 5;\n    find_all_solutions_dfs(\\%passages, $entrance, $exit);\n}\n</code></pre>\n\n<p>Instead of changing <code>%seen</code> and <code>@path</code> back and forth, we can make copies of the variables and change those. Then, returning will automatically backtrack. (As an optimization, <code>@_</code> will be <code>@path</code>.)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( current_sub say );\n\nsub find_solution_dfs {\n    my ($passages, $entrance, $exit) = @_;\n\n    my $helper = sub {\n        my $here = $_[-1];\n        if ($here == $exit) {\n           say \"@_\";\n           return;\n        }\n\n        my %seen = map { $_ =&gt; 1 } @_;\n        __SUB__-&gt;(@_, $_)\n           for\n              grep { !$seen{$_} }\n                 @{ $passages-&gt;{$here} };\n    };\n\n    $helper-&gt;($entrance);\n}\n\n{\n    my %passages = ( 1 =&gt; [6, 2], ..., 20 =&gt; [15] );\n    my $entrance = 2;\n    my $exit = 5;\n    find_solution_dfs(\\%passages, $entrance, $exit);\n}\n</code></pre>\n\n<p>Let's switch to using a stack variable instead of recursion. It's a little faster, but the main reason is that it will help the next step. Let's also make it so it stops at the first solution.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nsub find_solution_dfs {\n    my ($passages, $entrance, $exit) = @_;\n\n    my @todo = ( [ $entrance ] );\n    while (@todo) {\n        my $path = shift(@todo);\n        my $here = $path-&gt;[-1];\n        return @$path if $here == $exit;\n\n        my %seen = map { $_ =&gt; 1 } @$path;\n        unshift @todo,\n            map { [ @$path, $_ ] } \n                grep { !$seen{$_} }\n                    @{ $passages-&gt;{$here} };\n    }\n\n    return;\n}\n\n{\n    my %passages = ( 1 =&gt; [6, 2], ..., 20 =&gt; [15] );\n    my $entrance = 2;\n    my $exit = 5;\n    if ( my @solution = find_solution_dfs(\\%passages, $entrance, $exit)) {\n        say \"@solution\";\n    } else {\n        say \"No solution.\";\n    }\n}\n</code></pre>\n\n<p>While a depth-first search will find a solution, it won't necessarily be the shortest. Using a breadth-first search will find the shortest. Not only is that nicer, it will greatly speed things up in some circumstances.</p>\n\n<p>Gaining these benefits is literally a one-word change from the previous version (<code>unshift</code> &rArr; <code>push</code>) to changes <code>@todo</code> from a stack to a queue.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nsub find_solution_bfs {\n    my ($passages, $entrance, $exit) = @_;\n\n    my @todo = ( [ $entrance ] );\n    while (@todo) {\n        my $path = shift(@todo);\n        my $here = $path-&gt;[-1];\n        return @$path if $here == $exit;\n\n        my %seen = map { $_ =&gt; 1 } @$path;\n        push @todo,\n            map { [ @$path, $_ ] } \n                grep { !$seen{$_} }\n                    @{ $passages-&gt;{$here} };\n    }\n\n    return;\n}\n\n{\n    my %passages = ( 1 =&gt; [6, 2], ..., 20 =&gt; [15] );\n    my $entrance = 2;\n    my $exit = 5;\n    if ( my @solution = find_solution_bfs(\\%passages, $entrance, $exit)) {\n        say \"@solution\";\n    } else {\n        say \"No solution.\";\n    }\n}\n</code></pre>\n\n<p>Finally, since we're using a BFS and since we're only finding the first solution, we can optimize the above by using a single <code>%seen</code>. In fact, we don't even need <code>%seen</code> then since we can just remove from <code>%$passages</code> instead!</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nsub find_solution_bfs {\n    my ($passages, $entrance, $exit) = @_;\n    $passages = { %$passages };  # Make a copy so we don't clobber caller's.\n\n    my @todo = ( [ $entrance ] );\n    while (@todo) {\n        my $path = shift(@todo);\n        my $here = $path-&gt;[-1];\n        return @$path if $here == $exit;\n\n        my $passages_from_here = delete($passages-&gt;{$here});\n        push @todo,\n            map { [ @$path, $_ ] } \n               grep { $passages-&gt;{$_} }  # Keep only the unvisited.\n                    @$passages_from_here;\n    }\n\n    return;\n}\n\n\n{\n    my %passages = ( 1 =&gt; [6, 2], ..., 20 =&gt; [15] );\n    my $entrance = 2;\n    my $exit = 5;\n    if ( my @solution = find_solution_bfs(\\%passages, $entrance, $exit)) {\n        say \"@solution\";\n    } else {\n        say \"No solution.\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1504021873, "post_id": 45927319, "comment_id": 78845069, "body": "That&#39;s the same as my second version, except yours still uses a mix of global vars and hardcoded values instead of parameters. It also keeps searching for a solution after finding a solution. Not even counting that, it also performs extremely poorly for some mazes. (It can easily take thousands or millions of times longer than necessary.) It&#39;s really unfortunately you convinced the OP this is good answer :("}], "tags": [], "owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "is_accepted": true, "score": 4, "last_activity_date": 1504106394, "last_edit_date": 1504106394, "creation_date": 1503954131, "answer_id": 45927319, "question_id": 45921739, "link": "https://stackoverflow.com/questions/45921739/returning-path-of-maze-in-perl-with-depth-first-algorithm/45927319#45927319", "title": "Returning path of maze in Perl with Depth First Algorithm", "body": "<p>Your main problem is that when you hit a dead-end and then backtrack, your %seen and @path variables remain unchanged, still populated with the dead-end spaces.</p>\n\n<p>(Also, if you put \"use strict;\" and \"use warnings;\" in your program you'll uncover some errors you didn't realize were happening.)</p>\n\n<p>The main fix is to create a new path list (that's identical to the old @path, but with the new node) and use that to pass into the recursive call.  That way, when your algorithm backtracks, it doesn't take the old, dead-end paths with it.</p>\n\n<p>In fact, since you can easily construct a %seen set from the @path array, there's no point in passing it in at every call to depth_search().  And since depth_search() takes a @path variable, you technically don't even need a $place variable, as you can find it from the last element of the @path array.</p>\n\n<p>Here's the code I recommend:</p>\n\n<pre><code>#!/usr/bin/perl\n# From:  https://stackoverflow.com/questions/45921739/returning-path-of-maze-in-perl-with-depth-first-algorithm\n\nuse strict;\nuse warnings;\n\nmy %friends = (\n    1 =&gt; [6, 2],\n    2 =&gt; [1, 3],\n    3 =&gt; [8, 2],\n    4 =&gt; [5],\n    5 =&gt; [10, 4],\n    6 =&gt; [1, 11],\n    7 =&gt; [8],\n    8 =&gt; [3, 7],\n    9 =&gt; [14, 10],\n    10 =&gt; [5, 15, 9],\n    11 =&gt; [6, 12],\n    12 =&gt; [17, 11],\n    13 =&gt; [14],\n    14 =&gt; [9, 19, 13],\n    15 =&gt; [10, 20],\n    16 =&gt; [17],\n    17 =&gt; [12, 16, 18],\n    18 =&gt; [17, 19],\n    19 =&gt; [14, 18],\n    20 =&gt; [15],\n);\n\n\nsub depth_search\n{\n    my @path = @_;\n\n    if ($path[-1] == 5)  # end at node 5\n    {\n        print \"@path\\n\";\n        return;\n    }\n\n    # Put all the places we've been to in a \"seen\" set,\n    # to make sure not to revisit the ones we've already seen:\n    my %seen;  @seen{@path} = ();\n\n    foreach my $friend (@{$friends{$path[-1]}})\n    {\n        # Don't process nodes we've already seen:\n        next  if exists $seen{$friend};\n\n        # Recurse using the passed-in @path with \n        # the $friend as an additional node:\n        depth_search(@path, $friend);\n    }\n}\n\n\ndepth_search(2);  # start at node 2\n\n__END__\n</code></pre>\n\n<p>Its output is:</p>\n\n<pre><code>2 1 6 11 12 17 18 19 14 9 10 5\n</code></pre>\n"}], "owner": {"reputation": 777, "user_id": 2102977, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef83a2599e11464c00dfda371645b9c8?s=128&d=identicon&r=PG", "display_name": "Jenthe", "link": "https://stackoverflow.com/users/2102977/jenthe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 1, "accepted_answer_id": 45927319, "answer_count": 3, "score": 3, "last_activity_date": 1569829052, "creation_date": 1503931654, "last_edit_date": 1503947965, "question_id": 45921739, "link": "https://stackoverflow.com/questions/45921739/returning-path-of-maze-in-perl-with-depth-first-algorithm", "title": "Returning path of maze in Perl with Depth First Algorithm", "body": "<p>I'm trying to implement a Depth First Algoritmn in Perl to solve a maze of this kind:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BoDK3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BoDK3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I successfully parsed the maze into a hash called <code>%friends</code> that gives the neighbours of each node. Implementing the algorithm itself was fairly straightforward. However, I'm unable to get return <strong>only</strong> the nodes of the correct path. My current code looks like this (I included the hash returned from my parse code):</p>\n\n<pre><code>#bin/usr/perl\n\nmy %friends = (\n    1 =&gt; [6, 2],\n    2 =&gt; [1, 3],\n    3 =&gt; [8, 2],\n    4 =&gt; [5],\n    5 =&gt; [10, 4],\n    6 =&gt; [1, 11],\n    7 =&gt; [8],\n    8 =&gt; [3, 7],\n    9 =&gt; [14, 10],\n    10 =&gt; [5, 15, 9],\n    11 =&gt; [6, 12],\n    12 =&gt; [17, 11],\n    13 =&gt; [14],\n    14 =&gt; [9, 19, 13],\n    15 =&gt; [10, 20],\n    16 =&gt; [17],\n    17 =&gt; [12, 16, 18],\n    18 =&gt; [17, 19],\n    19 =&gt; [14, 18],\n    20 =&gt; [15],\n);\n\nsub depth_search {\n    ($place, $seen, $path) = @_;\n    $seen{$place} = \"seen\";\n\n    if($place eq 5){\n        print \"@curr_path\";\n        return;\n    }\n\n    for my $friend (@{$friends{$place}}){\n        if(!defined($seen{$friend})){\n            push(@curr_path, $friend);\n            depth_search($friend, %seen, @curr_path);\n        }\n\n    }\n\n}\n\nmy %seen;\nmy @path;\n\ndepth_search(2, %seen, @path);\n</code></pre>\n\n<p>The output I get from this code is:</p>\n\n<pre><code>1 6 11 12 17 16 18 19 14 9 10 5\n</code></pre>\n\n<p><code>@curr_path</code> seems to contain all of the visited nodes, which translates here into the false inclusion of the <code>16</code> node. It's probably more related to how Perl handles passing arrays but I can't seem to find a proper solution.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 20514, "user_id": 2411243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jC999.png?s=128&g=1", "display_name": "Zabuzard", "link": "https://stackoverflow.com/users/2411243/zabuzard"}, "edited": false, "score": 0, "creation_date": 1503941734, "post_id": 45921806, "comment_id": 78807501, "body": "Can you add an explanation of your code and why it solves the issue? <i>Code only</i> answers are often not that helpful."}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "reply_to_user": {"reputation": 20514, "user_id": 2411243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jC999.png?s=128&g=1", "display_name": "Zabuzard", "link": "https://stackoverflow.com/users/2411243/zabuzard"}, "edited": false, "score": 0, "creation_date": 1503951870, "post_id": 45921806, "comment_id": 78812282, "body": "Fair enough. Done."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1503992030, "post_id": 45921806, "comment_id": 78824550, "body": "Or <code>s&#47;^\\d+(?:\\.\\d+){3}\\K.*&#47;__&#47;a</code>"}], "tags": [], "owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "is_accepted": false, "score": 1, "last_activity_date": 1503947437, "last_edit_date": 1503947437, "creation_date": 1503931883, "answer_id": 45921806, "question_id": 45921709, "link": "https://stackoverflow.com/questions/45921709/how-can-we-write-the-regular-expression-in-perl-with-back-referencing/45921806#45921806", "title": "How can we write the regular expression in Perl with back referencing", "body": "<pre><code>$ cat samplefile.txt\n127.0.0.11 [28/Aug/2017:12:23:21 ]\n127.0.0.11 [28/Aug/2017:12:23:22 ]\n127.0.0.11 [28/Aug/2017:12:23:23 ]\n127.0.0.11 [28/Aug/2017:12:23:24 ]\n</code></pre>\n\n<p>The regex to use:</p>\n\n<pre><code>^(\\d+\\.\\d+\\.\\d+\\.\\d+)            # matching ip-address\n.*                               # 0 or more characters\n</code></pre>\n\n<p>Use capture variable $1 to copy the ip-address, followed by '__':</p>\n\n<pre><code>$ perl -pe 's/^(\\d+\\.\\d+\\.\\d+\\.\\d+).*/$1__/' samplefile.txt\n127.0.0.11__\n127.0.0.11__\n127.0.0.11__\n127.0.0.11__\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 7149836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/31cacc3fd7c4afdabd7e79adaf72f5e9?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7149836/learner"}, "edited": false, "score": 0, "creation_date": 1503932630, "post_id": 45921949, "comment_id": 78802792, "body": "Could you please give the output? Here i am getting only underscores at my console."}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "edited": false, "score": 0, "creation_date": 1503932746, "post_id": 45921949, "comment_id": 78802869, "body": "Well, look at output of my answer. ;-)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 91, "user_id": 7149836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/31cacc3fd7c4afdabd7e79adaf72f5e9?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7149836/learner"}, "edited": false, "score": 0, "creation_date": 1503932830, "post_id": 45921949, "comment_id": 78802920, "body": "@learner Output is <code>127.0.0.11__</code> (as described in your question). How are you running this?"}, {"owner": {"reputation": 91, "user_id": 7149836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/31cacc3fd7c4afdabd7e79adaf72f5e9?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7149836/learner"}, "edited": false, "score": 0, "creation_date": 1503933341, "post_id": 45921949, "comment_id": 78803242, "body": "No, i have different ip-addresses. I used double quote, that&#39;s why i am not getting the proper output. like perl -pe &quot;///&quot; &lt; file. If i used single quote it is working fine to me. But i didn&#39;t understand the difference between single and double quote here."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 91, "user_id": 7149836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/31cacc3fd7c4afdabd7e79adaf72f5e9?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7149836/learner"}, "edited": false, "score": 0, "creation_date": 1503933439, "post_id": 45921949, "comment_id": 78803306, "body": "@learner That&#39;s a shell thing. See <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#Single-Quotes\" rel=\"nofollow noreferrer\">gnu.org/software/bash/manual/bashref.html#Single-Quotes</a>. Basically, double quotes interpolate shell variables, so you got the value of the shell variable <code>$1</code> (which was empty), resulting in perl receiving <code>s&#47;^(\\d+.\\d+.\\d+.\\d+).*&#47;__&#47;</code> as input."}, {"owner": {"reputation": 91, "user_id": 7149836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/31cacc3fd7c4afdabd7e79adaf72f5e9?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7149836/learner"}, "edited": false, "score": 0, "creation_date": 1503934329, "post_id": 45921949, "comment_id": 78803833, "body": "@melpomene, Thank you for the answer."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1503934502, "post_id": 45921949, "comment_id": 78803934, "body": "Do not forget to escape dots in the pattern if they are meant to match literal dots in the string."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1503940292, "last_edit_date": 1503940292, "creation_date": 1503932316, "answer_id": 45921949, "question_id": 45921709, "link": "https://stackoverflow.com/questions/45921709/how-can-we-write-the-regular-expression-in-perl-with-back-referencing/45921949#45921949", "title": "How can we write the regular expression in Perl with back referencing", "body": "<p>The problem with your code is that it expects an IP address, followed by optional spaces, followed by the end of the line. But your actual data contains other other text (<code>[28/Aug/2017:12:23:21 ]</code>).</p>\n\n<p>You can do this instead:</p>\n\n<pre><code>perl -pe 's/^(\\d+\\.\\d+\\.\\d+\\.\\d+).*/$1__/' samplefile.txt\n</code></pre>\n\n<p><code>.*</code> matches any remaining text on the line.</p>\n\n<p>Also, you don't want a backreference here: A backreference looks like <code>\\1</code> and is part of regex syntax. But the right-hand side of a substitution is not a regex, it's a double-quotish string. And after a successful regex match you use the capture variables <code>$1</code>, <code>$2</code>, ... to refer to matched substrings.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "is_accepted": false, "score": 0, "last_activity_date": 1504197736, "creation_date": 1504197736, "answer_id": 45986437, "question_id": 45921709, "link": "https://stackoverflow.com/questions/45921709/how-can-we-write-the-regular-expression-in-perl-with-back-referencing/45986437#45986437", "title": "How can we write the regular expression in Perl with back referencing", "body": "<p>You were almost there. You missed to put <code>.</code> before <code>*</code> in second character set.</p>\n\n<p>you can try either of the below codes.</p>\n\n<pre><code>perl -pe 's/^(\\d+.\\d+.\\d+.\\d+)(.*$)/\\1__/' text.txt \n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -pe 's/^(\\d+\\.\\d+\\.\\d+\\.\\d+)(\\s)(.*)/\\1__/' text.txt\n</code></pre>\n\n<p>both will give you the desired result.</p>\n\n<p>content of text.txt</p>\n\n<pre><code>127.0.0.11 [28/Aug/2017:12:23:21 ]\n127.0.0.112 [28/Aug/2017:12:23:21 ]\n127.0.0.13 [28/Aug/2017:12:23:21 ]\n127.0.0.4 [28/Aug/2017:12:23:21 ]\n</code></pre>\n\n<p>output</p>\n\n<pre><code>127.0.0.11__\n127.0.0.112__\n127.0.0.13__\n127.0.0.4__\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7149836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/31cacc3fd7c4afdabd7e79adaf72f5e9?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7149836/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 45921949, "answer_count": 3, "score": 1, "last_activity_date": 1504197736, "creation_date": 1503931537, "last_edit_date": 1503932011, "question_id": 45921709, "link": "https://stackoverflow.com/questions/45921709/how-can-we-write-the-regular-expression-in-perl-with-back-referencing", "title": "How can we write the regular expression in Perl with back referencing", "body": "<p>I am trying to back referencing with matched string in one liner code. below is the sample record. Please some one help on this.Thanks in advance.</p>\n\n<p>sample Record:</p>\n\n<blockquote>\n  <p>127.0.0.11 [28/Aug/2017:12:23:21 ] </p>\n</blockquote>\n\n<pre><code>perl -pe 's/^(\\d+.\\d+.\\d+.\\d+)( *$)/\\1__/' samplefile.txt\n</code></pre>\n\n<p>Here i want the output as :</p>\n\n<pre><code>127.0.0.11__\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "edited": false, "score": 0, "creation_date": 1503918301, "post_id": 45917431, "comment_id": 78793392, "body": "Have you tried <code>use Cwd &#39;abs_path&#39;;</code> and something like:    <code>if ( -f $file &amp;&amp; -l $file ) {     print abs_path($file); }</code>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1503918346, "post_id": 45917431, "comment_id": 78793417, "body": "When in doubt =&gt; perldoc. <a href=\"https://metacpan.org/pod/File::Find#follow\" rel=\"nofollow noreferrer\">metacpan.org/pod/File::Find#follow</a>"}, {"owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "reply_to_user": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "edited": false, "score": 0, "creation_date": 1503919510, "post_id": 45917431, "comment_id": 78794036, "body": "@Stuart : I tried using whatever you have mentioned like this ,"}, {"owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "reply_to_user": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "edited": false, "score": 0, "creation_date": 1503919783, "post_id": 45917431, "comment_id": 78794181, "body": "@Stuart : Could you please help me with the same."}, {"owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "reply_to_user": {"reputation": 6310, "user_id": 1654231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92569ddbf8ac47f66b2980ca7f69df0d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1654231/stuart"}, "edited": false, "score": 0, "creation_date": 1503920717, "post_id": 45917431, "comment_id": 78794777, "body": "@Stuart: sub find_file { my $file_name = $_[0]; my $dir_path = $_[1]; my result; undef result; print &quot;file=$file_name dir=$dir_path\\n&quot;; find ( sub { return unless /$file_name$/; if ( -f $file_name &amp;&amp; -l $file_name ) { print &quot;file_path is = $dir_path\\n&quot;; } push result, $File::Find::name; }, $dir_path ); I gave the abs_path as my$dir ,But the file is still not found...."}, {"owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "edited": false, "score": 0, "creation_date": 1503923151, "post_id": 45917431, "comment_id": 78796369, "body": "Can someone help me with this ?"}, {"owner": {"reputation": 1354, "user_id": 2122007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/563KL.jpg?s=128&g=1", "display_name": "Jim Black", "link": "https://stackoverflow.com/users/2122007/jim-black"}, "edited": false, "score": 1, "creation_date": 1503928891, "post_id": 45917431, "comment_id": 78800307, "body": "Add &#39;follow =&gt; 1;&#39; line before the &#39;push @result...&#39; line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503942150, "post_id": 45917431, "comment_id": 78807710, "body": "Please follow recommendations that people give you here, and Cyxoi27 even gave you the link.  The package should be specifically told to &quot;follow&quot; symbolic links."}, {"owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503986615, "post_id": 45917431, "comment_id": 78821507, "body": "@zdim: Thanks for your kind reply..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503986893, "post_id": 45917431, "comment_id": 78821646, "body": "You are welcome.  That wasn&#39;t meant to be stern or unfriendly, but rather informative -- sometimes you get everything you need in a skinny half-line comment. I&#39;ve noticed that people with less experience here don&#39;t realize that and then often don&#39;t look carefully into comments, thus my note."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503987063, "post_id": 45917431, "comment_id": 78821728, "body": "The question is OK and you may be missing only that one bit.  (Please let us know if that doesn&#39;t solve it.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503987192, "post_id": 45917431, "comment_id": 78821793, "body": "Tips: (1) Don&#39;t use <code>~~</code>. As attractive as it is, it comes with all kinds of issues and is certainly going to be substantially changed in future releases. (2) To empty an array do <code>@result = ();</code>.  You don&#39;t need <code>undef</code>, while it also implies new memory allocations once you use that array later."}, {"owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "edited": false, "score": 0, "creation_date": 1504001317, "post_id": 45917431, "comment_id": 78830421, "body": "find ( {wanted =&gt; \\&amp;process, follow =&gt; 1, bydepth =&gt;1 }, $dir);        sub process {       # print &quot;Enterning the $File::Find::name \\n&quot;;        my $filename = $_;       #print &quot;$filename\\n&quot;;         if  (-f $filename) {           if ($filename =~ /GDS/) {        \tprint &quot;Found the file in $File::Find::dir/$_\\n&quot;;        #return unless -f;        #return unless /\\.source$/;       push (@files_list, $filename);        print &quot;$filename\\n&quot;; By this logic it is able to trace all the files and follow them and print them"}], "owner": {"reputation": 35, "user_id": 1802617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a855e016d45fe719ad22e1a94ffe9e4a?s=128&d=identicon&r=PG", "display_name": "user1802617", "link": "https://stackoverflow.com/users/1802617/user1802617"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503918052, "creation_date": 1503918052, "question_id": 45917431, "link": "https://stackoverflow.com/questions/45917431/how-to-handle-soft-links-in-perl", "title": "How to handle soft links in Perl", "body": "<p>Hi I am writing a Perl script to search for a file inside a specified directory, I used File::Find to do the same. But what happened was the folder which I was searching was pointing to a softlink, If I give the softlink path it was able to find the file correctly. But if I give the folder path it was saying file not found. I have also mentioned the script below. How to know that the folder/directory which we are searching is pointing to softlink or not. If it is pointing then how to get that softlink path to continue the search.</p>\n\n<pre><code>#!/pkg/qct/software/perl/5.22.0/bin/perl -w\n##!usr/bin/perl\nuse strict;\n#use warnings;\nuse File::Find;\nmy $gds_file_num;\nmy @gds_file;\nour $dir = \"/&lt;path&gt;/\";\nmy @files_list;\nuse 5.010;\n\nopen( my $fh, '&lt;', \"data.txt\") or die \"Can't open data.txt: $!\";\n\n\n   # -----------------------------------------------------------------------------\n# Find the file from given directory path \n# -----------------------------------------------------------------------------\nsub find_file  {\n  my $file_name = $_[0];\n  my $dir_path = $_[1];\n  my @result;\n\n  undef @result;\n  print \"file=$file_name dir=$dir_path\\n\";\n  find ( sub {\n    return unless /$file_name$/;\n    push @result, $File::Find::name;\n  }, $dir_path );\n\n  if(($result[0] ~~ undef)){\n    print \"[Warn] : File not exist : $file_name is not available under $dir_path\\n\";\n    return 0;\n  }\n  else {\n    return $result[0];\n  }\n}\n\n\nwhile ( my $line = &lt;$fh&gt; ) {\n  # chomp $line;\n      if ( $line =~ /g0hd/ ) {\n          print $line;\n              }\n        }      \n      close $fh;\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1503915367, "post_id": 45916304, "comment_id": 78791608, "body": "Why do you want to avoid external modules? Not that I know one that fits the bill exactly, but you could try <a href=\"http://search.cpan.org/perldoc?tcgrep\" rel=\"nofollow noreferrer\">tcgrep -1F</a>, see if it&#39;s fast enough, and modify it to return the indices;  I haven&#39;t looked for other CPAN modules."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1503915531, "post_id": 45916304, "comment_id": 78791705, "body": "There is also <a href=\"http://search.cpan.org/perldoc?List%3A%3ABinarySearch\" rel=\"nofollow noreferrer\">List::BinarySearch</a>. I&#39;d try using modules before implementing anything of your own."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1503915710, "post_id": 45916304, "comment_id": 78791815, "body": "Is the array already in a Perl array, or is it stored on disk? In the latter case, will it comfortably fit into your main memory? If not, it may be faster not to pull it all into main memory at once, even though this precludes binary search."}, {"owner": {"reputation": 1354, "user_id": 2122007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/563KL.jpg?s=128&g=1", "display_name": "Jim Black", "link": "https://stackoverflow.com/users/2122007/jim-black"}, "edited": false, "score": 0, "creation_date": 1503929586, "post_id": 45916304, "comment_id": 78800779, "body": "Will the strings you are searching for exactly match?  Or will they potentially be sub-strings of the large array entries?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "edited": false, "score": 0, "creation_date": 1503918755, "post_id": 45916551, "comment_id": 78793623, "body": "So how would that work if I just wanted to find the index of the string &quot;bob&quot; in the large array?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "edited": false, "score": 0, "creation_date": 1503919075, "post_id": 45916551, "comment_id": 78793796, "body": "@jxm <code>$index_for{&quot;bob&quot;}</code> (quotes around <code>bob</code> are optional)"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 4, "last_activity_date": 1503914893, "creation_date": 1503914893, "answer_id": 45916551, "question_id": 45916304, "link": "https://stackoverflow.com/questions/45916304/perl-searching-a-large-sorted-array-for-index-of-a-string/45916551#45916551", "title": "perl - searching a large /sorted/ array for index of a string", "body": "<p>This sounds like classic hash use case scenario,</p>\n\n<pre><code>my %index_for = map { $large_array[$_] =&gt; $_ } 0 .. $#large_array;\n\nprint \"index in large array:\", $index_for{ $small_array[1000] };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1503914910, "creation_date": 1503914910, "answer_id": 45916557, "question_id": 45916304, "link": "https://stackoverflow.com/questions/45916304/perl-searching-a-large-sorted-array-for-index-of-a-string/45916557#45916557", "title": "perl - searching a large /sorted/ array for index of a string", "body": "<p>Using a binary search is probably optimal here. Binary search only needs O(log n) comparisions (here ~ 17 comparisons per lookup).</p>\n\n<p>Alternatively, you can create a hash table that maps items to their indices:</p>\n\n<pre><code>my %positions;\n$positions{ $large_array[$_] } = $_ for 0 .. $#large_array;\n\nfor my $item (@small_array) {\n  say \"$item has position $positions{$item}\";\n}\n</code></pre>\n\n<p>While now each lookup is possible in O(1) without any comparisons, you do have to create the hash table first. This may or may not be faster. Note that hashes can only use strings for keys. If your items are complex objects with their own concept of equality, you will have to derive a suitable key first.</p>\n"}], "owner": {"reputation": 19, "user_id": 6334337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1bc597d968aa57616b33496a9a7774?s=128&d=identicon&r=PG&f=1", "display_name": "jxm", "link": "https://stackoverflow.com/users/6334337/jxm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550612344, "creation_date": 1503914166, "question_id": 45916304, "link": "https://stackoverflow.com/questions/45916304/perl-searching-a-large-sorted-array-for-index-of-a-string", "title": "perl - searching a large /sorted/ array for index of a string", "body": "<p>I have a large array of approx 100,000 items, and a small array of approx 1000 items.  I need to search the large array for each of the strings in the small array, and I need the <em>index</em> of the string returned. (So I need to search the 100k array 1000 times)</p>\n\n<p>The large array has been sorted so I guess some kind of binary chop type search would be a lot more efficient than using a foreach loop (using 'last' to break the loop when found) which is what I started with.  (this first attempt results in some 30m comparisons!)</p>\n\n<p>Is there a built in search method that would produce a more efficient result, or am I going to have to manually code a binary search?  I also want to avoid using external modules.</p>\n\n<p>For the purposes of the question, just assume that I need to find the index of a single string in the large sorted array. (I only mention the 1000 items to give an idea of the scale)</p>\n"}, {"tags": ["perl", "unit-testing", "testing", "mocking", "test-coverage"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1503908841, "post_id": 45914386, "comment_id": 78787886, "body": "If you are writing the <code>Animal</code> class and <code>Animal</code> is always used together with <code>Horse</code>, then you know that <code>Animal</code> provides a DESTROY method \u2013 the <code>-&gt;can(&#39;SUPER::DESTROY&#39;) check becomes a bit unnecessary. I&#39;d just call </code>$self-&gt;SUPER::DESTROY` directly."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 3, "creation_date": 1503909013, "post_id": 45914386, "comment_id": 78787975, "body": "Btw don&#39;t trigger the DESTROY method in your tests by calling it directly, this might call DESTROY multiple times. Instead, <code>undef $tv_horse</code> to clear the variable which will trigger the destructor."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503909077, "post_id": 45914386, "comment_id": 78788014, "body": "Ok, thank you for the advice"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503912062, "post_id": 45914386, "comment_id": 78789661, "body": "Tip: One shouldn&#39;t call DESTROY explicity (because you get into a situation where DESTROY gets called twice), so replace <code>my $tv_horse = Horse-&gt;named(&#39;Mr. Ed&#39;); stdout_is( sub { $tv_horse-&gt;DESTROY }, ...)</code> with <code>stdout_is( sub { my $tv_horse = Horse-&gt;named(&#39;Mr. Ed&#39;); 1; }, ...)</code>. (The <code>1;</code> is probably unneeded. It&#39;s there to ensure the object isn&#39;t returned.)"}], "answers": [{"comments": [{"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1503908444, "post_id": 45914518, "comment_id": 78787700, "body": "Thank you for your quick reply. This solution is working! However <code>Devel::Cover</code> doesn&#39;t detect this branch case as tested:    blib/lib/Horse.pm line | % | coverage | branch 14 | 50 | T(green) | F(red) | if $self-&gt;can(&#39;SUPER::DESTROY&#39;)"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1503908581, "post_id": 45914518, "comment_id": 78787760, "body": "Do you want <code>DESTROY</code> to return <code>undef</code>, or to remove <code>DESTROY</code> altogether?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 2, "creation_date": 1503908617, "post_id": 45914518, "comment_id": 78787778, "body": "@mabe02 To entirely remove the method, just localize the glob without assigning a new sub: <code>local *Animal::DESTROY;</code> would be sufficient."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1503908874, "post_id": 45914518, "comment_id": 78787906, "body": "I wanted to remove the definition, so this solution is perfect. Thank you!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503911912, "post_id": 45914518, "comment_id": 78789553, "body": "<code>no warnings &#39;redefine&#39;;</code> not needed."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 7, "last_activity_date": 1503912195, "last_edit_date": 1503912195, "creation_date": 1503908110, "answer_id": 45914518, "question_id": 45914386, "link": "https://stackoverflow.com/questions/45914386/testing-branch-assignment-in-perl-for-super-methods/45914518#45914518", "title": "Testing branch assignment in Perl for SUPER:: methods", "body": "<p>This should set removed/redefined subroutine only until the end of enclosing block,</p>\n\n<pre><code>{\n  # not needed when removing method\n  # no warnings 'redefine';\n\n  my $tv_horse = Horse-&gt;named('Mr. Ed');\n  # returns undef\n  # local *Animal::DESTROY = sub { undef };\n\n  # remove the mothod until end of the enclosing block\n  local *Animal::DESTROY;\n\n  # ..\n}\n</code></pre>\n"}], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 45914518, "answer_count": 1, "score": 4, "last_activity_date": 1503912195, "creation_date": 1503907548, "question_id": 45914386, "link": "https://stackoverflow.com/questions/45914386/testing-branch-assignment-in-perl-for-super-methods", "title": "Testing branch assignment in Perl for SUPER:: methods", "body": "<p>I am about to finish to study the <a href=\"http://shop.oreilly.com/product/0636920012689.do\" rel=\"nofollow noreferrer\">Intermediate Perl</a> book.</p>\n\n<p>In chapter 18 <em>Object Destruction</em> is introduced the following <code>DESTROY</code> method definition:</p>\n\n<pre><code># lib/Animal.pm\npackage Animal {\n  # ...\n  sub DESTROY {\n    my $self = shift;\n    if ($self-&gt;{temp_filename}){\n      my $fh = $self-&gt;{temp_fh};\n      close $fh;\n      unlink $self-&gt;{temp_filename};\n    }\n    print '[', $self-&gt;name, \" has died.]\\n\";\n  }\n# ...\n}\n\n# lib/Horse.pm\npackage Horse {\n  use parent qw(Animal)\n  # ...\n  sub DESTROY {\n    my $self = shift;\n    $self-&gt;SUPER::DESTROY if $self-&gt;can( 'SUPER::DESTROY' );\n    print \"[\", $self-&gt;name, \" has gone off to the glue factory.]\\n\";\n  }\n# ...\n}\n</code></pre>\n\n<p>After a few unsuccessfully attempt, I wrote this test based on <a href=\"https://stackoverflow.com/a/5113164/5687152\">this answer</a>:</p>\n\n<pre><code># t/Horse.t\n#!perl -T\n\nuse strict;\nuse warnings;\nuse Test::More tests =&gt; 6;\nuse Test::Output;\n# some other tests\n\n# test DESTROY() when SUPER::DESTROY is not defined;\n{\n  my $tv_horse = Horse-&gt;named('Mr. Ed');\n  stdout_is( sub { $tv_horse-&gt;DESTROY }, \"[Mr. Ed has died.]\\n[Mr. Ed has gone off to the glue factory.]\\n\",\n      'Horse DESTROY() when SUPER::DESTROY is defined');\n}\n\n{\n  my $tv_horse = Horse-&gt;named('Mr. Ed');\n  sub Animal::DESTROY { undef }\n  stdout_is( sub { $tv_horse-&gt;DESTROY }, \"[Mr. Ed has gone off to the glue factory.]\\n\",\n      'Horse DESTROY() when SUPER::DESTROY is not defined');\n}\n</code></pre>\n\n<p>I cannot test the output correctly for both cases since the method redefinition <code>sub Animal::DESTROY { undef }</code> is affecting also the test in the previous block.</p>\n\n<p>Do you know any way to ensure the method redefinition to work as expected?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["linux", "shell", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1503979369, "last_edit_date": 1503979369, "creation_date": 1503908696, "answer_id": 45914692, "question_id": 45913824, "link": "https://stackoverflow.com/questions/45913824/how-to-replace-hello-in-below-linux-file-to-hello1-and-next-occurence-of-hello-t/45914692#45914692", "title": "How to replace hello in below linux file to hello1 and next occurence of hello to hello2 and so on till the end of file", "body": "<pre><code>perl -pe's/hello\\K/++$x/ge'  input.txt\n</code></pre>\n\n<p>This increments the count on each <code>hello</code>, starting with <code>1</code>.  The <code>\\K</code> is a <a href=\"http://perldoc.perl.org/perlre.html#Lookaround-Assertions\" rel=\"nofollow noreferrer\">positive lookbehind</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3543, "user_id": 6329118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a20c0ed8a82fd967952e2539203af9?s=128&d=identicon&r=PG&f=1", "display_name": "CWLiu", "link": "https://stackoverflow.com/users/6329118/cwliu"}, "is_accepted": false, "score": 1, "last_activity_date": 1503910931, "creation_date": 1503910931, "answer_id": 45915343, "question_id": 45913824, "link": "https://stackoverflow.com/questions/45913824/how-to-replace-hello-in-below-linux-file-to-hello1-and-next-occurence-of-hello-t/45915343#45915343", "title": "How to replace hello in below linux file to hello1 and next occurence of hello to hello2 and so on till the end of file", "body": "<p><code>awk</code> still can work for your request, modify your command to,</p>\n\n<pre><code>awk '{for(x=1;x&lt;=NF;x++)if($x~/hello/){sub(/hello/,\"&amp;\"++i,$x)}}1' file.txt &gt; new.txt\n</code></pre>\n\n<p>Brief explanation,</p>\n\n<ul>\n<li>The <code>&amp;</code> in the <code>sub</code> is replaced with the text that was actually matched, which would be <code>\"hello\"</code></li>\n<li>You may add the third parameter for <code>sub</code> to process <code>$x</code> only</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1503924971, "creation_date": 1503924971, "answer_id": 45919614, "question_id": 45913824, "link": "https://stackoverflow.com/questions/45913824/how-to-replace-hello-in-below-linux-file-to-hello1-and-next-occurence-of-hello-t/45919614#45919614", "title": "How to replace hello in below linux file to hello1 and next occurence of hello to hello2 and so on till the end of file", "body": "<p>With GNU awk for word boundaries:</p>\n\n<pre><code>$ awk '{while(sub(/\\&lt;hello\\&gt;/,\"&amp;\"c+1))c++;}1' file\nThis is a test script hello1.\nThis is hello2 a test script.\nThis hello3 is a test script hello4.\nThis is a test script hello5.\nhello6 This is a test script hello7.\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5962146, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ODqQYcBfs2s/AAAAAAAAAAI/AAAAAAAABw0/OpgBMkFpq0s/photo.jpg?sz=128", "display_name": "Onkar Patil", "link": "https://stackoverflow.com/users/5962146/onkar-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1503979369, "creation_date": 1503905326, "last_edit_date": 1503910159, "question_id": 45913824, "link": "https://stackoverflow.com/questions/45913824/how-to-replace-hello-in-below-linux-file-to-hello1-and-next-occurence-of-hello-t", "title": "How to replace hello in below linux file to hello1 and next occurence of hello to hello2 and so on till the end of file", "body": "<pre><code>This is a test script hello.\nThis is hello a test script.\nThis hello is a test script hello.\nThis is a test script hello.\nhello This is a test script hello.\n</code></pre>\n\n<p>Searched but couldn't find proper explanation for above using awk or sed command.\nAny guidance will be highly appreciated. </p>\n\n<p>I tried below command need some modification to below to print hello string before each number </p>\n\n<p><code>awk '{for(x=1;x&lt;=NF;x++)if($x~/hello/){sub(/hello/,++i)}}1' file.txt &gt; new.txt</code></p>\n\n<p>Output:</p>\n\n<pre><code>This is a test script 1. \nThis is 2 a test script. \nThis 3 is a test script 4. \nThis is a test script 5. \n6 This is a test script 7. \n</code></pre>\n"}, {"tags": ["html", "forms", "perl", "mojolicious"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503905026, "post_id": 45913203, "comment_id": 78785954, "body": "Could you perhaps <a href=\"https://stackoverflow.com/posts/45913203/edit\">edit</a> the question to show the HTML snippet you are trying to create? I&#39;m not sure I understand your problem description."}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503905593, "post_id": 45913203, "comment_id": 78786246, "body": "Already done, hope it make it easier to understand now."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503912217, "post_id": 45913203, "comment_id": 78789746, "body": "You can answer your own question. Please move the working code from the question into an answer, and explain why it&#39;s working. You can accept your own answer tomorrow."}], "answers": [{"tags": [], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1503913762, "creation_date": 1503913762, "answer_id": 45916163, "question_id": 45913203, "link": "https://stackoverflow.com/questions/45913203/get-multiple-values-from-dynamically-generated-items-with-mojolicious/45916163#45916163", "title": "Get multiple values from dynamically generated items with mojolicious", "body": "<p>This can be done using this piece of code:</p>\n\n<pre><code>%= form_for 'save' =&gt; begin\n    &lt;button type=\"submit\" formaction=\"insert\"&gt;Insert&lt;/button&gt;\n    % foreach my $value ( @{ stash('tagitems') } ) {\n        &lt;div id=\"inside\"&gt;\n            &lt;input type=\"checkbox\" name=\"insert\"&gt;\n            %= hidden_field 'id' =&gt; $indexnum\n            %= input_tag 'tag', value=&gt;\"$value\", size=&gt;\"50%\"\n            &lt;button type=\"submit\" formaction=\"save\"&gt;save&lt;/button&gt;\n            &lt;%= select_field 'levelSelected' =&gt; [ @{ stash('levelsArray') }] %&gt;\n        &lt;/div&gt;\n    % }\n    % end\n&lt;/form&gt;\n</code></pre>\n\n<p>Then, in the controller:</p>\n\n<pre><code>get '/insert' =&gt; sub {\n    my $mojo = shift;\n    my @all_values;\n\n    foreach my $field ('id', 'insert', 'tag', 'levelSelected') {\n       @all_values = @{$mojo-&gt;every_param($field)};\n        print Dumper (@all_values);\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 45916163, "answer_count": 1, "score": 1, "last_activity_date": 1503913762, "creation_date": 1503903030, "last_edit_date": 1503907832, "question_id": 45913203, "link": "https://stackoverflow.com/questions/45913203/get-multiple-values-from-dynamically-generated-items-with-mojolicious", "title": "Get multiple values from dynamically generated items with mojolicious", "body": "<p>I'm developing a small webpage that reads data from a couple of files and render it into a website. In that website, user must be able to choose one or more items and perform some work with those (changing name, append values, etc). I've been able to do most of the work, but now I'm facing a problem. I have this form:</p>\n\n<pre><code>&lt;div id=\"inside\"&gt;\n    % foreach my $value ( @{ stash('tagitems') } ) {\n        &lt;div id=\"inside\"&gt;\n            %= form_for 'save' =&gt; begin\n                &lt;input type=\"radio\" name=\"radioid\"&gt;\n                %= hidden_field 'id' =&gt; $indexnum\n                %= input_tag 'tag', value=&gt;\"$value\", size=&gt;\"50%\"\n                %= submit_button 'Save changes'\n                &lt;%= select_field 'levelSelected' =&gt; [ @{ stash('levelsArray') }] %&gt;\n                &lt;button type=\"submit\" form=\"insertForm\"&gt;Insert&lt;/button&gt;\n            % end\n            &lt;form action=\"/insert\" id=\"insertForm\"&gt;&lt;/form&gt;\n\n        &lt;/div&gt;\n        % $indexnum += 1;\n    % }\n</code></pre>\n\n<p>I'm getting everything rendered and it's ok. I can use the save form (that routes to a sub that changes it's name. the problem is with the <em>inserform</em>. The insert is supposed to check every radio button that it's checked and take the value <em>tag</em> and <em>levelSelected</em>.</p>\n\n<p>How can I do this?</p>\n\n<p>Thanks.</p>\n\n<p><strong>Edit</strong>: </p>\n\n<p>I've multiple instances that looks like this:\n<a href=\"https://i.stack.imgur.com/ffmwp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ffmwp.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, I need to have just one insert button (instead of one per item) that find out whatever radio button is checked and get info of all checked items (tag and levelSelected) when clicked the submit button.</p>\n\n<p><strong>EDIT2 - CODE THAT WORKS</strong>:\nI've found a way to do it. The code is here:</p>\n\n<pre><code>%= form_for 'save' =&gt; begin\n    &lt;button type=\"submit\" formaction=\"insert\"&gt;Insert&lt;/button&gt;\n    % foreach my $value ( @{ stash('tagitems') } ) {\n        &lt;div id=\"inside\"&gt;\n            &lt;input type=\"checkbox\" name=\"insert\"&gt;\n            %= hidden_field 'id' =&gt; $indexnum\n            %= input_tag 'tag', value=&gt;\"$value\", size=&gt;\"50%\"\n            &lt;button type=\"submit\" formaction=\"save\"&gt;save&lt;/button&gt;\n            &lt;%= select_field 'levelSelected' =&gt; [ @{ stash('levelsArray') }] %&gt;\n        &lt;/div&gt;\n    % }\n    % end\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1503866263, "post_id": 45909077, "comment_id": 78776960, "body": "Use a module, <a href=\"http://search.cpan.org/~ishigaki/JSON-2.94/lib/JSON.pm\" rel=\"nofollow noreferrer\">JSON</a>"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 3, "creation_date": 1503868186, "post_id": 45909077, "comment_id": 78777450, "body": "What do you mean by &quot;failed&quot;? What happens when you run your program? What did you expect to happen instead? Post a <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503881529, "post_id": 45909077, "comment_id": 78779894, "body": "I&#39;m confused... You ask for help storing data, but you show a text file instead of a data structure?!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503889838, "post_id": 45909077, "comment_id": 78781317, "body": "...Is your problem actually an inability to parse your text file?"}, {"owner": {"reputation": 107, "user_id": 5022005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-pQW0aZ-VlO8/AAAAAAAAAAI/AAAAAAAAAFE/Cs2wSLyPPAc/photo.jpg?sz=128", "display_name": "ZiSean", "link": "https://stackoverflow.com/users/5022005/zisean"}, "edited": false, "score": 0, "creation_date": 1503890804, "post_id": 45909077, "comment_id": 78781471, "body": "Sorry for late reply, I need to parse text into JSON array format, but I have no idea how to do it. I&#39;m thinking of using data structure, will it make sense for it??"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5022005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-pQW0aZ-VlO8/AAAAAAAAAAI/AAAAAAAAAFE/Cs2wSLyPPAc/photo.jpg?sz=128", "display_name": "ZiSean", "link": "https://stackoverflow.com/users/5022005/zisean"}, "edited": false, "score": 0, "creation_date": 1504256633, "post_id": 45947525, "comment_id": 78953351, "body": "Thx, that&#39;s what I want, sorry to the people who try to solve this, I will improve myself in asking question."}], "tags": [], "owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "is_accepted": true, "score": 2, "last_activity_date": 1504037147, "creation_date": 1504037147, "answer_id": 45947525, "question_id": 45909077, "link": "https://stackoverflow.com/questions/45909077/how-to-store-texts-from-text-file-in-json-format-with-perl/45947525#45947525", "title": "How to store texts from text file in json format with Perl", "body": "<p>Not sure what the structure of your text file is and how consistent it is.  I think every entry is 5 lines long, with each entry's items in the same order.  If that's the case, maybe one way to do it is to read the text file in 5 lines at a time, assign each line to the appropriate hash key, and then store that hash ref in an array that we can later use for the JSON structure.  Maybe a more elegant way to do it, but what about something like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nuse JSON;\n\nmy $input_file = shift;\nmy @results;\n\nopen(my $fh, \"&lt;\", $input_file);\n# Read the text file 5 lines at a time, and store each line in the hash data with the desired keys.\nwhile ( (my @lines) = map { scalar(&lt;$fh&gt;) or () } 0..4 ) {\n    my %data = ('beername' =&gt; $lines[0],\n                'location' =&gt; $lines[1],\n                'ABV'      =&gt; $lines[2],\n                'IBU'      =&gt; $lines[3],\n                'Rating'   =&gt; $lines[4],\n    );\n    # Store these hash refs in an array that we'll later convert to JSON.\n    push(@results, \\%data);\n}\n\n# Write results to file.\nopen(my $json_out, \"&gt;\", 'beers.json');\nprint {$json_out} encode_json(\\@results);\n</code></pre>\n\n<p>This will result in a \"beers.json\" file that will have the structure:</p>\n\n<pre><code>$ json_xs &lt;beers.json\n[\n   {\n      \"ABV\" : \"5.2\\n\",\n      \"IBU\" : \"13.65\\n\",\n      \"location\" : \"Lawrence, Kansas, USA\\n\",\n      \"Rating\" : \"Rating - 0.00\\n\",\n      \"beername\" : \"23rd Street Wave the Wheat Ale\\n\"\n   },\n   {\n      \"ABV\" : \"5.2\\n\",\n      \"IBU\" : \"Unknown\\n\",\n      \"location\" : \"Carbondale, Pennsylvania, USA\\n\",\n      \"Rating\" : \"Rating - 0.00\\n\",\n      \"beername\" : \"3 Guys &amp; A Beer\u00c3\u00a2\u00e2\u00ac\u00e2\u00a2d Wheat the People\\n\"\n   },\n   {\n      \"location\" : \"Lake Orion, Michigan, USA\\n\",\n      \"Rating\" : \"Rating - 0.00\\n\",\n      \"beername\" : \"51 North Paint Creek Wheat\\n\",\n      \"IBU\" : \"Unknown\\n\",\n      \"ABV\" : \"4.8\\n\"\n   }\n]\n</code></pre>\n\n<p>Like I said, maybe not elegant and completely dependent upon the assumption that your file is 5 lines long for each beer and the metadata for each beer is in the same order each time.  But, if nothing else, this can possibly serve as a good starting point?</p>\n"}], "owner": {"reputation": 107, "user_id": 5022005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-pQW0aZ-VlO8/AAAAAAAAAAI/AAAAAAAAAFE/Cs2wSLyPPAc/photo.jpg?sz=128", "display_name": "ZiSean", "link": "https://stackoverflow.com/users/5022005/zisean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 45947525, "answer_count": 1, "score": -1, "last_activity_date": 1504037147, "creation_date": 1503865985, "question_id": 45909077, "link": "https://stackoverflow.com/questions/45909077/how-to-store-texts-from-text-file-in-json-format-with-perl", "title": "How to store texts from text file in json format with Perl", "body": "<p>I would like to know how to store texts from a text file in Json format with Perl.</p>\n\n<p>Texts from text file</p>\n\n<pre><code>23rd Street Wave the Wheat Ale\n\nLawrence, Kansas, USA\n\n5.2\n\n13.65\n\nRating - 0.00\n\n3 Guys &amp; A Beer\u00e2\u20ac\u2122d Wheat the People\n\nCarbondale, Pennsylvania, USA\n\n5.2\n\nUnknown\n\nRating - 0.00\n\n51 North Paint Creek Wheat\n\nLake Orion, Michigan, USA\n\n4.8\n\nUnknown\n\nRating - 0.00\n</code></pre>\n\n<p>I had tried to implement codes but it failed, because I found that perl can read file using while loop on the internet.</p>\n\n<p>Below is my Perl scripting</p>\n\n<pre><code>for($i = 0; $i &lt; $fileSize; $i+2){\nsay qq{{\"beerName\": \"$beerName\", \n\"location\":\"$location\",\n\"ABV\":\"$ABV\",\n\"IBU\":\"$IBU\",\n\"Rating\":\"$Rating\"}};\n}\n</code></pre>\n"}, {"tags": ["perl", "mp3", "rating", "winamp"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503847221, "post_id": 45906348, "comment_id": 78771332, "body": "See <a href=\"https://metacpan.org/pod/MP3::Tag::Utils\" rel=\"nofollow noreferrer\">MP3::Tag::Utils</a>."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 0, "creation_date": 1503854195, "post_id": 45906348, "comment_id": 78773401, "body": "Can you show us the Perl code you tried already?"}], "owner": {"reputation": 19, "user_id": 8523767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f29f1329753191cf2c4d8acd822df4c?s=128&d=identicon&r=PG&f=1", "display_name": "sb9x", "link": "https://stackoverflow.com/users/8523767/sb9x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504540361, "creation_date": 1503846192, "last_edit_date": 1504540361, "question_id": 45906348, "link": "https://stackoverflow.com/questions/45906348/perl-mp3tag-add-update-rating-to-a-file", "title": "perl MP3::Tag: Add/Update Rating to a file", "body": "<p>i'm using the latest release of strawberry perl with the latest mp3::tag module. </p>\n\n<p>i would like update many mp3 files to add a rating attribute. \ni'm using winamp and winamp stores the rating attribute by default in the media library.</p>\n\n<p>but in winamp is an option, that the ratings can be automatically stored in the mp3 file. i have tested: The attribute name is called \"RATING WINAMP\" - its a extended tag, but how can i update the tag or add it to a mp3 file (if the attribute doesnt exist).</p>\n\n<p>Thanks :-)</p>\n\n<p>update: 2017/09/04: \ni had found out, that the rating was stored in the POPM Frame.\nbut when i edit the frame with this code, the rating will not stored correctly.</p>\n\n<pre><code>use MP3::Tag; \nuse Data::Dumper;\n\n$filename = 'x:\\test.mp3';\n$mp3 = MP3::Tag-&gt;new($filename) or die \"\\nFehler: MP3::Tag $filename!\\n\\n\";\nif ( exists $mp3-&gt;{ID3v2} ) {\n   $id3v2 = $mp3-&gt;{ID3v2};\n} else {\n   $id3v2 = $mp3-&gt;new_tag(\"ID3v2\");\n}\n$id3v2-&gt;frame_select_by_descr('POPM',\"rating@winamp.com\",1,1);\n$id3v2-&gt;write_tag();\n$mp3-&gt;close();\n</code></pre>\n\n<p>Screenshot: <em><a href=\"https://imgur.com/a/9541Q\" rel=\"nofollow noreferrer\">https://imgur.com/a/9541Q</a></em></p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1503836833, "post_id": 45904923, "comment_id": 78768326, "body": "hmm i see. i tried  splitting my first example into 4 blocks and the issue indeed occurs. so when im redefining a variable in the same block the previous content doesn&#39;t get weakened?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1503837111, "post_id": 45904923, "comment_id": 78768398, "body": "@Nullman There are no weak references in your code. Perl uses reference counting to manage garbage collection. If the reference count of an object drops to zero, the object is destroyed. Variables with <code>my</code> only exist until the end of the block. A file descriptor is not a reference that Perl recognizes. In your last example the array keeps referencing the file handles so they are not destroyed."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 1, "creation_date": 1503837619, "post_id": 45904923, "comment_id": 78768551, "body": "so when i redefine $fh in the first example, the previously opened file handle is still open somewhere in memory until the block ends, but in a loop it closes at the end of each iteration? does that mean that each iteration of a loop is a separate block?"}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1503838054, "post_id": 45904923, "comment_id": 78768642, "body": "i found a <a href=\"http://www.perlmonks.org/?node_id=1009647\" rel=\"nofollow noreferrer\">perl monks</a> explenation, it seems that loops iterations are indeed indipendant"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 1, "creation_date": 1503839208, "post_id": 45904923, "comment_id": 78768927, "body": "Yes, each time the <code>my</code> is executed you get a <i>new</i> variable. The old variable with the same name still exists, but is not visible. In contrast, the variables inside your loop body are destroyed at the end of the block."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 3, "last_activity_date": 1503836666, "creation_date": 1503836666, "answer_id": 45904923, "question_id": 45904862, "link": "https://stackoverflow.com/questions/45904862/fileno-and-reference-weakening-confusion/45904923#45904923", "title": "fileno and reference weakening confusion", "body": "<p>The <code>my $fh</code> is scoped to the enclosing block. This variable is the only reference to the file handle. When the file handle is destroyed the file is closed, and the file descriptor number can be reused for the next file. The FD is just an integer, it has no magic to keep the file open.</p>\n\n<p>By keeping references to the opened file handles in an array, you've extended the lifetime of the file handles. Therefore each new file gets a new FD number.</p>\n"}], "owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 45904923, "answer_count": 1, "score": 1, "last_activity_date": 1503836666, "creation_date": 1503836252, "question_id": 45904862, "link": "https://stackoverflow.com/questions/45904862/fileno-and-reference-weakening-confusion", "title": "fileno and reference weakening confusion", "body": "<p>Im trying to use fileno to make a table of file handles for my threads and I have encountered a situation which I can't quite understand. consider the following code:</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nmy %fhh; #this is shared, but that's not important for my issue\nopen my $fh , '&gt;', 'out1.txt' ;\n$fhh{1} = fileno $fh;\nopen my $fh , '&gt;', 'out2.txt' ;\n$fhh{2} = fileno $fh;\nopen my $fh , '&gt;', 'out3.txt' ;\n$fhh{3} = fileno $fh;\nopen my $fh , '&gt;', 'out4.txt' ;\n$fhh{4} = fileno $fh;\nprint Dumper \\%fhh;\n</code></pre>\n\n<p>the output i get is:</p>\n\n<pre><code>$VAR1 = {\n          '4' =&gt; '9',\n          '1' =&gt; '6',\n          '3' =&gt; '8',\n          '2' =&gt; '7'\n        };\n</code></pre>\n\n<p>So far so good, unfortunately I need to generate an unknown number of handles, so i tried the following code:</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nmy %fhh;\nforeach my $i (1 .. 4){\n    my $file = \"out\" . $i . \".txt\";\n    open my $fh , '&gt;',  $file ;\n    $fhh{$i} = fileno $fh;\n}\nprint Dumper \\%fhh;\n</code></pre>\n\n<p>here i get the output:</p>\n\n<pre><code>$VAR1 = {\n          '4' =&gt; '10',\n          '1' =&gt; '10',\n          '3' =&gt; '10',\n          '2' =&gt; '10'\n        };\n</code></pre>\n\n<p>so something is wrong, perhaps here $fh gets weakened and lost? so i tried the following:</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nmy %fhh;\nmy @mfw;\nforeach my $i (1 .. 4){\n    my $file = \"out\" . $i . \".txt\";\n    open my $fh , '&gt;',  $file ;\n    push @mfw, $fh; \n    $fhh{$i} = fileno $fh;\n\n}\nprint Dumper \\%fhh;\n</code></pre>\n\n<p>here the output is correct again, like in the first example, so it seems it is indeed a weakening issue, but then why isn't this happening in the first example? I am redefining $fh every time and even if i surround the whole block in {} it still works fine, could some one explain to me whats going on?<br>\nI'm on perl 5.14 if thats important</p>\n"}, {"tags": ["perl", "ipc"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503821127, "post_id": 45902789, "comment_id": 78764454, "body": "Which perl version? On 5.20 it waits for 5 sec and terminates normally."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503822517, "post_id": 45902789, "comment_id": 78764745, "body": "perl 5.24 on OS X ... I suspect the exit status is being reported erroneously by tcsh :/"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1503822682, "post_id": 45902789, "comment_id": 78764805, "body": "can_read uses select() <a href=\"https://metacpan.org/source/GBARR/IO-1.25/lib/IO/Select.pm#L99\" rel=\"nofollow noreferrer\">metacpan.org/source/GBARR/IO-1.25/lib/IO/Select.pm#L99</a>"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1503830565, "post_id": 45904042, "comment_id": 78766693, "body": "Also, mixing buffered I/O (<code>&lt;</code> <code>&gt;</code>, <code>readline</code>) and unbuffered I/O (<code>select</code>, <code>can_read</code>, <code>sysread</code>) on the same handle is a very bad idea."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1503850740, "post_id": 45904042, "comment_id": 78772303, "body": "so then with <code>select</code> and the <code>IO::Select</code> wrappers over select ... how do I get the length of the content I can read for the filehandles. I think <code>sysread</code> requires a length since it&#39;s a thin wrapper over <code>read(2)</code>."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 1, "creation_date": 1503851485, "post_id": 45904042, "comment_id": 78772526, "body": "@GregoryNisbet:  the length parameter in sysread  specifies how much you <b>want</b> to read at most not how much you <b>will</b> read. If less data are available sysread will return these data (or block if no data are available at all but no end of data too)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1503899459, "post_id": 45904042, "comment_id": 78783444, "body": "@Gregory Nisbet, If you are reading from multiple handles, your code will look like <a href=\"https://stackoverflow.com/a/33206116/589924\">this</a>"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1503830579, "last_edit_date": 1503830579, "creation_date": 1503830281, "answer_id": 45904042, "question_id": 45902789, "link": "https://stackoverflow.com/questions/45902789/how-does-perl-know-how-many-bytes-to-read-in-a-handle-from-ioselect-can-rea/45904042#45904042", "title": "How does Perl know how many bytes to read in a handle from IO::Select::-&gt;can_read?", "body": "<p>Neither IO::Select knows the length nor the <code>&lt;...&gt;</code> operator or <code>readline</code> function knows it. Instead it will just try to read what is there until the end of the line. If no end of line character is found (i.e. <code>$/</code>) it will simply return all available data in case of non-blocking file handle or wait until end of line or end of data in case of a blocking file handle.</p>\n\n<p>In your specific case <code>echo a; sleep 5; echo b</code> results in a line <code>a\\n</code> and 5 seconds later in a line <code>b\\n</code>. Since your code uses  <code>&lt;..&gt;</code> in scalar context it will only read a single line. This means it will stop after the first line end was found and return this line, resulting in <code>a\\n</code>.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 45904042, "answer_count": 1, "score": 1, "last_activity_date": 1503830579, "creation_date": 1503820119, "last_edit_date": 1503822369, "question_id": 45902789, "link": "https://stackoverflow.com/questions/45902789/how-does-perl-know-how-many-bytes-to-read-in-a-handle-from-ioselect-can-rea", "title": "How does Perl know how many bytes to read in a handle from IO::Select::-&gt;can_read?", "body": "<p>I'm using <code>IO::Select</code>'s <code>can_read</code> method to select file handles that are ready for reading in a simple perl script.</p>\n\n<p>However, the <code>&lt;...&gt;</code> operator on filehandles does not require a length to be passed to it.</p>\n\n<p>Is <code>IO::Select</code> reaching inside the filehandle to set the \"appropriate length\" ... or what exactly is happening?</p>\n\n<pre><code>#!/usr/bin/env perl\nuse IO::Select;\nuse strict;\nuse warnings;\n\nmy @handles = IO::Select-&gt;new(\\*STDIN)-&gt;can_read(3);\n\n@handles == 1 or die;\n\nmy $handle = $handles[0];\n\nprint (\"I read \" . &lt;$handle&gt; . \"\\n\");\n</code></pre>\n\n<p>For instance, the following script prints <code>\"a\\n\"</code> immediately and then exits after three seconds.</p>\n\n<pre><code>% sh -c 'echo a; sleep 5; echo b' | perl reader.pl\nI read a\n\nExit 141\n</code></pre>\n\n<p>It then exits abnormally for some strange reason ... not sure where the exit status is being set.</p>\n\n<p>EDIT: the apparent abnormal exit appears to be a bug in tcsh.</p>\n"}, {"tags": ["linux", "perl", "append"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1503775433, "post_id": 45898896, "comment_id": 78756984, "body": "What shell are you using? <code>echo $SHELL</code> And are you <i>sure</i> <code>~&#47;directory2&#47;7120599_S7.txt</code> already exists?"}, {"owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1503777446, "post_id": 45898896, "comment_id": 78757473, "body": "@Schwern when I typed <code>echo $SHELL</code>, I got <code>&#47;bin&#47;bash</code>. I think I&#39;m using the BASH shell. <code>~&#47;directory2&#47;7120599_S7.txt</code> exists"}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1503775868, "creation_date": 1503775868, "answer_id": 45898972, "question_id": 45898896, "link": "https://stackoverflow.com/questions/45898896/using-linux-wildcard-character-in-perl-script/45898972#45898972", "title": "Using Linux Wildcard character in Perl Script", "body": "<p>If we look at the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_07\" rel=\"noreferrer\">POSIX shell</a>:</p>\n\n<blockquote>\n  <p>For the other redirection operators, the word that follows the redirection operator shall be subjected to tilde expansion, parameter expansion, command substitution, arithmetic expansion, and quote removal. Pathname expansion shall not be performed on the word by a non-interactive shell; an interactive shell may perform it, but shall do so only when the expansion would result in one word.</p>\n</blockquote>\n\n<p>Pathname expansion refers to globs like <code>*.txt</code>.</p>\n\n<p>The Bash shell does not follow POSIX precisely and tries to be more convenient and sensible, including applying pathname expansion to redirection targets even in non-interactive mode. Usually, your interactive shell will be Bash.</p>\n\n<p>However, when you run <code>system</code> commands this usually runs a simpler shell that is POSIX-compliant (though that depends entirely on your operating system). Often this shell is installed as <code>/bin/sh</code>.</p>\n\n<p>If you want Bash, you must run Bash explicitly, e.g.</p>\n\n<pre><code>system \"bash\", \"-c\", \"cat ~/directory1/7120599_S1.txt &gt;&gt; ~/directory2/7120599_S*.txt\"\n</code></pre>\n\n<p>By the way, you can force Bash to follow POSIX if you set the <code>POSIXLY_CORRECT</code> environment variable.</p>\n"}], "owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 45898972, "answer_count": 1, "score": 2, "last_activity_date": 1503775868, "creation_date": 1503775215, "question_id": 45898896, "link": "https://stackoverflow.com/questions/45898896/using-linux-wildcard-character-in-perl-script", "title": "Using Linux Wildcard character in Perl Script", "body": "<p>I have two files.</p>\n\n<p>~/directory1/7120599_S1.txt</p>\n\n<pre><code>hello world!\n</code></pre>\n\n<p>~/directory2/7120599_S7.txt</p>\n\n<pre><code>bye world!\n</code></pre>\n\n<p>I'm looking for Perl code that will append the contents of <code>7120599_S1.txt</code> to the end of <code>7120599_S7.txt</code>. The following command works in Linux:</p>\n\n<blockquote>\n  <p>$ cat ~/directory1/7120599_S1.txt >> ~/directory2/7120599_S*.txt</p>\n</blockquote>\n\n<p>New ~/directory2/7120599_S7.txt</p>\n\n<pre><code>hello world!\nbye world!\n</code></pre>\n\n<p>But for some reason this doesn't work in Perl</p>\n\n<pre><code>system \"cat ~/directory1/7120599_S1.txt &gt;&gt; ~/directory2/7120599_S*.txt\"\n</code></pre>\n\n<p>Instead it creates a new file in <code>directory2</code> called <code>7120599_S*.txt</code>. How do I get Perl to recognize the Linux wildcard character?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 64716, "user_id": 157957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBRE7.jpg?s=128&g=1", "display_name": "IMSoP", "link": "https://stackoverflow.com/users/157957/imsop"}, "edited": false, "score": 0, "creation_date": 1503772360, "post_id": 45898408, "comment_id": 78756077, "body": "Hi, you&#39;ve shown your expected output, but not your current output, or where you think the problem is. Could you <a href=\"https://stackoverflow.com/posts/45898408/edit\">edit</a> your question to be clearer what you need?"}, {"owner": {"reputation": 11, "user_id": 8450886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492d95c08580895a6047d90deb5b7a2c?s=128&d=identicon&r=PG&f=1", "display_name": "user8450886", "link": "https://stackoverflow.com/users/8450886/user8450886"}, "reply_to_user": {"reputation": 64716, "user_id": 157957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBRE7.jpg?s=128&g=1", "display_name": "IMSoP", "link": "https://stackoverflow.com/users/157957/imsop"}, "edited": false, "score": 0, "creation_date": 1503773457, "post_id": 45898408, "comment_id": 78756395, "body": "Hi ,I have updated the output that I have got from my code .I think it is mainly the problem with regular expression that I have used .Kindly suggest"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8450886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492d95c08580895a6047d90deb5b7a2c?s=128&d=identicon&r=PG&f=1", "display_name": "user8450886", "link": "https://stackoverflow.com/users/8450886/user8450886"}, "edited": false, "score": 0, "creation_date": 1503828926, "post_id": 45899318, "comment_id": 78766342, "body": "Hi Thank you for the input .But I have one more doubt I have changed my input format .Then I tried using the code which is given but it is not printing any output .The expression I have used is( local $/ = &quot;# end data(.*)\\n&quot;..The changes in the input is updated in the above input description Kindly suggest"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 11, "user_id": 8450886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492d95c08580895a6047d90deb5b7a2c?s=128&d=identicon&r=PG&f=1", "display_name": "user8450886", "link": "https://stackoverflow.com/users/8450886/user8450886"}, "edited": false, "score": 0, "creation_date": 1503851043, "post_id": 45899318, "comment_id": 78772402, "body": "&quot;<b>I have changed my input format</b> &quot; Don&#39;t do that - it renders my example incorrect. Use a buffer and print the lines if lines in the buffer do not match Pen or Laptop."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1503778521, "creation_date": 1503778521, "answer_id": 45899318, "question_id": 45898408, "link": "https://stackoverflow.com/questions/45898408/text-file-manipulation-in-perl/45899318#45899318", "title": "Text file manipulation in perl", "body": "<p>The <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a> can't be used as an argument to <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> - it requires a <code>/PATTERN/</code>.</p>\n\n<p>I can't explain the results you got from your code with the incorrect usage of split. Its really behaving weirdly!</p>\n\n<p>A few comments on your code.</p>\n\n<p>You are <code>using</code> strict and warnings. A good practice to find errors in code being developed</p>\n\n<p>You should use the preferred 3 argument to open files, preferring a lexical filehandle, <code>$in</code> to a bareword filehandle, <code>filein</code>. And should always check to see that the file opened without errors, <code>. . . or die $!</code>.</p>\n\n<p><code>open(filein, \"&lt;Input.txt\");</code> better written as - <code>open my $in, '&lt;', 'Input.txt' or die $!;</code></p>\n\n<p><code>print fileout \"$_\";</code> the quotes around <code>$_</code> are unneccesary, just print the <code>$_</code> variable</p>\n\n<p>A working program that gets the output you want using some perl features, could be (below) - </p>\n\n<pre><code>open my $out, '&gt;', 'file2' or die $!;\n\n{\n    local $/ = \"# end data\\n\";\n    while (&lt;$in&gt;) {\n        print $out $_ unless /Pen|Laptop/;  \n    }\n}\n</code></pre>\n\n<p>The default input record separator is <code>\\n</code>. Here, I defined it, (local to the block), to <code>\"# end data\\n\"</code>.</p>\n\n<p>(creating a block isn't necessary in this case, but should generally be done so that that when the block goes out of scope, the input record separator regains it's previous value - here the default value of <code>\\n</code>. <code>local</code> only uses the value assigned in the scope of the block)</p>\n\n<p>So, this program reads in chunks of lines rather a line at a time, (because <code>$/</code> separator is <code>\"# end data\\n\"</code> instead of <code>\"\\n\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "is_accepted": true, "score": 0, "last_activity_date": 1504203498, "last_edit_date": 1504203498, "creation_date": 1504202058, "answer_id": 45987470, "question_id": 45898408, "link": "https://stackoverflow.com/questions/45898408/text-file-manipulation-in-perl/45987470#45987470", "title": "Text file manipulation in perl", "body": "<p>below script will give you almost the desired output</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen (FH,\"text.txt\") || die \"Not able to open text.txt $!\";\n@values=();\nwhile($line = &lt;FH&gt;)\n{\n        unless($line=~/end data/)\n        {\n                chomp($line);\n                push(@values,$line);\n                next;\n        }\n\n        if ( grep{ $_ =~ /Pen|Laptop/i} @values )\n        {\n                @values=();\n        }\n        else\n        {\n                open(FH2,\"&gt;&gt;newtext.txt\") || die \"Not able to open newtext.txt $!\";\n                foreach (@values)\n                {\n                        print FH2 \"$_\\n\";\n                }\n                close(FH2);\n                @values=();\n        }\n}\nclose(FH);\n</code></pre>\n\n<p>content of text.txt :-</p>\n\n<pre><code># start data a1\n Data1 Book 1234\n Data1 Pen 54635\n Data1 Laptop 4567\n Data1 Lens 6473\n # end data a1\n # start data a2\n Data2 Book 1234\n Data2 Box 54635\n Data2 Card 4567\n Data2 Lens 6473\n # end data a2\n # start data a3\n Data2 Book 1234\n Data2 Box 54635\n Data2 Lamp 4567\n Data2 Lens 6473\n # end data a3\n</code></pre>\n\n<p>output in newtext.txt:-</p>\n\n<pre><code># start data a2   \nData2 Book 1234  \nData2 Box 54635  \nData2 Card 4567  \nData2 Lens 6473  \n# start data a3\nData2 Book 1234\nData2 Box 54635\nData2 Lamp 4567\nData2 Lens 6473\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8450886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492d95c08580895a6047d90deb5b7a2c?s=128&d=identicon&r=PG&f=1", "display_name": "user8450886", "link": "https://stackoverflow.com/users/8450886/user8450886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 45987470, "answer_count": 2, "score": 0, "last_activity_date": 1504203498, "creation_date": 1503771569, "last_edit_date": 1503828645, "question_id": 45898408, "link": "https://stackoverflow.com/questions/45898408/text-file-manipulation-in-perl", "title": "Text file manipulation in perl", "body": "<p>Here I am trying to split the file from <code># start data</code> to <code># end data</code>  and if the string  'Pen' or 'Laptop' is present,the code should continue without \nwriting into the file, if not it should write into the out file.</p>\n\n<pre><code> Input\n         # start data a1   \n         Data1 Book 1234  \n         Data1 Pen 54635  \n         Data1 Laptop 4567  \n         Data1 Lens 6473  \n         # end data a1  \n         # start data a2   \n         Data2 Book 1234  \n         Data2 Box 54635  \n         Data2 Card 4567  \n         Data2 Lens 6473  \n         # end data a2   \n\n Expected ouput  \n\n        # start data a2   \n        Data2 Book 1234  \n        Data2 Box 54635  \n        Data2 Card 4567  \n        Data2 Lens 6473  \n        # end data a2  \n</code></pre>\n\n<p>The Code snipppet used:    </p>\n\n<pre><code>#!/usr/local/perl\nuse warnings;\nuse strict;\nopen(filein, \"&lt;Input.txt\");\nopen(fileout, \"&gt;ouput.txt\");\nmy @array;\nmy $strt =qr/^#\\sstart\\sdata/;\nmy $end=qr/^#\\send\\sdata/; \nwhile(&lt;filein&gt;)\n{\n     @array= split(/$strt/../$end/,$_);\n     foreach my $i(@array)\n     {\n        if($i =~ /Pen|Laptop/)\n        {\n            next;\n        }\n        else\n        {\n            print fileout \"$_\";\n        }\n    }\n}\nclose(filein);\nclose(fileout);  \n\n\n\n Obtained Output from the above snippet  \n    # start data a1   \n    Data1 Book 1234    \n    Data1 Book 1234  \n    Data1 Pen 54635    \n    Data1 Laptop 4567    \n    Data1 Lens 6473   \n    # end data a1        \n    # start data a2      \n    Data1 Book 1234    \n    Data1 Book 1234  \n    Data1 Box 54635  \n    Data1 Box 54635  \n    Data1 Card 4567    \n    Data1 Card 4567  \n    Data1 Lens 6473  \n    # end data a2     \n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8521288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c3d7dbc642d6c9f411af9c1ed56ea3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dubey", "link": "https://stackoverflow.com/users/8521288/a-dubey"}, "edited": false, "score": 0, "creation_date": 1503813669, "post_id": 45898074, "comment_id": 78762867, "body": "thanks but  can you tell me what does &quot;.*?&quot; stands for?"}], "tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 1, "last_activity_date": 1503785839, "last_edit_date": 1503785839, "creation_date": 1503769134, "answer_id": 45898074, "question_id": 45898023, "link": "https://stackoverflow.com/questions/45898023/what-command-should-i-use-to-remove-a-particular-segment-from-the-sequence/45898074#45898074", "title": "what command should i use to remove a particular segment from the sequence?", "body": "<p>Use the substitution operator <a href=\"https://perldoc.perl.org/functions/s.html\" rel=\"nofollow noreferrer\"><code>s///</code></a>:</p>\n\n<pre><code>my $s = \"AUGCGCGUUAAAAUGGGGGCCCCGCGCUUAGAACCGGAUG\";\n$s =~ s/GU.*?AG//;\nprint \"$s\\n\";  # AUGCGCAACCGGAUG\n</code></pre>\n\n<p>Another alternative is to use <a href=\"https://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\"><code>index()</code></a> and <a href=\"https://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr()</code></a>:</p>\n\n<pre><code>my $s = \"AUGCGCGUUAAAAUGGGGGCCCCGCGCUUAGAACCGGAUG\";\nmy $i = index($s, \"GU\");\nmy $j = index($s, \"AG\", $i);\n\nsubstr($s, $i, $j-$i+2) = \"\";\nprint \"$s\\n\";  # AUGCGCAACCGGAUG\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8521288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c3d7dbc642d6c9f411af9c1ed56ea3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dubey", "link": "https://stackoverflow.com/users/8521288/a-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503785839, "creation_date": 1503768779, "last_edit_date": 1503777401, "question_id": 45898023, "link": "https://stackoverflow.com/questions/45898023/what-command-should-i-use-to-remove-a-particular-segment-from-the-sequence", "title": "what command should i use to remove a particular segment from the sequence?", "body": "<p>In the string below:</p>\n\n<pre><code>AUGCGCGUUAAAAUGGGGGCCCCGCGCUUAGAACCGGAUG\n      ^^                     ^^\nFirst instance of GU    First instance of AG\n</code></pre>\n\n<p>How can I remove the segment starting from the first instance of <code>GU</code> to the first instance of <code>AG</code> from the string? In the example above, the output should be:</p>\n\n<pre><code>AUGCGCAACCGGAUG\n</code></pre>\n"}, {"tags": ["linux", "perl", "dbi"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503763432, "post_id": 45897254, "comment_id": 78753344, "body": "You seem to have multiple perl versions installed, or perhaps did an incomplete upgrade of your perl? What is <code>perl -V</code> output? For example, it could be that a user perl is using the paths of the system perl, thus finding incompatible libraries."}, {"owner": {"reputation": 1105, "user_id": 42782, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8462c42090a49be9fe2ff154df735110?s=128&d=identicon&r=PG", "display_name": "BDeveloper", "link": "https://stackoverflow.com/users/42782/bdeveloper"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503763933, "post_id": 45897254, "comment_id": 78753488, "body": "new version is v5.16 and i don&#39;t know how to get missing libraries? as i told you i can&#39;t rebuild the Perl, but what if i put an intermediate server where i can install the Perl v5.16 with a full access and copy this file dynaloader to the current server where the problem is? i hope there would be another solution"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503764214, "post_id": 45897254, "comment_id": 78753578, "body": "Please <a href=\"https://stackoverflow.com/posts/45897254/edit\">edit</a> the question to include the output of <code>perl -V</code> (uppercase V!), which should show configuration data for the Perl 5.16. Perhaps this can be solved by correcting a few environment variables, no recompilation needed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503795083, "post_id": 45897254, "comment_id": 78760608, "body": "You are trying to load a module installed by 5.14 using Perl 5.16. Perhaps you have env var <code>PERL5LIB</code> set to something bad?"}, {"owner": {"reputation": 1105, "user_id": 42782, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8462c42090a49be9fe2ff154df735110?s=128&d=identicon&r=PG", "display_name": "BDeveloper", "link": "https://stackoverflow.com/users/42782/bdeveloper"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503825017, "post_id": 45897254, "comment_id": 78765387, "body": "@amon thr output of perl -V is very long. do you want me to search for a certain var.?"}, {"owner": {"reputation": 1105, "user_id": 42782, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8462c42090a49be9fe2ff154df735110?s=128&d=identicon&r=PG", "display_name": "BDeveloper", "link": "https://stackoverflow.com/users/42782/bdeveloper"}, "edited": false, "score": 0, "creation_date": 1503825871, "post_id": 45897254, "comment_id": 78765578, "body": "the DynaLoader.pm which fires the exception doesn&#39;t exist in the output of perl -V . Does it mean anything?"}, {"owner": {"reputation": 1105, "user_id": 42782, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8462c42090a49be9fe2ff154df735110?s=128&d=identicon&r=PG", "display_name": "BDeveloper", "link": "https://stackoverflow.com/users/42782/bdeveloper"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503826184, "post_id": 45897254, "comment_id": 78765646, "body": "@ikegami I don&#39;t have this var in the env var. the output of echo $perl5lib is null"}, {"owner": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "edited": false, "score": 0, "creation_date": 1503832064, "post_id": 45897254, "comment_id": 78767024, "body": "Please show full output of broken script (Use gists etc.). May be it&#39;s unrelated to Perl itself."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503876833, "post_id": 45897254, "comment_id": 78779146, "body": "I didn&#39;t say <code>$perl5lib</code>; I said <code>$PERL5LIB</code>"}], "answers": [{"tags": [], "owner": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503831913, "creation_date": 1503831913, "answer_id": 45904264, "question_id": 45897254, "link": "https://stackoverflow.com/questions/45897254/perl-api-version-v5-14-0-of-dbi-does-not-match-v5-16-0-at-usr-lib64-perl5-dynal/45904264#45904264", "title": "Perl API version v5.14.0 of DBI does not match v5.16.0 at /usr/lib64/perl5/DynaLoader.pm", "body": "<p>You can install your own Perl in home directory through <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">https://perlbrew.pl/</a></p>\n\n<p>It installs chosen Perl, and allows to run any script through specified perl (location of installed perl available through <code>perlbrew info</code>, and please, RTFM).</p>\n"}], "owner": {"reputation": 1105, "user_id": 42782, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8462c42090a49be9fe2ff154df735110?s=128&d=identicon&r=PG", "display_name": "BDeveloper", "link": "https://stackoverflow.com/users/42782/bdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 811, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1503831913, "creation_date": 1503763182, "last_edit_date": 1503827629, "question_id": 45897254, "link": "https://stackoverflow.com/questions/45897254/perl-api-version-v5-14-0-of-dbi-does-not-match-v5-16-0-at-usr-lib64-perl5-dynal", "title": "Perl API version v5.14.0 of DBI does not match v5.16.0 at /usr/lib64/perl5/DynaLoader.pm", "body": "<p>I got this exception when i run a perl script in Linux. I am not an expert in perl, and i have searched for a solution and they all wanted to rebuild/re-install the perl and i do not have an access either.\nso could anyone tell what to do without rebuilding?</p>\n\n<p><strong>edit: output of perl -V</strong>\nperl: warning: setting locale failed.\nperl: warning: please check your locale setting lc_all = (unset)\nlanguage = (unset)</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1503764137, "post_id": 45897299, "comment_id": 78753548, "body": "Thanks. I want to test this out.  Will get back to u as soon as i go near internet with laptop"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1503763509, "creation_date": 1503763509, "answer_id": 45897299, "question_id": 45897095, "link": "https://stackoverflow.com/questions/45897095/while-going-over-perlmonks-tutorial-on-something/45897299#45897299", "title": "while going over perlmonks tutorial on something", "body": "<blockquote>\n  <p>Why does one print out pointer address...</p>\n</blockquote>\n\n<p>I'm assuming that you refer to the output of this line:</p>\n\n<pre><code>    print \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;inside while loop, max is $max-&gt;()\\n\";\n</code></pre>\n\n<p>In this case it prints <code>$max</code> not <code>$max-&gt;()</code> since it expands inside the string only the variable but does not call the function. Thus it results in the value of <code>$max</code> which is a function pointer followed by the string <code>-&gt;()</code>:</p>\n\n<pre><code> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;inside while loop, max is CODE(0x242cf30)-&gt;()\n</code></pre>\n"}], "owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1503763509, "creation_date": 1503762091, "question_id": 45897095, "link": "https://stackoverflow.com/questions/45897095/while-going-over-perlmonks-tutorial-on-something", "title": "while going over perlmonks tutorial on something", "body": "<p>I thought I understood everything but I guess I don't understand the difference beteween $max->() and $temp_score = $max->().. Why does one print out pointer address and latter prints out actual value?</p>\n\n<pre><code>use warnings;\nuse strict;\n\nsub get_max {\n    my $max = $_[0];\n\n    return sub {\n        for (@_) {\n            $max = $_ if ! defined $max || $_ &gt; $max;   \n        }\n    print \"inside of get_max is max currently is $max\\n\";\n        return $max;\n    };\n}\n\n\nmy $max = get_max();\nwhile (&lt;DATA&gt;){\n    chomp;\n    $max-&gt;($_);\n       my $temp_score = $max-&gt;();\n        print \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;inside while loop, max is $max-&gt;()\\n\";\n        print \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;inside while loop, max2 is $temp_score\\n\";\n}\n\nmy $high_score = $max-&gt;();\n\nprint \"high_score is $high_score\\n\";\n__END__\n90\n91\n92\n87\n</code></pre>\n"}, {"tags": ["c++", "perl", "xs"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503758227, "post_id": 45896411, "comment_id": 78751878, "body": "I don&#39;t know about XS but you could always have the XS function take an explicit argument and do the closure wrapping in pure Perl: <code>sub make_closure { my $ctx = new_context(); return sub { xs_func($ctx, @_) }; }</code>"}, {"owner": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503758995, "post_id": 45896411, "comment_id": 78752085, "body": "@melpomene  Thats interesting, I could for each xs function registered dynamically generate a wrapper via <code>eval</code>... That is one possibility. Was looking at PERL_MAGIC_ext, maybe another way..."}], "answers": [{"comments": [{"owner": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "edited": false, "score": 0, "creation_date": 1503761977, "post_id": 45896982, "comment_id": 78752924, "body": "The approach of an explicit context feels natural if you write an extension and call c/c++ code from the wrapping main perl interpreter. However when using perl as an embedded interpreter with C++ as the wrapping language, then the C++ functions called from embedded perl should reside in the context of the wrapping C++ program.  Otherwise it gets for instance tedious to embed multiple interpreters in a local function at the same time."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "edited": false, "score": 0, "creation_date": 1503762555, "post_id": 45896982, "comment_id": 78753105, "body": "@KonradEisele Hmm, I see your point. In that case it may make sense to load a single context object into a Perl package variable when you initialize the interpreter?"}, {"owner": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "edited": false, "score": 1, "creation_date": 1503762986, "post_id": 45896982, "comment_id": 78753232, "body": "ok, that would be possible. However that would only solve one  particular problem. I&#39;m playing around with <a href=\"https://github.com/tomaka/luawrapper\" rel=\"nofollow noreferrer\">github.com/tomaka/luawrapper</a> and want a mechanism to implement something similar. I now found magic of type PERL_MAGIC_ext that I can assign, so I guess I will try with this."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "edited": false, "score": 0, "creation_date": 1503763713, "post_id": 45896982, "comment_id": 78753426, "body": "Oh wow, that luawrapper looks incredibly convenient :) Using magic is legitimate, though I&#39;d personally still prefer the more obvious object-based solutions. Will you type up your solution as an answer?"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1503761236, "creation_date": 1503761236, "answer_id": 45896982, "question_id": 45896411, "link": "https://stackoverflow.com/questions/45896411/perl-newxs-with-closure-added/45896982#45896982", "title": "Perl newXS() with closure added", "body": "<p>The simplest (and most likely best) approach would probably be to make the context explicit \u2013 expose an object oriented API and use methods instead of functions. When in Perl code a <code>new</code> instance of the class is created you put the context into that object. When your XSUB is called as a method on that object, it will receive the context as first parameter (i.e. <code>ST(0)</code>).</p>\n\n<p>That is basically equivalent to melpomene's comment from the XS/C++ perspective, but does not require the extra wrapper closure.</p>\n\n<p>If only one context per process exists, using global variables would also be legitimate \u2013 perhaps a necessary evil. Compare also <a href=\"http://perldoc.perl.org/perlxs.html#Safely-Storing-Static-Data-in-XS\" rel=\"nofollow noreferrer\">Safely storing static data in XS</a>.</p>\n\n<p>I know of no mechanism to directly associate extra data with xsubs. It may be possible to pull of some magic with the CV, but that sounds unnecessarily complicated unless you can't afford to put your context into a Perl object.</p>\n"}, {"tags": [], "owner": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "is_accepted": false, "score": 5, "last_activity_date": 1503764884, "creation_date": 1503764884, "answer_id": 45897500, "question_id": 45896411, "link": "https://stackoverflow.com/questions/45896411/perl-newxs-with-closure-added/45897500#45897500", "title": "Perl newXS() with closure added", "body": "<p>One possibility is the attach a <strong>PERL_MAGIC_ext</strong> magic to the SV as described in perlguts:</p>\n\n<pre><code>int  m_free (pTHX_ SV *sv, MAGIC* mg){ ... }\nSTATIC MGVTBL my_vtbl = { 0, 0, 0, 0, m_free, 0, 0, 0 };\nstruct ctx;\n\nXS(XS_some_func)\n{\n    ...\n    MAGIC *mg;\n    if ((mg = mg_findext((SV*)cv, PERL_MAGIC_ext, &amp;my_vtbl))) {\n        ctx *priv = (ctx *)mg-&gt;mg_ptr;\n    }\n    ...\n}\n</code></pre>\n\n<p>And assigning the magic when creating CV via newXS():</p>\n\n<pre><code>   ctx c;\n   ...\n   CV *cv = newXS(index, XS_some_func, __FILE__);\n   MAGIC *mg = sv_magicext((SV *)cv,\n                            0,\n                            PERL_MAGIC_ext,\n                            &amp;my_vtbl,\n                            (const char*)&amp;c,\n                            sizeof(c));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1503839674, "creation_date": 1503839674, "answer_id": 45905340, "question_id": 45896411, "link": "https://stackoverflow.com/questions/45896411/perl-newxs-with-closure-added/45905340#45905340", "title": "Perl newXS() with closure added", "body": "<p>There's an <a href=\"https://metacpan.org/pod/Measure#CV-229-minimum,-254-minimum-w/-symbol-table-entry\" rel=\"nofollow noreferrer\"><code>ANY</code> slot in <code>CV</code></a> that can be used for custom data and accessed with <code>CvXSUBANY(cv)</code>. For example:</p>\n\n<pre><code>CvXSUBANY(cv).any_ptr = my_ptr;\n</code></pre>\n\n<p>This slot is normally used to store the index for <a href=\"http://perldoc.perl.org/perlxs.html#The-ALIAS%3a-Keyword\" rel=\"nofollow noreferrer\">XS ALIASes</a> and the function pointer for <a href=\"http://perldoc.perl.org/perlxs.html#The-INTERFACE%3a-Keyword\" rel=\"nofollow noreferrer\">XS INTERFACEs</a>.</p>\n"}], "owner": {"reputation": 2934, "user_id": 367316, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09837eb8a4cfaac44c1e08b43f72091?s=128&d=identicon&r=PG", "display_name": "Konrad Eisele", "link": "https://stackoverflow.com/users/367316/konrad-eisele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 45905340, "answer_count": 3, "score": 7, "last_activity_date": 1503839674, "creation_date": 1503757451, "last_edit_date": 1503760455, "question_id": 45896411, "link": "https://stackoverflow.com/questions/45896411/perl-newxs-with-closure-added", "title": "Perl newXS() with closure added", "body": "<p>I want to embed Perl in a c++ application and am looking for a method to call into c++ from perl via newXS(). Apart from the function pointer I need the associate a custom pointer to the CV created by newXS(). The pointer contains a C++ context. I dont want to use globals for this. Is there a common way to do this? </p>\n\n<p>On a wider scope the question is maybe weather there is the possibility to <strong>add a closure to the CV created by newXS()</strong> and how to reference it when the c function is called that was registered with it. <strong>CvPADLIST</strong>() would seem the perfect place, however for XSubs it seems to be invalid to use when PERL_IMPLICIT_CONTEXT is set (comment in the beginning of perl's pad.c. Can it maybe be ignored?). Is there some other place I can put CV local data?</p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1503753685, "post_id": 45895718, "comment_id": 78750502, "body": "XML::Simple is the king of inconsistent behaviour. You&#39;ll likely have more fun switching to a proper XML parser. If you really want to debug this, you might want to investigate which XML parser XML::Simple is using \u2013 it can <a href=\"https://metacpan.org/pod/release/GRANTM/XML-Simple-2.18/lib/XML/Simple.pm#ENVIRONMENT\" rel=\"nofollow noreferrer\">interface with multiple parser backends</a> which might be the cause of this inconsistency."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 1, "creation_date": 1503758613, "post_id": 45895718, "comment_id": 78751980, "body": "Probably you&#39;ve got XML::SAX installed on one of the hosts, that might be the reason for differences."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503840962, "post_id": 45895718, "comment_id": 78769401, "body": "@amon Thanks Amon - I was completely unaware of the fact that XML::Simple is not a parser on its own.I will definitely switch over to a proper XML parser. Iwent ahead with the debugging the issue and yes - different parsers are used by the hosts."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "reply_to_user": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1503841093, "post_id": 45895718, "comment_id": 78769432, "body": "@wolfrevokcats Upon checking  -  I could see that the host1 uses XML::SAX::PurePerl and host2 uses XML::LibXML::SAX. However, I could force a consistent behaviour by setting  #$PREFERRED_PARSER  = &#39;XML::Parser&#39;;  - Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503857936, "post_id": 45895718, "comment_id": 78774596, "body": "Re &quot;<i>I could see that the host1 uses XML::SAX::PurePerl</i>&quot;, Last I checked (a number of years ago), XML::SAX::PurePerl had a major bug related to encodings. (It expected only ASCII or something.) It&#39;s also insanely slow. You should edit the config file XML::SAX uses and remove that parser from the list."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503858145, "post_id": 45895718, "comment_id": 78774651, "body": "Re &quot;<i>I could force a consistent behaviour by setting #$PREFERRED_PARSER</i>&quot;, You should this chance to stop using <a href=\"https://stackoverflow.com/q/33267765/589924\">the most complicated of XML parsers</a> instead!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1503858351, "last_edit_date": 1503858351, "creation_date": 1503795980, "answer_id": 45900888, "question_id": 45895718, "link": "https://stackoverflow.com/questions/45895718/perl-xmlsimple-inconsistent-behavior/45900888#45900888", "title": "Perl XML::Simple Inconsistent behavior", "body": "<p>The XML parser used by XML::Simple on Host1 is apparently more lenient than the one Host2.</p>\n\n<hr>\n\n<p>XML::Simple doesn't actually parse XML. It delegates that task to <a href=\"http://search.cpan.org/perldoc?XML::Parser\" rel=\"nofollow noreferrer\">XML::Parser</a> or <a href=\"http://search.cpan.org/perldoc?XML::SAX\" rel=\"nofollow noreferrer\">XML::SAX</a>. Even then, the latter itself delegates the parsing to one of many other modules.</p>\n\n<p>Not all of those parsers are of the same quality.</p>\n\n<p>Refer to \"Environment\" section of <a href=\"http://search.cpan.org/perldoc?XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a>'s documentation for more info. That section documents a means to select the parser XML::Simple uses. However, you should this chance to stop using XML::Simple! It's so <a href=\"https://stackoverflow.com/q/33267765/589924\">complicated to use</a> its own documentation discourages people from using it!</p>\n"}], "owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 45900888, "answer_count": 1, "score": 0, "last_activity_date": 1503858351, "creation_date": 1503752862, "question_id": 45895718, "link": "https://stackoverflow.com/questions/45895718/perl-xmlsimple-inconsistent-behavior", "title": "Perl XML::Simple Inconsistent behavior", "body": "<p>I am reading XML file using XML::Simple</p>\n\n<p>However, I am facing a rather \"odd\" situation wherein XML::Simple is behaving inconsistently across hosts</p>\n\n<p>I can best guess that the shell has some role to play - but I can't be sure as I didn't find any such issue documented against XML::Simple</p>\n\n<p>Any pointer will be a great aid in debugging this issue</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Simple;\nuse Data::Dumper;\nsub readXml() {\n\n    print \"XML::Simple version : $XML::Simple::VERSION\\n\";\n\n    my ($phRec) = eval {XMLin(\"sample.xml\", ForceArray =&gt; 1, KeyAttr =&gt; [] )};\n    if ( $@ ) {\n        print (join '', $@);\n        return 0;\n    }\n    print Dumper($phRec);\n    return 1;\n}\n\nreadXml();\n</code></pre>\n\n<p>sample.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;node&gt;\n    &lt;people name=\"whatever\"&gt;etc&lt;/people&gt;\n    &lt;people name=\"abc &lt;whatever&gt; pqr\"&gt;etc&lt;/people&gt;\n&lt;/node&gt;\n</code></pre>\n\n<p>I understand this is not a valid XML - but I would rather that XML::Simple should fail in both the hosts.</p>\n\n<p><strong>Host1 [Development host]</strong></p>\n\n<p>bin: perl -v</p>\n\n<p>This is perl 5, version 14, subversion 1 (v5.14.1) built for x86_64-linux\n...</p>\n\n<p>bin: echo $SHELL</p>\n\n<p>/bin/bash</p>\n\n<p>bin: ./template</p>\n\n<pre><code>XML::Simple version : 2.18\n$VAR1 = {\n          'people' =&gt; [\n                      {\n                        'content' =&gt; 'etc',\n                        'name' =&gt; 'whatever'\n                      },\n                      {\n                        'content' =&gt; 'etc',\n                        'name' =&gt; 'abc &lt;whatever&gt; pqr'\n                      }\n                    ]\n        };\n</code></pre>\n\n<p><strong>Host2 [ VM ]</strong></p>\n\n<p>bash-4.1# perl -v</p>\n\n<p>This is perl, v5.10.1 (*) built for x86_64-linux-thread-multi...</p>\n\n<p>bash-4.1# echo $SHELL</p>\n\n<p>/bin/csh</p>\n\n<p>bash-4.1# ./template</p>\n\n<pre><code>XML::Simple version : 2.18\nsample.xml:4: parser error : Unescaped '&lt;' not allowed in attributes values\n    &lt;people name=\"abc &lt;whatever&gt; pqr\"&gt;etc&lt;/people&gt;\n                      ^\nsample.xml:4: parser error : attributes construct error\n    &lt;people name=\"abc &lt;whatever&gt; pqr\"&gt;etc&lt;/people&gt;\n...\n</code></pre>\n"}, {"tags": ["regex", "perl", "split"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503733598, "post_id": 45891940, "comment_id": 78745402, "body": "@Sinan&#220;n&#252;r Ah. Of course, modules. Thank you!  I&#39;ll  add it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 8, "last_activity_date": 1557729342, "last_edit_date": 1557729342, "creation_date": 1503721885, "answer_id": 45891940, "question_id": 45891718, "link": "https://stackoverflow.com/questions/45891718/how-to-split-a-string-by-in-perl/45891940#45891940", "title": "How to split a string by \\ in perl?", "body": "<p>You are splitting on the <em>forward</em> slash <code>/</code> (escaped by <code>\\</code>), while you clearly need the <code>\\</code>.</p>\n\n<p>Since <code>\\</code> itself escapes things, you need to escape it, too</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $str = '\\Program Files\\Microsoft VisualStudio\\VC98\\Bin\\Rebase.exe';\n\nmy @ary = split /\\\\/, $str;\n\nshift @ary if $ary[0] eq '';\n\nsay for @ary;\n</code></pre>\n\n<p>what prints the path components, one per line.</p>\n\n<p>Since this string begins with a <code>\\</code> the first element of <code>@ary</code> is going to be an empty string, as that precedes the first <code>\\</code>. We remove it from the array by <code>shift</code>, with a check.</p>\n\n<p>Note that for this string one <em>must</em> use <code>''</code>, or the operator form <code>q(...)</code>, since the double quotes try to interpolate the presumed escapes <code>\\P</code>, <code>\\M</code> (etc) in the string, failing with a warning.  It is a good idea to use <code>''</code> for literal strings and <code>\"\"</code> (or <code>qq()</code>) when you need to interpolate variables.</p>\n\n<p>Another way to do this is with regex</p>\n\n<pre><code>my @ary = $str =~ /[^\\\\]+/g;\n</code></pre>\n\n<p>The <em>negated character class</em>, <code>[^...]</code>, with the (escaped) <code>\\</code> matches any character that is not <code>\\</code>. The quantifier <code>+</code> means that at least one such match is needed while it matches as many times as possible. Thus this matches a sequence of characters up to the first <code>\\</code>. </p>\n\n<p>With the modifier <code>/g</code> the matching keeps going through the string to find all such patterns.</p>\n\n<p>Assigning to an array puts the match operator in <em>list context</em>, in which the list of matches is returned, and assigned to <code>@ary</code>. In a scalar context only the true (1) or false (empty string) is returned. </p>\n\n<p>No capturing <code>()</code> are needed here, since we want everything that is matched.\nGenerally the <code>()</code> in list context are needed so that only the captured matches are returned.</p>\n\n<p>With this we don't have to worry about an empty string at the beginning since there is no match before the first <code>\\</code>, as there are no characters before it while we requested at least one non-<code>\\</code>.</p>\n\n<hr>\n\n<p>But working with paths is common and there are ready tools for that, which take care of details. The core module <a href=\"https://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\">File::Spec</a> is multi-platform and its <a href=\"https://perldoc.perl.org/File/Spec.html#splitdir\" rel=\"nofollow noreferrer\">splitdir</a> breaks the path into components</p>\n\n<pre><code>use File::Spec;\n\nmy @path_components = File::Spec-&gt;splitdir($str);\n</code></pre>\n\n<p>The first element is again an empty string if the path starts with <code>\\</code> (or <code>/</code> on Unix/Mac).</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/100754/sinan-%C3%9Cn%C3%BCr\">Sinan \u00dcn\u00fcr</a> for a comment.</p>\n"}], "owner": {"reputation": 23, "user_id": 8445328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6sry.jpg?s=128&g=1", "display_name": "Arunbalaji", "link": "https://stackoverflow.com/users/8445328/arunbalaji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "accepted_answer_id": 45891940, "answer_count": 1, "score": 0, "last_activity_date": 1557729342, "creation_date": 1503718831, "last_edit_date": 1503732773, "question_id": 45891718, "link": "https://stackoverflow.com/questions/45891718/how-to-split-a-string-by-in-perl", "title": "How to split a string by \\ in perl?", "body": "<pre><code>use Data::Dumper qw(Dumper);\n\n@arr=split('\\/',\"\\Program Files\\Microsoft VisualStudio\\VC98\\Bin\\Rebase.exe\");\n\nprint(Dumper \\@arr);\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>$VAR1 = [     \n\n'Program FilesMicrosoft VisualStudioVC98BinRebase.exe'\n\n];\n</code></pre>\n\n<p><strong>Required output:</strong></p>\n\n<pre><code>$VAR1 = [     \n'Program Files',\n\n'Microsoft VisualStudio',\n\n'VC98',\n\n'Bin',\n\n'Rebase.exe'\n];\n</code></pre>\n"}, {"tags": ["json", "perl"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 1454081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bc2ad23ab116ad272a0aec4854f88580?s=128&d=identicon&r=PG&f=1", "display_name": "J-S", "link": "https://stackoverflow.com/users/1454081/j-s"}, "edited": false, "score": 0, "creation_date": 1503706650, "post_id": 45890793, "comment_id": 78741190, "body": "Thanks @ikegami for the response. I tried as the following <code>my $final = encode_json(\\@myJSON);</code> and this helped to resolve the issue."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1503706849, "last_edit_date": 1503706849, "creation_date": 1503706430, "answer_id": 45890793, "question_id": 45890703, "link": "https://stackoverflow.com/questions/45890703/perl-combine-two-jsons/45890793#45890793", "title": "Perl: Combine two JSONs", "body": "<pre><code>my $json_obj1 = decode_json($json_txt1);  # Same as from_json($json_txt1, {utf8 =&gt; 1})\nmy $json_obj2 = decode_json($json_txt2);\n\npush @{ $json_obj2-&gt;{users} }, @{ $json_obj1-&gt;{users} };\n</code></pre>\n\n<p>If you want to remove duplicates , keeping the newer records (assuming <code>$json_obj1</code> is the older state), you can use the following:</p>\n\n<pre><code>my %seen;\n@{ $json_obj2-&gt;{users} } =\n   grep !$seen{$_-&gt;{name}}++,\n      @{ $json_obj2-&gt;{users} },\n      @{ $json_obj1-&gt;{users} };\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 1454081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bc2ad23ab116ad272a0aec4854f88580?s=128&d=identicon&r=PG&f=1", "display_name": "J-S", "link": "https://stackoverflow.com/users/1454081/j-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 45890793, "answer_count": 1, "score": -1, "last_activity_date": 1503706849, "creation_date": 1503705226, "last_edit_date": 1503705962, "question_id": 45890703, "link": "https://stackoverflow.com/questions/45890703/perl-combine-two-jsons", "title": "Perl: Combine two JSONs", "body": "<p>I am looking for help/guidance to combine multiple JSON into 1 JSON based on a node in PERL. For example here are the two JSON content that I want to combine. </p>\n\n<p><strong>JSON #1:</strong></p>\n\n<pre><code>{\n    \"title\": \"All\",\n    \"lastModified\": \"2017-04-11T00:00:00.000+0000\",\n    \"users\": [{\n            \"name\": \"Alpha One\",\n            \"title\": \"Security Chief\",\n            \"locations\": [{\"id\": \"730WLCS\"}, {\"id\": \"943MCS\"}]\n        },\n        {\n            \"name\": \"Alpha Two\",\n            \"title\": \"Security Manager\"\n        }\n    ]\n}\n</code></pre>\n\n<p><strong>JSON #2:</strong></p>\n\n<pre><code>{\n    \"title\": \"All\",\n    \"lastModified\": \"2017-04-11T00:00:00.000+0000\",\n    \"users\": [{\n            \"name\": \"Beta One\",\n            \"title\": \"Architect\",\n            \"locations\": [{\"id\": \"730WLCS\"}]\n        }\n    ]\n}\n</code></pre>\n\n<p><strong>RESULT JSON :</strong></p>\n\n<pre><code>{\n    \"title\": \"All\",\n    \"lastModified\": \"2017-04-11T00:00:00.000+0000\",\n    \"users\": [{\n            \"name\": \"Alpha One\",\n            \"title\": \"Security Chief\",\n            \"locations\": [{\"id\": \"730WLCS\"}, {\"id\": \"943MCS\"}]\n        },\n        {\n            \"name\": \"Alpha Two\",\n            \"title\": \"Security Manager\"\n        },\n        {\n            \"name\": \"Beta One\",\n            \"title\": \"Architect\",\n            \"locations\": [{\"id\": \"730WLCS\"}]\n        }\n    ]\n}\n</code></pre>\n\n<p>Basically, I want to combine only the \"users\" node. </p>\n\n<p>I tried to get the node using from_json and tried to push into an array, but it is not working.\nHere is the code that I tried:</p>\n\n<pre><code>my $json_obj1 = from_json($json_txt1, {utf8 =&gt; 1});\nmy $json_obj2 = from_json($json_txt2, {utf8 =&gt; 1});\n\npush(@myJSON, @{$json_obj1-&gt;{'users'}});\npush(@myJSON, @{$json_obj2-&gt;{'users'}});\n</code></pre>\n\n<p>Any help is much appreciated. \nThank you.</p>\n"}, {"tags": ["string", "windows", "perl", "file"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503694089, "post_id": 45889086, "comment_id": 78737876, "body": "Tip: Since you read the file inside a block, open it there, too. That nicely contains (scopes) the <code>$fh</code> to just that block, and pulls all related code together.  So, <code>my $data = do { local $&#47;; open my $fh ...; &lt;$fh&gt; };</code>  The file <i>is</i> closed as the code exits the block and <code>$fh</code> ceases to exist."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 0, "creation_date": 1503694915, "post_id": 45889086, "comment_id": 78738213, "body": "Slightly off-topic but it&#39;s possible to use eg VMware Player and an Ubuntu image to run Linux while still otherwise in Windows."}, {"owner": {"reputation": 436, "user_id": 7642575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yy1r5.jpg?s=128&g=1", "display_name": "Strong will", "link": "https://stackoverflow.com/users/7642575/strong-will"}, "edited": false, "score": 0, "creation_date": 1503696073, "post_id": 45889086, "comment_id": 78738627, "body": "I would but I&#39;m bit lazy setting it up right now:)."}], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 7642575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yy1r5.jpg?s=128&g=1", "display_name": "Strong will", "link": "https://stackoverflow.com/users/7642575/strong-will"}, "edited": false, "score": 0, "creation_date": 1503694761, "post_id": 45889223, "comment_id": 78738149, "body": ":crlf doen&#39;t change anything the problem persist."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1503694164, "creation_date": 1503694164, "answer_id": 45889223, "question_id": 45889086, "link": "https://stackoverflow.com/questions/45889086/perl-splits-string-incorrectly-when-loaded-from-file/45889223#45889223", "title": "Perl splits string incorrectly when loaded from file", "body": "<p>This is probably an issue with the carriage return character <code>\"\\r\"</code> \u2013 Windows line endings are <code>\\r\\n</code>, and a <code>\\r</code> on its own moves back to the start of the line, overwriting what you have already written.</p>\n\n<p>You could <code>chomp $data</code> first to remove the line ending, though this will only remove the last line ending.</p>\n\n<p>You can also have Perl convert the Windows <code>\\r\\n</code> line endings to Unix <code>\\n</code> line endings when reading in the file, by applying the <code>:crlf</code> IO layer:</p>\n\n<pre><code>open my $fh, \"&lt;:crlf\", \"hello.txt\" or die \"Cannot open file!\\n\";\n</code></pre>\n\n<p>(Note that it must be <code>open \u2026 or die \u2026</code> or <code>open(\u2026) || die \u2026</code> but not <code>open \u2026 || die \u2026</code>, because of operator precedence rules.)</p>\n"}], "owner": {"reputation": 436, "user_id": 7642575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yy1r5.jpg?s=128&g=1", "display_name": "Strong will", "link": "https://stackoverflow.com/users/7642575/strong-will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 45889223, "answer_count": 1, "score": 0, "last_activity_date": 1503694164, "creation_date": 1503693495, "question_id": 45889086, "link": "https://stackoverflow.com/questions/45889086/perl-splits-string-incorrectly-when-loaded-from-file", "title": "Perl splits string incorrectly when loaded from file", "body": "<p>I am probably missing out on something becauseI started Perl today, so please excuse me if it's something very obvious.</p>\n\n<p>I would like to load string from a file and then split it character by character.\nI have done the following</p>\n\n<pre><code>use strict;    \nopen my $fh, \"&lt;\", \"hello.txt\" || die \"Cannot open file!\\n\";\n\nmy $data = do { local $/ ; &lt;$fh&gt;};\nprint $data;\n\nprint  join( ', ',(split( //, $data)));\n\nclose $fh;\n</code></pre>\n\n<p>When I execute this script the first print statement prints $data without problem, however the second print prints only the join string.</p>\n\n<pre><code>Hello, world!\n, \n</code></pre>\n\n<p>I am running on Windows 7 machine with Strawberry Perl, I don't have access to Unix/Linux machine at the moment so I could not test it elsewhere.</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1503683256, "post_id": 45886634, "comment_id": 78733001, "body": "How generic does XX/YY/ZZ need to be?   You could just do <code>[XYZ]{2}</code> in most regex engines if that&#39;s it."}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1503684331, "post_id": 45886634, "comment_id": 78733569, "body": "@stevesliva, I think the problem is more (or also) that OP has to vary the replacement string as well depending on which letters are matched in the regex."}, {"owner": {"reputation": 23, "user_id": 8517777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c4d65fc72902c88eb6aab18096b914?s=128&d=identicon&r=PG&f=1", "display_name": "niknak", "link": "https://stackoverflow.com/users/8517777/niknak"}, "edited": false, "score": 0, "creation_date": 1503934794, "post_id": 45886634, "comment_id": 78804084, "body": "Hi, Jas is correct,variation in replacing the string before the &#39; : &#39;  would be a requirement.. Thanks for your replies"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8517777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c4d65fc72902c88eb6aab18096b914?s=128&d=identicon&r=PG&f=1", "display_name": "niknak", "link": "https://stackoverflow.com/users/8517777/niknak"}, "edited": false, "score": 0, "creation_date": 1503936226, "post_id": 45887488, "comment_id": 78804834, "body": "Thanks for all the replies will try them all and leave an update. Much appreciated"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 0, "last_activity_date": 1503685685, "creation_date": 1503685685, "answer_id": 45887488, "question_id": 45886634, "link": "https://stackoverflow.com/questions/45886634/awk-gsub-alternative-for-special-characters-and-string-extraction/45887488#45887488", "title": "Awk/Gsub alternative for special characters and string extraction", "body": "<p>I guess, this perl one-liner would do (looks like you are on linux):</p>\n\n<pre><code>perl -lne 'print $1 if m{&gt;((XX|YY|ZZ):[^&lt;]*)}'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 0, "last_activity_date": 1503688044, "last_edit_date": 1503688044, "creation_date": 1503687697, "answer_id": 45887933, "question_id": 45886634, "link": "https://stackoverflow.com/questions/45886634/awk-gsub-alternative-for-special-characters-and-string-extraction/45887933#45887933", "title": "Awk/Gsub alternative for special characters and string extraction", "body": "<p><code>^.XX</code> means <code>any character followed by XX at the start of a line</code> - it will not match <code>XX</code> mid-line. <code>[&lt;\\a&gt;]</code> means <code>any of the characters &lt;, \\, a, or &gt;</code> - it will not match the string <code>&lt;\\a&gt;</code>. Find a regexp tutorial...</p>\n\n<p>Your question isn't clear but maybe this is what you're trying to do?</p>\n\n<pre><code>$ awk '{sub(/&lt;\\/a&gt;.*/,\"\"); sub(/.*&gt;/,\"\")} NF' file\nXX:The quick brown fox jumped over the lazy\nYY:Jack and Jill went up the hill\nZZ: Mary had a little lamb\n</code></pre>\n\n<p>or with GNU awk for the 3rd arg to match() to print whatever's between ... (assuming one per line):</p>\n\n<pre><code>$ awk 'match($0,/.*&lt;a[^&gt;]*&gt;(.*)&lt;\\/a&gt;.*/,a){print a[1]}' file\nXX:The quick brown fox jumped over the lazy\nYY:Jack and Jill went up the hill\nZZ: Mary had a little lamb\n</code></pre>\n\n<p>which in any sed would be:</p>\n\n<pre><code>$ sed -n 's/.*&lt;a[^&gt;]*&gt;\\(.*\\)&lt;\\/a&gt;.*/\\1/p' file\nXX:The quick brown fox jumped over the lazy\nYY:Jack and Jill went up the hill\nZZ: Mary had a little lamb\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1503751775, "post_id": 45888053, "comment_id": 78749895, "body": "In shell you should use single quotes around strings, etc. unless you NEED double quotes (e.g. to let a variable expand). If you follow that rule then it has the nice side benefit that in this case you don&#39;t need to escape the double quote when you set FS, i.e. instead of <code>-F&quot;\\&quot;&gt;|&lt;&#47;a&gt;&quot;</code> you should write <code>-F&#39;&quot;&gt;|&lt;&#47;a&gt;&#39;</code>."}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1503688581, "last_edit_date": 1503688581, "creation_date": 1503688261, "answer_id": 45888053, "question_id": 45886634, "link": "https://stackoverflow.com/questions/45886634/awk-gsub-alternative-for-special-characters-and-string-extraction/45888053#45888053", "title": "Awk/Gsub alternative for special characters and string extraction", "body": "<p>If your Input_file is same as shown example then following may help you in same too.</p>\n\n<pre><code>awk -F\"\\\"&gt;|&lt;/a&gt;\" 'NF{print $4}'  Input_file\n</code></pre>\n\n<p><strong>Explanation:</strong> Making <code>\"&gt;</code> and <code>&lt;/a&gt;</code> as a field separator(obviously to get what OP needs :) ). NF will make sure we should skip empty lines. Now when we set field separator as these 2, we could see 4th field will be the one which OP requires, here is how we could see all the field's value and we could pick 4th column which OP needs to get.</p>\n\n<pre><code>awk -F\"\\\"&gt;|&lt;/a&gt;\" '{for(i=1;i&lt;=NF;i++){print i,$i}}'  Input_file\n1 &lt;li&gt;&lt;img src=\"img/tt_potato-30x30.png\" alt=\"ew_inactive\n2  &lt;img src=\"img/in-event-40x40.png\" alt=\"event\n3  - dep[(0:0)(0:0)]ref[(3:0)(0:0)]srch[?] - &lt;a href \"tcc_1111.html\n4 XX:The quick brown fox jumped over the lazy\n5   -&lt;img src= \"img/config-40x40.png\" alt=\"config\n6 &lt;img src=\"img/validate-40x50.png\"  alt=\"validate\n7  - user\n1 &lt;li&gt;&lt;img src=\"img/tt_potato-30x30.png\" alt=\"ew_inactive\n2  &lt;img src=\"img/in-event-40x40.png\" alt=\"event\n3  - dep[(0:0)(0:0)]ref[(3:0)(0:0)]srch[?] - &lt;a href \"tcc_1111.html\n4 YY:Jack and Jill went up the hill\n5   -&lt;img src= \"img/config-40x40.png\" alt=\"config\n6 &lt;img src=\"img/validate-40x50.png\"  alt=\"validate\n7  - user\n1 &lt;li&gt;&lt;img src=\"img/tt_potato-30x30.png\" alt=\"ew_inactive\n2  &lt;img src=\"img/in-event-40x40.png\" alt=\"event\n3  - dep[(0:0)(0:0)]ref[(3:0)(0:0)]srch[?] - &lt;a href \"tcc_1111.html\n4 ZZ: Mary had a little lamb\n5   -&lt;img src= \"img/config-40x40.png\" alt=\"config\n6 &lt;img src=\"img/validate-40x50.png\"  alt=\"validate\n7  - user\n</code></pre>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 23, "user_id": 8517777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c4d65fc72902c88eb6aab18096b914?s=128&d=identicon&r=PG&f=1", "display_name": "niknak", "link": "https://stackoverflow.com/users/8517777/niknak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "accepted_answer_id": 45887933, "answer_count": 3, "score": 2, "last_activity_date": 1503688581, "creation_date": 1503681876, "last_edit_date": 1503688289, "question_id": 45886634, "link": "https://stackoverflow.com/questions/45886634/awk-gsub-alternative-for-special-characters-and-string-extraction", "title": "Awk/Gsub alternative for special characters and string extraction", "body": "<p>I have a file containing many lines such as below:</p>\n\n<pre><code>&lt;li&gt;&lt;img src=\"img/tt_potato-30x30.png\" alt=\"ew_inactive\"&gt; &lt;img src=\"img/in-event-40x40.png\" alt=\"event\"&gt; - dep[(0:0)(0:0)]ref[(3:0)(0:0)]srch[?] - &lt;a href \"tcc_1111.html\"&gt;XX:The quick brown fox jumped over the lazy  &lt;/a&gt;  -&lt;img src= \"img/config-40x40.png\" alt=\"config\"&gt;&lt;img src=\"img/validate-40x50.png\"  alt=\"validate\"&gt; - user\n\n&lt;li&gt;&lt;img src=\"img/tt_potato-30x30.png\" alt=\"ew_inactive\"&gt; &lt;img src=\"img/in-event-40x40.png\" alt=\"event\"&gt; - dep[(0:0)(0:0)]ref[(3:0)(0:0)]srch[?] - &lt;a href \"tcc_1111.html\"&gt;YY:Jack and Jill went up the hill  &lt;/a&gt;  -&lt;img src= \"img/config-40x40.png\" alt=\"config\"&gt;&lt;img src=\"img/validate-40x50.png\"  alt=\"validate\"&gt; - user\n\n&lt;li&gt;&lt;img src=\"img/tt_potato-30x30.png\" alt=\"ew_inactive\"&gt; &lt;img src=\"img/in-event-40x40.png\" alt=\"event\"&gt; - dep[(0:0)(0:0)]ref[(3:0)(0:0)]srch[?] - &lt;a href \"tcc_1111.html\"&gt;ZZ: Mary had a little lamb  &lt;/a&gt;  -&lt;img src= \"img/config-40x40.png\" alt=\"config\"&gt;&lt;img src=\"img/validate-40x50.png\"  alt=\"validate\"&gt; - user\n</code></pre>\n\n<p>I wish to extract the following strings and discard the everything else.</p>\n\n<pre><code>XX: The quick brown fox jumped over the lazy\nYY: Jack and Jill went up the hill\nZZ: Mary had a little lamb\n</code></pre>\n\n<p>So far I've tried using the following awk command but it appears to be limited as the XX needs to be replaced for YY and ZZ.</p>\n\n<pre><code>awk '{gsub(/^.*XX:/,\"XX:\"); gsub(/[&lt;\\a&gt;].*$/,\"[&lt;/a&gt;].\");print}'\n</code></pre>\n\n<p>Is there an alternative anyone can suggest using any other standard Linux tool?\nThanks.</p>\n"}, {"tags": ["perl", "firefox", "cookies"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 10, "creation_date": 1503662857, "post_id": 45881014, "comment_id": 78720373, "body": "No way, unless you run your script on facebook domain, or use some other script on the same machine where firefox resides."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 4, "creation_date": 1503662868, "post_id": 45881014, "comment_id": 78720388, "body": "Browsers aren&#39;t stupid. They only accept and return cookies for your domain."}], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1503664387, "post_id": 45881430, "comment_id": 78721358, "body": "Re: <code>Either way it&#39;s useless to you.</code> not really if OP intends to hijack sessions. ;)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503669594, "post_id": 45881430, "comment_id": 78724765, "body": "There is, of course, the possibility of forcing the user&#39;s traffic through a proxy (possibly abusing stupid software already installed on the computer such as an antivirus or manufacturer&#39;s software, and playing with the cookies."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503731894, "post_id": 45881430, "comment_id": 78744926, "body": "In such case hosts file is also a candidate."}, {"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1503868847, "post_id": 45881430, "comment_id": 78777636, "body": "Hi guys and thanks for your answers. I edited my original request with further information. Let me know your idea on this. Thx"}, {"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1504031446, "post_id": 45881430, "comment_id": 78850477, "body": "Thanks Dave. Actually, the question is the same which is &quot;getting a cookie value stored by Firefox&quot;. I&#39;ve simply suggested a possible solution to it...anyway i&#39;ve already figured out a script solving the problem via DBI module, as suggested by you. Now i&#39;m traveling, but i will post the code asap. Thanks again."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1503938757, "last_edit_date": 1503938757, "creation_date": 1503664006, "answer_id": 45881430, "question_id": 45881014, "link": "https://stackoverflow.com/questions/45881014/perl-how-can-i-read-a-specific-cookie-value-stored-by-firefox/45881430#45881430", "title": "Perl: how can i read a specific cookie value stored by Firefox", "body": "<p>There are two steps to reading a cookie.</p>\n\n<ol>\n<li>Accessing the value of the cookie.</li>\n<li>Understanding that value.</li>\n</ol>\n\n<p>Modules like the ones you mention, only deal with the first step. They allow you to write cookie headers into your web application's responses and read cookie headers from requests that come into your web application. But they will only read or write cookies for the domain that your web application is running on. It's very unlikely that your application is running on facebook.com, therefore these modules are going to be useless to you.</p>\n\n<p>However, all is not lost. Firefox will give you access to any cookies that are stored in the browser. I assume you already know that (as you know the name of the cookie you're interested in) but in case you don't - choose \"preferences\" from the hamburger menu and then \"privacy\"; that page has a \"remove individual cookies\" link.</p>\n\n<p>So you can see the contents of the datr cookie. I'm looking at mine right now. It's string of 24 random-looking characters.</p>\n\n<p>And that's the next problem. How do you interpret that string? Only Facebook can answer that. It's possible that it is a hash containing all sorts of interesting data. But it will be almost impossible to prove that. More likely (because this is, I think, best practice) it's just a random string of characters which is a key into some data store that is held somewhere within Facebook's system.</p>\n\n<p>So it's either a well-encrypted secret or a random string. Either way it's useless to you.</p>\n\n<p>Getting the value of a cookie is easy. Understanding that value is (usually) impossible.</p>\n\n<p><strong>Update:</strong> So actually, now you've redefined the question completely. It's not about cookies at all. It's about reading data from an SQLite database. And for that you should look at <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> and <a href=\"https://metacpan.org/pod/DBD::SQLite\" rel=\"nofollow noreferrer\">DBD::SQLite</a>. If you have any more specific questions about how to do this, then please ask a new question.</p>\n"}, {"tags": [], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "is_accepted": false, "score": 3, "last_activity_date": 1504148349, "last_edit_date": 1504148349, "creation_date": 1504048740, "answer_id": 45949645, "question_id": 45881014, "link": "https://stackoverflow.com/questions/45881014/perl-how-can-i-read-a-specific-cookie-value-stored-by-firefox/45949645#45949645", "title": "Perl: how can i read a specific cookie value stored by Firefox", "body": "<p>This is what i've figured out. It works well. I didn't use absolute path (at least, directly) therefore, in theory, it should work also in Windows (having Perl on it) and Mac OS, but i didn't test it. It simply search the .sqlite db into the system and once found it returns the value of Datr stored by Firefox.</p>\n\n<pre><code>#!/bin/perl\n\n use File::Find::Rule;\n use DBI;\n use strict;\n\n  my @files = File::Find::Rule-&gt;file()\n                             -&gt;name('firefox', 'cookies.sqlite') \n                             -&gt;in( '/home' ); \n\nmy @matches = grep { /firefox/i &amp;&amp; /mozilla/i } @files; \nprint \"DB PATH: @matches\\n\\n\";\n\n####### connect to .sqlite database\n\nmy $database = @matches[0];\n\nmy $dbfile = \"$database\";\nmy $dsn      = \"dbi:SQLite:dbname=$dbfile\"; #set path to db\nmy $user     = \"\"; \nmy $password = \"\";\nmy $dbh = DBI-&gt;connect($dsn, $user, $password, {\n   PrintError       =&gt; 0, \n   RaiseError       =&gt; 1, \n   });\nprint \"Database opened successfully\\n\\n\";\n\n\nmy $stmt = \"SELECT VALUE FROM moz_cookies WHERE NAME='datr'\"; \nmy $sth = $dbh-&gt;prepare( $stmt );\nmy $rv = $sth-&gt;execute() or die $DBI::errstr;\n\nif($rv &lt; 0) {\n  print $DBI::errstr;\n}\n\nmy @row=$sth-&gt;fetchrow_array(); #fetching data of sth into a new array\n\nprint \"COOKIE VALUE: @row\"; #print data\n\nprint \"\\n\\nOperation done successfully\\n\";\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1504148349, "creation_date": 1503662615, "last_edit_date": 1503862711, "question_id": 45881014, "link": "https://stackoverflow.com/questions/45881014/perl-how-can-i-read-a-specific-cookie-value-stored-by-firefox", "title": "Perl: how can i read a specific cookie value stored by Firefox", "body": "<p>I'm currently developing a script in Perl as want to recover a specific cookie that Facebook is currently storing in my browser.\nThe cookie name is Datr and i've tried multiple Perl modules such as HTTP::Cookies, CGI::Cookie and so forth, without success.</p>\n\n<p>What i wanna do is simple and i need to do it via Perl: storing the Datr value (which changes dynamically) into a new variable in my Perl script. </p>\n\n<p>I decided to set a test cookie and try to read its value, but neither the script returns something nor the browser (Mozilla) seems to store my cookie.\nHere is the code i used:     </p>\n\n<pre><code>#!bin/perl\n\nuse CGI;\n\n$query = new CGI;\n\n##setting a new cookie into the browser\n$cookie = $query-&gt;cookie(-name=&gt;'MY_COOKIE',\n             -value=&gt;'HelloWorld',\n             -domain=&gt;'facebook.com',\n             -expires=&gt;'+4h');\n\n##retrieving cookie value\n$theCookie = $query-&gt;cookie('MY_COOKIE');\n</code></pre>\n\n<p>Please help me with this as i'm going crazy!\nthanks</p>\n\n<p>First of all i would like to thanks all of you for the prompt reply.</p>\n\n<p>To Dave: thanks for your very good answer on this. Yes i'm aware that Firefox can read the Datr value via GUI, but actually i need to read it with Perl code, because my original script features a specific SSL request which actually needs the Datr value. Facebook has arealdy answered on Datr ''understanding'' (<a href=\"http://www.adweek.com/digital/datr-cookie-belgium/\" rel=\"nofollow noreferrer\">http://www.adweek.com/digital/datr-cookie-belgium/</a>) and seems an interesting side-topic. Getting back to my original request, i'm quite sure that Firefox stores all cookies value locally in some sort of .sqlite db called cookie.sqlite, and i can get there! If a try to read it ''manually'', i can see the Datr string, but that's not going to fix anything as i do not want to update my PL script each and every time i want to perform any sort of SSL request to FB!! that's the point.</p>\n\n<p>My original question could be reformulated as follows: is there any way to query the .sqlite cookie db created by Firefox in order to retreive the Datr cookie and store it in a Perl variable? Please bear in mind that i don't want to set an absolute ''path to file'' in my PL script, as it is supposed to be executed either in Linux or any other OS (Windows, OSx..).</p>\n\n<p>Thanks in advace for any further reply on this subject.</p>\n"}, {"tags": ["perl", "symlink"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1503626300, "post_id": 45872812, "comment_id": 78705450, "body": "You force it by unlinking the target symlink name first."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1503675938, "post_id": 45872812, "comment_id": 78728903, "body": "@mob, <code>symlink</code>+<code>rm</code>+<code>symlink</code> does a better job of handling race conditions in the common scenario. This is what <code>ln</code> uses."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1503692881, "last_edit_date": 1503692881, "creation_date": 1503621531, "answer_id": 45872812, "question_id": 45872725, "link": "https://stackoverflow.com/questions/45872725/does-symlink-function-in-perl-overwrite-an-existing-link/45872812#45872812", "title": "Does symlink function in perl overwrite an existing link", "body": "<p>This is simple to figure out yourself. Let's try it on</p>\n\n<pre><code>ls -li link_to_FILE.txt\n# 2415940160 lrwxrwxrwx.  ...  link_to_FILE.txt -&gt; FILE.txt\n</code></pre>\n\n<p>with </p>\n\n<pre><code>perl -wE'symlink \"FILE.txt\", \"link_to_FILE.txt\" or warn \"Cant make it: $!\"'\n</code></pre>\n\n<p>It prints</p>\n\n<pre>\nCant make it: File exists at -e line 1.\n</pre>\n\n<p>and I check that the original file (link) with the same inode number is still there.</p>\n\n<p>So, no, it won't overwrite an existing file.</p>\n\n<p>The page for <a href=\"http://perldoc.perl.org/functions/symlink.html\" rel=\"nofollow noreferrer\">symlink</a> indicates that there are no options to <strong>f</strong>orce that.</p>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 3775426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82de26e4b4aad5c904f8fd804277c54f?s=128&d=identicon&r=PG&f=1", "display_name": "pmsuresh", "link": "https://stackoverflow.com/users/3775426/pmsuresh"}, "edited": false, "score": 0, "creation_date": 1503683017, "post_id": 45873444, "comment_id": 78732879, "body": "Thats a great answer. Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1503676274, "last_edit_date": 1503676274, "creation_date": 1503627300, "answer_id": 45873444, "question_id": 45872725, "link": "https://stackoverflow.com/questions/45872725/does-symlink-function-in-perl-overwrite-an-existing-link/45873444#45873444", "title": "Does symlink function in perl overwrite an existing link", "body": "<p><code>symlink</code> simply calls the OS call by the same name (<code>symlink(2)</code>), which returns error <code>EEXIST</code> when \"<code>newpath</code> already exists\".</p>\n\n<p>If you wanted to implement <code>-f</code>, you could use</p>\n\n<pre><code>unlink($new_qfn);\nsymlink($old_qfn, $new_qfn)\n   or die(\"Can't create symlink \\\"$new_qfn\\\": $!\\n\");\n</code></pre>\n\n<p>However, the following does a better job of handling race conditions:</p>\n\n<pre><code>if (!symlink($old_qfn, $new_qfn)) {\n   if ($!{EEXIST}) {\n      unlink($new_qfn)\n         or die(\"Can't remove \\\"$new_qfn\\\": $!\\n\");\n      symlink($old_qfn, $new_qfn)\n         or die(\"Can't create symlink \\\"$new_qfn\\\": $!\\n\");\n   } else {\n      die(\"Can't create symlink \\\"$new_qfn\\\": $!\\n\");\n   }\n}\n</code></pre>\n\n<p><code>ln</code> uses the latter approach.</p>\n\n<pre><code>$ strace ln -sf a b\n...\nsymlink(\"a\", \"b\")                       = -1 EEXIST (File exists)\nunlink(\"b\")                             = 0\nsymlink(\"a\", \"b\")                       = 0\n...\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3775426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82de26e4b4aad5c904f8fd804277c54f?s=128&d=identicon&r=PG&f=1", "display_name": "pmsuresh", "link": "https://stackoverflow.com/users/3775426/pmsuresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 1, "accepted_answer_id": 45873444, "answer_count": 2, "score": 2, "last_activity_date": 1503692881, "creation_date": 1503620656, "question_id": 45872725, "link": "https://stackoverflow.com/questions/45872725/does-symlink-function-in-perl-overwrite-an-existing-link", "title": "Does symlink function in perl overwrite an existing link", "body": "<p>I'm trying to mimic the Unix command </p>\n\n<pre><code>ln -sf /path/to/file /path/to/link\n</code></pre>\n\n<p>by using Perl </p>\n\n<pre><code>symlink (/path/to/file /path/to/link) \n</code></pre>\n\n<p>Does Perl remove existing destination file and creates the symlink similar to -s -f options ?</p>\n"}, {"tags": ["directory-structure", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1503615313, "post_id": 45872056, "comment_id": 78702978, "body": "Define &#39;easiest&#39;..."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1503615376, "post_id": 45872056, "comment_id": 78703000, "body": "I don&#39;t think it gets any easier than <code>File::Find</code>, unless you can avoid Perl altogether and use a different tool, e.g., if you just wanted to know how much space these files take, you could use <code>du -hs</code> on Linux."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503615514, "post_id": 45872056, "comment_id": 78703052, "body": "<a href=\"https://metacpan.org/pod/Path::Tiny#iterator\" rel=\"nofollow noreferrer\">Path::Tiny-&gt;iterator</a>"}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 2, "creation_date": 1503627893, "post_id": 45872056, "comment_id": 78705788, "body": "Just so you know, <code>File::Find</code> very fast. Learn to use it if you need to iterate more than 10k files, unless speed isn&#39;t an issue. On my laptop, File::Find::Rule is 2-3x slower. Of course, if you&#39;re iterating over one directory, the difference is trivial."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1589959956, "last_edit_date": 1589959956, "creation_date": 1503616535, "answer_id": 45872237, "question_id": 45872056, "link": "https://stackoverflow.com/questions/45872056/get-list-of-names-of-all-files-in-a-directory-perl/45872237#45872237", "title": "Get list of names of all files in a directory (Perl)", "body": "<p>The <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\">File::Find::Rule</a> is a very useful tool</p>\n\n<pre><code>perl -Mstrict -MFile::Find::Rule -wE'\n    my @files = File::Find::Rule-&gt;file-&gt;in(\".\"); \n    say for @files'\n</code></pre>\n\n<p>You can first get the object <code>my $ffr = File::Find::Rule</code> and then set rules on it. The rule <code>-&gt;file</code> only makes it not return directories, while it still recurses. There are many such \"rules\" to fine tune the behavior. I did find its performance slower under some conditions. See link at the end.</p>\n\n<p>The core <a href=\"https://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a> does all that its wrapper above does, perhaps with just a little more work</p>\n\n<pre><code>perl -Mstrict -MFile::Find -wE' my @dirs = (@ARGV ? @ARGV : \".\");\n    my @files;\n    find( sub { push @files, $File::Find::name if -f }, @dirs );\n    say for @files;\n' dir1 dir2 ...      (or pass nothing, to scan \".\")\n</code></pre>\n\n<p>where only regular files are collected, by <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-f</code> filetest</a>. I've added an example of how to (optionally) pass a directory list to scan in a one-liner.  It is still the best performing module as far as I know.  In some uses it can be considerably faster.</p>\n\n<p>The <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm#iterator\" rel=\"nofollow noreferrer\">Path::Tiny->iterator</a> is very nice as well, for \"lazily\" walking a tree </p>\n\n<pre><code>perl -Mstrict -MPath::Tiny -wE' my $dir = shift // \".\";\n    my $iter = path($dir)-&gt;iterator({recurse =&gt; 1}); \n    while (my $path = $iter-&gt;()) { say $path }'\n</code></pre>\n\n<p>where you can interrogate the encountered content in a number of ways and  conveniently.  The module has many other tools and uses for file-system work, this is almost a \"side\" feature.</p>\n\n<p>The <a href=\"http://search.cpan.org/~dagolden/Path-Iterator-Rule-1.012/lib/Path/Iterator/Rule.pm\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a>, also from the author of <code>Path::Tiny</code>, also offers lazy iterations but is a full, dedicated iterator, with the interface similar to <code>File::Find::Rule</code></p>\n\n<pre><code>perl -Mstrict -MPath::Iterator::Rule -wE' my $dir = shift // \".\"; \n    my $rule = Path::Iterator::Rule-&gt;new-&gt;not_dir-&gt;not_empty; \n    my $next = $rule-&gt;iter($dir);\n    while (my $file = $next-&gt;()) { say $file }\n' dirname\n</code></pre>\n\n<p>One can set up rules with a <em>lot</em> of convenience methods, also including ones for logic, file content queries, custom-written rules, and more.</p>\n\n<p>See a <a href=\"https://rjbs.manxome.org/rubric/entry/1981\" rel=\"nofollow noreferrer\">performance comparison</a> for a selection of file-finders (from 2013).</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1503640050, "accepted_answer_id": 45872237, "answer_count": 1, "score": 1, "last_activity_date": 1589959956, "creation_date": 1503615136, "question_id": 45872056, "link": "https://stackoverflow.com/questions/45872056/get-list-of-names-of-all-files-in-a-directory-perl", "closed_reason": "Opinion-based", "title": "Get list of names of all files in a directory (Perl)", "body": "<p>What is the easiest way to get list of full names of all files in a given directory (including files in subdirectories)?</p>\n\n<p>Yes, I know about <code>File::Find</code> module. But is there an easier way?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1503614862, "post_id": 45871957, "comment_id": 78702856, "body": "<a href=\"https://metacpan.org/pod/perlreftut\" rel=\"nofollow noreferrer\">metacpan.org/pod/perlreftut</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1503615654, "post_id": 45872098, "comment_id": 78703089, "body": "i would appreciate if down-voters would specify why they down-voted, i would like to improve the quality of my answers"}], "tags": [], "owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "is_accepted": false, "score": 1, "last_activity_date": 1503615415, "creation_date": 1503615415, "answer_id": 45872098, "question_id": 45871957, "link": "https://stackoverflow.com/questions/45871957/how-do-references-in-perl-work/45872098#45872098", "title": "How do references in Perl work", "body": "<p>I've had a discussion over this yesterday <a href=\"https://stackoverflow.com/questions/45841066/pass-array-by-value-to-hash-value-in-perl\">here</a></p>\n\n<p>what it means is that<br>\n<code>@a</code> is an array</p>\n\n<pre><code>$a[$b]\n</code></pre>\n\n<p>is a cell in the array\nthe <code>@{}</code> syntax helps perl understand that the cell in question is an array so you can preform push/pop operations on it.<br>\nif you do </p>\n\n<pre><code>use Data::Dumper;\nprint Dumper \\@a;\n</code></pre>\n\n<p>you should see something like:</p>\n\n<pre><code>$VAR1 = [\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          undef,\n          [\n            'a'\n          ]\n        ];\n</code></pre>\n\n<p>as you can see, the 11th cell is an array containing the letter 'a' as its only value<br>\nthe push operation on an empty cell could have also been written as:  </p>\n\n<pre><code>$a[$b] = [$c]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503689049, "post_id": 45872658, "comment_id": 78735780, "body": "Re &quot;<i>as there is in fact no arrayref there</i>&quot;, More precicely, because it&#39;s undefined.  Because of autovivification, <code>push @{ $ref }, LIST;</code> is effectively short for <code>push @{ $ref &#47;&#47;= [] }, LIST;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1504242974, "post_id": 45872658, "comment_id": 78947170, "body": "@ikegami  Thank you, added, as a footnote for now (may rewrite text)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 14, "last_activity_date": 1527007638, "last_edit_date": 1527007638, "creation_date": 1503620060, "answer_id": 45872658, "question_id": 45871957, "link": "https://stackoverflow.com/questions/45871957/how-do-references-in-perl-work/45872658#45872658", "title": "How do references in Perl work", "body": "<p>Let's break it down. </p>\n\n<p>The <code>@{...}</code> is understood from <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">\"Using References\" in perlref</a></p>\n\n<blockquote>\n  <p>Anywhere you'd put an identifier (or chain of identifiers) as part of a variable or subroutine name, you can replace the identifier with a BLOCK returning a reference of the correct type.</p>\n</blockquote>\n\n<p>So what is inside <code>{ ... }</code> block had better work out to an <em>array reference</em>. You have <code>$a[$b]</code> there, an element of <code>@a</code> at index <code>$b</code>, so that element must be an arrayref. </p>\n\n<p>Then <code>@{...}</code> dereferences it and <code>push</code>es a new element <code>$c</code> to it. Altogether, <code>$c</code> is copied into a (sole) element of an anonymous array whose reference is at index <code>$b</code> of the array <code>@a</code>.  </p>\n\n<p>And a crucial part: as there is in fact no arrayref <sup>&dagger;</sup> there, the <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\"><em>autovivification</em></a> kicks in and it is created. Since there are no elements at indices preceding <code>$b</code> they are created as well, with value <code>undef</code>.</p>\n\n<p>Now <em>please</em> work through</p>\n\n<ul>\n<li><p>tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and </p></li>\n<li><p>data-structures cookbook <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a></p></li>\n</ul>\n\n<p>while using <code>perlref</code> linked in the beginning for a full reference.</p>\n\n<hr>\n\n<p>With complex data structures it is useful to be able to see them, and there are  tools for that. A most often used one is the core <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>, and here is an example with <a href=\"http://search.cpan.org/~gaas/Data-Dump-1.23/lib/Data/Dump.pm\" rel=\"nofollow noreferrer\">Data::Dump</a></p>\n\n<pre><code>perl -MData::Dump=dd -wE'@ary = (1); push @{$ary[3]}, \"ah\"; dd \\@ary'\n</code></pre>\n\n<p>with output</p>\n\n<pre>\n[1, undef, undef, [\"ah\"]]\n</pre>\n\n<p>where <code>[]</code> inside indicate an arrayref, with its sole element being the string <code>ah</code>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> More precisely, an <code>undef</code> scalar is dereferenced and since this happens in an <em>lvalue</em> context the autovivification goes.  Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for a comment. See for instance <a href=\"https://stackoverflow.com/a/41401306/4653379\">this post</a> with its links.</p>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 3, "last_activity_date": 1503696987, "last_edit_date": 1503696987, "creation_date": 1503677640, "answer_id": 45885578, "question_id": 45871957, "link": "https://stackoverflow.com/questions/45871957/how-do-references-in-perl-work/45885578#45885578", "title": "How do references in Perl work", "body": "<p>Let's start with the following two assertions:</p>\n\n<ul>\n<li><code>@a</code> starts out as an empty array with no elements.</li>\n<li><code>$b</code> is assigned the value of 10.</li>\n</ul>\n\n<p>Now look at this construct:</p>\n\n<p><code>@{$a[$b]}</code></p>\n\n<p>To understand we can start in the middle: <code>$a[$b]</code> indexes element 10 of the array <code>@a</code>.</p>\n\n<p>Now we can work outward from there: <code>@{...}</code> treats its contents as a reference to an array.  So <code>@{$a[$b]}</code> treats the content of element 10 of the array <code>@a</code> as a reference to an anonymous array.  That is to say, the scalar value contained in <code>$a[10]</code> is an array reference.</p>\n\n<p>Now layer in the push:</p>\n\n<p><code>push @{$a[$b]}, $c;</code></p>\n\n<p>Into the anonymous array referenced in element 10 of <code>@a</code> you are pushing the value of <code>$c</code>, which is the character \"a\".  You could access that element like this:</p>\n\n<p><code>my $value = $a[10]-&gt;[0]; # character 'a'</code></p>\n\n<p>Or shorthand,</p>\n\n<p><code>my $value = $a[10][0];</code></p>\n\n<p>If you pushed another value into <code>@{$a[10]}</code> then you would access it at:</p>\n\n<p><code>my $other_value = $a[10][1];</code></p>\n\n<p>But what about <code>$a[0]</code> through <code>$a[9]</code>?  You're only pushing a value into <code>$a[$b]</code>, which is <code>$a[10]</code>.  Perl automatically extends the array to accommodate that 11th element (<code>$a[10]</code>), but leaves the value in <code>$a[0]</code> through <code>$a[9]</code> as <code>undef</code>.  You mentioned that you tried this:</p>\n\n<p><code>print \"@a\\n\";</code></p>\n\n<p>Interpolating an array into a string causes its elements to be printed with a space between each one.  So you didn't see this:</p>\n\n<p><code>ARRAY(0xa6f328)</code></p>\n\n<p>You saw this:</p>\n\n<p><code>ARRAY(0xa6f328)</code></p>\n\n<p>...because there were ten spaces before the 11th element which contains an array reference.</p>\n\n<p>If you were running your script with <code>use warnings</code> at the top, you would have seen this instead:</p>\n\n<pre><code>Use of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\nUse of uninitialized value in join or string at scripts/mytest.pl line 12.\n          ARRAY(0xa6f328)\n</code></pre>\n\n<p>...or something quite similar.</p>\n\n<p>Your structure currently looks like this:</p>\n\n<p><code>@a = (undef,undef,undef,undef,undef,undef,undef,undef,undef,undef,['a'])</code></p>\n\n<p>If you ever want to really get a look at what a data structure looks like, rather than using a simple print, do something like this:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper \\@a;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8334129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cab69e6cd9c6d97c7f5a5863c9da46?s=128&d=identicon&r=PG&f=1", "display_name": "user166918", "link": "https://stackoverflow.com/users/8334129/user166918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 45872658, "answer_count": 3, "score": 6, "last_activity_date": 1527007638, "creation_date": 1503614432, "last_edit_date": 1503681335, "question_id": 45871957, "link": "https://stackoverflow.com/questions/45871957/how-do-references-in-perl-work", "title": "How do references in Perl work", "body": "<p>Can anyone explain the <code>push</code> statement in the following Perl code to me? I know how push in perl works but I can't understand what the first argument in following push command represents. I am trying to interpret someone's script. I tried to <code>print \"@a\\n\";</code> but it only printed <code>ARRAY(0x9aa370)</code> which makes me think that the push is not doing anything. Any help is appreciated. Thanks!</p>\n\n<pre><code>my @a = (); \nmy $b = 10;\nmy $c = 'a';\npush(@{$a[$b]}, $c);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1503645689, "post_id": 45870791, "comment_id": 78710813, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503669911, "post_id": 45870791, "comment_id": 78724981, "body": "It is a little more up front work, but using a hook in <code>@INC</code> would be a more robust way to do this."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503674316, "post_id": 45870791, "comment_id": 78727929, "body": "You realize if you have <code>my $xyz = &#39;...&#39;</code> and you put that in a package, you cannot access it from outside the package, right?"}, {"owner": {"reputation": 61, "user_id": 8513693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HqjIoaw2Tyc/AAAAAAAAAAI/AAAAAAAAADY/uOj1gT-0PoY/photo.jpg?sz=128", "display_name": "Bruce", "link": "https://stackoverflow.com/users/8513693/bruce"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503677040, "post_id": 45870791, "comment_id": 78729636, "body": "@Sinan&#220;n&#252;r - yes, I know the my vars will not be accessible.  The unqualified vars (no my/our/local) are the ones I really want."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 0, "creation_date": 1503694098, "post_id": 45870791, "comment_id": 78737879, "body": "Would this not be better if the configuration were data rather than code?"}, {"owner": {"reputation": 61, "user_id": 8513693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HqjIoaw2Tyc/AAAAAAAAAAI/AAAAAAAAADY/uOj1gT-0PoY/photo.jpg?sz=128", "display_name": "Bruce", "link": "https://stackoverflow.com/users/8513693/bruce"}, "reply_to_user": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 0, "creation_date": 1503695679, "post_id": 45870791, "comment_id": 78738495, "body": "@Ed. As I mentioned, I can&#39;t change the format of the input files.  And there are huge advantages gained by them being perl."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 0, "creation_date": 1503696091, "post_id": 45870791, "comment_id": 78738637, "body": "Fair enough, you know your situation better than I do!"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8513693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HqjIoaw2Tyc/AAAAAAAAAAI/AAAAAAAAADY/uOj1gT-0PoY/photo.jpg?sz=128", "display_name": "Bruce", "link": "https://stackoverflow.com/users/8513693/bruce"}, "edited": false, "score": 0, "creation_date": 1503700890, "post_id": 45876198, "comment_id": 78740071, "body": "So far this seems the most dynamic option (can be done on the fly as more data is read in)."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 3, "last_activity_date": 1503645375, "creation_date": 1503645375, "answer_id": 45876198, "question_id": 45870791, "link": "https://stackoverflow.com/questions/45870791/include-eval-perl-file-into-unique-namespace-defined-at-runtime/45876198#45876198", "title": "include/eval perl file into unique namespace defined at runtime", "body": "<p>I am not sure why the <code>eval</code> did not work. Maybe a bug? Here is a workaround using a temp file. This works for me:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Devel::Symdump;\nuse File::Temp;\n\nmy $file = './test.pl';\nmy $namespace = 'TEST';\n{\n    my $fh = File::Temp-&gt;new();\n    print $fh \"package $namespace;\\n\";\n    print $fh \"do '$file';\\n\";\n    print $fh \"1;\\n\";\n    close $fh;\n    do $fh-&gt;filename;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503680307, "post_id": 45884471, "comment_id": 78731427, "body": "Interesting answer. Not sure I understood the sentence <i>&quot;... because it is the <code>do</code> that is looking for the true value at the end of <code>$file</code>&quot;</i>. Why is <code>do</code> looking for a true value, isn&#39;t it <code>require</code> that should be looking for a true value? According to the documentation: <code>do EXPR</code> only executes the content of the filename <code>EXPR</code> as a Perl script."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503684495, "post_id": 45884471, "comment_id": 78733661, "body": "@H&#229;konH&#230;gland Thank you for the observation. I removed that part from my answer. It is possible that there is another problem with the code the OP is not showing us."}, {"owner": {"reputation": 61, "user_id": 8513693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HqjIoaw2Tyc/AAAAAAAAAAI/AAAAAAAAADY/uOj1gT-0PoY/photo.jpg?sz=128", "display_name": "Bruce", "link": "https://stackoverflow.com/users/8513693/bruce"}, "edited": false, "score": 0, "creation_date": 1503700837, "post_id": 45884471, "comment_id": 78740060, "body": "How would you make this more dynamic?  I start with a list of files to read (command line).  As I parse that list, those files may reference others (as file paths in strings) that I have to dynamically read in as well."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1503684433, "last_edit_date": 1503684433, "creation_date": 1503673841, "answer_id": 45884471, "question_id": 45870791, "link": "https://stackoverflow.com/questions/45870791/include-eval-perl-file-into-unique-namespace-defined-at-runtime/45884471#45884471", "title": "include/eval perl file into unique namespace defined at runtime", "body": "<p>Perl's <a href=\"https://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>use</code></a> and <a href=\"https://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>require</code></a> facilities make use of any hooks you might have installed in <code>@INC</code>. You can simply install a hook which looks in a specific location to load modules with a prefix you choose:</p>\n\n<pre><code>package MyIncHook;\n\nuse strict;\nuse warnings;\n\nuse autouse Carp =&gt; qw( croak );\n\nuse File::Spec::Functions qw( catfile );\n\nsub import {\n    my ($class, $prefix, $location) = @_;\n    unshift @INC, _loader_for($prefix, $location);\n    return;\n}\n\nsub _loader_for {\n    my $prefix = shift;\n    my $location = shift;\n\n    $prefix =~ s{::}{/}g;\n\n    return sub {\n        my $self = shift;\n        my $wanted = shift;\n\n        return unless $wanted =~ /^\\Q$prefix/;\n\n        my $path = catfile($location, $wanted);\n        my ($is_done);\n\n        open my $fh, '&lt;', $path\n            or croak \"Failed to open '$path' for reading: $!\";\n\n        my $loader = sub {\n            if ($is_done) {\n                close $fh\n                    or croak \"Failed to close '$path': $!\";\n                return 0;\n            }\n            if (defined (my $line = &lt;$fh&gt;)) {\n                $_ = $line;\n                return 1;\n            }\n            else {\n                $_ = \"1\\n\";\n                $is_done = 1;\n                return 1;\n            }\n        };\n\n        (my $package = $wanted) =~ s{/}{::}g;\n        $package =~ s/[.]pm\\z//;\n\n        my @ret = (\\\"package $package;\", $loader);\n        return @ret;\n    }\n}\n\n__PACKAGE__;\n__END__\n</code></pre>\n\n<p>Obviously, modify the construction of <code>$path</code> according to your requirements.</p>\n\n<p>You can use it like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse MyIncHook ('My::Namespace', \"$ENV{TEMP}/1\");\n\nuse My::Namespace::Rand;\n\nprint $My::Namespace::Rand::settings{WARNING_LEVEL}, \"\\n\";\n</code></pre>\n\n<p>where <code>$ENV{TEMP}/1/My/Namespace/Rand.pm</code> contains:</p>\n\n<pre><code>%settings = (\n    WARNING_LEVEL =&gt; 'critical',\n);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>C:\\Temp&gt; perl t.pl\ncritical\n</code></pre>\n\n<p>You can, obviously, define your own mapping from made up module names to file names.</p>\n"}], "owner": {"reputation": 61, "user_id": 8513693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HqjIoaw2Tyc/AAAAAAAAAAI/AAAAAAAAADY/uOj1gT-0PoY/photo.jpg?sz=128", "display_name": "Bruce", "link": "https://stackoverflow.com/users/8513693/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 2, "accepted_answer_id": 45876198, "answer_count": 2, "score": 5, "last_activity_date": 1504185560, "creation_date": 1503608402, "last_edit_date": 1504185560, "question_id": 45870791, "link": "https://stackoverflow.com/questions/45870791/include-eval-perl-file-into-unique-namespace-defined-at-runtime", "title": "include/eval perl file into unique namespace defined at runtime", "body": "<p>I'm writing a tool that must import a number of other perl config files.  The files are not wrapped w/packages and may have similar or conflicting variables/functions.  I don't have the ability to change the format of these files, so I must work around what they are.  What I was thinking to do was import each into a unique name space, but I've not found a way to do that using <code>do</code>, <code>require</code>, or <code>use</code>.  If I don't use dynamic names, just a hardcoded name, I can do it.</p>\n\n<p>Want something like this:</p>\n\n<pre><code>sub sourceTheFile {\n  my ($namespace, $file) = @_;\n  package $namespace;\n  do $file;\n  1;\n  return;\n}\n</code></pre>\n\n<p>That doesn't work because the package command requires a constant for the name.  So then I try something like this:</p>\n\n<pre><code>sub sourceTheFile {\n  my ($namespace, $file) = @_;\n  eval \"package $namespace;do $file;1;\"\n  return;\n}\n</code></pre>\n\n<p>But the contents of the file read by <code>do</code> are placed in the <code>main::</code> scope not the one I want. The target scope is created, just not populated by the \n<code>do</code>. (I tried require, and just a straight <code>cat $file</code> inside the eval as well.)</p>\n\n<p>I'm using <code>Devel::Symdump</code> to verify that the namespaces are built correctly or not.</p>\n\n<p>example input file:</p>\n\n<pre><code>my $xyz = \"some var\";\n%all_have_this = ( common=&gt;\"stuff\" );\n</code></pre>\n\n<p><strong>ADDITIONAL CHALLENGE</strong></p>\n\n<p>Using the answer that does the temp file build and do call, I can make this work dynamically as I require.  BUT, big but, how do I now reference the data inside this new namespace? Perl doesn't seem to have the lose ability to build a variable name from a string and use that as the variable.</p>\n"}, {"tags": ["perl", "dbi"], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 3, "last_activity_date": 1503609200, "creation_date": 1503609200, "answer_id": 45870974, "question_id": 45870545, "link": "https://stackoverflow.com/questions/45870545/how-to-check-rows-returned-by-fetchall-arrayref-method-in-perl/45870974#45870974", "title": "How to check rows returned by fetchall_arrayref method in Perl?", "body": "<p>Evaluating an array (reference) in scalar context returns the number of elements in the array. The answer to your other questions is that it's just standard dereferencing using ugly syntax and useless intermediate variables.</p>\n\n<p>I believe in teaching people how to fish, though, so consider this code, which is essentially what you're working with:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $r   = [[1, 2, 3]];\nmy $rr  = @$r[0];\nmy $rec = @$rr[0];\n\nprint Dumper($r, $rr, $rec);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          [\n            1,\n            2,\n            3\n          ]\n        ];\n$VAR2 = $VAR1-&gt;[0];\n$VAR3 = 1;\n</code></pre>\n\n<p>It should be easy to see what's going on now that you can see what each variable holds, right?</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1503985436, "last_edit_date": 1503985436, "creation_date": 1503609868, "answer_id": 45871112, "question_id": 45870545, "link": "https://stackoverflow.com/questions/45870545/how-to-check-rows-returned-by-fetchall-arrayref-method-in-perl/45871112#45871112", "title": "How to check rows returned by fetchall_arrayref method in Perl?", "body": "<p>The <a href=\"http://search.cpan.org/~timb/DBI-1.637/DBI.pm#fetchall_arrayref\" rel=\"nofollow noreferrer\">fetchall_arrayref()</a> returns a reference to an array of all rows, in which each element is also a reference to an array, with that row's elements.</p>\n\n<p>Then the <code>die</code> line checks</p>\n\n<ol>\n<li><p>that the top-level reference <code>$r</code> is defined (that the call worked), and</p></li>\n<li><p>that the size of that array, <code>@$r</code>, is exactly <code>1</code> &ndash; so, that the array contains exactly one element.  This betrays the expectation that the query will return one row and since the code is prepared to <code>die</code> for this it may well ask for one row, by <a href=\"http://search.cpan.org/~timb/DBI-1.637/DBI.pm#fetchrow_arrayref\" rel=\"nofollow noreferrer\">fetchrow_arrayref</a> or <a href=\"http://search.cpan.org/~timb/DBI-1.637/DBI.pm#fetchrow_array\" rel=\"nofollow noreferrer\">fetchrow_array</a>.</p></li>\n</ol>\n\n<p>The <code>@$r</code> dereferences the <code>$r</code> arrayref, and in the scalar context imposed by <code>!=</code> we indeed get the number of elements in the list.</p>\n\n<p>The line 5 is very misleading, to say the least, even as the syntax happens to be legitimate: it extracts the first element and feeds it into a scalar, but using <code>@$r[0]</code> syntax which would normally imply that we are getting a list, by its sigil <code>@</code>.  It's equivalent to <code>@{$r}[0]</code> and is an abuse of notation.</p>\n\n<p>It should either clearly get the first element, if that's the intent</p>\n\n<pre><code>my $rr = $r-&gt;[0];\n</code></pre>\n\n<p>or also dereference it to get the whole array</p>\n\n<pre><code>my @row = @{ $r-&gt;[0] };\n</code></pre>\n\n<p>if that's wanted.</p>\n\n<p>The last line that you query does the exact same, using the retrieved <code>$rr</code> reference.  But the first element of the first arrayref (row) is easily obtained directly </p>\n\n<pre><code>my $rec = $r-&gt;[0]-&gt;[0];  # or $r-&gt;[0][0]\n</code></pre>\n\n<p>what replaces lines 5 and 6.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>.</p>\n"}], "owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 1, "accepted_answer_id": 45871112, "answer_count": 2, "score": 0, "last_activity_date": 1507420187, "creation_date": 1503607354, "last_edit_date": 1507420187, "question_id": 45870545, "link": "https://stackoverflow.com/questions/45870545/how-to-check-rows-returned-by-fetchall-arrayref-method-in-perl", "title": "How to check rows returned by fetchall_arrayref method in Perl?", "body": "<p>I am trying to understand following piece of code, in particular what's happening in line 4, 5 and 6.</p>\n\n<p>I have understood most of it , but just can't seem to understand what's being done with <code>@$r != 1;</code> in line 4 (does <code>@$r</code> represents the number of rows returned?) and similarly what's happening with <code>@$r[0]</code> in line 5 and <code>@$rr[0]</code> in line 6:</p>\n\n<pre><code>1 my $sth = $dbh-&gt;prepare(\" a select statement \");\n2    $sth-&gt;execute();\n3   my $r = $sth-&gt;fetchall_arrayref();\n4  die \"Failed to select \" if !defined($r) || @$r != 1;\n5   my $rr = @$r[0];\n6    my $rec = @$rr[0];\n7   print \"Rec is $rec\\n\";\n</code></pre>\n"}, {"tags": ["windows", "perl", "dmake"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503603015, "post_id": 45869486, "comment_id": 78697908, "body": "Where&#39;s the rest of the error message?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1503603064, "post_id": 45869486, "comment_id": 78697925, "body": "<a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">strawberryperl.com</a> has the latest version: 5.26.0."}, {"owner": {"reputation": 1561, "user_id": 1382287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8bc1508ca6902cb1b99990c35e43d273?s=128&d=identicon&r=PG", "display_name": "dgBP", "link": "https://stackoverflow.com/users/1382287/dgbp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1503603113, "post_id": 45869486, "comment_id": 78697953, "body": "@melpomene I wanted to try installing it manually... just for kicks really, but if possible I want to try."}, {"owner": {"reputation": 1561, "user_id": 1382287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8bc1508ca6902cb1b99990c35e43d273?s=128&d=identicon&r=PG", "display_name": "dgBP", "link": "https://stackoverflow.com/users/1382287/dgbp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503603168, "post_id": 45869486, "comment_id": 78697981, "body": "I&#39;ll update the error message, forgot that it puts the error at the top rather than at the end of the output! EDIT: Which actually makes a difference lol. But still, not sure about the conflict, any thoughts?"}, {"owner": {"reputation": 1561, "user_id": 1382287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8bc1508ca6902cb1b99990c35e43d273?s=128&d=identicon&r=PG", "display_name": "dgBP", "link": "https://stackoverflow.com/users/1382287/dgbp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503603922, "post_id": 45869486, "comment_id": 78698322, "body": "This does seem to be a previously known issue as of here: <a href=\"https://lists.gt.net/perl/porters/319603\" rel=\"nofollow noreferrer\">lists.gt.net/perl/porters/319603</a>, but it doesn&#39;t look like the patch was ever incorporated into the main build. From the comments, it also looks like it might not work. Any other solutions?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503605357, "post_id": 45869486, "comment_id": 78699062, "body": "The error is <code>conflicting types for &#39;mkstemp&#39; extern  int mkstemp(const char *path);</code> vs <code>__cdecl __MINGW_NOTHROW  int mkstemp (char *__filename_template)</code>. I get my kicks out of building with MSVC, so can&#39;t help much."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503605530, "post_id": 45869486, "comment_id": 78699157, "body": "But, I will say, forget about <code>dmake</code> given that you are using MinGW. Just use the regular GNU toolchain (which, obviously, does not solve your problem)."}, {"owner": {"reputation": 1561, "user_id": 1382287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8bc1508ca6902cb1b99990c35e43d273?s=128&d=identicon&r=PG", "display_name": "dgBP", "link": "https://stackoverflow.com/users/1382287/dgbp"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503608096, "post_id": 45869486, "comment_id": 78700437, "body": "@Sinan&#220;n&#252;r yeh, it&#39;s looking like more trouble than it&#39;s worth. I don&#39;t have MSV tools installed so I might just go with Strawberry Perl. Shame really, I like seeing what I&#39;m installing. It somehow makes me feel closer to the program and how it works. Sounds weird now I&#39;ve said it haha!"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503615397, "post_id": 45869486, "comment_id": 78703008, "body": "@dgBP I know what you mean and I agree ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 9136252, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnVj_e_4fH0/AAAAAAAAAAI/AAAAAAAAABs/gNaolC4_Xvg/photo.jpg?sz=128", "display_name": "TalkVideo Network", "link": "https://stackoverflow.com/users/9136252/talkvideo-network"}, "is_accepted": false, "score": 0, "last_activity_date": 1518308257, "last_edit_date": 1518308257, "creation_date": 1518305858, "answer_id": 48726751, "question_id": 45869486, "link": "https://stackoverflow.com/questions/45869486/error-installing-perl-on-win10-using-mingw/48726751#48726751", "title": "Error installing perl on Win10 using MinGW", "body": "<p>Try obtaining the <a href=\"https://github.com/Alexpux/MINGW-packages\" rel=\"nofollow noreferrer\">MinGW source packages</a>, and installing using makepkg-mingw to build them.</p>\n\n<p>Most if not all have patches applied to customize (or fix) them for the MSYS2/MinGW environment.</p>\n\n<p>Stock source downloaded from its author may not compile directly in that environment the way it would on Linux, or OS X using \"configure\" and \"make\".</p>\n\n<p>Instructions are <a href=\"https://github.com/msys2/msys2/wiki/Creating-packages\" rel=\"nofollow noreferrer\">available</a>, and there may be other similar instructions out there associated with Arch Linux.</p>\n"}], "owner": {"reputation": 1561, "user_id": 1382287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8bc1508ca6902cb1b99990c35e43d273?s=128&d=identicon&r=PG", "display_name": "dgBP", "link": "https://stackoverflow.com/users/1382287/dgbp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1518308257, "creation_date": 1503602790, "last_edit_date": 1503603217, "question_id": 45869486, "link": "https://stackoverflow.com/questions/45869486/error-installing-perl-on-win10-using-mingw", "title": "Error installing perl on Win10 using MinGW", "body": "<p>If this is the wrong place for this question I apologise and please redirect me to the suitable section.</p>\n\n<p>I'm somewhat rusty on installing from command line, especially on Windows. I decided to install the latest Perl version on my PC, running under Windows 10. I had previously installed it using Strawberry Perl download, but as it was a few versions out of date I decided to remove it and refresh my skills (ha) by installing it manually. I downloaded the lastest Perl release from <a href=\"https://www.perl.org/get.html#win32\" rel=\"nofollow noreferrer\">https://www.perl.org/get.html#win32</a> and have been reading the README.win32 to make sure I install it correctly.</p>\n\n<p>As I need a compiler, I decided to use <a href=\"http://mingw-w64.org\" rel=\"nofollow noreferrer\">Gcc</a> and <a href=\"http://search.cpan.org/dist/dmake/\" rel=\"nofollow noreferrer\">dmake</a>. I installed and can run them successfully so went back to installing Perl. As per instructions I tried running dmake in the win32 subdirectory in the Perl download folder. Before this I edited <code>makefile.mk</code>, where these variables are uncommented from the Build configuration section:</p>\n\n<pre><code>INST_DRV/INST_TOP (left as is)\nINST_VER *= \\5.26.0\nUSE_MULTI *= define\nUSE_ITHREADS *= define\nUSE_IMP_SYS *= define\nUSE_LARGE_FILES *= define\nUSE_64_BIT_INT *= define\nUSE_LONG_DOUBLE *= define\nDEFAULT_INC_EXCLUDES_DOT *= define\nCCTYPE = GCC\nGCCWRAPV *=define\nCCHOME *= C:\\MinGW\n(nothing else changed after this)\n</code></pre>\n\n<p>When I run <code>dmake</code> in the directory, it quickly comes to this error:</p>\n\n<pre><code>gcc -c  -I.\\include -I. -I.. -DWIN32 -DPERLDLL -DPERL_CORE -s -O2 -\nD__USE_MINGW_ANSI_STDIO -fwrapv -fno-strict-aliasing\n-DPERL_EXTERNAL_GLOB -DPERL_IS_MINIPERL -omini\\toke.o  ..\\toke.c\nIn file included from ..\\perl.h:3220:0,\n                 from ..\\toke.c:40:\n./win32.h:417:13: error: conflicting types for 'mkstemp'\n extern  int mkstemp(const char *path);\n             ^~~~~~~\nIn file included from ..\\perl.h:790:0,\n                 from ..\\toke.c:40:\nc:\\mingw\\include\\stdlib.h:809:30: note: previous definition of 'mkstemp' was here\n __cdecl __MINGW_NOTHROW  int mkstemp (char *__filename_template)\n                              ^~~~~~~\nIn file included from ..\\toke.c:40:0:\n..\\toke.c: In function 'Perl_filter_add':\n..\\perl.h:1756:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]\n #define PTR2nat(p) (PTRV)(p) /* pointer to integer of PTRSIZE */\n                    ^\n..\\perl.h:1769:28: note: in expansion of macro 'PTR2nat'\n #define FPTR2DPTR(t,p) ((t)PTR2nat(p)) /* function pointer to data pointer */\n                            ^~~~~~~\n..\\toke.c:4397:21: note: in expansion of macro 'FPTR2DPTR'\n     IoANY(datasv) = FPTR2DPTR(void *, funcp); /* stash funcp into spare field */\n                     ^~~~~~~~~\n..\\perl.h:1769:25: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\n #define FPTR2DPTR(t,p) ((t)PTR2nat(p)) /* function pointer to data pointer */\n                         ^\n..\\toke.c:4397:21: note: in expansion of macro 'FPTR2DPTR'\n     IoANY(datasv) = FPTR2DPTR(void *, funcp); /* stash funcp into spare field */\n                     ^~~~~~~~~\n..\\toke.c: In function 'Perl_filter_del':\n..\\perl.h:1756:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]\n #define PTR2nat(p) (PTRV)(p) /* pointer to integer of PTRSIZE */\n                    ^\n..\\perl.h:1769:28: note: in expansion of macro 'PTR2nat'\n #define FPTR2DPTR(t,p) ((t)PTR2nat(p)) /* function pointer to data pointer */\n                            ^~~~~~~\n..\\toke.c:4463:26: note: in expansion of macro 'FPTR2DPTR'\n     if (IoANY(datasv) == FPTR2DPTR(void *, funcp)) {\n                          ^~~~~~~~~\n..\\perl.h:1769:25: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\n #define FPTR2DPTR(t,p) ((t)PTR2nat(p)) /* function pointer to data pointer */\n                         ^\n..\\toke.c:4463:26: note: in expansion of macro 'FPTR2DPTR'\n     if (IoANY(datasv) == FPTR2DPTR(void *, funcp)) {\n                          ^~~~~~~~~\n..\\toke.c: In function 'Perl_filter_read':\n..\\perl.h:1756:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]\n #define PTR2nat(p) (PTRV)(p) /* pointer to integer of PTRSIZE */\n                    ^\n..\\perl.h:1768:28: note: in expansion of macro 'PTR2nat'\n #define DPTR2FPTR(t,p) ((t)PTR2nat(p)) /* data pointer to function pointer */\n                            ^~~~~~~\n..\\toke.c:4554:13: note: in expansion of macro 'DPTR2FPTR'\n     funcp = DPTR2FPTR(filter_t, IoANY(datasv));\n             ^~~~~~~~~\n..\\perl.h:1768:25: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\n #define DPTR2FPTR(t,p) ((t)PTR2nat(p)) /* data pointer to function pointer */\n                         ^\n..\\toke.c:4554:13: note: in expansion of macro 'DPTR2FPTR'\n     funcp = DPTR2FPTR(filter_t, IoANY(datasv));\n             ^~~~~~~~~\nIn file included from ..\\perl.h:5644:0,\n                 from ..\\toke.c:40:\n..\\toke.c: In function 'S_pending_ident':\n..\\perl.h:1734:26: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\n #  define INT2PTR(any,d) (any)(d)\n                          ^\n..\\embed.h:427:59: note: in definition of macro 'newUNOP_AUX'\n #define newUNOP_AUX(a,b,c,d) Perl_newUNOP_AUX(aTHX_ a,b,c,d)\n                                                           ^\n..\\toke.c:8912:37: note: in expansion of macro 'INT2PTR'\n                                     INT2PTR(UNOP_AUX_item *,\n                                     ^~~~~~~\n</code></pre>\n\n<p>I get a bunch of warnings beforehand about casting from pointers to integers of different sizes, but this is the bit where it stops and produces an error. Am I missing something obvious? I haven't done this for a while, so I'm hoping it is a silly user error on my part! Thanks.</p>\n"}, {"tags": ["perl", "time-hires"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1503601874, "post_id": 45869157, "comment_id": 78697358, "body": "What is <code>$Time::HiRes::VERSION</code>? First mention of <code>utime</code> in the <a href=\"https://metacpan.org/changes/distribution/Time-HiRes\" rel=\"nofollow noreferrer\">docs</a> is version 1.9735."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1503602257, "post_id": 45869157, "comment_id": 78697548, "body": "My perl 5.24.0 comes with Time::HiRes v1.9733 and produces the same error as your headline."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1503602921, "post_id": 45869157, "comment_id": 78697862, "body": "mob, same for me, 1.9733. Thank you for pointing out!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1503675403, "last_edit_date": 1503675403, "creation_date": 1503603773, "answer_id": 45869718, "question_id": 45869157, "link": "https://stackoverflow.com/questions/45869157/perl-utime-is-not-exported-by-the-timehires-module/45869718#45869718", "title": "Perl - &quot;utime&quot; is not exported by the Time::HiRes module", "body": "<p>You are using a version of Time::HiRes that predates the addition of <code>utime</code>. I'm not sure of the exact version in which <code>utime</code> was added, but it was after 1.9733 (2016-04-23) and no later than 1.9739 (2016-06-28). Upgrade Time::HiRes if you wish to use <code>utime</code>.</p>\n"}], "owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503675403, "creation_date": 1503601328, "question_id": 45869157, "link": "https://stackoverflow.com/questions/45869157/perl-utime-is-not-exported-by-the-timehires-module", "title": "Perl - &quot;utime&quot; is not exported by the Time::HiRes module", "body": "<p>Getting this error when adding statement</p>\n\n<pre><code>use Time::HiRes qw( utime );\n</code></pre>\n\n<p>According to <a href=\"https://perldoc.perl.org/Time/HiRes.html\" rel=\"nofollow noreferrer\">Time::HiRes perldoc</a> it should be there, but it's not (looked in HiRes.pm). Does anybody know why? I am using perl 5.24.0, checked on several platforms (unix, win32).\nTrying to set high resolution timestamps on my files. Is there any other way?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1503599529, "post_id": 45868589, "comment_id": 78696111, "body": "Did you also change the condition for the <code>if</code> block that surrounds it?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1503599705, "post_id": 45868589, "comment_id": 78696221, "body": "For me, this just prints <code>stuff</code>, not <code>[^\\ </code>. The regex can&#39;t match itself because of the backslash between <code>file</code> and <code>(</code>! Do you have any other filenames <i>containing</i> <code>pl</code> in the same directory? Perhaps previous versions of the same script?"}, {"owner": {"reputation": 299, "user_id": 6610808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/649f4874628eabaefc06f3ff59c1af67?s=128&d=identicon&r=PG&f=1", "display_name": "C. Williamson", "link": "https://stackoverflow.com/users/6610808/c-williamson"}, "edited": false, "score": 0, "creation_date": 1503599915, "post_id": 45868589, "comment_id": 78696340, "body": "Ok, that was an obvious answer that I was banging head against for the last hour.  No, I forgot to change the if statement.  Thank you for that.  As for the second comment, no I don&#39;t have any other pl files in the directory."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503600300, "post_id": 45868589, "comment_id": 78696533, "body": "Note that <code>&#47;.pl&#47;</code> matches any word containing any character followed by <code>pl</code>, for example the word <code>example</code>. The <code>.</code> is not a literal dot but matches any (non-newline) character. The regex is not anchored to match only at the end. You probably intended <code>&#47;\\.pl$&#47;</code> to filter the file names. Since the character sequence <code>[^\\ </code> is fairly unique, maybe they are from a hidden backup file of a previous version of the script?"}, {"owner": {"reputation": 299, "user_id": 6610808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/649f4874628eabaefc06f3ff59c1af67?s=128&d=identicon&r=PG&f=1", "display_name": "C. Williamson", "link": "https://stackoverflow.com/users/6610808/c-williamson"}, "edited": false, "score": 0, "creation_date": 1503600495, "post_id": 45868589, "comment_id": 78696647, "body": "Ok, I think I realized what&#39;s going on.  It looks like the $File::Find::name does a recursive directory search, so it was finding a file several sub-directories below.  And yes, I need to change the regex as you suggested.  Thanks."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503600607, "post_id": 45868589, "comment_id": 78696722, "body": "(1) Print the full path each time you find the phrase. MIght as well print the whole line <code>$row</code>, too (2) There is no need for an <code>if</code> first to see whether there&#39;s <code>file</code> word, then a match containing that word.  Test on the match you need, <code>if (my ($substr) =~ &#47;file...&#47;) { ... }</code>."}, {"owner": {"reputation": 299, "user_id": 6610808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/649f4874628eabaefc06f3ff59c1af67?s=128&d=identicon&r=PG&f=1", "display_name": "C. Williamson", "link": "https://stackoverflow.com/users/6610808/c-williamson"}, "edited": false, "score": 0, "creation_date": 1503600893, "post_id": 45868589, "comment_id": 78696885, "body": "zdim, is there any way to get it to store the substring during the check, so that I don&#39;t have to run the regex a second time in order to print it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503602604, "post_id": 45868589, "comment_id": 78697719, "body": "The <code>if (...)</code> in my comment above stores the capture in <code>$substr</code> variable, which is then available within the scope delmited by <code>{ ... }</code> of that <code>if</code>.  So yes you have the &#39;catch&#39; in <code>$substr</code>.  Is this what you mean?  See the full answer by @Sinan."}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 6610808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/649f4874628eabaefc06f3ff59c1af67?s=128&d=identicon&r=PG&f=1", "display_name": "C. Williamson", "link": "https://stackoverflow.com/users/6610808/c-williamson"}, "edited": false, "score": 1, "creation_date": 1503678519, "post_id": 45869103, "comment_id": 78730448, "body": "Thanks for the suggestions.  I will keep those in mind.  Strangely, with the Padre IDE, everything after the /x is no longer recognized as proper syntax."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 1, "last_activity_date": 1503601840, "last_edit_date": 1503601840, "creation_date": 1503601117, "answer_id": 45869103, "question_id": 45868589, "link": "https://stackoverflow.com/questions/45868589/why-does-this-regex-in-perl-work-for-one-word-but-not-another/45869103#45869103", "title": "Why does this regex in perl work for one word but not another?", "body": "<ol>\n<li><p><code>use 5.006</code> kind of odd if you are just beginning to learn Perl ... That is an ancient version.</p></li>\n<li><p>You should not build a potentially huge list of all files in all locations under the current directory and then filter it. Instead, push only the files you want to the list.</p></li>\n<li><p>Especially with escaped meta characters, regex patterns can be become hard to read very quickly, so use the <code>/x</code> modifier to insert some whitespace into those patterns.</p></li>\n<li><p>You do not have to match twice: Just check &amp; capture at the same time.</p></li>\n<li><p>If <code>open</code> fails, include the reason in the error message.</p></li>\n<li><p>Your second question above does not make sense. You seem to expect your pattern to match the literal string <code>file\\(([^\\)]*)\\)/</code>, but it cannot.</p></li>\n</ol>\n\n<hr>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find;\n\nmy @files;\n\nfind(\n    sub {\n        return if -d;\n        return unless / [.] pl \\z/x;\n        push @files, $File::Find::name;\n    },\n    '.',\n);\n\nfor my $file ( @files ) {\n    open my $fh, '&lt;', $file\n        or die \"Could not open file $file: $!\";\n\n    while (my $line = &lt;$fh&gt;) {\n        if (my ($substring) = ($line =~ m{ (?:file|directory) \\( ([^\\)]*) \\) }x)) {\n            print \"$substring\\n\";\n        }\n    }\n\n    close $fh;\n}\n\n# file(stuff)\n# directory(other)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>stuff\nother\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 6610808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/649f4874628eabaefc06f3ff59c1af67?s=128&d=identicon&r=PG&f=1", "display_name": "C. Williamson", "link": "https://stackoverflow.com/users/6610808/c-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 45869103, "answer_count": 1, "score": 0, "last_activity_date": 1503601934, "creation_date": 1503599205, "last_edit_date": 1503601934, "question_id": 45868589, "link": "https://stackoverflow.com/questions/45868589/why-does-this-regex-in-perl-work-for-one-word-but-not-another", "title": "Why does this regex in perl work for one word but not another?", "body": "<p>I'm new to perl so please excuse me if my question seems obvious.  I made a small perl script that just examines itself to extract a particular substring I'm looking for and I'm getting results that I can't explain.  Here is the script:</p>\n\n<pre><code>use 5.006;\nuse strict;\nuse warnings;\nuse File::Find;\n\nmy @files;\nfind( \n    sub { push @files, $File::Find::name unless -d; }, \n    \".\"\n);\n\nmy @filteredfiles = grep(/.pl/, @files);\n\nforeach my $fileName (@filteredfiles)\n{\nopen (my $fh, $fileName) or die \"Could not open file $fileName\";\n\nwhile (my $row = &lt;$fh&gt;)\n{\n    chomp $row;\n    if ($row =~ /file/)\n    {\n        my ($substring) = $row =~ /file\\(([^\\)]*)\\)/;\n        print \"$substring\\n\" if $substring;\n    }\n}\n\nclose $fh;\n}\n\n# file(stuff)\n# directory(stuff)\n</code></pre>\n\n<p>Now, when I run this, I get the following output:</p>\n\n<pre><code>stuff\n[^\\\n</code></pre>\n\n<ol>\n<li><p>Why is it printing the lines out of order?  Since the \"stuff\" line occurs later in the file, shouldn't it print later?</p></li>\n<li><p>Why is it printing that second line wrong?  It should be \"<code>\\(([^\\</code>\".  It's missing the first 3 characters.</p></li>\n<li><p>If I change my regex to the following: <code>/directory\\(([^\\)]*)\\)/</code>, I get no output.  The only difference is the word.  It should be finding the second comment.  What is going on here?</p></li>\n</ol>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 2, "creation_date": 1503598097, "post_id": 45868250, "comment_id": 78695308, "body": "What is the problem <i>exactly</i>?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503599139, "post_id": 45868250, "comment_id": 78695868, "body": "I thought OP was showing pseudo-code of some sort, so voted to close for that reason, but this should be closed either as a duplicate of <a href=\"https://stackoverflow.com/q/1175390/100754\">How do I compare two strings in Perl?</a> or as a typo. It would be great if someone can figure out a decent title. This has nothing to do with JSON, but I can&#39;t think of a decent, descriptive title."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503599304, "post_id": 45868250, "comment_id": 78695972, "body": "@Sinan&#220;n&#252;r I had just voted to close as typographical error, not reproducable (etc)"}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 1, "creation_date": 1503599377, "post_id": 45868250, "comment_id": 78696015, "body": "Welcome to StackOverflow. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>, and include details of what exactly is wrong with your approach."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503599418, "post_id": 45868250, "comment_id": 78696038, "body": "@Sinan&#220;n&#252;r  I removed that &quot;JSON&quot; from the title, at least for now"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1503654368, "post_id": 45868250, "comment_id": 78715650, "body": "Please <b>always</b> add <code>use strict;</code> and <code>use warnings;</code> to your code, especially if you are a newbie. It would have shown <code>Found = in conditional, should be == at .&#47;t.pl line 11.</code> If you&#39;d then change that to <code>==</code> (which is still wrong, but a bit better), it says <code>Argument &quot;bar&quot; isn&#39;t numeric in numeric eq (==) at .&#47;t.pl line 11.</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8513112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d5ea3cbc7f42868df4b07b8c6f8d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Roto", "link": "https://stackoverflow.com/users/8513112/roto"}, "edited": false, "score": 0, "creation_date": 1503598617, "post_id": 45868351, "comment_id": 78695554, "body": "Wow, I feel dumb. Kinda knew to perl itself. I didnt realize it would be that easy. Thank you so much! Ill learn from my mistakes."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1503598382, "creation_date": 1503598382, "answer_id": 45868351, "question_id": 45868250, "link": "https://stackoverflow.com/questions/45868250/failing-if-statement/45868351#45868351", "title": "Failing if statement", "body": "<p>You should update your question to tell us what's going wrong with your current code.</p>\n\n<p>One major problem is that <code>=</code> is the assignment operator. To compare strings for equality, use the <code>eq</code> operator:</p>\n\n<pre><code>if ($isps eq \"Time Warner Cable\") # ...\n</code></pre>\n\n<p>(The <code>==</code> operator performs numeric comparison.)</p>\n\n<p>For more information, <code>perldoc perlop</code>, available online <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1503651011, "post_id": 45868365, "comment_id": 78713708, "body": "Probably worth noting - <code>use strict;</code> <code>use warnings;</code> tells you about this. <code>Found = in conditional, should be ==</code>"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1503598444, "creation_date": 1503598444, "answer_id": 45868365, "question_id": 45868250, "link": "https://stackoverflow.com/questions/45868250/failing-if-statement/45868365#45868365", "title": "Failing if statement", "body": "<p>The <code>=</code> is the assignment operator. You want the string comparison operator <code>eq</code> instead.</p>\n\n<p>In this line you are assigning the string <code>\"Time Warner Cable\"</code> to the <code>$isps</code> variable. Then the <code>if</code>-conditional sees the string and interprets it as true. The same for the next conditional.</p>\n\n<pre><code>if ($isps = \"Time Warner Cable\")\n</code></pre>\n\n<p>Instead, you want:</p>\n\n<pre><code>my $isps = $info-&gt;{'isp'};\n\nif ($isps eq \"Time Warner Cable\") {\n    print \"Isp found, go to $website for more information\\n\";       \n}\nelsif ($isps eq \"Google\") {\n    print \"Isp found, go to $website for more information\\n\";       \n} else {\n    print \"No ISP located! No way of Contact via this terminal!\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8513112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d5ea3cbc7f42868df4b07b8c6f8d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Roto", "link": "https://stackoverflow.com/users/8513112/roto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 45868365, "answer_count": 2, "score": -3, "last_activity_date": 1503599379, "creation_date": 1503597979, "last_edit_date": 1503599379, "question_id": 45868250, "link": "https://stackoverflow.com/questions/45868250/failing-if-statement", "title": "Failing if statement", "body": "<p>Ok so I have this line of code that I cant figure out and if someone could help me with it that would be great. I am making a geo-location perl script as part of my project. </p>\n\n<p>Here is the line of code</p>\n\n<pre><code>$isps = $info-&gt;{'isp'};\n\nif ($isps = \"Time Warner Cable\")\n {\n\n  print \"Isp found, go to $website for more information\\n\";       \n}\n\nif ($isps = \"Google\") {\n\n    print \"Isp found, go to $website for more information\\n\";       \n} else {\n\n    print \"No ISP located! No way of Contact via this terminal!\";\n}\n</code></pre>\n\n<p>Ok so basically I am trying to make the if statement read the JSON code and make it print certain text if the specific name is listed. I am adding more ISPs to the file but just those two for example for now.</p>\n\n<p>If anyone could help me with this line of code, because I seriously cant figure it out.</p>\n"}, {"tags": ["perl", "websocket", "mojolicious"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503597526, "post_id": 45865451, "comment_id": 78695029, "body": "<a href=\"https://github.com/kraih/mojo/wiki/Writing-websocket-chat-using-Mojolicious-Lite\" rel=\"nofollow noreferrer\">github.com/kraih/mojo/wiki/&hellip;</a> &lt;--"}, {"owner": {"reputation": 301, "user_id": 8512365, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/971607a9565ee39a9b5dbe46c49c7d4b?s=128&d=identicon&r=PG&f=1", "display_name": "artless boy", "link": "https://stackoverflow.com/users/8512365/artless-boy"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503597806, "post_id": 45865451, "comment_id": 78695168, "body": "I used this link to write this code (and I have a minor error on the JS), but that s not exactly what I am looking for, thx anyway :)"}, {"owner": {"reputation": 301, "user_id": 8512365, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/971607a9565ee39a9b5dbe46c49c7d4b?s=128&d=identicon&r=PG&f=1", "display_name": "artless boy", "link": "https://stackoverflow.com/users/8512365/artless-boy"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503649294, "post_id": 45865451, "comment_id": 78712740, "body": "If someone ever arrived here, you may can find a solution in question asked here <a href=\"https://stackoverflow.com/questions/37186906/why-websocket-connections-breaksn\" title=\"why websocket connections breaksn\">stackoverflow.com/questions/37186906/&hellip;</a> not really what I was seeking but it can&#39;t be unseen if you have this issue"}], "answers": [{"tags": [], "owner": {"reputation": 715, "user_id": 5218508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88149bda385492c0f7ce78727dce639?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Lassche", "link": "https://stackoverflow.com/users/5218508/rob-lassche"}, "is_accepted": false, "score": 0, "last_activity_date": 1536101612, "creation_date": 1536101612, "answer_id": 52174946, "question_id": 45865451, "link": "https://stackoverflow.com/questions/45865451/connect-perl-script-to-a-websocket-using-mojolicious/52174946#52174946", "title": "Connect perl script to a websocket (using mojolicious)", "body": "<p>I understand that you want a plain perl-script who connects to the Mojolicious webserver where you have a websocket endpoint.\nThe external perl script should connect to the websocket server and send some messages. The websocket server can then redistribute those messages to other clients. </p>\n\n<p>Check my github where you can find the above screnario. </p>\n\n<p><a href=\"https://github.com/rlassche/mojolicious_websockets\" rel=\"nofollow noreferrer\">Perl Mojolicious websockets</a></p>\n"}], "owner": {"reputation": 301, "user_id": 8512365, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/971607a9565ee39a9b5dbe46c49c7d4b?s=128&d=identicon&r=PG&f=1", "display_name": "artless boy", "link": "https://stackoverflow.com/users/8512365/artless-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1536101612, "creation_date": 1503588229, "last_edit_date": 1503596511, "question_id": 45865451, "link": "https://stackoverflow.com/questions/45865451/connect-perl-script-to-a-websocket-using-mojolicious", "title": "Connect perl script to a websocket (using mojolicious)", "body": "<p>Here is my issue : I have got an API using mojolicious, an external script perl and a JS file, and I would like to connect them this way: the external script launch a random POST request, if it is a success it have to send the message \"Success\" throught a websocket. If an error occures, It will have to send \"Error\". The websocket on the API will just relay the message for the JS which will use it.</p>\n\n<p>How I imagine the code to be :</p>\n\n<p>Inside the Mojolicious launcher script:</p>\n\n<pre><code>websocket '/foo' =&gt; sub {\n $self-&gt;on(message =&gt; sub {\n  my ($self, $msg) = @_;\n  $self-&gt;send($msg);\n });\n};\n</code></pre>\n\n<p><em>when get a message send it</em></p>\n\n<p>Inside the JS file:</p>\n\n<pre><code>var ws = new WebSocket('ws://api/foo'); \nws.onmessage = function(msg){\n if(msg == \"Error\") {console.log(\"got an error\")};\n else if(msg == \"Success\") {console.log(\"got a success\")};\n};\n</code></pre>\n\n<p>So, how can I connect my external script to the websocket, and be able to send \"Error\" or \"Success\"? (This external script has nothing to do with the web server, it s somewhere else, doing something else).</p>\n"}, {"tags": ["perl", "assignment-operator"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1503588197, "post_id": 45865373, "comment_id": 78689349, "body": "That&#39;s not fully it. The RV of the <code>finally</code> is ignored. If it fails, the RV of <code>catch</code> is relevant, and it&#39;s empty. No time to write my own answer. You can see by changing to <code>catch { 1 }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503597878, "post_id": 45865373, "comment_id": 78695206, "body": "5.14 fixed <code>if ($@)</code>. That last snippet doesn&#39;t use <code>if ($@)</code>, so it would have worked even before 5.14."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 4, "last_activity_date": 1503589576, "last_edit_date": 1503589576, "creation_date": 1503588024, "answer_id": 45865373, "question_id": 45865324, "link": "https://stackoverflow.com/questions/45865324/why-do-i-get-use-of-uninitialized-value-warnings-even-though-i-return-a-value/45865373#45865373", "title": "Why do I get &#39;use of uninitialized value&#39; warnings even though I return a value from Try::Tiny&#39;s finally block?", "body": "<p>As explained in the <a href=\"https://metacpan.org/pod/Try::Tiny#CAVEATS\" rel=\"nofollow noreferrer\">CAVEATS</a> section of the documentation, the <code>return</code> does not return from the sub, it returns from <code>finally</code>:</p>\n\n<blockquote>\n  <p><code>return</code> returns from the <code>try</code> block, not from the parent <code>sub</code> (note that this is also how <code>eval</code> works, but not how <code>TryCatch</code> works):</p>\n\n<pre><code>sub parent_sub {\n  try {\n    die;\n  }\n  catch {\n    return;\n  };\n  say \"this text WILL be displayed, even though an exception is thrown\";\n}\n</code></pre>\n</blockquote>\n\n<p>As <a href=\"https://stackoverflow.com/questions/45865324/use-of-uninitialized-value-when-returning-from-perl-subroutine/45865373#comment78689349_45865373\">@simbabque notes</a>, the return value of <code>finally</code> is ignored. If the <code>try</code> fails, the return value of <code>catch</code> is relevant, and it's empty:</p>\n\n<blockquote>\n  <p>The return value of the <code>catch</code> block is not ignored, so if testing the result of the expression for truth on success, be sure to return a false value from the <code>catch</code> block: ...</p>\n</blockquote>\n\n<p>The following code looks more logical to me:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse 5.014;\nuse Try::Tiny;\n\nmy $success_count = 0;\n\nfor ( 1..10 ) {\n    $success_count += error_causing_sub();\n}\n\nsay $success_count;\n\nsub error_causing_sub {\n    my $ret;\n    try {\n        die (\"Error.\") if rand(1) &lt; 0.5;\n        say \"Error did not occur.\";\n        $ret = 1;\n    } catch {\n        say \"Error occured.\";\n        $ret = 0;\n    };\n\n    return $ret;\n}\n</code></pre>\n\n<p>In addition, AFAIK, <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5140delta.pod#Exception-Handling\" rel=\"nofollow noreferrer\">the issues with <code>eval</code> that made <code>Try::Tiny</code> relevant were fixed in 5.14</a>. So, you may be better off just using it:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse 5.014;\n\nmy $success_count = 0;\n\n$success_count += error_causing_sub() for 1 .. 10;\n\nsay $success_count;\n\nsub error_causing_sub {\n    my $ret;\n    eval {\n        die (\"Error.\") if rand(1) &lt; 0.5;\n        say \"Error did not occur.\";\n        $ret = 1;\n    } or do {\n        say \"Error occured.\";\n        $ret = 0;\n    };\n\n    return $ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 2678389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b07ba9d827cc3783106c5b0829c03bb?s=128&d=identicon&r=PG", "display_name": "ricoflow", "link": "https://stackoverflow.com/users/2678389/ricoflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 45865373, "answer_count": 1, "score": 2, "last_activity_date": 1503589576, "creation_date": 1503587871, "last_edit_date": 1503589251, "question_id": 45865324, "link": "https://stackoverflow.com/questions/45865324/why-do-i-get-use-of-uninitialized-value-warnings-even-though-i-return-a-value", "title": "Why do I get &#39;use of uninitialized value&#39; warnings even though I return a value from Try::Tiny&#39;s finally block?", "body": "<p>It is unclear to me why the piece of code below gives me the error:</p>\n\n<p><code>Use of uninitialized value in addition (+) at combined_op_test.pl line 12.</code></p>\n\n<p>I expect the value of <code>$success_count</code> to increment by the value returned from the subroutine on each iteration.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/env perl \nuse strict;\nuse warnings;\n\nuse 5.014;\nuse Try::Tiny;\n\nmy $success_count = 0;\n\nfor ( 1..10 ) {\n    $success_count += error_causing_sub();\n}\n\nsub error_causing_sub {\n   try {\n        die (\"Error.\");\n   } catch { \n   } finally {\n        if (@_) { \n            say \"Error occured.\";\n            return 0;\n        }\n        else {\n            say \"Error did not occur.\";\n            return 1;\n        }\n   };\n}\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1503573236, "post_id": 45860060, "comment_id": 78678063, "body": "You cannot rename perl scripts to <code>.exe</code> and expect it to work. What is your motivation for the .exe extension? As for the other question, what does the script do? Why is it important that the input is latex?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1503584882, "post_id": 45860060, "comment_id": 78686849, "body": "May I know whats the error shows ( a full line ) while running the tool."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1503585633, "post_id": 45860060, "comment_id": 78687388, "body": "<code>perl -w perlcode.exe</code> sure not works"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503596844, "post_id": 45860060, "comment_id": 78694669, "body": "<code>perl</code> throws that error when it sees character <code>0x90</code> in the source code or regex pattern where it makes no sense."}], "answers": [{"tags": [], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1503575153, "creation_date": 1503575153, "answer_id": 45860780, "question_id": 45860060, "link": "https://stackoverflow.com/questions/45860060/unrecognized-character-x90-error-in-perlcode-exe/45860780#45860780", "title": "Unrecognized character \\x90 ERROR in perlcode.exe", "body": "<p>To change the perl code to an .exe file, you'll need to compile it. If you are saying that the pl code works allright, but the exe not, maybe that it's the issue.</p>\n\n<p>One of the options is to use pp to do it. You can find it <a href=\"http://search.cpan.org/~autrijus/PAR-0.85_01/script/pp#NAME\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4523597, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LlaLOOtcWOg/AAAAAAAAAAI/AAAAAAAAARg/Zia9-HmC_wo/photo.jpg?sz=128", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/4523597/rajesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1503744059, "creation_date": 1503744059, "answer_id": 45894484, "question_id": 45860060, "link": "https://stackoverflow.com/questions/45860060/unrecognized-character-x90-error-in-perlcode-exe/45894484#45894484", "title": "Unrecognized character \\x90 ERROR in perlcode.exe", "body": "<p>its a typo mistake which has been made in a batch file while calling exe.</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 3251311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ba00bdc131ea07fb8f1b3708edae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "A-Kay", "link": "https://stackoverflow.com/users/3251311/a-kay"}, "is_accepted": false, "score": 1, "last_activity_date": 1542834577, "creation_date": 1542834577, "answer_id": 53420507, "question_id": 45860060, "link": "https://stackoverflow.com/questions/45860060/unrecognized-character-x90-error-in-perlcode-exe/53420507#53420507", "title": "Unrecognized character \\x90 ERROR in perlcode.exe", "body": "<p>I had this problem when I wasn't thinking straight. I had compiled the .pl file with perl2exe but was running the command</p>\n\n<pre><code>perl c:\\tmp\\myexe.exe\n</code></pre>\n\n<p>Obviously you don't need to have perl at the start - just run the exe</p>\n"}], "owner": {"reputation": 1, "user_id": 4523597, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LlaLOOtcWOg/AAAAAAAAAAI/AAAAAAAAARg/Zia9-HmC_wo/photo.jpg?sz=128", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/4523597/rajesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1542834577, "creation_date": 1503572904, "last_edit_date": 1503596646, "question_id": 45860060, "link": "https://stackoverflow.com/questions/45860060/unrecognized-character-x90-error-in-perlcode-exe", "title": "Unrecognized character \\x90 ERROR in perlcode.exe", "body": "<p><code>Unrecognized character \\x90 at line..</code></p>\n\n<p>I am getting above error while executing <code>perlcode.exe</code>, But when it is executed as Perl (i.e <code>perlcode.pl</code>) it works like a charm. And, I am surprised I haven't seen any such error in Google. Any help appreciated. </p>\n\n<p>The input file is a LaTeX file which may or may not have Unicode.</p>\n\n<ol>\n<li><p>Why is <code>.pl</code> working, but <code>.exe</code> is not working?</p></li>\n<li><p>What is meant by the ERROR: <code>Unrecognized character \\x90 at line..</code>?</p></li>\n</ol>\n\n<p>Note that <code>use utf8;</code> is used in the Perl script.</p>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1503569519, "post_id": 45858850, "comment_id": 78675387, "body": "What have you tried? What problems are you having? Please show us your code. If you don&#39;t have any code, Stack Overflow is the wrong place to ask this question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503574586, "post_id": 45858850, "comment_id": 78678991, "body": "How do you know Peter Parker lives in London?"}, {"owner": {"reputation": 3, "user_id": 8510931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2876c8180fc02bff557a76d7c6d71a80?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/8510931/newuser"}, "edited": false, "score": 0, "creation_date": 1503576453, "post_id": 45858850, "comment_id": 78680307, "body": "Apparently, Mr Parker is working as undercover photographer and I&#39;m silly enough to give this information out."}], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 3, "last_activity_date": 1503573902, "creation_date": 1503573902, "answer_id": 45860380, "question_id": 45858850, "link": "https://stackoverflow.com/questions/45858850/change-few-characters-only-in-a-node-value-in-xml-using-perl-script/45860380#45860380", "title": "Change few characters only in a node value in XML using Perl script", "body": "<p>From the documentation of <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Node.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Node</a>:</p>\n\n<blockquote>\n  <p>findnodes evaluates the xpath expression (XPath 1.0) on the current node and returns the resulting node set as an array. In scalar context, returns an XML::LibXML::NodeList object.</p>\n</blockquote>\n\n<p>Your calls are in scalar context because of the <code>$variable = $doc-&gt;findnodes(...)</code>.\nYou have three options:</p>\n\n<ol>\n<li>Use <code>my $el = $doc-&gt;find(...)</code> to return a single node.</li>\n<li>Alternatively, use the syntax <code>my ($el) = $doc-&gt;findnodes(...)</code>. This results in a call in <em>list context</em> and assigns the first element of the returned list to <code>$el</code>.</li>\n<li><p>If there can be more nodes for your XPath expression, you can use a <code>for</code> expression to loop over the result of <code>-&gt;findnodes(...)</code> like so:</p>\n\n<pre><code>for my $el ($doc-&gt;findnodes(...) {\n    print $el-&gt;tostring()\n}\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 8510931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2876c8180fc02bff557a76d7c6d71a80?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/8510931/newuser"}, "is_accepted": false, "score": 0, "last_activity_date": 1503587653, "creation_date": 1503587653, "answer_id": 45865232, "question_id": 45858850, "link": "https://stackoverflow.com/questions/45858850/change-few-characters-only-in-a-node-value-in-xml-using-perl-script/45865232#45865232", "title": "Change few characters only in a node value in XML using Perl script", "body": "<p>Following code finally works for me, however, please comment if you notice anything I can improve.</p>\n\n<pre><code>use strict;\nuse XML::LibXML;\nuse XML::LibXML::NodeList;\nuse XML::LibXML::PrettyPrint;\n\nmy $parser = XML::LibXML-&gt;new;\nmy $doc = $parser-&gt;parse_file(\"StackTest.xml\");\nmy $root = $doc-&gt;getDocumentElement();\n\n#to modify email address\nfor my $email ($doc-&gt;findnodes('//library/email/text()')) {\n    my $text = $email-&gt;getValue;\n    $text =~ s{_}(\\.);   \n    $email-&gt;setData($text);\n}\n\n#to modify email name attribute\nfor my $email_attribute ($doc-&gt;findnodes('//library/email/@name')) {\n    my $email_name_att = $email_attribute-&gt;getValue;\n    $email_name_att =~ s{\\sP}( Parker);\n    $email_attribute-&gt;setValue($email_name_att);\n}\n\n#to add &lt;address tag&gt; with value\nfor my $addresstag ($doc-&gt;findnodes('//library')) {\n    my $address = $doc-&gt;createElement('address');\n    my $street = $doc-&gt;createElement('street');\n    my $city = $doc-&gt;createElement('city');\n    $addresstag-&gt;addChild($address);\n    $address -&gt; addChild($street);\n    $address -&gt; addChild($city);\n    $street -&gt; appendText('Forest Hills');\n    $city -&gt; appendText('New York');\n}\n\n#print($doc-&gt;toString);\nprint XML::LibXML::PrettyPrint\n    -&gt; new ( element =&gt; { compact =&gt; [qw/street/]})\n    -&gt; pretty_print($doc)\n    -&gt; toString;\n</code></pre>\n\n<p>Input XML file:</p>\n\n<pre><code>&lt;library&gt;\n  &lt;email name=\"Peter P\"&gt;Peter_Parker@library.com&lt;/email&gt;\n&lt;/library&gt;\n</code></pre>\n\n<p>Output XML file (manually formatted text here to make it clear):</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;library&gt;\n  &lt;email name=\"Peter Parker\"&gt;Peter.Parker@library.com&lt;/email&gt;\n  &lt;address&gt;\n     &lt;street&gt; Forest Hills &lt;/street&gt;\n     &lt;city&gt; New York &lt;/city&gt;\n   &lt;/address&gt;\n&lt;/library&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8510931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2876c8180fc02bff557a76d7c6d71a80?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/8510931/newuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 45860380, "answer_count": 2, "score": 0, "last_activity_date": 1503587653, "creation_date": 1503569380, "last_edit_date": 1503573088, "question_id": 45858850, "link": "https://stackoverflow.com/questions/45858850/change-few-characters-only-in-a-node-value-in-xml-using-perl-script", "title": "Change few characters only in a node value in XML using Perl script", "body": "<p>Original XML:</p>\n\n<pre><code>&lt;library&gt;\n&lt;email name=\"Peter P\"&gt;Peter_Parker@library.com&lt;/email&gt;\n&lt;/library&gt;\n</code></pre>\n\n<p>Expected Result:</p>\n\n<pre><code>&lt;library&gt;\n&lt;email name=\"Peter Parker\"&gt;Peter.Parker@library.com&lt;/email&gt;\n&lt;address&gt;London&lt;/address&gt;\n&lt;/library&gt;\n</code></pre>\n\n<p>Further XML challenge:</p>\n\n<pre><code>&lt;library&gt;\n&lt;email name=\"Peter Parker\"&gt;Peter.Parker@library.com&lt;/email&gt;\n&lt;address&gt; \n    &lt;housenumber&gt;1&lt;/housenumber&gt;\n    &lt;street&gt;Regent Street&lt;/street&gt;\n    &lt;postcode&gt;AB12YZ&lt;/postcode&gt;\n&lt;/address&gt;\n&lt;/library&gt;\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse XML::LibXML;\nuse XML::LibXML::NodeList;\n\nmy $parser = XML::LibXML-&gt;new;\nmy $doc = $parser-&gt;parse_file(\"StackTest.xml\");\nmy $root = $doc-&gt;getDocumentElement();\n\n#to modify email address\nmy $email = $doc-&gt;findnodes(\"/library/email\");\nmy $text = XML::LibXML::Text-&gt;new('Peter.Parker@library.com');\n$email-&gt;replaceNode($text);\n\n#to modify email name attribute\nmy $email_attribute = $doc-&gt;findnodes(\"/library/email\");\nmy $email_name_att-&gt;setAttribute(q|name|,\"Peter Parker\");\n$email_attribute-&gt;getAttribute(q|name|);\n\n#to add &lt;address tag&gt; with value\nmy $address = $doc-&gt;createElement('address');\n$address-&gt;appendText('London');\n$root-&gt;appendChild($address);\n\nprint($doc-&gt;toString);\n</code></pre>\n\n<p>Error message:</p>\n\n<blockquote>\n  <p>Can't locate object method \"replaceNode\" via package \"XML::LibXML::NodeList\"</p>\n</blockquote>\n\n<p>I'm a beginner and new to Perl script. I'd like to modify the XML file using Perl and XML::LibXML module. I also visited CPAN but it's very difficult to grasp the concept with very little related examples. If you could provide me some hints that would be great to improve my knowledge.</p>\n\n<p>Happy to get any sort of feedback and willing to learn :)</p>\n"}, {"tags": ["arrays", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 1, "creation_date": 1503567943, "post_id": 45858011, "comment_id": 78674215, "body": "What&#39;s the problem? Is it giving the wrong output? It runs without errors for me."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503567997, "post_id": 45858011, "comment_id": 78674245, "body": "You seem to have forgotten to ask a question. What problem are you having?"}, {"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "edited": false, "score": 0, "creation_date": 1503568396, "post_id": 45858011, "comment_id": 78674542, "body": "Yes it compiles but not implemented the 6th element comparison logic yet, it is printing all rows now, not as I require. Any guidance should help."}, {"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "edited": false, "score": 0, "creation_date": 1503572248, "post_id": 45858011, "comment_id": 78677352, "body": "Am I clear with my question and the information?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "edited": false, "score": 0, "creation_date": 1503575650, "post_id": 45860565, "comment_id": 78679738, "body": "Thank you very much, yes the idea you presented here is quite helpful. Now about comparing the 6th row is that if we compare the last two row then 8th column element (964) is bigger than the next row&#39;s 7th column element (714), then in this case it should compare the two 6th column element (135 and 293.9) and print the only the row which is bigger here the row having 293.9 value. So from this two row it should print only last row. I hope I am little clear here"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "edited": false, "score": 1, "creation_date": 1503577535, "post_id": 45860565, "comment_id": 78681197, "body": "@Kanhu that should be easy enough to change. I will leave that to you."}, {"owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "edited": false, "score": 0, "creation_date": 1503578483, "post_id": 45860565, "comment_id": 78681922, "body": "yes, definitely. I just wanted to be clear about my perspective here.. :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "edited": false, "score": 0, "creation_date": 1503585243, "post_id": 45860565, "comment_id": 78687095, "body": "@Kanhu if I got it wrong, you can also propose an edit to the answer, as long as you keep the quality of the code and also alter the text to match. :) You might also want to edit the question again to fix the typos that mislead me."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1503574501, "creation_date": 1503574501, "answer_id": 45860565, "question_id": 45858011, "link": "https://stackoverflow.com/questions/45858011/perl-multidimensional-array-column-compare-and-display-whole-content-with-satisf/45860565#45860565", "title": "Perl Multidimensional array column compare and display whole content with satisfied condition", "body": "<p>The description in your question is not entirely clear, but I'm taking an educated guess.</p>\n\n<p>First, you should not read the whole file into an array. If your file really only has 100 rows, it's not a problem, but if there are more rows this will consume a lot of memory.</p>\n\n<p>You say you want to compare values in every row <em>i</em> to values in row <em>i+1</em>, so essentially in every row you want to look at values in the next row. That means you need to keep a maximum of two rows in memory at one time. Since that's linear, you can just read the first row, then read the second row, compare, and when you're done make the second row the new first row.</p>\n\n<p>In your loop, you always read the second row, and keep around the first row from when you read it as the second row in the iteration before.</p>\n\n<p>For that, it makes sense to turn the reading and splitting into a function. You can pass it a file handle. In my example above, I've used <code>DATA</code> with the <code>__DATA__</code> section, but you can just <code>open my $fh, '&lt;', 'samplecode.txt'</code> and pass <code>$fh</code> around.</p>\n\n<p>Because you want to print the whole row in some cases, you should not just <code>chomp</code> and <code>split</code> it in a destructive manner, but rather keep around the actual full row including the line break. We therefore make the function to read and split return two values: the full row as a scalar string, and an array reference of the cleaned up columns.</p>\n\n<p>If there are no more lines to read, we return an implicit <code>undef</code>, which will make the <code>while</code> loop stop. Therefore you can never process the last row of the file.</p>\n\n<p>When comparing, note that list indexes in Perl always start on zero, so column 7 is index <code>[6]</code>.</p>\n\n<p>Here's an example implementation.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# this function reads a line from the filehandle that's passed in and returns\n# the row as a string and an array ref of all columns, or undef if there are\n# no more lines to read\nsub read_and_split {\n    my $fh = shift;\n\n    # read one line and return undef if there is no more data\n    my $row = &lt;$fh&gt;;\n    return unless defined $row;\n\n    # split into columns\n    my @cols = split /\\s+/, $row;    # Stack Overflow does not like tabs, use \\t\n\n    # only chomp after splitting so we retain the original line for printing\n    chomp $cols[-1];\n\n    # return both things\n    return $row, \\@cols;\n}\n\n# read the first line\nmy ( $row_i, $cols_i ) = read_and_split( \\*DATA );\n\n# read subsequent lines\nwhile ( my ( $row_i_plus_one, $cols_i_plus_one ) = read_and_split( \\*DATA ) ) {\n\n    # 7th col of i is smaller than 6th col of i+1\n    if ( $cols_i-&gt;[7] &lt; $cols_i_plus_one-&gt;[6] ) {\n        print $row_i;\n    }\n    else {\n        # compare the 6th element of both row and only print\n        # if the row if the 6th element is bigger\n        if ( $cols_i-&gt;[5] &gt; $cols_i_plus_one-&gt;[5] ) {\n            print $row_i;\n        }\n    }\n\n    # turn the current i+1 into i for the next iteration\n    $row_i  = $row_i_plus_one;\n    $cols_i = $cols_i_plus_one;\n}\n\n__DATA__\nRecep_L_domain  PF01030.22      112     sp|P00533|EGFR_HUMAN    2.50E-30        104.7   57      167     Receptor\nFurin-like      PF00757.18      149     sp|P00533|EGFR_HUMAN    4.10E-29        101.3   185     338     Furin-like\nRecep_L_domain  PF01030.22      112     sp|P00533|EGFR_HUMAN    3.60E-28        97.8    361     480     Receptor\nGF_recep_IV     PF14843.4       132     sp|P00533|EGFR_HUMAN    1.60E-46        157.2   505     636     Growth\nPkinase PF00069.23      264     sp|P00533|EGFR_HUMAN    2.70E-39        135     712     964     Protein\nPkinase_Tyr     PF07714.15      260     sp|P00533|EGFR_HUMAN    8.40E-88        293.9   714     965     Protein\n</code></pre>\n\n<p>It outputs these lines:</p>\n\n<pre><code>Recep_L_domain  PF01030.22      112     sp|P00533|EGFR_HUMAN    2.50E-30        104.7   57      167     Receptor\nFurin-like      PF00757.18      149     sp|P00533|EGFR_HUMAN    4.10E-29        101.3   185     338     Furin-like\nRecep_L_domain  PF01030.22      112     sp|P00533|EGFR_HUMAN    3.60E-28        97.8    361     480     Receptor\nGF_recep_IV     PF14843.4       132     sp|P00533|EGFR_HUMAN    1.60E-46        157.2   505     636     Growth\n</code></pre>\n\n<p>Note that the part about comparing columns six was not very clear in your question. I assumed we compare both columns six and print the one for row <em>i</em> if it's a match. If we were to print row <em>i+1</em> we might end up printing that line twice.</p>\n"}], "owner": {"reputation": 39, "user_id": 2328524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wmq7Q.jpg?s=128&g=1", "display_name": "Kanhu", "link": "https://stackoverflow.com/users/2328524/kanhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503574501, "creation_date": 1503567262, "last_edit_date": 1503568782, "question_id": 45858011, "link": "https://stackoverflow.com/questions/45858011/perl-multidimensional-array-column-compare-and-display-whole-content-with-satisf", "title": "Perl Multidimensional array column compare and display whole content with satisfied condition", "body": "<p>I am facing little issue in taking array index for comparison and displaying the result. I have a tab delimited file with 9 columns and more than 100 rows. I want to compare the 8th column element of ith row with the 7th column element of i+1th row. If it is smaller than the 7th column element then print entire row else if it is greater than the 7th column element the compare the 6th element of both row and only print if the row if the 6th element is bigger.</p>\n\n<p>Sample File</p>\n\n<pre><code>Recep_L_domain  PF01030.22      112     sp|P00533|EGFR_HUMAN    2.50E-30        104.7   57      167     Receptor\nFurin-like      PF00757.18      149     sp|P00533|EGFR_HUMAN    4.10E-29        101.3   185     338     Furin-like\nRecep_L_domain  PF01030.22      112     sp|P00533|EGFR_HUMAN    3.60E-28        97.8    361     480     Receptor\nGF_recep_IV     PF14843.4       132     sp|P00533|EGFR_HUMAN    1.60E-46        157.2   505     636     Growth\nPkinase PF00069.23      264     sp|P00533|EGFR_HUMAN    2.70E-39        135     712     964     Protein\nPkinase_Tyr     PF07714.15      260     sp|P00533|EGFR_HUMAN    8.40E-88        293.9   714     965     Protein\n</code></pre>\n\n<p>For example if we compare the last two row then 8th column element is bigger than the next row's 7th column element, then in this case it should compare the two 6th column element and print the only row which is bigger. So from this two row it should print only last row. For me the below code is only printing the values if it is smaller, but I want to ask how can I compare 6th element and print results if 8th column is bigger?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nopen(IN,\"&lt;samplecode.txt\");\n\nmy @Alifrom;\nmy @Alito;\nmy @data; ## multidimensional array\n\nwhile(&lt;IN&gt;){\n    chomp $_;\n    #next if $_=undef;\n    my @line = split(\"\\t\", $_);\n    ##my($a, $b, $c, $d, $e, $f, $g, $h, $i) = split(/\\t/,$_); // catch data and storing into multiple scalar variable\n\n    push @data, [@line];\n}\n\nfor (my $i = 0; $i &lt; @data ; $i++){\n\n    if ($data[$i][7] gt $data[$i][6]){\n\n        for (my $j = 0; $j &lt; @{$data[$i]}; $j++){\n            #@Alifrom = map $data[$i][$j+6], @data;\n            print \"$data[$i][$j]\\t\";\n        }\n    }\n    #else\n    print \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["r", "perl", "knitr", "r-markdown", "raku"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2410502"}, "reply_to_user": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 0, "creation_date": 1503596365, "post_id": 45864801, "comment_id": 78694403, "body": "Any time! Don&#39;t forget to mention your tutorials on our IRC support channel so more people know about them :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2410502"}, "is_accepted": true, "score": 13, "last_activity_date": 1503586498, "creation_date": 1503586498, "answer_id": 45864801, "question_id": 45857934, "link": "https://stackoverflow.com/questions/45857934/executing-perl-6-code-in-rmarkdown/45864801#45864801", "title": "Executing Perl 6 code in Rmarkdown", "body": "<p>Not my area of expertise, but with a <a href=\"https://www.r-bloggers.com/running-go-language-chunks-in-r-markdown-rmd-files/\" rel=\"noreferrer\">help of a blog</a> I managed to get it to produce output.</p>\n\n<p>First, look in RStudio's <code>R Markdown</code> tab. It shows you a warning that explains why your version isn't rendering anything:</p>\n\n<pre><code>Warning message:\nIn get_engine(options$engine) :\n  Unknown language engine 'perl6' (must be registered via knit_engines$set()).\n</code></pre>\n\n<p>So with that in mind, we can look up how to register an engine and do so:</p>\n\n<pre><code>```{r setup, echo=FALSE}\nlibrary(knitr)\neng_perl6 &lt;- function(options) {\n  # create a temporary file\n  f &lt;- basename(tempfile(\"perl6\", '.', paste('.', \"perl6\", sep = '')))\n  on.exit(unlink(f)) # cleanup temp file on function exit\n  writeLines(options$code, f)\n  out &lt;- ''\n\n  # if eval != FALSE compile/run the code, preserving output\n  if (options$eval) {\n    out &lt;- system(sprintf('perl6 %s', paste(f, options$engine.opts)), intern=TRUE)\n  }\n\n  # spit back stuff to the user\n  engine_output(options, options$code, out)\n}\n\nknitr::knit_engines$set(perl6=eng_perl6)\n```\n\n```{r, engine='perl6'}\nmy $s= \"knitr is really good\";\nsay $s;\n```\n</code></pre>\n\n<p>The engine is registered with a function that first saves the code to run to a temporary file and then executes the Rakudo compiler, asking it to compile that file.</p>\n\n<p>After collecting the needed output, the function deletes the temporary file and gives us the output for rendering.</p>\n"}, {"comments": [{"owner": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 1, "creation_date": 1503650380, "post_id": 45869682, "comment_id": 78713379, "body": "I tried your first help. Its not working. This is the error I get : <code>running: C:\\rakudo\\bin\\perl6.exe  -e &quot;my $s= \\&quot;knitr is really good\\&quot;; say $s;&quot; Quitting from lines 7-9 (ds.Rmd)  Error in system2(cmd, code, stdout = TRUE, stderr = TRUE, env = options$engine.env) :    &#39;&quot;C:\\rakudo\\bin\\perl6.exe&quot;&#39; not found Calls: &lt;Anonymous&gt; ... tryCatch -&gt; tryCatchList -&gt; tryCatchOne -&gt; &lt;Anonymous&gt; Execution halted </code>. Even second solution is not working. What could have gone wrong?"}, {"owner": {"reputation": 22308, "user_id": 559676, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd6964ed425d626628bd057abbe6a85b?s=128&d=identicon&r=PG", "display_name": "Yihui Xie", "link": "https://stackoverflow.com/users/559676/yihui-xie"}, "reply_to_user": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 0, "creation_date": 1503671650, "post_id": 45869682, "comment_id": 78726234, "body": "If your perl6.exe is in your <code>PATH</code> variable, just set <code>engine.path=&quot;perl6&quot;</code>; otherwise you need the actual path to perl6.exe, which you didn&#39;t say and I just inferred from your example."}, {"owner": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 0, "creation_date": 1503675114, "post_id": 45869682, "comment_id": 78728431, "body": "Setting the <code>PATH</code> as <code>engine.path=&quot;perl6&quot;</code> is still not giving the output, though it doesn&#39;t throw error. A little in depth look shows that there is <code>perl6.bat</code> in the Perl 6 <code>bin</code> folder. So is this <code>.bat</code> instead of <code>.exe</code> file the problem?"}, {"owner": {"reputation": 22308, "user_id": 559676, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd6964ed425d626628bd057abbe6a85b?s=128&d=identicon&r=PG", "display_name": "Yihui Xie", "link": "https://stackoverflow.com/users/559676/yihui-xie"}, "reply_to_user": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 0, "creation_date": 1503675321, "post_id": 45869682, "comment_id": 78728549, "body": "Probably not. <code>perl6.bat</code> should be fine. Can you check the output of <code>Sys.which(&#39;perl6&#39;)</code> and <code>Sys.getenv(&#39;PATH&#39;)</code>?"}, {"owner": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 0, "creation_date": 1503676074, "post_id": 45869682, "comment_id": 78728983, "body": "<code>Sys.which(&#39;perl6&#39;)</code> gives <code>&quot;C:\\\\rakudo\\\\bin\\\\perl6.bat&quot; </code> and <code>Sys.getenv(&#39;PATH&#39;)</code> gives <code>&quot;C:\\\\Program Files\\\\R\\\\R-3.4.1patched\\\\bin\\\\x64;c:\\\\Rtools\\\\bin;c:\\\\Rtool&zwnj;&#8203;s\\\\mingw_32\\\\bin;C:\\&zwnj;&#8203;\\WINDOWS\\\\system32;C&zwnj;&#8203;:\\\\WINDOWS\\\\System32&zwnj;&#8203;\\\\WindowsPowerShell\\&zwnj;&#8203;\\v1.0\\\\;C:\\\\curl\\\\bi&zwnj;&#8203;n;C:\\\\wget;C:\\\\Straw&zwnj;&#8203;berry Perl\\\\perl\\\\bin;C:\\\\Program Files\\\\R\\\\R-3.4.1patched\\\\bin\\\\x64;C:\\\\Program Files\\\\Git\\\\cmd;C:\\\\texlive\\\\2017\\\\bin\\\\win32;C:\\\\Miniconda3&zwnj;&#8203;\\\\Scripts;C:\\\\Minico&zwnj;&#8203;nda3;C:\\\\rakudo\\\\bin&zwnj;&#8203;;C:\\\\rakudo\\\\share\\\\&zwnj;&#8203;perl6\\\\site\\\\bin;C:\\&zwnj;&#8203;\\Program Files\\\\Docker Toolbox&quot;</code> as outputs. I am still wondering !!"}, {"owner": {"reputation": 22308, "user_id": 559676, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd6964ed425d626628bd057abbe6a85b?s=128&d=identicon&r=PG", "display_name": "Yihui Xie", "link": "https://stackoverflow.com/users/559676/yihui-xie"}, "reply_to_user": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 0, "creation_date": 1503676079, "post_id": 45869682, "comment_id": 78728989, "body": "Perhaps <code>perl6</code> does not support the argument <code>-e</code>."}, {"owner": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 1, "creation_date": 1503677812, "post_id": 45869682, "comment_id": 78730090, "body": "Perl 6 does support <code>-e</code> argument. What I found out is Perl 6 works with double quotes but not single quotes in Windows OS which I am running. So <code>perl6 -e &quot;say &#39;Hello&#39; &quot;</code> works in Windows but <code>perl6 -e &#39;say &quot;Hello&quot; &#39;</code> won&#39;t."}, {"owner": {"reputation": 22308, "user_id": 559676, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd6964ed425d626628bd057abbe6a85b?s=128&d=identicon&r=PG", "display_name": "Yihui Xie", "link": "https://stackoverflow.com/users/559676/yihui-xie"}, "reply_to_user": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "edited": false, "score": 1, "creation_date": 1503722657, "post_id": 45869682, "comment_id": 78743131, "body": "The code should be quoted in double quotes on Windows (see <code>shQuote</code>). I have run out of ideas. If you want to debug this issue by yourself, you may take a look at the function <code>eng_interpreted</code> in <a href=\"https://github.com/yihui/knitr/blob/master/R/engine.R\" rel=\"nofollow noreferrer\">github.com/yihui/knitr/blob/master/R/engine.R</a>"}], "tags": [], "owner": {"reputation": 22308, "user_id": 559676, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd6964ed425d626628bd057abbe6a85b?s=128&d=identicon&r=PG", "display_name": "Yihui Xie", "link": "https://stackoverflow.com/users/559676/yihui-xie"}, "is_accepted": false, "score": 3, "last_activity_date": 1503603665, "creation_date": 1503603665, "answer_id": 45869682, "question_id": 45857934, "link": "https://stackoverflow.com/questions/45857934/executing-perl-6-code-in-rmarkdown/45869682#45869682", "title": "Executing Perl 6 code in Rmarkdown", "body": "<p>You had two problems in your example. First, I think you can still use the existing <code>perl</code> engine (<code>perl6</code> is not a valid engine name). Second, the <a href=\"https://yihui.name/knitr/options/#language-engines\" rel=\"nofollow noreferrer\"><code>engine.path</code> option</a> should point to the path of the executable instead of the directory name, e.g.</p>\n\n<pre><code>---\ntitle: \"Example\"\noutput: html_document\n---\n\n```{perl, engine.path='C:\\\\rakudo\\\\bin\\\\perl6.exe'}\nmy $s= \"knitr is really good\";\nsay $s;\n```\n</code></pre>\n\n<p>You can also set the engine path globally for the <code>perl</code> engine:</p>\n\n<pre><code>```{r, setup, include=FALSE}\nknitr::opts_chunk$set(engine.path = list(\n  perl = 'C:\\\\rakudo\\\\bin\\\\perl6.exe'\n))\n```\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 608, "user_id": 581475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d932dd6d4e96abedb1ac2474ad066de?s=128&d=identicon&r=PG", "display_name": "Coke", "link": "https://stackoverflow.com/users/581475/coke"}, "is_accepted": false, "score": 1, "last_activity_date": 1503677088, "creation_date": 1503677088, "answer_id": 45885415, "question_id": 45857934, "link": "https://stackoverflow.com/questions/45857934/executing-perl-6-code-in-rmarkdown/45885415#45885415", "title": "Executing Perl 6 code in Rmarkdown", "body": "<p>From the command prompt on windows, this works:</p>\n\n<pre><code>perl6 -e \"say 'hello'\"\n</code></pre>\n\n<p>but this fails:</p>\n\n<pre><code>perl6 -e 'say \"hello\"'\n</code></pre>\n\n<p>You have to use double quotes to quote arguments in the command prompt.</p>\n"}], "owner": {"reputation": 2063, "user_id": 2774153, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/RpYQx.jpg?s=128&g=1", "display_name": "Suman Khanal", "link": "https://stackoverflow.com/users/2774153/suman-khanal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 2, "accepted_answer_id": 45864801, "answer_count": 3, "score": 12, "last_activity_date": 1503677088, "creation_date": 1503567046, "last_edit_date": 1503592856, "question_id": 45857934, "link": "https://stackoverflow.com/questions/45857934/executing-perl-6-code-in-rmarkdown", "title": "Executing Perl 6 code in Rmarkdown", "body": "<p>I want to write some tutorials on Perl 6. For this I believe Rmarkdown would be of great help. </p>\n\n<p>So I am trying to execute <code>Perl 6</code> code within Rmarkdown document.</p>\n\n<p>My Perl 6 executable is in <code>C:\\rakudo\\bin</code>.\nSo my <code>.Rmd</code> file with example code to accomplish this is as follow:</p>\n\n<pre><code>---\ntitle: \"Example\"\noutput: html_document\n---\n\n```{r, engine='perl6', engine.path='C:\\\\rakudo\\\\bin'}\nmy $s= \"knitr is really good\";\nsay $s;\n```\n</code></pre>\n\n<p>However knitting the above document in Rstudio shows the following without Perl 6 output.\n<a href=\"https://i.stack.imgur.com/s0Dqv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/s0Dqv.png\" alt=\"enter image description here\"></a> </p>\n\n<p>Any help where I am missing?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1503565002, "post_id": 45856943, "comment_id": 78672114, "body": "Actually, subs cannot start with numbers."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8510441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e55455ae7185b25bc7b86455a1549b2?s=128&d=identicon&r=PG&f=1", "display_name": "Ju-Yeol Jung", "link": "https://stackoverflow.com/users/8510441/ju-yeol-jung"}, "edited": false, "score": 0, "creation_date": 1503566684, "post_id": 45857167, "comment_id": 78673341, "body": "Oh, sorry. The last out_log was for checking $cmd&#39;s value. This form was abbrivated script of total long script for my question. Thank you very much!!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1503566107, "last_edit_date": 1503566107, "creation_date": 1503564887, "answer_id": 45857167, "question_id": 45856943, "link": "https://stackoverflow.com/questions/45856943/variable-was-returned-to-previous-value-in-perl/45857167#45857167", "title": "Variable was returned to previous value in Perl", "body": "<p>You are mixing <em>lexical</em> and <em>package</em> variables. If your program had <code>use strict</code> and <code>use warnings</code>, this would be quite obvious.</p>\n\n<p>If you do not declare a variable with <a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\"><code>my</code></a>, Perl will assume it's a package variable. It will be visible from every part of your program (in the same namespace).</p>\n\n<p>If you declare the variable with <code>my</code>, it will be <em>lexical</em>. That means that it only exists inside the <em>scope</em> it was created in.</p>\n\n<pre><code>my $foo = 1;         #\n                     #\nif ($foo) {       #  #\n    my $bar = 2;  #  #\n}                 #  # \n                  ^  ^\n                  |  | scope that $foo exists in\n                  | scope that $bar exists in\n</code></pre>\n\n<p>The same thing is happening here.</p>\n\n<p>You are setting the package variable <code>$::cmd</code> (with <code>::</code> being the <code>main</code> namespace) to <code>\"cat asdf\"</code> inside the <code>1st</code> sub. You then call the <code>2nd</code> sub, which will go into the <code>else</code> branch. In that scope, it will create a new lexical <code>$cmd</code>. It's only valid in that part of the program. It is then passed to <code>out_log()</code>, which probably prints it. Afterwards, you pass <code>$::cmd</code> with the <code>\"cat asdf\"</code> value to <code>out_log()</code>. At that point the new <code>$cmd</code> does not exist any more.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Up3s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Up3s.png\" alt=\"code with freehand lines\"></a></p>\n\n<p>If you had <code>use strict</code> in your program, the program would not work at all, because the default package variable behavior is turned off in that case, so you have to define variables.</p>\n\n<p>In fact you should not operate with package variables at all, but instead pass <em>arguments</em> to your functions.</p>\n\n<p>In addition to that, there are a few other things that are not good practice in your program. You should use 3-argument <code>open</code> and a lexical filehandle, and also check the return value of <code>open</code>.</p>\n\n<p>Names of functions cannot start with numbers, so <code>1st</code> and <code>2nd</code> are not valid names. It's better to name things after what they do or represent. That makes it easier to read your program later.</p>\n\n<p>A full program might look like that.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ($code, $reg, $annotation); # these values come from somewhere...\n\nrun_cmd( compose_cmd(), $code, $reg, $annotation );\n\nsub compose_cmd {\n    return \"cat asdf\";\n}\n\nsub run_cmd {\n    my ( $cmd, $code, $reg, $annotation ) = @_;\n\n    if ( $code =~ /aa/ ) {\n        my $cmd = \"$reg $annotation\";\n        out_log($cmd);\n    }\n    else {\n        my $cmd = \"$reg $annotation\";\n        out_log($cmd);\n    }\n    out_log(\"$cmd\");\n    open my $fh, '&lt;', $cmd or die $!;\n\n    # do stuff with $fh ...\n}\n\nsub out_log {\n    print @_;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8510441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e55455ae7185b25bc7b86455a1549b2?s=128&d=identicon&r=PG&f=1", "display_name": "Ju-Yeol Jung", "link": "https://stackoverflow.com/users/8510441/ju-yeol-jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 45857167, "answer_count": 1, "score": -1, "last_activity_date": 1503566107, "creation_date": 1503564283, "question_id": 45856943, "link": "https://stackoverflow.com/questions/45856943/variable-was-returned-to-previous-value-in-perl", "title": "Variable was returned to previous value in Perl", "body": "<p>I'm just one-month experience in perl.\nFor perl-based program executing problem, the commend variable was returned to previous value.\nWhat is the problem?\nHere is the code.</p>\n\n<pre><code>1st();\n2nd();\nsub 1st {\n        $cmd = \"cat asdf\";\n}\nsub 2nd {\n   if ( $code =~ /aa/ ) {\n            my $cmd = \"$reg $annotation\";\n            out_log($cmd);\n    } else {\n            my $cmd = \"$reg $annotation\";\n            out_log($cmd);\n    }\n    out_log(\"$cmd\");\n    open (Work,$cmd);\n}\n</code></pre>\n\n<p>In this state, the $cmd was registered in if statement, but executing $cmd after if statement, the $cmd value was returned subroutine 1st's value.\nThanks for your advices.</p>\n"}, {"tags": ["perl", "encoding", "character-encoding"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1503558727, "post_id": 45854747, "comment_id": 78667999, "body": "You don&#39;t show how you open and read data from the specific file. But, in case you read from STDIN you explicitly set in the first line of the code you show that you expect the data to be UTF8 encoded - in which case it of course fails if the data are not UTF8 encoded."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1503559262, "post_id": 45854747, "comment_id": 78668414, "body": "I am sure promise not clear with you"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503560204, "post_id": 45854747, "comment_id": 78669061, "body": "Tip: The name of the well-used encoding is &quot;UTF-8&quot;. &quot;UTF8&quot; is something else you don&#39;t want."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1503572245, "post_id": 45854747, "comment_id": 78677351, "body": "Somebody is roaming for giving downvote without reason"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1503570881, "post_id": 45855521, "comment_id": 78676367, "body": "how can I find ascii and convert to Unicode entities"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1503570928, "post_id": 45855521, "comment_id": 78676401, "body": "<code>while($tmp=~m&#47;[^[:ascii:]]&#47;sg) {  print &quot;: $&amp;\\n&quot;;  }</code> not found non-ascii characters."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1503584732, "post_id": 45855521, "comment_id": 78686733, "body": "Could you please help on this one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1503591092, "post_id": 45855521, "comment_id": 78691301, "body": "Re &quot;<i>how can I find ascii and convert to Unicode entities</i>&quot;, I have no idea what you mean by that"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1503591171, "post_id": 45855521, "comment_id": 78691348, "body": "Re &quot;<i>not found non-ascii characters</i>&quot;, so? Is this new highly incomplete question? The comments are not for that"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1503559982, "creation_date": 1503559982, "answer_id": 45855521, "question_id": 45854747, "link": "https://stackoverflow.com/questions/45854747/perl-doesnt-recognise-the-non-ascii-character/45855521#45855521", "title": "Perl doesn&#39;t recognise the non-ascii character", "body": "<p>If it's not UTF-8, of course it won't work if you tell Perl it's UTF-8!</p>\n\n<p>The \"ANSI\" encoding of your machine can be obtained by prepending <code>cp</code> to the number returned by <code>Win32::GetACP()</code>.</p>\n\n<pre><code>use Win32 qw( );\nmy $ansi_enc = \"cp\".Win32::GetACP();\nopen(my $fh, \"&lt;:encoding($ansi_enc)\", $qfn)  # File encoded using machine's ANSI encoding.\n</code></pre>\n\n<p>as opposed to</p>\n\n<pre><code>open(my $fh, \"&lt;:encoding(UTF-8)\", $qfn)  # File encoded using UTF-8.\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 45855521, "answer_count": 1, "score": -1, "last_activity_date": 1503585554, "creation_date": 1503557344, "last_edit_date": 1503585554, "question_id": 45854747, "link": "https://stackoverflow.com/questions/45854747/perl-doesnt-recognise-the-non-ascii-character", "title": "Perl doesn&#39;t recognise the non-ascii character", "body": "<p>I have <code>*TXT</code> file with Non-ASCII characters for e.g.<code>\u00e9 \u00ea \u00f9</code>. However <code>*TXT</code> file mode is in <code>ANSI</code> (Default mode).</p>\n\n<p>I am using in Perl <code>utf8</code> for reading the Non-ASCII characters and converting into <code>hexadecimal entities</code>.</p>\n\n<p>The problem is if the <code>*TXT</code> file having <code>ANSI</code> mode then the Perl doesn't work, however the <code>*TXT</code> mode is in <code>utf8</code> then the script is working without problem.</p>\n\n<p>Perl:</p>\n\n<pre><code>use open ':encoding(utf8)';\nbinmode STDOUT, ':utf8';\n\n...\n\n\n#assume $amatch contains non-ascii characters \n$amatch = ord($amatch);\n$amatch = sprintf(\"&amp;#x%x;\", $amatch);\n</code></pre>\n\n<p>Do anyone have solution for this?</p>\n"}, {"tags": ["perl", "amazon-web-services"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6857652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f758b4124a01443f8f785f762862d5fe?s=128&d=identicon&r=PG&f=1", "display_name": "prathap", "link": "https://stackoverflow.com/users/6857652/prathap"}, "edited": false, "score": 0, "creation_date": 1503579009, "post_id": 45855467, "comment_id": 78682329, "body": "Thanks for the reply. After getting EC2 , can you please tell how to proceed in some detailed manner?"}, {"owner": {"reputation": 9517, "user_id": 1312478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e37d8d8767c5959d22eb4bdfd7d1a8df?s=128&d=identicon&r=PG", "display_name": "Deepak Singhal", "link": "https://stackoverflow.com/users/1312478/deepak-singhal"}, "reply_to_user": {"reputation": 3, "user_id": 6857652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f758b4124a01443f8f785f762862d5fe?s=128&d=identicon&r=PG&f=1", "display_name": "prathap", "link": "https://stackoverflow.com/users/6857652/prathap"}, "edited": false, "score": 0, "creation_date": 1503579370, "post_id": 45855467, "comment_id": 78682614, "body": "ssh to that machine using the key ; and copy your perl script there.. and run it"}], "tags": [], "owner": {"reputation": 9517, "user_id": 1312478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e37d8d8767c5959d22eb4bdfd7d1a8df?s=128&d=identicon&r=PG", "display_name": "Deepak Singhal", "link": "https://stackoverflow.com/users/1312478/deepak-singhal"}, "is_accepted": false, "score": 0, "last_activity_date": 1503559781, "creation_date": 1503559781, "answer_id": 45855467, "question_id": 45854343, "link": "https://stackoverflow.com/questions/45854343/procedure-to-run-perl-scripts-on-amazon-web-services/45855467#45855467", "title": "procedure to run perl scripts on Amazon Web Services", "body": "<p>Get an EC2 (unix server) on AWS under \"Free tier\". </p>\n\n<p>copy your perl scripts on that server and you are good to go.</p>\n"}], "owner": {"reputation": 3, "user_id": 6857652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f758b4124a01443f8f785f762862d5fe?s=128&d=identicon&r=PG&f=1", "display_name": "prathap", "link": "https://stackoverflow.com/users/6857652/prathap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503559781, "creation_date": 1503555789, "question_id": 45854343, "link": "https://stackoverflow.com/questions/45854343/procedure-to-run-perl-scripts-on-amazon-web-services", "title": "procedure to run perl scripts on Amazon Web Services", "body": "<p>I am newbie to AWS. I have perl scripts currently which are running in UNIX server. But due to some server issues we just wanted to run these scripts in AWS. Can anybody tell the procedure to run the scripts in AWS.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": true, "score": 2, "last_activity_date": 1503555863, "creation_date": 1503555863, "answer_id": 45854363, "question_id": 45854245, "link": "https://stackoverflow.com/questions/45854245/capture-sub-directories-from-path/45854363#45854363", "title": "Capture sub-directories from path", "body": "<p>Just use greedy matching (<code>.*</code>):</p>\n\n<pre><code>my $path= \"/tmp/main/store/important/file/log\";\nmy ($tail) = $path =~ m!(/file/.*)!;\nprint $tail;  # /file/log\n</code></pre>\n\n<p>Here I also use a custom delimiter for the <code>m//</code> operator to avoid escaping slashes.</p>\n"}], "owner": {"reputation": 7, "user_id": 8443244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c03c0574e8246c752956c718c7f4c0cb?s=128&d=identicon&r=PG&f=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/8443244/joey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 45854363, "answer_count": 1, "score": 0, "last_activity_date": 1503556078, "creation_date": 1503555421, "last_edit_date": 1503556078, "question_id": 45854245, "link": "https://stackoverflow.com/questions/45854245/capture-sub-directories-from-path", "title": "Capture sub-directories from path", "body": "<pre><code>my $path= \"/tmp/main/store/important/file/log\"; ##string\n\n$path =~ m/file/;\n\nprint \"$&amp;/$'\\n\";\n</code></pre>\n\n<p>I want to capture <code>file/log/.*/.*/ .. . . ..</code></p>\n\n<p>And the path may vary, any other way to solve this?</p>\n\n<p>Thanks guys</p>\n"}, {"tags": ["perl", "oop", "moo"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1503562622, "post_id": 45852844, "comment_id": 78670660, "body": "That&#39;s a lot of code without any explanation. While it&#39;s nice of you to share your solution, it would greatly benefit from additional text explaining what&#39;s going on, why this is working, and what the output is."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1503646310, "post_id": 45852844, "comment_id": 78711129, "body": "For what it&#39;s worth, I&#39;ve not cast a vote at all. I think your answer is not bad, it&#39;s just not very useful as it stands."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1504193601, "post_id": 45852844, "comment_id": 78930256, "body": "Fair enough, that&#39;s actually helpful. More explanation on the way!"}], "tags": [], "owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "is_accepted": false, "score": 1, "last_activity_date": 1504680194, "last_edit_date": 1504680194, "creation_date": 1503548074, "answer_id": 45852844, "question_id": 45852843, "link": "https://stackoverflow.com/questions/45852843/how-can-i-implement-thunks-delayed-computation-in-a-general-way-using-moo-an/45852844#45852844", "title": "How can I implement &quot;thunks&quot; (delayed computation) in a general way using Moo and Type::Tiny?", "body": "<p>Two issues need to be dealt with here: a parameterised <code>Type::Tiny</code> type constraint for a delayed-computation immutable attribute (DCIA), and an actually-functioning DCIA.</p>\n\n<h1>Parameterised type</h1>\n\n<p>Since this is Perl, there is more than one way to do this. The heart of making a parameterised type in <code>Type::Tiny</code> is to provide a <code>constraint_generator</code> parameter. The most idiomatic way to do this, using only <code>Type::Tiny</code> components, is:</p>\n\n<pre><code>package Types::Thunking;\nuse Types::TypeTiny -all;\nuse Type::Library -base;\nuse Type::Utils -all;\ndeclare \"Thunk\", constraint_generator =&gt; sub { union [ CodeLike, @_ ] };\n</code></pre>\n\n<p>That's it! If no parameters are given, it works just like a <code>CodeLike</code>. The libraries can take care of any \"inline\" code generating.</p>\n\n<p>The reason it can be so short is that the <code>constraint_generator</code> must return <em>either</em> a code-ref, which would probably be a closure that captures the parameters passed to it (see below), <em>or</em> simply a <code>Type::Tiny</code> - in which case the <a href=\"https://metacpan.org/pod/Type::Tiny#Attributes-related-to-parameterizable-and-parameterized-types\" rel=\"nofollow noreferrer\">other parameterisability parameters</a> are not needed. Since <code>union</code> (which looks like it's normally intended for producing arguments to a <code>declare</code>) returns a suitably-constructed <code>Type::Tiny::Union</code>, it just drops in perfectly.</p>\n\n<p>A more spelled-out version, not using a union type (and for brevity, using <code>CodeRef</code> not <code>CodeLike</code>:</p>\n\n<pre><code>package Types::Thunking;\nuse Types::Standard -all;\nuse Type::Library -base;\nuse Type::Utils -all;\ndeclare \"Thunk\",\n  constraint_generator =&gt; sub {\n    my ($param) = @_;\n    die \"parameter must be a type\" if grep !UNIVERSAL::isa($_, 'Type::Tiny'), @_;\n    return sub { is_CodeRef($_) or $param-&gt;check($_) };\n  },\n  inline_generator =&gt; sub {\n    my ($param) = @_;\n    die \"parameter must be a type\" if grep !UNIVERSAL::isa($_, 'Type::Tiny'), @_;\n    return sub {\n      my ($constraint, $varname) = @_;\n      return sprintf(\n        'Types::Standard::is_CodeRef(%s) or %s',\n        $varname,\n        $param-&gt;inline_check($varname),\n      );\n    };\n  };\n</code></pre>\n\n<p>This is the \"harness\" I used for testing these:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Thunking;\nsub do_test {\n  use Data::Dumper; local $Data::Dumper::Terse = 1; local $Data::Dumper::Indent = 0;\n  my ($args, $should_work) = @_;\n  my $l = eval { Thunking-&gt;new(@$args) };\n  if (!$l) {\n    say \"correctly did not work\" and return if !$should_work;\n    say \"INcorrectly did not work\" and return if $should_work;\n  }\n  my $val = eval { $l-&gt;attr };\n  if (!$val) {\n    say \"correctly did not work\" and return if !$should_work;\n    say \"INcorrectly did not work\" and return if $should_work;\n  }\n  say(($should_work ? \"\" : \"INcorrectly worked: \"), Dumper $val);\n}\ndo_test [attr =&gt; { k =&gt; \"wrong type\" }], 0;\ndo_test [attr =&gt; [\"real value at init\"]], 1;\ndo_test [attr =&gt; sub { [ \"delayed\" ] }], 1;\ndo_test [attr =&gt; sub { { k =&gt; \"delayed wrong type\" } }], 0;\n</code></pre>\n\n<h1>Delayed-computation immutable attribute</h1>\n\n<p>In order to make this immutable, we want setting the attribute to fail unless it's us doing it. When reading the attribute, we want to see whether there is computation to be done; if yes, do it; then return the value.</p>\n\n<h2>Naive approach</h2>\n\n<pre><code>package Thunking;\nuse Moo;\nuse Types::Standard -all;\nuse Types::Thunking -all;\nhas attr  =&gt; (\n  is =&gt; 'rwp',\n  isa =&gt; Thunk[ArrayRef],\n  required =&gt; 1,\n);\nbefore 'attr' =&gt; sub {\n  my $self = shift;\n  return if @_; # attempt at setting, hand to auto\n  my $value = $self-&gt;{attr};\n  return if ref($value) ne 'CODE'; # attempt at reading and already resolved\n  $self-&gt;_set_attr($value-&gt;());\n}\n</code></pre>\n\n<p>The <code>before</code> should be fairly self-explanatory but you will see it manually looks in the object's hash-ref, which is usually a clue that your programming is not finished yet. Also, it's <code>rwp</code> and requires the <code>before</code> in the class, which is far from pretty.</p>\n\n<h2>Using <code>MooX</code> modules</h2>\n\n<p>An approach that tries to generalise this with a separate module, <code>MooX::Thunking</code>. First, another module to encapsulate overriding of <code>Moo</code> functions:</p>\n\n<pre><code>package MooX::Utils;\nuse strict;\nuse warnings;\nuse Moo ();\nuse Moo::Role ();\nuse Carp qw(croak);\nuse base qw(Exporter);\nour @EXPORT = qw(override_function);\nsub override_function {\n  my ($target, $name, $func) = @_;\n  my $orig = $target-&gt;can($name) or croak \"Override '$target\\::$name': not found\";\n  my $install_tracked = Moo::Role-&gt;is_role($target) ? \\&amp;Moo::Role::_install_tracked : \\&amp;Moo::_install_tracked;\n  $install_tracked-&gt;($target, $name, sub { $func-&gt;($orig, @_) });\n}\n</code></pre>\n\n<p>Now the thunking <code>MooX</code> module itself, which uses the above to override <code>has</code>:</p>\n\n<pre><code>package MooX::Thunking;\nuse MooX::Utils;\nuse Types::TypeTiny -all;\nuse Class::Method::Modifiers qw(install_modifier);\nsub import {\n  my $target = scalar caller;\n  override_function($target, 'has', sub {\n    my ($orig, $name, %opts) = @_;\n    $orig-&gt;($name, %opts), return if $opts{is} ne 'thunked';\n    $opts{is} = 'ro';\n    $orig-&gt;($name, %opts); # so we have method to modify\n    install_modifier $target, 'before', $name =&gt; sub {\n      my $self = shift;\n      return if @_; # attempt at setting, hand to auto\n      my $value = $self-&gt;{$name};\n      return if !eval { CodeLike-&gt;($value); 1 }; # attempt at reading and already resolved\n      $self-&gt;{$name} = $value-&gt;();\n      $opts{isa}-&gt;($self-&gt;{$name}) if $opts{isa}; # validate\n    }\n  });\n}\n</code></pre>\n\n<p>This applies \"thunking\" to an attribute. It will only function if the attribute is <code>ro</code>, and will quietly resolve any <code>CodeLike</code> values on reading. It can be used like this:</p>\n\n<pre><code>package Thunking;\nuse Moo;\nuse MooX::Thunking;\nuse Types::Standard -all;\nuse Types::Thunking -all;\nhas attr =&gt; (\n  is =&gt; 'thunked',\n  isa =&gt; Thunk[ArrayRef],\n);\n</code></pre>\n\n<h2>Using <code>BUILDARGS</code> and <code>lazy</code></h2>\n\n<p>An alternative approach, suggested by the mighty @haarg:</p>\n\n<pre><code>package MooX::Thunking;\nuse MooX::Utils;\nuse Types::TypeTiny -all;\nuse Class::Method::Modifiers qw(install_modifier);\nsub import {\n  my $target = scalar caller;\n  override_function($target, 'has', sub {\n    my ($orig, $name, %opts) = @_;\n    $orig-&gt;($name, %opts), return if $opts{is} ne 'thunked';\n    $opts{is} = 'lazy';\n    my $gen_attr = \"_gen_$name\";\n    $orig-&gt;($gen_attr =&gt; (is =&gt; 'ro'));\n    $opts{builder} = sub { $_[0]-&gt;$gen_attr-&gt;(); };\n    install_modifier $target, 'around', 'BUILDARGS' =&gt; sub {\n      my ($orig, $self) = (shift, shift);\n      my $args = $self-&gt;$orig(@_);\n      $args-&gt;{$gen_attr} = delete $args-&gt;{$name} if eval { CodeLike-&gt;($args-&gt;{$name}); 1 };\n      return $args;\n    };\n    $orig-&gt;($name, %opts);\n  });\n}\n</code></pre>\n\n<p>It uses the built-in <code>lazy</code> mechanism, creating a <code>builder</code> that will call the supplied <code>CodeLike</code> if that is what is given. One important downside is that this technique does not work for <code>Moo::Role</code>s.</p>\n"}], "owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504680194, "creation_date": 1503548074, "last_edit_date": 1504392643, "question_id": 45852843, "link": "https://stackoverflow.com/questions/45852843/how-can-i-implement-thunks-delayed-computation-in-a-general-way-using-moo-an", "title": "How can I implement &quot;thunks&quot; (delayed computation) in a general way using Moo and Type::Tiny?", "body": "<p>I want to be able to have a Moo* class with these characteristics:</p>\n\n<ul>\n<li>an object's attribute can store a reference to the object itself</li>\n<li>that attribute will be type-constrained using a <code>Type::Tiny</code> type so the reference must be of the right type</li>\n<li>the class must function when it is immutable, and the attribute is \"required\", i.e. an undefined value is unacceptable and it cannot be updated later</li>\n</ul>\n\n<p>E.g.</p>\n\n<pre><code>package GraphQLType;\nuse Moo;\nuse Types::Standard -all;\nhas [qw(children)] =&gt; (\n  is =&gt; 'rwp',\n  isa =&gt; ArrayRef[InstanceOf['GraphQLType']],\n  required =&gt; 1,\n);\n\npackage main;\nmy $type;\n$type = GraphQLType-&gt;new(children =&gt; [$type]);\n</code></pre>\n\n<p>The above presents a chicken-and-egg problem: <code>$type</code> will be undefined and therefore fail the type constraint.</p>\n\n<p>A pattern used in <a href=\"https://github.com/graphql/graphql-js\" rel=\"nofollow noreferrer\"><code>graphql-js</code></a> is <a href=\"https://en.wikipedia.org/wiki/Thunk\" rel=\"nofollow noreferrer\">\"thunking\"</a>. In Perl terms:</p>\n\n<pre><code>package GraphQLType;\nuse Moo;\nuse Types::Standard -all;\nhas [qw(children)] =&gt; (\n  is =&gt; 'rwp',\n  isa =&gt; CodeRef | ArrayRef[InstanceOf['GraphQLType']],\n  required =&gt; 1,\n);\n\npackage main;\nmy $type;\n$type = GraphQLType-&gt;new(children =&gt; sub { [$type] });\n</code></pre>\n\n<p>While that works for the specific type there, how can I have a parameterised type that implements something like this? Also, it will help even more if this can hook into the \"lazy\" functionality to minimise the code involved in storing the computed value.</p>\n\n<pre><code>package Thunking;\n\nuse Moo;\nuse Types::Thunking -all;\nuse Types::Standard -all;\n\nhas [qw(children)] =&gt; (\n  is =&gt; 'lazy',\n  isa =&gt; Thunk[ArrayRef[InstanceOf['GraphQLType']]],\n  required =&gt; 1,\n);\n</code></pre>\n"}, {"tags": ["shell", "perl", "debugging", "logging", "pylons"], "comments": [{"owner": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 0, "creation_date": 1503612721, "post_id": 45851489, "comment_id": 78702208, "body": "I think you mean Pyramid. Pylons the web framework is in maintenance mode, and Pylons Project is a collection of projects, including Pyramid. See <a href=\"https://pylonsproject.org/about-pylons-project.html\" rel=\"nofollow noreferrer\">pylonsproject.org/about-pylons-project.html</a> If so, then please update your question, tags, and title accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 8398134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/898eb09e39f9b94ac0b53a6bc327efd9?s=128&d=identicon&r=PG&f=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/8398134/craig"}, "is_accepted": false, "score": 0, "last_activity_date": 1503621541, "creation_date": 1503621541, "answer_id": 45872815, "question_id": 45851489, "link": "https://stackoverflow.com/questions/45851489/pylons-logging-for-500-after-failed-shell-call-in-view/45872815#45872815", "title": "Pylons logging for 500 after failed shell call in view", "body": "<p>It's Pyramid.  At any rate, I found some answers.  For those who may benefit from this: </p>\n\n<p>google handler_filelog for development.ini.  This makes a log file. Turn logging up from INFO to DEBUG.  I still don't know why before this I got 500s on the browser console and not a squeak from pserve console.</p>\n\n<p>Add shell=True in the subprocess call so perl gets environment vars and cwd.  Apparently this is a security risk.</p>\n\n<p>Also check cwd for target script with 'perl' '-MCwd -e' 'print cwd;' This will confirm the perl shell call is happening in the file system where you think it is.</p>\n\n<p>Returned JSON from perl shell call is made into an object via newobject=JSON.parse  this may need to be run twice if the JSON is also marked up by the shell.</p>\n\n<p>I developed for perl and Apache before web2.  Ideally, I'd be able to keep using Perl and it would somehow play with pserve for server resources and state but I can't find anything suggesting this is on the cards.  This would allow me to more gently transition and update.</p>\n"}], "owner": {"reputation": 3, "user_id": 8398134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/898eb09e39f9b94ac0b53a6bc327efd9?s=128&d=identicon&r=PG&f=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/8398134/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503621541, "creation_date": 1503537326, "question_id": 45851489, "link": "https://stackoverflow.com/questions/45851489/pylons-logging-for-500-after-failed-shell-call-in-view", "title": "Pylons logging for 500 after failed shell call in view", "body": "<p>I am new to pylons and I want a web page to request and process JSON that is emitted by a perl script on the server.  This isn't working as below but I can find no logs for either errors or requests for pserve.  I have googled and read the logging doco for pylons.  If you can see what's wrong below also that would be great, but I suspect the shell call is broken.  I just a way to debug it.</p>\n\n<p>I have set up the web page to use AJAX to call a view:</p>\n\n<h2>views.py called via pserve on windows 7</h2>\n\n<pre><code>import os\n\nfrom pyramid.view import view_config\nfrom subprocess import check_output\n@view_config(route_name='overlay_event', renderer='json')\ndef event_view(request):\n    return {'new_overlay': subprocess.check_output(['perl', 'hello_ajax/static/overlay_event.pl', 'ping']),\n            'html_overlay': subprocess.check_output(['perl', 'hello_ajax/static/overlay_event.pl', 'json'])\n            }\n</code></pre>\n\n<h2>client page ajax (running in Chrome Version 60.0.3112.101 (Official Build) (64-bit)</h2>\n\n<pre><code>setInterval(\n     function () {jQuery.ajax({\n                    url     : 'overlay_event',\n                    cache   : false,\n                    type    : 'POST',\n                    dataType: 'json',\n                    success : function(data){ if(new_overlay != 0) \n                                                { //lots more code......\n</code></pre>\n\n<p>This gets me a 500 according to the Chrome console.  However, I can find no server side logs for pserve and nothing appears on server console.<br>\nThe Perl script returns JSON to stdout.  I want the JSON captured by the view and sent back in the POST request so it can be eval'd in the client.  </p>\n\n<h2>development.ini is below - it is unchanged except for logging set to DEBUG not INFO by me.</h2>\n\n<pre><code>###\n# app configuration\n# http://docs.pylonsproject.org/projects/pyramid/en/1.8-branch/narr/environment.html\n###\n\n[app:main]\nuse = egg:hello_ajax\n\npyramid.reload_templates = true\npyramid.debug_authorization = false\npyramid.debug_notfound = false\npyramid.debug_routematch = false\npyramid.default_locale_name = en\npyramid.includes =\n    pyramid_debugtoolbar\n\n# By default, the toolbar only appears for clients from IP addresses\n# '127.0.0.1' and '::1'.\n# debugtoolbar.hosts = 127.0.0.1 ::1\n\n###\n# wsgi server configuration\n###\n\n[server:main]\nuse = egg:waitress#main\nlisten = 127.0.0.1:6543 [::1]:6543\n\n###\n# logging configuration\n# http://docs.pylonsproject.org/projects/pyramid/en/1.8-branch/narr/logging.html\n###\n\n[loggers]\nkeys = root, hello_ajax\n\n[handlers]\nkeys = console\n\n[formatters]\nkeys = generic\n\n[logger_root]\nlevel = DEBUG\nhandlers = console\n\n[logger_hello_ajax]\nlevel = DEBUG\nhandlers =\nqualname = hello_ajax\n\n[handler_console]\nclass = StreamHandler\nargs = (sys.stderr,)\nlevel = NOTSET\nformatter = generic\n\n[formatter_generic]\nformat = %(asctime)s %(levelname)-5.5s [%(name)s:%(lineno)s][%(threadName)s] %(message)s\n</code></pre>\n\n<p>Any help to turn on logging to work out what is broken would be great.</p>\n"}]