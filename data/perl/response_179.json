[{"tags": ["perl"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1528932197, "post_id": 50847574, "comment_id": 88698621, "body": "Your &quot;txt-file&quot; appears in your question as a bulleted list. If you&#39;re talking about a plain text file (ASCII?), format it as code. Are the lines of the text file just numbers, or do they have a leading <code>- </code>?"}, {"owner": {"reputation": 181, "user_id": 9682035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wi7up.png?s=128&g=1", "display_name": "69 420 1970", "link": "https://stackoverflow.com/users/9682035/69-420-1970"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1528932367, "post_id": 50847574, "comment_id": 88698650, "body": "@KeithThompson, no no, its just for example. txt contain only strings, I need every string add to $$.foobar.baz"}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1528959624, "post_id": 50847844, "comment_id": 88705501, "body": "Your answer would be much more useful if it contained code that shows how to solve OP&#39;s requirements."}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1528999350, "post_id": 50847844, "comment_id": 88729266, "body": "The code I recommended is a full application, rather than just a module. I&#39;ll update to build out an example."}], "tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 0, "last_activity_date": 1528934385, "creation_date": 1528934385, "answer_id": 50847844, "question_id": 50847574, "link": "https://stackoverflow.com/questions/50847574/how-i-can-use-a-text-file-in-lwp/50847844#50847844", "title": "How I can use a text file in LWP?", "body": "<p>You might find <a href=\"https://metacpan.org/pod/App::SimpleScan\" rel=\"nofollow noreferrer\"><code>App::SimpleScan</code></a> on CPAN to be useful. I wrote it for just such an application back at Yahoo! in 2005. It handles combinatorial specifications of URLs, lets you snapshot the output, etc. Plugin-based with a fairly good set of plugins, so if it won't do exactly what you want out of the box, it shouldn't be hard for you to make it work.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1528934463, "creation_date": 1528934463, "answer_id": 50847851, "question_id": 50847574, "link": "https://stackoverflow.com/questions/50847574/how-i-can-use-a-text-file-in-lwp/50847851#50847851", "title": "How I can use a text file in LWP?", "body": "<p>This is a very simple question, and I wonder why you can't even attempt it yourself</p>\n\n<p>It's just a matter of reading the file and building the complete URL from each line of text</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"$0/0.1 \" . $ua-&gt;agent);\n$ua-&gt;agent(\"Mozilla/8.0\");\n\nopen my $fh, '&lt;', 'file.txt' or die $!;\n\nwhile ( &lt;$fh&gt; ) {\n\n    next unless /\\S/;\n\n    chomp;\n\n    my $res = $ua-&gt;get( \"$_.foobar.baz\" );\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 9682035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wi7up.png?s=128&g=1", "display_name": "69 420 1970", "link": "https://stackoverflow.com/users/9682035/69-420-1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 50847851, "answer_count": 2, "score": -1, "last_activity_date": 1528934463, "creation_date": 1528931674, "last_edit_date": 1528933976, "question_id": 50847574, "link": "https://stackoverflow.com/questions/50847574/how-i-can-use-a-text-file-in-lwp", "title": "How I can use a text file in LWP?", "body": "<p>I need to send requests to an HTTP server using <code>LWP</code>. For example, I have a file with data, and I must send requests to server <code>foobar.baz</code>.</p>\n\n<pre><code>use LWP::UserAgent;\n\n$ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"$0/0.1 \" . $ua-&gt;agent);\n$ua-&gt;agent(\"Mozilla/8.0\") \n\n$req = HTTP::Request-&gt;new(GET =&gt; 'http://www.foobar.baz');\n$req-&gt;header('Accept' =&gt; 'text/html');\n$res = $ua-&gt;request($req);\n</code></pre>\n\n<p>How I can use <code>file.txt</code> in</p>\n\n<pre><code>$req = HTTP::Request-&gt;new(GET =&gt; 'http://www.foobar.baz')\n</code></pre>\n\n<p>for every request?</p>\n\n<p>For example <code>file.txt</code> contains</p>\n\n<pre><code>aaaa\nbbbb\ncccc\ndddd\neeee\n</code></pre>\n\n<p>I need to send a request to </p>\n\n<pre><code>aaaa.foobar.baz\nbbbb.foobar.baz\ncccc.foobar.baz\n</code></pre>\n\n<p>and so on.</p>\n\n<p>How can I do it?</p>\n"}, {"tags": ["perl", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1528930423, "creation_date": 1528930423, "answer_id": 50847401, "question_id": 50846371, "link": "https://stackoverflow.com/questions/50846371/login-to-web-site-using-perl-library-seleniumremotedriver-v1-28/50847401#50847401", "title": "Login to web site using Perl library Selenium::Remote::Driver v1.28", "body": "<p>I think you're getting confused with the various CPAN modules. The code you show uses methods from\n<a href=\"https://metacpan.org/pod/WWW::Selenium\" rel=\"nofollow noreferrer\"><code>WWW::Selenium</code></a>,\nbut it has no <code>send_keys</code> because there is <code>type</code> instead which you use in your code</p>\n\n<p><a href=\"https://metacpan.org/pod/Selenium::Remote::WebElement\" rel=\"nofollow noreferrer\"><code>Selenium::Remote::WebElement</code></a>\nhas a <code>send_keys</code> method. If you want to use this module then you need to call one of the <code>find_element</code> methods\nfrom\n<a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow noreferrer\"><code>Selenium::Remote::Driver</code></a>\nto get a <code>WebElement</code> object, and call <code>send_keys</code>on that. You will also need the\n<a href=\"https://metacpan.org/pod/Selenium::Waiter\" rel=\"nofollow noreferrer\"><code>Selenium::Waiter</code></a>\nmodule to wait for given elements to appear</p>\n\n<p>Something like this should work, but there is insufficient detail in your question for me to write a full demonstration, and I have no way of testing Perl code at present</p>\n\n<pre><code>use Selenium::Remote::Driver;\nuse Selenium::Waiter qw/ wait_until /;\n\nmy $driver = Selenium::Remote::Driver-&gt;new(...);\n\n$driver-&gt;get(...);\n\nwait_until({\n    $driver-&gt;find_element_by_name('username')\n})-&gt;send_keys($username);\n\n$driver-&gt;find_element_by_name('password')-&gt;send_keys($password);\n\n$driver-&gt;find_element_by_name('Login')-&gt;submit;\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 4557493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TzPf5.jpg?s=128&g=1", "display_name": "Jelani", "link": "https://stackoverflow.com/users/4557493/jelani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528930423, "creation_date": 1528924422, "last_edit_date": 1528929335, "question_id": 50846371, "link": "https://stackoverflow.com/questions/50846371/login-to-web-site-using-perl-library-seleniumremotedriver-v1-28", "title": "Login to web site using Perl library Selenium::Remote::Driver v1.28", "body": "<p>The simple <code>send_keys</code> method has been removed from the v1.28 version of\n<a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow noreferrer\"><code>Selenium::Remote::Driver</code></a>\nand replaced with <code>send_keys_to_active_element</code>.  I'm now unable to log in to a web site with username and password fields.</p>\n\n<p>Below is the previous library methods.\nHow can I do the same using the v1.28 version?</p>\n\n<pre><code>$sel-&gt;wait_for_element_present(\"name=username\");                                                    \n$sel-&gt;type(\"name=username\", $username);\n$sel-&gt;type(\"name=password\", $password);\n$sel-&gt;submit(\"name=Login\");\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1528915391, "post_id": 50843813, "comment_id": 88691805, "body": "<a href=\"https://www.perlmonks.org/?node_id=1216577\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528915559, "post_id": 50843813, "comment_id": 88691892, "body": "Do you really need to count the line after a pattern? It&#39;s not so reliable. (For example, the <code>INTERVAL</code> line  <i>is not</i> the 3rd line below.)"}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528916301, "post_id": 50844279, "comment_id": 88692245, "body": "Thanks, that works. However, my intention is to get the last line which is INTERVAL &quot;10m&quot; and get the value 10m store in to a variable. How can i do that here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528917516, "post_id": 50844279, "comment_id": 88692820, "body": "@user3834663  Alright, that&#39;s what my comment (under the question) was about: do you need the 4th line after the <code>DUMMY CHECK</code>, or the line with <code>INTERVAL</code>?  Or the <code>INTERVAL</code> line if it is the 4th line? Or if it is between the 1st and 6th lines after <code>DUMMY</code>?  Please consider carefully what the most suitable requirement is.  (Since there aren&#39;t other answers yet it&#39;d be probably good to then update the question as well.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528917600, "post_id": 50844279, "comment_id": 88692858, "body": "@user3834663  I can simply add a line to extract data after <code>INTERVAL</code> but it isn&#39;t good to search for the 4th line and then use a particular text pattern on it. That should be wrapped together in a more robust test."}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528918458, "post_id": 50844279, "comment_id": 88693321, "body": "Yes i need the interval comes after the DUMMY CHECK."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528918523, "post_id": 50844279, "comment_id": 88693353, "body": "@user3834663  &quot;yes&quot; on which of options I listed?  That the line has <code>INTERVAL</code> and that it is the fourth line after the <code>DUMMY</code> line?"}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528918616, "post_id": 50844279, "comment_id": 88693410, "body": "$data =~ m/\\s+INTERVAL\\s\\&quot;(.*)\\&quot;.*/i; $int = $1; print &quot;interval is = $int\\n&quot;;"}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528918628, "post_id": 50844279, "comment_id": 88693417, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/173097/discussion-between-user3834663-and-zdim\">continue this discussion in chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "edited": false, "score": 0, "creation_date": 1528919099, "post_id": 50844279, "comment_id": 88693681, "body": "@user3834663  See the last update (extract data from within quotes now).  Thank you for the attribution"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1528955733, "last_edit_date": 1528955733, "creation_date": 1528915806, "answer_id": 50844279, "question_id": 50843813, "link": "https://stackoverflow.com/questions/50843813/print-n-th-line-after-a-matched-line/50844279#50844279", "title": "Print n-th line after a matched line", "body": "<p><strong>Updated</strong> in comments: get data on <code>INTERVAL</code> line if it is the 4th line after <code>DUMMY</code> line</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy $file = shift @ARGV  or usage();\n\nopen my $fh_in, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy $offset = 4;\n\nmy $anchor;\nwhile (&lt;$fh_in&gt;) { \n    $anchor = $.  if /SCHEDULE\\s\"DUMMY\\sCHECK\"/;\n    if ($anchor and $. == $anchor+$offset and /^\\s*INTERVAL\\s*\"(.*?)\"/) {\n        #print;                 # the whole line\n        say \"interval is: $1\";  # captured data on the line\n    }\n}\n\nsub usage {\n    say STDERR \"Usage: $0 filename\";\n    exit;\n}\n</code></pre>\n\n<p>The <a href=\"https://perldoc.perl.org/perlvar.html#$.\" rel=\"nofollow noreferrer\"><code>$.</code> variable</a> has the current line number from the last accessed filehandle.</p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": true, "score": 0, "last_activity_date": 1528924503, "creation_date": 1528924503, "answer_id": 50846386, "question_id": 50843813, "link": "https://stackoverflow.com/questions/50843813/print-n-th-line-after-a-matched-line/50846386#50846386", "title": "Print n-th line after a matched line", "body": "<p>I would use the <code>flip-flop</code> operator. This lets you operate only on the SCHEDULE \"DUMMY CHECK\" sections. From there, it doesn't matter what line you're on and you can just capture the INTERVAL field.</p>\n\n<pre><code>use v5.10;\n\nopen (IN,\"&lt;\",\"$ARGV[0]\");\n\nwhile (&lt;IN&gt;) {\n    if (/^SCHEDULE \"DUMMY CHECK\"/ .. eof) {\n        say \"interval: $1\" if /INTERVAL (.*)/\n    }\n}\n</code></pre>\n\n<p>note that I am using <code>eof</code> as the flip-flop terminator. you can \"flop\" on another regular expression (maybe <code>/^SCHEDULE/</code>) if there is more to the data file.</p>\n"}], "owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 50846386, "answer_count": 2, "score": 0, "last_activity_date": 1528968090, "creation_date": 1528914046, "last_edit_date": 1528968090, "question_id": 50843813, "link": "https://stackoverflow.com/questions/50843813/print-n-th-line-after-a-matched-line", "title": "Print n-th line after a matched line", "body": "<p>I have an input file having following contents</p>\n\n<pre><code>SCHEDULE \"TEST\"\n DESCRIPTION \"Do Some stuff\"\n    MINUTE   \"53\"\n    HOUR     \"21\"\n\nSCHEDULE \"DUMMY CHECK\"\n  DESCRIPTION \"Do some stuff\"\n\n  Check something\n    INTERVAL \"10m\"\n    MINUTE   \"50\"\n    HOUR     \"21\"\n</code></pre>\n\n<p>I need to match the 3rd line after the matched line SCHEDULE \"DUMMY CHECK\" which is INTERVAL \"10m\". (<strong>Edit</strong>: <em>and to get <code>10m</code> from it</em>.) I have written the below code for that purpose, however i'm not sure if this is the exact way of doing it, or do we have any simple other logics.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $file = \"input.txt\";\nmy @data;\nopen (IN,\"&lt;\",\"$file\");\nmy $count = 0;\n while (&lt;IN&gt;) {\n  $count = 1 if /SCHEDULE\\s\"(DUMMY\\sCHECK)\".*/;\n    if ($count &gt;= 1 and $count &lt;= 6) {\n    @data = $_;\n    print @data;\n    $count++;  \n    }\n\n }\n</code></pre>\n"}, {"tags": ["perl", "exporter"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1528906844, "post_id": 50841904, "comment_id": 88687459, "body": "Try replacing <code>package Foobar</code> with <code>package FOO::BAR::Foobar</code> at the top of the file <code>.&#47;FOO&#47;BAR&#47;Foobar.pl</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528911472, "post_id": 50841904, "comment_id": 88689878, "body": "It&#39;s worth pointing out that a module file is normally never run, so the shebang line <code>#!&#47;usr&#47;bin&#47;perl -w</code> is just a comment and should be removed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528911628, "post_id": 50841904, "comment_id": 88689954, "body": "<i>&quot;I&#39;ve wasted many days on a larger block of code, containing Exporter statements, which used to work about a year ago&quot;</i> It&#39;s not very becoming to try to blame stuff on a bug in Perl, which is way less likely than a mistake on your part. That &quot;larger block of code&quot; would still run if you hadn&#39;t changed it, and that&#39;s one of the first things you should have tried, &quot;many days&quot; ago."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528965230, "post_id": 50841904, "comment_id": 88708814, "body": "Tip: <code>.</code> is the CWD, not necessary the script&#39;s directory. Since you want the script&#39;s directory, use <code>$RealBin</code> instead (after doing <code>use FindBin qw( $RealBin );</code>). e.g. <code>use FindBin qw( $RealBin ); use lib $RealBin, &quot;$RealBin&#47;FOO&#47;BAR&quot;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528911380, "post_id": 50842768, "comment_id": 88689831, "body": "1. and 2. are basically both <i>&quot;Your package and file has the wrong name&quot;</i>. <code>require Exporter</code> is fine as long as <code>@ISA = qw(Exporter)</code> is also there. I also notice that the OP says that the package is in <code>.&#47;FOO&#47;BAR&#47;Foobar.pl</code> (instead of <code>.pm</code>) which won&#39;t work at all."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528915113, "post_id": 50842768, "comment_id": 88691665, "body": "@Borodin Yes, they are, hence only one solution for both - it was my answer to the OP&#39;s question <i>&quot;What&#39;s going on?&quot;</i>. I assumed the <code>Foobar.pl</code> was just a typo, since later on in the post the correct file is named, and otherwise the OP would have seen a different error message, but you&#39;re right to point it out."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528915272, "post_id": 50842768, "comment_id": 88691747, "body": "@Borodin As for <code>@ISA=(&quot;Exporter&quot;);</code>, yes, it&#39;s an acceptable method - it&#39;s just that the package will inherit all the other methods from <code>Exporter</code> too, even though most modules only need <code>import</code>, hence my suggestion to <code>use Exporter &#39;import&#39;;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528917213, "post_id": 50842768, "comment_id": 88692670, "body": "Okay. I was confused about your point 2. You seemed to be implying that <code>require Exporter</code> was incorrect. And I do agree that <code>use Exporter &#39;import&#39;</code> is preferable, but not for the reason you say: a module should be <i>either</i> a library (when <code>Exporter</code> is fine used either way) or an OO module (when <code>Exporter</code> is irrelevant) and not both."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 4, "last_activity_date": 1528909823, "creation_date": 1528909823, "answer_id": 50842768, "question_id": 50841904, "link": "https://stackoverflow.com/questions/50841904/cant-use-exporter-properly/50842768#50842768", "title": "Can&#39;t use Exporter properly", "body": "<p>There are three things going wrong:</p>\n\n<ol>\n<li><p>With <code>FOO::BAR::Foobar::foo()</code>: There is no such <code>sub</code>, there is only <code>Foobar::foo()</code>.</p></li>\n<li><p>With <code>foo()</code>: <code>use FOO::BAR::Foobar;</code> is the equivalent of <code>BEGIN { require FOO::BAR::Foobar; FOO::BAR::Foobar-&gt;import() }</code>, but there is no method <code>import</code> available in the package <code>FOO::BAR::Foobar</code>, since you're inheriting <code>Exporter</code> into the package <code>Foobar</code>.</p></li>\n<li><p>With <code>foo()</code>: You're using <code>@EXPORT_OK</code> instead of <code>@EXPORT</code>, which means that you need to explicitly import <code>foo</code>, but you're not doing that in <code>use FOO::BAR::Foobar;</code>.</p></li>\n</ol>\n\n<p>So two things are needed to fix this:</p>\n\n<ol>\n<li><p>As already pointed out in the comment by @H\u00e5konH\u00e6gland, change <code>package Foobar;</code> to <code>package FOO::BAR::Foobar;</code>.</p></li>\n<li><p>Change <code>use FOO::BAR::Foobar;</code> to <code>use FOO::BAR::Foobar qw/foo/;</code>.</p></li>\n</ol>\n\n<p>Then the code you've shown will work - there's no need to abandon <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\"><code>Exporter</code></a>. I'd just recommend a different style of using <code>Exporter</code>: Instead of inheriting via <code>@ISA</code>, just import <code>import</code> into your package. Here's how I would have written your file <code>./FOO/BAR/Foobar.pm</code>:</p>\n\n<pre><code>package FOO::BAR::Foobar;\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\nour @EXPORT_OK = qw(foo);\n\nour $FOO;\nsub foo {\n    print \"Loaded\\n\";\n    $FOO = q{some val};\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 2426505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ce1e8f70d72dfc39a838160549d9b5?s=128&d=identicon&r=PG", "display_name": "William Barrett", "link": "https://stackoverflow.com/users/2426505/william-barrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528916587, "creation_date": 1528906596, "last_edit_date": 1528916587, "question_id": 50841904, "link": "https://stackoverflow.com/questions/50841904/cant-use-exporter-properly", "title": "Can&#39;t use Exporter properly", "body": "\n\n<p>I've wasted many days on a larger block of code, containing <code>Exporter</code> statements, which used to work about a year ago. Several variations on this have failed, including an install of <code>./FOO/BAR/Foobar.pm</code> which signaled success.</p>\n\n<p>I am using Windows 10, Perl v5.26.0, built for MSWin32-x64-multi-thread</p>\n\n<h3>Caller.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>   #!/usr/bin/perl\n\n   use lib \".\";\n   use lib \"./FOO/BAR\";\n\n   use strict;\n   use warnings;\n\n   use FOO::BAR::Foobar;\n\n   print \"try FOO::BAR::Foobar::foo()\\n\";\n   FOO::BAR::Foobar::foo();  # perl can't find this\n\n   print \"try foo()\\n\";\n   foo();          # errors out - can't find &amp;main::foo\n\n   print \"done\\n\";\n</code></pre>\n\n<h3>./FOO/BAR/Foobar.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\npackage Foobar;\n\nour($VERSION , @ISA , @EXPORT , @EXPORT_OK , %EXPORT_TAGS , $FOO);\n\nBEGIN {\n    require Exporter;\n    @ISA       = qw(Exporter);\n    @EXPORT_OK = qw(foo);\n}\n\nsub foo {\n    print \"Loaded\\n\";\n    $FOO = q{some val};\n}\n\n1;\n</code></pre>\n\n<h3>Execution dump</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl Caller.pl\ntry FOO::BAR::Foobar::foo()\nUndefined subroutine &amp;FOO::BAR::Foobar::foo called at Caller.pl line 12.\n</code></pre>\n\n<p>What's going on? Should I abandon any use of <code>Exporter</code>? But then how to link functions across modules?</p>\n"}, {"tags": ["perl", "logging", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528895616, "post_id": 50837421, "comment_id": 88680070, "body": "Did you restart the app after you created the file chmod&#39;d 777?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1528895662, "post_id": 50837421, "comment_id": 88680099, "body": "If you only have the level <code>warn</code> you&#39;ll not get anything in the log but warnings or higher. The system does <code>info</code>, and you are doing <code>info</code> in your code. It doesn&#39;t need to write to the log, so it doesn&#39;t."}, {"owner": {"reputation": 51, "user_id": 9884895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7cdcfe2d46502c49605dc2c96c6fa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ojman", "link": "https://stackoverflow.com/users/9884895/ojman"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528895853, "post_id": 50837421, "comment_id": 88680240, "body": "@simbabque I&#39;ve removed level =&gt; &#39;warn&#39; and now it should be info by default. But it still isn&#39;t logging anything"}, {"owner": {"reputation": 51, "user_id": 9884895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7cdcfe2d46502c49605dc2c96c6fa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ojman", "link": "https://stackoverflow.com/users/9884895/ojman"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528895877, "post_id": 50837421, "comment_id": 88680256, "body": "@ChrisTurner yes"}, {"owner": {"reputation": 51, "user_id": 9884895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7cdcfe2d46502c49605dc2c96c6fa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ojman", "link": "https://stackoverflow.com/users/9884895/ojman"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1528899870, "post_id": 50837421, "comment_id": 88683064, "body": "@Dada if it&#39;s debug by default, it should work in any case then"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528906375, "post_id": 50837421, "comment_id": 88687194, "body": "Firstly, <code>Mojo::Log</code> will not create the log file until something is written to it. Secondly, are you aware that you need to access the URL for your app for the <code>$log-&gt;info</code> call to happen? Are you doing that? It would be much easier just to call <code>$log-&gt;info</code> when <code>$log</code> is first created then inside one of the path handlers."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1528968695, "post_id": 50837421, "comment_id": 88710998, "body": "Actually, I can&#39;t reproduce your error: if i remove the <code>level =&gt; &#39;warn&#39;</code>, it works. (if I have the permissions to access the file) Could you show us a minimalistic reproducible example and tell us exactly what you do to call the sub that is supposed to log? (for starter, remove the  <code>....</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1528968358, "post_id": 50843386, "comment_id": 88710768, "body": "That&#39;s not the issue. The issue is that <code>$log</code> is created with level <code>warn</code>, so <code>info</code> messages don&#39;t show."}], "tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 2, "last_activity_date": 1528912350, "creation_date": 1528912350, "answer_id": 50843386, "question_id": 50837421, "link": "https://stackoverflow.com/questions/50837421/a-log-file-isnt-getting-created-and-written-into-in-my-mojolicious-app/50843386#50843386", "title": "A log file isn&#39;t getting created and written into in my Mojolicious app", "body": "<p>You need to associate the log with your app (reference <a href=\"https://metacpan.org/pod/Mojolicious#log\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Mojolicious#log</a>)</p>\n\n<pre><code>my $log = Mojo::Log-&gt;new( path =&gt; '/var/log/my_log.log', level =&gt; 'warn' );\n\napp-&gt;log($log);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9884895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7cdcfe2d46502c49605dc2c96c6fa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ojman", "link": "https://stackoverflow.com/users/9884895/ojman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1528912350, "creation_date": 1528893267, "last_edit_date": 1528895088, "question_id": 50837421, "link": "https://stackoverflow.com/questions/50837421/a-log-file-isnt-getting-created-and-written-into-in-my-mojolicious-app", "title": "A log file isn&#39;t getting created and written into in my Mojolicious app", "body": "<p>I have this in my Mojolicious app:</p>\n\n<pre><code>  use utf8;\n  use Mojolicious::Lite;\n  # ......\n  use Mojo::Log;\n\n  my $app = app;\n  my $log = Mojo::Log-&gt;new(path =&gt; '/var/log/my_log.log', level =&gt; 'warn');\n\n  get '/' =&gt; sub {\n\n    .........\n\n    $log-&gt;info(\"test123\");\n\n  }\n\n  app-&gt;start;\n</code></pre>\n\n<p>The log file didn't even get created. \nAfter some time I created it myself, made it \"chmod 777\" and now it's still not being written into.</p>\n\n<p>Why?</p>\n"}, {"tags": ["perl", "unix", "ssh", "rhel"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1528898785, "creation_date": 1528898785, "answer_id": 50839275, "question_id": 50837363, "link": "https://stackoverflow.com/questions/50837363/protocol-error-when-using-netsshperl-module/50839275#50839275", "title": "Protocol error when using Net:SSH:Perl module", "body": "<p>A <a href=\"https://www.google.com/search?q=Protocol+error%3A+expected+packet+type+91%2C+got+80+at+%2FNet%2FSSH%2FPerl%2FPacket.pm\" rel=\"nofollow noreferrer\">simple search for the error message</a> gives <a href=\"https://www.perlmonks.org/?node_id=1144748\" rel=\"nofollow noreferrer\">this post from 2016</a> and <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=118291\" rel=\"nofollow noreferrer\">this bug report from 2016</a> which both indicate that the issue was fixed in version 2.01 of the module, released in 10/2016. Thus, you are probably using an older version and need to upgrade.</p>\n"}], "owner": {"reputation": 99, "user_id": 3344013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/131deed33d242151849bec9de1b661e3?s=128&d=identicon&r=PG&f=1", "display_name": "vatsal", "link": "https://stackoverflow.com/users/3344013/vatsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 50839275, "answer_count": 1, "score": 1, "last_activity_date": 1528898785, "creation_date": 1528893096, "question_id": 50837363, "link": "https://stackoverflow.com/questions/50837363/protocol-error-when-using-netsshperl-module", "title": "Protocol error when using Net:SSH:Perl module", "body": "<p>I have a script that uses Net::SSH:Perl module. It is able to ssh to RHEL6.9 hosts but not RHEL7.4 hosts. I get the following error:</p>\n\n<p>Protocol error: expected packet type 91, got 80 at /Net/SSH/Perl/Packet.pm line 221</p>\n\n<p>How do I remedy this?</p>\n"}, {"tags": ["regex", "string", "perl", "file", "stdin"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1528880655, "post_id": 50833142, "comment_id": 88670280, "body": "I think RegEx or regex is acceptable... RegeX makes it seem like a video game or ActiveX..."}, {"owner": {"reputation": 3, "user_id": 9934780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0KTy.jpg?s=128&g=1", "display_name": "C. Guti&#233;rrez", "link": "https://stackoverflow.com/users/9934780/c-guti%c3%a9rrez"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1528881420, "post_id": 50833142, "comment_id": 88670737, "body": "Thanks, but i&#39;m still searching for help!!"}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1528881840, "creation_date": 1528881840, "answer_id": 50833629, "question_id": 50833142, "link": "https://stackoverflow.com/questions/50833142/trying-to-find-a-specific-string-in-a-file-with-regex/50833629#50833629", "title": "Trying to find a specific string in a file with RegEx", "body": "<p>You've misunderstood what the <code>grep</code> function does. It evaluates the expression (in this case <code>$name</code>) for each element passed to it and if true, that element is returned. If <code>$name</code> contains a value, then it'll always be true, so it'll return every line in file and it'll always print the \"Found\" result.</p>\n\n<p>Instead you want to use a regular expression. This is what a regular expression looks like.</p>\n\n<pre><code>if($somevalue =~ /pattern/)\n</code></pre>\n\n<p>You want to process every line so you'll also need a loop, like a <code>while</code> loop. If you leave out <code>$somevalue</code>, like many Perl functions and operators, it'll default to <code>$_</code> which is what this loop will use to give you each line of the file. And since <code>$name</code> might contain characters that are considered special in regular expressions, surrounding it with \\Q and \\E means it'll be treated as just regular characters.</p>\n\n<pre><code>my $found=0;\nwhile(&lt;FILE&gt;)\n  {\n  if( /\\Q$name\\E/ )\n    {\n    $found=1;\n    }\n  }\nif($found)\n  {\n  print \"Found\\n\";\n  }\nelse\n  {\n  print \"word not found\\n\";\n  }\n</code></pre>\n\n<p>You're also using an outdated method of opening the file and also not checking it opened. Consider replacing it with this</p>\n\n<pre><code>if(open(my $file, \"&lt;\", \"/home/server/test2.txt\"))\n  {\n  # Your code to process the file goes inside here\n  close($file);\n  }\n</code></pre>\n\n<p>PS Don't forget to replace <code>&lt;FILE&gt;</code> with <code>&lt;$file&gt;</code></p>\n"}], "owner": {"reputation": 3, "user_id": 9934780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0KTy.jpg?s=128&g=1", "display_name": "C. Guti&#233;rrez", "link": "https://stackoverflow.com/users/9934780/c-guti%c3%a9rrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 50833629, "answer_count": 1, "score": 0, "last_activity_date": 1528881840, "creation_date": 1528880397, "last_edit_date": 1528881007, "question_id": 50833142, "link": "https://stackoverflow.com/questions/50833142/trying-to-find-a-specific-string-in-a-file-with-regex", "title": "Trying to find a specific string in a file with RegEx", "body": "<p>I have a file with the following format:</p>\n\n<pre><code>define host{\n     use             generic-printer\n     host_name       imp-p-125\n     address         100.68.22.10\n     hostgroups      network-printers\n    }\n\n define service{\n        use     generic-service\n        host_name       imp-p-125\n        service_description     Toner 1 Status\n        check_command   check_toner1\n        check_interval  240\n        retry_interval  2\n        notification_interval   245\n        }\n</code></pre>\n\n<p>I'm trying to find the host_name line (1imp-p-1251), with the objetive to not repeat a host that exists in the file.</p>\n\n<p>I have the following code to do this, but it's always telling me \"found\" for all the names that I put in the keyboard.</p>\n\n<pre><code>sub openFile {\n\n  open(FILE, \"/home/server/test2.txt\");\n  print \"file open!\\n\";\n  print \"hostname(Example 'imp-p-125'): \";\n\n  my $name = &lt;STDIN&gt;;\n  chomp $name;\n\nif (grep{$name} &lt;FILE&gt;){\n      print \"found\\n\";\n}else{\n    print \"word not found\\n\";\n}\n  close FILE;\n}\n</code></pre>\n\n<p>I was searching options to use a RegEx with STDIN method, but I can't find anything yet.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2935, "user_id": 636482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e782fc140a4df0ced76c99f57696bcf6?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/636482/tom"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528872711, "post_id": 50830681, "comment_id": 88665693, "body": "@ikegami I&#39;m referring to the data the reference points to. If that gets modified from a particular reference I want it to clone the data and update the reference to point to the new data."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528872833, "post_id": 50830681, "comment_id": 88665757, "body": "It is possible using <code>tie</code>, which will greatly slow things down, especially if you want to do this deeply."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528873048, "post_id": 50830681, "comment_id": 88665859, "body": "Clearly, you want <code>$cow_ref-&gt;[0] = 123;</code> to clone <code>@{ $cow_ref }</code>, but should <code>$cow_ref-&gt;[0][0] = 123;</code> clone <code>@{ $cow_ref-&gt;[0] }</code>, <code>@{ $cow_ref }</code> or nothing at all?"}, {"owner": {"reputation": 2935, "user_id": 636482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e782fc140a4df0ced76c99f57696bcf6?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/636482/tom"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528874893, "post_id": 50830681, "comment_id": 88666958, "body": "@ikegami ideally I&#39;d want just the parts that are modified to clone as I may have an arrayref of hashrefs which contain other hashrefs all the way down. However I can appreciate that this sort of complicated reference splitting might not exist either in internals or in userland. I&#39;m happy to deal with a clone of the entire dataset."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528875304, "post_id": 50830681, "comment_id": 88667185, "body": "You can do it deeply yet not copy the entire data set (i.e. clone parents, but not siblings), and it&#39;s not and harder than cloning the entire dataset. It is, however, much harder than cloning a the array, so it&#39;s much more complicated than string CoW."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1528875361, "post_id": 50830681, "comment_id": 88667217, "body": "I&#39;d like to adjust what I said earlier. I think it&#39;s possible using <code>tie</code> and overloaded <code>=</code>, but we&#39;re talking about a lot work. And I repeat, using <code>tie</code> will slow things down considerably."}, {"owner": {"reputation": 2935, "user_id": 636482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e782fc140a4df0ced76c99f57696bcf6?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/636482/tom"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528875520, "post_id": 50830681, "comment_id": 88667304, "body": "Yeah I think this requires a restructuring on the internal behaviour of my package to solve and not a language trick. Thanks for the help in working through this @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528877345, "post_id": 50830681, "comment_id": 88668405, "body": "<a href=\"https://pastebin.com/raw/s2wXM1Fp\" rel=\"nofollow noreferrer\">This</a> is what the mechanism would be for just array CoW (as opposed to whole data structure CoW). It&#39;s not mentioned, but the backreferences would be weak references."}], "owner": {"reputation": 2935, "user_id": 636482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e782fc140a4df0ced76c99f57696bcf6?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/636482/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1528874656, "creation_date": 1528872384, "last_edit_date": 1528874656, "question_id": 50830681, "link": "https://stackoverflow.com/questions/50830681/copy-on-write-for-references", "title": "Copy on Write for References", "body": "<p>Perl currently supports <a href=\"https://perldoc.perl.org/perlguts.html#Copy-on-Write\" rel=\"nofollow noreferrer\">Copy on Write (CoW)</a> for scalar variables however it doesn't appear to have anything for hashrefs and arrayrefs.</p>\n\n<p>Perl does, however, have subroutines to modify variable internals like <a href=\"http://perldoc.perl.org/Scalar/Util.html#weaken\" rel=\"nofollow noreferrer\">weaken</a> so I'm guessing that there might exist a solution.</p>\n\n<p>I have a situation where I have a large structure I'm returning from a package which keeps an internal state of this large structure. I want to ensure that if either the returned references or the internal reference (which are both currently the same reference) is modified that I end up with a Copy-on-write situation where the data the references are pointing to is copied, modified and the reference used to modified the data is updated to point to the new data.</p>\n\n<pre><code>package SomePackage;\nuse Moose;\n\nhas some_large_internal_variable_ref =&gt; (\n    'is'  =&gt; 'rw',\n    'isa' =&gt; 'HashRef',\n);\n\nsub some_operation {\n    my ($self) = @_;\n    $self-&gt;some_large_internal_variable_ref({\n        # create some large result that is different every time\n    });\n}\n\nsub get_result {\n    my ($self) = @_;\n    return $self-&gt;some_large_internal_variable_ref;\n}\n\n1;\n\nuse strict;\nuse warnings;\nuse SomePackage;\nuse Test::More;\n\n# Situtation 1 where the internally stored reference is modified\n# This will pass!\n\nmy $package = SomePackage-&gt;new();\n$package-&gt;some_operation();\nmy $result1 = $package-&gt;get_result();\n\n$package-&gt;some_operation();\nmy $result2 = $package-&gt;get_result();\n\nisnt($result1, $result2, \"These two references should no longer be the same\");\n\n\n# Situtation 2 where the externally stored references is modified\n# This will fail\n\n$package = SomePackage-&gt;new();\n$package-&gt;some_operation();\n$result1 = $package-&gt;get_result();\n$result1-&gt;{foo} = \"bar\";\n\n$result2 = $package-&gt;get_result();\n\nisnt($result1, $result2, \"These two references should no longer be the same\");\n\ndone_testing;\n</code></pre>\n\n<p>I'm trying to avoid a situation where I have to clone the values on the <code>get_result</code> return as this would result in a situation where memory usage is doubled.</p>\n\n<p>I'm hoping there is some form of <code>weaken</code> I can call on the variable to indicate that, should a modification be made to behave with Copy on Write behaviour.</p>\n"}, {"tags": ["perl", "hashmap"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1528848890, "post_id": 50827328, "comment_id": 88659497, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11214270/what-hashing-function-algorithm-does-perl-use\">What hashing function/algorithm does Perl use ?</a>"}, {"owner": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1528852775, "post_id": 50827328, "comment_id": 88660250, "body": "@MattJacob this is a different matter. I don&#39;t care about the algorithm. I want to know how does it resolve the hashing collisions."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1528850002, "creation_date": 1528850002, "answer_id": 50827609, "question_id": 50827328, "link": "https://stackoverflow.com/questions/50827328/how-does-perl-resolve-possible-hash-collisions-in-hashes/50827609#50827609", "title": "How does perl resolve possible hash collisions in hashes?", "body": "<p>Sets of key-value pairs where the keys produce the same hash value are stored together in a linked list. The gory details are available in <a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/hv.c#l837\" rel=\"nofollow noreferrer\"><code>hv.c</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "edited": false, "score": 0, "creation_date": 1528860447, "post_id": 50828438, "comment_id": 88661710, "body": "It\u2019s a separate chaining with linked lists then. That triggers 2 more questions: is that random a salt? And I get perl starts with a small table, growing it then, so I guess it masks the hash down, then collisions will be more. Does it grow the table by number of buckets occupied or by convenience? Maybe this deserves another question, and a probabilistic study to understand the choice."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "edited": false, "score": 1, "creation_date": 1528860886, "post_id": 50828438, "comment_id": 88661785, "body": "You could call it a salt, yeah. /// it doubles the number of buckets"}, {"owner": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "edited": false, "score": 0, "creation_date": 1528861965, "post_id": 50828438, "comment_id": 88662004, "body": "I get it doubles the number (it stops masking a bit). But when does it say: &quot;ok, let&#39;s grow the table up&quot;? Does it just count the number of occupied buckets (vs allocated) or is it some other sort of thing?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "edited": false, "score": 1, "creation_date": 1528862059, "post_id": 50828438, "comment_id": 88662016, "body": "Surely yes, but also when a chain gets too long."}, {"owner": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "edited": false, "score": 1, "creation_date": 1528863662, "post_id": 50828438, "comment_id": 88662303, "body": "I think this commit in the perl repo is enough: <a href=\"https://perl5.git.perl.org/perl.git/commit/05f97de032fe95cabe8c9f6d6c0a5897b1616194\" rel=\"nofollow noreferrer\">commit</a>. Thanks."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1528896230, "post_id": 50828438, "comment_id": 88680523, "body": "It doubles <a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/hv.c#l37\" rel=\"nofollow noreferrer\">when there is a collision and the &quot;load factor&quot; is 2/3</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1528858347, "creation_date": 1528858347, "answer_id": 50828438, "question_id": 50827328, "link": "https://stackoverflow.com/questions/50827328/how-does-perl-resolve-possible-hash-collisions-in-hashes/50828438#50828438", "title": "How does perl resolve possible hash collisions in hashes?", "body": "<p>A Perl hash is an array of linked lists.</p>\n\n<pre><code>+--------+       +--------+\n|       --------&gt;|        |\n+--------+       +--------+\n|        |       | key1   |\n+--------+       +--------+\n|      ------+   | val1   |\n+--------+   |   +--------+\n|        |   |\n+--------+   |   +--------+     +--------+\n             +--&gt;|       ------&gt;|        |\n                 +--------+     +--------+\n                 | key2   |     | key3   |\n                 +--------+     +--------+\n                 | val2   |     | val3   |\n                 +--------+     +--------+\n</code></pre>\n\n<p>The hashing function produces a value which is used as the array index, then a linear search of the associated linked list is performed.</p>\n\n<p>This means the worse case to lookup is O(N). So why do people say it's O(1)? You could claim that if you kept the list from exceeding some constant length, and that's what Perl does. It uses two mechanisms to achieve this:</p>\n\n<ul>\n<li>Increasing the number of buckets.</li>\n<li>Hashing algorithm perturbing.</li>\n</ul>\n\n<p>Doubling the number of buckets should divide the number of entries in a given by half, on average. For example,</p>\n\n<pre><code>305419896 % 4 = 0 and 943086900 % 4 = 0\n305419896 % 8 = 0 and 943086900 % 8 = 4\n</code></pre>\n\n<p>However, a malicious actor could choose values where this doesn't happen. This is where the hash perturbation comes into play. Each hash has its own random number that perturbs (causes variances in) the output of the hashing algorithm. Since the attacker can't predict the random number, they can't choose values that will cause collisions. When needed, Perl can rebuild the hash using a new random number, causing keys to map to different buckets than before, and thus breaking down long chains.</p>\n"}], "owner": {"reputation": 752, "user_id": 5798748, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o20oremx6zQ/AAAAAAAAAAI/AAAAAAAAAdg/xvEd56_YBKc/photo.jpg?sz=128", "display_name": "Dario Rodriguez", "link": "https://stackoverflow.com/users/5798748/dario-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 1, "accepted_answer_id": 50828438, "answer_count": 2, "score": 1, "last_activity_date": 1528862056, "creation_date": 1528847302, "last_edit_date": 1528862056, "question_id": 50827328, "link": "https://stackoverflow.com/questions/50827328/how-does-perl-resolve-possible-hash-collisions-in-hashes", "title": "How does perl resolve possible hash collisions in hashes?", "body": "<p>As we know, perl implements its 'hash' type as a table with calculated indexes, where these indexes are truncated hashes.</p>\n\n<p>As we also know, a hashing function can (and will, by probability) collide, giving the same hash to 2 or more different inputs.</p>\n\n<p><strong>Then</strong>: How does the perl interpreter handle when it finds that a key generated the same hash than another key? Does it handle it at all?</p>\n\n<p><strong>Note</strong>: This is not about the algorithm for hashing but about collision resolution in a hash table implementation.</p>\n"}, {"tags": ["postgresql", "perl", "sqitch"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528835483, "post_id": 50824703, "comment_id": 88655611, "body": "What do you mean by the <i>&quot;Strawberry Perl console&quot;</i>? I have never heard of such a thing."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1528835286, "creation_date": 1528835286, "answer_id": 50825373, "question_id": 50824703, "link": "https://stackoverflow.com/questions/50824703/perl-console-basic-commands-and-fe-sendauth-no-password-was-not-working/50825373#50825373", "title": "Perl console : basic commands and fe_sendauth : no password was not working", "body": "<p>The PostgreSQL documentation says this</p>\n\n<blockquote>\n  <p>On Microsoft Windows the file is named %APPDATA%\\postgresql\\pgpass.conf (where %APPDATA% refers to the Application Data subdirectory in the user's profile).</p>\n</blockquote>\n\n<p>You need to put your <code>.pgpass</code> file in the correct place</p>\n"}], "owner": {"reputation": 181, "user_id": 3113954, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/eMVgD.png?s=128&g=1", "display_name": "ramakri", "link": "https://stackoverflow.com/users/3113954/ramakri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528835286, "creation_date": 1528832534, "question_id": 50824703, "link": "https://stackoverflow.com/questions/50824703/perl-console-basic-commands-and-fe-sendauth-no-password-was-not-working", "title": "Perl console : basic commands and fe_sendauth : no password was not working", "body": "<p>I am currently working on the sqitch , to run scripts automatically for postgress sql , i had seen few posts talking about the .pgpass file , i had placed my .pgpass file in my root directory and , but when i run my sqitch deploy command , it says password not found , please check my commands below.</p>\n\n<p>i am using the strawberry perl console , and i am also not able to execute basic commands like vi editor , ls etc.. please provide some assistance on this.</p>\n\n<p>found perl recomended from sqitch website : <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">http://strawberryperl.com/</a></p>\n\n<p>commanmd : </p>\n\n<pre><code>sqitch --engine pg deploy db:pg://mypostgress.connqa9taxeg.us-east-1.rds.amazonaws.com:5432/dbone\nfe_sendauth: no password supplied\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9yWwc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9yWwc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl", "security"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1528830489, "last_edit_date": 1528830489, "creation_date": 1528830186, "answer_id": 50824130, "question_id": 50823241, "link": "https://stackoverflow.com/questions/50823241/are-any-of-the-major-cpan-or-core-perl-libraries-succeptible-to-zip-slip-vulne/50824130#50824130", "title": "Are any of the major CPAN or core Perl libraries succeptible to &quot;Zip Slip&quot; vulnerability?", "body": "<p><a href=\"http://metacpan.org/pod/Archive::Tar\" rel=\"nofollow noreferrer\"><code>Archive::Tar</code></a>, for one, can be used to <em>create</em> archive files that can trigger this vulnerability. The current version defines the variable <a href=\"https://metacpan.org/pod/Archive::Tar#$Archive::Tar::INSECURE_EXTRACT_MODE\" rel=\"nofollow noreferrer\"><code>$Archive::Tar::INSECURE_EXTRACT_MODE</code></a>, set to false by default, that would allow this vulnerability to be exploited. This variable was introduced in v1.36 (2007); older versions of this distribution <a href=\"https://rt.cpan.org/Ticket/Display.html?id=30380\" rel=\"nofollow noreferrer\">are always susceptible to this exploit</a>.</p>\n"}], "owner": {"reputation": 119277, "user_id": 119280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7efd5c795e9797c30fce4126daaa9c0?s=128&d=identicon&r=PG&f=1", "display_name": "DVK", "link": "https://stackoverflow.com/users/119280/dvk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1528830489, "creation_date": 1528826808, "last_edit_date": 1528827526, "question_id": 50823241, "link": "https://stackoverflow.com/questions/50823241/are-any-of-the-major-cpan-or-core-perl-libraries-succeptible-to-zip-slip-vulne", "title": "Are any of the major CPAN or core Perl libraries succeptible to &quot;Zip Slip&quot; vulnerability?", "body": "<p>There has been a recent <a href=\"https://snyk.io/research/zip-slip-vulnerability\" rel=\"nofollow noreferrer\">notification of a major security vulnerability called \"Zip Slip\"</a> which affects numerous libraries in various languages (especially Java, but also JavaScript, GO, Ruby and Python). </p>\n\n<p>Since this is clearly not limited to compiled languages, I was interested if any of the major Perl libraries (CPAN or core Perl) were succeptible, but Googling for <code>\"Zip slip\"+Perl</code> didn't produce any useful results.</p>\n\n<p>Are any of the major CPAN or core Perl libraries susceptible to \"Zip Slip\" vulnerability?</p>\n"}, {"tags": ["linux", "pandas", "perl", "python-multithreading", "multiprocess"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1528809149, "post_id": 50817080, "comment_id": 88641229, "body": "For one, you&#39;re not autoflushing the Perl output streams, so the consumer (Python script) will not receive anything until there are enough (8K? 4K? 16K?) bytes to fill the output buffer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1528824397, "post_id": 50817080, "comment_id": 88650241, "body": "@mob, Before 5.14, Perl read in 4 KiB blocks. Since 5.14, the size of the blocks is configurable when you build perl, with a default of 8 KiB."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528824435, "post_id": 50817080, "comment_id": 88650256, "body": "<code>$_-&gt;autoflush(1) for $fifo1, $fifo2;</code> will disable buffering on the handles."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1528828799, "post_id": 50817080, "comment_id": 88652580, "body": "When opening $fifo2, you are opening <code>$fifo_msg</code>, which should be undefined. You probably meant <code>$fifo_msg2</code>. Always put <code>use strict; use warnings;</code> at the beginning of your perl scripts."}, {"owner": {"reputation": 1073, "user_id": 2232573, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/207cb35beb3a38a12e8ec83fd12511f0?s=128&d=identicon&r=PG", "display_name": "nurp", "link": "https://stackoverflow.com/users/2232573/nurp"}, "edited": false, "score": 0, "creation_date": 1528895891, "post_id": 50817080, "comment_id": 88680267, "body": "what I forgot to paste here was, this line at top of my perl script:     <code>$|++;  # turn on autoflush</code> does it do the same job?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528897416, "post_id": 50817080, "comment_id": 88681336, "body": "No it doesn&#39;t. It enables <code>autoflush</code> on the <i>currently selected output handle</i>, which is <code>STDOUT</code> unless you have changed it. You need to add <code>$fifo1-&gt;autoflush</code> and <code>$fifo2-&gt;autoflush</code> after they are opened. And please <i>copy and paste</i> your code into questions: typing stuff in and hoping it&#39;s close enough will lead to incorrect and misleading answers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528897617, "post_id": 50817080, "comment_id": 88681470, "body": "What&#39;s more, the code you have shown won&#39;t even compile because you have <code>use strict</code> in place but haven&#39;t declared <code>$fifo_msg</code>. Please be much more careful."}, {"owner": {"reputation": 1073, "user_id": 2232573, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/207cb35beb3a38a12e8ec83fd12511f0?s=128&d=identicon&r=PG", "display_name": "nurp", "link": "https://stackoverflow.com/users/2232573/nurp"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528898133, "post_id": 50817080, "comment_id": 88681826, "body": "Thanks, it doesn&#39;t block anymore after @ikegami&#39;s suggestion. Thanks all!"}, {"owner": {"reputation": 1073, "user_id": 2232573, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/207cb35beb3a38a12e8ec83fd12511f0?s=128&d=identicon&r=PG", "display_name": "nurp", "link": "https://stackoverflow.com/users/2232573/nurp"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528898446, "post_id": 50817080, "comment_id": 88682048, "body": "@Borodin, thanks for warning. I will put a compiling code next time."}, {"owner": {"reputation": 1073, "user_id": 2232573, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/207cb35beb3a38a12e8ec83fd12511f0?s=128&d=identicon&r=PG", "display_name": "nurp", "link": "https://stackoverflow.com/users/2232573/nurp"}, "edited": false, "score": 0, "creation_date": 1529093749, "post_id": 50817080, "comment_id": 88766524, "body": "Now I call that Main from within another Python script multiple times and it blocks in the second call. It always runs first one, and always blocks second one. i put prints everywhere but is always different where it blocks. It is pandas causing it. I now changed it to basic file read and it works fine. Just in case anyone finds this thread and tries themselves, I wanted to write."}], "owner": {"reputation": 1073, "user_id": 2232573, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/207cb35beb3a38a12e8ec83fd12511f0?s=128&d=identicon&r=PG", "display_name": "nurp", "link": "https://stackoverflow.com/users/2232573/nurp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1528898195, "creation_date": 1528806005, "last_edit_date": 1528898195, "question_id": 50817080, "link": "https://stackoverflow.com/questions/50817080/something-blocks-threads-while-accessing-fifo-from-different-processes", "title": "Something blocks threads while accessing fifo from different processes", "body": "<p>I have a Perl script and Python script. Perl script feeds Python script by means of FIFO. Python script executes the Perl script and also runs some threads to process the data output from Perl. I read the FIFO directly into pandas DataFrame.</p>\n\n<p>Sometimes it runs, sometimes it is stuck. Perhaps dead lock. What am I doing wrong?</p>\n\n<p>Python code:</p>\n\n<pre><code>from threading import Thread\nimport os\nimport subprocess\nimport numpy as np\nimport pandas as pd\n\nclass MyThread(Thread):\n    def __init__(self, fifo_name):\n        self.fifo_name = fifo_name\n        self.results = None\n        super(MyThread, self).__init__()\n\n    def run(self):\n        try:\n            os.mkfifo(self.fifo_name)\n        except FileExistsError:\n            pass\n        self.results = pd.read_csv(self.fifo_name)\n\ndef Main():\n    t11= MyThread(\"fifo1_msg1\")\n    t11.start()\n\n    t12= MyThread(\"fifo1_msg2\")\n    t12.start()\n\n    t21= MyThread(\"fifo2_msg1\")\n    t21.start()\n\n    t22= MyThread(\"fifo2_msg2\")\n    t22.start()\n\n    # run perl scripts that writes to fifos\n    subprocess.Popen([\"perl\", \"dumpData.pl\", file1, fifo1_msg1, fifo1_msg2, bufsize=1, stderr=subprocess.STDOUT)\n    subprocess.Popen([\"perl\", \"dumpData.pl\", file2, fifo2_msg1, fifo2_msg2], bufsize=1, stderr=subprocess.STDOUT)\n\n    t11.join()\n    t12.join()\n    t21.join()\n    t22.join()\n\n    t_plot = Thread(target=make_plots, args=(t11.results, t12.results, t21.results, t22.results))\n    t_plot.start()\n    t_plot.join()\n\nif __name__ == \"__main__\":\n    Main()\n</code></pre>\n\n<p>Perl Code:</p>\n\n<pre><code>use warnings;\nuse strict;\n$|++;  # turn on autoflush\nsub dump_file\n{\n    my $filename = shift;\n    my $fifo_msg1 = shift;\n    my $fifo_msg2 = shift;\n\n    open(my $fifo1, \"&gt;\", $fifo_msg1 ) || die();\n    open(my $fifo2, \"&gt;\", $fifo_msg2) || die();\n\n    print $fifo1 \"date,t,p\\n\";\n    print $fifo2 \"time,x,y,z\\n\";\n    # some pseudo code as I don't want to put whole code\n    # while not eof, read line..\n       # read variables from line \n       if(case_bla) {\n           printf $fifo1 \"%d,%d,%d\\n\", date,t,p;\n       }\n       else {\n           printf $fifo2 \"%d,%d,%d,%d\\n\", time,x,y,z;\n       }\n    # end while\n    close($fifo1);\n    close($fifo2);\n}\ndump_file($inputfile, $fifo_msg1, $fifo_msg2);\n</code></pre>\n"}, {"tags": ["perl", "ieee-754"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528798181, "post_id": 50814142, "comment_id": 88634026, "body": "I can reproduce it, and get a warning with <code>use warnings</code> on 5.24.1 on 64bit Ubuntu 16.04."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528799210, "post_id": 50814142, "comment_id": 88634601, "body": "My guess is that Perl thinks it&#39;s an integer. A very BIG integer. <code>perl -MO=Concise -e &#39;printf(&quot;float: %f \\n&quot;,0x4025065220000000)&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528825423, "post_id": 50815252, "comment_id": 88650820, "body": "Presumably the number isn&#39;t hardcoded, but comes from somewhere, in which case they won&#39;t get the warning. It&#39;s only for hardcoded numbers. The warning can also be silenced."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 4, "last_activity_date": 1528813887, "last_edit_date": 1528813887, "creation_date": 1528800225, "answer_id": 50815252, "question_id": 50814142, "link": "https://stackoverflow.com/questions/50814142/how-to-get-floating-point-number-by-passing-its-hexadecimal-equivalent-ieee-for/50815252#50815252", "title": "How to get floating point number by passing its hexadecimal equivalent (IEEE format) in Perl?", "body": "<p>As far as I can tell, <code>0x4025065220000000</code> is 10.51235, not 10.51200 - that would be <code>0x40250624dd2f1aa0</code>. Anyway, see <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\"><code>pack</code></a>:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -wMstrict -le 'print unpack(\"d&gt;\",pack(\"q&gt;\",0x4025065220000000))'\nHexadecimal number &gt; 0xffffffff non-portable at -e line 1.\n10.5123453140259\n$ perl -wMstrict -le 'print unpack(\"H*\",pack(\"d&gt;\",10.51200))'\n40250624dd2f1aa0\n$ perl -wMstrict -le 'print unpack(\"d&gt;\",pack(\"q&gt;\",0x40250624dd2f1aa0))'\nHexadecimal number &gt; 0xffffffff non-portable at -e line 1.\n10.512\n</code></pre>\n\n<p>Note that your Perl has to be compiled with support for quads for the above (see the output of <code>perl -V</code>). If you don't like the warning, you can use strings instead:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -wMstrict -le 'print unpack(\"d&gt;\",pack(\"H*\",\"4025065220000000\"))'\n10.5123453140259\n$ perl -wMstrict -le 'print unpack(\"d&gt;\",pack(\"H*\",\"40250624dd2f1aa0\"))'\n10.512\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8621262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ie67rlwqaQQ/AAAAAAAAAAI/AAAAAAAAAzM/4qzPO1-GqtE/photo.jpg?sz=128", "display_name": "Nani", "link": "https://stackoverflow.com/users/8621262/nani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528813887, "creation_date": 1528796910, "question_id": 50814142, "link": "https://stackoverflow.com/questions/50814142/how-to-get-floating-point-number-by-passing-its-hexadecimal-equivalent-ieee-for", "title": "How to get floating point number by passing its hexadecimal equivalent (IEEE format) in Perl?", "body": "<p>I know that 10.51200 is saved in memory as 0x4025065220000000 using IEEE floating point format. But when i pass this to sprintf() function in Perl like below i am getting wrong value as output. Can you please suggest where i am going wrong.</p>\n\n<p>$temp = 0x4025065220000000;</p>\n\n<p>$temp1 = sprintf(\"float: %f \\n\",$temp);</p>\n\n<p>print \"$temp1\";</p>\n\n<p><strong>Output:</strong></p>\n\n<p>float: 4622107541822767104.000000 </p>\n"}, {"tags": ["perl", "sorting", "grouping", "diff"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1528756581, "post_id": 50806928, "comment_id": 88619731, "body": "If they are truly byte-for-byte identical and that is the organizing criterion, just calculate a hash of every file (MD5, SHA1, whatever) and sort by hash value.  You don&#39;t even need perl, this could be easily done in bash shell."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2313070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de075eee8be56a90bfc44b3a50dd637f?s=128&d=identicon&r=PG", "display_name": "Yucheng Guo", "link": "https://stackoverflow.com/users/2313070/yucheng-guo"}, "edited": false, "score": 0, "creation_date": 1528813581, "post_id": 50807458, "comment_id": 88644413, "body": "Thank you so much Mr. Garrison! I think the hash value would work in hash. I should have asked what would be good way to identify same files. It&#39;s my first time knowing comparing the hash value. Thank you again!"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 1, "last_activity_date": 1528762055, "last_edit_date": 1528762055, "creation_date": 1528760590, "answer_id": 50807458, "question_id": 50806928, "link": "https://stackoverflow.com/questions/50806928/how-to-sort-files-in-a-directory-into-different-folders-based-on-their-diff-resu/50807458#50807458", "title": "How to sort files in a directory into different folders based on their diff result using Perl", "body": "<p>I wouldn't normally answer a question with no effort shown, but we tend to be a little more lenient with scripts than programs, and I was bored and wanted to refresh my awk skills a bit.</p>\n\n<p>Here are two different ways using awk and Perl command-line scripts. These should be entered in one line.  Both were tested with a small set of files.</p>\n\n<p>NOTE: These scripts DO NOT perform the actual operations. It is intended that you redirect the output into a file and then, after carefully verifying that it does what you want, execute that file as a script to perform the moves.</p>\n\n<p>Perl:</p>\n\n<pre><code>for i in *.txt; do echo `sha1sum $i`; done | sort | perl -ne \n    'BEGIN {$a=1} \n     ($h,$f)=split; \n     if ($h ne $c) { $c=$h; $d=\"folder\".$a++; print \"mkdir $d\\n\"} \n     print \"mv $f $d\\n\"'\n</code></pre>\n\n<p>Awk:</p>\n\n<pre><code>for i in *.txt; do echo `sha1sum $i`; done | sort | awk \n    'BEGIN {a=1} \n     $1!=c { c=$1; d=\"folder\" a++; print \"mkdir \",d} \n     {print \"mv \",$2,\" \", d}'\n</code></pre>\n\n<p>They both use the same initial pipeline: run <code>sha1sum</code> on every file in the current directory, sort by hash value and then invoke either Perl or awk. \nYou should run the pipeline by itself (omit the last <code>|</code> and the entire <code>awk</code> or <code>perl</code> command) to see what the raw output looks like. </p>\n\n<p>The scripts look for a change in hash value and create a new folder each time it changes, then move the file and subsequent files with matching hashes to the new folder.</p>\n\n<p>Given a set of 7 input files consisting of a single byte each:</p>\n\n<pre><code>Filename   Contents\n--------   --------\na.txt      1\nb.txt      2\nc.txt      1\nd.txt      1\ne.txt      5\nf.txt      1\ng.txt      5\n</code></pre>\n\n<p>The raw pipeline output is:</p>\n\n<pre><code>$ for i in *.txt; do echo `sha1sum $i`; done | sort\n5d9474c0309b7ca09a182d888f73b37a8fe1362c e.txt\n5d9474c0309b7ca09a182d888f73b37a8fe1362c g.txt\n7448d8798a4380162d4b56f9b452e2f6f9e24e7a b.txt\ne5fa44f2b31c1fb553b6021e7360d07d5d91ff5e a.txt\ne5fa44f2b31c1fb553b6021e7360d07d5d91ff5e c.txt\ne5fa44f2b31c1fb553b6021e7360d07d5d91ff5e d.txt\ne5fa44f2b31c1fb553b6021e7360d07d5d91ff5e f.txt\n</code></pre>\n\n<p>and the final output is</p>\n\n<pre><code>mkdir  folder1\nmv  e.txt   folder1\nmv  g.txt   folder1\nmkdir  folder2\nmv  b.txt   folder2\nmkdir  folder3\nmv  a.txt   folder3\nmv  c.txt   folder3\nmv  d.txt   folder3\nmv  f.txt   folder3\n</code></pre>\n\n<p>BTW, this illustrates a rule you are wise to follow whenever writing scripts that do bulk operations.  Never have the script do the operation to begin with, have the script <em>write a script</em> that contains the bulk operations you want performed.  Upgrade to doing the actual operations only when you are <em>positive</em> it's been fully tested and debugged.</p>\n"}], "owner": {"reputation": 75, "user_id": 2313070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de075eee8be56a90bfc44b3a50dd637f?s=128&d=identicon&r=PG", "display_name": "Yucheng Guo", "link": "https://stackoverflow.com/users/2313070/yucheng-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528762055, "creation_date": 1528756245, "question_id": 50806928, "link": "https://stackoverflow.com/questions/50806928/how-to-sort-files-in-a-directory-into-different-folders-based-on-their-diff-resu", "title": "How to sort files in a directory into different folders based on their diff result using Perl", "body": "<p>I have a group of txt files with unique names in a directory, each has a unique name but and many of their contents are exactly the same. I need a good way to sort these txt files to separate folders such that all the files in each particular folders contain identical contents. The files needs a global diff to ensure the similarity. </p>\n\n<p>for example, if 6 files have the following property (= means diff result are same)</p>\n\n<pre><code>a.txt = b.txt = c.txt\nd.txt = e.txt != a.txt\nf.txt != (a.txt nor d.txt)\n</code></pre>\n\n<p>Then, I need these files moved to directories like this:</p>\n\n<pre><code>/folder1/ contains (a.txt, b.txt, c.txt)\n/folder2/ contains (d.txt, e.txt)\n/folder3/ contains (only f.txt)\n</code></pre>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["macos", "perl", "apfs"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1528756638, "post_id": 50806144, "comment_id": 88619748, "body": "<code>rename</code>(3pl) simply calls <code>rename</code>(2). Win32 and VMS override this (as you can see <a href=\"https://perl5.git.perl.org/perl.git?a=search&amp;h=HEAD&amp;st=grep&amp;s=%23define.%2Arename&amp;sr=1\" rel=\"nofollow noreferrer\">here</a>), but not MacOS as far as I can see. Check the man page for <code>rename</code>(2)?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1528758432, "post_id": 50806144, "comment_id": 88620135, "body": "I&#39;d read rename(2) but it was not illuminating."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528758893, "post_id": 50806144, "comment_id": 88620250, "body": "That search I linked didn&#39;t tell the whole picture. PerlIO adds a layer of indirection, and while I&#39;m missing a few pieces, I don&#39;t see anything but Netware and Win32 overriding there."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528758897, "post_id": 50806144, "comment_id": 88620251, "body": "Do you get the same behaviour from a C program?"}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1586179214, "post_id": 50806144, "comment_id": 108024518, "body": "Does not happen on my Mac."}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1589974745, "post_id": 50806144, "comment_id": 109504072, "body": "Works as expected for me. OSX 10.14.6 and perl 5.18 with apfs filesystem."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1598210813, "post_id": 50806144, "comment_id": 112377024, "body": "Make sure your second open worked, it might be failing. <code>$!</code> might have a clue even if it succeeded, try printing it after each file operation."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1598569245, "post_id": 50806144, "comment_id": 112509895, "body": "This is an issue with iCloud Drive and synchronization. I haven&#39;t developed a full demonstration yet."}, {"owner": {"reputation": 186, "user_id": 4685758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6459711581ed5aef648fae9d8070cad6?s=128&d=identicon&r=PG", "display_name": "Bernhard M.", "link": "https://stackoverflow.com/users/4685758/bernhard-m"}, "edited": false, "score": 0, "creation_date": 1607879725, "post_id": 50806144, "comment_id": 115405151, "body": "Maybe you should <code>unlink($bak)</code> before the rename."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1607911479, "post_id": 50806144, "comment_id": 115413063, "body": "The name in <code>$bak</code> doesn&#39;t exist yet. As I said, this is a remote sync issue with iCloud."}], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 1, "answer_count": 0, "score": 8, "last_activity_date": 1598210541, "creation_date": 1528751723, "last_edit_date": 1598210541, "question_id": 50806144, "link": "https://stackoverflow.com/questions/50806144/is-perls-rename-doing-something-odd-on-apfs", "title": "Is perl&#39;s rename doing something odd on APFS?", "body": "<p>I think this is related to iCloud Drive in some way, but I have not investigated.</p>\n<hr />\n<p>I'm trying to track down an issue with Perl's <a href=\"http://perldoc.perl.org/functions/rename.html\" rel=\"nofollow noreferrer\">rename</a> on macOS using the Apple Filesystem (APFS). I've been able to replicate this with perls back to at least 5.12.3 but all of mine are compiled with Apple LLVM version 9.1.0 (clang-902.0.39.1). Those same perls do not have this problem with FAT or HFS+ filesystems. I haven't noticed this problem anywhere else.</p>\n<ul>\n<li><p>Run it the first time. I end up with a <em>Changes</em> and a <em>Changes.bak</em>. That's exactly what I expected.</p>\n</li>\n<li><p>Run it again. You end up with <em>Changes</em> and <em>Changes 3</em> file. There is no <em>Changes.bak</em>. This is odd.</p>\n</li>\n<li><p>Run it again. I end up with a <em>Changes</em> file, <em>Changes.bak</em>, and <em>Changes 3</em>.</p>\n</li>\n<li><p>Run it again. I end up with a <em>Changes</em> file, <em>Changes 3</em>, and <em>Changes 4</em>. Again, there's no <em>Changes.bak</em>.</p>\n</li>\n<li><p>If I remove the <code>print</code> line I can't get this to present (&quot;Doctor, it hurts when I move my arm like this&quot;).</p>\n</li>\n<li><p>I re-ordered the file handle opens and closes but that didn't seem to fix anything.</p>\n</li>\n</ul>\n<p>I figure there's something happening at the filesystem level. So I really have two questions:</p>\n<ul>\n<li><p>Is this a bug and at what level? Is the <code>rename</code> not guaranteed to finish whatever it needs to do before I start messing with file handles?</p>\n</li>\n<li><p>I want to read the old file and create the new one that inserts some data in the middle. Copy the header, insert the new lines, output all the old line into the new file. I could write to a temp file and move that later, but am I doing anything else stupid?</p>\n</li>\n</ul>\n<p>If you can reproduce this behavior but don't know, leave a comment. Maybe there's something else odd about my system.</p>\n<hr>\n<pre><code>my $changes = &quot;Changes&quot;;\nmy $bak     = $changes . &quot;.bak&quot;;\n\nrename $changes, $bak or die &quot;Could not backup $changes. $!\\n&quot;;\n\nopen my $in, '&lt;', $bak or die &quot;Could not read old $changes file! $!\\n&quot;;\nopen my $out, &quot;&gt;&quot;, $changes;\n\n# comment this print line and there's no problem\nprint {$out} 'Hello';\n\nclose $out;\nclose $in;\n</code></pre>\n"}, {"tags": ["perl", "read-eval-print-loop"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1528739474, "post_id": 50801335, "comment_id": 88612811, "body": "I use <code>perl -C -dwE 1</code> to invoke the interactive Perl debugger, but it&#39;s a bit crude. For example, <code>my $x = 42</code> won&#39;t be remembered on the next line. Drop the <code>my</code> and it works."}], "answers": [{"comments": [{"owner": {"reputation": 7687, "user_id": 2809027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDAhb.jpg?s=128&g=1", "display_name": "Cecil Curry", "link": "https://stackoverflow.com/users/2809027/cecil-curry"}, "edited": false, "score": 0, "creation_date": 1584761538, "post_id": 50801521, "comment_id": 107543165, "body": "Sadly, neither <code>Devel::REPL</code> nor <code>Reply</code> are under active development. The last stable releases for both are over four years old. This is code rot in action, folks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7687, "user_id": 2809027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDAhb.jpg?s=128&g=1", "display_name": "Cecil Curry", "link": "https://stackoverflow.com/users/2809027/cecil-curry"}, "edited": false, "score": 0, "creation_date": 1584958847, "post_id": 50801521, "comment_id": 107591256, "body": "@CecilCurry well volunteered! :) // but to be fair, both of them are stable. You don&#39;t always need to keep developing stuff."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 10, "last_activity_date": 1528732151, "last_edit_date": 1528732151, "creation_date": 1528731775, "answer_id": 50801521, "question_id": 50801335, "link": "https://stackoverflow.com/questions/50801335/is-there-an-interactive-command-line-environment-for-perl/50801521#50801521", "title": "Is there an interactive command line environment for Perl?", "body": "<p>You want a <a href=\"https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop\" rel=\"noreferrer\">REPL</a>. </p>\n\n<p>Take a look at <a href=\"https://metacpan.org/pod/Devel::REPL\" rel=\"noreferrer\">Devel::REPL</a>. It brings a script called <code>re.pl</code> that you can run.</p>\n\n<pre><code>$ re.pl\n$ my $foo = 123;\n123$ use feature 'say';\n$  $foo + 1;\n124$ \n</code></pre>\n\n<p>A newer alternative is <a href=\"https://metacpan.org/pod/Reply\" rel=\"noreferrer\">Reply</a> with its <code>reply</code> script.</p>\n\n<pre><code>$ reply \n0&gt; my $foo = 123;\n$res[0] = 123\n\n1&gt; $foo + 2\n$res[1] = 125\n\n2&gt; \n</code></pre>\n\n<p>For a comparison, you can <a href=\"https://shadow.cat/blog/matt-s-trout/mstpan-17/\" rel=\"noreferrer\">read this blog post</a> by Matt Trout.</p>\n"}], "owner": {"reputation": 3199, "user_id": 2759385, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e5fbf51ed249b017926f975b2999d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Ahdee", "link": "https://stackoverflow.com/users/2759385/ahdee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1528736012, "creation_date": 1528731123, "last_edit_date": 1528736012, "question_id": 50801335, "link": "https://stackoverflow.com/questions/50801335/is-there-an-interactive-command-line-environment-for-perl", "title": "Is there an interactive command line environment for Perl?", "body": "<p>Hi I'm wondering if there is something for Perl similar to Rstudio?  That is to ability to run commands, retain all variables in memory without exiting the script.  </p>\n\n<p>For example say I execute this command <code>my $temp = 83;</code> then instead of ending the script I change the value <code>$temp = 22; print \"$temp \\n\";</code> and so on, but I don't end the script and continue to work on it.  This will be extremely helpful when dealing with a large datasets and general workflow. \nThe closest thing I came across is Visual Studio Code using a plugin whereby I can execute specific chunks of code in my script. However I did not find a way to keep the variable persistently in memory.<br>\nthanks!  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1528723458, "post_id": 50798718, "comment_id": 88603471, "body": "<code>use warnings;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528723539, "post_id": 50798718, "comment_id": 88603538, "body": "and you probably want to turn that <code>unless</code> into an <code>if</code>. Or it&#39;ll try to print <code>undef</code>."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 3, "creation_date": 1528724916, "post_id": 50798718, "comment_id": 88604434, "body": "Why are you iterating over your array ref and then grepping inside the loop over the complete array ref again?"}], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": true, "score": 1, "last_activity_date": 1528724283, "last_edit_date": 1528724283, "creation_date": 1528723967, "answer_id": 50798971, "question_id": 50798718, "link": "https://stackoverflow.com/questions/50798718/unless-and-grep-not-work-correctly/50798971#50798971", "title": "Unless and grep not work correctly", "body": "<p>Why doesn't it work? Well, because of <code>@{$list}+0</code>. You are adding a scalar to a list -- you will get a scalar as a result (size of the array, in this example <code>3</code>). You are then grepping the scalar instead of the list.</p>\n\n<p>Also, <code>$count</code> in your first example is not defined at all.</p>\n\n<p>Using <code>@{$list}</code> instead of <code>@{$list}+0</code> would work as you expect, i.e.:</p>\n\n<pre><code>use Data::Dumper;\n\nmy $list=[{\"name\"=&gt;1},{\"name\"=&gt;1},{\"name\"=&gt;2}];\n\nforeach my $cat(@{$list}) {\n    unless(grep { $_-&gt;{name} eq 3 } @$list) {\n        print \"Hello there.\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 4585187, "user_type": "registered", "accept_rate": 53, "profile_image": "https://lh4.googleusercontent.com/-4RobpQXh2qA/AAAAAAAAAAI/AAAAAAAACD8/xqP0pWWP6Os/photo.jpg?sz=128", "display_name": "Dmitriy Kupriyanov", "link": "https://stackoverflow.com/users/4585187/dmitriy-kupriyanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 50798971, "answer_count": 1, "score": -1, "last_activity_date": 1528724283, "creation_date": 1528723218, "question_id": 50798718, "link": "https://stackoverflow.com/questions/50798718/unless-and-grep-not-work-correctly", "title": "Unless and grep not work correctly", "body": "<p>Why in perl not work next code?</p>\n\n<pre><code>use Data::Dumper;\n\nmy $list=[{\"name\"=&gt;1},{\"name\"=&gt;1},{\"name\"=&gt;2}];\n\nforeach my $cat(@{$list}) {\n    unless(grep { $_-&gt;{name} eq 3 } @{$list}+0) {\n        print $count;\n    }\n}\n</code></pre>\n\n<p>print not return any result, but if i declare variable count, condition <strong>unless</strong> magic way start work</p>\n\n<pre><code>use Data::Dumper;\n\nmy $list=[{\"name\"=&gt;1},{\"name\"=&gt;1},{\"name\"=&gt;2}];\n\nforeach my $cat(@{$list}) {\n    my $count=grep { $_-&gt;{name} eq 3 } @{$list};\n    unless($count) {\n        print $count;\n    }\n}\n</code></pre>\n\n<p>Code above print 111\nPlease tell me, why not work conditional <strong>unless</strong> without declaration variable my $count?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1528722031, "post_id": 50798275, "comment_id": 88602585, "body": "Please <a href=\"https://stackoverflow.com/posts/50798275/edit\">edit</a> your question and show us the expected output. You&#39;re not actually using the data structure you are creating. Also, you are mixing up some things. You have a <code>%csv</code> hash, but you are using a hash reference called <code>$csv</code> inside of the loop. Your code should not actually compile, but rather error out. And your regex pattern does not match your input. Please show us your real code. Just adding <code>use strict</code> at the top and not running it is not going to help."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528725136, "post_id": 50798275, "comment_id": 88604584, "body": "I&#39;ve add input file in the post :) thanks"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1528725356, "post_id": 50798275, "comment_id": 88604712, "body": "Thanks for adding the input. You&#39;ve still not run that code. It&#39;s getting more and more mixed up. If you were my trainee at this point I&#39;d tell you to throw the code away and start over. It seems like you&#39;re just poking in the dark. Please try to run your code before posting it here. If it doesn&#39;t run, and you don&#39;t understand why, please <a href=\"https://stackoverflow.com/posts/50798275/edit\">edit</a> and include the error messages you are getting. We really can&#39;t help otherwise."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528731923, "post_id": 50799779, "comment_id": 88608991, "body": "Technically, <code>-&gt;@*</code> has been available since 5.20, thought you&#39;ll need to add <code>use feature qw( postderef ); no warnings qw( experimental::postderef );</code> to use them before 5.24."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 5, "last_activity_date": 1528753732, "last_edit_date": 1528753732, "creation_date": 1528726318, "answer_id": 50799779, "question_id": 50798275, "link": "https://stackoverflow.com/questions/50798275/how-to-push-a-value-into-an-array-in-perl/50799779#50799779", "title": "How to push a value into an array in Perl?", "body": "<p>There are some tricks that can make things much simpler.</p>\n\n<ul>\n<li><p>Change the input record separator so you read entire (multi-line) records at once. Do that with <code>$/</code>.</p></li>\n<li><p>Once you have the multi-line record, break it into lines. You know the position of the various things in the order of lines.</p></li>\n<li><p>Output the result as you process each line. You don't need a data structure for that.</p></li>\n<li><p>For more complicated things, look at <a href=\"https://www.metacpan.org/module/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> to handle the complexities of comma-separated values files.</p></li>\n</ul>\n\n<hr>\n\n<pre><code>$/ = \"\\n\\n\";  # record separator\nwhile( &lt;FILE&gt; ) {\n    chomp;\n    my @lines = split /\\n/;\n    my ($y, $m, $d, $time ) =\n        $lines[0] =~ /\\A\\#\\d+\\.\\#(\\d+)\\s+(\\d+)\\s+(\\d+)\\s+([^#]+)/;\n    my $action = $lines[-2];\n    my $user = (split /\\s+/, $lines[-1])[-1];\n\n    say join ';',\n        \"$y/$m/$d\",\n        $time,\n        $action,\n        $user\n    }\n</code></pre>\n\n<hr>\n\n<p>But, now let's answer the titular question that may have brought people here. You want to store an array as a hash value. That's easy. An array reference (really, all references), are scalars. You can do the same thing you can do with scalars including using them as hash values:</p>\n\n<pre><code>my @array = ( ... );\nmy %hash;\n\n$hash{'some_key'} = \\@array;  # take a reference to a named array\n</code></pre>\n\n<p>You don't need a named array though. The <code>[ ]</code> creates an array reference directly:</p>\n\n<pre><code>$hash{'some_key'} = [ ... ];  # anonymous array constructor\n</code></pre>\n\n<p>Now you have this array reference value as your hash key and you want to do array-ish things with it. First you need to dereference it. Put the thing that returns the array reference inside <code>@{ }</code>:</p>\n\n<pre><code>@{ $hash{'some_key'} }\n</code></pre>\n\n<p>Use that wherever you'd use the named array:</p>\n\n<pre><code>push @{ $hash{'some_key'} }, 'new value';\npop @{ $hash{'some_key'} };\n</code></pre>\n\n<p>Perl v5.24 has the <a href=\"https://www.effectiveperlprogramming.com/2016/04/postfix-dereferencing-is-stable-is-v5-24/\" rel=\"nofollow noreferrer\">postfix dereferencing feature</a> that makes this a bit prettier:</p>\n\n<pre><code>$hash{'some_key'}-&gt;@*\n</code></pre>\n\n<p>Use that in place of the array:</p>\n\n<pre><code>push $hash{'some_key'}-&gt;@*, 'newer value';\npop $hash{'some_key'}-&gt;@*;\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 50799779, "answer_count": 1, "score": -1, "last_activity_date": 1528753732, "creation_date": 1528721693, "last_edit_date": 1528735142, "question_id": 50798275, "link": "https://stackoverflow.com/questions/50798275/how-to-push-a-value-into-an-array-in-perl", "title": "How to push a value into an array in Perl?", "body": "<p></p>\n\n<p>I've got a problem to insert some values into an hash array, for a neat screen print.</p>\n\n<h3>File Input</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>#2.#2018 05 24 10:43:38:683#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103EC9E50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER1#5##C47731E44D00000bae##0#Thread[HTTP\nWorker [@1473726842],5,Dedicated_Application_Thread]#Plain## Login\nUser: USER1 IP Address: 127.0.0.1 Authentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.#2018 05 24 11:05:04:011#+0200#Info#/Sy/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103EC9F50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER4#6##A40B81404D03c0bae##0#Thread[HTTP\nWorker [@1264376989],5,Dedicated_Application_Thread]#Plain## Login\nUser: USER4 IP Address: 127.0.0.1 Authentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.#2018 05 24 11:05:07:100#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA0C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER3#7##9ACF7Ec0bae##0#Thread[HTTP\nWorker [@124054179],5,Dedicated_Application_Thread]#Plain## Logout\nUser: USER3 IP Address: 127.0.0.1 Authentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.#2018 05 24 11:07:21:314#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20E0000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#03c0bae##0#Thread[HTTP\nWorker [@2033389552],5,Dedicated_Application_Thread]#Plain## Login\nUser: USER2 IP Address: 127.0.0.1 Authentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.#2018 05 02 10:48:05:700#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP\nWorker [@2033389552],5,Dedicated_Application_Thread]#Plain## Logout\nUser: USER2 IP Address: 127.0.0.1 Authentication Stack: ticket\n</code></pre>\n\n<h3>Desired output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Date;Time;Type;User\n2018/05/24;10:43:38:683;Login;USER1\n2018/05/24;11:05:04:011;Login;USER4\n2018/05/24;11:05:07:100;Logout;USER3\n2018/05/24;11:07:21:314;Login;USER2\n</code></pre>\n\n<h3>Perl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\nuse feature qw(say);\n\nmy $path = \"mylog.txt\";\nopen( FILE, $path ) or die $!;\n\nmy @array;\nmy $i = 0;\n\nmy %csv = ( l_d =&gt; 'Date', l_t =&gt; 'Time', l_msg =&gt; 'Type', l_usr =&gt; 'User', cr =&gt; '\\n', );\n\nwhile ( @array = &lt;FILE&gt; ) {\n\n    foreach my $line ( @array ) {\n\n        if ( $line =~ m/^#\\d.\\d.#\\d{4}\\s\\d{2}\\s\\d{2}\\s\\d{2}:\\d{2}:\\d{2}:\\d{3}#\\+\\d+#\\w+#\\/\\w+\\/\\w+\\/Authentication/ ) {\n\n            if ( $array[ $i + 2 ] =~ m/Login/ || $array[ $i + 2 ] =~ m/Logout/ &amp;&amp; $array[ $i + 3 ] !~ m/NOUSER/ ) {\n\n                my $l_d = substr( $line, 6, 10 );\n                $l_d =~ s/\\s/\\//g;\n\n                my $l_t   = substr( $line, 17, 12 );\n                my $l_msg = substr( $array[ $i + 2 ], 0,  -1 );\n                my $l_usr = substr( $array[ $i + 3 ], 6 );\n\n                print \"Date: $l_d\\n\";\n                print \"Time: $l_t\\n\";\n                print \"Type: $l_msg\\n\";\n                print \"User: $l_usr\\n\";\n\n                # I would push these value into %csv('*')\n                #push @{ %csv-&gt;{l_d}-&gt;[$l_d] }, $l_d;       # I would push into %csv('l_d') the $l_d value\n                #push @{ %csv-&gt;{l_t}-&gt;[$l_t] }, $l_t;       # I would push into %csv('l_t') the $l_t value\n                #push @{ %csv-&gt;{l_msg}-&gt;[$l_msg] }, $l_msg; # I would push into %csv('l_msg') the $l_t value\n                #push @{ %csv-&gt;{l_usr}-&gt;[$l_usr] }, $ld_usr;# I would push into %csv('l_usr') the $l_t value\n                # End of loop\n            }\n        }\n\n        $i++;\n    }\n}\n\nclose( FILE );\n\nprint \"Csv Example:\\n\\n\";\nprint \"$csv{'l_d'};$csv{'l_t'};$csv{'l_msg'};$csv{'l_usr'}\\n\";\n\n#open my $filecsv, '&gt;', 'outfile.csv' or die $!;\n#$csv-&gt;print( $filecsv, \\%csv );\n</code></pre>\n\n<p>I'm having trouble putting the original log file, because as soon as I insert it it is mishandled.</p>\n\n<p><a href=\"https://drive.google.com/open?id=1gOhWYqW7VqeoMSJch6PX6LYn1OHpCbmM\" rel=\"nofollow noreferrer\">Link is to <code>mylog.txt</code> file</a></p>\n"}, {"tags": ["perl", "barcode-scanner", "hid"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528719217, "post_id": 50797286, "comment_id": 88600788, "body": "I think this would be impossible to answer without knowing what format the binary data is in."}, {"owner": {"reputation": 41, "user_id": 4137388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwUSv_CsjHQ/AAAAAAAAAAI/AAAAAAAA3TQ/rWo21j9hVcg/photo.jpg?sz=128", "display_name": "Kevin Lin", "link": "https://stackoverflow.com/users/4137388/kevin-lin"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528722923, "post_id": 50797286, "comment_id": 88603115, "body": "Thanks your  information ! My barcode type is &#39;code 93&#39; I will investigate about code format."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528725877, "post_id": 50797286, "comment_id": 88605085, "body": "I think you&#39;d probably need to investigate the hardware first"}, {"owner": {"reputation": 41, "user_id": 4137388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwUSv_CsjHQ/AAAAAAAAAAI/AAAAAAAA3TQ/rWo21j9hVcg/photo.jpg?sz=128", "display_name": "Kevin Lin", "link": "https://stackoverflow.com/users/4137388/kevin-lin"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528735764, "post_id": 50797286, "comment_id": 88611095, "body": "I change code to get hexadecimal for each package. I found some behavior . &#39;A1234&#39;  =&gt; 02000400 00001e00 00001f00 00002000 00002100 . How do I go next??"}, {"owner": {"reputation": 1255, "user_id": 797152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589f919cfbda3d80cd71fa93e65afb10?s=128&d=identicon&r=PG", "display_name": "aja", "link": "https://stackoverflow.com/users/797152/aja"}, "edited": false, "score": 2, "creation_date": 1528881125, "post_id": 50797286, "comment_id": 88670558, "body": "This is a fairly typical USB keyboard data flow. In a nutshell, the 02 is a keyboard modifier code that means the Shift key is pressed and 04 means the &quot;a&quot; key is pressed...giving upper case A. Similarly, 1e means the 1 key is pressed. The all-zero packets mean that no keys are currently pressed."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1255, "user_id": 797152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589f919cfbda3d80cd71fa93e65afb10?s=128&d=identicon&r=PG", "display_name": "aja", "link": "https://stackoverflow.com/users/797152/aja"}, "edited": false, "score": 0, "creation_date": 1528883719, "post_id": 50797286, "comment_id": 88672329, "body": "@aja ah, that makes more sense - whenever I&#39;ve used USB barcode scanners myself, they&#39;ve always been treated like a keyboard by the OS"}], "owner": {"reputation": 41, "user_id": 4137388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwUSv_CsjHQ/AAAAAAAAAAI/AAAAAAAA3TQ/rWo21j9hVcg/photo.jpg?sz=128", "display_name": "Kevin Lin", "link": "https://stackoverflow.com/users/4137388/kevin-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528735537, "creation_date": 1528718600, "last_edit_date": 1528735537, "question_id": 50797286, "link": "https://stackoverflow.com/questions/50797286/devicehid-read-barcode-scanner-convert-binary-to-ascii", "title": "Device::HID read barcode scanner convert binary to Ascii", "body": "<p>I try to read barcode form scanner. I had got data from scanner and the format is binary. How do I conert binary to Ascii string?</p>\n\n<p>The barcode type is code 39.</p>\n\n<p>A1234 =>  [Barcode SCANNRT] => [perl] => binary => ?? A1234 ???</p>\n\n<pre><code>use Device::HID;\nuse Data::Hexdumper qw(hexdump);\n\nmy $dev = Device::HID-&gt;new(vendor =&gt; 0x04b4, product =&gt; 0x0100) or die \"No such device !\\n\";\n$dev-&gt;timeout = 0.1; # seconds (=100 ms)\nmy $buf;\nmy $len=128;\n\nwhile(defined(my $in = $dev-&gt;read_data($buf, $len))){\n\n    if ($in == 0) {\n        next;\n    }\n\n    print hexdump(\n        data           =&gt; $buf, # what to dump\n        suppress_warnings =&gt; false,\n        space_as_space=&gt; true,\n    );\n\n\n}\n</code></pre>\n\n<p>The input \"A1234\" binary output. How to convert to sting \"A1234\".</p>\n\n<pre><code>  0x0000 : 02 00 04 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 1E 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 1F 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 20 00 00 00 00 00 00 00 00 00 00 00 00 00 : .. .............\n  0x0000 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 21 00 00 00 00 00 00 00 00 00 00 00 00 00 : ..!.............\n  0x0000 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n  0x0000 : 00 00 28 00 00 00 00 00 00 00 00 00 00 00 00 00 : ..(.............\n  0x0000 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 : ................\n</code></pre>\n\n<p>I change code to get hexadecimal for each package.</p>\n\n<pre><code>use Device::HID;\nuse Data::Hexdumper qw(hexdump);\nmy $dev = Device::HID-&gt;new(vendor =&gt; 0x04b4, product =&gt; 0x0100) or die \"No such device !\\n\";\n$dev-&gt;timeout = 0.1; # seconds (=100 ms)\nmy $buf;\nmy $len=128;\nmy $i=0;\n\nwhile(defined(my $in = $dev-&gt;read_data($buf, $len))){\n    if ($in == 0) {\n        next;\n    }\n    $i++;\n    my $hex = unpack(  'H*', $buf );\n    print sprintf(\"%02d\",$i).\" =&gt; $hex\\n\";\n}\n</code></pre>\n\n<p>The out is hexadecimal. I change code to output hexadecimal. I received 12 package. \nHow to convert to string 'A1234' ?</p>\n\n<pre><code>01 =&gt; 0200040000000000\n02 =&gt; 0000000000000000\n03 =&gt; 00001e0000000000\n04 =&gt; 0000000000000000\n05 =&gt; 00001f0000000000\n06 =&gt; 0000000000000000\n07 =&gt; 0000200000000000\n08 =&gt; 0000000000000000\n09 =&gt; 0000210000000000\n10 =&gt; 0000000000000000\n11 =&gt; 0000280000000000\n12 =&gt; 0000000000000000\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2747, "user_id": 4027341, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fDBbZ.jpg?s=128&g=1", "display_name": "Scoots", "link": "https://stackoverflow.com/users/4027341/scoots"}, "edited": false, "score": 1, "creation_date": 1528705428, "post_id": 50793266, "comment_id": 88592559, "body": "Is it possible it&#39;s a windows line ending? In which case you&#39;d want to be matching <code>\\r\\n</code> - probably as <code>[\\r\\n]+</code>"}, {"owner": {"reputation": 1476, "user_id": 9164810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eTd4w.png?s=128&g=1", "display_name": "rookie099", "link": "https://stackoverflow.com/users/9164810/rookie099"}, "reply_to_user": {"reputation": 2747, "user_id": 4027341, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fDBbZ.jpg?s=128&g=1", "display_name": "Scoots", "link": "https://stackoverflow.com/users/4027341/scoots"}, "edited": false, "score": 0, "creation_date": 1528705762, "post_id": 50793266, "comment_id": 88592741, "body": "@Scoots Nops, it&#39;s Unix (Debian)."}], "answers": [{"tags": [], "owner": {"reputation": 1476, "user_id": 9164810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eTd4w.png?s=128&g=1", "display_name": "rookie099", "link": "https://stackoverflow.com/users/9164810/rookie099"}, "is_accepted": true, "score": 3, "last_activity_date": 1528708276, "last_edit_date": 1528708276, "creation_date": 1528707463, "answer_id": 50793863, "question_id": 50793266, "link": "https://stackoverflow.com/questions/50793266/remove-multiline-regex-with-perl/50793863#50793863", "title": "Remove multiline regex with Perl", "body": "<p>You are reading a line at a time where a line is defined as a number of character ending with newline, so <code>\\n[ \\t]</code> can't possibly match. You can address this problem by changing the definition of a line to be the entire file (<code>-0777</code>).</p>\n\n<pre><code>perl -0777pe 's/ \\\\\\n[ \\t]+last-lrm-refresh=[0-9]+//' in.txt &gt; out.txt\n</code></pre>\n"}], "owner": {"reputation": 1476, "user_id": 9164810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eTd4w.png?s=128&g=1", "display_name": "rookie099", "link": "https://stackoverflow.com/users/9164810/rookie099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 50793863, "answer_count": 1, "score": 1, "last_activity_date": 1528708276, "creation_date": 1528705271, "question_id": 50793266, "link": "https://stackoverflow.com/questions/50793266/remove-multiline-regex-with-perl", "title": "Remove multiline regex with Perl", "body": "<p>I would like to remove a line which sets an attribute <code>last-lrm-refresh</code> (typically the last line in a group of settings) where input looks e.g. like this:</p>\n\n<pre><code>dc-version=1.1.16-94ff4df \\\ncluster-infrastructure=corosync \\\nmaintenance-mode=false \\\nlast-lrm-refresh=1523005561\n</code></pre>\n\n<p>The following does not work. What am I doing wrong? I have Perl v5.20.2 installed.</p>\n\n<pre><code>perl -pe 's/ \\\\\\n[ \\t]+last-lrm-refresh=[0-9]+//smg' &lt; in.out &gt; out.txt\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1528680108, "creation_date": 1528680108, "answer_id": 50789440, "question_id": 50789274, "link": "https://stackoverflow.com/questions/50789274/dbdmysql-mysql-so-undefined-symbol-net-buffer-length/50789440#50789440", "title": "DBD::mysql: mysql.so: undefined symbol: net_buffer_length", "body": "<p>A recent change to the maria db libraries produces this error; DBD::mysql version 4.046_01 has a fix, but it is not yet in a non-development version.</p>\n\n<p>You can install it with:</p>\n\n<pre><code>cpan MICHIELB/DBD-mysql-4.046_01.tar.gz\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 50789440, "answer_count": 1, "score": 0, "last_activity_date": 1528685328, "creation_date": 1528677854, "last_edit_date": 1528685328, "question_id": 50789274, "link": "https://stackoverflow.com/questions/50789274/dbdmysql-mysql-so-undefined-symbol-net-buffer-length", "title": "DBD::mysql: mysql.so: undefined symbol: net_buffer_length", "body": "<p>My script worked perfectly fine under Centos 6.5 and Mysql.</p>\n\n<p>I recently moved to a new server with Centos 7 and MariaDB.</p>\n\n<p>When I run the script, I get a message:</p>\n\n<p><code>install_driver(mysql) failed:\nCan't load '/usr/local/lib64/perl5/auto/DBD/mysql/mysql.so' for module DBD::mysql: /usr/local/lib64/perl5/auto/DBD/mysql/mysql.so: undefined symbol: net_buffer_length at /usr/lib64/perl5/DynaLoader.pm line 190, &lt;DATA&gt; line 855.  at (eval 55) line 3.\nCompilation failed in require at (eval 55) line 3, &lt;DATA&gt; line 855.\nPerhaps a required shared library or dll isn't installed where expected</code></p>\n\n<p>I have installed perl-DBD-MySQL and other required modules.</p>\n\n<pre><code>#!/usr/bin/perlml\n\nuse lib '/usr/lib/perl5';\nuse 5.008;\nuse strict;\nuse warnings;\n\nuse File::Basename;\nuse File::Copy;\nuse File::Path qw(make_path);\nuse IO::Uncompress::AnyUncompress qw(:all) ;\nuse IO::File;\nuse PHP::Functions::Mail qw(mail);\nuse LWP::Simple;\nuse Parse::CSV;\nuse DBI();\nuse XML::Smart;\nuse Time::Piece;\nuse Data::Dumper;   #for debugging purposes only\n</code></pre>\n\n<p>I am not sure what else to look for.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 2946, "user_id": 751621, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c39aa04d169149a5f792167abcdbbbd?s=128&d=identicon&r=PG", "display_name": "craigcaulfield", "link": "https://stackoverflow.com/users/751621/craigcaulfield"}, "edited": false, "score": 1, "creation_date": 1528676675, "post_id": 50789091, "comment_id": 88584630, "body": "Rather than hand-crafting your XML, look at some of the XML modules to help you out. Check <a href=\"https://stackoverflow.com/questions/154762/how-can-i-create-xml-from-perl\" title=\"how can i create xml from perl\">stackoverflow.com/questions/154762/&hellip;</a> for some ideas."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528681399, "post_id": 50789091, "comment_id": 88585299, "body": "What makes you think you haven&#39;t created an XML file?"}, {"owner": {"reputation": 3, "user_id": 9922655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPBoS_REZkM/AAAAAAAAAAI/AAAAAAAAO2U/cWuz0TcpTXA/photo.jpg?sz=128", "display_name": "Lakshmi Devaraj Nair", "link": "https://stackoverflow.com/users/9922655/lakshmi-devaraj-nair"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528701802, "post_id": 50789091, "comment_id": 88590633, "body": "@Borodin, I tried with both xmlgenerator and xmlwriter, the code fails in both case."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528703398, "post_id": 50789091, "comment_id": 88591469, "body": "The text you wrote into your data.xml file is not valid XML. You should think about what you want to do with that file later on."}], "answers": [{"comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 1, "creation_date": 1528726426, "post_id": 50795695, "comment_id": 88605458, "body": "attribute values also need to be quoted: <code>&lt;coords x1=&quot;XXX&quot;, x2=&quot;XXX&quot;, y1=&quot;XXX&quot;, y2=&quot;XXX&quot; &#47;&gt;</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1528726104, "last_edit_date": 1528726104, "creation_date": 1528713118, "answer_id": 50795695, "question_id": 50789091, "link": "https://stackoverflow.com/questions/50789091/how-to-create-a-xml-file-instead-of-a-plain-text-file/50795695#50795695", "title": "How to create a XML file instead of a plain text file?", "body": "<p>Here's the bit of your code which creates an XML file.</p>\n\n<pre><code>open (MYFILE, '&gt;data.xml');\nprint MYFILE qq{&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;};\nprint MYFILE '&lt;x1=$namex1, x2=$namex2, y1=$namey1, y2=$namey2&gt;';\nprint MYFILE '&lt;slope is $slope1, y-intercept is $inter&gt;';\nclose (MYFILE);\n</code></pre>\n\n<p>There are a few things I'd change, but you've basically got it working. You open the file, write data to the file and then close the file successfully.</p>\n\n<p>Here's what you'll end up in <code>data.xml</code> (I've replaced all of your variables with <code>XXX</code> as I have no idea what values they will have):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;x1=XXX, x2=XXX, y1=XXX, y2=XXX&gt;\n&lt;slope is XXX, y-intercept is XXX&gt;\n</code></pre>\n\n<p>The problem is, that this isn't valid XML. For a start, you need a root element that encloses all other elements in your document. Something like this, perhaps:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;data&gt;\n  &lt;x1=XXX, x2=XXX, y1=XXX, y2=XXX&gt;\n  &lt;slope is XXX, y-intercept is XXX&gt;\n&lt;/data&gt;\n</code></pre>\n\n<p>See, how I've added a <code>&lt;data&gt;</code> ... <code>&lt;/data&gt;</code> around all of your other elements?</p>\n\n<p>And then the two elements that you've added just don't look anything like valid XML. A valid XML element has a name and optional attributes. Your first element is close. It has attributes but no name. Perhaps it should look like this:</p>\n\n<pre><code>&lt;coords x1=XXX, x2=XXX, y1=XXX, y2=XXX&gt;\n</code></pre>\n\n<p>(But I've invented the name, <code>coords</code>, only you can know what it needs to be called.)</p>\n\n<p>Oh, and an XML element needs to be closed. The easiest way is to add a \"self-closing\" slash to the end of the element.</p>\n\n<pre><code>&lt;coords x1=XXX, x2=XXX, y1=XXX, y2=XXX /&gt;\n</code></pre>\n\n<p>Basically (and I'm sorry if this sounds harsh), in order to create an XML file, you need to know what an XML file looks like. And it really doesn't look like you do. Perhaps you need to do some reading on the subject. Or perhaps you need to get more information from the person who asked you to create the XML file. Try asking them for a specification for the format of the XML.</p>\n\n<p>Really, you've got the Perl stuff pretty much right. It's the non-Perl stuff you need help with. And we're not the right people to help you there.</p>\n"}, {"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": 0, "last_activity_date": 1528714181, "creation_date": 1528714181, "answer_id": 50796020, "question_id": 50789091, "link": "https://stackoverflow.com/questions/50789091/how-to-create-a-xml-file-instead-of-a-plain-text-file/50796020#50796020", "title": "How to create a XML file instead of a plain text file?", "body": "<p>Instead of programming all operations on your own, check packages devoted to XML,\nlike <em>XML::Writer</em> or <em>XML::LibXML</em>.</p>\n\n<p>Even on StackOverflow you can find some examples how to use them.</p>\n"}], "owner": {"reputation": 3, "user_id": 9922655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPBoS_REZkM/AAAAAAAAAAI/AAAAAAAAO2U/cWuz0TcpTXA/photo.jpg?sz=128", "display_name": "Lakshmi Devaraj Nair", "link": "https://stackoverflow.com/users/9922655/lakshmi-devaraj-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1528726104, "creation_date": 1528675434, "last_edit_date": 1528675791, "question_id": 50789091, "link": "https://stackoverflow.com/questions/50789091/how-to-create-a-xml-file-instead-of-a-plain-text-file", "title": "How to create a XML file instead of a plain text file?", "body": "<p>I tried many ways to create a XML file but doesn't work. Below is the code to generate plain text file. Can someone suggest a method on how I can create a XML file instead of a text file in the below code?</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse CGI;\nuse strict;\nuse warnings;\n#use CGI::Carp qw(fatalsToBrowser);\n\nmy $q = new CGI;\n\nprint $q-&gt;header;\nprint $q-&gt;start_html(-title =&gt; \"Line Calculation\");\nmy $namex1 = $q-&gt;param('value_x1');\nmy $namex2 = $q-&gt;param('value_x2');\nmy $namey1 = $q-&gt;param('value_y1');\nmy $namey2 = $q-&gt;param('value_y2');\n#entered values are printed:\nprint $q-&gt;h1(\"Calculation of slope and y-intercept\");\nprint $q-&gt;ul(\n$q-&gt;li([\"&lt;b&gt;X1 value:&lt;/b&gt; $namex1\",\"&lt;b&gt;X2 value:&lt;/b&gt; $namex2\",\n\"&lt;b&gt;Y1 value:&lt;/b&gt; $namey1\", \"&lt;b&gt;Y2 value:&lt;/b&gt; $namey2\"])\n);\n\n#calculation of slope and y-intercept is below:\nmy $slope1 = ($namey2-$namey1)/($namex2-$namex1);\nprint $q-&gt;h2(\"Slope(m) is $slope1\"); \nmy $inter = ($namey1-($slope1*$namex1));\nprint $q-&gt;h2(\"y-intercept(b) is $inter\"); \n\n#file is processed below:\nmy $filename = 'file.txt';\nopen(my $fh, '&gt;&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fh \"\\n\\nx1=$namex1, x2=$namex2, y1=$namey1, y2=$namey2\\n\";\nprint $fh \"\\nslope is $slope1, y-intercept is $inter\\n\\n\";\nclose $fh;\n\n\nopen (MYFILE, '&gt;data.xml');\nprint MYFILE qq{&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;};\nprint MYFILE '&lt;x1=$namex1, x2=$namex2, y1=$namey1, y2=$namey2&gt;';\nprint MYFILE '&lt;slope is $slope1, y-intercept is $inter&gt;';\nclose (MYFILE);\n\nprint $q-&gt;li(\"\\nall the list of data entered so far is accessible in file: 'file.txt' and 'data.xml'\\n\");\n\nprint $q-&gt;end_html;\n</code></pre>\n"}, {"tags": ["algorithm", "perl"], "comments": [{"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 0, "creation_date": 1528644925, "post_id": 50785278, "comment_id": 88577041, "body": "Scan the array and keep track of the smallest element larger than the number (if any). There are quite a few ways to do this; what have you tried? If the input array were already sorted, a binary search would be fastest, but that doesn&#39;t appear to apply. Also, please define what you mean by &quot;best&quot;."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 0, "creation_date": 1528646012, "post_id": 50785278, "comment_id": 88577349, "body": "@TedHopp, I edited my question. please take a look."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528649383, "post_id": 50785278, "comment_id": 88578325, "body": "Are the numbers in the array always sorted?"}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1528645836, "post_id": 50785407, "comment_id": 88577309, "body": "Thank you for your fast replay. is it possible without sorting? please look at my edit."}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 2, "creation_date": 1528648316, "post_id": 50785407, "comment_id": 88578015, "body": "If you&#39;re going to the bother of sorting, it would be faster to then do a binary search instead of looping. But overall this is going to be slower because sorting alone is O(n log n) and the problem can be solved in a simple O(n) scan. Plus you destroy the original array."}], "tags": [], "owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "is_accepted": false, "score": 0, "last_activity_date": 1528645636, "creation_date": 1528645636, "answer_id": 50785407, "question_id": 50785278, "link": "https://stackoverflow.com/questions/50785278/best-algorithm-to-find-the-next-higher-number-in-perl/50785407#50785407", "title": "Best algorithm to find the next higher number in perl", "body": "<p>First, sort the array in numerical ascending order. Then loop through elements in array, until a higher number is found.</p>\n\n<pre><code>my $input_number = 6;\n\nmy @array = (2, 5, 3, 8, 15, 10);\nmy @sorted_array = sort { $a &lt;=&gt; $b } @array;\n\nmy $found = 0;\nmy $next_number;\n\nforeach (@sorted_array) {\n    my $loop_number = $_;\n\n    if ($loop_number &gt; $input_number) {\n        $next_number = $loop_number;\n        $found = 1;\n        last;\n    }\n}\n\nif ($found == 1) {\n    print \"next higher number for \" + input_number + \" is: \" + next_number;\n} else {\n    print \"no next higher number found\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528649519, "post_id": 50785555, "comment_id": 88578373, "body": "If the array is always sorted then you can write just <code>my $next_largest = first { $_ &gt; $number } @arr</code>. (<code>first</code> is also in <code>List::Util</code>)"}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528651919, "post_id": 50785555, "comment_id": 88579022, "body": "@Borodin - Based on OP&#39;s example data, the array is not necessarily sorted."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 0, "creation_date": 1528655764, "post_id": 50785555, "comment_id": 88580098, "body": "@TedHopp: Ah. I hadn&#39;t spotted the last two values!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 7, "last_activity_date": 1528646630, "creation_date": 1528646630, "answer_id": 50785555, "question_id": 50785278, "link": "https://stackoverflow.com/questions/50785278/best-algorithm-to-find-the-next-higher-number-in-perl/50785555#50785555", "title": "Best algorithm to find the next higher number in perl", "body": "<pre><code>use List::Util 'min';\nmy @arr = (2,5,3,8,15,10);\nmy $number = 6;\nmy $next_largest = min grep $_ &gt; $number, @arr;\n\nif(defined($next_largest)) {\n    print $next_largest.\"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1528649815, "post_id": 50785736, "comment_id": 88578474, "body": "It doesn&#39;t work (tried to run it) because the one the first iteration the if statement actually checks : <code>if(6 &lt; $_ &amp;&amp; 6 &gt; $_)</code> - always false."}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1528651861, "post_id": 50785736, "comment_id": 88579002, "body": "@TTaJTa4 - Oops. Yeah, I left out the special treatment needed for the sentinel value."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1528651936, "post_id": 50785736, "comment_id": 88579029, "body": "Is there a way to fix it? That is the way I need it."}], "tags": [], "owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "is_accepted": false, "score": 0, "last_activity_date": 1528651786, "last_edit_date": 1528651786, "creation_date": 1528647879, "answer_id": 50785736, "question_id": 50785278, "link": "https://stackoverflow.com/questions/50785278/best-algorithm-to-find-the-next-higher-number-in-perl/50785736#50785736", "title": "Best algorithm to find the next higher number in perl", "body": "<p>You can use <code>$number</code> as a sentinel value:</p>\n\n<pre><code>my @arr = (2,5,3,8,15,10);\nmy $number = 6;\nmy $next_largest = $number;\nforeach (@arr) {\n    if($number &lt; $_ &amp;&amp; ($next_largest == $number || $next_largest &gt; $_)) {\n        $next_largest = $_;\n    }\n}\n\nif($next_largest &gt; $number) {\n    print $next_largest.\"\\n\";\n}\n</code></pre>\n\n<p>This eliminates the arbitrary large value in your code and only prints a result if an element strictly greater than <code>$number</code> was found.</p>\n\n<p>Note: The <a href=\"https://stackoverflow.com/a/50785555/535871\">answer by @ysth</a> is much more elegant, but mine may be a bit more memory efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1528723908, "last_edit_date": 1528723908, "creation_date": 1528723103, "answer_id": 50798680, "question_id": 50785278, "link": "https://stackoverflow.com/questions/50785278/best-algorithm-to-find-the-next-higher-number-in-perl/50798680#50798680", "title": "Best algorithm to find the next higher number in perl", "body": "<p>This does it too:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy @arr = (2,5,3,8,15,10);\nmy $number = 6;\nmy $next_largest = (sort {$a &lt;=&gt; $b} grep {$_ &gt; $number} @arr)[0];\nif(defined($next_largest)) {\n    print $next_largest.\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1528723908, "creation_date": 1528644802, "last_edit_date": 1528646547, "question_id": 50785278, "link": "https://stackoverflow.com/questions/50785278/best-algorithm-to-find-the-next-higher-number-in-perl", "title": "Best algorithm to find the next higher number in perl", "body": "<p>I tried to find previous threads similar to my question but didn't find.</p>\n\n<p>Consider a function which gets an array and a number. I would like to find the next higher number.</p>\n\n<p>Example:</p>\n\n<p>Input: <code>arr = {2,5,3,8,15,10}, number = 6</code> </p>\n\n<p>Output: <code>8</code> because <code>6 &lt; 8</code>.</p>\n\n<p>What is the best algorithm to do it in Perl?</p>\n\n<p>Edit: What I tried:</p>\n\n<pre><code>my @arr = (2,5,3,8,15,10);\nmy $number = 6;\nmy $next_largest = 10000000;\nforeach my $val (@arr) {\n    if($number &lt; $val &amp;&amp; $next_largest &gt; $val) {\n        $next_largest = $val;\n    }\n}\n\nif(defined($next_largest)) {\n    print $next_largest.\"\\n\";\n}\n</code></pre>\n\n<p>Is there a way without declaring <code>$next_largest = 10000000</code>? it doesn't look very good and it doesn't handle the case of value higher than this value. Also if I try <code>$next_lergest</code> without a number, it doesn't work.</p>\n\n<p>By best I meant - best looking (time isn't important so much).</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1528712344, "post_id": 50784039, "comment_id": 88596684, "body": "Perhaps you could start by explaining what problems you are having? What isn&#39;t working how you want it to? The syntax highlighting in your code example clearly shows that something isn&#39;t right. Perhaps you could start by fixing those problems."}], "answers": [{"tags": [], "owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "is_accepted": false, "score": 0, "last_activity_date": 1528646836, "creation_date": 1528646836, "answer_id": 50785589, "question_id": 50784039, "link": "https://stackoverflow.com/questions/50784039/radio-button-go-to-another-file-on-submit/50785589#50785589", "title": "Radio Button go to another file on Submit", "body": "<p>Here's a suggested solution.</p>\n\n<p>Create a separate subroutine for each of the radio button options.  Create a dispatch table using those subs.  Execute the appropriate dispatch table subroutine based on the form submission.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1528729015, "last_edit_date": 1528729015, "creation_date": 1528728690, "answer_id": 50800541, "question_id": 50784039, "link": "https://stackoverflow.com/questions/50784039/radio-button-go-to-another-file-on-submit/50800541#50800541", "title": "Radio Button go to another file on Submit", "body": "<p>Here's some high level code that might help.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# Use functions from CGI.pm to make your life easier\nuse CGI qw[header redirect param];\n\n# Hash containing valid redirection values.\nmy %valid_redirects = map { $_ =&gt; 1 } qw[process calendar location\n                                       users find];\n\n# Get the chosen option\nmy $option = param('option');\n\n# If we've a) got an option and b) it's a valid option\n# then redirect to the chosen page.\nif ($option and $valid_redirects{$option}) {\n  # You'll need to write a redirect_to() subroutine\n  print redirect_to(\"$option.html\");\n} else {\n  # If we don't have a valid redirection option, display the form.\n  # You'll need to write an html_form() subroutine\n  print header;\n  print html_form();\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4577683, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh3.googleusercontent.com/-t_6FT0pKclk/AAAAAAAAAAI/AAAAAAAAAKs/YZEYWaN5P_s/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/4577683/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 50800541, "answer_count": 2, "score": -6, "last_activity_date": 1528729015, "creation_date": 1528636238, "last_edit_date": 1528638354, "question_id": 50784039, "link": "https://stackoverflow.com/questions/50784039/radio-button-go-to-another-file-on-submit", "title": "Radio Button go to another file on Submit", "body": "<p>I'm writing a Perl CGI script. My <code>index</code> page should display a set of radio buttons in a form and go to another page/file according to the selected button.</p>\n\n<p>I can't figure out the right way to do it. </p>\n\n<p>Here's my code: </p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"&lt;!DOCTYPE html&gt;\";\nprint \"&lt;html&gt;\";\nprint \"&lt;body&gt;\";\nprint \"&lt;h1&gt; Welcome to Magnum &lt;/h1&gt;\";\nprint \"&lt;h2&gt; System Check &lt;/h2&gt;\";\nprint \"&lt;h2&gt; -------------------- &lt;/h2&gt;\";\n\nprint \"&lt;form method='post'&gt;\";\nprint \"&lt;input type='radio' name='option' value='process' formaction='/home/john/www/process'/ &gt; View My Process&lt;$\nprint \"&lt;input type='radio' name='option' value='calendar'&gt; View Calendar &lt;br&gt;\";\nprint \"&lt;input type='radio' name='option' value='location'&gt; View my location coordinates&lt;br&gt; Latitude and Altitud$\nprint \"&lt;input type='radio' name='option' value='users'&gt; View all users connected on my System&lt;br&gt;\";\nprint \"&lt;input type='radio' name='option' value='find'&gt; Find a file or Directory&lt;br&gt;\";\n\nprint \"&lt;input type='submit' name='submit' value='Submit'&gt; &lt;br&gt;\";\n\n\nprint \"&lt;/form&gt;\";\nprint \"&lt;h2&gt; -------------------- &lt;/h2&gt;\";\nprint \"&lt;/body&gt;\";\nprint \"&lt;/html&gt;\";\n</code></pre>\n\n<p>It has to be written like this as it's the way we've been taught.\nIf an answer involves something too different then it won't help, </p>\n"}, {"tags": ["perl", "duplicates", "vcf-vcard"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528571501, "post_id": 50776329, "comment_id": 88562283, "body": "Lesson one: keep backups"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "edited": false, "score": 0, "creation_date": 1528660928, "post_id": 50777257, "comment_id": 88581439, "body": "Thanks melpomene, the problem is that there is n BEGIN:VCARD, therefore, it will erase all the BEGIN:VCARD and other labels that are repeated. How could I execute the command for each BEGIN."}, {"owner": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "edited": false, "score": 0, "creation_date": 1528721835, "post_id": 50777257, "comment_id": 88602454, "body": "Thanks, although with this script it deletes all the tags &quot;BEGIN:VCARD&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "edited": false, "score": 0, "creation_date": 1528734628, "post_id": 50777257, "comment_id": 88610476, "body": "@Ravai Oh, hmm. Try the new version."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1528734616, "last_edit_date": 1528734616, "creation_date": 1528568304, "answer_id": 50777257, "question_id": 50776329, "link": "https://stackoverflow.com/questions/50776329/delete-duplicate-records-in-a-vcard-file/50777257#50777257", "title": "Delete duplicate records in a vCard file", "body": "<p>The easiest way to delete all duplicate lines is</p>\n\n<pre><code>perl -ne 'print if !$seen{$_}++'\n</code></pre>\n\n<p>If you want to treat each <code>BEGIN:VCARD</code> section separately,</p>\n\n<pre><code>perl -ne '%seen = () if /\\bBEGIN:VCARD\\b/; print if !$seen{$_}++'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9917722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac451abd4e5067f93c800bf79bd8be5?s=128&d=identicon&r=PG&f=1", "display_name": "Ravai", "link": "https://stackoverflow.com/users/9917722/ravai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 50777257, "answer_count": 1, "score": -4, "last_activity_date": 1528734616, "creation_date": 1528561728, "last_edit_date": 1528571451, "question_id": 50776329, "link": "https://stackoverflow.com/questions/50776329/delete-duplicate-records-in-a-vcard-file", "title": "Delete duplicate records in a vCard file", "body": "<p>I have a vCard file with records for thousands of contacts. This file has been corrupted and copies of personal phone, work, and extra records have been added for each of the users.</p>\n\n<p>How could I clean up duplicates?</p>\n\n<pre><code>BEGIN:VCARD\nVERSION:3.0\nN:Doe;John;Q.,Public\nFN;CHARSET=UTF-8:John Doe\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=HOME,VOICE:(404) 555-1212\nTEL;TYPE=HOME,VOICE:(404) 555-1212\nTEL;TYPE=HOME,VOICE:(404) 555-1212\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=HOME,VOICE:(404) 555-1212\nTEL;TYPE=HOME,VOICE:(404) 555-1212\nTEL;TYPE=HOME,VOICE:(404) 555-1212\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nADR;TYPE=HOME:;;42 Plantation St.;Baytown;LA;30314;United States of America\nURL:https://www.google.com/\nPHOTO;VALUE=URL;TYPE=PNG:http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Example_svg.svg/200px-Example_svg.svg.png\nAGENT:BEGIN:VCARD\n VERSION:3.0\n N:Doe;John;Q.,Public\n FN:John Doe\n TEL;TYPE=WORK,VOICE:(111) 555-1212\n TEL;TYPE=HOME,VOICE:(404) 555-1212\n TEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\n EMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\n EMAIL;TYPE=INTERNET:example@example.com\n PHOTO;VALUE=URL;TYPE=PNG:http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Example_svg.svg/200px-Example_svg.svg.png\n END:VCARD\nEND:VCARD\n</code></pre>\n\n<p>I have used the following solution seen in StackOverflow, but it has not solved the problem since not all duplicates appear consecutively.</p>\n\n<pre><code>perl -ne 'print unless (defined($prev) &amp;&amp; ($_ eq $prev)); $prev=$_'\n</code></pre>\n\n<p>resulting in:</p>\n\n<pre><code>...\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nTEL;TYPE=WORK,VOICE:(111) 555-1212\nTEL;TYPE=HOME,TYPE=VOICE:(404) 555-1213\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=INTERNET:example@example.com\nEMAIL;TYPE=PREF,INTERNET:forrestgump@example.com\nEMAIL;TYPE=INTERNET:example@example.com\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1528567274, "post_id": 50776304, "comment_id": 88561133, "body": "because you have a formatted dare/time that goes from YYYY/MM/DD hh:mm ( all components from \u2018big\u2019 to \u2018small\u2019 units, for simple things like this, one can so simple string comparisons. Sometimes things are not so complicated at all"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1528567633, "post_id": 50776304, "comment_id": 88561244, "body": "and checking if something is \u2018in between\u2019 is a check that is usually done in two steps. Since you want to check something like $a &lt; $x &lt; $b that is basically the same as: ($a &lt; $x) and ($x &lt; $b). Success, happy coding, TIMTOWTDI"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528567956, "post_id": 50776304, "comment_id": 88561333, "body": "The module you found, <a href=\"http://search.cpan.org/~drolsky/DateTime-1.49/lib/DateTime.pm\" rel=\"nofollow noreferrer\">DateTime</a>, is the most rounded one for dates and times. It comes with a lot of functionality; browse its documentation.  Comparison of dates is done with its class method <a href=\"http://search.cpan.org/~drolsky/DateTime-1.49/lib/DateTime.pm#DateTime-%3Ecompare%28_%24dt1,_%24dt2_%29,_DateTime-%3Ecompare_ignore_floating%28_%24dt1,_%24dt2_%29\" rel=\"nofollow noreferrer\">compare</a>, as <code>DateTime-&gt;compare($dt1, $dt2)</code> where you get <code>1</code>/<code>-1</code>/<code>0</code>. See docs."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1528572840, "post_id": 50776304, "comment_id": 88562616, "body": "... or just trust the magic of overloading and that one can simply compare two DateTime objects. If you can make a clone, like: <code>$dt_start = $dt1-&gt;clone</code> and then change the time: <code>$dt_start-&gt;set_hour(09); $dt_start-&gt;set_minute(00)</code>, same for <code>$dt_end</code> At this moment, you can now safely compare the three DateTime objects: <code>$dt_start lt $dt1 and $dt1 lt $dt_end</code> --- See <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">docs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1528580061, "post_id": 50778151, "comment_id": 88564299, "body": "\ud83e\udd14 wondering why a &#39;vote down&#39; \ud83d\udc4e while it provides all the details to solve the problem \u2753"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": true, "score": 2, "last_activity_date": 1528579993, "last_edit_date": 1528579993, "creation_date": 1528575266, "answer_id": 50778151, "question_id": 50776304, "link": "https://stackoverflow.com/questions/50776304/perl-input-datetime-create-a-start-and-end-point-from-parts-of-input-and-check/50778151#50778151", "title": "PERL: Input datetime, create a start and end point from parts of input and check if inbetween", "body": "<p>Below is a fully working example. It may require some adjustments for your own personal preferences, like what you want to have for input message and the printing of other things. But you probably know how to do that!</p>\n\n<p>If you run the script, it will wait for input in the <code>YYYY/MM/DD-hh:mm</code> format and will let you know if it is between 9am and 2pm,.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DateTime::Format::Strptime;\n\nchomp ( my $input =  &lt;&gt;  );\n\nmy $strptime = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%Y/%m/%d-%H:%M');\n\nmy $dt_check = $strptime-&gt;parse_datetime($input);\nmy $dt_start = clone_with_time($dt_check, '09:00');\nmy $dt_stops = clone_with_time($dt_check, '14:00');\n\n\nmy $check = ( $dt_start lt $dt_check and $dt_check lt $dt_stops ) ? \"Yay\": \"Nay\";\n\nprint \"$check\\n\";\n\n# return a cloned DateTime object, set with the given time\nsub clone_with_time {\n    my ($dt_old, $time) = @_;\n    my ($hh, $mm) = split /:/, $time;\n    my $dt_new = $dt_old-&gt;clone;\n    $dt_new-&gt;set( hour =&gt; $hh, minute =&gt; $mm);\n    return $dt_new\n}\n</code></pre>\n\n<p>The <code>clone_with_time</code> subroutine takes a DateDime object (the one we got from the input) and a time string in the <code>hh:mm</code> format. The subroutine then clones that object and sets the time accordingly.</p>\n\n<p>Subroutines are nice to have if one needs to repeat some statements multiple times, in this example, to generate <code>$dt_start</code> and <code>$dt_stops</code>. It keeps the main program clean and easy to follow. while coding, keep <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY</a> in mind.</p>\n\n<p>TIMTOWTDI</p>\n"}], "owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 50778151, "answer_count": 1, "score": 1, "last_activity_date": 1528579993, "creation_date": 1528561578, "last_edit_date": 1528564473, "question_id": 50776304, "link": "https://stackoverflow.com/questions/50776304/perl-input-datetime-create-a-start-and-end-point-from-parts-of-input-and-check", "title": "PERL: Input datetime, create a start and end point from parts of input and check if inbetween", "body": "<p>As a beginner I struggle abit.</p>\n\n<p>I want to get a datetime input from the user like this.</p>\n\n<blockquote>\n  <p>2018/06/21-10:30</p>\n</blockquote>\n\n<p>Then I have two other times that marks the start and end for a daily period of time.</p>\n\n<blockquote>\n  <p>09:00 and 14:00</p>\n</blockquote>\n\n<p>What I want is for the script to take the input. Apply the date part to the two other times so they will be like this:</p>\n\n<blockquote>\n  <p>2018/06/21-09:00 and 2018/06/21-14:00</p>\n</blockquote>\n\n<p>Then I want to run the input from the user and check if the time entered is within the time of the two other newly formed datetimes.</p>\n\n<p>Are there any great way to do this? Or another approach to this?</p>\n\n<p>::EDIT 1::</p>\n\n<p>Okey. I have been playing around abit and I have found a way.<br>\nAny suggestions or am I going the right path?</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse 5.010;\nuse utf8;\nuse open qw(:encoding(UTF-8) :std);\n\nuse DateTime::Format::Strptime;\n\nprint \" Enter START with following pattern Y/m/d-H:M -&gt; \";\nchomp ( my $input1 = &lt;&gt; );\n\nmy $parser = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%Y/%m/%d-%H:%M');\n\nmy $dt1 = $parser-&gt;parse_datetime($input1) or die;\n\nmy $wd_start_ftd = $dt1-&gt;ymd('/').\"-09:00\";\nmy $wd_stop_ftd = $dt1-&gt;ymd('/').\"-14:00\";\n\nprint \"\\n Start of the day is \", $wd_start_ftd;\nprint \"\\n End of the day is \", $wd_stop_ftd;\n</code></pre>\n\n<p>That gives me this</p>\n\n<blockquote>\n  <p>Enter START with following pattern Y/m/d-H:M -> 2018/06/07-10:30</p>\n  \n  <p>Start of the day is 2018/06/07-09:00  End of the day is\n  2018/06/07-14:00</p>\n</blockquote>\n\n<p>Now all i need is to get something up to test if the input is ib between start and stop values.</p>\n"}, {"tags": ["perl", "testing", "cpan"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1528545289, "post_id": 50773949, "comment_id": 88554987, "body": "Add a 00_prereqs.t test file that installs / tests it if not yet installed...."}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1528545622, "post_id": 50773949, "comment_id": 88555065, "body": "That won&#39;t help CPAN Testers, just yield failures."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528546015, "post_id": 50773949, "comment_id": 88555156, "body": "What do you mean by &quot;tell CPAN Testers what to do&quot;?"}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528546386, "post_id": 50773949, "comment_id": 88555248, "body": "@melpomene The people running the automated tests against all of CPAN (ie CPAN Testers) will need to setup the external software before running the tests (otherwise they will all fail).  So, hopefully there is some sort of metadata I can add to the distribution that tells the automated tester what to do (or at least not to count failures if it isn&#39;t done against the module)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528546437, "post_id": 50773949, "comment_id": 88555259, "body": "What to do is controlled entirely by <code>Makefile.PL</code> / <code>Build.PL</code>, same as every other module."}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528546603, "post_id": 50773949, "comment_id": 88555301, "body": "@melpomene Installing external software or setting environment variables with the tester&#39;s AWS credentials is beyond the scope of Makefile.PL."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528704422, "post_id": 50773949, "comment_id": 88592009, "body": "Have you considered asking them in #toolchain on irc.perl.org?"}], "answers": [{"comments": [{"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "edited": false, "score": 0, "creation_date": 1528556165, "post_id": 50775188, "comment_id": 88557965, "body": "If you take a look at the testing matrix for <a href=\"http://matrix.cpantesters.org/?dist=DBD-Oracle+1.74\" rel=\"nofollow noreferrer\">DBD::Oracle</a>, it is abysmal (probably for the same reason)."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1528553830, "creation_date": 1528553830, "answer_id": 50775188, "question_id": 50773949, "link": "https://stackoverflow.com/questions/50773949/how-can-i-tell-cpan-testers-how-to-setup-the-environment-for-my-tests/50775188#50775188", "title": "How can I tell CPAN Testers how to setup the environment for my tests?", "body": "<p>Look at what other CPAN modules that have external dependencies do, and do something like that.</p>\n\n<p>For example, look at the DBI drivers for various databases. While File and SQLite come with their own prereqs, the same is not true for others like Oracle and DB2.  Or look at wxGTK which, IIRC, uses an Alien package to install Wx.</p>\n\n<p>In your case, I would suggest more along the lines of the DBD drivers than embedding through Alien, but you have to make that choice.</p>\n"}, {"comments": [{"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "edited": false, "score": 0, "creation_date": 1528555753, "post_id": 50775222, "comment_id": 88557844, "body": "The tests only cost money if you use AWS, but you can now use the local version of DynamoDB; however, you have to download, decompress and run it (and possibly the install the JRE) to use it.  Also, this isn&#39;t a matter of not testing some functionality; it is a matter of testing any functionality at all."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 4, "last_activity_date": 1528554071, "creation_date": 1528554071, "answer_id": 50775222, "question_id": 50773949, "link": "https://stackoverflow.com/questions/50773949/how-can-i-tell-cpan-testers-how-to-setup-the-environment-for-my-tests/50775222#50775222", "title": "How can I tell CPAN Testers how to setup the environment for my tests?", "body": "<p>CPAN Testers run the same tests that your module will run upon installation. Should your tests install other software on the machine? Probably not. Instead, the tests should fail loudly when its prerequisites are not met.</p>\n\n<p>You should also draw a distinction between author tests and installation tests. There is no expectation that the installation tests verify all the functionality. Expensive tests (in this case, tests that literally cost money) shouldn't be part of that. You can run them yourself before you release. However, it might be better to put them in <code>xt/</code> and guard them with the <code>EXTENDED_TESTING</code> variable instead of a non-standard environment variable. See also the <a href=\"https://github.com/Perl-Toolchain-Gang/toolchain-site/blob/master/lancaster-consensus.md\" rel=\"nofollow noreferrer\">Lancaster Consensus</a> for a discussion of various environment variables during testing of Perl projects.</p>\n\n<p>You can also consider using a different provider for your more thorough tests than the donated CPAN Testers capacity, e.g. by setting up Travis CI for your project. Since they give you a container to play around, you can install extra software. You can also securely provide credentials to your tests. In contrast, the main advantage of CPAN Testers is the diverse range of operating systems, i.e. the <em>lack of control</em> over the testing environment.</p>\n"}, {"comments": [{"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "edited": false, "score": 0, "creation_date": 1528665894, "post_id": 50780181, "comment_id": 88582665, "body": "That doesn&#39;t seem any better than the current scheme.  The goal is to be able to actually run the tests in CPAN Testers (it is zero cost if you use the local version of DynamoDB)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1528599749, "last_edit_date": 1528599749, "creation_date": 1528599200, "answer_id": 50780181, "question_id": 50773949, "link": "https://stackoverflow.com/questions/50773949/how-can-i-tell-cpan-testers-how-to-setup-the-environment-for-my-tests/50780181#50780181", "title": "How can I tell CPAN Testers how to setup the environment for my tests?", "body": "<p>Call <code>die</code> from <code>Makefile.PL</code> or <code>Build.PL</code> if the prerequisites for building your module cannot be satisfied. On CPANTesters, aborting from the Makefile will give you an <a href=\"http://matrix.cpantesters.org/?dist=Sys-CpuAffinity%201.12;os=mswin32;perl=5.24.0;reports=1\" rel=\"nofollow noreferrer\">NA test result</a> instead of a <a href=\"http://matrix.cpantesters.org/?dist=Sys-CpuAffinity%201.12;os=openbsd;perl=5.24.1;reports=1\" rel=\"nofollow noreferrer\">FAIL test result</a>, and does not reflect poorly on your module and your build process.</p>\n\n<pre><code># Makefile.PL\n...\nif ($ENV{AUTOMATED_TESTING}) {\n    if (!$ENV{AMAZON_DYNAMODB_EXPENSIVE_TESTS} ||\n            !$ENV{EC2_ACCESS_KEY} ||\n            !$ENV{EC2_SECRET_KET}) {\n        die \"To test this module, you must set the environment\\n\",\n            \"variables  EC2_ACCESS_KEY, EC2_SECRET_KEY, and\\n\",\n            \"AMAZON_DYNAMODB_EXPENSIVE_TESTS.  Be advised that\\n\",\n            \"running these test will result in charges against\\n\",\n            \"your AWS account.\";\n    }\n}\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1528728822, "creation_date": 1528728822, "answer_id": 50800595, "question_id": 50773949, "link": "https://stackoverflow.com/questions/50773949/how-can-i-tell-cpan-testers-how-to-setup-the-environment-for-my-tests/50800595#50800595", "title": "How can I tell CPAN Testers how to setup the environment for my tests?", "body": "<blockquote>\n  <p>Is there some way to tell CPAN Testers what to do?</p>\n</blockquote>\n\n<p>This is more of a social problem than a technical one.</p>\n\n<p>You can ask the regulars on <a href=\"https://lists.perl.org/list/cpan-testers-discuss.html\" rel=\"nofollow noreferrer\">cpan-testers-discuss</a> to manually set up the requirements; there's precedent for doing so. Not everyone will oblige, of course.</p>\n\n<p>Another possibility is to reach out to your module's users and ask them to become ad-hoc test reporters via <a href=\"http://p3rl.org/CPAN::Reporter\" rel=\"nofollow noreferrer\">Task::CPAN::Reporter</a>/<a href=\"http://p3rl.org/cpanm-reporter\" rel=\"nofollow noreferrer\">cpanm-reporter</a> or similar.</p>\n"}], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1528728822, "creation_date": 1528544871, "last_edit_date": 1528548041, "question_id": 50773949, "link": "https://stackoverflow.com/questions/50773949/how-can-i-tell-cpan-testers-how-to-setup-the-environment-for-my-tests", "title": "How can I tell CPAN Testers how to setup the environment for my tests?", "body": "<p>I am writing tests that require external software (Amazon's local DynamoDB server) to be installed and running.  Is there some way to tell <a href=\"http://www.cpantesters.org/\" rel=\"nofollow noreferrer\">CPAN Testers</a> what to do?</p>\n\n<p>Or should I just download the server and start it myself in the test setup? That would require Java 6.x or newer to be installed. So I think I am back to the first question.</p>\n\n<p>In case people don't know, CPAN Testers is a group of people who test all of CPAN using automated scripts called smokers.</p>\n\n<p>Further background:</p>\n\n<p>Right now, <a href=\"http://matrix.cpantesters.org/?dist=Amazon-DynamoDB+0.35\" rel=\"nofollow noreferrer\">CPAN Testers</a> shows 227 machines pass all tests for Amazon::DynamoDB, but that is misleading since only one of the over seven thousand tests is currently being run: <code>use_ok( 'Amazon::DynamoDB' );</code>.  The rest are hidden behind <code>unless</code> statements:</p>\n\n<pre><code>unless ( $ENV{'AMAZON_DYNAMODB_EXPENSIVE_TESTS'} ) {\n    plan skip_all =&gt; 'Testing this module for real costs money.';\n}\n</code></pre>\n\n<p>And a significant number of the tests <a href=\"https://github.com/rustyconover/Amazon-DynamoDB/issues/11\" rel=\"nofollow noreferrer\">do not pass</a>.  I have fixed that, but testing requires either the setting of three environment variables in the tester's environment and money (the current way):</p>\n\n<pre><code>AMAZON_DYNAMODB_EXPENSIVE_TESTS=1\nEC2_ACCESS_KEY=&lt;user's AWS access key&gt;\nEC2_SECRET_KEY=&lt;user's AWS secret key&gt;\n</code></pre>\n\n<p>or the installation of the local version of Amazon DynamoDB.  If this module is released as is, it will appear broken on all machines it runs on that don't have the prerequisite environment setup (ie it will erroneously appear broken rather than erroneously appear to be working).</p>\n"}, {"tags": ["perl", "url"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528534103, "post_id": 50772168, "comment_id": 88552382, "body": "Works for me (copied verbatim and with your input copy pasted).  How do you enter input &quot;&#197;m&#229;l&quot; (from what kind of terminal)?  Try adding <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1528534578, "post_id": 50772168, "comment_id": 88552510, "body": "(works on linux with xterm for input, v5.16)"}, {"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528538120, "post_id": 50772168, "comment_id": 88553293, "body": "I updated my initial post after trying your addition to the code aswell as answer to your question. @zdim"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1528562144, "post_id": 50772168, "comment_id": 88559692, "body": "It also works on my mac, in fact even without the addition by @zdim since I have <code>PERL_UNICODE</code> exported as <code>ASD</code>. It does basically the same thing. I&#39;m no expert in windows, but this does look like a terminal problem, as described in the answer below."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "edited": false, "score": 0, "creation_date": 1528562762, "post_id": 50775041, "comment_id": 88559874, "body": "Thanks for the great answer. Luckily I am not bound to Windows so I can run this through a Linux machine instead. The most important for me is that the code is OK. Since I am learning Perl and dont want to get stuck on something as wierd as this. Had I not posted here I could have been sitting here for hours and hours not getting anywhere. Thanks once again."}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 3, "last_activity_date": 1528555312, "last_edit_date": 1528555312, "creation_date": 1528552704, "answer_id": 50775041, "question_id": 50772168, "link": "https://stackoverflow.com/questions/50772168/trying-to-input-variable-into-url-and-having-encoding-issues/50775041#50775041", "title": "Trying to input variable into url and having encoding issues", "body": "<p>The problem is that CMD.exe is limited to 8-bit codepages. The \"<code>\u00c5</code>\" and \"<code>\u00e5</code>\" characters are mapped (in Swedish Windows) to positions in the upper 8-bit range of codepage 850 that are illegal code points in Unicode.</p>\n\n<p>If you need to output non-7-bit-ASCII characters, consider running PowerShell ISE. If you set it up correctly, it can cope with any character (in output) that the font you're using supports. The big downside is that PowerShell ISE is not a console, and therefore doesn't allow input from console/keyboard using STDIN. You can work around this by supplying your input as arguments, from a pipe, in a setting file, or thru graphical UI query elements.</p>\n\n<h2>To set up Windows PowerShell ISE to work with UTF8:</h2>\n\n<ol>\n<li><p>Set PowerShell to allow running local unsigned user scripts by running (in administrator elevated PowerShell):</p>\n\n<pre><code>Set-ExecutionPolicy RemoteSigned\n</code></pre></li>\n<li><p>Create or edit the file \"<code>&lt;Documents&gt;\\WindowsPowerShell\\Microsoft.PowerShellISE_profile.ps1</code>\" and add something like:</p>\n\n<pre><code>perl -w -e 'print qq!Initializing with Perl...\\n!;'\n[System.Console]::OutputEncoding = [System.Text.Encoding]::UTF8;\n</code></pre>\n\n<p>(You need the Perl bit (or something equivalent) there to allow for the \nmodification of the encoding.)</p></li>\n<li><p>In PowerShell ISE's options, set the font to Consolas.</p></li>\n<li><p>In your perl scripts, always do:</p>\n\n<pre><code>binmode(STDOUT, ':encoding(UTF-8)');\nbinmode(STDERR, ':encoding(UTF-8)');\n</code></pre></li>\n</ol>\n\n<h2>My solution to the OP's problem:</h2>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $row = 0;\n\nuse XML::LibXML;\n\nbinmode(STDOUT, ':encoding(UTF-8)');\nbinmode(STDERR, ':encoding(UTF-8)');\n\n@ARGV  or  die \"No arguments!\\n\";\n\nmy $ort = shift @ARGV;\n\nprint \"\\n\\n\\nGetting weather report for \\\"$ort\\\"\\n\";\n\nmy $url = join('', \"http://www.yr.no/place/Sweden/V\u00e4stra_G\u00f6taland/\",$ort,\"/forecast_hour_by_hour.xml\");\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $url);\n\nprint \"\\n\\nSee below the weather for \", $ort, \":\\n\\n\";\n\nforeach my $weatherdata ($dom-&gt;findnodes('//time')) {\n\n    if($row != 10){ \n\n        my $temp = $weatherdata-&gt;findvalue('./temperature/@value');\n        my $value = $weatherdata-&gt;findvalue('./@from');\n\n        my $valuesub = substr $value, 11, 5;\n\n        print \"At \", $valuesub, \" the temperature will be: \", $temp, \"C\\n\";\n\n        $row++;\n    }\n}\n\nprint \"\\n\\n\";\n</code></pre>\n\n<h2>Output:</h2>\n\n<p>(run at around 2018-06-09T14:05 UTC; 16:05 CEST (which is Sweden's time zone)):</p>\n\n<pre><code>PS (censored)&gt; perl -w $env:perl5lib\\Tests\\Amal-Test.pl \"\u00c5m\u00e5l\"\n\n\n\nGetting weather report for \"\u00c5m\u00e5l\"\n\n\nSee below the weather for \u00c5m\u00e5l:\n\nAt 17:00 the temperature will be: 27C\nAt 18:00 the temperature will be: 26C\nAt 19:00 the temperature will be: 25C\nAt 20:00 the temperature will be: 23C\nAt 21:00 the temperature will be: 22C\nAt 22:00 the temperature will be: 21C\nAt 23:00 the temperature will be: 20C\nAt 00:00 the temperature will be: 19C\nAt 01:00 the temperature will be: 18C\nAt 02:00 the temperature will be: 17C\n</code></pre>\n\n<h2>Another note:</h2>\n\n<p>Relying on data to always be in an exact position in a string might not be the best idea.</p>\n\n<p>Instead of:</p>\n\n<pre><code>my $valuesub = substr $value, 11, 5;\n</code></pre>\n\n<p>maybe consider matching it with a regular expression instead:</p>\n\n<pre><code>if ($value =~ /T((?:[01]\\d|2[0-3]):[0-5]\\d):/) {\n    my $valuesub = $1;\n    print \"At \", $valuesub, \" the temperature will be: \", $temp, \"C\\n\";    }\nelse {\n    warn \"Malformed value: $value\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 50775041, "answer_count": 1, "score": 1, "last_activity_date": 1528555312, "creation_date": 1528531266, "last_edit_date": 1528537894, "question_id": 50772168, "link": "https://stackoverflow.com/questions/50772168/trying-to-input-variable-into-url-and-having-encoding-issues", "title": "Trying to input variable into url and having encoding issues", "body": "<p>I am new to Perl and trying to make a script that takes input from the user and then get XML data from a website based on that input together with a url and then relay it back to the user.</p>\n\n<p>But I have had some issues now with make a usable link based on the input from the user.</p>\n\n<p>This is my code in full:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $row = 0;\n\nuse XML::LibXML;\n\nprint \"\\n\\n\\nOn what place do you need a weather report for? -&gt; \";\n\nchomp( my $ort = &lt;&gt; );\n\nmy $url = join('', \"http://www.yr.no/place/Sweden/V\u00e4stra_G\u00f6taland/\",$ort,\"/forecast_hour_by_hour.xml\");\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $url);\n\nprint \"\\n\\nSee below the weather for \", $ort, \":\\n\\n\";\n\nforeach my $weatherdata ($dom-&gt;findnodes('//time')) {\n\n    if($row != 10){ \n\n        my $temp = $weatherdata-&gt;findvalue('./temperature/@value');\n        my $value = $weatherdata-&gt;findvalue('./@from');\n\n        my $valuesub = substr $value, 11, 5;\n\n        print \"At \", $valuesub, \" the temperature will be: \", $temp, \"C\\n\";\n\n        $row++;\n    }\n}\n\nprint \"\\n\\n\";\n</code></pre>\n\n<p>If I write a place I want the weather info on. For example: </p>\n\n<blockquote>\n  <p>Mellerud</p>\n</blockquote>\n\n<p>Then it takes that and I get a response from the link with propper data.\nHowever. If I Write </p>\n\n<blockquote>\n  <p>\u00c5m\u00e5l</p>\n</blockquote>\n\n<p>Its not making any sense to the script. I now get:</p>\n\n<blockquote>\n  <p>Could not create file parser context for file \n  \"<a href=\"http://www.yr.no/place/Sweden/V\" rel=\"nofollow noreferrer\">http://www.yr.no/place/Sweden/V</a>\u251c\u00f1stra_G\u251c\u00c2taland/\u00c5m\u00e5l/forecast_hour_by_hour.xml\":\n  No error at test4.pl line 14</p>\n</blockquote>\n\n<p>If I replace <code>\",$ort,\"</code> and just add <code>\u00c5m\u00e5l</code> I get the propper result.\nI have been searching for different types of encoding for this, but I have not found a solution that works.</p>\n\n<p>Once again I would like to point out that I am really new to this. I might miss something really simple. My apologies for that.</p>\n\n<p>::EDIT 1::</p>\n\n<p>After suggestion from @zdim I added <code>use open ':std', ':encoding(UTF-8)';</code></p>\n\n<p>This added some different results, but does only generate more error as following here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y0o69.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y0o69.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also I am running this in Windows CMD under administrator privileges.\nAccording to @zdim its running fine in linux with xterm for input, v5.16.\nIs there a way to make it work in Windows?</p>\n"}, {"tags": ["oracle", "perl", "dbi"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1528513423, "post_id": 50770489, "comment_id": 88548544, "body": "The &quot;resource busy&quot; part of the error message suggests that some other process is using the table at the time you attempt to truncate it.  Consider using <code>LOCK TABLE</code> to ensure that you have exclusive access to the table before your truncate."}], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "is_accepted": false, "score": 2, "last_activity_date": 1528517887, "creation_date": 1528517887, "answer_id": 50770872, "question_id": 50770489, "link": "https://stackoverflow.com/questions/50770489/dbd-error-error-possibly-near-indicator-at-char-15-in-truncate-table-mo/50770872#50770872", "title": "DBD ERROR: error possibly near &lt;*&gt; indicator at char 15 in &#39;TRUNCATE TABLE &lt;*&gt;MONTHLY_DATA&#39;)", "body": "<p>You have a table that has a lock already. This has been explained at this link: <a href=\"https://community.oracle.com/thread/634676\" rel=\"nofollow noreferrer\">https://community.oracle.com/thread/634676</a>. It is frowned upon to provide just a link so I will put the answer here too. </p>\n\n<hr>\n\n<p>Because some other session has a lock on that table, you can delete it because you are in fact deleting your read-consistent view of the table. See this test case:</p>\n\n<p>In session 1:</p>\n\n<pre><code>YAS@10G&gt;create table t as select * from dual;\n\nTable created.\n\nYAS@10G&gt;insert into t values(2);\n\n1 row created.\n</code></pre>\n\n<p>In session 2:</p>\n\n<pre><code>YAS@10G&gt;truncate table t;\ntruncate table t\n               *\nERROR at line 1:\nORA-00054: resource busy and acquire with NOWAIT specified\n\n\nYAS@10G&gt;delete from t;\n\n1 row deleted.\n\nYAS@10G&gt;commit;\n\nCommit complete.\n\nYAS@10G&gt;select * from t;\n</code></pre>\n\n<p>no rows selected\nI was not able to truncate it because session 1 inserted a row and it is holding a lock on the table. I could delete from the table because the rows I want to delete are not locked. </p>\n\n<p>TRUNCATE is DDL and it needs an exclusive lock on the table. Session 1 is holding a shared lock on the table which does not permit the other session to get an exclusive lock.</p>\n\n<hr>\n\n<p>To possibly solve your problem you could just retry your truncate on failure.</p>\n\n<pre><code>#!/usr/bin/perl\n# your code goes here\nuse strict;\nuse warnings;\nmy $dbh = DBI-&gt;connect(\"dbi:Oracle:xxx\",\"xxx\",\"xxx\", {RaiseError =&gt; 1});\nmy $sth=$dbh-&gt;prepare(\"TRUNCATE TABLE MONTHLY_DATA\");\nmy $retryLimit = 5;\nmy $retrySleep = 5;\nmy $retryCount = 0;\n\n$sth-&gt;execute()\n    || &amp;retry();\n$dbh-&gt;disconnect();\n\nsub retry {\n    sleep($retrySleep);\n    $retryCount++;\n    if ($retryCount le $retryLimit) {\n        print qq{Retrying the TRUNCATE of MONTHLY_DATA\\n};\n        $sth=$dbh-&gt;prepare(\"TRUNCATE TABLE MONTHLY_DATA\");\n        $sth-&gt;execute() || &amp;retry();\n        return;\n    } else {\n        print qq{Retried TRUNCATING TABLE MONTHLY_DATA $retryLimit times. Quiting now\\n};\n        exit; \n    }\n}\n</code></pre>\n\n<p>This would generally just be working around your problem. Playing the waiting game. If your table is always being written too it may not be possible to use this with any success. I would then suggest locking your table and then truncating.  Another suggestion is creating a table like that table then swapping them and dropping the old table (I know you can do this in MySQL not sure about Oracle). </p>\n"}], "owner": {"reputation": 159, "user_id": 9318576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/911358fcaffc3b15dbc9d0f8f072afc6?s=128&d=identicon&r=PG&f=1", "display_name": "user9318576", "link": "https://stackoverflow.com/users/9318576/user9318576"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1528517887, "creation_date": 1528512718, "last_edit_date": 1528517072, "question_id": 50770489, "link": "https://stackoverflow.com/questions/50770489/dbd-error-error-possibly-near-indicator-at-char-15-in-truncate-table-mo", "title": "DBD ERROR: error possibly near &lt;*&gt; indicator at char 15 in &#39;TRUNCATE TABLE &lt;*&gt;MONTHLY_DATA&#39;)", "body": "<p>I have piece of Perl code where i'm trying to truncate the table while truncating the table sometime I'm getting error like below.It is eating so much time of mine any help we appreciated </p>\n\n<p>Error :-</p>\n\n<blockquote>\n  <p><code>DBD::Oracle::st execute failed: ORA-00054: resource busy and acquire with NOWAIT specified or timeout expired (DBD ERROR: error possibly near &lt;*&gt; indicator at char 15 in 'TRUNCATE TABLE &lt;*&gt;MONTHLY_DATA') [for Statement \"TRUNCATE TABLE MONTHLY_DATA\"] at data_arrival.pl line 3.</code></p>\n</blockquote>\n\n<p>Code</p>\n\n<pre><code>$dbh = DBI-&gt;connect(\"dbi:Oracle:xxx\",\"xxx\",\"xxx\", {RaiseError =&gt; 1});\n$sth=$dbh-&gt;prepare(\"TRUNCATE TABLE MONTHLY_DATA\");\n$sth-&gt;execute();\n$dbh-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528519914, "post_id": 50769922, "comment_id": 88549515, "body": "Also missing is <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>, plus some encoding when building the URL."}, {"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528528279, "post_id": 50769922, "comment_id": 88551060, "body": "Thanks for the tip. I would gladly take tips on how to sort out my encoding problem with the url if you have the time. The use you mentioned created a whole new type of errors to my code.  When adding as input: &#197;m&#229;l  I got this for response: utf8 &quot;\\x8F&quot; does not map to Unicode at test4.pl line 11. utf8 &quot;\\x86&quot; does not map to Unicode at test4.pl line 11."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528528351, "post_id": 50769922, "comment_id": 88551081, "body": "Not enough info."}, {"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528528664, "post_id": 50769922, "comment_id": 88551161, "body": "Also gets Could not create file parser context for file &quot;<a href=\"http://www.yr.no/place/Sweden/V\" rel=\"nofollow noreferrer\">yr.no/place/Sweden/V</a>\u251c&#226;\u252c&#241;stra_G\u251c&#226;\u252c&#194;taland/\\x8Fm\\x86l/forecas&zwnj;&#8203;t_hour_by_hour.xml&quot;: No error at test4.pl line 18"}, {"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528528695, "post_id": 50769922, "comment_id": 88551169, "body": "Using same code as above with your addition you posted 2 hours ago."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528528820, "post_id": 50769922, "comment_id": 88551199, "body": "My addition? I didn&#39;t provide code for it. Not the place to be asking new questions!"}, {"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528528912, "post_id": 50769922, "comment_id": 88551220, "body": "What? You suggested adding  <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>  to my code. you also said I was missing some encoding when building a URL."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "edited": false, "score": 0, "creation_date": 1528528348, "post_id": 50770252, "comment_id": 88551080, "body": "Thank you! Worked like a charm! Now I only have some encoding issues to dig into :P"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "edited": false, "score": 1, "creation_date": 1528560640, "post_id": 50770252, "comment_id": 88559228, "body": "I\u2019m happy it sorted out that part! About the encoding, check the following question. The answer by tchrist is a great collection and reference for the settings we often use: <a href=\"https://stackoverflow.com/questions/6162484\">stackoverflow.com/questions/6162484</a>"}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": true, "score": 2, "last_activity_date": 1528509323, "creation_date": 1528509323, "answer_id": 50770252, "question_id": 50769922, "link": "https://stackoverflow.com/questions/50769922/getting-unwanted-line-break-when-trying-to-build-a-string-of-multiple-variables/50770252#50770252", "title": "Getting unwanted line break when trying to build a string of multiple variables", "body": "<p>That newline comes from your terminal. You can use the <a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> function to remove it:</p>\n\n<pre><code>my $ort = &lt;&gt;;\nchomp($ort);\n</code></pre>\n\n<p>It is usual to see this alternatively written in one line, which gives the same result:</p>\n\n<pre><code>chomp( my $ort = &lt;&gt; );\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2157421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91be72c315592a9e690121219e755e3?s=128&d=identicon&r=PG&f=1", "display_name": "moiamserru", "link": "https://stackoverflow.com/users/2157421/moiamserru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50770252, "answer_count": 1, "score": 0, "last_activity_date": 1528509323, "creation_date": 1528504714, "question_id": 50769922, "link": "https://stackoverflow.com/questions/50769922/getting-unwanted-line-break-when-trying-to-build-a-string-of-multiple-variables", "title": "Getting unwanted line break when trying to build a string of multiple variables", "body": "<p>I am new to Perl and trying to make a script that takes input from the user and then get XML data from a website based on that input together with a url and then relay it back to the user.</p>\n\n<p>But I have had some issues now with make a usable link based on the input from the user.</p>\n\n<p>This is my code in full:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\n\nmy $row = 0;\n\nuse XML::LibXML;\n\nprint \"\\n\\n\\nOn what place do you need a weather report for? -&gt; \";\n\nmy $ort = &lt;&gt;;\n\nmy $url1 = \"http://www.yr.no/place/Sweden/V\u00e4stra_G\u00f6taland/\";\nmy $url2 = \"/forecast_hour_by_hour.xml\";\n\nmy $url = join('', $url1,$ort,$url2);\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $url);\n\nprint \"\\n\\nSee below the weather for \", $ort, \":\\n\\n\";\n\nforeach my $weatherdata ($dom-&gt;findnodes('//time')) {\n\n    if($row != 10){ \n\n        my $temp = $weatherdata-&gt;findvalue('./temperature/@value');\n        my $value = $weatherdata-&gt;findvalue('./@from');\n\n        my $valuesub = substr $value, 11, 5;\n\n        print \"At \", $valuesub, \" the temperature will be: \", $temp, \"C\\n\";\n\n        $row++;\n    }\n}\n\nprint \"\\n\\n\";\n</code></pre>\n\n<p>The crusial bit I assume is this one:</p>\n\n<pre><code>my $ort = &lt;&gt;;\n\nmy $url1 = \"http://www.yr.no/place/Sweden/V\u00e4stra_G\u00f6taland/\";\nmy $url2 = \"/forecast_hour_by_hour.xml\";\n\nmy $url = join('', $url1,$ort,$url2);\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $url);\n</code></pre>\n\n<p>When I run it I get this:\n<a href=\"https://i.stack.imgur.com/dPFVv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dPFVv.png\" alt=\"enter image description here\"></a></p>\n\n<p>It enters a line break and then the link is broken.</p>\n\n<p>I think the issue lies with <code>$ort</code> cause when I try to print only <code>$ort</code> out with something comming after I get a line break aswell.</p>\n\n<p>I hope I explained it clearly or you can perhaps tell me what needs improvement.</p>\n"}, {"tags": ["html", "perl", "parsing", "url", "www-mechanize"], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "is_accepted": false, "score": 0, "last_activity_date": 1528516890, "last_edit_date": 1528516890, "creation_date": 1528516509, "answer_id": 50770767, "question_id": 50769279, "link": "https://stackoverflow.com/questions/50769279/how-can-i-extract-url-tags-and-link-text-from-html-in-perl/50770767#50770767", "title": "How can I extract URL tags and link text from HTML in Perl?", "body": "<p>Using the documentation provided in your question. I created something that solves your problem I believe. Obviously using <a href=\"https://www.perlmonks.org\" rel=\"nofollow noreferrer\">https://www.perlmonks.org</a> has some outliers as some of the URLs are not full URLs, but with some simple checking and skipping if it is not what you want I think you'd get what you want.  </p>\n\n<p><strong>Example Output</strong>:</p>\n\n<pre><code>_____________________________________________________________________________________________________________________________\n| Text                                            | URL                | Attributes\n_____________________________________________________________________________________________________________________________\n| Testing a metacpan dist with XS components      | ?node_id=1216149   | [name]post-head-id1216149[id]post-head-id1216149,  |\n| Controlling the count in array                  | ?node_id=1216134   | [name]post-head-id1216134[id]post-head-id1216134,  |\n</code></pre>\n\n<p>Likely you were stumped at the hashref. You just needed to make a for loop to go through those to get the attribute tags and their values. </p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\n# your code goes here\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse WWW::Mechanize ();\n$ENV{'PERL_LWP_SSL_VERIFY_HOSTNAME'} = 0;\n\nmy @urls = (\n    q{https://www.perlmonks.org/}\n);\n\nmy $mech = WWW::Mechanize-&gt;new();\n$mech-&gt;get(@urls);\n\nmy @links = $mech-&gt;links();\nprint qq{______________________________________________________________________________________________________________\\n};\nprintf(qq{| %-65s | %-75s | %-25s\\n},q{Text},q{URL},q{Attributes});\nprint qq{______________________________________________________________________________________________________________\\n};\nforeach my $link (@links) {\n    if ($link-&gt;text() &amp;&amp; $link-&gt;url()) {\n        my $a;\n        foreach my $attr (keys %{$link-&gt;attrs()}) {\n            next if $attr =~ m/href/i;\n\n            #$link-&gt;attr()-&gt;{$attr} is the value of the key in this hashref. \n            $a .= qq{[$attr]} . $link-&gt;attrs()-&gt;{$attr};\n        }\n        my $info;\n        if ($a) {\n            $info = sprintf(qq{| %-65s | %-75s | %-25s, },$link-&gt;text(),$link-&gt;url(),$a);\n        } else {\n            $info = sprintf(qq{| %-65s | %-75s |},$link-&gt;text(),$link-&gt;url());\n        }\n        print $info . qq{ |\\n};\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 5554632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b11f07650e8901325b1e8f42dcbd0a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5554632/joe"}, "edited": false, "score": 0, "creation_date": 1528537758, "post_id": 50772924, "comment_id": 88553214, "body": "Thanks! This is exactly the solution I made :)"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": true, "score": 2, "last_activity_date": 1528537447, "creation_date": 1528537447, "answer_id": 50772924, "question_id": 50769279, "link": "https://stackoverflow.com/questions/50769279/how-can-i-extract-url-tags-and-link-text-from-html-in-perl/50772924#50772924", "title": "How can I extract URL tags and link text from HTML in Perl?", "body": "<p>The simple version, based on your question</p>\n\n<ul>\n<li>a page that looks like yours (so no obscure html that can mess up)</li>\n<li>te desired output</li>\n</ul>\n\n<p>This might be what you are looking for:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse WWW::Mechanize;\n\nmy $mech = WWW::Mechanize-&gt;new;\n$mech-&gt;get('file:page.html');\n\nforeach my $link ($mech-&gt;links) {\n    my $text  = $link-&gt;text;\n    my $url   = $link-&gt;url;\n    my $title = $link-&gt;attrs-&gt;{title};\n\n    print \"$text, $url, $title\\n\"\n}\n</code></pre>\n\n<p>Happy coding, TIMTOWTDI</p>\n"}], "owner": {"reputation": 195, "user_id": 5554632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b11f07650e8901325b1e8f42dcbd0a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5554632/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 50772924, "answer_count": 2, "score": 0, "last_activity_date": 1528634939, "creation_date": 1528497989, "last_edit_date": 1528634939, "question_id": 50769279, "link": "https://stackoverflow.com/questions/50769279/how-can-i-extract-url-tags-and-link-text-from-html-in-perl", "title": "How can I extract URL tags and link text from HTML in Perl?", "body": "<p>I have a page which contains this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;a href=\"http://www.trial.com\" title=\"yellow\"&gt;Trial&lt;/a&gt;\n&lt;a href=\"http://www.trial1.com\" title=\"red\"&gt;Trial2&lt;/a&gt;\n</code></pre>\n\n<p>How can I get the anchor text, URL and title?</p>\n\n<p>I want to have this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Trial, http://www.trial.com, yellow\nTrial2, http://www.trial1.com, red\n</code></pre>\n\n<p>I have tried to use <a href=\"http://search.cpan.org/dist/WWW-Mechanize/\" rel=\"nofollow noreferrer\">WWW::Mechanize</a> as <a href=\"https://stackoverflow.com/questions/254345/how-can-i-extract-url-and-link-text-from-html-in-perl\">explained also here</a>, but I do not know how to get the title in this way. Do you have any ideas?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "edited": false, "score": 0, "creation_date": 1528494753, "post_id": 50768497, "comment_id": 88545107, "body": "anyway to check what is in $bytes before it is unpacked ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "edited": false, "score": 0, "creation_date": 1528494878, "post_id": 50768497, "comment_id": 88545155, "body": "What do you want to check? If you want to check that it contains (something that could be) a string of bytes, you can use <code>$bytes =~ &#47;^[\\x00-\\xFF]*\\z&#47;</code>"}, {"owner": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "edited": false, "score": 0, "creation_date": 1528495022, "post_id": 50768497, "comment_id": 88545205, "body": "I like to print out the content in $bytes before it is unpack.  thanks so much !!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "edited": false, "score": 0, "creation_date": 1528495093, "post_id": 50768497, "comment_id": 88545232, "body": "To print the bytes in <code>$bytes</code>, use <code>print $fh $bytes;</code>"}, {"owner": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "edited": false, "score": 0, "creation_date": 1528495195, "post_id": 50768497, "comment_id": 88545265, "body": "I tried to understand what this statement &quot;join &#39;.&#39;, unpack &#39;C4&#39;, pack &#39;N&#39;, shift&quot; does piece by piece.  thanks a lot for help !!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "edited": false, "score": 0, "creation_date": 1528495659, "post_id": 50768497, "comment_id": 88545437, "body": "Given the number 0x12345678, returns the numbers 0x12, 0x34, 0x56 and 0x78. The decimal representation of those numbers are then joined by <code>.</code>. Specifically, you&#39;re probably getting the dotted representstion of an IPv4 address from its numerical form."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1528492606, "creation_date": 1528492606, "answer_id": 50768497, "question_id": 50768465, "link": "https://stackoverflow.com/questions/50768465/how-to-print-the-result-from-pack-function/50768497#50768497", "title": "how to print the result from pack function?", "body": "<p>If you want the binary representation of a number, use</p>\n\n<pre><code>my $num = 134744072;\nprintf(\"bits = %032b\\n\", $num); \n</code></pre>\n\n<p>If you want the binary representation of a string of bytes, use</p>\n\n<pre><code>my $bytes = pack('N', 134744072);\nprintf(\"bits = %s\\n\", unpack('B*', $bytes)); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528701269, "post_id": 50770646, "comment_id": 88590367, "body": "Wow, what an awful way of doing <code>printf &#39;%vX&#39;, $bits;</code>. <code>Dump</code> is to look at internals, which the OP has no interest in."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528768493, "post_id": 50770646, "comment_id": 88622185, "body": "As I&#39;m sure you know, one of the Perl mottos is &quot;There&#39;s more than one way to do it&quot;. I demonstrated exactly that - one way to do it. Examining alternative approaches and assessing their relative merits is instructional. Also, how do you know the OP (or indeed anyone else reading the question) has no interest in Perl&#39;s internals?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528771183, "post_id": 50770646, "comment_id": 88622695, "body": "That doesn&#39;t mean all ways are equal. You picked one that&#39;s very confusing, and overloads the reader with unnecessary information, and doesn&#39;t always provide the correct results (e.g. for magical vars). You didn&#39;t even mention which string to look at when there&#39;s more than one printed (e.g. for vars with UTF8=1)."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528775200, "post_id": 50770646, "comment_id": 88623488, "body": "You seem determined to pick a fight. I never claimed that all ways are equal. I did specifically mention which string to look at in the example which was exactly what the OP would have seen. The example did not involve a string of code points, so no I did not mention the UTF8 version which was not in the example."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528775812, "post_id": 50770646, "comment_id": 88623619, "body": "Re &quot;<i>You seem determined to pick a fight</i>&quot;, I don&#39;t see how there&#39;s any doubt that my comment attacked your answer. // Re &quot;<i>I never claimed all ways are equal</i>&quot;, I&#39;m confused. Are you saying you agree with my initial comment? It sure didn&#39;t sound like that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528775827, "post_id": 50770646, "comment_id": 88623622, "body": "Re &quot;<i>The example did not involve a string of code points, so no I did not mention the UTF8 version which was not in the example.</i>&quot;, huh? The UTF8 flag has nothing to do with whether the string is a string of code points or not. It can be set for non-code points, and it can be set for code points."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528778317, "post_id": 50770646, "comment_id": 88624219, "body": "Of course I agree that your comment attacked my answer - that much is obvious. I find it ironic that you admonish me for providing &quot;unnecessary information&quot; and then repeatedly drop in factoids about UTF8 which could hardly be less relevant."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528778398, "post_id": 50770646, "comment_id": 88624239, "body": "I didn&#39;t &quot;drop factoids&quot;; I pointed out that your statement was nonsense. Would you rather I have said it was wrong without saying why?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528778761, "post_id": 50770646, "comment_id": 88624344, "body": "I&#39;m not sure what you&#39;re hoping to achieve by this extended series of pointless replies. I assume you just want to have the last say. That&#39;s fine. Have the last say. I&#39;m done."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1528514938, "creation_date": 1528514938, "answer_id": 50770646, "question_id": 50768465, "link": "https://stackoverflow.com/questions/50768465/how-to-print-the-result-from-pack-function/50770646#50770646", "title": "how to print the result from pack function?", "body": "<p>The <a href=\"https://metacpan.org/pod/Devel::Peek\" rel=\"nofollow noreferrer\">Devel::Peek</a> module (which comes with Perl) allows you to examine Perl's representation of the variable.  This is probably more useful than just a raw <code>print</code> when you're dealing with binary data rather than printable character strings.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Devel::Peek qw(Dump);\n\nmy $bits = pack 'N','134744072';\n\nDump($bits);\n</code></pre>\n\n<p>Which produces output like this:</p>\n\n<pre><code>SV = PV(0xaedb20) at 0xb15650\n  REFCNT = 1\n  FLAGS = (POK,pPOK)\n  PV = 0xb06630 \"\\10\\10\\10\\10\"\\0\n  CUR = 4\n  LEN = 10\n</code></pre>\n\n<p>The 'SV' at the beginning indicates that this is a dump of a 'scalar value' (as opposed to say an array or a hash value).</p>\n\n<p>The 'SV = PV' indicates that this scalar contains a string of bytes (as opposed to say an integer or floating point value).</p>\n\n<p>The 'PV = 0xb06630' is the pointer to where those bytes are located.</p>\n\n<p>The \"\\10\\10\\10\\10\"\\0 is probably the bit you're interested in.  The double quoted string represents the bytes making up the contents of this string.\nInside the string, you would typically see the bytes interpreted as if they were ASCII, so the byte 65 decimal would appear as 'A'. All non-printable characters are displayed in octal with a preceding <code>\\</code>.</p>\n\n<p>So your <code>$bits</code> variable contains 4 bytes, each octal '10' which is hex 0x08.</p>\n\n<p>The LEN and CUR are telling you that Perl allocated 10 bytes of storage and is currently using 4 of them (so <code>length($bits)</code> would return 4).</p>\n"}], "owner": {"reputation": 1, "user_id": 8111941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa425b5da25728e59ecf478ee8b9db1?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher Tom", "link": "https://stackoverflow.com/users/8111941/fisher-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528514938, "creation_date": 1528492431, "last_edit_date": 1528493006, "question_id": 50768465, "link": "https://stackoverflow.com/questions/50768465/how-to-print-the-result-from-pack-function", "title": "how to print the result from pack function?", "body": "<p>I like to verify what pack does. I have the following code to give it a try.</p>\n\n<pre><code>$bits = pack 'N','134744072';\n</code></pre>\n\n<p>how to print bits ?</p>\n\n<p>I did the following:</p>\n\n<pre><code>printf (\"bits = %032b \\n\", $bits);  \n</code></pre>\n\n<p>but it does not work.</p>\n\n<p>Thanks !!</p>\n"}, {"tags": ["arrays", "perl", "powerset"], "comments": [{"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1528479484, "post_id": 50765821, "comment_id": 88539200, "body": "I think you&#39;d need to show the values of your arrays and be more specific about what you intend to do.  Are they deeply nested?"}, {"owner": {"reputation": 123, "user_id": 9774341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03c5562df7e5f6b5254a066cfe2f30f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Larson", "link": "https://stackoverflow.com/users/9774341/matt-larson"}, "edited": false, "score": 0, "creation_date": 1528479626, "post_id": 50765821, "comment_id": 88539258, "body": "The values of the arrays are (small) integers."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528481016, "post_id": 50765821, "comment_id": 88539838, "body": "Can you provide examples of input and desired output, linked to the description?  (I am not sure what you mean by some of the terms.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1528481509, "post_id": 50765821, "comment_id": 88540011, "body": "Yes, what is power set (I know what the math term means, but that doesn&#39;t seem to be how you are using it).  Show sample data and output and whatever code you have tried"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1528486586, "last_edit_date": 1528486586, "creation_date": 1528486213, "answer_id": 50767291, "question_id": 50765821, "link": "https://stackoverflow.com/questions/50765821/finding-all-subsets-of-a-set-of-arrays-perl/50767291#50767291", "title": "Finding all subsets of a set of arrays (perl)", "body": "<ul>\n<li><p>Use <code>subsets</code> from <a href=\"https://metacpan.org/pod/Algorithm::Combinatorics\" rel=\"nofollow noreferrer\"><code>Algorithm::Combinatorics</code></a> to generate the power sets for each array</p></li>\n<li><p>Sort the members of each subset so that subsets containing the same values form the same sequence</p></li>\n<li><p>Form a string from each sorted subset, say by separating them with spaces. <code>\"@subset\"</code> will do that for you</p></li>\n<li><p>Use the string as a key for a hash element</p></li>\n<li><p>Do the same for all arrays</p></li>\n<li><p>Print the keys of the hash</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528487268, "post_id": 50767394, "comment_id": 88542369, "body": "This relies on the elements of the sets returned by <code>powerset_lazy</code> being sorted. They appear to be in the same order as the original array, but the documentation doesn&#39;t say so. It won&#39;t work if there are non-adjacent duplicates in the original sets."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528488053, "post_id": 50767394, "comment_id": 88542703, "body": "Let the OP do his required tests."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1528486682, "creation_date": 1528486682, "answer_id": 50767394, "question_id": 50765821, "link": "https://stackoverflow.com/questions/50765821/finding-all-subsets-of-a-set-of-arrays-perl/50767394#50767394", "title": "Finding all subsets of a set of arrays (perl)", "body": "<p>Check <a href=\"https://metacpan.org/pod/List::PowerSet\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/List::PowerSet</a></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::PowerSet 'powerset_lazy';\n\nmy @arr = (\n        [1,2],\n        [2,3,4],\n);\nmy %hash;\nfor my $v (@arr) {\n    my $ps = powerset_lazy(@$v);\n    while (my $set = $ps-&gt;()) {\n        my $str = join \",\", @$set;\n        next if $hash{$str}++;\n        print \"($str)\\n\";\n    }\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>(1,2)\n(2)\n(1)\n()\n(2,3,4)\n(3,4)\n(2,4)\n(4)\n(2,3)\n(3)\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9774341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03c5562df7e5f6b5254a066cfe2f30f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Larson", "link": "https://stackoverflow.com/users/9774341/matt-larson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 50767394, "answer_count": 2, "score": 2, "last_activity_date": 1529823779, "creation_date": 1528479250, "last_edit_date": 1528482448, "question_id": 50765821, "link": "https://stackoverflow.com/questions/50765821/finding-all-subsets-of-a-set-of-arrays-perl", "title": "Finding all subsets of a set of arrays (perl)", "body": "<p>I have a bunch of arrays @a1, @a2, ... @ak (I don't know how many). I would like to create an array that contains the union of the power sets of the arrays. i.e., some array is in the output if and only if the entries of that array are contained in @ai for some i. The output should have no duplicates.</p>\n\n<p>The only way to I can think of to do this is to create an array containing the power set of each of the arrays and then union these. However, when unioning, I have to check for entry-wise equality.</p>\n\n<p>Is there anything better?</p>\n\n<p>Something like, take the union of all the arrays, take the power set, and then delete the stuff that shouldn't be in there won't work, since the union of the arrays is too big.</p>\n\n<p>EDIT:\nFor example, suppose the input in (1,2), (2, 3, 4), then the output should be\n(), (1), (2), (3), (4), (1,2), (2,3), (3,4), (2,4), (2,3,4). Any order would be acceptable.</p>\n"}, {"tags": ["perl", "libcurl", "tls1.2"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528471747, "post_id": 50763488, "comment_id": 88535453, "body": "<code>$curl-&gt;setopt(CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1)</code> or <code>CURL_SSLVERSION_TLSv1_3</code> if the module is built with a recent <code>libcurl</code>."}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 1, "creation_date": 1528471774, "post_id": 50763488, "comment_id": 88535465, "body": "That&#39;s for &gt;= TTLv1, not for &gt;= 1.2... You want <code>CURL_SSLVERSION_TLSv1_2</code> for that."}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1528482270, "post_id": 50763711, "comment_id": 88540309, "body": "I have no idea why this was downvoted since it is the only correct answer, i.e. don&#39;t fiddle with the TLS version at all unless it is needed to work around some broken systems. Additionally one might recommend to remove the lines which disable the certificate validations too (<code>CURLOPT_SSL_VERIFYHOST</code>, <code>CURLOPT_SSL_VERIFYPEER</code>) since otherwise man in the middle attacks get undetected."}, {"owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1528556439, "post_id": 50763711, "comment_id": 88558043, "body": "In fact, @SteffenUllrich, the system was &quot;broken&quot; when this code was built. After smashing my head a lot, I found out that the people writing this bit of code didn&#39;t actually knew what was being done, so they forced that parameter to make sure we were working on SSLv3."}, {"owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "edited": false, "score": 1, "creation_date": 1528556762, "post_id": 50763711, "comment_id": 88558129, "body": "This is the correct answer indeed, although there is a bit more to it... I found out the hard way that my Red Hat 7.4 uses by default a very outdated 7.29 <code>libcurl</code>. Only from 7.34 and up you can work with TSL 1.2 properly. After updating my <code>libcurl</code> and rebuilding my <code>WWW::Curl::Easy</code> Perl library, it works like a charm."}], "tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": true, "score": 2, "last_activity_date": 1528701425, "last_edit_date": 1528701425, "creation_date": 1528470986, "answer_id": 50763711, "question_id": 50763488, "link": "https://stackoverflow.com/questions/50763488/updating-wwwcurleasy-to-work-with-tls/50763711#50763711", "title": "Updating WWW::Curl::Easy to work with TLS", "body": "<p>Just remove the line setting <code>CURLOPT_SSLVERSION</code>! A default libcurl will try to negotiate the right version anyway so the specific choice is not typically needed nor required.</p>\n\n<p>The number 3 comes from SSLv3 in <a href=\"https://github.com/curl/curl/blob/master/include/curl/curl.h#L1953\" rel=\"nofollow noreferrer\">this list</a> (in a libcurl header file). The first entry is 0, the second 1 etc.</p>\n\n<p>To <em>explicitly</em> ask for TLS 1.2 (or later), the symbol to use is <code>CURL_SSLVERSION_TLSv1_2</code> but I advice against asking for specific versions as long as you don't have to. Note that this symbol was introduced first in libcurl 7.34.0.</p>\n"}], "owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 50763711, "answer_count": 1, "score": 3, "last_activity_date": 1528701425, "creation_date": 1528470270, "question_id": 50763488, "link": "https://stackoverflow.com/questions/50763488/updating-wwwcurleasy-to-work-with-tls", "title": "Updating WWW::Curl::Easy to work with TLS", "body": "<p>I'm trying to update a simple Perl subroutine that lets our program connect with Brazil's government's servers to upload invoices. It works fine today, as shown below:</p>\n\n<pre><code>use WWW::Curl::Easy;\nmy $curl = WWW::Curl::Easy-&gt;new;\nmy $response_body;\n\nmy @param = ('Content-Type: application/soap+xml; charset=utf-8', \"SOAPAction: '$action''\");\n$curl-&gt;setopt(CURLOPT_URL, \"$urlsefaz\"); # one of Brazil's SEFAZ URLs\n$curl-&gt;setopt(CURLOPT_PORT , 443);\n$curl-&gt;setopt(CURLOPT_VERBOSE, 0);\n$curl-&gt;setopt(CURLOPT_HEADER, 1); \n$curl-&gt;setopt(CURLOPT_SSLVERSION, 3);\n$curl-&gt;setopt(CURLOPT_SSL_VERIFYHOST, 0);\n$curl-&gt;setopt(CURLOPT_SSL_VERIFYPEER, 0);\n$curl-&gt;setopt(CURLOPT_SSLCERT, \"$certificate\");\n$curl-&gt;setopt(CURLOPT_SSLKEY, \"$privateKey\");\n$curl-&gt;setopt(CURLOPT_POST, 1);\n$curl-&gt;setopt(CURLOPT_POSTFIELDS, $data);\n$curl-&gt;setopt(CURLOPT_HTTPHEADER, \\@param);\n$curl-&gt;setopt(CURLOPT_WRITEDATA,\\$response_body);\n\nmy $responsexml = $curl-&gt;perform;\n</code></pre>\n\n<p>However, Brazil's government updated their security policy, and for their next update they won't accept SSLv3 connections anymore, only accepting TLS 1.2 instead, which is causing my current connection attempts with the new test servers to fail.</p>\n\n<p>According to the <a href=\"https://metacpan.org/pod/WWW::Curl\" rel=\"nofollow noreferrer\">MetaCPAN Documentation on WWW::Curl</a>, which includes an example for WWW::Curl::Easy, the method <code>setopt</code> should take \"most\" <code>libcurl</code> parameters. I belive it is taking the <code>CURLOPT_SSLVERSION</code> correctly, but instead of taking one of the constants described in <a href=\"https://curl.haxx.se/libcurl/c/CURLOPT_SSLVERSION.html\" rel=\"nofollow noreferrer\">CURLOPT_SSLVERSION's documentation</a>, the programmer who did this bit of code decided to inform the equivalent value to one of the options (presumably SSLv3) instead?</p>\n\n<p>So, I have no clue as to what value should I pass to <code>CURLOPT_SSLVERSION</code> to inform this module to work with TLS 1.2, or how to inform the correct constant instead. Or is there another <code>setopt</code> argument that I could set for it to work with TLS 1.2?</p>\n\n<p>Also, if there's no workaround, I'm considering creating a new function from scratch around another library - maybe <code>LWP::UserAgent</code>? Would this be best way to go? Are there other libraries better suited to deal with this?</p>\n\n<p>Thanks for any thoughts in advance.</p>\n"}, {"tags": ["perl", "base64", "decode"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528468832, "post_id": 50762413, "comment_id": 88533662, "body": "How did you confirm the two files had the same content? Comparing in a text editor they might appear the same, but the editor might have stripped out certain non-displayable characters. Better to use a tool like &quot;od&quot; or something to see the values of the bytes."}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528471490, "post_id": 50762413, "comment_id": 88535308, "body": "@ChrisTurner I used notepad++ compare plugin, but I just checked with VBinDiff  and it throws thousends of differences. So probably both files are not the same. I also tried to copy the content from the oringal file into the one that is not working in the text editor and still does not work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528493047, "post_id": 50762413, "comment_id": 88544539, "body": "PS - The name of the language is &quot;Perl&quot;, not &quot;PERL&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1528476121, "post_id": 50764075, "comment_id": 88537699, "body": "You also need to use lexical filehandles, three argument open and check the return value <code>open</code>. <code>open my $fh, &#39;&gt;&gt;&#39;, &#39;mypdf.pdf&#39; or die $!;</code>"}], "tags": [], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "is_accepted": false, "score": 0, "last_activity_date": 1528472289, "creation_date": 1528472289, "answer_id": 50764075, "question_id": 50762413, "link": "https://stackoverflow.com/questions/50762413/perl-decoding-a-pdf-attached-to-an-email-in-mimo-base64-yields-to-an-empty-pdf/50764075#50764075", "title": "Perl - Decoding a pdf attached to an email in MIMO Base64 yields to an empty pdf", "body": "<p>I just found the problem, I needed to use binmode to save the file:</p>\n\n<pre><code>open(OUTFILE,\"&gt;&gt;mypdf.pdf\"); \nbinmode OUTFILE;\nprint OUTFILE $decoded_attachment;\nclose(OUTFILE);\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528496718, "creation_date": 1528466616, "last_edit_date": 1528496718, "question_id": 50762413, "link": "https://stackoverflow.com/questions/50762413/perl-decoding-a-pdf-attached-to-an-email-in-mimo-base64-yields-to-an-empty-pdf", "title": "Perl - Decoding a pdf attached to an email in MIMO Base64 yields to an empty pdf", "body": "<p>I'm trying to do the following:</p>\n\n<ol>\n<li>Login to my email provider.</li>\n<li>Download the last email which shall have a pdf attachment.</li>\n<li>Decode de pdf and save it to a file.</li>\n</ol>\n\n<p>My <strong>problem</strong>:\nWhen I open the pdf (Adobe reader, IE, foxit reader...) it opens as an empty sheet.</p>\n\n<p>If I open the file with a text editor and compare it with the same file that I downloaded manually using a webclient the only difference is a new line in the middle of the file.\n<a href=\"https://i.stack.imgur.com/GK7rf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GK7rf.png\" alt=\"Missing line\"></a></p>\n\n<p>Even if I remove that new line I still become an empty sheet. And both files have exactly the same content and both are opened as ANSI in the text editor.</p>\n\n<p>This is the code I have used so far:</p>\n\n<pre><code>use strict;\nuse warnings;\n#use utf8;\n#use open ':std', ':encoding(UTF-8)';\n#binmode(STDOUT, \":utf8\");\n\nuse Mail::IMAPClient;\nuse MIME::Base64;\n\nmy $imap = Mail::IMAPClient-&gt;new(\n    Server   =&gt; 'myprovider',\n    User     =&gt; 'myuser',\n    Password =&gt; 'mypassword',\n    Port     =&gt; '993',\n    Ssl      =&gt; 1,\n    Uid      =&gt; 1,\n) or die \"Cannot connect: $@\";\n\n\n# Select folder\n$imap-&gt;select( 'INBOX' ) or die \"Select folder error: \", $imap-&gt;LastError, \"\\n\";\n\n# Get all messages\nmy $messages = $imap-&gt;messages;\n\n# Read whole message\nmy $message = $imap-&gt;message_string(@$messages[-1]);\nprint \"\\n\\n\\n\\nWhole message: \\n\\n\\n$message\\n\";\n\n# Read message\nmy $part_body = $imap-&gt;bodypart_string(\n    @$messages[-1],\n    '1.1',\n) or die \"Could not get bodypart string: \", $imap-&gt;LastError;\nprint \"Email content:\\n$part_body\\n\";\n\n# Read attachment\nmy $pdf_attachment = $imap-&gt;bodypart_string(\n    @$messages[-1],\n    '2.1',\n) or die \"Could not get bodypart string: \", $imap-&gt;LastError;\n$pdf_attachment =~ s/-/+/g;\n$pdf_attachment =~ s/_/\\//g;\nmy $decoded_attachment = decode_base64($pdf_attachment);\n\n\n# Logout\n$imap-&gt;logout or die \"Logout error: \", $imap-&gt;LastError, \"\\n\";\n\n# Save attachment\nopen(my $fh, '&gt;', 'mypdf.pdf');\nprint $fh $decoded_attachment;\nclose $fh;\nprint \"done\\n\";\n\n# Save email\nopen($fh, '&gt;', 'email.txt');\nprint $fh $message;\nclose $fh;\nprint \"done\\n\";\n</code></pre>\n\n<p>PD: The email source code looks like this:</p>\n\n<pre><code>--=_4e399e1756412414214821321834\n\nContent-Type: application/octet-stream\n\nContent-Transfer-Encoding: base64\n\nContent-Disposition: attachment; filename=\"my_file-2018-06-08.pdf\"\n\n\n\nJVBERi0xLjQKJeLjz9MKMyAwIG9iago8PC9UeXBlIC9QYWdlCi9QYXJlbnQgMSAwIFIKL01lZGlh\n\nQm94IFEuODkwXQovVHJpbUJveCBbMCDAgNTk1LjI4MCA4ND4wMDAgMC4wMDAgNTk1LjI4MCA4\n\n...\n</code></pre>\n"}, {"tags": ["perl", "ssl", "lwp"], "comments": [{"owner": {"reputation": 3623, "user_id": 491557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c20e970d3e909fa67a7809965c4936?s=128&d=identicon&r=PG", "display_name": "Spangen", "link": "https://stackoverflow.com/users/491557/spangen"}, "edited": false, "score": 3, "creation_date": 1528463938, "post_id": 50761495, "comment_id": 88530543, "body": "Without a code example which shows the failure I fear you&#39;ll have very few responses...."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1528464066, "post_id": 50761495, "comment_id": 88530620, "body": "It&#39;s impossible to know what is going wrong without seeing the code that causes the error. Please show us a really short example of code which triggers this behaviour. Specifically, what is the URL you&#39;re trying to fetch?"}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528464660, "post_id": 50761495, "comment_id": 88531034, "body": "Thanks for your response. It is very big script and using lot of perl modules."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528464809, "post_id": 50761495, "comment_id": 88531126, "body": "I am trying to connect https url"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528464929, "post_id": 50761495, "comment_id": 88531196, "body": "Which module are you using for doing SOAP?"}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528465075, "post_id": 50761495, "comment_id": 88531299, "body": "SOAP::Lite, IO::Socket::SSL, LWP::Protocol::https These are main three modules we are using for script"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1528465456, "post_id": 50761495, "comment_id": 88531577, "body": "@vani: Please don&#39;t add your code in a comment where it is hard to read. Instead, edit your question and add it there where it can be properly formatted and readable."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1528465540, "post_id": 50761495, "comment_id": 88531631, "body": "@vani: <i>It is very big script and using lot of perl modules</i> Which is why I asked you to cut it down to a short example."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1528465777, "post_id": 50761495, "comment_id": 88531791, "body": "Looks like the only useful bit in the code you&#39;ve given us is <code>$soapSnHandle-&gt;call($soapCommand =&gt; @soapParams)</code>. But we also need to know what is all of those variables."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1528469327, "post_id": 50761495, "comment_id": 88533963, "body": "@vani: Please <b><a href=\"https://stackoverflow.com/posts/50761495/edit\">edit your question</a></b> to add these details. Code is unreadable in comments."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1528470609, "post_id": 50761495, "comment_id": 88534779, "body": "@vani: I can&#39;t see where <code>$soapSnHandle</code> or <code>$soapCommand</code> are created. And, you show us where <code>@soapParams</code> is created, but you use another mystery variable, <code>$number</code> in its creation, so we&#39;re really no closer to being able to help. What we need is a simple (probably four or five lines) example that we can just run to see the problem that you&#39;re seeing. Cut out any extraneous crap like config files or things like that. Use hard-code values if necessary. Just create all the variables you need and then make the SOAP call."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528626585, "post_id": 50781170, "comment_id": 88572026, "body": "Thank You very much for your response.  Let me explain the background of the issue. We have a environment of nagios monitoring tool with servicenow ticketing tool for incident creation.  We have recently upgraded the RHEL OS from 6.7 to 6.9.. from there problem started on creating servicenow incidents.  I checked the LWP::UserAgent version.. it is 6.15.   Could you please provide me any simple script which client make connection to server and server respond to client ?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528627461, "post_id": 50781170, "comment_id": 88572261, "body": "@vani: I cannot create such a script since I have not enough information about your environment. But have a look at the examples and the rest of the <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">documentation for LWP::UserAgent</a> which also includes information on how to configure a proxy."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528628904, "post_id": 50781170, "comment_id": 88572630, "body": "I will check on script part. I just noticed that wget command to service now url not able to establish SSL connection    [root@XXXX rpms]# wget <a href=\"https://testuser:testpwd.service-now.com/u_incident_interface.do\" rel=\"nofollow noreferrer\">testuser:testpwd.service-now.com/u_incident_interface.do</a> --2018-06-10 13:00:07--  <a href=\"https://srv_SOAPimporterNagios:password@rwe.service-now.com/u_incident_interface.do\" rel=\"nofollow noreferrer\">srv_SOAPimporterNagios:password@rwe.service-now.com/&hellip;</a> Resolving rwestproxy-neurathdc.rwe.com... 10.88.253.20 Connecting to rwestproxy-neurathdc.rwe.com|10.88.253.20|:8080... connected. Unable to establish SSL connection. [root@XXXX rpms]#   Can you advice on SSL connection issue?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 1, "creation_date": 1528629564, "post_id": 50781170, "comment_id": 88572782, "body": "@vani: I have no idea what exactly you are doing and maybe you don&#39;t have it either. But, it looks like that you are trying to connect to some proxy with HTTPS, which as I already said in my answer is probably wrong. There is probably somewhere an environment variable you don&#39;t show, i.e. something like <code>https_proxy=https:&#47;&#47;rwestproxy-neurathdc.rwe.com:8080</code>. This should probably be <code>https_proxy=http:&#47;&#47;rwestproxy-neurathdc.rwe.com:8080</code> instead, i.e. <code>http:&#47;&#47;</code> not <code>https:&#47;&#47;</code> to access the proxy."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528631044, "post_id": 50781170, "comment_id": 88573153, "body": "I am trying to call service now url from my RHEL server using wget command.. but I am receiving Unable to establish SSL connection.. and my wget version is GNU Wget 1.12 built on linux-gnu"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528632185, "post_id": 50781170, "comment_id": 88573448, "body": "@vani: have you processed my statements about improper configuration of your proxy settings and looked into it?"}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528632467, "post_id": 50781170, "comment_id": 88573514, "body": "Yes Steffen. I made the proxy as suggested by You. but still same SSL issue."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528632834, "post_id": 50781170, "comment_id": 88573604, "body": "@vani: please make sure that both <code>http_proxy</code> and <code>https_proxy</code> environment variables are set to the correct (<code>http:&#47;&#47;..</code>) proxy. wget seems to use the first only."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528887371, "post_id": 50781170, "comment_id": 88674662, "body": "Thanks for your suggestion  I have created the script to connect service-now and make soap calls, but script failing with below error.......  Searching for Change Request... SOAP::Lite=HASH(0x22da840) and SOAP::Data=HASH(0x2e1bf38) 500 handshakefailed at soap_connection.pl line 29."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528887768, "post_id": 50781170, "comment_id": 88674866, "body": "use SOAP::Lite; $ENV{https_proxy} = &quot;<a href=\"http://myproxy.rwe.com:8080\" rel=\"nofollow noreferrer\">myproxy.rwe.com:8080</a>&quot;;  $ENV{HTTPS_PROXY} = &quot;<a href=\"http://myproxy-neurathdc.rwe.com:8080\" rel=\"nofollow noreferrer\">myproxy-neurathdc.rwe.com:8080</a>&quot;;   sub SOAP::Transport::HTTP::Client::get_basic_credentials {                      return &quot;k&quot; =&gt; &quot;l&quot;;  } $soap = SOAP::Lite -&gt; proxy(&#39;<a href=\"https://usr_soap:pwd_soap@swe.service-now.com/change_request.do?SOAP&#39;\" rel=\"nofollow noreferrer\">usr_soap:pwd_soap@swe.service-now.com/&hellip;</a>); my $method = SOAP::Data-&gt;name(&#39;getRecords&#39;) -&gt;attr({xmlns =&gt; &#39;<a href=\"https://www.service-now.com/\" rel=\"nofollow noreferrer\">service-now.com</a>&#39;}); my @params = (          SOAP::Data-&gt;name(number =&gt; $ARGV[0]) ); print &quot;Searching for Change Request&quot;; my $result = $soap-&gt;call($method =&gt; @params); &lt;/code&gt;"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528894528, "post_id": 50781170, "comment_id": 88679336, "body": "@vani: so wget works now or not? Also, the proxy setting for <code>https_proxy</code> in your script does not reflect the syntax required by LWP (see documentation)."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528899296, "post_id": 50781170, "comment_id": 88682645, "body": "With wget we are able to connect service-now. We are using SOAP::Lite syntax."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1528900147, "post_id": 50781170, "comment_id": 88683255, "body": "@vani: SOAP::Lite uses LWP as base. Please try with LWP::UserAgent but set <code>https_proxy</code> correctly, i.e. <code>http:&#47;&#47;host:8080</code> and not <code>host:8080</code> and either use the <code>env_proxy</code> method so that it gets the proxy from environment or use the <code>proxy</code> method as documented for LWP::UserAgent"}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1529004916, "post_id": 50781170, "comment_id": 88731868, "body": "@Steffan: As suggested I have created script to use LWP::UserAgent and I am using LWP 5.833 version. but still connection failing.  #!/usr/bin/perl -w use LWP::UserAgent; use SOAP::Lite; use Data::Dumper;  $ENV{https_proxy} = &quot;<a href=\"http://rproxy-hdc.rwe.com:8080\" rel=\"nofollow noreferrer\">rproxy-hdc.rwe.com:8080</a>&quot;; $ENV{HTTPS_PROXY} = &quot;<a href=\"http://rproxy-hdc.rwe.com:8080\" rel=\"nofollow noreferrer\">rproxy-hdc.rwe.com:8080</a>&quot;;  my $ua = LWP::UserAgent-&gt;new; $ua-&gt;env_proxy;  my $response = $ua -&gt; get(&#39;<a href=\"https://soap_user:soap_pwd@dev.service-now.com/?WSDL&#39;\" rel=\"nofollow noreferrer\">soap_user:soap_pwd@dev.service-now.com/?WSDL&#39;</a>);  if ($response-&gt;is_success) {      print &quot;Connection success&quot;;   } else {      print &quot;Connection failed&quot;;   }  Any ideas please ?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1529008255, "post_id": 50781170, "comment_id": 88733405, "body": "@vani:  <i>I am using LWP <b>5.833</b> version</i>  - I&#39;m actually shocked about this since I&#39;ve not expected you to use a version of LWP which is nearly 9 years old. And it actually conflicts with a statement you&#39;ve made earlier about you using LWP 6.15. Using such an old version also means that you are using the old Crypt::SSLeay backend and very likely a version of OpenSSL which does not support modern protocols like TLS 1.2. It is no surprise that you run into trouble when using such an ancient software stack today. Please use up-to-date software."}, {"owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "edited": false, "score": 0, "creation_date": 1529407098, "post_id": 50781170, "comment_id": 88853166, "body": "I am able to resolve the issue by updating the LWP module to 6.34 and adding below lines in script $ENV{https_proxy} = <a href=\"http://proxy:8080\" rel=\"nofollow noreferrer\">proxy:8080</a> $ENV{HTTPS_PROXY} = <a href=\"http://proxy:8080\" rel=\"nofollow noreferrer\">proxy:8080</a> $ENV{PERL_LWP_ENV_PROXY} = 1;  Thanks for all your help."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 5, "last_activity_date": 1528613047, "last_edit_date": 1528613047, "creation_date": 1528612717, "answer_id": 50781170, "question_id": 50761495, "link": "https://stackoverflow.com/questions/50761495/ssl23-get-server-hellounknown-protocol-while-running-perl-script/50781170#50781170", "title": "SSL23_GET_SERVER_HELLO:unknown protocol while running perl script", "body": "<p>TL;DR: Server is responding with plain traffic instead of the expected TLS. Cause of this might be wrong expectations on the client, misconfiguration or old buggy software.</p>\n\n<blockquote>\n  <p>SSL connect attempt failed error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol</p>\n</blockquote>\n\n<p>Errors like <code>unknown protocol</code> or also <code>SSL_ERROR_RX_RECORD_TOO_LONG</code>  or <code>wrong version number</code> usually happen if the other device does not properly talk SSL at all. This means the client is initiating the TLS handshake with the ClientHello and the server is responding with something which does not resemble SSL/TLS at all. Still the client will try to interpret the non-TLS answer as TLS and thus will complain about some strange TLS version or some corrupted TLS record.</p>\n\n<p>This happens typically if one is trying to <strong>talk to plain HTTP server with HTTPS</strong>. It might be because the <strong>server was never configured for HTTPS in the first place</strong> and one is wrongly assuming that changing the URL from <code>http://</code> to <code>https://</code> will magically make the server HTTPS ready. It might also be that that one is <strong>accessing the wrong port</strong> at the server, i.e. the plain HTTP port and not the HTTPS port. And there are also cases where due to a <strong>misconfiguration of the server</strong> only speaks plain HTTP while the config looks like it should speak HTTPS - like in <a href=\"https://serverfault.com/questions/915721/configure-apache-with-lets-encrypt-ssl-certificates-leads-to-ssl-error-rx-recor/915732#915732\">this question</a>. Or it might be because of a wrong proxy configuration, i.e. <strong>assuming that a proxy will be accessed by HTTPS</strong> wheres it is accessed by plain HTTP even for HTTPS URL like <a href=\"https://stackoverflow.com/questions/27852041/perl-lwpuseragent-https-proxy-to-specific-https-web-site-unknown-protocol-er\">in this question</a>.</p>\n\n<p>It can also happen if the <strong>server needs some initial plain data before switching to TLS</strong>. This is for example when using a proxy to connect to the final target. In case of a HTTP proxy the client needs to send a plain HTTP <code>CONNECT</code> request first, read the plain HTTP response from the server and check for success and only then can start with the TLS handshake. This situation can happen for example if you are using an <strong>older version of LWP</strong> since between 6.00 and 6.06 proxy support for HTTPS was broken. </p>\n"}], "owner": {"reputation": 1, "user_id": 9914210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e63f3b154baf5cdeb45ecb6b37629c?s=128&d=identicon&r=PG&f=1", "display_name": "vani", "link": "https://stackoverflow.com/users/9914210/vani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7624, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528628799, "creation_date": 1528463761, "last_edit_date": 1528628645, "question_id": 50761495, "link": "https://stackoverflow.com/questions/50761495/ssl23-get-server-hellounknown-protocol-while-running-perl-script", "title": "SSL23_GET_SERVER_HELLO:unknown protocol while running perl script", "body": "<p>@Steffen: I will check on script part.\nI just noticed that wget command to service now url not able to establish SSL connection </p>\n\n<p><code>\n[root@XXXX rpms]# wget <a href=\"https://testuser:testpwd.service-now.com/u_incident_interface.do\" rel=\"nofollow noreferrer\">https://testuser:testpwd.service-now.com/u_incident_interface.do</a>\n--2018-06-10 13:00:07--  <a href=\"https://srv_SOAPimporterNagios\" rel=\"nofollow noreferrer\">https://srv_SOAPimporterNagios</a>:<em>password</em>@rwe.service-now.com/u_incident_interface.do\nResolving rwestproxy-neurathdc.rwe.com... 10.88.253.20\nConnecting to rwestproxy-neurathdc.rwe.com|10.88.253.20|:8080... connected.\n<strong>Unable to establish SSL connection.</strong>\n[root@XXXX rpms]#\n</code></p>\n\n<p>Can you advice on SSL connection issue?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1528441853, "post_id": 50755010, "comment_id": 88518246, "body": "Can there be escaped backslashes or other escape sequences in the strings? Like <code>$address = &quot;mail1\\\\\\&quot;,local&lt;mail1@mail.local&gt;, \\&quot;mail2@,mail.local\\&quot;&lt;mail2@mail.local&gt;&quot;;</code>"}, {"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528442051, "post_id": 50755010, "comment_id": 88518330, "body": "Yes there can be escape sequences in the string, Main intention is to replace comma(&#39;,) with (\\n) if it is found outside double quotes and after (@ or &gt;), Here, this is test program so I have added backslash before double quote, In my actual function there won&#39;t be any backslashes."}, {"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528442202, "post_id": 50755010, "comment_id": 88518399, "body": "As per given input by you, &quot;mail1\\\\\\&quot;,local&lt;mail1@mail.local&gt;, Here comma is outside double quote but it is before any occurrence of @ or &gt;, so here comma should not be replaced with \\n."}, {"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528442287, "post_id": 50755010, "comment_id": 88518441, "body": "put the double quote as it is, just need to play with comma with specific condition as mentioned above"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1528445616, "last_edit_date": 1528445616, "creation_date": 1528443216, "answer_id": 50755610, "question_id": 50755010, "link": "https://stackoverflow.com/questions/50755010/how-to-put-condition-in-below-regex/50755610#50755610", "title": "How to put condition in below RegEx?", "body": "\n\n<p>Note that there is a problem with your specification in that <code>\"mail2@,mail.local\"&lt;mail2@mail.local&gt;</code> will be split into <code>\"mail2@</code> and <code>mail.local\"&lt;mail2@mail.local&gt;</code> because the comma is after an <code>@</code>. This solution does what I think you mean</p>\n\n<p>I suggest that you parse your string into tokens and print each one separately</p>\n\n<p>This solution looks for</p>\n\n<ul>\n<li><p>A substring enclosed in <code>&lt;...&gt;</code></p></li>\n<li><p>A substring enclosed in <code>\"...\"</code></p></li>\n<li><p>A comma possibly with whitespace on either side</p></li>\n<li><p>A string of any other characters</p></li>\n</ul>\n\n<p>A flag <code>$seen_email</code> is set to <em>true</em> if the token contains an <code>@</code> or a <code>&gt;</code>. If the flag is true then any commas are converted to newlines and the flag reset, while anything else is printed verbatim</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $address = 'mail1,local&lt;mail1@mail.local&gt;, \"mail2@,mail.local\"&lt;mail2@mail.local&gt;';\n\n{   \n    my $seen_email;\n\n    while ( $address =~ / \\G ( &lt;[^&lt;&gt;]*&gt; | \"[^\"]*\" | \\h*,\\h* | [^\"&lt;&gt;,]+ ) /xg ) {\n\n        my $token = $1;\n        $seen_email ||= $token =~ /[\\@&gt;]/;\n\n        if ( $seen_email and $tok =~ /^\\h*,/ ) {\n            $token = \"\\n\";\n            $seen_email = undef;\n        }\n\n        print $token;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>mail1,local&lt;mail1@mail.local&gt;\n\"mail2@,mail.local\"&lt;mail2@mail.local&gt;\n</code></pre>\n\n<h3>Update</h3>\n\n<p>If you must have a substitution instead of printing the modified string to <code>STDOUT</code> then a refactoring of the above solution to an <code>s///eg</code> will do that for you</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $address = 'mail1,local&lt;mail1@mail.local&gt;, \"mail2@,mail.local\"&lt;mail2@mail.local&gt;';\n\n{   \n    my $seen_email;\n\n    $address =~ s{ \\G ( &lt;[^&lt;&gt;]*&gt; | \"[^\"]*\" | \\h*,\\h* | [^\"&lt;&gt;,]+ ) }{\n\n        my $token = $1;\n        $seen_email ||= $tok =~ /[\\@&gt;]/;\n\n        if ( $seen_email and $token =~ /^\\h*,/ ) {\n            $token = \"\\n\";\n            $seen_email = undef;\n        }\n\n        $token;\n\n    }exg;\n}\n\nsay $address;\n</code></pre>\n\n<h3>output</h3>\n\n<p>The output is identical</p>\n"}], "owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 50755610, "answer_count": 1, "score": 1, "last_activity_date": 1528445616, "creation_date": 1528440900, "question_id": 50755010, "link": "https://stackoverflow.com/questions/50755010/how-to-put-condition-in-below-regex", "title": "How to put condition in below RegEx?", "body": "<p>I have a below Regex, which puts '\\n' in place of comma(,), only when comma is after (> or @) (Not the next character but anytime after the occurrence of \"> or @\". </p>\n\n<pre><code>$address =~ s/([^@&gt;]+[@&gt;][^,]+),\\s*/$1\\n/g;\n</code></pre>\n\n<p>Above Regex converts Input to Output as shown below,</p>\n\n<p>Input:</p>\n\n<pre><code>$address =\"mail1, local&lt;mail1@mail.local&gt;, mail2@mail.local, &lt;mail3@mail.local&gt;, mail4 local&lt;mail4@mail.local&gt;\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>mail1, local&lt;mail1@mail.local&gt;\nmail2@mail.local\n&lt;mail3@mail.local&gt;\nmail4, local&lt;mail4@mail.local&gt;\n</code></pre>\n\n<p>Now What I am trying to do is, to achieve the same thing but if comma (,) is in between double quotes (\") then avoid replacing it with '\\n'.</p>\n\n<p>Basically for below Input I am expecting output shown below.</p>\n\n<p>Input:</p>\n\n<pre><code>$address = \"mail1,local&lt;mail1@mail.local&gt;, \\\"mail2@,mail.local\\\"&lt;mail2@mail.local&gt;\";\n</code></pre>\n\n<p>Current Output:</p>\n\n<pre><code>mail1,local&lt;mail1@mail.local&gt;\n\"mail2@\nmail.local\" &lt;mail2@mail.local&gt;\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>mail1,local&lt;mail1@mail.local&gt;\n\"mail2@,mail.local\" &lt;mail2@mail.local&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2427, "user_id": 2706826, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nJ4hV.png?s=128&g=1", "display_name": "QuishSwash", "link": "https://stackoverflow.com/users/2706826/quishswash"}, "edited": false, "score": 1, "creation_date": 1528432469, "post_id": 50753403, "comment_id": 88514709, "body": "So what&#39;s your specific question?"}, {"owner": {"reputation": 7, "user_id": 9912114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e8b4eb581b777732e070c2b5ea2665?s=128&d=identicon&r=PG&f=1", "display_name": "Frank_Pelly", "link": "https://stackoverflow.com/users/9912114/frank-pelly"}, "reply_to_user": {"reputation": 2427, "user_id": 2706826, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nJ4hV.png?s=128&g=1", "display_name": "QuishSwash", "link": "https://stackoverflow.com/users/2706826/quishswash"}, "edited": false, "score": 0, "creation_date": 1528432631, "post_id": 50753403, "comment_id": 88514745, "body": "Not sure what I&#39;m doing wrong. was looking for recommendation/better ways of doing this"}, {"owner": {"reputation": 2427, "user_id": 2706826, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nJ4hV.png?s=128&g=1", "display_name": "QuishSwash", "link": "https://stackoverflow.com/users/2706826/quishswash"}, "edited": false, "score": 2, "creation_date": 1528432737, "post_id": 50753403, "comment_id": 88514771, "body": "Cool - maybe edit the post so it&#39;s asking that question (it&#39;s just a statement now), and if possible show where its&#39;s going wrong or what the output is."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1528433556, "post_id": 50753403, "comment_id": 88515004, "body": "For starters, single quote strings do not do variable interpolation, so that&#39;s a major problem.  Fix that and see what happens, there are probably other issues."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528446956, "post_id": 50753403, "comment_id": 88520869, "body": "There are various issues with your code. I think you&#39;ve not put your real code into your question. We can&#39;t help you if you don&#39;t show what you are really running. Please <a href=\"https://stackoverflow.com/posts/50753403/edit\">edit</a> your question and show us your actual code. Also include <code>use strict</code> and make sure it compiles. For example, the <code>for each $server (@hosts) { ... }</code> will fail because <code>each</code> is an unknown function. That keyword is <code>foreach</code> without a space. Your string quoting is also completely messed up and will lead to compilation errors."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1528447397, "post_id": 50753403, "comment_id": 88521078, "body": "Have a look at <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\"><code>Net::OpenSSH</code></a> and <a href=\"https://metacpan.org/pod/Net::OpenSSH::Parallel\" rel=\"nofollow noreferrer\"><code>Net::OpenSSH::Parallel</code></a>."}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1528462644, "post_id": 50753403, "comment_id": 88529742, "body": "i would use expect (<a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\">metacpan.org/pod/Expect</a>) to log in and run the commands and then log out. yes there are newer and better ways (maybe) but expect once you&#39;ve done it once is easy"}, {"owner": {"reputation": 3102, "user_id": 1686626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc855759fde692f7c1773b0968faaea7?s=128&d=identicon&r=PG", "display_name": "Reflective", "link": "https://stackoverflow.com/users/1686626/reflective"}, "edited": false, "score": 0, "creation_date": 1528493371, "post_id": 50753403, "comment_id": 88544631, "body": "there sholuldn&#39;t be a <code>,</code> before <code>or die</code>  too"}], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1528516795, "creation_date": 1528516795, "answer_id": 50770787, "question_id": 50753403, "link": "https://stackoverflow.com/questions/50753403/perl-login-to-mutiple-servers-and-grep-for-an-error-in-logs/50770787#50770787", "title": "Perl - Login to mutiple servers and grep for an error in logs", "body": "<p>This code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $tc, 'ssh -q $uid@$server \"grep -c 'Error Occured' /home/perry/error.log-$LD8\"'\n</code></pre>\n\n<p>Is problematic for a number of reasons.  You probably want the variable names <code>$uid</code>, <code>$server</code> and <code>$LD8</code> to be replaced with the contents of those variables.  But the string uses single quotes - which is what you use when you <em>don't</em> want variables to be interpolated.  Also, the string contains single quotes, so it's probably triggering a syntax error.</p>\n\n<p>To make it more challenging, your string also contains double quote characters.  You could backslash-escape them like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $tc, \"ssh -q $uid@$server \\\"grep -c 'Error Occured' /home/perry/error.log-$LD8\\\"\"\n</code></pre>\n\n<p>Or you could use the <code>qq()</code> operator as alternative double quote delimiters.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $tc, qq(ssh -q $uid@$server \"grep -c 'Error Occured' /home/perry/error.log-$LD8\")\n</code></pre>\n\n<p>But there's still a problem because that string is a command but you're passing it to <code>open</code> as if it was a filename so it's still not going to work.  If you want <code>open</code> to treat the argument as a command and run it, with its STDOUT attached to a pipe, so that you can read from the pipe to get the command's output, then you need to add a pipe character (<code>|</code>) as the last character in the string:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $tc, qq(ssh -q $uid@$server \"grep -c 'Error Occured' /home/perry/error.log-$LD8\" |)\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9912114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e8b4eb581b777732e070c2b5ea2665?s=128&d=identicon&r=PG&f=1", "display_name": "Frank_Pelly", "link": "https://stackoverflow.com/users/9912114/frank-pelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528516795, "creation_date": 1528432261, "last_edit_date": 1528493120, "question_id": 50753403, "link": "https://stackoverflow.com/questions/50753403/perl-login-to-mutiple-servers-and-grep-for-an-error-in-logs", "title": "Perl - Login to mutiple servers and grep for an error in logs", "body": "<p>I'm Trying to login to multiple servers and grep for a specific error in the logs. If the error is found then output the hostname of the server and how many times the error occurred</p>\n\n<p>CODE:</p>\n\n<pre><code>#!/usr/bin/perl\nuse diagnostics;\nuse warnings;\n\nmy $uid = $ENV{'LOGNAME'};\nmy $server;\nmy @hosts = ('server1','server2','server3','server4','server5','server6','server7','server8');\nprint \"Log Date (MM-DD): \";\nmy $LD8 = &lt;STDIN&gt;;\nprint \"host             Error Occured \\n\";\nprint \"--------------  ---------------\\n\";\nfor each $server (@hosts) {\n    open my $tc, 'ssh -q $uid@$server \"grep -c 'Error Occured' /home/perry/error.log-$LD8\"', or die \"could not run\";\n    while (&lt;$tc&gt;) {\n        print \"$server      '$_'\\n\";\n    } #--while\n} #--for\nclose $tc;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "subset"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1528429228, "creation_date": 1528429228, "answer_id": 50753017, "question_id": 50752956, "link": "https://stackoverflow.com/questions/50752956/how-to-extract-a-subset-of/50753017#50753017", "title": "How to extract a subset of @_?", "body": "<p>With an array slice:</p>\n\n<pre><code>my @grps = @_[0..($grps_len-1)];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1528435182, "last_edit_date": 1528435182, "creation_date": 1528429909, "answer_id": 50753098, "question_id": 50752956, "link": "https://stackoverflow.com/questions/50752956/how-to-extract-a-subset-of/50753098#50753098", "title": "How to extract a subset of @_?", "body": "<p>Use a list or array slice.</p>\n\n<pre><code>sub parseheader { join(\",\", @_[ 1 .. $_[0] ]) . \"\\n\" }\n\nprint parseheader(3, @things);\n</code></pre>\n\n<p>but I'd use</p>\n\n<pre><code>sub take_first { @_[ 1 .. $_[0] ] }\n\nsay join \",\", take_first(3, @things);\n</code></pre>\n\n<hr>\n\n<p>If you want to remove the elements returned, you can use <code>splice</code>.</p>\n\n<pre><code>say join \",\", splice(@things, 0, 3);\n</code></pre>\n\n<hr>\n\n<p>By the way,</p>\n\n<pre><code>for (my $i=0; $i &lt; $grps_len; ++$i)\n</code></pre>\n\n<p>is a slow and complicated way of writing</p>\n\n<pre><code>for my $i (0..$grps_len-1)\n</code></pre>\n"}], "owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528438668, "creation_date": 1528428749, "last_edit_date": 1528438668, "question_id": 50752956, "link": "https://stackoverflow.com/questions/50752956/how-to-extract-a-subset-of", "title": "How to extract a subset of @_?", "body": "<p>I have the following function that works. But I am not sure what is the best way to extract a subset of <code>@_</code>. How to extract a subset from <code>@_</code> in the best way?</p>\n\n<pre><code>sub parseheader {\n  my $grps_len = shift;\n  my @grps;\n\n  for ( my $i = 0; $i &lt; $grps_len; ++$in) {\n    my $x = shift;\n    print \"$x\\n\";\n    push(@grps, $x);\n  }\n\n  return join(\",\", @grps), \"\\n\";\n}\n\nprint parseheader(3, \"a\", \"b\", \"c\");\n</code></pre>\n"}, {"tags": ["bash", "perl", "csv", "awk", "sed"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1528402080, "post_id": 50749026, "comment_id": 88506380, "body": "And you&#39;ve tried... what, exactly?"}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1528402250, "post_id": 50749026, "comment_id": 88506471, "body": "awk -F&quot;\\&quot;&quot; &#39;!$NF{print;next}{printf(&quot;%s &quot;, $0)}&#39; file  but this is getting rid of the terminal line feed, it looks like."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528402335, "post_id": 50749026, "comment_id": 88506516, "body": "What need be done with that CSV then? To merely correct it there&#39;s  <a href=\"https://stackoverflow.com/a/50749450/4653379\">glenn&#39;s answer</a> but note that you might as well use the module to read the file in (as shown in the answer) since the module doesn&#39;t have a problem with newlines, and then process as you would."}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528402542, "post_id": 50749026, "comment_id": 88506618, "body": "It has to be run through a large R program and has to read it first as text, then apply a lot of regex&#39;s, then parse the lines that pass that as csv.  The reading in as text breaks because of the embedded line feeds.  They don&#39;t matter as far as the R analysis goes, just the information in them."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528402881, "post_id": 50749026, "comment_id": 88506786, "body": "OK.  Then @glenn answer fixes those newlines.  (Perhaps still consider whether you can offload some of that processing to Perl which is far better for string mangling of all kinds.)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1528405283, "post_id": 50749026, "comment_id": 88507924, "body": "In general, see <a href=\"https://stackoverflow.com/q/45420535/1745001\">stackoverflow.com/q/45420535/1745001</a> for how to do whatever you like with a CSV using any awk in any shell on any UNIX box. If you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with concise, testable sample input and expected output and show us what you&#39;ve tried so far then we can help you."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528402805, "post_id": 50749450, "comment_id": 88506743, "body": "Where do I get the Text/CSV.pm ?"}, {"owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 0, "creation_date": 1528403041, "post_id": 50749450, "comment_id": 88506863, "body": "<a href=\"https://metacpan.org/pod/release/ISHIGAKI/Text-CSV-1.95/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">metacpan.org/pod/release/ISHIGAKI/Text-CSV-1.95/lib/Text/CSV&zwnj;&#8203;.pm</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528403201, "post_id": 50749450, "comment_id": 88506937, "body": "@JohnWooten For every OS there is a system for easy installation of modules (so you don&#39;t have to use the tarball from CPAN!).  On Linux there is <code>cpan</code> (or <code>cpanm</code>, easier) or you can get packages for a distro you use (for RHEL it&#39;s <code>Perl-Text-CSV...rpm</code> for example).  Same for Windows (but I&#39;m not familiar with installation tools.)"}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528403724, "post_id": 50749450, "comment_id": 88507201, "body": "Found ppm on my machine and did a push(@INC,path) before the use Text::CSV;  Got this result fix.pl test_lf.csv &gt; fixed.csv Use of /c modifier is meaningless without /g at ./fix.pl line 8. Regexp modifiers &quot;/l&quot; and &quot;/a&quot; are mutually exclusive at ./fix.pl line 8, at end of line Regexp modifier &quot;/l&quot; may not appear twice at ./fix.pl line 8, at end of line syntax error at ./fix.pl line 8, near &quot;/)&quot; BEGIN not safe after errors--compilation aborted at ./fix.pl line 9."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528404004, "post_id": 50749450, "comment_id": 88507330, "body": "@JohnWooten Try to install the module normally (ActiveState?).  You absolutely shouldn&#39;t need nor use <code>push @INC...</code>."}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528404059, "post_id": 50749450, "comment_id": 88507363, "body": "My ppm isn\u2019t in a standard place"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528404622, "post_id": 50749450, "comment_id": 88507604, "body": "@JohnWooten  That is why I suggest to &quot;<i>install the module normally</i>&quot; so that it is where it&#39;s expected. (If there are reasons why you can&#39;t then that&#39;s a different question.)"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1528404676, "post_id": 50749450, "comment_id": 88507622, "body": "Not ideal, but you could download the pure perl version (<a href=\"https://metacpan.org/source/ISHIGAKI/Text-CSV-1.95/lib/Text/CSV_PP.pm\" rel=\"nofollow noreferrer\">metacpan.org/source/ISHIGAKI/Text-CSV-1.95/lib/Text/CSV_PP.&zwnj;&#8203;pm</a>), store it in a file in the same directory as your script file and do <code>do &quot;.&#47;CSV_PP.pm&quot;;</code>"}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528404712, "post_id": 50749450, "comment_id": 88507644, "body": "I did the ppm install Text-CSV after locating my ppm.  the error message persisted that Text/CSV was not in the @INC, so I tried to explicit add it, to no avail."}, {"owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 0, "creation_date": 1528406063, "post_id": 50749450, "comment_id": 88508271, "body": "You can use <code>use lib &#39;&#47;directory&#47;to&#47;my&#47;lib&#39;;</code> followed by the <code>use Text::CSV;</code>. By the way, this didn&#39;t work for me.  It just chopped AT the new line.  I don&#39;t know if it is wrong, but I have had issues like this before.  My Perl is super outdated and I am on a system with no root privileges (hence my non-standard installation method)."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 0, "creation_date": 1528406800, "post_id": 50749450, "comment_id": 88508547, "body": "@Jason, for your field with the newline, is the field quoted?"}, {"owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 0, "creation_date": 1528465074, "post_id": 50749450, "comment_id": 88531298, "body": "@glennjackman Sort of... It actually chopped the beginning of the line up to the line-feed.  So, the closing quote is there.  I have had similar issues parsing line-feeds within text qualifiers in Perl. I am almost certain it is just out of date modules.  This led me to just write my own csv parser in C++."}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1528728715, "post_id": 50749450, "comment_id": 88606984, "body": "Thanks, managed to get ppm installed and use the code above.  If you read some of my comments, you&#39;ll find some of the issues.  Numbers, on a mac, uses a unicode sequence to denote an embedded break in a field.  Excel ignores this and just shows special characters there.  If you quote the field in the csv, Excel will read it in ignoring the embedded breaks, but they are there in the csv file."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 3, "last_activity_date": 1528402121, "creation_date": 1528402121, "answer_id": 50749450, "question_id": 50749026, "link": "https://stackoverflow.com/questions/50749026/how-can-i-replace-line-feed-in-csv-quoted-fields-with-a-blank/50749450#50749450", "title": "How can I replace line-feed in csv quoted fields with a blank?", "body": "<p>I'd use the Perl module <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw/say/;\nuse open IO =&gt; ':encoding(utf8)';\nuse open ':std';\nuse Text::CSV;\n\nmy $file = shift @ARGV;\nopen my $fh, \"&lt;\", $file or die \"cannot open $file: $!\\n\";\n\nmy $csv = Text::CSV-&gt;new({binary =&gt; 1});\n\nwhile (my $row = $csv-&gt;getline($fh)) {\n    my @no_newlines = map {s/\\n/ /g; $_} @$row;\n    $csv-&gt;combine(@no_newlines);\n    say $csv-&gt;string();\n}\n\nclose $fh;\n</code></pre>\n\n<p>And then you can run it like:</p>\n\n<pre><code>/path/to/csvfixer.pl file.csv &gt; fixed.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": -1, "last_activity_date": 1528405813, "last_edit_date": 1528405813, "creation_date": 1528402636, "answer_id": 50749568, "question_id": 50749026, "link": "https://stackoverflow.com/questions/50749026/how-can-i-replace-line-feed-in-csv-quoted-fields-with-a-blank/50749568#50749568", "title": "How can I replace line-feed in csv quoted fields with a blank?", "body": "<p>Assuming that the quote character is the double quote <code>\"</code> and the escape character is the double quote too, you can do it with sed if you translate all line-feeds to spaces when the number of double quotes is even in the pattern space. When the number is odd, you only have to append the next line.</p>\n\n<pre><code>sed ':a;/^\\([^\"]*\"[^\"]*\"\\)*[^\"]*$/!{N;ba};y/\\n/ /' file.csv\n</code></pre>\n\n<p>details:</p>\n\n<pre><code>:a    # define the label \"a\"\n/^\\([^\"]*\"[^\"]*\"\\)*[^\"]*$/! # if not an even number of quotes\n{\n    N  # append the next line to the pattern space\n    ba # go to label \"a\"\n}\ny/\\n/ / # translate all line-feeds to spaces\n</code></pre>\n\n<p>If quotes aren't well balanced, the default behaviour is to not proceed the last quoted part. You can change it writing:</p>\n\n<pre><code>sed ':a;${y/\\n/ /;s/$/\"/};/^\\([^\"]*\"[^\"]*\"\\)*[^\"]*$/!{N;ba};y/\\n/ /' file.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "is_accepted": false, "score": 0, "last_activity_date": 1528729308, "creation_date": 1528729308, "answer_id": 50800758, "question_id": 50749026, "link": "https://stackoverflow.com/questions/50749026/how-can-i-replace-line-feed-in-csv-quoted-fields-with-a-blank/50800758#50800758", "title": "How can I replace line-feed in csv quoted fields with a blank?", "body": "<p>After a lot of reading hex dumps of the csv file, looking at the differences in the way Numbers on Macs and Excel on PCs treat embedded breaks, it appears that a simple portable way to locate and change the encoding for breaks is not worth the effort.  If the data fields containing breaks are enclosed in quotes, then Excel will read them fine as will read.csv in R.  </p>\n"}], "owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 50749450, "answer_count": 3, "score": -1, "last_activity_date": 1528729308, "creation_date": 1528400328, "last_edit_date": 1528480758, "question_id": 50749026, "link": "https://stackoverflow.com/questions/50749026/how-can-i-replace-line-feed-in-csv-quoted-fields-with-a-blank", "title": "How can I replace line-feed in csv quoted fields with a blank?", "body": "<p>Have a large csv file with some line feeds in quoted columns.  I need to run a shell script, sed, awk, perl are fine and replace only the line feeds inside quotes with a space.  The end of line must be preserved and I don't know the number of columns or which fields might have these embedded line feeds.</p>\n\n<p>Further examination of the file shows this as a result of cat -v test_lf.csv</p>\n\n<pre><code>\"NORTH ?M-^@?OLMSTED\"\n\"PORT?M-^@?ST?M-^@?LUCIE\"\n</code></pre>\n\n<p>in the csv file which in excel shows a line break where the ?M-^@? is.</p>\n\n<p>I'd like to use tr to replace whatever that is with a space.  How would I do that?  What is that sequence?</p>\n\n<p>I've now found that a small part of the file looks like the following in characters and in hex.</p>\n\n<pre><code>13:20:59 [woo:~/Development/scripts] &gt; tail -n 8 test_lf.csv | head -n 1 | od -x\n0000000      3431    3136    3439    3039    2c39    542c    4c45    3543\n0000020      5f36    3430    2c47    4c46    332c    3934    3338    312c\n0000040      3634    3931    3934    3930    222c    4f50    5452    80e2\n0000060      53a8    e254    a880    554c    4943    2245    462c    2c4c\n0000100      3433    3839    2c33    3737    2c32    3237    2c37    3535\n0000120      2c2c    5441    334c    2c51    6e43    7463    222c    6f4e\n0000140      80e2    4da8    6773    2c22    2c34    3832    312c    0d35\n0000160      000a                                                        \n0000161\n13:21:50 [woo:~/Development/scripts] &gt; tail -n 8 test_lf.csv | head -n 1 | od -c\n0000000    1   4   6   1   9   4   9   0   9   ,   ,   T   E   L   C   5\n0000020    6   _   0   4   G   ,   F   L   ,   3   4   9   8   3   ,   1\n0000040    4   6   1   9   4   9   0   9   ,   \"   P   O   R   T   \u2028      **\n0000060   **   S   T   \u2028      **  **   L   U   C   I   E   \"   ,   F   L   ,\n0000100    3   4   9   8   3   ,   7   7   2   ,   7   2   7   ,   5   5\n0000120    ,   ,   A   T   L   3   Q   ,   C   n   c   t   ,   \"   N   o\n0000140    \u2028      **  **   M   s   g   \"   ,   4   ,   2   8   ,   1   5  \\r\n0000160   \\n  \n</code></pre>\n\n<p>I'm on a mac and the file is utf-8, and my locale is utf-8.  It appears that the bytes are swapped (little-endian), so hexadecimal 3431 3136 is 1463 in the character representation.  So, starting at byte 60 in this output, we have:\nsomething, S, T, blank, something, something, L and in hex this is:\n53a8    e254    a880    554c, 53 is an S, 54 is a T, and 4c is an L .  So, there is an e2, a8, 80 sequence between the T and the L.  This produces a line-feed in the Excel spreadsheet field.<br>\nHow do I find and replace these bytes by a space?                              </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528394315, "post_id": 50746720, "comment_id": 88502505, "body": "You say you want to <i>&quot;convert a string into an array based on space delimiter&quot;</i> but the code you have written splits on tabs. Furthermore, I don&#39;t see where those spaces/tabs can be in your sample input data. You also do nothing to remove the header line beginning with <code>&gt;</code>."}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528403869, "post_id": 50746720, "comment_id": 88507263, "body": "Hi I have added code to remove the header which is next if $line =~ /&gt;/. Also, I will edit my code so you can get a clear idea of what i am trying to do. The input file has 60 characters per line. I tried removing the carriage returns \\r, newlines \\n to no avail. It still reads a line and and stores it as array index which is not what I want. I want each character of the input line to be stored as elements of an array."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528404277, "post_id": 50746720, "comment_id": 88507460, "body": "<code>my $args = $#ARGV + 1;</code> is rather an obfuscated way to write <code>my $args = @ARGV;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528408120, "post_id": 50746720, "comment_id": 88509047, "body": "@Callie: So you&#39;re not in fact <i>&quot;trying to convert a string into an array based on space delimiter&quot;</i>? I think you need <code>push @consensus, split &#47;&#47;, $line</code>. The array will be complete only after the end of the <code>while</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528407272, "post_id": 50750003, "comment_id": 88508737, "body": "<code>warn</code> better than <code>print STDERR</code> since it&#39;s hookable. Also, shorter"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1528404797, "creation_date": 1528404797, "answer_id": 50750003, "question_id": 50746720, "link": "https://stackoverflow.com/questions/50746720/populate-an-array-by-splitting-a-string/50750003#50750003", "title": "Populate an array by splitting a string", "body": "<p>It looks like your code is essentially working. It's just your checking logic that makes no sense. I'd do the following:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nif (@ARGV != 1) {\n    print STDERR \"Usage: $0 &lt;consensus fasta file&gt;\\n\";\n    exit 1;\n}\n\nopen my $fh, '&lt;', $ARGV[0] or die \"$0: cannot open $ARGV[0]: $!\\n\";\n\nmy @consensus;\nwhile (my $line = readline $fh) {\n    next if $line =~ /^&gt;/;\n\n    $line =~ s/\\s+//g;\n    push @consensus, split //, $line;\n}\n\nprint \"N = \", scalar @consensus, \"\\n\";\n</code></pre>\n\n<p>Main things to note:</p>\n\n<ul>\n<li>Error messages should go to <code>STDERR</code>, not <code>STDOUT</code>.</li>\n<li>If an error occurs, the program should exit with an error code, not keep running.</li>\n<li>Error messages should include the name of the program and the reason for the error.</li>\n<li><code>chomp</code> is redundant if you're going to remove all whitespace anyway.</li>\n<li>As you're processing the input line by line, you can just keep pushing elements to the end of <code>@consensus</code>. At the end of the loop it'll have accumulated all characters across all lines.</li>\n<li>Examining <code>@consensus</code> within the loop makes little sense as it hasn't finished building yet. Only after the loop do we have all characters we're interested in.</li>\n</ul>\n"}], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 50750003, "answer_count": 1, "score": -4, "last_activity_date": 1530816807, "creation_date": 1528391166, "last_edit_date": 1530816807, "question_id": 50746720, "link": "https://stackoverflow.com/questions/50746720/populate-an-array-by-splitting-a-string", "title": "Populate an array by splitting a string", "body": "<p>I am trying to convert a string into an array based on space delimiter.</p>\n\n<p>My input file looks like this:</p>\n\n<pre><code>&gt;Reference\nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnctcACCATGGTGTCGACTC\nTTCTATGGAAACAGCGTGGATGGCGTCTCCAGGCGATCTGACGGTTCACTAAACGAGCTC\n</code></pre>\n\n<p>Ignoring the line starting with <code>&gt;</code>, the length of rest of the string is 360.</p>\n\n<p>I am trying to convert this into an array.</p>\n\n<p>Here's my code so far:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n#### To to change bases with less than 10X coverage to N #####\n\n#### Take depth file and consensus fasta file as input arguments ####\n\nmy ($in2) = @ARGV;\n\nmy $args = $#ARGV + 1;\n\nif ( $args != 1 ) {\n    print \"Error!!! Insufficient Number of Argumrnts\\n\";\n    print \"Usage: $0 &lt;consensus fasta file&gt; \\n\";\n}\n\n#### Open a filehandle to read in consensus fasta file ####\n\n    my $FH2;\n    my $line;\n    my @consensus;\n    my $char;\n\n    open($FH2, '&lt;', $in2) || die \"Could not open file $in2\\n\";\n\n    while ( &lt;$FH2&gt; ) {\n        $line = $_;\n        chomp $line;\n        next if $line =~ /&gt;/; # skip header line \n        $line =~ s/\\s+//g;\n\n        my $len = length($line);\n        print \"$len\\n\";\n        #print \"$line\";\n\n        @consensus = split(// , $line);\n        print \"$#consensus\\n\";\n        #print \"@consensus\\n\";\n\n        #for $char (0 .. $#consensus){\n    #   print \"$char: $consensus[$char]\\n\";\n     #   }\n    }\n</code></pre>\n\n<p>The problem is the <code>$len</code> variable returns a value of 60 instead of 360 and <code>$#consensus</code> returns a value of 59 instead of 360 which is the length of the string.</p>\n\n<p>I have removed the whitespace after each line with code <code>$line =~ s/\\s+//g;</code>but it still is not working.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528401409, "post_id": 50746340, "comment_id": 88506049, "body": "Hang on, in this edit quotation (<code>&quot;</code>) appeared, which doesn&#39;t seem right? (Please edit to correct if it shouldn&#39;t be there)"}, {"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528401642, "post_id": 50746340, "comment_id": 88506154, "body": "Done, Can you please help in solving edited question ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528401963, "post_id": 50746340, "comment_id": 88506323, "body": "Does the edit mean that you only want to keep those with description before <code>&lt;...&gt;</code> (so drop the others altogether), or that you want that description quoted when it&#39;s there (but otherwise keep all four records)?"}, {"owner": {"reputation": 587, "user_id": 4336150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cce821782e6eff5bf46e45e1a00f9fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/4336150/chirag"}, "edited": false, "score": 0, "creation_date": 1528433668, "post_id": 50746340, "comment_id": 88515031, "body": "Second half of your comment,  I need that description(part before &#39;&lt;&#39;) quoted when it is there"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528438099, "post_id": 50746340, "comment_id": 88516477, "body": "Added that to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "edited": false, "score": 0, "creation_date": 1528394260, "post_id": 50747210, "comment_id": 88502470, "body": "Thank you so much, this is what I was looking for. Thanks a lot :)"}, {"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "edited": false, "score": 0, "creation_date": 1528400819, "post_id": 50747210, "comment_id": 88505750, "body": "Hi, I have edited my question(Even expected output also I edited). Is it ok if you can provide your feedback for that code change? Is there any better way to achieve it?"}], "tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": true, "score": 3, "last_activity_date": 1528481050, "last_edit_date": 1528481050, "creation_date": 1528393213, "answer_id": 50747210, "question_id": 50746340, "link": "https://stackoverflow.com/questions/50746340/best-way-to-parse-string-in-perl/50747210#50747210", "title": "Best way to parse string in perl", "body": "<p>As I see, you want to replace each:</p>\n\n<ul>\n<li>comma and following spaces,</li>\n<li>occurring after either <code>@</code> or <code>&gt;</code>,</li>\n</ul>\n\n<p>with a newline.</p>\n\n<p>To make such replacement, instead of writing a parsing program, you can use\na regex.</p>\n\n<p>The search part can be as follows:</p>\n\n<pre><code>([^@&gt;]+[@&gt;][^,]+),\\s*\n</code></pre>\n\n<p>Details:</p>\n\n<ul>\n<li><code>(</code> - Start of the 1st capturing group.\n\n<ul>\n<li><code>[^@&gt;]+</code> - A non-empty sequence of chars other than <code>@</code> or <code>&gt;</code>.</li>\n<li><code>[@&gt;]</code> - Either <code>@</code> or <code>&gt;</code>.</li>\n<li><code>[^,]+</code> - A non-empty sequence of chars other than a comma.</li>\n</ul></li>\n<li><code>)</code> - End of the 1st capturing group. </li>\n<li><code>,\\s*</code> - A comma and optional sequence of spaces.</li>\n</ul>\n\n<p>The replace part should be:</p>\n\n<ul>\n<li><code>$1</code> - The 1st capturing group.</li>\n<li><code>\\n</code> - A newline.</li>\n</ul>\n\n<p>So the whole program, much shorter than yours, can be as follows:</p>\n\n<pre><code>my $str='mail1, local&lt;mail1@mail.local&gt;, mail2@mail.local, &lt;mail3@mail.local&gt;, mail4, local&lt;mail4@mail.local&gt;';\nprint \"Before:\\n$str\\n\";\n$str =~ s/([^@&gt;]+[@&gt;][^,]+),\\s*/$1\\n/g;\nprint \"After:\\n$str\\n\";\n</code></pre>\n\n<p>To replace <strong>all</strong> needed commas I used <code>g</code> option.</p>\n\n<p>Note that I put the source string in <strong>single</strong> quotes, otherwise Perl\nwould have complained about <em>Possible unintended interpolation of @mail</em>.</p>\n\n<h2>Edit</h2>\n\n<p>Your modified requirements must be handled different way.\n\"Ordinary\" replacement is not an option, because now there are some\nfragments to <strong>match</strong> and some framents to <strong>ignore</strong>.</p>\n\n<p>So the basic idea is to write a <code>while</code> loop with a <strong>matching</strong> regex:\n<code>(\\w+),?\\s+(\\w+)(&lt;[^&gt;]+&gt;)</code>, meaning:</p>\n\n<ul>\n<li><code>(\\w+)</code> - First capturing group - a sequence of word chars (e.g. <code>mail1</code>).</li>\n<li><code>,?\\s+</code> - Optional comma and a sequence of spaces.</li>\n<li><code>(\\w+)</code> - Second capturing group - a sequence of word chars (e.g. <code>local</code>).</li>\n<li><code>(&lt;[^&gt;]+&gt;)</code> - Third capturing group - a sequence of chars other than <code>&gt;</code>\n(actual mail address), enclosed in angle brackets, e.g. <code>&lt;mail1@mail.local&gt;</code>.</li>\n</ul>\n\n<p>Within each execution of the loop you have access to the groups\ncaptured in this particular match (<code>$1</code>, <code>$2</code>, ...).</p>\n\n<p>So the content of this loop is to print all these captured groups,\nwith required additional chars.</p>\n\n<p>The code (again much shorter than yours) should look like below:</p>\n\n<pre><code>my $str = 'mail1, local&lt;mail1@mail.local&gt;, mail2@mail.local, &lt;mail3@mail.local&gt;, mail4 local&lt;mail4@mail.local&gt;';\nwhile ($str =~ /(\\w+),?\\s+(\\w+)(&lt;[^&gt;]+&gt;)/g) {\n  print \"\\\"$1, $2\\\"$3\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "edited": false, "score": 0, "creation_date": 1528401554, "post_id": 50749199, "comment_id": 88506112, "body": "Hi, Thanks for the reply, Can you please help me with the edited question?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1529555605, "last_edit_date": 1529555605, "creation_date": 1528400976, "answer_id": 50749199, "question_id": 50746340, "link": "https://stackoverflow.com/questions/50746340/best-way-to-parse-string-in-perl/50749199#50749199", "title": "Best way to parse string in perl", "body": "<p>Here is an approach using <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>, which in this case also needs a careful regex</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $string =   # broken into two parts for readabililty\n    q(mail1, local&lt;mail1@mail.local&gt;, mail2@mail.local, )\n .  q(&lt;mail3@mail.local&gt;, mail4, local&lt;mail4@mail.local&gt;);\n\nmy @addresses = split /@.+?\\K,\\s*/, $string;\n\nsay for @addresses;\n</code></pre>\n\n<p>The <code>split</code> takes a full regex in its delimiter specification.  In this case I figure that each record is delimited by a comma which comes after the email address, so <code>@.+?,</code>  </p>\n\n<p>To match a pattern only when it is preceded by another brings to mind a <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">negative lookbehind</a> before the comma. But those can't be of variable length, which is precisely the case here.  </p>\n\n<p>We can instead normally match the pattern <code>@.+?</code> and then use the <a href=\"https://perldoc.perl.org/5.12.4/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code> form</a> (of the lookbehind) which drops all previous matches so that they are not taken out of the string. Thus the above splits on <code>,\\s*</code> when that is preceded by the email address, <code>@...</code> (what isn't consumed).</p>\n\n<p>It prints</p>\n\n<pre><code>mail1, local&lt;mail1@mail.local&gt;\nmail2@mail.local\n&lt;mail3@mail.local&gt;\nmail4, local&lt;mail4@mail.local&gt;\n</code></pre>\n\n<hr>\n\n<p>The edit asks about quoting the description preceding <code>&lt;...&gt;</code> when it's there. A simple way is to make another pass once addresses have been parsed out of the string as above. For example</p>\n\n<pre><code>my @addresses = split /@.+?\\K,\\s*/, $string;   #/ stop syntax highlight\n\ns/(.+?,\\s*.+?)&lt;/\"$1\"&lt;/  for @addresses;\n\nsay for @addresses;\n</code></pre>\n\n<p>The regex in a loop is one way to change elements of an array.  I use it for its efficiency (changes elements in place), conciseness, and as a demonstration of the following properties. </p>\n\n<p>In a <a href=\"https://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">foreach loop</a> the index variable (or <code>$_</code>) <em>is an alias for the currently processed element</em> &ndash; so changing it changes that element.  This is a known source of bugs when allowed unknowingly, which was another reason to show it in the above form.</p>\n\n<p>The statement also uses the <a href=\"https://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">statement modifier</a> and it is equivalent to</p>\n\n<pre><code>foreach my $elem (@addresses) {\n    $elem =~ s/(.+?,\\s*.+?)&lt;/\"$1\"&lt;/;\n}\n</code></pre>\n\n<p>This is often considered a more proper way to write it but I find that the other form emphasizes more clearly that elements are being changed, when that is the sole purpose of the <code>foreach</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 1, "accepted_answer_id": 50747210, "answer_count": 2, "score": 3, "last_activity_date": 1529555605, "creation_date": 1528389706, "last_edit_date": 1528401498, "question_id": 50746340, "link": "https://stackoverflow.com/questions/50746340/best-way-to-parse-string-in-perl", "title": "Best way to parse string in perl", "body": "<p>To achieve below task I have written below C like perl program (As I am new to Perl), But I am not sure if this is the best way to achieve. </p>\n\n<p>Can someone please guide? \nNote: Not with the full program, But where I can make improvement.</p>\n\n<p>Thanks in advance</p>\n\n<p>Input : </p>\n\n<pre><code>$str = \"mail1, local&lt;mail1@mail.local&gt;, mail2@mail.local, &lt;mail3@mail.local&gt;, mail4 local&lt;mail4@mail.local&gt;\"\n</code></pre>\n\n<p>Expected Output : </p>\n\n<pre><code>mail1, local&lt;mail1@mail.local&gt;\nmail2@mail.local\n&lt;mail3@mail.local&gt;\nmail4, local&lt;mail4@mail.local&gt;\n</code></pre>\n\n<p>Sample Program</p>\n\n<pre><code>my $str=\"mail1, \\@local&lt;mail1\\@mail.local&gt;, mail2\\@mail.local, &lt;mail3\\@mail.local&gt;, mail4, local&lt;mail4\\@mail.local&gt;\";\nmy $count=0, @array, $flag=0, $tempStr=\"\";\nfor my $c (split (//,$str)) {\n    if( ($count eq 0) and ($c eq ' ') ) {\n        next;\n    }\n    if($c) {\n        if( ($c eq ',') and ($flag eq 1) ) {\n            push @array, $tempStr;\n            $count=0;\n            $flag1=0;\n            $tempStr=\"\";\n            next;\n        }\n        if( ($c eq '&gt;' ) or ( $c eq '@' ) ) {\n            $flag=1;\n        }\n        $tempStr=\"$tempStr$c\";\n        $count++;\n    }\n}\nif($count&gt;0) {\n    push @array, $tempStr;\n}\nforeach my $var (@array) {\n    print \"$var\\n\";\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Input:</p>\n\n<pre><code>Input is the output of above code.\n</code></pre>\n\n<p>Expected Output :</p>\n\n<pre><code>\"mail1, local\"&lt;mail1@mail.local&gt;\n\"mail4, local\"&lt;mail4@mail.local&gt;\n</code></pre>\n\n<p>Sample Code:</p>\n\n<pre><code>$str =~ s/([^@&gt;]+[@&gt;][^,]+),\\s*/$1\\n/g;\nmy @addresses = split('\\n',$str);\nif(scalar @addresses) {\n    foreach my $address (@addresses) {\n        if (($address =~ /&lt;/) and ($address !~ /\\\"/) and ($address !~ /^&lt;/)){\n            $address=\"\\\"$address\";\n            $address=~ s/&lt;/\\\"&lt;/g;\n        }\n    }\n    $str = join(',',@addresses);\n}\nprint \"$str\\n\";\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1528388487, "post_id": 50745832, "comment_id": 88499586, "body": "Quoting will be your problem. Just use <code>Net::Ping</code> and do the work within <code>perl</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528427082, "post_id": 50745832, "comment_id": 88513485, "body": "&quot;This code line is not working&quot; is not an adequate description on the problem."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528404940, "post_id": 50746817, "comment_id": 88507749, "body": "Wow, that looks awful (and probably suffers from command injection)."}], "tags": [], "owner": {"reputation": 63, "user_id": 6127677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3548cc9fbf984cfb78ce74a961c226b0?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6127677/michael"}, "is_accepted": false, "score": -1, "last_activity_date": 1528404909, "last_edit_date": 1528404909, "creation_date": 1528391602, "answer_id": 50746817, "question_id": 50745832, "link": "https://stackoverflow.com/questions/50745832/how-to-use-bash-pipe-with-perl-script/50746817#50746817", "title": "How to use bash pipe with perl script", "body": "<pre><code>my $ping_check =`ping -w 300  -i $interval $host | while read line; do echo \\`date \\+%F%T\\` - \\$line &gt;&gt; $logfile; done `;\n</code></pre>\n\n<p>using this code line i was able to get what i need </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1528427809, "creation_date": 1528427809, "answer_id": 50752831, "question_id": 50745832, "link": "https://stackoverflow.com/questions/50745832/how-to-use-bash-pipe-with-perl-script/50752831#50752831", "title": "How to use bash pipe with perl script", "body": "<p>Your program is rife with code injection bugs.</p>\n\n<p>Using localtime for timestamps without including time zone information (e.g. an offset from UTC) is problematic in places with daylight saving time.</p>\n\n<p>Here's a solution that addresses those problems:</p>\n\n<pre><code>use POSIX              qw( strftime );\nuse String::ShellQuote qw( shell_quote );\n\nopen(my $fh_log, '&gt;&gt;', $test)\n   or die $!;\n\nopen(my $pipe, '|-', \"ping\", \"-w\", \"300\", \"-i\", $interval, \"--\", $host)\n   or die $!;\n\nwhile (&lt;$pipe&gt;) {\n   my $ts = strftime(\"%Y-%m-%dT%H:%M:%S%z\", localtime);\n   print($fh_log \"[$ts] $_\");\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6127677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3548cc9fbf984cfb78ce74a961c226b0?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6127677/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1528427809, "creation_date": 1528387860, "last_edit_date": 1528404880, "question_id": 50745832, "link": "https://stackoverflow.com/questions/50745832/how-to-use-bash-pipe-with-perl-script", "title": "How to use bash pipe with perl script", "body": "<p>I need to run this command using perl script using system.This code line is not working.do you have any idea why</p>\n\n<pre><code>system(\"ping -w 300  -i $interval $host \\|  sed 's/\\(.*\\)/\\$(date +%F\\ %T) \\1/g' &gt;&gt; $ test\" )\n</code></pre>\n"}, {"tags": ["json", "perl", "mechanize"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528382214, "post_id": 50743506, "comment_id": 88495584, "body": "You probably forgot a key or have a typo in one."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1528381575, "creation_date": 1528381575, "answer_id": 50743758, "question_id": 50743506, "link": "https://stackoverflow.com/questions/50743506/using-wwwmechanize-to-put-a-json-message-to-a-server/50743758#50743758", "title": "Using WWW::Mechanize to PUT a JSON message to a server", "body": "<p><a href=\"https://httpstatuses.com/422\" rel=\"nofollow noreferrer\"><code>httpstatuses.com</code></a>\nsays this</p>\n\n<blockquote>\n  <p>The server understands the content type of the request entity (hence a <strong>415 Unsupported Media Type</strong> status code is inappropriate), and the syntax of the request entity is correct (thus a <strong>400 Bad Request</strong> status code is inappropriate) but was unable to process the contained instructions.</p>\n</blockquote>\n\n<p>So the server is happy with the syntax of your JSON but the semantics are invalid. That's all I can say from the information you've given</p>\n"}], "owner": {"reputation": 3, "user_id": 9908667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63339a80622941ff7f9033597a4bfc69?s=128&d=identicon&r=PG&f=1", "display_name": "sbluhm", "link": "https://stackoverflow.com/users/9908667/sbluhm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528381575, "creation_date": 1528380899, "last_edit_date": 1528381264, "question_id": 50743506, "link": "https://stackoverflow.com/questions/50743506/using-wwwmechanize-to-put-a-json-message-to-a-server", "title": "Using WWW::Mechanize to PUT a JSON message to a server", "body": "<p>I am trying to use HTTP PUT to send a JSON message to a server but I get an error message:</p>\n\n<blockquote>\n  <p>Error PUTing <a href=\"https://www.example.com/records\" rel=\"nofollow noreferrer\">https://www.example.com/records</a>: Unprocessable Entity at ./script.pl line 190.</p>\n</blockquote>\n\n<p>What does this message mean? Is it from Perl or is it from the server (I assume Perl as it gives me a line number).</p>\n\n<p>This is what the script is doing (using the same mechanize objects in all steps):</p>\n\n<ul>\n<li>GET \"www.example.com\" (OK)</li>\n<li>POST credentials to the login form (OK)</li>\n<li>GET \"<a href=\"https://www.example.com/records\" rel=\"nofollow noreferrer\">https://www.example.com/records</a>\" (OK)</li>\n<li>Decode the received JSON (appears OK)</li>\n<li>Create a new JSON string called $json_text (appears OK)</li>\n<li>PUT $json_text to \"<a href=\"https://www.example.com/records\" rel=\"nofollow noreferrer\">https://www.example.com/records</a>\" (ERROR)</li>\n</ul>\n\n<p>I am using CentOS 7.5 with all updates as of today installed.</p>\n\n<p>Here are extracts from the last two steps.</p>\n\n<pre><code>my $json_text;\n\n# Some logic here to fill the string\n\nprint $json_text . \"\\n\";\n$mech-&gt;content_type( 'application/json' );\n$mech-&gt;put ( $url, content =&gt; $json_text );\n</code></pre>\n\n<p>The print statement outputs:</p>\n\n<pre><code>{\"record\":{\"webspace\":false,\"ttl\":600,\"filter_value\":\"test.com\",\"abc_record_type\":null,\"formId\":12345678,\"standard_value\":false,\"area\":\"test.com\",\"address\":\"12.12.12.12\",\"id\":12345678,\"type\":\"A\",\"sub_area\":\"\"},\"area_lock_state\":{\"area_locked\":false,\"email_locked\":false}}\n</code></pre>\n\n<p>I don't see anything wrong in the JSON object. Do you have any pointers or on how to use Mechanize to put this object?</p>\n"}, {"tags": ["excel", "perl"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 9318576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/911358fcaffc3b15dbc9d0f8f072afc6?s=128&d=identicon&r=PG&f=1", "display_name": "user9318576", "link": "https://stackoverflow.com/users/9318576/user9318576"}, "edited": false, "score": 0, "creation_date": 1528376961, "post_id": 50740872, "comment_id": 88491613, "body": "thanks for your answer I made the changes what did you suggest but still i&#39;m getting same  error."}], "tags": [], "owner": {"reputation": 16956, "user_id": 8112776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tj3MU.png?s=128&g=1", "display_name": "ashleedawg", "link": "https://stackoverflow.com/users/8112776/ashleedawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1528373396, "creation_date": 1528373396, "answer_id": 50740872, "question_id": 50740356, "link": "https://stackoverflow.com/questions/50740356/while-open-excel-file-getting-error/50740872#50740872", "title": "While open excel file getting error", "body": "<p><code>application/vnd.ms-excel</code> is for BIFF (<code>.xls</code>) files.</p>\n\n<hr>\n\n<p>For <strong>Excel 2007</strong> and above (<code>.xlsx</code>) files, use:</p>\n\n<pre><code>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n</code></pre>\n\n<hr>\n\n<p><sup>(<a href=\"https://stackoverflow.com/a/2938188/8112776\"><strong>Source</strong></a>)</sup></p>\n\n<p>...so, either change your extension or the attachment type, so they match.</p>\n"}, {"tags": [], "owner": {"reputation": 3102, "user_id": 1686626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc855759fde692f7c1773b0968faaea7?s=128&d=identicon&r=PG", "display_name": "Reflective", "link": "https://stackoverflow.com/users/1686626/reflective"}, "is_accepted": true, "score": 0, "last_activity_date": 1528385441, "creation_date": 1528385441, "answer_id": 50745095, "question_id": 50740356, "link": "https://stackoverflow.com/questions/50740356/while-open-excel-file-getting-error/50745095#50745095", "title": "While open excel file getting error", "body": "<p>change <code>Path =&gt; $WRKDIR</code> to <code>Path =&gt; $WRKDIR.$EXCEL_FILE</code> and try again</p>\n\n<p>path is the full path to your attachement, filename is the recommended filename to appear in the mail </p>\n"}], "owner": {"reputation": 159, "user_id": 9318576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/911358fcaffc3b15dbc9d0f8f072afc6?s=128&d=identicon&r=PG&f=1", "display_name": "user9318576", "link": "https://stackoverflow.com/users/9318576/user9318576"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 50745095, "answer_count": 2, "score": 1, "last_activity_date": 1528385441, "creation_date": 1528371905, "last_edit_date": 1528373242, "question_id": 50740356, "link": "https://stackoverflow.com/questions/50740356/while-open-excel-file-getting-error", "title": "While open excel file getting error", "body": "<p>I have an excel file attachment and try to send an email. I'm able to send an email successfully, but I'm getting an error while opening the attached excel file which is given below:</p>\n\n<p>error :- </p>\n\n<pre><code>\"Excel cannot open the file \"test.xlsx\" because the file format or file extension is not valid. \nVerify that the file has not been corrupted and that the file extension matches the format of the file.\" \n</code></pre>\n\n<p>Code:-</p>\n\n<pre><code>$WRKDIR=\"/tmp/xpyt/\"\n$EXCEL_FILE=\"test.xlsx\"\n$EMAIL_FROM=\"xxx@in.imk.com\"\n$EMAIL_TO=\"yyy@in.imk.com\"\n$EMAIL_SUBJECT=\"Excel Report\"\n$EMAIL_TYPE=\"multipart/mixed\"\n\n\n$msg = MIME::Lite-&gt;new(\n    From    =&gt; $EMAIL_FROM,\n    To      =&gt; $EMAIL_TO,\n    Subject =&gt; $EMAIL_SUBJECT,\n    Type    =&gt; $EMAIL_TYPE,\n);\n\n$msg-&gt;attach(\n    Type     =&gt; 'TEXT',\n    Data     =&gt; \"Here's the excel file you wanted\"\n);\n\nchmod 0755, $EXCEL_FILE_PATH;\n\n$msg-&gt;attach(\n    Type     =&gt; 'application/vnd.ms-excel',\n    Path     =&gt; $WRKDIR,\n    Filename =&gt; $EXCEL_FILE,\n    Disposition =&gt; 'attachment'\n);\n\n$msg-&gt;send();\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["perl", "soap", "vmware", "vsphere", "vmware-tools"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528371541, "post_id": 50740230, "comment_id": 88487910, "body": "What&#39;s the problem?"}, {"owner": {"reputation": 1756, "user_id": 1399816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/i5C9a.jpg?s=128&g=1", "display_name": "MevatlaveKraspek", "link": "https://stackoverflow.com/users/1399816/mevatlavekraspek"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1528371645, "post_id": 50740230, "comment_id": 88487973, "body": "I don&#39;t have any vmware tools status, this is what I&#39;m looking for"}], "answers": [{"tags": [], "owner": {"reputation": 1756, "user_id": 1399816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/i5C9a.jpg?s=128&g=1", "display_name": "MevatlaveKraspek", "link": "https://stackoverflow.com/users/1399816/mevatlavekraspek"}, "is_accepted": true, "score": 0, "last_activity_date": 1528375791, "creation_date": 1528375791, "answer_id": 50741672, "question_id": 50740230, "link": "https://stackoverflow.com/questions/50740230/perl-vmomi-cant-find-the-way-to-get-vmwaretools-status-via-soap-vsphere-api/50741672#50741672", "title": "Perl VMOMI can&#39;t find the way to get VmwareTools status via SOAP VSphere API", "body": "<p>python <code>pyvmomi</code> is better documented.</p>\n\n<p>Check <a href=\"https://github.com/vmware/pyvmomi\" rel=\"nofollow noreferrer\">https://github.com/vmware/pyvmomi</a> and theres a sample script to test vmware tools <a href=\"https://github.com/vmware/pyvmomi-community-samples.git\" rel=\"nofollow noreferrer\">https://github.com/vmware/pyvmomi-community-samples.git</a></p>\n\n<pre><code>python list_vmwaretools_status.py\n</code></pre>\n\n<p>Work as a charm !</p>\n"}], "owner": {"reputation": 1756, "user_id": 1399816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/i5C9a.jpg?s=128&g=1", "display_name": "MevatlaveKraspek", "link": "https://stackoverflow.com/users/1399816/mevatlavekraspek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 50741672, "answer_count": 1, "score": 0, "last_activity_date": 1528375791, "creation_date": 1528371482, "last_edit_date": 1528375036, "question_id": 50740230, "link": "https://stackoverflow.com/questions/50740230/perl-vmomi-cant-find-the-way-to-get-vmwaretools-status-via-soap-vsphere-api", "title": "Perl VMOMI can&#39;t find the way to get VmwareTools status via SOAP VSphere API", "body": "<p>I try to get the VmWare tools status for a particular VM from Perl's VMOMI  module, but I can't figure how to do it.</p>\n\n<p>What I tried :</p>\n\n<pre><code>use strict; use warnings;\n\nuse VMOMI;\nuse Data::Dumper;\n\nmy $host = 'vcenter1.example.com',\nmy $user = 'myuser';\nmy $pass = 'STRONG';\n\nmy $stub = new VMOMI::SoapStub(host =&gt; $host) || die \"Failed to initialize VMOMI::SoapStub\";\n\nmy $instance = new VMOMI::ServiceInstance(\n    $stub,\n    new VMOMI::ManagedObjectReference(\n        type  =&gt; 'ServiceInstance',\n        value =&gt; 'ServiceInstance',\n    ),\n);\n\n# Login\nmy $content = $instance-&gt;RetrieveServiceContent;\nmy $session = $content-&gt;sessionManager-&gt;Login(userName =&gt; $user, password =&gt; $pass);\n\nmy $vm = new VMOMI::VirtualMachineToolsRunningStatus(\n    $stub,\n    new VMOMI::VirtualMachineToolsRunningStatus(\n        type =&gt; 'VirtualMachine',\n        value =&gt; 'vm-name-foobar'\n    )\n);\nuse Data::Dumper;\nprint Dumper $vm; \n\n# Logout\n$content-&gt;sessionManager-&gt;Logout();\n</code></pre>\n\n<p>I have a key <code>service_version</code> but I guess it's the version of the remote VSphere server.</p>\n\n<p>Any clue ? I don't have any vmware tools status, this is what I'm looking for.</p>\n\n<p>I think I don't understand how to use <code>VirtualMachineToolsRunningStatus</code> class :/</p>\n"}, {"tags": ["perl", "binary"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528368841, "post_id": 50738935, "comment_id": 88486243, "body": "Have you tried reading the entire contents of the file into a variable, replacing the non-ASCII characters and parsing that instead of directly parsing the file?"}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528370901, "post_id": 50738935, "comment_id": 88487521, "body": "The file is extremely large so reading into a variable might be problamatic, although I may have no choice!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528377437, "post_id": 50738935, "comment_id": 88492021, "body": "What encoding is the XML in? It&#39;s possible it&#39;s not specified and it should be UTF-8 or something?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1528428462, "post_id": 50738935, "comment_id": 88513763, "body": "@Chris Turner, Not specified means UTF-8 in XML :)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528428203, "post_id": 50740754, "comment_id": 88513707, "body": "That doesn&#39;t (just) replace the byte at offset 248467"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1528428715, "post_id": 50740754, "comment_id": 88513826, "body": "Also, the OP implied the file is too big for memory in the comments."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1528373069, "creation_date": 1528373069, "answer_id": 50740754, "question_id": 50738935, "link": "https://stackoverflow.com/questions/50738935/modifying-entry-in-binary-file-with-perl/50740754#50740754", "title": "Modifying entry in binary file with perl", "body": "<pre><code>\u203a perl -i.bak -0777 -lpe's/\\x1f/_x001f_/g' 50738935.xml\n\n\u203a hex 50738935.xml.bak\n0000  70 6f 75 72 20 76 c3 a9  72 69 66 69 1f 65 72 20  pour v.. rifi.er \n0010  6c 61 20 72 c3 a9 61 63  74 69 6f 6e 0a           la r..ac tion.\n\n\u203a hex 50738935.xml\n0000  70 6f 75 72 20 76 c3 a9  72 69 66 69 5f 78 30 30  pour v.. rifi_x00\n0010  31 66 5f 65 72 20 6c 61  20 72 c3 a9 61 63 74 69  1f_er la  r..acti\n0020  6f 6e 0a                                          on.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1528429267, "creation_date": 1528429267, "answer_id": 50753021, "question_id": 50738935, "link": "https://stackoverflow.com/questions/50738935/modifying-entry-in-binary-file-with-perl/50753021#50753021", "title": "Modifying entry in binary file with perl", "body": "<p>If the file is too big for memory, but disk space isn't a problem, the simplest solution is:</p>\n\n<ol>\n<li>Create a new file.</li>\n<li>Copy the first 248467 bytes to the new file.</li>\n<li>Print the replacement sequence to the new file.</li>\n<li>Read one byte from the old file.</li>\n<li>Copy the remaining bytes to the new file.</li>\n</ol>\n\n<p>It can be done in-place, but it's far more complicated (and a problem will lead to data loss).</p>\n\n<pre><code>use Fcntl qw( SEEK_CUR SEEK_SET );\n\nuse constant BLOCK_SIZE =&gt; 4*1024*1024;\n\nmy $qfn = 'file';\nmy $offset = 248467;\n\nopen(my $fh_src, '&lt;:raw',  $qfn) or die(\"Can't open \\\"$qfn\\\": $!\\n\");\nopen(my $fh_dst, '+&lt;:raw', $qfn) or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nsysseek($fh_src, $offest, SEEK_SET) or die($!);\nsysseek($fh_dst, $offest, SEEK_SET) or die($!);\n\nmy $buf;\n{\n   my $rv = sysread($fh_src, $buf, 1);\n   die($!) if !defined($rv);\n   die(\"Premature EOF\") if !$rv;\n   # Since we're only reading one byte, we don't need to worry about a partial read.\n   $buf = sprintf(\"_x%04x_\", ord($buf));\n}\n\nwhile (1) {\n   my $written = 0;\n   while ($written &lt; length($buf)) {\n      my $rv = syswrite($fh_dst, $buf, length($buf)-$written, $written);\n      die($!) if !defined($rv);\n      $written += $rv;\n   }\n\n   my $rv = sysread($fh_src, $buf, BLOCK_SIZE);\n   die($!) if !defined($rv);\n   last if !$rv;\n}\n\n# Must use sysseek instead of tell with sysread/syswrite.    \ntruncate($fh_dst, sysseek($fh_dst, 0, SEEK_CUR))\n   or die($!);\n</code></pre>\n\n<p>Technically, the <code>truncate</code> isn't required because the new file will always be larger than the old one.</p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528429267, "creation_date": 1528367251, "question_id": 50738935, "link": "https://stackoverflow.com/questions/50738935/modifying-entry-in-binary-file-with-perl", "title": "Modifying entry in binary file with perl", "body": "<p>Hi,</p>\n\n<p>I have an xml file that I need to validate. To do this I use the following code</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Parser;\n\nmy $File=\"folder/file1.xml\";\n\nmy $p1 = new XML::Parser();\nmy $p2;\nmy $Crash_Error_String='';\n\neval{$p2=$p1-&gt;parsefile($File)};\n$Crash_Error_String=$@ if !defined $p2 ;\nif(!defined $p2){\n    print $Crash_Error_String . \"\\n\";\n}\n</code></pre>\n\n<p>Now, if the file does not contain valid XML I get a string in the variable $Crash_Error_String as follows:</p>\n\n<p>not well-formed (invalid token) at line 1771, column 58, byte 248467 at /usr/lib64/perl5/XML/Parser.pm line 187.</p>\n\n<p>This tells me that there is an XML related problem in the file at byte 248467</p>\n\n<p>I can now print out the value where the problem occurs with:</p>\n\n<pre><code>my($fh, $File, $byte_position, $byte_value);\n\n$byte_position = 248467;\n\nopen($fh, \"+&lt;\", $File) || die \"can't open $File: $!\";\n\nbinmode($fh) || die \"can't binmode $File\";\n\nsysseek($fh, $byte_position, 0)  # NB: 0-based\n      || die \"couldn't see to byte $byte_position in $File: $!\";\n\nsysread($fh, $byte_value, 1) == 1\n      || die \"couldn't read byte from $File: $!\";\n\nprintf \"read byte with ordinal value %#02x at position %d\\n\",\n    ord($byte_value), $byte_position;\n\nclose $fh;\n</code></pre>\n\n<p>Which, in this specific example, gives</p>\n\n<p>read byte with ordinal value 0x1f at position 248467</p>\n\n<p>Now for my problem: How can I replace the value 0x1f with the entry _x001f_</p>\n\n<p>I have tried the following (placing the code below between the calls to \"sysread\" and \"close\" in the code above)</p>\n\n<pre><code>sysseek($fh, $byte_position, 0)  # NB: 0-based\n      || die \"couldn't see to byte $byte_position in $File: $!\";\n\nmy $NewV=\"_x001f_\";\n\nsyswrite($fh,$NewV);\n</code></pre>\n\n<p>But it places the new value immediately to the right of the problem string. In addition it eats up the characters to the right.</p>\n\n<p>So, before the error I have the following fragment within the file (the character that XML Parser is complaining about is not actually shown below but it's basically a character between the i and the e of v\u00e9rifier)</p>\n\n<p>pour v\u00e9rifier la r\u00e9action</p>\n\n<p>And after my replacement I have the following fragment within the file</p>\n\n<p>pour v\u00e9rifi_x001f_\u00e9action</p>\n\n<p>As you can see the replacement string has eaten into the following part of the string.</p>\n\n<p>The replacement I want is:</p>\n\n<p>pour v\u00e9rifi_x001f_er la r\u00e9action</p>\n\n<p>Any help much appreciated.</p>\n"}, {"tags": ["perl", "makefile", "cpan", "cpanm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1528365505, "post_id": 50737563, "comment_id": 88484148, "body": "&quot;I can not continue then.&quot; is not an adequate description of the problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528374455, "post_id": 50737563, "comment_id": 88489819, "body": "<i>&quot;Of course I made a Perl <code>Makefile.pl</code> to see the dependencies&quot;</i> You shouldn&#39;t have to do that; the correct <code>Makefile.PL</code> is packaged with the distribution of the module. <i>&quot;Where does this message blocking on the proxy come from&quot;</i> what message blocking?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528374532, "post_id": 50737563, "comment_id": 88489866, "body": "<i>&quot;I also tried a <code>cpan install HTTP-Proxy</code>&quot;</i> <code>cpan</code> and <code>cpanm</code> expect the name of the <i>module</i>, not the name of the distribution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528376455, "post_id": 50737563, "comment_id": 88491249, "body": "I&#39;m sorry: I meant to explain that the module in the <code>HTTP-Proxy</code> distribution is <code>HTTP::Proxy</code>, so <code>cpan HTTP::Proxy</code> should work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528376806, "post_id": 50737563, "comment_id": 88491493, "body": "The full error message is <code>Failed test &#39;302 =&gt; 302 Server closed connection without sending any data back&#39;</code> which is much more helpful. Take a look at <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=123067\" rel=\"nofollow noreferrer\">Bug #123067 for HTTP-Proxy: t/90httpstatus.t started to fail</a>. And please don&#39;t cut error messages short like that when you&#39;re asking for help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528379885, "post_id": 50737563, "comment_id": 88493796, "body": "Copy and paste your complete build log using <code>cpan</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 5387971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vNAUw.jpg?s=128&g=1", "display_name": "falco", "link": "https://stackoverflow.com/users/5387971/falco"}, "is_accepted": false, "score": 1, "last_activity_date": 1528701529, "creation_date": 1528701529, "answer_id": 50792279, "question_id": 50737563, "link": "https://stackoverflow.com/questions/50737563/building-and-testing-http-proxy-0-304/50792279#50792279", "title": "Building and testing HTTP-Proxy-0.304", "body": "<p>the problem referenced on the website like rt.cpan.org and others show that the HTTP service: Proxy blocks the continuation of the programs. The solution I found is to run the command </p>\n\n<blockquote>\n  <p>sudo sudo cpanm . -v --notest then a sudo cpanm . -v</p>\n</blockquote>\n\n<p>and with this everything works. We avoid to pass in the tests and then we launch the standard command. It's ok so</p>\n"}], "owner": {"reputation": 51, "user_id": 5387971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vNAUw.jpg?s=128&g=1", "display_name": "falco", "link": "https://stackoverflow.com/users/5387971/falco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528701529, "creation_date": 1528363204, "last_edit_date": 1528379839, "question_id": 50737563, "link": "https://stackoverflow.com/questions/50737563/building-and-testing-http-proxy-0-304", "title": "Building and testing HTTP-Proxy-0.304", "body": "<p>I use <code>sudo cpanm</code> to test and install Perl dependencies.</p>\n\n<p>I am stuck on the line </p>\n\n<pre><code>building and testing HTTP-Proxy-0.304\n</code></pre>\n\n<p>but I cannot continue the compilation.</p>\n\n<p>Of course I made a Perl <code>Makefile.pl</code> to see the dependencies that are missing. I also tried a <code>cpan install HTTP-Proxy</code> and I also have a <code>cpanm</code> error</p>\n\n<blockquote>\n  <p>Failed test '302 => 302 Server</p>\n</blockquote>\n\n<p>I also commented out the proxy line in the <code>Makefile.pl</code> the <code>cpanm</code> turn on but the compilation <code>make</code> and <code>make test</code> crashes.</p>\n\n<p>Where does this message blocking on the proxy come from and how can I install this dependency via <code>cpanm</code> or <code>cpan</code>?</p>\n\n<p>In both cases use of <code>sudo cpanm</code> and <code>cpan install ...</code> I get a timeout or it gets stuck on this step that's all. He does not go further</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1528361559, "post_id": 50736579, "comment_id": 88481271, "body": "Welcome to Stack Overflow and the Perl tag. Please take a moment to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and take the <a href=\"https://stackoverflow.com/tour\">tour</a>. It seems you have forgotten to ask a question. Please <a href=\"https://stackoverflow.com/posts/50736579/edit\">edit</a> your post and include an actual question, sample input and expected output. See [mvce] for more information about that. Also, did you write the code, or are you maintaining it?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 4, "creation_date": 1528362321, "post_id": 50736579, "comment_id": 88481841, "body": "You may wish to use the <code>File::Find</code> library, so there is no need to reinvent the wheel.... <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/File/Find.html</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1528363023, "post_id": 50736579, "comment_id": 88482315, "body": "Why does <code>singlefile</code> take 2 parameters but never uses the 2nd one?"}], "owner": {"reputation": 11, "user_id": 9907595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94d2eb4de8733d2c1c1ac348741ac1c?s=128&d=identicon&r=PG&f=1", "display_name": "OliverR", "link": "https://stackoverflow.com/users/9907595/oliverr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528362667, "creation_date": 1528360505, "last_edit_date": 1528362667, "question_id": 50736579, "link": "https://stackoverflow.com/questions/50736579/how-to-modify-for-loop-in-existing-program", "title": "How to modify &quot;for&quot; loop in existing program", "body": "<p>I want to modify this code</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n# Call of CPAN\nuse warnings;\nuse strict;\n\nuse Cwd;\n\n# Variables\nmy $i         = 0;\nmy $directory = getcwd;\nmy $file      = \"options\";\n\n# Opening output file and adding the header on first row\nopen( FILE, \"&gt;&gt;OLTP.txt\" ) or die( \"Could not create file OLTP.txt\" );\nprint FILE \"User script,Serveur Name,Instance Name,Date of script,Serveur Name2,Instance Name2,ADVANCED_COMPRESSION~HEADER,TABLE_COMPRESSION~HEADER,2,count,DATA_DICTIONARY_VIEW,TABLE_OWNER,TABLE_NAME,PARTITION_NAME,COMPRESSION,COMPRESS_FOR,\\n\";\nclose FILE;\n\n# Loop while files are found\nforeach my $files ( list_files( $directory, 1, $file ) ) {\n\n    print \"File : $files\\n\";\n    singlefile( $files, $file );\n}\n\n# Recursion and list integration\nsub list_files {\n    my ( $directory, $recurse, $file ) = @_;\n\n    require File::Spec;\n\n    # Search in subdirectory or not\n    if ( ( not defined $recurse ) || ( $recurse != 1 ) ) {\n        $recurse = 0;\n    }\n\n    # verification directory\n    if ( not defined $directory ) {\n        die \"No named directory\\n\";\n    }\n\n    # Opening a directory\n    opendir my $fh_rep, $directory or die \"Can not open directory $directory\\n\";\n\n    # List files and directories, except (. and ..)\n    my @fic_rep = grep { !/^\\.\\.?$/ } readdir $fh_rep;\n\n    # Closing directory\n    closedir $fh_rep or die \"Unable to close directory $directory\\n\";\n\n    # Fill list with found files\n    my @files;\n\n    # File or folder? if file: add files to the table. if record: start the recursion\n    foreach my $nom ( @fic_rep ) {\n\n        my $mycurrentfile = File::Spec-&gt;catdir( $directory, $nom );\n\n        if (    -f $mycurrentfile\n            and $mycurrentfile =~ m/$file/\n            and $mycurrentfile =~ m/\\.csv$/i ) {\n\n            push( @files, $mycurrentfile );\n        }\n        elsif ( -d $mycurrentfile and $recurse == 1 ) {\n\n            push( @files, list_files( $mycurrentfile, $recurse, $file ) );    # recursion\n        }\n    }\n\n    return @files;\n}\n\n## Merge data after filtering\nsub singlefile {\n    my ( $file, $out ) = @_;\n\n    # Open file\n    open( FILE, $file ) or die( \"error occured while opening file\" );\n\n    # Create list from file\n    my @save = &lt;FILE&gt;;\n\n    close( FILE );\n\n    # Empty table rows which do not meet criteria\n    foreach ( @save ) {\n\n        $_ = \"\" unless ( $_ =~ m/\"ENABLED\",\"OLTP\",/ &amp;&amp; $_ =~ m/^GREP/ );\n        $_ = \"\" if ( $_ =~ m/SYSMAN/ || m/SYS/ );\n\n        chomp $_;\n\n    }\n\n    # Open output file, add data, close\n    open( FILE, \"&gt;&gt;OLTP.txt\" ) or die( \"error occured while opening file OLTP.txt\" );\n\n    foreach ( @save ) {\n\n        print FILE $_ . \"\\n\" if ( $_ );\n    }\n\n    close( FILE );\n}\n</code></pre>\n\n<p>It seems to do the following</p>\n\n<ol>\n<li><p>Create txt with header</p></li>\n<li><p>Create list of files based on every files that match with criteria (option, csv)</p></li>\n<li><p>For each file in the list, fill with all rows and then remove what do not match with the criteria <code>unless</code> and <code>if</code></p></li>\n<li><p>Push everything into the file with header (oltp.txt)</p></li>\n</ol>\n\n<p>My Goal : </p>\n\n<ol>\n<li><p>Create txt with header</p></li>\n<li><p>Create list of file based on every files that match with criteria (option, csv)</p></li>\n<li><p>For each files of the list, <strong><em>fill only with the First rows that match with the criteria <code>unless</code> and <code>if</code></em></strong></p></li>\n<li><p>Push everything into the file with header <code>oltp.txt</code>. The final result should be the text with header and then a maximum of one line per file if the criteria match.</p></li>\n</ol>\n"}, {"tags": ["perl", "directory"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528351632, "post_id": 50733890, "comment_id": 88475718, "body": "I&#39;m not clear what you&#39;re asking. Are you saying that <code>mkdir</code> doesn&#39;t create a directory?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1528352189, "post_id": 50733890, "comment_id": 88475983, "body": "Do you have access for this folder site?"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1528356594, "post_id": 50733890, "comment_id": 88478403, "body": "If a directory already exists <code>mkdir</code> does nothing. If you want an existing directory removed you have to do that yourself."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1528360010, "post_id": 50733890, "comment_id": 88480268, "body": "What do you meant &quot;the directory should be replaced&quot;? Could you give a concrete example?"}, {"owner": {"reputation": 13, "user_id": 9906976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zU_fyqAl_hI/AAAAAAAAAAI/AAAAAAAAGyk/yr8sHB6qPBQ/photo.jpg?sz=128", "display_name": "meghna sinha", "link": "https://stackoverflow.com/users/9906976/meghna-sinha"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1528361038, "post_id": 50733890, "comment_id": 88480930, "body": "@dgw ohhhhh! i understood now!! thankyou so much :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528366979, "post_id": 50733890, "comment_id": 88485165, "body": "@Meghna: Okay, then please would you write up an answer for your own question: we need to resolve this somehow. It may not feel like it, but the primary point of any <i>Stack Overflow</i> page is for the rest of the world with a similar problem, not for the original poster."}, {"owner": {"reputation": 13, "user_id": 9906976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zU_fyqAl_hI/AAAAAAAAAAI/AAAAAAAAGyk/yr8sHB6qPBQ/photo.jpg?sz=128", "display_name": "meghna sinha", "link": "https://stackoverflow.com/users/9906976/meghna-sinha"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528367745, "post_id": 50733890, "comment_id": 88485627, "body": "@Borodin yeah sure"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1528360277, "post_id": 50736054, "comment_id": 88480442, "body": "@Dada: Of course I did. How embarrassing! Thank you. Can I blame a sleepless night?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1528362622, "post_id": 50736054, "comment_id": 88482021, "body": "I was wondering if it was the lack of sleep or someone who switched the <code>_</code> and the <code>!</code> on your keyboard; I now have my answer :D"}, {"owner": {"reputation": 13, "user_id": 9906976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zU_fyqAl_hI/AAAAAAAAAAI/AAAAAAAAGyk/yr8sHB6qPBQ/photo.jpg?sz=128", "display_name": "meghna sinha", "link": "https://stackoverflow.com/users/9906976/meghna-sinha"}, "edited": false, "score": 0, "creation_date": 1528368005, "post_id": 50736054, "comment_id": 88485765, "body": "Hey! Thanks for the answer but i had some other problem :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1528360220, "last_edit_date": 1528360220, "creation_date": 1528358976, "answer_id": 50736054, "question_id": 50733890, "link": "https://stackoverflow.com/questions/50733890/making-new-directory-in-perl/50736054#50736054", "title": "making new directory in perl", "body": "<p>If <code>mkdir</code> appears to be doing nothing then you should code a warning statement to find out why. The reason for failure will be in built-in variable <code>$!</code>, so I suggest you write your subroutine like this</p>\n\n<pre><code>sub make_client_dir {\n    my $client_dir = shift;\n\n    my $path = \"D:\\\\ATEF\\\\clientfolder\\\\$client_dir\";\n\n    ( my $success = mkdir $path ) or\n            warn qq{Unable to create directory \"$path\": $!};\n\n    return $success;\n}\n</code></pre>\n\n<p>Note that I've also modified your code to be more idiomatic</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1528374769, "post_id": 50739167, "comment_id": 88490041, "body": "It&#39;s not just Perl that works like that: every file system I know will not let you overwrite an existing directory with an empty one. I understand your confusion because opening a new file works differently."}, {"owner": {"reputation": 13, "user_id": 9906976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zU_fyqAl_hI/AAAAAAAAAAI/AAAAAAAAGyk/yr8sHB6qPBQ/photo.jpg?sz=128", "display_name": "meghna sinha", "link": "https://stackoverflow.com/users/9906976/meghna-sinha"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1528695101, "post_id": 50739167, "comment_id": 88587876, "body": "@Borodin oh! okay! Thank you so  much!"}], "tags": [], "owner": {"reputation": 13, "user_id": 9906976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zU_fyqAl_hI/AAAAAAAAAAI/AAAAAAAAGyk/yr8sHB6qPBQ/photo.jpg?sz=128", "display_name": "meghna sinha", "link": "https://stackoverflow.com/users/9906976/meghna-sinha"}, "is_accepted": false, "score": 1, "last_activity_date": 1528374665, "last_edit_date": 1528374665, "creation_date": 1528367970, "answer_id": 50739167, "question_id": 50733890, "link": "https://stackoverflow.com/questions/50733890/making-new-directory-in-perl/50739167#50739167", "title": "making new directory in perl", "body": "<p>I needed to create a directory of the same name that already existed since I thought that would replace the folder with a new empty folder. But Perl does not work that way: <code>mkdir</code> will not work if a folder of the same name already exists.</p>\n\n<p>So I first deleted the directory using <code>rmtree</code> from <code>File::Path</code> and then created a new directory of the same name.</p>\n"}], "owner": {"reputation": 13, "user_id": 9906976, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zU_fyqAl_hI/AAAAAAAAAAI/AAAAAAAAGyk/yr8sHB6qPBQ/photo.jpg?sz=128", "display_name": "meghna sinha", "link": "https://stackoverflow.com/users/9906976/meghna-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 50736054, "answer_count": 2, "score": -1, "last_activity_date": 1528374665, "creation_date": 1528351093, "last_edit_date": 1528351701, "question_id": 50733890, "link": "https://stackoverflow.com/questions/50733890/making-new-directory-in-perl", "title": "making new directory in perl", "body": "<p>I want to create a directory with a certain name before the beginning of a method. At each iteration the directory should be replaced with new entries instead of getting appended.</p>\n\n<p>I have used this code:</p>\n\n<pre><code>sub makingDirectoryForClient {\n    $nameOfTheClientDirectory = $_[0];\n    my $directory = \"D:\\\\ATEF\\\\clientfolder\\\\$nameOfTheClientDirectory\";\n    my $outputvar = mkdir $directory;\n}\n</code></pre>\n\n<p>but still the folder is not getting replaced. Any ideas?</p>\n"}]