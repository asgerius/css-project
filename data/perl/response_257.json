[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1576107975, "post_id": 59295760, "comment_id": 104795881, "body": "Can you show the expected output please ?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1576108050, "post_id": 59295760, "comment_id": 104795896, "body": "Match with <code>&#47;(&lt;[^&gt;]*&gt;|\\S+)\\s+(&lt;[^&gt;]*&gt;|\\S+)\\s+(&lt;[^&gt;]*&gt;|\\S+)&#47;g</code>"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1576108528, "post_id": 59295760, "comment_id": 104796011, "body": "Is &quot;n&quot; always the first value? Do you actually need to find that part in your string? Are the items in the 2nd row always &quot;ewd#&quot;? Do you need the contents of the last row? Is the second row the only one that potentially contains multiple items in brackets?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1576113371, "post_id": 59295760, "comment_id": 104796981, "body": "The lines have different numbers of elements so I don&#39;t see how the space (<code>\\s+</code>) works as a separator -- unless the order doesn&#39;t matter?  But then how do you get that first element which is a space? (Is this by any chance tab separated?)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1576139914, "post_id": 59295760, "comment_id": 104804117, "body": "@WiktorStribi\u017cew make that an answer?  but I think you need a special case for the first field which looks to be allowed to be empty"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1576176332, "post_id": 59295760, "comment_id": 104824018, "body": "Try <a href=\"https://regex101.com/r/81cKk2/3\" rel=\"nofollow noreferrer\">regex101.com/r/81cKk2/3</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 12521514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c54a169d54bee7b643176edfd1d038?s=128&d=identicon&r=PG&f=1", "display_name": "quentinnuk", "link": "https://stackoverflow.com/users/12521514/quentinnuk"}, "edited": false, "score": 0, "creation_date": 1576175952, "post_id": 59307905, "comment_id": 104823857, "body": "Thanks for this, in the end I went for a coded solution rather than just a regex as it all got a bit complicated because of variable numbers of separate elements and that the content of each line can differ from line to line."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 51, "user_id": 12521514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c54a169d54bee7b643176edfd1d038?s=128&d=identicon&r=PG&f=1", "display_name": "quentinnuk", "link": "https://stackoverflow.com/users/12521514/quentinnuk"}, "edited": false, "score": 0, "creation_date": 1576176086, "post_id": 59307905, "comment_id": 104823908, "body": "@quentinnuk BTW, I see you updated the question. Looks like you want the first non-whitespace chunk, the last one and all in between, right? Try <code>&#47;^\\h*(&lt;[^&gt;]*&gt;|\\S+)\\h+(.*?)\\h+(&lt;[^&gt;]*&gt;|\\S+)\\h*$&#47;gm</code>. Check <a href=\"https://regex101.com/r/81cKk2/3\" rel=\"nofollow noreferrer\">this regex demo</a>."}, {"owner": {"reputation": 51, "user_id": 12521514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c54a169d54bee7b643176edfd1d038?s=128&d=identicon&r=PG&f=1", "display_name": "quentinnuk", "link": "https://stackoverflow.com/users/12521514/quentinnuk"}, "edited": false, "score": 0, "creation_date": 1576177010, "post_id": 59307905, "comment_id": 104824279, "body": "not quite. I want everything separated by white space as separate fields with whitespace, unless it is in angle brackets, in which case I want the stuff between the angle brackets in a single field with the whitespace in that field changed to (say) &quot;:&quot;, so that I can use split on the whole line with a whitespace separator and get the angle bracket stuff as a single element."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1576164394, "creation_date": 1576164394, "answer_id": 59307905, "question_id": 59295760, "link": "https://stackoverflow.com/questions/59295760/changing-separator-in-a-subgroup-between-markers-and-splitting-in-perl-5/59307905#59307905", "title": "changing separator in a subgroup between markers and splitting in perl 5", "body": "<p>If you always have three fields per line, you may use</p>\n\n<pre><code>/(&lt;[^&gt;]*&gt;|\\S+)\\s+(&lt;[^&gt;]*&gt;|\\S+)\\s+(&lt;[^&gt;]*&gt;|\\S+)/g\n</code></pre>\n\n<p>Or, in case you have a multiline text and the first field is optional, and if there are any leading/trailing whitespaces:</p>\n\n<pre><code>/^\\h*(?:(&lt;[^&gt;]*&gt;|\\S+)\\h+)?(&lt;[^&gt;]*&gt;|\\S+)\\h+(&lt;[^&gt;]*&gt;|\\S+)\\h*$/gm\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/81cKk2/2\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>^</code> - start of string / line</li>\n<li><code>\\h*</code> - 0+ horizontal whitespaces</li>\n<li><code>(?:(&lt;[^&gt;]*&gt;|\\S+)\\h+)?</code> - an optional sequence (Group 1) of <code>&lt;</code>, 0+ chars other than <code>&gt;</code>, <code>&gt;</code> or 1+ non-whitespace chars followed with 1+ horizontal whitespace chars</li>\n<li><code>(&lt;[^&gt;]*&gt;|\\S+)</code> - Group 2: <code>&lt;</code>, 0+ chars other than <code>&gt;</code>, <code>&gt;</code>  or 1+ non-whitespace chars</li>\n<li><code>\\h+</code> - 1+ horizontal whitespace chars</li>\n<li><code>(&lt;[^&gt;]*&gt;|\\S+)</code> - Group 3: <code>&lt;</code>, 0+ chars other than <code>&gt;</code>, <code>&gt;</code>  or 1+ non-whitespace chars</li>\n<li><code>\\h*</code>  - 0+ horizontal whitespace chars</li>\n<li><code>$</code> - end of string / line </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 12521514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c54a169d54bee7b643176edfd1d038?s=128&d=identicon&r=PG&f=1", "display_name": "quentinnuk", "link": "https://stackoverflow.com/users/12521514/quentinnuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1576177136, "last_edit_date": 1576177136, "creation_date": 1576176491, "answer_id": 59311032, "question_id": 59295760, "link": "https://stackoverflow.com/questions/59295760/changing-separator-in-a-subgroup-between-markers-and-splitting-in-perl-5/59311032#59311032", "title": "changing separator in a subgroup between markers and splitting in perl 5", "body": "<p>In the end I did this programatically.</p>\n\n<p>First I chunked the multi element field which could be between angle or square brackets:</p>\n\n<pre><code>if ($line =~ /(.+)(&lt;|\\[)(.+)(&gt;|\\])(.*)\\s+/) { # joins multi destination elements together in one field\nmy $destination=join('|',split(/\\s+/,$3));\n$line=$1 . \"\\t\" . $destination . \"\\t\" . $5;\n}\n</code></pre>\n\n<p>then I processed the $line as a set of individual fields with variable elements.</p>\n\n<pre><code>my @args=split(/\\s+/,$line);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12521514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c54a169d54bee7b643176edfd1d038?s=128&d=identicon&r=PG&f=1", "display_name": "quentinnuk", "link": "https://stackoverflow.com/users/12521514/quentinnuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1576177136, "creation_date": 1576107892, "last_edit_date": 1576175768, "question_id": 59295760, "link": "https://stackoverflow.com/questions/59295760/changing-separator-in-a-subgroup-between-markers-and-splitting-in-perl-5", "title": "changing separator in a subgroup between markers and splitting in perl 5", "body": "<p>I am reading input lines like this from a file:</p>\n\n<pre><code>ewd1    n   river2  n   ne  o   u\n    n   &lt;ewd8   ewd9    ewd2&gt;   se\n    n   ewd9    s\n    n   ewd2    sw\n</code></pre>\n\n<p>I want to split these line by line into an array for processing, but want the items between &lt; and > to be seen as a single entity in one array element without the angle brackets, ideally with the whitespace separators changed to colons. So something like this when called into the array split:</p>\n\n<pre><code>@mydata=split(/\\s+/,'   n   ewd8:ewd9:ewd2  se');\n</code></pre>\n\n<p>so that</p>\n\n<pre><code>@mydata =(' ','n','ewd8:ewd9:ewd2','se');\n</code></pre>\n\n<p>split works fine with the rest of the lines like:</p>\n\n<pre><code>    ewd1    n   river2  n   ne  o   u\n</code></pre>\n\n<p>but can't fathom how to do the separator replacement and grouping for the more multi 3rd argument line. Does anyone have any suggestions?</p>\n\n<p>Here is a more complete example input data lines:</p>\n\n<pre><code>ewd1    serpent 0   n   ne  o   u   w   nw  swamp\n    bats    0   n   ne  o   u   w   nw  swamp\n    undead  0   n   ne  o   u   w   nw  swamp\n    n   river2  n   ne  o   u\n    1002    e   d\n    n   &lt;ewd8   ewd9    ewd2&gt;   se\n    n   ewd9    s\n    n   ewd2    sw\n    n   rough   w   nw  swamp\newd2    serpent 0   w   nw  n   swamp\n    bats    0   w   nw  n   swamp\n    undead  0   w   nw  n   swamp\n    n   rough   w   nw  n   swamp\n    n   &lt;ewd1   ewd9    ewd10&gt;  ne  o\n    n   ewd9    e\n    n   ewd10   se\n    n   ewd4    s\n    n   ewd3    sw\n</code></pre>\n\n<p>The fields will be stored in a structured hash table in perl.</p>\n"}, {"tags": ["perl", "pdf", "label"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1576108266, "post_id": 59295631, "comment_id": 104795953, "body": "Convert PDF to sufficiently hi-res image. Crop out the parts. Optionally scale/rotate. Combine into new image. Convert back to PDF. You could probably do it with just a simple shell script calling graphicsmagick."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1576146557, "post_id": 59295631, "comment_id": 104807770, "body": "If you rebuild the label, the scanners won&#39;t be able to read it any more. If all you have is a 62mm printer, talk to your Deutsche Post account manager to see if they have a service that can produce different size labels. I know DPD can do that, I&#39;m sure DHL can do it too."}, {"owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1576159645, "post_id": 59295631, "comment_id": 104814953, "body": "@simbabque: No, that is not true. I&#39;m using online services such as www.paketikett.de/ for quite a while now on my QL-800 62mm printer, and there never has been a problem. The barcodes in the original PDFs are just images of 1 pixel height which are then scaled vertically, so that should not be a problem. In fact, pdftohtml extracts the images and text in separate files without a problem, the question is only how to also extract the original order and get them back in a different order afterwards. Also, the font is not detected properly through this way (always Times New Roman instead of Helv)"}, {"owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1576159746, "post_id": 59295631, "comment_id": 104815010, "body": "@jhnc: Thanks, that could work, but I&#39;m not aware of a command line tool that generates an image out of a (text-based with some graphics) PDF. Do you happen to know one?"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1576160792, "post_id": 59295631, "comment_id": 104815673, "body": "As I said - <a href=\"http://www.graphicsmagick.org/\" rel=\"nofollow noreferrer\">graphicsmagick</a>: <code>tmp=WBzpl.jpg; gm convert -scale 854x603 in.pdf $tmp; gm convert $tmp -crop 570x148+284+0 -rotate 90 $tmp -crop 570x220+284+148 -rotate 90 $tmp -crop 570x603+284+368 -rotate 90 $tmp -crop 284x603+0+0 -append out.pdf; rm $tmp</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1576161931, "post_id": 59295631, "comment_id": 104816366, "body": "Fair enough. I&#39;ve been doing this on a larger commercial scale for a big e-com company years ago, and we never actually worked with DHL. They didn&#39;t support the kind of things we shipped very well. I would usually just call the DPD guy for our location and talk to them directly. There was a dedicated computer running the DPD software to generate labels in our warehouses, and that would be used via some API, with the machine then printing and labelling parcels going through a conveyor belt automatically. When I dealt with UPS US they had a SOAP API that returned full label images as well."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1576162297, "post_id": 59295631, "comment_id": 104816600, "body": "penultimate 603 should have been 235. <code>tmp=WBzpl.jpg; w=854; h=603; x=284; y1=148; y2=368; gm convert -scale ${w}x${h} in.pdf $tmp; gm convert $tmp -crop $((w-x))x${y1}+${x}+0 -rotate 90 $tmp -crop $((w-x))x$((y2-y1))+${x}+${y1} -rotate 90 $tmp -crop $((w-x))x$((h-y2))+${x}+${y2} -rotate 90 $tmp -crop ${x}x${h}+0+0 -append out.pdf</code>"}, {"owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1576186518, "post_id": 59295631, "comment_id": 104827935, "body": "@jhnc: Wow, that&#39;s awesome, thanks! Would you add this as a regular answer so I can mark it as a solution? The only problem is indeed that the compression produces quite some artefacts which may result in the scanner at the post office not being able to read the bar code correctly (even with the regular ones I sometimes have this problem because the thermo printer quality is not comparable to a laser or so). Is there a configuration option for that available? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "edited": false, "score": 0, "creation_date": 1576229003, "post_id": 59315254, "comment_id": 104839345, "body": "As the input file is a PDF file and not an image that I used as a workaround in the original question, is there a way to define the output size of the conversion from PDF to image so that the output image becomes a higher resolution image than the image in the original question? I&#39;ve tried adjusting w and h etc. to ten times their values, but in the end the pixels just get larger. What I would need is that gm &quot;looks&quot; at the PDF as if the PDF is scaled/magnified to like 10 times its standard aspect ratio and then converted to image. Is that possible?"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "reply_to_user": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "edited": false, "score": 0, "creation_date": 1576242816, "post_id": 59315254, "comment_id": 104846174, "body": "I&#39;ve changed the answer to use <code>-density</code> instead of <code>-scale</code>"}, {"owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "edited": false, "score": 0, "creation_date": 1576278812, "post_id": 59315254, "comment_id": 104861066, "body": "Again, thanks a lot, it works like charm now and the barcodes are easily readable. I&#39;ve changed the code a bit by using &quot;gm identify&quot; to obtain the image size variables w and h and also so that the individual sections become individual pages in the PDF (I&#39;ve done this by joining the PNGs not via gm but through img2pdf) so that my printer does automatic cutting in-between. This really saves a lot of paper for me in the future because the original PDF would center the label in the middle of an A4 page where the rest would go to waste. Thanks a lot again, I&#39;ve learned a lot today :)..."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "reply_to_user": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "edited": false, "score": 0, "creation_date": 1576279548, "post_id": 59315254, "comment_id": 104861229, "body": "Cool. FWIW, to get multi-page pdf, you could just leave off <code>-append</code>."}, {"owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "edited": false, "score": 0, "creation_date": 1576304383, "post_id": 59315254, "comment_id": 104864304, "body": "I tried that as well, but one of the cropped images (which turned out fine in &quot;append&quot;-mode) resulted in one very long and very narrow page with no content. No idea why. With img2pdf it turned out fine, so I stuck with that."}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": true, "score": 1, "last_activity_date": 1576242786, "last_edit_date": 1576242786, "creation_date": 1576203394, "answer_id": 59315254, "question_id": 59295631, "link": "https://stackoverflow.com/questions/59295631/how-can-i-reposition-page-elements-of-a-pdf-and-write-to-a-new-pdf/59315254#59315254", "title": "How can I reposition page elements of a PDF and write to a new PDF?", "body": "<p>A simple solution is to:</p>\n\n<ul>\n<li>convert PDF to sufficiently hi-res image</li>\n<li>crop out the individual pieces</li>\n<li>re-scale/rotate</li>\n<li>combine into new image</li>\n<li>optionally convert back to PDF</li>\n</ul>\n\n<p>For example, for the image and cropping from the sample image provided in the question, a shell script using <a href=\"http://www.graphicsmagick.org/\" rel=\"nofollow noreferrer\">graphicsmagick</a> might be:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\n\n# graphicsmagick uses the file extension to decide file type\n\nin=in.pdf     # original (pdf expected)\ntmp=tmp.png   # temporary image (png is lossless)\nout=out.pdf   # output file (or use png for image)\n\n# convert original pdf to bitmap image\n#   density is dpi - larger gives higher resolution\ngm convert -density 300 $in $tmp\n\n# find size of resulting image, for use below\nfile $tmp\n\n# width/height of bounding box temporary image will fit into\n#   probably needs to be much bigger than this\n#   this script just uses the resolution of the question's image\nw=854\nh=603\n\n# important x/y distances in the image\n# change to match width/height given above\nx=284\ny1=148\ny2=368\n\n# crop out the individual pieces, rotate so long side is vertical,\n#   then combine (append) into a single output file\n# format is: [width] \"x\" [height] \"+\" [x offset] \"+\" [y offset]\ngm convert \\\n    $tmp -crop $((w-x))x${y1}+${x}+0          -rotate 90 \\\n    $tmp -crop $((w-x))x$((y2-y1))+${x}+${y1} -rotate 90 \\\n    $tmp -crop $((w-x))x$((h-y2))+${x}+${y2}  -rotate 90 \\\n    $tmp -crop ${x}x${h}+0+0 \\\n    -append $out\n\n# clean up\nrm $tmp\n</code></pre>\n\n<p>Note that <code>-append</code> seems to combine images in an unexpected order:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>gm convert $in1 $in2 $in3 $in4 -append $out\n\n# $out contains a vertical stack of $in4, $in1, $in2, $in3\n# (ie. $in4 appears at the top rather than at the bottom)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9755058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35520d549af991fb206c5a90ee1ac9bd?s=128&d=identicon&r=PG&f=1", "display_name": "fredlcore", "link": "https://stackoverflow.com/users/9755058/fredlcore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59315254, "answer_count": 1, "score": 1, "last_activity_date": 1576242786, "creation_date": 1576106890, "last_edit_date": 1576216439, "question_id": 59295631, "link": "https://stackoverflow.com/questions/59295631/how-can-i-reposition-page-elements-of-a-pdf-and-write-to-a-new-pdf", "title": "How can I reposition page elements of a PDF and write to a new PDF?", "body": "<p>I would like to take a rectangular <a href=\"https://i.stack.imgur.com/WBzpl.jpg\" rel=\"nofollow noreferrer\">packaging label</a> in PDF format, consisting of mostly formatted text, a few images and borders, and take the four main elements of this PDF (marked each in red in the image) and reposition them into a new PDF so that it can be printed on my 62mm label printer.\nThere are several free web services available who can do this for more common packaging labels, but not the ones that I need, so I would like to code this myself (preferrably in Perl).\nAny pointers on how to approach this task would be very helpful - thanks!</p>\n\n<p><img src=\"https://i.stack.imgur.com/WBzpl.jpg\" alt=\"\"></p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1576095088, "post_id": 59293325, "comment_id": 104791401, "body": "Please, read <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1576095210, "post_id": 59293325, "comment_id": 104791447, "body": "I have read this and the code IS ONE snippet of the entire script."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 2, "creation_date": 1576096549, "post_id": 59293325, "comment_id": 104792001, "body": "By mentioning <code>MCVE</code> @GillesQuenot meant to say that you ask about sorting a hash and yet show us a program snippet unrelated to that problem, where the sorting problem has to be fished out.  (While I posted an answer I am still a little unsure of what you need to sort how ... a hash with an arrayref for a value, but which itself has only one element?)"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1576097090, "post_id": 59293325, "comment_id": 104792206, "body": "o sorry.  I honestly did not realize it was one element, but yes I see that now because I am storing it all in $2."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1576097370, "post_id": 59293325, "comment_id": 104792325, "body": "Alright, cool (thank you for posting code in the first place! :) -- I spelled that out in my answer.  You may wish to edit the question to state clearly what you are trying to sort. But once there&#39;s been two answers it&#39;s tricky -- you don&#39;t want to invalidate them ... perhaps add a section at the end where you can summarize what need be sorted?"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1576106134, "post_id": 59293325, "comment_id": 104795388, "body": "I was able to adjust/edit my code to use split on a comma instead of $2 or $3, etc. and therefore I think I have multiple elements in my HoA, correct?   Maybe not because its still not abc sorting.  see output.  thank you!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1576113795, "post_id": 59293325, "comment_id": 104797065, "body": "Ah, OK, so you actually have multiple values in those arrayrefs ... (there goes my &quot;answer&quot;).  But then what and how do you want to sort?   If it&#39;s keys, on what criterion?  Or do you want those arrayrefs sorted?"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1576116161, "post_id": 59293325, "comment_id": 104797518, "body": "sort the arrayref values ideally but i\u2019d like to see both. sort of keys would be the &lt;=&gt; operator."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1576118451, "post_id": 59293325, "comment_id": 104797955, "body": "you sort arrayref values by <code>for (keys %h) { @{$h{$_}} = sort @{$h{$_}} }</code>.  as for keys, what is the criterion to sort them by? just keys themselves? or by values ... how?"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1576165711, "post_id": 59293325, "comment_id": 104818762, "body": "ok thank you!!! when i stringify for a compare, is it better to use a scalar or an array?  #(@val1) = ( @{$hashA{$key}} = sort @{$hashA{$key}} );     # $val1 = join(&quot;,&quot;, ( @{$hashA{$key}} = sort @{$hashA{$key}} )); if ( @val1 eq @val2) OR if ( $val1 eq $val2 )"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1576170238, "post_id": 59293325, "comment_id": 104821273, "body": "If you want to compare two arrays -- whether they are equal element by element -- then forming strings out of them is one way (but there are others, and there are modules to do that).  But saying <code>@a1 == @a2</code> only compares their lengths (numbers of elements), since <code>==</code> imposes &quot;<i>scalar context</i>&quot; in which both arrays are evaluated to their number of elements and then that compared.  (The <code>@a1 eq @a2</code> is a strange version of that.)"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1576304133, "last_edit_date": 1576304133, "creation_date": 1576096438, "answer_id": 59293651, "question_id": 59293325, "link": "https://stackoverflow.com/questions/59293325/sort-hash-of-array-by-value/59293651#59293651", "title": "sort hash of array by value", "body": "<p><strong>Update</strong> &nbsp; The arrayrefs (hash values) have multiple elements after all, and need be sorted. Then</p>\n\n<pre><code>for my $key (keys %h) { @{$h{$key}} = sort @{$h{$key}} }\n</code></pre>\n\n<p>or, more efficiently<sup>&dagger;</sup> (and in the <a href=\"https://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">statement modifier</a> form, with less noise but perhaps less clear)</p>\n\n<pre><code>$h{$_} = [ sort @{$h{$_}} ] for keys %h;\n</code></pre>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> by default uses lexicographical sort, as wanted.</p>\n\n<p>Keys are desired to be sorted numerically, but note that while we can rewrite the arrays to make them sorted it is not so with hashes, which are inherently unordered. We can print sorted of course</p>\n\n<pre><code>foreach my $k (sort { $a &lt;=&gt; $b } keys %h) { ... } \n</code></pre>\n\n<p>This will warn if keys aren't numbers.</p>\n\n<p><sup>&dagger;</sup> <em>By 56% &ndash; 60% in my benchmarks on three different machines, with both v5.16 and v5.30.0</em></p>\n\n<hr>\n\n<p><em>Original post</em></p>\n\n<p>I take it that you need to sort a hash which has an arrayref for a value, whereby that arrayref has a single element. Then sort on that, first, element</p>\n\n<pre><code>foreach my $key ( sort { $hashB{$a}-&gt;[0] cmp $hashB{$b}-&gt;[0] } keys %hashB ) {\n    print \"$key ==&gt; @{$hashB{$key}}\\n\";\n}\n</code></pre>\n\n<p>See the <code>cmp</code> operator under <a href=\"https://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\">Equality operators in perlop</a>.  It takes scalars, which are stringwise compared (so the attempted sorting with an array from the question is wrong since <code>cmp</code> would get lengths of those arrays to sort by!)</p>\n\n<hr>\n\n<p>In my understanding your hash to sort is like</p>\n\n<pre><code>$VAR1 = {\n    '0x00000008' =&gt; [ 'atgdb003f_avg01,hdisk10,atgdb003f_ovg01,...' ],\n    ...\n}\n</code></pre>\n\n<p>where each value is an arrayref with exactly one element.</p>\n"}], "owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 59293651, "answer_count": 1, "score": 1, "last_activity_date": 1576304133, "creation_date": 1576094986, "last_edit_date": 1576171171, "question_id": 59293325, "link": "https://stackoverflow.com/questions/59293325/sort-hash-of-array-by-value", "title": "sort hash of array by value", "body": "<p>I am trying to sort by value in a HoA wherein key => [ a, b, c]\nI want to sort alphabetically and have tried and read with no success.  I think its the commas, but please help! Below is a short snippet.  The raw data is exactly how it appears in the data dumper print vs. the CLI. I have to use some sort of delimiter otherwise the cli output is tedious!   Thank you!</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ( $lsvm_a,$lsvm_b,%hashA,%hashB );\nmy $vscincludes  = qr/(^0x\\w+)\\,\\w+\\,\\w+.*/;  #/\n\nopen (LSMAP_A, \"-|\", \"/usr/ios/cli/ioscli lsmap -vadapter vhost7 -field clientid vtd backing -fmt ,\" ) or die $!;\nwhile ($lsvm_a = (&lt;LSMAP_A&gt;)) {\n     chomp($lsvm_a);\n     next unless $lsvm_a =~ /$vscincludes/;\n     @{$hashA{$1}} = (split ',', $lsvm_a);\n}\n\nopen (LSMAP_B, \"-|\", \"/usr/sbin/clcmd -m xxxxxx /usr/ios/cli/ioscli lsmap -vadapter vhost29 -field clientid vtd backing -fmt ,\" ) or die $!;\nwhile ($lsvm_b = (&lt;LSMAP_B&gt;)) {\n     chomp($lsvm_b);\n     next unless $lsvm_b =~ /$vscincludes/;\n     push @{$hashA{$1}}, (split ',', $lsvm_b);\n}\n\n\nprint \"\\n\\nA:\";\nfor my $key ( sort { $hashA{$a} cmp $hashA{$b} } keys %hashA ) {\n    print \"$key =&gt; '\", join(\", \", @{$hashA{$key}}), \"'\\n\";\n}\n##\nprint \"===\\nB:\";\nforeach my $key ( sort { (@{$hashB{$a}}) cmp (@{$hashB{$b}}) } keys %hashB ) {\n    print \"$key ==&gt; @{$hashB{$key}}\\n\";\n}\n\nprint \"\\n\\n__DATA_DUMPER__\\n\\n\";\nuse Data::Dumper; print Dumper \\%hashA; print Dumper \\%hashB;\n</code></pre>\n\n<p>Output</p>\n\n<pre>\nA:\n0x00000008 => '0x00000008, atgdb003f_avg01, hdisk10, atgdb003f_ovg01, hdisk96, atgdb003f_pvg01, hdisk68, atgdb003f_rvg01, hdisk8, vtscsi0, atgdb003f_data.5bcd027df10f27bf9a880ce7bc1dd924'\n===\nB:\n0x00000008 => '0x00000008, atgdb003f_avg01, hdisk10, atgdb003f_data, atgdb003f_data.5bcd027df10f27bf9a880ce7bc1dd924, atgdb003f_ovg01, hdisk96, atgdb003f_pvg01, hdisk68, atgdb003f_rvg01, hdisk8'\n\n__DATA_DUMPER__\n\n$VAR1 = {\n          '0x00000008' => [\n                            '0x00000008',\n                            'atgdb003f_avg01',\n                            'hdisk10',\n                            'atgdb003f_ovg01',\n                            'hdisk96',\n                            'atgdb003f_pvg01',\n                            'hdisk68',\n                            'atgdb003f_rvg01',\n                            'hdisk8',\n                            'vtscsi0',\n                            'atgdb003f_data.5bcd027df10f27bf9a880ce7bc1dd924'\n                          ]\n        };\n$VAR1 = {\n          '0x00000008' => [\n                            '0x00000008',\n                            'atgdb003f_avg01',\n                            'hdisk10',\n                            'atgdb003f_data',\n                            'atgdb003f_data.5bcd027df10f27bf9a880ce7bc1dd924',\n                            'atgdb003f_ovg01',\n                            'hdisk96',\n                            'atgdb003f_pvg01',\n                            'hdisk68',\n                            'atgdb003f_rvg01',\n                            'hdisk8'\n                          ]\n        };\n\n### CLI out ### \n            ###0x00000008,atgdb003f_avg01,hdisk10,atgdb003f_ovg01,hdisk96,atgdb003f_pvg01,hdisk68,atgdb003f_rvg01,hdisk8,vtscsi0,atgdb003f_data.5bcd027df10f27bf9a880ce7bc1dd924\n        ###0x00000008,atgdb003f_avg01,hdisk10,atgdb003f_data,atgdb003f_data.5bcd027df10f27bf9a880ce7bc1dd924,atgdb003f_ovg01,hdisk96,atgdb003f_pvg01,hdisk68,atgdb003f_rvg01,hdisk8\n</pre>\n"}, {"tags": ["xml", "perl", "cas"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1576084731, "post_id": 59290708, "comment_id": 104786715, "body": "It seems like the data that falls out of your XML parser is not what the code expects. That could have many reasons. If you can&#39;t change that code, then you are likely out of luck. You&#39;ll have to provide a proper error report to the vendor I&#39;m afraid."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1576084963, "post_id": 59290708, "comment_id": 104786821, "body": "It seems <a href=\"https://github.com/Unicon/cas-perl-client/blob/master/AuthCASSaml.pm#L5\" rel=\"nofollow noreferrer\">the module</a> uses <a href=\"http://p3rl.org/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a>. This is one of the reasons why XML::Simple shouldn&#39;t be used."}, {"owner": {"reputation": 13, "user_id": 9807801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bee5204e7cce00d6a80af4e4419c62?s=128&d=identicon&r=PG&f=1", "display_name": "Phrygian Moon", "link": "https://stackoverflow.com/users/9807801/phrygian-moon"}, "edited": false, "score": 0, "creation_date": 1576087519, "post_id": 59290708, "comment_id": 104788049, "body": "Yes, it does use XML::Simple I&#39;m afraid. The code for this software is ridiculously old. The last time any real update was done was 2014. I&#39;d toss the software if it were up to me. Unfortunately, it&#39;s not my call. I do appreciate the responses, as they have confirmed several of my suspicions about this code as a whole."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9807801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bee5204e7cce00d6a80af4e4419c62?s=128&d=identicon&r=PG&f=1", "display_name": "Phrygian Moon", "link": "https://stackoverflow.com/users/9807801/phrygian-moon"}, "edited": false, "score": 0, "creation_date": 1576180693, "post_id": 59296274, "comment_id": 104825680, "body": "This sounds very useful, but I&#39;m afraid I don&#39;t know enough perl to know how to apply it in my case. Can you please explain how I would modify the code that I have to do this? Would I be modifying this line: <code>my $value = $attr-&gt;{&#39;saml1:AttributeValue&#39;};</code> ?"}, {"owner": {"reputation": 13, "user_id": 9807801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bee5204e7cce00d6a80af4e4419c62?s=128&d=identicon&r=PG&f=1", "display_name": "Phrygian Moon", "link": "https://stackoverflow.com/users/9807801/phrygian-moon"}, "edited": false, "score": 0, "creation_date": 1576248534, "post_id": 59296274, "comment_id": 104849111, "body": "Thanks for the clarification. That really helps a lot."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1576211799, "last_edit_date": 1576211799, "creation_date": 1576112527, "answer_id": 59296274, "question_id": 59290708, "link": "https://stackoverflow.com/questions/59290708/perl-variable-returns-hash-instead-of-string/59296274#59296274", "title": "perl: variable returns hash instead of string", "body": "<p>A relevant snippet from my <a href=\"https://stackoverflow.com/a/33273488/589924\">answer</a> to <a href=\"https://stackoverflow.com/q/33267765/589924\"><em>Why is XML::Simple Discouraged?</em></a>:</p>\n\n<blockquote>\n  <p>This means that you have to perform all kinds of checks to see what you actually got. But the sheer complexity of this encourages developers to make very bad assumptions instead.</p>\n</blockquote>\n\n<p>It appears exactly that is happening here. That said, the data you want is accessible using the following:</p>\n\n<pre><code> my $av_node = $attr-&gt;{'saml1:AttributeValue'};\n $casAttrs{$name} = ref($av_node) ? $av_node-&gt;{content} : $av_node;\n</code></pre>\n\n<p>Note that still makes some of the aforementioned assumptions.</p>\n"}], "owner": {"reputation": 13, "user_id": 9807801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bee5204e7cce00d6a80af4e4419c62?s=128&d=identicon&r=PG&f=1", "display_name": "Phrygian Moon", "link": "https://stackoverflow.com/users/9807801/phrygian-moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 59296274, "answer_count": 1, "score": 1, "last_activity_date": 1576211799, "creation_date": 1576083751, "question_id": 59290708, "link": "https://stackoverflow.com/questions/59290708/perl-variable-returns-hash-instead-of-string", "title": "perl: variable returns hash instead of string", "body": "<p>I am troubleshooting a problem related to the perl module AuthCASSaml. We have a piece of software which we would like to use our CAS server to authenticate. Authentication is working. However, when AuthCASSaml processes the returned output, it ends up returninf HASH references instead of the actual value of the ldap attributes being returned by the CAS server. I have pinpointed it to this section of the AuthCASSaml.pm code:</p>\n\n<pre><code>my $user = $responseBase-&gt;{'saml1:Assertion'}{'saml1:AuthenticationStatement'}{'saml1:Subject'}{'saml1:NameIdentifier'};\nmy %casAttrs;\nmy $attrs = $responseBase-&gt;{'saml1:Assertion'}{'saml1:AttributeStatement'}{'saml1:Attribute'};\nif($attrs) {\nfor(my $i=0;$i&lt;@$attrs;$i++) {\nmy $attr = $$attrs[$i];\nmy $name = $attr-&gt;{'AttributeName'};\nmy $value = $attr-&gt;{'saml1:AttributeValue'};\n$casAttrs{$name} = $value;\n}\n}\n</code></pre>\n\n<p>\"AttributeName\" returns as expected. The problem is with \"AttributeValue\". The code seems to be expecting a string, but the xml code returned from the CAS server for \"AttributeValue\" is more than a simple string.</p>\n\n<pre><code>&lt;saml1:Attribute AttributeName=\"UDC_IDENTIFIER\" AttributeNamespace=\"http://www.ja-sig.org/products/cas/\"&gt;\n      &lt;saml1:AttributeValue xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"xs:string\"&gt;useriden&lt;/saml1:AttributeValue&gt;\n&lt;/saml1:Attribute&gt;\n</code></pre>\n\n<p>What is getting returned is \"Attributes : uid=>HASH(0x331ecb0), UDC_IDENTIFIER=>HASH(0x331ee90)\". </p>\n\n<p>I should also note, all of the code we are running is vendor provided. I am not a perl programmer. I'm just trying to get everything to play nice together. It's a long story, but I'll just say the vendor is of no help in this situation.</p>\n\n<p>I can provide the code in the cgi script for testing, but the main software code also experiences this problem, which is why I'm pretty sure AuthCASSaml.pm is the place to attempt to fix this.</p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["regex", "perl", "filter"], "answers": [{"comments": [{"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 41, "user_id": 2755626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/501abef2fb28381849dc43d9404cd6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Schnulli", "link": "https://stackoverflow.com/users/2755626/schnulli"}, "edited": false, "score": 0, "creation_date": 1576271264, "post_id": 59285651, "comment_id": 104858958, "body": "- Feel free to <a href=\"https://stackoverflow.com/tour\">mark the answer</a> as accepted if it helped solving you problem by clicking \u2713 on the left of this answer. Note that you get 2 <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation points</a> accepting a solution."}], "tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 4, "last_activity_date": 1576066989, "last_edit_date": 1576066989, "creation_date": 1576066599, "answer_id": 59285651, "question_id": 59285354, "link": "https://stackoverflow.com/questions/59285354/filtering-matching-patterns-with-regular-expressions/59285651#59285651", "title": "Filtering matching patterns with regular expressions", "body": "<p>You might use:</p>\n\n<pre><code>\\bchild \\K(?:(?!child).)*(?!\\S)\n</code></pre>\n\n<ul>\n<li><code>\\bchild </code> Match child preceded with a word boundary and followed by a space</li>\n<li><code>\\K</code> Forget what was matched</li>\n<li><code>(?:(?!child).)*</code> Match any char except a newline not followed by child</li>\n<li><code>(?!\\S)</code> Assert what is on the right is not a non whitespace char</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/jZFi3L/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p>Or use a non greedy dot variant</p>\n\n<pre><code>\\bchild \\K.+?(?= child|$)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/Tszc3V/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 17225, "user_id": 2823719, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/TWgf9.jpg?s=128&g=1", "display_name": "Booboo", "link": "https://stackoverflow.com/users/2823719/booboo"}, "is_accepted": false, "score": 1, "last_activity_date": 1576070600, "creation_date": 1576070600, "answer_id": 59286791, "question_id": 59285354, "link": "https://stackoverflow.com/questions/59285354/filtering-matching-patterns-with-regular-expressions/59286791#59286791", "title": "Filtering matching patterns with regular expressions", "body": "<p>You can also do this with <em>lookbehind</em>:</p>\n\n<pre><code>?&lt;=\\bchild )(?:(?! child).)+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/8WG1XP/2/\" rel=\"nofollow noreferrer\">See Regex Demo</a></p>\n\n<pre><code>use strict;\n\nmy $s=\"child mick jagger child john wayne child archimedes\";\nmy @f = $s =~/(?&lt;=\\bchild )(?:(?! child).)+/ig;\nforeach my $x (@f) {\n    print \"$x\\n\";\n};\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>mick jagger\njohn wayne\narchimedes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7444, "user_id": 967621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOso6.jpg?s=128&g=1", "display_name": "Timur Shtatland", "link": "https://stackoverflow.com/users/967621/timur-shtatland"}, "is_accepted": false, "score": 0, "last_activity_date": 1576165538, "creation_date": 1576165538, "answer_id": 59308227, "question_id": 59285354, "link": "https://stackoverflow.com/questions/59285354/filtering-matching-patterns-with-regular-expressions/59308227#59308227", "title": "Filtering matching patterns with regular expressions", "body": "<p>Try using <code>split</code> and <code>grep</code>. While longer than some other solutions, this method makes the programmer's intentions more explicit:</p>\n\n<pre><code>perl -le '\n$str = q{child mick jagger child john wayne child archimedes};\n@names = grep { m{ \\S }x } split m{\\s* \\b child \\b \\s* }x, $str;\nprint \"@names\";\n' \n</code></pre>\n\n<p><code>split</code> breaks the string <code>$str</code> on the pattern that you want to get rid of: <code>m{\\s* \\b child \\b \\s* }x</code> - <code>child</code>, surrounded by word breaks <code>\\b</code>, with 0 or more leading and trailing whitespace characters <code>\\s</code>.<br>\n<code>\\b</code> is needed to prevent splitting on <code>child</code> that is part of the name such as <em>Roths<strong>child</strong></em>.<br>\n<code>split</code> returns an array with the desired output, but also with an extra leading element (empty string), which resulted from the empty string on the left of the leading <code>child</code> in <code>$str</code>.<br>\n<code>grep</code> for non-whitespace characters (<code>m{ \\S }x</code>) removes this extra element, leaving the desired output: only the names.<br>\nNote the use of the <code>x</code> regex modifier, which \"extends your pattern's legibility by permitting whitespace and comments\". </p>\n\n<p><strong>SEE ALSO:</strong><br>\nPerl docs on regexes: perlre: <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlre.html</a> .</p>\n"}], "owner": {"reputation": 41, "user_id": 2755626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/501abef2fb28381849dc43d9404cd6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Schnulli", "link": "https://stackoverflow.com/users/2755626/schnulli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1576165538, "creation_date": 1576065577, "last_edit_date": 1576071341, "question_id": 59285354, "link": "https://stackoverflow.com/questions/59285354/filtering-matching-patterns-with-regular-expressions", "title": "Filtering matching patterns with regular expressions", "body": "<p>I'm not very familiar with regular expressions in perl.<br>\nI want to filter names from a string e.g. \"<code>child mick jagger child john wayne child archimedes</code>\" between tags \"<code>child</code>\".</p>\n\n<p>Result should be:</p>\n\n<pre><code>mick jagger\n\njohn wayne\n\narchimedes\n</code></pre>\n\n<p>The number of names in the string is variable.</p>\n\n<p>My perl program:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict 'vars';\nuse strict 'subs';\nmy ($x);\nmy $s=\"child mick jagger child john wayne child archimedes\";\n\nmy @f=$s=~/(child.+(?!child))/igs;\nforeach $x (@f)\n{\n    print \"$x\\n\";\n}; \n</code></pre>\n\n<p>The program didn't work. Can anybody help?</p>\n"}, {"tags": ["perl", "executable", "par", "perl-packager"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1576063101, "creation_date": 1576063101, "answer_id": 59284638, "question_id": 59284481, "link": "https://stackoverflow.com/questions/59284481/pp-par-packager-cant-locate-strict-pm/59284638#59284638", "title": "pp - PAR Packager , Can&#39;t locate strict.pm", "body": "<p>The problem is <code>system \"perl \u2026</code>. This executes the wrong Perl. Use <a href=\"http://p3rl.org/var#$%5EX\" rel=\"nofollow noreferrer\"><code>$^X</code></a> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 12517745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-reJckc2N-QE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcqQxyUBtcvcs7arGBUKUX2mwcvxg/photo.jpg?sz=128", "display_name": "HsPython", "link": "https://stackoverflow.com/users/12517745/hspython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576063101, "creation_date": 1576062585, "question_id": 59284481, "link": "https://stackoverflow.com/questions/59284481/pp-par-packager-cant-locate-strict-pm", "title": "pp - PAR Packager , Can&#39;t locate strict.pm", "body": "<p>I have a perl script called master.pl and it contains following lines of code</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nsystem(\"perl /proj/scripts/slave.pl\"); \n</code></pre>\n\n<p>I made binary executable of master.pl using command :</p>\n\n<pre><code>pp -b -B -o master master.pl\n</code></pre>\n\n<p>I copy this executable on other server (as pp command can not be available on other server so i made executable on my linux system ). When i run master it gives me error </p>\n\n<p><strong>*Can't locate strict.pm in @INC (@INC contains: /usr/local/lib64/perl5 .... *</strong></p>\n\n<p>here the issue is slave.pl  contains use strict; and @INC shows path which are not valid on that server. </p>\n\n<p>Is there anyway to resolve this issue ? I do not want to make executable of slave.pl . How can i make executable of master that when it calls\n'''\nsystem(\"perl /proj/scripts/slave.pl\");\n''' \nthen it should have valid path in @INC</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 4, "creation_date": 1576050810, "post_id": 59281005, "comment_id": 104768328, "body": "You didn&#39;t tried anything... Lot of answers in the search engine."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 3, "last_activity_date": 1576050984, "creation_date": 1576050984, "answer_id": 59281124, "question_id": 59281005, "link": "https://stackoverflow.com/questions/59281005/how-do-i-remove-specific-element-from-an-array/59281124#59281124", "title": "How do I remove specific element from an array?", "body": "<p>You can use the module <code>Array::Utils</code>. This module supports to delete the elements which we can compare two array elements.</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.010;\nuse Array::Utils qw(:all);\n\nmy %cmp = ();\n\nmy @main_array = (\"apple\",\"bob\",\"cat\",\"dog\",\"earth\");\nmy @stuff_to_delete_array = (\"bob\",\"dog\");\n\nmy @output = array_minus(@main_array, @stuff_to_delete_array);\nprint join \"\\n\", @output;\n</code></pre>\n\n<p>You can just try this.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1576051495, "post_id": 59281152, "comment_id": 104768639, "body": "Note: This solution doesn&#39;t preserve the order of the items in <code>@items</code>. That may or may not be imporant."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576052403, "post_id": 59281152, "comment_id": 104769056, "body": "I mean <code>@main_array</code>"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1576051099, "creation_date": 1576051099, "answer_id": 59281152, "question_id": 59281005, "link": "https://stackoverflow.com/questions/59281005/how-do-i-remove-specific-element-from-an-array/59281152#59281152", "title": "How do I remove specific element from an array?", "body": "<p>Translating the array to a hash may come handy here:</p>\n\n<pre><code>my %h;\n@h{ @main_array } = ();\ndelete @h{ @stuff_to_delete_array };\n@main_array = keys %h;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1576097617, "last_edit_date": 1576097617, "creation_date": 1576051258, "answer_id": 59281190, "question_id": 59281005, "link": "https://stackoverflow.com/questions/59281005/how-do-i-remove-specific-element-from-an-array/59281190#59281190", "title": "How do I remove specific element from an array?", "body": "<pre><code>my @items = ( \"apple\", \"bob\", \"cat\", \"dog\", \"earth\" );\nmy @to_delete = ( \"bob\", \"dog\" );\n\n# Create a hash for quick lookup\nmy %to_delete = map { $_ =&gt; 1 } @to_delete;\n\nmy @filtered = grep { !$to_delete{$_} } @items;\n</code></pre>\n\n<p>This solution preserves the order of the items in <code>@items</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 11210300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a767a09fade8720041934a4938a92e?s=128&d=identicon&r=PG", "display_name": "Makuza", "link": "https://stackoverflow.com/users/11210300/makuza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1576083944, "answer_count": 3, "score": -1, "last_activity_date": 1576097617, "creation_date": 1576050498, "last_edit_date": 1576051971, "question_id": 59281005, "link": "https://stackoverflow.com/questions/59281005/how-do-i-remove-specific-element-from-an-array", "closed_reason": "Needs more focus", "title": "How do I remove specific element from an array?", "body": "<p>I have 2 arrays. One will contain things I want to delete and the other will be the main array.</p>\n\n<p>so lets say</p>\n\n<pre><code>my @main_array = (\"apple\",\"bob\",\"cat\",\"dog\",\"earth\");\nmy @stuff_to_delete_array = (\"bob\",\"dog\");\n</code></pre>\n\n<p>I want the final main_array to have <code>(\"apple\",\"cat\",\"earth\")</code>. Lets say I don't know the index. Is there a way to search for <code>\"bob\"</code> and <code>\"dog\"</code> in the main_array and remove them?</p>\n"}, {"tags": ["perl", "glob", "string-interpolation"], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1576051591, "post_id": 59281081, "comment_id": 104768685, "body": "The solution is correct, but I don&#39;t know about the explanation. <code>-d</code> would be calling <code>stat</code> whereas <code>glob</code> is using Perl&#39;s own glob implementation. <code>stat qq(&quot;test dir&quot;)</code> doesn&#39;t work because there&#39;s no shell interpretation, but <code>glob qq(&quot;test dir&quot;)</code> works fine. <code>glob qq(&quot;$d&quot;&#47;.ignore*)</code> should work, it&#39;s explicitly recommended <a href=\"https://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">in the documentation</a> to use quotes like that. I&#39;m guessing there&#39;s a bug in Perl&#39;s glob implementation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1576051767, "post_id": 59281081, "comment_id": 104768757, "body": "@Schwern  Yes, I&#39;m now doubting the explanation as well ... working on it.  I confirmed it, the first case works and the second doesn&#39;t! (One after another in one one-liner, or in separate ones.) Go figure. Thank you for the comment"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1576051948, "post_id": 59281081, "comment_id": 104768840, "body": "@Schwern, The docs clearly show <code>*</code> working in side of the quotes (since <code>&lt;&quot;*e f*&quot;&gt;</code> matches the file <code>e f</code>). So quotes apparently only &quot;escape&quot; spaces. So odd."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1576055379, "post_id": 59281081, "comment_id": 104770510, "body": "@Schwern Updated, with a correct explanation -- <code>glob</code> uses <code>[]</code> for <i>character class</i>, easily confirmed and documented."}, {"owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "edited": false, "score": 0, "creation_date": 1576067777, "post_id": 59281081, "comment_id": 104777167, "body": "I have found a workaround, and that&#39;s to wrap any <code>[</code> or <code>]</code> in <code>[]</code>.  So: <code>perl -e &#39;$d=&quot;test [[]dir[]]&quot;; print -e glob qq(&quot;$d&quot;&#47;.ignore*); print &quot;\\n&quot;;&#39;</code> matches <code>&quot;test [dir]&#47;.ignoreme&quot;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "edited": false, "score": 0, "creation_date": 1576088715, "post_id": 59281081, "comment_id": 104788571, "body": "@Scott Alright, that puts <code>[</code> and <code>]</code> themselves each in a character class, thus effectively escaping their special meaning.  (But you have to type it while <code>quotemeta</code> escapes all special chars without having to know what&#39;s in a variable.  It&#39;s very curious though :) I added to the answer another way to handle this -- escape with <code>quotemeta</code> to start, when you write to a variable."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1576096079, "last_edit_date": 1576096079, "creation_date": 1576050801, "answer_id": 59281081, "question_id": 59280617, "link": "https://stackoverflow.com/questions/59280617/perl-glob-qq-and-brackets/59281081#59281081", "title": "Perl glob, qq(), and brackets []", "body": "<p>The <code>glob</code> interprets the pair <code>[]</code> as meta-characters for a <em>character class</em>.<sup>&dagger;</sup> This is easily confirmed with a simple experiment</p>\n\n<pre><code>mkdir zZ\ntouch zZ/f.txt\nperl -wE'say for glob qq([az][bZ]/*)'\n</code></pre>\n\n<p>This correctly lists the file.</p>\n\n<p>Then in the second case in the question the <code>glob</code> doesn't at all look for a directory with literal <code>[]</code> in its name, but for a directory with either one of <code>d,i,r</code> characters following <code>test&#9251;</code> in its name. </p>\n\n<p>One fix then is to use <code>\\Q...\\E</code> (see <a href=\"https://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a>) in order to escape those <code>[]</code></p>\n\n<pre><code>say for glob qq(\\Q$d\\E/.ignore*);\n</code></pre>\n\n<p>This also escapes spaces, just as needed -- but then it does escape other things as well, so you can't use wildcards (for one) for what is inside the sequence.  This shouldn't ever be a problem as a directory name won't have characters meant to act as wildcards but it is good to keep it in mind.</p>\n\n<p>Another option is to escape special characters when forming the directory name variable</p>\n\n<pre><code> perl -wE'$d = quotemeta \"test [dir]\"; say for glob qq($d/*)'\n</code></pre>\n\n<p>what now works as usual.  </p>\n\n<p>There is no need for double quoting with this since <code>quotemeta</code> takes care of spaces as well.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>  The <a href=\"https://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a> page says</p>\n\n<blockquote>\n  <p>This operator is implemented using the standard <code>File::Glob</code> extension. </p>\n</blockquote>\n\n<p>and <a href=\"https://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a> docs specifically list <code>[]</code> as meta-characters, for <em>character class</em>.</p>\n"}], "owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1578504488, "creation_date": 1576048797, "last_edit_date": 1578504488, "question_id": 59280617, "link": "https://stackoverflow.com/questions/59280617/perl-glob-qq-and-brackets", "title": "Perl glob, qq(), and brackets []", "body": "<p>I have two directories with a file in each:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ls -l \"test dir[\"\n-rw-r--r--  1 root  media     0B 11 Dec 16:53 .ignoreme\n</code></pre>\n\n<p>and</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ls -l \"test [dir]\"\n-rw-r--r--  1 root  media     0B 11 Dec 16:34 .ignoreme\n</code></pre>\n\n<p>and I'm using Perl to test for the existence of the \".ignoreme\" file:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ perl -e '$d=\"test dir[\"; print -e glob qq(\"$d\"/.ignore*); print \"\\n\";'\n1 \n</code></pre>\n\n<p>which works, and </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ perl -e '$d=\"test [dir]\"; print -e glob qq(\"$d\"/.ignore*); print \"\\n\";'\n\n</code></pre>\n\n<p>which doesn't.</p>\n\n<p>I'm guessing it has to do with the <code>[]</code> pair but I'm unsure as to the interaction.  Can someone please enlighten me.  I'd be grateful for a fix too for matching any <code>$d</code> that includes <code>[]</code>.</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1576044062, "post_id": 59279550, "comment_id": 104765927, "body": "is the fifth line in sample a mistake? if so, a simple <code>sed &#39;&#47;^abc$&#47;,&#47;^mno$&#47;d&#39; file</code> will work.. if not, explain why <code>abc</code> is not in output"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1576044395, "post_id": 59279550, "comment_id": 104766017, "body": "@Sundeep, Sir if you wouldn&#39;t mind May I tell you what I think is, output is coming as <code>def2 ghi2 jkl2</code> since just before <code>def2</code> an occurrence of <code>abc</code> is there which is NOT closed and again a following <code>abc</code> is coming after it,IMHO that is why OP wants to print it, but OP only could confirm this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576044661, "post_id": 59279550, "comment_id": 104766097, "body": "Re &quot;<i>anything between abc and mno should be removed</i>&quot;, The lines you asked to keep are between <code>abc</code> and <code>mno</code>..."}, {"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1576044754, "post_id": 59279550, "comment_id": 104766129, "body": "No 5th line is not mistake . I want anything after abc including abc if it&#39;s not ended by mno ."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1576044816, "post_id": 59279550, "comment_id": 104766155, "body": "@AnupamDas, eaxclty that&#39;s what I tried to explain above. Please change your question and make it more clear."}, {"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576044833, "post_id": 59279550, "comment_id": 104766163, "body": "@ikegami no I want lines between abc and mno to be removed"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576045804, "post_id": 59279550, "comment_id": 104766473, "body": "<code>def2</code>, <code>ghi2</code> and <code>jkl2</code> are between <code>abc</code> and <code>mno</code>, but you said you wanted to keep them"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576046782, "post_id": 59279550, "comment_id": 104766843, "body": "@ikegami, IMHO, what OP is saying its a cycle(from <code>abc</code> to <code>mno</code>) in case any <code>abc</code> is followed by another <code>abc</code> and <code>mon</code> in that cycle is missing then at that time those elements which are coming from 2 <code>abc</code>s should be printed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1576050581, "post_id": 59279550, "comment_id": 104768238, "body": "@RavinderSingh13, That is the same view I&#39;m taking. There are two cycles, and the encompass the entirety of the file."}], "answers": [{"comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1576158113, "post_id": 59281395, "comment_id": 104814028, "body": "This is a GNU awk extension. In POSIX awk, the variable <code>RS</code> can only be a single character."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 1, "creation_date": 1576158140, "post_id": 59281395, "comment_id": 104814042, "body": "This will fail if <code>mno</code> appears before the first <code>abc</code>"}, {"owner": {"reputation": 38442, "user_id": 1331399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a22763d295c9d45db0dd0c692bb4051?s=128&d=identicon&r=PG", "display_name": "Thor", "link": "https://stackoverflow.com/users/1331399/thor"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1576219164, "post_id": 59281395, "comment_id": 104835470, "body": "@kvantour: I explicitly mentioned GNU awk and this works with the example provided by the OP, although it is unclear what he really wants"}], "tags": [], "owner": {"reputation": 38442, "user_id": 1331399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a22763d295c9d45db0dd0c692bb4051?s=128&d=identicon&r=PG", "display_name": "Thor", "link": "https://stackoverflow.com/users/1331399/thor"}, "is_accepted": true, "score": 1, "last_activity_date": 1576052165, "creation_date": 1576052165, "answer_id": 59281395, "question_id": 59279550, "link": "https://stackoverflow.com/questions/59279550/how-to-select-lines-between-two-marker-patterns-which-may-occur-multiple-times-w/59281395#59281395", "title": "How to select lines between two marker patterns which may occur multiple times with awk/sed and delete those lines", "body": "<p>If you split the input on <code>abc\\n</code> you might get away with removing those that contain <code>mno</code>, e.g. with GNU awk:</p>\n\n<pre><code>awk '!/mno/' RS='abc\\n' infile\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>def2\nghi2\njkl2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1576151982, "creation_date": 1576151982, "answer_id": 59304087, "question_id": 59279550, "link": "https://stackoverflow.com/questions/59279550/how-to-select-lines-between-two-marker-patterns-which-may-occur-multiple-times-w/59304087#59304087", "title": "How to select lines between two marker patterns which may occur multiple times with awk/sed and delete those lines", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -n '/abc/{:a;x;z;x;:b;n;/abc/{:c;g;s/.//p;ba};/mno/d;H;$bc;bb};p' file\n</code></pre>\n\n<p>Any lines before or after a cycle of <code>abc</code> thru <code>mno</code> will be printed as normal. Any lines between a cycle of <code>abc</code> and a following <code>abc</code> will printed less the first and last lines of the cycle. All other lines will be deleted i.e. a cycle between <code>abc</code> and <code>mno</code> with no <code>abc</code> lines between. For the special case of a cycle <code>abc</code> and the end of the file with no <code>abc</code> or <code>mno</code> lines between, all lines except the first will be printed.</p>\n"}, {"tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": false, "score": 0, "last_activity_date": 1576160679, "creation_date": 1576160679, "answer_id": 59306691, "question_id": 59279550, "link": "https://stackoverflow.com/questions/59279550/how-to-select-lines-between-two-marker-patterns-which-may-occur-multiple-times-w/59306691#59306691", "title": "How to select lines between two marker patterns which may occur multiple times with awk/sed and delete those lines", "body": "<p>Here is a simple way to do it that works with any awk:</p>\n\n<pre><code>awk 'BEGIN{begpat=\"^abc$\"; endpat=\"^mno$\" }\n     ($0 ~ endpat) { n=0; buffer=\"\"; next }\n     ($0 ~ begpat) { n=1; if(buffer) print buffer; buffer=\"\"; next }\n     (n==0) { print; next }\n     {buffer = (buffer ? buffer ORS : \"\") $0 }\n     END { if(buffer) print buffer }' file \n</code></pre>\n\n<p>The following logictable explains how this works:</p>\n\n<pre><code>   from\\to | begpat | endpat | END        BEGIN: BEGIN OF FILE\n   --------+--------+--------+-----       END  : END OF FILE\n    BEGIN  |   1    |   1    |  1\n   --------+--------+--------+-----       1: print lines between [from,to]\n    begpat |   1    |   0    |  1         0: don't print lines between [from,to]\n   --------+--------+--------+-----\n    endpat |   1    |   1    |  1\n</code></pre>\n\n<p>The above shows that there is only an exception when <code>begpat</code> is met. Only in this case we build a buffer to decide if we have to print.</p>\n"}], "owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 59281395, "answer_count": 3, "score": -1, "last_activity_date": 1597389702, "creation_date": 1576043310, "last_edit_date": 1597389702, "question_id": 59279550, "link": "https://stackoverflow.com/questions/59279550/how-to-select-lines-between-two-marker-patterns-which-may-occur-multiple-times-w", "title": "How to select lines between two marker patterns which may occur multiple times with awk/sed and delete those lines", "body": "<p>Suppose a file contains:</p>\n\n<pre><code>abc\ndef1\nghi1\nmno\nabc\ndef2\nghi2\njkl2\nabc\npqr\nstu\nmno\n</code></pre>\n\n<p>And the starting pattern is abc and ending pattern is mno So, I need the output as:</p>\n\n<pre><code>def2\nghi2\njkl2\n</code></pre>\n\n<p>i.e anything between abc and mno should be removed and I want anything after abc including abc if it's not ended by mno to be printed</p>\n\n<p>I tried this <code>sed '/^abc$/,/^mno$/{//!b};d' file</code> but it delete all lines except for those between lines starting <code>abc</code> and <code>mno</code>. </p>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1576023103, "post_id": 59276286, "comment_id": 104761204, "body": "As a side note, <a href=\"https://metacpan.org/pod/Text::Unidecode\" rel=\"nofollow noreferrer\">Text::Unidecode</a> performs in the same sort of problem space and is in a much more reliable state."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1576021989, "post_id": 59276489, "comment_id": 104760925, "body": "Perfect. I&#39;d only add that <code>binmode *STDOUT, &#39;:encoding(UTF-8)&#39;</code> is one of the things done by <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1576022237, "post_id": 59276489, "comment_id": 104761004, "body": "Re &quot;<i><code>my $str = &#39;Aliz&#233;h&#39;; # already decoded</code></i>&quot;, It&#39;s already decoded because of <code>use utf8;</code>, in case that&#39;s not clear."}, {"owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "edited": false, "score": 0, "creation_date": 1576023795, "post_id": 59276489, "comment_id": 104761338, "body": "Thanks. The reason I was doing this was to deal with strings coming back from the database in the wrong encoding. It turns out that they were put in the DB as unicode but when they are read out the Sybase driver is re-encoding them as unicode. So the solution was to decode the string twice. But this answer helped a lot to figure out what was going wrong. I had the encode decode around the wrong way, you explanation was perfect, thanks!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1576019469, "last_edit_date": 1576019469, "creation_date": 1576018177, "answer_id": 59276489, "question_id": 59276286, "link": "https://stackoverflow.com/questions/59276286/converting-hex-into-utf8-not-working-as-expected-in-perl/59276489#59276489", "title": "Converting hex into UTF8 not working as expected in perl", "body": "<p>Unicode strings are first-class values in Perl, you do not need to jump through these hoops. You just need to recognize and keep track of when you have bytes and when you have characters, Perl will not differentiate for you, and all byte strings are also valid character strings. Indeed, you are double-encoding your strings, which are still valid as the UTF-8 encoded bytes representing (the characters corresponding to) your UTF-8 encoded bytes.</p>\n\n<p><code>use utf8;</code> will decode your source code from UTF-8, so by declaring that your following literal strings are already unicode strings and can be passed to any API that correctly accepts characters. To get the same from a string of UTF-8 bytes (as you are producing by packing the hex representation of the bytes), use <a href=\"https://perldoc.pl/Encode#decode\" rel=\"noreferrer\">decode from Encode</a> (or my <a href=\"https://metacpan.org/pod/Encode::Simple#decode_utf8\" rel=\"noreferrer\">nicer wrapper</a>).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse Encode 'decode';\n\nmy $str = 'Aliz\u00e9h'; # already decoded\nmy $hex = '416c697ac3a968';\nmy $bytes = pack 'H*', $hex;\nmy $chars = decode 'UTF-8', $bytes;\n</code></pre>\n\n<p>Unicode strings need to be encoded to UTF-8 for output to something that expects bytes, such as STDOUT; a <code>:encoding(UTF-8)</code> layer can be applied to such handles to do this automatically, and the same to automatically decode from input handles. The exact nature of what should be applied depends entirely on where your characters are coming from and where they are going. See <a href=\"https://stackoverflow.com/a/6163129/5848200\">this answer</a> for way too much information on the options available.</p>\n\n<pre><code>use Encode 'encode';\nprint encode 'UTF-8', \"$chars\\n\";\nbinmode *STDOUT, ':encoding(UTF-8)'; # warning: global effect\nprint \"$chars\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 1, "accepted_answer_id": 59276489, "answer_count": 1, "score": 2, "last_activity_date": 1576019469, "creation_date": 1576016834, "question_id": 59276286, "link": "https://stackoverflow.com/questions/59276286/converting-hex-into-utf8-not-working-as-expected-in-perl", "title": "Converting hex into UTF8 not working as expected in perl", "body": "<p>I'm trying to understand UTF8 in perl. </p>\n\n<p>I have the following string Aliz\u00e9h. If I lookup the hex for this string I get 416c697ac3a968 from <a href=\"https://onlineutf8tools.com/convert-utf8-to-hexadecimal\" rel=\"nofollow noreferrer\">https://onlineutf8tools.com/convert-utf8-to-hexadecimal</a> (This matches with the original source of this string). </p>\n\n<p>So I thought packing that hex and encoding it to utf8 should produce the unicode string. But it produces something very different. </p>\n\n<p>Is anyone able to explain what I'm getting wrong? </p>\n\n<p>Here is a simple test program to show my working. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Text::Unaccent;\nuse Encode;\n\nuse utf8;\nbinmode STDOUT, ':encoding(UTF-8)';\n\nprint \"First test that the utf8 string Aliz\u00e9h prints as expected\\n\\n\";\n\nprint \"=========================================== Hex to utf8 test start\\n\";\n\nmy $hexRepresentationOfTheString = '416c697ac3a968';\nmy $packedHexIntoPlainString = pack(\"H*\", $hexRepresentationOfTheString);\nprint \"The hex of the string is $hexRepresentationOfTheString\\n\";\nprint \"The string after packing prints as $packedHexIntoPlainString\\n\";\nutf8::encode($packedHexIntoPlainString);\nprint \"Utf8 encoding the string produces $packedHexIntoPlainString\\n\";\n\nprint \"=========================================== Hex to utf8 test finish\\n\\n\";\n\nprint \"=========================================== utf8 from code test start\\n\";\nmy $utf8FromCode = \"Aliz\u00e9h\";\nprint \"Variable prints as $utf8FromCode\\n\";\n\nmy ($hex) = unpack(\"H*\", $utf8FromCode);\n\nprint \"Hex of this string is now $hex\\n\";\n\nprint \"Decoding the utf8 string\\n\";\nutf8::decode($utf8FromCode);\n\n$hex = unpack (\"H*\", $utf8FromCode);\nprint \"Hex string is now         $hex\\n\";\n\nprint \"=========================================== utf8 from code test finish\\n\\n\";\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>First test that the utf8 string Aliz\u00e9h prints as expected\n\n=========================================== Hex to utf8 test start\nThe hex of the string is 416c697ac3a968\nThe string after packing prints as Aliz\u00c3\u00a9h\nUtf8 encoding the string produces Aliz\u00c3\u00c2\u00a9h\n=========================================== Hex to utf8 test finish\n\n=========================================== utf8 from code test start\nVariable prints as Aliz\u00e9h\nHex of this string is now 416c697ae968\nDecoding the utf8 string\nHex string is now         416c697ae968\n=========================================== utf8 from code test finish\n</code></pre>\n\n<p>Any tips on how to take the hex value of a UTF8 string and turn it into a valid UTF8 scalar in perl? </p>\n\n<p>There is some further weirdness I'll explain in this extended version</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Text::Unaccent;\nuse Encode;\n\nuse utf8;\nbinmode STDOUT, ':encoding(UTF-8)';\n\nprint \"First test that the utf8 string Aliz\u00e9h prints as expected\\n\\n\";\n\nprint \"=========================================== Hex to utf8 test start\\n\";\n\nmy $hexRepresentationOfTheString = '416c697ac3a968';\nmy $packedHexIntoPlainString = pack(\"H*\", $hexRepresentationOfTheString);\nprint \"The hex of the string is $hexRepresentationOfTheString\\n\";\nprint \"The string after packing prints as $packedHexIntoPlainString\\n\";\nutf8::encode($packedHexIntoPlainString);\nprint \"Utf8 encoding the string produces $packedHexIntoPlainString\\n\";\n\nprint \"=========================================== Hex to utf8 test finish\\n\\n\";\n\nprint \"=========================================== utf8 from code test start\\n\";\nmy $utf8FromCode = \"Aliz\u00e9h\";\nprint \"Variable prints as $utf8FromCode\\n\";\n\nmy ($hex) = unpack(\"H*\", $utf8FromCode);\n\nprint \"Hex of this string is now $hex\\n\";\n\nprint \"Decoding the utf8 string\\n\";\nutf8::decode($utf8FromCode);\n\n$hex = unpack (\"H*\", $utf8FromCode);\nprint \"Hex string is now         $hex\\n\";\n\nprint \"=========================================== utf8 from code test finish\\n\\n\";\n\nprint \"=========================================== Unaccent test start\\n\";\n\nmy $plaintest = unac_string('utf8', \"Aliz\u00e9h\");\n\nprint \"Aliz\u00e9h passed to the unaccent gives $plaintest\\n\";\n\n\nmy $cleanpackedHexIntoPlainString = pack(\"H*\", $hexRepresentationOfTheString);\nprint \"Packed version of the hex string prints as  $cleanpackedHexIntoPlainString\\n\";\n\nmy $packedtest = unac_string('utf8', $cleanpackedHexIntoPlainString);\n\nprint \"Unaccenting the packed version gives $packedtest\\n\";\n\nutf8::encode($cleanpackedHexIntoPlainString);\nprint \"encoding the packed version it now prints as $cleanpackedHexIntoPlainString\\n\";\n\n$packedtest = unac_string('utf8', $cleanpackedHexIntoPlainString);\n\nprint \"Now unaccenting the packed version gives $packedtest\\n\";\n\nprint \"=========================================== Unaccent test finish\\n\\n\";\n</code></pre>\n\n<p>This prints: </p>\n\n<pre><code>First test that the utf8 string Aliz\u00e9h prints as expected\n\n=========================================== Hex to utf8 test start\nThe hex of the string is 416c697ac3a968\nThe string after packing prints as Aliz\u00c3\u00a9h\nUtf8 encoding the string produces Aliz\u00c3\u00c2\u00a9h\n=========================================== Hex to utf8 test finish\n\n=========================================== utf8 from code test start\nVariable prints as Aliz\u00e9h\nHex of this string is now 416c697ae968\nDecoding the utf8 string\nHex string is now         416c697ae968\n=========================================== utf8 from code test finish\n\n=========================================== Unaccent test start\nAliz\u00e9h passed to the unaccent gives Alizeh\nPacked version of the hex string prints as  Aliz\u00c3\u00a9h\nUnaccenting the packed version gives Alizeh\nencoding the packed version it now prints as Aliz\u00c3\u00c2\u00a9h\nNow unaccenting the packed version gives AlizA\u00c2\u00a9h\n=========================================== Unaccent test finish\n</code></pre>\n\n<p>In this test it seems that the unaccent library accepts the packed version of the strings hex. I'm not sure why, could anyone please help me understand why that works? </p>\n"}, {"tags": ["perl", "email", "sendmail", "attachment", "corruption"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1576017697, "post_id": 59276284, "comment_id": 104759769, "body": "It is not the problem, but it&#39;s better to do <code>open my $mail, &#39;|-&#39;, &#39;sendmail&#39;, &#39;-t&#39; or die &quot;sendmail failed: $!&quot;;</code> (then using <code>$mail</code> for the following code)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1576017711, "post_id": 59276284, "comment_id": 104759775, "body": "How are you generating the contents of the <code>$jpgg</code> variable?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1576017812, "post_id": 59276284, "comment_id": 104759798, "body": "It&#39;s possible that some services are expecting a <code>Content-Length</code> header indicating the size of the (encoded) image"}, {"owner": {"reputation": 21, "user_id": 12476022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9c670879bda154c4a0511859ba17b6?s=128&d=identicon&r=PG&f=1", "display_name": "jobeSW", "link": "https://stackoverflow.com/users/12476022/jobesw"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1576031026, "post_id": 59276284, "comment_id": 104762842, "body": "Grinnz; I&#39;m using base64-image.de to encode, shouldn&#39;t be the problem as two out of three email services are reading it.. I know i should use die more often. Content-Length is a good lead thanks, not sure the data Content-Length takes, i tried 7928 (number of characters) without any luck."}], "answers": [{"comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576046937, "post_id": 59276845, "comment_id": 104766902, "body": "@ikegami -- the author of the post have followed my suggestion and modified his original code/post. Before in his code there was <b>print MAIL ...</b> for each line -- excessive use of unnecessary typing [less readable code]."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576048674, "post_id": 59276845, "comment_id": 104767506, "body": "Well for me it is not a problem to add  blank line, but the original post did not include them (I have preserved as it was in original code posted -- added empty line only where <b>\\n\\n</b> was included into printed line). If you have an access to original post then it would be beneficial to check it."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1576050562, "post_id": 59276845, "comment_id": 104768231, "body": "Well, I can not prove the changes I did but in notepad++ I made following replacements: <b>\\n\\n</b> =&gt; blank line, removed <b>print MAIL &quot;</b>, removed <b>\\n&quot;;</b> -- the result is what was included into my <i>answer</i> where I indicated that it suggestion only. Of course I could missed something -- but honestly  I put significant attention when I made changes, then just copied result."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576050617, "post_id": 59276845, "comment_id": 104768251, "body": "ah, a transparent edit. My apologies. And woops, didn&#39;t notice you had done the edit"}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1576048538, "last_edit_date": 1576048538, "creation_date": 1576020577, "answer_id": 59276845, "question_id": 59276284, "link": "https://stackoverflow.com/questions/59276284/in-perl-sendmail-why-is-my-image-attachment-becoming-corrupt-sometimes/59276845#59276845", "title": "in Perl sendmail, why is my Image attachment becoming corrupt, sometimes?", "body": "<p>Just a suggestion to change the code to following form</p>\n\n<pre><code>my $msg = \"\nFrom: John &lt;$sender&gt;\nTo: bob &lt;$recipient&gt;\nSubject: $subject\nMIME-Version: 1.0     \nContent-Type: multipart/mixed; boundary=\\\"BOUNDARY\\\"\n\n--BOUNDARY        \nContent-Type: multipart/alternative; boundary=\\\"MSGBOUNDARY\\\"\n\n--MSGBOUNDARY\nContent-Type: text/html; charset=iso-8859-1\nContent-Disposition: inline\n\n&lt;html&gt;&lt;body&gt;Hello, World&lt;br&gt;&lt;img src=\\\"cid:hello\\\"&gt;&lt;/body&gt;&lt;/html&gt;\n--MSGBOUNDARY\nContent-Type: text/plain; charset=iso-8859-1\nContent-Disposition: inline\n\nHello, World,[you're missing an image here]\n--MSGBOUNDARY--\n--BOUNDARY\nContent-Type: image/jpeg\nContent-Disposition: inline; filename=\\\"hello.jpg\\\"\nContent-Transfer-Encoding: base64\nContent-Id: &lt;hello&gt;\n\n$jpgg\n--BOUNDARY--\n\";\n\nopen MAIL, \"| $sendmail -t\" \n        or die \"Couldn't pipe to $sendmail\";\n\nprint MAIL $msg;\n\nclose MAIL;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12476022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf9c670879bda154c4a0511859ba17b6?s=128&d=identicon&r=PG&f=1", "display_name": "jobeSW", "link": "https://stackoverflow.com/users/12476022/jobesw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1576048538, "creation_date": 1576016814, "last_edit_date": 1576025755, "question_id": 59276284, "link": "https://stackoverflow.com/questions/59276284/in-perl-sendmail-why-is-my-image-attachment-becoming-corrupt-sometimes", "title": "in Perl sendmail, why is my Image attachment becoming corrupt, sometimes?", "body": "<p>I intend to rewrite this in Net::SMTP but right now i need a backup subroutine that doesn't \"use\" much, so;  </p>\n\n<p>The code works and sends emails, when received in most email service (Godaddy,ProtonMail) i get the full image, but in another (34SP) email service i only get the top half of the image. </p>\n\n<pre><code>my $msg = \"From: John &lt;$sender&gt;\nTo: bob &lt;$recipient&gt;\nSubject: $subject\nMIME-Version: 1.0     \nContent-Type: multipart/mixed; boundary=\\\"BOUNDARY\\\"\n\n--BOUNDARY        \nContent-Type: multipart/alternative; boundary=\\\"MSGBOUNDARY\\\"\n\n--MSGBOUNDARY\nContent-Type: text/html; charset=iso-8859-1\nContent-Disposition: inline\n\n&lt;html&gt;&lt;body&gt;Hello, World&lt;br&gt;&lt;img src=\\\"cid:hello\\\"&gt;&lt;/body&gt;&lt;/html&gt;\n--MSGBOUNDARY\nContent-Type: text/plain; charset=iso-8859-1\nContent-Disposition: inline\n\nHello, World,[you're missing an image here]\n--MSGBOUNDARY--\n--BOUNDARY\nContent-Type: image/jpeg\nContent-Disposition: inline; filename=\\\"hello.jpg\\\"\nContent-Transfer-Encoding: base64\nContent-Id: &lt;hello&gt;\n\n$jpgg \n--BOUNDARY--\";\n\nopen MAIL, \"| $sendmail -t\" \n        or die \"Couldn't pipe to $sendmail\";\nprint MAIL $msg;\nclose MAIL;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cUAGm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cUAGm.jpg\" alt=\"\"></a></p>\n\n<p>I've tested the 34SP email service by sending this first attachment from another location and it receives it fine, so it must be a problem with the code.  If anyone can see something I've done wrong, I'd appreciate it.</p>\n\n<p>EDIT(1); as per Polar Bears suggestion I've edited the code for easier reading, I've tested this version and am still getting the same issue.</p>\n"}, {"tags": ["perl", "parameters"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1576020377, "post_id": 59276147, "comment_id": 104760497, "body": "Neither <code>@$</code> nor <code>@;$</code> makes sense. When Perl encounters them, it warns (<code>Prototype after &#39;@&#39;</code>), and ignores everything after the <code>@</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1576016949, "last_edit_date": 1576016949, "creation_date": 1576016294, "answer_id": 59276197, "question_id": 59276147, "link": "https://stackoverflow.com/questions/59276147/what-is-the-significance-of-when-defining-formal-parameters-for-a-perl-subro/59276197#59276197", "title": "What is the significance of &quot;;&quot; when defining formal parameters for a perl subroutine?", "body": "<p>This feature is called <a href=\"https://perldoc.pl/perlsub#Prototypes\" rel=\"nofollow noreferrer\">prototypes</a>, and it is <em>not</em> a formal parameter specification, but instead a ruleset for the parser of how to parse arguments passed to your subroutine, which also happens to do some rudimentary arity checking and coercion (sometimes in ways that will be surprising to the user). It is explained in that feature's documentation:</p>\n\n<blockquote>\n  <p>A semicolon (;) separates mandatory arguments from optional arguments. It is redundant before @ or %, which gobble up everything else.</p>\n</blockquote>\n\n<p>It is often simpler to not use prototypes at all than risk the confusion that they can cause. Some examples: a <code>$</code> parameter will be forced into scalar context even if it is an array, and the prototype is ignored entirely when the subroutine is called as an object or class method (because it is not yet determined what subroutine will be called at the time the call is parsed).</p>\n\n<p>For formal parameter specifications, use the <a href=\"https://perldoc.pl/perlsub#Signatures\" rel=\"nofollow noreferrer\">signatures</a> feature, or <a href=\"https://metacpan.org/pod/Function::Parameters\" rel=\"nofollow noreferrer\">Function::Parameters</a> (which currently has the benefit of being feature-complete - more features for signatures are <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2019/11/msg256677.html\" rel=\"nofollow noreferrer\">coming soon</a>).</p>\n"}], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59276197, "answer_count": 1, "score": 1, "last_activity_date": 1576016949, "creation_date": 1576016090, "question_id": 59276147, "link": "https://stackoverflow.com/questions/59276147/what-is-the-significance-of-when-defining-formal-parameters-for-a-perl-subro", "title": "What is the significance of &quot;;&quot; when defining formal parameters for a perl subroutine?", "body": "<h1>Background</h1>\n\n<p>When specifying formal parameters for a subroutine in perl, I am aware of the following notation.  I'm not sure entirely what they mean, but form context clues and seeing other's explain their code, I have deduced this much:</p>\n\n<pre><code>sub method1($$){...} &lt;-- Means it takes in two scalar parameters\nsub method2(@){...} &lt;-- Means it takes in a bunch of parameters as a hash\nsub method3($@){...} &lt;-- Menas it takes in a scalar parameter, then a bunch of other parameters as a hash.\n</code></pre>\n\n<p>However, I have also found this notation and am unaware of what it means:</p>\n\n<pre><code>sub method4(@;$)\n</code></pre>\n\n<h1>Question</h1>\n\n<p>What, functionally, does the formal parameter declaration of <code>@;$</code> do that <code>@$</code> does not?</p>\n"}, {"tags": ["perl", "openssl", "mojolicious", "cpanm", "libressl"], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 8110392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5u9yN.jpg?s=128&g=1", "display_name": "xcodejoy", "link": "https://stackoverflow.com/users/8110392/xcodejoy"}, "edited": false, "score": 0, "creation_date": 1576018172, "post_id": 59276128, "comment_id": 104759915, "body": "Great! &quot;cpanfile&quot; allows do it so simple: on configure =&gt; sub { ... };"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 50, "user_id": 8110392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5u9yN.jpg?s=128&g=1", "display_name": "xcodejoy", "link": "https://stackoverflow.com/users/8110392/xcodejoy"}, "edited": false, "score": 0, "creation_date": 1576018299, "post_id": 59276128, "comment_id": 104759950, "body": "This is not a good idea, cpanfiles are not designed for arbitrary code. You should set it in the environment yourself (or as part of the larger build process)."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1576015962, "creation_date": 1576015962, "answer_id": 59276128, "question_id": 59275995, "link": "https://stackoverflow.com/questions/59275995/what-is-the-right-way-to-install-iosocketssl-using-carton-and-custom-libress/59276128#59276128", "title": "What is the right way to install IO::Socket::SSL using Carton and custom LibreSSL/OpenSSL", "body": "<p>Determining what instance of OpenSSL to link against is done by Net::SSLeay during its installation (IO::Socket::SSL is just an interface to that module). It explains in its <a href=\"https://metacpan.org/source/CHRISN/Net-SSLeay-1.88/README\" rel=\"nofollow noreferrer\">README</a>:</p>\n\n<pre><code>    If your OpenSSL is installed in an unusual place, you can tell\n    Net-SSLeay where to find it with the OPENSSL_PREFIX environment\n    variable:\n    OPENSSL_PREFIX=/home/mikem/playpen/openssl-1.0.2c perl Makefile.PL\n</code></pre>\n\n<p>Once installed, this no longer needs to be indicated to the respective Perl projects using that module.</p>\n"}], "owner": {"reputation": 50, "user_id": 8110392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5u9yN.jpg?s=128&g=1", "display_name": "xcodejoy", "link": "https://stackoverflow.com/users/8110392/xcodejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 59276128, "answer_count": 1, "score": 1, "last_activity_date": 1576015962, "creation_date": 1576015169, "question_id": 59275995, "link": "https://stackoverflow.com/questions/59275995/what-is-the-right-way-to-install-iosocketssl-using-carton-and-custom-libress", "title": "What is the right way to install IO::Socket::SSL using Carton and custom LibreSSL/OpenSSL", "body": "<p>Perl framework <em>Mojolicious</em> uses optional module <strong>IO::Socket::SSL</strong> for secured connections.</p>\n\n<p><em>Mojolicious</em> and <strong>IO::Socket::SSL</strong> must be installed using <strong>Carton</strong> (<em>cpanfile</em> contains dependencies list).<br />\nIn order to use <strong>IO::Socket::SSL</strong> I need to have <strong>Net::SSLeay</strong> installed.<br />\n<strong>Net::SSLeay</strong> requires LibreSSL or OpenSSL installed.</p>\n\n<p>On developer's server, a determined Perl project must use a determined LibreSSL/OpenSSL version:</p>\n\n<pre><code>$HOME/opt/LibreSSL/v1\n$HOME/opt/LibreSSL/v...\n$HOME/opt/OpenSSL/v1\n$HOME/opt/OpenSSL/v...\n</code></pre>\n\n<p>My solution is to change <strong>$PATH</strong> system variable (for local custom LibreSSL/OpenSSL) before:<br /></p>\n\n<pre><code>- execution \"carton install\" command\n- running of a Perl project for testing\n</code></pre>\n\n<p>Is it right way?</p>\n"}, {"tags": ["perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 73, "user_id": 12440287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a203193c7f335d9f1e8053ae78711cd?s=128&d=identicon&r=PG&f=1", "display_name": "Caractacus", "link": "https://stackoverflow.com/users/12440287/caractacus"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1576007690, "post_id": 59274297, "comment_id": 104755972, "body": "@toolic But it&#39;s still not the 400+ so something is different"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 12440287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a203193c7f335d9f1e8053ae78711cd?s=128&d=identicon&r=PG&f=1", "display_name": "Caractacus", "link": "https://stackoverflow.com/users/12440287/caractacus"}, "edited": false, "score": 0, "creation_date": 1576268065, "post_id": 59274473, "comment_id": 104857817, "body": "Thanks, but when I run an example (added to bottom of OP) I get an <i>italic</i> error when connectingInternal Exception at /usr/local/share/perl/5.26.1/WWW/Mechanize/Chrome.pm line 1000 <i>italic</i> error.  Which comes up with nothing at Google and is beyond my capabilities to debug.  Do you know of any alternative to WWW::Mechanize::Chrome?"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "reply_to_user": {"reputation": 73, "user_id": 12440287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a203193c7f335d9f1e8053ae78711cd?s=128&d=identicon&r=PG&f=1", "display_name": "Caractacus", "link": "https://stackoverflow.com/users/12440287/caractacus"}, "edited": false, "score": 0, "creation_date": 1576268281, "post_id": 59274473, "comment_id": 104857904, "body": "<code>WWW::Mechanize::Firefox</code>. Duh. Head over to PerlMonks.org The author of both the modules, Corion, is quite active there."}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 4, "last_activity_date": 1576011618, "last_edit_date": 1576011618, "creation_date": 1576007850, "answer_id": 59274473, "question_id": 59274297, "link": "https://stackoverflow.com/questions/59274297/how-can-i-scrape-images-off-of-a-webage-using-perl/59274473#59274473", "title": "How can I scrape images off of a webage using Perl", "body": "<p>The Google search uses <code>Javascript</code> to alter the page content after load. <code>LWP::UserAgent</code> does not support <code>Javascript</code> and what you get is only the initial document. (Hint: An easy way to see in the browser what <code>LWP::UserAgent</code> \"sees\" is using a browser addon to disable <code>Javascript</code>).</p>\n\n<p>You will need to use something that is called a \"headless Browser\", for example <a href=\"https://metacpan.org/pod/WWW::Mechanize::Chrome\" rel=\"nofollow noreferrer\">WWW::Mechanize::Chrome</a></p>\n"}], "owner": {"reputation": 73, "user_id": 12440287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a203193c7f335d9f1e8053ae78711cd?s=128&d=identicon&r=PG&f=1", "display_name": "Caractacus", "link": "https://stackoverflow.com/users/12440287/caractacus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576268185, "creation_date": 1576007019, "last_edit_date": 1576268185, "question_id": 59274297, "link": "https://stackoverflow.com/questions/59274297/how-can-i-scrape-images-off-of-a-webage-using-perl", "title": "How can I scrape images off of a webage using Perl", "body": "<p>I would like to scrape all images off of a webpage and am running into a problem I don't understand.</p>\n\n<p>For instance if I use enter <a href=\"https://www.google.com/search?as_st=y&amp;tbm=isch&amp;hl=en&amp;as_q=%22escape%20room%22%20movie%20poster&amp;safe=images\" rel=\"nofollow noreferrer\">https://www.google.com/search?as_st=y&amp;tbm=isch&amp;hl=en&amp;as_q=%22escape%20room%22+movie+poster&amp;safe=images</a> into my browser and then use the browser's \"View Source\" option I get a massive amount of text/code. Using \"find\" I get more than 400 instances of </p>\n\n<blockquote>\n  <p>https://</p>\n</blockquote>\n\n<p>So the simple code I wrote (below) gets the content and writes the result to a file.  But a grep search of https:// only returns 7 instances.  So obviously I am doing something incorrectly, perhaps the page is dynamic and I can't access that part?</p>\n\n<p>Is there a way I can get the same source, via Perl, that I get via View Source?</p>\n\n<pre><code>my $ua = new LWP::UserAgent;\n$ua-&gt;agent(\"$0/0.1 \" . $ua-&gt;agent);\n$ua-&gt;agent(\"Mozilla/8.0\");\n\nmy $sstring = \"https://www.google.com/search?as_st=y&amp;tbm=isch&amp;hl=en&amp;as_q=%22escape%20room%22+movie+poster&amp;safe=images\";     \n\nmy $req = new HTTP::Request 'GET' =&gt; $sstring;\n$req-&gt;header('Accept' =&gt; 'text/html');\n\nmy $res = $ua-&gt;request($req);\n\nopen(my $fh, '&gt;', 'report.txt');\nprint $fh $res-&gt;decoded_content;\nclose $fh;\n</code></pre>\n\n<p>Here's the example I got from WWW:Mechanize::Chrome</p>\n\n<pre><code>my $mech = WWW::Mechanize::Chrome-&gt;new();\nmy $sstring = \"https://www.google.com/search?as_st=y&amp;tbm=isch&amp;hl=en&amp;as_q=\\\"\" . $arrayp . \"\\\"\" . \"+movie+poster&amp;safe=images\";        \n$mech-&gt;get($sstring);\n\nsleep 5;\n\nprint $_-&gt;get_attribute('href'), \"\\n\\t-&gt; \", $_-&gt;get_attribute('innerHTML'), \"\\n\"\n          for $mech-&gt;selector('a.download');\n</code></pre>\n"}, {"tags": ["java", "perl", "io", "bonjour"], "comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1576000104, "post_id": 59271195, "comment_id": 104752767, "body": "Do you see any output from <b>tail -F WemoServer.log</b> while other process is running?  And why not use just <b>tail -F WemoServer.log | ./WemoServerLogProcessor.pl -r rules.txt --extended 2&gt;&amp;1 &gt;&gt; WemoParser.log</b> ?  If you run only <b>tail -F WemoServer.log | ./WemoServerLogProcessor.pl -r rules.txt --extended 2&gt;&amp;1 &gt;&gt; WemoParser.log</b> in separate terminal you should see some output -- it is your debug tool.  At this time I can only assume that your <b>WemoServerLogProcessor.pl</b> may have cached output -- until buffer not full there will be no any output."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1576001267, "post_id": 59271195, "comment_id": 104753226, "body": "I don\u2019t understand your comment. I\u2019m not concerned about the output of my Perl script. It\u2019s the output of the Java process that stops. My Perl script processes everything that the JavaScript had generated to the point where I ran the Perl Script, but after that, there is no longer any output from the Java process going to my Perl script."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1576002456, "post_id": 59271195, "comment_id": 104753726, "body": "Regarding the <code>sh</code> wrapped commands, I&#39;ve been testing without it.  Actually, for the past few years, I&#39;ve been running both commands in a login script with nohup in front of each and I think I added the <code>sh</code> wrap because the login script was never exiting (and I suspect that was due to a file handle, as wrapping in <code>sh</code> solved it). That&#39;s all unrelated to my issue however. Whether I run it without <code>sh</code> or with, in each case, the java process stops printing to WemoServer.log (on the one computer only) as soon as the second command is run."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1576006358, "post_id": 59271195, "comment_id": 104755442, "body": "Hmm, you in your answer refer to JavaScript -- from your post I only see <b>java</b> and <b>perl</b>. Unfortunately I can not help on <i>Java</i> side - if <i>Java</i> produces output to STDOUT/STDERR then I do not see how a pipe to perl script can affect it."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1576009085, "post_id": 59271195, "comment_id": 104756549, "body": "Sorry. My phone autocorrected java to &quot;JavaScript&quot;. I had fixed that in one place.  Missed it in the other. I too do not understand how the java process&#39;s output could be affected.  It&#39;s weird."}, {"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 0, "creation_date": 1576009096, "post_id": 59271195, "comment_id": 104756552, "body": "In general, piping the output of the &quot;tail -F WemoServer.log&quot; shouldn&#39;t stop your java program from writing to the WemoServer.log file, but there might be some unexpected OS optimization happening that we aren&#39;t expecting.  What OS &amp; Version is this failing on?  (Is the working system the same OS Version?)"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1576009452, "post_id": 59271195, "comment_id": 104756689, "body": "The OS that has the issue is macOS 10.12.6 (Sierra). I can&#39;t confirm it ATM, but I&#39;m pretty sure that my laptop which I used for testing and doesn&#39;t replicate the issue is Mojave (10.14.x). That said, it <i>used</i> to work on the older system until recently."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1576034563, "post_id": 59271195, "comment_id": 104763578, "body": "I think maybe I&#39;m asking the wrong question... I have evidence showing that the java process on the mac mini is still printing to the log.  It just loses its connection to the wemo devices when I pipe to the script... which also makes no sense to me. So I don&#39;t think it&#39;s a file handle thing. It must be a bonjour thing? Incidentally, the purpose of the script is to issue spoken reminders during certain days/times when motion is detected. It&#39;s those reminders that stopped working because the motion events are not being fed to my script."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1576087498, "post_id": 59271195, "comment_id": 104788035, "body": "I added an update to the question"}], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "is_accepted": false, "score": 0, "last_activity_date": 1591031303, "creation_date": 1591031303, "answer_id": 62137310, "question_id": 59271195, "link": "https://stackoverflow.com/questions/59271195/how-can-piping-tail-of-a-log-to-a-script-cause-the-process-generating-the-log-to/62137310#62137310", "title": "How can piping tail of a log to a script cause the process generating the log to stop generating entries?", "body": "<p>I asked the wrong question.  Yes, the output was stopping, but the stopping of the output happened to be catalyzed by connecting to the output stream.  The ending of the output happens eventually even if left alone.</p>\n\n<p>The real reason it was stopping is because I had 2 separate subscriptions to the Wemo device and it only supports 1.</p>\n"}], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1591031303, "creation_date": 1575993752, "last_edit_date": 1576078309, "question_id": 59271195, "link": "https://stackoverflow.com/questions/59271195/how-can-piping-tail-of-a-log-to-a-script-cause-the-process-generating-the-log-to", "title": "How can piping tail of a log to a script cause the process generating the log to stop generating entries?", "body": "<p>I\u2019m trying to solve a weird issue. I have evidence suggesting that the script I\u2019m piping tail output to is the cause of the issue, but I\u2019m not sure what to look for. Here\u2019s what I\u2019ve got:</p>\n\n<p>I have a java program that generates a log to stdout with which I merge stderr (2>&amp;1) and redirect to a file. I run a separate shell script that does a tail -F that pipes it to a Perl script which operates on events in the log and never exits.</p>\n\n<p>It\u2019s not the best design, but everything has worked for years until recently (the past couple months). There was an apparent problem with the jar file, as the log had built up tons of errors, so as a first step, I updated to the latest version. The new version however, in the setup I described above, stops adding entries to the log.</p>\n\n<p>To narrow the issue, I have done the following:</p>\n\n<pre><code>tail -F log | perl -pne \u2018$|=1;\u2019\ntail -F log\n</code></pre>\n\n<p>This shows that output continues to flow and suggests that something the script is doing is causing the problem.</p>\n\n<p>However, that doesn\u2019t appear to be the whole story because when I run everything on a different computer, everything there works! It\u2019s only on a specific computer where the jar stops printing to the log.</p>\n\n<p>Other details:</p>\n\n<ul>\n<li>The java process continues to run in all cases.</li>\n<li>I am testing by doing a <code>tail -F</code> again after running everything in the background</li>\n<li>There may have been an OS update that caused the issue</li>\n<li>Running in a bash shell</li>\n<li>I updated a module that the perl script uses to be the same, but there is apparently a minor difference between the computer that it works on and the one that stops the java output which I have yet to investigate</li>\n<li>Here are the actual commands I'm using for testing:</li>\n</ul>\n\n<pre><code>java -cp WemoServer.jar mpp.wemo.server.Headless -p 4033 -upnp -run -log &gt;&gt; WemoServer.log 2&gt;&amp;1 &amp;\nsh -c \"tail -F WemoServer.log | ./WemoServerLogProcessor.pl -r rules.txt --extended\" 2&gt;&amp;1 &gt;&gt; WemoParser.log &amp;\n\n#And I'm testing whether the java process stops generating output via:\ntail -F WemoServer.log\n</code></pre>\n\n<p>I\u2019m stumped as to how to debug this issue. What should I look for?</p>\n\n<p>UPDATE: I have learned that the java process can still write to the log. I know this because if I leave it running long enough, and initial bonjour search function completes and writes a message stating as much to the log.</p>\n\n<p>However, the moment I pipe a tail of the log to my script, it appears that event tries stop, such as is written when an outlet turns on or off or motion is detected. If I don\u2019t pipe the tail of the log to my Perl script, all device events get written to the log as they happen. It\u2019s as if the java process loses its communication ability with the devices.</p>\n\n<p>I know that bonjour is used to discover the devices and it prints to the log their IP addresses, so I don\u2019t know what the interruption could be. My Perl script definitely does nothing with ports or bonjour or anything. It just parses a file on STDIN.</p>\n\n<p>I suppose I can try updating the OS since it\u2019s 2 versions behind my laptop which works, but I\u2019d like to understand what\u2019s going on.</p>\n"}, {"tags": ["perl", "asterisk", "agi"], "comments": [{"owner": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "edited": false, "score": 0, "creation_date": 1575999214, "post_id": 59266941, "comment_id": 104752375, "body": "okay, and what is question?"}, {"owner": {"reputation": 392, "user_id": 2801554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9YoeP.jpg?s=128&g=1", "display_name": "Leandro Arruda", "link": "https://stackoverflow.com/users/2801554/leandro-arruda"}, "reply_to_user": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "edited": false, "score": 0, "creation_date": 1576006757, "post_id": 59266941, "comment_id": 104755601, "body": "@arheops Is there a way to use Perl AGI module sending parameters to functions from dialplan and return values back dialplan? I don&#39;t know how to use subroutines in perl AGI."}, {"owner": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "edited": false, "score": 0, "creation_date": 1576008410, "post_id": 59266941, "comment_id": 104756270, "body": "Sure. There are alot of examples availible online. Is that all you want to know?"}, {"owner": {"reputation": 392, "user_id": 2801554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9YoeP.jpg?s=128&g=1", "display_name": "Leandro Arruda", "link": "https://stackoverflow.com/users/2801554/leandro-arruda"}, "reply_to_user": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "edited": false, "score": 0, "creation_date": 1576009357, "post_id": 59266941, "comment_id": 104756642, "body": "@arheops Yes, just that. I just can find Perl AGI with conditional statements not using functions receiving parameters from dialplan. Can you show me some of these samples?"}, {"owner": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "edited": false, "score": 0, "creation_date": 1576009998, "post_id": 59266941, "comment_id": 104756912, "body": "Wait. So are you asking now how to use functions inside perl script? It is usual way and described in every and each book about perl."}, {"owner": {"reputation": 392, "user_id": 2801554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9YoeP.jpg?s=128&g=1", "display_name": "Leandro Arruda", "link": "https://stackoverflow.com/users/2801554/leandro-arruda"}, "reply_to_user": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "edited": false, "score": 0, "creation_date": 1576010620, "post_id": 59266941, "comment_id": 104757190, "body": "@arheops Really that a perl book teaches about perl functions? I was waiting for this clarification! No, I&#39;m ask how to send parameters from dial plan and setting the return back to dial plan."}], "answers": [{"tags": [], "owner": {"reputation": 392, "user_id": 2801554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9YoeP.jpg?s=128&g=1", "display_name": "Leandro Arruda", "link": "https://stackoverflow.com/users/2801554/leandro-arruda"}, "is_accepted": true, "score": 0, "last_activity_date": 1576069539, "creation_date": 1576069539, "answer_id": 59286499, "question_id": 59266941, "link": "https://stackoverflow.com/questions/59266941/how-to-send-arguments-from-dialplan-to-perl-subroutines-agi-and-send-respectives/59286499#59286499", "title": "How to send arguments from dialplan to Perl subroutines AGI and send respectives returns back to dialplan", "body": "<p>Seems that doesn't has how to call one function passing the name of function as argument natively. So, one of the ways that I found  to work with AGI, with Perl o PHP, was instead of has a file with various functions, we must to define a function to generate dynamic calls to theses functions passing the identifier of function and the parameters  needed via dialplan.</p>\n"}], "owner": {"reputation": 392, "user_id": 2801554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9YoeP.jpg?s=128&g=1", "display_name": "Leandro Arruda", "link": "https://stackoverflow.com/users/2801554/leandro-arruda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 59286499, "answer_count": 1, "score": 0, "last_activity_date": 1576069539, "creation_date": 1575979879, "last_edit_date": 1576012614, "question_id": 59266941, "link": "https://stackoverflow.com/questions/59266941/how-to-send-arguments-from-dialplan-to-perl-subroutines-agi-and-send-respectives", "title": "How to send arguments from dialplan to Perl subroutines AGI and send respectives returns back to dialplan", "body": "<p>I'm using Asterisk :: AGI module to interact with Asterisk 1.8, but I did not see samples to use perl subroutines. I want to connect with a web service and organize the AGI better, would be a good idea to use subroutines instead to do all the code inside if-else block, sending args from dialplan and get the return of theses subroutines.</p>\n\n<p>I know about get and set variables with this module but I want to know if there is something like this:</p>\n\n<pre><code>use Asterisk::AGI;\n\nmy $AGI = new Asterisk::AGI;\n\nsub some_subroutine {\n\n    my ($param1, $param2, param3) = @ARGV;\n\n    # do something with parameters\n\n    $agi_data = something_done_with_parameters;\n\n    return $AGI-&gt;set_variable(\"agi_data\", $agi_data);\n}\n</code></pre>\n\n<p>In dialplan context:</p>\n\n<pre><code>[simple_interact]\nexten = s,1,AGI(script.pl, some_subroutine, param1, param2, param3)\n same = n,NoOp(${agi_data})\n</code></pre>\n"}, {"tags": ["apache", "perl", "mod-perl", "apache-modules", "mod-perl2"], "comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1575961458, "post_id": 59261785, "comment_id": 104732047, "body": "Did you make the script executable?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1575961575, "post_id": 59261785, "comment_id": 104732103, "body": "Re &quot;<i>The browser just offers to download it</i>&quot;, You need to tell Apache which files to treat as CGI scripts. <a href=\"https://httpd.apache.org/docs/2.4/howto/cgi.html\" rel=\"nofollow noreferrer\">docs</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1575962888, "post_id": 59261785, "comment_id": 104732614, "body": "Also, if it&#39;s a CGI script, you don&#39;t need mod_perl"}, {"owner": {"reputation": 3, "user_id": 7377871, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CRWZrfwkk4c/AAAAAAAAAAI/AAAAAAAAAN8/WRUh3m26FW0/photo.jpg?sz=128", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/7377871/kaiser"}, "edited": false, "score": 0, "creation_date": 1575963023, "post_id": 59261785, "comment_id": 104732672, "body": "yes my script is executable and i dont want to use cgi, i want only mod_perl"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 1, "creation_date": 1575965504, "post_id": 59261785, "comment_id": 104733756, "body": "I&#39;m voting to close this question as off-topic because it belongs to <a href=\"https://unix.stackexchange.com/\">unix.stackexchange.com</a>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1575969721, "post_id": 59261785, "comment_id": 104735831, "body": "Add shebang line in top of the program. and add <code>print &quot;Content-Type: text&#47;html\\n\\n&quot;;</code> before printing anything"}, {"owner": {"reputation": 3, "user_id": 7377871, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CRWZrfwkk4c/AAAAAAAAAAI/AAAAAAAAAN8/WRUh3m26FW0/photo.jpg?sz=128", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/7377871/kaiser"}, "edited": false, "score": 0, "creation_date": 1575970298, "post_id": 59261785, "comment_id": 104736161, "body": "mkHun, that didnt help"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1575970564, "post_id": 59261785, "comment_id": 104736300, "body": "<i>&quot;i want only mod_perl&quot;</i> In 2019, I think that&#39;s a terrible idea."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576004963, "post_id": 59261785, "comment_id": 104754824, "body": "Re &quot;<i>yes my script is executable and i dont want to use cgi, i want only mod_perl</i>&quot;, That statement makes no sense. mod_perl is for programs specifically written for mod_perl. mod_cgi is for programs specifically written for CGI. (You can run CGI programs using mod_perl with the help for ModPerl::Registry, but it won&#39;t work for all CGI programs.) So which do you have?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1576005036, "post_id": 59261785, "comment_id": 104754871, "body": "Or <a href=\"https://superuser.com/\">superuser.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 715, "user_id": 5218508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88149bda385492c0f7ce78727dce639?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Lassche", "link": "https://stackoverflow.com/users/5218508/rob-lassche"}, "is_accepted": false, "score": 1, "last_activity_date": 1576143402, "last_edit_date": 1576143402, "creation_date": 1575993533, "answer_id": 59271131, "question_id": 59261785, "link": "https://stackoverflow.com/questions/59261785/apache-doesnt-execute-perl-scripts/59271131#59271131", "title": "Apache doesn&#39;t execute perl scripts", "body": "<p>If you really want to use mod_perl, and the module is already loaded, then this works for me. I use alias perl-bin for mod_perl scripts.</p>\n\n<ol>\n<li>File /etc/apache2/conf-available</li>\n</ol>\n\n<p>`</p>\n\n<pre><code>PerlModule ModPerl::Registry\nPerlModule Apache::DBI;    \nPerlModule Apache2::compat;\n\nPerlPostConfigRequire /etc/apache2/startup.pl\n\nScriptAlias /perl-bin/ /usr/lib/perl-bin/\n&lt;Directory \"/usr/lib/perl-bin\"&gt;\n       AllowOverride None\n       Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch\n       SetHandler perl-script\n       PerlResponseHandler ModPerl::Registry\n       PerlOptions +ParseHeaders\n       Require ip 127.0.0.1 192.168.0.0/16\n&lt;/Directory&gt;\n</code></pre>\n\n<p>`</p>\n\n<p>Enable the config:\n`</p>\n\n<pre><code>a2enconf perl\n</code></pre>\n\n<p>`</p>\n\n<ol start=\"2\">\n<li><p>File /etc/apache2/startup.pl</p>\n\n<p>1;</p></li>\n<li><p>Test mod_perl with a script in /etc/lib/perl-bin</p></li>\n</ol>\n\n<p>Open the webpage and press F5 several times then the count should increase....</p>\n\n<p>`</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse vars qw($count);\nuse utf8;\n\nmy $mod_perl_in_use = $ENV{MOD_PERL_API_VERSION};\n\nprint \"&lt;h1&gt;Count test &lt;/h1&gt;\";\nprint \"&lt;b&gt;Mod_perl test script&lt;/b&gt;&lt;br&gt;&lt;br&gt;\\n\";\n$count++;\nprint \"The following count will start at 1 and will increment by 1 on each refresh \\n\";\nprint \"(If this was a non-mod_perl script, the counter would always be 1).&lt;br&gt;\\n\";\nprint \"count = $count\\n&lt;br&gt;&lt;br&gt;\";\nprint \"pid = $$\\n&lt;br&gt;&lt;br&gt;\";\n\nif ($ENV{'MOD_PERL'}) {\n    print \"Mod_perl is installed on this server: $ENV{'MOD_PERL'}&lt;br&gt;&lt;br&gt;\\n\";\n} else {\n    print \"Mod_perl is not installed on this server&lt;br&gt;&lt;br&gt;\\n\";\n}\n\nprint \"&lt;b&gt;Environment variables&lt;/b&gt;&lt;br&gt;\\n\";\nforeach my $key (sort keys %ENV)\n{\n    print \"\\\"$key\\\" = \\\"$ENV{$key}\\\"&lt;BR&gt;\\n\";\n}\n</code></pre>\n\n<p>`</p>\n"}], "owner": {"reputation": 3, "user_id": 7377871, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CRWZrfwkk4c/AAAAAAAAAAI/AAAAAAAAAN8/WRUh3m26FW0/photo.jpg?sz=128", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/7377871/kaiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576143402, "creation_date": 1575961026, "last_edit_date": 1575964686, "question_id": 59261785, "link": "https://stackoverflow.com/questions/59261785/apache-doesnt-execute-perl-scripts", "title": "Apache doesn&#39;t execute perl scripts", "body": "<p>I'm using Mac Os High Sierra 10.13.06. I followed this guide <a href=\"https://discussions.apple.com/docs/DOC-12034\" rel=\"nofollow noreferrer\">https://discussions.apple.com/docs/DOC-12034</a>, but couldn't make my perl script work. The browser just offers to download it. I also tried loading mod_cgi, but that didn't help.</p>\n\n<pre><code>sudo apachectl -M\n</code></pre>\n\n<p>shows that perl_module and cgi_module are loaded.\nHere is the error_log file:</p>\n\n<pre><code>[Tue Dec 10 11:02:01.586530 2019] [mpm_prefork:notice] [pid 77] AH00169: caught SIGTERM, shutting down\nAH00558: httpd: Could not reliably determine the server's fully qualified domain name, using MacBook-Air-Nikita.local. Set the 'ServerName' directive globally to suppress this message\n[Tue Dec 10 11:02:01.912225 2019] [mpm_prefork:notice] [pid 504] AH00163: Apache/2.4.33 (Unix) PHP/7.1.16 mod_perl/2.0.9 Perl/v5.18.2 configured -- resuming normal operations\n[Tue Dec 10 11:02:01.912331 2019] [core:notice] [pid 504] AH00094: Command line: '/usr/sbin/httpd -D FOREGROUND'\n</code></pre>\n\n<p>it is my config file in /etc/apache2/users</p>\n\n<pre><code>&lt;Directory \"/Users/nikitakirenkov/Sites/\"&gt;\n        AddLanguage en .en\n        AddHandler perl-script .pl\n        PerlHandler ModPerl::Registry\n        Options Indexes MultiViews FollowSymLinks ExecCGI\n        AllowOverride None\n        Require host localhost\n&lt;/Directory&gt;\n</code></pre>\n\n<p>php scripts work well</p>\n"}, {"tags": ["arrays", "perl", "email", "email-attachments", "mime"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575944129, "post_id": 59259125, "comment_id": 104727538, "body": "Tip: Using <code>\\@parts</code> instead of <code>[@parts]</code> avoids a needless copy"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1575946805, "post_id": 59259125, "comment_id": 104728020, "body": "I don&#39;t see what you do with the return of the final create; could that be the problem?  Other than that, it looks ok.  Can you come up with a short runnable script that demonstrates your problem?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1575996801, "post_id": 59259125, "comment_id": 104751235, "body": "This is much simpler with <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a>."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1575955136, "creation_date": 1575955136, "answer_id": 59260687, "question_id": 59259125, "link": "https://stackoverflow.com/questions/59259125/send-multiple-files-using-email-mime-in-perl/59260687#59260687", "title": "Send multiple files using Email :: MIME in perl?", "body": "<p>You can attach multiple files like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Email::MIME;\nmy @parts;\npush @parts, Email::MIME-&gt;create(\n    attributes =&gt; {\n        content_type =&gt; 'application/octet-stream',\n        disposition =&gt; 'attachment',\n        encoding =&gt; 'base64',\n        name =&gt; 'foobar.bin',\n    },\n    body =&gt; \"\\1\\2\\3\\4\\5\\6\\7\",\n);\npush @parts, Email::MIME-&gt;create(\n    attributes =&gt; {\n        content_type =&gt; 'text/html',\n        disposition =&gt; 'attachment',\n        encoding =&gt; 'quoted-printable',\n        charset =&gt; 'UTF-8',\n        name =&gt; 'foobar.html',\n    },\n    body_str =&gt; \"&lt;!DOCTYPE html&gt;&lt;title&gt;foo bar&lt;/title&gt;&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;\",\n);\nmy $message = Email::MIME-&gt;create(\n    header_str =&gt; [\n        To =&gt; 'you@example.com',\n        From =&gt; 'me@example.com',\n        Subject =&gt; 'foo bar',\n    ],\n    parts =&gt; \\@parts,\n);\nprint $message-&gt;as_string;\n</code></pre>\n\n<p>This produces the following message:</p>\n\n<pre><code>To: you@example.com\nFrom: me@example.com\nSubject: foo bar\nDate: Mon, 9 Dec 2019 21:16:43 -0800\nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Type: multipart/mixed; boundary=\"15759550030.CE8DFF428.4203\"\n\n\n--15759550030.CE8DFF428.4203\nDate: Mon, 9 Dec 2019 21:16:43 -0800\nMIME-Version: 1.0\nContent-Type: application/octet-stream; name=\"foobar.bin\"\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment\n\nAQIDBAUGBw==\n\n--15759550030.CE8DFF428.4203\nDate: Mon, 9 Dec 2019 21:16:43 -0800\nMIME-Version: 1.0\nContent-Type: text/html; charset=\"UTF-8\"; name=\"foobar.html\"\nContent-Disposition: attachment\nContent-Transfer-Encoding: quoted-printable\n\n&lt;!DOCTYPE html&gt;&lt;title&gt;foo bar&lt;/title&gt;&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;=\n\n--15759550030.CE8DFF428.4203--\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12452198, "user_type": "registered", "profile_image": "https://graph.facebook.com/2689152861140223/picture?type=large", "display_name": "Mitico Mancipe", "link": "https://stackoverflow.com/users/12452198/mitico-mancipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575955136, "creation_date": 1575942856, "question_id": 59259125, "link": "https://stackoverflow.com/questions/59259125/send-multiple-files-using-email-mime-in-perl", "title": "Send multiple files using Email :: MIME in perl?", "body": "<p>I have a script to send emails with an embedded image and an html body, but when I try to send additional files, they are overwritten, this is my perl code</p>\n\n<pre><code>push @parts,\n    Email::MIME-&gt;create(\n         attributes =&gt; {\n             content_type =&gt; $CtypeB,\n             encoding     =&gt; $EncodingB,\n             charset      =&gt; $CharsetB,\n             },\n         body =&gt; $BodyB,\n        ),\n    ;\n\n  push @parts,\n  Email::MIME-&gt;create(\n        header_str=&gt; [\n            'Content-ID' =&gt; $Content_ID,\n            ],\n        attributes =&gt; {\n            content_type =&gt; $CtypeF,\n            encoding     =&gt; $EncodingF,\n            'Content-Disposition' =&gt; $ContentD,\n            filename=&gt; $FilenameF,\n            file =&gt; $FileF,\n            },\n        body =&gt; io($BodyF)-&gt;binary-&gt;all,\n      );\n\n    Email::MIME-&gt;create(\n        header_str =&gt; [\n            To =&gt; $Para,\n            From =&gt; $De,\n            Subject =&gt; $Asunto,\n            Cc =&gt; $Cc,\n            Bcc =&gt; $Bcc\n            ],\n        attributes =&gt; {\n             content_type =&gt;$CtypeH\n        },\n        parts =&gt; [@parts]\n    ), \n</code></pre>\n\n<p>I assumed that being the elements of Email :: MIME created in arrangements these would be accommodated using push, however when I send the mail by adding several files, it is overwritten, that is, it sends the last attached file, any ideas or suggestions on what am I doing wrong ?, thanks.</p>\n"}, {"tags": ["perl", "search"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 5, "creation_date": 1575918485, "post_id": 59254963, "comment_id": 104719840, "body": "Put the &quot;database&quot; into a database for faster search results. SQLite is a file-based DB if you don&#39;t need or want to manage a full-blown database system (such as MySQL)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1575918521, "post_id": 59254963, "comment_id": 104719847, "body": "Why don&#39;t you search for <code>Name=$searchName</code> directly?"}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1575920054, "post_id": 59254963, "comment_id": 104720426, "body": "Because I want a non case-sensitive search. I could do uc($value) = uc($searchName) but a benchmark I did showed a regex was faster."}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1575920155, "post_id": 59254963, "comment_id": 104720464, "body": "@stevieb: I had considered an SQLite database but ran into a few problems. Mainly that SQLite does not support (sequential) recordnumbers."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1575926090, "post_id": 59254963, "comment_id": 104722833, "body": "How many different field names are there in <code>file.dat</code> ? Maybe split <code>file.dat</code> up into multiple files, one for each field name?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1575928176, "post_id": 59254963, "comment_id": 104723729, "body": "Make your &quot;database&quot; more database-y: create an index, for each commonly sought field"}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1575931253, "post_id": 59254963, "comment_id": 104724725, "body": "Yes, already done that and it works wonders on exact searches but each record holds 70+ fields and I need to be able to search any field so making 70+ indices isn&#39;t very practical..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1575933132, "post_id": 59254963, "comment_id": 104725172, "body": "Case-insensitive searches are expensive because two strings of different length can match. /// And you should use <code>fc</code> rather than <code>uc</code>,"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1575934386, "post_id": 59257593, "comment_id": 104725463, "body": "The foreach loop through the results of the readline operator already reads the file into memory, of course there are more efficient ways to do so but they won&#39;t be split into lines already."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1575934568, "post_id": 59257593, "comment_id": 104725526, "body": "Right. I meant to avoid splitting into lines."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1575930548, "creation_date": 1575930548, "answer_id": 59257593, "question_id": 59254963, "link": "https://stackoverflow.com/questions/59254963/perl-in-search-of-faster-search-through-file/59257593#59257593", "title": "Perl: In search of faster search (through file)", "body": "<p>No need to perform two regex match per line.</p>\n\n<pre><code>if ($rec =~ /(?:^|\\Q|^|\\E)Name=(?i:\\Q$searchName\\E)(?:\\Q|^|\\E|$)/) \n</code></pre>\n\n<p>This also avoids capturing.</p>\n\n<hr>\n\n<p>You might benefit from compiling the constant regex outside of the loop.</p>\n\n<pre><code>my $re = qr/(?:^|\\Q|^|\\E)Name=(?i:\\Q$searchName\\E)(?:\\Q|^|\\E|$)/;\n\nif ($rec =~ $re)\n</code></pre>\n\n<hr>\n\n<p>You might benefit from loading the entire file into memory.</p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575947373, "creation_date": 1575947373, "answer_id": 59259638, "question_id": 59254963, "link": "https://stackoverflow.com/questions/59254963/perl-in-search-of-faster-search-through-file/59259638#59259638", "title": "Perl: In search of faster search (through file)", "body": "<p>Well may be following code will fit your 'bill'</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nmy $filename = 'db.dat';\nmy $name    = 'John';\nmy $search  = qr/Name=($name)/;\nmy $record;\n\nopen DB, \"&lt; $filename\"\n        or die \"Couldn't open $filename\";\n\nmap { $record = $_ if /$search/ } &lt;DB&gt;;\n\nsay \"Record: $record\"   if defined $record;\nsay \"Found:  $1\"        if $record =~ /$search/;\n</code></pre>\n\n<p>Data sample db.dat</p>\n\n<pre><code>some=field|^|Name=Alex|^|Last=Starsky\nsome=other|^|Name=Stas|^|Last=Venichevsky\nsome=target|^|Name=John|^|Last=Smith\nsome=waste|^|Name=Bill|^|Last=Gates\nsome=wheels|^|Name=William|^|Last=Ford\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Record: some=target|^|Name=John|^|Last=Smith\n\nFound:  John\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575948353, "creation_date": 1575948353, "answer_id": 59259750, "question_id": 59254963, "link": "https://stackoverflow.com/questions/59254963/perl-in-search-of-faster-search-through-file/59259750#59259750", "title": "Perl: In search of faster search (through file)", "body": "<p>An alternative version with subroutine</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nmy $filename = 'db.dat';\nmy $name    = 'John';\nmy $search  = qr/Name=($name)/;\nmy $record;\n\nopen DB, \"&lt; $filename\"\n        or die \"Couldn't open $filename\";\n\nmap { found($_) if /$search/ } &lt;DB&gt;;\n\nsub found {\n    my $record = shift;\n\n    chomp $record;\n\n    say \"Record: $record\";\n    say \"Found:  $1\\n\"      if $record =~ /$search/;\n}\n</code></pre>\n\n<p>Data sample db.dat</p>\n\n<pre><code>some=field|^|Name=Alex|^|Last=Starsky\nsome=other|^|Name=Stas|^|Last=Venichevsky\nsome=target|^|Name=John|^|Last=Smith\nsome=waste|^|Name=Bill|^|Last=Gates\nsome=wheels|^|Name=William|^|Last=Ford\nsome=star|^|Name=John|^|Last=Incognito\nsome=magic|^|Name=David|^|Last=Copperfield\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Record: some=target|^|Name=John|^|Last=Smith\nFound:  John\n\nRecord: some=star|^|Name=John|^|Last=Incognito\nFound:  John\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 262929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r8kGV.jpg?s=128&g=1", "display_name": "Eduardo Ver&#237;ssimo", "link": "https://stackoverflow.com/users/262929/eduardo-ver%c3%adssimo"}, "is_accepted": false, "score": 1, "last_activity_date": 1576004041, "creation_date": 1576004041, "answer_id": 59273676, "question_id": 59254963, "link": "https://stackoverflow.com/questions/59254963/perl-in-search-of-faster-search-through-file/59273676#59273676", "title": "Perl: In search of faster search (through file)", "body": "<p>You can normalize the data in a second file so the searches are faster. If you are brave enough, you can use trigrams, saving only the first 3 letters and creating an inverted index. You can do it with all the data in the lines, for example:</p>\n\n<pre><code>abc joh mar ant\n</code></pre>\n\n<p>After finding that lines that match in the inverted index, you test the results.\nFor large mass of data, this can be very fast. I did something like that to find plagiarism in millions of texts, and it was lightening fast.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12544545, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/cdf6c357dded51f61445c6434c90e1f0?s=128&d=identicon&r=PG", "display_name": "Hermann M&#252;ller", "link": "https://stackoverflow.com/users/12544545/hermann-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1576488152, "creation_date": 1576488152, "answer_id": 59353660, "question_id": 59254963, "link": "https://stackoverflow.com/questions/59254963/perl-in-search-of-faster-search-through-file/59353660#59353660", "title": "Perl: In search of faster search (through file)", "body": "<p>Loading the file into memory, using the right regex are steps in the right direction, using parallel processing ( -> <a href=\"https://metacpan.org/pod/distribution/MCE/lib/MCE.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/MCE/lib/MCE.pod</a> ) is another. You may want to have a look at this perl5 implementation: <a href=\"https://github.com/leendo/hello-world\" rel=\"nofollow noreferrer\">https://github.com/leendo/hello-world</a> .</p>\n\n<p>It seems to do everything you want.</p>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1576488152, "creation_date": 1575917549, "last_edit_date": 1575931755, "question_id": 59254963, "link": "https://stackoverflow.com/questions/59254963/perl-in-search-of-faster-search-through-file", "title": "Perl: In search of faster search (through file)", "body": "<p>Ok, this is not really a problem I need solved but I'm hoping to use the collective brainpower of stackoverflow to see if there's a faster way of doing what I'm already successfully doing. :)</p>\n\n<p>Here's the thing. I have a text file that actually serves as a database (of sorts). Each line in the file contains name/value pairs which are delimited by \"|^|\":</p>\n\n<pre><code>field1=value1|^|field2=value2|^|field3=value3|^|field4=value4\n</code></pre>\n\n<p>There are tens of thousands of lines. Searching through the \"database\" is sequential:</p>\n\n<pre><code>open( DB, \"&lt;file.dat\" ) || die( \"Can't open file.dat\\n\" );\n\n# Searching for \"John\" in field \"Name\"\nmy $searchName = \"John\"\nforeach my $rec ( &lt;DB&gt; ) {\n  my $value = ($rec =~ /(?:^|\\Q|^|\\E)Name=(.*?)(?:\\Q|^|\\E|$)/)[0];\n  if( $value =~ /^$searchName$/i ) {\n    # Found it!\n    last;\n  }\n}\n</code></pre>\n\n<p>Is this in fact the fastest way to search? Or are there other tricks I'm unaware of?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Just wanted to add the following observation which surprises me tremendously. When I do this:</p>\n\n<pre><code>my $searchName = \"John\";\nforeach my $rec ( &lt;DB&gt; ) {\n  if( $rec =~ /(?:^|\\Q|^|\\E)Name=$searchName(?:\\Q|^|\\E|$)/ ) {\n    # Found it!\n    last;\n  }\n}\n</code></pre>\n\n<p>This is actually pretty darn fast (it takes about 0.1 seconds on a 45,000 record database.</p>\n\n<p>But when I do this:</p>\n\n<pre><code>my $searchName = \"John\";\nforeach my $rec ( &lt;DB&gt; ) {\n  if( $rec =~ /(?:^|\\Q|^|\\E)Name=$searchName(?:\\Q|^|\\E|$)/i ) {\n    # Found it!\n    last;\n  }\n}\n</code></pre>\n\n<p>The only difference being the \"i\" for non case sensitivity in the RegEx, it now all of a sudden takes 20 seconds! That's 200 times slower!</p>\n"}, {"tags": ["perl", "directory", "chdir"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 5, "creation_date": 1575912954, "post_id": 59253881, "comment_id": 104717546, "body": "What happens when you try it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1575914243, "post_id": 59253881, "comment_id": 104718106, "body": "you can check your &quot;current working directory&quot; using <code>cwd</code> from <a href=\"https://perldoc.perl.org/Cwd.html\" rel=\"nofollow noreferrer\">Cwd</a> module"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1575951859, "post_id": 59253881, "comment_id": 104729173, "body": "If you actually tried that and it didn&#39;t work, I bet you have a newline at the end of one of your variables."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1575970390, "post_id": 59253881, "comment_id": 104736200, "body": "Please show us more of your code. How are you testing that the <code>chdir</code> is successful?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1575970427, "post_id": 59253881, "comment_id": 104736219, "body": "Are you aware that a process cannot change the directory of its parent process?"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 4, "last_activity_date": 1575932512, "last_edit_date": 1575932512, "creation_date": 1575931130, "answer_id": 59257686, "question_id": 59253881, "link": "https://stackoverflow.com/questions/59253881/chdir-in-perl-using-two-strings-chdir-home-dir1-dir2/59257686#59257686", "title": "chdir in perl using two strings: chdir &quot;/home/$dir1/$dir2&quot;", "body": "<p>Typically I write that as:</p>\n\n<pre><code>use v5.10;\nuse File::Spec::Functions;\n\nmy $dir = catfile( '/home', $dir1, $dir2 );\ndie \"Dir &lt;$dir&gt; isn't a directory or doesn't exist\" unless -e -d $dir;\nchdir $dir or die \"Could not change to &lt;$dir&gt;: $!\";\n</code></pre>\n\n<p>Whenever you do something with the system, check the results to ensure it happened.</p>\n\n<p>And, curiously, I didn't realize that Pearson's sample chapter of my book <a href=\"https://www.effectiveperlprogramming.com\" rel=\"nofollow noreferrer\">Effective Perl Programming</a> is <a href=\"http://www.informit.com/articles/article.aspx?p=1582932\" rel=\"nofollow noreferrer\">the one that covers stacked file test operators</a>.</p>\n"}], "owner": {"reputation": 59, "user_id": 12401841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbcce32d293e478b08a712d3f19f674?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/12401841/techie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 59257686, "answer_count": 1, "score": 2, "last_activity_date": 1575997986, "creation_date": 1575912738, "last_edit_date": 1575997986, "question_id": 59253881, "link": "https://stackoverflow.com/questions/59253881/chdir-in-perl-using-two-strings-chdir-home-dir1-dir2", "title": "chdir in perl using two strings: chdir &quot;/home/$dir1/$dir2&quot;", "body": "<p>I have two strings: <code>$dir1</code> and <code>$dir2</code>. I want to use <code>chdir</code> as shown below:</p>\n\n<pre><code>chdir \"/home/$dir1/$dir2\";\n</code></pre>\n\n<p>when I try this it doesn't change the directory. I checked the current working directory same as before</p>\n\n<p>Is there any way to do this?</p>\n"}, {"tags": ["perl", "moose", "catalyst"], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1575924975, "post_id": 59255795, "comment_id": 104722343, "body": "Thanks. Can you clarify how that would be used by the Utilities library? (I guess the same thing would apply to making the logging class available to a regular Model class within Catalyst, perhaps a more common need.)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1575969661, "post_id": 59255795, "comment_id": 104735795, "body": "@user1235777 it sounds like some of these shouldn&#39;t be in a utility package, but rather composed into the Catalyst application itself, or done via roles like daxim suggested for the log method. You <i>could</i> pass around the thing that is calling the utility function (like <code>clean_input($self, $data)</code> or <code>$self-&gt;Utilities::clean_input($data)</code>, actually). But I don&#39;t like that much. It&#39;s confusing. Why does each controller have a different log config?"}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1575993693, "post_id": 59255795, "comment_id": 104749446, "body": "@simbabque First of all, I wasn&#39;t clear how I would use the roles in the utility package; that&#39;s what I was asking for an explanation of. Second, each controller is responsible for a different part of the app, so each one needs to log to a different file."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1575995517, "post_id": 59255795, "comment_id": 104750563, "body": "@user You don&#39;t use the role in the utility at all. You use it in the Controller. That composes that behaviour into that Controller class. It can then log. The logging should really be done by the Controller, not the Utility thingy. Are you using something like Log4perl?"}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1575996076, "post_id": 59255795, "comment_id": 104750847, "body": "Log::Dispatch. In any case, the Controller is indeed doing the logging, and while I agree that roles are probably a better way of doing it than putting it in the stash, that&#39;s not the real issue here.... For the most part we don&#39;t need to log from Utility, but sometimes we&#39;d like to, esp. for debugging purposes, and it would be nice to just have access to the existing log object instead of manually adding it into the Utility code."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1575921733, "creation_date": 1575921733, "answer_id": 59255795, "question_id": 59251459, "link": "https://stackoverflow.com/questions/59251459/catalyst-moose-make-log-object-always-available-to-outside-module/59255795#59255795", "title": "Catalyst/Moose: make log object always available to outside module", "body": "<p>Don't put it on the stash. Split the utilities library. Employ <a href=\"http://p3rl.org/Moose::Manual::Roles\" rel=\"nofollow noreferrer\">roles</a> where you need shared functionality.</p>\n\n<pre><code>package Loggable {\n    use Moose::Role;\n    sub log {\n        ... # implementation goes here\n    }\n}\n\npackage SomeController {\n    use Moose;\n    with 'Loggable';\n\n    ...\n}\n\nmy $c = SomeController-&gt;new;\n$c-&gt;can('log') # true\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575921733, "creation_date": 1575903564, "question_id": 59251459, "link": "https://stackoverflow.com/questions/59251459/catalyst-moose-make-log-object-always-available-to-outside-module", "title": "Catalyst/Moose: make log object always available to outside module", "body": "<p>I have a large Catalyst application, which has its own logging system (apart from the built-in Catalyst log); a set-up routine makes the log object available in the stash as <code>$c-&gt;stash-&gt;{log}</code>. (Different controllers have different log objects, with outputs going to different places.)</p>\n\n<p>This app has a large Utilities package, with many dozens of generally small functions that take care of a variety of tasks (along the lines of <code>get_name_from_id</code> or <code>cleanse_input</code> or <code>convert_date</code>). This package is dedicated to this Catalyst app alone, i.e. it's not shared by any outside application.</p>\n\n<p>Is there a way I can make the log object available to the entire Utilities package, without having to pass it manually every time? I assume there's some neat Moose way of doing this, but my Moose-fu is poor....</p>\n"}, {"tags": ["perl", "matrix"], "comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1575919944, "post_id": 59250566, "comment_id": 104720392, "body": "If you are having problem with the math aspect of the problem, we are not responsible for that. Please refer to <a href=\"https://math.stackexchange.com/\">math.stackexchange.com</a>. For learning Perl, I recommend <i>Learning Perl, 6th Edition</i>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1575923725, "post_id": 59250566, "comment_id": 104721836, "body": "You need to figure out the algorithms. Take paper and pencil. Write down a few small example matrices. Manually calculate the average of each column. Pay attention to the part of the work that repeats. Write down in English a description of the part that repeats, as if you want to explain it to a colleague. Now tell the computer, using Perl. -- Do the same for the other three tasks."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1575931991, "creation_date": 1575931991, "answer_id": 59257825, "question_id": 59250566, "link": "https://stackoverflow.com/questions/59250566/how-can-i-operate-with-the-matrix-without-using-the-matrix-library-in-perl/59257825#59257825", "title": "How can I operate with the matrix without using the matrix library in Perl?", "body": "<p>Here is an example of how to transpose the matrix:</p>\n\n<pre><code>my @MatrixA = ([1,2,3], [4, 5, 6]);\nmy @MatrixA_T = transpose(@MatrixA);\n\nsub transpose {\n    my (@M) = @_;\n\n    my @MT;\n    for my $i (0..$#M) {\n        for my $j (0..$#{$M[0]}) {\n            $MT[$j][$i] = $M[$i][$j];\n        }\n    }\n    return @MT;\n}\n</code></pre>\n\n<p>Note that matrix operations are already implemented if you use the <a href=\"https://metacpan.org/pod/PDL\" rel=\"nofollow noreferrer\">PDL</a> module.</p>\n"}], "owner": {"reputation": 19, "user_id": 12505394, "user_type": "registered", "profile_image": "https://graph.facebook.com/2578769825545666/picture?type=large", "display_name": "\u041f\u0430\u0432\u0435\u043b \u041a\u043e\u0441\u0442\u0430\u0440\u0435\u0432", "link": "https://stackoverflow.com/users/12505394/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%9a%d0%be%d1%81%d1%82%d0%b0%d1%80%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1575945122, "creation_date": 1575900401, "question_id": 59250566, "link": "https://stackoverflow.com/questions/59250566/how-can-i-operate-with-the-matrix-without-using-the-matrix-library-in-perl", "title": "How can I operate with the matrix without using the matrix library in Perl?", "body": "<p>I need to write a matrix in Perl without using the library for it. \nHow could I implement the operations below in my code?\n- transpose the matrix\n- calculate the average of each row and column, (I tried to make it in the script below)\n- find the smallest value in the whole matrix,\n- find the index of the row with the smallest sum of values.</p>\n\n<p>I use this code for matrix operating, it works, but I completely do not understand how to perform these operations. Thank you in advance</p>\n\n<pre><code>#!usr/bin/perl \nuse strict; \nuse warnings; \n\n\n\nmy(@MatrixA, @MatrixB, @Resultant) = ((), (), ()); \n\n# Asking for User Input for Matrix A \nprint\"Let's begin with the matrix A dimensions\\n\"; \nprint\"\\tPlease, enter how many rows should Matrix A have:\"; \nchomp(my$rowA= &lt;&gt;);  # CHOMP TO TAKE USER INPUT \nprint\"\\tPlease, enter how many columns should Matrix A have:\"; \nchomp(my$columnA= &lt;&gt;); \n\n# Asking for User Input for Matrix B \nprint\"Then we have matrix B:\\n\"; \nprint\"\\tPlease, enter how many rows should Matrix B have:\"; \nchomp(my$rowB= &lt;&gt;); \nprint\"\\tPlease, enter how many columns should Matrix B have:\"; \nchomp(my$columnB= &lt;&gt;); \n\n# Asking User to input elements of matrices \nif($rowA== $rowB and $columnA== $columnB) #checking the dimensions whether they match\n{ \n    print\"Enter $rowA * $columnA elements in MatrixA:\\n\";  \n    foreach my $m(0..$rowA- 1) \n    { \n        foreach my $n(0..$columnA- 1) \n        { \n            chomp($MatrixA[$m][$n] = &lt;&gt;);  # reading the values\n        } \n    } \n\n    print\"Enter $rowB * $columnB elements in MatrixB:\\n\";  \n    foreach my$m(0..$rowB- 1) \n    { \n        foreach my $n(0..$columnB- 1) \n        { \n            chomp($MatrixB[$m][$n] = &lt;&gt;);  # reading the values \n        } \n    } \n\n    # Performing Addition operation \n    foreach my $m(0..$rowB- 1) \n    { \n        foreach my $n(0..$columnB- 1) \n        { \n            $Resultant[$m][$n] = $MatrixA[$m][$n] +  \n                                 $MatrixB[$m][$n]; \n        } \n    } \n\n    # Printing Matrix A \n    print\"MatrixA is :\\n\";  \n    foreach my $m(0..$rowB- 1) \n    { \n        foreach my $n(0..$columnB- 1) \n        { \n            print\"$MatrixA[$m][$n] \"; \n        } \n        print\"\\n\"; \n    } \n\n    # Printing Matrix B \n    print\"MatrixB is :\\n\";  \n    foreach my$m(0..$rowB- 1) \n    { \n        foreach my$n(0..$columnB- 1) \n        { \n            print\"$MatrixB[$m][$n] \"; \n        } \n        print\"\\n\"; \n    } \n\n    # Printing the sum of Matrices \n    print\"SUM of MatrixA and MatrixB is :\\n\";  \n    foreach my $m(0..$rowB- 1) \n    { \n        foreach my $n(0..$columnB- 1) \n        { \n            print\"$Resultant[$m][$n] \"; \n        } \n        print\"\\n\"; \n    } \n\n    # Printing the average of Matrices \n    print\"The average of Matrices (row) :\\n\";  \n    foreach my $m(0..$rowB- 1) \n    { \n        my $sum_r += $m;\n        my $average_r = $sum_r/$rowB;\n        print \"Average is $average_r\\n\";\n            print\"\\n\";        \n    }\n    print\"The average of Matrices (column) :\\n\";\n    foreach my $n(0..$columnB- 1) \n          { \n        my $sum_c += $n;\n        my $average_c = $sum_c/$columnB;\n        print \"Average is $average_c\\n\";\n            print\"\\n\";\n          }     \n} \n\n# Error if Matrices are of different order \nelse\n{ \n    print\"Matrices order does not MATCH, Addition is not Possible\"; \n} \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1575903680, "post_id": 59250016, "comment_id": 104712751, "body": "See also <a href=\"https://stackoverflow.com/q/54842607/2173773\">Can I call a superclass sort with a subclass compare in perl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1575909266, "post_id": 59250588, "comment_id": 104715889, "body": "It works. Thanks. Pretty surprised I couldn&#39;t find this on the first page of Google or Stack Overflow results. I was all out of sorts."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1575911416, "post_id": 59250588, "comment_id": 104716868, "body": "@felwithe: For some reason, good Perl advice often doesn&#39;t rank well on Google. But you can always go directly to the <a href=\"https://perldoc.perl.org/\" rel=\"nofollow noreferrer\">official documentation site</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1575900475, "creation_date": 1575900475, "answer_id": 59250588, "question_id": 59250016, "link": "https://stackoverflow.com/questions/59250016/perl-sort-wont-use-function-from-another-package/59250588#59250588", "title": "Perl sort won&#39;t use function from another package", "body": "<p>What evidence do you have for it not working? Have you put a <code>print()</code> statement in the subroutine to see if it's being called?</p>\n\n<p>I suspect you're being tripped up by this (from <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"noreferrer\"><code>perldoc -f sort</code></a>):</p>\n\n<blockquote>\n  <p><code>$a</code> and <code>$b</code> are set as package globals in the package the sort() is called from. That means <code>$main::a</code> and <code>$main::b</code> (or <code>$::a</code> and <code>$::b</code> ) in the <code>main</code> package, <code>$FooPack::a</code> and <code>$FooPack::b</code> in the <code>FooPack</code> package, etc.</p>\n</blockquote>\n\n<p>Oh, and later on it's more specific:</p>\n\n<blockquote>\n  <p>Sort subroutines written using <code>$a</code> and <code>$b</code> are bound to their calling package. It is possible, but of limited interest, to define them in a different package, since the subroutine must still refer to the calling package's <code>$a</code> and <code>$b</code>:</p>\n\n<pre><code>package Foo;\nsub lexi { $Bar::a cmp $Bar::b }\npackage Bar;\n... sort Foo::lexi ...\n</code></pre>\n  \n  <p>Use the prototyped versions (see above) for a more generic alternative.</p>\n</blockquote>\n\n<p>The \"prototyped versions\" are described above like this:</p>\n\n<blockquote>\n  <p>If the subroutine's prototype is <code>($$)</code> , the elements to be compared are passed by reference in <code>@_</code>, as for a normal subroutine. This is slower than unprototyped subroutines, where the elements to be compared are passed into the subroutine as the package global variables <code>$a</code> and <code>$b</code> (see example below).</p>\n</blockquote>\n\n<p>So you could try rewriting your subroutine like this:</p>\n\n<pre><code>package Utils;\n\nsub isort ($$) {\n  my ($a, $b) = @_;\n\n  # existing code...\n}\n</code></pre>\n\n<p>And then calling it using one of your last two alternatives.</p>\n"}], "owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 59250588, "answer_count": 1, "score": 6, "last_activity_date": 1576090347, "creation_date": 1575898421, "last_edit_date": 1576090347, "question_id": 59250016, "link": "https://stackoverflow.com/questions/59250016/perl-sort-wont-use-function-from-another-package", "title": "Perl sort won&#39;t use function from another package", "body": "<p>I have a function for case insensitive sorting. It works if it's from the same package, but not otherwise.</p>\n\n<p>This works: </p>\n\n<pre><code>my @arr = sort {lc $a cmp lc $b} @list;\n</code></pre>\n\n<p>This works (if a function called \"isort\" is defined in the same file):</p>\n\n<pre><code>my @arr = sort isort @list;\n</code></pre>\n\n<p>This does not (function exported with Exporter from another package):</p>\n\n<pre><code>my @arr = sort isort @list;\n</code></pre>\n\n<p>This does not (function referred to explicitly by package name):</p>\n\n<pre><code>my @arr = sort Utils::isort @list;\n</code></pre>\n\n<p>What is going on? How do I put a sorting function in another package?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 1, "creation_date": 1575942975, "post_id": 59249947, "comment_id": 104727307, "body": "Well, it is not clear why you have chosen such <b>regex</b>? What information do you try to <i>extract</i> from config file?"}], "answers": [{"tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": true, "score": 2, "last_activity_date": 1575899172, "creation_date": 1575899172, "answer_id": 59250220, "question_id": 59249947, "link": "https://stackoverflow.com/questions/59249947/bash-perl-regex-regex-wont-work-with-a-single-line-but-works-with-full-file/59250220#59250220", "title": "Bash/Perl/Regex - regex wont work with a single line but works with full file", "body": "<p>That's because <code>example.config</code> contains spaces within the lines, so the perl script sees just the first word from each line in <code>$ARGV[0]</code>.</p>\n\n<p>This should fix it:</p>\n\n<pre><code>use strict;\nmy $str = join(\" \", @ARGV); #THIS\nmy $regex = qr/(^\\S*) = (\\S*)/mp;\nif ( $str =~ /$regex/g ) {\nprint \"$2\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 1, "last_activity_date": 1575899752, "creation_date": 1575899752, "answer_id": 59250382, "question_id": 59249947, "link": "https://stackoverflow.com/questions/59249947/bash-perl-regex-regex-wont-work-with-a-single-line-but-works-with-full-file/59250382#59250382", "title": "Bash/Perl/Regex - regex wont work with a single line but works with full file", "body": "<p>The line below, from you code, reads the first <em>word</em> from the command line and stores it in <code>$str</code>. Your regex expects the complete line</p>\n\n<pre><code>my $str = $ARGV[0];\n</code></pre>\n\n<p>Change the shell script from this</p>\n\n<pre><code>RESULT=$(perl /mnt/c/LINUX_STUFF/regex.pl $line)\n</code></pre>\n\n<p>to this, i.e. quoting the line</p>\n\n<pre><code>RESULT=$(perl /mnt/c/LINUX_STUFF/regex.pl \"$line\")\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9729759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e83139d8e95d586cb113439e814b128?s=128&d=identicon&r=PG", "display_name": "LifeLifeLP", "link": "https://stackoverflow.com/users/9729759/lifelifelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59250220, "answer_count": 2, "score": 1, "last_activity_date": 1575899752, "creation_date": 1575898159, "question_id": 59249947, "link": "https://stackoverflow.com/questions/59249947/bash-perl-regex-regex-wont-work-with-a-single-line-but-works-with-full-file", "title": "Bash/Perl/Regex - regex wont work with a single line but works with full file", "body": "<p>The Goal: Read every line, extract information via regex, return it to the bash script</p>\n\n<p>The Problem: When the whole file is a string in the perl code, it work, however if its given line by line via bash, it wont find anything.</p>\n\n<p>The Bash Side:</p>\n\n<pre><code>while IFS= read -r line\ndo\nRESULT=$(perl /mnt/c/LINUX_STUFF/regex.pl $line)\necho $RESULT\ndone &lt; example.config\n</code></pre>\n\n<p>The Perl Side:</p>\n\n<pre><code>use strict;\nmy $str = $ARGV[0];\nmy $regex = qr/(^\\S*) = (\\S*)/mp;\nif ( $str =~ /$regex/g ) {\nprint \"$2\";\n}\n</code></pre>\n\n<p>The example.config:</p>\n\n<pre><code>[ORACLE]\nORACLE_BASE = /u01/oracle\nORACLE_HOME = $ORACLE_BASE/12.1.0.2\nORACLE_SID = asi1\n[ORACLE]\n[FTP]\nFILE1 = $DUMPFILE.dmp\nFILE2 = $DUMPFILE.dmp.gz\nFILE3 = $DUMPFILE.md5\n[FTP]\n</code></pre>\n\n<p>As you can see here, it should work: <a href=\"https://regex101.com/r/KlCyVE/9\" rel=\"nofollow noreferrer\">https://regex101.com/r/KlCyVE/9</a>\n<a href=\"https://i.stack.imgur.com/skpXd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/skpXd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["regex", "perl", "file-handling"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1575895239, "post_id": 59249101, "comment_id": 104707974, "body": "sample input (fasta file)..? what error you are getting?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1575895715, "post_id": 59249101, "comment_id": 104708226, "body": "Are you sure your files are not empty?"}, {"owner": {"reputation": 11, "user_id": 12346578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSn26.jpg?s=128&g=1", "display_name": "Lakshmi Ram", "link": "https://stackoverflow.com/users/12346578/lakshmi-ram"}, "edited": false, "score": 0, "creation_date": 1575952253, "post_id": 59249101, "comment_id": 104729252, "body": "yeah.. it didnt have, that is the problem...thank you"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1575973777, "post_id": 59249101, "comment_id": 104738115, "body": "I&#39;m voting to close this question as off-topic because it is not a programing problem, the input files are empty as said in comment."}], "answers": [{"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1575896435, "post_id": 59249416, "comment_id": 104708596, "body": "But, why OP&#39;s code doesn&#39;t work? You just use an array instead of print within the loop."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1575898784, "post_id": 59249416, "comment_id": 104709826, "body": "Yeah. I know. That&#39;s why you asked OP to check the input file doesn&#39;t empty. Me too asked input file to check."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1575896278, "creation_date": 1575896278, "answer_id": 59249416, "question_id": 59249101, "link": "https://stackoverflow.com/questions/59249101/i-want-to-access-four-fasta-files-to-print-organism-name-from-header-line/59249416#59249416", "title": "I want to access four FASTA files, to print organism name from header line?", "body": "<p>I am not clear on question anyway I just assume the input. Just try this code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @headerlines = ();\nmy @ar=(\"seq.fasta\",\"sequ.fasta\",\"sequence.fasta\",\"sq.fasta\");\nfor(my $i=0;$i&lt;4;$i++)\n{\n    my $afile=$ar[$i];\n    open(FH,'&lt;',\"$afile\")|| die($!);\n    while(my $line=&lt;FH&gt;)\n    {\n        push(@headerlines, \"$afile--&gt;\".$1) if($line=~ m/.+?\\[(.+?)\\]/);\n    }\n}\n\nprint join \"\\n\", @headerlines;\n</code></pre>\n\n<blockquote>\n  <p>Output:</p>\n</blockquote>\n\n<p><code>Filename --&gt; organism-xxxxxxxxxxx</code></p>\n\n<p><code>seq.fasta--&gt;organism=xxxxxxxxxxxxxxx</code><br>\n<code>sequ.fasta--&gt;organism=xxxxxxxxxxxxxxx</code><br>\n<code>sequence.fasta--&gt;organism=xxxxxxxxxxxxxxx</code><br>\n<code>sq.fasta--&gt;organism=xxxxxxxxxxxxxxx</code>  </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 12346578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSn26.jpg?s=128&g=1", "display_name": "Lakshmi Ram", "link": "https://stackoverflow.com/users/12346578/lakshmi-ram"}, "edited": false, "score": 0, "creation_date": 1575952940, "post_id": 59251616, "comment_id": 104729412, "body": "the files are empty ,that&#39;s whey its didn&#39;t work...sorry for the trouble.."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1575904387, "last_edit_date": 1575904387, "creation_date": 1575904041, "answer_id": 59251616, "question_id": 59249101, "link": "https://stackoverflow.com/questions/59249101/i-want-to-access-four-fasta-files-to-print-organism-name-from-header-line/59251616#59251616", "title": "I want to access four FASTA files, to print organism name from header line?", "body": "<p>Actually your code should work with some warnings. As Toto mentioned in his comment please verify your file has the content. </p>\n\n<p>You can use the condition to skip those warnings; for your code answer should be</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @ar=(\"test1.fasta\",\"test2.fasta\");\n\nfor(my $i=0;$i&lt;=$#ar;$i++)\n{\n    my $afile=$ar[$i];\n    open(FH,'&lt;',\"$afile\")|| die($!);\n    while(my $line=&lt;FH&gt;) \n    {  \n        if($line=~ m/.+?\\[(.+?)\\]/){ #Make a condition to match and print it inside\n\n            print\"$1\\n\";\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Some tips and tricks.</p>\n\n<p>And your are in Perl, you can the use for loop like below,</p>\n\n<pre><code>for my $i(0..$#ar)\n{\n  .. your code\n\n}\n</code></pre>\n\n<p>In your case, you are not using the index anywhere apart from getting the filename. So iterate the loop for an array.. </p>\n\n<pre><code>for my $afile(@ar)\n{\n  #  my $afile=$ar[$i]; # no need of this line\n</code></pre>\n\n<p>We all know fasta header it should present at the first line in the file. you can read the first line using the following code</p>\n\n<pre><code>open(FH,'&lt;',$afile)|| die($!);\nmy $firstLine = scalar &lt;FH&gt;;\n</code></pre>\n\n<p>no need to read the full content from the file. (i.e remove the while loop)</p>\n\n<p>and the final code should be</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @ar=(\"test1.fasta\",\"test2.fasta\");\n\nfor my $afile(@ar)\n{\n    open(FH,'&lt;',$afile)|| die($!);\n    my $line= scalar &lt;FH&gt;;\n    $line=~ m/.+?\\[(.+?)\\]/;\n    print\"$1\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 11, "user_id": 12346578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSn26.jpg?s=128&g=1", "display_name": "Lakshmi Ram", "link": "https://stackoverflow.com/users/12346578/lakshmi-ram"}, "edited": false, "score": 0, "creation_date": 1575963179, "post_id": 59259030, "comment_id": 104732733, "body": "Please include at least some snippet from your fasta file with your query. Otherwise we try to solve the issue in blind as we unaware what you have in data files."}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575942072, "creation_date": 1575942072, "answer_id": 59259030, "question_id": 59249101, "link": "https://stackoverflow.com/questions/59249101/i-want-to-access-four-fasta-files-to-print-organism-name-from-header-line/59259030#59259030", "title": "I want to access four FASTA files, to print organism name from header line?", "body": "<p>Verify your input files for regex pattern, otherwise it should work. I took some liberty to alter your code to following form</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse feature 'say';\n\nmy @files = qw(seq_1.fasta seq_2.fasta seq_3.fasta seq_4.fasta);\n\nforeach my $file (@files)\n{\n    open FH, \"&lt; $file\"\n        or die \"Couldn't open $file\";\n\n    map { say $1 if /.+?\\[(.+?)\\]/ } &lt;FH&gt;;\n\n    close FH;\n}\n</code></pre>\n\n<p>As no input file sample was provided I used following sample for the test</p>\n\n<p>seq_1.fasta</p>\n\n<pre><code>somedata nothing special here\nsomething [sequence_1] something else\nwell some other data here\n</code></pre>\n\n<p>seq_2.fasta</p>\n\n<pre><code>somedata nothing special here\nsomething [sequence_2] something else\nwell some other data here\n</code></pre>\n\n<p>seq_3.fasta</p>\n\n<pre><code>somedata nothing special here\nsomething [sequence_3] something else\nwell some other data here\n</code></pre>\n\n<p>seq_4.fasta</p>\n\n<pre><code>somedata nothing special here\nsomething [sequence_4] something else\nwell some other data here\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12346578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSn26.jpg?s=128&g=1", "display_name": "Lakshmi Ram", "link": "https://stackoverflow.com/users/12346578/lakshmi-ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1575942072, "creation_date": 1575895118, "question_id": 59249101, "link": "https://stackoverflow.com/questions/59249101/i-want-to-access-four-fasta-files-to-print-organism-name-from-header-line", "title": "I want to access four FASTA files, to print organism name from header line?", "body": "<p>I tried it but it doesnt show any errors or warnings and output too??I need to print organism name from header line or first line of these FASTA files..   </p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @ar=(\"seq.fasta\",\"sequ.fasta\",\"sequence.fasta\",\"sq.fasta\");\nfor(my $i=0;$i&lt;4;$i++)\n{\n   my $afile=$ar[$i];\n   open(FH,'&lt;',\"$afile\")|| die($!);\n\nwhile(my $line=&lt;FH&gt;)\n{  \n    print\"$line\\n\";\n    $line=~ m/.+?\\[(.+?)\\]/g;\n    print\"$1\\n\";\n}\n}\n</code></pre>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575869807, "post_id": 59242738, "comment_id": 104696832, "body": "How big are the files?"}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575870600, "post_id": 59243115, "comment_id": 104697019, "body": "The size of <code>@symbolmap</code> is around 300 elements."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575870695, "post_id": 59243115, "comment_id": 104697042, "body": "@Frotz Ah, thakn you. Then what are file sizes?  Those 7 seconds are huge."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575872013, "post_id": 59243115, "comment_id": 104697381, "body": "This solution will definitely help with 300 elements, and it will also avoid problems like a=&gt;b, b=&gt;c sometimes resulting in a=&gt;c"}, {"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575873342, "post_id": 59243115, "comment_id": 104697726, "body": "File sizes: 8K 24K 4K 4K 8K 4K 4K 4K 12K 20K 16K 8K 4K 28K 12K 20K 4K 4K 8K 8K 4K 8K 4K 4K 20K 16K 20K 4K 4K 36K 4K 8K 8K 4K 28K 4K 8K 8K 8K 8K"}, {"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575874188, "post_id": 59243115, "comment_id": 104698002, "body": "Having the /g modifier makes no difference in this script."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575874274, "post_id": 59243115, "comment_id": 104698036, "body": "@Frotz  &quot;<i>Having the /g modifier makes no difference in this script.</i>&quot; -- how so? Can there be only one symbol, once, on a line?"}, {"owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575878475, "post_id": 59243115, "comment_id": 104699613, "body": "@zdmin, Right now, yes.  I see how /g would be required for edit_file, but I&#39;ll poke at that later when I&#39;m less likely to do something stupid."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "edited": false, "score": 0, "creation_date": 1575959635, "post_id": 59243115, "comment_id": 104731372, "body": "@Frotz Updated with more discussion and some specific other options"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1576089042, "last_edit_date": 1576089042, "creation_date": 1575870181, "answer_id": 59243115, "question_id": 59242738, "link": "https://stackoverflow.com/questions/59242738/replace-many-patterns-in-many-files-efficiently-in-perl/59243115#59243115", "title": "Replace many patterns in many files efficiently in Perl", "body": "<p>That code processes every file anew for each element of <code>@symbolmap</code>, so 300 times (length of the list of symbols, per comments). That is clearly wasteful. Instead, build a regex pattern with all symbols and so process each file precisely once. That should reduce runtime a lot, possibly by a good order of magnitude (depending firstly on the average line length and on how sparse the symbols are).</p>\n\n<p>Given that <code>edit_file_lines</code>  edits individual lines in a file with the regex in the block</p>\n\n<pre><code>my $orig_re = '(?:\\b' \n    . join('|', map { quotemeta } sort { length $b &lt;=&gt; length $a } @s) \n    . '\\b)'; \n\nedit_file_lines { s/($orig_re)/$symbolmap{$1}/g } $file;\n</code></pre>\n\n<p>Note the <code>/g</code> modifier, which I think you need for this (unless you know for fact that there is strictly at most one occurence of a symbol per line). This still makes a few assumptions since some details in files may affect how that pattern works. </p>\n\n<p>With file sizes between 4K and 24K (per comments) it may help to process files whole instead of line by line. That firstly avoids starting the regex engine for each line, what may be felt with given file sizes. (It also helps with I/O but  on a few kilobytes that is very little in comparison.)</p>\n\n<p>This can be done using <code>edit_file</code> from the same module with no code changes, if this module is your choice. (I am not sure about the current standing of some years-old problems, see <a href=\"http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html\" rel=\"nofollow noreferrer\">this blog</a> and <a href=\"https://www.perl.com/article/21/2013/4/21/Read-an-entire-file-into-a-string/\" rel=\"nofollow noreferrer\">this perl.com article</a> for example, but there's been a <a href=\"https://metacpan.org/changes/distribution/File-Slurp\" rel=\"nofollow noreferrer\">flurry of activity</a> in recent years. Still,  those were serious issues and the current state should be carefully vetted.)</p>\n\n<p>There are other ways of course, one prominent being with the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module. Among a rounded selection of various file-system related utilities it also has routines to both <a href=\"https://metacpan.org/pod/Path::Tiny#edit,-edit_raw,-edit_utf8\" rel=\"nofollow noreferrer\">edit whole file</a>\nand <a href=\"https://metacpan.org/pod/Path::Tiny#edit_lines,-edit_lines_utf8,-edit_lines_raw\" rel=\"nofollow noreferrer\">edit lines</a> (along with just <a href=\"https://metacpan.org/pod/Path::Tiny#slurp,-slurp_raw,-slurp_utf8\" rel=\"nofollow noreferrer\">slurping</a> and <a href=\"https://metacpan.org/pod/Path::Tiny#spew,-spew_raw,-spew_utf8\" rel=\"nofollow noreferrer\">spew-ing</a> a file). </p>\n"}], "owner": {"reputation": 393, "user_id": 1705267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/56957d438f1bdd2e07c522f2b1e9d1b4?s=128&d=identicon&r=PG", "display_name": "Frotz", "link": "https://stackoverflow.com/users/1705267/frotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576089042, "creation_date": 1575867284, "last_edit_date": 1576001250, "question_id": 59242738, "link": "https://stackoverflow.com/questions/59242738/replace-many-patterns-in-many-files-efficiently-in-perl", "title": "Replace many patterns in many files efficiently in Perl", "body": "<p>I have a translation script that identifies several hundred individual replacements.  Currently these are sorted and written to a separate file which is then executed like this: <code>sed -i stuff.txt *.c</code>.  This takes less than a second to process 40 files.  I want to avoid shelling out to execute sed.  So I did this:</p>\n\n<pre><code>use File::Slurp qw( edit_file_lines );\n\nfor my $file (glob(\"$dir/*.[ch]\")) {\n    print \"Processing symbols for $file\\n\";\n    for my $orig (@symbolmap) {\n        edit_file_lines { s/$orig/$symbolmap{$orig}/ } $file;\n    }\n}\n</code></pre>\n\n<p>This works, but takes seven seconds to process 40 files. How can I quickly process hundreds of replacements on hundreds of files, with sizes from a few kB to a few dozen kB, like this completely within Perl?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 2, "creation_date": 1575836951, "post_id": 59239392, "comment_id": 104690553, "body": "The input hash values each consist of a list containing a single string. You need to use <code>split()</code> these into lists of strings each containing one number. Then diff <i>those</i> lists."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1575990859, "post_id": 59240123, "comment_id": 104747772, "body": "did you accidentally remove list diff?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1575991366, "last_edit_date": 1575991366, "creation_date": 1575841064, "answer_id": 59240123, "question_id": 59239392, "link": "https://stackoverflow.com/questions/59239392/perl-show-element-difference-in-hoas/59240123#59240123", "title": "Perl: show element difference in HoA&#39;s", "body": "<p>Here is one approach, splitting the values at white space:</p>\n\n<pre><code>KEY:\nfor my $key (keys %vlans_A) {\n    next KEY unless exists $vlans_B{$key};\n    my @diff = list_diff(get_values($vlans_A{$key}), get_values($vlans_B{$key}));\n    print \"Difference at key $key: @diff\\n\" if @diff;\n}\n\nsub get_values {\n    my ( $key_strs ) = @_;\n\n    my @keys;\n    for my $str ( @$key_strs ) {\n        push @keys, split \" \", $str;\n    }\n    return @keys;\n}\n\n sub list_diff {\n    my %keys;\n    $keys{$_}++ for @_;\n    return grep 2 != $keys{$_}, keys %keys;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 2, "last_activity_date": 1575872445, "creation_date": 1575872445, "answer_id": 59243495, "question_id": 59239392, "link": "https://stackoverflow.com/questions/59239392/perl-show-element-difference-in-hoas/59243495#59243495", "title": "Perl: show element difference in HoA&#39;s", "body": "<p>One of many ways to achieve desired desired result</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nuse Data::Dumper;\n\nmy $debug = 0;\n\nmy %vlans_A;\nmy %vlans_B;\n\nwhile( &lt;DATA&gt; ) {                   # load hash %vlans_A\n    chomp;\n\n    last if /__DATA__/;\n\n    my($k,$a)       = split ':';\n    @{$vlans_A{$k}} = (split ' ', $a);\n}\n\nwhile ( &lt;DATA&gt; ) {                  # load hash %vlans_B\n    chomp;\n\n    last if /__DATA__/;\n\n    my($k,$a)       = split ':';\n    @{$vlans_B{$k}} = split ' ', $a;\n}\n\nprint Dumper(\\%vlans_A) if $debug;\nprint Dumper(\\%vlans_B) if $debug;\n\nwhile( my($k,$v) = each %vlans_A ) {\n    my %hash;\n\n    if( @{$vlans_A{$k}} &gt; @{$vlans_B{$k}} ) {\n        @hash{sort @{$vlans_A{$k}}} = sort @{$vlans_B{$k}};     # array A has more elements\n    } else {\n        @hash{sort @{$vlans_B{$k}}} = sort @{$vlans_A{$k}};     # array B has more elements\n    }\n\n    while( my($el1,$el2) = each %hash ) {\n        say(\"$k: $el1\") if ! defined $el2;\n        say(\"$k: $el2\") if ! defined $el1;\n    }\n}\n\n__DATA__\nent5:102 103 433 440 1803 1806 1808 1809 1814 1815 1822 1866 1867 1898 2002\nent4:409 432 434 435 436 1702 1703 1802 1805 1851 1852 1854 1855 1857 1858 1863 1864 1870 2001\nent9:4094\n__DATA__\nent5:102 103 433 1803 1806 1808 1809 1814 1815 1822 1866 1867 1898 2002\nent4:409 432 434 435 436 1702 1703 1802 1805 1851 1852 1854 1855 1857 1858 1863 1864 1870 2001\nent9:4094\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 59240123, "answer_count": 2, "score": 0, "last_activity_date": 1575991366, "creation_date": 1575835261, "question_id": 59239392, "link": "https://stackoverflow.com/questions/59239392/perl-show-element-difference-in-hoas", "title": "Perl: show element difference in HoA&#39;s", "body": "<p>Is there a way just to show the individual element difference in this code scenario?  I have searched and searched and tried many lines of code for close to 4 hours.  Currently its showing the entire key:value data set that is different and all I want it to show or it needs to show is ent5:440.  </p>\n\n<p>Thank you!</p>\n\n<pre><code>use strict;\nuse warnings;\n\n    my @diff = list_diff(keys %vlans_A, keys %vlans_B);\n    print \"Difference in keys: \", @diff, \"\\n\" if @diff;\n\n    KEY:\n    foreach my $key (keys %vlans_A) {\n        next KEY unless exists $vlans_B{$key};\n        my @diff = list_diff(@{ $vlans_A{$key} },@{ $vlans_B{$key} });\n        print \"Difference at key $key: \", @diff, \"\\n\" if @diff;\n    }\n\n\n    sub list_diff {\n        my %keys;\n        $keys{$_}++ for @_;\n        return grep 2 != $keys{$_}, keys %keys;\n    }\n\n\nDifference at key ent5: 102 103 433 440 1803 1806 1808 1809 1814 1815 1822 1866 1867 1898 2002102 103 433 1803 1806 1808 1809 1814 1815 1822 1866 1867 1898 2002\n$VAR1 = {\n          'ent5' =&gt; [\n                      '102 103 433 440 1803 1806 1808 1809 1814 1815 1822 1866 1867 1898 2002'\n                    ],\n          'ent4' =&gt; [\n                      '409 432 434 435 436 1702 1703 1802 1805 1851 1852 1854 1855 1857 1858 1863 1864 1870 2001'\n                    ],\n          'ent9' =&gt; [\n                      '4094'\n                    ]\n        };\n$VAR1 = {\n          'ent5' =&gt; [\n                      '102 103 433 1803 1806 1808 1809 1814 1815 1822 1866 1867 1898 2002'\n                    ],\n          'ent4' =&gt; [\n                      '409 432 434 435 436 1702 1703 1802 1805 1851 1852 1854 1855 1857 1858 1863 1864 1870 2001'\n                    ],\n          'ent9' =&gt; [\n                      '4094'\n                    ]\n        };\n</code></pre>\n"}, {"tags": ["html", "perl", "unicode", "character-encoding"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1575830093, "post_id": 59238580, "comment_id": 104688594, "body": "Perl can handle these characters just OK, as can Javascript and Mongo. Fix the error in the Perl program or in one of the &quot;few programs&quot; and everything will work. Provide more details if you want us to help you identify where the problem is."}, {"owner": {"reputation": 195, "user_id": 10305221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa08ecccef1aae6a730f3806d9784727?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Leto", "link": "https://stackoverflow.com/users/10305221/duke-leto"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1575831753, "post_id": 59238580, "comment_id": 104689119, "body": "Thank you, I&#39;d prefer to just have the text in a more portable format then, that can be copy pasted with the mouse between two terminals etc. Basically I want ascii."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1575842684, "last_edit_date": 1575842684, "creation_date": 1575834210, "answer_id": 59239245, "question_id": 59238580, "link": "https://stackoverflow.com/questions/59238580/perl-how-to-convert-unicode-symbols-to-something-that-will-survive-trip-into-an/59239245#59239245", "title": "Perl: how to convert unicode symbols to something that will survive trip into and out of database and render in HTML", "body": "<p>Here's an example that produces something similar to what you want:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nsub escape {\n    my ($in) = @_;\n    $in =~ s/([\\x{80}-\\x{ffff}])/sprintf '0x%d;', ord $1/ger\n}\n\nmy $in = \"Z\\N{LATIN SMALL LETTER U WITH DIAERESIS}rich\";\nmy $out = 'Z0x252;rich';\n\n$out eq escape($in) or die escape($in) . \"\\n$out\\n\";\n</code></pre>\n\n<p>You seem to want decimal digits after <code>0x</code>. That's confusing as <code>0x</code> usually means <em>hexa</em>decimal. To get hexadecimal codes, change the <a href=\"http://p3rl.org/sprintf\" rel=\"nofollow noreferrer\">sprintf</a> template to <code>0x%x;</code>.</p>\n\n<p>Also note that once someone enters <code>0x123;</code> into your data directly, the data will become corrupted.</p>\n\n<p>If you use <code>&amp;#</code> instead of <code>0x</code> at the beginning of each replaced character, the browser will render the characters correctly: <code>Z&amp;#252;rich</code> renders as \"Z&#252;rich\".</p>\n"}], "owner": {"reputation": 195, "user_id": 10305221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa08ecccef1aae6a730f3806d9784727?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Leto", "link": "https://stackoverflow.com/users/10305221/duke-leto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59239245, "answer_count": 1, "score": 0, "last_activity_date": 1575842684, "creation_date": 1575829769, "last_edit_date": 1575840115, "question_id": 59238580, "link": "https://stackoverflow.com/questions/59238580/perl-how-to-convert-unicode-symbols-to-something-that-will-survive-trip-into-an", "title": "Perl: how to convert unicode symbols to something that will survive trip into and out of database and render in HTML", "body": "<p>TL;DR I have input that looks like this:</p>\n\n<pre><code>\u0907\u0938 \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0915\u0947 \u0932\u093f\u090f \u0939\u0948\nSomething\nZ\u00fcrich\n</code></pre>\n\n<p>This data is then piped through a few programs and is ultimately inserted into a mongodb database.\nBut by the time I query it out and try to display it on a web page it's all garbage.</p>\n\n<p>I've found a lot of questions on how to encode these things but all the answers assume you want everything encoded and do not discuss how to decode it for display.</p>\n\n<p>I only want the \"weird\" stuff encoded, so for the above I'd like to get some output like this</p>\n\n<pre><code>0x1234;0x8737;0x838784; ...\nSomething\nZ0x8387;rich\n</code></pre>\n\n<p>which would store fine in a database, and would survive a vim edit or whatever else, but then when I pull it out I want it to render correctly.</p>\n\n<p>So how do I do that, encode in Perl and decode in Javascript?</p>\n\n<p>PS: I don't know what that string of symbols means, just found it somewhere. Sorry if it's offensive or something. Thanks!</p>\n\n<p><strong>Edit:</strong>\nchoroba's answer is a very good start, let's see with an example of what the algorithm produces:</p>\n\n<pre><code>input: \u682a\u5f0f\u4f1a\u793e\u30a4\u30ce\u8a2d\u8a08\noutput: 0x230;0x160;0x170;0x229;0x188;0x143;0x228;0x188;0x154;0x231;0x164;0x190;0x227;0x130;0x164;0x227;0x131;0x142;0x232;0x168;0x173;0x232;0x168;0x136;\n</code></pre>\n\n<p>Now how do I render that in Javascript? 0xNN was just an example of what I imagine the answer would be but if there's a better way by all means!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "format"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575737745, "post_id": 59225749, "comment_id": 104669939, "body": "The builtin are ..weird. Have a look at <a href=\"https://metacpan.org/pod/Perl6::Form\" rel=\"nofollow noreferrer\">Perl6::Form</a>. This is a great module for Perl 5."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1575829288, "post_id": 59225749, "comment_id": 104688345, "body": "Your format seems to work for me. However, it works because the lexical variables you used are in the same scope as the format definition. But then, your original code works too. There must be something else that&#39;s going on here."}], "answers": [{"comments": [{"owner": {"reputation": 1260, "user_id": 4037492, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/3ab2516e92f7539d8ed2b184c35514b1?s=128&d=identicon&r=PG&f=1", "display_name": "blippy", "link": "https://stackoverflow.com/users/4037492/blippy"}, "edited": false, "score": 0, "creation_date": 1575725750, "post_id": 59225892, "comment_id": 104666903, "body": "I added Update 1, as I still don&#39;t understand how <code>format</code> is supposed to work. There&#39;s presumably something fundamental that I&#39;m not understanding."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575752052, "post_id": 59225892, "comment_id": 104673318, "body": "The code in Update 1 does not print a blank link as you claim."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1575830281, "post_id": 59225892, "comment_id": 104688658, "body": "Both of your code examples work for me. I think you are having other problems."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 2, "last_activity_date": 1575721305, "creation_date": 1575721305, "answer_id": 59225892, "question_id": 59225749, "link": "https://stackoverflow.com/questions/59225749/how-do-i-use-subroutine-arguments-in-a-format-statement-in-perl5/59225892#59225892", "title": "How do I use subroutine arguments in a format statement in perl5?", "body": "<p>You define the format (as you have done), fill in package variables, then use <code>write</code> to make it happen. I have something close to what you want in <a href=\"https://www.effectiveperlprogramming.com/2010/08/use-formats-to-create-paginated-plaintext-reports/\" rel=\"nofollow noreferrer\">an article I wrote for The Effective Perler</a>. You still have to use package vars, but you can localize them:</p>\n\n<pre><code>foreach my $record ( @cats ) {\n    local( $id, $name, $food ) = @$record;\n    write( $fh );\n    }\n</code></pre>\n\n<p><a href=\"https://www.learning-perl.com\" rel=\"nofollow noreferrer\">Learning Perl</a> used to have a whole chapter on formats during the Perl 4 days, and I've reproduced that in <a href=\"https://www.learning-perl.com/2014/07/formats/\" rel=\"nofollow noreferrer\">Formats</a> on the book's website.</p>\n"}], "owner": {"reputation": 1260, "user_id": 4037492, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/3ab2516e92f7539d8ed2b184c35514b1?s=128&d=identicon&r=PG&f=1", "display_name": "blippy", "link": "https://stackoverflow.com/users/4037492/blippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 59225892, "answer_count": 1, "score": 1, "last_activity_date": 1575725686, "creation_date": 1575719979, "last_edit_date": 1575725686, "question_id": 59225749, "link": "https://stackoverflow.com/questions/59225749/how-do-i-use-subroutine-arguments-in-a-format-statement-in-perl5", "title": "How do I use subroutine arguments in a format statement in perl5?", "body": "<p>I want to be able to do something like:</p>\n\n<pre><code>sub prline {\n        format STDOUT =\n@&lt;&lt;&lt;&lt; @&gt;&gt;&gt;&gt;&gt;&gt; @&gt;&gt;&gt;&gt;&gt;&gt;\n@_\n.\nwrite;\n}\n\nprline(\"EPIC\", \"BUY\", \"SELL\");\n</code></pre>\n\n<p>but it doesn't work. What's the fix?</p>\n\n<p><strong>Update 1:</strong></p>\n\n<p>I find the format statement still to be completely mystifying. How comes the following outputs a blank line?</p>\n\n<pre><code>my ( $epic, $buy, $sell ) = qw( EPIC BUY SELL );\nwrite();\n\nformat STDOUT =\n@&lt;&lt;&lt;&lt; @&gt;&gt;&gt;&gt;&gt;&gt; @&gt;&gt;&gt;&gt;&gt;&gt;\n$epic, $buy, $sell\n.\n\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1575654017, "post_id": 59217757, "comment_id": 104651574, "body": "@MarkReed inplace is the warnings category we are interested in. There is no reason to affect other warnings."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1575654144, "post_id": 59217757, "comment_id": 104651619, "body": "From <a href=\"https://perldoc.pl/warnings#Fatal-Warnings\" rel=\"nofollow noreferrer\">warnings</a>: <code>The presence of the word &quot;FATAL&quot; in the category list will escalate warnings in those categories into fatal errors in that lexical scope.</code>"}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1575654209, "post_id": 59217757, "comment_id": 104651644, "body": "Right, <code>inplace</code> is the category; without it, <code>-Mwarnings=FATAL</code> means <code>FATAL =&gt; all</code>, which we don&#39;t want. got it."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 6, "last_activity_date": 1575653672, "last_edit_date": 1575653672, "creation_date": 1575653240, "answer_id": 59217757, "question_id": 59217670, "link": "https://stackoverflow.com/questions/59217670/how-best-idiomatically-to-fail-perl-script-run-with-n-p-when-input-file-no/59217757#59217757", "title": "How best (idiomatically) to fail perl script (run with -n/-p) when input file not found?", "body": "<p>The <a href=\"https://perldoc.pl/perlrun#-p\" rel=\"noreferrer\">-p switch</a> is just a shortcut for wrapping your code (the argument following -e) in this loop:</p>\n\n<pre><code>LINE:\n  while (&lt;&gt;) {\n      ...             # your program goes here\n  } continue {\n      print or die \"-p destination: $!\\n\";\n  }\n</code></pre>\n\n<p>(-n is the same but without the continue block.)</p>\n\n<p>The <code>&lt;&gt;</code> empty operator is equivalent to <code>readline *ARGV</code>, and that opens each argument in succession as a file to read from. There's no way to influence the error handling of that implicit open, but you can make the <a href=\"https://perldoc.pl/perldiag#Can&#39;t-open-%25s:-%25s\" rel=\"noreferrer\">warning it emits</a> fatal (note, this will also affect several warnings related to the -i switch):</p>\n\n<pre><code>perl -Mwarnings=FATAL,inplace -pe 1 foo &amp;&amp; echo ok\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1575653474, "post_id": 59217771, "comment_id": 104651332, "body": "If your script is supposed to take files as arguments rather than read from stdin, an lighter alternative to this solution would be <code>BEGIN{die &quot;File not found&quot; unless -f $ARGV[0]}</code>.  (I say lighter, because it doesn&#39;t involve setting a flag and adding 2 pieces of codes)"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1575656525, "post_id": 59217771, "comment_id": 104652470, "body": "Also assumes all files are of non-zero length."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1575653595, "last_edit_date": 1575653595, "creation_date": 1575653289, "answer_id": 59217771, "question_id": 59217670, "link": "https://stackoverflow.com/questions/59217670/how-best-idiomatically-to-fail-perl-script-run-with-n-p-when-input-file-no/59217771#59217771", "title": "How best (idiomatically) to fail perl script (run with -n/-p) when input file not found?", "body": "<p>Set a flag in the body of the loop, check the flag in the END block at the end of the oneliner.</p>\n\n<pre><code>perl -pe '$found = 1; ... ;END {die \"No file found\" unless $found}' -- file1 file2\n</code></pre>\n\n<p>Note that it only fails when no file was processed.</p>\n\n<p>To report the problem when not all files have been found, you can use something like</p>\n\n<pre><code>perl -pe 'BEGIN{ $files = @ARGV} $found++ if eof; ... ;END {die \"Some files not found\" unless $files == $found}'\n</code></pre>\n"}], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 2, "accepted_answer_id": 59217757, "answer_count": 2, "score": 11, "last_activity_date": 1575656319, "creation_date": 1575652795, "last_edit_date": 1575656319, "question_id": 59217670, "link": "https://stackoverflow.com/questions/59217670/how-best-idiomatically-to-fail-perl-script-run-with-n-p-when-input-file-no", "title": "How best (idiomatically) to fail perl script (run with -n/-p) when input file not found?", "body": "<pre><code>$ perl -pe 1 foo &amp;&amp; echo ok\nCan't open foo: No such file or directory.\nok\n</code></pre>\n\n<p>I'd really like the perl script to fail when the file does not exist.  What's the \"proper\" way to make -p or -n fail when the input file does not exist?</p>\n"}, {"tags": ["string", "perl", "ibm-mq", "truncate"], "comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575673244, "post_id": 59212822, "comment_id": 104658041, "body": "Try <b>perl -e &#39;map { print $1 if /QMNAME&#40;(.+?)&#41;/ } `dspmq`&#39;</b>"}], "answers": [{"comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1575635984, "post_id": 59213231, "comment_id": 104642912, "body": "Right approach but the regex is broader than neccessary and it potentially backtracks a lot. <code>&#47; ^ QMNAME  \\(  ( [^\\)]+ )  \\) &#47;x</code> is better."}, {"owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 1, "creation_date": 1575636848, "post_id": 59213231, "comment_id": 104643265, "body": "Agree that the the regular expression is broader that it could be, but it is fine for the input data set. Why make it more complicated than it needs to be?"}], "tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 3, "last_activity_date": 1575635533, "creation_date": 1575635533, "answer_id": 59213231, "question_id": 59212822, "link": "https://stackoverflow.com/questions/59212822/perl-unable-to-truncate-string/59213231#59213231", "title": "Perl Unable to truncate string", "body": "<p><code>split</code> isn't going to do what you need. I would just use a regular expression to match the sub-string you need</p>\n\n<p>So change the loop from this</p>\n\n<pre><code>foreach my $i (@qmgrlist)\n{\n    my @temp1 = split /QMNAME\\(/, $i;\n    print @temp1;\n}\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>foreach my $i (@qmgrlist)\n{\n    print \"$1\\n\"\n        if /QMNAME\\((.+?)\\)/;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1575637183, "creation_date": 1575637183, "answer_id": 59213691, "question_id": 59212822, "link": "https://stackoverflow.com/questions/59212822/perl-unable-to-truncate-string/59213691#59213691", "title": "Perl Unable to truncate string", "body": "<p>I think a regex approach is better than <code>split()</code> here, but you could use <code>split()</code> by splitting on parentheses and taking the second item in the returned list.</p>\n\n<pre><code>for (@qmgrlist) {\n  say +(split /[()]/)[0];\n}\n</code></pre>\n\n<p>And a brief note on your use of command-line options to run this code. You can make it simpler if you a) pipe the output of <code>qspmq</code> into your code and b) use <code>-n</code> to process a record at a time.</p>\n\n<pre><code>$ perl -nE 'say +(split /[()]/)[1]' `dspmq`\n</code></pre>\n\n<p>There's also <code>-M</code> to load modules (e.g. <code>-MData::Dumper</code>), but you don't seem to be using Data::Dumper any more.</p>\n"}, {"comments": [{"owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "edited": false, "score": 1, "creation_date": 1575651868, "post_id": 59216327, "comment_id": 104650656, "body": "Interesting us of <code>for</code>."}], "tags": [], "owner": {"reputation": 7444, "user_id": 967621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOso6.jpg?s=128&g=1", "display_name": "Timur Shtatland", "link": "https://stackoverflow.com/users/967621/timur-shtatland"}, "is_accepted": false, "score": 3, "last_activity_date": 1575647376, "creation_date": 1575647376, "answer_id": 59216327, "question_id": 59212822, "link": "https://stackoverflow.com/questions/59212822/perl-unable-to-truncate-string/59216327#59216327", "title": "Perl Unable to truncate string", "body": "<p>Try this perl one-liner:<br>\n<code>dspmq | perl -lne 'print for m{ QMNAME [(] ( [^)]* ) [)] }x'</code></p>\n\n<hr>\n\n<p>Here, <code>dspmq</code> STDOUT is fed using a pipe <code>|</code> into STDIN of the perl code, which has these flags:<br>\n<code>-e</code> tells Perl interpreter to look for the code inline rather than in a separate script file.<br>\n<code>-n</code> feeds the input line by line to the inline code (this way you do not need to store the output in an array - this matters for large outputs, not in your case).<br>\n<code>-l</code> strips the input record separator (newline on *NIX) before feeding it to the code, and appends it automatically after during <code>print</code>.  </p>\n\n<p>The <code>print ... for ... m{... (...) ...}</code> code prints every pattern captured in parentheses.<br>\nThe captured pattern is <code>[^)]*</code>, which is maximum number (0 or more) chars that are <strong>not</strong> (<code>^</code>) listed in the character class, that is, that are <strong>not</strong> closing parens.<br>\n<code>[(] ... [)]</code> are literal parentheses escaped as character classes for readability. I prefer this to escaping like so: <code>\\( ... \\)</code>.<br>\n<code>QMNAME</code> is used to make the programmer's intentions clear: you want the string that follows QMNAME in parens. I prefer this to using the field index, such as 1, which protects you against minor variation in output of your command used with different options, on different systems, etc.<br>\nFinally, the <code>x</code> regex modifier in <code>m{...}x</code> enables comments and whitespace to be ignored, and is preferred for readability.</p>\n\n<p><strong>RELATED:</strong><br>\n<a href=\"https://stackoverflow.com/questions/33097783/cutting-the-output-of-a-dspmq-command\">Cutting the output of a dspmq command</a></p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575662976, "last_edit_date": 1575662976, "creation_date": 1575661677, "answer_id": 59219447, "question_id": 59212822, "link": "https://stackoverflow.com/questions/59212822/perl-unable-to-truncate-string/59219447#59219447", "title": "Perl Unable to truncate string", "body": "<p>Desired output can be achieved with following code</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nmap{ say $1 if /QMNAME\\((.+?)\\)/ } &lt;DATA&gt;;\n\n\n__DATA__\nQMNAME(AAA)                                           STATUS(Running)\nQMNAME(BBB)                                           STATUS(Running)\n</code></pre>\n\n<p>output</p>\n\n<pre><code>AAA\nBBB\n</code></pre>\n\n<p>and one liner (not tested - I am on Windows computer)</p>\n\n<p><code>dspmq | perl -lne 'print $1 if /QMNAME\\((.+?)\\)/'</code></p>\n"}], "owner": {"reputation": 33, "user_id": 4600818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be906c9584760c94210e5123221a489?s=128&d=identicon&r=PG&f=1", "display_name": "best worker", "link": "https://stackoverflow.com/users/4600818/best-worker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59213691, "answer_count": 4, "score": 2, "last_activity_date": 1575662976, "creation_date": 1575633860, "last_edit_date": 1575650649, "question_id": 59212822, "link": "https://stackoverflow.com/questions/59212822/perl-unable-to-truncate-string", "title": "Perl Unable to truncate string", "body": "<p>I am trying to extract AAA and BBB from the output of the command \"dspmq\". \n$<code>dspmq</code> &lt;- this command gives output as --></p>\n\n<pre><code>QMNAME(AAA)                                           STATUS(Running)\nQMNAME(BBB)                                           STATUS(Running)\n</code></pre>\n\n<p>But it doesn't work with the below code.</p>\n\n<pre><code>perl -e 'use Data::Dumper qw(Dumper);my @qmgrlist = `dspmq`;$size = @qmgrlist;foreach my $i (@qmgrlist){my @temp1 = split /QMNAME\\(/, $i;print @temp1;}'\n</code></pre>\n\n<pre><code>AAA)                                           STATUS(Running)\n\nBBB)                                           STATUS(Running)\n</code></pre>\n\n<p>I am able to truncate <code>\"QMNAME(\"</code> but unable to truncate those to the right of <code>AAA</code> and <code>BBB</code>. Basically I want to get the string between <code>\"QMNAME(\"</code> and the immediate <code>\")\"</code>. Please assist.</p>\n"}, {"tags": ["python", "bash", "perl", "server", "client"], "comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575629121, "post_id": 59211346, "comment_id": 104639658, "body": "How do you connect to the server? Is it SSH protocol? What OS is on client and server side? I have read you question a few times and still have difficulty to understand what you try to do. You can connect to remote server for example over SSH protocol and issue the commands. Or you can write a perl script which runs locally but allows to establish remote connection and then you can issue command to the script <b>server</b> and you communicate with server (commands executed remotely), issue <i>*local</i> and now all commands will run locally."}, {"owner": {"reputation": 13, "user_id": 9081173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19646c961796fb9e721a507295f25710?s=128&d=identicon&r=PG&f=1", "display_name": "Teslauder", "link": "https://stackoverflow.com/users/9081173/teslauder"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575629747, "post_id": 59211346, "comment_id": 104639986, "body": "Server and client is on linux localhost. It is PERL script with IO::Socket::INET sockets and runing on the same machine on localhost. I run server.pl next run client.pl on client terminal window taping &quot;DATE&quot; get answer from server in client terminal window (current date), but when I taping &quot;SCRIPT&quot; script run on server terminal window ( I want to run this bash script on client terminal window ) some like tellnet, conversation with machine. So i don&#39;t know it is possible on localhost."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575630476, "post_id": 59211346, "comment_id": 104640322, "body": "Lets clarify -- you have two perl scripts one named <b>server.pl</b> and other <b>client.pl</b> run side by side on same computer, and you want them communicate with each other over <b>INET</b> socket (similar to chat programs) and which would allow run programs on <b>remote</b> side (in this case <b>remote</b> is same computer but in case of two computers, server and client would be on different machines). Well, do not forget about some security aspect of this communication (not all commands should be allowed to run remotely)."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575630928, "post_id": 59211346, "comment_id": 104640525, "body": "In this case you need look into &#39;capturing&#39; remote &#39;STDOUT&#39; and redirect it to &#39;other&#39; side of the communication. Yes, it can be done but some extra code is involved. I can not read your <b>expertise</b> level but please allow me to refer to following chapter -- <a href=\"https://docstore.mik.ua/orelly/perl4/prog/ch16_05.htm\" rel=\"nofollow noreferrer\">docstore.mik.ua/orelly/perl4/prog/ch16_05.htm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 264, "user_id": 12446146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d79bf88de30c24aa8ae8a1a9c9a2ce19?s=128&d=identicon&r=PG&f=1", "display_name": "An0ther0ne", "link": "https://stackoverflow.com/users/12446146/an0ther0ne"}, "is_accepted": false, "score": 0, "last_activity_date": 1575628755, "creation_date": 1575628755, "answer_id": 59211501, "question_id": 59211346, "link": "https://stackoverflow.com/questions/59211346/runing-bash-and-python-script-on-client-in-perl/59211501#59211501", "title": "runing Bash and Python script on client in PERL", "body": "<p>There are no standard solution for there. Client must support running system commands remotely functionality -- i.e.  become a command-server yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9081173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19646c961796fb9e721a507295f25710?s=128&d=identicon&r=PG&f=1", "display_name": "Teslauder", "link": "https://stackoverflow.com/users/9081173/teslauder"}, "edited": false, "score": 0, "creation_date": 1575647022, "post_id": 59213512, "comment_id": 104648381, "body": "Yes, thanks a lot it&#39;s exactly what I mean. But bash script(this is simple pong game using tput and script is interactive) load very very slow and after starting have a huge lags. Python script works perfectly. Where could be problemm with this? Is the interactivity the cause of this lags?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 13, "user_id": 9081173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19646c961796fb9e721a507295f25710?s=128&d=identicon&r=PG&f=1", "display_name": "Teslauder", "link": "https://stackoverflow.com/users/9081173/teslauder"}, "edited": false, "score": 0, "creation_date": 1575658160, "post_id": 59213512, "comment_id": 104653037, "body": "ah, if it is interactive, you have to do a whole lot more than just capture the output and return it to the client when the script is complete.  can you come up with a simple bash script that demonstrates what you want to do and add it to the question (or maybe at this point open a new question)?"}, {"owner": {"reputation": 13, "user_id": 9081173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19646c961796fb9e721a507295f25710?s=128&d=identicon&r=PG&f=1", "display_name": "Teslauder", "link": "https://stackoverflow.com/users/9081173/teslauder"}, "edited": false, "score": 0, "creation_date": 1575717172, "post_id": 59213512, "comment_id": 104664960, "body": "I understand I have to after game start redirect my keyboard input (turn off sending lines to server) and after game over back sending commands to server, but for now I can&#39;t locate problem. If it is much more complicated to achive this I will stay running script on the server."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 1, "last_activity_date": 1575636578, "creation_date": 1575636578, "answer_id": 59213512, "question_id": 59211346, "link": "https://stackoverflow.com/questions/59211346/runing-bash-and-python-script-on-client-in-perl/59213512#59213512", "title": "runing Bash and Python script on client in PERL", "body": "<pre><code>print ($sock system(\"/bin/bash /path/to/my/bash_script\"))\n</code></pre>\n\n<p>sends the return of system() to the client, but that isn't the output of the script.  To capture the output of the script and return it to the client, use backticks instead:</p>\n\n<pre><code>print($sock `/bin/bash /path/to/my/bash_script`), last;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9081173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19646c961796fb9e721a507295f25710?s=128&d=identicon&r=PG&f=1", "display_name": "Teslauder", "link": "https://stackoverflow.com/users/9081173/teslauder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59213512, "answer_count": 2, "score": 0, "last_activity_date": 1575717343, "creation_date": 1575628206, "last_edit_date": 1575717343, "question_id": 59211346, "link": "https://stackoverflow.com/questions/59211346/runing-bash-and-python-script-on-client-in-perl", "title": "runing Bash and Python script on client in PERL", "body": "<p>I want to run bash script and python script from PERL server-client script. Connection works and if send command via client gets right answer, for example \"DATE\" gets me current date in client terminal. I want to run bash script in client terminal window taping \"SCRIPT\" but now it's run on server terminal window. Can I fix it and run script in client terminal window? Maybe solution is simple but now I have no idea. Thank you in advance for help.</p>\n\n<p><strong>My piece of code how I try to run my script</strong></p>\n\n<pre><code>\n   foreach ($buf) {\n            /^SCRIPT$/ and\n                    print ($sock system(\"/bin/bash /path/to/my/bash_script\")),  \n                   last;\n       /^DATE$/  and\n                   print($sock\n                         scalar(localtime),\n                         \"\\n\"),\n                   last;\n       print $sock \"NO OPTION\\n\";\n   }\n\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>In reference to the comment i change this line:</p>\n\n<p><code>print ($sock system(\"/bin/bash /path/to/my/bash_script\"))</code></p>\n\n<p>to this:</p>\n\n<pre><code>print ($sock `/bin/bash /path/to/my/bash_script`)\n</code></pre>\n\n<p>This works perfectly for python script. For bash script that is interactive this not works correct. This is bash simple game using tput to color game area. </p>\n\n<p><strong>Interactivity - controls in game:</strong></p>\n\n<pre><code>    local key=$(cat -v)\n    local dy=0\n    local dr=0\n\n    if [ \"$key\" == \"w\" ]; then\n        dy=$((dy-2))\n    fi\n\n    if [ \"$key\" == \"s\" ]; then\n        dy=$((dy+2))\n    fi\n\n\n    if [ \"$key\" == \"^[[A\" ]; then\n        dr=$((dr-2))\n    fi\n\n    if [ \"$key\" == \"^[[B\" ]; then\n        dr=$((dr+2))\n    fi\n</code></pre>\n\n<p>And main loop is something  like that:</p>\n\n<pre><code>while [key \"e\" for exit not down] then\n    interactivity()\n    draw_game_area()\n    increase_iteration++\n    sleep 0.1\ndone;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "reference"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1575623849, "post_id": 59209934, "comment_id": 104636949, "body": "Your code already does <code>push @copy_refs, \\@copy;</code>. Do you mean &quot;the same code, with <code>push @copy_refs, \\@array</code>&quot; ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1575624310, "post_id": 59209934, "comment_id": 104637186, "body": "If you don&#39;t save the reference to <code>@copy</code> for each iteration, it will get destroyed on each loop iteration. Hence, the next array <code>@copy</code> may use the same memory address as the previous"}, {"owner": {"reputation": 187, "user_id": 10406360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6lZg.jpg?s=128&g=1", "display_name": "LongTP5", "link": "https://stackoverflow.com/users/10406360/longtp5"}, "edited": false, "score": 0, "creation_date": 1575626715, "post_id": 59209934, "comment_id": 104638467, "body": "Your comment makes a lot of sense Hakon. I think it&#39;s the correct answer."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 10406360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6lZg.jpg?s=128&g=1", "display_name": "LongTP5", "link": "https://stackoverflow.com/users/10406360/longtp5"}, "edited": false, "score": 0, "creation_date": 1575626609, "post_id": 59210397, "comment_id": 104638410, "body": "I think you&#39;re answer is almost correct, but &quot;inverted.&quot; You see the first set of output is from the code as presented. It&#39;s the second set of output that has the push removed. I think if you modify your answer as per Hakon Haegland&#39;s comment to my question, I can accept it."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 187, "user_id": 10406360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6lZg.jpg?s=128&g=1", "display_name": "LongTP5", "link": "https://stackoverflow.com/users/10406360/longtp5"}, "edited": false, "score": 0, "creation_date": 1575627066, "post_id": 59210397, "comment_id": 104638632, "body": "Sorry, you are correct -- I had it right in my mind, but poorly put in writing. Thank you, I made the correction of my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1575628635, "post_id": 59210397, "comment_id": 104639400, "body": "While this answer deviates from the actual implementation a few demonstrable ways, it does convey the right idea, and the deviations only matter in corner cases one shouldn&#39;t care about."}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 4, "last_activity_date": 1575627013, "last_edit_date": 1575627013, "creation_date": 1575624921, "answer_id": 59210397, "question_id": 59209934, "link": "https://stackoverflow.com/questions/59209934/why-does-perl-sometimes-recycle-references/59210397#59210397", "title": "Why does Perl sometimes recycle references?", "body": "<p>Ok, <code>my @copy = @array</code> creates new array with name <code>@copy</code> and copies each and every element from <code>@array</code>. </p>\n\n<p>If you <code>push @copy_refs, \\@copy</code> then array <code>@copy</code> is not destroyed at the end of the loop cycle step, on new cycle of the loop the <code>@copy</code> is continue to exist, new <code>@copy</code> array is created it occupies new location in memory (memory space address is changed).</p>\n\n<p>If you do not <code>push @copy_refs, \\@copy</code> then array <code>@copy</code> is destroyed at the end of loop cycle step and recreated on next cycle step of the loop in probably same memory location (you can see that it's address is the same from previous step of the loop).</p>\n\n<p>Memory occupied by some variable only freed when the code stops to use it - in your case <code>push @copy_refs, \\@copy</code> still uses the array and prevents it's destruction (memory is still occupied by the array).</p>\n\n<p>Sorry, probably my explanation is not very intuitive and not very transparent. But the idea is that <code>@copy_refs</code> is keeping location for <code>@copy</code> array which prevents it's destruction.</p>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 10406360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6lZg.jpg?s=128&g=1", "display_name": "LongTP5", "link": "https://stackoverflow.com/users/10406360/longtp5"}, "edited": false, "score": 0, "creation_date": 1575627004, "post_id": 59210701, "comment_id": 104638604, "body": "Thanks, but I wasn&#39;t trying to achieve anything with this code. I was just curious about the behaviour."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 187, "user_id": 10406360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6lZg.jpg?s=128&g=1", "display_name": "LongTP5", "link": "https://stackoverflow.com/users/10406360/longtp5"}, "edited": false, "score": 1, "creation_date": 1575627150, "post_id": 59210701, "comment_id": 104638674, "body": "Well, but sometimes it can be useful to understand what happens <code>under the hood&#47;code</code> and it can be used for an advantage."}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575626428, "last_edit_date": 1575626428, "creation_date": 1575625985, "answer_id": 59210701, "question_id": 59209934, "link": "https://stackoverflow.com/questions/59209934/why-does-perl-sometimes-recycle-references/59210701#59210701", "title": "Why does Perl sometimes recycle references?", "body": "<p>Probably you intended something of this kind</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $debug = 1;\n\nmy @array = (0,1,2,3,4,5,6,7,8,9);\n\nprint \"array ref is \".\\@array.\"\\n\";\n\nmy @copy_refs;\n\nfor my $element(@array) {\n    {                                       # new scope opens\n        my @copy = @array;                  # new @copy array in new scope\n        print \"copy ref is \".\\@copy.\"\\n\";\n        push @copy_refs, \\@copy;            # due new scope we have new array ref\n    }                                       # and here scope closes \n                                            # @copy would be destroyed \n                                            # if it was not stored in @copy_ref\n}\n\nprint Dumper(\\@copy_refs) if $debug;\n</code></pre>\n\n<p>output ($debug = 0)</p>\n\n<pre><code>array ref is ARRAY(0x2664388)\ncopy ref is ARRAY(0x26ecb10)\ncopy ref is ARRAY(0x2663b00)\ncopy ref is ARRAY(0x2663d40)\ncopy ref is ARRAY(0x2663f80)\ncopy ref is ARRAY(0x26641c0)\ncopy ref is ARRAY(0x2664400)\ncopy ref is ARRAY(0x2664640)\ncopy ref is ARRAY(0x26e7250)\ncopy ref is ARRAY(0x27e5608)\ncopy ref is ARRAY(0x26889f0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1575627559, "post_id": 59211045, "comment_id": 104638863, "body": "Re &quot;<i>and therefore allocate only once some memory</i>&quot;, It does this. In fact, it takes this to the extreme. On scope exit, a lexical variable is either cleared (if nothing references it), or replaced with a freshly allocated var. Yes, you read that right, Perl <i>allocates</i> lexical vars on scope <i>exit</i>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575627755, "post_id": 59211045, "comment_id": 104638968, "body": "@ikegami Thanks, very interesting! (would not have guessed, but it makes some sense) :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1575628058, "post_id": 59211045, "comment_id": 104639107, "body": "That&#39;s why people were using <code>sub foo { my $var if 0; ... }</code> to create a variable that doesn&#39;t clear between calls to <code>foo</code>. Perl knows to clear/reallocate the variable on scope exit because <code>my</code> has the run-time effect of placing a directive on the stack to do so. By skipping the run-time effect of <code>my</code>, you get a never variable that never clears. (It&#39;s still lexically-scoped because of the compile-time effect of <code>my</code>.) That said, that&#39;s officially undefined behaviour, and one should use <code>sub foo { state $x; ... }</code> or <code>{ my $x; sub foo { ... } }</code> instead."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575628287, "post_id": 59211045, "comment_id": 104639230, "body": "@ikegami Wow, that&#39;s nice! I&#39;ve never seen <code>my $var if 0</code>, but I&#39;ve seen people (mistakenly) do <code>my $var = x if y</code>, and always thought it was a bug of Perl to accept this form (because intuitively, you might think that it&#39;s equivalent to <code>my $var = $y &amp;&amp; $x</code>, but it&#39;s not). Thanks again :)"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 1, "last_activity_date": 1575628477, "last_edit_date": 1575628477, "creation_date": 1575627120, "answer_id": 59211045, "question_id": 59209934, "link": "https://stackoverflow.com/questions/59209934/why-does-perl-sometimes-recycle-references/59211045#59211045", "title": "Why does Perl sometimes recycle references?", "body": "<p><strong>It's an optimization</strong> of Perl's virtual machine. (note that it could be due to \"chance\" as well, but in that case it's not)</p>\n\n<p><em>Disclaimer: I don't know the specifics of how Perl optimizes its memory management. However, I am knowledgeable about memory management an virtual machines in general.</em></p>\n\n<p>A few preliminary words, to be on the same page: Perl uses automatic <a href=\"https://en.wikipedia.org/wiki/Memory_management\" rel=\"nofollow noreferrer\">memory management</a> through a <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)\" rel=\"nofollow noreferrer\">garbage collector</a> (<a href=\"https://en.wikipedia.org/wiki/Reference_counting\" rel=\"nofollow noreferrer\">reference counting</a> to be precise). What this (aggressive?) sentence means is that in Perl, you don't need to manually request memory from the OS when you want to create an object, neither do you need to explicitly destroy your object to return memory to the OS.</p>\n\n<p>When you do </p>\n\n<pre><code>my @copy = @array;\n</code></pre>\n\n<p>Perl allocates an array, and copies <code>@array</code> into it. Naively, allocating an array means asking the OS for some memory, and keeping track that this memory corresponds to the variable <code>@copy</code>. However, asking the OS for memory is very slow. </p>\n\n<p>Furthermore, if every iteration of the <code>for</code> loop was allocating a new array at a new location, it would use a lot of memory: in your case, 10 times the size of <code>@array</code> (because you loop 10 times). This would be bad, especially since at the iteration <em>n+1</em>, you'd have no way to access the <code>@copy</code> allocated at iteration <em>n</em> (because you didn't keep a reference to it).</p>\n\n<p>A visual representation might help understand. Take the following representation of the memory</p>\n\n<pre><code>+-----------------------------------------------------------\n+                       empty\n+-----------------------------------------------------------\n</code></pre>\n\n<p>After allocating <code>@copy</code> in the first iteration of the loop, you'll get:</p>\n\n<pre><code>+-----------------------------------------------------------\n+  @copy |                     empty\n+-----------------------------------------------------------\n</code></pre>\n\n<p>Now, after the first iteration, there is no way to access <code>@copy</code> anymore. Perl can then destroy it, and your memory could then become:</p>\n\n<pre><code>+-----------------------------------------------------------\n+  empty |                   empty \n+-----------------------------------------------------------\n</code></pre>\n\n<p>And then the second iteration would allocate <code>@copy</code> after the previous one:</p>\n\n<pre><code>+-----------------------------------------------------------\n+  empty |  @copy  |                empty\n+-----------------------------------------------------------\n</code></pre>\n\n<p>At the third iteration, you'd get:</p>\n\n<pre><code>+-----------------------------------------------------------\n+  empty |  empty  | @copy  |            empty\n+-----------------------------------------------------------\n</code></pre>\n\n<p>And so on for you ten iterations. It's obvious that having those <code>empty</code> spots does no good. This could be optimized in two ways:</p>\n\n<ul>\n<li>first, when freeing <code>@copy</code>, Perl could see that two <code>empty</code> blocks are next to each other, and merge them. This means that after freeing <code>@copy</code>, you'll go from</li>\n</ul>\n\n<pre>\n  +-----------------------------------------------------------\n  +  @copy |                     empty\n  +-----------------------------------------------------------\n</pre>\n\n<p>to</p>\n\n<pre>\n  +-----------------------------------------------------------\n  +  empty |                     empty\n  +-----------------------------------------------------------\n</pre>\n\n<p>to </p>\n\n<pre>\n  +-----------------------------------------------------------\n  +                        empty\n  +-----------------------------------------------------------\n</pre>\n\n<p>Now, when the next iteration allocates <code>@copy</code>, it will go at the same place the one from the previous iteration was. Thus, you'd get the same reference for all <code>@copy</code> from all iterations.</p>\n\n<ul>\n<li>Perl could simply see that within your loop, you allocate <code>@copy</code> but don't keep a reference to it, and therefore allocate only once some memory, which will be used for all iterations of <code>@copy</code>. In that case again, you'd get the same reference for all of your <code>@copy</code>.</li>\n</ul>\n\n<p>I do not know if Perl uses either of this mechanism, however, it certainly uses something that produces a similar result (the result being \"keeping memory low\", which has for consequence \"all the <code>@copy</code> from all the iterations have the same address). As per Ikegami's <a href=\"https://stackoverflow.com/a/59211088/4990392\">answer</a>, what really happens is something similar to my second bullet point.</p>\n\n<hr>\n\n<p>Note that I've assumed in that answer that Perl doesn't request some new memory from the OS (= <code>malloc</code>) for each object it allocates, but rather requests for bulks of memory (using either <code>mmap</code> directly, or a large <code>malloc</code>). If Perl was using a single <code>malloc</code> for each object it allocates, then it becomes even more important to reuse memory from each <code>@copy</code>: calling <code>malloc</code> and <code>free</code> at each iteration would be very slow.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1575628937, "last_edit_date": 1575628937, "creation_date": 1575627323, "answer_id": 59211088, "question_id": 59209934, "link": "https://stackoverflow.com/questions/59209934/why-does-perl-sometimes-recycle-references/59211088#59211088", "title": "Why does Perl sometimes recycle references?", "body": "<p>Perl uses reference counting to determine when to free variables. A variable is freed as soon as nothing references it. Code blocks (e.g., subs and files) maintain a reference to the lexical variables declared within them while the variables are in scope, so variables normally get deallocated on scope exit.</p>\n\n<p>In other words, <code>my @copy</code> allocates a new array. When the scope is exited, <code>@copy</code> gets freed if nothing else references it.</p>\n\n<p>When you do <code>push @copy_refs, \\@copy;</code>, <code>@copy_refs</code> references the array, so <code>@copy</code> isn't freed.</p>\n\n<p>When you omit <code>push @copy_refs, \\@copy;</code>, nothing references <code>@copy</code>, so it's freed. This leaves the memory available to be reused in the next loop pass.</p>\n\n<p>Kinda.</p>\n\n<p>As an optimization, if nothing references a variable when it goes out of scope, it's merely cleared rather than destroyed and recreated. So <code>@copy</code> is not being merely reallocated at the same location; it's actually the very same array that's been cleared.</p>\n"}], "owner": {"reputation": 187, "user_id": 10406360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6lZg.jpg?s=128&g=1", "display_name": "LongTP5", "link": "https://stackoverflow.com/users/10406360/longtp5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1575628937, "creation_date": 1575623074, "question_id": 59209934, "link": "https://stackoverflow.com/questions/59209934/why-does-perl-sometimes-recycle-references", "title": "Why does Perl sometimes recycle references?", "body": "<p>The following code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nmy @array = (0,1,2,3,4,5,6,7,8,9);\nprint \"array ref is \".\\@array.\"\\n\";\n\nmy @copy_refs;\nfor my $element(@array) {\n    my @copy = @array;\n    print \"copy ref is \".\\@copy.\"\\n\";\n    push @copy_refs, \\@copy;\n}\n</code></pre>\n\n<p>produces the following output, as one might expect:</p>\n\n<pre><code>array ref is ARRAY(0x21ae640)\ncopy ref is ARRAY(0x21e2a00)\ncopy ref is ARRAY(0x21d7368)\ncopy ref is ARRAY(0x21d71e8)\ncopy ref is ARRAY(0x21d70c8)\ncopy ref is ARRAY(0x21d6fa8)\ncopy ref is ARRAY(0x21d6e88)\ncopy ref is ARRAY(0x21d6d68)\ncopy ref is ARRAY(0x21d6c48)\ncopy ref is ARRAY(0x21cf8a0)\ncopy ref is ARRAY(0x21cf780)\n</code></pre>\n\n<p>However, the same code, with <code>push @copy_refs, \\@copy;</code> removed, produces the following output:</p>\n\n<pre><code>array ref is ARRAY(0x229e640)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\ncopy ref is ARRAY(0x22d2a00)\n</code></pre>\n\n<p>Why is this?</p>\n"}, {"tags": ["perl", "printing"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1575624865, "post_id": 59209742, "comment_id": 104637488, "body": "<i>&quot;why is the hostname getting printed twice...&quot;</i> It is difficult see why there would be a second hostname..Try insert single quotes in the <code>print</code> command to debug: <code>print &quot;&#39;$txt&#39;&quot;</code> What is the output from the <code>print</code> statement now, where are the single quotes in the output?"}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 1, "last_activity_date": 1575624891, "last_edit_date": 1575624891, "creation_date": 1575624446, "answer_id": 59210272, "question_id": 59209742, "link": "https://stackoverflow.com/questions/59209742/perl-getting-unexpected-result-while-using-print-function/59210272#59210272", "title": "Perl - getting unexpected result while using print function", "body": "<p>You need to remove the getting <code>hostname entermark</code> with <code>chomp()</code> function.</p>\n\n<pre><code>$outfile = `hostname`;\n\nchomp $outfile;  #----&gt; Need to chomp (Remove last entermark)\n\n$txt = \"\\nHealth check results - \";\n\n$txt .= $outfile; #----&gt; Already you got the hostname hence just store $outfile \n\n$txt .= \"\\n===========================================\";\nprint \"$txt\";\n\n# Create output file to store the HC results.\n\nopen $fh, '&gt;', $outfile or die \"Can't write $outfile \\n\";\nprint $fh $txt;\nclose ($fh)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4600818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be906c9584760c94210e5123221a489?s=128&d=identicon&r=PG&f=1", "display_name": "best worker", "link": "https://stackoverflow.com/users/4600818/best-worker"}, "edited": false, "score": 0, "creation_date": 1575625503, "post_id": 59210309, "comment_id": 104637847, "body": "Excellent thanks!  Worked like charm,  One thing I noted was at the end of the below line a new line(\\n) is mandatory, other wise I see the hostname printed second time at the end of line  <code>$txt .= &quot;\\n===========================================\\n&quot;;</code>"}], "tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 1, "last_activity_date": 1575624574, "creation_date": 1575624574, "answer_id": 59210309, "question_id": 59209742, "link": "https://stackoverflow.com/questions/59209742/perl-getting-unexpected-result-while-using-print-function/59210309#59210309", "title": "Perl - getting unexpected result while using print function", "body": "<p>The line </p>\n\n<pre><code>$outfile = `hostname`;\n</code></pre>\n\n<p>will run the <code>hostname</code> command and return <em>all</em> the data written to STDOUT, including the terminating EOL. This means you end up with a filename that include the terminating EOL character. What the filesystem does with that is OS dependent, but on Linux you will end up with a file that include the EOl character.</p>\n\n<p>You can remove that with the <code>chomp</code></p>\n\n<pre><code>$outfile = `hostname`;\nchomp $outfile;\n</code></pre>\n\n<p>updated script looks like this</p>\n\n<pre><code>$outfile = `hostname`;\nchomp $outfile;\n\n$txt = \"\\nHealth check results - \";\n$txt .= $outfile;\n$txt .= \"\\n===========================================\\n\";\nprint \"$txt\";\n\n# Create output file to store the HC results.\n\nopen $fh, '&gt;', $outfile or die \"Can't open $outfile \\n\";\nprint $fh $txt;\nclose ($fh) ;\n</code></pre>\n\n<p>I get this when I run it</p>\n\n<pre><code>Health check results - XXHOSTNAMEXX\n===========================================\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4600818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be906c9584760c94210e5123221a489?s=128&d=identicon&r=PG&f=1", "display_name": "best worker", "link": "https://stackoverflow.com/users/4600818/best-worker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 59210272, "answer_count": 2, "score": 0, "last_activity_date": 1575624891, "creation_date": 1575622174, "question_id": 59209742, "link": "https://stackoverflow.com/questions/59209742/perl-getting-unexpected-result-while-using-print-function", "title": "Perl - getting unexpected result while using print function", "body": "<p>Hi I am trying to create a file with contents as given below</p>\n\n<pre><code>$outfile = `hostname`;\n$txt = \"\\nHealth check results - \";\n$txt .= `hostname`;\n$txt .= \"\\n===========================================\";\nprint \"$txt\";\n\n# Create output file to store the HC results.\n\nopen $fh, '&gt;', $outfile or die \"Can't open $outfile \\n\";\nprint $fh $txt;\nclose ($fh)\n</code></pre>\n\n<p>the output comes like below</p>\n\n<p>Health check results - XXHOSTNAMEXX</p>\n\n<p>===========================================XXHOSTNAMEXX</p>\n\n<p>why is the hostname getting printed twice, which I dont need the second time printing of hostname at the end.</p>\n\n<p>Also I am trying to create filename as hostname as you see above in code, where it creates the file name as hostname, however I see a newline character is appended to the filename which I noticed while listing the files in the dir(using ls -ltr)(ie., the filename itlself is displayed with two lines - first line is hostname and an empty newline appended to the filename)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575601191, "post_id": 59205773, "comment_id": 104630127, "body": "NOTE: Is it CSV (comma separated value) or TSV (tab separated value) file? In header you stated CVS but in the message TSV data file."}, {"owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "edited": false, "score": 0, "creation_date": 1575611476, "post_id": 59205773, "comment_id": 104632481, "body": "Apologies - it&#39;s tab-delimited, and I made the change above."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1575615135, "post_id": 59205773, "comment_id": 104633613, "body": "Looks like the <code>&lt;$input&gt;</code> somehow returns two lines together (so then <code>split</code>ing on tabs leaves the timestamp and the next thing, <code>-21.58</code>, as one field).  It&#39;s about your data, the shown code seems correct.  I don&#39;t know how and why this would happen ... faulty linefeed?"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1575628646, "post_id": 59206216, "comment_id": 104639407, "body": "But that&#39;s the output the OP doesn&#39;t want. What he wants is <code>&#39;...&#39;</code> around the timestamp."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1575629396, "post_id": 59206216, "comment_id": 104639798, "body": "I do not see any reference to <code>...</code> in his post. He refers to apostrophes -- <a href=\"https://en.wikipedia.org/wiki/Apostrophe\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Apostrophe</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1575631442, "post_id": 59206216, "comment_id": 104640748, "body": "Yes, <code>...</code> just means &quot;some stuff&quot; - so he wants apostrophes around the timestamp. I see you&#39;ve changed your code to do that now."}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": true, "score": 1, "last_activity_date": 1575629241, "last_edit_date": 1575629241, "creation_date": 1575601057, "answer_id": 59206216, "question_id": 59205773, "link": "https://stackoverflow.com/questions/59205773/read-a-tab-delimited-file-and-output-formatted-rows/59206216#59206216", "title": "Read a Tab-Delimited file and output formatted rows", "body": "<p>Hmm, your code looks to me as correct -- for some reason it looks like <code>chomp</code> did not strip <code>\\n</code> from the line.</p>\n\n<p>I slightly changed your code and it produces expected result \n(I read data from <strong>DATA</strong> block with output to the screen)</p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nwhile (my $line = &lt;DATA&gt;) {\n    chomp $line;\n\n    my($lat,$lon,$dep,$time) = split /\\t/, $line;\n\n    printf \"{'lat': %.2f, 'lon': %.2f, 'dep': %2d, 'time': UTCDateTime('%s')}\\n\", \n                $lat+0,\n                $lon+0,\n                $dep+0,\n                $time;\n}\n\n__DATA__\n-24.30869102    -69.83711243    55.14122391 2018-09-23T05:32:11.909\n-24.30869103    -69.83711242    55.14122392 2018-09-23T05:32:11.910\n-24.30869104    -69.83711241    55.14122392 2018-09-23T05:32:11.911\n-24.30869105    -69.83711240    55.14122392 2018-09-23T05:32:11.912\n</code></pre>\n\n<p>output</p>\n\n<pre><code>{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime('2018-09-23T05:32:11.909')}\n{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime('2018-09-23T05:32:11.910')}\n{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime('2018-09-23T05:32:11.911')}\n{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime('2018-09-23T05:32:11.912')}\n</code></pre>\n\n<p>NOTE: in future please provide 3-5 lines of data from a file you process</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1575628584, "creation_date": 1575628584, "answer_id": 59211461, "question_id": 59205773, "link": "https://stackoverflow.com/questions/59205773/read-a-tab-delimited-file-and-output-formatted-rows/59211461#59211461", "title": "Read a Tab-Delimited file and output formatted rows", "body": "<p>Perhaps I'm missing something here, but I think that all you need to do here is to put single quote marks around the <code>%s</code> in your <code>printf()</code> statement.</p>\n\n<pre><code>printf $outfh (\"{'lat': %.2f, 'lon': %.2f, 'dep': %2d, 'time': UTCDateTime('%s')}\", $lat, $lon, $dep, $time);\n</code></pre>\n\n<p>I then get this output:</p>\n\n<pre><code>{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime('2018-09-23T05:32:11.909')}\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59206216, "answer_count": 2, "score": -1, "last_activity_date": 1575629241, "creation_date": 1575597419, "last_edit_date": 1575611459, "question_id": 59205773, "link": "https://stackoverflow.com/questions/59205773/read-a-tab-delimited-file-and-output-formatted-rows", "title": "Read a Tab-Delimited file and output formatted rows", "body": "<p>New to Perl: I have a 500-row tab-delimited text file that looks like this:</p>\n\n<pre><code>-24.30869102    -69.83711243    55.14122391 2018-09-23T05:32:11.909\n</code></pre>\n\n<p>I want to output a 500-row text file where each line looks like this:</p>\n\n<pre><code>{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime('2018-09-23T05:32:11.909')}\n</code></pre>\n\n<p>The following code, though, doesn't produce that line.  It produces this:</p>\n\n<pre><code>{'lat': -24.31, 'lon': -69.84, 'dep': 55, 'time': UTCDateTime(2018-09-23T05:32:11.909\n-21.58013344)} \n</code></pre>\n\n<p>I can't get the datetime in the UTCDateTime to have apostrophes, and another latitude (next row) is added at the ended.  Why?  My code is provided below:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen(my $input, \"&lt;\", \"all_data.txt\")\n    or die \"Can't open &lt; file: $!\";\n\nmy $output = 'formatted_hypo.txt';\nopen my $outfh, '&gt;', $output;\n\nwhile (my $line = &lt;$input&gt;) {\n    chomp $line;\n    my @columns = split /\\t/, $line;\n    my $lat = $columns[0];\n    my $lon = $columns[1];\n    my $dep = $columns[2];\n    my $time = $columns[3];\n\n    printf $outfh (\"{'lat': %.2f, 'lon': %.2f, 'dep': %2d, 'time': UTCDateTime(%s)}\", $lat,$lon,$dep,$time);\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1575587515, "post_id": 59204393, "comment_id": 104627046, "body": "<code>use warnings</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1575587912, "post_id": 59204393, "comment_id": 104627153, "body": "@mob redefinition by importing the same function twice does not warn."}, {"owner": {"reputation": 49, "user_id": 11706005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037b1dd2cbc5989f8f1b25943defdcd3?s=128&d=identicon&r=PG&f=1", "display_name": "kdbl11", "link": "https://stackoverflow.com/users/11706005/kdbl11"}, "edited": false, "score": 0, "creation_date": 1575588475, "post_id": 59204393, "comment_id": 104627300, "body": "Im also using use warnings. No warnings for this."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1575601698, "post_id": 59204393, "comment_id": 104630224, "body": "<code>use warnings</code> inside <code>one.pm</code> and <code>two.pm</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1575604885, "post_id": 59204393, "comment_id": 104630911, "body": "Re &quot;<i>Im also using use warnings. No warnings for this.</i>&quot;, That&#39;s not true. First of all, the code you posted doesn&#39;t even compile. Once you fix that (by adding <code>1;</code> to each module and using the wright quotes), it issues the following warning: <code>Subroutine temp redefined at two.pm line 1.</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1575604918, "post_id": 59204393, "comment_id": 104630919, "body": "@Grinnz, Nothing&#39;s being imported"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1575612213, "post_id": 59204393, "comment_id": 104632703, "body": "@ikegami I was perhaps erroneously assuming these were exporting modules with their own packages (clearly they aren&#39;t the actual code if anything is currently working), but your answer covers well what do to if that&#39;s not the case."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1575612910, "post_id": 59204393, "comment_id": 104632908, "body": "@Grinnz, We could speculate all day about the code actually ran, but it&#39;s obviously different than what they posted. (Why do soooo many people falsly claim &quot;this code outputs that&quot;.) I was just saying mob&#39;s advice shouldn&#39;t be discounted in this situation (or in general). But your first comment did prompt the addition of the bottom section of my answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575600307, "post_id": 59204423, "comment_id": 104629964, "body": "Re &quot;<i>but before any runtime code is executed</i>&quot;, Before any other code is compiled, even. <code>use one;</code> executes <code>one.pm</code> before even parsing <code>use two;</code>"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1575586395, "creation_date": 1575586395, "answer_id": 59204423, "question_id": 59204393, "link": "https://stackoverflow.com/questions/59204393/is-the-order-of-use-of-perl-modules-followed-when-evaluating-subroutines/59204423#59204423", "title": "Is the order of use of perl modules followed when evaluating subroutines?", "body": "<p>Yes. A <a href=\"https://perldoc.pl/functions/use\" rel=\"nofollow noreferrer\">use statement</a> is equivalent to:</p>\n\n<pre><code>BEGIN { require Module; Module-&gt;import( LIST ); }\n</code></pre>\n\n<p>And Perl runs all compile time code (BEGIN blocks and use statements) in the <a href=\"https://perldoc.pl/perlmod#BEGIN%2C-UNITCHECK%2C-CHECK%2C-INIT-and-END\" rel=\"nofollow noreferrer\">order it appears</a> (but before any runtime code is executed):</p>\n\n<blockquote>\n  <p>You may have multiple BEGIN blocks within a file (or eval'ed string); they will execute in order of definition.</p>\n</blockquote>\n\n<p>What creates the subroutine in the current package is usually that module's <a href=\"https://perldoc.pl/functions/import\" rel=\"nofollow noreferrer\">import method</a>, which will override any existing subroutines with those names at the time it runs.</p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1575630942, "post_id": 59205725, "comment_id": 104640530, "body": "In your first <code>perl -w temp.pl</code>, did you meant to omit the <code>-w</code>?"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1575646067, "last_edit_date": 1575646067, "creation_date": 1575596965, "answer_id": 59205725, "question_id": 59204393, "link": "https://stackoverflow.com/questions/59204393/is-the-order-of-use-of-perl-modules-followed-when-evaluating-subroutines/59205725#59205725", "title": "Is the order of use of perl modules followed when evaluating subroutines?", "body": "<p>The last one you compile wins, and <code>use</code> and <code>require</code> statements run in order from top to bottom (including any nesting inside modules that you include).</p>\n\n<p>In this case, you have two module files, neither of which declare a package. Since they don't declare a package, they both use the default package <code>main</code>. Everything these modules define will show up in the <code>main</code> package. </p>\n\n<p>Likewise, your program is also using the default package <code>main</code>, which is how is knows there is a <code>temp</code> subroutine. Since you loaded <em>two.pm</em> last, that's the definition that wins. </p>\n\n<p>Now, let's fix up the code in your question because it doesn't actually work. Neither of those modules will load because neither returns a true value.</p>\n\n<p>Both modules now have the same code because I can use the <code>__FILE__</code> token to tell me which code ran:</p>\n\n<p><em>one.pm</em>:</p>\n\n<pre><code>sub temp { print 'From ' . __FILE__ }\n1;\n</code></pre>\n\n<p><em>two.pm</em>:</p>\n\n<pre><code>sub temp { print 'From ' . __FILE__ }\n1;\n</code></pre>\n\n<p><em>temp.pl</em>:</p>\n\n<pre><code>use lib qw(.);\nuse one;\nuse two;\n\ntemp();\n</code></pre>\n\n<p>Running this outputs the message from <em>two.pm</em> because that's the last one defined:</p>\n\n<pre><code>$ perl temp.pl\nFrom two.pm\n</code></pre>\n\n<p>Run your program with warnings and you'll see there's a redefinition (which in this case is intentional): </p>\n\n<pre><code>$ perl -w temp.pl\nSubroutine temp redefined at two.pm line 1.\nFrom two.pm\n</code></pre>\n\n<p>The trick, then, is to ensure that your new code always comes last. One way to do this is to load the old module from the new one:</p>\n\n<p><em>two.pm</em>:</p>\n\n<pre><code>use one;\nsub temp { print 'From ' . __FILE__ }\n1;\n</code></pre>\n\n<p>I won't go any further with your example because I figure it's not your actual situation. I do write about these sorts of things in <a href=\"https://www.effectiveperlprogramming.com\" rel=\"nofollow noreferrer\">Effective Perl Programming</a> though.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1575613017, "last_edit_date": 1575613017, "creation_date": 1575603669, "answer_id": 59206540, "question_id": 59204393, "link": "https://stackoverflow.com/questions/59204393/is-the-order-of-use-of-perl-modules-followed-when-evaluating-subroutines/59206540#59206540", "title": "Is the order of use of perl modules followed when evaluating subroutines?", "body": "<p>You should not write modules like that! Your just going to get into problems, including the one you're asking about. Any file loaded using <code>use</code> should have corresponding <code>package</code>. And they must end on a true value. (Your code doesn't compile because you failed to do so.)</p>\n\n<p>Before I got on, let me mention that you should ALWAYS use <code>use strict; use warnings;</code>. Also note that lowercase module names are traditionally used for pragmas, modules that change how Perl itself behaves. It's a poor practice to use lowercase module names for other purposes.</p>\n\n<p>Back to the point. At a minimum, you need the following:</p>\n\n<p><code>One.pm</code>:</p>\n\n<pre><code>package One;\nuse strict;\nuse warnings;\nsub temp { ... }\n1;\n</code></pre>\n\n<p><code>Two.pm</code>:</p>\n\n<pre><code>package Two;\nuse strict;\nuse warnings;\nsub temp { ... }\n1;\n</code></pre>\n\n<p>The script would now look like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse One qw( );\nuse Two qw( );\nOne::temp();\nTwo::temp();\n</code></pre>\n\n<p>And now you see that your problem is moot; there's no question about which sub is called.</p>\n\n<hr>\n\n<p>But, what if you didn't want to prefix all the calls with <code>One::</code> or <code>Two::</code>? We can do that!</p>\n\n<p><code>One.pm</code>:</p>\n\n<pre><code>package One;\nuse strict;\nuse warnings;\nuse Exporter qw( import );\nour @EXPORT_OK = qw( temp );\nsub temp { ... }\n1;\n</code></pre>\n\n<p><code>Two.pm</code>:</p>\n\n<pre><code>package Two;\nuse strict;\nuse warnings;\nuse Exporter qw( import );\nour @EXPORT_OK = qw( temp );\nsub temp { ... }\n1;\n</code></pre>\n\n<p>The script would now look like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse One qw( );\nuse Two qw( temp );\nOne::temp();\nTwo::temp();\ntemp();         # Calls Two::temp() because we imported temp from Two.\n</code></pre>\n\n<hr>\n\n<p>If you somehow did the following or equivalent, the last one would win out.</p>\n\n<pre><code>use One qw( temp );\nuse Two qw( temp );\n</code></pre>\n\n<p>That's why it's good to always list the subs you import. Don't use</p>\n\n<pre><code>use Foo;         # Import default exports\n</code></pre>\n\n<p>Instead, use</p>\n\n<pre><code>use Foo qw( );   # Only import the listed exports. (None, in this case.)\n</code></pre>\n\n<p>If nothing else, it also makes it a lot easier to find subs and their documentation when maintaining the module.</p>\n"}], "owner": {"reputation": 49, "user_id": 11706005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037b1dd2cbc5989f8f1b25943defdcd3?s=128&d=identicon&r=PG&f=1", "display_name": "kdbl11", "link": "https://stackoverflow.com/users/11706005/kdbl11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1575646067, "creation_date": 1575586221, "last_edit_date": 1575589055, "question_id": 59204393, "link": "https://stackoverflow.com/questions/59204393/is-the-order-of-use-of-perl-modules-followed-when-evaluating-subroutines", "title": "Is the order of use of perl modules followed when evaluating subroutines?", "body": "<p>I have a perl module that has a frequently used subroutine. For a specific set of scripts I need to override this subroutine so i created another module that has the new implementation. Does anyone know if the call order of the perl modules are always followed?</p>\n\n<p>Ex.:</p>\n\n<p><code>one.pm</code>:</p>\n\n<pre><code> sub temp{   print \u201chi\u201d; }\n</code></pre>\n\n<p><code>two.pm</code>:</p>\n\n<pre><code>sub temp{   print \u201chello\u201d; }\n</code></pre>\n\n<p><code>sample.pl</code>:</p>\n\n<pre><code>use one; use two;\n\ntemp();\n</code></pre>\n\n<p>I have tested this and it prints \u201chello\u201d as expected. But I wanted to make sure that this is always the case. Is the evaluation of imported modules in order all the time?</p>\n"}, {"tags": ["linux", "perl", "solaris"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1575583223, "post_id": 59203886, "comment_id": 104625701, "body": "Does you Linux server have the <code>&#47;apps&#47;sun5</code> directory?"}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1575583291, "post_id": 59203886, "comment_id": 104625726, "body": "(Linux limits the shebang to around 128 characters too... not sure how long your actual path it)"}, {"owner": {"reputation": 1533, "user_id": 7332065, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2ae4265336276a4d47e0962e47d3d37f?s=128&d=identicon&r=PG&f=1", "display_name": "Conner M.", "link": "https://stackoverflow.com/users/7332065/conner-m"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1575583370, "post_id": 59203886, "comment_id": 104625757, "body": "@mob yes, the shebang dir is on the Linux server"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1575583490, "post_id": 59203886, "comment_id": 104625792, "body": "That seems highly unlikely, a Linux Perl would not be installed in such a place. If you copied the Perl from the Solaris server, it will not work because it is a different architecture."}, {"owner": {"reputation": 1533, "user_id": 7332065, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2ae4265336276a4d47e0962e47d3d37f?s=128&d=identicon&r=PG&f=1", "display_name": "Conner M.", "link": "https://stackoverflow.com/users/7332065/conner-m"}, "edited": false, "score": 0, "creation_date": 1575584039, "post_id": 59203886, "comment_id": 104625993, "body": "Judging by the timestamp for the /bin/perl file on the Linux server, i.e. Nov 10 2010, it may have just been synced over. Same timestamp on the Solaris server."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1575588860, "post_id": 59203886, "comment_id": 104627397, "body": "You need to use a Perl that was build for that Linux architecture. There will probably be one at <code>&#47;usr&#47;bin&#47;perl</code> but depending on Linux distribution you may need to install additional packages for it to be complete, and it&#39;s best to keep applications separate from the Perl used by the system. You can use <a href=\"http://metacpan.org/pod/perl-build\" rel=\"nofollow noreferrer\">perl-build</a> to build any specific version of Perl on the Linux machine in an arbitrary location. Even though Perl tries to remain compatible across versions, you should start by building the same version of Perl as it was running with on Solaris."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1575599690, "post_id": 59203886, "comment_id": 104629830, "body": "Did you try to run <code>which perl</code>? Did you try to run <code>perl</code> manually to see if it will respond to the call?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1575602993, "post_id": 59203886, "comment_id": 104630481, "body": "Change your shebang to <code>&#47;usr&#47;bin&#47;env perl</code>. On Solaris, put <code>&#47;apps&#47;sun5&#47;...&#47;software&#47;perl&#47;bin</code> on-path, before the other <code>bin&#47;</code> folders like <code>&#47;usr&#47;bin</code> and <code>&#47;usr&#47;ucb&#47;bin</code>. Also see <a href=\"https://stackoverflow.com/q/21612980/608639\">Why is #!/usr/bin/env bash superior to #!/bin/bash?</a>, <a href=\"https://unix.stackexchange.com/q/29608\">Why is it better to use \u201c#!/usr/bin/env NAME\u201d instead of \u201c#!/path/to/NAME\u201d as my shebang?</a>, <a href=\"https://www.cyberciti.biz/tips/finding-bash-perl-python-portably-using-env.html\" rel=\"nofollow noreferrer\">Make Linux/Unix Script Portable With #!/usr/bin/env As a Shebang</a>, etc."}, {"owner": {"reputation": 195, "user_id": 11088330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d627fd96cf8773974efdb4de511155a4?s=128&d=identicon&r=PG&f=1", "display_name": "ennox", "link": "https://stackoverflow.com/users/11088330/ennox"}, "edited": false, "score": 0, "creation_date": 1575639850, "post_id": 59203886, "comment_id": 104644675, "body": "Dear, these are really the basics, get some training. The file command is also your friend, it will tell you for what cpu type the binary has been compiled and linked. And if a folder is named sun5 .. well then expect binaries there for a sun5 HW architecture. Your Linux is must likely based on Intel or AMD CPU. Then you need to look where the perl binaries of your system are. Enter &quot;which perl&quot; on the command line in the hope your PATH variable is properly set. Otherwise use &quot;find / -type f -name perl -print&quot; and think about which path makes sense ..."}], "answers": [{"comments": [{"owner": {"reputation": 1533, "user_id": 7332065, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2ae4265336276a4d47e0962e47d3d37f?s=128&d=identicon&r=PG&f=1", "display_name": "Conner M.", "link": "https://stackoverflow.com/users/7332065/conner-m"}, "edited": false, "score": 0, "creation_date": 1575585555, "post_id": 59204152, "comment_id": 104626459, "body": "Did you see @Grinnz comment? The perl is installed at the shebang location. But it sounds like it might not be compatible with the Linux architecture. Do you know if there are different perl versions for Linux vs Solaris?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 1533, "user_id": 7332065, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2ae4265336276a4d47e0962e47d3d37f?s=128&d=identicon&r=PG&f=1", "display_name": "Conner M.", "link": "https://stackoverflow.com/users/7332065/conner-m"}, "edited": false, "score": 2, "creation_date": 1575586149, "post_id": 59204152, "comment_id": 104626659, "body": "The perl installed at that location is a solaris binary, not compatible with the linux kernel. It won&#39;t run. Use the Linux version of perl that&#39;s installed with Linux. Custom perl installations across platforms (OS/CPU) can be done, but are generally much more complex than is required."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1533, "user_id": 7332065, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2ae4265336276a4d47e0962e47d3d37f?s=128&d=identicon&r=PG&f=1", "display_name": "Conner M.", "link": "https://stackoverflow.com/users/7332065/conner-m"}, "edited": false, "score": 0, "creation_date": 1575604677, "post_id": 59204152, "comment_id": 104630871, "body": "@Conner M., What are you trying to do? If you&#39;re doing this because you want a specific version of Perl, that&#39;s pretty easy to do (and especially so using <code>perlbrew</code>)."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1575631957, "last_edit_date": 1575631957, "creation_date": 1575584608, "answer_id": 59204152, "question_id": 59203886, "link": "https://stackoverflow.com/questions/59203886/linux-not-recognizing-perl-shebang/59204152#59204152", "title": "Linux not recognizing perl shebang", "body": "<p>Change your shebang line to <code>#!/usr/bin/perl</code> or wherever perl is installed. Another alternative is <code>#!/bin/env perl</code> if <code>perl</code> is in your PATH.</p>\n"}], "owner": {"reputation": 1533, "user_id": 7332065, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2ae4265336276a4d47e0962e47d3d37f?s=128&d=identicon&r=PG&f=1", "display_name": "Conner M.", "link": "https://stackoverflow.com/users/7332065/conner-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575631957, "creation_date": 1575583169, "question_id": 59203886, "link": "https://stackoverflow.com/questions/59203886/linux-not-recognizing-perl-shebang", "title": "Linux not recognizing perl shebang", "body": "<p>I have a perl job migrated from a Solaris server to a Linux server that is failing I believe because the Linux version is not respecting the shebang, which the Solaris server handled no problem.</p>\n\n<p>perl file shebang:</p>\n\n<pre><code>#!/apps/sun5/.../software/perl/bin/perl\n</code></pre>\n\n<p>Solaris version:</p>\n\n<pre><code>SunOS 5.10 Generic_150400-63 sun4u sparc SUNW,Sun-Fire-V445\n</code></pre>\n\n<p>Linux version:</p>\n\n<pre><code>Linux 2.6.32-754.23.1.el6.x86_64 \n</code></pre>\n\n<p>To get the job to complete successfully, I've had to revert to the old Solaris server. Is there a tweak I can make to the shebang so that the script is recognized as a perl script by the Linux server?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3130, "user_id": 3357270, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8a77dec53ee3047e11beac034c4abc9c?s=128&d=identicon&r=PG", "display_name": "Damon", "link": "https://stackoverflow.com/users/3357270/damon"}, "edited": false, "score": 0, "creation_date": 1575571165, "post_id": 59200599, "comment_id": 104620504, "body": "This is exactly what I had figured. Complete syntax problem due to flat lack of figuring out what was getting returned where/how. I&#39;ve updated my script to return a better structure then used your suggestion. Home run - thank you very much for your time!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1575569774, "last_edit_date": 1575569774, "creation_date": 1575567739, "answer_id": 59200599, "question_id": 59200514, "link": "https://stackoverflow.com/questions/59200514/return-a-json-object-from-perl/59200599#59200599", "title": "Return a JSON object from Perl", "body": "<p>This is a matter of formatting your data structure the way you want, not really JSON which just creates a representation of how you've structured it.</p>\n\n<p>Hashes in Perl map to JSON objects. You can create a hash out of a list ordered in alternating key-value pairs, indeed in the same way you create the overall structure to pass to <code>encode_json</code>.</p>\n\n<p>Say if your subroutine returned a hashref instead of an arrayref as the <code>$payload</code>:</p>\n\n<pre><code>return {foo =&gt; $foo};\n</code></pre>\n\n<p>And have it return <code>undef</code> rather than an empty structure to indicate not found, this is a clearer indication and can be tested with <code>defined</code> or the <code>//</code> (defined-or) operator.</p>\n\n<p>Then you could set that as the value and it would be encoded to a JSON object:</p>\n\n<pre><code>encode_json({\n    'status' =&gt; defined($payload) ? 200 : 404,\n    'message' =&gt; defined($payload) ? 'OK' : 'Not found.',\n    'data' =&gt; $payload // {},\n});\n</code></pre>\n"}], "owner": {"reputation": 3130, "user_id": 3357270, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8a77dec53ee3047e11beac034c4abc9c?s=128&d=identicon&r=PG", "display_name": "Damon", "link": "https://stackoverflow.com/users/3357270/damon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 59200599, "answer_count": 1, "score": 0, "last_activity_date": 1575571183, "creation_date": 1575567401, "last_edit_date": 1575571183, "question_id": 59200514, "link": "https://stackoverflow.com/questions/59200514/return-a-json-object-from-perl", "title": "Return a JSON object from Perl", "body": "<p>I am not very familiar with Pearl so please forgive my facepalm of a question.\nI'm trying &amp; failing miserably to return a <code>JSON</code> object from a subroutine.</p>\n\n<p>I have created a <code>.pl</code> file that makes a query and returns some data. Great - I can get a response and here is what my data looks like that is returning that object:</p>\n\n<pre><code># Print JSON\nprint encode_json({\n    'status' =&gt; scalar(@$payload) &gt; 0 ? 200 : 404,\n    'message' =&gt; scalar(@$payload) &gt; 0 ? 'OK' : 'Not found.',\n    'data' =&gt; scalar(@$payload) &gt; 0 ? $payload : []\n});\n\n// $payload = mySubRoutine({...});\n</code></pre>\n\n<p>The actual response looks like this:</p>\n\n<pre><code>{\n    \"message\": \"OK\",\n    \"status\": 200,\n    \"data\": [\n        \"foo\",\n        8\n    ]\n}\n</code></pre>\n\n<p>Which <em>technically</em> works, but just feels super gross getting to the data using <code>data[1]</code>. </p>\n\n<p>From my <code>sub</code> I am returning the data like this (resulting in the above):</p>\n\n<pre><code>...\n$my foo = 8;\nreturn ([\"foo\" =&gt; $foo]);\n</code></pre>\n\n<p>This is what I'm trying to accomplish:</p>\n\n<pre><code>{\n    \"message\": \"OK\",\n    \"status\": 200,\n    \"data\": [\n        {\"foo\":8}\n    ]\n}\n</code></pre>\n\n<p>I have tried to export a <code>JSON</code> object like this (and works):</p>\n\n<pre><code>my $json = JSON::XS::encode_json({foo =&gt; $foo});\ndie Data::Dumper::Dumper($json);  // $VAR1 = '{\"foo\":8}';\n</code></pre>\n\n<p>Great - getting closer, now I just need to return that from my subroutine instead of dumping it out:</p>\n\n<pre><code>my $json = JSON::XS::encode_json({foo =&gt; $foo});\nreturn $json;\n</code></pre>\n\n<p>However, doing that gives me this error:</p>\n\n<blockquote>\n  <p>Can't use string (\"{\"foo\":8}\") as an ARRAY ref while \"strict refs\" in use</p>\n</blockquote>\n\n<p>Now I'm talking myself in circles to return the data from my subroutine in an acceptable format. I've also looked at <a href=\"https://stackoverflow.com/questions/14095410/convert-array-of-hashes-to-json\">this SO post</a> to return <code>JSON</code>. I still am left with some version of the above error.</p>\n\n<p>Any suggestions on the correct syntax would be appreciated!    </p>\n"}, {"tags": ["java", "windows", "perl", "svn"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1575562536, "post_id": 59198866, "comment_id": 104616311, "body": "Can you run the command <code>svn --version</code> from java?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1575563819, "post_id": 59199458, "comment_id": 104617035, "body": "Each process has its own environment (which is inherited from its parent). Changes in one process&#39;s environment has no effect on the environment of other processes. Windows does have a mechanism for notifying processes of changes to the initial environment, but it&#39;s up to each app to listen and handle these notifications."}], "tags": [], "owner": {"reputation": 168, "user_id": 4959133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0ca9af6cd28977480611d2c61a5aac9?s=128&d=identicon&r=PG&f=1", "display_name": "Eike S", "link": "https://stackoverflow.com/users/4959133/eike-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1575563319, "creation_date": 1575563319, "answer_id": 59199458, "question_id": 59198866, "link": "https://stackoverflow.com/questions/59198866/perl-process-cant-find-command-svn-when-called-from-java/59199458#59199458", "title": "Perl Process can&#39;t find command svn when called from Java", "body": "<p>I figured it out. The reason was that I had just installed svn and the PATH envirment variable took effect for cmd but not for other processes (for whatevery reason). After a computer restart everything works as expected.</p>\n"}], "owner": {"reputation": 168, "user_id": 4959133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0ca9af6cd28977480611d2c61a5aac9?s=128&d=identicon&r=PG&f=1", "display_name": "Eike S", "link": "https://stackoverflow.com/users/4959133/eike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 59199458, "answer_count": 1, "score": 2, "last_activity_date": 1575563319, "creation_date": 1575561330, "question_id": 59198866, "link": "https://stackoverflow.com/questions/59198866/perl-process-cant-find-command-svn-when-called-from-java", "title": "Perl Process can&#39;t find command svn when called from Java", "body": "<p>I need to automatically execute some perl scripts from Java. I use <code>Runtime.getRuntime().exec</code> to start the perl process. I generate a start-parameter-string and pass it as an argument to exec. The String looks somewhat like this: </p>\n\n<p><code>cmd /C start /wait perl \"path\\to\\perl\\script\" -p1 scriptparameter1 -p2 scriptparameter2</code></p>\n\n<p>I also tried</p>\n\n<p><code>perl \"path\\to\\perl\\script\" -p1 scriptparameter1 -p2 scriptparameter2</code>.</p>\n\n<p>If I copy that String and execute it via Windows+R everything works, but via exec the Perl-scripts can't find the svn-command. Why does it make a difference if I execute the perl process from java instead of directly from windows?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575556718, "post_id": 59197082, "comment_id": 104613012, "body": "use case : many many elements, very long strings ....     array_diff() would be heavy"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1575557657, "post_id": 59197082, "comment_id": 104613552, "body": "Use Data::Dumper on each or freeze from the Storable module then a simple eq test will prove if they are the same or different."}, {"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1575558277, "post_id": 59197082, "comment_id": 104613892, "body": "thanks, but this piece of code will run in a bigger Perl program several times a week in batch mode ...."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1575560038, "post_id": 59197082, "comment_id": 104614869, "body": "Do you consider them different if they contain the same elements in a different order?"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575560100, "post_id": 59198394, "comment_id": 104614898, "body": "as I said, if a little thing is different, eg :   (&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) is not different from (&quot;a&quot;, &quot;c&quot;, &quot;b&quot;), but differs from (&quot;b&quot;, &quot;c&quot;) or (&quot;a&quot;, &quot;c&quot;, &quot;c&quot;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575560208, "post_id": 59198394, "comment_id": 104614958, "body": "So you&#39;re saying order is unimportant? Just sort them first."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575560921, "post_id": 59198394, "comment_id": 104615335, "body": "Of course, if you&#39;ve got a large set of unordered strings, using an array might not make as much sense as using a hash. (Store the strings as keys of the elements. The values don&#39;t matter. If you can have duplicates, the value can be a count.)"}, {"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575561920, "post_id": 59198394, "comment_id": 104615959, "body": "i could sort, turn to scalar (so a huge string as result) and just compare the two final huge strings .. not so light because of sort - i think about somethind like a light checksum on the two (untouched) arrays and just compare the 2 results"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575562933, "post_id": 59198394, "comment_id": 104616531, "body": "You have it all backwards. Building a huge string or calculating checksums require processing every character of every string. If you have tons of long strings like you say, this is bad! sort + the code I posted doesn&#39;t need to do that. And if you&#39;re going to process the entire string using a hash or trie or similar makes more sense than a checksum."}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1575564723, "post_id": 59198394, "comment_id": 104617474, "body": "Ah, it treats all strings as 0 in numeric context. But why doesn&#39;t this produce a warning?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1575565902, "post_id": 59198394, "comment_id": 104618063, "body": "@Holli, Re &quot;<i>it treats all strings as 0 in numeric context.</i>&quot;, If it doesn&#39;t look like a number, yes. ///  Re &quot;<i>why doesn&#39;t this produce a warning?</i>&quot;, It does. <code>Argument &quot;0a&quot; isn&#39;t numeric in numeric eq (==)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575566175, "post_id": 59198394, "comment_id": 104618194, "body": "To be clear, the last item in the list doesn&#39;t return to <code>a0</code> or <code>0a</code>, but to <code>$x</code> after <code>my $x = &quot;a&quot;;  0+$x;</code>"}, {"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1575642912, "post_id": 59198394, "comment_id": 104646178, "body": "sometimes .... you update a code which is not yours, and here I can&#39;t change all the lines :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1575669469, "post_id": 59198394, "comment_id": 104657025, "body": "My solution doesn&#39;t involve changing any existing code"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1575559802, "creation_date": 1575559802, "answer_id": 59198394, "question_id": 59197082, "link": "https://stackoverflow.com/questions/59197082/the-lightest-way-to-know-if-2-arrays-are-different/59198394#59198394", "title": "The lightest way to know if 2 arrays are different?", "body": "<p>It depends a lot on what you mean by different. For example, consider the following scalars:</p>\n\n<ul>\n<li>A scalar containing the signed integer <code>0</code>.</li>\n<li>A scalar containing the unsigned integer <code>0</code>.</li>\n<li>A scalar containing the floating point number <code>+0</code>.</li>\n<li>A scalar containing the floating point number <code>-0</code>.</li>\n<li>A scalar containing the string <code>0</code> (stored using the UTF8=0 format).</li>\n<li>A scalar containing the string <code>0</code> (stored using the UTF8=1 format).</li>\n<li>A scalar containing both the string <code>0</code> (stored using the UTF8=0 format) and the signed integer <code>0</code>.</li>\n<li>A scalar containing both the string <code>a</code> (stored using the UTF8=0 format) and the signed integer <code>0</code>.</li>\n</ul>\n\n<p>Array elements can be any of these. Which of these should be considered the same, and which should be considered different? (<code>==</code> considers them all the same, and <code>eq</code> considers all by the last the same.)</p>\n\n<p>The following sub considers an undefined scalar to be different than a defined one, and it considers a scalar to be different than another one if their <code>eq</code> considers them different.</p>\n\n<pre><code>sub compare_arrays {\n   my ($x, $y) = @_;\n   return 0 if @$x != @$y;\n\n   for (0..$#$x) {\n      if (defined($x-&gt;[$_])) {\n         return 0 if $x-&gt;[$_] ne $y-&gt;[$_];\n      } else {\n         return 0 if !defined($y-&gt;[0]);\n      }\n   }\n\n   return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575719991, "creation_date": 1575719991, "answer_id": 59225752, "question_id": 59197082, "link": "https://stackoverflow.com/questions/59197082/the-lightest-way-to-know-if-2-arrays-are-different/59225752#59225752", "title": "The lightest way to know if 2 arrays are different?", "body": "<p>Let me offer the next piece of code for this purpose</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nmy %hash;\n\nmy $count   = 0;\nmy $flag    = 1;\n\nwhile( $flag ) {\n    $count++;\n\n    no warnings;                        # suppress warnings temporary\n\n    my @array_1 = split ' ', &lt;DATA&gt;;\n    my @array_2 = split ' ', &lt;DATA&gt;;\n\n    use warnings;                       # enable warnings once more\n\n    if( @array_1 == 0 or @array_2 == 0 ) {\n        $flag = 0;\n        say \"It seems we are done\";\n        next;\n    }\n\n    say \"Array set # $count\";\n\n    if( @array_1 !=  @array_2 ) {\n        say \"\\t - have different size\"; # array have different size\n        next;\n    }\n\n    @hash{@array_1} = @array_2;\n\n    my $same = 1;                       # for now assume that all elements are same\n\n    while( my($k,$v) = each %hash ) {\n        $same = 0 if $k != $v;          # well now we know that the elements are different\n    }\n\n    say \"\\t - elements are \" . ($same ? \"same\" : \"different\");\n}\n\n__DATA__\n1 2 3 4 5 6 7 8 9 10\n1 2 3 4 5 6 7 8 9 10\n11 12 13 14 15 16 17 18 19 20\n11 12 13 14 15 16 17 18 19\n21 22 23 24 25 26 27 28 29 30\n21 22 23 24 25 27 26 28 29 30\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1575719991, "creation_date": 1575555300, "last_edit_date": 1575555575, "question_id": 59197082, "link": "https://stackoverflow.com/questions/59197082/the-lightest-way-to-know-if-2-arrays-are-different", "title": "The lightest way to know if 2 arrays are different?", "body": "<p>Without using Array::Utils, I'm looking for a shorter code just to know if 2 arrays are different (just one value or more, or number of elements).</p>\n"}, {"tags": ["perl", "utf-8", "iso-8859-1"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1575538883, "post_id": 59191997, "comment_id": 104603173, "body": "Re &quot;<i>I have read and got the values from the CSV file.</i>&quot;, Did you post the wrong code? It doesn&#39;t read from a CSV file. Please post code that demonstrates your problem."}], "answers": [{"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1575602285, "creation_date": 1575602285, "answer_id": 59206368, "question_id": 59191997, "link": "https://stackoverflow.com/questions/59191997/how-to-fix-the-utf8-issue-for-csv-read-process/59206368#59206368", "title": "How to fix the utf8 issue for CSV read process", "body": "<p>Well, your question is not complete. You did not provide minimal code snippet to understand what you try to do. </p>\n\n<p>You need to take in consideration your output device (probably a screen) which should support <code>utf-8</code> output.</p>\n\n<p>You did not provide any clue what OS (Operating System) you run the code in.</p>\n\n<p>For example if you use Windows 10 (probably earlier version also will work) and try to get output into <code>cmd</code> terminal -- then before output you have to change <strong>code page</strong> to <code>utf-8</code> which can be achieved with <code>chcp 65001</code> command.</p>\n\n<p>If you are in Windows then in <code>cmd</code> terminal window type <code>help chcp</code> and read some documentation.</p>\n\n<p>If you write perl code and inside of the code you use <code>utf-8</code> strings then you need add <code>use utf8</code> in the beginning of your perl code.</p>\n\n<p><a href=\"https://superuser.com/questions/269818/change-default-code-page-of-windows-console-to-utf-8\">Change default code page of Windows console to UTF-8</a></p>\n"}], "owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575602285, "creation_date": 1575538292, "question_id": 59191997, "link": "https://stackoverflow.com/questions/59191997/how-to-fix-the-utf8-issue-for-csv-read-process", "title": "How to fix the utf8 issue for CSV read process", "body": "<p>I have read and got the values from the CSV file. Sometimes I have faced the character encoding issue (uf8). Review my below sample code. </p>\n\n<pre><code> my $value = 'Storno lt. Gl\u00e4ubiger';\n $value = encode( 'iso-8859-1', $value );\n</code></pre>\n\n<p><strong>Result return as</strong>  </p>\n\n<pre><code>Storno lt. Gl\ufffdubiger\nStorno lt. Gl\\xE4ubiger\n</code></pre>\n\n<p>My expecting result is \"Storno lt. Gl\u00e4ubiger\"</p>\n\n<p>How to fix the issue and get the expecting result. </p>\n"}, {"tags": ["perl", "substring"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1575504362, "post_id": 59186323, "comment_id": 104592866, "body": "Change the third parameter to <code>substring()</code>, which is the length of the extracted substring, from <code>3</code> to <code>1</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 2, "last_activity_date": 1575504426, "creation_date": 1575504426, "answer_id": 59186362, "question_id": 59186323, "link": "https://stackoverflow.com/questions/59186323/perl-getting-substring-of-a-number/59186362#59186362", "title": "Perl: Getting substring of a number", "body": "<p>The 3rd arg to <a href=\"https://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\">substr</a> is the string length:</p>\n\n<pre><code>my $number = substr($input, 2, 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1575504502, "creation_date": 1575504502, "answer_id": 59186369, "question_id": 59186323, "link": "https://stackoverflow.com/questions/59186323/perl-getting-substring-of-a-number/59186369#59186369", "title": "Perl: Getting substring of a number", "body": "<p>The documentation for <a href=\"https://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\">substr()</a> states that the third parameter is the length of the string you want to fetch.</p>\n\n<pre><code>my $input = \"12345\";\n\nmy $num = substr($input, 2, 1);\n</code></pre>\n\n<p>So <code>$input</code> is the string, <code>2</code> is the offset, and <code>1</code> is the number of characters to fetch (or 'Length', per the documentation).</p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": -1, "last_activity_date": 1575518508, "creation_date": 1575518508, "answer_id": 59188065, "question_id": 59186323, "link": "https://stackoverflow.com/questions/59186323/perl-getting-substring-of-a-number/59188065#59188065", "title": "Perl: Getting substring of a number", "body": "<p>Just for fun can be done like following</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nmy $input = \"12345\";\n\nmy $number_1 = (split '', $input)[2];\nmy @number_2 = (split '', $input)[2..4];\n\nsay $number_1;\nsay @number_2;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>3\n345\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 3081330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ddc4e0f8de5fee9aa3cb4bf31a9b563?s=128&d=identicon&r=PG&f=1", "display_name": "Ripread", "link": "https://stackoverflow.com/users/3081330/ripread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 59186369, "answer_count": 3, "score": 0, "last_activity_date": 1575519527, "creation_date": 1575504146, "last_edit_date": 1575519527, "question_id": 59186323, "link": "https://stackoverflow.com/questions/59186323/perl-getting-substring-of-a-number", "title": "Perl: Getting substring of a number", "body": "<p>When I run the below code I'm expecting to get <code>3</code> but instead I get <code>345</code>. what's the best way to achieve this?</p>\n\n<pre><code>#!/usr/bin/env perl\n\nmy $input = \"12345\";\nmy $number = substr($input, 2, 3);\nprint $number;\n</code></pre>\n\n<p>Edit: Thanks all for your answers, I now see my mistake in believing it was first and last index.</p>\n"}]