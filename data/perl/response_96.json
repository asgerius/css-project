[{"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1478728952, "post_id": 40516701, "comment_id": 68275177, "body": "Where are tabs in the input? What problems do you have with your script?"}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1478729254, "post_id": 40516701, "comment_id": 68275301, "body": "the text files are tab delimited files. it des not print out the common lines at the end"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1478729620, "post_id": 40516701, "comment_id": 68275444, "body": "Why don&#39;t you <code>split</code> the lines read from SET2?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1478731854, "post_id": 40516701, "comment_id": 68276291, "body": "How many distinct values do you expect in the first column? Why are you printing the entire hash after reading <code>left.txt</code>? Have you considered using a database?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1478732057, "post_id": 40516701, "comment_id": 68276363, "body": "You should take a look at <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-compute-the-difference-of-two-arrays%3f-How-do-I-compute-the-intersection-of-two-arrays%3f\" rel=\"nofollow noreferrer\"><i>How do I compute the difference of two arrays? How do I compute the intersection of two arrays?</i></a> from <code>perldoc perlfaq4</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478737787, "post_id": 40516701, "comment_id": 68278130, "body": "showing expected output would be helpful"}], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1478743063, "post_id": 40518202, "comment_id": 68279352, "body": "Ahaha! <code>OK-ish</code>: you can really say that?"}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1478756012, "post_id": 40518202, "comment_id": 68282203, "body": "Thanks a lot @niry, is there anyway to output the mismatch lines as well? I am trying to do a count of mismatches as well"}, {"owner": {"reputation": 2685, "user_id": 293023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96ae36cc4310f8658e2ef09730ac191d?s=128&d=identicon&r=PG&f=1", "display_name": "niry", "link": "https://stackoverflow.com/users/293023/niry"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1478814488, "post_id": 40518202, "comment_id": 68314636, "body": "@CasimiretHippolyte - yes you can say that... freedom of speech?"}, {"owner": {"reputation": 2685, "user_id": 293023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96ae36cc4310f8658e2ef09730ac191d?s=128&d=identicon&r=PG&f=1", "display_name": "niry", "link": "https://stackoverflow.com/users/293023/niry"}, "reply_to_user": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1478814579, "post_id": 40518202, "comment_id": 68314683, "body": "@AnkP - I edited my answer to include different approach that will give you what you need."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1478817614, "post_id": 40518202, "comment_id": 68315949, "body": "@niry: I didn&#39;t know it exits, I believed you invented it. But since I found it in the urban dictionary."}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1479155608, "post_id": 40518202, "comment_id": 68430103, "body": "Hi @niry thanks for your edited answer which prints out all the common and unique lists. Is there a way to juts count the unique and common lines rather than printing? As When I add count++ to count lines in showByBit I am not getting right number. Thanks!"}, {"owner": {"reputation": 2685, "user_id": 293023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96ae36cc4310f8658e2ef09730ac191d?s=128&d=identicon&r=PG&f=1", "display_name": "niry", "link": "https://stackoverflow.com/users/293023/niry"}, "reply_to_user": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1479253851, "post_id": 40518202, "comment_id": 68477574, "body": "@AnkP, add <code>my $count=0;</code> at the top of showByBit, replace <code>print $a-&gt;[1]</code> with <code>++$count</code> and add <code>print $count, &quot;\\n&quot;;</code> after the foreach loop."}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1479415175, "post_id": 40518202, "comment_id": 68560270, "body": "Thanks a lot @niry I will try this!"}], "tags": [], "owner": {"reputation": 2685, "user_id": 293023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96ae36cc4310f8658e2ef09730ac191d?s=128&d=identicon&r=PG&f=1", "display_name": "niry", "link": "https://stackoverflow.com/users/293023/niry"}, "is_accepted": true, "score": 2, "last_activity_date": 1478814389, "last_edit_date": 1478814389, "creation_date": 1478737709, "answer_id": 40518202, "question_id": 40516701, "link": "https://stackoverflow.com/questions/40516701/find-similarities-and-differences-between-two-large-files-based-on-the-first-col/40518202#40518202", "title": "Find similarities and differences between two large files based on the first column", "body": "<p>Your second read loop code is wrong. It should split by tabs and check. Change it to:</p>\n\n<pre><code>while (&lt;SET2&gt;) {\n    my @line = split (/\\t/, $_);\n    print $_ if exists $Set{$line[0]};\n}\n</code></pre>\n\n<p>And it will work. Your approach is OK-ish. Since you only want to compare the first column, you don't have to set the value of the $Set{} to the second column ($line[1]) you can just set it to '' in attempt to save memory. Also, to save memory make sure left.txt is the smallest of the two. Here is a working example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %Set;\n\nopen (SET1, \"&lt;\", \"left.txt\") or die \"cannot open file\";\n\nwhile (&lt;SET1&gt;) {\n    my @line = split (/\\t/, $_);\n    $Set{$line[0]} = '';\n}\n\nclose SET1;\n\nopen (SET2, \"&lt;\", \"right.txt\") or die \"cannot open file\";\nprint \"common:\\n\";\n\nwhile (&lt;SET2&gt;) {\n    my @line = split (/\\t/, $_);\n    print $_ if exists $Set{$line[0]};\n}\n\nclose SET2;\n</code></pre>\n\n<p>EDIT - here is another approach that will give you what you want</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %Set;\n\nsub readFile {\n    my ($fn, $bit) = @_;\n    open (F, \"&lt;\" ,$fn) or die \"can't open file\";\n    while (&lt;F&gt;) {\n        my ($k) = split (/\\t/, $_);\n        $Set{$k} = $Set{$k} || [0, $_];\n        $Set{$k}[0] |= $bit;\n    }\n    close F;\n}\n\nsub showByBit {\n    my ($k, $bit) = @_;\n    foreach my $key (@{$k}) {\n        my $a = $Set{$key};\n        print $a-&gt;[1] if $a-&gt;[0] == $bit;\n    }\n}\n\nreadFile('left.txt', 1);\nreadFile('right.txt', 2);\nmy @k = keys %Set;\n\nprint \"common lines -\\n\";\nshowByBit(\\@k, 3);\n\nprint \"uncommon lines - left.txt\\n\";\nshowByBit(\\@k, 1);\n\nprint \"uncommon lines - right.txt\\n\";\nshowByBit(\\@k, 2);\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 40518202, "answer_count": 1, "score": 2, "last_activity_date": 1478814389, "creation_date": 1478728680, "last_edit_date": 1478756107, "question_id": 40516701, "link": "https://stackoverflow.com/questions/40516701/find-similarities-and-differences-between-two-large-files-based-on-the-first-col", "title": "Find similarities and differences between two large files based on the first column", "body": "\n\n<p>I have two tab-delimited files with over a million lines, and I need find based on first column how many values are common and how many are specific to just one of the files.</p>\n\n<p>I am trying to do it in Perl with following code, but it isn't working right.</p>\n\n<p>I need to consider the computational time given the size of the files.</p>\n\n<p>Can someone please help me to correct this, or suggest a more efficient method?</p>\n\n<h3>left.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>K00134:78_1 272 1   3057610\nK00134:78_0 272 1   3057610\nK00134:78_2 272 1   3057610\nK00134:78_3 272 1   3057610\n</code></pre>\n\n<h3>right.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>K00134:78_1 272 1   3057610\nK00134:78_5 272 1   3057610\nK00134:78_6 272 1   3057610\nK00134:78_3 272 1   3057610\n</code></pre>\n\n<h3>Perl code</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nmy %Set;\n\nopen (SET1, \"&lt;\", \"left.txt\") or die \"cannot open file\";\n\nwhile (&lt;SET1&gt;) {\n    my @line = split (/\\t/, $_);\n    $Set{$line[0]} = $line[1];\n}\n\nmy @k = keys %Set;\nforeach my $key (@k) {\n    print \"$key, $Set{$key}\\n\";\n}\nclose SET1;\n\nopen (SET2, \"&lt;\", \"right.txt\") or die \"cannot open file\";\nprint \"common:\\n\";\n\nwhile (&lt;SET2&gt;) {\n    chomp;\n\n    if ( exists $Set{\"$_\"} ) {\n        print \"$Set{$_}\\n\";\n    }\n}\n\nclose SET2;\n</code></pre>\n\n<p>The output should look like this, listing the common fields based on first column  - </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>common lines - \nK00134:78_1 272 1   3057610\nK00134:78_3 272 1   3057610\n</code></pre>\n\n<p>uncommon lines -  left.txt</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>K00134:78_0 272 1   3057610\nK00134:78_2 272 1   3057610\n</code></pre>\n\n<p>uncommon lines -  right.txt</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>K00134:78_5 272 1   3057610\nK00134:78_6 272 1   3057610\n</code></pre>\n\n<p>Also, I am trying to add mismatches from each file as output too, but I am not sure if its possible given size of the files. Thanks!</p>\n"}, {"tags": ["perl", "progress-bar", "progress", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 0, "creation_date": 1478722212, "post_id": 40511723, "comment_id": 68271985, "body": "Also, take a look at source code of /bin/lwp-download  of ActivePerl installation."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 3, "creation_date": 1478725487, "post_id": 40511723, "comment_id": 68273644, "body": "@KostiaShiian: lwp-download isn&#39;t specific to ActivePerl. It&#39;s <a href=\"https://metacpan.org/pod/distribution/libwww-perl/bin/lwp-download\" rel=\"nofollow noreferrer\">available from CPAN</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 9, "last_activity_date": 1478708947, "creation_date": 1478708947, "answer_id": 40511723, "question_id": 40511560, "link": "https://stackoverflow.com/questions/40511560/display-lwpuseragent-download-progress/40511723#40511723", "title": "Display LWP::UserAgent download progress", "body": "<p>From the <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"noreferrer\">documentation for the module</a>.</p>\n\n<blockquote>\n  <p><strong>$ua->show_progress</strong></p>\n  \n  <p><strong>$ua->show_progress( $boolean )</strong></p>\n  \n  <p>Get/set a value indicating whether a progress bar should be displayed on the terminal as requests are processed. The default is FALSE.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "edited": false, "score": 0, "creation_date": 1478762908, "post_id": 40521842, "comment_id": 68284688, "body": "Thank you! I&#39;ll take a look at both of them aswell."}, {"owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "edited": false, "score": 0, "creation_date": 1520543977, "post_id": 40521842, "comment_id": 85370901, "body": "LWP::UserAgent::ProgressBar provides a progress bar very much in line with what the OP had in mind.  It&#39;s just not likely to be already installed, if that&#39;s an issue (eg, for portability)"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1478762022, "last_edit_date": 1495542620, "creation_date": 1478762022, "answer_id": 40521842, "question_id": 40511560, "link": "https://stackoverflow.com/questions/40511560/display-lwpuseragent-download-progress/40521842#40521842", "title": "Display LWP::UserAgent download progress", "body": "<p><a href=\"https://stackoverflow.com/a/40511723/257635\">Dave</a> has already answered your question but I would like to suggest below 2 modules.</p>\n\n<ul>\n<li><p><a href=\"https://metacpan.org/pod/LWP::UserAgent::ProgressBar\" rel=\"nofollow noreferrer\">LWP::UserAgent::ProgressBar</a>: A subclass of <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> that provides additional methods <code>get_with_progress</code> and <code>post_with_progress</code>.</p></li>\n<li><p><a href=\"https://metacpan.org/pod/LWP::UserAgent::ProgressAny\" rel=\"nofollow noreferrer\">LWP::UserAgent::ProgressAny</a>: Uses <a href=\"https://metacpan.org/pod/Progress::Any\" rel=\"nofollow noreferrer\">Progress::Any</a> framework, therefore, it can be used to record progress to any output.</p></li>\n</ul>\n"}], "owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1309, "favorite_count": 1, "accepted_answer_id": 40511723, "answer_count": 2, "score": 9, "last_activity_date": 1478762247, "creation_date": 1478708411, "last_edit_date": 1478762247, "question_id": 40511560, "link": "https://stackoverflow.com/questions/40511560/display-lwpuseragent-download-progress", "title": "Display LWP::UserAgent download progress", "body": "<p>I'm downloading a large file directly to a file with Perl using LWP::UserAgent and the <code>:content_file</code> option.</p>\n\n<p>This is a simplified example of my code:</p>\n\n<pre><code>require LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(3600);\n$ua-&gt;env_proxy;\n\nmy $response = $ua-&gt;get(\n    'http://example.com/largefile.xml',\n    :content_file   =&gt; 'path/to/file/largefile.xml'\n);\n\nif ($response-&gt;is_success) {\n    print \"File downloaded\\n\";\n}\nelse {\n    die $response-&gt;status_line;\n}\n</code></pre>\n\n<p>Is there any way to display the percentage of the download status? (or something similiar to <code>wget</code> output)</p>\n\n<pre><code>10% [===&gt;                                  ]  65.120.154  527K/s \n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478693752, "post_id": 40506465, "comment_id": 68255831, "body": "Did you forget the <code>||</code> (or) in <code>next if $file eq &#39;.&#39; $file eq &#39;..&#39;;</code>? It should be <code>next if ($file eq &#39;.&#39; || $file eq &#39;..&#39;);</code> (albeit that doesn&#39;t solve your recursion problem)."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1478699286, "post_id": 40506465, "comment_id": 68259140, "body": "<code>chomp $file;</code> is unneeded. The results from <code>readdir</code> do not have the trailing newline."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1478692872, "creation_date": 1478692872, "answer_id": 40506536, "question_id": 40506465, "link": "https://stackoverflow.com/questions/40506465/find-files-in-the-folder-and-subfolder/40506536#40506536", "title": "Find files in the folder and subfolder", "body": "<p>Yes. Use <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\"><code>File::Find::Rule</code></a></p>\n\n<pre><code>foreach my $file (  File::Find::Rule-&gt;file()-&gt;in( \".\" ) ) {\n\n}\n</code></pre>\n\n<p>... and that's about it. You've got options for pretty much all the 'filetest' flags, so <code>file()</code> for <code>-f</code> or <code>readable()</code> for <code>-r</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1478699428, "post_id": 40506925, "comment_id": 68259229, "body": "<code>File::Find</code> is a standard module; it comes with Perl. <code>File::Fins::Rule</code> has to installed from CPAN. For a list of standard modules, see <code>perldoc perlmodlib</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1478701294, "post_id": 40506925, "comment_id": 68260357, "body": "along with what @shawnhcorey said, you can use <code>corelist</code> on the command line to check if a specific module is core or not: <code>corelist File::Find</code>"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1478760845, "post_id": 40506925, "comment_id": 68283794, "body": "Just put a conditional <code>if(-d &amp;&amp; $_ eq &#39;fp&#39;){next;}</code>."}, {"owner": {"reputation": 889, "user_id": 1505752, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f115c18fc65d4914c7ae1dac7997308c?s=128&d=identicon&r=PG", "display_name": "VSr", "link": "https://stackoverflow.com/users/1505752/vsr"}, "edited": false, "score": 0, "creation_date": 1478773604, "post_id": 40506925, "comment_id": 68290781, "body": "<code>sub process_folder {next if (($_ eq &#39;.&#39;) || ($_ eq &#39;..&#39;)); if(-d &amp;&amp; $_ ne &#39;fp&#39;)   {print &quot;File: $_\\n&quot; if -d;}}</code> nothing happening its not showing anyting if i do something like this...:-("}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 5, "last_activity_date": 1478774390, "last_edit_date": 1478774390, "creation_date": 1478694069, "answer_id": 40506925, "question_id": 40506465, "link": "https://stackoverflow.com/questions/40506465/find-files-in-the-folder-and-subfolder/40506925#40506925", "title": "Find files in the folder and subfolder", "body": "<p>You could use <a href=\"https://metacpan.org/pod/File::Find\" rel=\"nofollow noreferrer\">File::Find</a> or <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> as suggested by Sobrique.</p>\n\n<p>It's very easy to use:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Find;\nsub process_file {\n    next if (($_ eq '.') || ($_ eq '..'));\n    if (-d &amp;&amp; $_ eq 'fp'){\n        $File::Find::prune = 1;\n        return;\n    }\n    print \"Directory: $_\\n\" if -d;\n    print \"File: $_\\n\" if -f;\n    #Do search replace operations on file below\n}\nfind(\\&amp;process_file, '/home/chankeypathak/Desktop/test.folder'); #provide list of paths as second argument.\n</code></pre>\n\n<p>I had below file structure.</p>\n\n<pre><code>test.folder/test.txt\ntest.folder/sub.folder\ntest.folder/sub.folder/subfile.txt\ntest.folder/fp\ntest.folder/fp/fileinsidefp.txt\n</code></pre>\n\n<p>And I got below output</p>\n\n<pre><code>$ perl test.pl\nFile: test.txt\nDirectory: sub.folder\nFile: subfile.txt\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 1505752, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f115c18fc65d4914c7ae1dac7997308c?s=128&d=identicon&r=PG", "display_name": "VSr", "link": "https://stackoverflow.com/users/1505752/vsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1823, "favorite_count": 0, "accepted_answer_id": 40506925, "answer_count": 2, "score": 2, "last_activity_date": 1478774390, "creation_date": 1478692653, "last_edit_date": 1478698298, "question_id": 40506465, "link": "https://stackoverflow.com/questions/40506465/find-files-in-the-folder-and-subfolder", "title": "Find files in the folder and subfolder", "body": "<p>I am using <code>next if $file eq '.' $file eq '..';</code> to find the file in the directory and subdirectory(except few directories) and opening the files for find and replacement. But when I have dot in folder name, it consider the folder as a file and says can't open. I filtered the files using -f but it missing to show the files in the main folder.</p>\n\n<p>Is there any recursive way to find the folder and files even it has dot. </p>\n\n<pre><code>opendir my $dh, $folder or die \"can't open the directory: $!\";\n\nwhile ( defined( my $file = readdir( $dh ) ) ) {\n\n    chomp $file;\n\n    next if $file eq '.' $file eq '..';\n\n    {\n        if ( $file ne 'fp' ) {\n\n            print \"$folder\\\\$file\";\n\n            if ( $file =~ m/(.[^\\.]*)\\.([^.]+$)/ ) {\n                ...\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1478691145, "post_id": 40505853, "comment_id": 68254399, "body": "<a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/PERL/node35.html\" rel=\"nofollow noreferrer\">users.cs.cf.ac.uk/Dave.Marshall/PERL/node35.html</a>  <a href=\"http://www.perlmonks.org/?node_id=990\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=990</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 6, "creation_date": 1478691616, "post_id": 40505853, "comment_id": 68254669, "body": "@AbhiNickz that tutorial is incredibly out of date. While the general information is correct, it contains a lot of information that rings my alarm bells. It declares variables without <code>my</code>, it tells you it&#39;s ok to use strings with the number comparison operators and it uses <i>PERL</i> as the name of the language, which is outright wrong. Please don&#39;t use this resource. It&#39;s overstayed its usefulness. Thank you."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1478694843, "post_id": 40505853, "comment_id": 68256433, "body": "Yeah, I checked again, I just wanted to show OP that there are lots of online resource that I found in just one google search."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1478704323, "post_id": 40505853, "comment_id": 68262279, "body": "@SangoProductions: Why don&#39;t you try it?"}], "answers": [{"tags": [], "owner": {"reputation": 95982, "user_id": 17279, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a08771c878da3724492f3056d5eca168?s=128&d=identicon&r=PG", "display_name": "zoul", "link": "https://stackoverflow.com/users/17279/zoul"}, "is_accepted": false, "score": 3, "last_activity_date": 1478691015, "creation_date": 1478691015, "answer_id": 40505962, "question_id": 40505853, "link": "https://stackoverflow.com/questions/40505853/how-to-specify-multiple-boolean-comparisons-in-perl/40505962#40505962", "title": "How to specify multiple boolean comparisons in Perl?", "body": "<p>Try <a href=\"http://perldoc.perl.org/perlop.html#C-style-Logical-And\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a>. There\u2019s both C-style <code>||</code> + <code>&amp;&amp;</code> available and <code>or</code> + <code>and</code> with different operator priority.</p>\n"}, {"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1478692130, "creation_date": 1478692130, "answer_id": 40506283, "question_id": 40505853, "link": "https://stackoverflow.com/questions/40505853/how-to-specify-multiple-boolean-comparisons-in-perl/40506283#40506283", "title": "How to specify multiple boolean comparisons in Perl?", "body": "<blockquote>\n  <p>Is it while ($x > 3 || $y &lt; 2) like in other programming languages?</p>\n</blockquote>\n\n<p>Yes it's the same.</p>\n\n<p>Let's put it into an example.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $x = 10;\nmy $y = 0;\nwhile ($x &gt; 3 || $y &lt; 2){\n    print \"X is $x, Y is $y\\n\";\n    $x--;\n    $y++;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>X is 10, Y is 0\nX is 9, Y is 1\nX is 8, Y is 2\nX is 7, Y is 3\nX is 6, Y is 4\nX is 5, Y is 5\nX is 4, Y is 6\n</code></pre>\n\n<p><a href=\"http://ideone.com/V4GKjb\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>Pretty easy, right?</p>\n"}], "owner": {"reputation": 129, "user_id": 4595178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3bef32abcfe051a68d58865aa1bbabd?s=128&d=identicon&r=PG&f=1", "display_name": "SangoProductions", "link": "https://stackoverflow.com/users/4595178/sangoproductions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1478737251, "answer_count": 2, "score": -6, "last_activity_date": 1478692130, "creation_date": 1478690703, "last_edit_date": 1478691102, "question_id": 40505853, "link": "https://stackoverflow.com/questions/40505853/how-to-specify-multiple-boolean-comparisons-in-perl", "closed_reason": "Duplicate", "title": "How to specify multiple boolean comparisons in Perl?", "body": "<p>Is it <code>while ($x &gt; 3 || $y &lt; 2)</code> like in other programming languages? I literally can't find anywhere online that tells me how to do this in Perl.</p>\n"}, {"tags": ["eclipse", "perl", "perspective", "epic"], "owner": {"reputation": 121, "user_id": 3682911, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tbMUk.gif?s=128&g=1", "display_name": "Space Rabbit", "link": "https://stackoverflow.com/users/3682911/space-rabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478687119, "creation_date": 1478687119, "question_id": 40504703, "link": "https://stackoverflow.com/questions/40504703/unable-to-switch-to-perl-perspective-in-eclipse-neon-4-6-1-on-windows-10-with-ep", "title": "Unable to switch to PERL perspective in Eclipse Neon 4.6.1 on Windows 10 with EPIC 0.7.2", "body": "<p>I am trying to use Eclipse IDE (Eclipse Neon 4.6.1 on Windows 10) to codding with PERL. But unable to switch perspective to Perl by reason of there is no Perl link in \"Open Perspective\" window:\n<a href=\"https://i.stack.imgur.com/nOxZy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nOxZy.png\" alt=\"enter image description here\"></a></p>\n\n<p>I installed EPIC. This screenshot tell us is that EPIC version 0.7.2 was installed:\n<a href=\"https://i.stack.imgur.com/6qnl5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6qnl5.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I unable to switch perspective by reason of there is no Perl entry in \"Open Perspective\" window (see screenshot above). What am I doing wrong how to switch perspective to Perl and create Perl project. Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1478677684, "post_id": 40501973, "comment_id": 68247520, "body": "This is pretty straightward debugging. When you reach the line where you expect <code>$_ =~ &#47;B053F10-13&#47; &amp;&amp; $firis == 2 &amp;&amp; $fprint == 1 &amp;&amp; $Sn == 1</code> to be true, why isn&#39;t it? Specifically, which variable is different than expected? Now, find out why that variable is different than expected using the same process."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1478677740, "post_id": 40501973, "comment_id": 68247543, "body": "Note that no line in your input file contains both <code>Sensitivity</code> and <code>B058F04</code>, so <code>$_ =~ &#47;Sensitivity&#47; &amp;&amp; $_ =~ &#47;B058F04&#47;</code> will never be true."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1478677815, "post_id": 40501973, "comment_id": 68247575, "body": "Tip: <code>$_ =~ &#47;...&#47;</code> can be shortened to <code>&#47;...&#47;</code>."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1478707891, "post_id": 40501973, "comment_id": 68264696, "body": "You are writing Perl 4 code. Upgrade the code to Perl 5 and you&#39;ll get much better error checking (e.g. use <code>use strict; use warnings;</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7125063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21188ecf0cfbe9916db30fa1741e0a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Zion", "link": "https://stackoverflow.com/users/7125063/zion"}, "edited": false, "score": 0, "creation_date": 1478696237, "post_id": 40504631, "comment_id": 68257244, "body": "I am not quite understanding &quot; the three-arg version of open() and lexical variables as filehandles&quot;.Is it more flexible? If I use &quot;my $iris_fh&quot;you mentioned above then What should I change about my &quot;while (&lt;IRIS&gt;)&quot;,can you teach me?@PerlDuck"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 7125063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21188ecf0cfbe9916db30fa1741e0a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Zion", "link": "https://stackoverflow.com/users/7125063/zion"}, "edited": false, "score": 2, "creation_date": 1478697399, "post_id": 40504631, "comment_id": 68257982, "body": "If you use a lexical filehandle called <code>$iris_fh</code> then you should change the <code>while</code> loop to <code>while (&lt;$iris_fh&gt;) { ... }</code>. Three-arg <code>open()</code> is safer when it comes to filename with obscure characters in. And lexical filehandles are easier to pass around and close themselves automatically when the variable goes out of scope. But none of this is really important - you need to address the main problem (<code>$ev</code>) first."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1478688846, "last_edit_date": 1478688846, "creation_date": 1478686898, "answer_id": 40504631, "question_id": 40501973, "link": "https://stackoverflow.com/questions/40501973/can-not-output-what-i-want/40504631#40504631", "title": "$_can not output what I want", "body": "<blockquote>\n  <p>I am sure that <code>$rname</code> can be found in my file such as:<code>RESP.IU.BILL.00.BH2</code>is one of the <code>$rname</code> file,so do not bother to think the file can't be found.</p>\n</blockquote>\n\n<p>If you say that <code>RESP.IU.BILL.00.BH2</code> exists on your filesystem, then I believe you. But I don't think you're looking for that file.</p>\n\n<p>This is the line which opens your input file:</p>\n\n<pre><code>open (IRIS, \"&lt;$rname\");\n</code></pre>\n\n<p>And this is where you declare the variable <code>$rname</code>:</p>\n\n<pre><code>$rname= \"RESP.\" . $ev;\n</code></pre>\n\n<p>But you don't declare the variable <code>$ev</code> anywhere. So your program is looking for a file called <code>RESP.</code> - with an empty extension. I'm guessing that this file doesn't exist, so your call to <code>open()</code> is failing silently and your <code>while (&lt;IRIS&gt;)</code> loop never gets executed.</p>\n\n<p>A few suggestions that would have caught this problem.</p>\n\n<ul>\n<li>Adding <code>use strict</code> to your code would have thrown an error when you tried to use a variable that you hadn't declared. Of course, it would also mean that you now need to declare all of your variables. This is a very good idea.</li>\n<li><p>Checking the results of your call to <code>open()</code> is always a good idea</p>\n\n<pre><code>open (IRIS, \"&lt;$rname\")\n  or die \"Couldn't open $rname: $!\";\n</code></pre></li>\n<li>Adding <code>use warnings</code> to your code would have given you a warning when you tried to read from <code>IRIS</code> (as you're attempting to read from a filehandle that wasn't opened successfully).</li>\n</ul>\n\n<p>A few more suggestions.</p>\n\n<ul>\n<li><p>These days, we use the three-arg version of <code>open()</code> and lexical variables as filehandles.</p>\n\n<pre><code>open my $iris_fh, '&lt;', $rname or die(...);\n</code></pre></li>\n<li><p>If you're reading a file and writing another, then it's often a good idea to write it as a \"Unix filter\" - you read from STDIN and write to STDOUT. That makes your program more flexible (it can be chained together with other programs) and it's actually easier to write.</p></li>\n<li><p><code>chomp()</code> is generally safer than <code>chop()</code>.</p></li>\n<li><p>Please pay more attention to the indentation of your code. Indentation is supposed to make code easier to understand.</p></li>\n<li><p>If you're matching against <code>$_</code>, then you can just write <code>/.../</code> instead of <code>$_ =~ /.../</code>.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478700330, "post_id": 40508212, "comment_id": 68259768, "body": "Yes. I missed all of that. When I saw the problem at the outer level, I stopped digging into the detail of the code. But you&#39;re absolutely right."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1478704064, "last_edit_date": 1478704064, "creation_date": 1478698234, "answer_id": 40508212, "question_id": 40501973, "link": "https://stackoverflow.com/questions/40501973/can-not-output-what-i-want/40508212#40508212", "title": "$_can not output what I want", "body": "<p>Not only <code>$ev</code> but also <code>$year</code> and <code>$day</code> are undefined. You are also mixing up whether <code>$year</code>, <code>$Yst</code>, and <code>$Yen</code> are from the file or the current date. This isn't going to work</p>\n\n<p>You must start by adding <code>use strict</code> and <code>use warnings 'all'</code> to the top of your program and declaring all of your variables with <code>my</code>. That will give you a much better chance of getting it working</p>\n"}], "owner": {"reputation": 23, "user_id": 7125063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21188ecf0cfbe9916db30fa1741e0a7a?s=128&d=identicon&r=PG&f=1", "display_name": "Zion", "link": "https://stackoverflow.com/users/7125063/zion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1478704064, "creation_date": 1478676937, "last_edit_date": 1478677841, "question_id": 40501973, "link": "https://stackoverflow.com/questions/40501973/can-not-output-what-i-want", "title": "$_can not output what I want", "body": "<p>I am using $_ to read data from my formatted response file into a file named response;parts of my <code>perl</code> code is like this: I am sure that <code>$rname</code> can be found in my file such as:<code>RESP.IU.BILL.00.BH2</code>is one of the <code>$rname</code>\nfile,so do not bother to think the file can't be found.</p>\n\n<pre><code>#!/usr/bin/perl\n$high_pass_co = 0.002;\n$low_pass_co = 1;\n$du = 120;\n$pre_ev = 20;\n$sample = 1.0;\n\n\nopen RES, \"&gt;response\";\n\n    $rname= \"RESP.\" . $ev;\n\n# make response file\n    open (IRIS, \"&lt;$rname\");\n    while (&lt;IRIS&gt;)   {\n                print \"$rname \\n you are processing:\\n\";  \n        chop;\n                print \"\\n $_\\n\\n\";\n        if ($_ =~ /Start date:/ ) {\n            $firis=0;$fprint=0;\n            $Yst=substr($_,25,4);\n            $Dst=substr($_,30,3);\n            if ($year &gt; $Yst) {\n                $firis++;\n            }\n            if ($year == $Yst &amp;&amp; $day &gt;= $Dst) {\n                $firis++;\n            }\n        }\n        if ($_ =~ /End date:/ ) {\n            if ($_ =~ /No Ending Time/) {\n                $Yen=`date +%Y`;\n                chop($Yen);\n                $Den=365;\n                if ($year &lt; $Yen) {\n                    $firis++;\n                }\n                if ($year == $Yen &amp;&amp; $day &lt;= $Den) {\n                    $firis++;\n                }\n            } else {\n                $Yen=substr($_,25,4);\n                $Den=substr($_,30,3);\n                if ($year &lt; $Yen ) {\n                    $firis++;\n                }\n                if ($year == $Yen &amp;&amp; $day &lt;= $Den) {\n                    $firis++;\n                }\n            }\n        }\n        if ($_ =~ /B053F05/ ) {$UNI=substr($_,51,25);}\n        if ($_ =~ /B053F07/ ) {$A0=substr($_,51,25);}\n        if ($_ =~ /B053F09/ ) {$NZ=substr($_,51,5);}\n        if ($_ =~ /B053F04/ ) {\n            $Sn=substr($_,51,5);\n        }\n        if ($_ =~ /B053F14/ ) {\n            $NP=substr($_,51,5);\n            $fprint = 1;\n            if($firis == 2 &amp;&amp; $Sn == 1) {\n                if($UNI =~ /Displacement/) {$id=\"0\";}\n                if($UNI =~ /Velocity/) {$id=\"1\";}\n                if($UNI =~ /Acceleration/) {$id=\"2\";}\n                print RES \"$sname\\n\";\n                print RES \" A0 normalization factor: $A0\\n\";\n                print RES \" Number of zeroes:            $NZ\\n\";\n                print RES \" Number of poles:              $NP\\n\";\n            }\n        }\n        if ($_ =~ /B053F10-13/ &amp;&amp; $firis == 2 &amp;&amp; $fprint == 1 &amp;&amp; $Sn == 1) {\n            $tmp = substr($_,11,70);\n            print RES \"$tmp\\n\";\n        }\n        if ($_ =~ /B053F15-18/ &amp;&amp; $firis == 2 &amp;&amp; $fprint == 1 &amp;&amp; $Sn == 1) {\n            $tmp = substr($_,11,70);\n            print RES \"$tmp\\n\";\n        }\n        if ($_ =~ /Sensitivity/ &amp;&amp; $_ =~ /B058F04/) {\n            $SE=substr($_,51,15);\n            if($firis == 2) {\n                print RES \" Sensitivity:             $SE\\n\";\n            }\n        }   \n    }\n    close(IRIS);\n close(RES);\n</code></pre>\n\n<p>and my formated waited to be read file is below:</p>\n\n<pre><code>#       &lt;&lt; IRIS SEED Reader, Release 5.2 &gt;&gt;\n#       \n#       ======== CHANNEL RESPONSE DATA ========\nB050F03     Station:     TIXI\nB050F16     Network:     IU\nB052F03     Location:    00\nB052F04     Channel:     BH1\nB052F22     Start date:  2014,264,00:00:00\nB052F23     End date:    2599,365,23:59:59\n#       =======================================\n#       +               +--------------------------------------------+                +\n#       +               |   Response (Poles &amp; Zeros),  TIXI ch BH1   |                +\n#       +               +--------------------------------------------+                +\n#       \nB053F03     Transfer function type:                A [Laplace Transform (Rad/sec)]\nB053F04     Stage sequence number:                 1\nB053F05     Response in units lookup:              M/S - Velocity in Meters Per Second\nB053F06     Response out units lookup:             V - Volts\nB053F07     A0 normalization factor:               3948.58\nB053F08     Normalization frequency:               0.02\nB053F09     Number of zeroes:                      2\nB053F14     Number of poles:                       4\n#       Complex zeroes:\n#         i  real          imag          real_error    imag_error\nB053F10-13    0  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00\nB053F10-13    1  0.000000E+00  0.000000E+00  0.000000E+00  0.000000E+00\n#       Complex poles:\n#         i  real          imag          real_error    imag_error\nB053F15-18    0 -1.234000E-02  1.234000E-02  0.000000E+00  0.000000E+00\nB053F15-18    1 -1.234000E-02 -1.234000E-02  0.000000E+00  0.000000E+00\nB053F15-18    2 -3.918000E+01  4.912000E+01  0.000000E+00  0.000000E+00\nB053F15-18    3 -3.918000E+01 -4.912000E+01  0.000000E+00  0.000000E+00\n#       \n#       +                  +---------------------------------------+                  +\n#       +                  |       Channel Gain,  TIXI ch BH1      |                  +\n#       +                  +---------------------------------------+                  +\n#       \nB058F03     Stage sequence number:                 1\nB058F04     Gain:                                  2.276000E+03\nB058F05     Frequency of gain:                     5.000000E-02 HZ\nB058F06     Number of calibrations:                0\n#       \n#       +               +-------------------------------------------+                 +\n#       +               |   Response (Coefficients),  TIXI ch BH1   |                 +\n#       +               +-------------------------------------------+                 +\n#       \nB054F03     Transfer function type:                D\nB054F04     Stage sequence number:                 2\nB054F05     Response in units lookup:              V - Volts\nB054F06     Response out units lookup:             COUNTS - Digital Counts\nB054F07     Number of numerators:                  0\nB054F10     Number of denominators:                0\n#       \n#       +                      +------------------------------+                       +\n#       +                      |   Decimation,  TIXI ch BH1   |                       +\n#       +                      +------------------------------+                       +\n#       \nB057F03     Stage sequence number:                 2\nB057F04     Input sample rate:                     2.000000E+01\nB057F05     Decimation factor:                     1\nB057F06     Decimation offset:                     0\nB057F07     Estimated delay (seconds):             0.000000E+00\nB057F08     Correction applied (seconds):          0.000000E+00\n#       \n#       +                  +---------------------------------------+                  +\n#       +                  |       Channel Gain,  TIXI ch BH1      |                  +\n#       +                  +---------------------------------------+                  +\n#       \nB058F03     Stage sequence number:                 2\nB058F04     Gain:                                  1.677720E+06\nB058F05     Frequency of gain:                     0.000000E+00 HZ\nB058F06     Number of calibrations:                0\n#       \n#       +               +-------------------------------------------+                 +\n#       +               |   Response (Coefficients),  TIXI ch BH1   |                 +\n#       +               +-------------------------------------------+                 +\n#       \nB054F03     Transfer function type:                D\nB054F04     Stage sequence number:                 3\nB054F05     Response in units lookup:              COUNTS - Digital Counts\nB054F06     Response out units lookup:             COUNTS - Digital Counts\nB054F07     Number of numerators:                  67\nB054F10     Number of denominators:                0\n#       Numerator coefficients:\n#         i, coefficient,  error\nB054F08-09    0 -3.653420E-17  0.000000E+00\nB054F08-09    1  3.674880E-08  0.000000E+00\nB054F08-09    2 -4.270600E-07  0.000000E+00\nB054F08-09    3  1.145020E-06  0.000000E+00\nB054F08-09    4 -1.875940E-07  0.000000E+00\nB054F08-09    5 -3.372740E-07  0.000000E+00\nB054F08-09    6  2.787470E-06  0.000000E+00\nB054F08-09    7 -3.744030E-06  0.000000E+00\nB054F08-09    8  5.411720E-06  0.000000E+00\nB054F08-09    9  7.473360E-06  0.000000E+00\nB054F08-09   10 -5.177590E-04  0.000000E+00\nB054F08-09   11  2.106770E-04  0.000000E+00\nB054F08-09   12  4.632580E-05  0.000000E+00\nB054F08-09   13 -6.082220E-04  0.000000E+00\nB054F08-09   14  1.441750E-03  0.000000E+00\nB054F08-09   15 -2.406270E-03  0.000000E+00\nB054F08-09   16  3.225340E-03  0.000000E+00\nB054F08-09   17 -3.506390E-03  0.000000E+00\nB054F08-09   18  2.814410E-03  0.000000E+00\nB054F08-09   19 -7.719710E-04  0.000000E+00\nB054F08-09   20 -2.805120E-03  0.000000E+00\nB054F08-09   21  7.778050E-03  0.000000E+00\nB054F08-09   22 -1.358150E-02  0.000000E+00\nB054F08-09   23  1.917650E-02  0.000000E+00\nB054F08-09   24 -2.297040E-02  0.000000E+00\nB054F08-09   25  2.403980E-02  0.000000E+00\nB054F08-09   26 -2.209860E-02  0.000000E+00\nB054F08-09   27  8.607340E-03  0.000000E+00\nB054F08-09   28  1.175250E-02  0.000000E+00\nB054F08-09   29 -4.477870E-02  0.000000E+00\nB054F08-09   30  9.649230E-02  0.000000E+00\nB054F08-09   31 -1.917550E-01  0.000000E+00\nB054F08-09   32  5.276520E-01  0.000000E+00\nB054F08-09   33  7.241670E-01  0.000000E+00\nB054F08-09   34 -1.569050E-01  0.000000E+00\nB054F08-09   35  4.425740E-02  0.000000E+00\nB054F08-09   36  3.141680E-03  0.000000E+00\nB054F08-09   37 -2.667140E-02  0.000000E+00\nB054F08-09   38  3.615320E-02  0.000000E+00\nB054F08-09   39 -3.856870E-02  0.000000E+00\nB054F08-09   40  3.108420E-02  0.000000E+00\nB054F08-09   41 -2.352590E-02  0.000000E+00\nB054F08-09   42  1.532110E-02  0.000000E+00\nB054F08-09   43 -7.403980E-03  0.000000E+00\nB054F08-09   44  1.096450E-03  0.000000E+00\nB054F08-09   45  3.097970E-03  0.000000E+00\nB054F08-09   46 -5.193200E-03  0.000000E+00\nB054F08-09   47  5.561310E-03  0.000000E+00\nB054F08-09   48 -4.761100E-03  0.000000E+00\nB054F08-09   49  3.382130E-03  0.000000E+00\nB054F08-09   50 -1.920520E-03  0.000000E+00\nB054F08-09   51  7.152180E-04  0.000000E+00\nB054F08-09   52  7.677190E-05  0.000000E+00\nB054F08-09   53 -4.518970E-04  0.000000E+00\nB054F08-09   54  5.027000E-04  0.000000E+00\nB054F08-09   55 -5.650370E-04  0.000000E+00\nB054F08-09   56 -5.568000E-05  0.000000E+00\nB054F08-09   57  1.577360E-05  0.000000E+00\nB054F08-09   58 -1.419850E-06  0.000000E+00\nB054F08-09   59  8.149090E-07  0.000000E+00\nB054F08-09   60  6.807950E-07  0.000000E+00\nB054F08-09   61 -1.252730E-06  0.000000E+00\nB054F08-09   62  1.524350E-06  0.000000E+00\nB054F08-09   63 -2.833360E-07  0.000000E+00\nB054F08-09   64 -1.063840E-08  0.000000E+00\nB054F08-09   65  1.257120E-09  0.000000E+00\nB054F08-09   66 -5.429540E-11  0.000000E+00\n#       \n#       +                      +------------------------------+                       +\n#       +                      |   Decimation,  TIXI ch BH1   |                       +\n#       +                      +------------------------------+                       +\n#       \nB057F03     Stage sequence number:                 3\nB057F04     Input sample rate:                     2.000000E+01\nB057F05     Decimation factor:                     1\nB057F06     Decimation offset:                     0\nB057F07     Estimated delay (seconds):             1.630500E+00\nB057F08     Correction applied (seconds):          1.630500E+00\n#       \n#       +                  +---------------------------------------+                  +\n#       +                  |       Channel Gain,  TIXI ch BH1      |                  +\n#       +                  +---------------------------------------+                  +\n#       \nB058F03     Stage sequence number:                 3\nB058F04     Gain:                                  1.000000E+00\nB058F05     Frequency of gain:                     0.000000E+00 HZ\nB058F06     Number of calibrations:                0\n#       \n#       +                  +---------------------------------------+                  +\n#       +                  |   Channel Sensitivity,  TIXI ch BH1   |                  +\n#       +                  +---------------------------------------+                  +\n#       \n</code></pre>\n\n<p>but my output file is empty,Where  is wrong about my code?</p>\n"}, {"tags": ["perl", "perl-module", "getopt", "getopt-long"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478674983, "post_id": 40501421, "comment_id": 68246553, "body": "getopt, getopts - Process single-character switches with switch clustering."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478675010, "post_id": 40501421, "comment_id": 68246565, "body": "<a href=\"http://perldoc.perl.org/Getopt/Std.html\" rel=\"nofollow noreferrer\">Refer</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1478685667, "post_id": 40501421, "comment_id": 68251255, "body": "Why are you loading Getopt::Long and then ignoring it?"}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1478675285, "creation_date": 1478675285, "answer_id": 40501637, "question_id": 40501421, "link": "https://stackoverflow.com/questions/40501421/why-the-following-code-shows-an-error/40501637#40501637", "title": "Why the following code shows an error?", "body": "<p><a href=\"http://alvinalexander.com/perl/perl-getopts-command-line-options-flags-in-perl\" rel=\"nofollow noreferrer\">Thanks to: alvinalexander</a></p>\n\n<pre><code>#!/usr/bin/perl -w\n\n# a perl getopts example\n# alvin alexander, http://www.devdaily.com\n\nuse strict;\nuse Getopt::Std;\n\n# declare the perl command line flags/options we want to allow\nmy %options=();\ngetopts(\"hj:ln:s:\", \\%options);\n\n# test for the existence of the options on the command line.\n# in a normal program you'd do more than just print these.\nprint \"-h $options{h}\\n\" if defined $options{h};\nprint \"-j $options{j}\\n\" if defined $options{j};\nprint \"-l $options{l}\\n\" if defined $options{l};\nprint \"-n $options{n}\\n\" if defined $options{n};\nprint \"-s $options{s}\\n\" if defined $options{s};\n\n# other things found on the command line\nprint \"Other things found on the command line:\\n\" if $ARGV[0];\nforeach (@ARGV)\n{\n  print \"$_\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7134875"}, "edited": false, "score": 0, "creation_date": 1478676737, "post_id": 40501857, "comment_id": 68247200, "body": "if i want to pass only the four city like(a,b,c,d).How i can pass it in array.if the city name is r it should print unsuccess."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1478676870, "post_id": 40501857, "comment_id": 68247245, "body": "Please go through the link, first understand how to accept the parameters. After that you just have to add conditionals based on your need."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478676880, "post_id": 40501857, "comment_id": 68247248, "body": "@test data, <code>--city a,b,c,d</code> is still only one parameter. You are actually asking how to split a value. You can use: <code>my @cities = $city ? split(&#47;,&#47;, $city) : ();</code>"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1478676290, "creation_date": 1478676290, "answer_id": 40501857, "question_id": 40501421, "link": "https://stackoverflow.com/questions/40501421/why-the-following-code-shows-an-error/40501857#40501857", "title": "Why the following code shows an error?", "body": "<p>Your code is not correct. Please go through the documentation first: <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/Getopt/Long.html</a></p>\n\n<p>Below is an attempt to guess what you were trying to achieve.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Getopt::Long qw(GetOptions);\nmy $city;\nprint \"raw data:@ARGV\\n\";\nGetOptions (\"city=s\" =&gt; \\$city) or die(\"Error in command line arguments\\n\");\nmy $site = $city;\nif($site){\n    print \"success: City is $city\\n\";\n}\nprint \"Final data:@ARGV \\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>chankeypathak@stackoverflow:~/Desktop$ perl test.pl -city=bangalore\nraw data:-city=bangalore\nsuccess: City is bangalore\nFinal data: \n</code></pre>\n\n<p>Output when passed incorrect param:</p>\n\n<pre><code>chankeypathak@stackoverflow:~/Desktop$ perl test.pl -blah=blah\nraw data:-blah=blah\nUnknown option: blah\nError in command line arguments\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7134875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 40501857, "answer_count": 2, "score": 0, "last_activity_date": 1478757073, "creation_date": 1478674207, "last_edit_date": 1478757073, "question_id": 40501421, "link": "https://stackoverflow.com/questions/40501421/why-the-following-code-shows-an-error", "title": "Why the following code shows an error?", "body": "<p>I want to pass arguments from the command line so i had tried the following code but it throws an error?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Getopt::Long qw(GetOptions);\nuse Getopt::Std;\nprint \"raw data:@ARGV\\n\";\nmy $site=getopts('bangalore','norwood','limerick');\nif($site)\n{\nprint \"success\";\n}\nelse\n{\ndie \"error\";\n}\nprint \"final data:@ARGV \\n\";\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "fork"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 6, "creation_date": 1478664090, "post_id": 40500013, "comment_id": 68243862, "body": "Perl simply uses the <code>fork</code> system call. You should see exactly the same behaviour in C."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 2, "creation_date": 1478699736, "post_id": 40500013, "comment_id": 68259396, "body": "It&#39;s hard to debug without seeing the code."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478738239, "post_id": 40500013, "comment_id": 68278231, "body": "there is likely something wrong with your code; show it and we can help."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1508153587, "post_id": 40500013, "comment_id": 80483808, "body": "Bit late to the show, but as you have code and I didn&#39;t see it, I thought I&#39;d update the answer. The summary is - I would guess &#39;file-conversion&#39; is disk io bound, not CPU bound. <code>cp</code> certainly is."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1523260614, "last_edit_date": 1523260614, "creation_date": 1478693194, "answer_id": 40506638, "question_id": 40500013, "link": "https://stackoverflow.com/questions/40500013/perl-fork-doesnt-seem-to-utilize-the-cores-but-cpu-only/40506638#40506638", "title": "perl fork() doesn&#39;t seem to utilize the cores, but cpu only", "body": "<p><code>fork()</code> spawns a new process - identical to, and with the same state as the existing one. No more, no less. The kernel schedules it and runs it wherever. </p>\n\n<p>If you do not get the results you're expecting, I would suggest that a far more likely limiting factor is that you are reading files from your disk subsystem - disks are slow, and contending for IO isn't actually making them any faster - if anything the opposite, because it forces additional drive seeks and less easy caching. </p>\n\n<p>So specifically: </p>\n\n<p>1/ No, <code>fork()</code> does nothing more than clone your process. </p>\n\n<p>2/ Largely meaningless unless you want to rewrite most of your algorithm as a shell script. There's no real reason to think that it'll be any different though. </p>\n\n<p>To follow on from your edit:</p>\n\n<ul>\n<li><p><code>system('file-conversion')</code> looks an awful lot like an IO based process, which will be limited by your disk IO. As will your <code>cp</code>. </p></li>\n<li><p>Have you considered <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> which greatly simplifies the forking bit? </p></li>\n<li><p>As a lesser style point, you should probably use 3 arg 'open'. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Parallel::ForkManager;\n\nmy $maxForks = 50;\n\nmy $manager = Parallel::ForkManager-&gt;new($maxForks);\n\nwhile ($ciflist) {\n\n    ## do something with $_ to parse.\n\n    ##instead of: extractPDFByCIF($cifNumFromIndex, $acctTypeFromIndex, $startDate, $endDate);\n\n    # doing SQL constructing to for the $stmt to do a DB query\n    $stmt-&gt;execute();\n\n    while ( $stmt-&gt;fetch() ) {\n\n        # fork the copy/afp2web process into child process\n        $manager-&gt;start and next;\n        print \"CHILDFORK: Processing child fork. PID=$$\\n\";\n\n        # prevent child fork to destroy dbh from parent thread\n        $dbh-&gt;{InactiveDestroy} = 1;\n        undef $dbh;\n\n        # perform the conversion as usual\n        if ( $fileName =~ m/.afp/ ) {\n            system(\"file-conversion -parameter-list\");\n        } elsif ( $fileName =~ m/.pdf/ ) {\n            system(\"cp $from-file $to-file\");\n        } else {\n            print ERRORLOG \"Problem happened here\\r\\n\";\n        }\n\n        # end forking\n        $manager-&gt;finish;\n    }\n    $stmt-&gt;finish();\n\n}\n\n$manager-&gt;wait_all_children;\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478707533, "post_id": 40507939, "comment_id": 68264451, "body": "Not my downvote, but some <code>perl</code> programmers don&#39;t like threads."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478738116, "post_id": 40507939, "comment_id": 68278202, "body": "not my downvote, but threading doesn&#39;t have anything to do with fork (except perhaps that on windows it uses what started initially as an emulation of fork for windows)"}, {"owner": {"reputation": 364, "user_id": 2678268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmPwJ.png?s=128&g=1", "display_name": "VCSEL", "link": "https://stackoverflow.com/users/2678268/vcsel"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1478740555, "post_id": 40507939, "comment_id": 68278767, "body": "@ysth ...wow, you&#39;re right and I was wrong, thanks! I looked into <code>perlthrtut</code> again and edited my answer accordingly."}], "tags": [], "owner": {"reputation": 364, "user_id": 2678268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmPwJ.png?s=128&g=1", "display_name": "VCSEL", "link": "https://stackoverflow.com/users/2678268/vcsel"}, "is_accepted": false, "score": -1, "last_activity_date": 1478740713, "last_edit_date": 1478740713, "creation_date": 1478697403, "answer_id": 40507939, "question_id": 40500013, "link": "https://stackoverflow.com/questions/40500013/perl-fork-doesnt-seem-to-utilize-the-cores-but-cpu-only/40507939#40507939", "title": "perl fork() doesn&#39;t seem to utilize the cores, but cpu only", "body": "<p>Your goal is to parallelize your application in a way that is using multiple cores as independent resources. What you want to achieve is multi-threading, in particular Perl's <code>ithreads</code> <s>that are using calls to the <code>fork()</code> function of the underlying system (and are <em>heavy-weight</em> for that reason)</s>. You can teach the Perl way of multi-threading to yourself from <a href=\"http://perldoc.perl.org/perlthrtut.html\" rel=\"nofollow noreferrer\"><code>perlthrtut</code></a>. Quote from <code>perlthrtut</code>:</p>\n\n<blockquote>\n  <p>When a new Perl thread is created, all the data associated with the current thread is copied to the new thread, and is subsequently private to that new thread! This is similar in feel to what happens when a Unix process forks, except that in this case, the data is just copied to a different part of memory within the same process rather than a real fork taking place.</p>\n</blockquote>\n\n<p>That being said, regarding your questions:</p>\n\n<ol>\n<li><p><s>You're not doing it right (sorry).</s> [<em>see my comment...</em>] With multi-threading you don't need to call <code>fork()</code><s> by yourself for that, but Perl will do it for you</s>.</p></li>\n<li><p>You can check whether your Perl interpreter has been built with thread support e.g. by <code>perl -V</code> (note the capital V) and looking at the messages. If there is nothing to see about <em>threads</em> then your Perl interpreter is not capable of Perl-multithreading.</p></li>\n</ol>\n\n<p>The reason that your application is already faster even with only one CPU core by using <code>fork()</code> is likely that while one process has to wait for slow resources such as the file system another process can use the same core as a computation resource in the meantime.</p>\n"}], "owner": {"reputation": 23, "user_id": 1864578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9be433a0134f0a803f8d49c7a227ba?s=128&d=identicon&r=PG", "display_name": "Ben Chan", "link": "https://stackoverflow.com/users/1864578/ben-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1523260614, "creation_date": 1478663882, "last_edit_date": 1478742714, "question_id": 40500013, "link": "https://stackoverflow.com/questions/40500013/perl-fork-doesnt-seem-to-utilize-the-cores-but-cpu-only", "title": "perl fork() doesn&#39;t seem to utilize the cores, but cpu only", "body": "<p>I've got a perl program that trying to do conversion of a bunch of files from one format to another (via a command-line tool).  It works fine, but too slow as it's converting the files one and a time.</p>\n\n<p>I researched and utilize the fork() mechanism trying to spawn off all the conversion as child-forks hoping to utilize the cpu/cores.</p>\n\n<p>Coding is done and tested, it does improve performance, but not to the way I expected.\nWhen looking at /proc/cpuinfo, I have this:</p>\n\n<pre><code>&gt; egrep -e \"core id\" -e ^physical /proc/cpuinfo|xargs -l2 echo|sort -u\nphysical id : 0 core id : 0\nphysical id : 0 core id : 1\nphysical id : 0 core id : 2\nphysical id : 0 core id : 3\nphysical id : 1 core id : 0\nphysical id : 1 core id : 1\nphysical id : 1 core id : 2\nphysical id : 1 core id : 3\n</code></pre>\n\n<p>That means I have 2 CPU and quad-core each?  If so, I should able to fork out 8 forks and supposingly I should able to make a 8-min job (1min per file, 8 files) to finish in 1-min (8 forks, 1 file per fork).</p>\n\n<p>However, when I test run this, it still take 4-min to finish.  It appears like it only utilized 2 CPUs, but not the cores?</p>\n\n<p>Hence, my question is:</p>\n\n<ol>\n<li><p>Is it true that perl's fork() only parallel it based on CPUs, but not cores?  Or maybe I didn't do it right?  I'm simply using fork() and wait().  Nothing special.  </p></li>\n<li><p>I'd assume perl's fork() should be using cores, is there a simple bash/perl that I can write to prove my OS (i.e. RedHat 4) nor Perl is the culprit for such symptom?</p></li>\n</ol>\n\n<p>To Add:</p>\n\n<p>I even tried running the following command multiple times to simulate multiple processing and monitor htop.</p>\n\n<pre><code>while true; do echo abc &gt;&gt;devnull; done &amp;\n</code></pre>\n\n<p>Somehow htop is telling me I've got 16 cores?  and then when I spawn 4 of the above while-loop, I see 4 of them utilizing ~100% cpu each.  When I spawn more, all of them start reducing the cpu utilization percentage evenly.  (e.g. 8 processing, see 8 bash in htop, but using ~50% each)  Does this mean something?</p>\n\n<p>Thanks ahead.  I tried google around but not able to find an obvious answer.</p>\n\n<hr>\n\n<p>Edit: 2016-11-09</p>\n\n<p>Here is the extract of perl code.  I'm interested to see what I did wrong here.</p>\n\n<pre><code>my $maxForks = 50;\nmy $forks = 0;\nwhile(&lt;CIFLIST&gt;) {\n    extractPDFByCIF($cifNumFromIndex, $acctTypeFromIndex, $startDate, $endDate);\n}\nfor (1 .. $forks) {\n    my $pid = wait();\n    print \"Child fork exited.  PID=$pid\\n\";\n}\n\nsub extractPDFByCIF {\n    # doing SQL constructing to for the $stmt to do a DB query\n    $stmt-&gt;execute();\n\n    while ($stmt-&gt;fetch()) {\n        # fork the copy/afp2web process into child process\n        if ($forks &gt;= $maxForks) {\n            my $pid = wait();\n            print \"PARENTFORK: Child fork exited.  PID=$pid\\n\";\n            $forks--;\n        }\n        my $pid = fork;\n        if (not defined $pid) {\n            warn \"PARENTFORK: Could not fork.  Do it sequentially with parent thread\\n\";\n        }\n        if ($pid) {\n            $forks++;\n            print \"PARENTFORK: Spawned child fork number $forks. PID=$pid\\n\";\n        }else {\n            print \"CHILDFORK: Processing child fork. PID=$$\\n\";\n            # prevent child fork to destroy dbh from parent thread\n            $dbh-&gt;{InactiveDestroy} = 1;\n            undef $dbh;\n\n            # perform the conversion as usual\n            if($fileName =~ m/.afp/){\n                    system(\"file-conversion -parameter-list\");\n            } elsif($fileName =~ m/.pdf/) {\n                    system(\"cp $from-file $to-file\");\n            } else {\n                    print ERRORLOG \"Problem happened here\\r\\n\";\n            }\n            exit;\n        }\n        # end forking\n\n    $stmt-&gt;finish();\n    close(INDEX);\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "awk"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478637764, "post_id": 40495993, "comment_id": 68236243, "body": "you&#39;re calling <code>awk</code> twice in a loop. No wonder why it&#39;s slow. Interested by a python solution?"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478637822, "post_id": 40495993, "comment_id": 68236276, "body": "sure, always wanted to learn python. thanks"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478640092, "post_id": 40495993, "comment_id": 68237408, "body": "@Jean-Fran&#231;oisFabre Actually only the 2nd line (<code>$cmd2=\u2026</code>) calls <code>awk</code>. The <code>$cmd1=\u2026</code> line only sets a string variable. We can see that from the different quotes used (<code>&quot;</code> =assign) vs. <code>(backtick)</code> (=execute)). But no matter, you are right."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1479332184, "post_id": 40495993, "comment_id": 68517603, "body": "I wanted to try all of the suggestion but couldn&#39;t get to all of them. I used yours. thanks"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1479334267, "post_id": 40495993, "comment_id": 68518608, "body": "Glad to hear that, and thanks. If follow-up questions pop up in the future let me know."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1479343481, "last_edit_date": 1479343481, "creation_date": 1478638921, "answer_id": 40496341, "question_id": 40495993, "link": "https://stackoverflow.com/questions/40495993/perl-linux-filtering-large-file-with-content-of-another-file/40496341#40496341", "title": "Perl/Linux filtering large file with content of another file", "body": "<p>Read the small file into a data structure and check every line of the other file against it. </p>\n\n<p>Here I read it into an array, each element being an arrayref with fields from a line. Then each line of the data file is checked against the arrayrefs in this array, comparing fields per requirements.</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nmy $ref_file = 'reference.txt';\nopen my $fh, '&lt;', $ref_file or die \"Can't open $ref_file: $!\";\nmy @ref = map { chomp; [ split ] } grep { /\\S/ } &lt;$fh&gt;;\n\nmy $data_file = 'data.txt';\nopen $fh, '&lt;', $data_file or die \"Can't open $data_file: $!\";\n\n# Drop header lines\nmy $ref_header  = shift @ref;    \nmy $data_header = &lt;$fh&gt;;\n\nwhile (&lt;$fh&gt;) \n{\n    next if not /\\S/;  # skip empty lines\n    my @line = split;\n\n    foreach my $refline (@ref) \n    {\n        next if $line[0] != $refline-&gt;[0];\n        if ($line[1] &gt; $refline-&gt;[1] and $line[1] &lt; $refline-&gt;[2]) {\n            print \"@line\\n\";\n        }\n    }   \n}\nclose $fh;\n</code></pre>\n\n<p>This prints out correct lines from the provided samples. It allows for multiple lines to match.  If this somehow can't be, add <code>last</code> in the <code>if</code> block to exit the <code>foreach</code> once a match is found.</p>\n\n<p>A few comments on the code.  Let me know if more can be useful.</p>\n\n<p>When reading the reference file, <code>&lt;$fh&gt;</code> is used in list context so it returns all lines, and <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> filters out the empty ones. The <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> first <code>chomp</code>s the newline and then makes an arrayref by <code>[ ]</code>, with elements being fields on the line obtained by <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>.  The output list is assigned to <code>@ref</code>.</p>\n\n<p>When we reuse <code>$fh</code> it is first closed (if it was open) so there is no need for a <code>close</code>.</p>\n\n<p>I store the header lines just so, perhaps to print or check. We really only need to exclude them.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1478639156, "creation_date": 1478639156, "answer_id": 40496402, "question_id": 40495993, "link": "https://stackoverflow.com/questions/40495993/perl-linux-filtering-large-file-with-content-of-another-file/40496402#40496402", "title": "Perl/Linux filtering large file with content of another file", "body": "<p>As said before, calling <code>awk</code> at each iteration is very slow. A full <code>awk</code> solution would be possible, I just saw a Perl solution, here's my Python solution as the OP wouldn't mind:</p>\n\n<ul>\n<li>create a dictionary from the small file: chr => list of couples start/end</li>\n<li>iterate through the big file and try to match the chr &amp; the position between one of the start/end tuples.</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>with open(\"smallfile.txt\") as f:\n    next(f) # skip title\n    # build a dictionary with chr as key, and list of start,end as values\n    d = collections.defaultdict(list)\n    for line in f:\n        toks = line.split()\n        if len(toks)==3:\n            d[int(toks[0])].append((int(toks[1]),int(toks[2])))\n\n\nwith open(\"largefile.txt\") as f:\n    next(f) # skip title\n    for line in f:\n        toks = line.split()\n        chr_tok = int(toks[0])\n        if chr_tok in d:\n            # key is in dictionary\n            pos = int(toks[1])\n            if any(lambda x : t[0]&lt;pos&lt;t[1] for t in d[chr_tok]):\n                print(line.strip())\n</code></pre>\n\n<p>We could be slightly faster by sorting the list of tuples and appyling <code>bisect</code> to avoid linear search. That is necessary only if the list of tuples is big in the \"small\" file.</p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1478639359, "creation_date": 1478639359, "answer_id": 40496448, "question_id": 40495993, "link": "https://stackoverflow.com/questions/40495993/perl-linux-filtering-large-file-with-content-of-another-file/40496448#40496448", "title": "Perl/Linux filtering large file with content of another file", "body": "<p>Another way, this time storing the smaller file in a Hash of Arrays (HoA) based on the 'chr' field:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $small_file = 'small.txt';\nmy $large_file = 'large.txt';\n\nopen my $small_fh, '&lt;', $small_file or die $!;\n\nmy %small;\n\nwhile (&lt;$small_fh&gt;){\n    next if $. == 1;\n    my ($chr, $start, $end) = split /\\s+/, $_;\n    push @{ $small{$chr} }, [$start, $end];\n}\n\nclose $small_fh;\n\nopen my $large_fh, '&lt;', $large_file or die $!;\n\nwhile (my $line = &lt;$large_fh&gt;){\n    my ($chr, $pos) = (split /\\s+/, $line)[0, 1];\n\n    if (defined $small{$chr}){\n        for (@{ $small{$chr} }){\n            if ($pos &gt; $_-&gt;[0] &amp;&amp; $pos &lt; $_-&gt;[1]){\n                print $line;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2273, "user_id": 3339058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96e83b11d2c7358ba0a1512054b6c220?s=128&d=identicon&r=PG&f=1", "display_name": "Javier", "link": "https://stackoverflow.com/users/3339058/javier"}, "edited": false, "score": 0, "creation_date": 1489742156, "post_id": 40496455, "comment_id": 72813492, "body": "The link for the CSV import is too old. I found this other one: <a href=\"http://www.sqlitetutorial.net/sqlite-import-csv/\" rel=\"nofollow noreferrer\">sqlitetutorial.net/sqlite-import-csv</a>"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1478640016, "last_edit_date": 1478640016, "creation_date": 1478639380, "answer_id": 40496455, "question_id": 40495993, "link": "https://stackoverflow.com/questions/40495993/perl-linux-filtering-large-file-with-content-of-another-file/40496455#40496455", "title": "Perl/Linux filtering large file with content of another file", "body": "<p>Put them into a SQLite database, do a join. This will be much faster and less buggy and use less memory than trying to write something yourself. And it's more flexible, now you can just do SQL queries on the data, you don't have to keep writing new scripts and reparsing the files.</p>\n\n<p>You can import them by parsing and inserting yourself, or you can convert them to CSV and use <a href=\"https://sqlite.org/cvstrac/wiki?p=ImportingFiles\" rel=\"nofollow noreferrer\">SQLite's CSV import ability</a>. Converting to CSV with that simple data can be as easy as <code>s{ +}{,}g</code> or you can use the full blown and very fast <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>.</p>\n\n<p>Your tables look like this (you'll want to use better names for the tables and fields).</p>\n\n<pre><code>create table file1 (\n    chr integer not null,\n    start integer not null,\n    end integer not null\n);\n\ncreate table file2 (\n    chr integer not null,\n    pos integer not null,\n    rs integer not null,\n    id integer not null,\n    a char not null,\n    b char not null,\n    c char not null,\n    d char not null,\n    e char not null,\n    f char not null\n); \n</code></pre>\n\n<p>Create some indexes on the columns you'll be searching on. Indexes will slow down the import, so make sure you do this <em>after</em> the import.</p>\n\n<pre><code>create index chr_file1 on file1 (chr);\ncreate index chr_file2 on file2 (chr);\ncreate index pos_file2 on file2 (pos);\ncreate index start_file1 on file1 (start);\ncreate index end_file1 on file1 (end);\n</code></pre>\n\n<p>And do the join.</p>\n\n<pre><code>select *\nfrom file2\njoin file1 on file1.chr == file2.chr\nwhere file2.pos between file1.start and file1.end;\n\n1,124,r2,3,s,4,s,2,s,2,1,123,150\n2,455,t2,4,2,4,t,3,w,3,2,450,600\n</code></pre>\n\n<p>You can do this in Perl via <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> and the <a href=\"https://metacpan.org/pod/DBD::SQLite\" rel=\"nofollow noreferrer\">DBD::SQLite</a> driver.</p>\n"}, {"tags": [], "owner": {"reputation": 1538, "user_id": 2032943, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/gMjJZ.jpg?s=128&g=1", "display_name": "Jay Rajput", "link": "https://stackoverflow.com/users/2032943/jay-rajput"}, "is_accepted": false, "score": 0, "last_activity_date": 1478655963, "last_edit_date": 1478655963, "creation_date": 1478652197, "answer_id": 40498759, "question_id": 40495993, "link": "https://stackoverflow.com/questions/40495993/perl-linux-filtering-large-file-with-content-of-another-file/40498759#40498759", "title": "Perl/Linux filtering large file with content of another file", "body": "<p>awk power with single pass. Your code is iterating the file2 as many times as there are lines in file1, so the execution time is linearly increasing. Please let me know if this single pass solution is slower than other solutions. </p>\n\n<pre><code>awk 'NR==FNR {\n    i = b[$1];        # get the next index for the chr\n    a[$1][i][0] = $2; # store start\n    a[$1][i][1] = $3; # store end\n    b[$1]++;          # increment the next index\n    next;\n}\n\n{\n    p = 0;\n    if ($1 in a) {\n        for (i in a[$1]) {\n            if ($2 &gt; a[$1][i][0] &amp;&amp; \\\n                $2 &lt; a[$1][i][1])\n                p = 1                 # set p if $2 in range\n        }\n    }\n}\n\np {print}'\n</code></pre>\n\n<p><strong>One-Liner</strong></p>\n\n<pre><code>awk 'NR==FNR {i = b[$1];a[$1][i][0] = $2; a[$1][i][1] = $3; b[$1]++;next; }{p = 0;if ($1 in a){for(i in a[$1]){if($2&gt;a[$1][i][0] &amp;&amp; $2&lt;a[$1][i][1])p=1}}}p' file1 file2\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 40496341, "answer_count": 5, "score": 4, "last_activity_date": 1479343481, "creation_date": 1478637552, "question_id": 40495993, "link": "https://stackoverflow.com/questions/40495993/perl-linux-filtering-large-file-with-content-of-another-file", "title": "Perl/Linux filtering large file with content of another file", "body": "<p>I'm filtering a 580 MB file using the content of another smaller file.\nFile1 (smaller file)</p>\n\n<pre><code>chr start  End\n1    123   150\n2    245   320\n2    450   600\n</code></pre>\n\n<p>File2 (large file)</p>\n\n<pre><code>chr pos RS ID A B C D E F\n1   124 r2 3  s 4 s 2 s 2\n1   165 r6 4  t 2 k 1 r 2\n2   455 t2 4  2 4 t 3 w 3\n3   234 r4 2  5 w 4 t 2 4\n</code></pre>\n\n<p>I would like to capture lines from the File2 if the following criteria is met.\n<code>File2.Chr == File1.Chr &amp;&amp; File2.Pos &gt; File1.Start &amp;&amp; File2.Pos &lt; File1.End</code>\nI\u2019ve tried using awk but it runs very slow, also I was wondering if there is better way to accomplish the same?</p>\n\n<p>Thank you.</p>\n\n<p>Here is the code that I\u2019m using:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy $bed_file = \"/data/1000G/Hotspots.bed\";#File1 smaller file\nmy $SNP_file = \"/data/1000G/SNP_file.txt\";#File2 larger file\nmy $final_file = \"/data/1000G/final_file.txt\"; #final output file\n\nopen my $in_fh, '&lt;', $bed_file\n        or die qq{Unable to open \"$bed_file\" for input: $!};\n\n    while ( &lt;$in_fh&gt; ) {\n\n     my $line_str = $_;\n\n     my @data = split(/\\t/, $line_str);\n\n     next if /\\b(?:track)\\b/;# skip header line\n     my $chr = $data[0]; $chr =~ s/chr//g; print \"chr is $chr\\n\";\n     my $start = $data[1]-1; print \"start is $start\\n\";\n     my $end = $data[2]+1; print \"end is $end\\n\";\n\n     my $cmd1 = \"awk '{if(\\$1==chr &amp;&amp; \\$2&gt;$start &amp;&amp; \\$2&lt;/$end) print (\\\"chr\\\"\\$1\\\"_\\\"\\$2\\\"_\\\"\\$3\\\"_\\\"\\$4\\\"_\\\"\\$5\\\"_\\\"\\$6\\\"_\\\"\\$7\\\"_\\\"\\$8)}' $SNP_file &gt;&gt; $final_file\"; print \"cmd1\\n\";\n     my $cmd2 = `awk '{if(\\$1==chr &amp;&amp; \\$2&gt;$start &amp;&amp; \\$2&lt;/$end) print (\\\"chr\\\"\\$1\\\"_\\\"\\$2\\\"_\\\"\\$3\\\"_\\\"\\$4\\\"_\\\"\\$5\\\"_\\\"\\$6\\\"_\\\"\\$7\\\"_\\\"\\$8)}' $SNP_file &gt;&gt; $final_file`; print \"cmd2\\n\";\n\n}\n</code></pre>\n"}, {"tags": ["perl", "x11", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1478636307, "post_id": 40495429, "comment_id": 68235484, "body": "Added sample code which connects several signals, none of which catch this event... perhaps I&#39;m just not connecting the correct one, or perhaps there&#39;s a different approach."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1478636384, "post_id": 40495429, "comment_id": 68235516, "body": "@TheAmigo  I see -- thank you.  Yes, none of these events are for server closing the connection ... I&#39;m looking at docs, can&#39;t remember"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1478640837, "post_id": 40495429, "comment_id": 68237730, "body": "@TheAmigo  The signal/event need be at quite high level (I&#39;m not sure that the window itself will get a chance).  I looked at <a href=\"http://gtk2-perl.sourceforge.net/doc/pod/Glib.html#EXCEPTIONS\" rel=\"nofollow noreferrer\">Glib exceptions</a> for example (but that&#39;s just a guess).  Altogether I came up empty for now, will be able to look at it more later."}, {"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1478642997, "post_id": 40495429, "comment_id": 68238718, "body": "Thanks for checking... I&#39;ve been poking around in a couple more directions, but haven&#39;t turned up anything useful or promising yet."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1478635319, "creation_date": 1478635319, "answer_id": 40495429, "question_id": 40495331, "link": "https://stackoverflow.com/questions/40495331/how-to-catch-fatal-io-error-11-resource-temporarily-unavailable/40495429#40495429", "title": "How to catch Fatal IO error 11 (Resource temporarily unavailable)", "body": "<p>I take it that <code>foo.pl</code> involves a GUI of sorts.</p>\n\n<p>As for <code>xkill</code>, from its man page on my system</p>\n\n<blockquote>\n  <p>Xkill is a utility for forcing the X server to close connections to clients.  This program is very dangerous, [...]</p>\n</blockquote>\n\n<p>In other words, it \"pulls the carpet out\" from under your application, closing connection to it.  You can look inside of it for kinds of events it receives as this happens, which depends on how it's written. Then you can  set up a callback for it.</p>\n\n<p>I think that we'd more detail to comment on that.</p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1478635999, "creation_date": 1478634900, "last_edit_date": 1478635999, "question_id": 40495331, "link": "https://stackoverflow.com/questions/40495331/how-to-catch-fatal-io-error-11-resource-temporarily-unavailable", "title": "How to catch Fatal IO error 11 (Resource temporarily unavailable)", "body": "<p>There are many similar questions about programs crashing, but I don't see any quite like what I'm asking...</p>\n\n<p>When I use <code>xkill</code> to kill my application, I get the following message on stderr:</p>\n\n<pre><code>(foo.pl:32471): Gdk-WARNING **: foo.pl: Fatal IO error 11 (Resource temporarily unavailable) on X server :0.0.\n</code></pre>\n\n<p>What I'd like to do (if possible) is catch that event and do some cleanup (save prefs, etc) before exiting.</p>\n\n<p>Setup:</p>\n\n<ul>\n<li>Linux</li>\n<li>Perl 5.16</li>\n<li>Gtk3 3.8.8</li>\n</ul>\n\n<p><strong>Edit:</strong></p>\n\n<p>Sample source code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse Gtk3 -init;\nmy $win = Gtk3::Window-&gt;new;\n$win-&gt;signal_connect('delete-event' =&gt; sub { cleanup('delete-event') } );\n$win-&gt;signal_connect('destroy' =&gt; sub { cleanup('destroy') } );\n$win-&gt;signal_connect('destroy-event' =&gt; sub { cleanup('destroy-event') } );\n$win-&gt;signal_connect('unmap-event' =&gt; sub { cleanup('unmap-event') } );\n$win-&gt;signal_connect('unmap' =&gt; sub { cleanup('unmap') } );\n$win-&gt;show_all;\nGtk3-&gt;main;\n\nsub cleanup {\n    my $event = shift;\n    print \"Doing cleanup due to signal '$event'\\n\";\n}\n</code></pre>\n\n<p>When using <code>xkill</code> on this app, the print statement isn't executed.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478627245, "post_id": 40493294, "comment_id": 68230801, "body": "So, only <code>2</code> and <code>5</code> should get extracted from the string above? <a href=\"https://regex101.com/r/UAlyEG/1\" rel=\"nofollow noreferrer\">regex101.com/r/UAlyEG/1</a>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1478627544, "post_id": 40493294, "comment_id": 68230967, "body": "But honestly - I&#39;d suggest <i>don&#39;t</i> regex like this, and instead <code>split &#47;,&#47;</code> and match the values as separate tests. Complex regex aren&#39;t good for program maintenance."}, {"owner": {"reputation": 423, "user_id": 3548821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b2ec7b6d96ebf8433d0b84e293a0fedd?s=128&d=identicon&r=PG&f=1", "display_name": "nzaleski", "link": "https://stackoverflow.com/users/3548821/nzaleski"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478628340, "post_id": 40493294, "comment_id": 68231364, "body": "@Sobrique each line can have different number of bins so would you think that split is the best route?"}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 4, "last_activity_date": 1478633019, "last_edit_date": 1478633019, "creation_date": 1478627243, "answer_id": 40493345, "question_id": 40493294, "link": "https://stackoverflow.com/questions/40493294/negative-lookahead-regex/40493345#40493345", "title": "Negative Lookahead RegEx", "body": "<p>You should be using a negative lookbehind as:</p>\n\n<pre><code>(?&lt;!\\b(Quarantine|Inspection)_Bin)\\([0-9]+\\)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/NL4PBz/2\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n\n<p><code>(?&lt;!\\b(Quarantine|Inspection)_Bin)</code> is a negative lookbehind that asserts failure if there is <code>Quarantine_Bin</code> or <code>Inspection_Bin</code> before our match.\n<code>\\b</code> is for word boundary.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1482814697, "last_edit_date": 1482814697, "creation_date": 1478627475, "answer_id": 40493409, "question_id": 40493294, "link": "https://stackoverflow.com/questions/40493294/negative-lookahead-regex/40493409#40493409", "title": "Negative Lookahead RegEx", "body": "<p>It's a negative <em>lookbehind</em></p>\n\n<pre><code>use warnings;\nuse feature 'say';\n\nmy @strings = (\n    \"Quarantine_Bin(5),Inspection_Bin(3),Regular_Bin(5),other(2)\",\n    \"Quarantine(2),Other_Bin(2),Quarantine_Bin(2),Quarantine_Bin(2),\"\n);\n\nfor (@strings) {\n    my @m = $_ =~ /(?&lt;!\\b(?:Quarantine|Inspection)_Bin)\\(\\d+\\)/g; \n    say \"@m\";\n} \n</code></pre>\n\n<p>The <code>^</code> anchor doesn't do what you want here, use <code>\\b</code> to specify a word boundary.</p>\n\n<p>This includes the parenthesis with numbers, returning lines <code>(5) (2)</code> and <code>(2) (2)</code>.</p>\n\n<p>If you'd rather omit them, add capturing parethesis around numbers</p>\n\n<pre><code>/(?&lt;! \\b(?: Quarantine|Inspection)_Bin ) \\( (\\d+) \\)/xg;\n</code></pre>\n\n<p>or pull the opening paren inside the lookbehind (so it is not consumed) and leave out the closing one</p>\n\n<pre><code>/(?&lt;! \\b(?: Quarantine|Inspection)_Bin \\( ) \\d+/xg;\n</code></pre>\n\n<p>These return lines <code>5 2</code> and <code>2 2</code>, no parens.</p>\n\n<p>The <code>/x</code> modifier allows spaces inside for readability.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1478634670, "last_edit_date": 1478634670, "creation_date": 1478632669, "answer_id": 40494776, "question_id": 40493294, "link": "https://stackoverflow.com/questions/40493294/negative-lookahead-regex/40494776#40494776", "title": "Negative Lookahead RegEx", "body": "<p><code>^(?!Quarantine_Bin)\\([0-9]+\\)</code> checks if the start of the string isn't followed by <code>Quarantine_Bin</code> but is followed by <code>\\([0-9]\\)</code>. That can never be true.</p>\n\n<p><code>[^Quarantine_Bin]</code> matches a single character that isn't <code>B</code>, <code>Q</code>, <code>a</code>, <code>e</code>, <code>i</code>, <code>n</code>, <code>r</code>, <code>t</code>, <code>u</code> or <code>_</code>. Not what you want.</p>\n\n<hr>\n\n<p>Without the filtering, you'd have</p>\n\n<pre><code>\\b\\w+\\([0-9]+\\)\n</code></pre>\n\n<p>You want to ensure the <code>\\b</code> isn't followed by <code>Quarantine_Bin</code> or <code>Inspection_Bin</code>, so you can use</p>\n\n<pre><code>\\b(?!Quarantine_Bin\\b)(?!Inspection_Bin\\b)\\w+\\([0-9]+\\)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\\b(?!(?:Quarantine|Inspection)_Bin\\b)\\w+\\([0-9]+\\)\n</code></pre>\n\n<p>The <code>\\b</code> within the lookahead prevents <code>Quarantine_Bin_X</code> from being filtered out.</p>\n\n<hr>\n\n<p>Useful:</p>\n\n<p><code>(?:(?!STRING).)*</code> is to <code>STRING</code> as <code>[^CHAR]*</code> is to <code>CHAR</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1478683866, "creation_date": 1478683866, "answer_id": 40503624, "question_id": 40493294, "link": "https://stackoverflow.com/questions/40493294/negative-lookahead-regex/40503624#40503624", "title": "Negative Lookahead RegEx", "body": "<p>It's in the comment, so I'll flesh it out as an actual answer. </p>\n\n<p>I would suggest generally avoiding lookahead/behind regexes, because it can get complicated and messy. In your use case - I'd probably just <code>split</code> the line into an array, and handle each individually. </p>\n\n<p>Something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) { \n    chomp;\n    #split on comma;\n    #grep out Inspection_Bin and Quarantine_Bin\n    my @fields = grep { not m/(?:Quarantine|Inspection)_Bin/ } split /,/;\n    #iterate each field, and select out two different regex matches, e.g.\n    #word bit and number bit. \n    print m/^(\\w+)/, \"=&gt;\", m/\\((\\d+)\\)/, \"\\n\" for @fields;\n}\n\n\n__DATA__\nQuarantine(2),Other_Bin(2),Quarantine_Bin(2),Quarantine_Bin(2),Quarantine_Bin(5),Inspection_Bin(3),Regular_Bin(5),other(2)\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 3548821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b2ec7b6d96ebf8433d0b84e293a0fedd?s=128&d=identicon&r=PG&f=1", "display_name": "nzaleski", "link": "https://stackoverflow.com/users/3548821/nzaleski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 40493345, "answer_count": 4, "score": 3, "last_activity_date": 1482814697, "creation_date": 1478627051, "question_id": 40493294, "link": "https://stackoverflow.com/questions/40493294/negative-lookahead-regex", "title": "Negative Lookahead RegEx", "body": "<p>Why is this not working? Trying to do a negative lookahead. I am trying to pull the numbers from the bins, except in quarantine bin and inspection bin. When I do the code with the ^ in the front is matches all numbers in parenthesis.  When I remove the ^ it matches nothing.  </p>\n\n<p>Also can you use the \"or operator |\" inside the negative lookahead? I want to have ^(?!Quarantine_Bin|Inspection_Bin)</p>\n\n<p>I also tried to specifically negate <code>[^Quarantine_Bin]</code> and it is still matching. </p>\n\n<pre><code>^(?!Quarantine_Bin)\\([0-9]+\\)\n</code></pre>\n\n<p>Data</p>\n\n<pre><code>    Quarantine(2),Other_Bin(2),Quarantine_Bin(2),Quarantine_Bin(2),\n    Quarantine_Bin(5),Inspection_Bin(3),Regular_Bin(5),other(2)\n</code></pre>\n"}, {"tags": ["perl", "download", "out-of-memory", "large-files"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 9, "last_activity_date": 1478626125, "creation_date": 1478626125, "answer_id": 40493003, "question_id": 40492850, "link": "https://stackoverflow.com/questions/40492850/perl-large-download-direct-to-file-to-avoid-ram-overload/40493003#40493003", "title": "Perl large download direct to file (to avoid RAM overload)", "body": "<p>Yep. Look at <a href=\"http://search.cpan.org/~ether/libwww-perl-6.15/lib/LWP/UserAgent.pm\" rel=\"noreferrer\"><code>LWP::UserAgent</code></a>'s <code>get</code> method:</p>\n\n<blockquote>\n  <p>$ua->get( $url , $field_name => $value, ... )</p>\n  \n  <p>Fields names that start with \":\" are special. These will not initialize headers of the request but will determine how the response content is treated. The following special field names are recognized:</p>\n</blockquote>\n\n<pre><code>:content_file   =&gt; $filename\n</code></pre>\n\n<blockquote>\n  <p>If a $filename is provided with the <code>:content_file</code> option, then the response content will be saved here instead of in the response object. </p>\n</blockquote>\n\n<p>Note - it probably won't handle filesystem errors nicely, so check you can write to that location. (permissions, directory exists, etc.)</p>\n"}], "owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 1, "accepted_answer_id": 40493003, "answer_count": 1, "score": 3, "last_activity_date": 1478626125, "creation_date": 1478625551, "question_id": 40492850, "link": "https://stackoverflow.com/questions/40492850/perl-large-download-direct-to-file-to-avoid-ram-overload", "title": "Perl large download direct to file (to avoid RAM overload)", "body": "<p>I'm trying to download a file with 1 GB of aproximated size to a server with 1 GB of RAM memory, so if I try to download it into a variable (code below), the OS kills the process due RAM overload.</p>\n\n<pre><code>require LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(3600);\n$ua-&gt;env_proxy;\n\nmy $response = $ua-&gt;get('http://example.com/largefile.xml');\n\nif ($response-&gt;is_success) {\n    print \"File downloaded\\n\";\n}\nelse {\n    die $response-&gt;status_line;\n}\n</code></pre>\n\n<p>The only way I think could work is using <code>system(\"wget ...\")</code> (or curl or something similar) but I'm sure there's a right way to do it directly with Perl.</p>\n\n<p>Do you know any method or option to download it directly to a file without using a system call?</p>\n"}, {"tags": ["xml", "perl", "post", "stdin"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478625244, "post_id": 40492363, "comment_id": 68229596, "body": "Not enough detail to answer. Stuck at <code>while ( &lt;STDIN&gt; ) </code> means it&#39;s waiting to get data on <code>STDIN</code>. And that&#39;s about all we can tell you, based on what you&#39;ve given us so far."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478626149, "post_id": 40492363, "comment_id": 68230143, "body": "This looks like a CGI program. So why aren&#39;t you using CGI,pm to get the parameters?"}, {"owner": {"reputation": 429, "user_id": 1142645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rEG7q.png?s=128&g=1", "display_name": "Tanzeel ur Rehman", "link": "https://stackoverflow.com/users/1142645/tanzeel-ur-rehman"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478626935, "post_id": 40492363, "comment_id": 68230605, "body": "@Sobrique Actually I m returning response after above given statement that is not executing. Below is code  while (&lt;STDIN&gt;) {\t\t\t\t\t\t\t\t\t\t\t\t\t\tprint MYFILE ($_);\t\t\t\t\t\t\t\t\t\t        ++$lineCounter;\t\t\t\t\t\t\t\t\t\t\t$dataLength += length($_);\t\t\t\t\t\t \t\t        if ($dataLength &gt;= $in_length) { last; }\t\t\t\t\t\t        if ($lineCounter &gt;= $MaxLines) {\t\t\t\t\t\t\t\t$Logger-&gt;log( level =&gt; &#39;warning&#39;, message =&gt; $Timestamp.&quot;Attempt to post large document by &quot;.$PosterAddress-&gt;to_string.&quot;\\n&quot;); \t\t\tpush(@errorlist, &quot;Aborted XMLPost: Document too long, greater than $MaxLines&quot;); last; \t\t} \t}  \tclose(MYFILE);"}, {"owner": {"reputation": 429, "user_id": 1142645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rEG7q.png?s=128&g=1", "display_name": "Tanzeel ur Rehman", "link": "https://stackoverflow.com/users/1142645/tanzeel-ur-rehman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478651781, "post_id": 40492363, "comment_id": 68241390, "body": "@DaveCross Thanks for your reply, that was my 2nd option, if already written script didn&#39;t work. Now I have solved my issue by using CGI.pm. Once again thank you."}], "owner": {"reputation": 429, "user_id": 1142645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rEG7q.png?s=128&g=1", "display_name": "Tanzeel ur Rehman", "link": "https://stackoverflow.com/users/1142645/tanzeel-ur-rehman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478624040, "creation_date": 1478624040, "question_id": 40492363, "link": "https://stackoverflow.com/questions/40492363/perl-file-reading-posted-xml-data-via-stdin-hangs-stuck-no-response", "title": "Perl file reading posted xml data via STDIN hangs, stuck, no response", "body": "<p>I have moved perl file from windows server 2003 to 2008 R2, that stuck and Not responding at this line:</p>\n\n<pre><code>while (&lt;STDIN&gt;)\n</code></pre>\n\n<p>I have tried this code also but no luck:</p>\n\n<pre><code>my $param_string;\nif ($ENV{'REQUEST_METHOD'} eq \"POST\"){\n    read(STDIN, $param_string, $ENV{'CONTENT_LENGTH'});\n}\nelse {\n   $param_string = $ENV{'QUERY_STRING'};\n}\n</code></pre>\n\n<p><strong>Case:</strong> Using iframe xml data is posted from one web application to other having a perl script, that is not responding. I have also tried simple hello world perl scripts, its working means Perl is properly installed. Also tried simple perl file with html form having input elements. Posted to test perl script that read posted data, but can't able (copy from this URL: <a href=\"http://ods.com.ua/win/eng/program/Perl5Unleashed/ch22.phtml\" rel=\"nofollow noreferrer\">http://ods.com.ua/win/eng/program/Perl5Unleashed/ch22.phtml</a>).\n<br />\n<strong>Perl Version:</strong> Strawberry 5, version 24, subversion 0 (V5.24.0) built for MSWin32-x86-multi-thread-64int.\n<br />\n<strong>Directory:</strong> C:\\Strawberry\\perl\\bin\\perl.exe.\n<br />\n<strong>CGI</strong> Installed on server.</p>\n"}, {"tags": ["python", "linux", "bash", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478617710, "post_id": 40490181, "comment_id": 68224334, "body": "How is it failing? What is happening? Is there any output? You need to include more details. You can <a href=\"https://stackoverflow.com/posts/40490181/edit\">edit</a> your question. You did not write the Perl program yourself, did you? It either was there already, or came with whatever software you are using."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1478618083, "post_id": 40490181, "comment_id": 68224604, "body": "<code>check_output</code> returns the output of the command, but that doesn&#39;t make much sense for a command that is already writing its output to a file. You can probably use <code>subprocess.call</code> instead."}, {"owner": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478620637, "post_id": 40490181, "comment_id": 68226457, "body": "@simbabque - Thanks for the feedback. I&#39;ve added some additional details to answer your questions."}, {"owner": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1478620708, "post_id": 40490181, "comment_id": 68226519, "body": "@chepner - I originally used subprocess.call which I thought I&#39;d left commented out, but apparently I pulled it out of the script. The results with .call were the same as I&#39;m getting from .check_output"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1478621939, "post_id": 40490181, "comment_id": 68227469, "body": "Also, don&#39;t catch a bare exception or ignore the actual exception. Use <code>except Exception as exc:</code>, then at the very least write the exception to your log file (or directly to standard error) so you can see what the actual problem is."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "edited": false, "score": 0, "creation_date": 1478620755, "post_id": 40490396, "comment_id": 68226563, "body": "Yeah I accounted for the spacing. Down in the actions dicts each argument that is passed up as a call load is preceded by a space."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "edited": false, "score": 0, "creation_date": 1478621130, "post_id": 40490396, "comment_id": 68226852, "body": "Yeah, I see that now. I understand that this isn&#39;t causing your problem. But wouldn&#39;t it be better to put the space in the line I quoted above (where its presence would make sense) rather than in each individual argument (where its presence is a mystery)?"}, {"owner": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "edited": false, "score": 1, "creation_date": 1478621333, "post_id": 40490396, "comment_id": 68227023, "body": "Yeah, I&#39;d agree with your thought process. Your change makes a lot of sense. I think I&#39;ll incorporate that now."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1478617963, "creation_date": 1478617963, "answer_id": 40490396, "question_id": 40490181, "link": "https://stackoverflow.com/questions/40490181/pipe-subprocess-to-a-file-in-linux/40490396#40490396", "title": "Pipe subprocess to a file in Linux", "body": "<pre><code>concatvar = \"/usr/bin/perl -I /opt/voyence/tools/db-utility/common /opt/voyence/tools/db-utility/database-utility.pl\" + CallLoad + \" &gt;&gt; \" + LOGFILE\n</code></pre>\n\n<p>This concatenates the name of your program (<code>database-utility.pl</code>) with the contents of the <code>CallLoad</code> variable - without putting a space between them. So, unless the value in <code>CallLoad</code> starts with a space, you'll actually be looking for a program called <code>database-utility.plWhateverIsInCallLoad</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "edited": false, "score": 0, "creation_date": 1478643503, "post_id": 40491900, "comment_id": 68238923, "body": "Thanks for the prototype.  I&#39;ve made a couple changes on my side to correct for a few errors that came up.  I&#39;ve got what I believe to be a workable script on my dev box and I&#39;ll let it run as a cron job tonight to see how it behaves.  I&#39;ll let you know how it turns out."}], "tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1478622394, "creation_date": 1478622394, "answer_id": 40491900, "question_id": 40490181, "link": "https://stackoverflow.com/questions/40490181/pipe-subprocess-to-a-file-in-linux/40491900#40491900", "title": "Pipe subprocess to a file in Linux", "body": "<p>Untested, but more idiomatic, Python. The major changes are to bypass the shell altogether when calling the Perl script, and to log any errors that might be raised by <code>subprocess.call</code> to aid in debugging the problem. (Consider using the <code>logging</code> module instead, but this has enough changes already.)</p>\n\n<pre><code>#! /usr/bin/python\nimport sys\nimport time\nimport os\nimport subprocess\n\ndef subprocess_caller(path, call_load, log_obj):\n    subprocess.call([\"/usr/bin/perl\",\n                     \"-I\",\n                     \"/opt/voyence/tools/db-utility/common\",\n                     path,\n                     call_load],\n                     stdout=log_obj)\n\nlog_header = \"\"\"\\\n------------------------------------------------------------------------------------------------------\nWeekly Voyence archival, deletion, and purging of jobs, events, and revisions beginning at %s\n\"\"\" %(time.strftime(\"%H:%M:%S\"),)\n\nif __name__ == \"__main__\":\n\n    #declare variables and objects\n    path = \"/opt/voyence/tools/db-utility/database-utility.pl\"\n    logfile = time.strftime(\"/var/log/voyence-archive/%Y%m%dvoyence-archive.log\")\n\n    #create new log file\n    with open(logfile, \"a+\") as log:\n        log.write(hog_header)\n        #job archival, deletion, and purging\n        job_actions = [\" archive jobs 90\",\" delete jobs 90\",\" purge jobs 275\"]\n        #event archival, deletion, and purging\n        event_actions = [\" archive events all 90\",\" delete events all 90\",\" purge events all 275\"]\n        #revision archival, deletion, and purging\n        revision_actions = [\" archive revisions 40\",\" purge revisions 60\",\"  delete revisions '3 months' 40\"]\n\n        actions = job_actions + event_actions + revision_action:\n\n        for action_type in actions:\n            for item in action_type:\n                try:\n                    subprocess_caller(path, item, log)\n                except Exception as exc:\n                    log_obj.write(exc + \"\\n\")\n                    log_obj.write(\"Block failed, continuing to next block\\n\")\n                    break\n                log.write(\"------\\n\")\n\n        log.write(\"Weekly Voyence archival, deletion, and purging of jobs, events, and revisions complete at %s\\n\" %\n                  (time.strftime(\"%H:%M:%S\"),))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7132298, "user_type": "registered", "profile_image": "https://graph.facebook.com/960262347317351/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7132298/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478622394, "creation_date": 1478617352, "last_edit_date": 1478620586, "question_id": 40490181, "link": "https://stackoverflow.com/questions/40490181/pipe-subprocess-to-a-file-in-linux", "title": "Pipe subprocess to a file in Linux", "body": "<p>I'm beating my head against a wall trying to get my code to work properly. In essence, I've written a python script that will be called by cron. The script is to run once per week to perform database maintenance. My python script will call a perl script that performs the actual maintenance. I've had to build it this way because the perl script will be run a total of 9 separate times. There are 3 different categories of DB items and each category requires 3 different actions from the perl script. If a single action in any category fails, the script is to break from that category and move to the next one (each action is dependent upon the previous action).</p>\n\n<p>My script is failing to execute properly and I'm not sure why. I'm trying to troubleshoot it but my logging logic isn't working properly either. The only output I get in my log file is the simple \"print\" commands that I've written into my script for notation and formatting.  </p>\n\n<p>I can run the perl script just fine from the CLI directly, but it fails to properly run when invoked from my python script.  Can anyone point me in the right direction please?</p>\n\n<p>EDIT:\nIn response to a question, I don't have a good explanation of how the perl script is failing. I'm not getting the stdout or stderr from the perl script into my log file so I don't yet know why it's failing.\nI didn't create the perl script, it was provided with the software suite that I'm administering. </p>\n\n<p>Here's the log file output:</p>\n\n<pre><code>------------------------------------------------------------------------------------------------------\nWeekly Voyence archival, deletion, and purging of jobs, events, and revisions beginning at 14:46:11\nBlock failed, continuing to next block\n------\nBlock failed, continuing to next block\n------\nBlock failed, continuing to next block\n------\nWeekly Voyence archival, deletion, and purging of jobs, events, and revisions complete at 14:46:11\n</code></pre>\n\n<p>Here is output from running the perl script from the CLI (without errors):</p>\n\n<pre><code>Script started at Mon Nov  7 14:59:53 2016\n\nArchving/Pruning 0 Parent jobs older than 90 days...\nArchving/Pruning 0 Child Jobs older than 90 days...\n\nNo Records avaialble for archive..jobs Exiting\nScript Completed.\n\nThe database utility console log can be found at /opt/voyence/tools/db-   utility/logs/dbutil_console.log\n\nScript exited at Mon Nov  7 14:59:58 2016\n</code></pre>\n\n<p>Here is the python script:</p>\n\n<pre><code>#! /usr/bin/python\nimport sys\nimport time\nimport os\nimport subprocess\ndef SubProcessCaller(PATH,CallLoad,LogObj,LOGFILE):\n    try:\n        # subprocess.Popen([\"/usr/bin/perl\", \"-i\", \"/opt/voyence/tools/db-    utility/database-utility.pl\", CallLoad], stderr=LogObj.write, stdout=LogObj.write, shell=true)\n        concatvar = \"/usr/bin/perl -I /opt/voyence/tools/db-utility/common /opt/voyence/tools/db-utility/database-utility.pl\" + CallLoad + \" &gt;&gt; \" + LOGFILE\n        subprocess.check_output(concatvar.split(), shell=True)\n        return True\n    except:\n        LogObj.write(\"Block failed, continuing to next block\" \"\\n\")\n        return False\n\nif __name__ == \"__main__\":\n\n    #DECLARE VARIABLES AND OBJECTS\n    TIME = time.strftime(\"%H:%M:%S\")\n    PATH = \"/opt/voyence/tools/db-utility/database-utility.pl\"\n    DATE = time.strftime(\"%Y%m%d\")\n    LOGFILE = \"/var/log/voyence-archive/\" + DATE + \"voyence-archive.log\"\n    LOG = open(LOGFILE, \"a+\")\n    #CREATE NEW LOG FILE\n    LOG.write(\"------------------------------------------------------------------------------------------------------\\n\")\n    LOG.write(\"Weekly Voyence archival, deletion, and purging of jobs, events, and revisions beginning at \" + TIME + \"\\n\")\n    #JOB ARCHIVAL, DELETION, AND PURGING\n    JobActionsDict = [\" archive jobs 90\",\" delete jobs 90\",\" purge jobs 275\"]\n    #EVENT ARCHIVAL, DELETION, AND PURGING\n    EventActionsDict = [\" archive events all 90\",\" delete events all 90\",\" purge events all 275\"]\n    #REVISION ARCHIVAL, DELETION, AND PURGING\n    RevisionActionsDict = [\" archive revisions 40\",\" purge revisions 60\",\"  delete revisions '3 months' 40\"]\n\n    ActionsTuple = (JobActionsDict, EventActionsDict, RevisionActionsDict)\n\n    for dict in ActionsTuple:\n        for item in dict:\n            SPCBool = SubProcessCaller(PATH,item,LOG,LOGFILE)\n            if SPCBool == False:\n                break\n        LOG.write(\"------\\n\")\n    #CLOSE AFTER ALL LOGS HAVE BEEN WRITTEN\n    LOG.write(\"Weekly Voyence archival, deletion, and purging of jobs, events, and revisions complete at \" + TIME + \"\\n\")\n    LOG.close()\n</code></pre>\n"}, {"tags": ["perl", "xml-libxml"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1478613048, "post_id": 40488542, "comment_id": 68220895, "body": "TITS = Try It To See!"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478613452, "post_id": 40488749, "comment_id": 68221192, "body": "Why do you have quotes around your package names?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1478615462, "post_id": 40488749, "comment_id": 68222642, "body": "@simbabque: Because <a href=\"http://www.perlmonks.org/?node_id=980498\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=980498</a> and <code>::-&gt;</code> is too ugly to type."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478622109, "post_id": 40488749, "comment_id": 68227601, "body": "@simbabque, They&#39;re protecting themselves against the remote possibility that there&#39;s a sub called <code>XML::LibXML</code>. Perl actually allows you to do use <code>XML::LibXML::</code> to solve that problem."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1478613379, "creation_date": 1478613379, "answer_id": 40488749, "question_id": 40488542, "link": "https://stackoverflow.com/questions/40488542/does-xmllibxmlnode-replacenode-replace-perl-instances-of-the-replaced-node/40488749#40488749", "title": "Does XML::LibXML::Node replaceNode() replace Perl instances of the replaced node", "body": "<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\n\nmy $dom = 'XML::LibXML'-&gt;load_xml(string =&gt; '&lt;r&gt;&lt;p&gt;&lt;c/&gt;&lt;/p&gt;&lt;/r&gt;');\nmy ($n1) = $dom-&gt;findnodes('/r/p/c');\nmy ($n2) = $dom-&gt;findnodes('/r/p/c');\n$n1-&gt;replaceNode('XML::LibXML::Element'-&gt;new('n'));\nprint $dom;\nprint $n1, $n2;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;r&gt;&lt;p&gt;&lt;n/&gt;&lt;/p&gt;&lt;/r&gt;\n&lt;c/&gt;&lt;c/&gt;\n</code></pre>\n"}], "owner": {"reputation": 931, "user_id": 4429472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/830c4684595c5ff0de0621e686c51345?s=128&d=identicon&r=PG&f=1", "display_name": "ZzZombo", "link": "https://stackoverflow.com/users/4429472/zzzombo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 40488749, "answer_count": 1, "score": 0, "last_activity_date": 1478614255, "creation_date": 1478612783, "last_edit_date": 1478614255, "question_id": 40488542, "link": "https://stackoverflow.com/questions/40488542/does-xmllibxmlnode-replacenode-replace-perl-instances-of-the-replaced-node", "title": "Does XML::LibXML::Node replaceNode() replace Perl instances of the replaced node", "body": "<p>... so after I replace <code>a</code> with <code>b</code>, all previous references to <code>a</code> now point to <code>b</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1478602320, "post_id": 40484945, "comment_id": 68213706, "body": "<code>print Dumper(@AoA);</code> prints list of arrays (same as <code>Dumper($AoA[0],$AoA[1], ..))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 0, "creation_date": 1478603004, "post_id": 40485057, "comment_id": 68214131, "body": "So why in Perl do I have to pass it as a reference to see the Arrays of Arrays?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 3, "creation_date": 1478603546, "post_id": 40485057, "comment_id": 68214433, "body": "@BioRod Because an array cannot be passed around. It&#39;s not an object like in other languages. Think of an array like a list with a name on it. But when you give the list to someone else, they cannot see the name. So when you use an array as the argument to a function, that function will just see the list of elements. But if you create a reference, you get <b>one thing</b>. The reference is a scalar value. It&#39;s only a pointer to the memory address that holds your array. Behind that address, there&#39;s your array. Then <code>Dumper</code> can make that reference to an array visible."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "is_accepted": true, "score": 7, "last_activity_date": 1478602386, "creation_date": 1478602386, "answer_id": 40485057, "question_id": 40484945, "link": "https://stackoverflow.com/questions/40484945/understanding-arrays-of-arrays/40485057#40485057", "title": "Understanding Arrays of Arrays", "body": "<p><strong>This is just due to how variables are passed to Perl subroutines.</strong></p>\n\n<p>A <code>sub</code> takes a list of variables, of any length, as its arguments.  If you call a sub with an array as the argument, all the array elements get passed in to the sub.</p>\n\n<p>So</p>\n\n<pre><code>my @array = (1,2,3);\n\nfoo(@array);\n</code></pre>\n\n<p>Is no different than this from the sub's perspective:</p>\n\n<pre><code>my $a = 1;\nmy $b = 2;\nmy $c = 3;\n\nfoo($a,$b,$c);\n</code></pre>\n\n<p>If you call <code>Dumper()</code> with any array, you will simply get the list of array elements.  It won't \"see\" the array itself unless you pass it in as a reference.</p>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 2, "accepted_answer_id": 40485057, "answer_count": 1, "score": 3, "last_activity_date": 1478606278, "creation_date": 1478602068, "last_edit_date": 1478606278, "question_id": 40484945, "link": "https://stackoverflow.com/questions/40484945/understanding-arrays-of-arrays", "title": "Understanding Arrays of Arrays", "body": "<p>I'm going through the documentation of perldsc in the section of Array of Arrays and it shows what an Array of Arrays looks like</p>\n\n<pre><code>@AoA = (\n    [ \"fred\", \"barney\" ],\n    [ \"george\", \"jane\", \"elroy\" ],\n    [ \"homer\", \"marge\", \"bart\" ],\n  );\n</code></pre>\n\n<p>In the next section on lines 1 - 4 it shows how to generate one</p>\n\n<pre><code># reading from file\n  while ( &lt;&gt; ) {\n push @AoA, [ split ];\n}\n</code></pre>\n\n<p>I want to learn how to create one. I created a file and had the following contents in it.</p>\n\n<blockquote>\n  <p>John Adam Joe</p>\n  \n  <p>Rod Fred James</p>\n  \n  <p>Allison Frank Jean</p>\n</blockquote>\n\n<p>Then I used the code from the example to create an Array of Arrays</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Data::Dumper;\nmy @AoA;\n\nwhile ( &lt;&gt; ) {\n push @AoA, [ split ];\n }\n\nprint Dumper(@AoA);\n</code></pre>\n\n<p>When I ran the code, the contents of Dumper is</p>\n\n<pre><code>$VAR1 = [\n      'John',\n      'Adam',\n      'Joe'\n    ];\n$VAR2 = [\n      'Rod',\n      'Fred',\n      'James'\n    ];\n$VAR3 = [\n      'Allison',\n      'Frank',\n      'Jean'\n    ];\n</code></pre>\n\n<p>As I can see, it printed 3  arrays, I thought it should print an array of arrays. </p>\n\n<p>But I when ran the same code with a small modification</p>\n\n<pre><code>print Dumper(\\@AoA);\n</code></pre>\n\n<p>It printed.</p>\n\n<pre><code>$VAR1 = [\n      [\n        'John',\n        'Adam',\n        'Joe'\n      ],\n      [\n        'Rod',\n        'Fred',\n        'James'\n      ],\n      [\n        'Allison',\n        'Frank',\n        'Jean'\n      ]\n    ];\n</code></pre>\n\n<p>Which is an Array of Arrays.</p>\n\n<p>Here is my understanding of \\@AoA. This is a pointer to the memory location of @AoA. So please clarify why I had to use \\@AoA to get the output that is expected? </p>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>I think my confusion is clearly explained in perlreftut</p>\n\n<blockquote>\n  <p>One of the most important new features in Perl 5 was the capability to manage complicated data structures like multidimensional arrays and nested hashes. To enable these, Perl 5 introduced a feature called references, and using references is the key to managing complicated, structured data in Perl. </p>\n  \n  <p>References in Perl are like names for arrays and hashes. They're Perl's private, internal names, so you can be sure they're unambiguous. Unlike \"Barack Obama\", a reference only refers to one thing, and you always know what it refers to. If you have a reference to an array, you can recover the entire array from it. If you have a reference to a hash, you can recover the entire hash. But the reference is still an easy, compact scalar value.\n  You can't have a hash whose values are arrays; hash values can only be scalars. We're stuck with that. But a single reference can refer to an entire array, and references are scalars, so you can have a hash of references to arrays, and it'll act a lot like a hash of arrays, and it'll be just as useful as a hash of arrays.</p>\n</blockquote>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478601296, "post_id": 40483233, "comment_id": 68213015, "body": "Is <a href=\"http://perldoc.perl.org/bignum.html\" rel=\"nofollow noreferrer\"><code>use bignum;</code></a> not an option?"}], "answers": [{"tags": [], "owner": {"reputation": 3359, "user_id": 122727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b5e946def051f311e802140ecb9fbf?s=128&d=identicon&r=PG", "display_name": "kubanczyk", "link": "https://stackoverflow.com/users/122727/kubanczyk"}, "is_accepted": false, "score": 2, "last_activity_date": 1478599226, "creation_date": 1478599226, "answer_id": 40483928, "question_id": 40483233, "link": "https://stackoverflow.com/questions/40483233/bc-within-perl-fails-to-get-going/40483928#40483928", "title": "bc within perl fails to get going", "body": "<p>Set <code>obase=16</code> before <code>ibase=16</code> and it will work as a charm. Otherwise you are setting the obase to 0x16, which is not what you want.</p>\n"}], "owner": {"reputation": 11, "user_id": 7130730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a2473dccaed4206e732545203e733e6?s=128&d=identicon&r=PG&f=1", "display_name": "arjun", "link": "https://stackoverflow.com/users/7130730/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478599226, "creation_date": 1478597233, "last_edit_date": 1478598663, "question_id": 40483233, "link": "https://stackoverflow.com/questions/40483233/bc-within-perl-fails-to-get-going", "title": "bc within perl fails to get going", "body": "<p>I am trying to run the <code>bc</code> unix command within Perl but that seems really hard right now. I am using <code>bc</code> because the numbers I am using are beyond 64bit in size. Here's a code snippet.</p>\n\n<pre><code>$temp_addr = \"A5A5A5A5A5A5A5A5\";\n$temp_data = \"82100000\";\nmy $bc_addr = `echo \\\"ibase=16;obase=16;($temp_addr/8)\\\" | bc`;\nmy $bc_data = `echo \\\"ibase=16;obase=16;($temp_data*200)\\\" | bc`;\ndie \"$bc_data, $bc_addr\";\n</code></pre>\n\n<p>The output for the code when I run it is something like...</p>\n\n<pre><code>02 08 20 08 03 09 14 ,\n 02 00 14 05 04 06 12 13 04 04 15 18 07 11 15 02 00\n</code></pre>\n\n<p>Now I was expecting the o/p in hex and a valid one at that. This one flies over my head. When I run bc in the shell directly things are just fine.</p>\n"}, {"tags": ["perl", "cmd", "perforce", "symbol-server"], "comments": [{"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 1, "creation_date": 1478604333, "post_id": 40483018, "comment_id": 68214885, "body": "Please learn how to <a href=\"http://stackoverflow.com/help/formatting\">format</a> your post properly!"}, {"owner": {"reputation": 15375, "user_id": 193453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc77f0d4e25a0f95d90a768aeb0a8517?s=128&d=identicon&r=PG", "display_name": "Bryan Pendleton", "link": "https://stackoverflow.com/users/193453/bryan-pendleton"}, "edited": false, "score": 0, "creation_date": 1478613738, "post_id": 40483018, "comment_id": 68221398, "body": "What is <code>p4index</code>? Can you provide a link to its docs?"}, {"owner": {"reputation": 356, "user_id": 516028, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0bcdf2f5cbcf4964447548c6160da063?s=128&d=identicon&r=PG", "display_name": "kfn", "link": "https://stackoverflow.com/users/516028/kfn"}, "edited": false, "score": 0, "creation_date": 1478676562, "post_id": 40483018, "comment_id": 68247128, "body": "p4index is for indexing pdb files, so they refer to the correct verison in perforce, Its part of ms win 10 sdk. I think after debugging it has to due with not loggin on to perfoce..."}, {"owner": {"reputation": 356, "user_id": 516028, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0bcdf2f5cbcf4964447548c6160da063?s=128&d=identicon&r=PG", "display_name": "kfn", "link": "https://stackoverflow.com/users/516028/kfn"}, "edited": false, "score": 0, "creation_date": 1478678091, "post_id": 40483018, "comment_id": 68247673, "body": "got it, it was due to a missing login."}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 654274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b7530eab612545c8c61921ecc413dc3?s=128&d=identicon&r=PG", "display_name": "christ.s", "link": "https://stackoverflow.com/users/654274/christ-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1489405175, "creation_date": 1489405175, "answer_id": 42762735, "question_id": 40483018, "link": "https://stackoverflow.com/questions/40483018/indexing-symbol-files-with-p4index-zero-files-found/42762735#42762735", "title": "Indexing symbol files with P4Index zero files found", "body": "<p>I just had something similar this morning.\nI'll share my solution if it can help some.\nThe p4 environment variable weren't properly set in my case.\nYou can either set them manually or go in P4V, Connection -> Environment Settings..., don't change anything and press OK.\nTo make sure they're properly set, open a command prompt and type \"p4 set\", you should see a set of variables reflecting information on your current connection to Perforce.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 356, "user_id": 516028, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0bcdf2f5cbcf4964447548c6160da063?s=128&d=identicon&r=PG", "display_name": "kfn", "link": "https://stackoverflow.com/users/516028/kfn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489405175, "creation_date": 1478596558, "question_id": 40483018, "link": "https://stackoverflow.com/questions/40483018/indexing-symbol-files-with-p4index-zero-files-found", "title": "Indexing symbol files with P4Index zero files found", "body": "<p>I am trying to setup a symbol server, and hence I need the symbols indexed to map to the source version. </p>\n\n<p>I am running p4Index on folder where the solution resides. </p>\n\n<p>my disc files and folders: </p>\n\n<p>.\\CalculatorDemo\\bin\\ where the output is produced<br>\n.\\CalculatorDemo\\CalculatorApp\\ contains source<br>\n.\\CalculatorDemo\\CalculatorDll\\ contains source<br>\n.\\CalculatorDemo\\CalculatorTest\\ contains source  </p>\n\n<p>In my version control the path in the depot is:<br>\n//sw/Main/Internal/CalculatorDemo/ </p>\n\n<p>and my workspace is: \nc:\\Projects\\Dev\\sw\\Main\\Internal\\CalculatorDemo\\  </p>\n\n<p>When I try to index it I get no files found..<br>\n    C:\\projects\\dev\\sw\\main\\Internal\\CalculatorDemo>p4Index -debug<br>\n    ---\n    ssindex.cmd [STATUS] : Server ini file: C:\\Program Files (x86)\\Windows Kits\\10\\Debuggers\\x64\\srcsrv\\srcsrv.ini \n    ssindex.cmd [STATUS] : Source root    : C:\\projects\\dev\\sw\\main\\Internal\\CalculatorDemo<br>\n    ssindex.cmd [STATUS] : Symbols root   : C:\\projects\\dev\\sw\\main\\Internal\\CalculatorDemo<br>\n    ssindex.cmd [STATUS] : Control system : P4<br>\n    ssindex.cmd [STATUS] : P4 program name: p4.exe<br>\n    ssindex.cmd [STATUS] : P4 Label       : <br>\n    ssindex.cmd [STATUS] : Old path root  : <br>\n    ssindex.cmd [STATUS] : New path root  : <br>\n    ssindex.cmd [STATUS] : Partial match  : Not enabled \n    ---\n    ssindex.cmd [STATUS] : Running... this will take some time...<br>\n    ssindex.cmd [INFO  ] : ... indexing      C:\\projects\\dev\\sw\\main\\Internal\\CalculatorDemo\\bin\\x64    \\Debug\\CalculatorApp.pdb<br>\n    ssindex.cmd [INFO  ] : ... zero source files found ...<br>\n    ssindex.cmd [INFO  ] : ... indexing      C:\\projects\\dev\\sw\\main\\Internal\\CalculatorDemo\\bin\\x64\\Debug\\CalculatorDll.pdb<br>\n    ssindex.cmd [INFO  ] : ... zero source files found ...<br>\n    ssindex.cmd [INFO  ] : ... indexing  C:\\projects\\dev\\sw\\main\\Internal\\CalculatorDemo\\bin\\x64 \\Debug\\CalculatorTest.pdb  </p>\n\n<p>I cannot seem to get the hole through and get the file version info into the pdb's. - (I am doing this on my developer maschine, because I want to get the script working before I involve our build server) </p>\n\n<p>Does anyone know (yes offcause someone does) how I can get the problem debugged/fixed. I probably has to do som perl debuggin or something. - I suspect that it could be a problem with not pointing to the rigth place \non the perforce server... </p>\n\n<p>Thanks in advance \nKenneth </p>\n"}, {"tags": ["perl", "pattern-matching", "substring", "hashtable"], "comments": [{"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 1, "creation_date": 1478601669, "post_id": 40482962, "comment_id": 68213275, "body": "<code>$k</code> used, but not defined. <code>use warinings; use strict;</code>"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1478620882, "post_id": 40482962, "comment_id": 68226660, "body": "Hash <code>%kmer</code> allways empty !!!"}, {"owner": {"reputation": 1, "user_id": 4910450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450321218783020a7497a24ae8d9c9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alina Orozco", "link": "https://stackoverflow.com/users/4910450/alina-orozco"}, "edited": false, "score": 0, "creation_date": 1478631874, "post_id": 40482962, "comment_id": 68233196, "body": "Yes I just put the code straight in here from my editor so I had to manually add spaces to get everything into one code block. In my actual program, the commented out areas are not commented out. I used the hashes to distinguish areas that I am specifically having trouble with and likely need to implement another way.."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1478687712, "post_id": 40482962, "comment_id": 68252525, "body": "At analysis step in 1 symbol, search in both directions does not make sense.This can be used if increase step in the second file to $k. But in this case, this guarantee find all matches of a minimum length $k*2-1."}], "answers": [{"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1478676034, "last_edit_date": 1478676034, "creation_date": 1478638351, "answer_id": 40496203, "question_id": 40482962, "link": "https://stackoverflow.com/questions/40482962/finding-longest-match-between-2-files-from-pattern/40496203#40496203", "title": "Finding longest match between 2 files from pattern", "body": "<pre><code>use strict;         # &lt;--- Allways use this\nuse warnings;       # &lt;--- and this\nuse Data::Dumper;\n\nmy $k=3;\n\nopen(my $IN, '&lt;', \"File2\");  # use $IN instead of depricated IN\nmy $line=0;  # line number\nmy %kmer;    # hash of arrays of all $k-letter \"words\" line/position\nmy @Q;       # rows of Q-file\nwhile(&lt;$IN&gt;) {\n  chomp;\n  next if /^&gt;/;   \n  s/^\\s+|\\s+$//g; \n  next if !$_;\n  my $pos=0;\n  push @Q, $_;    # store source row\n  for(/(?=(.{$k}))/g) {  # Capture $k letters. floating window with step 1 symbol\n   push @{$kmer{$_}}, [$line,$pos];  # store row number and position of \"word\"\n   $pos++;\n  }\n  $line++;\n}\n\nopen($IN, '&lt;', \"File1\");\n$line=0;\nwhile(&lt;$IN&gt;) {   # Read S-file\n  chomp;\n  next if /^&gt;/;\n  s/^\\s+|\\s+$//g;\n  next if !$_;\n  my $pos=0;\n  my $len=length($_);  # length of row of S-file\n  my $s=$_;            # Current row of S-file\n  my @ignore=();       # array for store information about match tails\n  for(/(?=(.{$k}))/g) {\n    next if ! $kmer{$_};  # \"word\" not found try to next\n    for(@{$kmer{$_}}) {   # $kmer{word} contains array of lines/positions in Q\n      my($qline, $qpos)=@{$_};\n#      print \"test $qline:$qpos \";\n      if( grep {$_-&gt;[0]==$qline &amp;&amp; $_-&gt;[1]==$qpos } @ignore ) {\n      # this line/position already tested and included in found matching\n#        print \"Ignore match tail $qline:$qpos\\n\";\n        next;\n      }\n      my $j=$k;  # $k letters same, test after this point\n      my $qlen=length($Q[$qline]);\n      $j++ while( $pos+$j&lt;$len &amp;&amp; $qpos+$j&lt;$qlen &amp;&amp;\n                  substr($s,$pos+$j,1) eq substr($Q[$qline],$qpos+$j,1) );\n      print \"MATCH FOUND: S-file line $line pos $pos, Q-file line $qline pos $qpos: \",\n            substr($s,$pos,$j),\"\\n\";\n      push @ignore, [$qline, $qpos, $j];  # store positions and length of match\n    }\n  } continue {  # Continue block works on all loops, include after \"next\"\n   $pos++;\n   @ignore=grep { # recalculate/filter position and length of all match tails\n                  ++$_-&gt;[1];  # increment position\n                  (--$_-&gt;[2]) # decrement length\n                   &gt;= $k      # and filter out lengths &lt; $k\n                } @ignore;\n#   print Dumper(\\@ignore);\n  }\n  $line++;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4910450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450321218783020a7497a24ae8d9c9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alina Orozco", "link": "https://stackoverflow.com/users/4910450/alina-orozco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478676034, "creation_date": 1478596377, "last_edit_date": 1478640535, "question_id": 40482962, "link": "https://stackoverflow.com/questions/40482962/finding-longest-match-between-2-files-from-pattern", "title": "Finding longest match between 2 files from pattern", "body": "<p>I am having trouble implementing two files within this program. I am trying to to access the contents of file <code>$Q</code> and <code>$s</code>.</p>\n\n<pre><code>print \"Input the K value \\n\";\n$k = &lt;&gt;;\nchomp $k;\n\nprint \"Input T\\n\";\n$t = &lt;&gt;;\nchomp $t;\n\n%Qkmer = ();                      \n$i = 1;\n\n$query=' ';\nwhile ($line=&lt;IN&gt;) {\nchomp($line);\n if ($line=~ m/^&gt;/ ) {\n next;\n}\n$query=$query.$line;\n$line=~ s/(^|\\n)[\\n\\s]*/$1/g;\n\n while (length($line) &gt;= $k) {\n   $line =~ m/(.{$k})/;\n   if (! defined $Qkmer{$1}) {#every key not deined as the first match\n     $Qkmer{$1} = $i;\n   }\n   $i++;\n   $line = substr($line, 1, length($line) -1);\n }\n}\n\nopen(MYDATA, '&lt;', \"data.txt\");\n\nwhile ($line=&lt;MYDATA&gt;) { \\\n  chomp($line);\n  %Skmer = ();           # This initializes the hash called Skmer.\n  $j = 1;\n\n  if ($line=~ m/^&gt;/ ) { #if the line starts with &gt;\n    next; #start on next line #separated characters\n  }\n  $line=~ s/^\\s+|\\s+$//g ; #remove all spaces from file\n  while (length($line) &gt;= $k) {\n    $line =~ m/(.{$k})/;#match any k characters and only k characters in dna\n    $Skmer{$1} = $j; #set the key position to $j and increase for each new key\n    $j++;\n    $line = substr($line, 1, length($line) -1); #this removes the first character in the current string\n  }\n\n  ###(56)###for($Skmerkey(keys %Skmer)){\n    $i=$Skmer{$Skmerkey};\n    if(defined $Qkmer($Skmerkey)){\n      $j=$Qkmer($Skmerkey);\n      }\n      $S1=$line;\n      $S2=$query;\n      @arrayS1= split(//, $S1);\n      @array2= split(//, $S2);\n\n      $l=0;\n      while($arrayS1[$i-$l] eq $arrayS2[$j-$l]){\n        $l++;\n      }\n      $start=$i-$l;\n      $m=0;\n      while ($arrayS1[$i+$k+$m] eq $arrayS2[$j+$k+$m]) {\n        $m++;\n      }\n      $length=$l+$k+$m;\n      $match= substr($S1, $start, $length);\n\n      if($length&gt;$t){\n        $longest=length($match);\n        print \"Longest: $match of length $longest \\n\";\n      }\n  }\n\n}###(83)###\n</code></pre>\n\n<p>The input files contain only strings of letters. For example:</p>\n\n<p><strong>File 1:</strong></p>\n\n<pre><code>ahhtsagnchjgstffhjyfcsghnvzfhg\n</code></pre>\n\n<p><strong>File2:</strong> </p>\n\n<pre><code>ggujvfbgfgkjfcijjjffcvvafcsghnvzfhgvugxckugcbhfcgh\nghnvzfhgvugxckHhfgjgcfujvftjbvdtkhvddgjcdgjxdjkfrh\najdbvciyqdanvkjghnvzfhgvugxc\n</code></pre>\n\n<p>From a match of a word of length<code>$k</code> in file 1 in file 2, I check from that match in file 2 to left and to right of word for further matches. The final output is the longest match between File 1 and File 2 based on <code>$k</code>. Now I ge</p>\n\n<p>With this code, I get a syntax error and I am not suer why because it looks correct to me:</p>\n\n<pre><code>syntax error at testk.pl line 56, near \"$Skmerkey(\"\nsyntax error at testk.pl line 83, near \"}\"  \n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "stdout"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1478593714, "post_id": 40482140, "comment_id": 68208206, "body": "What about <code>$|</code> (see <a href=\"http://p3rl.org/perlvar\" rel=\"nofollow noreferrer\">perlvar</a>)?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1478594980, "post_id": 40482140, "comment_id": 68208898, "body": "<a href=\"http://stackoverflow.com/questions/8619505/perl-print-on-the-display-and-also-into-a-file\" title=\"perl print on the display and also into a file\">stackoverflow.com/questions/8619505/&hellip;</a>"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1478600683, "post_id": 40482140, "comment_id": 68212601, "body": "<code>open(FH, &quot;| tee &quot; . $outFilename) or die(&#39;Error&#39;);</code>"}], "owner": {"reputation": 1, "user_id": 6699583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a102f4290e6b90f9bfd1479211425830?s=128&d=identicon&r=PG&f=1", "display_name": "jameslooi", "link": "https://stackoverflow.com/users/6699583/jameslooi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "closed_date": 1478598885, "answer_count": 0, "score": 0, "last_activity_date": 1478593485, "creation_date": 1478593485, "question_id": 40482140, "link": "https://stackoverflow.com/questions/40482140/perl-print-output-to-same-console-and-a-file-simultaneously", "closed_reason": "Duplicate", "title": "Perl print output to same console and a file simultaneously", "body": "<p>I have 2 perl script file and I would like print the output (file 1 &amp; file 2) to same console and a logfile simultaneously, how to do that? \nMy script below will only print the file 2 output to console screen when it finish execute file 2. I need print the file 2 output to console realtime, not wait until it finish execute.</p>\n\n<p><strong>File 1: test_perl.pl</strong></p>\n\n<pre><code>use File::Basename;\nuse strict;\nuse Env;\n\nmy $MSGOUT = \\*STDOUT;\nopen( LOGFILE, \"&gt;/tmp/lofgile.txt\" ) || die \"Unable to open log file /tmp/lofgile.txt : $! \\n\\n\";\n$MSGOUT = \\*LOGFILE;\n\nmy $output_log =`perl /tmp/test_perl_2.pl 2&gt;&amp;1`;\nprint $MSGOUT \"$output_log\";\n</code></pre>\n\n<p><strong>File 2: test_perl_2.p</strong>l</p>\n\n<pre><code>use File::Basename;\nuse strict;\nuse Env;\n\nprint \"Hello from test perl 2\\n\";\n\nforeach my $i (0..100) {\n  print \"testing $i\\n\";\n}\nprint \"----------------\\n\";\nsleep(5);\nforeach my $i (101..200) {\n  print \"testing $i\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "komodo"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478570498, "post_id": 40477775, "comment_id": 68200096, "body": "what is $Config{ivsize}"}, {"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478570711, "post_id": 40477775, "comment_id": 68200138, "body": "It is 8 . What does that mean?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478570770, "post_id": 40477775, "comment_id": 68200150, "body": "That is the actual number of bytes it uses for integers; use64bitint isn&#39;t as reliable."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478570809, "post_id": 40477775, "comment_id": 68200162, "body": "it does look like it is truncating at 53 bits as if it is storing it in a floating point NV; don&#39;t know why though."}, {"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478623045, "post_id": 40477775, "comment_id": 68228220, "body": "@ikegami this gives archname=&#39;MSWin32-x64-multi-thread&#39;;"}, {"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478626821, "post_id": 40477775, "comment_id": 68230524, "body": "@ikegami I use my debugger to look at the value. But let me print it and see."}, {"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478627016, "post_id": 40477775, "comment_id": 68230661, "body": "@ikegami huh.. it prints the right value. I guess this is problem with the IDE I am using (Komodo). I never considered printing it. Sorry my Perl knowledge is limited. Maybe I should reply to my own question (or maybe you can) before someone downvotes my question :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478627725, "post_id": 40477775, "comment_id": 68231059, "body": "@ysth, See <a href=\"http://stackoverflow.com/a/40493366/589924\">stackoverflow.com/a/40493366/589924</a>"}], "answers": [{"comments": [{"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "edited": false, "score": 0, "creation_date": 1478571825, "post_id": 40477876, "comment_id": 68200432, "body": "Thanks! You are right, with warnings enabled I get that message."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478577099, "post_id": 40477876, "comment_id": 68201600, "body": "The warning simply means that it won&#39;t work on a 32-bit build, but it should work when $Config{ivsize} is 8!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1478571199, "creation_date": 1478571199, "answer_id": 40477876, "question_id": 40477775, "link": "https://stackoverflow.com/questions/40477775/perl-adding-two-numbers-one-of-which-is-more-than-32-bits/40477876#40477876", "title": "Perl: Adding two numbers, one of which is more than 32 bits", "body": "<p>You don't show the code you use to print $sum; that may be where the problem is, but I can't duplicate it.  In any case, if you have warnings enabled, the call to hex() is going to give you a <code>Hexadecimal number &gt; 0xffffffff non-portable</code> warning.</p>\n\n<p>You could do:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Math::BigInt;\n\nmy $hex_str = \"ffffff00000000\";\nmy $hex_val = Math::BigInt-&gt;new(\"0x$hex_str\");\nmy $sum = $hex_val + 5;\nprint $sum-&gt;as_hex, \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "edited": false, "score": 0, "creation_date": 1478627388, "post_id": 40493366, "comment_id": 68230880, "body": "@ikegami - Thanks for looking at these. This drove me nuts. Lesson learnt - don&#39;t realy on the values Komodo shows in watch window."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478627812, "post_id": 40493366, "comment_id": 68231102, "body": "The solution is to create a watch for the expression <code>sprintf &quot;%X&quot;, $sum</code> if you can."}, {"owner": {"reputation": 319, "user_id": 1596011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77061ba6a8415bd278e827949b8a1495?s=128&d=identicon&r=PG", "display_name": "th3coop", "link": "https://stackoverflow.com/users/1596011/th3coop"}, "edited": false, "score": 2, "creation_date": 1478628662, "post_id": 40493366, "comment_id": 68231521, "body": "Please file a bug <a href=\"https://github.com/Komodo/KomodoEdit/issues/new\" rel=\"nofollow noreferrer\">github.com/Komodo/KomodoEdit/issues/new</a> (Yes you file Komodo IDE tickets with the Komodo Edit repo).  Great work digging into the issue btw.  If you create a ticket please make sure to link this forum thread."}, {"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "reply_to_user": {"reputation": 319, "user_id": 1596011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77061ba6a8415bd278e827949b8a1495?s=128&d=identicon&r=PG", "display_name": "th3coop", "link": "https://stackoverflow.com/users/1596011/th3coop"}, "edited": false, "score": 0, "creation_date": 1478633408, "post_id": 40493366, "comment_id": 68233980, "body": "@cgchoffman I just did  -<a href=\"https://github.com/Komodo/KomodoEdit/issues/2138\" rel=\"nofollow noreferrer\">github.com/Komodo/KomodoEdit/issues/2138</a> . Thanks!"}, {"owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478633453, "post_id": 40493366, "comment_id": 68234019, "body": "@ikegami sprintf in watch window is a great solution!"}], "tags": [], "owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "is_accepted": false, "score": 2, "last_activity_date": 1478633795, "last_edit_date": 1478633795, "creation_date": 1478627320, "answer_id": 40493366, "question_id": 40477775, "link": "https://stackoverflow.com/questions/40477775/perl-adding-two-numbers-one-of-which-is-more-than-32-bits/40493366#40493366", "title": "Perl: Adding two numbers, one of which is more than 32 bits", "body": "<p>It appears that Komodo (the IDE used) or what it uses to exchange data with <code>perl</code> is using a double-precision floating point to store the 64-bit value, resulting in a loss of precision.</p>\n\n<p>This causes the watch window to show the wrong value for <code>$sum</code>, but the correct value is shown when using <code>printf \"%X\\n\", $sum;</code> from within Perl or when using <code>sprintf \"%X\", $sum</code> from the Kodomo watch window.</p>\n"}], "owner": {"reputation": 800, "user_id": 1113720, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6N9jm.jpg?s=128&g=1", "display_name": "Mathai", "link": "https://stackoverflow.com/users/1113720/mathai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 40477876, "answer_count": 2, "score": 1, "last_activity_date": 1478633795, "creation_date": 1478570314, "last_edit_date": 1478627487, "question_id": 40477775, "link": "https://stackoverflow.com/questions/40477775/perl-adding-two-numbers-one-of-which-is-more-than-32-bits", "title": "Perl: Adding two numbers, one of which is more than 32 bits", "body": "<p>If I have</p>\n\n<pre><code>my $hex_str = \"fffff00000000\";\n\nmy $hex_val = hex($hex_str);\n\nmy $sum = $hex_val + 5;\n</code></pre>\n\n<p><code>$sum</code> is what I expect - <code>0xfffff00000005</code></p>\n\n<p>If I have </p>\n\n<pre><code>my $hex_str = \"ffffff00000000\";\n\nmy $hex_val = hex($hex_str);\n\nmy $sum = $hex_val + 5;\n</code></pre>\n\n<p>Komodo shows <code>$sum</code> being <code>0xffffff00000008</code></p>\n\n<p>If I have </p>\n\n<pre><code>my $hex_str = \"fffffff00000000\";\n\nmy $hex_val = hex($hex_str);\n\nmy $sum = $hex_val + 5;\n</code></pre>\n\n<p>Komodo shows <code>$sum</code> being <code>0xfffffff00000000</code></p>\n\n<p>Can someone explain to me why I get unexpected values in the second and third case?</p>\n\n<pre><code>&gt;perl -V:use64bitint\nuse64bitint='define';\n\n&gt;perl -V:ivsize\nivsize='8';\n\n&gt;perl -V:archname\narchname='MSWin32-x64-multi-thread';\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 887, "user_id": 1429776, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nGt0C.jpg?s=128&g=1", "display_name": "mmenschig", "link": "https://stackoverflow.com/users/1429776/mmenschig"}, "edited": false, "score": 3, "creation_date": 1478553394, "post_id": 40474771, "comment_id": 68194109, "body": "what is the script? Please format your code using backticks or CTRL+K"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1478554372, "last_edit_date": 1478554372, "creation_date": 1478553878, "answer_id": 40474918, "question_id": 40474771, "link": "https://stackoverflow.com/questions/40474771/what-encryption-is-used-to-encrypt-the-password/40474918#40474918", "title": "What encryption is used to encrypt the password", "body": "<p>The password wasn't encrypted; it was <a href=\"https://en.wikipedia.org/wiki/Cryptographic_hash_function\" rel=\"nofollow noreferrer\">hashed</a> using <a href=\"http://perldoc.perl.org/functions/crypt.html\" rel=\"nofollow noreferrer\"><code>crypt</code></a>.</p>\n\n<pre><code>$ perl -e'CORE::say crypt($ARGV[0], $ARGV[1]) eq $ARGV[1] ? 1 : 0' 123456 cb897EaMgDZy6\n1\n</code></pre>\n\n<p>Note that use of <code>crypt</code> must be avoided! It is far too weak to be of any value.</p>\n"}], "owner": {"reputation": 1, "user_id": 7128544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb2b419f6f3bb65ca8cda77b410d75c?s=128&d=identicon&r=PG&f=1", "display_name": "user7128544", "link": "https://stackoverflow.com/users/7128544/user7128544"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1478556364, "answer_count": 1, "score": -9, "last_activity_date": 1478554372, "creation_date": 1478553316, "question_id": 40474771, "link": "https://stackoverflow.com/questions/40474771/what-encryption-is-used-to-encrypt-the-password", "closed_reason": "Needs details or clarity", "title": "What encryption is used to encrypt the password", "body": "<p>Hello this is a perl script that will create a file inside a folder in the server\nit will ask the user to input username password and email\nwhen the account is created it will be created like that \nusername.txt </p>\n\n<p>inside the file will be \nusername\npassword\nemail</p>\n\n<p>however the password will be encrypted if I put 123456 that will be encrypted to \ncb897EaMgDZy6</p>\n\n<p>I am trying to know what kinda of encryption is used </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478535717, "post_id": 40469509, "comment_id": 68183961, "body": "The OP is trying to do things right by avoiding the shell and you suggest <code>system ( &quot;$cmd @args&quot; );</code>? That&#39;s never the answer!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1478534898, "last_edit_date": 1478534898, "creation_date": 1478534755, "answer_id": 40469509, "question_id": 40469395, "link": "https://stackoverflow.com/questions/40469395/perl-system-command-with-multiple-parameters-output-to-file/40469509#40469509", "title": "Perl system command with multiple parameters output to file", "body": "<p>This is because <code>&gt; file.out</code> is a shell feature. By using <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> in the way that you are - you're bypassing the shell, and feeding the arguments <em>directly</em> to the program you're calling. </p>\n\n<blockquote>\n  <p>Note that argument processing varies depending on the number of arguments. If there is more than one argument in LIST, or if LIST is an array with more than one value, starts the program given by the first element of the list with arguments given by the rest of the list. If there is only one scalar argument, the argument is checked for shell metacharacters, and if there are any, the entire argument is passed to the system's command shell for parsing (this is /bin/sh -c on Unix platforms, but varies on other platforms). If there are no shell metacharacters in the argument, it is split into words and passed directly to execvp , which is more efficient. On Windows, only the system PROGRAM LIST syntax will reliably avoid using the shell; system LIST , even with more than one element, will fall back to the shell if the first spawn fails.</p>\n</blockquote>\n\n<p>And thus the redirect doesn't work - presumably your program is ignoring or otherwise dealing with arguments passed of <code>&gt;</code> and <code>file.out</code>. </p>\n\n<p>You can either do a one line \"system\":</p>\n\n<pre><code>system ( \"$cmd @args\" );\n</code></pre>\n\n<p>Or use <code>open</code> to open a filehandle, and do the IO within your program. </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1478536794, "last_edit_date": 1478536794, "creation_date": 1478535701, "answer_id": 40469804, "question_id": 40469395, "link": "https://stackoverflow.com/questions/40469395/perl-system-command-with-multiple-parameters-output-to-file/40469804#40469804", "title": "Perl system command with multiple parameters output to file", "body": "<p>That passes four arguments to the program, as if you executed the following in the shell:</p>\n\n<pre><code> prog \"input1\" \"input2\" \"&gt;\" \"file.out\"\n</code></pre>\n\n<p>You can't instruct the shell to redirect output without using a shell!</p>\n\n<p>The following solutions assume:</p>\n\n<pre><code>my $prog = 'cat';\nmy @args = ( 'input1', 'input2' );\nmy $out_qfn = 'file.out';\n</code></pre>\n\n<p>The following solutions are all lacking some error checking.</p>\n\n<h2>Solution 1</h2>\n\n<p>Use the shell to perform the redirection and escaping.</p>\n\n<pre><code>system('/bin/sh', '-c', '\"$@\" &gt; \"$0\"', $out_qfn, $prog, @args);\n</code></pre>\n\n<h2>Solution 2</h2>\n\n<p>Use the shell to perform the redirection, and use Perl to perform the escaping.</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $cmd = shell_quote($prog, @args) . \" &gt;\".shell_quote($out_qfn);\nsystem('/bin/sh', '-c', $cmd);\n</code></pre>\n\n<p>The last line simplifies to</p>\n\n<pre><code>system($cmd);\n</code></pre>\n\n<h2>Solution 3</h2>\n\n<p>Avoid using a shell. Use Perl to perform the redirection.</p>\n\n<pre><code># This isn't safe if @args is empty.\n\nopen(my $out_fh, '&gt;', $out_qfn)\n   or die(\"Can't create output file \\\"$out_qfn\\\": $!\\n\");\n\nopen(my $pipe, '-|', $prog, @args)\n   or die $!;\n\nwhile (&lt;$pipe&gt;) {\n   print($out_fh $_);\n}\n\nclose($fh);\n</code></pre>\n\n<p>or</p>\n\n<pre><code># This isn't safe if @args is empty.\n\nuse IPC::Open3 qw( open3 );\n\n{\n   open(local *CHILD_STDIN, '&lt;', '/dev/null')\n      or die $!;\n\n   open(local *CHILD_STDOUT, '&gt;', $out_qfn)\n      or die(\"Can't create output file \\\"$out_qfn\\\": $!\\n\");\n\n   my $pid = open3('&lt;&amp;CHILD_STDIN', '&gt;&amp;CHILD_STDOUT', '&gt;&amp;STDERR', $prog, @args);\n   waitpid($pid, 0);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\n\nrun3([ $prog, @args ], \\undef, $out_qfn);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use IPC::Run qw( run );\n\nrun([ $prog, @args ], \\undef, $out_qfn);\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 1588581, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10bb96afabce6c575f95efd8f3c1f17e?s=128&d=identicon&r=PG", "display_name": "LKramer", "link": "https://stackoverflow.com/users/1588581/lkramer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 40469804, "answer_count": 2, "score": 1, "last_activity_date": 1478536794, "creation_date": 1478534475, "question_id": 40469395, "link": "https://stackoverflow.com/questions/40469395/perl-system-command-with-multiple-parameters-output-to-file", "title": "Perl system command with multiple parameters output to file", "body": "<p>I need to call the system command using the form:</p>\n\n<pre><code>system( $cmd, @args );\n</code></pre>\n\n<p>When I define @args as </p>\n\n<pre><code>my @args = ( \"input1\", \"input2\", \"&gt;\", \"file.out\" );\n</code></pre>\n\n<p>The \">\" and \"file.out\" are not interpreted as I'd hoped.  How can I send the output of this form of system command to a file?</p>\n"}, {"tags": ["perl", "arguments", "printf"], "comments": [{"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1478528944, "post_id": 40467455, "comment_id": 68179277, "body": "@HunterMcMillen, you mean like create a function? <code>perl -e &quot;sub ppp () {printf (&#39;%1$s%2$s is not %1$s and not %2$s&#39;, &#39;foo&#39;, &#39;bar&#39;);} ppp();&quot;</code> like this?.. This doesn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 871289, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": false, "score": 2, "last_activity_date": 1478528997, "last_edit_date": 1592644375, "creation_date": 1478528997, "answer_id": 40467638, "question_id": 40467455, "link": "https://stackoverflow.com/questions/40467455/is-it-possible-get-a-particular-argument-in-printf-format-in-perl-in-command-lin/40467638#40467638", "title": "Is it possible get a particular argument in printf format in perl in command line?", "body": "<p>This works for me on *nix:</p>\n<pre><code>perl -e &quot;printf('%s%s is not %1\\$s and not %2\\$s', 'foo', 'bar');&quot;\n</code></pre>\n<p>See the <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code> documentation</a>, in particular the examples at the very end:</p>\n<blockquote>\n<p>Here are some more examples; be aware that when using an explicit index, the <code>$</code> may need escaping:</p>\n<pre><code>printf &quot;%2\\$d %d\\n&quot;,      12, 34;     # will print &quot;34 12\\n&quot;\nprintf &quot;%2\\$d %d %d\\n&quot;,   12, 34;     # will print &quot;34 12 34\\n&quot;\nprintf &quot;%3\\$d %d %d\\n&quot;,   12, 34, 56; # will print &quot;56 12 34\\n&quot;\nprintf &quot;%2\\$*3\\$d %d\\n&quot;,  12, 34,  3; # will print &quot; 34 12\\n&quot;\nprintf &quot;%*1\\$.*f\\n&quot;,       4,  5, 10; # will print &quot;5.0000\\n&quot;\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1478529547, "post_id": 40467645, "comment_id": 68179679, "body": "I got this point, thanks! What a bit unclear, if I use single quotes, why it leads an error: <code>perl -E &#39;use strict; use warnings; say sprintf(\\&#39;%1$s%2$s is not %1$s and not %2$s\\&#39;, \\&#39;foo\\&#39;, \\&#39;bar\\&#39;);&#39;</code>. error: <code>bash: syntax error near unexpected token &#39;)&#39;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 1, "creation_date": 1478530531, "post_id": 40467645, "comment_id": 68180385, "body": "@Kirby that&#39;s a good question. If you remove the parenthesis <code>(</code> and <code>)</code> (you don&#39;t need them), it will just expect more input and not run your program. Off the top of my head I don&#39;t know what it doesn&#39;t like. But shell quoting and escaping is tricky. My suggestion is to use <code>q{}</code> for the pattern, and whatever you like for the args. I&#39;d do <code>printf q{%1$d...}, qw(foo bar);</code> so I don&#39;t have to deal with quotes at all"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478531255, "post_id": 40467645, "comment_id": 68180903, "body": "Note that using <code>-E</code> isn&#39;t forward compatible, meaning that upgrading Perl could break the program. I recommend against using it except for one-off programs. You could use <code>-e</code> + <code>CORE::say</code> instead of <code>-E</code> + <code>say</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478531366, "post_id": 40467645, "comment_id": 68180988, "body": "@ikegami is right. I used it to get <code>say</code> so I&#39;d have a new line. For the explanation it doesn&#39;t matter if you do <code>-e</code> or <code>-E</code>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1478529021, "creation_date": 1478529021, "answer_id": 40467645, "question_id": 40467455, "link": "https://stackoverflow.com/questions/40467455/is-it-possible-get-a-particular-argument-in-printf-format-in-perl-in-command-lin/40467645#40467645", "title": "Is it possible get a particular argument in printf format in perl in command line?", "body": "<p>Your quoting is off.</p>\n\n<pre><code>perl -E 'say sprintf(q{%1$s%2$s is not %1$s and not %2$s}, \"foo\", \"bar\");'\nfoobar is not foo and not bar\n</code></pre>\n\n<p>You cannot use double quotes <code>\"\"</code> for the <code>-e</code> because your shell gets confused. You need single quotes there. But if you use double quotes for the <code>printf</code> pattern with the <code>%1$s</code> syntax, Perl will try to interpolate the <code>$s</code>, which doesn't work. So use a non-quoting <code>q{}</code> or escape the single quotes <code>''</code> with <code>\\'</code>. Or escape the <code>$</code>s.</p>\n\n<p>If you turn on <code>use strict</code> and <code>use warnings</code> you'll see:</p>\n\n<pre><code>$ perl -E 'use strict; use warnings; say sprintf(\"%1$s%2$s is not %1$s and not %2$s\", \"foo\", \"bar\");'\nGlobal symbol \"$s\" requires explicit package name at -e line 1.\nGlobal symbol \"$s\" requires explicit package name at -e line 1.\nGlobal symbol \"$s\" requires explicit package name at -e line 1.\nGlobal symbol \"$s\" requires explicit package name at -e line 1.\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>That's with single quotes <code>''</code> for <code>-e</code> and double quotes <code>\"\"</code> for the pattern.</p>\n\n<pre><code>$ perl -E \"use strict; use warnings; say sprintf('%1$s%2$s is not %1$s and not %2$s', 'foo', 'bar');\"\nInvalid conversion in sprintf: \"%1 \" at -e line 1.\nInvalid conversion in sprintf: \"%2\" at -e line 1.\n%2 is not %1 and not %2\n</code></pre>\n\n<p>Now the shell tried to interpolate <code>$s</code> because of the double quotes <code>\"\"</code>. So Perl never sees it. It sees the pattern as <code>\"%1 %2 is not %1 and not %2\"</code>, which it cannot understand. (Note that the <code>%</code> will not get interpolated in double quoted strings in Perl).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1478531165, "last_edit_date": 1478531165, "creation_date": 1478530644, "answer_id": 40468179, "question_id": 40467455, "link": "https://stackoverflow.com/questions/40467455/is-it-possible-get-a-particular-argument-in-printf-format-in-perl-in-command-lin/40468179#40468179", "title": "Is it possible get a particular argument in printf format in perl in command line?", "body": "<p>Let's have a look at the program you pass to <code>perl</code>:</p>\n\n<pre><code>$ printf '%s' \"printf('%$1s$2s is not %$1s and not %$2s', 'foo', 'bar');\"\nprintf('%ss is not %s and not %s', 'foo', 'bar');\n</code></pre>\n\n<p>As you can see, there is no <code>$1</code> or <code>$2</code> in your program because you improperly built your shell command. Just like Perl interpolates in double-quotes, so do <code>sh</code> and related shells. You should be using single quotes!</p>\n\n<pre><code>perl -e'printf(\"%\\$1s\\$2s is not %\\$1s and not %\\$2s\\n\", \"foo\", \"bar\");'\n</code></pre>\n\n<p>(I would have suggested switching from <code>''</code> to <code>q{}</code> inside the Perl program so you wouldn't have to escape the dollar signs, but you need double-quotes for the <code>\\n</code> you were missing anyway.)</p>\n"}], "owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "accepted_answer_id": 40467645, "answer_count": 3, "score": 1, "last_activity_date": 1478531165, "creation_date": 1478528522, "last_edit_date": 1478529841, "question_id": 40467455, "link": "https://stackoverflow.com/questions/40467455/is-it-possible-get-a-particular-argument-in-printf-format-in-perl-in-command-lin", "title": "Is it possible get a particular argument in printf format in perl in command line?", "body": "<p>It's needed to build a string <code>foobar is not foo and not bar</code>.</p>\n\n<p>In <code>printf</code> format <code>%$2s</code>, \"2\" means a particular argument position.</p>\n\n<p>But it doesn't work in perl:</p>\n\n<pre><code>$ perl -e \"printf('%$1s$2s is not %$1s and not %$2s', 'foo', 'bar');\"\n%2 is not %1 and not %2\n</code></pre>\n\n<p>My env:</p>\n\n<pre><code>$ perl --version\n\nThis is perl 5, version 16, subversion 3 (v5.16.3) built for x86_64-linux-thread-multi\n(with 29 registered patches, see perl -V for more detail)\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1478522726, "post_id": 40465408, "comment_id": 68175205, "body": "This works, i need to figure out what is this command, i mean it seems to be regex, tq"}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1478523238, "post_id": 40465408, "comment_id": 68175572, "body": "can simplify to <code>&#47;pass(?:\\s+\\d+\\s+x){2}\\s+(\\d+)&#47;</code> to take adv of repeating pattern"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 5, "last_activity_date": 1478523269, "last_edit_date": 1478523269, "creation_date": 1478522294, "answer_id": 40465408, "question_id": 40465323, "link": "https://stackoverflow.com/questions/40465323/how-to-extract-a-value-from-changing-string-in-perl/40465408#40465408", "title": "how to extract a value from changing string in perl", "body": "<p>How about:</p>\n\n<pre><code>my ($n) = $string =~ /pass\\s+\\d+\\s+x\\s+\\d+\\s+x\\s+(\\d+)/;\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<pre><code>/         : Regex delimiter\npass      : literally pass\n\\s+\\d+\\s+ : 1 or more spaces, 1 or more digits, 1 or more spaces (ie. the first number)\nx         : literally x\n\\s+\\d+\\s+ : 1 or more spaces, 1 or more digits, 1 or more spaces (ie. the second number)\nx         : literally x\n\\s+       : 1 or more spaces\n(\\d+)     : 1 or more digits, captured in group 1 (ie. the third number)\n/         : regex delimiter\n</code></pre>\n\n<p>If <code>$string</code> is matched by the regex, the third number is captured in group 1, then the value in this group is used to populate the variable <code>$n</code>.</p>\n\n<p>As said in comments, it can be simplified in:</p>\n\n<pre><code>my ($n) = $string =~ /pass(?:\\s+\\d+\\s+x){2}\\s+(\\d+)/;\n</code></pre>\n\n<p>Where <code>(?:...)</code> is a non capture group.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1478527011, "post_id": 40465452, "comment_id": 68178026, "body": "<code>$_ =~</code> is redundant in your example - that&#39;s the default anyway. You could write instead: <code>print +(m&#47;\\s*x\\s*(\\d+)\\s*errors\\s0&#47;i)[0],&quot;\\n&quot;;</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478528253, "post_id": 40465452, "comment_id": 68178813, "body": "@Sobrique: Fine. Noted on this one."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1478522429, "creation_date": 1478522429, "answer_id": 40465452, "question_id": 40465323, "link": "https://stackoverflow.com/questions/40465323/how-to-extract-a-value-from-changing-string-in-perl/40465452#40465452", "title": "how to extract a value from changing string in perl", "body": "<p>You can try this: </p>\n\n<pre><code>while(&lt;DATA&gt;)\n{\n    printf \"%s\\n\", ($_=~m/\\s*x\\s*(\\d+)\\s*errors\\s0/i)[0];\n}\n\n\n__DATA__\nTPSM seed 4339CD65   pass 1  x 0 x 1  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 5339CD60   pass 1  x 9 x 2  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 2339CD61   pass 1  x 101 x 5  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 5339CD65   pass 1  x 19 x 6  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 9339CD65   pass 1  x 100 x 7  errors 0 pid 179947 rulefilecycle 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 0, "last_activity_date": 1478545198, "creation_date": 1478545198, "answer_id": 40472568, "question_id": 40465323, "link": "https://stackoverflow.com/questions/40465323/how-to-extract-a-value-from-changing-string-in-perl/40472568#40472568", "title": "how to extract a value from changing string in perl", "body": "<p>You could also use <code>split</code>: </p>\n\n<p>By default, <code>split</code> will split on <code>/\\s+/</code>, and you can then access the desired element as you would for an array: </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature qw / say /;\n\nwhile(&lt;DATA&gt;){\n    chomp;\n    my $num = (split)[8];\n    say $num;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1478545198, "creation_date": 1478522081, "question_id": 40465323, "link": "https://stackoverflow.com/questions/40465323/how-to-extract-a-value-from-changing-string-in-perl", "title": "how to extract a value from changing string in perl", "body": "<p>I want to extract a value from a string(which constantly changes) for further procesing.</p>\n\n<p>The string is </p>\n\n<pre><code>TPSM seed 4339CD65   pass 1  x 0 x 1  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 5339CD60   pass 1  x 9 x 2  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 2339CD61   pass 1  x 101 x 5  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 5339CD65   pass 1  x 19 x 6  errors 0 pid 179947 rulefilecycle 0\nTPSM seed 9339CD65   pass 1  x 100 x 7  errors 0 pid 179947 rulefilecycle 0\n</code></pre>\n\n<p>I want to extract the values after <b>pass</b> of the form 1 x a x <b>n</b> , where i am interested in the value of 'n' .\nI was trying using the substr() in perl but since the numbers keep changing i can't write some thing like <b>substr($string,37,1)</b>.</p>\n\n<p>How could I achieve this without substr() in some regex way?   </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478515736, "post_id": 40463019, "comment_id": 68171174, "body": "According to <a href=\"http://shop.oreilly.com/product/9780596004927.do\" rel=\"nofollow noreferrer\">Programming Perl</a> Chapter 4 : <i>&quot;In addition to global scoping and lexical scoping, we also have what is known as dynamic scoping, implemented by local, which despite the word \u201clocal\u201d really deals with global variables and has nothing to do with the local scratchpad.&quot;</i>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478531933, "post_id": 40463019, "comment_id": 68181407, "body": "<code>local</code> just makes a temporary backup of a global/package variable. <code>$a</code> refers to <code>$main::a</code> (since <code>main</code> is the current package) absent a <code>my</code> or <code>our</code> that overrides this. <code>$::a</code> is short for <code>$main::a</code>. You want <code>my</code> instead of <code>local</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "edited": false, "score": 0, "creation_date": 1478516742, "post_id": 40463235, "comment_id": 68171759, "body": "I understand that. To not use $a. :) I see about the example which you gave. Make sense. But then what I wrote is a valid syntax. What should we do to get 2nd point in this case."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "edited": false, "score": 0, "creation_date": 1478516926, "post_id": 40463235, "comment_id": 68171874, "body": "@HemantBhargava You cannot access the previous global value until you exit the local scope"}, {"owner": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478517026, "post_id": 40463235, "comment_id": 68171928, "body": "@H&#229;konH&#230;gland, Oops! This is not what I expected. Perl design problem? There should be some way to access the global value. Right?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "edited": false, "score": 2, "creation_date": 1478517321, "post_id": 40463235, "comment_id": 68172102, "body": "@HemantBhargava I don&#39;t think it is a design problem. If you want access to the previous global value, you could store it away before issuing the <code>local</code> command."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1478526886, "post_id": 40463235, "comment_id": 68177938, "body": "The question is - why do you have a lexically scoped variable that&#39;s masking a global in the first place? This feels like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 8, "last_activity_date": 1478515408, "last_edit_date": 1592644375, "creation_date": 1478515408, "answer_id": 40463235, "question_id": 40463019, "link": "https://stackoverflow.com/questions/40463019/how-to-get-the-global-variable-value-in-perl/40463235#40463235", "title": "How to get the global variable value in Perl?", "body": "<p>Well, first off - don't use <code>$a</code> - single letter variable names are generally nasty, and that goes double for when it's used by <code>sort</code>.</p>\n<p>Secondly <a href=\"http://perldoc.perl.org/functions/local.html\" rel=\"noreferrer\"><code>local</code></a> doesn't do what you think it does. It even says in the man page:</p>\n<blockquote>\n<p>You really probably want to be using my instead, because local isn't what most people think of as &quot;local&quot;. See Private Variables via my() in perlsub for details.</p>\n<p>A local modifies the listed variables to be local to the enclosing block, file, or eval. If more than one value is listed, the list must be placed in parentheses. See Temporary Values via local() in perlsub for details, including issues with tied arrays and hashes.</p>\n</blockquote>\n<p>So you <em>probably</em> want to use <code>my</code>, but... actually, more likely, you probably just want to <em>not</em> do that, and don't use globals at all.</p>\n<pre><code>#!/usr/bin/env perl\n\nuse strict;    \nuse warnings;\n\nour $number = 5;\nfoo();\nprint &quot;Out number = $number\\n&quot;;\n\nsub foo {\n  my $number = 10;\n  print &quot;Inside foo: $number\\n&quot;;\n  print &quot;Global foo $::number\\n&quot;;\n  bar();\n}\n\nsub bar {\n  print &quot;Inside bar = $number\\n&quot;;\n  print &quot;Global $::number\\n&quot;;\n}\n</code></pre>\n<p>As you can see - <code>$number</code> is lexically scoped to be &quot;within foo&quot; and doesn't persist into b.</p>\n<pre><code>Inside foo: 10\nGlobal foo = 5\nInside a = 5\nGlobal a = 5\nOut number = 5\n</code></pre>\n<p>Thirdly - don't use prototypes on your subs. They don't do what you think they do.</p>\n"}, {"comments": [{"owner": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "edited": false, "score": 0, "creation_date": 1478541899, "post_id": 40463907, "comment_id": 68187740, "body": "Bang on! Clears the misconceptions."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 8, "last_activity_date": 1478517919, "last_edit_date": 1478517919, "creation_date": 1478517537, "answer_id": 40463907, "question_id": 40463019, "link": "https://stackoverflow.com/questions/40463019/how-to-get-the-global-variable-value-in-perl/40463907#40463907", "title": "How to get the global variable value in Perl?", "body": "<p>You are misunderstanding <code>::</code>.  Perl doesn't really have global variables (leaving aside certain special identifier names); it has package variables.  That is, every global variable belongs to a package.  If your code has no <code>package</code> statement, that package is <code>main</code>, so <code>$a</code> is the same as <code>$main::a</code>.  And having nothing before the <code>::</code> is shorthand for <code>main</code>, so <code>$::a</code> is also <code>$main::a</code>.</p>\n\n<p>If you do have a <code>package</code> declaration, package variables used within its scope will be contained in that package unless qualified with <code>::</code>.</p>\n\n<p><code>local</code> gives a package variable or hash or array element a temporary value and saves the previous value to be restored when the innermost scope is left.\nThere is no way to access that saved value from within the scope of the local.</p>\n\n<p>The opposite of global/package variables are lexical variables.  You almost always will want to use lexical variables (declared with <code>my</code>), not package variables.  Even when you do use package variables, you will hardly ever want to change their value with <code>local</code>.  So a good case for using <code>local</code> is going to be truly rare.</p>\n"}], "owner": {"reputation": 2411, "user_id": 2037570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=128&d=identicon&r=PG", "display_name": "Hemant Bhargava", "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 1, "accepted_answer_id": 40463907, "answer_count": 2, "score": 3, "last_activity_date": 1478517919, "creation_date": 1478514734, "question_id": 40463019, "link": "https://stackoverflow.com/questions/40463019/how-to-get-the-global-variable-value-in-perl", "title": "How to get the global variable value in Perl?", "body": "<p>Trying to understand scope resolution operator.</p>\n\n<pre><code>$a = 5;\nfoo();\nprint \"Out a = $a\\n\";\n\nsub foo() {\n  local $a = 10;\n  bar();\n}\n\nsub bar() {\n  print \"Inside a = $a\\n\";\n  print \"Global a = $::a\\n\";\n}\n</code></pre>\n\n<p>Output from this program is :</p>\n\n<pre><code>Inside a = 10\nGlobal a = 10\nOut a = 5\n</code></pre>\n\n<ol>\n<li><p>I would have expected value of '$::a' to come out as '5' instead of 10. I thought that is what scope resolution operator do. Getting scoped values. In this case, no scope is given, so global value. Please correct me if there is any tweak.</p></li>\n<li><p>What should I write to get the global value of 'a' inside bar subroutine?</p></li>\n</ol>\n"}, {"tags": ["perl", "single-responsibility-principle"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478512373, "post_id": 40461838, "comment_id": 68169117, "body": "How much is <i>lots</i>? You have some syntax oddities in your code. You don&#39;t need quotes <code>&quot;&quot;</code> around variables if all you do is pass a single variable. Perl is smart enough to optimize it away so that <code>&quot;$sql_data&quot;</code> is not actually interpolated into a string, but doing <code>foo($sql_data)</code> is easier to read and less characters to write. It&#39;s also more concise."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1478516902, "post_id": 40461838, "comment_id": 68171865, "body": "@dan1111: No, currently he&#39;s processing the data a row at a time. Only a single row is ever stored in memory. If he wanted to read all of the data, he would need to build another data structure that contained all the different copies of <code>@data</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478516975, "post_id": 40461838, "comment_id": 68171901, "body": "@DaveCross, thanks, my mistake--it&#39;s been awhile since I used DBI."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1478515527, "creation_date": 1478515527, "answer_id": 40463265, "question_id": 40461838, "link": "https://stackoverflow.com/questions/40461838/single-responsibility-principle-write-data-to-file-after-running-a-query/40463265#40463265", "title": "Single Responsibility Principle: Write data to file after running a query", "body": "<p>You could split it up into two different functions. One would query the database, and the other would write data to a file.</p>\n\n<pre><code>sub run_query {\n    my ( $sql, @args ) = @_;\n\n    # if you truly want separation of concerns,\n    # you need to connect $dbh somewhere else\n\n    my $sth = $dbh-&gt;prepare($sql);\n    $sth-&gt;execute(@args);\n\n    # this creates an iterator\n    return sub {\n        return $sth-&gt;fetchrow_arrayref;\n    };\n}\n</code></pre>\n\n<p>This function takes a an SQL query and some arguments (remember to use placeholders!) and runs the query. It returns a <em>code reference</em> that closes over <code>$sth</code>. Every time that reference is invoked, one line of results will be fetched. When the statement handle <code>$sth</code> is empty, it will return <code>undef</code>, which is handed through, and you're done iterating. That might seem overkill, but stay with me for a moment.</p>\n\n<p>Next, we make a function to write data to a file.</p>\n\n<pre><code>sub write_to_file {\n    my ( $filename, $iter ) = @_;\n\n    open my $fh, '&gt;', $filename or die $!;\n\n    while ( my $data = $iter-&gt;() ) {\n        print $fh join( \"\\t\", @{$data} ), \"\\n\";\n    }\n\n    return;\n}\n</code></pre>\n\n<p>This takes a filename and an iterator, which is a code reference. It opens the file, and then iterates until there is no more data left. Every line is written to the file. We don't need <code>close $fh</code> because it's a lexical filehandle that will be closed implicitly once <code>$fh</code> goes out of scope at the end of the function anyway.</p>\n\n<p>What you've done now is define an <em>interface</em>. Your <code>write_to_file</code> function's interface is that it takes a file name and an iterator that always returns an array reference of fields.</p>\n\n<p>Let's put this together.</p>\n\n<pre><code>my $iter = run_query('SELECT * FROM orders');\nwrite_to_file( 'orders.csv', $iter );\n</code></pre>\n\n<p>Two lines of code. One runs the query, the other one writes the data. Looks pretty separated to me.</p>\n\n<p>The good thing about this approach is that now you can also write other things to a file with the same code. The following code could for example talk to some API. The iterator that it returns again gives us one row of results per invocation.</p>\n\n<pre><code>sub api_query {\n    my ($customer_id) = @_;\n\n    my $api = API::Client-&gt;new;\n    my $res = $api-&gt;get_orders($customer_id); # returns [ {}, {}, {}, ... ]\n\n    my $i = 0;\n    return sub {\n        return if $i == $#{ $res };\n        return $res-&gt;[$i++];\n    }\n}\n</code></pre>\n\n<p>You could drop this into the above example instead of <code>run_query()</code> and it would work, because this function returns something that adheres to the same <em>interface</em>. You could just as well make a <code>write_to_api</code> or <code>write_to_slack_bot</code> function that has the same partial interface. One of the parameters would be the same kind of iterator. Now those are exchangeable too.</p>\n\n<hr>\n\n<p>Of course this whole example is very contrived. In reality it highly depends on the size and complexity of your program. </p>\n\n<p>If it's a script that runs as a cronjob that does nothing but create this report once a day, you should not care about this separation of concerns. The pragmatic approach would likely be the better choice.</p>\n\n<p>Once you have a lot of those, you'd start caring a bit more. Then my above approach might be viable. But only if you really need to have things flexible.</p>\n\n<p>Not every concept is always applicable, and not every concept always makes sense.</p>\n\n<hr>\n\n<p>Please keep in mind that there are tools that are better suited for those jobs. Instead of making your own CSV file you can use <a href=\"https://v1.metacpan.org/pod/Text::CSV_XS\" rel=\"noreferrer\">Text::CSV_XS</a>. Or you could use an ORM like <a href=\"http://p3rl.org/DBIx::Class\" rel=\"noreferrer\">DBIx::Class</a> and have ResultSet objects as your interface.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10327642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0J_rkNpfL4E/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP43Ykm-0OAzyjBiN6_gP56fa9EIQ/mo/photo.jpg?sz=128", "display_name": "creative-gozilla", "link": "https://stackoverflow.com/users/10327642/creative-gozilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1536268696, "creation_date": 1536268696, "answer_id": 52212294, "question_id": 40461838, "link": "https://stackoverflow.com/questions/40461838/single-responsibility-principle-write-data-to-file-after-running-a-query/52212294#52212294", "title": "Single Responsibility Principle: Write data to file after running a query", "body": "<p>You should be using a seperate function for doing the job, in your situation using doing how you are doing things currently makes much more sense than sticking to SRP.</p>\n"}], "owner": {"reputation": 197, "user_id": 6940978, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1182cc3b623f395990e9c086e992421?s=128&d=identicon&r=PG&f=1", "display_name": "pranjal thakur", "link": "https://stackoverflow.com/users/6940978/pranjal-thakur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 40463265, "answer_count": 2, "score": 2, "last_activity_date": 1536268696, "creation_date": 1478511142, "last_edit_date": 1478529710, "question_id": 40461838, "link": "https://stackoverflow.com/questions/40461838/single-responsibility-principle-write-data-to-file-after-running-a-query", "title": "Single Responsibility Principle: Write data to file after running a query", "body": "<p>I have to write rows generated after running a sql query to a file.</p>\n\n<pre><code># Run the SQL script.\nmy $dbh = get_dbh($source);\nmy $qry = $dbh-&gt;prepare(\"$sql_data\");\n$qry-&gt;execute();\n\n# Dump the data to file.\nopen(my $fh_write, \"&gt;\", \"$filename\");\nwhile (my @data = $qry-&gt;fetchrow_array())\n{\n  print {$fh_write} join(\"\\t\", @data) . \"\\n\";\n}\nclose($fh_write);\n</code></pre>\n\n<p>Clearly i am doing two thing in a function: </p>\n\n<ol>\n<li>Running the sql query.</li>\n<li>Writing the data to file. </li>\n</ol>\n\n<p>Is there a way to do this using <strong>SRP</strong> ?</p>\n\n<p>There are lots of rows in the data so returning the array of rows from a seperate function might not be nice idea.</p>\n"}, {"tags": ["perl", "pentaho", "regex-negation", "kettle", "pdi"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478510741, "post_id": 40461594, "comment_id": 68168192, "body": "<code>$str=~s&#47;&lt;customer[^&gt;]*attribute=&quot;([^\\&quot;]*)&quot;[^&gt;]*&gt;&#47;&lt;customer&gt;&#47;&zwnj;&#8203;g;</code> Here attribute can be shuffled or more than one attribute will be possible hence we are using <code>[^&gt;]*</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1478511520, "post_id": 40461594, "comment_id": 68168616, "body": "Sounds suspiciously like you&#39;re parsing <code>XML</code> with regular expressions. If so: It&#39;s a bad idea, use <code>XML::Twig</code> instead. (Post some XML and desired output, and I will give you an example of how to do it right)"}, {"owner": {"reputation": 127, "user_id": 3668116, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbe2cbf51ac91e9372387c21e35964d1?s=128&d=identicon&r=PG", "display_name": "Vikas Kumar", "link": "https://stackoverflow.com/users/3668116/vikas-kumar"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478512570, "post_id": 40461594, "comment_id": 68169246, "body": "@ssr1012 - Not working :("}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478512752, "post_id": 40461594, "comment_id": 68169366, "body": "Provide your input."}, {"owner": {"reputation": 127, "user_id": 3668116, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbe2cbf51ac91e9372387c21e35964d1?s=128&d=identicon&r=PG", "display_name": "Vikas Kumar", "link": "https://stackoverflow.com/users/3668116/vikas-kumar"}, "edited": false, "score": 0, "creation_date": 1478513034, "post_id": 40461594, "comment_id": 68169552, "body": "Input: &lt;consumer attribute=&quot;1&quot;&gt;&lt;birth-date&gt;1990-07-23&lt;/birth-date&gt; &lt;/consumer&gt;  Output : &lt;consumer&gt;&lt;birth-date&gt;1990-07-23&lt;/birth-date&gt; &lt;/consumer&gt;. Can be any number(1 to 1000) as attribute&#39;s value."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478513068, "post_id": 40461594, "comment_id": 68169575, "body": "<code>my $element_name = &quot;consumer&quot;; my $str = &quot;&lt;consumer attribute=\\&quot;1\\&quot;&gt;&lt;birth-date&gt;1990-07-23&lt;&#47;birth-date&gt; &lt;&#47;consumer&gt;&quot;; $str=~s&#47;&lt;($element_name)[^&gt;]*attribute=&quot;[^\\&quot;]*&quot;[^&gt;]*&gt;&#47;&lt;$1&gt;&#47;g&zwnj;&#8203;; print $str; output: &lt;consumer&gt;&lt;birth-date&gt;1990-07-23&lt;&#47;birth-date&gt; &lt;&#47;consumer&gt;</code>"}, {"owner": {"reputation": 127, "user_id": 3668116, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbe2cbf51ac91e9372387c21e35964d1?s=128&d=identicon&r=PG", "display_name": "Vikas Kumar", "link": "https://stackoverflow.com/users/3668116/vikas-kumar"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1478513517, "post_id": 40461594, "comment_id": 68169856, "body": "@ssr1012. Thanks a lot. It worked."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1478515763, "post_id": 40461594, "comment_id": 68171192, "body": "@vikas - please <a href=\"https://stackoverflow.com/posts/40461594/edit\">edit</a> that into your post."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478516926, "post_id": 40462644, "comment_id": 68171876, "body": "@DaveCross: Do you point out in any posting if did this. I am sure I didn&#39;t encouraged regex using XML conversions. I just forwarded the answer for queries in regex. Enough. Thanks for your downvote."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 0, "last_activity_date": 1478513709, "creation_date": 1478513709, "answer_id": 40462644, "question_id": 40461594, "link": "https://stackoverflow.com/questions/40461594/regex-to-get-a-combination-of-constant-and-pattern/40462644#40462644", "title": "Regex to get a combination of constant and pattern", "body": "<blockquote>\n  <p>Input:</p>\n</blockquote>\n\n<p><code>&lt;consumer attribute=\\\"1\\\"&gt;&lt;birth-date&gt;1990-07-23&lt;/birth-date&gt; &lt;/consumer&gt;;</code></p>\n\n<pre><code>my $element_name = \"consumer\";\n\nmy $str = \"&lt;consumer attribute=\\\"1\\\"&gt;&lt;birth-date&gt;1990-07-23&lt;/birth-date&gt; &lt;/consumer&gt;\";\n\n$str=~s/&lt;($element_name)[^&gt;]*attribute=\"[^\\\"]*\"[^&gt;]*&gt;/&lt;$1&gt;/g;\n\nprint $str;\n</code></pre>\n\n<blockquote>\n  <p>output:</p>\n</blockquote>\n\n<p><code>&lt;consumer&gt;&lt;birth-date&gt;1990-07-23&lt;/birth-date&gt; &lt;/consumer&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1478516191, "post_id": 40463373, "comment_id": 68171449, "body": "The OP is talking about a stream. This would be a great place to advertise XML::Twig&#39;s ability to work with chunked data."}, {"owner": {"reputation": 127, "user_id": 3668116, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbe2cbf51ac91e9372387c21e35964d1?s=128&d=identicon&r=PG", "display_name": "Vikas Kumar", "link": "https://stackoverflow.com/users/3668116/vikas-kumar"}, "edited": false, "score": 0, "creation_date": 1478526117, "post_id": 40463373, "comment_id": 68177441, "body": "@Sobrique. First of all thanks a lot for your time. You elaborated the point so well. But in my case I am using Penatho Kettle to make my first draft of XML. Then a lot of manipulation is done and for traversing purpose I added &quot;attribute&quot;. Finally I need to remove that."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478526755, "post_id": 40463373, "comment_id": 68177846, "body": "Well, that sound like you may be tackling this problem in a less than ideal way. Most things you pass XML to, if the attribute is redundant... it&#39;ll be irrelevant. That&#39;s part of the point of XML."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1478516393, "last_edit_date": 1495540882, "creation_date": 1478515893, "answer_id": 40463373, "question_id": 40461594, "link": "https://stackoverflow.com/questions/40461594/regex-to-get-a-combination-of-constant-and-pattern/40463373#40463373", "title": "Regex to get a combination of constant and pattern", "body": "<p>Please, please, please. <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">Don't use regular expressions to parse XML</a>. </p>\n\n<p>It's bad news. It's brittle and hacky, and most importantly of all - completely unnecessary.</p>\n\n<p>Regular expressions do not handle context. And XML is all about context. </p>\n\n<p><code>XML</code> already has a query language called <code>xpath</code> which is far better suited. </p>\n\n<p>Here's an example of <em>finding</em> a node using <code>xpath</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new -&gt; parsefile ('yourfile.xml'); \n\nprint $twig -&gt; get_xpath('//consumer', 0) -&gt; att('attribute'),\"\\n\";\n</code></pre>\n\n<p>But if you want to transform it and delete <code>attribute</code>:</p>\n\n<pre><code>$_ -&gt; del_att('attribute') for $twig -&gt; get_xpath('//consumer[@attribute]');\n$twig -&gt; set_pretty_print('indented_a');\n$twig -&gt; print;\n</code></pre>\n\n<p>I would ask though - why are you trying to do that? It sounds rather like another broken process somewhere - maybe another script trying to <code>regex</code> the XML? </p>\n\n<p>But the other thing that <code>XML::Twig</code> does <em>really</em> well is it has <code>twig_handlers</code> that let you handle XML streams more neatly (e.g. without needing to parse it all into memory. </p>\n\n<p>That goes a bit like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nsub delete_unwanted {\n    my ( $twig, $element ) = @_; \n    $element -&gt; del_att('attribute'); \n    #dump progress so far 'out'. \n    $twig -&gt; flush; \n    #free memory already processed. \n    $twig -&gt; purge; \n}\n\nmy $twig = XML::Twig -&gt; new ( twig_handlers =&gt; { '//consumer[@attribute]' =&gt; \\&amp;delete_unwanted } );\n   $twig -&gt; parsefile ( 'your_xml.xml'); \n</code></pre>\n\n<p>We set a handler, so that each time the parser encounters a <code>consumer</code> with an <code>attribute</code> attribute. (Bad name that) it deletes it, <code>flush</code>es (prints) the parsed XML, and purges it from memory. This makes it very memory efficient, as you're not reading the whole thing into memory, and can do pretty much inline regexing type operations. </p>\n"}], "owner": {"reputation": 127, "user_id": 3668116, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbe2cbf51ac91e9372387c21e35964d1?s=128&d=identicon&r=PG", "display_name": "Vikas Kumar", "link": "https://stackoverflow.com/users/3668116/vikas-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 40462644, "answer_count": 2, "score": 0, "last_activity_date": 1478516393, "creation_date": 1478510402, "question_id": 40461594, "link": "https://stackoverflow.com/questions/40461594/regex-to-get-a-combination-of-constant-and-pattern", "title": "Regex to get a combination of constant and pattern", "body": "<p>I am working on a regex which can help me in replacing a pattern in string.</p>\n\n<p>The string that I have in stream is very long and after applying the regex(Find the pattern and then replace with constant value) I have to carry forward the string into my ETL stream.</p>\n\n<pre><code>To find:\n&lt;customer attribute=\"any number\"&gt;\n like &lt;customer attribute=\"1\"&gt;\nand replace with:\n&lt;customer&gt;. (basically just keep \"customer\" and delete everything) \n</code></pre>\n\n<p>I am new to Regex and learning it.</p>\n\n<p>Any help!!</p>\n"}, {"tags": ["vba", "perl", "excel", "excel-2010"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1478509123, "post_id": 40460657, "comment_id": 68167284, "body": "Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it."}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1478509327, "post_id": 40460657, "comment_id": 68167417, "body": "@dgw: i defintaly know the purpose of Stack Overflow... but... i think i actually described the problem... i can&#39;t access the sheet by name as the excel 2010 as zip, doesn&#39;t list them...&#39;"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1478509495, "post_id": 40460657, "comment_id": 68167509, "body": "Then add what you have already tried to the question. Right now it reads like a give-me-the-code question. Add your code, what you have already achieved and where you are stuck, then you&#39;ll get answers. Otherwise your question is very likely to be closed."}], "answers": [{"tags": [], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "is_accepted": true, "score": 1, "last_activity_date": 1478512748, "creation_date": 1478512748, "answer_id": 40462352, "question_id": 40460657, "link": "https://stackoverflow.com/questions/40460657/how-to-access-excel-2010-sheet-from-an-external-tool/40462352#40462352", "title": "How to access excel 2010 sheet from an external tool?", "body": "<p>You tagged the question with <code>perl</code>.  So, you can definitely solve the problem using perl, just install few already developed perl-modules from the CPAN repository. Check <a href=\"http://metacpan.org\" rel=\"nofollow noreferrer\">http://metacpan.org</a> .</p>\n\n<p>It is easy task to google them, but if you're unable find the needed ones, here are: </p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Spreadsheet::ParseExcel\" rel=\"nofollow noreferrer\">Spreadsheet::ParseExcel</a> - the basic module for reading Excel files using perl. You need to be familiar with this one - you will learn the basic \"logic\" how to deal with workbook, sheets, cells and so on.</li>\n<li><a href=\"https://metacpan.org/pod/Spreadsheet::XLSX\" rel=\"nofollow noreferrer\">Spreadsheet::XLSX</a> - Like the above, but could read the 2007+ <code>XLSX</code> file-type. (Your case).</li>\n</ul>\n\n<p>Using the above modules you will be able read your <code>XLSX</code> files. For the second part, (saving it as <code>csv</code>) - again exists already developed and well-tested modules, like:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> - Text::CSV_XS provides facilities for the composition and decomposition of comma-separated values. </li>\n</ul>\n\n<p>Usually the real-world perl-script for such simple problem (using the above modules) is only few (10-15) lines long.</p>\n\n<p>But, if you want deal with edge cases, for example character encoding conversion and like - maybe you will need to use few other modules too.</p>\n"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 40462352, "answer_count": 1, "score": -2, "last_activity_date": 1478512748, "creation_date": 1478506883, "last_edit_date": 1531164843, "question_id": 40460657, "link": "https://stackoverflow.com/questions/40460657/how-to-access-excel-2010-sheet-from-an-external-tool", "title": "How to access excel 2010 sheet from an external tool?", "body": "<p>I have an excel 2010 workbook.\nI would like to extract a specific sheet (by name) from it and save it as csv file.</p>\n\n<p>The main requirement is doing so from an external program (program language is not critical.. i can use perl/python/vb, whatever works...)</p>\n\n<p>I browsed the web (google it) but couldn't find any documentation how to do it.</p>\n\n<p>I did find that excel 2010 is actually a zip, but looking into it, i couldn't find the sheets' names....</p>\n\n<p>Did anyone have any experience in such tasks? </p>\n"}, {"tags": ["perl", "escaping", "double-quotes"], "comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1478480701, "post_id": 40454969, "comment_id": 68158359, "body": "Note that if you don&#39;t quote the entire value when invoking this script, the shell will split the args on the space between them, and pass them in as two consecutive args.  If you do quote the value when invoking the script, the shell will leave the two words and the space between them as a single arg, stripping the quotes before Perl gets the value.  You need to quote the value you pass to the script, realizing that this is for the shell&#39;s benefit."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1478487979, "last_edit_date": 1478487979, "creation_date": 1478478465, "answer_id": 40456159, "question_id": 40454969, "link": "https://stackoverflow.com/questions/40454969/escape-double-quote-in-perl/40456159#40456159", "title": "Escape double quote in perl", "body": "<p>I believe you are mistaken about <code>$ARGV[20]</code> containing <code>X0 Subnet</code>. It appears to contain only <code>X0</code>.</p>\n\n<p>Did you use</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>script.pl ... X0 Subnet ...\n</code></pre>\n\n<p>when you should have used</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>script.pl ... 'X0 Subnet' ...\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 1972031, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f151259b60597a181f2cae3c56f13be3?s=128&d=identicon&r=PG", "display_name": "user1972031", "link": "https://stackoverflow.com/users/1972031/user1972031"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478487979, "creation_date": 1478469333, "last_edit_date": 1478478429, "question_id": 40454969, "link": "https://stackoverflow.com/questions/40454969/escape-double-quote-in-perl", "title": "Escape double quote in perl", "body": "<p>When I passed a variable $local_ntwk_ao_vpn (\"X0 Subnet\") into a perl script, it only took \"X0\" and lost \"Subnet\" part. I tried to escape double-quotes as below, but still didn't work. Any help is greatly appreciated.</p>\n\n<hr>\n\n<pre><code>#!/usr/bin/perl\nuse Expect;\n#Assume the first 20 args are OK\nmy $local_ntwk_ao_vpn    = $ARGV[20];   # &lt;-----\"X0 Subnet\"\n\n# Telnet into the remote firewall\nmy $expect = Expect-&gt;new();\n$expect-&gt;spawn(\"telnet 10.100.100.100 6025\");\n$expect-&gt;send(\"\\n\");\nsleep(3);\n$expect-&gt;expect( 10, 'User:' );\n$expect-&gt;send(\"aUser\\n\");\n$expect-&gt;expect( 10, 'Password:' );\n$expect-&gt;send(\"password\\n\");\n$expect-&gt;expect( 5, '&gt;' );\n\n$expect-&gt;send(\"configure\\n\");\n$expect-&gt;expect( 5, '#' );\n\n$expect-&gt;send(\"vpn policy site-to-site TESTVPN\\n\");\n$expect-&gt;expect( 5, '#' );\n$expect-&gt;send(\"network local name \\\"$local_ntwk_ao_vpn\\\"\\n\");  # &lt;-- Still doesn't work here.\n$expect-&gt;expect( 5, '#' );\n$expect-&gt;send(\"exit\\n\");\n$expect-&gt;send(\"end\\n\");\n$expect-&gt;soft_close();\n</code></pre>\n\n<hr>\n\n<p>Errorlog:</p>\n\n<pre><code>(edit-site-to-site[TESTVPN])# network local name \"X0\"\n% Error encountered at '^' marker:\n    network local name \"X0\"\n                       ^^M\n% Error: No matching command found.\n(edit-site-to-site[TESTVPN])# exit\n</code></pre>\n\n<p>Desired command:</p>\n\n<pre><code> (edit-site-to-site[TESTVPN])# network local name \"X0 Subnet\"\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1478463157, "post_id": 40453941, "comment_id": 68153360, "body": "I think that should be <code>return $a * $a</code> and not <code>print $a * $a</code> ? And <code>$AoA[$i]</code> refers to the <code>$i</code>th element of the regular array <code>@AoA</code> (which the author did not declare). The assignment <code>$AoA[$i] = @array</code> is in scalar context so <code>@array</code> will evaluate to the length of the array"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478475283, "post_id": 40453941, "comment_id": 68157192, "body": "Re &quot;<i>@array will be the first element of the this anonymous array</i>&quot;, No, <code>@array</code> in scalar context evaluates to the number of elements inside of <code>@array</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478475398, "post_id": 40453941, "comment_id": 68157212, "body": "Note that the example is trying to demonstrate how to place <code>@array</code> inside an element of <code>@AoA</code>, so <code>sub somefunc { my $i = shift; return ( $i*2, $i*3 ); }</code> would serve as a better example."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478538428, "post_id": 40453941, "comment_id": 68185670, "body": "&quot;the documentation didn&#39;t tell me how to get the nested array&quot;. But many of our answers did. <code>$AoA[$i] = \\@array;</code>. Use Dumper to print <code>@AOA</code> and see what you get."}], "answers": [{"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 6, "last_activity_date": 1478463609, "creation_date": 1478463609, "answer_id": 40454102, "question_id": 40453941, "link": "https://stackoverflow.com/questions/40453941/understanding-data-structures-in-perl/40454102#40454102", "title": "understanding data structures in perl", "body": "<p>In the following statement:</p>\n\n<pre><code>$AoA[$i] = @array;\n</code></pre>\n\n<p>the <code>@array</code> is referenced in a <em>scalar context</em>, yielding a number of its elements. The context is imposed by LHS, that is <code>$AoA[$i]</code> which is a single element of the <code>@AoA</code> array.</p>\n\n<p>In Perl, there are no array of arrays in a strict sense. These are emulated essentially by either \"flatten\" arrays or array with references. For the latter, you would need to use take reference operator as in:</p>\n\n<pre><code>$AoA[$i] = \\@array;\n</code></pre>\n\n<p>For the starter, you may find, that <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"noreferrer\"><code>Data::Dumper</code></a> is very handy in examining complex data stuctures such as arrayrefs and hashrefs.</p>\n"}, {"comments": [{"owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1478466610, "post_id": 40454126, "comment_id": 68154655, "body": "Good point, too much time spent in javascript. Should have used the &quot;.&quot; operator, but then it&#39;s explicitly doing concatenation :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1478514959, "post_id": 40454126, "comment_id": 68170746, "body": "&quot;you are operating in list context, so I will treat $i as a string&quot;. List context says nothing about whether a value is treated as a number or a string. It&#39;s <code>print()</code> that is converting all of its arguments to strings. If you replaced the commas with dots, then <code>$i</code> would be evaluated in scalar context, but would still be converted to a string (this time, by the concatenation operator rather than by <code>print()</code>)."}], "tags": [], "owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "is_accepted": false, "score": 1, "last_activity_date": 1478503164, "last_edit_date": 1478503164, "creation_date": 1478463747, "answer_id": 40454126, "question_id": 40453941, "link": "https://stackoverflow.com/questions/40453941/understanding-data-structures-in-perl/40454126#40454126", "title": "understanding data structures in perl", "body": "<p>Perl is polymorphic, which means that it deals with different data types transparently, and makes what is usually a pretty good guess on how to deal with something. This makes the programmer's work much easier because it is not strongly typed like other languages. </p>\n\n<p>So for example if $i is the number 4, you can do this:</p>\n\n<pre><code>print $i + 1;\n</code></pre>\n\n<p>and you will see a 5 - pretty logical, right?</p>\n\n<p>and if you do this:</p>\n\n<pre><code>print \"I am \" , $i , \" years old\";\n</code></pre>\n\n<p>You will see \"I am 4 years old\" - in this case perl says \"you are operating in list context, so I will treat $i as a string. No need to convert the number into a string as many other languages insist.</p>\n\n<p>So when you assign </p>\n\n<pre><code>$AoA[$i] = @array;\n</code></pre>\n\n<p>The way it treats this depends on the context. In scalar context, it will set $AoA[$i] to be the length of the array. </p>\n\n<p>For more information about scalar vs list context, read this answer:</p>\n\n<p><a href=\"http://perl.plover.com/context.html\" rel=\"nofollow noreferrer\">http://perl.plover.com/context.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1478513971, "creation_date": 1478513971, "answer_id": 40462739, "question_id": 40453941, "link": "https://stackoverflow.com/questions/40453941/understanding-data-structures-in-perl/40462739#40462739", "title": "understanding data structures in perl", "body": "<p>Your example isn't very useful in understanding what is going on here as your subroutine always returns \"1\" - the result of calling <code>print()</code>. If you replace the <code>print()</code> with <code>return()</code> then you will at get different values (1, 4, 9, etc).</p>\n\n<p>But the next line of code:</p>\n\n<pre><code>$AoA[$i] = @array;\n</code></pre>\n\n<p>Will always assign <code>1</code> to the element of <code>@Aoa</code>. That's because You are assigning an array (<code>@array</code>) to a scalar variable (<code>$AoA[$i]</code>) and when you evaluate an array in a scalar context, you get the number of elements in the array.</p>\n\n<p>Now, as your <code>@array</code> only ever has a single element, you could do this:</p>\n\n<pre><code>$AoA[$i] = $array[0];\n</code></pre>\n\n<p>But that's not really building an array of arrays. What you really want to do is to get a reference to an array.</p>\n\n<pre><code>$AoA[$i] = \\@array;\n</code></pre>\n\n<p>This would be more useful if your subroutine returned more than one value.</p>\n\n<pre><code>sub somefunc  {\n  # Used $x instead of $a as $a has a special meaning in Perl\n  my $x = shift;\n  return ($x * $x, $x * $x * $x);\n}\n\nfor my $i (1..10) {\n  my @array = somefunc($i);\n  $AoA[$i] = \\@array;\n}\n</code></pre>\n\n<p>As useful tool for exploring this is <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a>. Try adding:</p>\n\n<pre><code>use Data::Dumper;\n</code></pre>\n\n<p>To the top of your code and:</p>\n\n<pre><code>print Dumper @AoA;\n</code></pre>\n\n<p>After the <code>foreach</code> loop to see the different data structures that you get back.</p>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 40454102, "answer_count": 3, "score": 3, "last_activity_date": 1478967505, "creation_date": 1478462725, "last_edit_date": 1478967505, "question_id": 40453941, "link": "https://stackoverflow.com/questions/40453941/understanding-data-structures-in-perl", "title": "understanding data structures in perl", "body": "<p>I'm trying to understand the 'Common Mistake' section in the perldsc documentation. What is the author trying to convey when he mentions:</p>\n\n<blockquote>\n  <p>The two most common mistakes made in constructing something like an array of arrays is either accidentally counting the number of elements or else taking a reference to the same memory location repeatedly. Here's the case where you just get the count instead of a nested array:</p>\n</blockquote>\n\n<pre><code>for my $i (1..10) {\n    my @array = somefunc($i);\n    $AoA[$i] = @array;      # WRONG!\n}\n</code></pre>\n\n<p>From what I understand is that when it iterate it will take the first value of (1..10) which is 1 and will pass it to a function like this:</p>\n\n<pre><code>my @array = somefunc(1);\n</code></pre>\n\n<p>Since that function is not defined, I'll create the logic.</p>\n\n<pre><code>sub somefunc  {\nmy $a = shift;\nprint $a * $a;\n}\n</code></pre>\n\n<p>which will essentially do this:</p>\n\n<pre><code>1 * 1\n</code></pre>\n\n<p>and the result is '1'.</p>\n\n<p>To my understanding   my @array will look like:</p>\n\n<pre><code>@array = ('1');\n</code></pre>\n\n<p>And the next line will do:</p>\n\n<pre><code>$AoA[$i] = @array;\n</code></pre>\n\n<p>I'm assuming that $AoA[$1] is an anonymous array ( he/she didn't declare with 'my', btw) and the @array will be the first element of the this anonymous array which the author said it' WRONG. And the for each loop with iterate to '2'.</p>\n\n<pre><code>somefunc(2);\n</code></pre>\n\n<p>Which will be '4' and passed to:</p>\n\n<pre><code>$AoA[$i] = @array\n</code></pre>\n\n<p>What is the point of the author with this code which is wrong. I'm trying to understand what is wrong but more importantly, I'm trying to understand the code. Any help will be appreciated.</p>\n\n<p>UPDATE</p>\n\n<p>I think I understand why this is a common mistake because when I use print and Dumper, I can visually see what the author is trying to convey, here is the revised code.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Data::Dumper;\n\nfor my $i (1..10) {\n           my @AoA;\n           my @array = somefunc($i);\n           print \"The array is Dumper(@array)\\n\";\n           $AoA[$i] = @array;      # WRONG!\n           print Dumper($AoA[$i]);\n       }\n\n\nsub somefunc  {\nmy $a = shift;\nreturn $a * $a;\n}\n</code></pre>\n\n<p>In the Common Mistakes paragraph of perldoc perldsc, he/she states</p>\n\n<blockquote>\n  <p>Here's the case where you just get the count instead of a nested array:</p>\n</blockquote>\n\n<p>Below is the output of the Dumper.</p>\n\n<pre><code>The array is Dumper(1)\n$VAR1 = 1;\nThe array is Dumper(4)\n$VAR1 = 1;\nThe array is Dumper(9)\n$VAR1 = 1;\nThe array is Dumper(16)\n$VAR1 = 1;\nThe array is Dumper(25)\n$VAR1 = 1;\nThe array is Dumper(36)\n$VAR1 = 1;\nThe array is Dumper(49)\n$VAR1 = 1;\nThe array is Dumper(64)\n$VAR1 = 1;\nThe array is Dumper(81)\n$VAR1 = 1;\nThe array is Dumper(100)\n$VAR1 = 1;\n</code></pre>\n\n<p>So I'm assuming that the repeated</p>\n\n<pre><code>$VAR1 = 1;\n</code></pre>\n\n<p>is the count and not the nested array.</p>\n\n<p>The author did indicate that if the count is what I truly want then to rewrite the code like this:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Data::Dumper;\n\nfor my $i (1..10) {\n           my @count;\n           my @array = somefunc($i);\n           print \"The array is Dumper(@array)\\n\";\n           $count[$i] = scalar @array;      \n           print Dumper($count[$i]);\n       }\n\n\nsub somefunc  {\nmy $a = shift;\nreturn $a * $a;\n}\n</code></pre>\n\n<p>But the documentation didn't tell me how to get the nested array?</p>\n\n<p>UPDATE</p>\n\n<p>Correct me if I am wrong but I rewrote the code to get the nested array:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Data::Dumper;\nmy @count;\nmy @new_array;\n\nfor my $i (1..10) {\n           #my @count;\n           my @array = somefunc($i);\n           push @new_array, [@array];\n       }\n\n\nsub somefunc  {\nmy $a = shift;\nreturn $a * $a;\n}\n\nprint Dumper(\\@new_array);\n</code></pre>\n\n<p>Which printed</p>\n\n<pre><code>$VAR1 = [\n      [\n        1\n      ],\n      [\n        4\n      ],\n      [\n        9\n      ],\n      [\n        16\n      ],\n      [\n        25\n      ],\n      [\n        36\n      ],\n      [\n        49\n      ],\n      [\n        64\n      ],\n      [\n        81\n      ],\n      [\n        100\n      ]\n    ];\n</code></pre>\n"}, {"tags": ["perl", "while-loop", "file-handling"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1478462388, "post_id": 40453782, "comment_id": 68153122, "body": "You&#39;re forgetting to check some of your <code>open</code> calls. Have a look into <a href=\"https://metacpan.org/pod/autodie\" rel=\"nofollow noreferrer\"><code>use autodie</code></a>. Comes standard now."}, {"owner": {"reputation": 584, "user_id": 1487449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/p2mW4.jpg?s=128&g=1", "display_name": "Cristian Velandia", "link": "https://stackoverflow.com/users/1487449/cristian-velandia"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478464114, "post_id": 40453782, "comment_id": 68153700, "body": "Yeah! you are right, the solution is: close $OUT, where the out file was created! Thanks a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478462443, "post_id": 40453858, "comment_id": 68153141, "body": "Is closing <i>and</i> flushing redundant? Should it be close <i>or</i> flush? Also flushing can be handled much nicer with <code>use IO::Handle; $OUT-&gt;flush;</code>. Once <a href=\"https://metacpan.org/pod/IO::Handle\" rel=\"nofollow noreferrer\">IO::Handle</a> is loaded you can use method calls on all filehandles."}, {"owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478462905, "post_id": 40453858, "comment_id": 68153275, "body": "File output is buffered by default, even on a close. It&#39;s done this way for performance reasons - the file writing is done at the operating system&#39;s leisure. A flush is the only way to ensure it is completely on the disk."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1478463124, "post_id": 40453858, "comment_id": 68153351, "body": "No, <a href=\"http://perldoc.perl.org/functions/close.html\" rel=\"nofollow noreferrer\"><code>close</code></a> also flushes. From perldoc: &quot;<i>Closes the file or pipe associated with the filehandle, flushes the IO buffers, and closes the system file descriptor.</i>&quot;"}, {"owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478463885, "post_id": 40453858, "comment_id": 68153619, "body": "Ok, my apologies, I have used flush previously to ensure that the contents are written along the way, so if the program dies the work done so far is saved."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478468092, "post_id": 40453858, "comment_id": 68155181, "body": "If a Perl program dies or exits any open filehandles are closed and flushed. For example: <code>print &quot;foo&quot;; sleep 1; die;</code> will still print <code>foo</code>. If Perl crashes hard, like a segfault, or if it&#39;s killed by a signal it might not. Depends on whether Perl or your OS is doing the buffering. So... not a bad idea to flush critical writes if you&#39;re gonna hold the filehandle open."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478497889, "post_id": 40453858, "comment_id": 68162516, "body": "You don&#39;t even need <code>use IO::Handle;</code> anymore to do <code>$OUT-&gt;flush</code> (or <code>$OUT-&gt;autoflush</code>)."}], "tags": [], "owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "is_accepted": true, "score": 4, "last_activity_date": 1478464000, "last_edit_date": 1478464000, "creation_date": 1478462232, "answer_id": 40453858, "question_id": 40453782, "link": "https://stackoverflow.com/questions/40453782/while-loop-does-not-read-a-file-generated-from-code-on-perl/40453858#40453858", "title": "While loop does not read a file generated from code on Perl", "body": "<p>I think you need to close the file before you start reading it.</p>\n\n<p>Alternatively you can flush the output, to make sure that the file is completely written before you start reading it. </p>\n\n<pre><code>sub flush {\n   my $h = select($_[0]); my $af=$|; $|=1; $|=$af; select($h);\n}\n\n# Flush immediately without turning auto-flush on:\nflush($OUT);\n</code></pre>\n\n<p>See this answer for examples of how to use flush:</p>\n\n<p><a href=\"http://www.perlmonks.org/bare/?node_id=489962\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/bare/?node_id=489962</a></p>\n"}], "owner": {"reputation": 584, "user_id": 1487449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/p2mW4.jpg?s=128&g=1", "display_name": "Cristian Velandia", "link": "https://stackoverflow.com/users/1487449/cristian-velandia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 40453858, "answer_count": 1, "score": 2, "last_activity_date": 1478464000, "creation_date": 1478461757, "question_id": 40453782, "link": "https://stackoverflow.com/questions/40453782/while-loop-does-not-read-a-file-generated-from-code-on-perl", "title": "While loop does not read a file generated from code on Perl", "body": "<p>I was trying to generate an output file on the fly with my code in Perl:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl \nuse strict;\nuse Data::Dumper;\nuse warnings;  \nuse Bio::Seq;\nuse Bio::SeqIO; \nuse Bio::DB::Fasta;\nopen my $OUT, \"&gt; ./temporal.gff\";\n           my $seq = $db-&gt;get_Seq_by_id($key);\n            my $length  = $seq-&gt;length;\n            my $all = $coord{$key};\n            foreach my $keys (@$all[0]){\n                    @sorted = sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] } @$all;\n                    $num = scalar @sorted;\n                    my @new = &amp;infer_gaps(\\@sorted, $num, $length);\n                    foreach my $ln (@new){\n                            my @tmp = split /\\s{2, }|\\t/, $ln;\n                            print $OUT \"$key\\tFillSequencer\\tinference\\t$tmp[0]\\t$tmp[1]\\t\\.\\t$tmp[2]\\t\\.\\t$specie $key:$tmp[0]\\-$tmp[1]\\n\";\n                    }\n                    #print Dumper \\@new;    \n            }\n        }\n</code></pre>\n\n<p>But, When I want to use this generated file, as the usual way with a while loop, it does not read this file:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $ABC, \"&lt;./temporal.gff\" or die $!;\n    my $mRNA_seq;\n    while (my $l = &lt;$ABC&gt;){\n            chomp $l;\n            my @arr = split /\\t|\\s+/, $l;\n            #my $coor = $arr[0] . \" \" . $arr[3] . \" \" . $arr[4];\n            $frame = $arr[6];\n            my $final_seq = $db-&gt;seq( $arr[0], $arr[3], $arr[4] );\n            my $output_nucleotide = Bio::Seq-&gt;new(\n                    -seq =&gt; $final_seq,\n                    -id  =&gt; $mRNA_name,\n                    -display_id =&gt; $mRNA_name,\n                    -alphabet =&gt; 'dna',\n            );\n            if ($frame eq '-') {\n                    $output_nucleotide = $output_nucleotide-&gt;revcom();\n            }\n            $outfile_coor-&gt;write_seq($output_nucleotide);\n    }\n\n    close $ABC;\n</code></pre>\n\n<p>Do you have some ideas? When I ran my code with -d flag it allowed me to confirm that the code skips the last while loop...I do not know if there is a problem with the definition of the FILE HANDLE variable or any other problem that does not generates warnings. Thanks in advance!</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "is_accepted": false, "score": 0, "last_activity_date": 1478498372, "last_edit_date": 1478498372, "creation_date": 1478462618, "answer_id": 40453927, "question_id": 40452398, "link": "https://stackoverflow.com/questions/40452398/outputting-user-input-cgi/40453927#40453927", "title": "Outputting User Input (CGI)", "body": "<p>Replace this code</p>\n\n<pre><code>foreach (my $userinput &lt; 100){\nprint \"$low &amp;&amp; $high\" ;}\n</code></pre>\n\n<p>With this, doing a for loop counting down from the high number to the low number</p>\n\n<pre><code>print qq{&lt;ul&gt;\\n};\nfor (my $i=$high; $i&gt;= $low; $i--) {\n    print qq{    &lt;li&gt;$i&lt;/li&gt;\\n};\n}\nprint qq{&lt;/ul&gt;\\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478498151, "post_id": 40454797, "comment_id": 68162599, "body": "<code>for my $i (reverse $low .. $high)</code> will use far more memory than <code>for (my $i=$high; $i&gt;= $low; $i--)</code>. This may or may not be a concern for the OP and other readers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478498339, "post_id": 40454797, "comment_id": 68162663, "body": "Also note that the for/foreach statement modifier does not have parens around the expression. <code>... for reverse $low .. $high;</code> is perfectly fine."}], "tags": [], "owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "is_accepted": false, "score": 0, "last_activity_date": 1478468101, "creation_date": 1478468101, "answer_id": 40454797, "question_id": 40452398, "link": "https://stackoverflow.com/questions/40452398/outputting-user-input-cgi/40454797#40454797", "title": "Outputting User Input (CGI)", "body": "<p>Personally, I don't like using the C style loop.  I find it too messy.</p>\n\n<p>Here's is how I'd write it.</p>\n\n<pre><code>say \"\\t&lt;li&gt;$_&lt;\\li&gt;\" for (reverse $low .. $high);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print \"\\t&lt;li&gt;$_&lt;\\li&gt;\\n\" for (reverse $low .. $high);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6016142, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153287758166010/picture?type=large", "display_name": "Lawrence Wilson", "link": "https://stackoverflow.com/users/6016142/lawrence-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478498372, "creation_date": 1478453917, "question_id": 40452398, "link": "https://stackoverflow.com/questions/40452398/outputting-user-input-cgi", "title": "Outputting User Input (CGI)", "body": "<p>My assignment calls for me to output a range of numbers from highest to lowest but it must be from the user input. Where I'm confused is that I know how to display an array, however, I'm unsure if I'm starting my code off right by using a for loop.</p>\n\n<p><strong>Assignment</strong>\nCreate a CGI application with an HTML page named myform.html and a CGI script named myscript.cgi. The HTML page's form has two textboxes for entering the upper and lower values for a range of consecutive integers. Complete the form by choosing values that differ by about 10. Submitting the form should execute myscript.cgi. The script should output an unordered list showing all of the integers in the range from highest to lowest.</p>\n\n<pre><code>#!c:\\Dwimperl\\perl\\bin\\perl.exe\n\nuse strict;\nuse warnings;\n\nuse CGI qw(:standard);\nuse CGI::Carp qw(fatalsToBrowser);\nprint \"Content-type: text/html\\n\\n\";\n\n#read form input from user\nmy $userinput = &lt;STDIN&gt;;\nmy $low = param ('lowest');\nmy $high = param ('highest');\n\n\nforeach (my $userinput &lt; 100){\nprint \"$low &amp;&amp; $high\" ;}\n</code></pre>\n"}, {"tags": ["html", "mysql", "apache", "perl"], "comments": [{"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478440661, "post_id": 40450069, "comment_id": 68145637, "body": "Replace <code>insert person</code> to <code>insert into person</code>. You current <code>insert</code> statement is not a valid sql syntax."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 1, "creation_date": 1478440708, "post_id": 40450069, "comment_id": 68145649, "body": "@Dekel \u2014 <a href=\"http://dev.mysql.com/doc/refman/5.7/en/insert.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.7/en/insert.html</a> \u2014 The <code>into</code> is just sugar. It&#39;s optional."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1478440766, "post_id": 40450069, "comment_id": 68145667, "body": "Don&#39;t write Perl without <code>use strict;</code> and <code>use warnings;</code>"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1478440793, "post_id": 40450069, "comment_id": 68145679, "body": "Don&#39;t parse form data manually. <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">We have modules for that</a>"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1478440815, "post_id": 40450069, "comment_id": 68145686, "body": "@Quentin, is it specific to mysql?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1478440823, "post_id": 40450069, "comment_id": 68145690, "body": "Danger! This code is vulnerable to <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">SQL injection attacks</a>"}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1478441813, "post_id": 40450069, "comment_id": 68146022, "body": "@Quentin I have to parse form data manually. My question is how do I insert information into MySQL database when I have separate files for CGI and HTML? Is my syntax correct for checking if method is <code>GET</code>?"}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1478441840, "post_id": 40450069, "comment_id": 68146033, "body": "@Quentin The code works, but it adds an empty blank line in MySQL table!"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478441914, "post_id": 40450069, "comment_id": 68146053, "body": "The problem is not with two separate files... you can try and combine the files to see that you will still get the same problem."}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "reply_to_user": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478442203, "post_id": 40450069, "comment_id": 68146149, "body": "@Dekel I usually put CGI and HTML is same file, but this time I want to see how I can do same thing with two different files! When I put them in single file I have <code>if ($ENV{REQUEST_METHOD} eq &quot;GET&quot;) { &amp;showform(); exit;} else { &amp;parseform(); &amp;insertperson(); exit;}</code> Because I have HTML in different location I think I have to change syntax and put <code>insertperson</code> and <code>parseform</code> if <code>REQUEST_METHOD</code> is <code>GET</code>!"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478442251, "post_id": 40450069, "comment_id": 68146168, "body": "And again - even if you put everything in 2 file - I really don&#39;t think it will work as you expect."}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "reply_to_user": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478442354, "post_id": 40450069, "comment_id": 68146200, "body": "@Dekel What do you think is wrong with my code? Because I don&#39;t get any error!"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478450019, "post_id": 40450069, "comment_id": 68148750, "body": "You claim <i>The code works</i> but I get <code>Possible unintended interpolation of @ssw0rd in string at x.pl line 7. Missing right curly or square bracket at x.pl line 70, at end of line   (Might be a runaway multi-line ~~ string starting on line 61) syntax error at x.pl line 70, at EOF x.pl had compilation errors.</code> Please <b>paste</b> code here <b>instead of typing it in</b>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478512435, "post_id": 40450069, "comment_id": 68169152, "body": "@HassenFatima: &quot;I have to parse form data manually&quot; - why? What is imposing such a ridiculous restriction on you?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478514488, "post_id": 40450069, "comment_id": 68170444, "body": "And can I just point out that you should probably declare some of your columns as &quot;not null&quot; - that will prevent Perl from accidentally inserting blank lines."}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478443628, "post_id": 40450410, "comment_id": 68146613, "body": "I have changed <code>form</code> to <code>FORM</code>, but still the issue is there. I have posted a screenshot of what I see in MySQL table in my question!"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478443713, "post_id": 40450410, "comment_id": 68146644, "body": "1. what about the second part? 2. update the question with the <b>updated</b> code"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478444751, "post_id": 40450410, "comment_id": 68146975, "body": "And you completely ignored the 2nd part in my answer"}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478444989, "post_id": 40450410, "comment_id": 68147051, "body": "I only changed <code>form</code> to <code>FORM</code>. I did not add or remove anything else!"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478445040, "post_id": 40450410, "comment_id": 68147073, "body": "So your <code>FORM</code> is still <b>local</b> and available <b>only</b> inside the <code>parseform</code> routine."}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478445377, "post_id": 40450410, "comment_id": 68147193, "body": "Yes, I forgot to update that. I have changed now, so in MySQL I get name, email, age, color! I am updating the image for MySQL too!"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478445469, "post_id": 40450410, "comment_id": 68147232, "body": "I really don&#39;t understand what you did in this change... you completely removed the usage of variables (and just used the string &#39;name&#39;, etc). Do you know what is local/global variable?"}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478445757, "post_id": 40450410, "comment_id": 68147338, "body": "I new with perl programming , so I apologize for silly mistakes. I thought you meant <code>FORM</code> can only be used in <code>parseform</code>, so removed it!"}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "edited": false, "score": 0, "creation_date": 1478445806, "post_id": 40450410, "comment_id": 68147353, "body": "If you remove it you no longer use this variable <b>at all</b>. Check here about global/local variables: <a href=\"http://stackoverflow.com/questions/2972310/global-variable-subroutine-variable-question-in-perl\" title=\"global variable subroutine variable question in perl\">stackoverflow.com/questions/2972310/&hellip;</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478519904, "post_id": 40450410, "comment_id": 68173574, "body": "@Dekel: Why do you think that <code>%FORM</code> is local to <code>parseform()</code>? It&#39;s not declared at all, so Perl will create it as a global (i.e. package) variable."}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478520075, "post_id": 40450410, "comment_id": 68173678, "body": "@DaveCross, Didn&#39;t remember that (long time didn&#39;t touch perl :) ) Thanks for that info!"}], "tags": [], "owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "is_accepted": false, "score": 3, "last_activity_date": 1478442348, "creation_date": 1478442348, "answer_id": 40450410, "question_id": 40450069, "link": "https://stackoverflow.com/questions/40450069/how-to-add-datat-to-mysql-from-cgi-script-with-static-html/40450410#40450410", "title": "How to add datat to MySQL from CGI script with static html?", "body": "<ol>\n<li>Perl is case sensitive.</li>\n</ol>\n\n<p>You used the variable <code>$FORM</code> to set values, but later on you use <code>$form</code> (in <code>'$form{name}','$form{email}','$form{age}','$form{color}'</code>).</p>\n\n<p>Change them to <code>'$FORM{name}','$FORM{email}','$FORM{age}','$FORM{color}'</code></p>\n\n<ol start=\"2\">\n<li>The <code>$FORM</code> variable is local to the <code>parseform</code> routine (therefor - it is <strong>not</strong> available inside the <code>insertperson</code> routine).</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478520041, "post_id": 40462196, "comment_id": 68173665, "body": "actually the <code>&#39;name&#39;, email&#39;,&#39;age&#39;</code> etc is new, his original code was <code>&#39;$FORM{name}&#39;, &#39;$FORM{email}&#39;, &#39;$FORM{age}&#39;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478520216, "post_id": 40462196, "comment_id": 68173767, "body": "Yes, I know. I looked at the edit history. The original code used <code>$form{name}</code>, etc. which wouldn&#39;t have worked. When he switched to <code>$FORM{name}</code>, etc., if should have started working."}, {"owner": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478520258, "post_id": 40462196, "comment_id": 68173788, "body": "Thats exactly what I told him, but he said it didn&#39;t work (you can check my answer)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53434, "user_id": 5037551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BYnIO.jpg?s=128&g=1", "display_name": "Dekel", "link": "https://stackoverflow.com/users/5037551/dekel"}, "edited": false, "score": 0, "creation_date": 1478520315, "post_id": 40462196, "comment_id": 68173825, "body": "I have. But he&#39;s obviously very confused. Who knows what tests he actually ran :-/"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1478527941, "last_edit_date": 1478527941, "creation_date": 1478512334, "answer_id": 40462196, "question_id": 40450069, "link": "https://stackoverflow.com/questions/40450069/how-to-add-datat-to-mysql-from-cgi-script-with-static-html/40462196#40462196", "title": "How to add datat to MySQL from CGI script with static html?", "body": "<p>Here's the subroutine you use to insert the data into the database:</p>\n\n<pre><code>sub insertperson {\n    $insert=qq~insert person(name,email,age,color)\n        values('name','email','age','color')~;\n    $dbh=DBI-&gt;connect($connectionInfo,$user,$passwd);\n    $sth=$dbh-&gt;prepare($insert);\n    if ($sth-&gt;execute()) {\n        &amp;displaysuccess;\n    }\n    else {\n        &amp;displayfail;\n    }\n    $dbh-&gt;disconnect;\n}\n</code></pre>\n\n<p>The SQL you execute is:</p>\n\n<blockquote>\n  <p>insert person(name,email,age,color) values('name','email','age','color')</p>\n</blockquote>\n\n<p>That's inserting hard-coded values into your database. You want to insert data from your <code>%FORM</code> hash.</p>\n\n<pre><code>%insert = \"insert person(name,email,age,color)\n           values('$FORM{name}','$FORM{email}',\n                  '$FORM{age}','$FORM{color}')\";\n</code></pre>\n\n<p>But this code is a <strong>terrible</strong> idea. You are taking data from an unknown user and inserting it into an SQL statement. That's an <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">SQL injection attack</a> waiting to happen.</p>\n\n<p>A far better approach is to use bind variables and extra parameters to <code>execute()</code>.</p>\n\n<pre><code>sub insertperson {\n    $insert = \"insert person(name,email,age,color)\n               values(?, ?, ?, ?)\";\n    $dbh=DBI-&gt;connect($connectionInfo,$user,$passwd);\n    $sth=$dbh-&gt;prepare($insert);\n    if ($sth-&gt;execute($FORM{name}, $FORM{email},\n                      $FORM{age},$FORM{color})) {\n        &amp;displaysuccess;\n    }\n    else {\n        &amp;displayfail;\n    }\n    $dbh-&gt;disconnect;\n}\n</code></pre>\n\n<p>An even better idea is to look at <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a> - but I'm guessing that's a step too far at this point.</p>\n\n<p>Some other points on your code:</p>\n\n<ul>\n<li>Please replace <code>-w</code> with <code>use warnings</code> and add <code>use strict</code> (you will then need to declare all of your variables).</li>\n<li>Please use CGI.pm to parse your CGI parameters and print the CGI header.</li>\n<li>Please stop using <code>&amp;</code> to call subroutines. Something like <code>displaysuccess()</code> looks more recognisable as a subroutine call and doesn't have hidden side effects that will bite you one day.</li>\n<li>Please use a templating engine (I recommend the <a href=\"https://metacpan.org/release/Template-Toolkit\" rel=\"nofollow noreferrer\">Template Toolkit</a>) to handle your HTML.</li>\n<li>Your HTML should really have an h1 element before the h2 element. You should use CSS to fix the appearance, rather than messing with the semantics.</li>\n</ul>\n"}], "owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1478527941, "creation_date": 1478440257, "last_edit_date": 1478445299, "question_id": 40450069, "link": "https://stackoverflow.com/questions/40450069/how-to-add-datat-to-mysql-from-cgi-script-with-static-html", "title": "How to add datat to MySQL from CGI script with static html?", "body": "<p>I have a CGI script that reads an HTML file. The HTML file is located in directory called <code>htdocs</code> and CGI file is located in directory called <code>cgi-bin</code>. I can access the html form from the web and when I submit I see the result I expect, but when I check MySQL the table has a new blank line.</p>\n\n<p>I usually put CGI and HTML in same file because I find it easy, but I was wondering how I can do same action with CGI and HTML in different files. Here is my CGI file code:</p>\n\n<pre><code>    #!/usr/bin/perl -w\n\nuse DBI;\n\n$db=\"user1\";\n$user=\"user1\";\n$passwd=\"P@ssw0rd\";\n$host=\"db-mysql.system1\";\n$connectionInfo=\"dbi:mysql:$db;$host\";\n\n#print HTTP Header\nprint \"Content-type:text/html\\n\\n\";\n\nif ($ENV{REQUEST_METHOD} eq \"GET\") {\n    &amp;parseform();\n    &amp;insertperson();\n}\n#else {\n#   &amp;parseform();\n#   &amp;insertperson();\n#   exit;\n#}\n\nsub parseform {\n    read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});\n    @pairs = split(/&amp;/, $buffer);\n    foreach $pair (@pairs) {\n        ($name, $value) = split(/=/, $pair);\n        $value =~ tr/+/ /;\n        $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack(\"C\", hex($1))/eg;\n        $FORM{$name} = $value;\n}\n\nsub insertperson {\n    $insert=qq~insert person(name,email,age,color)\n        values('name','email','age','color')~;\n    $dbh=DBI-&gt;connect($connectionInfo,$user,$passwd);\n    $sth=$dbh-&gt;prepare($insert);\n    if ($sth-&gt;execute()) {\n        &amp;displaysuccess;\n    }\n    else {\n        &amp;displayfail;\n    }\n    $dbh-&gt;disconnect0;\n}\n\nsub displaysuccess {\n    print qq~&lt;html&gt;\\n\n        &lt;head&gt;\n        &lt;title&gt;Person&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body&gt;\n        &lt;h2&gt;Record Added&lt;/h2&gt;\n        &lt;/body&gt;\n        &lt;/html&gt;\n    ~;\n}   \n\nsub displayfail {\n    print qq~&lt;html&gt;\\n\n        &lt;head&gt;\n        &lt;title&gt;Person&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body&gt;\n        &lt;h2&gt;Record Not Added&lt;/h2&gt;\n        &lt;/body&gt;\n        &lt;/html&gt;\n    ~;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/L6jdG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L6jdG.png\" alt=\"MySQL\"></a></p>\n"}, {"tags": ["perl", "sorting", "pointers"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1478407674, "post_id": 40446050, "comment_id": 68138541, "body": "You forgot to state the criterion -- is it that the first word on a line matches (is the same in both files)?  Can you assert anything about the size of either file (both large or not)?"}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1478408296, "post_id": 40446050, "comment_id": 68138642, "body": "Both files are large, I&#39;m not quite sure what you mean by assert anything about the size but yes both files are large"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478413850, "post_id": 40446050, "comment_id": 68139471, "body": "File handles are all the pointers you need!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1478543011, "post_id": 40446050, "comment_id": 68188380, "body": "@Bob (1) Processing before and inside <code>INNER</code> (inside <code>if ($GenSym ...)</code> block) need be exactly the same -- we have to do it before as well only so to catch the line from <code>INNER</code> that overshoot. Since you have some processing there best put it in a sub. (2) This affects the initialization of <code>$numLoss</code> and the other -- they go right after <code>OUTER</code> starts, before anything is done.  The way it is now they reset whatever has been computed.  // With these changes I get desired results.  I added comments to my answer (and a missing line of code), and will later add comments on your added code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478551225, "post_id": 40446050, "comment_id": 68193006, "body": "Does the first field of <code>file1</code> actually looks like <code>Apples|XXX</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1478560744, "last_edit_date": 1478560744, "creation_date": 1478410739, "answer_id": 40446358, "question_id": 40446050, "link": "https://stackoverflow.com/questions/40446050/using-pointers-to-lines-in-a-file-in-perl/40446358#40446358", "title": "Using pointers to lines in a file in perl", "body": "<p>You're right. It's exactly like a merge sort, except only matching lines are output. </p>\n\n<pre><code>sub read_and_parse1 {\n   my ($fh) = @_;\n   defined( my $line = &lt;$fh&gt; )\n      or return undef;\n\n   my ($id, @copy) = split(' ', $line);   # Use split(/\\t/, $line) if tab-separated data\n   my ($gene_sym) = split(/\\|/, $id);\n\n   return [ $gene_sym, @copy ];\n}\n\nsub read_and_parse2 {\n   my ($fh) = @_;\n   defined( my $line = &lt;$fh&gt; )\n      or return undef;\n\n   return [ split(' ', $line) ];         # Use split(/\\t/, $line) if tab-separated data\n}\n\nmy $fields1 = read_and_parse1($fh1);\nmy $fields2 = read_and_parse2($fh2);\nwhile ($fields1 &amp;&amp; $fields2) {\n   my $cmp = $fields1-&gt;[0] cmp $fields2-&gt;[0];\n   if    ($cmp &lt; 0) { $fields1 = read_and_parse1($fh1); }\n   elsif ($cmp &gt; 0) { $fields2 = read_and_parse2($fh2); }\n   else {\n      my ($gene_sym, @copy) = @$fields1;\n      my (undef, $chrom, $strand, $start, $stop, $map_id, $total_map, $abnormal_merge, $overlap) = @$fields2;\n\n      $chrom =~ s/^CHR/hs/;\n\n      my $num_loss  = grep { $_ &lt;  0 } @copy;\n      my $deep_loss = grep { $_ &lt; -1 } @copy;\n\n      print($single_fh join(\"\\t\", $chrom, $start, $stop, $num_loss/@copy  ) . \"\\n\");\n      print($deep_fh   join(\"\\t\", $chrom, $start, $stop, $deep_loss/@copy ) . \"\\n\");\n\n      $fields1 = read_and_parse1($fh1);\n      $fields2 = read_and_parse2($fh2);\n   }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ cat single.txt\nhs1 1167628 1170420 0.375\nhs1 2115898 2144159 0\nhs1 19665266 19812066 0.125\nhs1 1337275 1342693 0.375\n\n$ cat deep.txt\nhs1 1167628 1170420 0\nhs1 2115898 2144159 0\nhs1 19665266 19812066 0\nhs1 1337275 1342693 0.25\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478422632, "post_id": 40446384, "comment_id": 68141120, "body": "Thanks, I tried this out, but i had generalized the code down quite a bit for this question and theres some syntax things here I&#39;ve never seen before that I don&#39;t understand. So i tried to implement in how it made sense to me but I&#39;m getting the error like how I posted in the edit"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 1, "creation_date": 1478423453, "post_id": 40446384, "comment_id": 68141277, "body": "@Bob The code in your edit is quite different. Since it&#39;s very late here I&#39;ll look tomorrow. (On the first pass I don&#39;t see why you don&#39;t get the first word at least.)  The posted code in this answer works for your original specification -- what syntax (or code) poses problems? I can add explanations."}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478489710, "post_id": 40446384, "comment_id": 68160367, "body": "I changed my edit, I realized there were some errors in my post before because I wrote it at 3 am, but this one is pretty specific I think @zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478542703, "post_id": 40446384, "comment_id": 68188207, "body": "@Bob I edited, with some clarifications and an extra line of code that was missing -- if the whole <code>INNER</code> is processed without a match, we need to rewind its filehandle for the next line of <code>OUTER</code>, what is done with <code>seek ...</code>.  Note that processing before <code>INNER</code> and inside of it need be exactly the same."}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478549555, "post_id": 40446384, "comment_id": 68192051, "body": "I&#39;ve gotten it down so that every line but &#39;hs1     19665266    19812066   0.125 //For Oranges is being output correctly. I&#39;m not really sure how to use the seek command all I get is the first line &#39;hs1     1167628     1170420    0.375 //For Apples&#39;. That&#39;s when I enter &#39;seek $fh2, 0, 0;&#39;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478550510, "post_id": 40446384, "comment_id": 68192613, "body": "@ikegami  Thank you -- that crept in trying to fix edits to question, which left out a critical part what I didn&#39;t notice.  Thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478550812, "post_id": 40446384, "comment_id": 68192790, "body": "@ikegami  That code worked fine -- the wrong seek was added to fix the code in the edit of the question.  This code didn&#39;t need changes"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478551149, "post_id": 40446384, "comment_id": 68192973, "body": "@Bob The code in your edit is missing the crucial <code>next OUTER if $cmp &lt; 0;</code> -- which is now renamed to <code>next FILE1 if $cmp &lt; 0;</code>.  (That&#39;s why I had added the <code>seek</code>, not noticing the missing part.)  You must have that line, to bail out once overshooting happened."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478551339, "post_id": 40446384, "comment_id": 68193060, "body": "@ikegami  Thank you for edits!  The sub is far better (thought of it but wanted to keep it simpler), the naming should be clearer this way.  I&#39;l restore comments (only one line was about the bad seek) and check around.  Thank you"}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478553876, "post_id": 40446384, "comment_id": 68194382, "body": "I included the &#39;next FILE1 if $cmp &lt; 0;&#39; but I&#39;m still just missing the one line in my output for the line for orange"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1478559707, "post_id": 40446384, "comment_id": 68197022, "body": "@Bob I added full working code for your edit and some comments.  Let me know how it goes, in particular whether more comments would be helpful.  I may edit and clean up some more."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478559785, "post_id": 40446384, "comment_id": 68197043, "body": "@ikegami  Thank you for fixing that bug, and for other improvements."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478560194, "post_id": 40446384, "comment_id": 68197204, "body": "<code>$line[0] cmp $GeneSym</code> should be <code>( split &#47;\\|&#47;, $line[0] )[0] cmp $GeneSym</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478560388, "post_id": 40446384, "comment_id": 68197283, "body": "@ikegami ugh ... thank you.  I am just going to remove that <code>|</code> altogether, with a comment asking for clarification.  If it is there should be yet further changes (cmp-ing on both titles, etc)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478561405, "post_id": 40446384, "comment_id": 68197612, "body": "@ikegami yes, I saw that -- which is why it makes perfect sense for me to drop-and-note it for now"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1478678231, "last_edit_date": 1478678231, "creation_date": 1478411060, "answer_id": 40446384, "question_id": 40446050, "link": "https://stackoverflow.com/questions/40446050/using-pointers-to-lines-in-a-file-in-perl/40446384#40446384", "title": "Using pointers to lines in a file in perl", "body": "<p>Quite like you state, with: use <code>cmp</code> for comparison, <code>split</code> line into two terms. </p>\n\n<p>For each line of <code>FILE1</code> file go through lines of <code>FILE2</code> file, exiting when a match is found. Once the <code>FILE2</code> overshoots alphabetically move to the next line of <code>FILE1</code>.</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nsub process {\n   my ($name, $affirm_1, $affirm_2) = @_;\n   print \"$name $affirm_1 $affirm_2\\n\";\n}\n\nmy $file_1 = 'set1.txt';\nmy $file_2 = 'set2.txt';\n\nopen my $fh1, '&lt;', $file_1 or die \"Can't open $file_1: $!\";\nopen my $fh2, '&lt;', $file_2 or die \"Can't open $file_2: $!\";\n\nmy ($name_2, $affirm_2);\nFILE1: while (my $line1 = &lt;$fh1&gt;) {\n    chomp $line1;\n    my ($name_1, $affirm_1) = split ' ', $line1, 2;\n\n    if ($name_2) {\n        my $cmp = $name_1 cmp $name_2;\n        next FILE1 if $cmp &lt; 0;\n        if ($cmp == 0) {\n            process($name_1, $affirm_1, $affirm_2);\n            next FILE1;\n        }\n    }\n\n    FILE2: while (my $line2 = &lt;$fh2&gt;) {\n        chomp $line2;\n        ($name_2, $affirm_2) = split ' ', $line2, 2;\n        my $cmp = $name_1 cmp $name_2;\n        next FILE1 if $cmp &lt; 0;\n        if ($cmp == 0) {\n            process($name_1, $affirm_1, $affirm_2);\n            next FILE1;\n        }\n    }\n}\n</code></pre>\n\n<p>Comments on a few remaining details.</p>\n\n<p>Once a <code>FILE2</code> line \"overshoots,\" in the next iteration of <code>FILE1</code> we need to first check that line, before entering the <code>FILE2</code> loop to iterate over its remaining lines. For the first <code>FILE1</code> line the <code>$name_2</code> is still undef thus <code>if ($name_2)</code>.</p>\n\n<hr>\n\n<p>Updated for edited post.</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nsub process_line {\n    my ($single, $deep, $rline, $GeneSym, $Chrom, $Start, $Stop) = @_;\n    my ($numLoss, $deepLoss) = calc_loss($rline);\n    $Chrom =~ s/CHR/hs/;\n    print $single (join \"\\t\", $Chrom, $Start, $Stop, $numLoss/$#$rline), \"\\n\";\n    print $deep   (join \"\\t\", $Chrom, $Start, $Stop, $deepLoss/$#$rline), \"\\n\";\n}\n\nsub calc_loss {\n    my ($rline) = @_; \n    my ($numLoss, $deepLoss) = (0, 0); \n    for my $i (1.. $#$rline) {\n        $numLoss  += 1  if $rline-&gt;[$i] &lt; 0;\n        $deepLoss += 1  if $rline-&gt;[$i] &lt; -1; \n    }   \n    return $numLoss, $deepLoss;\n}\n\nmy ($Number,  $NumberDeep) = ('Number.txt', 'NumberDeep.txt');\nopen my $single, '&gt;', $Number      or die \"Can't open $Number: $!\";\nopen my $deep,   '&gt;', $NumberDeep  or die \"Can't open $NumberDeep: $!\";\n\nmy ($file_1, $file_2) = ('set1_new.txt', 'set2_new.txt');    \nopen my $fh1, '&lt;', $file_1 or die \"Can't open $file_1: $!\";\nopen my $fh2, '&lt;', $file_2 or die \"Can't open $file_2: $!\";\n\nmy ($GeneSym, $Chrom, $Strand, $Start, $Stop, \n    $MapId, $TotalMap, $AbnormalMerge, $Overlap);\n\nFILE1: while (my $line1 = &lt;$fh1&gt;) {\n    next if $line1 =~ /^\\s*$/;\n    chomp $line1;\n\n    my @line = split ' ', $line1;\n\n    if ($GeneSym) {\n        my $cmp = $line[0] cmp $GeneSym;\n        next FILE1 if $cmp &lt; 0;\n        if ($cmp == 0) {\n            process_line($single, $deep, \\@line,\n                         $GeneSym, $Chrom, $Start, $Stop);\n            next FILE1;\n        }   \n    }   \n\n    FILE2: while (&lt;$fh2&gt;) {\n        next if /^\\s*$/;\n        chomp;\n        ($GeneSym, $Chrom, $Strand, $Start, $Stop, \n             $MapId, $TotalMap, $AbnormalMerge, $Overlap) = split;\n        my $cmp = $line[0] cmp $GeneSym;\n        next FILE1 if $cmp &lt; 0;\n        if ($cmp == 0) {\n            process_line($single, $deep, \\@line,\n                         $GeneSym, $Chrom, $Start, $Stop);\n            next FILE1;\n        }\n    }\n}\n</code></pre>\n\n<p>This produces the desired output with given sample files. Some shortcuts are taken, please let me know if comments would be helpful. Here are a few</p>\n\n<ul>\n<li><p>Much error checking should be added around. </p></li>\n<li><p>I assume the first field of <code>FILE1</code> to be used as it stands. Otherwise changes are needed.</p></li>\n<li><p>Processing is split into two functions, calculations being separate. This is not necessary. </p></li>\n<li><p><code>$#$rline</code> is the index of the last element of <code>$rline</code> arrayref. If this is too much syntax to stomach use <code>@$rline - 1</code>, for example as <code>(0..@$rline-1)</code></p></li>\n</ul>\n\n<p>Some comments on the code posted in the question:</p>\n\n<ul>\n<li><p>Always, <em>always</em>, please <code>use warnings;</code> (and <code>use strict;</code>)</p></li>\n<li><p>loop over indices is best written <code>foreach my $i (0..$#array)</code></p></li>\n<li><p>The regex modifier <code>/ee</code> is very involved.  There is absolutely no need for it here.</p></li>\n</ul>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 40446384, "answer_count": 2, "score": 2, "last_activity_date": 1478678231, "creation_date": 1478407248, "last_edit_date": 1478553587, "question_id": 40446050, "link": "https://stackoverflow.com/questions/40446050/using-pointers-to-lines-in-a-file-in-perl", "title": "Using pointers to lines in a file in perl", "body": "<p>I'm trying to use some sort of pointers in perl so that I can look at two at two files that are sorted in alphabetical order and match things in both the files if they have the same name in the first column. The way i'm searching through each file though is I'm looking at which lines first column is lower in alphabetical order and then moving the pointer on that file to the next line. Somewhat similar to the pointers in merge sort. The code below is an example of what I want.</p>\n\n<p>Using these two files.</p>\n\n<p>set1</p>\n\n<pre><code> apple  17  20\n boombox  23  29\n carl  25  29\n cat  22  33\n dog  27  44\n</code></pre>\n\n<p>set2</p>\n\n<pre><code> ants  yes\n boombox  no\n carl  yes\n dentist  yes\n dice  no\n dog  no\n</code></pre>\n\n<p>I can make a script that does something like this</p>\n\n<pre><code>($name, $affirmation) = first line in set2; #part I'm confused about I just kind of need some sort of command of something that will do this\nwhile (&lt;&gt;){\n        @set1 = split;\n        while ($name &lt; set1[0]){\n             ($name, $affirmation) = next line in set2;  # part i'm confused about I just kind of need some sort of command of something that will do this\n        }\n        if ($name = $set[0]{\n               print @set1, $affirmation;\n        }\n</code></pre>\n\n<p>This is how I would run it</p>\n\n<pre><code>./script.txt set1\n</code></pre>\n\n<p>I would end up with</p>\n\n<pre><code>boombox  23  29  no\ncarl  25  29  yes\ndog  27  44  no\n</code></pre>\n\n<p>.</p>\n\n<p>.</p>\n\n<p>Edit:</p>\n\n<p>I tried some code in some of the answers to see if I could make some functional code out of it but I seem to be running into problems, and some of the syntax in the answers I could not understand so I'm having a lot of trouble figuring out how to debug or solve this.</p>\n\n<p>This is my specific example using the folllowing two text files</p>\n\n<p>text.txt</p>\n\n<pre><code>Apples 0       -1      -1      0       0       0       0       -1 \nApricots 0       1      1      0       0       0       0       1\nFruit        0       -1      -1      0       0       0       0       -1\nGrapes        0       -2      -1      0       0       0       0       -2\nOranges   0       1      1      0       0       0       0       -1\nPeaches  0       -2      -1      0       0       0       0       -2\n</code></pre>\n\n<p>text2.txt</p>\n\n<pre><code>Apples      CHR1    +       1167628 1170420 1       1       N\nApricots      CHR1    -       2115898 2144159 1       1       N\nOranges       CHR1    -       19665266        19812066        1       1      N\nNoidberry     CHR1    -       1337728 1329993 1       1       N\nPeaches       CHR1    -       1337275 1342693 1       1       N\n</code></pre>\n\n<p>And this script\nscript.pl</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nmy $file_1 = $ARGV[0];\nmy $file_2 = $ARGV[1];\n\nopen my $fh1, '&lt;', $file_1 or die \"Can't open $file_1: $!\";\nopen my $fh2, '&lt;', $file_2 or die \"Can't open $file_2: $!\";\n\nopen(my $single, '&gt;', 'text.txt');\nopen(my $deep, '&gt;', 'text2.txt');\nOUTER: while (my $outer = &lt;$fh1&gt;){\n        chomp $outer;\n        @CopyNumber = split(' ', $outer);\n        ($title, $title2) = split('\\|', $CopyNumber[0]);\n        #print 'title: ',$title,' title2: ',$title2,\"\\n\";\n        my $numLoss = 0;\n        my $deepLoss = 0;\n        for ($i = 1; $i &lt;= $#CopyNumber; $i++){\n                #print \"$CopyNumber[$i], $#CopyNumber, $i, \\n\";\n                if ($CopyNumber[$i] &lt; 0){\n                        $numLoss = $numLoss + 1;\n                        if ($CopyNumber[$i] &lt;-1){\n                                $deepLoss = $deepLoss + 1;\n                        }\n                }\n        }\n        if ($GeneSym and (($GeneSym cmp $title)==0)){ #or (($GeneSym cmp $title2)==0))){\n                print $single $Chrom,\"\\t\",$Start,\"\\t\",$Stop,\"\\t\",$numLoss/$#CopyNumber,\"\\n\";\n                print $deep $Chrom,\"\\t\",$Start,\"\\t\",$Stop,\"\\t\",$deepLoss/$#CopyNumber,\"\\n\";\n                next OUTER;\n        }\n\n        INNER: while (my $inner = &lt;$fh2&gt;){\n                ($GeneSym, $Chrom, $Strand, $Start, $Stop, $MapId, $TotalMap, $AbnormalMerge, $Overlap) = split(' ', $inner);\n                $Chrom =~ s/CHR/hs/ee;\n                my $cmp = ($GeneSym cmp $title);\n                next OUTER if $cmp &lt; 0;\n                if ($cmp==0){ #or (($GeneSym cmp $title2)==0)){\n                        print $single $Chrom,\"\\t\",$Start,\"\\t\",$Stop,\"\\t\",$numLoss/$#CopyNumber,\"\\n\";\n                        print $deep $Chrom,\"\\t\",$Start,\"\\t\",$Stop,\"\\t\",$deepLoss/$#CopyNumber,\"\\n\";\n                        next OUTER;\n                }\n        }\n}\n</code></pre>\n\n<p>If I run ./script.pl text.txt text2.txt I should get this printed into Number.txt</p>\n\n<p>//corresponding to columns 2,4,5 of text2.txt and the last column being the percentage of columns which have a number lower than 0</p>\n\n<pre><code>hs1     1167628     1170420    0.375 //For Apples\nhs1     2115898     2144159    0 //For Apricots\nhs1     19665266    19812066   0.125 //For Oranges\nhs1     1337275     1342693    0.375 //For Peaches\n</code></pre>\n\n<p>Instead I get this</p>\n\n<pre><code>hs1     1167628 1170420 0.375\nhs1     2115898 2144159 0\nhs1     1337275 1342693 0.375\n</code></pre>\n\n<p>So I'm just getting an error where </p>\n\n<pre><code>hs1     19665266    19812066   0.125 //For Oranges\n</code></pre>\n\n<p>isn't printing</p>\n"}, {"tags": ["mysql", "performance", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1478394361, "post_id": 40444785, "comment_id": 68136514, "body": "Try setting the <code>DBI TraceLevel</code> to get a more granular view of what DBI is doing.  <a href=\"http://search.cpan.org/~timb/DBI-1.636/DBI.pm#DBI_TRACE\" rel=\"nofollow noreferrer\">search.cpan.org/~timb/DBI-1.636/DBI.pm#DBI_TRACE</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1478394414, "post_id": 40444785, "comment_id": 68136526, "body": "Also, try the query without <code>threads</code>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1478394615, "post_id": 40444785, "comment_id": 68136566, "body": "<a href=\"http://stackoverflow.com/questions/370425/can-i-use-multithreading-with-perls-dbi-and-oracle\" title=\"can i use multithreading with perls dbi and oracle\">stackoverflow.com/questions/370425/&hellip;</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1478394874, "post_id": 40444785, "comment_id": 68136610, "body": "<a href=\"http://search.cpan.org/~capttofu/DBD-mysql-4.038/lib/DBD/mysql.pm#MULTITHREADING\" rel=\"nofollow noreferrer\">search.cpan.org/~capttofu/DBD-mysql-4.038/lib/DBD/&hellip;</a>"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1478395518, "post_id": 40444785, "comment_id": 68136732, "body": "Please provide <code>SHOW CREATE TABLE</code> for each table.  There seem to be some missing composite indexes.  Don&#39;t use <code>yearweek</code>, it prevents usage of an index on <code>Signal_Date</code>.  Please use separate <code>JOINs</code>, not comma-join."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1478395554, "post_id": 40444785, "comment_id": 68136739, "body": "Which was run first?  The slow one?  If so, it spent a lot of time loading the buffer_pool; then the second one took advantage of it."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 1, "creation_date": 1478396257, "post_id": 40444785, "comment_id": 68136866, "body": "Can you get the <code>EXPLAIN SELECT</code> from each client?  (I&#39;m hoping for a difference.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478411093, "post_id": 40444785, "comment_id": 68139032, "body": "If you are sure the query is character for character identical, and the explain is identical, the next step is to  remove threading and see if that fixes it."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1479062758, "post_id": 40444785, "comment_id": 68390477, "body": "Really Perl version 5.2.4? Or 5.024?"}, {"owner": {"reputation": 51, "user_id": 7119892, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155352067788942/picture?type=large", "display_name": "Mark Switzer", "link": "https://stackoverflow.com/users/7119892/mark-switzer"}, "edited": false, "score": 0, "creation_date": 1479416874, "post_id": 40444785, "comment_id": 68561175, "body": "ActivePerl 5.24.0 Build 2400"}], "answers": [{"tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1478447939, "last_edit_date": 1478447939, "creation_date": 1478396174, "answer_id": 40445172, "question_id": 40444785, "link": "https://stackoverflow.com/questions/40444785/how-can-i-improve-the-performance-of-this-mysql-query-in-perl-the-same-query-di/40445172#40445172", "title": "How can I improve the performance of this MySQL Query in Perl, the same Query directly executed in MySQL Workbench is 1600 times faster", "body": "<p>Change the <code>yearweek</code> tests to be </p>\n\n<pre><code>WHERE Signal_date &gt;= '2016-10-22'\n  AND Signal_date  &lt; '2016-10-22' + INTERVAL 1 WEEK\n</code></pre>\n\n<p>(or whatever the correct date is.)</p>\n\n<p>And separately check test <code>t3.Signal_date</code> and <code>t2.Signal_date</code> that way.</p>\n\n<p>Then build a suitable composite index on each table -- ending with <code>Signal_date</code>.</p>\n\n<p>After seeing <code>SHOW CREATE TABLE</code>, I may have more advice.</p>\n\n<p>Back to your question...  I don't have a good answer of why one client would run soooo much faster than the other.  (My caching comment is not sufficient to explain 1600x.)  But, fixing the index should help both clients, perhaps more than 1600x.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7119892, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155352067788942/picture?type=large", "display_name": "Mark Switzer", "link": "https://stackoverflow.com/users/7119892/mark-switzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1479882343, "creation_date": 1479882343, "answer_id": 40757463, "question_id": 40444785, "link": "https://stackoverflow.com/questions/40444785/how-can-i-improve-the-performance-of-this-mysql-query-in-perl-the-same-query-di/40757463#40757463", "title": "How can I improve the performance of this MySQL Query in Perl, the same Query directly executed in MySQL Workbench is 1600 times faster", "body": "<p>I converted the SQL into a stored procedure, and I am now just using Perl to call the stored procedure.   The stored procedure doesn't just retrieve the results, it also writes the results to the next table.   I'm about to try this threaded, but the current response time is about 8 seconds for the query, and the insert to be completed.  I'm not sure what the original problem was, it may have been a cursor issue associated with fact it was threaded, or a cursor issue generally as my tests with an un-threaded procedure didn't work either.</p>\n"}], "owner": {"reputation": 51, "user_id": 7119892, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155352067788942/picture?type=large", "display_name": "Mark Switzer", "link": "https://stackoverflow.com/users/7119892/mark-switzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1479882343, "creation_date": 1478392120, "last_edit_date": 1479416937, "question_id": 40444785, "link": "https://stackoverflow.com/questions/40444785/how-can-i-improve-the-performance-of-this-mysql-query-in-perl-the-same-query-di", "title": "How can I improve the performance of this MySQL Query in Perl, the same Query directly executed in MySQL Workbench is 1600 times faster", "body": "<p>My MySQL query in Perl takes much longer than the same query in MySQL Workbench.   I am trying to improve the performance of the Perl Query to be about the same as the Workbench query.<br>\nI am running on Microsoft Windows 10 pro 64-bit, ActivePerl 5.24.0 Build 2400 64-bit, using DBI V1.636, DBD-MySQL 4.033 and MySQL V5.7 64-bit.<br>\nThere is not any resource constraint that I can find.   So InnoDB Buffer Pool \u2013 40% utilized.  Table Open Cache Efficiency of 99%.    64GB of RAM, 16 processors running at 3.4Ghz.\nMost of the queries run through this environment are acceptably fast.    There is one class of queries that runs very slowly in Perl, but reasonably quickly in Workbench.   Here is an example of the query.</p>\n\n<pre><code>SELECT t1.CSI_ID, t2.Signal_Date, t2.NextGain   \n    FROM        \n        equity as t1    \n    INNER JOIN      \n        (equity_signal AS t2, market_boundary AS t3) \nON \n(t2.equity_CSI_ID = t1.CSI_ID AND \nYearweek(t3.Signal_Date)= Yearweek(t2.Signal_Date)) \n    WHERE       \n        YearWeek(t2.Signal_Date) = 201643   \n        AND t2.currency_idCurrency = 'USD'\n        AND t1.UseEquity = 1\n        AND t1.NoData = 0\n        AND t2.Spike = 0\n        AND t1.Exchange IN ('NYSE','NASDAQ')\n        AND t2.Liquidity&gt;t3.Value \n        AND t3.Currency='USD'\n        AND t3.Market='US'\n        AND t3.Type='LQ'\n        AND t3.Threshold=500\n        AND t2.StdDev &lt; 1\n        AND (t2.CalcBool &amp; 63) = 63\n    ORDER BY (t2.Buy) \nDESC LIMIT 50\n</code></pre>\n\n<p>Here is the explain diagram for the Query, when it successfully executes.   This query in MySQL workbench took 4.047 seconds.</p>\n\n<p>T1 in the query has 29000 rows, 14 columns and is 3.5MB.\nT2 in the query has 8500000 rows, 34 columns and 1.7GB with 1.2GB Index.\nT3 in the query has 54000 rows, 7 columns and is 3.5 MB   </p>\n\n<p><a href=\"https://i.stack.imgur.com/nebdQ.png\" rel=\"nofollow noreferrer\">Explain Statement Results from WorkBench</a></p>\n\n<p>The explain statement results when executed through Perl are as follows, which is the same tabular result I just received from Workbench:<br>\n1 SIMPLE t3  ref PRIMARY PRIMARY 38 const 27354 0.10 Using where; Using temporary; Using filesort<br>\n1 SIMPLE t1  ALL PRIMARY    29304 0.20 Using where; Using join buffer (Block Nested Loop)<br>\n1 SIMPLE t2  ref PRIMARY,Liquidity,Buy,StdDev PRIMARY 4 investing2.t1.CSI_ID 92 0.56 Using where  </p>\n\n<p>During execution of the Query, there are no concurrent or competing processes of my creation accessing or using the tables in question.\nWhen I run the same query in Perl, I have MySQL using 13% of the available CPU (across 16 CPU\u2019s) for over 100 minutes.  </p>\n\n<p>Case 1, Portfolio = 11 YearWeek = 201644<br>\nPortDatah Start Sat Nov  5 14:47:00 2016  End Sat Nov  5 16:33:23 2016<br>\nPortfolio = 11 YearWeek = 201644<br>\nCase 1, Portfolio = 11 YearWeek = 201643<br>\nPortDatah Start Sat Nov  5 16:33:23 2016  End Sat Nov  5 18:19:47 2016  </p>\n\n<p>So running times of 106 minutes and 23 seconds the first time, and 106 minutes and 24 seconds for the second run.\nOn an entirely different platform, ( MySQL 5.5, 32 GB RAM, Perl 5.16.3) the same code works with comparable performance to the Workbench observed results.<br>\nHere are what I think are the relevant the code snippets.</p>\n\n<pre><code>#!D:\\perl64\\bin\nuse strict;\nuse warnings;\nuse DBI;\nuse List::Util qw(first);\nuse threads;\nuse Date::Simple (':all');\nuse Switch::Plain;\nmy @Portfolio;\n$Portfolio[11]=\"SELECT t1.CSI_ID, t2.Signal_Date, t2.NextGain   \n    FROM        \n        equity as t1    \n    INNER JOIN      \n        (equity_signal AS t2, market_boundary AS t3) \nON (t2.equity_CSI_ID = t1.CSI_ID \nAND Yearweek(t3.Signal_Date)=Yearweek(t2.Signal_Date))  \n    WHERE   \n        YearWeek(t2.Signal_Date) = 201643   \n        AND t2.currency_idCurrency = 'USD'\n        AND t1.UseEquity = 1\n        AND t1.NoData = 0\n        AND t2.Spike = 0\n        AND t1.Exchange IN ('NYSE','NASDAQ')\n        AND t2.Liquidity&gt;t3.Value \n        AND t3.Currency='USD'\n        AND t3.Market='US'\n        AND t3.Type='LQ'\n        AND t3.Threshold=500\n        AND t2.StdDev &lt; 1\n        AND (t2.CalcBool &amp; 63) = 63\n    ORDER BY (t2.Buy) \nDESC LIMIT 50\";\nmy $thread11 = threads-&gt;create(\\&amp;PortfolioA,11,$Portfolio[11]);\nmy $return = $thread11-&gt;join();\n\nsub PortfolioA {\nmy $PortID = shift;\n    my $PortSQL = shift;\n    my $PortDatah = $dbh-&gt;prepare($PortSQL)\n        or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\n$Starttime=localtime();\n    $PortDatah-&gt;execute($YearWeek)\n        or die \"Couldn't execute statement: \" . $dbh-&gt;errstr;\n    $Endtime=localtime();\n    print \"PortDatah Start $Starttime  End $Endtime \\n\";    \n</code></pre>\n\n<p>I have looked for errors in the logs, I have tried to tune the MySQL Server.   So InnoDB Buffer Pool is 12 GB, the Join Buffer Size is 4GB, Sort Buffer Size is 4GB, there are 8 InnoDB page cleaners, Query Cache Size is 2GB.  I added an Index on Signal_Date for Equity_Signal which is the largest table in the database.\nI am considering trying to install previous versions of Perl and MySQL to see if that resolves things.   I just don\u2019t see what I am missing.</p>\n\n<p>Here is the results from a single query using trace level 4. </p>\n\n<pre><code>    DBI::st=HASH(0x3081000) trace level set to 0x0/4 (DBI @ 0x0/0) in DBI 1.636-ithread (pid 10776)\n-&gt; execute for DBD::mysql::st (DBI::st=HASH(0x3081318)~0x3081000 '201644') thr#26278d8\nCalled: dbd_bind_ph\n-&gt; dbd_st_execute for 03081360\n&gt;- dbd_st_free_result_sets\n&lt;- dbd_st_free_result_sets RC -1\n&lt;- dbd_st_free_result_sets\nmysql_st_internal_execute MYSQL_VERSION_ID 50172\n&gt;parse_params statement SELECT t1.CSI_ID, t2.Signal_Date, t2.NextGain   \n                        FROM        \n                            equity as t1    \n                        INNER JOIN      \n                            (equity_signal AS t2, market_boundary AS t3) ON (t2.equity_CSI_ID = t1.CSI_ID AND Yearweek(t3.Signal_Date)=Yearweek(t2.Signal_Date))    \n                        WHERE       \n                            YearWeek(t2.Signal_Date) = ?    \n                            AND t2.currency_idCurrency = 'USD'\n                            AND t1.UseEquity = 1\n                            AND t1.NoData = 0\n                            AND t2.Spike = 0\n                            AND t1.Exchange IN ('NYSE','NASDAQ')\n                            AND t2.Liquidity&gt;t3.Value \n                            AND t3.Currency='USD'\n                            AND t3.Market='US'\n                            AND t3.Type='LQ'\n                            AND t3.Threshold=500\n                            AND t2.StdDev &lt; 1\n                            AND (t2.CalcBool &amp; 63) = 63\n                        ORDER BY t2.Buy DESC        \n                        LIMIT 50\nBinding parameters: SELECT t1.CSI_ID, t2.Signal_Date, t2.NextGain   \n                        FROM        \n                            equity as t1    \n                        INNER JOIN      \n                            (equity_signal AS t2, market_boundary AS t3) ON (t2.equity_CSI_ID = t1.CSI_ID AND Yearweek(t3.Signal_Date)=Yearweek(t2.Signal_Date))    \n                        WHERE       \n                            YearWeek(t2.Signal_Date) = '201644' \n                            AND t2.currency_idCurrency = 'USD'\n                            AND t1.UseEquity = 1\n                            AND t1.NoData = 0\n                            AND t2.Spike = 0\n                            AND t1.Exchange IN ('NYSE','NASDAQ')\n                            AND t2.Liquidity&gt;t3.Value \n                            AND t3.Currency='USD'\n                            AND t3.Market='US'\n                            AND t3.Type='LQ'\n                            AND t3.Threshold=500\n                            AND t2.StdDev &lt; 1\n                            AND (t2.CalcBool &amp; 63) = 63\n                        ORDER BY t2.Buy DESC        \n                        LIMIT 50\nDBI::st=HASH(0x2f71530) trace level set to 0x0/4 (DBI @ 0x0/0) in DBI 1.636-ithread (pid 11064)\n-&gt; execute for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530 '201644') thr#25178d8\nCalled: dbd_bind_ph\n-&gt; dbd_st_execute for 02f71890\n&gt;- dbd_st_free_result_sets\n&lt;- dbd_st_free_result_sets RC -1\n&lt;- dbd_st_free_result_sets\nmysql_st_internal_execute MYSQL_VERSION_ID 50172\n&gt;parse_params statement SELECT t1.CSI_ID, t2.Signal_Date, t2.NextGain   \n                        FROM        \n                            equity as t1    \n                        INNER JOIN      \n                            (equity_signal AS t2, market_boundary AS t3) ON (t2.equity_CSI_ID = t1.CSI_ID AND Yearweek(t3.Signal_Date)=Yearweek(t2.Signal_Date))    \n                        WHERE       \n                            YearWeek(t2.Signal_Date) = ?    \n                            AND t2.currency_idCurrency = 'USD'\n                            AND t1.UseEquity = 1\n                            AND t1.NoData = 0\n                            AND t2.Spike = 0\n                            AND t1.Exchange IN ('NYSE','NASDAQ')\n                            AND t2.Liquidity&gt;t3.Value \n                            AND t3.Currency='USD'\n                            AND t3.Market='US'\n                            AND t3.Type='LQ'\n                            AND t3.Threshold=500\n                            AND t2.StdDev &lt; 1\n                            AND (t2.CalcBool &amp; 63) = 63\n                        ORDER BY t2.Buy DESC        \n                        LIMIT 50\nBinding parameters: SELECT t1.CSI_ID, t2.Signal_Date, t2.NextGain   \n                        FROM        \n                            equity as t1    \n                        INNER JOIN      \n                            (equity_signal AS t2, market_boundary AS t3) ON (t2.equity_CSI_ID = t1.CSI_ID AND Yearweek(t3.Signal_Date)=Yearweek(t2.Signal_Date))    \n                        WHERE       \n                            YearWeek(t2.Signal_Date) = '201644' \n                            AND t2.currency_idCurrency = 'USD'\n                            AND t1.UseEquity = 1\n                            AND t1.NoData = 0\n                            AND t2.Spike = 0\n                            AND t1.Exchange IN ('NYSE','NASDAQ')\n                            AND t2.Liquidity&gt;t3.Value \n                            AND t3.Currency='USD'\n                            AND t3.Market='US'\n                            AND t3.Type='LQ'\n                            AND t3.Threshold=500\n                            AND t2.StdDev &lt; 1\n                            AND (t2.CalcBool &amp; 63) = 63\n                        ORDER BY t2.Buy DESC        \n                        LIMIT 50\n &lt;- dbd_st_execute returning imp_sth-&gt;row_num 19\n    &lt;- execute= ( 19 ) [1 items] at C:/workspace/DIY Investing/CSI/I2Portfolio1debug.pl line 873 via  at C:/workspace/DIY Investing/CSI/I2Portfolio1debug.pl line 700\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=19\n    dbd_st_fetch for 02f71890, currow= 1\n    &lt;- dbd_st_fetch, 3 cols\n    &lt;- fetchrow_array= ( '9825' '2016-11-04' '0' ) [3 items] row1 at C:/workspace/DIY Investing/CSI/I2Portfolio1debug.pl line 878 via  at C:/workspace/DIY Investing/CSI/I2Portfolio1debug.pl line 700\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 2\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 3\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 4\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 5\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 6\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 7\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 8\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 9\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 10\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 11\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 12\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 13\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 14\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 15\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 16\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 17\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 18\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 19\n    &lt;- dbd_st_fetch, 3 cols\n    -&gt; fetchrow_array for DBD::mysql::st (DBI::st=HASH(0x2f71848)~0x2f71530) thr#25178d8\n    -&gt; dbd_st_fetch\n        dbd_st_fetch for 02f71890, chopblanks 0\n    dbd_st_fetch result set details\n    imp_sth-&gt;result=03a71110\n    mysql_num_fields=3\n    mysql_num_rows=19\n    mysql_affected_rows=1\n    dbd_st_fetch for 02f71890, currow= 20\n    dbd_st_fetch, no more rows to fetch\n--&gt; dbd_st_finish\n    &gt;- dbd_st_free_result_sets\n    &lt;- dbd_st_free_result_sets RC -1\n    &lt;- dbd_st_free_result_sets\n</code></pre>\n\n<p>I'll try to re-work the queries to avoid Yearweek (I was using Yearweek, because the data is weekly, but sometimes with Friday as the last day and sometimes as Thursday, and I want to compare weeks between markets - just not in this query example), but I should be able to use Interval as well.   Also, I'm thinking of trying this whole thing in Python or Ruby, as opposed to installing back-level products.</p>\n\n<p>Here are the Create Table Entries for each table:</p>\n\n<p>t1 - equity</p>\n\n<pre><code>CREATE TABLE `equity` (\n  `CSI_ID` int(11) NOT NULL,\n  `Symbol` varchar(45) NOT NULL,\n  `EquityName` varchar(45) NOT NULL,\n  `Exchange` varchar(45) NOT NULL,\n  `currency_idCurrency` varchar(6) NOT NULL,\n  `PriceForm` int(11) DEFAULT NULL,\n  `StartDate` date DEFAULT NULL,\n  `LastUpdate` date DEFAULT NULL,\n  `industry_idSector` varchar(10) NOT NULL,\n  `industry_idIndustry` varchar(10) NOT NULL,\n  `NoData` tinyint(1) NOT NULL DEFAULT '0',\n  `UseEquity` tinyint(1) NOT NULL DEFAULT '1',\n  `Category` varchar(10) DEFAULT NULL,\n  `OutShares` float DEFAULT NULL,\n  PRIMARY KEY (`CSI_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n</code></pre>\n\n<p>t2 equity_signal (I'm not showing the unused columns in this table)</p>\n\n<pre><code>CREATE TABLE `equity_signal` (\n  `equity_CSI_ID` int(11) NOT NULL,\n  `Signal_Date` date NOT NULL,\n  `currency_idCurrency` varchar(6) NOT NULL,\n  `Signal_Sequence` int(11) NOT NULL,\n  `Adjusted_Close` float NOT NULL,\n  `Liquidity` float NOT NULL,\n  `Gain` float NOT NULL,\n  `NextGain` float DEFAULT NULL,\n  `StdDev` double NOT NULL,\n  `Spike` tinyint(1) NOT NULL,\n  `Buy` float NOT NULL,\n  `CalcBool` int(11) NOT NULL,\n  PRIMARY KEY (`equity_CSI_ID`,`Signal_Date`,`currency_idCurrency`),\n  KEY `Liquid` (`currency_idCurrency`,`Signal_Date`,`Liquidity`),\n  KEY `Buy` (`currency_idCurrency`,`Signal_Date`,`Buy`),\n  KEY `STD` (`currency_idCurrency`,`Signal_Date`,`StdDev`),\n  KEY `Signal_Date` (`Signal_Date`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n</code></pre>\n\n<p>And t3 as market_boundary</p>\n\n<pre><code>CREATE TABLE `market_boundary` (\n  `Market` varchar(12) NOT NULL,\n  `Signal_Date` date NOT NULL,\n  `Currency` varchar(6) NOT NULL,\n  `Type` varchar(6) NOT NULL,\n  `Threshold` int(11) NOT NULL,\n  `Percent` float NOT NULL,\n  `Value` float NOT NULL,\n  PRIMARY KEY (`Market`,`Signal_Date`,`Currency`,`Type`,`Threshold`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n</code></pre>\n"}, {"tags": ["perl", "if-statement", "math"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1478387183, "post_id": 40444187, "comment_id": 68134886, "body": "You&#39;ve got an <code>else</code> with no <code>if</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6032623"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1478387252, "post_id": 40444187, "comment_id": 68134905, "body": "I am new to perl I am use to python can you send me a tutorial link to watch and learn how its done"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1478387262, "post_id": 40444187, "comment_id": 68134908, "body": "a semi-colon is missing after <code>print(&quot;$answer&quot;)</code>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1478387306, "post_id": 40444187, "comment_id": 68134925, "body": "@CasimiretHippolyte Not necessarily, since it&#39;s the last instruction of the block."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1478387366, "post_id": 40444187, "comment_id": 68134944, "body": "I haven&#39;t seen the missing <code>if (...){</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6032623"}, "edited": false, "score": 0, "creation_date": 1478387406, "post_id": 40444187, "comment_id": 68134952, "body": "Casimir et Hippolyte I noticed I just put a semi-colon there but that did not help with the issue."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1478387438, "post_id": 40444187, "comment_id": 68134956, "body": "@AriesFangz There are plenty of Perl tutorials you can find online. (have a look <a href=\"http://stackoverflow.com/tags/perl/info\">here</a>). You should really go through the basics. (By the way, I&#39;m pretty sure you can&#39;t put an <code>else</code> without an <code>if</code> before in python either)"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1478387740, "post_id": 40444187, "comment_id": 68135029, "body": "@AriesFangz What you <i>might</i> have meant is something like <code>if (looks_like_number($num1) and looks_like_number($num2)){$answer=$num1+$num2;print&quot;$answer&quot;&zwnj;&#8203;}else{...}</code> (<code>looks_like_number</code> is in <a href=\"http://perldoc.perl.org/Scalar/Util.html\" rel=\"nofollow noreferrer\"><code>Scalar::Utils</code></a> core module). But go through some book, tutorial or something first anyway!"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 5, "creation_date": 1478387976, "post_id": 40444187, "comment_id": 68135077, "body": "@AriesFangz since you don&#39;t really know Perl yet, you probably won&#39;t understand why, but always start your perl programs with <code>use strict; use warnings;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6032623"}, "edited": false, "score": 0, "creation_date": 1478388619, "post_id": 40444187, "comment_id": 68135223, "body": "Really? okay thanks :D"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1478416851, "post_id": 40444187, "comment_id": 68139965, "body": "@CasimiretHippolyte The semi-colon after <code>print(&quot;$answer&quot;)</code> is optional as it&#39;s the last statement in a block. Obviously, it&#39;s a very silly idea to omit it, but that&#39;s not going to stop the code from working."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6032623"}, "edited": false, "score": 0, "creation_date": 1478613444, "post_id": 40475705, "comment_id": 68221188, "body": "so in python example you do while True: you must do 4 white spaces for the code to work but in perl this is not needed"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 1, "creation_date": 1478619805, "post_id": 40475705, "comment_id": 68225787, "body": "Exactly. Technically, you can strip out all white space in a perl script and, so long as the braces and semi-colons are in the right places, the script will run just fine. Not that anyone would actually do that, of course. :) There&#39;s actually a command-line script called <a href=\"https://metacpan.org/pod/distribution/Perl-Tidy/bin/perltidy\" rel=\"nofollow noreferrer\">perltidy</a> whose only job is to format perl code so it&#39;s easier to read. It has some customization options, but I&#39;ve found the default setting work well."}], "tags": [], "owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "is_accepted": false, "score": 1, "last_activity_date": 1478557155, "creation_date": 1478557155, "answer_id": 40475705, "question_id": 40444187, "link": "https://stackoverflow.com/questions/40444187/perl-else-error/40475705#40475705", "title": "Perl else error", "body": "<p>Since you're new to Perl, I recommend you add strict and warnings at the top of your scripts. This will help identify common problems and potentially dangerous code.</p>\n\n<p>The main problem with your code is that you've appended the else statement to your subroutine. Here is an example of your code as I think you intended it to be:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Scalar::Util qw(looks_like_number);\n\nsub main {\n\n    print 'First :'; \n    my $num1 = &lt;STDIN&gt;;\n\n    print 'Second: ';\n    my $num2 = &lt;STDIN&gt;;\n\n    if( looks_like_number($num1) &amp;&amp; looks_like_number($num2) ) {\n\n        my $answer = $num1 + $num2;\n        print \"$answer\\n\";\n    }\n    else {\n        die 'You have entered invalid arguments.';\n    }\n}\n\nmain();\n</code></pre>\n\n<p>There are a few things I should note here about the differences between Perl and Python that I think will help you understand Perl better.</p>\n\n<ol>\n<li><p>Unlike Python, Perl doesn't care about white space. It uses curly braces and semi-colons to indicate the end of blocks and statements and will happily ignore any white space that isn't in quotes. </p></li>\n<li><p>The else statement appended to the subroutine won't work because Perl isn't designed to evaluate code blocks that way. A subroutine is simply a named code block that can be called at any other point in the script. Any error handling will need to be done inside of the subroutine rather than to it.</p></li>\n<li><p>Perl is very context-sensitive and doesn't make a solid distinction between strings and integers in variables. If you write $var_a = 1, Perl will read it as an integer. $var_b = '1', it will read it as a string. But, you can still add them together: $var_c = ($var_a + $var_b), and Perl will make $var_c = 2.</p>\n\n<p>This is another reason the else statement would not work as you've written it. Python would throw an error if you try to add non-integers, but Perl will just figure out how to combine them, and give you the result. If you try to add a letter and a number, Perl still won't fail, but it will warn you if you put \"use warnings;\" at the top of your script.</p>\n\n<p>In the example, and as Dada mentioned, you can use the looks_like_number() method from the Scalar::Utils module to evaluate the variables as you had intended.</p></li>\n<li><p>Apart from the syntax, if/else statements work the same way in Perl as in Python. The else-if is slightly different as is has an extra s:</p>\n\n<p>if (condition) {\n    ...\n}\nelsif (other condition) {\n    ...\n}\nelse {\n    ...\n}</p></li>\n<li><p>In Perl, it's good practice to assign lexical scope to variables using the <strong>my</strong> function. Since Perl is so context-sensitive, this can help prevent unexpected behavior when moving between different scopes.</p></li>\n<li><p>Single- and double-quotes have different uses in Perl. Single-quotes are read literally and double-quotes are interpolated, so if you want to combine variables and text together, you can skip concatenating the strings and just do: <strong>print \"Got variable: $var\\n\";</strong></p></li>\n<li><p>Lastly, note that I added parentheses after the main subroutine call. This is another best practice to make it clearer that you are calling a subroutine as opposed to it being a bare word or a bad variable name.</p></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6032623"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478557155, "creation_date": 1478387030, "question_id": 40444187, "link": "https://stackoverflow.com/questions/40444187/perl-else-error", "title": "Perl else error", "body": "<p>Hello I am new to programming in perl I am trying to make a number adder (math) but it gives me 1 error here's my code:</p>\n\n<pre><code>sub main {\n    print(\"First: \");\n    $num1 = &lt;STDIN&gt;;\n    print(\"Second: \");\n    $num2 = &lt;STDIN&gt;;\n\n    $answer = $num1 + $num2;\n    print(\"$answer\")\n} else {\n    print(\"You have entered invalid arguments.\")\n}\nmain;\n</code></pre>\n\n<p>now obviously its not done but I get an error on ONLY else here is the error:</p>\n\n<pre><code>C:\\Users\\aries\\Desktop&gt;\"Second perl.pl\"\nsyntax error at C:\\Users\\aries\\Desktop\\Second perl.pl line 9, near \"} else\"\nExecution of C:\\Users\\aries\\Desktop\\Second perl.pl aborted due to compilation errors.\n</code></pre>\n\n<p>please help (also I tried googling stuff still error)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1478367682, "post_id": 40440823, "comment_id": 68129293, "body": "What happens if &quot;j12345&quot; is in the mix? What if we added &quot;bbbb1&quot; and &quot;bbbb2&quot;? Is it looking for the longest prefix between any two strings? Or is it the LCP for strings that have at least 1 in common?"}, {"owner": {"reputation": 1792, "user_id": 3068500, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0cf641fb92b7fd2625f7690aac7f424c?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit2007", "link": "https://stackoverflow.com/users/3068500/gambit2007"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478369391, "post_id": 40440823, "comment_id": 68129803, "body": "The latter, yes, sorry if it wasn&#39;t clear."}, {"owner": {"reputation": 1792, "user_id": 3068500, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0cf641fb92b7fd2625f7690aac7f424c?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit2007", "link": "https://stackoverflow.com/users/3068500/gambit2007"}, "edited": false, "score": 0, "creation_date": 1478369677, "post_id": 40440823, "comment_id": 68129886, "body": "It could be anything"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1478378938, "post_id": 40441193, "comment_id": 68132631, "body": "Fails for <code>qw( abcd abce xxy xxz )</code>. (Prints <code>xx</code> instead of <code>abc</code>.)"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1478383234, "post_id": 40441193, "comment_id": 68133905, "body": "This only works for prefixes that are runs of the same letters. If you had <code>(aaBGFB, aaaJJJJ, interspecies, interstellar)</code> for example, the longest common prefix is <code>inter</code>"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 0, "last_activity_date": 1478367408, "last_edit_date": 1478367408, "creation_date": 1478367091, "answer_id": 40441193, "question_id": 40440823, "link": "https://stackoverflow.com/questions/40440823/perl-longest-common-prefix-of-2-or-more-strings/40441193#40441193", "title": "Perl - longest common prefix of 2 or more strings?", "body": "<p>One way would be to store the information in a hash. In this example, I set the hash key to the length of each prefix, and the value being the actual prefix found.</p>\n\n<p>Note that this method overwrites a key and value if a same-length prefix exists, so you'll always get the <em>last</em> prefix found of the longest length (<code>sort()</code> takes care of finding the longest one).</p>\n\n<p>The regex says \"find the first character in the string and capture it, and use that char found in a second capture, and capture as many as there are\". This string is then <code>join()</code>ed into a scalar and put into the hash.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy %prefixes;\n\nwhile (&lt;DATA&gt;){\n    my $prefix = join '', /^(.)(\\1+)/;\n    $prefixes{length $prefix} = $prefix; \n}\n\nmy $longest = (sort {$b &lt;=&gt; $a} keys %prefixes)[0];\nprint \"$prefixes{$longest}\\n\";\n\n__DATA__\naaBGFB\naaaJJJJ\njjfkBBB\naaaHGHG\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>aaa\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1478384027, "last_edit_date": 1478384027, "creation_date": 1478380316, "answer_id": 40443251, "question_id": 40440823, "link": "https://stackoverflow.com/questions/40440823/perl-longest-common-prefix-of-2-or-more-strings/40443251#40443251", "title": "Perl - longest common prefix of 2 or more strings?", "body": "<p>I'd use a modified <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">trie</a>. </p>\n\n<p>Normally, one could use the following to add to a trie:</p>\n\n<pre><code>sub add {\n    my $p = \\shift;\n    my $s = shift;\n    $p = \\( $$p-&gt;{$_} ) for split(//, $s);\n    $$p-&gt;{''} = 1;\n}\n</code></pre>\n\n<p>But we need two modifications:</p>\n\n<ul>\n<li>All prefixes of a string must be added when adding a string. For example, adding <code>abc</code> should also add <code>a</code> and <code>ab</code> to the trie.</li>\n<li>When adding to the trie, we want to return the length of previously-existing part of the path taken.</li>\n</ul>\n\n<p>So we need:</p>\n\n<pre><code>sub add {\n    my $p = \\shift;\n    my $s = shift;\n\n    my $cp_len = 0;\n    for (split(//, $s)) {\n       $p = \\( $$p-&gt;{$_} );\n       ++$cp_len if $$p-&gt;{$_}{''};\n       $$p-&gt;{''} = 1;\n    }\n\n    return $cp_len;\n}\n</code></pre>\n\n<p>Combine (an optimized version of) this with an algorithm to find the longest strings in a list and with an algorithm to remove duplicate strings from a list to get the following solution:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nsub add {\n    my $p = \\shift;\n    my $s = shift;\n\n    my $cp_len = 0;\n    for (split(//, $s)) {\n       ++$cp_len if exists($$p-&gt;{$_});\n       $p = \\( $$p-&gt;{$_} );\n    }\n\n    return $cp_len;\n}\n\nmy $t;\nmy $lcp_len = 0;  # lcp = longest common prefix\nmy %lcps;\nwhile (&lt;&gt;) {\n   chomp;\n   my $cp_len = add($t, $_)\n      or next;\n\n   if ($cp_len &gt;= $lcp_len) {\n      if ($cp_len &gt; $lcp_len) {\n         $lcp_len = $cp_len;\n         %lcps = ();\n      }\n\n      $lcps{ substr($_, 0, $cp_len) } = 1;\n   }\n}\n\nmy @lcps = sort keys %lcps;\n\nif (@lcps) {\n   say \"Longest common prefix(es): @lcps\";\n} else {\n   say \"No common prefix\";\n}\n</code></pre>\n\n<p>Data:</p>\n\n<pre><code>abc\nabc\nabcd\nabcde\nhijklx\nhijkly\nmnopqx\nmnopqy\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Longest common prefix(es): hijkl mnopq\n</code></pre>\n\n<p>The time taken by the above is proportional to the number of input characters.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1478389600, "last_edit_date": 1478389600, "creation_date": 1478386330, "answer_id": 40444090, "question_id": 40440823, "link": "https://stackoverflow.com/questions/40440823/perl-longest-common-prefix-of-2-or-more-strings/40444090#40444090", "title": "Perl - longest common prefix of 2 or more strings?", "body": "<p>You can keep a hash of an array of words keyed by the first character. By definition, if you have words starting with the same letter, those words share at least a one character common prefix of that one letter. Then reduce to the single longest prefix by stepping through the hash by character:</p>\n\n<pre><code>use strict; use warnings;\nsub lcp {\n    (join(\"\\0\", @_) =~ /^ ([^\\0]*) [^\\0]* (?:\\0 \\1 [^\\0]*)* $/sx)[0];\n}\n\nmy %HoA;\nmy $longest='';\n\nwhile (my $line=&lt;DATA&gt;){\n    $line =~ s/^\\s+|\\s+$//g ;\n    push @{ $HoA{substr $line, 0, 1} }, $line if $line=~/^[a-zA-Z]/;\n}\n\nfor my $key ( sort (keys %HoA )) {\n    if (scalar @{ $HoA{$key} } &gt; 1){\n        my $lon=lcp(@{ $HoA{$key} });\n        my $s = join ', ', map { qq/\"$_\"/ } @{ $HoA{$key} };\n        print \"lcp: \\\"$lon\\\" for ($s)\\n\";\n        if (length($lon) &gt; length($longest)) {\n            $longest=$lon;\n        }            \n    }\n    else{\n        print \"$key: no common prefix\\n\";\n    }\n}\nprint \"\\nlongest common prefix is \\\"$longest\\\"\\n\";\n\n__DATA__\naardvark\naaaBGFB\naaaJJJJ\njjfkBBB\naaaHGHG\ninterspecies\ninterstellar\ninterstate   \n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>lcp: \"aa\" for (\"aardvark\", \"aaaBGFB\", \"aaaJJJJ\", \"aaaHGHG\")\nlcp: \"inters\" for (\"interspecies\", \"interstellar\", \"interstate\")\nj: no common prefix\n\nlongest common prefix is \"inters\"\n</code></pre>\n"}], "owner": {"reputation": 1792, "user_id": 3068500, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0cf641fb92b7fd2625f7690aac7f424c?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit2007", "link": "https://stackoverflow.com/users/3068500/gambit2007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 40441193, "answer_count": 3, "score": 0, "last_activity_date": 1478389600, "creation_date": 1478364895, "question_id": 40440823, "link": "https://stackoverflow.com/questions/40440823/perl-longest-common-prefix-of-2-or-more-strings", "title": "Perl - longest common prefix of 2 or more strings?", "body": "<p>How can i create a Perl subroutine which would take in an array and find the longest common prefix for 2 or more of its elements? (strings)</p>\n\n<p>I have this code:</p>\n\n<pre><code>sub longest_common_prefix {\n    $prefix = shift;\n    for (@_) {\n        chop $prefix while (! /^\\Q$prefix\\E/);\n        }\n    return $prefix;\n}\n</code></pre>\n\n<p>But it only works if you are looking for the longest common prefix of <strong>all</strong> strings.</p>\n\n<p>For example, if i pass an array with the following strings:</p>\n\n<pre><code>aaaBGFB\naaaJJJJ\njjfkBBB\naaaHGHG\n</code></pre>\n\n<p>I want it to return <code>aaa</code> as the answer.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1478347283, "post_id": 40437024, "comment_id": 68123180, "body": "It would be useful to show what error you are getting."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1478360143, "creation_date": 1478360143, "answer_id": 40440016, "question_id": 40437024, "link": "https://stackoverflow.com/questions/40437024/perl-installing-cpan-appcpanminus/40440016#40440016", "title": "Perl installing cpan App::cpanminus", "body": "<p>From what I can tell, this isn't an <code>App::cpanminus</code> issue, you're asking how to reconfigure <code>cpan</code> itself. Here's how:</p>\n\n<pre><code>perl -MCPAN -e shell\n\ncpan&gt; o conf init\n</code></pre>\n\n<p>...make your changes, and your config will automatically be saved. If you don't get your desired results if you ran with the \"automatic\" run set to yes, say \"no\" to this question:</p>\n\n<pre><code>Would you like to configure as much as possible automatically?\n</code></pre>\n\n<p>...and then retry installing <code>App::cpanminus</code></p>\n"}], "owner": {"reputation": 5535, "user_id": 1173638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Mq0Io.gif?s=128&g=1", "display_name": "Adder", "link": "https://stackoverflow.com/users/1173638/adder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 40440016, "answer_count": 1, "score": 0, "last_activity_date": 1478360143, "creation_date": 1478340898, "question_id": 40437024, "link": "https://stackoverflow.com/questions/40437024/perl-installing-cpan-appcpanminus", "title": "Perl installing cpan App::cpanminus", "body": "<p>I choose the wrong \"make\" executable when running cpan App::cpanminus for the first time. Now it is stuck at some error with the make file. I remember the configuration telling I can re-run the configuration with a command. Unfortunately I forget the command. Help? Where is the configuration stored, I am using git for windows mingw32.</p>\n"}, {"tags": ["perl", "html-parsing"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1478337124, "post_id": 40436478, "comment_id": 68120449, "body": "I fear the module doesn&#39;t support HTML5."}, {"owner": {"reputation": 1579, "user_id": 2251689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KFFuV.jpg?s=128&g=1", "display_name": "atefth", "link": "https://stackoverflow.com/users/2251689/atefth"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1478337209, "post_id": 40436478, "comment_id": 68120470, "body": "@choroba noooohh!!!!! What are options then?? X("}], "answers": [{"comments": [{"owner": {"reputation": 1579, "user_id": 2251689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KFFuV.jpg?s=128&g=1", "display_name": "atefth", "link": "https://stackoverflow.com/users/2251689/atefth"}, "edited": false, "score": 0, "creation_date": 1478342427, "post_id": 40436682, "comment_id": 68121750, "body": "So the <code>@src</code> array is supposed to hold all the audio tags&#39; <code>src</code> attribute?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1579, "user_id": 2251689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KFFuV.jpg?s=128&g=1", "display_name": "atefth", "link": "https://stackoverflow.com/users/2251689/atefth"}, "edited": false, "score": 1, "creation_date": 1478343002, "post_id": 40436682, "comment_id": 68121886, "body": "@atefth: exactly. Works for me with your example."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1478338304, "creation_date": 1478338304, "answer_id": 40436682, "question_id": 40436478, "link": "https://stackoverflow.com/questions/40436478/parse-html-audio-tag-using-htmltokeparser/40436682#40436682", "title": "Parse Html Audio Tag Using HTML::TokeParser", "body": "<p>I'm not familiar with HTML::Token but <a href=\"http://mojolicious.org/perldoc/Mojo/DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> from <a href=\"http://mojolicious.org/\" rel=\"nofollow noreferrer\">Mojolicious</a> can be used to easily find and extract the links with a familiar CSS syntax:</p>\n\n<pre><code>use Mojo::DOM;\nmy $html = '&lt;body&gt; ... ';\nmy $dom = Mojo::DOM-&gt;new($html);\nmy @src = map { $_-&gt;{src} }\n    $dom-&gt;find('audio[onplaying] source[src]')-&gt;each;\n</code></pre>\n\n<p>And you can also combine this with <a href=\"http://mojolicious.org/perldoc/Mojo/UserAgent\" rel=\"nofollow noreferrer\">Mojo::UserAgent</a> if you need to grab the HTML files or the audio files from the network.</p>\n"}], "owner": {"reputation": 1579, "user_id": 2251689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KFFuV.jpg?s=128&g=1", "display_name": "atefth", "link": "https://stackoverflow.com/users/2251689/atefth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 40436682, "answer_count": 1, "score": 1, "last_activity_date": 1478338304, "creation_date": 1478336761, "last_edit_date": 1478337123, "question_id": 40436478, "link": "https://stackoverflow.com/questions/40436478/parse-html-audio-tag-using-htmltokeparser", "title": "Parse Html Audio Tag Using HTML::TokeParser", "body": "<blockquote>\n  <p>I am trying to write a <em>spider</em> in perl which will parse all audio tags in a domain and attempt to download the respective <code>audio/mpeg</code> content from each audio tag found.</p>\n</blockquote>\n\n<p>Below is a snippet from my code which uses the <code>HTML::TokeParser</code> to parse html in order to extract links from <code>a</code> tags:</p>\n\n<pre><code>my($response, $base, $stream, $pageURL, $tag, $url);\n\n$response = 'http://example.com/page-with-some-audio-content';\n$base = URI-&gt;new( $response-&gt;base )-&gt;canonical;\n\n$stream = HTML::TokeParser-&gt;new( $response-&gt;content_ref );\n$pageURL = URI-&gt;new( $response-&gt;request-&gt;uri );\n\nwhile($tag = $stream-&gt;get_tag('a')) {\n    next unless defined($url = $tag-&gt;[1]{'href'});\n    print $url.\"\\n\";\n}\n</code></pre>\n\n<blockquote>\n  <p>The above code snippet extracts all links from a given html page. This is used in a loop along with a hash of urls to crawl all pages in a given domain.</p>\n</blockquote>\n\n<p>Below is another snippet almost entirely the same as the first except that I'm trying to extract <strong><code>audio</code> tags</strong> <em>instead of</em> <code>a</code> tags:</p>\n\n<pre><code>my($response, $base, $stream, $pageURL, $tag, $url);\n\n$response = 'http://example.com/page-with-some-audio-content';\n$base = URI-&gt;new( $response-&gt;base )-&gt;canonical;\n\n$stream = HTML::TokeParser-&gt;new( $response-&gt;content_ref );\n$pageURL = URI-&gt;new( $response-&gt;request-&gt;uri );\n\nwhile($tag = $stream-&gt;get_tag('audio')) {\n    next unless defined($url = $tag-&gt;[1]{'onplaying'});\n    print $url.\"\\n\";\n}\n</code></pre>\n\n<p>For some reason, no <code>audio</code> tags are being detected. Is there something that I'm missing?</p>\n\n<hr>\n\n<blockquote>\n  <p>Reading the <a href=\"http://search.cpan.org/~gaas/HTML-Parser-3.72/lib/HTML/TokeParser.pm\" rel=\"nofollow noreferrer\">HTML::TokeParser</a> documentation I figure that I can not extract attributes of nested html elements.</p>\n</blockquote>\n\n<p>Consider this markup below:</p>\n\n<pre><code>&lt;audio onplaying=\"podPress_html5_count('http://www.example.com/mp3/Some Mp3 File.mp3', this.id)\"&gt;\n   &lt;source src=\"http://www.example.com/mp3/Some%20Mp3%20File.mp3\"&gt;\n&lt;/audio&gt;\n</code></pre>\n\n<p>I want to parse the entire html to extract only the <code>src</code> attributes of all <code>audio</code> tags found. Hence, if the html looked something like this:</p>\n\n<pre><code>  &lt;body&gt;\n\n    &lt;audio onplaying=\"podPress_html5_count('http://www.example.com/mp3/Some Mp3 File.mp3', this.id)\"&gt;\n      &lt;source src=\"http://www.example.com/mp3/Some%20Mp3%20File.mp3\"&gt;\n    &lt;/audio&gt;\n\n    &lt;audio onplaying=\"podPress_html5_count('http://www.example.com/mp3/Some Mp3 File 2.mp3', this.id)\"&gt;\n      &lt;source src=\"http://www.example.com/mp3/Some%20Mp3%20File%202.mp3\"&gt;\n    &lt;/audio&gt;\n\n    &lt;audio onplaying=\"podPress_html5_count('http://www.example.com/mp3/Some Mp3 File 3.mp3', this.id)\"&gt;\n      &lt;source src=\"http://www.example.com/mp3/Some%20Mp3%20File%203.mp3\"&gt;\n    &lt;/audio&gt;\n    &lt;audio onplaying=\"podPress_html5_count('http://www.example.com/mp3/Some Mp3 File 4.mp3', this.id)\"&gt;\n      &lt;source src=\"http://www.example.com/mp3/Some%20Mp3%20File%204.mp3\"&gt;\n    &lt;/audio&gt;\n\n  &lt;/body&gt;\n</code></pre>\n\n<p>The expected output should be like this:</p>\n\n<p><code>http://www.example.com/mp3/Some%20Mp3%20File.mp3</code>\n<code>http://www.example.com/mp3/Some%20Mp3%20File%202.mp3</code>\n<code>http://www.example.com/mp3/Some%20Mp3%20File%203.mp3</code>\n<code>http://www.example.com/mp3/Some%20Mp3%20File%204.mp3</code></p>\n\n<blockquote>\n  <p>So I need to parse html files to extract only the <code>src</code> attributes of each <code>audio</code> tag present.</p>\n</blockquote>\n"}, {"tags": ["perl", "fork"], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1478326744, "post_id": 40434889, "comment_id": 68118465, "body": "thanks for the info i&#39;ll do some research.  I don&#39;t know how many files there are to a particular stream so right now i go until wget fails. but you&#39;re right i should take the server into consideration and not bombard it.  the last one i ran was over 357 pieces of the video. it did download really fast though."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1478340549, "post_id": 40434889, "comment_id": 68121275, "body": "@genx1mx6 I hope it helps, even as it mostly lists approaches. I plan on adding code with <code>P::FM</code> (it&#39;s late here now). The parent simply runs through the loop so those 357 got created right away and you probably hit the server with all that right off the bat. There must&#39;ve been even more, since it takes the parent no time to be back in the next iteration forking yet another, so it just keeps spinning them.  Even as one fails there is probably a whole bunch already attempting to download other non-existing files. Btw, the file you use is fine -- but you need to limit the number."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "edited": false, "score": 0, "creation_date": 1478408209, "post_id": 40434889, "comment_id": 68138627, "body": "@genx1mx6  I added a working example with <code>Parallel::ForkManager</code>. I can add code for other methods as well, but let me know how this goes."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1577471660, "last_edit_date": 1577471660, "creation_date": 1478321579, "answer_id": 40434889, "question_id": 40433956, "link": "https://stackoverflow.com/questions/40433956/how-to-stop-forking-in-this-code/40434889#40434889", "title": "How to stop forking in this code", "body": "<p>You don't indicate how many processes there may be, but no resource is unlimited and you should limit the number or you'll see a rapid degradation of performance as you reach saturation.</p>\n\n<p>This is even more so when going out on the network since you may be annoying a server (and things will also stop being faster quite soon).  Perhaps run up to a few tens of processes at a time?</p>\n\n<p>Then one option is to limit a number of parallel downloads using <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.19/lib/Parallel/ForkManager.pm\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a>. It has a way to <a href=\"https://metacpan.org/pod/release/YANICK/Parallel-ForkManager-1.19/lib/Parallel/ForkManager.pm#RETRIEVING-DATASTRUCTURES-from-child-processes\" rel=\"nofollow noreferrer\">return data to parent</a>, so a child can report failure. Then its <code>run_on_finish</code> method can check each batch for such a flag (of failure), and set a variable that controls the forking.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Parallel::ForkManager;    \n\nmy $pm = Parallel::ForkManager-&gt;new(2);  # only 2 for a managable demo\nmy $stop_forking;\n\n# The sub gets 6 parameters, but only first (pid) is always defined\n# The last one is what a child process may have passed\n$pm-&gt;run_on_finish(  \n    sub { $stop_forking = 1 if defined $_[-1] } \n); \n\nfor my $i (0..9)\n{\n    last if $stop_forking;\n\n    $pm-&gt;start and next;    # forks\n    my $ret = run_job($i);  # child process\n\n    # Pass data to parent under a condition\n    if ($ret eq 'FAIL') {  $pm-&gt;finish(0, \\$ret) }  # child exits \n    else                {  $pm-&gt;finish }\n}\n$pm-&gt;wait_all_children;\n\nsub run_job { \n    my ($i) = $_[0];\n    sleep 2;\n    print \"Child: job $i exiting\\n\";\n    return ($i == 3 ? 'FAIL' : 1);\n}\n</code></pre>\n\n<p>This stops forking after the batch of jobs within which <code>$i == 3</code>. Add prints for diagnostics.</p>\n\n<p>The \"callback\" <code>run_on_finish</code> runs only once a whole batch completes.<sup>&dagger;</sup> The <em>anonymous sub</em> in it always receives 6 arguments, but only the first one, the child pid, is always defined. The last one has data possibly passed by the child, and when that happens we set the flag. A child can return data by passing a reference to <code>finish</code> method. To only indicate a condition we can simply pass anything. I use <code>\\$ret</code> as an example of passing actual data.</p>\n\n<p>See documentation for more, but this does what you ask.  For yet <em>far</em> more see <a href=\"https://metacpan.org/pod/Forks::Super\" rel=\"nofollow noreferrer\">Forks::Super</a>.</p>\n\n<hr>\n\n<p>If you wish to fork as you do, I'd first put in a little <code>sleep</code> there, so you don't bombard the server with too many requests.  Your children can talk with the parent using <a href=\"http://perldoc.perl.org/functions/socketpair.html\" rel=\"nofollow noreferrer\">socketpair</a>. The failed child can write while all others can simply close their socket. The parent keeps checking, for example with <code>can_read</code> from <a href=\"http://perldoc.perl.org/IO/Select.html\" rel=\"nofollow noreferrer\">IO::Select</a>. There is an example in <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>. Since you only need children to write to the parent the <a href=\"http://perldoc.perl.org/functions/pipe.html\" rel=\"nofollow noreferrer\">pipe</a> would suffice as well.</p>\n\n<p>You can also do it with a signal. The child that fails sends (say) <code>SIGUSR1</code> to the parent, which the parent traps and sets a global variable that controls further forks. This is simpler as the parent only traps that one signal and doesn't care where it comes from. See <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a> and <a href=\"http://perldoc.perl.org/sigtrap.html\" rel=\"nofollow noreferrer\">sigtrap</a> pragma.</p>\n\n<p>You can also use a file, much like you do, which is probably simplest since here you don't care about racing issues (whether children writes overlap), but only about an empty file showing up. </p>\n\n<p>However, in all these you'd also want to limit the number of parallel processes.</p>\n\n<p>Finally, there are also modules that help with external commands, for example <a href=\"http://search.cpan.org/~toddr/IPC-Run-0.94/lib/IPC/Run.pm\" rel=\"nofollow noreferrer\">IPC::Run</a>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> To run the callback right as each child exits use <a href=\"https://metacpan.org/pod/Parallel::ForkManager#reap_finished_children\" rel=\"nofollow noreferrer\">reap_finished_children</a>. See <a href=\"https://stackoverflow.com/a/39071940/4653379\">this post</a>.</p>\n"}], "owner": {"reputation": 305, "user_id": 1781749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65084b4eaadc6bfc209ef73609e1e256?s=128&d=identicon&r=PG", "display_name": "genx1mx6", "link": "https://stackoverflow.com/users/1781749/genx1mx6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 40434889, "answer_count": 1, "score": 1, "last_activity_date": 1577471660, "creation_date": 1478309883, "question_id": 40433956, "link": "https://stackoverflow.com/questions/40433956/how-to-stop-forking-in-this-code", "title": "How to stop forking in this code", "body": "<p>So I have a perl script that goes out there and wgets pieces of a stream (I don't know how many pieces there are upfront)</p>\n\n<p>but I can't think of a good way to know when to STOP wget'ing. right now if wget returns unsuccessful, than we create a file called \"end\" and once the main program sees it, it stops the loop. Is there a better way to go about doing this?</p>\n\n<p>Obviously it would be easy if it was done sequentially instead of concurrently, but i was trying to make it download the fastest.</p>\n\n<pre><code>my $link = $ARGV[0];\nmy ($url) = $link=~ m/(.+-)\\d+.ts/i;\n\nmy $num = 0;\n\n#while the file END doesn't exist\nmy @pids;\nwhile (! -e \"END\") {\n        #create the URL, increment by 1\n        my $video=$url.++$num.\".ts\";\n        die \"could not fork\" unless defined (my $pid = fork());\n\n        #child process goes until wget returns invalid, create END\n        if (not $pid) {\n                system (\"wget -T 5 -t 5 $video\");\n                `touch END` if $? != 0;\n                exit;\n        }\n        push @pids, $pid;\n}\n\n#parent process still running, waiting for the same END file.\nfor my $pid (@pids) { waitpid $pid,0; }\n\nprint \"pids finished\\n\";\n\nsleep 1;\n`rm END`;\n</code></pre>\n"}, {"tags": ["perl", "libwww-perl"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1478382044, "post_id": 40433585, "comment_id": 68133592, "body": "You can also see <a href=\"http://stackoverflow.com/q/2341128/2766176\">http://stackoverflow.com/q/2341128/2766176</a>."}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 2845840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc82e927338bd76faf21b3401856f57?s=128&d=identicon&r=PG&f=1", "display_name": "user2845840", "link": "https://stackoverflow.com/users/2845840/user2845840"}, "edited": false, "score": 0, "creation_date": 1478608737, "post_id": 40444350, "comment_id": 68217800, "body": "Thank you. Both <code>binmode STDOUT</code> and <code>LWP::UserAgent</code> work. pack/unpack were the recommended way to view a hex version of perl data. Is there a better alternative, something that gives me an unaltered hex/octal/decimal view of what perl stores in its variables? If I had had that, I could&#39;ve debugged it myself and wouldn&#39;t have had to bother stackoverflow with it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 300, "user_id": 2845840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc82e927338bd76faf21b3401856f57?s=128&d=identicon&r=PG&f=1", "display_name": "user2845840", "link": "https://stackoverflow.com/users/2845840/user2845840"}, "edited": false, "score": 1, "creation_date": 1478644807, "post_id": 40444350, "comment_id": 68239437, "body": "@user2845840 If you want to see what perl thinks it has in its strings, use <code>printf &quot;%vd\\n&quot;, $str</code> (decimal) or <code>printf &quot;%vx\\n&quot;, $str</code> (hex). The output will be in &quot;dotted decimal&quot; (or hex) form, with one number per codepoint (this also tells you what perl thinks the length of the string is (number of dots + 1))."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1478388345, "creation_date": 1478388345, "answer_id": 40444350, "question_id": 40433585, "link": "https://stackoverflow.com/questions/40433585/lwpsimpleget-changes-encoding/40444350#40444350", "title": "LWP::Simple::get changes encoding", "body": "<p>This is a bug in your code.</p>\n\n<p><code>LWP::Simple::get</code> doesn't return the original bytes (in some encoding), it returns decoded text (i.e. Unicode). (Which makes sense, because if it returned bytes, you wouldn't know how to decode them because <code>get</code> doesn't tell you the encoding.)</p>\n\n<p>So <code>get(\"http://localhost/wtf.txt\")</code> returns a string containing the codepoint U+00f6. <code>print</code> then writes some bytes to STDOUT. What are those bytes? That depends on the encoding layer currently set on the filehandle. By default this is a weird mix of Latin-1 and UTF-8 (it might even depend on the internal encoding of the string).</p>\n\n<p>If you want to get UTF-8 output, do <code>binmode STDOUT, \":encoding(UTF-8)\";</code> first. That ensures all text written to STDOUT is encoded as UTF-8.</p>\n\n<p>On the other hand, if you want to ignore encodings and just write the bytes that you received from the web server, then <code>LWP::Simple</code> is the wrong choice. Use <code>LWP::UserAgent</code> instead and call <code>$response-&gt;content</code>. (<code>LWP::Simple::get</code> uses <code>$response-&gt;decoded_content</code> internally.)</p>\n\n<p>The truncation in your second example is probably due to <code>pack</code>/<code>unpack</code>, which don't make sense on Unicode strings (they're meant for byte strings, i.e. all codepoints &lt;= 255).</p>\n"}], "owner": {"reputation": 300, "user_id": 2845840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc82e927338bd76faf21b3401856f57?s=128&d=identicon&r=PG&f=1", "display_name": "user2845840", "link": "https://stackoverflow.com/users/2845840/user2845840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 40444350, "answer_count": 1, "score": 1, "last_activity_date": 1478388345, "creation_date": 1478306032, "question_id": 40433585, "link": "https://stackoverflow.com/questions/40433585/lwpsimpleget-changes-encoding", "title": "LWP::Simple::get changes encoding", "body": "<p>I suppose I am using LWP::Simple::get incorrectly, but I am at my wit's end as to how to correct it. My first try was a simple</p>\n\n<pre><code>perl -e 'use LWP::Simple; print get(\"http://localhost/wtf.txt\");'\n</code></pre>\n\n<p>, but that did not work. <code>wtf.txt</code> contains a single UTF-8-encoded character <code>u+00f6</code> (i.e. <code>\u00f6</code>). Using <code>wget</code> and <code>xxd</code> I made sure that the HTTP server sends the correct header line <code>Content-Type: text/plain; charset=utf-8</code> and that the content is as expected. But the above perl code instead returns <code>u+00f6</code> as ISO-8859-1-encoded.</p>\n\n<p>I thought that this is a simple encoding issue with a simple fix, but digging deeper I found it to be not quite as straightforward as I had hoped. I created a second file <code>wtf2.txt</code> with the single UTF-8-encoded character <code>u+30e4</code> (i.e. <code>\u30e4</code>) and fetched both with the following perl code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse LWP::Simple;\n$wtf=get(\"http://localhost/$ARGV[0]\");\n$wtf2=pack(\"H*\",unpack(\"H*\",$wtf));\nprint $wtf;\nprint \"\\n\";\nprint $wtf2;\nprint \"\\n$wtf\\n$wtf2\\n\";\nprint (unpack(\"H*\",$wtf).\"\\n\");\n</code></pre>\n\n<p>When fetching <code>wtf.txt</code>, this code writes 4 times <code>u+00f6</code> in its ISO-8859-1-encoded form, followed by <code>f6</code> (its ISO-8859-1-encoded form in hex). Up to here, everything is as before. But when fetching <code>wtf2.txt</code>, this code writes <code>u+30e4</code> in its UTF-8-encoded form, followed by <code>u+00e4</code> (i.e. <code>\u00e4</code>) in ISO-8859-1, <code>u+30e4</code> in UTF-8, <code>u+00e4</code> in UTF-8, <code>e4</code> (ISO-8859-1 of <code>u+00e4</code> in hex).</p>\n\n<p>Given that <code>u+30e4</code> and <code>u+00e4</code> have nothing to do with each other apart from the latter being a bitmasked/truncated version of the former, I expect that not only re-encoding happens inside LWP::Simple, but also some truncating. I'm inclined to file a bug report to LWP::Simple, but I'm still hoping for a simple fix and/or an explanation.</p>\n\n<p>By the way, none of the described issues occur if I replace the second and third line with <code>$wtf=&lt;&gt;;</code> and simply read the files from <code>stdin</code> instead of fetching them via LWP::Simple::get.</p>\n\n<p>I tested this using perl 5.14.2 and libwww 6.04 on Debian 7.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478293002, "post_id": 40431467, "comment_id": 68111587, "body": "The line <code>map { unpack &#39;l&#39;, pack &#39;l&#39;, hex $_ }</code> continues with <code>my $packer=\u2026</code>. The <code>map</code> misses its second parameter (some list)."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478293408, "post_id": 40431467, "comment_id": 68111774, "body": "<code>$type</code> is declared inside the <code>if</code> block so it cannot be seen or used outside that block (scope). Put the declaration of <code>$type</code> outside the <code>if</code> and be prepared that it only gets set (to a reasonable value) when the <code>if</code> condition matches."}, {"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478294679, "post_id": 40431467, "comment_id": 68112277, "body": "@PerlDuck  Thanks those two error are gone but i am  getting new error                                                                                                   1.Use of uninitialized value $_ in hex at test15.pl line map { unpack &#39;l&#39;, pack &#39;l&#39;, hex $_ } &lt;$my_ipfh&gt; line 1. 2.Use of uninitialized value in subroutine entry at test15.pl line $packed .= $packer-&gt;(@vals), &lt;$my_ipfh&gt; line 1. 3.Can&#39;t use string (&quot;&quot;) as a subroutine ref while &quot;strict refs&quot; in use at test15.p"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478379662, "post_id": 40431467, "comment_id": 68132861, "body": "Sorry. <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not meant to be an interactive debugging service. If you have further questions, feel free to post them."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "edited": false, "score": 0, "creation_date": 1478321795, "post_id": 40432037, "comment_id": 68117754, "body": "@Schwem in this line g need to removed &quot; if ( $_ =~ m{$int_type_re}) &quot;otherwise it will through compilation error"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "edited": false, "score": 0, "creation_date": 1478326976, "post_id": 40432037, "comment_id": 68118502, "body": "@Ria The syntax error isn&#39;t the <code>&#47;g</code>, it&#39;s the semi-colon. Your original regex had a <code>&#47;g</code> on it, so I retained it, though I see now it wasn&#39;t doing anything so it should be removed."}, {"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "edited": false, "score": 0, "creation_date": 1478329581, "post_id": 40432037, "comment_id": 68118956, "body": "@Schwem thanks for your valuable input my present regex not able to match some of the lines any help please ?"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1478327114, "last_edit_date": 1478327114, "creation_date": 1478295280, "answer_id": 40432037, "question_id": 40431467, "link": "https://stackoverflow.com/questions/40431467/error-while-extracting-both-value-and-type-from-lines/40432037#40432037", "title": "error while extracting both value and type from lines", "body": "<p>You asked a bunch of questions. I'll cover one.</p>\n\n<blockquote>\n  <p><em>While extracting type I am getting compilation error</em></p>\n</blockquote>\n\n<p><code>my</code> declares a lexical variable. It exists only for the block it's in.</p>\n\n<pre><code>if( ...whatever... ) {\n    my $something = 42;\n}\n\nprint $something;\n</code></pre>\n\n<p>This is different from, say, Javascript where <code>var</code> is scoped to the whole function no matter where you declare it.</p>\n\n<p><code>$something</code> does not exist outside that <code>if</code> block. When <code>use strict</code> is on, Perl does not allow you to use undeclared variables, so that print statement will produce an error at compile time.</p>\n\n<p><a href=\"http://modernperlbooks.com/books/modern_perl_2016/05-perl-functions.html#U2NvcGU\" rel=\"nofollow noreferrer\">Read more about scoping in Perl here</a>.</p>\n\n<p>This is why it's <em>very important</em> to get your indentation right. Being able to clearly and quickly see scopes is one of the most important things in programming. Your code is poorly spaced and indented. Here's how it should look.</p>\n\n<pre><code>my $int_type_re = qr{\n    ( [+-]? \\d+ )\n    \\s+\n    ( [us]int(?:8|16|32) )\n}xi;\n\nmy $packed = '';\nwhile (&lt;$my_ipfh&gt;) {\n    if ( $_ =~ m{$int_type_re} ) {\n        my ($vals, $type);\n        $vals =$1;\n        $vals =sprintf(\"0x%02x\", $1);\n        $type =$2;\n        print \"$vals,$type\\n\";\n    }\n    my @vals =\n      map { unpack 'l', pack 'l', hex $_ };\n\n    my $packer = $packers {$type} \n      or die(\"Unsupported type \\\"$type\\\"\\n\");  #error in this line\n\n    $packed .= $packer-&gt;(@vals);\n}\n</code></pre>\n\n<p>With proper 4 character indentation and good use of blank lines, it's much clearer what's inside the <code>while</code> loop, what's inside the <code>if</code> and what's a multi-line statement.</p>\n\n<p>I've also moved the complicated regex out of the condition and into its own variable. This both gives it a name to help understand what it's doing, and it makes the condition easier to read.</p>\n\n<p>I made use of the <code>/x</code> regex modifier and newlines to space the regex out clearly. Then, with it pulled apart into smaller pieces, I saw I could collapse the repeated parts.</p>\n\n<p>I also removed the <code>/g</code> regex modifier because it wasn't doing anything. That's for looping through multiple matches in a single string like:</p>\n\n<pre><code>while( $x =~ /(\\w+)/g ) {\n    print \"Word is $1\\n\";\n}\n</code></pre>\n\n<p>Or in list context:</p>\n\n<pre><code>my @words = $x =~ /(\\w+)/g;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 40432037, "answer_count": 1, "score": -1, "last_activity_date": 1478327114, "creation_date": 1478292531, "last_edit_date": 1495540123, "question_id": 40431467, "link": "https://stackoverflow.com/questions/40431467/error-while-extracting-both-value-and-type-from-lines", "title": "error while extracting both value and type from lines", "body": "<p>This question was asked by me earlier \n<a href=\"https://stackoverflow.com/questions/39678809/how-to-find-the-lengh-of-the-input-in-an-array-and-match-pattern-in-perl/39682057?noredirect=1#comment66755031_39682057\">how to find the lengh of the input in an array and match pattern in perl</a></p>\n\n<p>Here my input is in decimal format later converting to hex</p>\n\n<blockquote>\n  <p>1.While extracting type I am getting compilation error</p>\n</blockquote>\n\n<pre><code>\" Global symbol \"$type\" requires explicit package name at test15.pl line 65.\"\n\" Global symbol \"$type\" requires explicit package name at test15.pl line 66.\"\n</code></pre>\n\n<blockquote>\n  <p>2.When I have checked the output of vals and type (by commenting last few<br>\n    lines of the code from my $vals= to $packed)<br>\n    I am getting both values and type as I have mentioned below</p>\n</blockquote>\n\n<pre><code> 0x01,uint8\n 1440,Uint16\n 0xbb3,Uint16\n ffffffbf,Sint8\n 0xa3,uint32\n</code></pre>\n\n<blockquote>\n  <p>3.My regex not able to extract values from middle of lines</p>\n</blockquote>\n\n<pre><code>For e.g.\nrrc_mac_interface   RLC_PDU { 1}    rrc_mac_interface   #default   type is uint8\ngsm_lte_interface   scell + ncell + gsm cell { 3}   gsm_lte_interface   #default   type is uint8\nreserved_for_data{3}    { 0, 0, 0 } Uint8,unsigned char \n</code></pre>\n\n<blockquote>\n  <p>my input lines:</p>\n</blockquote>\n\n<pre><code>trans_id    1   uint8,unsigned char\nPdu_size    5120    Uint16, unsigned short  \nsub_sfn         2995        Uint16, unsigned short\nrrc_mac_interface   RLC_PDU { 1}    rrc_mac_interface   #default type is uint8\ngsm_lte_interface   scell + ncell + gsm cell { 3}   gsm_lte_interface   \n#default type is uint8\nminvalue         -65    Sint8,signed char \nnumtrx           163     uint32,unsigned short \nreserved_for_data{3}    { 0, 0, 0 } Uint8,unsigned char\nmy_st[1]      0         //do not match if the this line has []\n</code></pre>\n\n<blockquote>\n  <p>code:</p>\n</blockquote>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\nmy $inputfile  = 'input.txt';\nmy $outputfile = 'output.txt';\nopen my $my_ipfh, \"&lt;\", $inputfile or die $!;\nopen my $my_opfh, \"&gt;\", $outputfile or die $!;\n\nmy %packers = (\nUint8  =&gt; sub { pack 'C*',  @_ },\nSint8  =&gt; sub { pack 'c*',  @_ },\nUint16 =&gt; sub { pack 'S&gt;*', @_ },\nSint16 =&gt; sub { pack 's&gt;*', @_ },\nUint32 =&gt; sub { pack 'L&gt;*', @_ },\nSint32 =&gt; sub { pack 'l&gt;*', @_ },\n);\n\n my $packed = '';\n while (&lt;$my_ipfh&gt;)\n {      \n if (/([+-]?\\d+)\\s+ (uint8|sint8|Uint8|Sint8|uint16|sint16|Uint16|Sint16|uint32|sint32|Uint32|Uint32)/xg)\n  {\n    my ($vals, $type);\n    $vals =$1;\n    $vals =sprintf(\"0x%02x\", $1);\n    $type =$2;\n    print \"$vals,$type\\n\";\n  }\n    my @vals =\n    map { unpack 'l', pack 'l', hex $_ }  # Convert to number and fix the sign   \n    my $packer = $packers {$type} \n    or die(\"Unsupported type \\\"$type\\\"\\n\");  #error in this line\n    $packed .= $packer-&gt;(@vals);\n\n    say\n    join ',',\n     map { sprintf(\"0x%02X\", $_) }\n     unpack 'C*',\n        $packed;\n }\n</code></pre>\n\n<blockquote>\n  <p>some mistakes I am doing which I am not able to catch if somebody can help me would be great ?</p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478286064, "post_id": 40429781, "comment_id": 68108440, "body": "It&#39;s literally talking about the package, as in the namespace. The problem <i>isn&#39;t</i> that the module can&#39;t be loaded; it&#39;s that it <i>wasn&#39;t</i> loaded. That would seem to indicate you have a messed up CPAN::Shell or CPAN::Debug."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478828749, "post_id": 40429781, "comment_id": 68319165, "body": "hey @ikegami , How can I force CPAN to use my system&#39;s version of GCC instead of downloading and installing a newer GCC? I don&#39;t want to upgrade because some of my tools are compiled using the older version of GCC, and if I upgrade it would mess up a lot of other things. I am trying to make work easier, not harder."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1479079621, "post_id": 40429781, "comment_id": 68395578, "body": "I don&#39;t know.  That is functionality ActiveState adds to their distro."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1478656146, "creation_date": 1478656146, "answer_id": 40499208, "question_id": 40429781, "link": "https://stackoverflow.com/questions/40429781/cant-locate-package-cpandebug-for-cpanshellisa-at/40499208#40499208", "title": "Can&#39;t locate package CPAN::Debug for @CPAN::Shell::ISA at", "body": "<p><code>CPAN::Shell</code> is just one component of the <code>CPAN</code> module, and isn't intended to be used in isolation</p>\n\n<p>If you just change your <code>use</code> statement to <code>use CPAN</code> then everything should work for you</p>\n"}], "owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478656146, "creation_date": 1478284951, "last_edit_date": 1478321993, "question_id": 40429781, "link": "https://stackoverflow.com/questions/40429781/cant-locate-package-cpandebug-for-cpanshellisa-at", "title": "Can&#39;t locate package CPAN::Debug for @CPAN::Shell::ISA at", "body": "<p>I'm trying to install a missing module using my script because I can't expect my users to do anything simple as installing a missing module.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse CPAN::Shell;\n\nsub try_load {\n  my $mod = shift;    \n  eval(\"use $mod\");\n\n  if ($@) {\n        #print \"\\$@ = $@\\n\";\n        return(0);\n  } else {\n        return(1);\n  }\n}\n\nmy $module = 'URI::Escape';\nif (try_load($module)) {\n    print \"loaded\\n\";\n} else {\n    print \"not loaded\\n\";\n    CPAN::Shell-&gt;install(\"URI::Escape\");\n    # system(\"ppm install \");\n}\n</code></pre>\n\n<p>But I always get an error for the above test script :</p>\n\n<p><code>Can't locate package CPAN::Debug for @CPAN::Shell::ISA at checkmodule.pl line 3.</code></p>\n\n<p>But when I do :</p>\n\n<pre><code>my $module = 'CPAN::Debug';\nif (try_load($module)) {\n    print \"loaded\\n\";\n} else {\n    print \"not loaded\\n\";\n    CPAN::Shell-&gt;install(\"CPAN::Debug\");\n    # system(\"ppm install \");\n}\n</code></pre>\n\n<p>I get the message <code>loaded</code> meaning I do have <code>CPAN::Debug</code>   ???.</p>\n\n<p>I can't do : <code>perl -MCPAN -e shell</code> because CPAN decided that my version of GCC 4.6.1 is not good enough and wants to install 4.6.3 and that would break a lot of my development environment as well as tools that's installed in my users systems. <em>[I really wish to force CPAN to use my systems version of MinGW GCC, but I don't know how, but that's for an another time].</em></p>\n\n<p>Does anyone know how I could get around this error above in my title?\nThanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1478284355, "post_id": 40429573, "comment_id": 68107586, "body": "<a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">App::FatPacker</a> will combine your script and all prerequisite modules (if they&#39;re not XS) into a single runnable perl file."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478284803, "post_id": 40429573, "comment_id": 68107787, "body": "@ikegami yes. :) this is the best way. Unfortunately, this isn&#39;t possible - by the policy."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1478285250, "post_id": 40429573, "comment_id": 68108024, "body": "@ikegami maybe me forgot something more to describe the environment, (besides the - no root access), but simply think about as: it isn&#39;t possible to install the any compiler. :( Unfortunately, otherwise i would use <code>plenv</code> and few simple scripts. :("}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1478291708, "post_id": 40429573, "comment_id": 68111055, "body": "@jm666 What part of the policy would prohibit a FatPacked application?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1478292402, "post_id": 40429573, "comment_id": 68111362, "body": "@duskwuff the FatPacked approach sound interesting and could solve the whole problem. Me doesn&#39;t knows it enough (yet), so need learn about it. :)"}], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1478515643, "post_id": 40429838, "comment_id": 68171125, "body": "Typical answer from an perl-guru. Perl is great, just do everything yourself. (pull everything using minicpan). But the truth is: in the real world, users uses pre-packaged perl modules from the Linux-distriubutions, because using cpan is <b>prohibited</b>. (regardles of why).  Definitely <i>would be nice to have</i> some longer tutorial how to package and deploy apps for such environments."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 1, "creation_date": 1478530353, "post_id": 40429838, "comment_id": 68180271, "body": "@cajwine, It&#39;s like you read neither the question nor the answer!?!?! 1) i said the very opposite, use existing tools rather than rolling out your own. 2) The OP isn&#39;t prohibited from using <code>cpan</code>. 3) Before his edit, it sounded like he wanted to installs module himself. 4) I did give instructions for making pre-packaging the module. This isn&#39;t normally a portable solution -- something the OP requested -- but it is in this situation."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1478292783, "last_edit_date": 1478292783, "creation_date": 1478285193, "answer_id": 40429838, "question_id": 40429573, "link": "https://stackoverflow.com/questions/40429573/installing-an-perl-based-web-app-in-extremely-restricted-environment/40429838#40429838", "title": "Installing an perl based web-app in extremely restricted environment", "body": "<p>Don't write your own <code>make</code> or installer. Just copy it <code>make</code> from a different machine (which is basically what <code>apt</code>/<code>yum</code>/etc do anyway, and which you'd have to do even if you wrote your own). You'd be able to use <code>cpan</code> in 5 minutes!</p>\n\n<p>Also, that should allow you to install <code>gcc</code> if you need it (e.g. to install an XS module), although it doesn't sound like you do. If you do install <code>gcc</code>, I'd install my own <code>perl</code> to avoid having to deal with <code>PERL5LIB</code>.</p>\n\n<p>Tools such as <a href=\"http://search.cpan.org/perldoc/minicpan\" rel=\"nofollow noreferrer\"><code>minicpan</code></a> will allow you to install any module from CPAN without internet access. Of course, you can keep using the command you are already using it if mirrors the packages you need.</p>\n\n<hr>\n\n<p>The above explains how to simply and quickly setup a machine so it can use <code>cpan</code> and thus install <em>any</em> module easily.</p>\n\n<p>If you just want to install a specific module and its dependencies, you can completely avoid using <code>cpan</code> on the target machine. First, you need a fresh install of Perl (preferable of the same version as the one on the target system). Then, simply install the module to a fresh dir on your machine, and transfer that dir to the target machine. That's it; nothing else needs to be done. This even works for XS modules if the two machine are similar enough.</p>\n\n<p>This is what <code>ppm</code> (ActiveState's Perl package manager) does.</p>\n\n<p>Unfortunately, while this solution is almost as simple as the one above, it's not nearly as flexible, it doesn't run the test suite of the modules being installed, etc. It does have the advantage of not requiring the transfer of any binary (if you're not installing any XS modules).</p>\n"}], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1478295072, "creation_date": 1478284127, "last_edit_date": 1478295072, "question_id": 40429573, "link": "https://stackoverflow.com/questions/40429573/installing-an-perl-based-web-app-in-extremely-restricted-environment", "title": "Installing an perl based web-app in extremely restricted environment", "body": "<p><em>Because i have a long series of comments with @ikegami, I cleaning up the question, in a hope it will be more understandable. Unfortunately, english isn't my \"main\" language. :(</em></p>\n\n<p>Let say, having an environment where:</p>\n\n<ul>\n<li>no development tools are installed (no <code>make</code>, nor <code>gcc</code> or like)</li>\n<li><code>perl</code> is <em>installed</em> with its <em>core packages</em>, nothing more</li>\n<li>no outgoing network access is allowed - e.g. the user couldn't use <code>curl</code> nor <code>cpan</code> to download/install perl dependencies</li>\n<li>the user even doesn't have admin (root) rights</li>\n<li>but want install and evaluate some perl based web-app, let call it as <code>MyApp</code></li>\n</ul>\n\n<p>The <code>MyApp</code></p>\n\n<ul>\n<li>doesn't uses any XS-based module. (at least, I hope - in the development me using <code>plenv</code> and <code>cpanm</code>, so never checked the installed dependencies in depth)</li>\n<li>it is an pure PSGI app, the simple <code>plackup app.psgi</code> works OK</li>\n<li>the app uses some data-files which should be included in the \"deployment\".</li>\n</ul>\n\n<p><strong>The main question is:</strong> <em>how to prepare the <code>MyApp</code>, and the all used CPAN-modules, to be <strong>easily</strong> installed in such restricted environment?</em></p>\n\n<p>The goal is:</p>\n\n<ul>\n<li>i don't need save <em>my</em> efforts and <em>my</em> time</li>\n<li>but i want save the user's time and want minimize the needed actions on his side, so the installation (deployment) should be simple-as-possible.</li>\n</ul>\n\n<p>E.g. how to get an running web-app to the user's machine with minimum possible (his) steps.\n- the simplest thing is could be something as:\n  - copy one file (zip, or tarbal)\n  - unpack it\n  - from the terminal execute some <code>run.pl</code> in the unpacked directory.</p>\n\n<p>To get the above simple installation, my idea was the following:</p>\n\n<p>1.) Create an tarball, and after the unpacking will contain 3 folders and 1 perl-script, let say:</p>\n\n<pre><code>myapp_repo/\nmyapp_repo/distlib   #will contain all MyApp's perl modules also ALL used CPAN modules and their dependecies\nmyapp_repo/datafiles #will contain app-specific data files and such\nmyapp_repo/install.pl\nmyall_repo/lib   #will contain modules directly used by the `install.pl`\n</code></pre>\n\n<p>2.) I will develop an <code>install.pl</code> script, and it will be used as the <em>installer-tool</em>, like</p>\n\n<pre><code>perl install.pl new /path/to/app_root\n</code></pre>\n\n<p>and it will (should):</p>\n\n<ul>\n<li>create the all needed directories under the <code>/path/to/app_root</code> (especially the <code>lib</code> where the will install the perl modules)</li>\n<li>will call \"local\" <code>cpanm</code> internally (from the <code>myapp_repo/lib</code>) to install the app's perl modules and their CPAN dependencies using only distribution files from the <code>distlib</code>.</li>\n<li>will generate and install the needed runtime script and the <code>app.psgi</code> into the <code>/path/to/app_root/bin</code></li>\n<li>will install the needed data-files for the app.</li>\n</ul>\n\n<p>3.) So, after this the user should be able to simply run:</p>\n\n<pre><code>/path/to/app_root/bin/plackup /path/to/app_root/bin/app.psgi\n</code></pre>\n\n<p>In short, the user should use:</p>\n\n<ul>\n<li>the system-wide perl and the system-wide perl-core modules</li>\n<li>and any other\n\n<ul>\n<li>runtime perl-scripts (like <code>plackup</code>)</li>\n<li>and the required CPAN-modules</li>\n</ul></li>\n<li>should be installed to an self-contained directory tree using only files (no net-access).</li>\n</ul>\n\n<p>E.g. the <code>install.pl</code> should somewhat call internally the <code>cpanm</code> to achieve (as equivalent) for the following <code>cpanm</code> command</p>\n\n\n\n<pre><code>cpanm --mirror file://path/to/myapp_repo/distlib --mirror-only My::App\n</code></pre>\n\n<p>which, should install <code>My::App</code> and all dependencies <strong>without</strong> network access using only the files from the <code>myapp_repo/distlib</code></p>\n\n<p>Some questions:</p>\n\n<ul>\n<li>Is possible to use <code>cpanm</code> (called as an locally installed module) without the <code>make</code>?</li>\n<li>For creating the <code>myapp_repo/distlib</code>, me thinking about using <a href=\"https://metacpan.org/pod/Pinto\" rel=\"nofollow noreferrer\">Pinto</a>. Is it the right tool for achieve the above?</li>\n<li>forgot me something? or with other words:</li>\n<li>Is the above an viable (read: working) way?</li>\n<li>are are any other tools, which i could/should to use for simplifying the creation of such distribution tarball?</li>\n</ul>\n\n<p>@ikegami suggesting some method:\n- \"install everything\" in one fresh-directory on my machine\n- transfer this self-contained directory to the target machine</p>\n\n<p>It sound very good, because this directory could contain all the needed app-specific data-files too, unfortunately, I don't understand the details how his solution should be done. </p>\n\n<p>The FatPacked solution looks interesting too - need learn about it.</p>\n"}, {"tags": ["perl", "variables", "nginx", "module"], "comments": [{"owner": {"reputation": 3625, "user_id": 4347203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b30a69fb5219ab71a8dac78fcde8a0e8?s=128&d=identicon&r=PG", "display_name": "Dmitry MiksIr", "link": "https://stackoverflow.com/users/4347203/dmitry-miksir"}, "edited": false, "score": 0, "creation_date": 1488732986, "post_id": 40426657, "comment_id": 72351455, "body": "How you installed your nginx? Tell distributive version (debian?) and source of nginx package."}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 3203387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xYsie.jpg?s=128&g=1", "display_name": "PurrBiscuit", "link": "https://stackoverflow.com/users/3203387/purrbiscuit"}, "edited": false, "score": 0, "creation_date": 1488991787, "post_id": 42611712, "comment_id": 72478903, "body": "thank you, worked perfectly.  I added the following to get it working in my <code>&#47;etc&#47;nginx&#47;nginx.conf</code> file:   <code>user  nginx; worker_processes  1;  error_log  &#47;var&#47;log&#47;nginx&#47;error.log warn; pid        &#47;var&#47;run&#47;nginx.pid;  load_module &#47;usr&#47;lib&#47;nginx&#47;modules&#47;ngx_http_perl_module.so;  events {     worker_connections  1024; }</code>  before the <code>http {</code> block from my example above in my original question."}], "tags": [], "owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "is_accepted": true, "score": 10, "last_activity_date": 1488735439, "creation_date": 1488735439, "answer_id": 42611712, "question_id": 40426657, "link": "https://stackoverflow.com/questions/40426657/unknown-directive-perl-modules/42611712#42611712", "title": "unknown directive &quot;perl_modules&quot;", "body": "<p>You install <strong>ngx_http_perl_module</strong> as dynamic module (<code>--with-http_perl_module=dynamic</code>) so you need to load this module at the beginning of your <strong>nginx.conf</strong>:</p>\n\n<pre><code>load_module /usr/lib/nginx/modules/ngx_http_perl_module.so\n</code></pre>\n\n<p>I've used path from your <code>--modules-path</code> option, so check this directory to get exact name of http_perl module file</p>\n"}], "owner": {"reputation": 467, "user_id": 3203387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xYsie.jpg?s=128&g=1", "display_name": "PurrBiscuit", "link": "https://stackoverflow.com/users/3203387/purrbiscuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5038, "favorite_count": 0, "accepted_answer_id": 42611712, "answer_count": 1, "score": 13, "last_activity_date": 1488735439, "creation_date": 1478274100, "last_edit_date": 1478275153, "question_id": 40426657, "link": "https://stackoverflow.com/questions/40426657/unknown-directive-perl-modules", "title": "unknown directive &quot;perl_modules&quot;", "body": "<p>I am getting an <code>unknown directive \"perl_modules\"</code> error when trying to start nginx with the following <code>/etc/nginx/nginx.conf</code> setting:</p>\n\n<pre><code>user  nginx;\nworker_processes  1;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    perl_modules perl/lib;\n\n    perl_set $subdomain_uppercase 'sub {\n        my $r = shift;\n        my $subdomain = $r-&gt;subdomain;\n        $subdomain = uc($subdomain);\n        return $subdomain;\n    }';\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n</code></pre>\n\n<p>I have perl installed:</p>\n\n<pre><code>root@0f0babe794c4:/etc/nginx# perl -v\n\nThis is perl 5, version 20, subversion 2 (v5.20.2) built for x86_64- linux-gnu-thread-multi\n (with 92 registered patches, see perl -V for more detail)\n</code></pre>\n\n<p>and it looks like the module is enabled in my nginx setup:</p>\n\n<pre><code>root@0f0babe794c4:/etc/nginx# nginx -V\nnginx version: nginx/1.9.15\nbuilt by gcc 4.9.2 (Debian 4.9.2-10)\nbuilt with OpenSSL 1.0.1k 8 Jan 2015\nTLS SNI support enabled\nconfigure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-http_perl_module=dynamic --add-dynamic-module=debian/extra/njs-1c50334fbea6/nginx --with-threads --with-stream --with-stream_ssl_module --with-http_slice_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-http_v2_module --with-cc-opt='-g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2' --with-ld-opt='-Wl,-z,relro -Wl,--as-needed'\n</code></pre>\n\n<p>Of note, the above includes <code>--with-http_perl_module=dynamic</code>.</p>\n\n<p>Am I missing an extra step to get this perl module enabled so I can set dynamic variables?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1478271578, "post_id": 40425166, "comment_id": 68099888, "body": "Just an FYI: <code>@multiarray[0]</code> is a single element array slice.  <code>$multiarray[0]</code> is accessing the scalar at offset zero in an array.  Prefer the latter syntax unless you really intend to use a slice.  Remember that in Perl the <i>sigil</i> follows the type of value we&#39;re working with. Thus, <code>$</code> is for a single scalar, even if it is a component of an aggregate data type such as a hash or an array."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1478272446, "post_id": 40425166, "comment_id": 68100477, "body": "Related to DavidO&#39;s comment, make sure you always <code>use strict;</code> and <code>use warnings &#39;all&#39;;</code>. With warnings enabled, <code>@multarray[0]</code> will give the warning &quot;Scalar value @multarray[0] better written as $multarray[0]&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1478660512, "post_id": 40425166, "comment_id": 68243176, "body": "I recommend that you prefer <code>Data::Dump</code> or <code>Data::Dumper</code> over <code>Data::Printer</code> when formatting data for presentation in a question. The last can be useful for personal use at a command prompt, but it adds additional information that can be confusing out of context, especially to someone unfamiliar with the module."}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 7, "last_activity_date": 1478269952, "creation_date": 1478269952, "answer_id": 40425263, "question_id": 40425166, "link": "https://stackoverflow.com/questions/40425166/access-print-nth-element-of-sub-array-for-every-array/40425263#40425263", "title": "access / print nth element of sub array, for every array", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> and dereference each array:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Data::Dumper;\n\nmy @multarray =  ( \n    [ \"one\", \"two\", \"three\" ],\n    [  4,   5,  6,  ],\n    [ \"alpha\", \"beta\", \"gamma\" ]\n);\n\nmy @subs = map { $_-&gt;[0] } @multarray;\nprint Dumper(\\@subs);\n\n__END__\n\n$VAR1 = [\n          'one',\n          4,\n          'alpha'\n        ];\n</code></pre>\n\n<p>See also: <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a></p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1478269959, "creation_date": 1478269959, "answer_id": 40425267, "question_id": 40425166, "link": "https://stackoverflow.com/questions/40425166/access-print-nth-element-of-sub-array-for-every-array/40425267#40425267", "title": "access / print nth element of sub array, for every array", "body": "<p>Using a <code>for()</code> loop, you can loop over the outer array, and use any of the inner elements. In this example, I've set <code>$elem_num</code> to <code>0</code>, which is the first element. For each loop over the outer array, we take each element (which is an array reference), then, using the <code>$elem_num</code> variable, we print out the contents of the inner array's first element:</p>\n\n<pre><code>my $elem_num = 0;\n\nfor my $elem (@multarray){\n    print \"$elem-&gt;[$elem_num]\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 40425263, "answer_count": 2, "score": 1, "last_activity_date": 1478269959, "creation_date": 1478269683, "question_id": 40425166, "link": "https://stackoverflow.com/questions/40425166/access-print-nth-element-of-sub-array-for-every-array", "title": "access / print nth element of sub array, for every array", "body": "<p>I have a multidimensional array:</p>\n\n<pre><code>@multarray =  ( [ \"one\", \"two\", \"three\" ],\n                [  4,   5,  6,  ],\n                [ \"alpha\", \"beta\", \"gamma\" ]\n              );\n</code></pre>\n\n<p>I can access <code>@multarray[0]</code></p>\n\n<pre><code>[\n    [0] [\n        [0] \"one\"\n        [1] \"two\"\n        [2] \"three\"\n    ]\n]\n</code></pre>\n\n<p>or even <code>@multarray[0][0]</code></p>\n\n<pre><code>\"one\"\n</code></pre>\n\n<p>But how to I access say the 1st sub element of every sub array? something akin to <code>multarray[*][0]</code> so produce:</p>\n\n<pre><code>\"one\"\n4\n\"alpha\"\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl", "shell", "awk", "sed"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1478279568, "post_id": 40423810, "comment_id": 68105146, "body": "Do you REALLY have a blank line between each input line and want that duplicated in your output?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1478266311, "creation_date": 1478266311, "answer_id": 40423970, "question_id": 40423810, "link": "https://stackoverflow.com/questions/40423810/remove-new-line-only-if-after-a-number/40423970#40423970", "title": "Remove new line only if after a number", "body": "<p>Just remove the newline if it's preceded by a digit or comma:</p>\n\n<pre><code>perl -pe 'chomp if /[\\d,]$/' input-file &gt; output-file\n</code></pre>\n\n<ul>\n<li><code>-p</code> reads the input line by line and prints the result</li>\n<li><code>chomp</code> removes newline if present at the end</li>\n<li><code>\\d</code> matches a digit</li>\n<li><code>$</code> matches the end of line</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1478279610, "post_id": 40424004, "comment_id": 68105175, "body": "That will not work with any standard UNIX tool. When posting any solution, throwing out a standalone regexp is useless since all tools support different regexp flavors, some with different options to enable different flavors. Always show a regexp in the context of the tool that will support that regexp or it&#39;s just so much noise."}], "tags": [], "owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "is_accepted": false, "score": 0, "last_activity_date": 1478266407, "creation_date": 1478266407, "answer_id": 40424004, "question_id": 40423810, "link": "https://stackoverflow.com/questions/40423810/remove-new-line-only-if-after-a-number/40424004#40424004", "title": "Remove new line only if after a number", "body": "<p>You can use this regex:</p>\n\n<pre><code>(?&lt;!\\n)\\n(?!\\n)\n</code></pre>\n\n<p>and replace with empty string.</p>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 1, "last_activity_date": 1478266931, "last_edit_date": 1478266931, "creation_date": 1478266414, "answer_id": 40424007, "question_id": 40423810, "link": "https://stackoverflow.com/questions/40423810/remove-new-line-only-if-after-a-number/40424007#40424007", "title": "Remove new line only if after a number", "body": "<p>With <code>awk</code> by reading in paragraph mode and replacing all <code>\\n</code></p>\n\n<pre><code>$ awk -v RS= '{gsub(\"\\n\",\"\")} 1' ip.txt \n28,26166,25180,23645,22824,21257,20080,18921,17893,16702,15650,14647,13667,12691,11971,11179,10393,9885,9294,8930,8390,8079,7660,7341,6907,6425,6120,5789,5588,5267,4924,4581,4246,4025,3857,\n3423,3567,3636,3633,3714,3844,4543,5887,7287,8499,9746,10704,11658,12591,13379,13950,14679,14954,14756,14224,13921,13494,12849,12300,11970,12240,12867,13475,14310,15962,17624,19105,21075,\n</code></pre>\n\n<p><br>\nTo leave the blanks, set <code>ORS</code> to double newlines, however this will add an extra newline at end</p>\n\n<pre>\n$ awk -v RS= -v ORS='\\n\\n' '{gsub(\"\\n\",\"\")} 1' ip.txt \n28,26166,25180,23645,22824,21257,20080,18921,17893,16702,15650,14647,13667,12691,11971,11179,10393,9885,9294,8930,8390,8079,7660,7341,6907,6425,6120,5789,5588,5267,4924,4581,4246,4025,3857,\n\n3423,3567,3636,3633,3714,3844,4543,5887,7287,8499,9746,10704,11658,12591,13379,13950,14679,14954,14756,14224,13921,13494,12849,12300,11970,12240,12867,13475,14310,15962,17624,19105,21075,\n\n</pre>\n"}, {"comments": [{"owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "edited": false, "score": 0, "creation_date": 1478268355, "post_id": 40424618, "comment_id": 68097555, "body": "Sorry, I had removed the digit and comma as well."}], "tags": [], "owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "is_accepted": false, "score": 0, "last_activity_date": 1478268526, "last_edit_date": 1478268526, "creation_date": 1478268043, "answer_id": 40424618, "question_id": 40423810, "link": "https://stackoverflow.com/questions/40423810/remove-new-line-only-if-after-a-number/40424618#40424618", "title": "Remove new line only if after a number", "body": "<pre><code>perl -0pe 's/([\\d,])\\n([\\d,])/$1$2/sg' (file)\n</code></pre>\n\n<p>should do it.</p>\n\n<p>That is, read the file without line delimiters, treat the whole thing as one string and remove the newlines that are preceded and followed by a digit or comma.</p>\n"}], "owner": {"reputation": 1737, "user_id": 3657151, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a1eae85cb0bc9cf52b1b8cd64b31ec6?s=128&d=identicon&r=PG&f=1", "display_name": "user14492", "link": "https://stackoverflow.com/users/3657151/user14492"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 40423970, "answer_count": 4, "score": -1, "last_activity_date": 1478268621, "creation_date": 1478265848, "last_edit_date": 1478268621, "question_id": 40423810, "link": "https://stackoverflow.com/questions/40423810/remove-new-line-only-if-after-a-number", "title": "Remove new line only if after a number", "body": "<p>I've collected some CSV data from terminal but every line is only 80 characters long so it's not importing properly.</p>\n\n<p>Here's two lines of data:</p>\n\n<pre><code>28,26166,25180,23645,22824,21257,20080,18921,17893,16702,15650,14647,13667,12691\n,11971,11179,10393,9885,9294,8930,8390,8079,7660,7341,6907,6425,6120,5789,5588,5\n267,4924,4581,4246,4025,3857,\n\n3423,3567,3636,3633,3714,3844,4543,5887,7287,8499,9\n746,10704,11658,12591,13379,13950,14679,14954,14756,14224,13921,13494,12849,1230\n0,11970,12240,12867,13475,14310,15962,17624,19105,21075,\n</code></pre>\n\n<p>I wanna remove the newline char <strong>only</strong> if it's after any number or comma, but not if it's only on it's own, since that means it's a new line of CSV data.</p>\n\n<p>I couldn't figure out how to do this on shell with <code>sed</code>. If any other program like <code>awk</code> or <code>perl</code> is better for this scenario then feel free to show me a solution for that.</p>\n\n<p>Expected output:</p>\n\n<pre><code>28,26166,25180,23645,22824,21257,20080,18921,17893,16702,15650,14647,13667,12691,11971,11179,10393,9885,9294,8930,8390,8079,7660,7341,6907,6425,6120,5789,5588,5267,4924,4581,4246,4025,3857,\n\n3423,3567,3636,3633,3714,3844,4543,5887,7287,8499,9746,10704,11658,12591,13379,13950,14679,14954,14756,14224,13921,13494,12849,12300,11970,12240,12867,13475,14310,15962,17624,19105,21075,\n</code></pre>\n"}, {"tags": ["windows", "perl", "bugzilla"], "comments": [{"owner": {"reputation": 1140, "user_id": 3652270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d2d4efb04e4f9b398a92adc6df8d9a?s=128&d=identicon&r=PG&f=1", "display_name": "sanastasiadis", "link": "https://stackoverflow.com/users/3652270/sanastasiadis"}, "edited": false, "score": 0, "creation_date": 1478266023, "post_id": 40423467, "comment_id": 68095856, "body": "You probably need to search <a href=\"https://www.bugzilla.org/docs/4.4/en/html/api/Bugzilla/WebService/Bug.html#search\" rel=\"nofollow noreferrer\">bugzilla.org/docs/4.4/en/html/api/Bugzilla/WebService/&hellip;</a> The given example seems to do what you need."}, {"owner": {"reputation": 67, "user_id": 7035499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce95073f038a344aee6390999b05c539?s=128&d=identicon&r=PG&f=1", "display_name": "Gajiu", "link": "https://stackoverflow.com/users/7035499/gajiu"}, "reply_to_user": {"reputation": 1140, "user_id": 3652270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d2d4efb04e4f9b398a92adc6df8d9a?s=128&d=identicon&r=PG&f=1", "display_name": "sanastasiadis", "link": "https://stackoverflow.com/users/3652270/sanastasiadis"}, "edited": false, "score": 0, "creation_date": 1478266648, "post_id": 40423467, "comment_id": 68096329, "body": "Thank you so much you save my day. That&#39;s exactly what I wanted. I don&#39;t know how I missed that."}], "owner": {"reputation": 67, "user_id": 7035499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce95073f038a344aee6390999b05c539?s=128&d=identicon&r=PG&f=1", "display_name": "Gajiu", "link": "https://stackoverflow.com/users/7035499/gajiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478264794, "creation_date": 1478264794, "question_id": 40423467, "link": "https://stackoverflow.com/questions/40423467/is-it-possible-to-get-ids-of-bug-for-a-product-in-bugzilla-with-bugzillawebser", "title": "Is it possible to get Ids of bug for a product in Bugzilla with Bugzilla::WebService?", "body": "<p>I use Bugzilla::WebService to get the informations of my bugs. After a day of research I can't find the answer of my question which is : Can I get all the ids of the bugs of a certain product with WebService?\nThx</p>\n"}, {"tags": ["regex", "perl", "perl-data-structures"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1478258678, "post_id": 40421430, "comment_id": 68091351, "body": "Please <a href=\"https://stackoverflow.com/posts/40421430/edit\">edit</a> your question and show us example input and output."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1478258922, "post_id": 40421430, "comment_id": 68091498, "body": "&quot;But that&#39;s not working&quot; is a terrible description of your problem. What unexpected behaviour are you seeing? What output do you expect to see? Oh, and what is your input?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478259245, "post_id": 40421430, "comment_id": 68091675, "body": "Assuming <code>@tap</code> is the one with the short strings, and <code>@sig</code> has the long lines, your code does the right thing. The result might not look pretty if the lines don&#39;t have trailing newlines, but it&#39;s definitely producing some output for me."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1478259628, "post_id": 40421430, "comment_id": 68091911, "body": "Some thoughts on your code. 1/ You don&#39;t seem to need the <code>+</code> on the file open modes. 2/ You should be using 3-arg <code>open()</code> and lexical filehandles (<code>open my $myfile_fh, &#39;&lt;&#39;, $input_1</code>). 3/ You should check the results from your <code>open()</code> calls (<code>open ... or die $!</code>). 4/ Why iniitialise <code>@out</code> with a single element containing a space? 5/ It&#39;s generally easier to iterate over array elements than array indexes (<code>foreach my $tap (@taps) { @out = grep &#47;$tap&#47;, @sig }; ... }</code>)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1478260423, "post_id": 40421430, "comment_id": 68092351, "body": "@DaveCross 6/ make <code>@out</code> lexical inside of the loop <code>foreach my $tap (@taps) { my @out = grep &#47;$tap&#47;, @sig; print ... ; }</code> 7/ why are you using forward slashes for a numbered list?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478260546, "post_id": 40421430, "comment_id": 68092415, "body": "@simbabque: Yeah. I completely missed the lack of lexical variables. And you meant <code>@out</code> not <code>$out</code> :-)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478263321, "post_id": 40422350, "comment_id": 68094177, "body": "Thank you simbabque.. :)"}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478521167, "post_id": 40422350, "comment_id": 68174288, "body": "I have one more doubt here, If I am trying to do the reverse grepping, it is giving me output as the original file without any changes.Is it not possible to reverse grep if variable is present ??"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478522141, "post_id": 40422350, "comment_id": 68174890, "body": "@Manu I don&#39;t understand your question. Can you try to say it with different words please? Maybe give an example?"}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478522541, "post_id": 40422350, "comment_id": 68175114, "body": "Actually, I am trying to grep those lines which donnot have the variable.So, in the above example am trying to use grep(!/ /,@sig).But i am not able to grep those lines.                    foreach $i(0 .. $count){                                                                        @out = grep(!/$tap[$i]/, @sig);                                                                            print WRITE @out;                                                                              }"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478522628, "post_id": 40422350, "comment_id": 68175151, "body": "@Manu that is the same code you had in the question. Please tell me what&#39;s unclear to you now. Your problem was that your input had newline characters. The rest of your code wasn&#39;t pretty, but it should work."}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478522803, "post_id": 40422350, "comment_id": 68175252, "body": "Actually, I am trying to grep those lines which donot have the variable.So, in the above example am trying to use grep(!/ /,@sig).But i am not able to grep those lines.                                                                                foreach $i(0 .. $count){                                                                        @out = grep(!/$tap[$i]/, @sig);"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478522905, "post_id": 40422350, "comment_id": 68175318, "body": "@Manu did you understand my answer? You need to <code>chomp</code> your <code>@tap</code>."}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478523152, "post_id": 40422350, "comment_id": 68175512, "body": "Yes, I was able to do that Simbabque. We tried to grep those lines with variable.  But now in the same code I want to grep other lines which donot have the variable $tap. So, I am using grep( ! / $tap[$i]/). The output should be lines without the variable.But my output is the original file itself.  Hope you got my question?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478523667, "post_id": 40422350, "comment_id": 68175860, "body": "I see @Manu. But are yous till <code>chomp</code>ing the input? Doing <code>grep { !&#47;$tap[$i]&#47; } @sig</code> should be fine for that."}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478524352, "post_id": 40422350, "comment_id": 68176288, "body": "Yes, I am still  chomping the input.. I am trying to grep both with and without variable in the same foreach loop. Can I do that? I have tried in separate loops also,But it isn&#39;t giving the required output.Please help."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478524662, "post_id": 40422350, "comment_id": 68176502, "body": "Again, I don&#39;t understand @Manu. Please show the actual code you&#39;re using. You can use backticks <code>`</code> in your comment to format inline-code."}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478525252, "post_id": 40422350, "comment_id": 68176910, "body": "<code>foreach $i(0 .. $count){</code>    <code>@out = grep(&#47;$tap[$i]&#47;, @sig);   #grep lines with variable</code> <code>@in= grep(!&#47;$tap[$i]&#47;, @sig);  #grep lines without variable</code>     <code>print WRITE @out; </code> `}"}, {"owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "edited": false, "score": 0, "creation_date": 1478525362, "post_id": 40422350, "comment_id": 68176968, "body": "I am grepping one more array, say, @in, which doesn&#39;t include the variable $tap;Is this right way to do or not?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1478261402, "creation_date": 1478261402, "answer_id": 40422350, "question_id": 40421430, "link": "https://stackoverflow.com/questions/40421430/find-elememts-of-first-array-in-the-second-array-and-grep-the-lines-matched-with/40422350#40422350", "title": "Find elememts of first array in the second array and grep the lines matched with those of first array elements", "body": "<p>Your input one (<code>@tap</code>) contains linebreaks. That's why you don't get any match. You need to <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> each line after you read it to remove the line breaks.</p>\n\n<pre><code>@tap = &lt;MYFILE&gt;;\nchomp @tap;\n</code></pre>\n\n<p>Take a look at this:</p>\n\n<pre><code>use Data::Dumper;\n\nmy @tap = &lt;DATA&gt;;\nprint Dumper \\@tap;\n\n__DATA__\ncpu\nsoc\ndisk\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>$VAR1 = [\n          'cpu\n',\n          'soc\n',\n          'disk\n'\n        ];\n</code></pre>\n\n<p>If you add <code>chomp @tap</code> you'll get the following instead. The newlines are gone, and the patterns will match.</p>\n\n<pre><code>$VAR1 = [\n          'cpu',\n          'soc',\n          'disk'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1478270079, "last_edit_date": 1478270079, "creation_date": 1478264234, "answer_id": 40423277, "question_id": 40421430, "link": "https://stackoverflow.com/questions/40421430/find-elememts-of-first-array-in-the-second-array-and-grep-the-lines-matched-with/40423277#40423277", "title": "Find elememts of first array in the second array and grep the lines matched with those of first array elements", "body": "<p>It's possible to slightly simplify your code by combining all of your regex matches into one. You can also eliminate a lot of your intermediate variables.</p>\n\n<pre><code>open my $fh1, '&lt;', $input_1 or die $!;\nopen my $fh2, '&lt;', $input_2 or die $!;\nopen my $out_fh, '&gt;', 'wr'  or die $!;\n\nchomp(my @tap = &lt;$fh1&gt;);\n\nmy $re = join '|', @tap;  \n\nprint $out_fh grep /$re/i, &lt;$fh2&gt;;\n</code></pre>\n\n<p>Note: I've also added a <code>/i</code> option to the match operator. This means that the two lines that include \"SoC\" and \"Mobile\" will also match.</p>\n"}], "owner": {"reputation": 1, "user_id": 7114347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a685ee2e24bebc713a004a92ab9f0440?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/7114347/manu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1478270079, "creation_date": 1478258600, "last_edit_date": 1478261287, "question_id": 40421430, "link": "https://stackoverflow.com/questions/40421430/find-elememts-of-first-array-in-the-second-array-and-grep-the-lines-matched-with", "title": "Find elememts of first array in the second array and grep the lines matched with those of first array elements", "body": "<p>I have two arrays.One of them has just strings and the other has lines matching the strings at random places. How can I grep the matched lines of second array with the elements of first array? \n<strong>Input_1:</strong></p>\n\n<pre><code>cpu\nsoc\ndisk\nmobile\nprocessor\netc..\n</code></pre>\n\n<p><strong>Input 2:</strong></p>\n\n<pre><code>The cpu does all the important processings in a system.\nIt needs to be improved for processing.\nThere is also an SoC which does all the processing in a chip.\nI think you know well about that.\nNow,let us focus on someother thing.\nMobile is one of the world's famous electronic device.\nIts impact on growing technology is tremendous.\n</code></pre>\n\n<p>These are my two inputs.Both of them are stored in different arrays.\nNow I have to <strong>grep only the lines in input2 which contain elements of input1.</strong>\nI tried using the code, But while grep,it is giving me all the lines,but not the ones matched.</p>\n\n<pre><code>open(MYFILE,\"+&lt;$input_1\");\nopen(MYFILE2,\"+&lt;$input_2\");\nopen(WRITE,\"&gt;wr\");\n\n@tap= &lt;MYFILE&gt;;\n@sig=&lt;MYFILE2&gt;;\n\n@out=' ';\n$count=$#tap;\n\nforeach $i(0 .. $count){\n    @out = grep(/$tap[$i]/, @sig);\n\n    print WRITE @out;\n}\n</code></pre>\n\n<p>I don't know why I am not able to grep out from the second array? \nPlease help me out.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1478251300, "post_id": 40418797, "comment_id": 68086912, "body": "Please use inline code markup for the HTML tags and variable names in your prose. I was going to fix it, but I don&#39;t know if your input is <code>&lt;img</code> or <code>&amp;lt;img</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478251369, "post_id": 40418797, "comment_id": 68086938, "body": "Try using the <code>re &#39;debug&#39;</code> pragma. <a href=\"http://perldoc.perl.org/re.html#&#39;debug&#39;-mode\" rel=\"nofollow noreferrer\">perldoc.perl.org/re.html#&#39;debug&#39;-mode</a> or put your pattern into <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1533, "user_id": 7075994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UvYWN.png?s=128&g=1", "display_name": "c3st7n", "link": "https://stackoverflow.com/users/7075994/c3st7n"}, "is_accepted": false, "score": 4, "last_activity_date": 1478251918, "creation_date": 1478251918, "answer_id": 40419219, "question_id": 40418797, "link": "https://stackoverflow.com/questions/40418797/im-trying-to-understand-how-this-regular-expression-in-perl-creates-what-it-doe/40419219#40419219", "title": "I&#39;m trying to understand how this regular expression in Perl creates what it does", "body": "<p>The capture groups are numbered starting from the leftmost to the rightmost (ignore the fact that some are nested). Given your input, the capture groups are numbered as follows:</p>\n\n<p><code>$row =~ s/(\"(.+?)\")(.+?)(\"(.+?)\")/\"\"$3$1/;\n           1 2      3    4 5</code></p>\n\n<p>Also, the <code>?</code> after the <code>.+</code> means it will match the minimum it can to satisfy the pattern, in this case it will match up to the first double quote it finds. So we can see that it captures the following (ignore the single quotes):</p>\n\n<ol>\n<li>'\"1688.jpg\"'</li>\n<li>'1688.jpg'</li>\n<li>' src='</li>\n<li>'\"<a href=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\" rel=\"nofollow noreferrer\">http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg</a>\"'</li>\n<li>'<a href=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\" rel=\"nofollow noreferrer\">http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg</a>'</li>\n</ol>\n\n<p>Because this is a string substitution, the entire section of the input that was matched will be replaced by the second part of the regex pattern (i.e. <code>\"\"$3$1</code>). So we will replace (from the first double quote to the last double quote) this:</p>\n\n<p><code>\"1688.jpg\" src=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\"</code></p>\n\n<p>with:\n<code>\"\" src=\"1688.jpg\"</code></p>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 7114082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24d89a44d3e26b477731627cbdf49ec0?s=128&d=identicon&r=PG", "display_name": "SystemsWiki", "link": "https://stackoverflow.com/users/7114082/systemswiki"}, "edited": false, "score": 0, "creation_date": 1478263142, "post_id": 40419225, "comment_id": 68094064, "body": "Chris &amp; xxfelixxx, Response most appreciated as the regex and variables make sense and I realize I could have gotten by with...  $row =~ s/&quot;(.+?)&quot;(.+?)&quot;(.+?)&quot;/&quot;&quot;$2&quot;$1&quot;/;"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1478251931, "creation_date": 1478251931, "answer_id": 40419225, "question_id": 40418797, "link": "https://stackoverflow.com/questions/40418797/im-trying-to-understand-how-this-regular-expression-in-perl-creates-what-it-doe/40419225#40419225", "title": "I&#39;m trying to understand how this regular expression in Perl creates what it does", "body": "<p>Just start counting the groups starting from the left parenthesis to see what gets captured.  Here is a slightly annotated version:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $row = '&lt;img alt=\"1688.jpg\" src=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\" /&gt;';\n\n#           1 2   2 13   34 5   5 4\nmy $re = qr/(\"(.+?)\")(.+?)(\"(.+?)\")/;\n\n#          12      213   345                                                             54\n# &lt;img alt=\"1688.jpg\" src=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\" /&gt;';\n\n$row =~ $re;\nprint \"\\n\";\nprint \"\\$1 =&gt; '$1'\\n\";\nprint \"\\$2 =&gt; '$2'\\n\";\nprint \"\\$3 =&gt; '$3'\\n\";\nprint \"\\$4 =&gt; '$4'\\n\";\nprint \"\\$5 =&gt; '$5'\\n\";\n\n$row =~ s/$re/\"\"$3$1/;\nprint $row . \"\\n\";\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$1 =&gt; '\"1688.jpg\"'\n$2 =&gt; '1688.jpg'\n$3 =&gt; ' src='\n$4 =&gt; '\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\"'\n$5 =&gt; 'http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg'\n&lt;img alt=\"\" src=\"1688.jpg\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 1367563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b52b7b88f5b42282c495dc22b09582de?s=128&d=identicon&r=PG", "display_name": "slc84", "link": "https://stackoverflow.com/users/1367563/slc84"}, "is_accepted": false, "score": 0, "last_activity_date": 1478279211, "creation_date": 1478279211, "answer_id": 40428221, "question_id": 40418797, "link": "https://stackoverflow.com/questions/40418797/im-trying-to-understand-how-this-regular-expression-in-perl-creates-what-it-doe/40428221#40428221", "title": "I&#39;m trying to understand how this regular expression in Perl creates what it does", "body": "<p>As people have explained well before me, each time you use brackets you create a capture group. </p>\n\n<p>I find the best way to prevent confusion or having to count brackets is to explicitly not capture the stuff you don't need by putting <code>?:</code> after the opening bracket.</p>\n\n<pre><code>use Data::Dumper;\n\nmy $s = '&lt;img alt=\"1688.jpg\" src=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\" /&gt;';\n\nmy @row = $s =~ /(\"(.+?)\")(.+?)(\"(.+?)\")/;\n\n# only capture quoted things\nmy @row1 = $s =~ /(?:\"(.+?)\")(?:.+?)(?:\"(.+?)\")/;\n\nprint Dumper \\@row;\nprint Dumper \\@row1;\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 7114082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24d89a44d3e26b477731627cbdf49ec0?s=128&d=identicon&r=PG", "display_name": "SystemsWiki", "link": "https://stackoverflow.com/users/7114082/systemswiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1478279211, "creation_date": 1478250491, "last_edit_date": 1478253288, "question_id": 40418797, "link": "https://stackoverflow.com/questions/40418797/im-trying-to-understand-how-this-regular-expression-in-perl-creates-what-it-doe", "title": "I&#39;m trying to understand how this regular expression in Perl creates what it does", "body": "<p>$row contains </p>\n\n<pre><code>&amp;lt;img alt=\"1688.jpg\" src=\"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\" /&amp;gt;\n</code></pre>\n\n<p>After I execute the following statement</p>\n\n<pre><code>$row =~ s/(\"(.+?)\")(.+?)(\"(.+?)\")/\"\"$3$1/;\n</code></pre>\n\n<p><code>$row</code> contains <code>&amp;lt;img alt=\"\" src=\"1688.jpg\" /&amp;gt;</code></p>\n\n<p>Which is exactly what I want though I can't figure out how the regex manages to populate the following.</p>\n\n<pre><code>$1 -&gt; \"1688.jpg\"&lt;br&gt;\n$2 -&gt; 1688.jpg&lt;br&gt;\n$3 -&gt;  src= (it has a leading space)&lt;br&gt;\n$4 -&gt; \"http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg\"&lt;br&gt;\n$5 -&gt; http://res.cloudinary.com/stw/image/upload/v1478118784/1688.jpg&lt;br&gt;\n</code></pre>\n\n<p>I figure it wouldn't have taken me nearly so long to get it to work if I could have understood just how it was populating the variable. Might someone be so kind as to explain it to me?</p>\n"}, {"tags": ["sql", "regex", "perl", "firebird"], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1478249717, "creation_date": 1478249717, "answer_id": 40418574, "question_id": 40418312, "link": "https://stackoverflow.com/questions/40418312/convert-perl-regular-expressions-to-sql-regular-expressions/40418574#40418574", "title": "Convert Perl regular expressions to SQL regular expressions", "body": "<blockquote>\n  <p>[I] do not need full compatibility but at least quantifiers and character classes should be convertible.</p>\n</blockquote>\n\n<p>You are lucky, you may use character classes, <code>?</code>, <code>*</code>, <code>+</code>, <code>{exact_occurrences_number}</code>, <code>{min,}</code>, <code>{min,max}</code> quantifiers with <a href=\"http://www.firebirdsql.org/refdocs/langrefupd25-similar-to.html\" rel=\"nofollow noreferrer\">Firebird <code>SIMILAR TO</code> regex syntax</a>.</p>\n\n<p>The only trouble are Unicode category/property classes, you may only use POSIX character classes there:</p>\n\n<blockquote>\n  <p><code>&lt;predefined class name&gt;  ::=  ALPHA | UPPER | LOWER | DIGIT</code><br/>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>| ALNUM | SPACE | WHITESPACE</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2627, "user_id": 4236400, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/K94mB.jpg?s=128&g=1", "display_name": "Ren&#233; Hoffmann", "link": "https://stackoverflow.com/users/4236400/ren%c3%a9-hoffmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1478261162, "creation_date": 1478261162, "answer_id": 40422256, "question_id": 40418312, "link": "https://stackoverflow.com/questions/40418312/convert-perl-regular-expressions-to-sql-regular-expressions/40422256#40422256", "title": "Convert Perl regular expressions to SQL regular expressions", "body": "<p>I came to the following replacement rules (the order matters) to convert most Perl regular expressions to SQL syntax:</p>\n\n<p>At first, SQL special characters have to be escaped:</p>\n\n<ol>\n<li><code>_</code> > <code>\\_</code></li>\n<li><code>%</code> > <code>\\%</code></li>\n</ol>\n\n<p>Then, Perl special characters and character classes have to be replaced.</p>\n\n<ol start=\"3\">\n<li><code>.</code> > <code>_</code></li>\n<li><code>\\d</code>> <code>[:digit:]</code></li>\n<li><code>\\D</code> > <code>[^[:digit:]]</code></li>\n<li><code>\\w</code> > <code>[^[:whitespace:]]</code></li>\n<li><code>\\W</code> > <code>[:whitespace:]</code></li>\n<li><code>\\s</code> > <code>[:whitespace:]</code></li>\n<li><code>\\S</code> > <code>[^[:whitespace:]]</code></li>\n</ol>\n\n<p>Note: The default Perl escape character <code>\\</code> is used for <code>SIMILAR TO</code> here.</p>\n\n<p>Feel free, to extend my answer with further possible replacements.</p>\n"}], "owner": {"reputation": 2627, "user_id": 4236400, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/K94mB.jpg?s=128&g=1", "display_name": "Ren&#233; Hoffmann", "link": "https://stackoverflow.com/users/4236400/ren%c3%a9-hoffmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 40422256, "answer_count": 2, "score": 0, "last_activity_date": 1478261162, "creation_date": 1478248818, "question_id": 40418312, "link": "https://stackoverflow.com/questions/40418312/convert-perl-regular-expressions-to-sql-regular-expressions", "title": "Convert Perl regular expressions to SQL regular expressions", "body": "<p>I need to use Perl regular expressions in a Firebird database.</p>\n\n<p>Firebird RDBMS does support regular expressions by providing a <a href=\"http://www.firebirdsql.org/refdocs/langrefupd25-similar-to.html\" rel=\"nofollow noreferrer\"><code>SIMILAR TO</code>-condition</a>.\nUnfortunately, the SQL regular expression syntax in Firebird differs from Perl syntax.</p>\n\n<p><strong>Is it possible to convert Perl regular expressions to SQL regular expressions?</strong>\nI do not need full compatibility but at least quantifiers and character classes should be convertible.</p>\n"}, {"tags": ["perl", "garbage-collection", "perl-xs"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478232418, "post_id": 40414740, "comment_id": 68080045, "body": "Why do they think Perl would try to garbage collect the memory allocated by C++?    What exactly is the <i>it</i> you are asked to prove?"}, {"owner": {"reputation": 109, "user_id": 1654754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad605c7ae539da22fd573f4ebfbd78c5?s=128&d=identicon&r=PG", "display_name": "var", "link": "https://stackoverflow.com/users/1654754/var"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1478240981, "post_id": 40414740, "comment_id": 68082426, "body": "@ysth That perl would not garbage collect the memory allocated by C++"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478282767, "post_id": 40416615, "comment_id": 68106742, "body": "Re &quot;<i>that all memory to be used via the Perl XS API must use Perl&#39;s macros</i>&quot;, The OP&#39;s <code>mem</code> isn&#39;t such memory. That passage is referring to memory that Perl will need to deallocate. (For example, the buffer passed to <code>SvPV_set</code> must be allocted using Perl&#39;s allocator. However, <code>SvPV_set</code> is not something you&#39;d normally use.) The OP&#39;s <code>mem</code> can safely be allocated by any allocator. (You&#39;ll need to use corresponding deallocator to free it as always.)"}], "tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": true, "score": 3, "last_activity_date": 1478241075, "creation_date": 1478241075, "answer_id": 40416615, "question_id": 40414740, "link": "https://stackoverflow.com/questions/40414740/perl-xs-garbage-collection/40416615#40416615", "title": "Perl XS garbage collection", "body": "<p>I'm afraid that the people who wrote (and write) the Perl XS documentation probably consider it too obvious that Perl cannot magically detect memory allocation made in other languages (like C++) to document that explicitly. There's a bit in the <a href=\"http://perldoc.perl.org/perlguts.html#Memory-Allocation\" rel=\"nofollow noreferrer\">perlguts</a> documentation page that says that all memory to be used via the Perl XS API must use Perl's macros to do so that may help you argue.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1478478903, "last_edit_date": 1478478903, "creation_date": 1478281586, "answer_id": 40428875, "question_id": 40414740, "link": "https://stackoverflow.com/questions/40414740/perl-xs-garbage-collection/40428875#40428875", "title": "Perl XS garbage collection", "body": "<p>When you write XS code, you're writing C (or sometimes C++) code. You still need to write proper C/C++, which includes deallocating allocated memory when appropriate.</p>\n\n<hr>\n\n<p>The glue function you desire XS to create is the following:</p>\n\n<pre><code>void hello() {\n    dSP;                       // Declare and init SP, the stack pointer used by mXPUSHs.\n    char* mem = create_mem();\n    mXPUSHs(newSVpv(mem, 0));  // Create a scalar, mortalize it, and push it on the stack.\n    free(mem);                 // Free memory allocated by create_mem().\n    XSRETURN(1);\n}\n</code></pre>\n\n<p><code>newSVpv</code> makes a copy of <code>mem</code> rather than taking possession of it, so the above clearly shows that <code>free(mem)</code> is needed to deallocate <code>mem</code>.</p>\n\n<hr>\n\n<p>In XS, you could write that as</p>\n\n<pre><code>void hello()\nCODE:\n    {                          // A block is needed since we're declaring vars.\n        char* mem = create_mem();\n        mXPUSHs(newSVpv(mem, 0));\n        free(mem);\n        XSRETURN(1);\n    }\n</code></pre>\n\n<p>Or you could take advantage of XS features such as <code>RETVAL</code> and <code>CLEANUP</code>.</p>\n\n<pre><code>SV* hello()\n    char* mem;                 // We can get rid of the block by declaring vars here.\nCODE:\n    mem = create_mem();\n    RETVAL = newSVpv(mem, 0);  // Values returned by SV* subs are automatically mortalized.\nOUTPUT:\n    RETVAL\nCLEANUP:                       // Happens after RETVAL has been converted\n    free(mem);                 //   and the converted value has been pushed onto the stack.\n</code></pre>\n\n<p>Or you could also take advantage of the typemap, which defines how to convert the returned value into a scalar.</p>\n\n<pre><code>char* hello()\nCODE:\n    RETVAL = create_mem();\nOUTPUT:\n    RETVAL\nCLEANUP:\n    free(RETVAL);\n</code></pre>\n\n<p>All three of these are perfectly acceptable.</p>\n\n<hr>\n\n<p>A note on mortals.</p>\n\n<p>Mortalizing is a delayed reference count decrement. If you were to decrement the <code>SV</code> created by <code>hello</code> before <code>hello</code> returns, it would get deallocated before <code>hello</code> returns. By mortalizing it instead, it won't be deallocated until the caller has a chance to inspect it or take possession of it (by increasing its reference count).</p>\n"}], "owner": {"reputation": 109, "user_id": 1654754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad605c7ae539da22fd573f4ebfbd78c5?s=128&d=identicon&r=PG", "display_name": "var", "link": "https://stackoverflow.com/users/1654754/var"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 40416615, "answer_count": 2, "score": 1, "last_activity_date": 1478478903, "creation_date": 1478229514, "question_id": 40414740, "link": "https://stackoverflow.com/questions/40414740/perl-xs-garbage-collection", "title": "Perl XS garbage collection", "body": "<p>I had to deal with a really old codebase in my company which had C++ apis exposed via perl.</p>\n\n<p>In on of the code reviews, I suggested it was necessary to garbage collect memory which was being allocated in c++.</p>\n\n<p>Here is the skeleton of the code:</p>\n\n<pre><code>char* convert_to_utf8(char *src, int length) {\n    .\n    .\n    .\n    length = get_utf8_length(src);\n    char *dest = new char[length];\n    .\n    .\n    // No delete\n    return dest;\n}\n</code></pre>\n\n<p>Perl xs definition:</p>\n\n<pre><code>PROTOTYPE: ENABLE\n\nchar * _xs_convert_to_utf8(src, length)\n    char *src\n    int length\n\nCODE:\n    RETVAL = convert_to_utf8(src, length)\n\nOUTPUT:\n    RETVAL\n</code></pre>\n\n<p>so, I had a comment that the memory created in the c++ function will not garbage collected by Perl. And 2 java developers think it will crash since perl will garbage collect the memory allocated by c++. I suggested the following code.</p>\n\n<pre><code>CLEANUP:\n    delete[] RETVAL\n</code></pre>\n\n<p>Am I wrong here?</p>\n\n<p>I also ran this code and showed them the increasing memory utilization, with and without the CLEANUP section. But, they are asking for exact documentation which proves it and I couldn't find it.</p>\n\n<p>Perl Client:</p>\n\n<pre><code>use ExtUtils::testlib;\nuse test;\n\nfor (my $i=0; $i&lt;100000000;$i++) {\n    my $a = test::hello();\n}\n</code></pre>\n\n<p>C++ code:</p>\n\n<pre><code>#define PERL_NO_GET_CONTEXT\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n\n#include \"ppport.h\"\n#include &lt;stdio.h&gt;\n\nchar* create_mem() {\n    char *foo = (char*)malloc(sizeof(char)*150);\n    return foo;\n}\n</code></pre>\n\n<p>XS code:</p>\n\n<pre><code>MODULE = test       PACKAGE = test      \n    char * hello()\nCODE:\n    RETVAL = create_mem();\nOUTPUT:\n    RETVAL\nCLEANUP:\n    free(RETVAL);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1478251264, "post_id": 40414018, "comment_id": 68086888, "body": "Can you provide us with some (cut-down if necessary) input along with the output that you want from that input. It&#39;s very hard to help when you can&#39;t see the data you&#39;re dealing with."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478270071, "post_id": 40414018, "comment_id": 68098813, "body": "@DaveCross I&#39;ve provided the input file; it&#39;s just a general fasta file containing genetic sequence. Thanks."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478272746, "post_id": 40414018, "comment_id": 68100682, "body": "I am confused: The first expected line (the one for <code>crispr_1</code>) is: <code>CATTTTCTCTCCCATATTATAGG</code> but there are no consecutive sequence in the input file you show matching that. How did you arrive at that specific sequence?"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478279019, "post_id": 40414018, "comment_id": 68104849, "body": "@H&#229;konH&#230;gland Good catch over there. I did not attempt to match the sequence directly to the file; so I didn&#39;t notice that. The specific sequence is like a hint given to me, to know what is the first few sequences I would expect."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478279606, "post_id": 40414018, "comment_id": 68105172, "body": "@H&#229;konH&#230;gland I think I found the reason for the inconsistency, it was expecting me to print out the 23-kmers that appear only &#39;one time&#39; in the whole sequence. That is why my output doesn&#39;t match the expected one."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1478294818, "post_id": 40414018, "comment_id": 68112332, "body": "Your &quot;expected result&quot; is totally unclear, on the other hand the last attempt that returns <code>CATTTTCTCTCCCATATTATAGG</code>, <code>ATTTTCTCTCCCATATTATAGGG</code>, <code>TATTGTGCTCTTTGATTTTTTGG</code> seems correct."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1478295724, "post_id": 40414018, "comment_id": 68112684, "body": "@CasimiretHippolyte I&#39;ve updated the question with more descriptions. While the last attempt seemed to be correct, the code is unable to distinguish between duplicated (kmer that appears &gt; 1 time) and unique (kmer that appear just 1 time) results. The expected result only prints out the unique kmer, which only appear 1 time. And I do not understand why the code isn&#39;t counting correctly. Thanks."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478296829, "post_id": 40414018, "comment_id": 68113120, "body": "I just reformatted your code. It looked randomly indented to me. If you don&#39;t like it, feel free to revert my edit. I used <a href=\"http://perltidy.sourceforge.net/\" rel=\"nofollow noreferrer\"><code>perltidy</code></a> in case you&#39;re wondering."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478299829, "post_id": 40414018, "comment_id": 68114064, "body": "@Sunny Please fix the expected output so that it matches with the given input file. Then it will be easier to understand what you are trying to achieve :)"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478301100, "post_id": 40414018, "comment_id": 68114406, "body": "@H&#229;konH&#230;gland The input file is just a small part of the whole fasta file, I just posted it so people have an idea what the format looks like. It&#39;s impossible for me to post the whole file as it was just too big. So what I wanted is just a way to print out 1000 &#39;unique&#39; 23kmers ending with GG that each only appear once in a large drosophila gene sequence. My current output file seems to just look for all the 23kmers ending with GG and does not even count correctly. Hopefully this would explain what I want to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478233729, "post_id": 40415037, "comment_id": 68080301, "body": "Eric this methodology doesn&#39;t work, it will print out blank fasta file."}], "tags": [], "owner": {"reputation": 1, "user_id": 6768738, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792083101050387/picture?type=large", "display_name": "Yin  Eric", "link": "https://stackoverflow.com/users/6768738/yin-eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1478232160, "last_edit_date": 1478232160, "creation_date": 1478231737, "answer_id": 40415037, "question_id": 40414018, "link": "https://stackoverflow.com/questions/40414018/perl-program-to-look-for-k-mer-with-specific-sequence/40415037#40415037", "title": "Perl program to look for k-mer with specific sequence", "body": "<p>Actually, this code line </p>\n\n<pre><code>$sequence =~m/([ACTG]{21}[G]{2})/g;\n</code></pre>\n\n<p>this line is just for the regex match, if you try to print this <code>$sequence</code>, it will surely print out the original result.</p>\n\n<p>please add the code segement like this</p>\n\n<pre><code>if($sequence =~/([ACTG]{21}[G]{2}$)/g) \n{\n\n\n}#please remember to match the end with $.\n</code></pre>\n\n<p>BTW,It looks like the multiple for loop to parse this data is not very reasonable, the parse speed is without the best-efficiency.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478301703, "post_id": 40432745, "comment_id": 68114554, "body": "What I am trying to achieve is to print out the first 1000 23kmer sequences end with GG that only appears 1 time. Thanks!"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478308890, "post_id": 40432745, "comment_id": 68116128, "body": "@Sunny I&#39;ve thought it over and my solution won&#39;t print the <i>first</i> kmers ending in GG. It prints any of the kmers that appear once in the file in random order. If you need the <i>first</i> 1000, then a different solution would be necessary."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478314920, "post_id": 40432745, "comment_id": 68116954, "body": "I checked the result output from your updated code, and the head -100 and the tail -100 do match up with the expected output result. And it doesn&#39;t seem to produce in random order as well. So I don&#39;t think there&#39;s something wrong with this solution. Thanks a lot for checking!"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478320893, "post_id": 40432745, "comment_id": 68117668, "body": "I used the diff command and made sure there is no difference between the expected output and the output this code produces. Thanks!"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478465653, "post_id": 40432745, "comment_id": 68154289, "body": "Just for future reference, if I&#39;m looking to print out only the 23-kmers with unique 12 nucleotide endings, do I just change the regex to ($kmer =~ /.{10}GG$/) ? Thanks."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1478478750, "post_id": 40432745, "comment_id": 68157921, "body": "I tried out the code, it doesn&#39;t seem to work as expected."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 2, "last_activity_date": 1478472518, "last_edit_date": 1478472518, "creation_date": 1478299598, "answer_id": 40432745, "question_id": 40414018, "link": "https://stackoverflow.com/questions/40414018/perl-program-to-look-for-k-mer-with-specific-sequence/40432745#40432745", "title": "Perl program to look for k-mer with specific sequence", "body": "<p>I'm not sure I understand your question completely, but could the following be what you need.</p>\n\n<pre><code>&lt;FASTA&gt;; # discard 'first' 'empty' record\n\nmy %data;\nwhile (my $line = &lt;FASTA&gt;){\n    chomp $line;\n    my($header, @seq) = split(/\\n/, $line);\n    my $sequence = join '', @seq;\n\n    for my $i (0 .. length($sequence) - $k) {\n        my $kmer = substr($sequence, $i, $k);\n\n        $data{$kmer}++ if $kmer =~ /GG$/;\n    }\n}\nmy $i = 0;\nfor my $kmer (sort {$data{$b} &lt;=&gt; $data{$a}} keys %data) {\n    printf \"crispr_%d\\n%s appears %d times\\n\", ++$i, $kmer, $data{$kmer};\n    last if $i == 1000; \n}\n</code></pre>\n\n<p>Some output on a file I have is:</p>\n\n<pre><code>crispr_1\nggttttccggcacccgggcctgg appears 4 times\ncrispr_2\nccgagctgggcgagaagtagggg appears 4 times\ncrispr_3\ngccgagctgggcgagaagtaggg appears 4 times\ncrispr_4\ngcacccgggcctgggtggcaggg appears 4 times\ncrispr_5\nagcagcgggatcgggttttccgg appears 4 times\ncrispr_6\ngctgggcgagaagtaggggaggg appears 4 times\ncrispr_7\ncccttctgcttcagtgtgaaagg appears 4 times\ncrispr_8\ngtggcagggaagaatgtgccggg appears 4 times\ncrispr_9\ngatcgggttttccggcacccggg appears 4 times\ncrispr_10\ntgagggaaagtgctgctgctggg appears 4 times\ncrispr_11\nagctgggcgagaagtaggggagg appears 4 times\n\n. . . .\n\nggcacccgggcctgggtggcagg appears 4 times\ncrispr_50\ngaatctctttactgcctggctgg appears 4 times\ncrispr_51\naccacaacattgacagttggtgg appears 2 times\ncrispr_52\ncaacattgacagttggtggaggg appears 2 times\ncrispr_53\ncatgctcatcgtatctgtgttgg appears 2 times\ncrispr_54\ngattaatgaagtggttattttgg appears 2 times\ncrispr_55\ngaaaccacaacattgacagttgg appears 2 times\ncrispr_56\naacattgacagttggtggagggg appears 2 times\ncrispr_57\ngacttgatcgattaatgaagtgg appears 2 times\ncrispr_58\nacaacattgacagttggtggagg appears 2 times\ncrispr_59\ngaaccatatattgttatcactgg appears 2 times\ncrispr_60\nccacagcgcccacttcaaggtgg appears 1 times\ncrispr_61\nctgctcctgggtgtgagcagagg appears 1 times\ncrispr_62\nccatatattatctgtggtttcgg appears 1 times\n\n. . . .\n</code></pre>\n\n<p><strong>Update</strong>\nTo get the results you mentioned in your comment (below), replace the output code with:</p>\n\n<pre><code>my $i = 1;\n\nwhile (my ($kmer, $count) = each %data) {\n    next unless $count == 1;\n    print \"crispr_$i\\n$kmer\\n\";\n    last if $i++ == 1000;\n}\n</code></pre>\n\n<p><strong>To answer</strong> my own comment to get <em>first</em> 1000.</p>\n\n<pre><code>&lt;FASTA&gt;; # discard 'first' 'empty' record\n\nmy %seen;\nmy @kmers;\nwhile (my $line = &lt;FASTA&gt;){\n    chomp $line;\n    my($header, @seq) = split(/\\n/, $line);\n    my $sequence = join '', @seq;\n\n    for my $i (0 .. length($sequence) - $k) {\n        my $kmer = substr($sequence, $i, $k);\n\n        if ($kmer =~ /GG$/) {\n            push @kmers, $kmer unless $seen{$kmer}++;\n        }\n    }\n}\n\nmy $i = 1;\nfor my $kmer (@kmers) {\n    next unless $seen{$kmer} == 1;\n    print \"crispr_$i\\n$kmer\\n\";\n    last if $i++ == 1000;\n}\n</code></pre>\n\n<p><strong>Answer</strong> To check for uniqueness of final 12 chars ending in GG, the code below achieves that.</p>\n\n<pre><code>        if ($kmer =~ /(.{10}GG)$/) {\n            my $substr = $1;\n            push @kmers, $kmer unless $seen{$substr}++;\n        }\n\nmy $i = 1;\nfor my $kmer (@kmers) {\n    my $substr = substr $kmer, -12;\n    next unless $seen{$substr} == 1;\n    print \"crispr_$i\\n$kmer\\n\";\n    last if $i++ == 1000;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 40432745, "answer_count": 2, "score": 1, "last_activity_date": 1478472518, "creation_date": 1478223570, "last_edit_date": 1478308100, "question_id": 40414018, "link": "https://stackoverflow.com/questions/40414018/perl-program-to-look-for-k-mer-with-specific-sequence", "title": "Perl program to look for k-mer with specific sequence", "body": "<p>I am trying to enhance a perl program I have previously written so that it recognizes top 1000 length 23 k-mers that ends with GG and print out the k-mers that only appears <strong>once</strong> in the sequence. However, no matter where I add the reg exp, I am unable to get the expected result. </p>\n\n<p>The code I have:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $k           = 23;\nmy $input       = 'Fasta.fasta';\nmy $output      = 'Fasta2.fasta';\nmy $match_count = 0;\n\n#Open File\nunless ( open( FASTA, \"&lt;\", $input ) ) {\n    die \"Unable to open fasta file\", $!;\n}\n\n#Unwraps the FASTA format file\n$/ = \"&gt;\";\n\n#Separate header and sequence\n#Remove spaces\nunless ( open( OUTPUT, \"&gt;\", $output ) ) {\n    die \"Unable to open file\", $!;\n}\n\n&lt;FASTA&gt;;    # discard 'first' 'empty' record\n\nmy %seen;\nwhile ( my $line = &lt;FASTA&gt; ) {\n    chomp $line;\n    my ( $header, @seq ) = split( /\\n/, $line );\n    my $sequence = join '', @seq;\n\n    for ( length($sequence) &gt;= $k ) {\n        $sequence =~ m/([ACTG]{21}[G]{2})/g;\n\n        for my $i ( 0 .. length($sequence) - $k ) {\n            my $kmer = substr( $sequence, $i, $k );\n\n            ##while ($kmer =~ m/([ACTG]{21}[G]{2})/g){\n            $match_count = $match_count + 1;\n            print OUTPUT \"&gt;crispr_$match_count\", \"\\n\", \"$kmer\", \"\\n\" unless $seen{$kmer}++;\n        }\n    }\n}\n</code></pre>\n\n<p>The input fasta file looks like this:</p>\n\n<pre><code>&gt; &gt;2L type=chromosome_arm; loc=2L:1..23011544; ID=2L;  dbxref=REFSEQ:NT_033779,GB:AE014134; MD5=bfdfb99d39fa5174dae1e2ecd8a231cd; length=23011544; release=r5.54; species=Dmel;\nCGACAATGCACGACAGAGGAAGCAGAACAGATATTTAGATTGCCTCTCAT\nTTTCTCTCCCATATTATAGGGAGAAATATGATCGCGTATGCGAGAGTAGT\nGCCAACATATTGTGCTCTTTGATTTTTTGGCAACCCAAAATGGTGGCGGA\nTGAACGAGATGATAATATATTCAAGTTGCCGCTAATCAGAAATAAATTCA\nTTGCAACGTTAAATACAGCACAATATATGATCGCGTATGCGAGAGTAGTG\nCCAACATATTGTGCTAATGAGTGCCTCTCGTTCTCTGTCTTATATTACCG\nCAAACCCAAAAAGACAATACACGACAGAGAGAGAGAGCAGCGGAGATATT\nTAGATTGCCTATTAAATATGATCGCGTATGCGAGAGTAGTGCCAACATAT\nTGTGCTCTCTATATAATGACTGCCTCTCATTCTGTCTTATTTTACCGCAA\nACCCAAATCGACAATGCACGACAGAGGAAGCAGAACAGATATTTAGATTG\nCCTCTCATTTTCTCTCCCATATTATAGGGAGAAATATGATCGCGTATGCG\nAGAGTAGTGCCAACATATTGTGCTCTTTGATTTTTTGGCAACCCAAAATG\nGTGGCGGATGAACGAGATGATAATATATTCAAGTTGCCGCTAATCAGAAA\nTAAATTCATTGCAACGTTAAATACAGCACAATATATGATCGCGTATGCGA\nGAGTAGTGCCAACATATTGTGCTAATGAGTGCCTCTCGTTCTCTGTCTTA\nTATTACCGCAAACCCAAAAAGACAATACACGACAGAGAGAGAGAGCAGCG\nGAGATATTTAGATTGCCTATTAAATATGATCGCGTATGCGAGAGTAGTGC\nCAACATATTGTGCTCTCTATATAATGACTGCCTCTCATTCTGTCTTATTT\nTACCGCAAACCCAAATCGACAATGCACGACAGAGGAAGCAGAACAGATAT\n</code></pre>\n\n<p>and so on...</p>\n\n<p>The expected outcome (print out the 23k-mers with GG ending that only appear <strong>once</strong> in the sequence) I am hoping to get:</p>\n\n<pre><code>&gt;crispr_1\nGGGTGGAGCTCCCGAAATGCAGG\n&gt;crispr_2\nTTAATAAATATTGACACAGCGGG\n&gt;crispr_3\nATCGTGGGGCGTTTTGTGAAAGG\n&gt;crispr_4\nAGTTTTTCACATAATCAGACAGG\n&gt;crispr_5\nGTGTTGGATGAGTGTCCTCTGGG\n&gt;crispr_6\nATAGGTTGGTTGTTTTAAAAGGG\n&gt;crispr_7\nAAATTTTTGTTGCCACTGAATGG\n&gt;crispr_8\nAAGTTTCGAACTACGATGGTTGG\n&gt;crispr_9\nCATGCTTTGTGGAAATAAGTCGG\n&gt;crispr_10\nCACAGTGGGTGTTTGCACCTCGG\n.... and so on\n</code></pre>\n\n<p>The current code I did create a fasta file with following:</p>\n\n<pre><code>&gt;crispr_1\nCGACAATGCACGACAGAGGAAGC\n&gt;crispr_2\nGACAATGCACGACAGAGGAAGCA\n&gt;crispr_3\nACAATGCACGACAGAGGAAGCAG\n&gt;crispr_4\nCAATGCACGACAGAGGAAGCAGA\n&gt;crispr_5\nAATGCACGACAGAGGAAGCAGAA\n&gt;crispr_6\nATGCACGACAGAGGAAGCAGAAC\n&gt;crispr_7\nTGCACGACAGAGGAAGCAGAACA\n&gt;crispr_8\nGCACGACAGAGGAAGCAGAACAG\n&gt;crispr_9\nCACGACAGAGGAAGCAGAACAGA\n&gt;crispr_10\nACGACAGAGGAAGCAGAACAGAT\n.... and so on\n</code></pre>\n\n<p>while if I remove the </p>\n\n<pre><code>for (length($sequence) &gt;=$k){\n$sequence =~m/([ACTG]{21}[G]{2})/g;\n</code></pre>\n\n<p>and add the ##while ($kmer =~ m/([ACTG]{21}[G]{2})/g){</p>\n\n<pre><code> while ($kmer =~ m/([ACTG]{21}[G]{2})/g){\n</code></pre>\n\n<p>I am getting fasta file (with results which is not numbered correctly and unable to distinguish between duplicated and unique sequences):</p>\n\n<pre><code>&gt;crispr_1\nCATTTTCTCTCCCATATTATAGG\n&gt;crispr_2\nATTTTCTCTCCCATATTATAGGG\n&gt;crispr_3\nTATTGTGCTCTTTGATTTTTTGG\n&gt;crispr_4\nGATTTTTTGGCAACCCAAAATGG\n&gt;crispr_5\nTTTTTGGCAACCCAAAATGGTGG\n&gt;crispr_6\nTTGGCAACCCAAAATGGTGGCGG\n&gt;crispr_7\nACGACAGAGAGAGAGAGCAGCGG\n&gt;crispr_8\nAAATCGACAATGCACGACAGAGG\n&gt;crispr_91\nTATTGTGATCTTCGATTTTTTGG\n&gt;crispr_93\nTTTTTGGCAACCCAAAATGGAGG\n.... and so on\n</code></pre>\n\n<p>I have attempted to move the regex around my code, but none of them generated the expected result. I do not know what I did wrong over here. I have not add the exit the program when count reaches 1000 into the code yet. </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["xml", "perl", "parsing", "format"], "comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1478547734, "post_id": 40412736, "comment_id": 68190989, "body": "When I think &quot;preserving line breaks&quot; this isn&#39;t at all what comes to mind.  Here you&#39;re looking to preserve <i>encodings</i> that coincidentally represent CR/LF characters."}, {"owner": {"reputation": 988, "user_id": 560599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1037a2b6275a137fcaf5b560fa5ea427?s=128&d=identicon&r=PG", "display_name": "mghicks", "link": "https://stackoverflow.com/users/560599/mghicks"}, "edited": false, "score": 1, "creation_date": 1478626288, "post_id": 40412736, "comment_id": 68230214, "body": "It looks like XML::DOM sets a default handler to expand everything (see DOM.pm lines 2054-58).  Have you tried fiddling with that to get the noexpand behavior you want?"}, {"owner": {"reputation": 6636, "user_id": 204479, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/729dc65f76ffd3e4f82e7ba1065cdc23?s=128&d=identicon&r=PG", "display_name": "Warpin", "link": "https://stackoverflow.com/users/204479/warpin"}, "edited": false, "score": 0, "creation_date": 1478890295, "post_id": 40412736, "comment_id": 68346892, "body": "that part of XML::DOM doesn&#39;t seem to quite work right - thanks for the suggestion though"}], "answers": [{"comments": [{"owner": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1479143742, "post_id": 40554365, "comment_id": 68424033, "body": "You can comment this on answer by zdim or edit the answer to improve."}, {"owner": {"reputation": 6636, "user_id": 204479, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/729dc65f76ffd3e4f82e7ba1065cdc23?s=128&d=identicon&r=PG", "display_name": "Warpin", "link": "https://stackoverflow.com/users/204479/warpin"}, "reply_to_user": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1479167172, "post_id": 40554365, "comment_id": 68435062, "body": "As you can tell by the &#39;answered&#39; timestamp, this answer predates zdim&#39;s answer."}, {"owner": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1479185223, "post_id": 40554365, "comment_id": 68439482, "body": "Ohh, my apologies. (If wondering, it&#39;s not my downvote, just mentioning in case)."}], "tags": [], "owner": {"reputation": 6636, "user_id": 204479, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/729dc65f76ffd3e4f82e7ba1065cdc23?s=128&d=identicon&r=PG", "display_name": "Warpin", "link": "https://stackoverflow.com/users/204479/warpin"}, "is_accepted": false, "score": -1, "last_activity_date": 1478890252, "creation_date": 1478890252, "answer_id": 40554365, "question_id": 40412736, "link": "https://stackoverflow.com/questions/40412736/read-xml-from-and-to-file-while-preserving-format/40554365#40554365", "title": "read XML from and to file while preserving format", "body": "<p>FYI, I was able to do this by switching to different XML parser.  Now using XML::LibXML.</p>\n\n<p>Syntax is similar, except it's 'parse_file' instead of 'parsefile', and instead of 'printToFileHandle' you use 'toFile' with a filename.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1479117261, "last_edit_date": 1479117261, "creation_date": 1478898289, "answer_id": 40556199, "question_id": 40412736, "link": "https://stackoverflow.com/questions/40412736/read-xml-from-and-to-file-while-preserving-format/40556199#40556199", "title": "read XML from and to file while preserving format", "body": "<p>Use <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\">XML::LibXML</a>, for example. The main modules that get involved are <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0128/lib/XML/LibXML/Parser.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Parser</a> and <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0128/lib/XML/LibXML/DOM.pod\" rel=\"nofollow noreferrer\">XML::LibXML::DOM</a> (along with others). The returned object is generally <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0128/lib/XML/LibXML/Document.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Document</a></p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nuse XML::LibXML;\n\nmy $inputPath  = 'with_encodings.xml';\nmy $outputPath = 'keep_encodings.xml';\n\nmy $reader = XML::LibXML-&gt;new();\nmy $doc = $reader-&gt;load_xml(location =&gt; $inputPath, no_blanks =&gt; 1); \n\nprint $doc-&gt;toString();\n\nmy $state = $doc-&gt;toFile($outputPath);\n</code></pre>\n\n<p>We don't have to first create an object but can directly say <code>XML::LibXML-&gt;load_xml</code>. I do it as an example since this way one can then use methods on <code>$reader</code> to set up encodings (for example), before parsing but outside of the constructor.</p>\n\n<p>This module is also far more convenient for processing.  </p>\n\n<p>The <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\">XML::Twig</a> should also leave encodings, and is also far better for processing.</p>\n"}], "owner": {"reputation": 6636, "user_id": 204479, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/729dc65f76ffd3e4f82e7ba1065cdc23?s=128&d=identicon&r=PG", "display_name": "Warpin", "link": "https://stackoverflow.com/users/204479/warpin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 40556199, "answer_count": 2, "score": 6, "last_activity_date": 1479130647, "creation_date": 1478214541, "last_edit_date": 1479130647, "question_id": 40412736, "link": "https://stackoverflow.com/questions/40412736/read-xml-from-and-to-file-while-preserving-format", "title": "read XML from and to file while preserving format", "body": "<p>I use this perl code to read XML from a file, and then write to another file (my full script has code to add attributes):</p>\n\n<pre><code>#!usr/bin/perl -w\n\nuse strict;\nuse XML::DOM;\nuse XML::Simple;\n\nmy $num_args = $#ARGV + 1;\n\nif ($num_args != 2) {\n  print \"\\nUsage: ModifyXML.pl inputXML outputXML\\n\";\n  exit;\n}\n\nmy $inputPath = $ARGV[0];\nmy $outputPath = $ARGV[1];\n\nopen(inputXML, \"$inputPath\") || die \"Cannot open $inputPath \\n\";\n\nmy $parser = XML::DOM::Parser-&gt;new();\nmy $data = $parser-&gt;parsefile($inputPath) || die \"Error parsing XML File\";\n\nopen my $fh, '&gt;:utf8', \"$outputPath\" or die \"Can't open $outputPath for writing: $!\\n\";\n$data-&gt;printToFileHandle($fh);\n\nclose(inputXML);\n</code></pre>\n\n<p>however this doesn't preserve characters like line breaks.  For example, this XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Test&gt;\n    &lt;Notification Content=\"test1     testx &amp;#xD;&amp;#xA;test2&amp;#xD;&amp;#xA;test3&amp;#xD;&amp;#xA;\" Type=\"Test1234\"&gt;\n    &lt;/Notification&gt;\n&lt;/Test&gt;\n</code></pre>\n\n<p>becomes this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Test&gt;\n    &lt;Notification Content=\"test1     testx \n\ntest2\n\ntest3\n\n\" Type=\"Test1234\"&gt;\n    &lt;/Notification&gt;\n&lt;/Test&gt;\n</code></pre>\n\n<p>I suspect I'm not writing to file properly.</p>\n"}, {"tags": ["json", "perl"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1479329278, "last_edit_date": 1479329278, "creation_date": 1478210319, "answer_id": 40411945, "question_id": 40411794, "link": "https://stackoverflow.com/questions/40411794/writing-a-hash-for-output-data-to-json/40411945#40411945", "title": "Writing a hash for output data to JSON", "body": "<p>You need a hashref, with the sole key's value being an arrayref, containing hashrefs as elements.</p>\n\n<pre><code>my @list = (1..2);\n\nmy $data-&gt;{data} = [ map { { data_point =&gt; $_ } } @list ];\n\nuse Data::Dumper;\nprint Dumper $data;\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> builds the list of hashrefs <code>{ data_point =&gt; $_ }</code>, that is made into an arrayref by <code>[ ]</code>, which is then assigned as the value to the key <code>data</code>.  </p>\n\n<p>We may omit <code>''</code> for keys by the courtesy of <code>=&gt;</code> operator, since its left-hand-side argument is treated as quoted. So <code>data</code> works the same as <code>'data'</code>.  See <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\">Comma operator in perlop</a>.</p>\n\n<p>This makes what you ask, what is checked using <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>. For more keys than just <code>'data'</code> you can put the line in a loop, and for varied data description strings can use a sub inside <code>map</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1478213584, "creation_date": 1478213584, "answer_id": 40412560, "question_id": 40411794, "link": "https://stackoverflow.com/questions/40411794/writing-a-hash-for-output-data-to-json/40412560#40412560", "title": "Writing a hash for output data to JSON", "body": "<p>From list you create array of hashes (1). Then you put that array into another hash (2):</p>\n\n<pre><code>my @list =  ( 1..2 );\nmy @data;\npush @data, { data_point =&gt; $_ }   for( @list );  # (1)\n\nmy $result =  { data =&gt; \\@data };                 # (2)\n</code></pre>\n\n<p>Hash may contain only scalar values and it can not contain arrays. So here we store reference of our array: <code>\\@data</code></p>\n"}], "owner": {"reputation": 1169, "user_id": 1160838, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7cb3f2847bb5f43b838a6ffab73828a?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1160838/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 40411945, "answer_count": 2, "score": 0, "last_activity_date": 1479329278, "creation_date": 1478209644, "question_id": 40411794, "link": "https://stackoverflow.com/questions/40411794/writing-a-hash-for-output-data-to-json", "title": "Writing a hash for output data to JSON", "body": "<p>I need to output JSON from a perl program in a certain format. The catch is there's a loop involved. \nHere's the format:</p>\n\n<pre><code>{\"data\":[\n  {\n    \"data_point\":\"1\"\n  }\n  {\n    \"data_point\":\"2\"\n  }\n]} \n</code></pre>\n\n<p>This works with no loop:</p>\n\n<pre><code>$data = {\"data\" =&gt; [{\"data_point\" =&gt; \"1\"}, {\"data_point\" =&gt; \"2\"}]};\nopen my $fh, \"&gt;\", \"data.json\";\nprint $fh encode_json($data);\nclose $fh;\n</code></pre>\n\n<p>How do I get this to work in a loop? </p>\n\n<pre><code>@list = (1,2);\nforeach $number (@list) {\n  $data = ?\n}\n</code></pre>\n\n<p>Thanks for any help.    </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1478209063, "post_id": 40411489, "comment_id": 68073545, "body": "What you want is called a template system. <a href=\"http://template-toolkit.org/\" rel=\"nofollow noreferrer\">Template::Toolkit</a> is one of them, but there are many others. Look at <a href=\"http://stackoverflow.com/q/14236318/1331451\">stackoverflow.com/q/14236318/1331451</a> for example."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1478209139, "post_id": 40411489, "comment_id": 68073580, "body": "Also, you&#39;re not telling us what kind of technologies you are using. Is this a CGI application with CGI.pm, or is it maybe something more modern like a Dancer app? The more modern approaches work very well with template engines."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1478210236, "post_id": 40411489, "comment_id": 68073997, "body": "<a href=\"http://www.perlmonks.org/?node_id=1175188\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1175188</a>"}, {"owner": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478217205, "post_id": 40411489, "comment_id": 68076243, "body": "Thanks for all that, @simbabque.  My application uses CGI.pm and some getcgivars() sub that I picked up years ago.  Probably should be just using one of those, but haven&#39;t tidied that up yet."}, {"owner": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1478217212, "post_id": 40411489, "comment_id": 68076244, "body": "Thanks @choroba, yes I posted this question elsewhere and I have now added an update to my original post to reflect that."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1478263480, "post_id": 40411489, "comment_id": 68094268, "body": "Side note: please always declare cross-posting. It gives readers a chance to see if you are still looking for an answer, and/or to see if what they would post has already been said elsewhere. If you can link from there to here, that is good too."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 1, "creation_date": 1478224124, "post_id": 40413820, "comment_id": 68077990, "body": "An impressive response, Schwern!  Thank you! My situation is, I&#39;m the only person who works on this project, and I don&#39;t really know JavaScript. What option would you suggest for quickly &amp; easily getting this working in my form?  I&#39;m not using Dancer or similar.  And I have things like: &lt;input $class{firstname} value=&quot;$in{firstname}&quot; maxlength=&quot;50&quot; name=&quot;firstname&quot; tabindex=&quot;2&quot; $dis{firstname}&gt;"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 2, "creation_date": 1478224308, "post_id": 40413820, "comment_id": 68078037, "body": "@Terry I recommend you learn Javascript. It&#39;s ubiquitous now, it will be very useful. It&#39;s not so different from Perl, the basic data structures will be familiar. There&#39;s <a href=\"http://www.w3schools.com/js/default.asp\" rel=\"nofollow noreferrer\">tons of tutorials out there</a>. As for &quot;I&#39;m the only person who works on this project&quot; it&#39;s important to leave open the possibility that other people can work on the project. Else you will <i>always</i> be the only person who works on that project."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 0, "creation_date": 1478224430, "post_id": 40413820, "comment_id": 68078071, "body": "@Terry The quickest path forward is to replace your inline HTML with <a href=\"http://template-toolkit.org/\" rel=\"nofollow noreferrer\">Template Toolkit</a>. Then look at replacing pieces of your routing code (ie. &quot;the user asked for search.html, what do I do?&quot;) with something like Dancer."}, {"owner": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 0, "creation_date": 1478224602, "post_id": 40413820, "comment_id": 68078128, "body": "Can Template Toolkit handle this kind of complexity: &lt;input $class{firstname} value=&quot;$in{firstname}&quot; maxlength=&quot;50&quot; name=&quot;firstname&quot; tabindex=&quot;2&quot; $dis{firstname}&gt; The &quot;$dis{}&quot; hash contains &quot;disabled&quot; if the field is disabled, otherwise &quot;&quot;."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 0, "creation_date": 1478225831, "post_id": 40413820, "comment_id": 68078481, "body": "@Terry Yes, that&#39;s simple variable expansion. You&#39;d probably invert the data structure so pass in a hash like <code>my $vars = { firstname =&gt; { class =&gt; &quot;foo&quot;, value =&gt; &quot;bar&quot;, is_disabled =&gt; 0 } }; $tt-&gt;process(&#39;thing.html&#39;, $vars);</code> and the template would be something like <code>&lt;input class=&quot;[% firstname.class %]&quot; value=&quot;[% firstname.value %]&quot; maxlength=&quot;50&quot; name=&quot;firstname&quot; tabindex=&quot;2&quot; [% firstname.is_disabled ? &quot;disabled&quot; : &quot;&quot; %]&gt;</code>. I&#39;ve deliberately removed all traces of HTML from the data provided. That&#39;s why <code>firstname.is_disabled</code> is a boolean rather than a string &quot;disabled&quot;."}, {"owner": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 0, "creation_date": 1478229167, "post_id": 40413820, "comment_id": 68079316, "body": "OK - thanks again Schwern.  Is that the kind of syntax for use with Template::Toolkit, or what?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "edited": false, "score": 0, "creation_date": 1478240488, "post_id": 40413820, "comment_id": 68082257, "body": "@Terry Yes. You should have a look at their docs. I linked to their web site in the answer."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1478263651, "last_edit_date": 1478263651, "creation_date": 1478221971, "answer_id": 40413820, "question_id": 40411489, "link": "https://stackoverflow.com/questions/40411489/interpolation-of-variables-in-stored-html/40413820#40413820", "title": "Interpolation of variables in stored HTML", "body": "<p>Here's some bad ways and some good ways to handle this.</p>\n\n<h1><em>The Bad Ways</em></h1>\n\n<h2>Stick HTML in your code.</h2>\n\n<pre><code>my $form_htm = &lt;&lt;EOF\n&lt;input value=\"$in{firstname}\" name=\"firstname\"&gt;\n&lt;input value=\"$in{surname}\" name=\"surname\"&gt;\n...etc...\nEOF\n</code></pre>\n\n<p>This was a very common thing to do. It has major problems. First, it welds together the logic of the program with what is displayed. There's either only one way to display it, or your code gets increasingly complicated trying to allow multiple ways to display it. You're running into this problem.</p>\n\n<p>Second, it means in order to change how it looks you need a developer involved. You can't have separate UX people working on the HTML and CSS layout, they also need to know Perl or get a Perl developer involved. This makes it very expensive and slow to make otherwise simple HTML changes.</p>\n\n<p>Third, with the code to generate the HTML scattered around it makes it difficult to figure out how each page comes to be. If you want to change a form in a page, you have to hunt around in the code to find how it's generated.</p>\n\n<p>Fourth, it's slow. Every single page has to be generated by the server.</p>\n\n<h2>Stick code in your HTML.</h2>\n\n<pre><code>&lt;%class&gt;\nhas 'amount';\nhas 'name';\n&lt;/%class&gt;\n\nDear &lt;% $.name %&gt;,\n\n    We are pleased to inform you that you have won $&lt;% sprintf(\"%.2f\", $.amount) %&gt;!\n\nSincerely,\nThe Lottery Commission\n\n&lt;%init&gt;\ndie \"amount must be a positive value!\" unless $.amount &gt; 0;\n&lt;/%init&gt;\n</code></pre>\n\n<p>This what PHP and <a href=\"https://en.wikipedia.org/wiki/Mason_(Perl)\" rel=\"nofollow noreferrer\">Mason</a> do. It's <em>better</em> than sticking HTML in your code, but it still has major problems. It <em>can</em> be used well, but it encourages you to put WAY too much logic into the templates. This scatters the logic around making it hard to understand what's going on. Code in the templates is hard to document and test. It also mixes code into the templates which again blurs the line between UX person and developer.</p>\n\n<h1><em>The Good Ways</em></h1>\n\n<h2>MVC: Model-View-Controller</h2>\n\n<p>Model-View-Controller provides a clear delineation between the data and logic (the \"model\") and how it's displayed (the \"view\"). These are connected with a bit of code to get data from the model and send it off to the view as variables (the \"controller\").</p>\n\n<p>This is one of the most successful ways of putting together a web site. Ruby On Rails and <a href=\"http://www.catalystframework.org/\" rel=\"nofollow noreferrer\">Catalyst</a> are built around this.</p>\n\n<p>I'd recommend <a href=\"http://perldancer.org/\" rel=\"nofollow noreferrer\">Dancer</a>. It's much smaller and easier to understand than Catalyst. Since it provides less it's easier to adapt an existing program to use it. It provides the view and controller, the model is up to you.</p>\n\n<p>There's two good ways to put together the view.</p>\n\n<h2>An HTML Template.</h2>\n\n<p>The usual way is to put your entire HTML page in a template, much like we saw before, but instead of it having its own code for getting data it's instead passed data to use. It has a limited language for manipulating that data.</p>\n\n<p>In Perl this is generally <a href=\"http://template-toolkit.org/\" rel=\"nofollow noreferrer\">Template Toolkit</a>.</p>\n\n<pre><code>Dear [% name %],\n\nIt has come to our attention that your account is in \narrears to the sum of [% debt %].\n\nPlease settle your account before [% deadline %] or we \nwill be forced to revoke your Licence to Thrill.\n\nThe Management.\n</code></pre>\n\n<p>Now UX people can manage HTML templates on their own. They still have to learn a template language, but it's at least a well documented one. The limited language discourages putting too much code in the templates creating a sort of firewall between the View and the rest of the code.</p>\n\n<p>But all the work to format the template still must be done on the server side. And UX people still have to learn a special template language. Which brings us to the best way.</p>\n\n<h2>Pure HTML, CSS, and Javascript.</h2>\n\n<p>In this mode, instead of processing a template on the server side and inserting variables into it, the HTML has Javascript which requests the data it needs and displays it as it sees fit. This has great advantages.</p>\n\n<p>It completely divorces the view from the rest of the code. This gives the UX folks great control over how the application behaves. They decide what data each page needs. They decide how it's manipulated and displayed. Developers can focus on providing the data.</p>\n\n<p>The other advantage is using Javascript. Javascript has become the defacto programming language that web designers must know. UX folks don't need to learn a special template language, they use the same HTML, CSS, and Javascript they've always used.</p>\n\n<p>Finally, this means the bulk of the formatting work is done on the client side reducing the load on your server.</p>\n\n<p>The main disadvantage is this requires a major re-architecture of an existing system. Instead of producing HTML pages, your server code now produces <a href=\"https://en.wikipedia.org/wiki/JSON\" rel=\"nofollow noreferrer\">JSON</a> for the Javascript to manipulate via <a href=\"https://en.wikipedia.org/wiki/Representational_state_transfer\" rel=\"nofollow noreferrer\">REST requests</a>.</p>\n\n<h2>Hybrid Template + Javascript</h2>\n\n<p>A good hybrid for an existing system is to use templates, but instead of using a special template language, use Javascript. Simple scalar variables like names and amounts can still be provided as template variables, but larger units like lists and hashes are injected into the template as JSON.</p>\n\n<p>For example, this template...</p>\n\n<pre><code>var people = [% people %]\n</code></pre>\n\n<p>would be provided with <code>people = encode_json(\\@people)'</code> and it might expand to:</p>\n\n<pre><code>var people = [\"Jack\", \"Jill\", \"Jane\", \"Joe\"]\n</code></pre>\n\n<p>Then the UX person can do whatever they want with this Javascript <code>people</code> array.</p>\n\n<p>On the downside, this still gives the developers too much control over how the site works, because they decide what templates are used and what data they're given, and it still means the templates have to be expanded server side. </p>\n\n<p>On the upside it lets UX people manipulate that data in ways they're comfortable with, it enforces a clear separation between the view and the rest of the code, and you can convert existing code to use these sorts of templates a piece at a time.</p>\n"}], "owner": {"reputation": 75, "user_id": 1552860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ad36b78a6b601328d82f70ee28d65?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/1552860/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 40413820, "answer_count": 1, "score": 2, "last_activity_date": 1478650247, "creation_date": 1478208335, "last_edit_date": 1478650247, "question_id": 40411489, "link": "https://stackoverflow.com/questions/40411489/interpolation-of-variables-in-stored-html", "title": "Interpolation of variables in stored HTML", "body": "<p>I\u2019m writing a web application in Perl. It has a form containing contact information, and is currently laid out something like this:</p>\n\n<pre><code>$form_htm = &lt;&lt;EOF\n&lt;input value=\"$in{firstname}\" name=\"firstname\"&gt;\n&lt;input value=\"$in{surname}\" name=\"surname\"&gt;\n...etc...\nEOF\n</code></pre>\n\n<p>Later on I print <code>$form_htm</code> (amongst other things) to display the webpage.</p>\n\n<p>The above is working for me, and the fields are interpolated as expected.\nHowever, I\u2019d like different organisations who use this application to be able to have a different layout for their fields. Some fields won't apply to some organisations, and some organisations will want different sizes (on the web page) for fields than others.\nSo, I thought I\u2019d store the HTML for the form in a database (different versions in different records for different organisations).\nBut because the HTML is not stored in the script, the fields (like <code>$in{firstname}</code>) are not interpolated, so the variable names themselves are ending up on the web page, (which is not quite the look I\u2019m after).</p>\n\n<p>Any recommendations on how I should get these variables to be evaluated in this context? (First thing that came to mind is <code>eval()</code>, but that seems aimed at evaluating expressions, not variables mixed in with a lot of other text.)</p>\n\n<p>Or can you suggest a better approach to allow for different form layouts for different organisations?</p>\n\n<p>Edit: I have also posted this question on <a href=\"http://www.perlmonks.org/?node_id=1175188\" rel=\"nofollow noreferrer\">Perl Monks</a>, but would like to get other opinions.</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1478209307, "post_id": 40411414, "comment_id": 68073639, "body": "Do you understand what your code is doing? Have you written it yourself?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1478209908, "post_id": 40411414, "comment_id": 68073855, "body": "The <i>best way</i> would be to <i>remember</i> (i.e. <i>store</i>) the first line of the first file in a global variable (outside the <code>while</code>) and print that stored line whenever you open a new file."}], "answers": [{"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1478254173, "post_id": 40415204, "comment_id": 68088617, "body": "What question are you answering?"}, {"owner": {"reputation": 1, "user_id": 6768738, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792083101050387/picture?type=large", "display_name": "Yin  Eric", "link": "https://stackoverflow.com/users/6768738/yin-eric"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1478483141, "post_id": 40415204, "comment_id": 68158959, "body": "I am obviously answering this question --- get the first line of the fine."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1478512944, "post_id": 40415204, "comment_id": 68169498, "body": "But that isn&#39;t the question asked. OP wants to print the first line of one file into each splitted files"}, {"owner": {"reputation": 1, "user_id": 6768738, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792083101050387/picture?type=large", "display_name": "Yin  Eric", "link": "https://stackoverflow.com/users/6768738/yin-eric"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1507098321, "post_id": 40415204, "comment_id": 80070342, "body": "print <code>head -n 1 $file</code> means to print the first line of the files, after you got the first line output, it is easy to print it into other files without get the lines from the row number. Don&#39;t think it is a good solution? or you don&#39;t know how to insert the output at the beginning of other splitted files?"}], "tags": [], "owner": {"reputation": 1, "user_id": 6768738, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792083101050387/picture?type=large", "display_name": "Yin  Eric", "link": "https://stackoverflow.com/users/6768738/yin-eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1478260866, "last_edit_date": 1478260866, "creation_date": 1478233060, "answer_id": 40415204, "question_id": 40411414, "link": "https://stackoverflow.com/questions/40411414/perl-script-to-split-file-by-number-of-rows-add-header-row-to-top-of-each-fil/40415204#40415204", "title": "Perl Script to split file by number of rows .. add header row to top of each file", "body": "<pre><code>@content = &lt;$FH&gt;;\nprint $content[0];\n</code></pre>\n\n<p>BTW, there are many different ways to do this. you can also use command to print. such  as</p>\n\n<pre><code>foreach my $file(glob \"$dir.*\")\n{\n   print `head -n 1 $file`;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7082505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22763cbff4009fa573ce48ed62111b66?s=128&d=identicon&r=PG&f=1", "display_name": "kadagreatish", "link": "https://stackoverflow.com/users/7082505/kadagreatish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478260866, "creation_date": 1478207918, "question_id": 40411414, "link": "https://stackoverflow.com/questions/40411414/perl-script-to-split-file-by-number-of-rows-add-header-row-to-top-of-each-fil", "title": "Perl Script to split file by number of rows .. add header row to top of each file", "body": "<p>I have this perl script (below) which splits 1 data file into multiple by the number of lines in each file. I am trying to adapt this script to write the first row of the first file (header row) to the top of each split file. What is the best way to do this?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $source = shift or &amp;usage();\nmy $lines_per_file = shift or &amp;usage();\nmy $filename = shift or &amp;usage();\nmy $target = shift or &amp;usage();\nmy $filenum = 2;\n\nmy $dir = \"${target}\";\nchdir($dir) or die \"Failed to cd to $dir: $!\";\n\n$filename =~ s{\\.[^.]+$}{};\n\nopen (my $FH, \"&lt;$source\") or die \"Could not open source file. $!\";\nopen (my $OUT, \"&gt;${filename}_1.csv\") or die \"Could not open destination file. $!\";\nprint \"Writing file: ${filename}_1.csv\\n\";\nmy $i = 0;\n\nwhile (&lt;$FH&gt;) {\n    print $OUT $_;\n    $i++;\n    if ($i % $lines_per_file == 0) {\n        close($OUT);\n        my $FHNEW = ($filenum);\n        open ($OUT, \"&gt;${filename}_${FHNEW}.csv\") or die \"Could not open destination file. $!\";\n            print \"Writing file: ${filename}_${filenum}.csv\\n\";\n            $filenum++;\n    }\n}\n\nsub usage() {\nprint &lt;&lt;EOF;\n\n    PROGRAM NAME: Split .csv file\n\n    DESCRIPTION:\n    Takes a file and creates many small files out of the large file.\n\n    EXAMPLE USAGE: splitfile.pl filename.csv 300000 filename /dir/\n\n        PARAMETERS:\n        1. Source File: File name of the source file to partition.\n        2. Maximum number of lines per file: The number of lines per file.\n        3. Filename without the extension\n        4. Target location of split files ending with /\n\nEOF\nexit;\n}\n</code></pre>\n"}, {"tags": ["perl", "compression"], "answers": [{"tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": false, "score": 2, "last_activity_date": 1478207314, "creation_date": 1478207314, "answer_id": 40411269, "question_id": 40411227, "link": "https://stackoverflow.com/questions/40411227/using-system-command-in-perl-for-using-gzip/40411269#40411269", "title": "Using system command in Perl for using gzip", "body": "<p>Use double quotes when you want a variable to be interpolated.</p>\n\n<pre><code>my $unzip_command = \"gzip -d $input1\";\n</code></pre>\n\n<p>Otherwise you will be executing the command 'gzip -d $input1' rather than 'gzip -d myfile.gz'.</p>\n\n<p>In this case, system is passing your command to the shell, which is interpreting $input1 as a shell variable. Of course that does not exist.</p>\n"}, {"comments": [{"owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "edited": false, "score": 0, "creation_date": 1478257991, "post_id": 40411544, "comment_id": 68091002, "body": "Good point. Also fails if the filename contains any spaces or shell meta characters."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 2, "last_activity_date": 1478208595, "last_edit_date": 1495541232, "creation_date": 1478208595, "answer_id": 40411544, "question_id": 40411227, "link": "https://stackoverflow.com/questions/40411227/using-system-command-in-perl-for-using-gzip/40411544#40411544", "title": "Using system command in Perl for using gzip", "body": "<p>As already stated in <a href=\"https://stackoverflow.com/a/40411269/5830574\">this answer</a> you have to use <strong>double quotes</strong> for the <code>$input1</code> to get interpolated (expanded).</p>\n\n<h3>But</h3>\n\n<p>your script is <strong>vulnerable to code-injection</strong>. Consider this case (assuming your script's name is <code>decompress.pl</code>):</p>\n\n<pre><code>$ ./decompress.pl \"foo.gz; rm -rf /\"\n</code></pre>\n\n<p>This will finally execute</p>\n\n<pre><code>gzip -d foo.gz; rm -rf /\n</code></pre>\n\n<p>Please read about the two modes <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> can be called in: either with a string (which is then interpreted by your shell) or with an array of arguments (which bypasses the shell and its interpretation).</p>\n\n<p>Better would be to use the array-mode here:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $input1 = $ARGV[0];\nmy @unzip_command = ('gzip', '-d', $input1);\nsystem( @unzip_command );\n</code></pre>\n\n<p>(Btw: you had a typo in your she-bang line. It's not <code>!#/usr/bin/perl</code> but <code>#!\u2026</code>. Please <em>paste</em> your code instead of re-typing it to avoid typos.)</p>\n"}], "owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 40411544, "answer_count": 2, "score": 0, "last_activity_date": 1478208595, "creation_date": 1478207154, "question_id": 40411227, "link": "https://stackoverflow.com/questions/40411227/using-system-command-in-perl-for-using-gzip", "title": "Using system command in Perl for using gzip", "body": "<p>I have some zipped files (.gz format) and I want to automate that process.Here is what I have:</p>\n\n<pre><code>    !# /usr/bin/perl -w\n    use strict;\n\n    my $input1 = $ARGV[0];\n    my $unzip_command = 'gzip -d $input1';\n    system $unzip_command;\n</code></pre>\n\n<p>I'm getting an error that asks to use -f to force decompression (tried it, just hangs). Can you spot where my syntax went wrong?</p>\n"}, {"tags": ["perl", "design-patterns", "hashmap"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478204408, "post_id": 40410315, "comment_id": 68071197, "body": "See <a href=\"https://metacpan.org/pod/Data::Diver\" rel=\"nofollow noreferrer\"><code>Data::Diver</code></a> and <a href=\"https://metacpan.org/pod/Hash::Flatten\" rel=\"nofollow noreferrer\"><code>Hash::Flatten</code></a>"}, {"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1478204647, "post_id": 40410315, "comment_id": 68071336, "body": "@H&#229;konH&#230;gland If you&#39;ll turn your comment into an answer, I&#39;ll accept it. Looks like you beat choroba to the punch."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1478204737, "post_id": 40410315, "comment_id": 68071398, "body": "Thanks, but please accept the answer by Choroba. I am not in competition :)"}], "answers": [{"comments": [{"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1478204584, "post_id": 40410571, "comment_id": 68071292, "body": "Thanks. Thought there must be something, but couldn&#39;t figure out a google search that didn&#39;t return generic results."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486572172, "post_id": 40410571, "comment_id": 71406009, "body": "<code>Dive($hash, map \\$_, @foo)</code> would be safer (i.e. it would handle numerical keys)."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 8, "last_activity_date": 1478204464, "creation_date": 1478204464, "answer_id": 40410571, "question_id": 40410315, "link": "https://stackoverflow.com/questions/40410315/perl-hashes-with-an-array-of-keys/40410571#40410571", "title": "Perl hashes with an array of keys", "body": "<p>That's why <a href=\"http://p3rl.org/Data::Diver\" rel=\"noreferrer\">Data::Diver</a> exists:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Diver qw{ Dive };\n\nmy $hash = { a =&gt; { b =&gt; { z =&gt; 'HERE' } } };\n\nmy @foo = qw( a b z );\n\nprint Dive($hash, @foo);\n</code></pre>\n"}], "owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 40410571, "answer_count": 1, "score": 2, "last_activity_date": 1478204464, "creation_date": 1478203577, "question_id": 40410315, "link": "https://stackoverflow.com/questions/40410315/perl-hashes-with-an-array-of-keys", "title": "Perl hashes with an array of keys", "body": "<p>Given an array which contains n elements (n more than 1), is there an elegant way to refer to the element in a hash structure where each element is the key in sequence?</p>\n\n<p>For example:</p>\n\n<pre><code>my @foo = ('a','b','z');\n</code></pre>\n\n<p>Given this or something similar, I'd like to access the following:</p>\n\n<pre><code>$hash-&gt;{'a'}-&gt;{'b'}-&gt;{'z'}\n</code></pre>\n\n<p>If this was a fixed number of elements it would be simple, but I won't know how many it will be at runtime (certainly never more than 6 or 7, but otherwise unguessable).</p>\n\n<p>The only patterns I can think of all involve loops and references and look clumsy. Is there something that doesn't take up a half a page or require Data::Dumper if you have a typo in it just to debug?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478200757, "post_id": 40409497, "comment_id": 68069261, "body": "You should show <b>how</b> you (tried to) install your module."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1478202111, "post_id": 40409497, "comment_id": 68069929, "body": "What command(s) are you running before you get these errors? Should just be &quot;cpan LWP::Simple&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478203060, "post_id": 40409497, "comment_id": 68070473, "body": "<code>cpan</code> will automatically install dependencies (unless you configured it not to???)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1478203102, "post_id": 40409497, "comment_id": 68070495, "body": "<code>the following files are missing in your kit</code> has nothing to do with dependencies, so I have no idea what you are asking."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1478203355, "post_id": 40409497, "comment_id": 68070639, "body": "that output is from a <code>MANIFEST</code> check during the <code>perl Makefile.PL</code> phase. It&#39;s saying that all of those files are supposed to be bundled with the distribution, but they aren&#39;t. As others have said... how are you installing?"}, {"owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "edited": false, "score": 0, "creation_date": 1478204770, "post_id": 40409497, "comment_id": 68071408, "body": "Made edits to include more info."}, {"owner": {"reputation": 1102, "user_id": 22738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa6f9e355aa053f2f8d41db96d64e34c?s=128&d=identicon&r=PG", "display_name": "charlesbridge", "link": "https://stackoverflow.com/users/22738/charlesbridge"}, "edited": false, "score": 1, "creation_date": 1478205964, "post_id": 40409497, "comment_id": 68072076, "body": "Simple.pm (package LWP::Simple) is in the (ubuntu) repository under libwww-perl.  Maybe try apt-get install libwww-perl?"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1478206181, "post_id": 40409497, "comment_id": 68072200, "body": "Do you get the same warning if you call cpan directly <code>cpan LWP::Simple</code>?"}, {"owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "edited": false, "score": 0, "creation_date": 1478221945, "post_id": 40409497, "comment_id": 68077420, "body": "Yes, I get the same message calling it directly."}, {"owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "edited": false, "score": 0, "creation_date": 1478232607, "post_id": 40409497, "comment_id": 68080085, "body": "Side note: using apt-get install libwww-perl did allow me to install LWP::Simple, but there are other modules I&#39;d like that give the exact same problems"}], "owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480020433, "creation_date": 1478200343, "last_edit_date": 1495540382, "question_id": 40409497, "link": "https://stackoverflow.com/questions/40409497/missing-a-lot-of-files-in-perl-kit", "title": "Missing a lot of files in Perl kit", "body": "<p>EDIT: Solution was \"apt-get install libwww-per\" from charlesbridge in the comments</p>\n\n<p>EDIT: Attempted to install by both going into the cpan console and running install LWP::Simple as well as perl -MCPAN -e'install \"LWP::Simple\"' (from <a href=\"https://stackoverflow.com/questions/10524840/cant-locate-lwp-simple-pm-in-inc#10524939\">here</a>).</p>\n\n<p>The first time I ran CPAN I just let it configure itself with all the defaults.  The below is not a description of the dependencies but all of the missing dependencies are included in this warning message, so I figure if I can solve that then I can solve the rest of it.</p>\n\n<p>Original post:</p>\n\n<p>I've been trying to install some missing Perl packages (namely LWP::Simple) but every time I do it spits back a trillion errors and ends with \"Missing 17 dependencies\".  Most (if not all) are listed below at the very start of the install process.  I've tried installing individual ones but I get similar dependency errors.  Is there some way to fix this?</p>\n\n<pre><code>    Checking if your kit is complete...\nWarning: the following files are missing in your kit:\n    eg/hanchors\n    eg/hdump\n    eg/hform\n    eg/hlc\n    eg/hrefsub\n    eg/hstrip\n    eg/htext\n    eg/htextsub\n    eg/htitle\n    hints/solaris.pl\n    lib/HTML/Entities.pm\n    lib/HTML/Filter.pm\n    lib/HTML/HeadParser.pm\n    lib/HTML/LinkExtor.pm\n    lib/HTML/PullParser.pm\n    lib/HTML/TokeParser.pm\n    t/api_version.t\n    t/argspec-bad.t\n    t/argspec.t\n    t/argspec2.t\n    t/attr-encoded.t\n    t/callback.t\n    t/case-sensitive.t\n    t/cases.t\n    t/comment.t\n    t/crashme.t\n    t/declaration.t\n    t/default.t\n    t/document.t\n    t/dtext.t\n    t/entities.t\n    t/entities2.t\n    t/filter-methods.t\n    t/filter.t\n    t/handler-eof.t\n    t/handler.t\n    t/headparser-http.t\n    t/headparser.t\n    t/ignore.t\n    t/largetags.t\n    t/linkextor-base.t\n    t/linkextor-rel.t\n    t/magic.t\n    t/marked-sect.t\n    t/msie-compat.t\n    t/offset.t\n    t/options.t\n    t/parsefile.t\n    t/parser.t\n    t/plaintext.t\n    t/pod.t\n    t/process.t\n    t/pullparser.t\n    t/script.t\n    t/skipped-text.t\n    t/stack-realloc.t\n    t/textarea.t\n    t/threads.t\n    t/tokeparser.t\n    t/uentities.t\n    t/unbroken-text.t\n    t/unicode-bom.t\n    t/unicode.t\n    t/xml-mode.t\nPlease inform the author.\n</code></pre>\n"}, {"tags": ["string", "perl", "numbers", "base"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478200197, "post_id": 40409438, "comment_id": 68068979, "body": "Try using a <code>for</code> loop and the <code>chr</code> method."}, {"owner": {"reputation": 487, "user_id": 447876, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ba0b13f80f0d84d4e144b07ea42e7154?s=128&d=identicon&r=PG", "display_name": "sebastian nielsen", "link": "https://stackoverflow.com/users/447876/sebastian-nielsen"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478200417, "post_id": 40409438, "comment_id": 68069087, "body": "@EliSadoff Yes I know I can for loop it, and then multiply it with different amounts of 256&#39;s, but Im searching for a more &quot;efficient&quot; method. Also converting back becomes a tedious task with modulus if theres not some more efficient method."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478200603, "post_id": 40409438, "comment_id": 68069189, "body": "Then have a look at <a href=\"http://search.cpan.org/~miker/Math-Base-Convert-0.08/Convert.pm\" rel=\"nofollow noreferrer\">Math::Base::Convert</a>. They advertise arbitrary base conversion."}, {"owner": {"reputation": 487, "user_id": 447876, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ba0b13f80f0d84d4e144b07ea42e7154?s=128&d=identicon&r=PG", "display_name": "sebastian nielsen", "link": "https://stackoverflow.com/users/447876/sebastian-nielsen"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478201538, "post_id": 40409438, "comment_id": 68069652, "body": "@PerlDuck : &quot;not a valid base: 256 at /var/www/index.cgi line 24&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 447876, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ba0b13f80f0d84d4e144b07ea42e7154?s=128&d=identicon&r=PG", "display_name": "sebastian nielsen", "link": "https://stackoverflow.com/users/447876/sebastian-nielsen"}, "edited": false, "score": 0, "creation_date": 1478201957, "post_id": 40409731, "comment_id": 68069875, "body": "Number &quot;7305508694050562414&quot; is equal to &quot;ebastian&quot; and number 4990623163232108878 is equal to &quot;EBASTIAN&quot; so you propably missed out on the first character. Or the function you wrote is limited to 8 characters. But it might work anyways. Should try it out... Im currently messing around with a 3DES library and a session string, so I will propably be able to work it out block-wise."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1478287476, "last_edit_date": 1478287476, "creation_date": 1478201278, "answer_id": 40409731, "question_id": 40409438, "link": "https://stackoverflow.com/questions/40409438/perl-convert-string-to-number-not-literally/40409731#40409731", "title": "Perl: Convert string to number (NOT literally!)", "body": "<pre><code>my $n = unpack(\"Q&gt;\", substr((\"\\0\"x8) . $s, -8));\n</code></pre>\n\n<p>However, that won't handle the numbers for <code>sebastian</code> and <code>SEBASTIAN</code> since they are too large for Perl's native types (64 bits, so 8 bytes). You'd need an library that provides more precision (such as <a href=\"http://search.cpan.org/perldoc?Math::Int128\" rel=\"nofollow noreferrer\">Math::Int128</a>) or one that provides an arbitrary amount of precision (such as <a href=\"http://search.cpan.org/perldoc?Math::BigInt\" rel=\"nofollow noreferrer\">Math::BigInt</a>).</p>\n\n<p>Fastest, but limited to 128 bits (16 bytes):</p>\n\n<pre><code>use Math::Int128 qw( net_to_uint128 );\n\nmy $n = net_to_uint128(substr((\"\\0\"x16) . $s, -16));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Math::Int128 qw( hex_to_uint128 );\n\nmy $n = hex_to_uint128(unpack('H*', $s));\n</code></pre>\n\n<p>Require best performance from Math::BigInt:</p>\n\n<pre><code>use Math::BigInt only =&gt; 'GMP';\n\nmy $n = Math::BigInt-&gt;from_hex(unpack('H*', $s));\n</code></pre>\n\n<p>Falls back to slower code if GMP is not available:</p>\n\n<pre><code>use Math::BigInt try =&gt; 'GMP';\n\nmy $n = Math::BigInt-&gt;from_hex(unpack('H*', $s));\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 447876, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ba0b13f80f0d84d4e144b07ea42e7154?s=128&d=identicon&r=PG", "display_name": "sebastian nielsen", "link": "https://stackoverflow.com/users/447876/sebastian-nielsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "accepted_answer_id": 40409731, "answer_count": 1, "score": 1, "last_activity_date": 1478287476, "creation_date": 1478200114, "last_edit_date": 1478200309, "question_id": 40409438, "link": "https://stackoverflow.com/questions/40409438/perl-convert-string-to-number-not-literally", "title": "Perl: Convert string to number (NOT literally!)", "body": "<p>I want to convert a string to number. You might read this as I want to convert \"5\" into 5, but no.</p>\n\n<p>The conversion should be like this:</p>\n\n<pre><code>\"aa\" -&gt; 24929\n\"55\" -&gt; 13621\n\"sebastian\" -&gt; 2128681077170648998254\n\"SEBASTIAN\" -&gt; 1536070381281124893006\n\\xFF\\xFF -&gt; 65536\n</code></pre>\n\n<p>Ergo, treat the input character string as a base^256 number, and convert it accordingly.</p>\n\n<p>In the same way, I want also to be able to convert numbers back into their char representation.</p>\n\n<p>How can I accomplish this in perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "edited": false, "score": 0, "creation_date": 1478199226, "post_id": 40408974, "comment_id": 68068443, "body": "Actually, that&#39;s not the problem. Something else in my code was misleading my debugging."}, {"owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "edited": false, "score": 0, "creation_date": 1478199249, "post_id": 40408974, "comment_id": 68068457, "body": "I would delete this post if I could find the button for that."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1478199537, "last_edit_date": 1478199537, "creation_date": 1478198821, "answer_id": 40409091, "question_id": 40408974, "link": "https://stackoverflow.com/questions/40408974/matching-a-string-with-a-special-character-in-perl/40409091#40409091", "title": "Matching a string with a special character in Perl", "body": "<p>Indeed, <code>index</code> checks if a string is <em>contained in</em> another. It won't find <code>$COMB</code> in <code>$..COMB</code> as you claim, but it would find it in <code>...$COMB...</code>.</p>\n\n<p>If you want to check if a string is <em>the same as</em> another, use <code>eq</code>.</p>\n\n<pre><code>$ln eq '$COMB'\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>$ perl -e'\n   CORE::say qq{\"$_\" is }.( $_ eq \"abc\" ? \"equal\" : \"not equal\" ).qq{ to \"abc\"}\n      for qw( abc abcdef def );\n'\n\"abc\" is equal to \"abc\"\n\"abcdef\" is not equal to \"abc\"\n\"def\" is not equal to \"abc\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478212695, "creation_date": 1478198329, "last_edit_date": 1478212695, "question_id": 40408974, "link": "https://stackoverflow.com/questions/40408974/matching-a-string-with-a-special-character-in-perl", "title": "Matching a string with a special character in Perl", "body": "<p>I am having trouble with matching a string with a dollar sign (<code>$</code>) in it. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>if (index($ln, '$COMB') != -1) \n{\n    [do some stuff]\n}\n</code></pre>\n\n<p>I have tried <code>'\\$COMB'</code>, <code>'\\\\$COMB'</code> and <code>'\\\\\\$COMB'</code></p>\n\n<p>I need to match the exact string, <code>$COMB</code>. The problem is that my code also matches : <code>$[some other stuff]COMB</code>. Which is not what I want.</p>\n"}, {"tags": ["perl", "log4perl"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1478204988, "creation_date": 1478204988, "answer_id": 40410697, "question_id": 40407990, "link": "https://stackoverflow.com/questions/40407990/log4perl-singleton-usage/40410697#40410697", "title": "Log4perl Singleton usage", "body": "<p>You didn't specify a logging category, so your code does the equivalent of</p>\n\n<pre><code>Log::Log4perl-&gt;get_logger(__PACKAGE__);\n</code></pre>\n\n<p>where <code>__PACKAGE__</code> is <code>Example::Test</code> inside your module and <code>main</code> inside your script.</p>\n\n<p>From the <a href=\"https://metacpan.org/pod/Log::Log4perl#Categories\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><strong>Categories are also called \"Loggers\" in Log4perl, both refer to the same thing and these terms are used interchangeably.</strong> <code>Log::Log4perl</code> uses <em>categories</em> to determine if a log statement in a component should be executed or suppressed at the current logging level. Most of the time, these categories are just the classes the log statements are located in...</p>\n</blockquote>\n\n<p>In general, you probably want a separate logger for each module so you can handle log messages from different parts of your codebase differently.</p>\n\n<hr>\n\n<p>On the other hand, if <code>Example::Test</code> is supposed to be a wrapper for Log::Log4perl, <a href=\"https://metacpan.org/pod/Log::Log4perl#Using-Log::Log4perl-with-wrapper-functions-and-classes\" rel=\"nofollow noreferrer\">register it</a>:</p>\n\n<pre><code>package My::Wrapper;\n\nuse strict;\nuse warnings 'all';\nuse 5.010;\n\nuse Log::Log4perl;\n\nLog::Log4perl-&gt;wrapper_register(__PACKAGE__);\n\nsub foo {\n    my $logger = Log::Log4perl-&gt;get_logger;\n\n    say $logger;\n    $logger-&gt;warn('foo');\n}\n\n1;\n</code></pre>\n\n<p>When you call <code>My::Wrapper::foo()</code> from package <code>main</code>, the logging category will be <code>main::</code>.</p>\n"}], "owner": {"reputation": 823, "user_id": 6605797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f0668cfbeb382e47c22cd5e5afb4c240?s=128&d=identicon&r=PG&f=1", "display_name": "A_B", "link": "https://stackoverflow.com/users/6605797/a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 40410697, "answer_count": 1, "score": 4, "last_activity_date": 1478204988, "creation_date": 1478194812, "question_id": 40407990, "link": "https://stackoverflow.com/questions/40407990/log4perl-singleton-usage", "title": "Log4perl Singleton usage", "body": "<p>I'm new to Log4perl and am trying to figure out why I get two different loggers in the below setup.   My understanding is that this should be a singleton and calling get_logger() would return the same instance of the object each time.</p>\n\n<p><strong>Test.pm</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\npackage Example::Test;\nuse strict;\nuse warnings;\nuse Exporter;\nour @ISA = qw(Exporter);\nour @EXPORT = qw(test);\n\nsub test \n{\n    my $logger = Log::Log4perl-&gt;get_logger();\n    print $logger, \"\\n\";\n}\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Log::Log4perl;\nuse Example::Test;\n\n# Logger configuration\nLog::Log4perl-&gt;init('/etc/log4perl.conf');\nmy $logger = Log::Log4perl-&gt;get_logger();\nprint $logger, \"\\n\";\n\nmy $engine = test();\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Log::Log4perl::Logger=HASH(0x12093d0)\nLog::Log4perl::Logger=HASH(0x29b4950)\n</code></pre>\n"}, {"tags": ["node.js", "perl", "httpresponse", "perl-module"], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 3044493, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d39efb1a0c0fc7dddaeb770f9bc31df3?s=128&d=identicon&r=PG&f=1", "display_name": "SaiGiridhar", "link": "https://stackoverflow.com/users/3044493/saigiridhar"}, "is_accepted": true, "score": 0, "last_activity_date": 1481341610, "last_edit_date": 1481341610, "creation_date": 1481341245, "answer_id": 41071926, "question_id": 40407281, "link": "https://stackoverflow.com/questions/40407281/how-to-download-the-file-uploaded-in-the-nodejs-server/41071926#41071926", "title": "How to download the file uploaded in the nodejs server", "body": "<p>Solved this issue using MIME::Parser of Perl</p>\n\n<pre><code> my $request = $r-&gt;as_string //$r is the HTTP::Request object\n $request =~ s/^[^\\n]*\\n//s;\n\n my $parser = MIME::Parser-&gt;new();\n $parser-&gt;output_to_core(1);\n\n my $ent = $parser-&gt;parse_data();  \n\n my $part1 = $ent-&gt;parts(0); // First file\n my $filename1 = $part1-&gt;head-&gt;recommended_filename\n my $content1 = $part1-&gt;bodyhandle-&gt;as_string\n\n my $part2 = $ent-&gt;parts(1); // Second file\n my $filename1 = $part2-&gt;head-&gt;recommended_filename\n my $content1 = $part2-&gt;bodyhandle-&gt;as_string\n</code></pre>\n\n<p>$part1 and $part2 will be of types <a href=\"http://search.cpan.org/~dskoll/MIME-tools-5.508/lib/MIME/Entity.pm\" rel=\"nofollow noreferrer\">MIME::Entity</a> objects and used suitable methods as per my requirements to read their content.</p>\n"}], "owner": {"reputation": 876, "user_id": 3044493, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d39efb1a0c0fc7dddaeb770f9bc31df3?s=128&d=identicon&r=PG&f=1", "display_name": "SaiGiridhar", "link": "https://stackoverflow.com/users/3044493/saigiridhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 41071926, "answer_count": 1, "score": 0, "last_activity_date": 1481341610, "creation_date": 1478192424, "last_edit_date": 1481341419, "question_id": 40407281, "link": "https://stackoverflow.com/questions/40407281/how-to-download-the-file-uploaded-in-the-nodejs-server", "title": "How to download the file uploaded in the nodejs server", "body": "<p>I am uploading a file in the node.js server. Below is the code for it.</p>\n\n<pre><code>  var formData = new FormData();\n  formData.append('part1', fs.createReadStream(file1));\n  formData.append('part2', fs.createReadStream(file2));\n\n  formData.submit({\n    host: 'xyz',\n    port: 4354,\n    path: '/handler',\n    method: 'POST',\n    headers: {\n      'Content-Type': 'multipart/mixed; boundary=' + formData.getBoundary()\n    }\n  }, function (error, response, body) {\n\n    if (!error &amp;&amp; response.statusCode === 200) {\n     // Success case\n    } else {\n     // Failure case\n    }\n\n  });\n</code></pre>\n\n<p>Now, how to download that file in a perl server???</p>\n\n<p>Tried HTTP::Response's decode_content() method. It is logging the response like below. Below I don't find any easier way to download the file.</p>\n\n<pre><code> ----------------------------401882132761579819223727^M\nContent-Disposition: form-data; name=\"fileContent\"; filename=\"filepath\"^M\nContent-Type: application/octet-stream^M\n^M   \nFileContent FileContent FileContent FileContentFileContentFileContent\nFileContentFileContentFileContentFileContentFileContentFileContentFileContent\nFileContentFileContentFileContentFileContentFileContentFileContentFileContent  \n----------------------------401882132761579819223727--^M\n</code></pre>\n"}, {"tags": ["arrays", "perl", "loops", "octal"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 7, "creation_date": 1478188589, "post_id": 40405987, "comment_id": 68062198, "body": "octal numbers with 8&#39;s and 9&#39;s in them don&#39;t make a lot of sense. What do you intend them to mean?"}, {"owner": {"reputation": 2111, "user_id": 4767245, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c23b01ed37481415f3dd18b405ad74d9?s=128&d=identicon&r=PG&f=1", "display_name": "taji01", "link": "https://stackoverflow.com/users/4767245/taji01"}, "edited": false, "score": 0, "creation_date": 1478188732, "post_id": 40405987, "comment_id": 68062289, "body": "I just want to find the duplicate numbers in this array. I&#39;m using <code>https:&#47;&#47;www.tutorialspoint.com&#47;execute_perl_online.php</code> to compile this code. It throws this error <code>Illegal octal digit &#39;8&#39; and &#39;9&#39; at main.pl line 1, at end of line</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 2, "creation_date": 1478188767, "post_id": 40405987, "comment_id": 68062305, "body": "the thing is you can&#39;t find duplicate numbers in the array because <i>those aren&#39;t numbers</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1478189059, "post_id": 40405987, "comment_id": 68062506, "body": "If the array is an array <i>of numbers</i> then <code>010</code> (octal) is a duplicate of <code>8</code> (decimal). And also it&#39;s a duplicate of <code>0010</code> because extra leading zeros don&#39;t matter. And probably also a duplicate of <code>8.0</code> and <code>0.8e+1</code>. If you want string comparison, do as toolic says"}, {"owner": {"reputation": 2111, "user_id": 4767245, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c23b01ed37481415f3dd18b405ad74d9?s=128&d=identicon&r=PG&f=1", "display_name": "taji01", "link": "https://stackoverflow.com/users/4767245/taji01"}, "edited": false, "score": 0, "creation_date": 1478189063, "post_id": 40405987, "comment_id": 68062513, "body": "I didn&#39;t know this wasn&#39;t numbers, but i still don&#39;t understand why they are not numbers. I looked at <code>https:&#47;&#47;www.tutorialspoint.com&#47;perl&#47;perl_arrays.htm</code> to write my this array."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1478189115, "post_id": 40405987, "comment_id": 68062550, "body": "They&#39;re not numbers because the digits aren&#39;t octal digits."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1478189155, "post_id": 40405987, "comment_id": 68062582, "body": "That tutorial is old and out-of-date. You should not use it. You can tell because it doesn&#39;t have <code>use strict</code> in the examples."}, {"owner": {"reputation": 2111, "user_id": 4767245, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c23b01ed37481415f3dd18b405ad74d9?s=128&d=identicon&r=PG&f=1", "display_name": "taji01", "link": "https://stackoverflow.com/users/4767245/taji01"}, "edited": false, "score": 0, "creation_date": 1478189260, "post_id": 40405987, "comment_id": 68062653, "body": "Thanks guys this is making more sense now :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478189541, "post_id": 40405987, "comment_id": 68062820, "body": "Check the Perl tag wiki here on SO for up to date tutorials. Hover your mouse over the tag below your question, then click the <i>info</i> link, or use this one: <a href=\"http://stackoverflow.com/tags/perl/info\">stackoverflow.com/tags/perl/info</a>"}, {"owner": {"reputation": 2111, "user_id": 4767245, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c23b01ed37481415f3dd18b405ad74d9?s=128&d=identicon&r=PG&f=1", "display_name": "taji01", "link": "https://stackoverflow.com/users/4767245/taji01"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478189650, "post_id": 40405987, "comment_id": 68062891, "body": "Thanks @simbabque!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 2, "creation_date": 1478189667, "post_id": 40405987, "comment_id": 68062902, "body": "For future reference, your question should never say &quot;the compiler throws an error.&quot;  Instead, it should give the exact error message."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1478190878, "last_edit_date": 1478190878, "creation_date": 1478190479, "answer_id": 40406695, "question_id": 40405987, "link": "https://stackoverflow.com/questions/40405987/check-for-octal-duplicates-in-array-elements-perl/40406695#40406695", "title": "Check for octal duplicates in array elements Perl", "body": "<blockquote>\n  <p>It throws this error <code>Illegal octal digit '8' and '9' at main.pl line 1, at end of line</code></p>\n</blockquote>\n\n<p>A literal starting with <code>0</code> (other than those starting with <code>0x</code> or <code>0.</code>) is expected to be the octal representation of a number. The octal representation of numbers consists of digits 0-7 exclusively (similar to how the binary representation of numbers consists of the digits 0 and 1 exclusively).</p>\n\n<p>As such, <code>010895401</code> is expected to be the octal representation of a number, but it isn't. <code>010895401</code> makes no sense.</p>\n"}], "owner": {"reputation": 2111, "user_id": 4767245, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c23b01ed37481415f3dd18b405ad74d9?s=128&d=identicon&r=PG&f=1", "display_name": "taji01", "link": "https://stackoverflow.com/users/4767245/taji01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 40406695, "answer_count": 1, "score": -2, "last_activity_date": 1478190878, "creation_date": 1478188389, "question_id": 40405987, "link": "https://stackoverflow.com/questions/40405987/check-for-octal-duplicates-in-array-elements-perl", "title": "Check for octal duplicates in array elements Perl", "body": "<p>I have this loop that checks duplicate elements in an array. The problem is once the array has octal numbers the compiler throws an error. How do i make this work?</p>\n\n<pre><code>my @array1 = (010895401, 010895401, 010895402, 010895403); \n\nmy %seen;\n\nforeach my $octal (@array1)\n{\n    next unless $seen{$octal}++;\n    print \"'$octal' is duplicated.\\n\"\n}\n</code></pre>\n"}, {"tags": ["c", "perl", "unix", "ipc", "semaphore"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478189159, "post_id": 40405945, "comment_id": 68062588, "body": "The process that creates the semaphore needs to complete initialization before any processes that use the semaphore are created. The typical way to handle this is to create/init the semaphore and then fork/exec the other processes."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478189410, "post_id": 40405945, "comment_id": 68062743, "body": "Processes accessing this semaphore group may start from crond, from CLI and can be initialized from webserver. It is not forked from one single process. So i need to protect semaphore  group itself, but for this i need... semaphore somewhere?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478189577, "post_id": 40405945, "comment_id": 68062843, "body": "Then as part of the startup sequence, you need to run a program that creates and initializes the semaphore group. It has to finish before any programs that use the semaphores are allowed to start."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478189860, "post_id": 40405945, "comment_id": 68063025, "body": "Or i can use flock when adding semaphore group, but i use semaphore group exactly to avoid using any flocks. Hmm... I hope, that using one flock instead of 10 (which was replaced by semaphores) - is a good compromise."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478190948, "post_id": 40405945, "comment_id": 68063753, "body": "I think, i know answer for my question. It is: &quot;DONT use legacy semget/semop/semctl&quot;, use POSIX semaphores instead. POSIX&#39;s function sem_open support creation+initialization in one atomic action."}], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1479486893, "post_id": 40406951, "comment_id": 68594092, "body": "Thank you very much, this is exactly what i want to know!"}], "tags": [], "owner": {"reputation": 120931, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1478191332, "creation_date": 1478191332, "answer_id": 40406951, "question_id": 40405945, "link": "https://stackoverflow.com/questions/40405945/semget-how-to-avoid-concurrent-access-to-semaphore-group-on-its-creating-initia/40406951#40406951", "title": "semget: how to avoid concurrent access to semaphore group on its creating/initialization?", "body": "<p>Consider using POSIX semaphores instead of SYSV semaphores.  The POSIX design is simpler and cleaner; for example, POSIX semaphores are created with specified initial values.</p>\n\n<p>SYSV semaphores do, however, have some capabilities that POSIX semaphores do not, such as undoable operations and working with multi-element semaphore <em>sets</em>.  If you must use the SYSV flavor, then ...</p>\n\n<p>I suppose you imagine using a well-known key for the semaphore set, so that you have no control over the timing with which processes other than the one designated to create the semaphore set access the set.  In the worst case, you might have multiple processes all attempting to get a semaphore set via the same key and with <code>IPC_CREAT | IPC_EXCL</code>, with the one that succeeds being responsible for the initialization, and those that get <code>EEXIST</code> trying again without those flags.  Indeed, that does produce a mess.</p>\n\n<p>If you have a situation in which a well-known semaphore set key is used by unrelated processes, then the associated semaphore set is a system resource, not belonging to any of the processes individually.  In that case, you should have programs dedicated to initializing and managing it.  These should be connected to your system initialization framework.</p>\n\n<p>It would also be possible to use some other form of mutual exclusion to protect initialization of the semaphore set.  For example, you might use a lock file.  You might even use a POSIX semaphore for this limited purpose.</p>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478191332, "creation_date": 1478188274, "last_edit_date": 1478189132, "question_id": 40405945, "link": "https://stackoverflow.com/questions/40405945/semget-how-to-avoid-concurrent-access-to-semaphore-group-on-its-creating-initia", "title": "semget: how to avoid concurrent access to semaphore group on its creating/initialization?", "body": "<p>When i've create semaphore group id with semget (passing IPC_CREAT | IPC_EXCL flags) - in general case my semaphores inside the group is not initialized and may contain \"random values\".</p>\n\n<p>So i need to initialize all semaphores right after getting id of the newly-created semaphore group.</p>\n\n<p>My question is:</p>\n\n<p>How to avoid potential race conditions between       <code>semgrpID=semget(semgrpKey,nSemaphores,IPC_CREAT | IPC_EXCL);</code>\nand\n<code>semctl(semgrpID,0,SETALL,...);</code> \n?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478189892, "post_id": 40405825, "comment_id": 68063049, "body": "The text record that you&#39;ve just added from the data file is different to the text in the image. Which is the correct version?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478193242, "post_id": 40405825, "comment_id": 68065179, "body": "it should be the second one"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478193341, "post_id": 40405825, "comment_id": 68065237, "body": "So the image is wrong? To be honest, that doesn&#39;t seem likely looking at the error log."}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478194471, "post_id": 40405825, "comment_id": 68065793, "body": "@DaveCross The table is the same result with both. I was just using the first row of items from the text file as an example of how the photo on the table doesnt work."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478197997, "post_id": 40405825, "comment_id": 68067779, "body": "But is the error message the same too? I bet it isn&#39;t."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478249472, "post_id": 40405825, "comment_id": 68086033, "body": "My point is that the long URL (that starts &#39;/Applications/...&#39;) is clearly wrong. That will generate the error message that you&#39;ve posted in your question. But the shorter URL (that starts &#39;/cgi-bin/...&#39;) will almost certainly generate a different error message (probably the one discussed in my answer below). It would be helpful to see that error message as well. It would also be helpful to see the actual data file. Can you put it online and provide a link?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478268801, "post_id": 40405825, "comment_id": 68097893, "body": "@DaveCross Thank you for taking the time and helping out. I updated the error log, the directory of the image in the text file. The latest table graphic is the same as before"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478269264, "post_id": 40405825, "comment_id": 68098228, "body": "Right. Two things. Firstly, this error was generated by the older, longer, incorrect URL in your data file. I can tell that because the error message includes the URL of the script it&#39;s trying to execute. So, no, that&#39;s almost certainly not generated by a data file containing the shorter URL. Secondly, you have broken the image link again. Also, have you tried the solution I mentioned in my answer below? Given the random nature of your replies, I&#39;m starting.to think I should give up here for the sake of my sanity. And perhaps you should employ a programmer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478269437, "post_id": 40405825, "comment_id": 68098359, "body": "Look, this is really simple. 1/ Don&#39;t store your images in the CGI directory. 2/ Work out what the URL is for the directory where you store the images. 3/ Put that URL in your data file."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478269548, "post_id": 40405825, "comment_id": 68098431, "body": "Do you understand the difference between a URL and a file path? That&#39;s pretty crucial."}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478273167, "post_id": 40405825, "comment_id": 68100966, "body": "@DaveCross Please explain, what is this? <code>file:&#47;&#47;&#47;Applications&#47;XAMPP&#47;xamppfiles&#47;cgi-bin&#47;asst5&#47;asst5_im&zwnj;&#8203;g&#47;Yamaha_FG700S.jpg</code>. Isn&#39;t this the image URL and directory?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478273457, "post_id": 40405825, "comment_id": 68101211, "body": "@DaveCross this is the one for the text file <code>file:&#47;&#47;&#47;Applications&#47;XAMPP&#47;xamppfiles&#47;cgi-bin&#47;asst5&#47;inventor&zwnj;&#8203;y.txt</code>. I just need to put that image in this txt file. Is using <code>&lt;img src=\u201c&quot;&#47;&gt;</code> in the text file the right way of doing it?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478273574, "post_id": 40405825, "comment_id": 68101293, "body": "It&#39;s a <a href=\"https://en.wikipedia.org/wiki/File_URI_scheme\" rel=\"nofollow noreferrer\">file URL</a>. That&#39;s a URL-compatible way to identify files on your local computer. File URLs shouldn&#39;t be used in web applications as they won&#39;t work for anyone connecting remotely to your web server. Why are you ignoring all of my advice and coming up with your own ridiculous solutions to the problem?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478273820, "post_id": 40405825, "comment_id": 68101483, "body": "@DaveCross I&#39;m sorry, still very new to this. Where do you suggest I put the images? This is for a project and I need to put them in a separate folder."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478275197, "post_id": 40405825, "comment_id": 68102502, "body": "I think your document root is <code>&#47;Applications&#47;XAMPP&#47;xamppfiles&#47;</code>. Create a new directory there called <code>images</code>. Put your images in there. Then your data file should contain something like <code>&lt;img src=\u201c&#47;images&#47;Yamaha_FS700S.jpg&quot;&#47;&gt;</code>."}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478276648, "post_id": 40405825, "comment_id": 68103380, "body": "@DaveCross I put the image folder in <code>xamppfiles</code> because putting it in Applications will show <code>Error 404 The requested URL was not found on this server.</code> when I right clicked on the broken image. Tried <code>&lt;img src=\u201c&#47;xamppfiles&#47;asst5_img&#47;Yamaha_FS700S.jpg&quot;&#47;&gt; </code> and <code>&lt;img src=\u201c&#47;asst5_img&#47;Yamaha_FS700S.jpg&quot;&#47;&gt;</code>. The image still won&#39;t show"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478276892, "post_id": 40405825, "comment_id": 68103538, "body": "Putting it in <code>xamppfiles</code> was what I suggested. Why don&#39;t you read my comments more carefully? The <code>xamppfiles</code> directory is (probably) your document root, so it won&#39;t be part of the URL. I&#39;d expect <code>&#47;asst5_img&#47;Yamaha_FS700S.jpg</code> to be right though. But I don&#39;t know how your XAMPP installation is configured. Where is your main <code>index.html</code> file?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478277028, "post_id": 40405825, "comment_id": 68103612, "body": "Is there a directory called <code>&#47;Applications&#47;XAMPP&#47;xamppfiles&#47;htdocs</code>? You might need to put your image directory inside there."}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478277411, "post_id": 40405825, "comment_id": 68103856, "body": "@DaveCross I put the images folder in htdocs and used <code>0001|Yamaha FS700S|Acoustic Guitar|$200.00|&lt;img src=\u201c&#47;htdocs&#47;asst5_img&#47;Yamaha_FS700S.jpg&quot;&#47;&gt;</code> . That doesn&#39;t work either with the same error as earlier."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478277529, "post_id": 40405825, "comment_id": 68103942, "body": "Did you create <code>htdocs</code> or did it already exist? If it already existed, then the URL you probably want is <code>&#47;asst5_img&#47;Yamaha_FS700S.jpg</code>. Is there no-one there who knows how web servers work?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478277949, "post_id": 40405825, "comment_id": 68104215, "body": "It was already there. I am using Apache. I tried that too, doesn&#39;t work"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478278110, "post_id": 40405825, "comment_id": 68104298, "body": "What happens if you right-click on the broken image and select &quot;view image&quot;? And I assume you&#39;re watching the error logs carefully through all of this. What is that saying?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478278639, "post_id": 40405825, "comment_id": 68104594, "body": "It takes me to the <code>Error 404 The requested URL was not found on this server</code>.  Error log says <code>[Fri Nov 04 12:54:51.576679 2016] [cgi:error] [pid 946] [client ::1:52358] AH02811: script not found or unable to stat: &#47;Applications&#47;XAMPP&#47;xamppfiles&#47;cgi-bin&#47;asst5&#47;\\xc3\\xa2\\xe2\\x8&zwnj;&#8203;2\\xac\\xc5\\x9b, referer: http:&#47;&#47;localhost&#47;cgi-bin&#47;asst5&#47;showmdse.cgi</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478278734, "post_id": 40405825, "comment_id": 68104668, "body": "When you &quot;view image&quot;, what URL appears in the location bar? Does it have those weird hex characters on the end?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478278808, "post_id": 40405825, "comment_id": 68104715, "body": "And wait! Why does the error log still say it&#39;s looking in cgi-bin? You&#39;ve moved the images to htdocs and (hopefully) edited the data file. Are you editing the correct copy of the data file - the one that the CGI program is actually using?"}, {"owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478278975, "post_id": 40405825, "comment_id": 68104828, "body": "The CGI script and text file are in the cgi-bin and I have to keep them there. The image file doesn&#39;t belong there like you said earlier."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478279195, "post_id": 40405825, "comment_id": 68104933, "body": "<b>When you &quot;view image&quot;, what URL appears in the location bar?</b>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1478279985, "post_id": 40405825, "comment_id": 68105370, "body": "What happens when you type <code>http:&#47;&#47;localhost&#47;asst5_img&#47;Yamaha_FS700S.jpg</code> in your location bar?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1478188751, "post_id": 40406062, "comment_id": 68062297, "body": "I don&#39;t understand why those same people can&#39;t even post the image that they have obviously uploaded with the dialogue which results in markdown that <i>includes the image</i> in the post. Do they all remove the <code>[!...][1]</code> part from <code>[![text][1]][1]</code> because it looks so weird and they think it&#39;s wrong? If they worry that much then why would they try to post an image in the first place...?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1478190081, "post_id": 40406062, "comment_id": 68063176, "body": "I once posted an image of the solution as a response, so the OP at least had to re-type it. That was mean, but I enjoyed it so much as a payback. :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1478192172, "last_edit_date": 1478192172, "creation_date": 1478188602, "answer_id": 40406062, "question_id": 40405825, "link": "https://stackoverflow.com/questions/40405825/how-to-display-image-when-reading-from-a-text-file-using-perl-cgi/40406062#40406062", "title": "How to display image when reading from a text file using Perl CGI?", "body": "<p>I don't understand why people think it's a good idea to post images of text in Stack Overflow questions. If you have text, then include it in your question as text.</p>\n\n<p>Have you looked in the web server error log? That will almost certainly give you a big clue to what is going wrong here. But here's my hunch...</p>\n\n<p>Your image file is in your CGI directory. Your web server is configured to treat any file in your web directory as a executable file. So when your web server gets a request for a resource in the CGI directory, it doesn't just serve the file, it executes the file and passes whatever the program returns back to the browser.</p>\n\n<p>So here's what happens. Your user requests the web page. Your CGI program is executed and the HTML is returned to the browser. That HTML includes an image tag. When the browser parses the HTML, it finds the image tag and that generates another request to the web server. This request asks for the iamge file from the CGI directory. The web server tries to execute the image file - and that doesn't work. So the web server returns a 500 error and the browser displays the \"broken image\" icon.</p>\n\n<p>I bet that if you look in the web server error log, you'll see a message about a \"failure to execute\" the image file.</p>\n\n<p>The solution is to move your images out of the CGI directory into the web server directories that contain static files. You'll need to adjust the URL in the data file too.</p>\n\n<p>I'm sad to see that you still haven't changed the mid-90s HTML in your program or switched to using a templating system.</p>\n\n<p><strong>Update:</strong> Oh, and there's another potential error here (which might be masking the error I discussed above). The <code>src</code> attribute for your image tag is wrong. I bet that \"/Applications/XAMPP/xamppfiles/cgi-bin/asst5/asst5_img\" is a file path and not a URL. I'm not sure how XAMPP is configured, but I bet the URL you really want is \"/cgi-bin/asst5/asst5_img\".</p>\n\n<p>That will give you a \"404 file not found\" error in your error log.</p>\n\n<p><strong>Update2:</strong> So you've added the text from the error log and, as predicted, that's a \"file not found\" error (although I'm not entirely sure where those hex characters are coming from).</p>\n"}], "owner": {"reputation": 11, "user_id": 7100224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d5d7cd60317366839022eb600824a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jada Pinks", "link": "https://stackoverflow.com/users/7100224/jada-pinks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478269792, "creation_date": 1478187926, "last_edit_date": 1478269792, "question_id": 40405825, "link": "https://stackoverflow.com/questions/40405825/how-to-display-image-when-reading-from-a-text-file-using-perl-cgi", "title": "How to display image when reading from a text file using Perl CGI?", "body": "<p><a href=\"https://i.stack.imgur.com/Nuycu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nuycu.png\" alt=\"Latest Table/Output\"></a></p>\n\n<p>This is the first row from the text file that contains the image <code>0001|Yamaha FS700S|Acoustic Guitar|$200.00|&lt;img src=\u201c/cgi-bin/asst5/asst5_img/Yamaha_FS700S.jpg\"/&gt;</code></p>\n\n<p>The source code for the text file is <code>/Applications/XAMPP/xamppfiles/cgi-bin/asst5</code></p>\n\n<p>This is the CGI script to read the file and display in a table</p>\n\n<pre><code>use CGI qw(:standard);\nuse CGI::Carp qw(fatalsToBrowser);\nuse strict;\nuse warnings;\nprint \"Content-type: text/html\\n\\n\";\n\n print \"&lt;TABLE BORDER&gt;\\n\";\n print \"&lt;TR&gt;&lt;TH&gt;SKU Code&lt;TH&gt;Name&lt;TH&gt;Description&lt;TH&gt;Price&lt;TH&gt;Photos\"; \nopen my $order_fh, '&lt;', 'inventory.txt' or die \"Error opening file, $!\";\n\nwhile(&lt;$order_fh&gt;) {\n  print \"&lt;TR&gt;\\n\";\n  print '&lt;TD&gt;' . join('&lt;/TD&gt;&lt;TD&gt;', split /\\|/) . \"&lt;/TD&gt;\\n\";\n  print \"&lt;/TR&gt;\\n\";\n}\n\nclose $order_fh;\n print \"&lt;/TABLE&gt;\";\n</code></pre>\n\n<p>Updated Error Log:</p>\n\n<pre><code> [Fri Nov 04 10:09:23.102929 2016] [cgi:error] [pid 3814] [client ::1:50571] \n AH02811: script not found or unable to stat: /Applications/XAMPP/xamppfiles/cgi-bin/asst5/\\xc3\\xa2\\xe2\\x82\\xac\\xc5\\x93, referer: http://localhost/cgi-bin/asst5/showmdse.cgi\n</code></pre>\n"}, {"tags": ["perl", "authentication", "credentials", "www-mechanize", "strawberry-perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478185774, "post_id": 40404920, "comment_id": 68060204, "body": "Have you compared the HTTP::Request object that WWW::Mechanize creates with the curl request? You can use <code>$mech-&gt;res-&gt;request-&gt;as_string</code> to get the Perl side of things, and <code>curl -v</code> for curl."}, {"owner": {"reputation": 769, "user_id": 3358139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e7f154c26b2099d94a29c9d9d361787?s=128&d=identicon&r=PG", "display_name": "Scott Martin", "link": "https://stackoverflow.com/users/3358139/scott-martin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478187262, "post_id": 40404920, "comment_id": 68061286, "body": "Interesting. That reveals that it&#39;s not doing the authentication at all:  <code>GET https:&#47;&#47;www.streak.com&#47;api&#47;v1&#47;pipelines</code> <code>Accept-Encoding: gzip</code> <code>User-Agent: WWW-Mechanize&#47;1.83</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478189603, "post_id": 40404920, "comment_id": 68062860, "body": "I saw the same thing. Very strange. If you supply a longer string it also doesn&#39;t do it. But I have code that uses this feature. We&#39;re overlooking something I believe."}, {"owner": {"reputation": 769, "user_id": 3358139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e7f154c26b2099d94a29c9d9d361787?s=128&d=identicon&r=PG", "display_name": "Scott Martin", "link": "https://stackoverflow.com/users/3358139/scott-martin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478255270, "post_id": 40404920, "comment_id": 68089276, "body": "I&#39;ve just tried the same thing using LWP::UserAgent instead of WWW::Mechanize with exactly the same result, so clearly that&#39;s where the problem lies. Will update as I learn more."}], "answers": [{"comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1478322799, "post_id": 40421027, "comment_id": 68117889, "body": "kudos for figuring this out and posting it here."}, {"owner": {"reputation": 769, "user_id": 3358139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e7f154c26b2099d94a29c9d9d361787?s=128&d=identicon&r=PG", "display_name": "Scott Martin", "link": "https://stackoverflow.com/users/3358139/scott-martin"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1478873680, "post_id": 40421027, "comment_id": 68338002, "body": "Hey, thanks @xxfelixxx. Hopefully this will be of use to anyone else using WWW::Mechanize and encountering a resource that doesn&#39;t do authentication properly. As it turns out, this API is violating <a href=\"https://tools.ietf.org/html/rfc7235#section-3.1\" rel=\"nofollow noreferrer\">RFC 7235 (Hypertext Transfer Protocol (HTTP/1.1): Authentication) section 3.1.</a> by not accompanying the 401 Unauthorized with a WWW-Authenticate header."}], "tags": [], "owner": {"reputation": 769, "user_id": 3358139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e7f154c26b2099d94a29c9d9d361787?s=128&d=identicon&r=PG", "display_name": "Scott Martin", "link": "https://stackoverflow.com/users/3358139/scott-martin"}, "is_accepted": true, "score": 2, "last_activity_date": 1478257358, "creation_date": 1478257358, "answer_id": 40421027, "question_id": 40404920, "link": "https://stackoverflow.com/questions/40404920/setting-basic-authentication-credentials-in-wwwmechanize/40421027#40421027", "title": "Setting basic authentication credentials in WWW::Mechanize", "body": "<p>I found the problem.</p>\n\n<p>Following the technique in <a href=\"http://perlmaven.com/lwp-useragent-and-basic-authentication\" rel=\"nofollow noreferrer\">this post on Perl Maven</a> (\"How to find out the URL and realm?\"), it turns out that the API doesn't send a challenge for credentials, specifying a realm, when you try connecting to it. It just gives you an error message stating that basic authentication is required. LWP::UserAgent doesn't know to do anything else at that point.</p>\n\n<p>So, I copied the authentication header from the successful curl request that simbabque suggested examining, and manually set that on the user-agent object:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ua-&gt;default_header('Authorization' =&gt; 'Basic [Base64-encoded string here]');\n</code></pre>\n\n<p>Now it works. Happy times.</p>\n"}], "owner": {"reputation": 769, "user_id": 3358139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e7f154c26b2099d94a29c9d9d361787?s=128&d=identicon&r=PG", "display_name": "Scott Martin", "link": "https://stackoverflow.com/users/3358139/scott-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "accepted_answer_id": 40421027, "answer_count": 1, "score": 1, "last_activity_date": 1478257358, "creation_date": 1478185440, "last_edit_date": 1478254715, "question_id": 40404920, "link": "https://stackoverflow.com/questions/40404920/setting-basic-authentication-credentials-in-wwwmechanize", "title": "Setting basic authentication credentials in WWW::Mechanize", "body": "<p>I'm having trouble using basic authentication in <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow noreferrer\">WWW::Mechanize</a>. I'm trying to connect to the <a href=\"https://www.streak.com/api/#authentication\" rel=\"nofollow noreferrer\">Streak API</a>, the documentation for which states:</p>\n\n<blockquote>\n  <p>Streak uses HTTP Basic Auth to sign each request with your API key. Simply set the username of the request to the API key. The password field is ignored. All requests must be made over HTTPS as HTTP requests will be ignored.</p>\n  \n  <p>Here's a sample request:</p>\n  \n  <p><code>curl https://www.streak.com/api/v1/pipelines -u YOUR_API_KEY:</code></p>\n</blockquote>\n\n<p>I can successfully access the API using <code>curl</code> in this fashion. However, I'm not able to authenticate successfully using WWW::Mechanize. Here's what I've got:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!perl\n\nuse warnings;\nuse strict;\nuse feature 'say';\n\nuse WWW::Mechanize;\n\nmy $api = 'https://www.streak.com/api/v1/';\n\nmy $mech = WWW::Mechanize-&gt;new( autocheck =&gt; 0 ); # don't die on errors\n\n$mech-&gt;credentials('my API key here', '');\n\n$mech-&gt;get($api . 'pipelines');\n\nsay $mech-&gt;response-&gt;status_line;\nsay $mech-&gt;res-&gt;request-&gt;as_string;\n</code></pre>\n\n<p>Running me that code gets:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>401 Unauthorized\nGET https://www.streak.com/api/v1/pipelines\nAccept-Encoding: gzip\nUser-Agent: WWW-Mechanize/1.83\n</code></pre>\n\n<p>The authentication isn't even being attempted. Can anyone suggest why that may be the case, and what I could do to fix it? This code is running in Strawberry Perl 5.24.0.1, if that may have anything to do with it.</p>\n\n<p>[Edited to include suggestion from simbabque of examining request object.]</p>\n"}, {"tags": ["arrays", "regex", "perl", "file"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1478185095, "post_id": 40404577, "comment_id": 68059675, "body": "Don&#39;t use XML::Simple. It&#39;s overcomplicated. You can try a different parser like XML::Twig, but you don&#39;t seem to be after structure here. If you&#39;re sure those attributes only ever contain numbers, you can just grab them with a pattern match."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478185713, "post_id": 40404577, "comment_id": 68060159, "body": "Can you post a more complete XML sample? My standard answer would be to use <code>XML::Twig</code> to parse it, but I can&#39;t give you an example without some source XML."}, {"owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478186345, "post_id": 40404577, "comment_id": 68060622, "body": "@Sobrique - added. it is XMI, not XML though."}, {"owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478186833, "post_id": 40404577, "comment_id": 68060979, "body": "@simbabque - it comes directly after <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1478187323, "post_id": 40404577, "comment_id": 68061324, "body": "<code>XML::Twig</code> can parse that file, so you should be good."}], "answers": [{"comments": [{"owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1478186181, "post_id": 40404935, "comment_id": 68060499, "body": "&quot;weird text format&quot; was the technical term I was looking for. It does unfortunately contain attributes that are strings and I apologize for not making this clear. I will amend my question. There is some basic structure though in that all attributes are separated by <code>&quot; </code> (quote followed by whitespace)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1478186537, "post_id": 40404935, "comment_id": 68060762, "body": "@bruce updated. The real data doesn&#39;t make much different. It doesn&#39;t contain anything that makes pattern-matching it hard. Just letters, numbers and blanks."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1478186505, "last_edit_date": 1478186505, "creation_date": 1478185491, "answer_id": 40404935, "question_id": 40404577, "link": "https://stackoverflow.com/questions/40404577/perl-find-lines-containing-string-1-then-extract-character-between-string-2-and/40404935#40404935", "title": "perl find lines containing string 1 then extract character between string 2 and 3", "body": "<p>If you do not want to parse a lot of structure from your XML document, but actually already have filtered it down to just these tags, then you can treat it as a weird text format.</p>\n\n<p>Sometimes it's ok to be pragmatic, as long as you can guarantee that there are only numbers, letters and whitespace in those attributes.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nwhile ( my $line = &lt;DATA&gt; ) {\n    next unless $line =~ /(textsem:DiseaseDisorderMention|textsem:SignSymptomMention)/;\n    my %attributes;\n    $attributes{$1} = $2 while $line =~ m/(\\w+)=\"([\\w\\s]+)\"/g;\n\n    print Dumper \\%attributes;\n}\n\n__DATA__\n&lt;textsem:DiseaseDisorderMention xmi:id=\"278\" sofa=\"6\" begin=\"56\" end=\"65\" id=\"6\" ontologyConceptArr=\"221 251 261 231 241\" typeID=\"2\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"1\"/&gt;\n</code></pre>\n\n<p>This gives you:</p>\n\n<pre><code>$VAR1 = {\n          'end' =&gt; '65',\n          'id' =&gt; '6',\n          'polarity' =&gt; '1',\n          'discoveryTechnique' =&gt; '1',\n          'uncertainty' =&gt; '0',\n          'historyOf' =&gt; '1',\n          'sofa' =&gt; '6',\n          'typeID' =&gt; '2',\n          'begin' =&gt; '56'\n        };\n</code></pre>\n\n<p>You can probably take it from there.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478188308, "post_id": 40405805, "comment_id": 68062001, "body": "Since I hardly ever actually use XML::Twig and you seem to use it a lot more... Can you explain whether there is a benefit of your approach of not using <code>twig_handlers</code> for this over the version I added in my second answer?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1478188373, "post_id": 40405805, "comment_id": 68062053, "body": "There&#39;s not much in it IMO. I feel handlers are slightly less intuitive if you don&#39;t need the parse/purge/rewrite capability they offer, but that&#39;s a personal opinion rather than a firm fact."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1478188572, "post_id": 40405805, "comment_id": 68062187, "body": "Thank you. Since I didn&#39;t know about the <code>get_xpath</code> method until now I feel the opposite. ;)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1478187882, "creation_date": 1478187882, "answer_id": 40405805, "question_id": 40404577, "link": "https://stackoverflow.com/questions/40404577/perl-find-lines-containing-string-1-then-extract-character-between-string-2-and/40405805#40405805", "title": "perl find lines containing string 1 then extract character between string 2 and 3", "body": "<p>Because it's come up in comments - my answer would be \"Use a parser\". </p>\n\n<p>XML::Twig is perfectly capable of parsing your XMI and it goes a bit like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new-&gt;parsefile ('your_file.xml'); \n\nmy @target_keys = qw ( id sofa begin segmentID );\n\nforeach my $thing ( $twig-&gt;get_xpath('//*[@id]') ) {\n   if (  $thing-&gt;tag eq 'textsem:SignSymptomMention'\n      or $thing-&gt;tag eq 'textsem:DiseaseDisorderMention' )\n   {\n      print $thing -&gt; tag;\n      print \"$_ =&gt; \" . $thing-&gt;att($_). \" \" for @target_keys;\n      print \"\\n\";\n   }\n}\n</code></pre>\n\n<p>You can accomplish the precise result you're after (although personally, I'd suggest not extracting things, and using them 'in place'):</p>\n\n<pre><code>my $twig = XML::Twig-&gt;new-&gt;parsefile('your_file.xml'); \n\nmy @target_keys = qw ( id sofa begin segmentID );\nmy @results; \n\nforeach my $thing ( $twig-&gt;get_xpath('//*[@id]') ) {\n   if (  $thing-&gt;tag eq 'textsem:SignSymptomMention'\n      or $thing-&gt;tag eq 'textsem:DiseaseDisorderMention' )\n   {\n      push @results, [map { $thing -&gt; att($_) } @target_keys]; \n\n   }\n}\n\nprint Dumper \\@results;\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>$VAR1 = [\n          [\n            '6',\n            '6',\n            '56',\n            'SIMPLE_SEGMENT'\n          ],\n          [\n            '0',\n            '6',\n            '18',\n            'SIMPLE_SEGMENT'\n          ],\n          [\n            '2',\n            '6',\n            '38',\n            'SIMPLE_SEGMENT'\n          ],\n          [\n            '5',\n            '6',\n            '45',\n            'SIMPLE_SEGMENT'\n          ],\n          [\n            '4',\n            '6',\n            '45',\n            'SIMPLE_SEGMENT'\n          ],\n          [\n            '3',\n            '6',\n            '38',\n            'SIMPLE_SEGMENT'\n          ],\n          [\n            '1',\n            '6',\n            '38',\n            'SIMPLE_SEGMENT'\n          ]\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1478188125, "creation_date": 1478188125, "answer_id": 40405897, "question_id": 40404577, "link": "https://stackoverflow.com/questions/40404577/perl-find-lines-containing-string-1-then-extract-character-between-string-2-and/40405897#40405897", "title": "perl find lines containing string 1 then extract character between string 2 and 3", "body": "<p>Here's another approach using <a href=\"https://v1.metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a> and twig handlers for the two tags you want to parse. It's possible to build an xpath expression to match both tags, but I prefer just assigning the same code reference twice as it's clearer and easier to read.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\nuse Data::Printer;\n\nmy $twig = XML::Twig-&gt;new(\n    twig_handlers =&gt; {\n        'textsem:DiseaseDisorderMention' =&gt; \\&amp;match,\n        'textsem:SignSymptomMention' =&gt; \\&amp;match,\n    }\n)-&gt;parse(\\*DATA);\n\nmy @mentions;\nsub match {\n    push @mentions, [ \n        $_-&gt;att('xmi:id'), \n        $_-&gt;att('sofa'), \n        $_-&gt;att('begin'), \n        $_-&gt;att('segmentID'),\n    ];\n}\n\np @mentions;\n\n__DATA__\n...\n</code></pre>\n\n<p>Alternatively you can also use a shorter <code>map</code> based approach for the handler. </p>\n\n<pre><code>sub match {\n    my ($t, $e) = @_;\n    push @mentions, [ map { $e-&gt;att($_) } qw(xmi:id sofa begin segmentID) ];\n}\n</code></pre>\n\n<p>In both cases the output is as follows:</p>\n\n<pre><code>[\n    [0] [\n        [0] 278,\n        [1] 6,\n        [2] 56,\n        [3] \"SIMPLE_SEGMENT\"\n    ],\n    [1] [\n        [0] 421,\n        [1] 6,\n        [2] 18,\n        [3] \"SIMPLE_SEGMENT\"\n    ],\n    [2] [\n        [0] 520,\n        [1] 6,\n        [2] 38,\n        [3] \"SIMPLE_SEGMENT\"\n    ],\n    [3] [\n        [0] 563,\n        [1] 6,\n        [2] 45,\n        [3] \"SIMPLE_SEGMENT\"\n    ],\n    [4] [\n        [0] 606,\n        [1] 6,\n        [2] 45,\n        [3] \"SIMPLE_SEGMENT\"\n    ],\n    [5] [\n        [0] 704,\n        [1] 6,\n        [2] 38,\n        [3] \"SIMPLE_SEGMENT\"\n    ],\n    [6] [\n        [0] 758,\n        [1] 6,\n        [2] 38,\n        [3] \"SIMPLE_SEGMENT\"\n    ]\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1478202233, "creation_date": 1478202233, "answer_id": 40409961, "question_id": 40404577, "link": "https://stackoverflow.com/questions/40404577/perl-find-lines-containing-string-1-then-extract-character-between-string-2-and/40409961#40409961", "title": "perl find lines containing string 1 then extract character between string 2 and 3", "body": "<p>Using <a href=\"http://search.cpan.org/~grantm/XML-SAX-0.99/SAX.pm\" rel=\"nofollow noreferrer\">XML::SAX</a> package:</p>\n\n<p>Main:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\nuse XML::SAX::ParserFactory;\nuse MyHandler;\n\nmy $handler = MyHandler-&gt;new();\nmy $parser = XML::SAX::ParserFactory-&gt;parser(Handler =&gt; $handler);\n\n$parser-&gt;parse_uri('./yourxmlfile.xml');\n\nprint Dumper($MyHandler::result);\n</code></pre>\n\n<p>package: <code>MyHandler.pm</code></p>\n\n<pre><code>package MyHandler;\nuse strict;\nuse warnings;\nuse base qw(XML::SAX::Base);\n\nour $result = [];\n\nsub start_element {\n    my ($self, $data) = @_;\n\n    if ($data-&gt;{'Name'} =~ /^textsem:(?:DiseaseDisorderMention|SignSymptomMention)$/) {\n        push $result, [ $data-&gt;{'Attributes'}-&gt;{'{http://www.omg.org/XMI}id'}-&gt;{'Value'}, \n                        $data-&gt;{'Attributes'}-&gt;{'{}sofa'}-&gt;{'Value'},\n                        $data-&gt;{'Attributes'}-&gt;{'{}begin'}-&gt;{'Value'},\n                        $data-&gt;{'Attributes'}-&gt;{'{}segmentID'}-&gt;{'Value'} ];\n    }\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40404935, "answer_count": 4, "score": 1, "last_activity_date": 1478202233, "creation_date": 1478184548, "last_edit_date": 1478186308, "question_id": 40404577, "link": "https://stackoverflow.com/questions/40404577/perl-find-lines-containing-string-1-then-extract-character-between-string-2-and", "title": "perl find lines containing string 1 then extract character between string 2 and 3", "body": "<p>Hi I have written the following script to extract lines that contain one of a list of strings:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $file_name = shift @ARGV;\n\nopen(my $file, '&lt;', $file_name) or die $!;\n\nwhile (&lt;$file&gt;) {\n   print $_ if /(textsem:DiseaseDisorderMention|textsem:SignSymptomMention)/;\n}\n\nclose $file;\n</code></pre>\n\n<p>which results in:</p>\n\n<pre><code>&lt;textsem:DiseaseDisorderMention xmi:id=\"278\" sofa=\"6\" begin=\"56\" end=\"65\" id=\"6\" ontologyConceptArr=\"221 251 261 231 241\" typeID=\"2\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"1\"/&gt;\n&lt;textsem:DiseaseDisorderMention xmi:id=\"421\" sofa=\"6\" begin=\"18\" end=\"26\" id=\"0\" ontologyConceptArr=\"359 399 369 339 309 349 389 379 319 329\" typeID=\"2\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n&lt;textsem:SignSymptomMention xmi:id=\"520\" sofa=\"6\" begin=\"38\" end=\"55\" id=\"2\" ontologyConceptArr=\"492 462 472 502 452 482\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n&lt;textsem:SignSymptomMention xmi:id=\"563\" sofa=\"6\" begin=\"45\" end=\"52\" id=\"5\" ontologyConceptArr=\"550\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n&lt;textsem:SignSymptomMention xmi:id=\"606\" sofa=\"6\" begin=\"45\" end=\"55\" id=\"4\" ontologyConceptArr=\"593\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n&lt;textsem:SignSymptomMention xmi:id=\"704\" sofa=\"6\" begin=\"38\" end=\"52\" id=\"3\" ontologyConceptArr=\"686 666 676 646 656 636\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n&lt;textsem:SignSymptomMention xmi:id=\"758\" sofa=\"6\" begin=\"38\" end=\"65\" id=\"1\" ontologyConceptArr=\"744 734\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n</code></pre>\n\n<p>Where you can see that I am extracting some xml (well actually it's an xmi file which doesn't seem to play nice with XML::Simple).</p>\n\n<p>Instead of just printing these lines, I would like to instead store some of the attributes like <code>id=\"278</code>, <code>sofa=\"6\"</code>,<code>begin=\"56\"</code> or <code>segmentID=\"SIMPLE_SEGMENT\"</code> into an array of arrays i.e bit like doing</p>\n\n<pre><code>@mentions =  ( [ 278, 6, 56, \"SIMPLE_SEGMENT\" ],\n               [ 421, 6, 18, \"SIMPLE SEGMENT\" ],\n               [ 520, 6, 38, \"SIMPLE SEGMENT\" ]\n                      .\n                      .\n                      .\n             );\n</code></pre>\n\n<p>I just don't know how to do this programatically. How would I do this?</p>\n\n<p>full XMI file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;xmi:XMI xmlns:syntax=\"http:///org/apache/ctakes/typesystem/type/syntax.ecore\" xmlns:refsem=\"http:///org/apache/ctakes/typesystem/type/refsem.ecore\" xmlns:cas=\"http:///uima/cas.ecore\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:util=\"http:///org/apache/ctakes/typesystem/type/util.ecore\" xmlns:textspan=\"http:///org/apache/ctakes/typesystem/type/textspan.ecore\" xmlns:assertion=\"http:///org/apache/ctakes/typesystem/type/temporary/assertion.ecore\" xmlns:structured=\"http:///org/apache/ctakes/typesystem/type/structured.ecore\" xmlns:relation=\"http:///org/apache/ctakes/typesystem/type/relation.ecore\" xmlns:textsem=\"http:///org/apache/ctakes/typesystem/type/textsem.ecore\" xmlns:type=\"http:///org/apache/ctakes/drugner/type.ecore\" xmlns:tcas=\"http:///uima/tcas.ecore\" xmi:version=\"2.0\"&gt;\n    &lt;cas:NULL xmi:id=\"0\"/&gt;\n    &lt;cas:Sofa xmi:id=\"6\" sofaNum=\"1\" sofaID=\"_InitialView\" mimeType=\"text\" sofaString=\"Mary doesn't have epilepsy, she has a family history of migraines.\"/&gt;\n    &lt;tcas:DocumentAnnotation xmi:id=\"1\" sofa=\"6\" begin=\"0\" end=\"66\" language=\"en\"/&gt;\n    &lt;textspan:Segment xmi:id=\"13\" sofa=\"6\" begin=\"0\" end=\"66\" id=\"SIMPLE_SEGMENT\"/&gt;\n    &lt;textspan:Sentence xmi:id=\"19\" sofa=\"6\" begin=\"0\" end=\"66\" sentenceNumber=\"0\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"25\" sofa=\"6\" begin=\"0\" end=\"4\" tokenNumber=\"0\" normalizedForm=\"Mary\" partOfSpeech=\"NNP\" capitalization=\"1\" numPosition=\"0\" canonicalForm=\"Mary\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"37\" sofa=\"6\" begin=\"5\" end=\"9\" tokenNumber=\"1\" normalizedForm=\"do\" partOfSpeech=\"VBZ\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"do\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"57\" sofa=\"6\" begin=\"13\" end=\"17\" tokenNumber=\"3\" normalizedForm=\"have\" partOfSpeech=\"VB\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"have\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"69\" sofa=\"6\" begin=\"18\" end=\"26\" tokenNumber=\"4\" normalizedForm=\"epilepsy\" partOfSpeech=\"NN\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"epilepsy\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"89\" sofa=\"6\" begin=\"28\" end=\"31\" tokenNumber=\"6\" normalizedForm=\"she\" partOfSpeech=\"PRP\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"she\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"101\" sofa=\"6\" begin=\"32\" end=\"35\" tokenNumber=\"7\" normalizedForm=\"HA\" partOfSpeech=\"VBZ\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"HA\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"113\" sofa=\"6\" begin=\"36\" end=\"37\" tokenNumber=\"8\" normalizedForm=\"A\" partOfSpeech=\"DT\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"A\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"125\" sofa=\"6\" begin=\"38\" end=\"44\" tokenNumber=\"9\" normalizedForm=\"family\" partOfSpeech=\"NN\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"family\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"137\" sofa=\"6\" begin=\"45\" end=\"52\" tokenNumber=\"10\" normalizedForm=\"history\" partOfSpeech=\"NN\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"history\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"149\" sofa=\"6\" begin=\"53\" end=\"55\" tokenNumber=\"11\" normalizedForm=\"of\" partOfSpeech=\"IN\" capitalization=\"0\" numPosition=\"0\"/&gt;\n    &lt;syntax:WordToken xmi:id=\"161\" sofa=\"6\" begin=\"56\" end=\"65\" tokenNumber=\"12\" normalizedForm=\"migraine\" partOfSpeech=\"NNS\" capitalization=\"0\" numPosition=\"0\" canonicalForm=\"migraine\"/&gt;\n    &lt;syntax:ContractionToken xmi:id=\"49\" sofa=\"6\" begin=\"9\" end=\"12\" tokenNumber=\"2\" normalizedForm=\"n't\" partOfSpeech=\"RB\"/&gt;\n    &lt;syntax:PunctuationToken xmi:id=\"81\" sofa=\"6\" begin=\"26\" end=\"27\" tokenNumber=\"5\" normalizedForm=\",\" partOfSpeech=\",\"/&gt;\n    &lt;syntax:PunctuationToken xmi:id=\"173\" sofa=\"6\" begin=\"65\" end=\"66\" tokenNumber=\"13\" normalizedForm=\".\" partOfSpeech=\".\"/&gt;\n    &lt;syntax:NP xmi:id=\"181\" sofa=\"6\" begin=\"0\" end=\"4\" chunkType=\"NP\"/&gt;\n    &lt;syntax:NP xmi:id=\"191\" sofa=\"6\" begin=\"18\" end=\"26\" chunkType=\"NP\"/&gt;\n    &lt;syntax:NP xmi:id=\"201\" sofa=\"6\" begin=\"28\" end=\"31\" chunkType=\"NP\"/&gt;\n    &lt;syntax:NP xmi:id=\"211\" sofa=\"6\" begin=\"36\" end=\"65\" chunkType=\"NP\"/&gt;\n    &lt;syntax:NP xmi:id=\"216\" sofa=\"6\" begin=\"56\" end=\"65\" chunkType=\"NP\"/&gt;\n    &lt;syntax:VP xmi:id=\"186\" sofa=\"6\" begin=\"5\" end=\"17\" chunkType=\"VP\"/&gt;\n    &lt;syntax:VP xmi:id=\"206\" sofa=\"6\" begin=\"32\" end=\"35\" chunkType=\"VP\"/&gt;\n    &lt;syntax:O xmi:id=\"196\" sofa=\"6\" begin=\"26\" end=\"27\" chunkType=\"O\"/&gt;\n    &lt;textsem:DiseaseDisorderMention xmi:id=\"278\" sofa=\"6\" begin=\"56\" end=\"65\" id=\"6\" ontologyConceptArr=\"221 251 261 231 241\" typeID=\"2\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"1\"/&gt;\n    &lt;textsem:DiseaseDisorderMention xmi:id=\"421\" sofa=\"6\" begin=\"18\" end=\"26\" id=\"0\" ontologyConceptArr=\"359 399 369 339 309 349 389 379 319 329\" typeID=\"2\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n    &lt;textsem:SignSymptomMention xmi:id=\"520\" sofa=\"6\" begin=\"38\" end=\"55\" id=\"2\" ontologyConceptArr=\"492 462 472 502 452 482\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n    &lt;textsem:SignSymptomMention xmi:id=\"563\" sofa=\"6\" begin=\"45\" end=\"52\" id=\"5\" ontologyConceptArr=\"550\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n    &lt;textsem:SignSymptomMention xmi:id=\"606\" sofa=\"6\" begin=\"45\" end=\"55\" id=\"4\" ontologyConceptArr=\"593\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n    &lt;textsem:SignSymptomMention xmi:id=\"704\" sofa=\"6\" begin=\"38\" end=\"52\" id=\"3\" ontologyConceptArr=\"686 666 676 646 656 636\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n    &lt;textsem:SignSymptomMention xmi:id=\"758\" sofa=\"6\" begin=\"38\" end=\"65\" id=\"1\" ontologyConceptArr=\"744 734\" typeID=\"3\" segmentID=\"SIMPLE_SEGMENT\" discoveryTechnique=\"1\" confidence=\"0.0\" polarity=\"1\" uncertainty=\"0\" conditional=\"false\" generic=\"false\" subject=\"patient\" historyOf=\"0\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"792\" sofa=\"6\" begin=\"0\" end=\"66\" id=\"0\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"806\" sofa=\"6\" begin=\"0\" end=\"4\" id=\"1\" form=\"Mary\" lemma=\"mary\" cpostag=\"NNP\" postag=\"NNP\" feats=\"_\" head=\"848\" deprel=\"nsubj\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"820\" sofa=\"6\" begin=\"5\" end=\"9\" id=\"2\" form=\"does\" lemma=\"do\" cpostag=\"VBZ\" postag=\"VBZ\" feats=\"_\" head=\"848\" deprel=\"aux\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"834\" sofa=\"6\" begin=\"9\" end=\"12\" id=\"3\" form=\"n't\" lemma=\"not\" cpostag=\"RB\" postag=\"RB\" feats=\"_\" head=\"848\" deprel=\"neg\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"848\" sofa=\"6\" begin=\"13\" end=\"17\" id=\"4\" form=\"have\" lemma=\"have\" cpostag=\"VB\" postag=\"VB\" feats=\"_\" head=\"904\" deprel=\"ccomp\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"862\" sofa=\"6\" begin=\"18\" end=\"26\" id=\"5\" form=\"epilepsy\" lemma=\"epilepsy\" cpostag=\"NN\" postag=\"NN\" feats=\"_\" head=\"848\" deprel=\"dobj\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"876\" sofa=\"6\" begin=\"26\" end=\"27\" id=\"6\" form=\",\" lemma=\",\" cpostag=\",\" postag=\",\" feats=\"_\" head=\"904\" deprel=\"punct\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"890\" sofa=\"6\" begin=\"28\" end=\"31\" id=\"7\" form=\"she\" lemma=\"she\" cpostag=\"PRP\" postag=\"PRP\" feats=\"_\" head=\"904\" deprel=\"nsubj\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"904\" sofa=\"6\" begin=\"32\" end=\"35\" id=\"8\" form=\"has\" lemma=\"have\" cpostag=\"VBZ\" postag=\"VBZ\" feats=\"_\" head=\"792\" deprel=\"root\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"918\" sofa=\"6\" begin=\"36\" end=\"37\" id=\"9\" form=\"a\" lemma=\"a\" cpostag=\"DT\" postag=\"DT\" feats=\"_\" head=\"946\" deprel=\"det\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"932\" sofa=\"6\" begin=\"38\" end=\"44\" id=\"10\" form=\"family\" lemma=\"family\" cpostag=\"NN\" postag=\"NN\" feats=\"_\" head=\"946\" deprel=\"nn\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"946\" sofa=\"6\" begin=\"45\" end=\"52\" id=\"11\" form=\"history\" lemma=\"history\" cpostag=\"NN\" postag=\"NN\" feats=\"_\" head=\"904\" deprel=\"dobj\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"960\" sofa=\"6\" begin=\"53\" end=\"55\" id=\"12\" form=\"of\" lemma=\"of\" cpostag=\"IN\" postag=\"IN\" feats=\"_\" head=\"946\" deprel=\"prep\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"974\" sofa=\"6\" begin=\"56\" end=\"65\" id=\"13\" form=\"migraines\" lemma=\"migraine\" cpostag=\"NNS\" postag=\"NNS\" feats=\"_\" head=\"960\" deprel=\"pobj\" pdeprel=\"_\"/&gt;\n    &lt;syntax:ConllDependencyNode xmi:id=\"988\" sofa=\"6\" begin=\"65\" end=\"66\" id=\"14\" form=\".\" lemma=\".\" cpostag=\".\" postag=\".\" feats=\"_\" head=\"904\" deprel=\"punct\" pdeprel=\"_\"/&gt;\n    &lt;textsem:Predicate xmi:id=\"1002\" sofa=\"6\" begin=\"5\" end=\"9\" relations=\"\" frameSet=\"do.01\"/&gt;\n    &lt;textsem:Predicate xmi:id=\"1009\" sofa=\"6\" begin=\"13\" end=\"17\" relations=\"1080 1090 1100\" frameSet=\"have.03\"/&gt;\n    &lt;textsem:Predicate xmi:id=\"1016\" sofa=\"6\" begin=\"32\" end=\"35\" relations=\"1053 1063\" frameSet=\"have.03\"/&gt;\n    &lt;textsem:SemanticArgument xmi:id=\"1023\" sofa=\"6\" begin=\"0\" end=\"4\" relation=\"1080\" label=\"A0\"/&gt;\n    &lt;textsem:SemanticArgument xmi:id=\"1029\" sofa=\"6\" begin=\"9\" end=\"12\" relation=\"1090\" label=\"AM-NEG\"/&gt;\n    &lt;textsem:SemanticArgument xmi:id=\"1035\" sofa=\"6\" begin=\"18\" end=\"26\" relation=\"1100\" label=\"A1\"/&gt;\n    &lt;textsem:SemanticArgument xmi:id=\"1041\" sofa=\"6\" begin=\"28\" end=\"31\" relation=\"1053\" label=\"A0\"/&gt;\n    &lt;textsem:SemanticArgument xmi:id=\"1047\" sofa=\"6\" begin=\"45\" end=\"52\" relation=\"1063\" label=\"A1\"/&gt;\n    &lt;textsem:SemanticRoleRelation xmi:id=\"1053\" id=\"0\" category=\"A0\" discoveryTechnique=\"0\" confidence=\"0.0\" polarity=\"0\" uncertainty=\"0\" conditional=\"false\" predicate=\"1016\" argument=\"1041\"/&gt;\n    &lt;textsem:SemanticRoleRelation xmi:id=\"1063\" id=\"0\" category=\"A1\" discoveryTechnique=\"0\" confidence=\"0.0\" polarity=\"0\" uncertainty=\"0\" conditional=\"false\" predicate=\"1016\" argument=\"1047\"/&gt;\n    &lt;textsem:SemanticRoleRelation xmi:id=\"1080\" id=\"0\" category=\"A0\" discoveryTechnique=\"0\" confidence=\"0.0\" polarity=\"0\" uncertainty=\"0\" conditional=\"false\" predicate=\"1009\" argument=\"1023\"/&gt;\n    &lt;textsem:SemanticRoleRelation xmi:id=\"1090\" id=\"0\" category=\"AM-NEG\" discoveryTechnique=\"0\" confidence=\"0.0\" polarity=\"0\" uncertainty=\"0\" conditional=\"false\" predicate=\"1009\" argument=\"1029\"/&gt;\n    &lt;textsem:SemanticRoleRelation xmi:id=\"1100\" id=\"0\" category=\"A1\" discoveryTechnique=\"0\" confidence=\"0.0\" polarity=\"0\" uncertainty=\"0\" conditional=\"false\" predicate=\"1009\" argument=\"1035\"/&gt;\n    &lt;cas:NonEmptyFSList xmi:id=\"1073\" head=\"1053\" tail=\"1076\"/&gt;\n    &lt;cas:NonEmptyFSList xmi:id=\"1076\" head=\"1063\" tail=\"1079\"/&gt;\n    &lt;cas:NonEmptyFSList xmi:id=\"1110\" head=\"1080\" tail=\"1113\"/&gt;\n    &lt;cas:NonEmptyFSList xmi:id=\"1113\" head=\"1090\" tail=\"1116\"/&gt;\n    &lt;cas:NonEmptyFSList xmi:id=\"1116\" head=\"1100\" tail=\"1119\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1334\" sofa=\"6\" begin=\"0\" end=\"4\" nodeType=\"NNP\" nodeValue=\"Mary\" leaf=\"true\" parent=\"1570\" headIndex=\"0\" index=\"0\" tokenIndex=\"0\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1347\" sofa=\"6\" begin=\"5\" end=\"9\" nodeType=\"VBZ\" nodeValue=\"does\" leaf=\"true\" parent=\"1587\" headIndex=\"0\" index=\"1\" tokenIndex=\"1\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1360\" sofa=\"6\" begin=\"9\" end=\"12\" nodeType=\"RB\" nodeValue=\"n't\" leaf=\"true\" parent=\"1587\" headIndex=\"0\" index=\"2\" tokenIndex=\"2\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1373\" sofa=\"6\" begin=\"13\" end=\"17\" nodeType=\"VB\" nodeValue=\"have\" leaf=\"true\" parent=\"1605\" headIndex=\"0\" index=\"3\" tokenIndex=\"3\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1386\" sofa=\"6\" begin=\"18\" end=\"26\" nodeType=\"NN\" nodeValue=\"epilepsy\" leaf=\"true\" parent=\"1622\" headIndex=\"0\" index=\"4\" tokenIndex=\"4\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1399\" sofa=\"6\" begin=\"26\" end=\"27\" nodeType=\",\" nodeValue=\",\" leaf=\"true\" parent=\"1534\" headIndex=\"0\" index=\"5\" tokenIndex=\"5\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1412\" sofa=\"6\" begin=\"28\" end=\"31\" nodeType=\"PRP\" nodeValue=\"she\" leaf=\"true\" parent=\"1655\" headIndex=\"0\" index=\"6\" tokenIndex=\"6\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1425\" sofa=\"6\" begin=\"32\" end=\"35\" nodeType=\"VBZ\" nodeValue=\"has\" leaf=\"true\" parent=\"1672\" headIndex=\"0\" index=\"7\" tokenIndex=\"7\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1438\" sofa=\"6\" begin=\"36\" end=\"37\" nodeType=\"DT\" nodeValue=\"a\" leaf=\"true\" parent=\"1706\" headIndex=\"0\" index=\"8\" tokenIndex=\"8\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1451\" sofa=\"6\" begin=\"38\" end=\"44\" nodeType=\"NN\" nodeValue=\"family\" leaf=\"true\" parent=\"1706\" headIndex=\"0\" index=\"9\" tokenIndex=\"9\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1464\" sofa=\"6\" begin=\"45\" end=\"52\" nodeType=\"NN\" nodeValue=\"history\" leaf=\"true\" parent=\"1706\" headIndex=\"0\" index=\"10\" tokenIndex=\"10\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1477\" sofa=\"6\" begin=\"53\" end=\"55\" nodeType=\"IN\" nodeValue=\"of\" leaf=\"true\" parent=\"1724\" headIndex=\"0\" index=\"11\" tokenIndex=\"11\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1490\" sofa=\"6\" begin=\"56\" end=\"65\" nodeType=\"NNS\" nodeValue=\"migraines\" leaf=\"true\" parent=\"1741\" headIndex=\"0\" index=\"12\" tokenIndex=\"12\"/&gt;\n    &lt;syntax:TerminalTreebankNode xmi:id=\"1503\" sofa=\"6\" begin=\"65\" end=\"66\" nodeType=\".\" nodeValue=\".\" leaf=\"true\" parent=\"1534\" headIndex=\"0\" index=\"13\" tokenIndex=\"13\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1534\" sofa=\"6\" begin=\"0\" end=\"66\" nodeType=\"S\" leaf=\"false\" parent=\"1516\" children=\"1553 1399 1638 1503\" headIndex=\"7\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1553\" sofa=\"6\" begin=\"0\" end=\"26\" nodeType=\"S\" leaf=\"false\" parent=\"1534\" children=\"1570 1587\" headIndex=\"1\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1570\" sofa=\"6\" begin=\"0\" end=\"4\" nodeType=\"NP\" leaf=\"false\" parent=\"1553\" children=\"1334\" headIndex=\"0\"&gt;\n        &lt;nodeTags&gt;SBJ&lt;/nodeTags&gt;\n    &lt;/syntax:TreebankNode&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1587\" sofa=\"6\" begin=\"5\" end=\"26\" nodeType=\"VP\" leaf=\"false\" parent=\"1553\" children=\"1347 1360 1605\" headIndex=\"1\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1605\" sofa=\"6\" begin=\"13\" end=\"26\" nodeType=\"VP\" leaf=\"false\" parent=\"1587\" children=\"1373 1622\" headIndex=\"3\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1622\" sofa=\"6\" begin=\"18\" end=\"26\" nodeType=\"NP\" leaf=\"false\" parent=\"1605\" children=\"1386\" headIndex=\"4\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1638\" sofa=\"6\" begin=\"28\" end=\"65\" nodeType=\"S\" leaf=\"false\" parent=\"1534\" children=\"1655 1672\" headIndex=\"7\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1655\" sofa=\"6\" begin=\"28\" end=\"31\" nodeType=\"NP\" leaf=\"false\" parent=\"1638\" children=\"1412\" headIndex=\"6\"&gt;\n        &lt;nodeTags&gt;SBJ&lt;/nodeTags&gt;\n    &lt;/syntax:TreebankNode&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1672\" sofa=\"6\" begin=\"32\" end=\"65\" nodeType=\"VP\" leaf=\"false\" parent=\"1638\" children=\"1425 1689\" headIndex=\"7\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1689\" sofa=\"6\" begin=\"36\" end=\"65\" nodeType=\"NP\" leaf=\"false\" parent=\"1672\" children=\"1706 1724\" headIndex=\"10\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1706\" sofa=\"6\" begin=\"36\" end=\"52\" nodeType=\"NP\" leaf=\"false\" parent=\"1689\" children=\"1438 1451 1464\" headIndex=\"10\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1724\" sofa=\"6\" begin=\"53\" end=\"65\" nodeType=\"PP\" leaf=\"false\" parent=\"1689\" children=\"1477 1741\" headIndex=\"11\"/&gt;\n    &lt;syntax:TreebankNode xmi:id=\"1741\" sofa=\"6\" begin=\"56\" end=\"65\" nodeType=\"NP\" leaf=\"false\" parent=\"1724\" children=\"1490\" headIndex=\"12\"/&gt;\n    &lt;syntax:TopTreebankNode xmi:id=\"1516\" sofa=\"6\" begin=\"0\" end=\"66\" nodeType=\"TOP\" leaf=\"false\" children=\"1534\" headIndex=\"0\" treebankParse=\"(TOP (S (S (NP-SBJ (NNP Mary)) (VP (VBZ does)(RB n't) (VP (VB have) (NP (NN epilepsy)))))(, ,) (S (NP-SBJ (PRP she)) (VP (VBZ has) (NP (NP (DT a) (NN family) (NN history)) (PP (IN of) (NP (NNS migraines))))))(. .)))\" terminals=\"1334 1347 1360 1373 1386 1399 1412 1425 1438 1451 1464 1477 1490 1503\"/&gt;\n    &lt;cas:EmptyFSList xmi:id=\"1119\"/&gt;\n    &lt;cas:EmptyFSList xmi:id=\"1079\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"734\" codingScheme=\"SNOMEDCT\" code=\"137741002\" oid=\"137741002#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0455393\" tui=\"T033\" preferredText=\"FH: Migraine\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"744\" codingScheme=\"SNOMEDCT\" code=\"160342001\" oid=\"160342001#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0455393\" tui=\"T033\" preferredText=\"FH: Migraine\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"636\" codingScheme=\"SNOMEDCT\" code=\"57177007\" oid=\"57177007#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"656\" codingScheme=\"SNOMEDCT\" code=\"276502004\" oid=\"276502004#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"646\" codingScheme=\"SNOMEDCT\" code=\"160470003\" oid=\"160470003#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"676\" codingScheme=\"SNOMEDCT\" code=\"266909004\" oid=\"266909004#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"666\" codingScheme=\"SNOMEDCT\" code=\"137863003\" oid=\"137863003#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"686\" codingScheme=\"SNOMEDCT\" code=\"137667000\" oid=\"137667000#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"593\" codingScheme=\"SNOMEDCT\" code=\"392521001\" oid=\"392521001#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0262926\" tui=\"T033\" preferredText=\"Medical History\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"550\" codingScheme=\"SNOMEDCT\" code=\"392521001\" oid=\"392521001#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0262926\" tui=\"T033\" preferredText=\"Medical History\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"482\" codingScheme=\"SNOMEDCT\" code=\"137863003\" oid=\"137863003#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"452\" codingScheme=\"SNOMEDCT\" code=\"57177007\" oid=\"57177007#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"502\" codingScheme=\"SNOMEDCT\" code=\"137667000\" oid=\"137667000#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"472\" codingScheme=\"SNOMEDCT\" code=\"276502004\" oid=\"276502004#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"462\" codingScheme=\"SNOMEDCT\" code=\"160470003\" oid=\"160470003#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"492\" codingScheme=\"SNOMEDCT\" code=\"266909004\" oid=\"266909004#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0241889\" tui=\"T033\" preferredText=\"Family history\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"329\" codingScheme=\"SNOMEDCT\" code=\"246545002\" oid=\"246545002#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"319\" codingScheme=\"SNOMEDCT\" code=\"267593008\" oid=\"267593008#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"379\" codingScheme=\"SNOMEDCT\" code=\"271788002\" oid=\"271788002#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"389\" codingScheme=\"SNOMEDCT\" code=\"193026007\" oid=\"193026007#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"349\" codingScheme=\"SNOMEDCT\" code=\"128613002\" oid=\"128613002#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"309\" codingScheme=\"SNOMEDCT\" code=\"155036009\" oid=\"155036009#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"339\" codingScheme=\"SNOMEDCT\" code=\"267698007\" oid=\"267698007#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"369\" codingScheme=\"SNOMEDCT\" code=\"155045005\" oid=\"155045005#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"399\" codingScheme=\"SNOMEDCT\" code=\"313307000\" oid=\"313307000#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"359\" codingScheme=\"SNOMEDCT\" code=\"84757009\" oid=\"84757009#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0014544\" tui=\"T047\" preferredText=\"Epilepsy\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"241\" codingScheme=\"SNOMEDCT\" code=\"267699004\" oid=\"267699004#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0149931\" tui=\"T047\" preferredText=\"Migraine Disorders\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"231\" codingScheme=\"SNOMEDCT\" code=\"193041007\" oid=\"193041007#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0149931\" tui=\"T047\" preferredText=\"Migraine Disorders\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"261\" codingScheme=\"SNOMEDCT\" code=\"155048007\" oid=\"155048007#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0149931\" tui=\"T047\" preferredText=\"Migraine Disorders\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"251\" codingScheme=\"SNOMEDCT\" code=\"37796009\" oid=\"37796009#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0149931\" tui=\"T047\" preferredText=\"Migraine Disorders\"/&gt;\n    &lt;refsem:UmlsConcept xmi:id=\"221\" codingScheme=\"SNOMEDCT\" code=\"155046006\" oid=\"155046006#SNOMEDCT\" score=\"0.0\" disambiguated=\"false\" cui=\"C0149931\" tui=\"T047\" preferredText=\"Migraine Disorders\"/&gt;\n    &lt;cas:View sofa=\"6\" members=\"1 13 19 25 37 57 69 89 101 113 125 137 149 161 49 81 173 181 191 201 211 216 186 206 196 278 421 520 563 606 704 758 792 806 820 834 848 862 876 890 904 918 932 946 960 974 988 1002 1009 1016 1023 1029 1035 1041 1047 1053 1063 1080 1090 1100 1073 1076 1110 1113 1116 1334 1347 1360 1373 1386 1399 1412 1425 1438 1451 1464 1477 1490 1503 1534 1553 1570 1587 1605 1622 1638 1655 1672 1689 1706 1724 1741 1516\"/&gt;\n&lt;/xmi:XMI&gt;\n</code></pre>\n"}, {"tags": ["java", "perl", "modulo"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478183386, "post_id": 40404118, "comment_id": 68058304, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4403542/how-does-java-do-modulus-calculations-with-negative-numbers\">How does java do modulus calculations with negative numbers?</a>"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 1, "creation_date": 1478183901, "post_id": 40404118, "comment_id": 68058722, "body": "Why do you expect that two arbitrary programming languages that for sure have different semantics and underlying programming models ... give you the same results? What exactly made you think that a perl $something acts exactly the same as a Java double?! Dont get me wrong, but that is like asking &quot;hey, why do bananas taste different than apples?&quot; (you see, they are both fruits, aren&#39;t they?!)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1478183965, "post_id": 40404118, "comment_id": 68058769, "body": "In sympathy to the OP, <code>%</code> is a similar operator to <code>*</code> and <code>&#47;</code>, and the latter two work in the same way."}], "answers": [{"comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1478183479, "post_id": 40404155, "comment_id": 68058398, "body": "Behaviour for negative numbers is also different. But really, who uses <code>%</code> for negative or non-integral numbers?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1478183553, "post_id": 40404155, "comment_id": 68058463, "body": "@Thilo: Just realised I only 1/2 answered it. Note that even the clever C++ bods only fully defined the negative argument case from C++11 onwards. Prior to that it was up to the implementation."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1478183563, "post_id": 40404155, "comment_id": 68058471, "body": "@Thilo People who think <code>$float % 1</code> is a good way to get the fractional part of a number."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1478183686, "last_edit_date": 1478183686, "creation_date": 1478183399, "answer_id": 40404155, "question_id": 40404118, "link": "https://stackoverflow.com/questions/40404118/why-does-modulo-operation-gives-different-results-in-java-vs-perl/40404155#40404155", "title": "Why does modulo operation gives different results in Java VS Perl?", "body": "<p>The Java modulo operator can work with floating point types and also has the property that the result will be negative if the first argument is negative.</p>\n\n<p>The Perl modulo operator is for integer types only and the result is always positive.</p>\n\n<p>If you want the Perl one to behave like the Java one, then scale the fractions up to integers with an appropriate multiplication, take the modulus, and then divide to get the final result. Compensate for the negative sign manually. Although you might be better off building your own version of the operator yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 11, "last_activity_date": 1478193712, "last_edit_date": 1478193712, "creation_date": 1478183716, "answer_id": 40404294, "question_id": 40404118, "link": "https://stackoverflow.com/questions/40404118/why-does-modulo-operation-gives-different-results-in-java-vs-perl/40404294#40404294", "title": "Why does modulo operation gives different results in Java VS Perl?", "body": "<p>The second case:</p>\n\n<ul>\n<li><code>%</code> operates on integers and floating-point numbers in Java,</li>\n<li><code>%</code> only operates on integers in Perl.</li>\n</ul>\n\n<hr>\n\n<p>The third case:</p>\n\n<ul>\n<li><p>Java defines the modulus operation such that the following equation is true:</p>\n\n<pre><code>dividend == ((int)(dividend/divisor)) * divisor + (dividend % divisor)\n\ne.g. -1 = 0 * 1000 + -1\n</code></pre></li>\n<li><p>Perl defines the modulus operation such that the following equation is true:</p>\n\n<pre><code>$dividend == floor($dividend/$divisor) * divisor + ($dividend % $divisor)\n\ne.g. -1 = -1 * 1000 + 999\n</code></pre></li>\n</ul>\n\n<p>The Perl way has the advantage that the quotient (<code>floor($dividend/$divisor)</code>) will always have the same sign as the dividend.</p>\n\n<hr>\n\n<p>To get the same behaviour as Java in Perl, use the <a href=\"https://metacpan.org/pod/distribution/perl/ext/POSIX/lib/POSIX.pod#fmod\" rel=\"noreferrer\"><code>POSIX::fmod</code></a> function.</p>\n\n<blockquote>\n  <p>This is identical to the C function fmod().</p>\n</blockquote>\n\n<pre><code>$r = fmod($x, $y);\n</code></pre>\n\n<blockquote>\n  <p>It returns the remainder <code>$r = $x - $n*$y</code>, where <code>$n = trunc($x/$y)</code>. The <code>$r</code> has the same sign as <code>$x</code> and magnitude (absolute value) less than the magnitude of <code>$y</code>.</p>\n</blockquote>\n\n<pre><code>use POSIX 'fmod';\n\n$m1 = fmod(1, 1000);     # 1\n$m2 = fmod(0.01, 1000);  # 0.01\n$m3 = fmod(-1, 1000);    # -1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11037, "user_id": 3344829, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/HMY9j.jpg?s=128&g=1", "display_name": "Saravana", "link": "https://stackoverflow.com/users/3344829/saravana"}, "is_accepted": false, "score": 1, "last_activity_date": 1478187374, "last_edit_date": 1478187374, "creation_date": 1478187054, "answer_id": 40405517, "question_id": 40404118, "link": "https://stackoverflow.com/questions/40404118/why-does-modulo-operation-gives-different-results-in-java-vs-perl/40405517#40405517", "title": "Why does modulo operation gives different results in Java VS Perl?", "body": "<p>Implemented the same in <code>perl</code></p>\n\n<pre><code>sub modulo($$) {\n        our $num1   = shift;\n        our $num2   = shift;\n        our $flip   = ( $num1 &lt; 0 ? -1 : 1 ) * ( $num2 &lt; 0 ? -1 : 1 );\n        our $power1 = length substr $num1, index $num1, \".\";\n        our $power2 = length substr $num2, index $num2, \".\";\n        our $power  = $power1 &gt; $power2 ? $power1 : $power2;\n        ( ( abs($num1) * ( 10 ** $power ) ) % ( abs($num2) * ( 10 ** $power ) ) ) * $flip / ( 10 ** $power );\n    }\n\nprint modulo( 1,    1000 ); # 1\nprint modulo( 0.01, 1000 ); # 0.01\nprint modulo( -1,   1000 ); # -1\n</code></pre>\n"}], "owner": {"reputation": 1063, "user_id": 3817503, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cede885ce29e2ee1e9238883f4b44c42?s=128&d=identicon&r=PG&f=1", "display_name": "goe", "link": "https://stackoverflow.com/users/3817503/goe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 40404294, "answer_count": 3, "score": 8, "last_activity_date": 1478193712, "creation_date": 1478183312, "question_id": 40404118, "link": "https://stackoverflow.com/questions/40404118/why-does-modulo-operation-gives-different-results-in-java-vs-perl", "title": "Why does modulo operation gives different results in Java VS Perl?", "body": "<p>I run this in Java 7 and I get:</p>\n\n<pre><code>double remainder1 = 1 % 1000;\ndouble remainder2 = 0.01 % 1000;\ndouble remainder3 = -1 % 1000;\n\nSystem.out.println(\"START: \"+remainder1+\" | \"+remainder2+\" | \"+remainder3);\n&gt;&gt;&gt;START: 1.0 | 0.01 | -1.0\n</code></pre>\n\n<p>But when I run the same operations in Perl 5.8.8 I get different results for two out of three:</p>\n\n<pre><code>my $remainder1 = 1 % 1000;\nmy $remainder2 = 0.01 % 1000;\nmy $remainder3 = -1 % 1000;\nprint \"START: $remainder1 | $remainder2 | $remainder3\";\n&gt;&gt;&gt;START: 1 | 0 | 999\n</code></pre>\n\n<p>Why is there such a difference in the last two calculations?\nHow can I get perl to match java results?</p>\n"}, {"tags": ["perl", "awk", "sed", "grep", "cat"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1478182553, "post_id": 40402268, "comment_id": 68057652, "body": "It would be harder to overlook if you only logged actual problems. Even with color coding, you could easily miss one if you&#39;re sifting through hundreds of lines of df output."}], "answers": [{"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 6, "last_activity_date": 1478178797, "creation_date": 1478178797, "answer_id": 40402428, "question_id": 40402268, "link": "https://stackoverflow.com/questions/40402268/colorize-df-output-if-use-80/40402428#40402428", "title": "colorize df output if Use% =&gt; 80%", "body": "<p>Try</p>\n\n<pre><code>grep --color=auto '[8-9][0-9]%\\|100%\\|$' logfile\n</code></pre>\n\n<ul>\n<li><code>--color=auto</code> to highlight matched text</li>\n<li><code>[8-9][0-9]%</code> match text in the range 80-99%</li>\n<li><code>\\|100%</code> or 100% (not sure if it is a valid value)</li>\n<li><code>\\|$</code> or end of line - a trick to output all other lines without highlighting anything</li>\n</ul>\n\n<p><br>\nTo highlight entire matching line</p>\n\n<pre><code>grep --color=auto '.*\\([8-9][0-9]%\\|100%\\).*\\|$' logfile\n</code></pre>\n\n<p>or with ERE</p>\n\n<pre><code>grep -E --color=auto '.*([8-9][0-9]%|100%).*|$' logfile\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 7109979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/wpQUK.jpg?s=128&g=1", "display_name": "PCnetMD", "link": "https://stackoverflow.com/users/7109979/pcnetmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1478178797, "creation_date": 1478178336, "question_id": 40402268, "link": "https://stackoverflow.com/questions/40402268/colorize-df-output-if-use-80", "title": "colorize df output if Use% =&gt; 80%", "body": "<p>I have 40+ remote sites that I run a daily CRONTAB that collects df -h from each sites servers and appends it to a daily log file on our report server at the home office.\nIs there an easy way to cat / grep / sed / awk / perl / this file so that any lines that have a Use% of 80%, or more, gets highlighted/colorized, so there is less chance of a server with storage limitations being overlooked?</p>\n\n<p>Thank you, for your assistance.</p>\n"}, {"tags": ["apache", "perl", "ubuntu", "cgi", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1478181568, "post_id": 40401770, "comment_id": 68056976, "body": "See if <a href=\"http://stackoverflow.com/questions/14792978/perl-apache-perl-script-displayed-as-plain-text\">this accepted answer</a> helps at all (I&#39;m pretty confident it will)"}], "owner": {"reputation": 238, "user_id": 4685205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzpj4.jpg?s=128&g=1", "display_name": "Cole Henley", "link": "https://stackoverflow.com/users/4685205/cole-henley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478176856, "creation_date": 1478176856, "question_id": 40401770, "link": "https://stackoverflow.com/questions/40401770/serverpilot-ubuntu-14-04-accessing-cgi-scripts", "title": "Serverpilot Ubuntu 14.04 accessing CGI-scripts", "body": "<p>Got an odd Serverpilot query not specifically Craft related</p>\n\n<p>My client wants FTP access to a subfolder on the site - loathe to let them have full access so created a user with access to <code>/home/FTPUSER</code> and symlink to this from my <code>/srv/users/serverpilot/apps/APPNAME/public/</code> folder so that they cannot access the site's core system files, etc from a script.</p>\n\n<p>PHP files from this folder are working fine but the client now wants to be able to run CGI/Perl scripts from this folder. I have tried following instructions at <a href=\"https://serverpilot.io/community/articles/how-to-create-a-cgi-bin-directory.html\" rel=\"nofollow noreferrer\">https://serverpilot.io/community/articles/how-to-create-a-cgi-bin-directory.html</a> (updating the document root) but can't get CGI or Perl scripts to run, instead being returned as plain text.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478177216, "post_id": 40401742, "comment_id": 68053752, "body": "When I edited your question I removed some leading whitespace. Since you also have tabulators in there, I am not sure if that whitespace might not  have been part of the input. Please <a href=\"https://stackoverflow.com/posts/40401742/edit\">edit</a> and fix that if I accidentally broke it."}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1478197143, "post_id": 40401742, "comment_id": 68067250, "body": "@toolic.. how keep the condition for below lines                                                  new_frame\t{ 0, 499510 }\tTr32, selection                           sfn\t{ 0, 0, 2765}\tTr32, selection\t                              offset\t{ 0, 0, 312000}\tTr32, selection Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1478182001, "post_id": 40401938, "comment_id": 68057292, "body": "it woks.. just want to know i have Tr8 as well which is dont  want to match in [ST]r (\\d+) what should be change ?Thanks"}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 1, "last_activity_date": 1478182403, "last_edit_date": 1478182403, "creation_date": 1478177326, "answer_id": 40401938, "question_id": 40401742, "link": "https://stackoverflow.com/questions/40401742/how-to-append-zero-based-on-the-length-of-the-input-type/40401938#40401938", "title": "How to append zero based on the length of the input type", "body": "<p>Here is a more generalized way to reproduce your output:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nwhile (&lt;DATA&gt;) {\n    if (/(\\d+)\\s+[ST]r(16|32)/) {\n        my $n = $1;\n        my $r = $2;\n        if (length $n &lt; 4) {\n            my $zeroes = ($r == 16) ? '0,' : '0, 0, 0,';\n            s/(\\s+)(\\d+)(\\s+)/$1\\{ $zeroes $2 }$3/;\n        }\n    }\n    print;\n}\n\n__DATA__\n   x317_dwsrp   2   Tr16, selection \n   x315        4     Tr16, selection        \n   user_info 20 Tr16, selection \n   sib_pos    8   Sr16, selection   \n  tdma_frame    1   Tr32, selection \n  x315_conex    1   Tr32, selection \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 1, "last_activity_date": 1478178422, "creation_date": 1478178422, "answer_id": 40402298, "question_id": 40401742, "link": "https://stackoverflow.com/questions/40401742/how-to-append-zero-based-on-the-length-of-the-input-type/40402298#40402298", "title": "How to append zero based on the length of the input type", "body": "<p>You have to escape the curly brackets in te replacement part, there no needs for <code>g</code> flag.</p>\n\n<p>I've added a limit to 3 digits:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Modern::Perl;\n\nwhile (&lt;DATA&gt;) { \n    chomp;\n    s/(x317_dwsrp\\s+)(\\d{1,3})(\\s+Tr16, selection)/$1\\{ 0, $2 \\}$3/;\n    s/(x315\\s+)(\\d{1,3})(\\s+Tr16, selection)/$1\\{ 0, $2 \\}$3/;\n    s/(user_info\\s+)(\\d{1,3})(\\s+Tr16, selection)/$1\\{ 0, $2 \\}$3/;\n    s/(sib_pos\\s+)(\\d{1,3})(\\s+Sr16, selection)/$1\\{ 0, $2 \\}$3/;\n    s/(tdma_frame\\s+)(\\d{1,3})(\\s+Tr32, selection)/$1\\{ 0, 0, 0, $2 \\}$3/g;\n    s/(x315_conex\\s+)(\\d{1,3})(\\s+Tr32, selection)/$1\\{ 0, 0, 0, $2 \\}$3/;\n    say;\n}\n\n\n__DATA__\nx317_dwsrp   2   Tr16, selection\nx315        4     Tr16, selection        \nuser_info 20 Tr16, selection \nsib_pos    8   Sr16, selection   \ntdma_frame    1   Tr32, selection \nx315_conex    1   Tr32, selection \n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>x317_dwsrp   { 0, 2 }   Tr16, selection\nx315        { 0, 4 }     Tr16, selection        \nuser_info { 0, 20 } Tr16, selection \nsib_pos    { 0, 8 }   Sr16, selection   \ntdma_frame    { 0, 0, 0, 1 }   Tr32, selection \nx315_conex    { 0, 0, 0, 1 }   Tr32, selection \n</code></pre>\n\n<p>A more simple code:</p>\n\n<pre><code>while (&lt;DATA&gt;) { \n    chomp;\n    s/(.+\\s)(\\d{1,3})(\\s+[ST]r16, selection)/$1\\{ 0, $2 \\}$3/;\n    s/(.+\\s)(\\d{1,3})(\\s+Tr32, selection)/$1\\{0, 0, 0, $2 \\}$3/g;\n    say;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 40402298, "answer_count": 2, "score": -1, "last_activity_date": 1478182403, "creation_date": 1478176774, "last_edit_date": 1478177167, "question_id": 40401742, "link": "https://stackoverflow.com/questions/40401742/how-to-append-zero-based-on-the-length-of-the-input-type", "title": "How to append zero based on the length of the input type", "body": "<p>Lets say I have multiple input lines in an file and I want to search specific type in a line (search for Tr16 or Tr32). If the match is found then I want to append zero with corresponding value. But I want to ignore for if the length of the value is greater than 3.</p>\n\n<p>Ignore for this lines:</p>\n\n<pre><code>connect_next_frame  1234    Tr16, selection # since value is greater than &gt;3\n\ntime_scheduler  76890    Tr32, selection  #  since value is greater than &gt;3\n</code></pre>\n\n<p>Replace for these lines:</p>\n\n<ol>\n<li><p>If its Tr16 or Sr16 then append the string value with zero</p>\n\n<pre><code>{ 0,  corresponding value}\n</code></pre>\n\n<p>for e.g.</p>\n\n<pre><code>x317_dwsrp  { 0, 2 }    Tr16, selection\n</code></pre></li>\n<li><p>If its Tr32  then append with </p>\n\n<pre><code>{ 0, 0, 0, corresponding value }\n</code></pre>\n\n<p>for e.g.</p>\n\n<pre><code>x315_conex  { 0, 0, 0, 1 }  Tr32, selection\n</code></pre></li>\n</ol>\n\n<p>My input lines: </p>\n\n<pre><code>x317_dwsrp  2   Tr16, selection \nx315           4     Tr16, selection        \nuser_info 20    Tr16, selection \nsib_pos    8   Sr16, selection  \ndma_frame   1   Tr32, selection \nx315_conex  1   Tr32, selection \n</code></pre>\n\n<p>code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $inputfile  = 'test_input.txt';\nmy $outputfile = 'test_output.txt';\n\nopen my $my_ipfh, \"&lt;\", $inputfile or die $!;\n\nopen my $my_opfh, \"&gt;\", $outputfile or die $!;\n\nwhile (&lt;$my_ipfh&gt;)\n{ \n\nif (/Tr16|Sr16|Tr32/)\n{\n s/x317_dwsrp   (\\d+)    Tr16, selection/x317_dwsrp  { 0, $1 }   Tr16, selection/g;\n s/x315     (\\d+)    Tr16, selection/x315       { 0, $1 }    Tr16, selection/g;     \n s/user_info    (\\d+)    Tr16, selection/user_info  { 0, $1 }    Tr16, selection/g; \n s/sib_pos    (\\d+)       Sr16, selection/sib_pos    { 0, $1 }      Sr16, selection/g;  \n s/tdma_frame   (\\d+)   Tr32, selection/tdma_frame  { 0, 0, 0, $1 } Tr32, selection/g;\n s/x315_conex   (\\d+)   Tr32, selection/x315_conex  { 0, 0, 0, $1 } Tr32, selection/g;  \n}\n\n print $my_opfh $_;\n}\n</code></pre>\n\n<p>My expected output:</p>\n\n<pre><code>x317_dwsrp   { 0, 2 }    Tr16, selection    \nx315        { 0, 4 }     Tr16, selection        \nuser_info   { 0, 20 }    Tr16, selection    \nsib_pos    { 0, 8 }      Sr16, selection    \ntdma_frame  { 0, 0, 0, 1 }  Tr32, selection \nx315_conex  { 0, 0, 0, 1 }  Tr32, selection \n</code></pre>\n\n<p>Here I was doing based on replacement but what could be optimized way?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1478175993, "post_id": 40401340, "comment_id": 68052802, "body": "<a href=\"http://grep.cpan.me/?q=use+strict%5Cs%2A%5C%28%5C%29\" rel=\"nofollow noreferrer\">Looking at CPAN for <code>use strict ();</code> and similar</a> gives us a few hits. While <a href=\"https://metacpan.org/pod/HTTP::OAI\" rel=\"nofollow noreferrer\">HTTP::PAI</a> <a href=\"https://metacpan.org/source/TIMBRODY/HTTP-OAI-4.03/CHANGES#L59\" rel=\"nofollow noreferrer\">claims</a> to do it, the actual code only has <code>use strict;</code>. There are three distributions though that explicitly don&#39;t import anything from <code>strict</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4328, "user_id": 1473927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AO6Ui.jpg?s=128&g=1", "display_name": "Jonathan Cast", "link": "https://stackoverflow.com/users/1473927/jonathan-cast"}, "is_accepted": true, "score": 4, "last_activity_date": 1478183533, "last_edit_date": 1592644375, "creation_date": 1478183533, "answer_id": 40404220, "question_id": 40401340, "link": "https://stackoverflow.com/questions/40401340/is-using-strict-with-an-empty-list-equivalent-to-not-using-strict-at-all/40404220#40404220", "title": "Is using strict with an empty list equivalent to not using strict at all?", "body": "<pre><code>use strict ();\n</code></pre>\n<p>(essentially) doesn't do anything: see <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n<blockquote>\n<p>If you do not want to call the package's import method (for instance, to stop your namespace from being altered), explicitly supply the empty list:</p>\n<p><code>use Module ();</code></p>\n<p>That is exactly equivalent to</p>\n<p><code>BEGIN { require Module }</code></p>\n</blockquote>\n<p>Of course, <code>strict</code> only does something if you call its <code>import</code> method (which you can easily verify by reading its source code; it's only about 150 lines long).  So bypassing the <code>import</code> method bypasses the entire effect of <code>use strict</code>.</p>\n"}], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 40404220, "answer_count": 1, "score": 10, "last_activity_date": 1478183533, "creation_date": 1478175603, "last_edit_date": 1495541606, "question_id": 40401340, "link": "https://stackoverflow.com/questions/40401340/is-using-strict-with-an-empty-list-equivalent-to-not-using-strict-at-all", "title": "Is using strict with an empty list equivalent to not using strict at all?", "body": "<p>TLDR: See question title.</p>\n\n<p>In the <a href=\"https://stackoverflow.com/revisions/40400444/1\">original version of a question</a>, there was <code>use strict ();</code> at the top of the program. No variables were declared with <code>my</code>. The program worked. I pointed that out that the code wouldn't work because of the missing <code>my</code>s, but it turns out I was mistaken.</p>\n\n<pre><code>$ perl e 'use strict (); $foo = 1'\n</code></pre>\n\n<p>This program works. It doesn't crash. But obviously this crashes:</p>\n\n<pre><code>$ perl -e 'use strict; $foo = 1'\nGlobal symbol \"$foo\" requires explicit package name (did you forget to declare \"my $foo\"?) at -e line 1.\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>My first idea was to deparse it to see if something else is going on.</p>\n\n<pre><code>$ perl -MO=Deparse -e 'use strict (); $foo = 1'\nuse strict ();\n$foo = 1;\n-e syntax OK\n</code></pre>\n\n<p>But it's not. Then it got me thinking, you can do <code>use strict 'vars'</code>, which <em>only</em> turns on the vars <em>thing</em><sup>1</sup>. It obviously does that by calling <a href=\"https://metacpan.org/source/RJBS/perl-5.24.0/lib/strict.pm#L62\" rel=\"nofollow noreferrer\"><code>import</code></a>. </p>\n\n<p>The <code>use strict</code> is the same as <code>BEGIN { require strict; strict-&gt;import; }</code>, so the same rule that goes for modules should apply for pragmata too. If I do <code>use Foo ()</code>, nothing is imported. Hence, <code>use strict ();</code> should be the same as <code>require strict;</code>, just at run time, because nothing is imported.</p>\n\n<pre><code>$ perl -e 'require strict; $foo = 1'\n</code></pre>\n\n<p>This doesn't crash. But then at runtime you cannot turn on stuff that is supposed to be set at compile time.</p>\n\n<p>So what does this actually do? When Perl reaches my actual code, it probably already encountered the <code>strict</code> pragma somewhere else, so it wouldn't load it again. And it doesn't import anything.</p>\n\n<pre><code>$ perl -e 'print %INC'\n</code></pre>\n\n<p>Oops. This prints nothing. <code>%INC</code> is empty. But if we use another module, there is something in it.</p>\n\n<pre><code>$ perl -MData::Dumper -e 'print Dumper \\%INC'\n$VAR1 = {\n          'warnings.pm' =&gt; '/usr/share/perl/5.22/warnings.pm',\n          'overload.pm' =&gt; '/usr/share/perl/5.22/overload.pm',\n          'Carp.pm' =&gt; '/usr/share/perl/5.22/Carp.pm',\n          'strict.pm' =&gt; '/usr/share/perl/5.22/strict.pm',\n          'overloading.pm' =&gt; '/usr/share/perl/5.22/overloading.pm',\n          'constant.pm' =&gt; '/usr/share/perl/5.22/constant.pm',\n          'bytes.pm' =&gt; '/usr/share/perl/5.22/bytes.pm',\n          'Data/Dumper.pm' =&gt; '/usr/lib/x86_64-linux-gnu/perl/5.22/Data/Dumper.pm',\n          'XSLoader.pm' =&gt; '/usr/share/perl/5.22/XSLoader.pm',\n          'Exporter.pm' =&gt; '/usr/share/perl/5.22/Exporter.pm',\n          'warnings/register.pm' =&gt; '/usr/share/perl/5.22/warnings/register.pm'\n        };\n</code></pre>\n\n<p>If we load Data::Dumper, <code>strict</code> was loaded at some point. But not in the pure <code>-e</code> example.</p>\n\n<pre><code>$ perl -e 'use strict (); print %INC'\nstrict.pm/usr/share/perl/5.22/strict.pm\n</code></pre>\n\n<p>Ok. This loads strict.pm.</p>\n\n<pre><code>$ perl -e 'require strict; print %INC'\nstrict.pm/usr/share/perl/5.22/strict.pm\n</code></pre>\n\n<p>So does that. But still, none of the <code>strict</code> things are enabled.</p>\n\n<p>So the question really is, is <code>use strict ()</code> equivalent to just not having a <code>use strict</code> statement at all, or is there something else happening?</p>\n\n<hr>\n\n<p><sup>1) <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\">perldoc strict</a> refers to the three different arguments <code>strict</code> can take as <em>things</em></sup></p>\n"}, {"tags": ["perl", "nginx", "gd", "msys"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7556513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c80fb60b0fc3947013a42055448188?s=128&d=identicon&r=PG", "display_name": "chengjianxi", "link": "https://stackoverflow.com/users/7556513/chengjianxi"}, "is_accepted": false, "score": 0, "last_activity_date": 1487829057, "creation_date": 1487829057, "answer_id": 42408068, "question_id": 40400068, "link": "https://stackoverflow.com/questions/40400068/rebuilding-nginx-with-http-image-filter-module-how-to-correctly-install-the-gd/42408068#42408068", "title": "Rebuilding nginx with http_image_filter_module, how to correctly install the GD library in Windows and make it visible to other applications?", "body": "<p>I met the same problem, but i solved it.</p>\n\n<ol>\n<li>open file auto/feature in nginx source dir, change\nif [ -x $NGX_AUTOTEST ]; then</li>\n</ol>\n\n<p>to</p>\n\n<p>if [ YES ]; then</p>\n\n<ol start=\"2\">\n<li>open file auto/lib/libgd/conf in nginx source dir, add code at Proper location</li>\n</ol>\n\n<p>if [ $ngx_found = no ]; then</p>\n\n<p>ngx_feature=\"GD library in custom path\" # \u6307\u5b9alibgd\u5934\u6587\u4ef6\u4f4d\u7f6e ngx_feature_path=\"/e/thirdparty_source/libgd-2.2.4/src\" # \u6307\u5b9alibgd\u5e93\u6587\u4ef6\u4f4d\u7f6e\u548c\u5e93\u6587\u4ef6 ngx_feature_libs=\"-L/e/thirdparty_source/gdbuild -lgd\" . auto/feature</p>\n\n<p>fi</p>\n\n<p>you can see my blog\uff1a<a href=\"http://www.pressc.cn/?p=870\" rel=\"nofollow noreferrer\">http://www.pressc.cn/?p=870</a> </p>\n\n<p>good luck\uff01</p>\n"}], "owner": {"reputation": 310, "user_id": 5495951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405f012294e2d567ac53a1af57fff3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Faz", "link": "https://stackoverflow.com/users/5495951/faz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2414, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487829057, "creation_date": 1478171571, "last_edit_date": 1495540810, "question_id": 40400068, "link": "https://stackoverflow.com/questions/40400068/rebuilding-nginx-with-http-image-filter-module-how-to-correctly-install-the-gd", "title": "Rebuilding nginx with http_image_filter_module, how to correctly install the GD library in Windows and make it visible to other applications?", "body": "<p>I am currently trying to rebuild nginx with the http_image_filter_module but configuration has a problem locating the GD library.</p>\n\n<p>Having followed the guide at: <a href=\"https://stackoverflow.com/questions/21486482/compile-nginx-with-visual-studio/22649559#22649559\">Compile NGINX with Visual Studio</a> I finally managed to compile nginx with custom modules using MSYS and Strawberry Perl. I am only interested in generating the nginx.exe for now so only doing part 1 of the guide.  When trying to compile with the http_image_filter_module(requires GD library) using the following:</p>\n\n<pre><code>auto/configure --with-cc=cl --builddir=objs --prefix= --conf-path=conf/nginx.conf --pid-path=logs/nginx.pid --http-log-path=logs/access.log --error-log-path=logs/error.l\nog --sbin-path=nginx.exe --http-client-body-temp-path=temp/client_body_temp --http-proxy-temp-path=temp/proxy_temp --http-fastcgi-temp-path=temp/fastcgi_temp --with-cc-opt\n=-DFD_SETSIZE=1024 --with-pcre=objs/lib/pcre-8.39 --with-zlib=objs/lib/zlib-1.2.8 --with-openssl=objs/lib/openssl-1.0.2j --with-select_module --with-http_ssl_module --with\n-http_image_filter_module\n</code></pre>\n\n<p>it presents the following error:</p>\n\n<pre><code>checking for OS\n + MINGW32_NT-6.2 1.0.19(0.48/3/2) i686\n + using Microsoft Visual C++ compiler\n + cl version: 19.00.24215.1 for x86\nchecking for MINGW32_NT-6.2 specific features\nchecking for GD library ... not found\nchecking for GD library in /usr/local/ ... not found\nchecking for GD library in /usr/pkg/ ... not found\nchecking for GD library in /opt/local/ ... not found\n\nauto/configure: error: the HTTP image filter module requires the GD library.\nYou can either do not enable the module or install the libraries.\n</code></pre>\n\n<p>I have ran the setup program of the GD package from: <a href=\"http://gnuwin32.sourceforge.net/packages/gd.htm\" rel=\"nofollow noreferrer\">http://gnuwin32.sourceforge.net/packages/gd.htm</a> but i'm obviously missing a step or two for it to work.</p>\n\n<p>Can anyone point me in the right direction please?</p>\n"}, {"tags": ["php", "mysql", "windows", "perl"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "is_accepted": true, "score": 1, "last_activity_date": 1478171668, "creation_date": 1478171668, "answer_id": 40400096, "question_id": 40399648, "link": "https://stackoverflow.com/questions/40399648/read-data-from-shared-file-over-network/40400096#40400096", "title": "Read data from shared file over network", "body": "<p>You can just open it like normal:</p>\n\n<pre><code>open my $file, '&lt;', '//xxx.xxx.xxx.xxx/SharedFolder/sample.txt' or die \"Oops: $!\";\n</code></pre>\n\n<p>I tested this and it worked for me on Windows.</p>\n\n<p>When scripting you can (and should) use forward slashes in directory paths, even on Windows.</p>\n"}], "owner": {"reputation": 77, "user_id": 4859031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-ZvAJwKE3nHA/AAAAAAAAAAI/AAAAAAAAAEQ/TVhR_bFCo4g/photo.jpg?sz=128", "display_name": "Ivan Velchev", "link": "https://stackoverflow.com/users/4859031/ivan-velchev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 40400096, "answer_count": 1, "score": 1, "last_activity_date": 1478171668, "creation_date": 1478170341, "question_id": 40399648, "link": "https://stackoverflow.com/questions/40399648/read-data-from-shared-file-over-network", "title": "Read data from shared file over network", "body": "<p>I have some file in a shared folder on my network which contents I need to insert into a database. </p>\n\n<blockquote>\n  <p>\\\\xxx.xxx.xxx.xxx\\SharedFolder\\sample.txt</p>\n</blockquote>\n\n<p>Should I mount the file to my local directory and read it from there or I can extract the data from it and directly put it in the database with some <strong><em>php / perl</em></strong> script?</p>\n\n<p>And if I choose the mounting approach, the issue is that the file is on a Windows OS not Linux?</p>\n"}, {"tags": ["linux", "perl", "shell", "unix", "zip"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1478211523, "post_id": 40398941, "comment_id": 68074485, "body": "Drop the <code>$1</code> from <code>exc_files=&quot;$2&#47;$1*_LOG_FILE*&quot;</code>, i.e. change it to <code>exc_files=&quot;$2&#47;*_LOG_FILE*&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4241706, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qoBuEZMEB9U/AAAAAAAAAAI/AAAAAAAAAeQ/5_hMZx3TjLM/photo.jpg?sz=128", "display_name": "Jayson Harris", "link": "https://stackoverflow.com/users/4241706/jayson-harris"}, "is_accepted": false, "score": 0, "last_activity_date": 1478191158, "creation_date": 1478191158, "answer_id": 40406906, "question_id": 40398941, "link": "https://stackoverflow.com/questions/40398941/zip-files-excluding-log-file/40406906#40406906", "title": "Zip files excluding log file", "body": "<p>Id say add the files to an array, and loop through them. appending to the zip.</p>\n\n<pre><code>opendir(DH, $2);\nmy @files = readdir(DH);\nclosedir(DH);\n\nforeach my $file (@files)\n{\n        # skip . and ..\n        next if($file =~ /^\\.$/);\n        next if($file =~ /^\\.\\.$/);\n\n        # Skip file containing that string\n        next if $file =~ /.*(_LOG_FILE).*/);\n\n        # Then append to the zip\n        #....\n\n}\n</code></pre>\n\n<p>I've not tested this. The alternitave is to copy the logs (in this array) to a temp directory, and zip that up.</p>\n\n<p>Hope this helps </p>\n"}], "owner": {"reputation": 1859, "user_id": 1565133, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a476b3e0ae7f16162a8ea49c0ae9d95d?s=128&d=identicon&r=PG", "display_name": "prabu R", "link": "https://stackoverflow.com/users/1565133/prabu-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478191158, "creation_date": 1478168246, "last_edit_date": 1478169627, "question_id": 40398941, "link": "https://stackoverflow.com/questions/40398941/zip-files-excluding-log-file", "title": "Zip files excluding log file", "body": "<p>I would like to zip all files inside a folder except log files with some format like '<em>_LOG_FILE</em>'. I am using below command in my shell script to zip the files.</p>\n\n<pre><code>usrl=\"/usr/bin/zip\"; \nsrc_files=\"$2/*$1*\"\ntgt_file=\"$2/$1.zip\"\nexc_files=\"$2/$1*_LOG_FILE*\"    \n$usrl -jmn : $tgt_file $src_files -x $exc_files;\n</code></pre>\n\n<p>$2 holds the directory path and $1 holds the numeric value (it holds value like 82568 or 82659, etc.) which corresponds to the batch id value. Sample log file name is '823159_20160608_NM_LOG_FILE.dat' where 823159 is the batch id and the value is being replaced correctly without any issues. </p>\n\n<p>The problem I am facing is, the log file has also been included in the zip file even though I have tried to exclude that in my code. Please advise some solution.</p>\n"}, {"tags": ["perl", "tar", "compression", "bzip2"], "answers": [{"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1478166113, "post_id": 40398088, "comment_id": 68046413, "body": "Thank you for the information. But if you use a ZIP, wouldn&#39;t the whole ZIP need to be unpacked before any of the compressed files can be accessed? Would this be similar to first bzipping all files and <i>then</i> tarring them?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 1, "creation_date": 1478168726, "post_id": 40398088, "comment_id": 68048161, "body": "@BramVanroy: with ZIP the files are compressed inside the archive, i.e. one can seek to a specific file and then uncompress it instead of needing to uncompress everything in the archive up to this file."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1478165821, "creation_date": 1478165821, "answer_id": 40398088, "question_id": 40397489, "link": "https://stackoverflow.com/questions/40397489/can-you-stream-file-per-file-line-per-line-from-a-tar-bz2-archive-in-perl/40398088#40398088", "title": "Can you stream file-per-file, line-per-line from a .tar.bz2 archive in Perl?", "body": "<p>There is <a href=\"https://metacpan.org/pod/Compress::Raw::Bzip2\" rel=\"nofollow noreferrer\">Compress::Raw::Bzip2</a> which allows you to decompress bzip2 input chunk by chunk, i.e. in a stream. But since .tar.bz2 is first a tar file which is then compressed with bzip2 you would  need to first decompress all data up to the files location in the tar file before you have access to the data you want, i.e. there is no way to seek to the file without decompression everything up to this file. If you are fine with this you might be able to use <a href=\"https://github.com/brong/Archive-Tar-Stream\" rel=\"nofollow noreferrer\">Archive::Tar::Stream</a>, i.e. feed the input from your bzip2 decoder into the streaming Tar parser. I've never used it myself but it looks like it was developed exactly for this kind of use case.</p>\n\n<p>If you have the option to change the format of the input files I would recommend to use a format which stores the compressed files in the archive (like ZIP does) instead of compressing the full archive (i.e. .tar.bz2). This way you could easily seek to a specific compressed file and decompress only this instead of everything up to this file.</p>\n"}, {"tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 1, "last_activity_date": 1478179181, "creation_date": 1478179181, "answer_id": 40402553, "question_id": 40397489, "link": "https://stackoverflow.com/questions/40397489/can-you-stream-file-per-file-line-per-line-from-a-tar-bz2-archive-in-perl/40402553#40402553", "title": "Can you stream file-per-file, line-per-line from a .tar.bz2 archive in Perl?", "body": "<p>All the IO::Compress and IO::Uncompress modules support streaming, including IO::Uncompress::Bunzip2. The example code you showed (see below) is using a convenience method (bunzip2) for the common use case where you want to read all the compressed data from a file and uncompress it to a buffer in one go.</p>\n\n<pre><code>my $buffer ;\nbunzip2 $filename =&gt; \\$buffer\n  or die \"bunzip2 failed: $Bunzip2Error\\n\";\n</code></pre>\n\n<p>Here is the usage for the streaming Bunzip2 use-case</p>\n\n<pre><code>my $bz = IO::Uncompress::Bunzip2-&gt;new($filename);\n\n# $bz is a regular Perl filehandle, so can read it a line at a time\nwhile (&lt;$bz&gt;)\n{\n    ....\n}\n\n# or a bock at a time\nread($bz, $buffer, 1024);\n\nclose $gz;\n</code></pre>\n\n<p>If you can find a tar module that accepts a perl filehandle and is itself streaming you can give it an IO::Uncompress::Bubzip2 object. </p>\n\n<p>Another option is to just let the \"<em>real</em>\" tar binary handle this for you. More recent version of gnu tar will automatically detect compression, and you can get tar to write to stdout. So you could just open a filehandle to the tar command, like this</p>\n\n<pre><code>open my $data, \"tar -Of $file.tar.bz2 |\";\n\nwhile (&lt;$data&gt;)\n{\n    ....\n}\n</code></pre>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 40398088, "answer_count": 2, "score": 2, "last_activity_date": 1478179181, "creation_date": 1478164051, "last_edit_date": 1478165975, "question_id": 40397489, "link": "https://stackoverflow.com/questions/40397489/can-you-stream-file-per-file-line-per-line-from-a-tar-bz2-archive-in-perl", "title": "Can you stream file-per-file, line-per-line from a .tar.bz2 archive in Perl?", "body": "<p>We have a lot of compressed data that actually is a compressed taped archive of directories and its subdirectories containing XML files; e.g.</p>\n\n<pre><code>omega/    \n- alpha/\n  - a/\n    - file1.xml\n    - file2.xml\n    - file3.xml\n  - b/\n    - file1.xml\n    - file2.xml\n    - file3.xml\n  - c/\n    - ...\n- beta/\n  - a/\n    - file1.xml\n    - file2.xml\n    - file3.xml\n  - b/\n    - ...\n  - c/\n    - ...\n- gamma/\n  - a/\n    - ...\n  - b/\n    - ...\n  - c/\n    - ...\n</code></pre>\n\n<p>The result would be files such as <code>omega.tar.bz2</code> and these files can reach size of hundreds of gigabytes.</p>\n\n<p>Even though we are aware that this is an <em>archive</em> file type, it would be nice to still be able to use its contents when we need to. Therefore I was wondering if it is possible to read from these files in Perl in a streaming manner, i.e. without first having to unpack and decompress everything on disk or without having to load the <em>whole</em> <code>*.tar.bz2</code> file into memory.</p>\n\n<p>I know that with <a href=\"http://perldoc.perl.org/IO/Uncompress/Bunzip2.html\" rel=\"nofollow noreferrer\"><code>IO::Uncompress</code></a> you can Bunzip2, but as far as I can see and tested, this would read the whole file into memory which is not possible with our large files. Example code below on Bunzipping (not including TAR).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Uncompress::Bunzip2 qw(bunzip2 $Bunzip2Error) ;\n\nmy $filename = '/path/to/file/file1.xml.bz2';\nopen(my $fh, '&lt;', $filename)\n  or die \"Could not open file '$filename' $!\";\n\nmy $buffer ;\nbunzip2 $filename =&gt; \\$buffer\n  or die \"bunzip2 failed: $Bunzip2Error\\n\";\n\nprint STDOUT \"$buffer\\n\";\n</code></pre>\n\n<p>Taking the TAR into account, there is also the <a href=\"http://perldoc.perl.org/Archive/Extract.html\" rel=\"nofollow noreferrer\"><code>Archive::Extract</code></a> module which allows to read a <code>.tar.bz2</code> file (type <code>tbz</code>) into an <code>Extract Object</code>, but again this would read the whole file into memory which is not possible with our ginormous files.</p>\n\n<p>Because of my own research into the topic I think it is unlikely that it is possible to read a TAR of BZIP2s in a streaming fashion, i.e. line per line. I have no experience with compression, though, so maybe there is a way to reconstruct file lines given a number of data blocks.</p>\n\n<p>Tl;dr: can you stream the file contents (line-per-line or similar) from a BZIP2 compressed TAR archive?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1478161274, "creation_date": 1478161274, "answer_id": 40396705, "question_id": 40396388, "link": "https://stackoverflow.com/questions/40396388/how-can-i-execute-the-following-code-dynamically/40396705#40396705", "title": "how can i execute the following code dynamically", "body": "<p>Lets see if we can get this right together</p>\n\n<p>The start of your code looks good </p>\n\n<pre><code>use strict;\nmy %hashj=(1 =&gt; 0, 2 =&gt; 0, 3 =&gt; 0, 4 =&gt; 0, 5 =&gt; 0);\nmy %hashh=(1 =&gt; 10, 2 =&gt; 18 ,3 =&gt; 35, 4 =&gt; 40, 5 =&gt; 42);\nuse POSIX;\nmy $count=ceil(rand(int(4)));\nprint $count.\"\\n\";\n</code></pre>\n\n<p>and now the missing 3 lines:</p>\n\n<pre><code>if (is_0_hash($count, %hashj)) {\n   print sum_hash($count, %hashh);\n}\n</code></pre>\n\n<p>the 2 helper subs at the end;:</p>\n\n<pre><code>sub is_0_hash {\n   my ($count, %hash) = @_;\n   foreach my $i ( 1 .. $count) {\n       if ($hash{$i} != 0) {\n         return #false\n       }\n   }\n   return 1;\n}\n\nsub sum_hash {\n   my ($count, %hash) = @_;\n   my $sum = 0;\n   foreach my $i ( 1 .. $count) {\n       $sum += $hash{$i};\n   }\n   return $sum;\n}\n</code></pre>\n\n<p>HTH\nGeorg</p>\n"}, {"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 4, "last_activity_date": 1478162019, "last_edit_date": 1478162019, "creation_date": 1478161636, "answer_id": 40396793, "question_id": 40396388, "link": "https://stackoverflow.com/questions/40396388/how-can-i-execute-the-following-code-dynamically/40396793#40396793", "title": "how can i execute the following code dynamically", "body": "<p>Read up on <a href=\"http://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a> as well as <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> as these will simplify most of your code.  I would also recommend to <strong>always</strong> <code>use strict</code> and <code>use warnings</code>, as well as trying for more meaningful variable names.  Here is a simplification of your code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util qw( all sum );\n\nmy %hashj = ( 1 =&gt;  0, 2 =&gt;  0, 3 =&gt;  0, 4 =&gt;  0, 5 =&gt; 0  );\nmy %hashh = ( 1 =&gt; 10, 2 =&gt; 18, 3 =&gt; 35, 4 =&gt; 40, 5 =&gt; 42 );\n\nmy @hash_keys = keys %hashj;\nmy $count = $hash_keys[ int rand scalar @hash_keys ]; # Random element                      \nprint $count.\"\\n\";\n\ncheck_hashes( \\%hashj, \\%hashh, $count);  # \\%foo is a reference to hash %foo\n\nsub check_hashes {\n    my ($hash_1, $hash_2, $count) = @_;\n    if ($count &lt; 2) {\n        return; # you seem not to care about this case...                                   \n    }\n    my @indexes = grep { $_ &lt;= $count } keys %$hash_1;  # Dereference a hash reference by putting % in front\n    if ( all { $hash_1-&gt;{$_} == 0 } @indexes ) {\n        my $total = sum map { $hash_2-&gt;{$_} } @indexes;\n        print $total . \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": false, "score": 4, "last_activity_date": 1478165452, "last_edit_date": 1478165452, "creation_date": 1478164049, "answer_id": 40397487, "question_id": 40396388, "link": "https://stackoverflow.com/questions/40396388/how-can-i-execute-the-following-code-dynamically/40397487#40397487", "title": "how can i execute the following code dynamically", "body": "<pre><code>use strict;\nuse List::Util qw(sum);\n\nmy %hashj=(1 =&gt; 0, 2 =&gt; 0, 3 =&gt; 0, 4 =&gt; 0, 5 =&gt; 0);\nmy %hashh=(1 =&gt; 10, 2 =&gt; 18 ,3 =&gt; 35, 4 =&gt; 40, 5 =&gt; 42);\n\nuse POSIX;\nmy $count=ceil(rand(int(4)));\nprint $count.\"\\n\";\n\nprint sum @hashh{1..$count} unless $count&lt;=1 || grep {$_} @hashj{1..$count};\n</code></pre>\n\n<ul>\n<li><p><code>1..$count</code> return all numbers between 1 and $count.</p></li>\n<li><p><code>@hash{ 1, 2, 3 }</code> = array of values <code>($hash{1}, $hash{2}, $hash{3})</code>.</p></li>\n<li><code>grep {$_}</code> for array return all non zero elements. In scalar context (and boolean context of <code>unless</code>) - return number all non zero elements.</li>\n<li>function <code>sum()</code> from List::util package return sum of array elements</li>\n</ul>\n"}], "owner": {"reputation": 41, "user_id": 6921229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d1e8d0a5288d7ebcf029fd228fa3949?s=128&d=identicon&r=PG&f=1", "display_name": "Magesh04", "link": "https://stackoverflow.com/users/6921229/magesh04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478165452, "creation_date": 1478159866, "question_id": 40396388, "link": "https://stackoverflow.com/questions/40396388/how-can-i-execute-the-following-code-dynamically", "title": "how can i execute the following code dynamically", "body": "<p>The loop might go up to iteration 10. I mean currently it has five loop, it might go upto 10 loop.\nI would like to rewrite the script to simply it.</p>\n\n<pre><code>use strict;\n\nmy %hashj=(1 =&gt; 0, 2 =&gt; 0, 3 =&gt; 0, 4 =&gt; 0, 5 =&gt; 0);\nmy %hashh=(1 =&gt; 10, 2 =&gt; 18 ,3 =&gt; 35, 4 =&gt; 40, 5 =&gt; 42);\n\nuse POSIX;\nmy $count=ceil(rand(int(4)));\nprint $count.\"\\n\";\n\nif($count==2)\n{\n    if($hashj{$count-1}==0 &amp;&amp; $hashj{$count}==0)\n    {\n    print $hashh{$count-1} + $hashh{$count},\"\\n\";\n    }\n}\nif($count==3)\n{\n    if($hashj{$count-2}==0 &amp;&amp; $hashj{$count-1}==0 &amp;&amp; $hashj{$count}==0)\n    {\n    print $hashh{$count-2} + $hashh{$count-1} + $hashh{$count},\"\\n\";\n    }\n}\n\nif($count==4)\n{\n    if($hashj{$count-3}==0 &amp;&amp; $hashj{$count-2}==0 &amp;&amp; $hashj{$count-1}==0 &amp;&amp; $hashj{$count}==0)\n    {\n    print $hashh{$count-3} + $hashh{$count-2} + $hashh{$count-1} + $hashh{$count},\"\\n\";\n    }\n}\n\nif($count==5)\n{\n    if($hashj{$count-4}==0 &amp;&amp; $hashj{$count-3}==0 &amp;&amp; $hashj{$count-2}==0 &amp;&amp; $hashj{$count-1}==0  &amp;&amp; $hashj{$count}==0)\n    {\n    print $hashh{$count-4} + $hashh{$count-3} + $hashh{$count-2} + $hashh{$count-1} + $hashh{$count},\"\\n\";\n    }\n}\n</code></pre>\n\n<p>Desired output:\nIt should be like function, if i set $count value to 5 then it has to generate the following code.</p>\n\n<pre><code>if($count==5)\n    {\n        if($hashj{$count-4}==0 &amp;&amp; $hashj{$count-3}==0 &amp;&amp; $hashj{$count-2}==0 &amp;&amp; $hashj{$count-1}==0  &amp;&amp; $hashj{$count}==0)\n        {\n        print $hashh{$count-4} + $hashh{$count-3} + $hashh{$count-2} + $hashh{$count-1} + $hashh{$count},\"\\n\";\n        }\n    }\n</code></pre>\n\n<p>Like that i need for $count 1 to 10.</p>\n"}]