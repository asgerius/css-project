[{"tags": ["perl"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1525897484, "post_id": 50261423, "comment_id": 87541001, "body": "What error do you get, and why do you expect it? I expect <code>$hash{1}</code> to evaluate to the string <code>cat</code>. Do you want to avoid an explicit default value using <code>$hash{9} &#47;&#47; &#39;no animal&#39;</code>?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1525897592, "post_id": 50261423, "comment_id": 87541052, "body": "The assignment you posted has a syntax error, since you are using non-ASCII quotes"}, {"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1525897879, "post_id": 50261423, "comment_id": 87541199, "body": "I get <code>use of uninitialzed value in print at test.pl line 12</code> The values <code>1,2 etc</code>  are coming out of a database. So if the numbers aren\u2019t in the hash I didn\u2019t know if there was a way to assign those to some default like no animal. If <code>hash{3}</code> is in my loop from the database. I didn\u2019t know if there was a way to display a default value of no animal."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525900228, "post_id": 50261423, "comment_id": 87542303, "body": "You&#39;re not being clear on what your desired output is."}], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 0, "creation_date": 1525901923, "post_id": 50262129, "comment_id": 87542938, "body": "Will try this when I get back. Seems like it will work."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1525923714, "post_id": 50262129, "comment_id": 87548219, "body": "Also worth mentioning you can set the value in place in the hash with: <code>$hash{$k} &#47;&#47;= &#39;default&#39;;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1525940346, "post_id": 50262129, "comment_id": 87554617, "body": "@Grant: That will corrupt any elements that actually exist but whose value is <code>undef</code>"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1525943244, "post_id": 50262129, "comment_id": 87555999, "body": "Well obviously. My suggestion was made in the context of @ikegami explaining <code>$hash{$k} &#47;&#47; &#39;default&#39;</code> for cases where values are always defined if present."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1525971532, "post_id": 50262129, "comment_id": 87572508, "body": "@Grant McLean, Added your suggested change. Ignore the troll"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1525971510, "last_edit_date": 1525971510, "creation_date": 1525900316, "answer_id": 50262129, "question_id": 50261423, "link": "https://stackoverflow.com/questions/50261423/default-a-value-for-missing-hash/50262129#50262129", "title": "Default a value for missing hash", "body": "<pre><code>my $value = exists($hash{$k}) ? $hash{$k} : 'default';\n</code></pre>\n\n<p>To actually change the hash, use</p>\n\n<pre><code>$hash{$k} = 'default' if !exists($hash{k});\n</code></pre>\n\n<hr>\n\n<p>If <code>$hash{$k}</code> is always defined if it exists, you could also use</p>\n\n<pre><code>my $value = defined($hash{$k}) ? $hash{$k} : 'default';\n</code></pre>\n\n<p>which can be reduced to</p>\n\n<pre><code>my $value = $hash{$k} // 'default';   # 5.10+\n</code></pre>\n\n<p>To actually change the hash, use</p>\n\n<pre><code>$hash{$k} = 'default' if !defined($hash{k});\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$hash{$k} //= 'default';   # 5.10+\n</code></pre>\n\n<hr>\n\n<p>If <code>$hash{$k}</code> is always true if it exists, you could also use</p>\n\n<pre><code>my $value = $hash{$k} ? $hash{$k} : 'default';\n</code></pre>\n\n<p>which can be reduced to</p>\n\n<pre><code>my $value = $hash{$k} || 'default';\n</code></pre>\n\n<p>To actually change the hash, use</p>\n\n<pre><code>$hash{$k} = 'default' if !$hash{k};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$hash{$k} ||= 'default';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 0, "creation_date": 1525975734, "post_id": 50262521, "comment_id": 87574596, "body": "Will this a try in the future.  New to Perl so I only use it every so often.  Thanks for this bit of advice."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 0, "creation_date": 1525977094, "post_id": 50262521, "comment_id": 87575278, "body": "@user: It&#39;s not like forking out for a new Ferrari! You just install the module, add a couple statements, and then use the hash as normal."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1525902408, "creation_date": 1525902408, "answer_id": 50262521, "question_id": 50261423, "link": "https://stackoverflow.com/questions/50261423/default-a-value-for-missing-hash/50262521#50262521", "title": "Default a value for missing hash", "body": "<p>I suggest you take a look at the\n<a href=\"https://metacpan.org/pod/Hash::DefaultValue\" rel=\"nofollow noreferrer\"><code>Hash::DefaultValue</code></a>\nmodule which allows you to specify a value for a hash that will be returned instead of <code>undef</code> if an element doesn't exist</p>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 0, "accepted_answer_id": 50262129, "answer_count": 2, "score": 4, "last_activity_date": 1525971510, "creation_date": 1525897261, "last_edit_date": 1525900242, "question_id": 50261423, "link": "https://stackoverflow.com/questions/50261423/default-a-value-for-missing-hash", "title": "Default a value for missing hash", "body": "<p>I created a hash in Perl <code>my %hash = (2 =&gt; 'dog', 1 =&gt; 'cat');</code></p>\n\n<p>When I print <code>$hash{3}</code> it errors (<code>use of uninitialzed value in print</code>) which is expected. But is there a way to default a value if not in hash?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 5, "last_activity_date": 1525897023, "last_edit_date": 1525897023, "creation_date": 1525895657, "answer_id": 50261083, "question_id": 50260968, "link": "https://stackoverflow.com/questions/50260968/how-to-convert-localtime-into-yyyy-mm-dd-with-perl/50261083#50261083", "title": "How to convert localtime into YYYY-MM-DD with Perl", "body": "<p>Use <a href=\"http://perldoc.perl.org/POSIX.html#FUNCTIONS\" rel=\"nofollow noreferrer\"><code>POSIX::strftime</code></a> to convert localtime parts to a formatted string.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse POSIX qw{strftime};\n\nmy $nextfri;\nfor (my $i = 1; $i &lt; 8; $i++) {\n  my @t = localtime(time() + $i * 24 * 3600);\n  next unless $t[6] == 5; # friday\n  $nextfri = strftime '%Y %m %d', @t;\n  last;\n}\n</code></pre>\n\n<p>But I would suggest you use a library like <a href=\"http://search.cpan.org/perldoc/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> instead because the above code can lead to incorrect results because of its incorrect assumption that every day has 24 hours.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DateTime;\n\nmy $nextfri = DateTime-&gt;now;\ndo {\n  $nextfri-&gt;add(days =&gt; 1);\n} until ($nextfri-&gt;day_of_week == 5);\n\nprint $nextfri-&gt;ymd(' '); # or '-'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1525897542, "last_edit_date": 1525897542, "creation_date": 1525896464, "answer_id": 50261251, "question_id": 50260968, "link": "https://stackoverflow.com/questions/50260968/how-to-convert-localtime-into-yyyy-mm-dd-with-perl/50261251#50261251", "title": "How to convert localtime into YYYY-MM-DD with Perl", "body": "<p>Your code assumes every day has 24 hours, which is wrong. Fixed:</p>\n\n<pre><code>use Time::Local qw( timegm );\n\n# This returns 4pm UTC if it's 4pm localtime.\n# We do this because UTC doesn't have DST,\n# so we can safely do date math.\nmy $time = timegm(localtime());\n\nwhile (1) {\n   $time += 24*60*60;\n   last if ( gmtime($time) )[6] == 5;  # Sun=0, Fri=5\n}\n</code></pre>\n\n<p>This can be optimized:</p>\n\n<pre><code>use Time::Local qw( timegm );\n\n# This returns 4pm UTC if it's 4pm localtime.\n# We do this because UTC doesn't have DST.\n# so we can safely do date math.\nmy $time = timegm(localtime());\n\nmy $dow = ( gmtime($time) )[6];  # Sun = 0\nmy $days = ( 5 - $dow ) % 7;     # Days until Friday\n$days += 7 if !$days;            # Days until next Friday\n$time += $days * 24*60*60;\n</code></pre>\n\n<p>Now on to your question</p>\n\n<pre><code>use POSIX qw( strftime );\n\nsay strftime(\"%Y-%m-%d\", gmtime($time));\n</code></pre>\n\n<hr>\n\n<p>You could use Time::Piece, which uses the same trick as above (internally).</p>\n\n<pre><code>use Time::Piece   qw( localtime );\nuse Time::Seconds qw( ONE_DAY );\n\nmy $tp = localtime;\n\nmy $dow = $tp-&gt;day_of_week;    # Sun = 0\nmy $days = ( 5 - $dow ) % 7;   # Days until Friday\n$days += 7 if !$days;          # Days until next Friday\n$time += $days * ONE_DAY;\n\nsay $tp-&gt;ymd;   # Or $tp-&gt;strftime(\"%Y-%m-%d\")\n</code></pre>\n\n<hr>\n\n<p>Personally, I try to avoid Time::Piece. It's too easy to get things wrong (like you did).</p>\n\n<pre><code>use DateTime qw( );\n\nmy $dt = DateTime-&gt;now( time_zone =&gt; 'local' );\n\nmy $dow = $dt-&gt;day_of_week;    # Sun = 0\nmy $days = ( 5 - $dow ) % 7;   # Days until Friday\n$days += 7 if !$days;          # Days until next Friday\n$dt-&gt;add( days =&gt; $days );\n\nsay $dt-&gt;ymd;   # Or $dt-&gt;strftime(\"%Y-%m-%d\")\n</code></pre>\n"}], "owner": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 50261251, "answer_count": 2, "score": 2, "last_activity_date": 1525897542, "creation_date": 1525895091, "question_id": 50260968, "link": "https://stackoverflow.com/questions/50260968/how-to-convert-localtime-into-yyyy-mm-dd-with-perl", "title": "How to convert localtime into YYYY-MM-DD with Perl", "body": "<p>I have this code which obtains the most recent coming friday, no matter what the current date is:</p>\n\n<pre><code>for(my $i = 1; $i &lt; 8; $i++) {\n     my $t = time() + $i * 24 * 3600;\n     next unless (localtime($t))[6] == 5; # friday                                                                                               \n     $nextfri = scalar(localtime($t));                                                                                                           \n     last;                                                                                                                                        \n}\n</code></pre>\n\n<p>This returns the date in the format: <code>Fri May 11 13:47:24 2018</code></p>\n\n<p>However, II must use this date for a SQL query, and so I must have this date in this format: <code>YYYY-MM-DD</code></p>\n\n<p>I have tried using Time::Piece:</p>\n\n<pre><code> print STDERR \"Time::Piece: \" . Time::Piece-&gt;strptime(\"$nextfri\", '%Y %m %d'), \"\\n\";\n</code></pre>\n\n<p>But I receive this error: <code>Error parsing time at /usr/local/lib/perl/5.18.2/Time/Piece.pm line 481, &lt;DATA&gt; line 1.</code></p>\n\n<p>How do I change the format of the date?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525889375, "post_id": 50259586, "comment_id": 87537074, "body": "The Second while is       for my $max ( @{ $hash{$dist, $sec, $cls} }){                                         my $tot = $qtd -1;                                                 print join(&quot;,&quot;, $dist, $sec, $cls, $add, $idx, $tot, $max  ).&quot;\\n&quot;;                                                 $qtd=$tot;                      }"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1525896422, "post_id": 50259586, "comment_id": 87540566, "body": "In <i>FileNewC</i> there is no max. How do you use max?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525922200, "post_id": 50262164, "comment_id": 87547853, "body": "I got you the idea is really good but still does not work. The result I got only for line DistA,1010101,a_0200,23 from FileB is that:      DistA,1010101,a_0200,Address,11,6     DistA,1010101,a_0200,Address,12,6     DistA,1010101,a_0200,Address,09,2     DistA,1010101,a_0200,Address,10,2     DistA,1010101,a_0200,Address,13,1  I need to follow the sort from 6th column, in this case, the result (11=&gt;6,12=&gt;6,09=&gt;2,10=&gt;2,13=&gt;1).  But I need to decrement -1 by every value starting from FileA until all positions become 0."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525923029, "post_id": 50262164, "comment_id": 87548019, "body": "I put another for inside the foreach by $qtd   foreach my $line ( @h ) {         my $max = @$line[3];         my $tot = $qtd -1;         for (1..$qtd){               if ( $tot &gt; 0 ) {             print join(&quot;,&quot;, $dist, $sec, $cls, $add, $idx, $tot, $max  ).&quot;\\n&quot;;             $qtd=$tot;         } }"}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525923046, "post_id": 50262164, "comment_id": 87548024, "body": "and I got a result approximate but not for the sort I want.  Loop-1 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,11,6 Loop-2 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,12,6 And so on."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525923054, "post_id": 50262164, "comment_id": 87548028, "body": "But the correct is:   Loop-1 DistA,1010101,a_0200,Address,11,7 DistA,1010101,a_0200,Address,12,7 DistA,1010101,a_0200,Address,09,3 DistA,1010101,a_0200,Address,10,3 DistA,1010101,a_0200,Address,13,2 Loop-2 DistA,1010101,a_0200,Address,11,6 DistA,1010101,a_0200,Address,12,6 DistA,1010101,a_0200,Address,09,2 DistA,1010101,a_0200,Address,10,2 DistA,1010101,a_0200,Address,13,1 and so on."}, {"owner": {"reputation": 573, "user_id": 9620620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e564dd4ea9cee7b6e67180c0d3dcb5e?s=128&d=identicon&r=PG&f=1", "display_name": "webmite", "link": "https://stackoverflow.com/users/9620620/webmite"}, "reply_to_user": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525931262, "post_id": 50262164, "comment_id": 87550419, "body": "I am sorry....It is not clear what sort you are using.  Are you trying to say you wish to sort FileA rows based on column 6 in descending order prior to processing and then only process the lines with the first  (maximum) value?"}, {"owner": {"reputation": 573, "user_id": 9620620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e564dd4ea9cee7b6e67180c0d3dcb5e?s=128&d=identicon&r=PG&f=1", "display_name": "webmite", "link": "https://stackoverflow.com/users/9620620/webmite"}, "reply_to_user": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1525968508, "post_id": 50262164, "comment_id": 87570750, "body": "Hi ebk. I have redone the &#39;answer&#39; portion from scratch and added some labelling in the output to try to make it clear as to which lines are being modified and why.  If the output you want is actually the unmodfied line prior to it&#39;s change let me know."}], "tags": [], "owner": {"reputation": 573, "user_id": 9620620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e564dd4ea9cee7b6e67180c0d3dcb5e?s=128&d=identicon&r=PG&f=1", "display_name": "webmite", "link": "https://stackoverflow.com/users/9620620/webmite"}, "is_accepted": true, "score": 1, "last_activity_date": 1525968047, "last_edit_date": 1525968047, "creation_date": 1525900480, "answer_id": 50262164, "question_id": 50259586, "link": "https://stackoverflow.com/questions/50259586/loop-through-2-files-perl/50262164#50262164", "title": "Loop through 2 files perl", "body": "<p>I think you want to use arrays in the case...so the code would look as follows.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n$|=1;\n\nmy $filea = $ARGV[0];\nmy $fileb = $ARGV[1];\nmy $action = $ARGV[2] || \"n\" ; \n\nopen ( FA, '&lt;', $filea) || die ( \"File $filea Not Found!\" );\nopen ( FB, '&lt;', $fileb) || die ( \"File $fileb Not Found!\" );\n#open ( FC, \"&gt;\", $filec) || die ( \"File $filec Not Found!\" );\n\nmy @B;\nwhile ( &lt;FB&gt; ) {\n    chomp;\n    my($dist, $sec, $cls, $max) = split \",\";\n    push @B, [$dist, $sec, $cls, $max];\n}\n\nmy @A;\nwhile ( &lt;FA&gt; ) {\n    chomp;\n    my($dist, $sec, $cls, $add, $idx, $qtd) = split \",\";\n    push @A, [$dist, $sec, $cls, $add, $idx, $qtd];\n}\n\n$i = 1;\nmy $j = 0;\nmy $k = 0;\nwhile ( 1 ) {\n    # -- keep looping til nothing is modified --\n    my $modified=0;\n    $j = 0;\n    foreach my $row ( @A ) {\n        # -- loop through FileA, $j is rowcount --\n        $j++;\n        $k=0;\n        foreach my $line ( @B ) {\n            # -- loop through FileB, $k is linecount --\n            $k++;\n            my $idx1= @$line[0].@$line[1].@$line[2];\n            my $idx2= @$row[0].@$row[1].@$row[2];\n            if ($idx1 eq $idx2) {\n                # -- has to match on the index fields --\n                my $max = @$line[3];\n                my $tot = @$row[5] -1;\n                if ( $tot &gt; 0 ) {\n                    # -- only print if modified and result is &gt;0 --\n                    # -- only print loop header if 1rst time through inside loop --\n                    if (! $modified) { print \"Loop-\".$i++.\"\\n\"; }\n                    if ($action eq \"d\") {\n                        print \"FileB[\".$k.\"]: \".join(\",\", @$line[0],@$line[1],@$line[2],@$line[3] ).\"\\n\";\n                        print \"FileA[\".$j.\"]: \".join(\",\", @$row[0],@$row[1],@$row[2],@$row[3],@$row[4],@$row[5]  ).\"\\n\";\n                    }\n                    print \"*FileA[\".$j.\"]: \".join(\",\", @$row[0],@$row[1],@$row[2],@$row[3],@$row[4],$tot ).\"\\n\";\n                    @$row[5]=$tot;\n                    $modified = 1;\n                }\n            }\n        }\n    }\n    if ((! $modified ) || ($i &gt; 50)) {\n        # -- only exit if pass through entire loop with no modifications --\n        # -- or we have looped too many times ... sanity check --\n        last;\n    }\n}\n</code></pre>\n\n<p>to see extra detail call with 3rd argument set to 'd'</p>\n\n<pre><code>&lt;filename&gt; FileA FileB d\n</code></pre>\n\n<p>final output has been configured to prefix the file and Line# to clarify what is being modified.</p>\n\n<p>Example of detail for loop-1 is\n(note the modified lines begin with a *)</p>\n\n<p>If this is NOT in the order you expect then we have to pre-sort the 2d-array created from FileA.  If that is the case you have to specify the sort order required.</p>\n\n<pre><code>Loop-1\nFileB[1]: DistA,1010101,a_0200,23 \nFileA[1]: DistA,1010101,a_0200,Address,11,7\n*FileA[1]: DistA,1010101,a_0200,Address,11,6\nFileB[1]: DistA,1010101,a_0200,23 \nFileA[2]: DistA,1010101,a_0200,Address,12,7\n*FileA[2]: DistA,1010101,a_0200,Address,12,6\nFileB[1]: DistA,1010101,a_0200,23 \nFileA[3]: DistA,1010101,a_0200,Address,09,3\n*FileA[3]: DistA,1010101,a_0200,Address,09,2\nFileB[1]: DistA,1010101,a_0200,23 \nFileA[4]: DistA,1010101,a_0200,Address,10,3\n*FileA[4]: DistA,1010101,a_0200,Address,10,2\nFileB[1]: DistA,1010101,a_0200,23 \nFileA[5]: DistA,1010101,a_0200,Address,13,2\n*FileA[5]: DistA,1010101,a_0200,Address,13,1\nFileB[2]: DistA,1010101,a_0300,21\nFileA[6]: DistA,1010101,a_0300,Address,11,6\n*FileA[6]: DistA,1010101,a_0300,Address,11,5\nFileB[2]: DistA,1010101,a_0300,21\nFileA[7]: DistA,1010101,a_0300,Address,12,6\n*FileA[7]: DistA,1010101,a_0300,Address,12,5\nFileB[2]: DistA,1010101,a_0300,21\nFileA[8]: DistA,1010101,a_0300,Address,09,3\n*FileA[8]: DistA,1010101,a_0300,Address,09,2\nFileB[2]: DistA,1010101,a_0300,21\nFileA[9]: DistA,1010101,a_0300,Address,10,3\n*FileA[9]: DistA,1010101,a_0300,Address,10,2\nFileB[2]: DistA,1010101,a_0300,21\nFileA[10]: DistA,1010101,a_0300,Address,13,2\n*FileA[10]: DistA,1010101,a_0300,Address,13,1\nFileB[3]: DistA,1010101,b_0200,21 \nFileA[11]: DistA,1010101,b_0200,Address,11,6\n*FileA[11]: DistA,1010101,b_0200,Address,11,5\nFileB[3]: DistA,1010101,b_0200,21 \nFileA[12]: DistA,1010101,b_0200,Address,12,6\n*FileA[12]: DistA,1010101,b_0200,Address,12,5\nFileB[3]: DistA,1010101,b_0200,21 \nFileA[13]: DistA,1010101,b_0200,Address,09,3\n*FileA[13]: DistA,1010101,b_0200,Address,09,2\nFileB[3]: DistA,1010101,b_0200,21 \nFileA[14]: DistA,1010101,b_0200,Address,10,3\n*FileA[14]: DistA,1010101,b_0200,Address,10,2\nFileB[3]: DistA,1010101,b_0200,21 \nFileA[15]: DistA,1010101,b_0200,Address,13,2\n*FileA[15]: DistA,1010101,b_0200,Address,13,1\nFileB[4]: DistA,1010101,b_0300,19\nFileA[16]: DistA,1010101,b_0300,Address,11,6\n*FileA[16]: DistA,1010101,b_0300,Address,11,5\nFileB[4]: DistA,1010101,b_0300,19\nFileA[17]: DistA,1010101,b_0300,Address,12,6\n*FileA[17]: DistA,1010101,b_0300,Address,12,5\nFileB[4]: DistA,1010101,b_0300,19\nFileA[18]: DistA,1010101,b_0300,Address,09,3\n*FileA[18]: DistA,1010101,b_0300,Address,09,2\nFileB[4]: DistA,1010101,b_0300,19\nFileA[19]: DistA,1010101,b_0300,Address,10,3\n*FileA[19]: DistA,1010101,b_0300,Address,10,2\nFileB[4]: DistA,1010101,b_0300,19\nFileA[20]: DistA,1010101,b_0300,Address,13,2\n*FileA[20]: DistA,1010101,b_0300,Address,13,1\nLoop-2\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 50262164, "answer_count": 1, "score": 0, "last_activity_date": 1525968047, "creation_date": 1525889236, "last_edit_date": 1525960275, "question_id": 50259586, "link": "https://stackoverflow.com/questions/50259586/loop-through-2-files-perl", "title": "Loop through 2 files perl", "body": "<p>I have an issue in Perl. 2 files.</p>\n\n<p>FileA</p>\n\n<pre><code>DistA,1010101,a_0200,Address,11,7\nDistA,1010101,a_0200,Address,12,7\nDistA,1010101,a_0200,Address,09,3\nDistA,1010101,a_0200,Address,10,3\nDistA,1010101,a_0200,Address,13,2\nDistA,1010101,a_0300,Address,11,6\nDistA,1010101,a_0300,Address,12,6\nDistA,1010101,a_0300,Address,09,3\nDistA,1010101,a_0300,Address,10,3\nDistA,1010101,a_0300,Address,13,2\nDistA,1010101,b_0200,Address,11,6\nDistA,1010101,b_0200,Address,12,6\nDistA,1010101,b_0200,Address,09,3\nDistA,1010101,b_0200,Address,10,3\nDistA,1010101,b_0200,Address,13,2\nDistA,1010101,b_0300,Address,11,6\nDistA,1010101,b_0300,Address,12,6\nDistA,1010101,b_0300,Address,09,3\nDistA,1010101,b_0300,Address,10,3\nDistA,1010101,b_0300,Address,13,2\n</code></pre>\n\n<p>FileB</p>\n\n<pre><code>DistA,1010101,a_0200,23 \nDistA,1010101,a_0300,21\nDistA,1010101,b_0200,21 \nDistA,1010101,b_0300,19\n</code></pre>\n\n<p>and the resulting I have is this.</p>\n\n<p>FileC</p>\n\n<pre><code>DistA,1010101,a_0200,Address,11,6\nDistA,1010101,a_0200,Address,12,6\nDistA,1010101,a_0200,Address,09,2\nDistA,1010101,a_0200,Address,10,2\nDistA,1010101,a_0200,Address,13,1\nDistA,1010101,a_0300,Address,11,5\nDistA,1010101,a_0300,Address,12,5\nDistA,1010101,a_0300,Address,09,2\nDistA,1010101,a_0300,Address,10,2\nDistA,1010101,a_0300,Address,13,1\nDistA,1010101,b_0200,Address,11,5\nDistA,1010101,b_0200,Address,12,5\nDistA,1010101,b_0200,Address,09,2\nDistA,1010101,b_0200,Address,10,2\nDistA,1010101,b_0200,Address,13,1\nDistA,1010101,b_0300,Address,11,5\nDistA,1010101,b_0300,Address,12,5\nDistA,1010101,b_0300,Address,09,2\nDistA,1010101,b_0300,Address,10,2\nDistA,1010101,b_0300,Address,13,1\n</code></pre>\n\n<p>But I want this result for each exactly at this sequence and subtracting 1 from 6th column of the FileB and if the value is equal to 0 I do not need to print. This is only an example because I need the similar result for each line of the FileA</p>\n\n<p>I want to decrement FileA until 0 based on the match for the following fields.</p>\n\n<pre><code>DistA,1010101,a_0200.\n</code></pre>\n\n<p>So the decrement is that way.</p>\n\n<p>FileNewC</p>\n\n<pre><code>Loop-1\nDistA,1010101,a_0200,Address,11,7\nDistA,1010101,a_0200,Address,12,7\nDistA,1010101,a_0200,Address,09,3\nDistA,1010101,a_0200,Address,10,3\nDistA,1010101,a_0200,Address,13,2\nLoop-2\nDistA,1010101,a_0200,Address,11,6\nDistA,1010101,a_0200,Address,12,6\nDistA,1010101,a_0200,Address,09,2\nDistA,1010101,a_0200,Address,10,2\nDistA,1010101,a_0200,Address,13,1\nLoop-3\nDistA,1010101,a_0200,Address,11,5\nDistA,1010101,a_0200,Address,12,5\nDistA,1010101,a_0200,Address,09,1\nDistA,1010101,a_0200,Address,10,1\nLoop-4\nDistA,1010101,a_0200,Address,11,4\nDistA,1010101,a_0200,Address,12,4\nLoop-5\nDistA,1010101,a_0200,Address,11,3\nDistA,1010101,a_0200,Address,12,3\nLoop-6\nDistA,1010101,a_0200,Address,11,2\nDistA,1010101,a_0200,Address,12,2\nLoop-7\nDistA,1010101,a_0200,Address,11,1\nDistA,1010101,a_0200,Address,12,1\n</code></pre>\n\n<p>My perl is below.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n$|=1;\n\nmy $filea = $ARGV[0];\nmy $fileb = $ARGV[1];\n\n\nopen ( FA, '&lt;', $filea) || die ( \"File $filea Not Found!\" );\nopen ( FB, '&lt;', $fileb) || die ( \"File $fileb Not Found!\" );\n#open ( FC, \"&gt;\", $filec) || die ( \"File $filec Not Found!\" );\n\nmy %hash;\nwhile ( &lt;FB&gt; ) {\n    chomp;\n    my($dist, $sec, $cls, $max) = split \",\";\n    push @{ $hash{$dist, $sec, $cls} }, $max;\n}\n\nwhile ( &lt;FA&gt; ) {\n    chomp;\n    my($dist, $sec, $cls, $add, $idx, $qtd) = split \",\";\n\n    for my $max ( @{ $hash{$dist, $sec, $cls } }){\n        my $tot = $qtd -1;\n        print join(\",\", $dist, $sec, $cls, $add, $idx, $tot).\"\\n\";\n         $qtd=$tot;\n\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "sigils"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 3, "creation_date": 1525879574, "post_id": 50256923, "comment_id": 87531765, "body": "Counterexample: <code>@foos[$idx1]</code> gives you a list of one element, whereas <code>$foos[$idx1]</code> gives you a scalar value."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1525880228, "post_id": 50256923, "comment_id": 87532202, "body": "IDEs? I think you misunderstand where <code>perl</code> starts. Perl pre-dates the IDE that you seem to <i>need</i> to work in some languages. Maybe that&#39;s not as true now, but ... I still find it very useful to be able to work in a programming language with little more than a basic text editor."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1525898125, "post_id": 50256923, "comment_id": 87541310, "body": "Re &quot;<i>What is the benefit of Sigils in Perl?</i>&quot;, 1) The sigils tells what the type of variable is without having to use hungarian notation or similar. (Well, you could actually argue that it is a form of hungarian notation.) 2) The sigils allow scalars, arrays, hashes, subs, etc to have the same name. (Whether that&#39;s a good thing or not is another matter.)"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525979840, "post_id": 50256923, "comment_id": 87576632, "body": "to ikegami&#39;s point, sigils let text editors such as vim,  npp++ and TextMate provide syntax styling based on variable types, which I find to be useful"}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527687476, "post_id": 50256923, "comment_id": 88221791, "body": "cdhowie: In a consistent world, @foos[$idx1] would give you a single element, and getting it in a list would mean putting it in a list: [ @foos[$idx1] ]"}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1527687579, "post_id": 50256923, "comment_id": 88221879, "body": "@Sobrique: Things change. simply because it started from a classical stance where it made valid choices does mean the validity of those choices hold true to today. Situations must be considered in the reality of today, with the context of the past."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527687758, "post_id": 50256923, "comment_id": 88222028, "body": "@ikegami: The name of the variable should indicate what the variable contains. &quot;$name&quot; vs &quot;name&quot;. If your naming is confusing, consider a better variable name. As for allowing multiple variables to have the same name, I don&#39;t consider making it easier to shoot yourself in the foot in a way no sane person would do, to be a good thing in just about any case; variable overloading like that should never be done, and so holds very little weight as a &quot;plus&quot; towards sigils/perl."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1527687802, "post_id": 50256923, "comment_id": 88222068, "body": "@beasy Funny how those same editors can handle syntax highlighting of non-sigil&#39;d languages just fine...."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1527688363, "post_id": 50256923, "comment_id": 88222493, "body": "@user63438 uh yeah but they can&#39;t style based on variable type. differentiating variables is the point of sigils. it&#39;s not better out worse, it just is"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1527688489, "post_id": 50256923, "comment_id": 88222582, "body": "as far as your point about maintaining the consistency of the sigil in all contexts, Perl6 takes a different approach than Perl5. in Perl6 the sigil of a variable never changes based on context. I use both 5 and 6 and have no problem with either one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527695181, "post_id": 50256923, "comment_id": 88227299, "body": "@user63438, You think you are contradicting me, but you&#39;re not. %animal vs $animal both contain information about an animal as you say, but the only the sigil indicates the type of the data as I said. /// Re &quot;<i>I don&#39;t consider making it easier to shoot yourself in the foot</i>&quot;, When I pointed out this was a matter of debate, it wasn&#39;t an invitation to start one. It also meant I was already aware that someone people might feel your way. Congratulations on breaking the rules for nothing."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1527720316, "post_id": 50256923, "comment_id": 88238439, "body": "@beasy So, in Perl 6 the sigils remain constant, meaning they can be replaced with convention, meaning they can be replaced with nothing, and so they provide no additional benefit..."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1527720651, "post_id": 50256923, "comment_id": 88238510, "body": "@user63438 in fact, in Perl6 you don&#39;t have to use sigils. you can instatiate any type of variable without a sigil. however, I usually still use sigils because I find that they do provide the benefits I and Ikegami have already stated."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527721278, "post_id": 50256923, "comment_id": 88238674, "body": "@ikegami: I didn&#39;t mean to start a non-civil debate/discussion. Sigils introduce complexity and overhead to the language and the people who write/read the code. If it doesn&#39;t simplify situations or disambiguate then it&#39;s a pointless holdover from an earlier time. In the case you provided, it would make sense for $animal to contain some sort of string identifier and for %animal to be some sort of property bag about the animal, of which its name might be a property. The issue arrives when $animal might also refer to a reference to an %aninal, but may be some Moose-backed complex object."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527721312, "post_id": 50256923, "comment_id": 88238686, "body": "@ikegami: pt2: Once you begin to introduce more types than there are sigils, the sigils need to be overloaded and lose even more meaning."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527721382, "post_id": 50256923, "comment_id": 88238712, "body": "Re &quot;<i>I didn&#39;t mean to start a non-civil debate/discussion</i>&quot;, But you did try to start a debate/discussion. Not allowed. Comments are not for that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527721449, "post_id": 50256923, "comment_id": 88238734, "body": "Re &quot;<i>Once you begin to introduce more types than there are sigils</i>&quot;, There can&#39;t be more variable types than there are sigils in Perl, by definition."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527722224, "post_id": 50256923, "comment_id": 88238923, "body": "@ikegami: Is a scalar a string, a number, a reference, or an object? They all use &quot;$&quot; for their sigil. That&#39;s at least 4 discreet types with one sigil. And I don&#39;t think I&#39;ve heard a good answer as to what they add to the language which other non-sigil&#39;d approaches already address. In that sense the original question remains unanswered."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527722329, "post_id": 50256923, "comment_id": 88238951, "body": "But those aren&#39;t types of variables. Those are types of values, and they have nothing to do with the sigil. And that has always been the case. There could even be more than one of those in a single scalar!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527722850, "post_id": 50256923, "comment_id": 88239071, "body": "<code>perl -MScalar::Util=dualvar -E&#39;$x=dualvar(123,&quot;abc&quot;); say for 0+$x, &quot;$x&quot;;&#39;</code> No magic or overloads. <code>dualvar</code> truly creates a scalar with two values."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527723098, "post_id": 50256923, "comment_id": 88239126, "body": "In any practical sense, a variable is used as one type of value. Cute tricks can apply, but if a single variable is used as multiple types, it will introduce a while new round of developer headaches."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527723137, "post_id": 50256923, "comment_id": 88239136, "body": "Re &quot;<i>In any practical sense, a variable is used as one type of value.</i>&quot;, No, not in Perl. $x = &quot;456&quot;; ($x contains a string)  $x=123; ($x contains a signed int.) &quot;$x&quot; ($x contains a string and a signed int)"}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527723221, "post_id": 50256923, "comment_id": 88239159, "body": "In regards to dualvar, that is in no way helpful, utterly confusing to anyone maintaining the code, and can immediately be addressed by having either two variables or two values in a hash, referenced by sensible keys."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527723273, "post_id": 50256923, "comment_id": 88239171, "body": "They still exist. What you&#39;re saying is besides the point, and completely false for a few reasons. This program uses a triple var and a dual var: <code>open(my $fh, &#39;&lt;&#39;, &quot;file&quot;) or die $!;</code>"}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527723322, "post_id": 50256923, "comment_id": 88239185, "body": "A variable may <i>hold</i> multiple types, but as soon as you actually <i>use</i> code, switching between types only confuses anyone hoping to maintain what was written"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527723381, "post_id": 50256923, "comment_id": 88239201, "body": "You are wrong. There is nothing confusing about <code>open(my $fh, &#39;&lt;&#39;, &quot;file&quot;) or die $!;</code>. The scalar returned by <code>open</code> has three values, and <code>$!</code> has two."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1527723630, "post_id": 50256923, "comment_id": 88239259, "body": "Perl6 has an even better kind of dual-var: You can attach error info to a false value, allowing you to return the same information as an exception without actually forcing the use of exception-handling code."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527724099, "post_id": 50256923, "comment_id": 88239366, "body": "Well...... A function in which a variable gets declared in the same line as a parameter (and within the parentheses) which keeps living past the execution of the function in question is confusing as all hell, but I&#39;ll give that a pass for now. :)"}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527724219, "post_id": 50256923, "comment_id": 88239392, "body": "I don&#39;t see how the scalar returned has three values... The only thing returned is a status code indicating success. I can&#39;t speak to your perl 6 example since it 1) makes no sense to a non-perl-6-ist 2) is out of scope. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527687902, "post_id": 50257102, "comment_id": 88222162, "body": "The problem is that programming is not speaking in a natural language. Certain things don&#39;t apply. Programming needs to be much more strict about semantics and definitions. In any case, a quoting of Larry Wall&#39;s reasoning does not answer the question."}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "reply_to_user": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527688030, "post_id": 50257102, "comment_id": 88222254, "body": "@user63438 that&#39;s not some dicta from Larry Wall, that&#39;s Perl&#39;s documentation on why it is the way it is.  And yes, Perl 6 went in another direction since it seems it wasn&#39;t very useful."}, {"owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "edited": false, "score": 0, "creation_date": 1527723654, "post_id": 50257102, "comment_id": 88239266, "body": "I understand why Larry did it. I was wondering if, in hindsight, it served any practical purposes. So far, I&#39;ve not heard anything, and perl 6 has opted for a consistent-sigil approach. As stated before, if the sigils are constant, they can be replaced with convention, and then replaced with an empty string as the convention, and then replaced with nothing, and we are back to not having sigils."}], "tags": [], "owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "is_accepted": false, "score": 1, "last_activity_date": 1525879990, "last_edit_date": 1592644375, "creation_date": 1525879990, "answer_id": 50257102, "question_id": 50256923, "link": "https://stackoverflow.com/questions/50256923/what-is-the-benefit-of-sigils-in-perl/50257102#50257102", "title": "What is the benefit of Sigils in Perl?", "body": "<p>The best explanation is found in <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a> in perldoc.  They function like articles and pronouns in natural language.</p>\n<blockquote>\n<p>The '$' symbol works semantically like the English word &quot;the&quot; in that it indicates a single value is expected.</p>\n<p>Entire arrays (and slices of arrays and hashes) are denoted by '@', which works much as the word &quot;these&quot; or &quot;those&quot; does in English, in that it indicates multiple values are expected.</p>\n</blockquote>\n<p>Perl 6 went a different way, so opinions on their value are varied, but that's the theory behind them.</p>\n"}], "owner": {"reputation": 5, "user_id": 1449913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a7cd14e62fb012d3f0c0d5cb08f777?s=128&d=identicon&r=PG", "display_name": "user63438", "link": "https://stackoverflow.com/users/1449913/user63438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "closed_date": 1525880475, "answer_count": 1, "score": -3, "last_activity_date": 1525879990, "creation_date": 1525879395, "question_id": 50256923, "link": "https://stackoverflow.com/questions/50256923/what-is-the-benefit-of-sigils-in-perl", "closed_reason": "Opinion-based", "title": "What is the benefit of Sigils in Perl?", "body": "<p>I understand the rules with sigils. I can make hashes from lists, and pass refs around with the mediocre-ist of them. What I don't understand are the <em>benefits</em> sigils provide in Perl. </p>\n\n<p>Some of the reasons I've heard are:</p>\n\n<ul>\n<li>String Interpolation\n\n<ul>\n<li>Ruby has the \"#{myVar}\" syntax, which solves almost <em>all</em> of these issues, including having full expressions without having to resort to the \"@{[$count + 1]}\" syntactical hack.</li>\n</ul></li>\n<li>Readibility\n\n<ul>\n<li>IDEs. And any text editor worth its weight in salt has syntax highlighting.</li>\n</ul></li>\n<li>Allowing for variable subNamespacing\n\n<ul>\n<li>Allowing me to declare $foo and @foo as two different variables will only lead to ruin in the future. </li>\n</ul></li>\n</ul>\n\n<p>One <em>very</em> helpful feature in a programming language is consistency. My curiosity drives me to ask if I declare a list as \"@foos\", and a counter \"$count\", how does it make sense to need to access elements by saying \"$foos[$count]\"? Oh! But I may use the \"@\" if I'm reading elements out into list context; so saying \"@foos[$idx1, $idx2]\" now makes sense! I can tell from looking at the sigil that I'm going to be reading an array instead of a single scalar!</p>\n\n<ul>\n<li>I can still tell I'm reading a single element by saying \"foos[count]\"</li>\n<li>I can still tell I'm reading multiple elements by saying \"foos[idx1, idx2]\". </li>\n<li>I can still tell I'm reading a single value by saying \"foos{key}\"</li>\n<li>I can still tell I'm reading multiple values by saying \"foos{key1, key2}\"</li>\n</ul>\n\n<p>This same pattern holds true for almost any case I can think of. The meaning of what is being done is clear no matter which sigil is being used, or none for that matter. The only difference is that I have to keep track of the context and be sure to keep sigils in line <em>as well</em>; </p>\n"}, {"tags": ["arrays", "perl", "reference", "copy"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1525875261, "post_id": 50255386, "comment_id": 87528698, "body": "You could do this: <code>my $ref2 = [@$ref1]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525897836, "post_id": 50255692, "comment_id": 87541169, "body": "And for a deep copy, use Storage&#39;s <code>dclone</code>."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 5, "last_activity_date": 1525875487, "creation_date": 1525875487, "answer_id": 50255692, "question_id": 50255386, "link": "https://stackoverflow.com/questions/50255386/copying-arrays-from-one-reference-to-another-in-perl/50255692#50255692", "title": "Copying arrays from one reference to another in perl", "body": "<p>To create a reference to an array which is a copy of an array referenced by a variable <code>$ref1</code>, you can write:</p>\n\n<pre><code>my $ref2 = [@$ref1];\n</code></pre>\n\n<p>Now, <code>$ref2</code> is the new reference.</p>\n"}], "owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "accepted_answer_id": 50255692, "answer_count": 1, "score": 0, "last_activity_date": 1525875685, "creation_date": 1525874578, "question_id": 50255386, "link": "https://stackoverflow.com/questions/50255386/copying-arrays-from-one-reference-to-another-in-perl", "title": "Copying arrays from one reference to another in perl", "body": "<p>I have a reference to an anonymous array and I want to create a reference to a copy of that array. Here's how I do it:</p>\n\n<pre><code>my $ref1 = ['a','b','c',];\nmy @arr = @$ref1;\nmy $ref2 = \\@arr;\n</code></pre>\n\n<p>now $ref2 points to a copy of the array. However, I don't actually care about @arr. Is there a way to perform such a copy without an intermediate variable?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1525862191, "post_id": 50251262, "comment_id": 87519650, "body": "Convert them into <code>^(?:\\d+\\D+){0}(\\d+)</code> and grab <code>$1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8795, "user_id": 6852937, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/211bc0d1a4dd35c36879f21e33511f68?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Elrico", "link": "https://stackoverflow.com/users/6852937/andre-elrico"}, "edited": false, "score": 0, "creation_date": 1525862562, "post_id": 50251397, "comment_id": 87519887, "body": "wow, that&#39;s exactly what I was looking for. I will learn more about the <code>\\K</code> thing."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 3, "last_activity_date": 1525862423, "creation_date": 1525862423, "answer_id": 50251397, "question_id": 50251262, "link": "https://stackoverflow.com/questions/50251262/match-the-n-th-occurence-dynamically/50251397#50251397", "title": "Match the n-th occurence dynamically", "body": "<p>Use <code>\\K</code> for this variable-length lookbehinds (Perl supports):</p>\n\n<pre><code>(?:\\d+\\D+){3}\\K\\d+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/C549Ej/1\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 8795, "user_id": 6852937, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/211bc0d1a4dd35c36879f21e33511f68?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Elrico", "link": "https://stackoverflow.com/users/6852937/andre-elrico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 50251397, "answer_count": 1, "score": 1, "last_activity_date": 1525862423, "creation_date": 1525862038, "question_id": 50251262, "link": "https://stackoverflow.com/questions/50251262/match-the-n-th-occurence-dynamically", "title": "Match the n-th occurence dynamically", "body": "<p>I was trying out stuff on regex101 and was asking myself:</p>\n\n<p><strong>How</strong> can I dynamically <strong>match</strong> the n-th number group.</p>\n\n<p>lets take the string:</p>\n\n<pre><code>string = this11is22library33this44is55library\n</code></pre>\n\n<p>For <strong>js-regex</strong> I was able to identify the following pattern</p>\n\n<ul>\n<li>get 1st <code>(?&lt;=(?:\\d+\\D+){0})\\d+    #11</code></li>\n<li>get 2nd <code>(?&lt;=(?:\\d+\\D+){1})\\d+   #22</code></li>\n<li>get 3rd <code>(?&lt;=(?:\\d+\\D+){2})\\d+    #33</code></li>\n<li>get 4th <code>(?&lt;=(?:\\d+\\D+){3})\\d+    #44</code></li>\n<li>get 5th <code>(?&lt;=(?:\\d+\\D+){4})\\d+    #55</code></li>\n</ul>\n\n<p><strong>How</strong> is it possible to construct such a pattern that <strong>matches</strong> the n-th number block in <strong>perl</strong> regex?</p>\n"}, {"tags": ["arrays", "perl", "hash", "casting", "reference"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1525860880, "post_id": 50250701, "comment_id": 87518850, "body": "This smells a lot like an XY problem. What are you trying to accomplish here?"}, {"owner": {"reputation": 13, "user_id": 9763909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2002631318d9caf34348ff32a26c8806?s=128&d=identicon&r=PG&f=1", "display_name": "Piaff33z", "link": "https://stackoverflow.com/users/9763909/piaff33z"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525863108, "post_id": 50250701, "comment_id": 87520221, "body": "Notrhing in particular :-)      We can read in lot of places that hash and array are almost similar :-)      Hash is a special Array with specific methods to manipulate data in it.       References give an opportunity to manipulate these objects in elegant manner by saving memory for me.      What do you mean by XY problem ? :-)"}, {"owner": {"reputation": 13, "user_id": 9763909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2002631318d9caf34348ff32a26c8806?s=128&d=identicon&r=PG&f=1", "display_name": "Piaff33z", "link": "https://stackoverflow.com/users/9763909/piaff33z"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525864395, "post_id": 50250701, "comment_id": 87521004, "body": "OK for XY problem : <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/XY_problem</a>. My goal is really to known if we can get a real ref array on a hash..."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525865054, "post_id": 50250701, "comment_id": 87521495, "body": "No, they aren&#39;t similar in that sense - they&#39;re both data structures, but they work in different ways. The fact that you&#39;re talking about a &#39;real ref array&#39; means I think you&#39;re latching on to how you would do something in C - and perl doesn&#39;t work that way. Hence why I&#39;m asking what you&#39;re <i>actually trying to accomplish</i>. <a href=\"https://www.perl.com/pub/2002/10/01/hashes.html/\" rel=\"nofollow noreferrer\">How hashes really work</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525916843, "post_id": 50250701, "comment_id": 87546676, "body": "Hashes and arrays are completely different data structures. A C-style cast would be completely useless. In Perl or in C."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525916848, "post_id": 50250701, "comment_id": 87546678, "body": "<code>[%{\\%trad}]</code> is just a long way of writing <code>[%trad]</code> (In C terms, <code>*\\*p</code> is the same as just <code>*p</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1525873534, "last_edit_date": 1525873534, "creation_date": 1525865841, "answer_id": 50252457, "question_id": 50250701, "link": "https://stackoverflow.com/questions/50250701/convert-hash-reference-to-array-reference/50252457#50252457", "title": "Convert hash reference to array reference", "body": "<p>You cannot operate on a hash directly, because perl doesn't work that way. References are not pointers in the C sense. You cannot directly access memory. </p>\n\n<p>Hashes and arrays might look similar on the surface - because you can cast between them with:</p>\n\n<pre><code>my @array = %hash; \n   %hash = @array; \n</code></pre>\n\n<p>And it 'works'. But this disguises that behind the scenes, they are different beasts. <code>@array</code> is still an ordered list of elements. <code>%hash</code> is still a non-deterministic ordered dictionary. The reason this work at all, is because enumerating a <code>%hash</code> in a list context, returns paired values. And you can populate a hash with a list of paired values. </p>\n\n<p>Indeed, that's pretty much what;</p>\n\n<pre><code>my %hash = ( 'January' =&gt; 'Jan',\n             'February' =&gt; 'Feb');\n</code></pre>\n\n<p>Is <em>actually</em> doing. You're supplying a list to the hash, and it's doing the right thing with it - associating the 'key' with the 'value' as paired values. ( <code>=&gt;</code> is basically the same as a comma, but it's often used like this because it's clearer to show the key-value associations). </p>\n\n<p>Here's an older article on <a href=\"https://www.perl.com/pub/2002/10/01/hashes.html/\" rel=\"nofollow noreferrer\">how hashes work</a> - it's changed somewhat in the intervening time, but the principle is similar - there are buckets, and hashes keys map into the buckets based on an internal algorithm. </p>\n\n<p>When you enumerate the whole hash in a list context - it returns the key-value pairs in an effectively random order each time, because that's how it's 'working' behind the scenes with the hash-lookup mechanism. </p>\n\n<p>But this means looking for a \"real array ref\" and \"operating on a hash directly\" isn't really meaningful - <code>perl</code> doesn't support doing that like you could in <code>C</code>, because that's not how the language works. </p>\n\n<p>If you <em>really</em> want to know what's happening behind the scenes - <a href=\"https://perldoc.perl.org/perlguts.html\" rel=\"nofollow noreferrer\"><code>perlguts</code></a> will give you a lot of detail. But it's mostly irrelevant to the process of coding in <code>perl</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525902698, "post_id": 50259092, "comment_id": 87543192, "body": "Premature optimisations are the root of all evil. Also: why do you need to get the size of your hash?  <code>scalar keys %hash</code> should do the trick nicely."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525916334, "post_id": 50259092, "comment_id": 87546547, "body": "Re &quot;<i>Effectively my confusing was to believe that Perl references work like references in C.</i>&quot;, A reference is a pointer with which you can&#39;t do pointer arithmetic. They are otherwise identical."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525916405, "post_id": 50259092, "comment_id": 87546571, "body": "Re &quot;<i>to get the size of a hash ( number of key/value ) we can write</i>&quot;, <code>my $size = keys(%hash);</code> is preferred (O(1) time and space instead of O(N) time and space)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525916636, "post_id": 50259092, "comment_id": 87546632, "body": "Re &quot;<i>It&#39;s pity that we can&#39;t do that, in some case it could be useful maybe.</i>&quot;, Never useful. The data structures are completely different, so a cast would never work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525916667, "post_id": 50259092, "comment_id": 87546639, "body": "You could make it so the <i>values</i> of an array and a hash are shared such that if you change one, the other is changed too."}], "tags": [], "owner": {"reputation": 13, "user_id": 9763909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2002631318d9caf34348ff32a26c8806?s=128&d=identicon&r=PG&f=1", "display_name": "Piaff33z", "link": "https://stackoverflow.com/users/9763909/piaff33z"}, "is_accepted": false, "score": 0, "last_activity_date": 1525887317, "creation_date": 1525887317, "answer_id": 50259092, "question_id": 50250701, "link": "https://stackoverflow.com/questions/50250701/convert-hash-reference-to-array-reference/50259092#50259092", "title": "Convert hash reference to array reference", "body": "<p>OK, it's more clear for me now. Thanks to took time to answer my question.</p>\n\n<p>Effectively my confusing was to believe that Perl references work like references in C.</p>\n\n<p>I found this article <a href=\"http://www.perlmonks.org/?node_id=504196\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=504196</a> which explains this trick but it don't precise this new reference created binds to anonymous array or hash :-(  </p>\n\n<p>It's pity that we can't do that, in some case it could be useful maybe.</p>\n\n<p>For example to get the size of a hash ( number of key/value ) we can write :</p>\n\n<pre><code>$size_hash = ( $#{ [ %{\\%hash} ] } +1 ) / 2;\n</code></pre>\n\n<p>I use a reference from a Hash which is converted to Array reference and after we can get easily size of this array and divide by 2 to get result.</p>\n\n<p>I know, there are lot of methods to reach same goal but I found this method more \"elegant\" and I believed less consummative in memory :-(\nNot in reality because it creates an anonymous array with hash data :-(</p>\n"}], "owner": {"reputation": 13, "user_id": 9763909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2002631318d9caf34348ff32a26c8806?s=128&d=identicon&r=PG&f=1", "display_name": "Piaff33z", "link": "https://stackoverflow.com/users/9763909/piaff33z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "accepted_answer_id": 50252457, "answer_count": 2, "score": 0, "last_activity_date": 1525887317, "creation_date": 1525860436, "question_id": 50250701, "link": "https://stackoverflow.com/questions/50250701/convert-hash-reference-to-array-reference", "title": "Convert hash reference to array reference", "body": "<p>I would like is possible in perl to get an array ref from a hash or to convert a ref hash into ref array !?</p>\n\n<p>For example :</p>\n\n<pre><code>%trad = ('January','Jan','February','Feb');\n$ref = \\%trad;      # made a reference on hash\n$ref2 = [%{$ref}];  # convert ref hash to ref array\n</code></pre>\n\n<p>in other way we can write :</p>\n\n<pre><code>$ref2 = [%{\\%trad}];\n</code></pre>\n\n<p>But this code is an illusion of ref array on hash because contruction <strong>$ref = [...]</strong> creates a reference to an anonymous array created by copying elements from hash by Perl.</p>\n\n<p>You can see that by trying to fill array pointed by $ref2 which has no effect on hash !</p>\n\n<p><strong>Is there a way</strong> to operate directly on hash directly in memory zone by using a real ref array like casting method in C !?</p>\n"}, {"tags": ["html", "perl", "parsing", "formatting", "mechanize"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525859739, "post_id": 50249727, "comment_id": 87518074, "body": "I don&#39;t think you mean <i>&quot;raw&quot;</i> here. Do you want the module to process  an HTML file or string as if it came via HTTP?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1525863611, "post_id": 50249727, "comment_id": 87520506, "body": "Have you considered using <code>WWW::Mechanize::Cached</code>?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1525912935, "post_id": 50249727, "comment_id": 87545844, "body": "Mechanize uses <a href=\"http://search.cpan.org/~gaas/HTML-Parser-3.72/lib/HTML/TokeParser.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~gaas/HTML-Parser-3.72/lib/HTML/TokeParser.p&zwnj;&#8203;m</a> under the hood, why not just use that?  You can feed it a reference to a content string to initialize it."}], "owner": {"reputation": 99, "user_id": 9763713, "user_type": "registered", "profile_image": "https://graph.facebook.com/249480629146755/picture?type=large", "display_name": "cmcjake", "link": "https://stackoverflow.com/users/9763713/cmcjake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525912826, "creation_date": 1525857501, "last_edit_date": 1525912826, "question_id": 50249727, "link": "https://stackoverflow.com/questions/50249727/use-wwwmechanize-without-fetching-url-data-raw", "title": "use WWW::Mechanize without FETCHING url data (raw)", "body": "<p>I am spending too much time writing code that already happens easily with <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow noreferrer\"><code>WWW::Mechanize</code></a>.</p>\n\n<p>I'm searching for specific <code>&lt;td&gt;</code> classes in HTML using <code>WWW::Mechanize</code>. When I find my specific entry and append it to a list, I want to also initiate another <code>WWW::Mechanize</code> object on <em>raw</em> HTML data (as in, \"fetch\" the page; the page being my raw HTML data).</p>\n\n<p>I can't find any constructors for <code>WWW::Mechanize</code> to construct without <code>-&gt;get()</code> / etc.  I just want to feed my raw HTML data into a new object and go from there, but I just can't find how!</p>\n\n<p>I think I clarified my question without the need of posting code, but will if requested.</p>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1525854445, "post_id": 50248729, "comment_id": 87514811, "body": "Maybe you found a bug."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525870305, "post_id": 50248729, "comment_id": 87525022, "body": "Good job with the <a href=\"https://github.com/chansen/p5-time-moment/issues/31\" rel=\"nofollow noreferrer\">bug report</a>. I added a test for it."}, {"owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525882861, "post_id": 50248729, "comment_id": 87533721, "body": "Thanks. I fixed the bug and submitted a pull request. :)"}], "answers": [{"tags": [], "owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "is_accepted": true, "score": 6, "last_activity_date": 1525893829, "creation_date": 1525893829, "answer_id": 50260679, "question_id": 50248729, "link": "https://stackoverflow.com/questions/50248729/finding-palm-sunday/50260679#50260679", "title": "Finding Palm Sunday", "body": "<p>Thank you Simon for the <a href=\"https://github.com/chansen/p5-time-moment/issues/31\" rel=\"noreferrer\">report</a> and the <a href=\"https://github.com/chansen/p5-time-moment/pull/32\" rel=\"noreferrer\">PR</a> and thank you @simbabque for the test! I have shipped <a href=\"https://metacpan.org/release/CHANSEN/Time-Moment-0.44\" rel=\"noreferrer\">v0.44 to CPAN</a>. You are excellent citizens in the opensource community!</p>\n\n<p>--\nchansen</p>\n"}], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 50260679, "answer_count": 1, "score": 4, "last_activity_date": 1525893829, "creation_date": 1525854276, "question_id": 50248729, "link": "https://stackoverflow.com/questions/50248729/finding-palm-sunday", "title": "Finding Palm Sunday", "body": "<p>Palm Sunday is the Sunday before Easter Sunday. Finding Easter Sunday can be achieved with:</p>\n\n<pre><code>use Time::Moment;\nuse Time::Moment::Adjusters qw(WesternEasterSunday PreviousDayOfWeek);\n\n# 2018-04-01T00:00:00Z\nmy $easter_sunday = Time::Moment-&gt;new(year =&gt; 2018)-&gt;with(WesternEasterSunday);\n</code></pre>\n\n<p>Finding the Sunday before that could be achieved with <a href=\"https://metacpan.org/pod/distribution/Time-Moment/lib/Time/Moment/Adjusters.pod#PreviousDayOfWeek\" rel=\"noreferrer\"><code>Time::Moment::Adjusters</code>' <code>PreviousDayOfWeek(7)</code></a>:</p>\n\n<blockquote>\n<pre><code>$adjuster = PreviousDayOfWeek($day);\n</code></pre>\n  \n  <p>The <code>$adjuster</code> adjusts the date to the previous occurrence of the given day of the week [1=Monday, 7=Sunday] that is before the date.</p>\n</blockquote>\n\n<p>But if I apply this adjuster, I get a Tuesday five days earlier!</p>\n\n<pre><code># 2018-03-27T00:00:00Z\nmy $palm_sunday = $easter_sunday-&gt;with(PreviousDayOfWeek(7))\n</code></pre>\n\n<p>Since Palm Sunday is always seven days prior to Easter Sunday, I could achieve this with <a href=\"http://search.cpan.org/dist/Time-Moment/lib/Time/Moment.pod#minus_days\" rel=\"noreferrer\"><code>Time::Moment</code>'s <code>minus_days(7)</code></a>, but since I want to find a number of other holidays that are much simpler to find using <code>Time::Moment::Adjusters</code>, I would really like to find the root of this unexpected behavior.</p>\n"}, {"tags": ["perl", "hash", "hashmap"], "comments": [{"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1525852249, "post_id": 50247908, "comment_id": 87513589, "body": "@xxfelixxx I am sorry,but a little code would make things clearer for me"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1525853308, "post_id": 50247908, "comment_id": 87514213, "body": "ok, have some code :)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1525862272, "post_id": 50248406, "comment_id": 87519699, "body": "I tried using count instead of dying when i found duplicates,but for some reason it&#39;s not working.it just doesn&#39;t come inside the &#39;if&#39; loop"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1525910676, "post_id": 50248406, "comment_id": 87545345, "body": "To keep track of the counts instead of dying on the first duplicate involves a bit more bookkeeping...but here you go."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1525910616, "last_edit_date": 1525910616, "creation_date": 1525853029, "answer_id": 50248406, "question_id": 50247908, "link": "https://stackoverflow.com/questions/50247908/how-to-validate-values-of-an-multi-dimensional-hash-in-perl/50248406#50248406", "title": "How to validate values of an multi dimensional hash in perl?", "body": "<p>You probably ran into issues using <code>exists</code> because you defined your hash incorrectly.  You do <code>%hash = { ... }</code> when you should create a hash with <code>%hash = ( ... )</code> or create a hash reference with <code>$hash = { ... }</code>.  Have a read of <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc perlreftut</a> for all the gory details.</p>\n\n<p>Use another hash to store the various DS / PP combinations and use that to check for uniqueness.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $hash = {\n    '5' =&gt; {'DS' =&gt; 'TESTD1',\n            'DN' =&gt; 'TESTD1',\n            'PP' =&gt; 'APPLE44'},\n    '6' =&gt; {'DS' =&gt; 'TESTD2',\n            'DN' =&gt; 'TESTD2',\n            'PP' =&gt; 'APPLE44'},\n    '7' =&gt; {'DS' =&gt; 'TESTD1',\n            'DN' =&gt; 'TESTD3',\n            'PP' =&gt; 'APPLE44'}, \n    '8' =&gt; {'DS' =&gt; 'TESTD1',\n            'DN' =&gt; 'TESTD1',\n            'PP' =&gt; 'ORANGE33'},\n};\n\nmy %check_for_dups;\nfor my $key ( sort keys %$hash ) {\n    my $subhash = $hash-&gt;{ $key };\n    my $combo = join '_', 'DS', $subhash-&gt;{ DS }, 'PP', $subhash-&gt;{ PP };\n    $check_for_dups{ $combo }-&gt;{ $key } = 1;\n}\n\nmy $found_dups = 0;\nfor my $combo ( sort keys %check_for_dups ) {\n    my @keys_for_combo = sort { $a &lt;=&gt; $b } keys %{ $check_for_dups{ $combo } };\n    if ( scalar @keys_for_combo &gt; 1 ) {\n        print \"Duplicate keys for combo '$combo' : \" . join(',',@keys_for_combo) . \"\\n\";\n        $found_dups = 1;\n    }\n}\n\nprint \"All combos are unique!\\n\"\n    unless $found_dups;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>Duplicate keys for combo 'DS_TESTD1_PP_APPLE44' : 5,7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1525862775, "post_id": 50249191, "comment_id": 87520026, "body": "I need to use count. Your answer would give mixed results"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1525866119, "post_id": 50249191, "comment_id": 87522248, "body": "can you answer using count?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1525872748, "post_id": 50249191, "comment_id": 87526823, "body": "You should <code>use strict; use warnings &#39;all&#39;;</code>"}, {"owner": {"reputation": 867, "user_id": 2609158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512a60cc6147c72c3454dc2d8c39cd09?s=128&d=identicon&r=PG", "display_name": "Fidel", "link": "https://stackoverflow.com/users/2609158/fidel"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1525937023, "post_id": 50249191, "comment_id": 87553027, "body": "@Dada, thanks for the valuable comments, Please find it added."}, {"owner": {"reputation": 867, "user_id": 2609158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512a60cc6147c72c3454dc2d8c39cd09?s=128&d=identicon&r=PG", "display_name": "Fidel", "link": "https://stackoverflow.com/users/2609158/fidel"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1525937026, "post_id": 50249191, "comment_id": 87553028, "body": "@Sherlock.H, No of duplicated indexes are already in the array and were printed, you should just made a count of array elements. Though I have added it now."}], "tags": [], "owner": {"reputation": 867, "user_id": 2609158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512a60cc6147c72c3454dc2d8c39cd09?s=128&d=identicon&r=PG", "display_name": "Fidel", "link": "https://stackoverflow.com/users/2609158/fidel"}, "is_accepted": false, "score": -1, "last_activity_date": 1525936852, "last_edit_date": 1525936852, "creation_date": 1525855908, "answer_id": 50249191, "question_id": 50247908, "link": "https://stackoverflow.com/questions/50247908/how-to-validate-values-of-an-multi-dimensional-hash-in-perl/50249191#50249191", "title": "How to validate values of an multi dimensional hash in perl?", "body": "<p>I am using kind of almost same as xxfelixxx answer, but in his code we can't find all the duplicates as script exists ( actually dies :) ) when it findsthe first duplicates.</p>\n\n<p>Hence I have used hash of array to store the indexes of duplicates, so you know the indexes which are duplicates and count of them too ( count of array values )</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings FATAL =&gt; 'all';\nmy $hash = {'5' =&gt; {'DS' =&gt; 'TESTD1',\n                 'DN' =&gt; 'TESTD1',\n                 'PP' =&gt; 'APPLE44'},\n         '6'=&gt; {'DS' =&gt; 'TESTD2',\n                'DN' =&gt; 'TESTD2',\n                'PP' =&gt; 'APPLE44'},\n         '7'=&gt;{'DS' =&gt; 'TESTD1',\n               'DN' =&gt; 'TESTD3',\n               'PP' =&gt; 'APPLE44'},\n         '8'=&gt;{'DS' =&gt; 'TESTD1',\n               'DN' =&gt; 'TESTD1',\n               'PP' =&gt; 'ORANGE33' }\n          };\n\nmy %result;\nforeach (keys %{$hash}) {\n   my $n_key = $hash-&gt;{$_}{'DS'} . '_' . $hash-&gt;{$_}{'PP'};\n   if( ! defined $result{$n_key} ) {\n      $result{$n_key} = [ $_ ];\n   } else {\n      push @{$result{$n_key}}, $_;\n   }\n}\n\nforeach (keys %result) {\n   if( @{$result{$_}} &gt; 1 ) {\n      my($DD, $PP) = split('_', $_);\n      print \"Duplicated values found for DD =&gt; $DD, PP =&gt; $PP, \";\n      print \"No of duplicates : \".scalar(@{$result{$_}}).\" and there respective indexes are @{$result{$_}}\\n\";\n   }\n}\n\nprint \"$_ : @{$result{$_}}\\n\" foreach(keys %result);\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>Duplicated values found for DD =&gt; TESTD1, PP =&gt; APPLE44, No of duplicates : 2 and there respective indexes are 7 5\nTESTD2_APPLE44 : 6\nTESTD1_ORANGE33 : 8\nTESTD1_APPLE44 : 7 5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1525943491, "post_id": 50267177, "comment_id": 87556124, "body": "This code doesn&#39;t answer your question. If you have a working solution you want to share, please do, but post the entire code."}], "tags": [], "owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1525935036, "creation_date": 1525935036, "answer_id": 50267177, "question_id": 50247908, "link": "https://stackoverflow.com/questions/50247908/how-to-validate-values-of-an-multi-dimensional-hash-in-perl/50267177#50267177", "title": "How to validate values of an multi dimensional hash in perl?", "body": "<p>This worked</p>\n\n<pre><code> my %dup; \n if(exists($dup{'DS'}{'PP'}))\n {\n     count++;\n }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 50248406, "answer_count": 3, "score": 1, "last_activity_date": 1525936852, "creation_date": 1525851245, "question_id": 50247908, "link": "https://stackoverflow.com/questions/50247908/how-to-validate-values-of-an-multi-dimensional-hash-in-perl", "title": "How to validate values of an multi dimensional hash in perl?", "body": "<p>I have an multidimensional hash like this</p>\n\n<pre><code>%hash = {'5' =&gt; {'DS' =&gt; 'TESTD1',\n                 'DN' =&gt; 'TESTD1',\n                 'PP' =&gt; 'APPLE44'},\n         '6'=&gt; {'DS' =&gt; 'TESTD2',\n                'DN' =&gt; 'TESTD2',\n                'PP' =&gt; 'APPLE44'},\n         '7'=&gt;{'DS' =&gt; 'TESTD1',\n               'DN' =&gt; 'TESTD3',\n               'PP' =&gt; 'APPLE44'} \n         '8'=&gt;{'DS' =&gt; 'TESTD1',\n               'DN' =&gt; 'TESTD1',\n               'PP' =&gt; 'ORANGE33' }\n          };\n</code></pre>\n\n<p>Now I want to check whether there are unique mappings between 'PP' values and 'DS' values for an entire hash .\nFor example 7th key isn't unique since it is same as 5th for DS and PP values.\nonly when both PP and DS values are same,I should increase the count.</p>\n\n<p>So far i have tried using 'exists' but doesn't seem to work in the way I wanted to,So how do we accomplish this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 0, "creation_date": 1525849868, "post_id": 50247436, "comment_id": 87512259, "body": "You have just one filter array where you push everything"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 0, "creation_date": 1525850602, "post_id": 50247436, "comment_id": 87512647, "body": "@MrTux but that is doing it <code>foreach</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1525908475, "post_id": 50247436, "comment_id": 87544860, "body": "What it meant is that you are printing that one array, regardless of what service you got, to the files.  So you wind up with all services in all files.  Roughly how many different &quot;<i>service</i>&quot;s do you have?  How large are the files?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1525951828, "post_id": 50247436, "comment_id": 87560788, "body": "@zdim Typically the services will not go over a 100 as new ones are commissioned old ones get decommissioned. I have yet to see a file larger than 10kb, so it is really not large at all. I am purely automatiting this as it is a manual task now to read from DB, manually update each day. With this script I can automate it by DB trigger."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1525974526, "post_id": 50247436, "comment_id": 87573964, "body": "Thank you for clarification, posted a way to do this"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1525864868, "post_id": 50248310, "comment_id": 87521365, "body": "Sorry, there are some issues here. let me go through it and clarify."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1526328950, "post_id": 50248310, "comment_id": 87692877, "body": "Sorry, I was away on some time off. I had some issues where the results were not as expected, but @zdim&#39;s answer solved my issue. Upvoting you answer."}], "tags": [], "owner": {"reputation": 601, "user_id": 773744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf341d9639892d72d2529abd32dcf7d0?s=128&d=identicon&r=PG", "display_name": "Stefan Schroeder", "link": "https://stackoverflow.com/users/773744/stefan-schroeder"}, "is_accepted": false, "score": -1, "last_activity_date": 1525852648, "creation_date": 1525852648, "answer_id": 50248310, "question_id": 50247436, "link": "https://stackoverflow.com/questions/50247436/perl-print-to-seperate-files/50248310#50248310", "title": "Perl print to seperate files", "body": "<p>Your code looks pretty perl4-ish, but that's not a problem. As MrTux has pointed out, you are confusing collection and fanning out of your data. I have refactored this to use a hash as intermediate container with the service name as keys. Please note that this will not accumulate results across mutliple calls (as it uses \">\" and not \">>\").</p>\n\n<pre><code>use strict;\nuse warnings qw(all);\nuse File::Slurp qw/read_file/;\nmy @Input = read_file('file.txt', chomp =&gt; 1);\n\nmy %store = (); # Global container\n# Capture\nforeach my $item(@Input) {\n     my ($serv, $device, $filter) = split(/ /, $item);\n     push @{$store{$serv}}, \"device==$device &amp; filter==$filter\";\n}\n# Write out for each service file\nforeach my $k(keys %store) {\n    open(my $OUTPUT, \"&gt;\", \"$k.txt\") or die $!;\n    print $OUTPUT join(\" ; \", @{$store{$k}});\n    close( $OUTPUT );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1526323341, "post_id": 50278566, "comment_id": 87690117, "body": "Thanks very much for the detailed answer, this makes alot more sense. much appreciated. Sorry for the delay in response, I was on a short break."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1525975990, "last_edit_date": 1525975990, "creation_date": 1525974092, "answer_id": 50278566, "question_id": 50247436, "link": "https://stackoverflow.com/questions/50247436/perl-print-to-seperate-files/50278566#50278566", "title": "Perl print to seperate files", "body": "<p>For each service to have its own file where data for it accumulates you need to distinguish for each line what file to print it to.  </p>\n\n<p>Then open a new service-file when a service without one is encountered, feasible since there aren't so many as clarified in a comment. This can be organized by a hash service => filehandle.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift @ARGV || 'data.txt';    \nmy %handle;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh&gt;) {\n    my ($serv, $device, $filter) = split;\n\n    if (exists $handle{$serv}) {\n        print { $handle{$serv} } \" ; device==$device &amp; filter==$filter\";\n    }   \n    else {\n        open my $fh_out, '&gt;', \"$serv.txt\" or do {\n            warn \"Can't open $serv.txt: $!\";\n            next;\n        };\n        print $fh_out \"device==$device &amp; filter==$filter\";\n        $handle{$serv} = $fh_out;\n    }   \n}\n\nsay $_ '' for values %handle;  # terminate the line in each file\n\nclose $_ for values %handle;\n</code></pre>\n\n<p>For clarity the code prints almost the same in both cases, what surely can be made cleaner.  This was tested only with the provided sample data and produces the desired output.</p>\n\n<p>Note that when a filehandle need be evaluated we need <code>{ }</code>. See <a href=\"https://stackoverflow.com/a/48471450/4653379\">this post</a>, for example.</p>\n\n<p>Comments on the original code (addressed in the code above)</p>\n\n<ul>\n<li><p>Use lexical filehandles (<code>my $fh</code>) instead of typeglobs (<code>FH</code>)</p></li>\n<li><p>Don't read the whole file at once unless there is a specific reason for that</p></li>\n<li><p><a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> has nice defaults, <code>split ' ', $_</code>, where <code>' '</code> splits on whitespace and discards leading and trailing space as well. (And then there is no need to <code>chomp</code> in this case.)</p></li>\n<li><p>Another option is to first collect data for each service, just as OP attempts, but again use a hash (service => arrayref/string with data) and print at the end. But I don't see a reason to not print as you go, since you'd need the same logic to decide when <code>;</code> need be added.</p></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 50278566, "answer_count": 2, "score": 1, "last_activity_date": 1525975990, "creation_date": 1525849668, "last_edit_date": 1525850731, "question_id": 50247436, "link": "https://stackoverflow.com/questions/50247436/perl-print-to-seperate-files", "title": "Perl print to seperate files", "body": "<p>I have a text file which lists a service, device and a filter, here I list 3 examples only:</p>\n\n<pre><code>service1 device04 filter9\nservice2 device01 filter2\nservice2 device10 filter11\n</code></pre>\n\n<p>I have written a perl script that iterates through the file and should then print <code>device=device</code> <code>filter=filter</code> to a file named according to the service it belongs to, but if a string contains a duplicate filter, it should add the devices to the same file, seperated by semicolons. Looking at the above example, I then need a result of:</p>\n\n<p><strong>service1.txt</strong></p>\n\n<pre><code>device=device04 filter=filter9\n</code></pre>\n\n<p><strong>service2.txt</strong></p>\n\n<pre><code>device=device01 filter=filter2 ; device=device10 filter=filter11\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>use strict;\nuse warnings qw(all);\nopen INPUT, \"&lt;\", \"file.txt\" or die $!;\nmy @Input = &lt;INPUT&gt;;\n\nforeach my $item(@Input) {\n     my ($serv, $device, $filter) = split(/ /, $item);\n     chomp ($serv, $device, $filter);\n     push my @arr, \"device==$device &amp; filter==$filter\";\n\n     open OUTPUT, \"&gt;&gt;\", \"$serv.txt\" or die $!;\n     print OUTPUT join(\" ; \", @arr);\n     close OUTPUT;\n}\n</code></pre>\n\n<p>The problem I am having is that both <code>service1.txt</code> and <code>service2.txt</code> are created, but my results are all wrong, see my current result:</p>\n\n<p><strong>service1.txt</strong></p>\n\n<pre><code>device==device04 filter==filter9\n</code></pre>\n\n<p><strong>service2.txt</strong></p>\n\n<pre><code>device==device04 filter==filter9 ; device==device01 filter==filter2device==device04 filter==filter9 ; device==device01 filter==filter2 ; device==device10 filter==filter11\n</code></pre>\n\n<p>I apologise, I know this is something stupid, but it has been a really long night and my brain cannot function properly I believe.</p>\n"}, {"tags": ["perl", "windows-10"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525883020, "post_id": 50245019, "comment_id": 87533816, "body": "@ikegami Ah ... thank you. That&#39;s completely wrong then, removed it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1525936473, "last_edit_date": 1525936473, "creation_date": 1525835857, "answer_id": 50245019, "question_id": 50244042, "link": "https://stackoverflow.com/questions/50244042/perl-detecting-symbolic-links-under-windows-10/50245019#50245019", "title": "Perl - Detecting symbolic links under Windows 10", "body": "<p>There seem to be not much Perl support for working with symlinks on Windows (if any). Neither of related builtins are implemented, according to <a href=\"https://perldoc.perl.org/perlport.html\" rel=\"nofollow noreferrer\">perlport</a> page <a href=\"http://perldoc.perl.org/perlport.html#readlink\" rel=\"nofollow noreferrer\">for symlink</a> and <a href=\"http://perldoc.perl.org/perlport.html#readlink\" rel=\"nofollow noreferrer\">for readlink</a>.  </p>\n\n<p>Most importantly for your direct question, <a href=\"https://perldoc.perl.org/perlport.html#-X\" rel=\"nofollow noreferrer\">lstat isn't implemented</a> either so one can't have a filetest for symlink. The <a href=\"https://perldoc.perl.org/perlport.html#-X\" rel=\"nofollow noreferrer\">perlport for -X</a> says that</p>\n\n<blockquote>\n  <p><code>-g</code>, <code>-k</code>, <code>-l</code>, <code>-u</code>, <code>-A</code> are not particularly meaningful.</p>\n</blockquote>\n\n<p>I haven't found anything on CPAN, other than using the Windows API.</p>\n\n<hr>\n\n<p>Then you can go to the Windows command line, and look for <code>&lt;SYMLINK&gt;</code> in <code>dir</code> output</p>\n\n<pre><code># Build $basename and $path from $import_filename if needed\nif ( not grep { /&lt;SYMLINK&gt;.*$basename/ } qx(dir $path) ) {\n    say \"$0: $import_filename is not a symlink\";\n}\n</code></pre>\n\n<p>where <code>$basename</code> need be used since <code>dir</code> doesn't show the path. The components of a filename with full path can be obtained for example with the core module <a href=\"https://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\">File::Spec</a></p>\n\n<pre><code>use File::Spec;\nmy ($vol, $path, $basename) = File::Spec-&gt;splitpath($import_filename);\n</code></pre>\n\n<p>If the filename has no path then <code>$vol</code> and <code>$path</code> are empty strings, which is OK for <code>dir</code> as it needs no argument for the current directory.  If <code>$import_filename</code> by design refers to the current directory (has no path) then use it in the regex, with <code>qx(dir)</code> (no argument).</p>\n\n<p>The <code>dir</code> output shows the target name as well, what can come in handy.</p>\n"}, {"comments": [{"owner": {"reputation": 617, "user_id": 1204141, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07e4fb04c5792d5361d57e341fbd97fa?s=128&d=identicon&r=PG", "display_name": "E. T.", "link": "https://stackoverflow.com/users/1204141/e-t"}, "edited": false, "score": 0, "creation_date": 1612154095, "post_id": 50245729, "comment_id": 116668434, "body": "FILE_ATTRIBUTE_REPARSE_POINT can be other things than links, you need to also obtain the reparse point data and check if it is actually a symbolic link. So that $is_link code is, to the best of my knowledge, wrong."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1525843052, "last_edit_date": 1525843052, "creation_date": 1525841525, "answer_id": 50245729, "question_id": 50244042, "link": "https://stackoverflow.com/questions/50244042/perl-detecting-symbolic-links-under-windows-10/50245729#50245729", "title": "Perl - Detecting symbolic links under Windows 10", "body": "<p>Given</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;mklink file_symlink file\nsymbolic link created for file_symlink &lt;&lt;===&gt;&gt; file\n\n&gt;mklink /d dir_symlink dir\nsymbolic link created for dir_symlink &lt;&lt;===&gt;&gt; dir\n\n&gt;mklink /h file_hardlink file\nHardlink created for file_hardlink &lt;&lt;===&gt;&gt; file\n\n&gt;mklink /j dir_hardlink dir\nJunction created for dir_hardlink &lt;&lt;===&gt;&gt; dir\n\n&gt;dir\n...\n2018-05-09  12:59 AM    &lt;JUNCTION&gt;     dir_hardlink [C:\\...\\dir]\n2018-05-09  12:58 AM    &lt;SYMLINKD&gt;     dir_symlink [dir]\n2018-05-09  12:56 AM                 6 file_hardlink\n2018-05-09  12:58 AM    &lt;SYMLINK&gt;      file_symlink [file]\n...\n</code></pre>\n\n<p>You can use the following to detect <code>file_symlink</code>, <code>dir_symlink</code> and <code>dir_hardlink</code> (but not <code>file_hardlink</code>) as a link:</p>\n\n<pre><code>use Win32API::File qw( GetFileAttributes FILE_ATTRIBUTE_REPARSE_POINT );\n\nmy $is_link = GetFileAttributes($qfn) &amp; FILE_ATTRIBUTE_REPARSE_POINT;\n</code></pre>\n\n<p>I don't know how to distinguish between hard links and symlinks (though differentiating between files and dirs can be done using <code>&amp; FILE_ATTRIBUTE_DIRECTORY</code>).</p>\n"}], "owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 50245729, "answer_count": 2, "score": 1, "last_activity_date": 1525936473, "creation_date": 1525827147, "question_id": 50244042, "link": "https://stackoverflow.com/questions/50244042/perl-detecting-symbolic-links-under-windows-10", "title": "Perl - Detecting symbolic links under Windows 10", "body": "<p>I have a problem with detecting symbolic links under Windows 10, which supports them. First I tried this:</p>\n\n<pre><code>if(! -l $import_filename) {\n    print \"$0: $import_filename is not a symlink\";\n}\n</code></pre>\n\n<p>That doesn't work. It gets executed when $import_filename is a symlink. Then I tried this:</p>\n\n<pre><code>use File::stat;\nuse Fcntl;\n\nmy $statbuf = lstat($import_filename);\nif(!($statbuf-&gt;mode &amp; S_ISLNK)) {\n    print \"$0: $import_filename is not a symlink\";\n}\n</code></pre>\n\n<p>And it seems to be a different way to say the same thing. As expected, is there any blessed way to do this under Windows versions with symlink/junction support? If there isn't, a command line tool is also an acceptable answer.</p>\n"}, {"tags": ["perl", "input"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1525793173, "post_id": 50237051, "comment_id": 87491696, "body": "You should read <a href=\"https://perlmaven.com/open-and-read-from-files\" rel=\"nofollow noreferrer\">perlmaven.com/open-and-read-from-files</a> and the following chapter. You should also take a look at <a href=\"https://perlmaven.com/argv-in-perl\" rel=\"nofollow noreferrer\">perlmaven.com/argv-in-perl</a> if you want to read the filenames from the command line, or into <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> if you want an easy way to find the files you need based on some rules."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525795553, "post_id": 50237051, "comment_id": 87493121, "body": "Do you mean reading the file name from the command line, or base it on the &#39;current path&#39;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1525797228, "post_id": 50237051, "comment_id": 87493973, "body": "<i>Stack Overflow</i> isn&#39;t really the place to get a from-scratch Perl tutorial."}, {"owner": {"reputation": 1, "user_id": 8502576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba32c86177775d97efddb5c7665b9d?s=128&d=identicon&r=PG&f=1", "display_name": "Ginger Geiger", "link": "https://stackoverflow.com/users/8502576/ginger-geiger"}, "edited": false, "score": 0, "creation_date": 1525803532, "post_id": 50237051, "comment_id": 87497201, "body": "Yes, I want to base the input file name on the current path. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9429365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407df0a6675adfdaaf15bfd7a40d499f?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Warren", "link": "https://stackoverflow.com/users/9429365/greg-warren"}, "is_accepted": false, "score": 0, "last_activity_date": 1525793318, "creation_date": 1525793318, "answer_id": 50237251, "question_id": 50237051, "link": "https://stackoverflow.com/questions/50237051/perl-input-file-dynamically/50237251#50237251", "title": "Perl input file dynamically", "body": "<p>When I was converting a fq file into fa file I would have to open a dynamic file for writing. I had the file I was trying to convert as a command line argument and thus the code responsible was like this. </p>\n\n<pre><code> my $directory = \"output\";\n if ($ARGV[0] =~ /^(\\S*).fq/) {\n     $location = $1;\n }\n open (OUTPUT, \"&gt;$directory/$location.fa\");\n</code></pre>\n\n<p>You can just utilise variables within the opening of your file.</p>\n\n<p>This code should dynamically open files for you but the way you input the files will no doubt be different than my solution. </p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 8502576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba32c86177775d97efddb5c7665b9d?s=128&d=identicon&r=PG&f=1", "display_name": "Ginger Geiger", "link": "https://stackoverflow.com/users/8502576/ginger-geiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "closed_date": 1525962536, "answer_count": 1, "score": -1, "last_activity_date": 1525811034, "creation_date": 1525792775, "last_edit_date": 1525811034, "question_id": 50237051, "link": "https://stackoverflow.com/questions/50237051/perl-input-file-dynamically", "closed_reason": "Duplicate", "title": "Perl input file dynamically", "body": "<p>I need to input a variable into this line to process many files dynamically:</p>\n\n<pre><code>open (INFILE, \"&lt; your_input.fa\") \n</code></pre>\n\n<p>I don't know how to accomplish this using Perl. I would normally use bash commands in a similar manner:</p>\n\n<pre><code>NAME1=$PWD\nNAME=$(basename \"$NAME1\") \n\nbwa mem $NAME.fastq.gz\n</code></pre>\n\n<p>Additional info:</p>\n\n<p>File names vary in the first 6 characters but have regular suffixes:</p>\n\n<pre><code>xx-nnn_regular.txt\n</code></pre>\n\n<p>Files are located in directories named after the first six characters:</p>\n\n<pre><code>xx-nnn &gt; xx-nnn_regular.txt\n</code></pre>\n\n<p>I have looked in the Perl manual but I do not have a programming background, will someone please help me out?</p>\n\n<p><strong><a href=\"https://stackoverflow.com/questions/1712188/how-do-i-run-a-perl-script-on-multiple-input-files-with-the-same-extension\">How do I run a Perl script on multiple input files with the same extension?</a></strong> I used the info here to answer my question-- thanks! </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1525786975, "post_id": 50234997, "comment_id": 87487548, "body": "I see where you want to go with that... but what you can do is <code>my $var = format($num) || \u2019N&#47;A\u2019;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525789430, "post_id": 50234997, "comment_id": 87489182, "body": "You&#39;re misunderstanding the nature of Perl built-in variables. They aren&#39;t some sort of introspection facility\u2014they have a clearly-defined purpose. <code>$1</code>, <code>$2</code> etc. store the captured substrings from each successful regex pattern match. That is their only purpose, and while it is possible to persuade a pattern match to store the captures elsewhere <i>as well</i>, the primary location is these built-in numbered variables. Lik&#233;wise, <code>$_</code> doesn&#39;t store the current value of a <code>for</code>loop control variable unless you have written your code that way. It is the <i>default</i> variable if you provide no other."}], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1525788097, "post_id": 50235148, "comment_id": 87488336, "body": "I understand the need for easy to read code.  In this case, I am building an object which has several numeric properties.  I am merely converting floats into integers with comma separations, so in this case, I see it as being neater than a long chain of if condition assignment blocks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 1, "creation_date": 1525788300, "post_id": 50235148, "comment_id": 87488450, "body": "@DanielFoust I&#39;m curious to see the code. If you&#39;d like some feedback, please post it to <a href=\"https://codereview.stackexchange.com\">Code Review</a> and ping me with a link here."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1525787032, "creation_date": 1525787032, "answer_id": 50235148, "question_id": 50234997, "link": "https://stackoverflow.com/questions/50234997/is-there-a-system-variable-to-access-the-last-subroutine-return-value-in-perl/50235148#50235148", "title": "Is there a system variable to access the last subroutine return value in Perl?", "body": "<p><strong>No, there is not.</strong></p>\n\n<p>However, you can rewrite your example to use either the <a href=\"http://perldoc.perl.org/perlop.html#C-style-Logical-Or\" rel=\"noreferrer\"><em>or</em> <code>||</code></a> or the <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"noreferrer\"><em>defined-or</em> <code>//</code></a> operator.</p>\n\n<pre><code>my $foo = frobnicate() || 'N/A'; # only true values, so no 0, q{} or undef\nmy $bar = frobnicate() // 'N/A'; # no undef\n</code></pre>\n\n<p>Of course this will not keep the value around for a while to use it further down in the code.</p>\n\n<p>This will also only work if the return value of the sub is only one value. If there is a list returned, it will use the right-most value from the list.</p>\n\n<pre><code>sub frobnicate { qw/a b 0/ }\nmy $var = frobnicate() || 'N/A';\nsay $var;\n</code></pre>\n\n<p>The above will print <code>N/A</code>.</p>\n\n<pre><code>sub frobnicate { qw/a b c/ }\nmy $var = frobnicate() || 'N/A';\nsay $var;\n</code></pre>\n\n<p>While this will print <code>c</code>.</p>\n\n<hr>\n\n<p>Don't try to be short for the sake of having short code. Most of the time, what you want is <em>easy to read</em> code instead.</p>\n\n<hr>\n\n<p>Note that <a href=\"http://perldoc.perl.org/functions/format.html\" rel=\"noreferrer\"><code>format</code> is a keyword</a>. Don't use it as a subroutine identifier.</p>\n"}], "owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50235148, "answer_count": 1, "score": 1, "last_activity_date": 1525787032, "creation_date": 1525786654, "last_edit_date": 1525786727, "question_id": 50234997, "link": "https://stackoverflow.com/questions/50234997/is-there-a-system-variable-to-access-the-last-subroutine-return-value-in-perl", "title": "Is there a system variable to access the last subroutine return value in Perl?", "body": "<p>Perl has a system variables for generically accessing variables within a given context, for example, using <code>$1</code> to after a regular expression to access the first grouped item or <code>$_</code> in a loop to access the current value.</p>\n\n<p>I was curious if there is a similar system variable for returned values from subroutines.</p>\n\n<p>ex.</p>\n\n<pre><code>my $var = (format($num)) ? $_ : 'N/A';\n</code></pre>\n\n<p>where <code>$_</code> would be the system variable to access the result of <code>format($num)</code> if it is defined.</p>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1525774866, "post_id": 50231151, "comment_id": 87479782, "body": "Seriously - regex is the wrong tool for this job. I know you say &quot;you want to use it&quot;. but ... CSV is contextual - it  can contain nested quotes, linefeeds etc. <code>regex</code> is not contextual, so it will never work exhaustively. <code>Text::CSV</code> is good at what it does."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525776218, "post_id": 50231151, "comment_id": 87480576, "body": "<i>&quot;I want to use the beauty of perl put it in one line&quot;</i> The &quot;beauty of Perl&quot; is not in writing incomprehensible code that replicates the function of a tried and tested module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525776358, "post_id": 50231151, "comment_id": 87480668, "body": "Your string <code>&quot;&quot;,hi there,&quot;&quot;,&quot;2018-04-23,\\&quot; 13:14:53&quot;,,hostname,mac,&quot;ipaddress&quot;,199</code> is not valid CSV data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525777284, "post_id": 50231151, "comment_id": 87481231, "body": "There is no point at all in <code>(?:|$)</code>: it will always match."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1525774949, "post_id": 50231294, "comment_id": 87479821, "body": "TBH your issue is that you&#39;re using <code>regex</code> instead of <code>Text::CSV</code>. I know you &quot;decided that you just want to use regex&quot; but ... that&#39;s using a hammer to put screws in. Sure, it can be made to work, but it&#39;ll never be anything other than ugly."}, {"owner": {"reputation": 51, "user_id": 3631283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb108403f028318ebfcb9498f1f0a24?s=128&d=identicon&r=PG&f=1", "display_name": "petom", "link": "https://stackoverflow.com/users/3631283/petom"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1525775413, "post_id": 50231294, "comment_id": 87480094, "body": "Hmm, I don&#39;t really see this one-liner ugly. It&#39;s a perl syntax.   And as I also mentioned, I created the regex before for other tools, software, where I can not modify a code. That software takes regex only and output format, where I used   &quot;$1$2&quot;, so I didn&#39;t notice the issue.  Just to add, I posted this question more as curiosity. I was wondering if anybody else came across the same. I couldn&#39;t believe it would be a bug in perl and that&#39;s why I asked here. I was already heading to use <code>Text::CSV</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525797132, "post_id": 50231294, "comment_id": 87493906, "body": "@petom: I&#39;m surprised at the upvotes your comment has received when you&#39;re basically defending a fairly impregnable regex pattern that still has bugs. I also suspect that it will be slower that <code>Text::CSV::XS</code>. I wonder if the people who agree with you would like to comment?"}, {"owner": {"reputation": 51, "user_id": 3631283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb108403f028318ebfcb9498f1f0a24?s=128&d=identicon&r=PG&f=1", "display_name": "petom", "link": "https://stackoverflow.com/users/3631283/petom"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525863056, "post_id": 50231294, "comment_id": 87520191, "body": "@Borodin I didn&#39;t post it for the purpose of CSV parsing. CSV was just a use case. Main purpose of this post is &quot;special&quot; or &quot;magic of&quot; regular expressions. I believe people came across similar issue too, when they had multiple subgroups where one excludes the other, and they wanted to have results in $1 every time. I needed this in multiple projects before, but usually &quot;$1$2&quot; workaround was good enough. I used the similar regex (approach, not necessarily CSV parsing) in python and other scripting languages. This case made me finally to do some search through regex docs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525863779, "post_id": 50231294, "comment_id": 87520615, "body": "@petom: The <code>(?|...)</code> construct is hardly a special one. <code>$1$2</code> will result in an <i>uninitialized</i> warning because one or other of the captures must be <code>undef</code>. If your post is just about celebrating the loveliness of Perl then it is off topic, and the question itself doesn&#39;t make that at all clear."}], "tags": [], "owner": {"reputation": 51, "user_id": 3631283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb108403f028318ebfcb9498f1f0a24?s=128&d=identicon&r=PG&f=1", "display_name": "petom", "link": "https://stackoverflow.com/users/3631283/petom"}, "is_accepted": false, "score": 2, "last_activity_date": 1525774789, "creation_date": 1525774789, "answer_id": 50231294, "question_id": 50231151, "link": "https://stackoverflow.com/questions/50231151/perl-regex-captures-non-capturing-groups/50231294#50231294", "title": "Perl regex captures non-capturing groups", "body": "<p>As soon as I posted my question I realised that issue are not the non-capturing groups, but actually capturing groups, which only one of them has a value and the other is empty at the time.</p>\n\n<p>The culprit is this section of the regex:</p>\n\n<pre><code>(?:\"(|.*?[^\\\\])\"|([^,]*))\n</code></pre>\n\n<p>Everything went all right after replacing non-capturing group with <a href=\"https://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\">branch-reset</a> feature:</p>\n\n<pre><code>(?|\"(|.*?[^\\\\])\"|([^,]*))\n</code></pre>\n\n<p>So final working correct one-liner is:</p>\n\n<pre><code>my @data = $text =~ m/(?:^|,)(?|\"(|.*?[^\\\\])\"|([^,]*))(?:|$)/g;\n</code></pre>\n\n<p>Hopefully someone will find this information useful.</p>\n"}], "owner": {"reputation": 51, "user_id": 3631283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb108403f028318ebfcb9498f1f0a24?s=128&d=identicon&r=PG&f=1", "display_name": "petom", "link": "https://stackoverflow.com/users/3631283/petom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525774789, "creation_date": 1525774349, "question_id": 50231151, "link": "https://stackoverflow.com/questions/50231151/perl-regex-captures-non-capturing-groups", "title": "Perl regex captures non-capturing groups", "body": "<p>I am using perl to parse CSV file. I use regex to parse it instead of any library. I know, there is CSV parser library available, and not only one, but I just decided I want to use REGEX.</p>\n\n<p>I created I think a quite nice and working regular expression for this. I originally created other applications, which take a regular expression only to parse files. And I wanted to reuse it for this case.</p>\n\n<p>I want to use the beauty of perl put it in one line:</p>\n\n<pre><code>my $text = '\"\",hi there,\"\",\"2018-04-23,\\\" 13:14:53\",,hostname,mac,\"ipaddress\",199';\n\nmy @data = $text =~ m/(?:^|,)(?:\"(|.*?[^\\\\])\"|([^,]*))(?:|$)/g;\n</code></pre>\n\n<p>However, when I do that in one-liner perl regex captures even non-capturing groups. </p>\n\n<p>Here is a testing code:</p>\n\n<pre><code>my $text = '\"\",hi there,\"\",\"2018-04-23,\\\" 13:14:53\",,hostname,mac,\"ipaddress\",199';\n\nmy @data = $text =~ m/(?:^|,)(?:\"(|.*?[^\\\\])\"|([^,]*))(?:|$)/g;\nforeach (@data) { print \"a --${_}--\\n\"; }\n\nwhile ($text =~ m/(?:^|,)(?:\"(|.*?[^\\\\])\"|([^,]*))(?:|$)/cg) {\n    print \"b --${1}${2}--\\n\";\n}\n</code></pre>\n\n<p>Results for \"a\" dump are:</p>\n\n<pre><code>a ----\na ----\na ----\na --hi there--\na ----\na ----\na --2018-04-23,\\\" 13:14:53--\na ----\na ----\na ----\na ----\na --hostname--\na ----\na --mac--\na --ipaddress--\na ----\na ----\na --199--\n</code></pre>\n\n<p>You can see there extra empty lines as opposed to the correct results from \"b\" dump:</p>\n\n<pre><code>b ----\nb --hi there--\nb ----\nb --2018-04-23,\\\" 13:14:53--\nb ----\nb --hostname--\nb --mac--\nb --ipaddress--\nb --199--\n</code></pre>\n\n<p>Has any body met with this issue?\nThank you for your answers / ideas / bug findings.</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1525768588, "post_id": 50229321, "comment_id": 87475803, "body": "Add <code>use strict; use warnings;</code> at the top, run it again, then fix all errors."}, {"owner": {"reputation": 574, "user_id": 2656421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8a27cef8664dd07145fb80c3191423?s=128&d=identicon&r=PG", "display_name": "Doug", "link": "https://stackoverflow.com/users/2656421/doug"}, "edited": false, "score": 0, "creation_date": 1525773980, "post_id": 50229321, "comment_id": 87479242, "body": "For how to compare strings in perl, see <a href=\"https://stackoverflow.com/questions/1175390/how-do-i-compare-two-strings-in-perl\" title=\"how do i compare two strings in perl\">stackoverflow.com/questions/1175390/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": false, "score": 1, "last_activity_date": 1525768887, "creation_date": 1525768887, "answer_id": 50229432, "question_id": 50229321, "link": "https://stackoverflow.com/questions/50229321/unable-to-call-second-subroutine-func2/50229432#50229432", "title": "Unable to call second subroutine &quot;func2&quot;", "body": "<p>Seems like you are comparing strings using <code>==</code> operator here: <code>if ($fruit == $fruit_list{'1'}){</code> and here: <code>elsif ($fruit == $fruit_list{'2'}){</code>.</p>\n\n<p>In Perl, <code>==</code> is a numerical comparison operator, for comparing strings use <code>eq</code> operator (i.e., <code>if ($fruit eq $fruit_list{'1'}){</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1525859115, "last_edit_date": 1525859115, "creation_date": 1525774988, "answer_id": 50231336, "question_id": 50229321, "link": "https://stackoverflow.com/questions/50229321/unable-to-call-second-subroutine-func2/50231336#50231336", "title": "Unable to call second subroutine &quot;func2&quot;", "body": "<p>There is no <code>@fruits</code> array, so <code>$fruit = $fruits[&lt;STDIN&gt;]</code> makes no sense. <code>$fruit</code> will be set to <code>undef</code> which evaluates as zero in a numeric context</p>\n\n<p>Meanwhile, <code>$fruit_list{'1'}</code> is <code>Apple</code>, which also evaluates as zero in numeric context</p>\n\n<p>The <code>==</code> operator compares <em>numbers</em>, so <code>if ($fruit == $fruit_list{'1'})</code> will compare zero with zero and always find a match</p>\n\n<p>You must have seen warning messages when you run your program. You must <em>never</em> ignore such messages as they are there to help you</p>\n\n<p>You <em>must</em> add <code>use strict</code> and <code>use warnings 'all'</code> to the the top of every Perl program you write, and fix all resulting messages before asking others for help</p>\n\n<p>You must also lay your code out properly, including indentation, so that other people (and yourself) can read it easily. I have edited the code in your question: please do it yourself in future, at least before asking other people for help with your code</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6201481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a93576e639500adf3bb7414804ce42?s=128&d=identicon&r=PG&f=1", "display_name": "user6201481", "link": "https://stackoverflow.com/users/6201481/user6201481"}, "is_accepted": false, "score": 0, "last_activity_date": 1526282026, "creation_date": 1526282026, "answer_id": 50324843, "question_id": 50229321, "link": "https://stackoverflow.com/questions/50229321/unable-to-call-second-subroutine-func2/50324843#50324843", "title": "Unable to call second subroutine &quot;func2&quot;", "body": "<p>Thanks for the inputs of comparing strings and array declaration. I had taken the inputs to modify my code as follow and it's working as expected.</p>\n\n<pre><code>print \"fruit list\\n\";\nprint \"1.\\tApple\\n\";\nprint \"2.\\tOrange\\n\";\nprint \"3.\\tPic\\n\";\nprint \"3.\\tBanana\\n\";\nprint \"Based on fruit list above, please key in your favorite fruit name.\\n\";\nmy %fruit_list = (\n    1 =&gt; 'Apple',\n    2 =&gt; 'Orange',\n    3 =&gt; 'Pic',\n    4 =&gt; 'Banana'\n    );\n@values = values(%fruit_list);\nmy $fruit = $values [&lt;STDIN&gt;];\nif ($fruit eq $values[1]){\nfunc1();\n}\nelsif ($fruit eq $values[2]){\nfunc2();\n}\n\nsub func1 {\nprint \"executing function 1\\n\";\n}\n\nsub func2 {\nprint \"executing function 2\\n\";\n}\n</code></pre>\n\n<p><strong>Output (inputting 2)</strong></p>\n\n<pre><code>fruit list\n1.      Apple\n2.      Orange\n3.      Pic\n4.      Banana\nBased on fruit list above, please key in your favorite fruit name.\n2\nexecuting function 2\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6201481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a93576e639500adf3bb7414804ce42?s=128&d=identicon&r=PG&f=1", "display_name": "user6201481", "link": "https://stackoverflow.com/users/6201481/user6201481"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1526282026, "creation_date": 1525768421, "last_edit_date": 1525775120, "question_id": 50229321, "link": "https://stackoverflow.com/questions/50229321/unable-to-call-second-subroutine-func2", "title": "Unable to call second subroutine &quot;func2&quot;", "body": "<h3>Coding</h3>\n\n<pre><code>print \"fruit list\\n\";\nprint \"1.\\tApple\\n\";\nprint \"2.\\tOrange\\n\";\nprint \"3.\\tPic\\n\";\nprint \"3.\\tBanana\\n\";\nprint \"Based on fruit list above, please key in your favorite fruit name.\\n\";\n\n%fruit_list = (\n    1 =&gt; 'Apple',\n    2 =&gt; 'Orange',\n    3 =&gt; 'Pic',\n    4 =&gt; 'Banana'\n);\n\n$fruit = $fruits[&lt;STDIN&gt;];\n\nif ( $fruit == $fruit_list{'1'} ) {\n    func1();\n}\nelsif ( $fruit == $fruit_list{'2'} ) {\n    func2();\n}\n\nsub func1 {\n    print \"executing function 1\\n\";\n}\n\nsub func2 {\n    print \"executing function 2\\n\";\n}\n</code></pre>\n\n<h3>Output (inputting 1):</h3>\n\n<pre><code>fruit list\n1.      Apple\n2.      Orange\n3.      Pic\n4.      Banana\nBased on fruit list above, please key in your favorite fruit name.\n1\nexecuting function 1\n</code></pre>\n\n<h3>Output (inputting 2):</h3>\n\n<pre><code>fruit list\n1.      Apple\n2.      Orange\n3.      Pic\n4.      Banana\nBased on fruit list above, please key in your favorite fruit name.\n2\nexecuting function 1\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1525754933, "post_id": 50225981, "comment_id": 87469284, "body": "Given the tags in your question, I&#39;d expect to see work-so-far in bash, awk and sed. I recommend you pick just one tool for this problem. That said, Stackoverflow is not a free code writing service. If you have attempted to write something and have some difficulties, then show what you have done and ask a specific question. Refer to <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> for tips. If you just want free work done then StackOverflow isn&#39;t the place for such requests."}, {"owner": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1525755031, "post_id": 50225981, "comment_id": 87469310, "body": "I tried perl -p -i.backup -e &#39;s/&quot;. /-1/g&#39; .\\abc.txt"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1525755089, "post_id": 50225981, "comment_id": 87469325, "body": "If you tried things, they should be IN YOUR QUESTION. And if you&#39;re attempting to get help with your perl code, add the <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a> tag, and remove the others."}, {"owner": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1525755210, "post_id": 50225981, "comment_id": 87469352, "body": "Thanks ghoti. I am new at this stuff. Sorry for the inconvenience."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1525755378, "post_id": 50225981, "comment_id": 87469392, "body": "No worries, we were all new at some point. :)  Do read the link I included in my first comment. The best questions here include an <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>. The help section has <a href=\"https://stackoverflow.com/help/asking\">lots of good tips for asking good questions</a>."}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "edited": false, "score": 0, "creation_date": 1525755548, "post_id": 50226071, "comment_id": 87469441, "body": "Thanks Ravi. Not only 0.40122 or 0.359, but all the numericals in the file should not be changed. Only dots should get replaced by -1."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "edited": false, "score": 0, "creation_date": 1525755697, "post_id": 50226071, "comment_id": 87469490, "body": "@RonicK, please try my edited code now and let me know on same then?"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "edited": false, "score": 0, "creation_date": 1525755932, "post_id": 50226071, "comment_id": 87469561, "body": "@RonicK, glad that it helped you, keep sharing and keep learning on SO, cheers :)"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 3, "creation_date": 1525756462, "post_id": 50226071, "comment_id": 87469737, "body": "Ravinder, please don&#39;t edit the question to add tags that make your answer more approriate. While the OP may have initially been fishing rather than asking for help with his code, things are fixed now, and adjusting the question to fit your answer doesn&#39;t encourage the OP to do better next time."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1525788416, "post_id": 50226071, "comment_id": 87488504, "body": "@DOWN VOTER, please do mention the reason for down vote :("}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 0, "last_activity_date": 1525755684, "last_edit_date": 1525755684, "creation_date": 1525755305, "answer_id": 50226071, "question_id": 50225981, "link": "https://stackoverflow.com/questions/50225981/replace-one-character-with-other-in-tab-separated-file/50226071#50226071", "title": "Replace one character with other in tab separated file", "body": "<p>Following <code>awk</code> may help you on same.</p>\n\n<pre><code>awk '{for(i=1;i&lt;=NF;i++){sub(/^\\.$/,\"-1\",$i)}} 1' Input_file\n</code></pre>\n\n<p>Change <code>awk</code> to <code>awk -F\"\\t\"</code> AND <code>Input_file</code> to <code>OFS=\"\\t\" Input_file</code> in case of your Input_file is having delimiter as TAB and you want to have output in TAB format too.</p>\n"}, {"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1525756340, "post_id": 50226144, "comment_id": 87469688, "body": "or <code>\\D</code> instead of <code>[^0-9]</code> and <code>[^\\d]</code>.. and <code>$1</code> is preferred in replacement section instead of <code>\\1</code> ... <code>\\d</code> isn&#39;t supported by GNU sed.."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1525756548, "post_id": 50226144, "comment_id": 87469768, "body": "@Sundeep, thanks, good to know. I don&#39;t run any systems with GNU sed on them."}, {"owner": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "edited": false, "score": 0, "creation_date": 1525939991, "post_id": 50226144, "comment_id": 87554452, "body": "Thank yo ghoti !!"}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 3, "last_activity_date": 1525955867, "last_edit_date": 1525955867, "creation_date": 1525755755, "answer_id": 50226144, "question_id": 50225981, "link": "https://stackoverflow.com/questions/50225981/replace-one-character-with-other-in-tab-separated-file/50226144#50226144", "title": "Replace one character with other in tab separated file", "body": "<p>Your perl isn't <em>too</em> far off.</p>\n\n<p>Remember that the substitute format's command is <code>s/pattern/replacement/flags</code>, just as it is in <code>sed</code>. The pattern is a <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">regular expression</a>, where a single dot translates to \"any single character\".  To match a <em>literal</em> dot, you need to escape it with a backslash, or put it in square brackets.</p>\n\n<pre><code>perl -p -i.backup -e 's/\\.([^0-9])/-1\\1/g' abc.txt\n</code></pre>\n\n<p>This matches literal dots that are followed by something other than a numeral, and replaces them with your replacement string, along with whatever non-numeral character was matched (<code>\\1</code>).  Perl appears to consider the null at the end of the line to be a non-numeral, which allows the dots at the end of the line to be replaced as well.</p>\n\n<p>Note that in perl, you could also replace <code>[^0-9]</code> with <code>[^\\d]</code> or <code>\\D</code>, and <code>\\1</code> with <code>$1</code>. But the former only works in perl and (some) GNU tools, and the latter is not the most widespread notation amongst command line tools. Personally, I'd rather keep my regexes and replacements more portable, so that if I were to switch from perl to, say, awk, I wouldn't have to rewrite so much code.</p>\n\n<p>For example:</p>\n\n<pre><code>gawk '{$0=gensub(/\\.([^0-9])/,\"-1\\1\",\"g\")}1' abc.txt &gt; ,$$ &amp;&amp; mv ,$$ abc.txt\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sed -i.backup -Ee 's/\\.([^0-9])/-1\\1/g' abc.txt\n</code></pre>\n\n<p>Portability is generally a good thing, if you can manage it.</p>\n"}], "owner": {"reputation": 207, "user_id": 9017953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06ada2d6d2d3c79c868d3593722d5f?s=128&d=identicon&r=PG&f=1", "display_name": "RonicK", "link": "https://stackoverflow.com/users/9017953/ronick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 50226071, "answer_count": 2, "score": 1, "last_activity_date": 1525955867, "creation_date": 1525754729, "last_edit_date": 1525756331, "question_id": 50225981, "link": "https://stackoverflow.com/questions/50225981/replace-one-character-with-other-in-tab-separated-file", "title": "Replace one character with other in tab separated file", "body": "<p>Hi I want to replace all the . ( dots) by -1 in tab separated file.</p>\n\n<pre><code>.   .   .   .   .   .\n.   .   .   .   .   .\n.   0.4012  0.359026    0.3616  0.246   0.4324\n.   0.6795  0.60024 0.4713  0.6171  0.7386\n.   0.6863  0.614018    0.5227  0.6131  0.7376\n.   .   .   .   .   .\n.   0.2044  0.210264    0.1936  0.2192  0.2376\n.   0.2043  0.210064    0.1929  0.2183  0.2376\n.   0.9852  0.984625    0.9425  1   1\n.   .   0.10603 0.1127  0.127   0.0427\n.   0.6934  0.709864    0.8222  0.6944  0.664\n.   0.0219  0.0213658   0.0015  0.0397  0.0219\n.   .   .   .   .   .\n</code></pre>\n\n<p>How ever I dont want to replace the dots present along with the numbers i.e. 0.4012 or 0.359.</p>\n\n<p>I tried this code </p>\n\n<pre><code>perl -p -i.backup -e 's/\". /-1/g' .\\abc.txt\n</code></pre>\n\n<p>but It didn't work</p>\n\n<p>Output I got was</p>\n\n<pre><code>.   .   .   .   .   .\n.   .   .   .   .   .\n.   0.4012  0.359026    0.3616  0.246   0.4324\n.   0.6795  0.60024 0.4713  0.6171  0.7386\n.   0.6863  0.614018    0.5227  0.6131  0.7376\n.   .   .   .   .   .\n.   0.2044  0.210264    0.1936  0.2192  0.2376\n.   0.2043  0.210064    0.1929  0.2183  0.2376\n.   0.9852  0.984625    0.9425  1   1\n.   .   0.10603 0.1127  0.127   0.0427\n.   0.6934  0.709864    0.8222  0.6944  0.664\n.   0.0219  0.0213658   0.0015  0.0397  0.0219\n.   .   .   .   .   .\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["regex", "perl", "strawberry-perl"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1525801448, "post_id": 50226180, "comment_id": 87496110, "body": "Thanks for the detailed response! It seems based on melpomene&#39;s response that I should (as I expected) just avoid substituting the capture group entirely but it&#39;s good to know how to know about quotemeta if I ever actually do need to do a similar operation, thank you!  Also, you are correct, Somedata cannot possibly ever contain &quot;},&quot; but thanks for pointing out balanced delimiters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1525807250, "post_id": 50226180, "comment_id": 87499156, "body": "@Asterdahl  I answered <i>before</i> melpomene, see the time stamps (with small edits later).  Regardless, theirs is a good answer.  Thanks for a comment :)"}, {"owner": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1525809312, "post_id": 50226180, "comment_id": 87500235, "body": "Ah, I assumed yours came second but it seems you edited it to reference melpomene&#39;s answer. I was torn between which to rate as the answer, because yours directly answered how to deal with the escaped characters but melpomene&#39;s is probably the best way to change the code. Both great answers and both got my upvote! Thanks again."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1525810742, "post_id": 50226180, "comment_id": 87500920, "body": "@Asterdahl  I added that one bit, for completeness of my post even as it had already been shown in another answer. For that same reason I felt obliged to quote it.  The answers mostly overlap, what results in having different wording and choices of what is said for the same techniques. So altogether this should be a useful page. Thank you for your behavior, with choices and votes and comments :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1525790363, "last_edit_date": 1525790363, "creation_date": 1525755978, "answer_id": 50226180, "question_id": 50224967, "link": "https://stackoverflow.com/questions/50224967/best-way-to-deal-with-unescaped-braces-in-regex-inside-perl-regex/50226180#50226180", "title": "Best way to deal with &quot;Unescaped braces in regex&quot; inside Perl regex", "body": "<p>As for the question of escaping, that's what <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> is for,</p>\n\n<pre><code>my $needs_escaping = q(some { data } here);\nsay quotemeta $needs_escaping;\n</code></pre>\n\n<p>what prints (on v5.16)</p>\n\n<pre>\nsome\\ \\{\\ data\\ \\}\\ here\n</pre>\n\n<p>and works on <code>$1</code> as well. See linked docs for details. Also see <a href=\"https://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\"><code>\\Q</code> in perlre</a> (search for <code>\\Q</code>), which is how this is used inside a regex, say <code>s/\\Q$1//;</code>. The <code>\\E</code> stops escaping (what you don't need).</p>\n\n<p>Some comments.</p>\n\n<p>Relying on deletion so that the regex keeps finding further such patterns may be a risky design. If it isn't and you do use it there is no need for indices, since we have <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">push</a></p>\n\n<pre><code>my @defParts;\nwhile ($fileContents =~ /($pattern)/) {\n    push @defParts, $1;\n    $fileContents =~ s/\\Q$1//;\n}\n</code></pre>\n\n<p>where <code>\\Q</code> is added in the regex. Better yet, as explained in <a href=\"https://stackoverflow.com/a/50226828/4653379\">melpomene's answer</a> the substitution can be done in the <code>while</code> condition itself</p>\n\n<pre><code>push @defParts, $1  while $fileContents =~ s/($pattern)//;\n</code></pre>\n\n<p>where I used the <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">statement modifier</a> form (postfix syntax) for conciseness.</p>\n\n<p>With the <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>/g</code> modifier</a> in scalar context, as in <code>while (/($pattern)/g) { .. }</code>, the search continues from the position of the previous match in each iteration, and this is a usual way to iterate over all instances of a pattern in a string. Please read up on use of <code>/g</code> in scalar context as there are details in its behavior that one should be aware of. </p>\n\n<p>However, this is tricky here (even as it works) as the string changes underneath the regex.  If efficiency is not a concern, you can capture all matches with <code>/g</code> in list context and then remove them</p>\n\n<pre><code>my @all_matches = $fileContents =~ /$patt/g;\n$fileContents =~ s/$patt//g;\n</code></pre>\n\n<p>While inefficient, as it makes two passes, this is much simpler and clearer.</p>\n\n<p>I expect that <code>Somedata</code> cannot possibly, ever, contain <code>}</code>, for instance as nested <code>{ ... }</code>, correct? If it does you have a problem of <em>balanced delimiters</em>, which is far more rounded. One approach is to use the core <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> module. Search for SO posts with examples.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1525802610, "post_id": 50226828, "comment_id": 87496690, "body": "Thanks for the fantastic response! I ended up choosing the final while loop with /g solution you suggested. Much more straightforward than my original solution.  I played around with the final two solutions, but couldn&#39;t get them to work. In both cases when I print the array to shell after setting them, I got the same result as the while loop solution, however, when I later print them into a different, new file (which is the ultimate goal) it simply refused to print anything which baffled me.  The other solution works great though and I am happily using it now."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1525765717, "last_edit_date": 1525765717, "creation_date": 1525759218, "answer_id": 50226828, "question_id": 50224967, "link": "https://stackoverflow.com/questions/50224967/best-way-to-deal-with-unescaped-braces-in-regex-inside-perl-regex/50226828#50226828", "title": "Best way to deal with &quot;Unescaped braces in regex&quot; inside Perl regex", "body": "<p>I would just bypass the whole problem and at the same time simplify the code:</p>\n\n<pre><code>my $i = 0;\nwhile ($fileContents =~ s/(.*Part[^\\}]*\\})//) {\n    $defParts[$i] = $1;\n    $i = $i + 1;\n}\n</code></pre>\n\n<p>Here we simply do the substitution first. If it succeeds, it will still set <code>$1</code> and return true (just like plain <code>/.../</code>), so there's no need to mess around with <code>s/$1//</code> later.</p>\n\n<p>Using <code>$1</code> (or any variable) as the pattern would mean you have to escape all regex metacharacters (e.g. <code>*</code>, <code>+</code>, <code>{</code>, <code>(</code>, <code>|</code>, etc.) if you want it to match literally. You can do that pretty easily with <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a> or inline (<code>s/\\Q$1//</code>), but it's still an extra step and thus error prone.</p>\n\n<p>Alternatively, you could keep your original code and not use <code>s///</code>. I mean, you already found the match. Why use <code>s///</code> to search for it again?</p>\n\n<pre><code>while ($fileContents =~ /(.*Part[^\\}]*\\})/) {\n    ...\n    substr($fileContents, $-[0], $+[0] - $-[0], \"\");\n}\n</code></pre>\n\n<p>We already know where the match is in the string. <a href=\"https://metacpan.org/pod/perlvar#@LAST_MATCH_START\" rel=\"nofollow noreferrer\"><code>$-[0]</code></a> is the position of the start and <a href=\"https://metacpan.org/pod/perlvar#@LAST_MATCH_END\" rel=\"nofollow noreferrer\"><code>$+[0]</code></a> the position of the end of the last regex match (thus <code>$+[0] - $-[0]</code> is the length of the matched string). We can then use <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a> to replace that chunk by <code>\"\"</code>.</p>\n\n<p>But let's keep going with <code>s///</code>:</p>\n\n<pre><code>my $i = 0;\nwhile ($fileContents =~ s/(.*Part[^\\}]*\\})//) {\n    $defParts[$i] = $1;\n    $i++;\n}\n</code></pre>\n\n<p><code>$i = $i + 1;</code> can be reduced to <code>$i++;</code> (\"increment $i\").</p>\n\n<pre><code>my @defParts;\nwhile ($fileContents =~ s/(.*Part[^\\}]*\\})//) {\n    push @defParts, $1;\n}\n</code></pre>\n\n<p>The only reason we need <code>$i</code> is to add elements to the <code>@defParts</code> array. We can do that by using <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\"><code>push</code></a>, so there's no need for maintaining an extra variable. This saves us another line.</p>\n\n<p>Now we probably don't need to destroy <code>$fileContents</code>. If the substitution exists only for the benefit of this loop (so I doesn't re-match already extracted content), we can do better:</p>\n\n<pre><code>my @defParts;\nwhile ($fileContents =~ /(.*Part[^\\}]*\\})/g) {\n    push @defParts, $1;\n}\n</code></pre>\n\n<p>Using <code>/g</code> in scalar context attaches a \"current position\" to <code>$fileContents</code>, so the next match attempt starts where the previous match left off. This is probably more efficient because it doesn't have to keep rewriting <code>$fileContents</code>.</p>\n\n<pre><code>my @defParts = $fileContents =~ /(.*Part[^\\}]*\\})/g;\n</code></pre>\n\n<p>... Or we could just use <code>//g</code> in list context, where it returns a list of all captured groups of all matches, and assign that to <code>@defParts</code>.</p>\n\n<pre><code>my @defParts = $fileContents =~ /.*Part[^\\}]*\\}/g;\n</code></pre>\n\n<p>If there are no capture groups in the regex, <code>//g</code> in list context returns the list of all matched strings (as if there had been <code>(</code> <code>)</code> around the whole regex).</p>\n\n<p>Feel free to choose any of these. :-)</p>\n"}], "owner": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 0, "accepted_answer_id": 50226828, "answer_count": 2, "score": 1, "last_activity_date": 1525791314, "creation_date": 1525746943, "last_edit_date": 1525791314, "question_id": 50224967, "link": "https://stackoverflow.com/questions/50224967/best-way-to-deal-with-unescaped-braces-in-regex-inside-perl-regex", "title": "Best way to deal with &quot;Unescaped braces in regex&quot; inside Perl regex", "body": "<p>I recently started learning Perl to automate some mindless data tasks. I work on windows machines, but prefer to use Cygwin. Wrote a Perl script that did everything I wanted fine in Cygwin, but when I tried to run it with Strawberry Perl on Windows via CMD I got the \"Unescaped left brace in regex is illegal here in regex,\" error.</p>\n\n<p>After some reading, I am guessing my Cygwin has an earlier version of Perl and modern versions of Perl which Strawberry is using don't allow for this. I am familiar with escaping characters in regex, but I am getting this error when using a capture group from a previous regex match to do a substitution. </p>\n\n<pre><code>open(my $fh, '&lt;:encoding(UTF-8)', $file)\n    or die \"Could not open file '$file' $!\";\nmy $fileContents = do { local $/; &lt;$fh&gt; };\n\nmy $i = 0;\nwhile ($fileContents =~ /(.*Part[^\\}]*\\})/) {\n    $defParts[$i] = $1;\n    $i = $i + 1;\n    $fileContents =~ s/$1//;\n}\n</code></pre>\n\n<p>Basically I am searching through a file for matches that look like:</p>\n\n<pre><code>Part\n{\n    Somedata\n}\n</code></pre>\n\n<p>Then storing those matches in an array. Then purging the match from the $fileContents so I avoid repeats. </p>\n\n<p>I am certain there are better and more efficient ways of doing any number of these things, but I am surprised that when using a capture group it's complaining about unescaped characters.</p>\n\n<p>I can imagine storing the capture group, manually escaping the braces, then using that for the substitution, but is there a quicker or more efficient way to avoid this error without rewriting the whole block? (I'd like to avoid special packages if possible so that this script is easily portable.)</p>\n\n<p>All of the answers I found related to this error were with specific cases where it was more straightforward or practical to edit the source with the curly braces.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9755529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc866abe0d32b22eb4a02f9a4a365c43?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/9755529/sophie"}, "is_accepted": false, "score": 0, "last_activity_date": 1525793867, "creation_date": 1525793867, "answer_id": 50237437, "question_id": 50223834, "link": "https://stackoverflow.com/questions/50223834/ensembl-perl-api-connection-error/50237437#50237437", "title": "EnsEMBL Perl API connection error", "body": "<p>I didn't get any replies to this but it is okay. I am posting the follow up to this just in case anyone comes across this problem in the future.</p>\n\n<p>The issue resolved itself overnight. The problem wasn't on my end.</p>\n"}], "owner": {"reputation": 11, "user_id": 9755529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc866abe0d32b22eb4a02f9a4a365c43?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/9755529/sophie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525793867, "creation_date": 1525736219, "question_id": 50223834, "link": "https://stackoverflow.com/questions/50223834/ensembl-perl-api-connection-error", "title": "EnsEMBL Perl API connection error", "body": "<p>I just posted this on Biostars but I think it's probably more appropriate here.</p>\n\n<p>I am trying to use the EnsEMBL Perl API. Last week this worked perfectly from the host I am using. I've come back to it a week later, with nothing changing in the meantime to this error. </p>\n\n<p>From the API webpage, my code contains the following:</p>\n\n<pre><code>Bio::EnsEMBL::Registry-&gt;load_registry_from_db(\n  -host    =&gt; 'ensembldb.ensembl.org',\n  -user    =&gt; 'anonymous',\n  -verbose =&gt; '1'\n);\n</code></pre>\n\n<p>This used to work fine, but the error I get now is: </p>\n\n<pre><code>-------------------- EXCEPTION --------------------\nMSG: Cannot connect to the Ensembl MySQL server at ensembldb.ensembl.org:3306; check your settings &amp; DBI error message: Host **&lt;IP address redacted&gt;** is blocked because of many connection errors; unblock with 'mysqladmin flush-hosts'\nSTACK Bio::EnsEMBL::Registry::load_registry_from_db ../ensembl/modules/Bio/EnsEMBL/Registry.pm:1769\nSTACK toplevel ./connect.pl:13\nDate (localtime)    = Mon May  7 16:21:29 2018\nEnsembl API version = 92\n---------------------------------------------------\n</code></pre>\n\n<p>I connected to my local mysql and performed FLUSH HOSTS like it asked, but it didn't help. I have also tried to look through previous posts to see if this has happened before - which it has, with BiomaRt, when ensembl changed something.</p>\n\n<p>Does this error happen for other people or just me? I am trying to figure out if this is on my end or ensembl's end. When I use the ping_ensembl.pl script it has the same error.</p>\n"}, {"tags": ["apache", "perl", "makefile"], "comments": [{"owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 1, "creation_date": 1525778327, "post_id": 50222970, "comment_id": 87481881, "body": "&#187;&#187; cc: Kommando nicht gefunden &#171;&#171; : <code>cc</code> is usually a link to gcc : <code>&#47;usr&#47;bin&#47;cc -&gt; gcc</code>"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "edited": false, "score": 0, "creation_date": 1612877897, "post_id": 50223448, "comment_id": 116898930, "body": "many many thanks dear dave - so great!"}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 4, "last_activity_date": 1525732909, "creation_date": 1525732909, "answer_id": 50223448, "question_id": 50222970, "link": "https://stackoverflow.com/questions/50222970/having-issues-with-installing-perl-modules-make-had-returned-bad-status-inst/50223448#50223448", "title": "having issues with installing perl modules :: Make had returned bad status, install seems impossible", "body": "<p>A C compiler is required to build that module, but the C compiler which perl was built with, 'cc' isn''t available. You will need to install that first.</p>\n\n<p>But Data::Dumper is part of the standard perl distribution, so you shouldn't need to install it anyway. If you're using a Linux distribution where the perl installation has been split into multiple packages, then you may just need to do something like</p>\n\n<p>yum install perl-Data-Dumper</p>\n"}], "owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525732909, "creation_date": 1525729895, "question_id": 50222970, "link": "https://stackoverflow.com/questions/50222970/having-issues-with-installing-perl-modules-make-had-returned-bad-status-inst", "title": "having issues with installing perl modules :: Make had returned bad status, install seems impossible", "body": "<p>good day - i am still having issues with installing perl modules \nthere seems to be issues with the make-file. i am trying to figure out what goes wrong here on my notebook.</p>\n\n<pre><code>cpan[1]&gt; install  Data::Dumper\nRunning install for module 'Data::Dumper'\nRunning make for S/SM/SMUELLER/Data-Dumper-2.161.tar.gz\nFetching with LWP:\nhttp://mirrors.hostingromania.ro/cpan.org/authors/id/S/SM/SMUELLER/Data-Dumper-2.161.tar.gz\nFetching with LWP:\nhttp://mirrors.hostingromania.ro/cpan.org/authors/id/S/SM/SMUELLER/CHECKSUMS\nChecksum for /home/martin/.cpan/sources/authors/id/S/SM/SMUELLER/Data-Dumper-2.161.tar.gz ok\n\n  CPAN.pm: Building S/SM/SMUELLER/Data-Dumper-2.161.tar.gz\n\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Data::Dumper\nWriting MYMETA.yml and MYMETA.json\ncp Dumper.pm blib/lib/Data/Dumper.pm\nRunning Mkbootstrap for Dumper ()\nchmod 644 \"Dumper.bs\"\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Dumper.bs blib/arch/auto/Data/Dumper/Dumper.bs 644\n\"/usr/bin/perl\" \"/usr/lib/perl5/5.18.2/ExtUtils/xsubpp\"  -typemap '/usr/lib/perl5/5.18.2/ExtUtils/typemap'  Dumper.xs &gt; Dumper.xsc\nmv Dumper.xsc Dumper.c\ncc -c   -D_REENTRANT -D_GNU_SOURCE -DPERL_USE_SAFE_PUTENV -fno-strict-aliasing -pipe -fstack-protector -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -fmessage-length=0 -grecord-gcc-switches -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -Wall -pipe   -DVERSION=\\\"2.161\\\" -DXS_VERSION=\\\"2.161\\\" -fPIC \"-I/usr/lib/perl5/5.18.2/x86_64-linux-thread-multi/CORE\"  -DUSE_PPPORT_H Dumper.c\n/bin/sh: cc: Kommando nicht gefunden.\nMakefile:332: recipe for target 'Dumper.o' failed\nmake: *** [Dumper.o] Error 127\n  SMUELLER/Data-Dumper-2.161.tar.gz\n  /usr/bin/make -- NOT OK\nRunning make test\n  Can't test without successful make\nRunning make install\n  Make had returned bad status, install seems impossible\nFailed during this command:\n SMUELLER/Data-Dumper-2.161.tar.gz            : make NO\n\ncpan[2]&gt; \n</code></pre>\n\n<p>well - i need to make sure that the make is set propperly ..good day - i am still having issues with installing perl modules \nthere seems to be issues with the make-file. i am trying to figure out what goes wrong here on my notebook.</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1525699867, "post_id": 50215278, "comment_id": 87447601, "body": "Why will that work when <code>qx(perl index.pl)</code> does not?"}], "tags": [], "owner": {"reputation": 46, "user_id": 9564560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ift5f-PZz54/AAAAAAAAAAI/AAAAAAAAA3g/tEs_Rnla2js/photo.jpg?sz=128", "display_name": "Daniel PC", "link": "https://stackoverflow.com/users/9564560/daniel-pc"}, "is_accepted": false, "score": -3, "last_activity_date": 1525699276, "creation_date": 1525699276, "answer_id": 50215278, "question_id": 50214728, "link": "https://stackoverflow.com/questions/50214728/execute-perl-script-from-perl-cgi-script/50215278#50215278", "title": "Execute Perl script from Perl CGI script", "body": "<p>You can use system in this way:</p>\n\n<pre><code>system(\"/path/to/index.pl\", @args);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1525700128, "last_edit_date": 1525700128, "creation_date": 1525699484, "answer_id": 50215357, "question_id": 50214728, "link": "https://stackoverflow.com/questions/50214728/execute-perl-script-from-perl-cgi-script/50215357#50215357", "title": "Execute Perl script from Perl CGI script", "body": "<p>You are making assumptions about the current work directory that may not be correct.</p>\n\n<p>If <code>index.pl</code> is in the same dir as the CGI script,</p>\n\n<pre><code>qx(perl index.pl);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>use FindBin            qw( $RealBin );\nuse String::ShellQuote qw( shell_quote );\n\nmy $cmd = shell_quote(\"perl\", \"--\", \"$RealBin/index.pl\");\nqx($cmd);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use FindBin             qw( $RealBin );\nuse IPC::System::Simple qw( capturex );\n\ncapturex(\"perl\", \"--\", \"$RealBin/index.pl\");\n</code></pre>\n\n<p>In both cases, <code>\"perl\", \"--\", \"$RealBin/index.pl\"</code> can be reduced to <code>\"$RealBin/index.pl\"</code> if <code>index.pl</code> is executable.</p>\n\n<hr>\n\n<p>This may or may not be your only problem. Until you tell us what problem you are having (e.g. by telling us what error you get), we can't help further.</p>\n"}], "owner": {"reputation": 232, "user_id": 4265700, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-gavhKqqAPk8/AAAAAAAAAAI/AAAAAAAAAV4/coZuZEf6_Jc/photo.jpg?sz=128", "display_name": "Aitor Ramos Pajares", "link": "https://stackoverflow.com/users/4265700/aitor-ramos-pajares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1525710743, "creation_date": 1525697573, "last_edit_date": 1525710743, "question_id": 50214728, "link": "https://stackoverflow.com/questions/50214728/execute-perl-script-from-perl-cgi-script", "title": "Execute Perl script from Perl CGI script", "body": "<p>I want to execute a Perl script from an Apache Perl CGI script.</p>\n\n<p>The CGI works perfectly showing the HTML text, but when I try to execute another script with <code>qx//</code> it doesn't work.</p>\n\n<h3>HTML</h3>\n\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;SUMAR&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;center&gt;\n&lt;h1&gt;Registro de usuario&lt;/h1&gt;\n&lt;form method=\"get\" action=\"cgi-bin/index.cgi\"&gt;\n    Nombre &lt;input type=\"text\" name=\"name\"&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    Usuario &lt;input type=\"text\" name=\"user\"&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    Contrase\u00f1a  &lt;input type=\"text\" name=\"pass\"&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    Correo electronico  &lt;input type=\"text\" name=\"email\"&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    &lt;input type=\"submit\" value=\"Enviar\"&gt;\n&lt;/form&gt;\n&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<h3>Perl CGI</h3>\n\n<pre><code>#!/usr/bin/perl\n\nuse Unix::Passwd::File;\nuse File::Path;\nuse CGI;\nuse strict;\n\nmy $cgi = new CGI;\nmy $name = $cgi-&gt;param(\"name\");\nmy $user = $cgi-&gt;param(\"user\");\nmy $pass = $cgi-&gt;param(\"pass\");\nmy $email = $cgi-&gt;param(\"email\");\n\nprint \"Content-type: text/html\\n\\n\";\nprint \"&lt;html&gt;\\n&lt;body&gt;\\n\";\nprint $name . $user . $pass . $email;\nprint \"\\n&lt;/body&gt;\\n&lt;/html&gt;\";\n\nqx(perl index.pl);\n</code></pre>\n\n<p>When I execute the CGI from the command line, the call to <code>index.pl</code> works perfectly, but when I try by web it doesn't work.</p>\n\n<p>EDIT:::::::::::::::.</p>\n\n<pre><code>apache2/error.log\n.....\n[Mon May 07 12:31:41.070830 2018] [cgid:error] [pid 6039:tid 139761641543424] [client 172.28.200.230:59210] End of script output before headers: index.cgi, referer: http://172.20.3.107/\n[Mon May 07 12:50:14.129598 2018] [cgid:error] [pid 6523:tid 139761926846336] (13)Permission denied: AH01241: exec of '/usr/lib/cgi-bin/index.pl' failed\n[Mon May 07 12:50:14.130080 2018] [cgid:error] [pid 6040:tid 139761717077760] [client 172.28.200.230:59324] End of script output before headers: index.pl, referer: http://172.20.3.107/\nmkdir /home/hgjhh: Permission denied at index.pl line 23.\nmkdir /home/hgjhh: Permission denied at index.pl line 23.\n[Mon May 07 13:15:25.420469 2018] [cgid:error] [pid 6040:tid 139761599579904] [client 172.28.200.230:59613] AH01264: script not found or unable to stat: /usr/lib/cgi-bin/index.pli\nmkdir /home/hgjhh: Permission denied at /usr/lib/cgi-bin/index.pl line 23.\nmkdir /home/hgjhh: Permission denied at /usr/lib/cgi-bin/index.pl line 23.\n[Mon May 07 13:26:56.046889 2018] [mpm_event:notice] [pid 6035:tid 139761926846336] AH00491: caught SIGTERM, shutting down\n[Mon May 07 18:22:57.342819 2018] [mpm_event:notice] [pid 534:tid 140120374777728] AH00489: Apache/2.4.10 (Debian) configured -- resuming normal operations\n[Mon May 07 18:22:57.364426 2018] [core:notice] [pid 534:tid 140120374777728] AH00094: Command line: '/usr/sbin/apache2'\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 692, "user_id": 2961097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1016689504/picture?type=large", "display_name": "Tcanarchy", "link": "https://stackoverflow.com/users/2961097/tcanarchy"}, "edited": false, "score": 0, "creation_date": 1525697372, "post_id": 50214597, "comment_id": 87445986, "body": "Maybe this can help you? <a href=\"https://stackoverflow.com/questions/29040585/how-to-filter-out-nodes-from-an-xml-using-perl-script\" title=\"how to filter out nodes from an xml using perl script\">stackoverflow.com/questions/29040585/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525698951, "post_id": 50214597, "comment_id": 87446973, "body": "Don&#39;t ever use <code>XML::Simple</code>. Try <code>XML::Twig</code> or <code>XML:;LibXML</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525702377, "post_id": 50215993, "comment_id": 87449375, "body": "The OP does say <i>&quot;all nodes having not with &quot;fail&quot;, &quot;error&quot;,</i> <b><i>and</i></b> <i>&quot;warning&quot; as attribute&quot;</i> but I doubt if they mean it."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1525701231, "creation_date": 1525701231, "answer_id": 50215993, "question_id": 50214597, "link": "https://stackoverflow.com/questions/50214597/remove-xml-nodes-with-attribute-in-perl/50215993#50215993", "title": "remove XML nodes with attribute in Perl", "body": "<p><a href=\"http://p3rl.org/xml_grep\" rel=\"nofollow noreferrer\">http://p3rl.org/xml_grep</a></p>\n\n<pre><code>xml_grep \\\n    --cond 'meassage[@name=\"error\"]' \\\n    --cond 'meassage[@name=\"fail\"]' \\\n    --cond 'meassage[@name=\"warning\"]' \\\n    so50214597.xml\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 6396392, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/86784409a165e563a12e84dfc0344ed2?s=128&d=identicon&r=PG&f=1", "display_name": "Royeh", "link": "https://stackoverflow.com/users/6396392/royeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 50215993, "answer_count": 1, "score": 0, "last_activity_date": 1525760890, "creation_date": 1525697151, "last_edit_date": 1525760890, "question_id": 50214597, "link": "https://stackoverflow.com/questions/50214597/remove-xml-nodes-with-attribute-in-perl", "title": "remove XML nodes with attribute in Perl", "body": "<p>I am new to Perl and I have lots of <code>XML</code> files with the same following structure:</p>\n\n<pre><code>&lt;reult&gt;\n    &lt;test name=\"test1\"&gt;\n        &lt;meassage type=\"passed\"&gt;\n            &lt;description&gt;&lt;![CDATA[  ===&gt;&gt; passed is here]]&gt;&lt;/description&gt;\n        &lt;/meassage&gt;\n        &lt;check name=\"\" line=\"150\"&gt;\n            &lt;result type=\"text\"&gt;&lt;/result&gt;\n            &lt;description type=\"DETAILED\"&gt;&lt;/description&gt;\n        &lt;/check&gt;\n        &lt;meassage type=\"error\"&gt;\n            &lt;description&gt;&lt;![CDATA[  ===&gt;&gt; error is here]]&gt;&lt;/description&gt;\n        &lt;/meassage&gt;\n        &lt;meassage type=\"passed\"&gt;\n            &lt;description&gt;&lt;![CDATA[  ===&gt;&gt; passed is here]]&gt;&lt;/description&gt;\n        &lt;/meassage&gt;\n    &lt;/test&gt;\n    &lt;test name=\"test2\"&gt;\n        &lt;meassage type=\"warning\"&gt;\n            &lt;description&gt;&lt;![CDATA[  ===&gt;&gt; warning is here]]&gt;&lt;/description&gt;\n        &lt;/meassage&gt;\n        &lt;meassage type=\"fail\"&gt;\n            &lt;description&gt;&lt;![CDATA[  ===&gt;&gt; fail is here]]&gt;&lt;/description&gt;\n        &lt;/meassage&gt;\n        &lt;meassage type=\"passed\"&gt;\n            &lt;description&gt;&lt;![CDATA[  ===&gt;&gt; passed is here]]&gt;&lt;/description&gt;\n        &lt;/meassage&gt;\n        &lt;check name=\"\" line=\"100\"&gt;\n            &lt;result type=\"text\"&gt;&lt;/result&gt;\n            &lt;description type=\"DETAILED\"&gt;&lt;/description&gt;\n        &lt;/check&gt;\n    &lt;/test&gt;\n&lt;/reult&gt;\n</code></pre>\n\n<p>What I want to do is reading each test using <code>for</code> and then delete every message nodes which is irrelevant is for me. It means, all nodes having not with \"fail\", \"error\", and \"warning\" as attribute must be deleted.</p>\n\n<p>I started to do with deleting all children of test with message, but it will delete what it should stay. Here is the main part of code only for deleting which I could not figure out.</p>\n\n<pre><code>my $cut_name = 'message'; \nmy $xml_file = 'test.xml';\n\nmy $mainXml = XML::Simple::Tree-&gt;new( file =&gt; $xml_file,\n                        node_key =&gt; 'directory',\n                        target_key =&gt; 'name');\n\n$mainXml-&gt;cut_node($cut_name);\n</code></pre>\n\n<p>After deleting all irrelevant nodes I will save the result as a new <code>XML</code> file.\nBy the way, would you please let me know how I could delete nodes using <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\">splice</a> with attribute?</p>\n"}, {"tags": ["postgresql", "perl", "dbi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525698806, "post_id": 50213127, "comment_id": 87446873, "body": "That Perl code won&#39;t compile. Please post what you really have."}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "edited": false, "score": 0, "creation_date": 1525700252, "post_id": 50214239, "comment_id": 87447856, "body": "Oh Thank you I&#39;am new to postgres It wasn&#39;t clear . Thank you for the clarification!!"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "edited": false, "score": 1, "creation_date": 1525718985, "post_id": 50214239, "comment_id": 87458432, "body": "@achahbar if you feel that this answer helped solving your issue, feel free to mark it as the correct answer by selecting the grey tick mark on the left side of the question."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1525718929, "last_edit_date": 1525718929, "creation_date": 1525696067, "answer_id": 50214239, "question_id": 50213127, "link": "https://stackoverflow.com/questions/50213127/perl-dbi-running-psql-code/50214239#50214239", "title": "Perl dbi running psql code", "body": "<p><code>\\x</code> and <code>\\pset</code> are formatting commands used by the <code>psql</code> client. They are not used by the Postgres server.</p>\n\n<p>If you want to format the data output from your Perl program, you have to do the formatting in Perl.</p>\n\n<p>For example, rather than writing:</p>\n\n<pre><code>foreach my $column (@$settings_fetch) {\n    print $column;\n}\n</code></pre>\n\n<p>You could:</p>\n\n<pre><code>foreach my $column (@$settings_fetch) {\n    print $column . \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 50214239, "answer_count": 1, "score": 0, "last_activity_date": 1525761271, "creation_date": 1525692417, "last_edit_date": 1525761271, "question_id": 50213127, "link": "https://stackoverflow.com/questions/50213127/perl-dbi-running-psql-code", "title": "Perl dbi running psql code", "body": "<p>I was wondering if anyone had any experience with perl dbi connecting to a postgres database. So I can connect to my postgres database and execute select queries, but I can't execute psql queries. Does anyone know if it is possible to do this in perl dbi? Right now I use this code to fetch a select query:</p>\n\n<pre><code>my $SQL = $dbh-&gt;prepare(\"select*from pg_settings;);\n    $SQL -&gt; execute();\n    while ( my ($settings_fetch) = $SQL-&gt;fetchrow_array() )\n    {\n        return $settings_fetch;\n    }\n</code></pre>\n\n<p>with the module PG:DBI</p>\n\n<p>But when I try to put <code>\\x</code> or <code>\\pset</code> format wrapped in the prepare statement it does not work. It doesn't give any errors but the output won't wrap and i still get the same output. Now I am a little confused if it's because it does not execute the psql commands and wrap the fetched rows, or the selects run always the same way and the wrapping is only to show on the display and can't be fetched with dbi</p>\n\n<p>The reason I want this is because I fetch the select arrays inside an array and output this to word, but when I got big select output with a lot of columns it does get messy in word tables, so I wanted the <code>\\x</code> variant inside my word document so that I don't get 10 columns horizontally but vertically.</p>\n"}, {"tags": ["perl", "ms-word", "win32ole"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525686814, "post_id": 50210723, "comment_id": 87439708, "body": "You are being very secretive and have given almost no information. You need at least to say what module you are using and show enough code for us to reproduce the issue. If this is <code>Win32::Word::Writer</code> then I can&#39;t see any mention of an <code>AutoFormat</code> method in the documentation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9751927"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525688074, "post_id": 50210723, "comment_id": 87440488, "body": "the module i&#39;am using is WIN32::OLE"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1525688707, "creation_date": 1525688707, "answer_id": 50212015, "question_id": 50210723, "link": "https://stackoverflow.com/questions/50210723/autoformat-word-table-in-perl/50212015#50212015", "title": "Autoformat word table in perl", "body": "<p>You need to look at Microsoft's <em>Visual Basic</em> documentation for the\n<a href=\"https://msdn.microsoft.com/en-us/vba/word-vba/articles/object-model-word-vba-reference\" rel=\"nofollow noreferrer\">Word object model</a>.\nThe OLE interface is simple to understand from there</p>\n\n<p>The page for <code>Table.AutoFormat</code> is <a href=\"https://msdn.microsoft.com/en-us/vba/word-vba/articles/table-autoformat-method-word\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9751927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50212015, "answer_count": 1, "score": -4, "last_activity_date": 1525688707, "creation_date": 1525684459, "question_id": 50210723, "link": "https://stackoverflow.com/questions/50210723/autoformat-word-table-in-perl", "title": "Autoformat word table in perl", "body": "<p>I have created a word document in perl with normal text and tables.\nNow i want to format my table but i can't find the way to do this.\nI know to put a format on my table i need to execute following command\n<code>$table-&gt;AutoFormat(x);</code>  with x being e number from 0 to ....\nBut there are a lot of table styles. I want just a normal one (which is style 16) but i want to assign the border lines and vertical lines myself to create a table by my choosing. Does anyone knew the syntax for this one , or a documentation of the autoformat syntax so that i know which number is which table style</p>\n\n<p>I know this is a question for documentation or tutorials but i searched a lot online and can't find any explanation about the autoformat syntax. And which numbers represet the border or the style . I hope some could help me out here.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1525674184, "post_id": 50208065, "comment_id": 87433115, "body": "You do not need <code>%hash2</code>. Try this: <code>exists $hash{$name} &amp;&amp; $place eq $hash{$name}</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1525674279, "post_id": 50208065, "comment_id": 87433153, "body": "In other words, you are comparing name with place in the first condition, <code>Alex</code> with <code>$hash{Alex}</code> (which is <code>Oakland</code>). Same with the other condition. Just swap them, <code>$name eq $hash2{$place} &amp;&amp; $place eq $hash{$name}</code>, or use <code>exists</code> as @H&#229;kon suggests"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9751066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d656a9e1a4f1469dbc06cce0cd6702?s=128&d=identicon&r=PG&f=1", "display_name": "Duomi", "link": "https://stackoverflow.com/users/9751066/duomi"}, "edited": false, "score": 0, "creation_date": 1525743540, "post_id": 50223921, "comment_id": 87466692, "body": "Thank you everyone for the elucidation! It seems I hadn&#39;t (perhaps still don&#39;t) understood the logic/function of the hash before using... Appreciate the help!"}], "tags": [], "owner": {"reputation": 1157, "user_id": 650691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63bc30bafc6206b09828c38899e3d26b?s=128&d=identicon&r=PG", "display_name": "chkdsk", "link": "https://stackoverflow.com/users/650691/chkdsk"}, "is_accepted": false, "score": -1, "last_activity_date": 1525737115, "creation_date": 1525737115, "answer_id": 50223921, "question_id": 50208065, "link": "https://stackoverflow.com/questions/50208065/perl-compare-stdin-to-hash-key-value/50223921#50223921", "title": "Perl - Compare &lt;STDIN&gt; to Hash Key &amp; Value", "body": "<p>While a lot may be done to correct this (unrelated to the question), but here is the minimal solution necessary:</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse warnings;\n\nmy %hash = (\nDominic =&gt; 'Melbourne',\nStella =&gt; 'Beijing',\nAlex =&gt; 'Oakland',\n);\n\nprint \"Enter name: \";\nmy $name = &lt;STDIN&gt;;\nprint \"Enter place: \";\nmy $place = &lt;STDIN&gt;;\n\nif ($name and $place) {\n  chomp ($name, $place);\n  if (exists($hash{$name}) and ($place eq $hash{$name})) {\n      print \"Correct!\\n\";\n  } else {\n      print \"NO!\\n\";\n  }\n} else {\n  print \"ERROR: Both name and place required to make this work!\";\n}\n</code></pre>\n\n<p>As you are reading from STDIN you need to sanity check the input otherwise you get these problems in your result (not to mention the \"Correct!\" at the end) with unexpected input:</p>\n\n<pre><code>Enter name:\nEnter place:\nUse of uninitialized value $name in chomp at original.pl line 19.\nUse of uninitialized value $place in chomp at original.pl line 19.\nUse of uninitialized value $name in hash element at original.pl line 22.\nUse of uninitialized value $name in string eq at original.pl line 22.\nUse of uninitialized value in string eq at original.pl line 22.\nUse of uninitialized value $place in hash element at original.pl line 22.\nUse of uninitialized value $place in string eq at original.pl line 22.\nUse of uninitialized value in string eq at original.pl line 22.\nCorrect!\n</code></pre>\n\n<p>Instead of this that should be generated with error checked code:</p>\n\n<pre><code>Enter name:\nEnter place:\nERROR: Both name and place required to make this work!\n</code></pre>\n\n<p>PS: Please bear with my variable declaration changes, it's just OCD from me, unrelated to the question at hand. Like I said a lot could be done.</p>\n"}], "owner": {"reputation": 33, "user_id": 9751066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d656a9e1a4f1469dbc06cce0cd6702?s=128&d=identicon&r=PG&f=1", "display_name": "Duomi", "link": "https://stackoverflow.com/users/9751066/duomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525737115, "creation_date": 1525673828, "question_id": 50208065, "link": "https://stackoverflow.com/questions/50208065/perl-compare-stdin-to-hash-key-value", "title": "Perl - Compare &lt;STDIN&gt; to Hash Key &amp; Value", "body": "<p>I am trying to compare if two inputs ($name, $place) match the respective key and value of a hash. So, if $name matches a key and $place matches that key's value, \"Correct\" is printed. My code unfortunately is incorrect. Any suggestions? Thanks!</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse warnings;\n\nmy ($name, $place, %hash, %hash2);       \n%hash = (\nDominic =&gt; 'Melbourne',\nStella =&gt; 'Beijing',\nAlex =&gt; 'Oakland',\n);\n%hash2 = reverse %hash;\n\nprint \"Enter name: \";\n$name = &lt;STDIN&gt;;\nprint \"Enter place: \";\n$place = &lt;STDIN&gt;;\n\n\nchomp ($name, $place);\n\n\nif ($name eq $hash{$name} &amp;&amp; $place eq $hash2{$place}) {\n    print \"Correct!\\n\";\n} else {\n    print \"NO!\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "yaml"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1525701091, "last_edit_date": 1525701091, "creation_date": 1525648254, "answer_id": 50205338, "question_id": 50205174, "link": "https://stackoverflow.com/questions/50205174/perl-writing-multiple-headers-to-single-yaml-document/50205338#50205338", "title": "Perl: Writing multiple headers to single YAML document", "body": "<p>As you seem to know already, </p>\n\n<pre><code>a: b\nc: d\n</code></pre>\n\n<p>is obtained by dumping a hash, so you want a hash as the top-level of your document. Proof of concept:</p>\n\n<pre><code>print YAML::Dumper-&gt;new-&gt;dump({\n   core =&gt; {\n      blob =&gt; 'build\\\\content\\\\objects\\\\36d80951814b5f08c7ba34cd7a5459b4c212ee6200ce247ac2a13d24b2fc0d57',\n      size =&gt; 31,\n      type =&gt; 'blob/text',\n   },\n   text =&gt; {\n      lines =&gt; [\n         { length =&gt;  1, offset =&gt;  0 },\n         { length =&gt;  5, offset =&gt;  1 },\n         { length =&gt;  7, offset =&gt;  6 },\n         { length =&gt; 13, offset =&gt; 13 },\n         { length =&gt;  1, offset =&gt; 26 },\n      ],\n   },\n});\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>---\ncore:\n  blob: build\\content\\objects\\36d80951814b5f08c7ba34cd7a5459b4c212ee6200ce247ac2a13d24b2fc0d57\n  size: 31\n  type: blob/text\ntext:\n  lines:\n    - length: 1\n      offset: 0\n    - length: 5\n      offset: 1\n    - length: 7\n      offset: 6\n    - length: 13\n      offset: 13\n    - length: 1\n      offset: 26\n</code></pre>\n\n<p>So change</p>\n\n<pre><code>my @tagobj_header_table;\npush @tagobj_header_table, make_tagobj_core_header;\npush @tagobj_header_table, make_tagobj_text_header;\n\nmy $dumper = YAML::Dumper-&gt;new;\nprint $dumper-&gt;dump(@tagobj_header_table);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my %doc = (\n   %{ make_tagobj_core_header() },\n   %{ make_tagobj_text_header() },\n);\n\nprint YAML::Dumper-&gt;new-&gt;dump(\\%doc);\n</code></pre>\n\n<p>though I think it would be best if you change the subs so the following works:</p>\n\n<pre><code>my %doc = (\n   core =&gt; make_tagobj_core_header(),\n   text =&gt; make_tagobj_text_header(),\n);\n\nprint YAML::Dumper-&gt;new-&gt;dump(\\%doc);\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 50205338, "answer_count": 1, "score": 1, "last_activity_date": 1525701091, "creation_date": 1525646410, "question_id": 50205174, "link": "https://stackoverflow.com/questions/50205174/perl-writing-multiple-headers-to-single-yaml-document", "title": "Perl: Writing multiple headers to single YAML document", "body": "<p>The following is the output YAML document I want.</p>\n\n<pre><code>---\ncore:\n    type: $tagobj_type\n    size: $tagobj_size\n    blob: $tagobj_blob\ntext:\n    lines:\n        - offset: 0\n          length: 1\n        - offset: 1\n          length: 5\n        - offset: 6\n          length: 7\n        - offset: 13\n          length: 13\n        - offset: 26\n          length: 1\n</code></pre>\n\n<p>Here's the code I'm using to create that YAML document to be serialized.</p>\n\n<pre><code>sub make_tagobj_core_header {\n return ({\n    core =&gt;  {\n     type =&gt; $tagobj_type,\n     size =&gt; $tagobj_size,\n     blob =&gt; $tagobj_blob,\n     }\n  });\n}\n\nsub make_tagobj_text_header {\n    my @tagobj_text_lines;\n    my ($lineno, $length, $offset);\n\n    $offset = 0;\n    while(my $line = &lt;$object_fh&gt;) {\n        $lineno = $. - 1;\n        $length = length($line);\n\n        push @tagobj_text_lines, {\n            offset =&gt; $offset,\n            length =&gt; $length,\n        };\n        $offset += $length;\n    }\n\n    return ({\n        text =&gt; {\n                lines =&gt; [@tagobj_text_lines]\n            }\n        })\n    } \n}\n\nmy @tagobj_header_table;\npush @tagobj_header_table, make_tagobj_core_header;\npush @tagobj_header_table, make_tagobj_text_header;\n\nmy $dumper = YAML::Dumper-&gt;new;\nprint $dumper-&gt;dump(@tagobj_header_table);\n</code></pre>\n\n<p>Here's the output.</p>\n\n<pre><code>---\ncore:\n  blob: build\\content\\objects\\36d80951814b5f08c7ba34cd7a5459b4c212ee6200ce247ac2a13d24b2fc0d57\n  size: 31\n  type: blob/text\n---\ntext:\n  lines:\n    - length: 1\n      offset: 0\n    - length: 5\n      offset: 1\n    - length: 7\n      offset: 6\n    - length: 13\n      offset: 13\n    - length: 1\n      offset: 26\n</code></pre>\n\n<p>Where did I go wrong? I think I need an array of hashes as my top-level entity in the YAML, but they get printed as separate documents separated by '---'.\nI would like to remove that without hacking on the output of YAML::Dumper::dump, as I have a use case for multiple identically structured YAML documents in a single file, which is supported by the spec.</p>\n"}, {"tags": ["java", "perl", "process", "processbuilder", "runtime.exec"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525631128, "post_id": 50203011, "comment_id": 87423068, "body": "Does your Perl program give the same error for all of those different methods? Your Perl program is presumably using <code>Getopt::Long</code>; I suggest you add some code to dump the contents of <code>@ARGV</code> before the call to <code>GetOptions</code> modifies it so that you can see what is actually being passed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525631299, "post_id": 50203011, "comment_id": 87423140, "body": "Try changing  <code>&quot;&#39;X24 X56&#39;&quot;</code> in the third call to <code>&quot;X24 X56&quot;</code>"}, {"owner": {"reputation": 109, "user_id": 6454434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f6547cdd34dab8d3c25f8156c2b11f?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Mahajan", "link": "https://stackoverflow.com/users/6454434/parth-mahajan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525631340, "post_id": 50203011, "comment_id": 87423149, "body": "Actually the script is throwing an exit code which on inspection revealed that some arguments are missing thats why it throws that particular code. And the script is part of a legacy code and I cant modify it. The command itself works on the terminal and I am fetching it from a db so cant modify that either."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525631456, "post_id": 50203011, "comment_id": 87423192, "body": "Can&#39;t you make a temporary copy and modiffy that? Or write a dummy program that just dumps <code>@ARGV</code> and stops?"}, {"owner": {"reputation": 109, "user_id": 6454434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f6547cdd34dab8d3c25f8156c2b11f?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Mahajan", "link": "https://stackoverflow.com/users/6454434/parth-mahajan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525631706, "post_id": 50203011, "comment_id": 87423267, "body": "Well I thought about that but the script is embedded in the environment and using its dependencies so making a temporary copy of it wont work. And the arguments will change according to the state of the program and I have to call the script multiple times. So essentially I would have to create a temporary script with the command in it on runtime with all the arguments and then destroy it after execution. But that doesnt really seem like a good way"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525633069, "post_id": 50203011, "comment_id": 87423755, "body": "We&#39;re just trying to debug here. You can write a three-line Perl program that just dumps <code>@ARGV</code> and call it using each of your techniques to see exactly what is being passed."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525635636, "post_id": 50203011, "comment_id": 87424535, "body": "P3 with @Borodin&#39;s change would be correct on Unix, so you should try that first. This is harder than it should be because Windows programs are invoked with a single argument string, not argument arrays like on Unix. This means that Java needs to map your multiple arguments into a single string, and then Perl needs to parse them out from the single string back into multiple arguments. There is no standard way of doing this, and when you e.g. have nested literal quotes (which you don&#39;t) two environments may have literally no way of passing them without loss. Quite a mess."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525640957, "post_id": 50203011, "comment_id": 87426086, "body": "Re &quot;<i>The Perl program is being executed but not receiving all the arguments.</i>&quot;, This seems extremely unlikely. How did you determine this? Which arguments were received? It&#39;s clear you are receiving incorrect arguments (because you combine them, or added quotes), but missing arguments? I think you&#39;ve misdiagnosed the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525641422, "post_id": 50203011, "comment_id": 87426205, "body": "Could be a bad association, though. But I&#39;ll wait for you to prove that&#39;s the problem by answering my questions before I spend time on that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1525641679, "post_id": 50203011, "comment_id": 87426274, "body": "@that other guy, Not so! There is a standard format: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776391(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>CommandLineToArgv</code></a>"}, {"owner": {"reputation": 109, "user_id": 6454434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f6547cdd34dab8d3c25f8156c2b11f?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Mahajan", "link": "https://stackoverflow.com/users/6454434/parth-mahajan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525671748, "post_id": 50203011, "comment_id": 87432249, "body": "@ikegami As to why i believe there are missing arguments well thats because the script was giving an exit code. The same for all the above formats. Now upon looking into the script i found 3 conditions for that exit code: one is if i passed &#39;help&#39; as an argument, second if the arguments i passed are wrong and result couldn&#39;t be obtained but it works on terminal so that shouldn&#39;t be the case and third if the arguments are incomplete"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525672538, "post_id": 50203011, "comment_id": 87432519, "body": "Ok, so you have no reason to believe it&#39;s not receiving arguments, leaving only your errors. Just remove the single quotes form p3 or p6, as mentioned above."}, {"owner": {"reputation": 109, "user_id": 6454434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f6547cdd34dab8d3c25f8156c2b11f?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Mahajan", "link": "https://stackoverflow.com/users/6454434/parth-mahajan"}, "edited": false, "score": 0, "creation_date": 1525676129, "post_id": 50203011, "comment_id": 87434016, "body": "It started working without the single quotes in both p3 and p6. But the command was being fetched from a db and manipulated by the program. I would have to see why does it work in terminal. But i can work ahead now. Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525699074, "post_id": 50203011, "comment_id": 87447061, "body": "What you call your &quot;terminal&quot; appears to be a unix shell. Java surely uses <code>cmd</code> on Windows. If you want to run a <code>sh</code> command, you will need to run <code>sh</code>."}], "owner": {"reputation": 109, "user_id": 6454434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f6547cdd34dab8d3c25f8156c2b11f?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Mahajan", "link": "https://stackoverflow.com/users/6454434/parth-mahajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525633396, "creation_date": 1525630248, "last_edit_date": 1525633396, "question_id": 50203011, "link": "https://stackoverflow.com/questions/50203011/java-runtime-getruntime-and-process-builder-unable-to-execute-perl-script-with", "title": "Java Runtime.getRuntime() and Process Builder unable to execute perl script with arguments", "body": "<p>I am trying to call a Perl script from a Java program using <code>Runtime.getRuntime().exec()</code>. The Perl script has multiple arguments.</p>\n\n<p>For example:</p>\n\n<pre><code>abc.pl -dt 64 -dir C:\\Projects\\xyz -name pqr -args 'X24 X56'\n</code></pre>\n\n<p>The Perl program is being executed but not receiving all the arguments. This causes the script to throw an error. I have tried the following variations:</p>\n\n<pre><code>Process p1 = Runtime.getRuntime().exec(\"abc.pl -dt 64 -dir C:\\\\Projects\\\\xyz -name pqr -args 'X24 X56'\");\n\nProcess p2 = Runtime.getRuntime().exec(new String[]{\"abc.pl\",\"-dt 64\",\"-dir C:\\\\Projects\\\\xyz\",\"-name pqr\",\"-args 'X24 X56'\"});\n\nProcess p3 = Runtime.getRuntime().exec(new String[]{\"abc.pl\",\"-dt\",\"64\",\"-dir\",\"C:\\\\Projects\\\\xyz\",\"-name\",\"pqr\",\"-args\",\"'X24 X56'\"});\n\nProcessBuilder p4 = new ProcessBuilder(\"abc.pl -dt 64 -dir C:\\\\Projects\\\\xyz -name pqr -args 'X24 X56'\");\n    p4.start();\n\nList&lt;String&gt; cmds = new ArrayList&lt;&gt;();\ncmds.add(\"abc.pl\");\ncmds.add(\"-dt 64\");\ncmds.add(\"-dir C:\\\\Projects\\\\xyz\");\ncmds.add(\"-name pqr\");\ncmds.add(\"-args 'X24 X56'\");\nProcessBuilder p5 = new ProcessBuilder(cmds);\np5.start();\n\nList&lt;String&gt; cmd = new ArrayList&lt;&gt;();\ncmd.add(\"abc.pl\");\ncmd.add(\"-dt\");\ncmd.add(\"64\");\ncmd.add(\"-dir\");\ncmd.add(\"C:\\\\Projects\\\\xyz\");\ncmd.add(\"-name\");\ncmd.add(\"pqr\");\ncmd.add(\"-args\");\ncmd.add(\"'X24 X56'\");\nProcessBuilder p6 = new ProcessBuilder(cmd);\np6.start();\n</code></pre>\n\n<p>The command works perfectly fine on a terminal.</p>\n\n<p>I also tried hard-coding the command in a bash script. When I called the script using <code>Runtime.getRuntime()</code> it worked fine. But the command will be generated by my program and can vary, so this isn't a permanent solution.</p>\n"}, {"tags": ["mysql", "perl", "mariadb", "dbi"], "comments": [{"owner": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1525634528, "post_id": 50202287, "comment_id": 87424180, "body": "Try to add <code>... &#39;user&#39;, &#39;password&#39;, {RaiseError=&gt;1})</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1525638057, "post_id": 50202287, "comment_id": 87425280, "body": "@Michael: That has no effect on the behaviour of the <code>connect</code> call itself; only on subsequent calls on the resultant database handle (when the <code>connect</code> has worked)."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1525680109, "post_id": 50202287, "comment_id": 87435996, "body": "Are you able to manually connect to specifically to <code>localhost</code> running <code>MySQL-client</code> on this device?"}, {"owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "edited": false, "score": 0, "creation_date": 1525719082, "post_id": 50202287, "comment_id": 87458475, "body": "As stated in the question, the connection with the mysql command succeeds.  Adding &#39;- h localhost&#39; has no practical effect, as that is the default host for mysql."}, {"owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "edited": false, "score": 0, "creation_date": 1533835495, "post_id": 50202287, "comment_id": 90504309, "body": "still using DBI 1.641 (current verison), and updating DBD:mysql did not help"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "edited": false, "score": 0, "creation_date": 1525718231, "post_id": 50215521, "comment_id": 87458080, "body": "Perl is generally free form.  Any whitespace between connect and the opening parenthesis is irrelevant.    The code block fails, but it&#39;s no surprise - for one thing, it has &quot;DBNAME&quot; as a literal, but also &quot;DBname&quot; as the value of $database in the $db string.."}], "tags": [], "owner": {"reputation": 46, "user_id": 9564560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ift5f-PZz54/AAAAAAAAAAI/AAAAAAAAA3g/tEs_Rnla2js/photo.jpg?sz=128", "display_name": "Daniel PC", "link": "https://stackoverflow.com/users/9564560/daniel-pc"}, "is_accepted": false, "score": 0, "last_activity_date": 1525699926, "creation_date": 1525699926, "answer_id": 50215521, "question_id": 50202287, "link": "https://stackoverflow.com/questions/50202287/why-wont-this-perl-dbi-dbd-mysql-mariadb-connect-to-locahost-work/50215521#50215521", "title": "Why won&#39;t this Perl DBI/DBD MySQL (MariaDB) connect to locahost work?", "body": "<p>It seems you have a space after the word \"connect\", anyway...try this:</p>\n\n<pre><code>my $driver   = \"mysql\";\nmy $database = \"DBname\";\nmy $ip       = \"localhost\";\nmy $db       = \"DBI:$driver:DBNAME:$ip:database=$database\";\nmy $username = \"mysqluser\";\nmy $password = \"mysqlpass\";\n\nmy $cn = DBI-&gt;connect($db, $username, $password)\n    or print \"Couldn't connect to database: \" . DBI-&gt;errstr . \"\\n\\n\";\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1618696933, "creation_date": 1525625974, "last_edit_date": 1525680278, "question_id": 50202287, "link": "https://stackoverflow.com/questions/50202287/why-wont-this-perl-dbi-dbd-mysql-mariadb-connect-to-locahost-work", "title": "Why won&#39;t this Perl DBI/DBD MySQL (MariaDB) connect to locahost work?", "body": "<pre><code>use DBI;\n\nmy $dbh = DBI-&gt;connect ('DBI:mysql:host=localhost;database=test', 'user', 'password') \n   or die \"failed to connect\\n\";\n</code></pre>\n\n<p>Results in an error message:</p>\n\n<blockquote>\n  <p>DBI connect('host=localhost;database=test','user',...) failed: Can't connect to MySQL server on 'localhost' (10061) at connect.pl line 3.</p>\n</blockquote>\n\n<p>using: <strong>DBI 1.641</strong>, <strong>perl v5.26.2</strong> on <strong>Windows 10</strong> and running <strong>MariaDB 10.2.14</strong></p>\n\n<p>mysqld is running on the computer, and the server can be connected to with the standard \"mysql test -u user -p\" command</p>\n\n<p>On another PC running <strong>Windows 7</strong> with a very similar setup - but with <strong>DBI 1.636</strong> - the connect() succeeds with the same perl code.  Is is possible that <code>DBI:mysql</code> and <strong>Windows 10</strong> aren't compatible?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1525627111, "post_id": 50201820, "comment_id": 87421680, "body": "What does tee program do here? i suspect the tee program never completes."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525643624, "post_id": 50203114, "comment_id": 87426768, "body": "Can you post a link to the bug report?"}, {"owner": {"reputation": 43, "user_id": 9749130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b03c8f216c6438d1c2c8e19e9b97a0?s=128&d=identicon&r=PG&f=1", "display_name": "jackal", "link": "https://stackoverflow.com/users/9749130/jackal"}, "edited": false, "score": 0, "creation_date": 1525682686, "post_id": 50203114, "comment_id": 87437331, "body": "Thanks a lot Dave. Is there an easy way out here? I need to print the threads STDOUT to the console ( read by Hudson later ) and to the logs too and hence used tee !!"}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1525726755, "post_id": 50203114, "comment_id": 87462091, "body": "within the program just write to STDOUT; then outside the program pipe into tee:"}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": true, "score": 7, "last_activity_date": 1525630963, "creation_date": 1525630963, "answer_id": 50203114, "question_id": 50201820, "link": "https://stackoverflow.com/questions/50201820/perl-main-program-waiting-forever/50203114#50203114", "title": "perl main program waiting forever", "body": "<p>This seems to be a bug in perl that was fixed in version 5.14.0. If you really can't install a newer perl (in addition to the system perl), then try to avoid the $tee shared filehandle, which is what is causing the main thread to hang.</p>\n\n<p>Also, your code to wait for the child threads to finish uses an active CPU loop which will burn lots of CPU. If you just want to wait until all child threads are finished, do something like</p>\n\n<pre><code>my @threads;\n...\nfor ... {\n     push @threads, async { ... }\n}\n...\n$_-&gt;join for @threads;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 3, "last_activity_date": 1525637394, "creation_date": 1525637394, "answer_id": 50204077, "question_id": 50201820, "link": "https://stackoverflow.com/questions/50201820/perl-main-program-waiting-forever/50204077#50204077", "title": "perl main program waiting forever", "body": "<blockquote>\n  <p>I am relatively new to perl [\u2026] I used threads.</p>\n</blockquote>\n\n<p>This is your problem.</p>\n\n<p>Perl threads are <em>weird</em>. They have a number of unexpected and undesirable behaviors; in particular, most variables cannot safely be shared between threads, and some modules do not support use in a threaded environment at all. To quote <a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">the <code>threads</code> documentation</a>:</p>\n\n<blockquote>\n  <p>The \"interpreter-based threads\" provided by Perl are not the fast, lightweight system for multitasking that one might expect or hope for. Threads are implemented in a way that make them easy to misuse. Few people know how to use them correctly or will be able to provide help.</p>\n  \n  <p>The use of interpreter-based threads in perl is officially discouraged.</p>\n</blockquote>\n\n<p>For many common applications, the <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> module may be a more appropriate choice.</p>\n"}], "owner": {"reputation": 43, "user_id": 9749130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b03c8f216c6438d1c2c8e19e9b97a0?s=128&d=identicon&r=PG&f=1", "display_name": "jackal", "link": "https://stackoverflow.com/users/9749130/jackal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 50203114, "answer_count": 2, "score": 3, "last_activity_date": 1525637394, "creation_date": 1525623029, "last_edit_date": 1525636820, "question_id": 50201820, "link": "https://stackoverflow.com/questions/50201820/perl-main-program-waiting-forever", "title": "perl main program waiting forever", "body": "<p>I am relatively new to perl and I have written a program to process same operations on set of OS images. Since the operations were same , I used threads. A scaled down version of the program is attached. The problem is , the main program never comes out and wait for ever . On tracing, I see that the main program is waiting on \"tee\" command. Anything I have goofed up here ? </p>\n\n<p>I am on CentOS 6.7 with Perl version 5.1 and I cant move forward because of many other dependencies :(</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse threads;\n\n\nmy $tee_pid= open my $tee, \"|-\", \"tee mylog\";\nmy @images = ( \"image1\" , \"image2\");\n\nforeach my $image (@images){\n$_ = async { do_ops_on_image() };\nsleep ( 60 );\n}\n\nwhile( threads-&gt;list ) {\n    for my $joinable ( threads-&gt;list( threads::joinable ) ) {\n        $joinable-&gt;join;\n    }\n}\nprint \"All thread completed \\n\";\nclose $tee;\n\nsub do_ops_on_image\n{\n  my $time = `date`;\n  my $id = threads-&gt;tid();\n  sleep (120) if ( $id ==2 );\n  print $tee \"my $id started at $time \\n\";\n}\n</code></pre>\n"}, {"tags": ["apache", "perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525621485, "post_id": 50200403, "comment_id": 87419688, "body": "Y&#243;ur <code>$page_max    = int( $page_max ) == $page_max ? $page_max-- : int( $page_max )</code> is strange. It says, &quot;if the variable is an integer then decrement it and then reassign its original value, otherwise remove its fractional part."}, {"owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525630257, "post_id": 50200403, "comment_id": 87422723, "body": "Hello dear Borodin - many thanks for the hint: well- since i am a perl-beginner i try to learn here. I think that i need to rework the code and have to make it more simple -"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "edited": false, "score": 0, "creation_date": 1525630154, "post_id": 50200645, "comment_id": 87422692, "body": "hello dear Borodin, many thanks for the hints. This is very valuable. I am glad. Note: i want to fetch the data from the site <a href=\"http://europa.eu/youth/volunteering/evs-organisation#open\" rel=\"nofollow noreferrer\">europa.eu/youth/volunteering/evs-organisation#open</a> Note - it is just a simple approach to fetches the data from approx 6,000 fields - i am just a beginner in Perl..."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1525616025, "creation_date": 1525616025, "answer_id": 50200645, "question_id": 50200403, "link": "https://stackoverflow.com/questions/50200403/errors-while-debugging-code-using-htmltreebuilderxpath/50200645#50200645", "title": "Errors while debugging code using HTML::TreeBuilder::XPath", "body": "<p>The problem appears to be the block/anonymous hash starting <code>'internal_url'</code>. I can't imagine what you intend there but it is a syntax error and would have no effect if you fixed it</p>\n\n<p>Why are you declaring so many subroutine references like <code>our $iterator_organizations = sub { ... }</code> instead of using standard subroutines? It is a very strange approach</p>\n"}], "owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525622615, "creation_date": 1525614463, "last_edit_date": 1525622615, "question_id": 50200403, "link": "https://stackoverflow.com/questions/50200403/errors-while-debugging-code-using-htmltreebuilderxpath", "title": "Errors while debugging code using HTML::TreeBuilder::XPath", "body": "\n\n<p>I am getting some errors when I try to debug the following code.</p>\n\n<p>Note that it fetches the data from approx 6,000 fields from the <code>http://europa.eu/youth/volunteering/evs-organisation#open</code></p>\n\n<p>After parsing each page, check for the existence of the <code>next \u203a</code> link at the bottom.</p>\n\n<p>View-source is a browser based command. It tells the browser to output the response in plain text rather than render it based on its actual content type, HTML in this case. You should not need to include view-source in your URL.</p>\n\n<p>Here we have a script that extracts the data out of each block and cleans it up a little. The <code>browse</code> function is generic. It takes an input reference which contains the URL and XPaths of the parent and children in order to construct the output ref. It is just  an approach: it does not yet navigate across each page, </p>\n\n<p>In a rough script I tested, I fetched the total results using <code>//span[@class=\"ey_badge\"]</code> then the max page using</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my $page_max = $results / 21;\n$page_max    = int( $page_max ) == $page_max ? $page_max-- : int( $page_max ) ;\n</code></pre>\n\n<p>See the errors</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>martin@linux-3645:~/dev/perl&gt; perl eu.pl\nsyntax error at eu.pl line 81, near \"our \"\nGlobal symbol \"$iterator_organizations\" requires explicit package name at eu.pl line 81.\nCan't use global @_ in \"my\" at eu.pl line 84, near \"= @_\"\nMissing right curly or square bracket at eu.pl line 197, at end of line\nExecution of eu.pl aborted due to compilation errors.\nmartin@linux-3645:~/dev/perl&gt; ^C\nmartin@linux-3645:~/dev/perl&gt;\n</code></pre>\n\n<p>It fetches the data from approx 6,000 fields from <code>http://europa.eu/youth/volunteering/evs-organisation#open</code></p>\n\n<p>See the code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;  \nuse warnings FATAL =&gt; qw#all#;\n\nuse LWP::UserAgent;  \nuse HTML::TreeBuilder::XPath;  \nuse Data::Dumper;  \n\nmy $handler_relurl      = sub { q#https://europa.eu# . $_[0] };  \nmy $handler_trim        = sub { $_[0] =~ s#^\\s*(.+?)\\s*$#$1#r };  \nmy $handler_val         = sub { $_[0] =~ s#^[^:]+:\\s*##r };  \nmy $handler_split       = sub { [ split $_[0], $_[1] ] };  \nmy $handler_split_colon = sub { $handler_split-&gt;( qr#; #, $_[0] ) };  \nmy $handler_split_comma = sub { $handler_split-&gt;( qr#, #, $_[0] ) };  \n\nmy $conf = {  \n    url      =&gt; q#https://europa.eu/youth/volunteering/evs-organisation_en#,  \n    parent   =&gt; q#//div[@class=\"vp ey_block block-is-flex\"]#,  \n    children =&gt; {  \n        internal_url =&gt; [ q#//a/@href#, [ $handler_relurl ] ],  \n        external_url =&gt; [ q#//i[@class=\"fa fa-external-link fa-lg\"]/parent::p//a/@href#, [ $handler_trim ] ],  \n        title        =&gt; [ q#//h4# ],  \n        topics       =&gt; [ q#//div[@class=\"org_cord\"]#, [ $handler_val, $handler_split_colon ] ],  \n        location     =&gt; [ q#//i[@class=\"fa fa-location-arrow fa-lg\"]/parent::p#, [ $handler_trim ] ],  \n        hand         =&gt; [ q#//i[@class=\"fa fa-hand-o-right fa-lg\"]/parent::p#, [ $handler_trim, $handler_split_comma ] ],  \n        pic_number   =&gt; [ q#//p[contains(.,'PIC no')]#, [ $handler_val ] ],  \n    }  \n};  \n\nprint Dumper browse( $conf );  \n\nsub browse {  \n    my $conf = shift;  \n\n    my $ref = [ ];  \n\n    my $lwp_useragent = LWP::UserAgent-&gt;new( agent =&gt; q#IE 6#, timeout =&gt; 10 );  \n    my $response      = $lwp_useragent-&gt;get( $conf-&gt;{url} );  \n    die $response-&gt;status_line unless $response-&gt;is_success;  \n    my $content       = $response-&gt;decoded_content;  \n\n    my $html_treebuilder_xpath = HTML::TreeBuilder::XPath-&gt;new_from_content( $content );  \n    my @nodes = $html_treebuilder_xpath-&gt;findnodes( $conf-&gt;{parent} );\n\n    for my $node ( @nodes ) {  \n        push @$ref, { };   \n\n        while ( my ( $key, $val ) = each %{ $conf-&gt;{children} } ) {  \n            my $xpath    = $val-&gt;[0];  \n            my $handlers = $val-&gt;[1] // [ ];  \n\n            $val = ( $node-&gt;findvalues( qq#.$xpath# ) )[0] // next;  \n            $val = $_-&gt;( $val ) for @$handlers;  \n            $ref-&gt;[-1]-&gt;{$key} = $val;  \n        }  \n    }  \n\n    return $ref;  \n} \n\n{  \n    'internal_url' =&gt; 'https://europa.eu/youth/volunteering/organisation/948417016_en',  \n    'external_url' =&gt; 'http://www.apd.ge',  \n    'location'     =&gt; 'Tbilisi, Georgia',  \n    'title'        =&gt; '\"Academy for Peace and Development\" Union',  \n    'topics'       =&gt; [  \n        'Access for disadvantaged',  \n        'Youth (Participation, Youth Work, Youth Policy)',  \n        'Intercultural/intergenerational education and (lifelong)learning'  \n    ],  \n    'pic_number'   =&gt; '948417016',  \n    'hand'         =&gt; [  \n        'Receiving',  \n        'Sending'  \n    ]  \n} \n\nour $iterator_organizations = sub {  \n    my ( $browser, $parent ) = @_;  \n\n    my $url = q#https://europa.eu/youth/volunteering/evs-organisation_en#;  \n\n    my $nodes = $browser-&gt;nodes( url =&gt; $url );  \n\n    my $iterator = sub {  \n        return shift @$nodes;  \n    };  \n\n    return ( $iterator, 1 );  \n\n\nour $iterator_organizations_b = sub {  \n    my ( $browser, $parent ) = @_;  \n\n    my $url   = q#https://europa.eu/youth/volunteering/evs-organisation_en#;  \n    my $uri   = URI-&gt;new( $url );  \n    my $xpath = q#//div[@class=\"vp ey_block block-is-flex\"]#;  \n    my $nodes = [ ];  \n    my $page  = 0;  \n\n    my $results  = $parent-&gt;{results};  \n    my $page_max = $results / 21;  \n    $page_max    = int($page_max) == $page_max ? $page_max-- : int($page_max);  \n\n    my $iterator_uri = sub {  \n        $uri-&gt;query_form( page =&gt; $page++ );  \n\n        return $page &gt; 2 ? undef : $uri ; # $page_max;  \n    };  \n\n    my $iterator_node = sub {\n\n        unless ( @$nodes ) {\n\n            my $uri = $iterator_uri-&gt;( ) // return undef;  \n\n            my $options = $page == 1 ? { tree =&gt; $parent-&gt;{_node} } : { url =&gt; $uri-&gt;as_string };  \n\n            $nodes = $browser-&gt;nodes( %$options, xpath =&gt; $xpath );  \n        }  \n\n        return shift @$nodes;  \n    };  \n\n    return ( $iterator_node, 0 );  \n};  \n\nour $iterator_organization = sub {  \n    my ( $browser, $parent ) = @_;  \n\n    my $url = $parent-&gt;{internal_url};  \n\n    my $nodes = $browser-&gt;nodes( url =&gt; $url );  \n\n    my $iterator = sub {  \n        return shift @$nodes;  \n    };  \n\n    return ( $iterator, 1 );  \n};  \n\n\nsub organizations {  \n    my ( $self, $options ) = ( shift, { @_ } );  \n\n    my $map = [  \n        $Massweb::Browser::Europa::iterator_organizations,  \n        results       =&gt; q#.//span[@class=\"ey_badge\"]#,  \n        organizations =&gt; [  \n            $Massweb::Browser::Europa::iterator_organizations_b,  \n            internal_url =&gt; [ q#.//a/@href#, $Massweb::Browser::Europa::handler_url ],  \n            external_url =&gt; [ q#.//i[@class=\"fa fa-external-link fa-lg\"]/parent::p//a/@href#, $Massweb::Browser::handler_trim ],  \n            title        =&gt; q#.//h4#,  \n            topics       =&gt; [ q#.//div[@class=\"org_cord\"]#, $Massweb::Browser::handler_val, $Massweb::Browser::handler_list_colon ],  \n            location     =&gt; [ q#.//i[@class=\"fa fa-location-arrow fa-lg\"]/parent::p#, $Massweb::Browser::handler_trim ],  \n            hand         =&gt; [ q#.//i[@class=\"fa fa-hand-o-right fa-lg\"]/parent::p#, $Massweb::Browser::handler_trim, $Massweb::Browser::handler_list_comma ],  \n            pic_number   =&gt; [ q#.//p[contains(.,'PIC no')]#, $Massweb::Browser::handler_val ],  \n            recruiting   =&gt; [ q#boolean(.//i[@class=\"fa fa-user-times fa-lg\"])#, $Massweb::Browser::handler_bool_rev ],  \n            _            =&gt; \\&amp;organization,  \n        ],  \n    ];  \n\n    my $organizations = $self-&gt;browse( map =&gt; $map );  \n\n    return $organizations;  \n}  \n\nsub organization {  \n    my ( $self, $options ) = ( shift, { @_ } );  \n\n    my $map = [  \n        sub { $Massweb::Browser::Europa::iterator_organization-&gt;( $_[0], $options ) },  \n       #title       =&gt; q#.//h1#,  \n        description =&gt; q#.//div[@class=\"ey_vp_detail_page\"]/p#,  \n    ];  \n\n    my $organization = $self-&gt;browse( map =&gt; $map );  \n\n    return $organization;  \n}\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 2, "creation_date": 1525606503, "post_id": 50199095, "comment_id": 87414999, "body": "<code>cmp</code> returns 1 when left argument is greater than right one. Is the problem somewhere inside <code>version-&gt;parse</code>?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1525607007, "post_id": 50199095, "comment_id": 87415139, "body": "I think the problem is that <code>15.8</code> is interpreted as <code>15.800000</code> whereas <code>15.8.1</code> is interpreted as <code>15.008001</code>. You should convert <code>15.8</code> to the more modern format: <code>15.8.0</code>"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525612992, "post_id": 50199095, "comment_id": 87416874, "body": "@H&#229;konH&#230;gland:Isn&#39;t there a way to achieve what I want without changing the version format?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1525619547, "post_id": 50199095, "comment_id": 87418982, "body": "@Jim Maybe. But why not just loop through <code>@versions</code> before the <code>sort</code> and fix it up?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525624398, "post_id": 50199095, "comment_id": 87420695, "body": "@H&#229;konH&#230;gland: You mean convert <code>15.8</code> to <code>15.8.0</code> and sort? I could and it would work but I find that doing that is complicating things a bit. Check here and comments for what I am trying to do and using <code>version</code> <a href=\"https://stackoverflow.com/questions/50123655/pipe-to-perl-for-sort-and-pipe-to-other-command/50126113#50126113\" title=\"pipe to perl for sort and pipe to other command\">stackoverflow.com/questions/50123655/&hellip;</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525625844, "post_id": 50199095, "comment_id": 87421220, "body": "@Jim I am not sure how it would complicate, but anyway you do not need to preprocess the list if that is the problem. You could also define a sub like <code>sub fixup { $_[0] =~ s&#47;^[^.]*\\.[^.]*\\K$&#47;.0&#47;r }</code> and then do <code>version-&gt;parse( fixup($a) ) cmp version-&gt;parse( fixup($b) )</code> in the <code>sort</code> sub.  `"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525626855, "post_id": 50199095, "comment_id": 87421579, "body": "@H&#229;konH&#230;gland: I know that <code>$1 $2 etc</code> capture groups but what is <code>.0</code> and how does that regex work?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525627351, "post_id": 50199095, "comment_id": 87421766, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170482/discussion-between-hakon-haegland-and-jim\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1525613072, "post_id": 50199445, "comment_id": 87416906, "body": "Hm but that is not what I have as versions. Is the only option to preprocess <code>15.8</code> to make it <code>15.8.0</code>?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1525608030, "creation_date": 1525608030, "answer_id": 50199445, "question_id": 50199095, "link": "https://stackoverflow.com/questions/50199095/why-is-the-version-sort-order-reversed/50199445#50199445", "title": "Why is the version sort order reversed?", "body": "<p>The <a href=\"https://metacpan.org/pod/version#How-to-parse()-a-version\" rel=\"nofollow noreferrer\">documentation for <code>version</code></a> has this</p>\n\n<blockquote>\n  <p>Dotted-decimal: bare v-strings (v1.2.3) and strings with more than one decimal point and a leading 'v' (\"v1.2.3\"); NOTE you can technically use a v-string or strings with a leading-v and only one decimal point (v1.2 or \"v1.2\"), but you will confuse both yourself and others</p>\n</blockquote>\n\n<p>The problem is that <code>15.8</code> parses as <code>v5.800.0</code> whereas <code>15.8.1</code> becomes <code>v15.8.1</code></p>\n\n<p>You can read more of relevance at <a href=\"https://metacpan.org/pod/distribution/version/lib/version/Internals.pod\" rel=\"nofollow noreferrer\"><code>version::Internals</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 8173111, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eAM9tY1VW7o/AAAAAAAAAAI/AAAAAAAABrw/o8_PAxf6rvI/photo.jpg?sz=128", "display_name": "Sven Kirmess", "link": "https://stackoverflow.com/users/8173111/sven-kirmess"}, "is_accepted": false, "score": 0, "last_activity_date": 1526484023, "creation_date": 1526484023, "answer_id": 50374654, "question_id": 50199095, "link": "https://stackoverflow.com/questions/50199095/why-is-the-version-sort-order-reversed/50374654#50374654", "title": "Why is the version sort order reversed?", "body": "<p>You can just add a <code>v</code> in front of your version.</p>\n\n<pre><code>chomp(my @versions = &lt;&gt;);\nmy @sorted_versions = sort {\n    version-&gt;parse( \"v$a\" ) cmp version-&gt;parse( \"v$b\" )\n} @versions;\nprint \"$_\\n\" for @sorted_versions;\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1526484023, "creation_date": 1525605613, "last_edit_date": 1525609915, "question_id": 50199095, "link": "https://stackoverflow.com/questions/50199095/why-is-the-version-sort-order-reversed", "title": "Why is the version sort order reversed?", "body": "<p>I have the following code to sort version numbers:  </p>\n\n<pre><code>chomp(my @versions = &lt;&gt;);  \nmy @sorted_versions = sort {  \n                        version-&gt;parse( $a ) cmp version-&gt;parse( $b )\n                    } @versions;  \nprint \"$_\\n\" for @sorted_versions;  \n</code></pre>\n\n<p>If I pipe the following file:  </p>\n\n<pre><code>cat version_file   \n15.8  \n15.8.1  \n</code></pre>\n\n<p>The output is:  </p>\n\n<pre><code>15.8.1  \n15.8  \n</code></pre>\n\n<p>Why? It should have been:  </p>\n\n<pre><code>15.8  \n15.8.1  \n</code></pre>\n\n<p>I have checked that the <code>cmp</code> returns 1 when running the script</p>\n"}, {"tags": ["perl", "file", "symlink"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525594509, "post_id": 50197553, "comment_id": 87412010, "body": "Perl is not an acronym."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525594531, "post_id": 50197553, "comment_id": 87412017, "body": "<code>$file = abs_path($file);</code> should be <code>$file = &quot;$targetDir&#47;$file&quot;;</code>. I don&#39;t have time to look for more problems right now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1525594598, "post_id": 50197553, "comment_id": 87412036, "body": "Why do you keep using <code>&quot;$file&quot;</code> instead of <code>$file</code>?"}, {"owner": {"reputation": 307, "user_id": 2469123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50eab86c80410f6b3ae5a61d763a19c0?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2469123/john-doe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525594727, "post_id": 50197553, "comment_id": 87412081, "body": "@ikegami: Because, once I have this simple test working, I plan to expand it to recurse directories, where some paths may contain spaces, and, since I&#39;m relatively new to Perl, I thought it safer to quote $file in case it contains spaces (or other characters) that might cause confusion."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525594774, "post_id": 50197553, "comment_id": 87412096, "body": "@JohnDoe There&#39;s nothing &quot;unsafe&#39; about spaces. <code>$file</code> is just a variable; it can contain any string it wants. Perl is not the shell; it does not evaluate commands by repeated text substitution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525594899, "post_id": 50197553, "comment_id": 87412123, "body": "@John Doe, What are you talking about? The only difference bewteen <code>-l &quot;$file&quot;</code> and <code>-l $file</code> is the the first makes a needless copy of the value of <code>$file</code>."}, {"owner": {"reputation": 307, "user_id": 2469123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50eab86c80410f6b3ae5a61d763a19c0?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2469123/john-doe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525622885, "post_id": 50197553, "comment_id": 87420155, "body": "@ikegami: Thanks for clarifying this.  I&#39;ve been a programmer for a long time in other languages, but I haven&#39;t used Perl since its early versions, years ago, so I am by no means an expert when it comes to Perl.  So, I was stuck in a mode of thinking in terms of how BASH expands values and forgetting how Perl handles scalar assignments."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 2469123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50eab86c80410f6b3ae5a61d763a19c0?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2469123/john-doe"}, "edited": false, "score": 0, "creation_date": 1525623655, "post_id": 50197641, "comment_id": 87420424, "body": "Great explanation.  I was previously using a variable as a filehandle.  I changed to bareword filehandle grasping at straws.  Regarding the quotes, I was stuck thinking in terms of BASH expansion and anticipating having paths containing spaces and non-alphanumeric characters (needed a mind shift).  I assign $_ to $file (1) for readability, as the script will be greatly expanded and the current file will be accessed a lot in the final script, and (2) because I will eventually also be performing operations on both raw-listed symlinks and the files pointed to (separately stored)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 307, "user_id": 2469123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50eab86c80410f6b3ae5a61d763a19c0?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2469123/john-doe"}, "edited": false, "score": 0, "creation_date": 1525628607, "post_id": 50197641, "comment_id": 87422131, "body": "@JohnDoe Assigning <code>$_</code> to <code>$file</code> does not increase readability if you can just cut out <code>$_</code> and read into <code>$file</code> in the first place."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 7, "last_activity_date": 1525595048, "last_edit_date": 1592644375, "creation_date": 1525594690, "answer_id": 50197641, "question_id": 50197553, "link": "https://stackoverflow.com/questions/50197553/why-does-perl-file-test-operator-l-not-detect-symlinks/50197641#50197641", "title": "Why does Perl file test operator &quot;-l&quot; not detect symlinks?", "body": "<p><a href=\"https://metacpan.org/pod/Cwd#abs_path1\" rel=\"noreferrer\"><code>perldoc Cwd</code></a>:</p>\n<blockquote>\n<p><strong>abs_path</strong></p>\n<pre><code>my $abs_path = abs_path($file);\n</code></pre>\n<p>Uses the same algorithm as getcwd(). <strong>Symbolic links</strong> and relative-path components (&quot;.&quot; and &quot;..&quot;) <strong>are resolved</strong> to return the canonical pathname, just like realpath(3). On error returns <code>undef</code>, with <code>$!</code> set to indicate the error.</p>\n</blockquote>\n<p>(Emphasis mine.)</p>\n<p>If you want to see symlinks, don't use <code>abs_path</code>.</p>\n<p>What you want to do instead is</p>\n<pre><code>$file = &quot;$targetDir/$file&quot;;\n</code></pre>\n<p>i.e. prepend the name of the directory you read <code>$file</code> from.</p>\n<hr />\n<p>Additional notes:</p>\n<pre><code>opendir(DIR, $targetDir) || die &quot;Can't open $targetDir: $!&quot;;\n\nwhile (readdir DIR) {\n    my $file = &quot;$_&quot;;\n</code></pre>\n<p>should be</p>\n<pre><code>opendir(my $dh, $targetDir) || die &quot;Can't open $targetDir: $!&quot;;\n\nwhile (my $file = readdir $dh) {\n</code></pre>\n<ul>\n<li>Why use bareword filehandles when you can just use normal variables (that are scoped properly)?</li>\n<li>There's no reason to quote <code>&quot;$_&quot;</code> here.</li>\n<li>Why first assign to <code>$_</code> when you're just going to copy the string to <code>$file</code> in the next step?</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 2469123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50eab86c80410f6b3ae5a61d763a19c0?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2469123/john-doe"}, "edited": false, "score": 0, "creation_date": 1525622965, "post_id": 50197652, "comment_id": 87420182, "body": "&quot;The only reason your program worked without it is because $targetDir happened to be the current work directory.&quot;  Yes, I did notice this after I posted my question last night.  Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1525594813, "creation_date": 1525594813, "answer_id": 50197652, "question_id": 50197553, "link": "https://stackoverflow.com/questions/50197553/why-does-perl-file-test-operator-l-not-detect-symlinks/50197652#50197652", "title": "Why does Perl file test operator &quot;-l&quot; not detect symlinks?", "body": "<blockquote>\n  <p><em>Note in the above output that the symlink (named \"symlink\") is not listed while the file, \"regular_file,\" is listed twice</em></p>\n</blockquote>\n\n<p>Yeah, because you used <code>abs_path</code> to turn <code>symlink</code> into <code>/temp2/test/regular_file</code>. Get rid of that line.</p>\n\n<hr>\n\n<p>By the way, you are missing</p>\n\n<pre><code>$file = \"$targetDir/$file\";\n</code></pre>\n\n<p>The only reason your program worked without it is because <code>$targetDir</code> happened to be the current work directory.</p>\n"}], "owner": {"reputation": 307, "user_id": 2469123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50eab86c80410f6b3ae5a61d763a19c0?s=128&d=identicon&r=PG", "display_name": "John Doe", "link": "https://stackoverflow.com/users/2469123/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 50197641, "answer_count": 2, "score": 4, "last_activity_date": 1525595048, "creation_date": 1525594112, "last_edit_date": 1525594816, "question_id": 50197553, "link": "https://stackoverflow.com/questions/50197553/why-does-perl-file-test-operator-l-not-detect-symlinks", "title": "Why does Perl file test operator &quot;-l&quot; not detect symlinks?", "body": "<p>Why does the Perl file test operator \"-l\" fail to detect symlinks under the following conditions?</p>\n\n<p><strong>System Info</strong></p>\n\n<pre><code>john@testbed-LT:/temp2/test$ uname -a\nLinux Apophis-LT 4.13.0-37-generic #42-Ubuntu SMP Wed Mar 7 14:13:23 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\njohn@testbed-LT:/temp2/test$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 17.10\nRelease:        17.10\nCodename:       artful\n</code></pre>\n\n<p><strong>Perl Info</strong></p>\n\n<pre><code>john@testbed-LT:/temp2/test$ perl -v\n\nThis is perl 5, version 26, subversion 0 (v5.26.0) built for x86_64-linux-gnu-thread-multi (with 56 registered patches, see perl -V for more detail)\n</code></pre>\n\n<p><strong>Test Resources</strong></p>\n\n<pre><code>john@testbed-LT:/temp2/test$ touch regular_file\njohn@testbed-LT:/temp2/test$ mkdir dir\njohn@testbed-LT:/temp2/test$ ln -s regular_file symlink\n\njohn@testbed-LT:/temp2/test$ ls -al\ntotal 12\ndrwxrwxr-x 3 john john 4096 May  6 02:29 .\ndrwxrwxrwx 6 john john 4096 May  6 02:29 ..\ndrwxrwxr-x 2 john john 4096 May  6 02:29 dir\n-rw-rw-r-- 1 john john    0 May  6 02:29 regular_file\nlrwxrwxrwx 1 john john   12 May  6 02:29 symlink -&gt; regular_file\n</code></pre>\n\n<p><strong>Script Containing Failing \"-l\" Operator</strong></p>\n\n<pre><code>john@testbed-LT:/temp2/test$ cat ~/.scripts/test.pl\n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Cwd 'abs_path';\n\nmy $targetDir = \"/temp2/test\";\nopendir(DIR, $targetDir) || die \"Can't open $targetDir: $!\";\n\nwhile (readdir DIR) {\n    my $file = \"$_\";\n\n    if($file =~ m/^\\.{1,2}/) {\n        next;\n    }\n\n    $file = abs_path($file);\n\n    if(-l \"$file\") {\n        print \"Link: $file\\n\";\n    }\n    elsif(-d \"$file\") {\n        print \"Dir: $file\\n\";\n    }\n    elsif(-f \"$file\") {\n        print \"File: $file\\n\";\n    }\n    else {\n        print \"\\n\\n *** Unhandled file type for file [$file]!\\n\\n\";\n        exit 1;\n    }\n}\n\nclosedir(DIR);\n</code></pre>\n\n<p><strong>Script Output</strong></p>\n\n<pre><code>john@testbed-LT:/temp2/test$ perl ~/.scripts/test.pl\nFile: /temp2/test/regular_file\nDir: /temp2/test/dir\nFile: /temp2/test/regular_file\n</code></pre>\n\n<p><strong>Problem I'm Trying to Solve</strong></p>\n\n<p>Note in the above output that the symlink (named \"symlink\") is not listed while the file, \"regular_file,\" is listed twice (I want \"symlink\" listed -- the actual link and <strong>not</strong> the file it points to).</p>\n\n<p>When I change <code>... if(-l \"$file\") ...</code> to <code>... if(lstat \"$file\") ...</code> in the script, again \"symlink\" is not listed while \"regular_file\" is listed twice, but they are being listed from within the block meant to catch symlinks, <em>i.e.</em>:</p>\n\n<pre><code>john@testbed-LT:/temp2/test$ perl ~/.scripts/test.pl\nLink: /temp2/test/regular_file\nLink: /temp2/test/dir\nLink: /temp2/test/regular_file\n</code></pre>\n\n<p><strong>Goal</strong></p>\n\n<p>The output I'm trying to achieve (<strong><em>which is faked below -- not actually generated by the script, but by hand</em></strong>) is:</p>\n\n<pre><code>john@testbed-LT:/temp2/test$ perl ~/.scripts/test.pl\nFile: /temp2/test/regular_file\nDir: /temp2/test/dir\nLink: /temp2/test/symlink\n</code></pre>\n\n<p>...but not necessarily in that order (I don't care about the order of the listing).</p>\n\n<p>Why is the above-shown script not achieving the above-stated goal (why is the \"-l\" operator not working)?</p>\n"}, {"tags": ["perl", "awk", "text-processing"], "comments": [{"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "edited": false, "score": 5, "creation_date": 1525589163, "post_id": 50196693, "comment_id": 87410828, "body": "You will get a much more friendly reception and much better help here if you show what code you have tried so far and describe what problems you were having with it. Without code, your question looks like a request for free consulting and many people don&#39;t like that."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": -1, "last_activity_date": 1525595004, "creation_date": 1525595004, "answer_id": 50197675, "question_id": 50196693, "link": "https://stackoverflow.com/questions/50196693/how-to-search-the-first-and-last-occurrence-from-the-sample-list/50197675#50197675", "title": "How to search the first and last occurrence from the sample list", "body": "<p>Here is an example in Perl:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'log.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy %jobs;\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    next if $line !~ /job/;\n    my ($date, $job ) = $line =~ /^(.*?)\\s*Program:\\s*(job.*?):/;\n    if (exists $jobs{$job}) {\n        $jobs{$job}-&gt;{end} = $date;\n    }\n    else {\n        $jobs{$job}-&gt;{start} = $date;\n    }\n}\nclose $fh;\n\nfor my $job (sort keys %jobs) {\n    say join \", \", $job, $jobs{$job}-&gt;{start}, $jobs{$job}-&gt;{end};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1986, "user_id": 4023950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9f9W1.jpg?s=128&g=1", "display_name": "\u03b1\u0493s\u043d\u03b9\u03b7", "link": "https://stackoverflow.com/users/4023950/%ce%b1%d2%93s%d0%bd%ce%b9%ce%b7"}, "is_accepted": true, "score": 0, "last_activity_date": 1525597767, "creation_date": 1525597767, "answer_id": 50198059, "question_id": 50196693, "link": "https://stackoverflow.com/questions/50196693/how-to-search-the-first-and-last-occurrence-from-the-sample-list/50198059#50198059", "title": "How to search the first and last occurrence from the sample list", "body": "<p>You could do with <code>awk</code> and here I'm just showing how you can get first and last occurrences of each job.</p>\n\n<pre><code>awk '!first[$6]{ first[$6]=$4 } { last[$6]=$4 } \n    END{ for (x in last) print x, first[x], last[x] }' OFS=', ' infile\njob-a:, 19:07:47, 19:08:01\njob-b:, 19:07:48, 19:07:51\njob-c:, 20:33:52, 20:45:56\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4720352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712d5d2ea4e896bcf21dde2f319d5960?s=128&d=identicon&r=PG&f=1", "display_name": "Saravanan K", "link": "https://stackoverflow.com/users/4720352/saravanan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1525608577, "accepted_answer_id": 50198059, "answer_count": 2, "score": -1, "last_activity_date": 1525608530, "creation_date": 1525586319, "last_edit_date": 1525608530, "question_id": 50196693, "link": "https://stackoverflow.com/questions/50196693/how-to-search-the-first-and-last-occurrence-from-the-sample-list", "closed_reason": "Needs more focus", "title": "How to search the first and last occurrence from the sample list", "body": "\n\n<p>I have a log from my application like below as an example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{Fri Mar 16 19:07:47 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:07:47 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:07:48 Program: job-b: &lt;blah&gt;&lt;blah&gt;\nFri Mar 16 19:07:48 Program: job-b: &lt;blah&gt;&lt;blah&gt;\nFri Mar 16 19:07:50 Program: job-b: &lt;blah&gt;&lt;blah&gt;\nFri Mar 16 19:07:51 Program: job-b: &lt;blah&gt;&lt;blah&gt;\nFri Mar 16 19:07:52 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:07:52 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:07:53 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:07:54 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:07:55 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:08:00 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 19:08:01 Program: job-a: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 20:33:52 Program: job-c: &lt;blah&gt;&lt;blah&gt; \nFri Mar 16 20:45:56 Program: job-c: &lt;blah&gt;&lt;blah&gt;}\n</code></pre>\n\n<p>For each Job name (<code>job-a</code>, <code>job-b</code>, <code>job-c</code>) in this case, I need to find the first and last occurrences of the line to identify the start and end times.</p>\n\n<p>i.e. I need to output the program/job name, start_time and end_time as shown in my sample output below. I have shown the expected output as comma separated, but I don't really care about the delimiter as I'm only interested in the values. Ignore the curly braces at the beginning and end in the sample input/output.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>job-a, Fri Mar 16 19:07:47, Fri Mar 16 19:08:01\njob-b, Fri Mar 16 19:07:48, Fri Mar 16 19:07:51\njob-c, Fri Mar 16 20:33:52, Fri Mar 16 20:45:56\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1525578199, "post_id": 50195993, "comment_id": 87409111, "body": "It&#39;s a slightly analog solution, but is there any reason you can&#39;t just copy the text &quot;&lt;whateverreplace&gt;&quot; and put it into the <code>@storedContent</code> array? Any <code>$1</code>, etc references will get interpolated appropriately, just as they did in the replacement string."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1525582439, "post_id": 50195993, "comment_id": 87409674, "body": "It seems from your code that  <code>&lt;whateverreplace&gt;</code> is just a constant. Why do you need to put it in the array?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1525582917, "post_id": 50195993, "comment_id": 87409749, "body": "Also note thtat the <code>$&amp;</code> in the <code>push</code> will only push the <i>last</i> value substituted by the previous <code>g</code> (global) substitution. All other substitutions will be discarded. Please clarify your question"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1525589967, "post_id": 50195993, "comment_id": 87410981, "body": "@H&#229;konH&#230;gland: yes exactly I got only the last value. But I need whole replacing contents."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525609273, "post_id": 50195993, "comment_id": 87415777, "body": "@ssr1012: Please don&#39;t add politeness like <i>please</i> to a question if the OP doesn&#39;t provide it themselves."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525628560, "post_id": 50195993, "comment_id": 87422121, "body": "@Borodin: I will follow"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1525583595, "creation_date": 1525583595, "answer_id": 50196446, "question_id": 50195993, "link": "https://stackoverflow.com/questions/50195993/how-to-push-the-two-values-find-and-replace/50196446#50196446", "title": "How to push the two values &quot;find&quot; and &quot;replace&quot;", "body": "<p><code>s///</code> returns the number of substitutions, so you could do this:</p>\n\n<pre><code>push @storedContent,\n    ('&lt;whateverfind&gt;   &lt;whateverreplace&gt;') x $string =~ s/&lt;whateverfind&gt;/&lt;whateverreplace&gt;/g;\n</code></pre>\n\n<p>If you want to do it dynamically:</p>\n\n<pre><code>$string =~ s/&lt;whateverfind&gt;/\n    my $r = \"&lt;whateverreplace&gt;\";\n    push @storedContent, \"$&amp;   $r\";\n    $r\n/eg;\n</code></pre>\n\n<p>Note that using <code>$&amp;</code> entails a performance penalty on all regexes in your program in older perls, so you might want to use explicit captures instead:</p>\n\n<pre><code>$string =~ s/(&lt;whateverfind&gt;)/\n    my $r = \"&lt;whateverreplace&gt;\";\n    push @storedContent, \"$1   $r\";\n    $r\n/eg;\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50196446, "answer_count": 1, "score": -2, "last_activity_date": 1525609368, "creation_date": 1525577142, "last_edit_date": 1525609368, "question_id": 50195993, "link": "https://stackoverflow.com/questions/50195993/how-to-push-the-two-values-find-and-replace", "title": "How to push the two values &quot;find&quot; and &quot;replace&quot;", "body": "<pre><code>my @storedContent = ();\nmy $string = \"some content are stored....\";\n\n$string=~s/&lt;whateverfind&gt;/&lt;whateverreplace&gt;/gs &amp;&amp; push @storedContent, $&amp;;\n\nprint join \"\\n\", @storedContent; #printing just &lt;whateverfind&gt;\n</code></pre>\n\n<p>I need to store the found and corresponding replaced strings in an array.</p>\n\n<p>my expected output is:</p>\n\n<pre><code>&lt;whateverfind&gt;     &lt;whateverreplace&gt;\n....\n....\n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["perl", "yaml"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1525579835, "post_id": 50195812, "comment_id": 87409289, "body": ".text.lines is a hash (<code>{}</code>) in your data structure, but what are the keys? what are the values? You clearly want an array (<code>[]</code>) there instead."}, {"owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1525584182, "post_id": 50195812, "comment_id": 87409934, "body": "Make it an answer so I can accept it @mwp"}], "answers": [{"tags": [], "owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "is_accepted": false, "score": 0, "last_activity_date": 1525610125, "creation_date": 1525610125, "answer_id": 50199761, "question_id": 50195812, "link": "https://stackoverflow.com/questions/50195812/serialize-yaml-document-from-perl-data-structure/50199761#50199761", "title": "Serialize YAML document from Perl data structure", "body": "<p>This isn't a YAML problem; <code>lines</code> should map to an arrayref, not a hashref:</p>\n\n<pre><code>text =&gt; {\n     lines =&gt; { # this is an hashref, so\n     {\n         offset =&gt; 0,\n         length =&gt; 1\n     }, # this is a hash key, and gets stringified: \"HASH(0x4d1df38)\"\n     {\n         offset =&gt; 1,\n         length =&gt; 5,\n     }, # and this is a hash value\n     {\n         offset =&gt; 6,\n         length =&gt; 7,\n     }, # this is a key, also stringified: \"HASH(0x4d1b840)\"\n     {\n         offset =&gt; 13,\n         length =&gt; 13,\n     }, # and this is a value...\n     {\n         offset =&gt; 26,\n         length =&gt; 1,\n     }\n     }\n  }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1525610705, "last_edit_date": 1525610705, "creation_date": 1525610385, "answer_id": 50199801, "question_id": 50195812, "link": "https://stackoverflow.com/questions/50195812/serialize-yaml-document-from-perl-data-structure/50199801#50199801", "title": "Serialize YAML document from Perl data structure", "body": "<p>The Perl data structure you are using doesn't correspond to the YAML data that you require. It is only by chance that it compiles at all, and you must have seen a warning</p>\n\n<blockquote>\n  <p>Odd number of elements in anonymous hash</p>\n</blockquote>\n\n<p>when you execute your code. Please don't ignore warnings, especially when asking for help with your code</p>\n\n<p>In YAML, the <code>lines</code> element is an array, whereas your Perl data has it as a hash. You need to replace the braces <code>{ ... }</code> with square brackets <code>[...]</code></p>\n\n<p>I also suggest that you avoid <code>YAML::Dump</code>, which is a miconceived hack of the <code>YAML::Tiny</code> module. <code>YAML::XS</code> is the preferred Perl implementation of YAML, and is a binding for the excellent <code>libyaml</code> library</p>\n"}], "owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 50199801, "answer_count": 2, "score": 0, "last_activity_date": 1525631159, "creation_date": 1525574645, "last_edit_date": 1525579501, "question_id": 50195812, "link": "https://stackoverflow.com/questions/50195812/serialize-yaml-document-from-perl-data-structure", "title": "Serialize YAML document from Perl data structure", "body": "<p>I'm attempting to print out a YAML document from a data structure, in particular, an array of hashes, which is what I think YAML::dump returns. Here's the Perl code I'm using to build a YAML document and serialize it.</p>\n\n<pre><code>my @tagobj_header_table =\n{\ncore =&gt; {\n    type =&gt; $tagobj_type,\n    size =&gt; $tagobj_size,\n    blob =&gt; $tagobj_blob,\n},\ntext =&gt; {\n     lines =&gt; {\n     {\n         offset =&gt; 0,\n         length =&gt; 1\n     },\n     {\n         offset =&gt; 1,\n         length =&gt; 5,\n     },\n     {\n         offset =&gt; 6,\n         length =&gt; 7,\n     },\n     {\n         offset =&gt; 13,\n         length =&gt; 13,\n     },\n     {\n         offset =&gt; 26,\n         length =&gt; 1,\n     }\n     }\n  }\n};\n\nmy $dumper = YAML::Dumper-&gt;new;\nmy $tagobj_contents = $dumper-&gt;dump(@tagobj_header_table);\nprint $tagobj_contents;\n</code></pre>\n\n<p>Here's what I want the YAML document to look like, with some Perl string substitutions.</p>\n\n<pre><code>---\ncore:\n    type: $tagobj_type\n    size: $tagobj_size\n    blob: $tagobj_blob\ntext:\n    lines:\n        - offset: 0\n          length: 1\n        - offset: 1\n          length: 5\n        - offset: 6\n          length: 7\n        - offset: 13\n          length: 13\n        - offset: 26\n          length: 1\n</code></pre>\n\n<p>The following is the output of the console.</p>\n\n<pre><code>---\ncore:\n    blob: build\\content\\objects\\36d80951814b5f08c7ba34cd7a5459b4c212ee6200ce247ac2a13d24b2fc0d57\n    size: 31\n    type: blob/text\ntext:\n    lines:\n        HASH(0x4d1b840):\n            length: 13\n            offset: 13\n        HASH(0x4d1df38):\n            length: 5\n            offset: 1\n        HASH(0x4d1eee8): ~\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1525568424, "last_edit_date": 1525568424, "creation_date": 1525568037, "answer_id": 50195333, "question_id": 50195216, "link": "https://stackoverflow.com/questions/50195216/pad-bytes-to-number/50195333#50195333", "title": "Pad bytes to number", "body": "<pre><code>sprintf \"%32d\",  $length  # Padded with spaces\nsprintf \"%032d\", $length  # Padded with zeroes\n</code></pre>\n\n<p>If it doesn't need to be a text format, use the following:</p>\n\n<pre><code>pack 'N',  $length   # 32-bit unsigned int (4 bytes) in BE byte order.\npack 'Q&gt;', $length   # 64-bit unsigned int (8 bytes) in BE byte order.\n</code></pre>\n\n<p>If you take this approach, you can combine everything:</p>\n\n<pre><code>print $SOCK pack 'N/a*', $encoder-&gt;encode($data);  # Or Q&gt;/a*\n</code></pre>\n"}], "owner": {"reputation": 714, "user_id": 9548334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d38d443db14d79a06637b26463b17736?s=128&d=identicon&r=PG&f=1", "display_name": "als9xd", "link": "https://stackoverflow.com/users/9548334/als9xd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 50195333, "answer_count": 1, "score": 1, "last_activity_date": 1525568424, "creation_date": 1525566549, "last_edit_date": 1525568187, "question_id": 50195216, "link": "https://stackoverflow.com/questions/50195216/pad-bytes-to-number", "title": "Pad bytes to number", "body": "<p>I'm trying to work on seperating TCP socket messages between a server and client. The way I'm trying to do this is by starting each message with 4 bytes which contains an integer describing the size of the message. The problem is I don't know how to pad that integer with the extra bytes to make it's size 4 bytes. I am on windows.</p>\n\n<p>Also the server is written in node but I think I have that side of the equation figured out.</p>\n\n<p>Here is some of my code if it helps:</p>\n\n<pre><code>    $data = JSON-&gt;new-&gt;utf8-&gt;encode({test=&gt;123});\n    print $OUTPUT_SOCKET length(encode('UTF-8', $data)); # This needs to be 4 bytes\n    print $OUTPUT_SOCKET $data\n</code></pre>\n"}, {"tags": ["mysql", "perl", "localhost", "cgi", "dbi"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1525529318, "post_id": 50189178, "comment_id": 87397451, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12408795/mysql-connection-not-working-from-within-perl-cgi-script?rq=1\" title=\"mysql connection not working from within perl cgi script\">stackoverflow.com/questions/12408795/&hellip;</a>"}, {"owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1525529867, "post_id": 50189178, "comment_id": 87397593, "body": "@Tanktalus no it&#39;s not the same error... I am using Mac OS High Sierra and Apache2 as server. Still don&#39;t know what the problem is, thank you anyways!"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1525532080, "post_id": 50189178, "comment_id": 87398308, "body": "Have you checked the error log if something was logged there?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525539872, "post_id": 50189178, "comment_id": 87400825, "body": "Is the web server using the same copy of perl as you use from the command line? Is it possible that there is no <code>DBD::mysql</code> installed for the server? I suggest that you add <code>use DBD::mysql</code> to the top of the file. If the driver is unavailable then your code will die immediately instead of waiting until <code>DBI</code> tries to autoload it."}, {"owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525596197, "post_id": 50189178, "comment_id": 87412446, "body": "@Borodin The error_log file from Apache displays 4 errors, all related to DBD::mysql, so I guess it is because I have the module in my terminal but not configured for Apache. I tried use DBD::mysql as you said but then I get 500 Internal Server Error and the error_log shows <code>AH01215: Can&#39;t locate DBD&#47;mysql.pm in @INC (you may need to install the DBD::mysql module)</code>. Don&#39;t know what else to try, but thank you for your help!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525606621, "post_id": 50189178, "comment_id": 87415029, "body": "By the way, the content type should be <code>text&#47;plain</code>, not <code>text&#47;html</code>: you&#39;re not generating HTML."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "edited": false, "score": 0, "creation_date": 1525610305, "post_id": 50199189, "comment_id": 87416064, "body": "ok thank you for your answer I will try it now! Last thing is, how do I install the driver in Perl? (This is a university project and I have never used Perl, so I think it is easy to update my Perl version with the new modules, but sorry for my misunderstanding...) Thank you!!!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "edited": false, "score": 0, "creation_date": 1525610950, "post_id": 50199189, "comment_id": 87416247, "body": "I don&#39;t know. As I said, you appear to be running different instances of perl on your command line and on the server. You need to get to a place where the latter is the default, and issue <code>cpan DBD::mysql</code>, but I have no idea if that is even possible because I have no knowledge of your system structure."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1525606659, "last_edit_date": 1525606659, "creation_date": 1525606343, "answer_id": 50199189, "question_id": 50189178, "link": "https://stackoverflow.com/questions/50189178/dbi-connect-working-when-executed-in-terminal-but-not-when-executed-from-browse/50199189#50199189", "title": "DBI-&gt;connect working when executed in terminal but not when executed from browser", "body": "<p>From your final comment it is as I suspected: the perl that the server is using simply doesn't have <code>DBD::mysql</code> installed, whereas your command-line perl does</p>\n\n<p>Simply get that driver module installed on the server and all should be well</p>\n\n<p>Note that is doesn't need to be \"configured for Apache\", it is simply that the copy of perl that is used by the CGI code doesn't have that module</p>\n\n<p>By the way, the content type should be <code>text/plain</code>, not <code>text/html</code>: you're not generating HTML</p>\n"}], "owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525620822, "creation_date": 1525521531, "last_edit_date": 1525620822, "question_id": 50189178, "link": "https://stackoverflow.com/questions/50189178/dbi-connect-working-when-executed-in-terminal-but-not-when-executed-from-browse", "title": "DBI-&gt;connect working when executed in terminal but not when executed from browser", "body": "<p>I am writing a CGI program that prints a database query result in the browser. The script looks like this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DBI;\n\nprint \"Content-type: text/html\\n\\n\";\n\nmy $driver   = \"mysql\";\nmy $database = \"DBname\";\nmy $ip       = \"127.0.0.1\";\nmy $db       = \"DBI:$driver:DBNAME:$ip:database=$database\";\nmy $username = \"user\";\nmy $password = \"pass\";\n\nprint \"Connecting ...\";\n\nmy $connection = DBI-&gt;connect($db, $username, $password)\n    or print \"Couldn't connect to database: \" . DBI-&gt;errstr . \"\\n\\n\";\n\nprint \"Successful connection\\n\";\n\nmy $query = $connection-&gt;prepare(\"SELECT id FROM table\");\n\n$query-&gt;execute() or die $DBI::errstr;\n\nwhile ( my @row = $query-&gt;fetchrow_array() ) {\n    my ($id) = @row;\n    print \"ID = $id \\n\";\n}\n\n$query-&gt;finish();\n</code></pre>\n\n<p>Well, my problem is that when I run it from terminal using</p>\n\n<pre><code>perl test.cgi\n</code></pre>\n\n<p>it works fine, and I get the print results properly. The CGI script is located in <code>/Library/Webserver/CGI-Executables/</code> and it is configured by default /cgi-bin/ in <code>/etc/apache2/httpd.conf</code></p>\n\n<p>If I execute it via the web browser, I just get the first print <code>Connecting</code> and nothing else, not even the <code>or print</code> from <code>DBI-&gt;connect</code>. I have been trying to realize what the error is, but I am unable to get a useful solution.</p>\n"}, {"tags": ["perl", "attributes", "moo"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8559625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876a093c5b69ad7e681fa4c1c7d55012?s=128&d=identicon&r=PG&f=1", "display_name": "felima", "link": "https://stackoverflow.com/users/8559625/felima"}, "edited": false, "score": 0, "creation_date": 1525547761, "post_id": 50189587, "comment_id": 87403341, "body": "Thank you, you&#39;re totally right. I found this explanation in Moose &#39;has is&#39; option: &quot;If you need more control over how your accessors are named, you can use the reader, writer and accessor options inherited from Class::MOP::Attribute, however if you use those, you won&#39;t need the is option&quot;. So Moo seems to work the same way."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1525524248, "creation_date": 1525524248, "answer_id": 50189587, "question_id": 50187573, "link": "https://stackoverflow.com/questions/50187573/does-setting-a-writer-name-for-a-moo-read-only-attribute-make-it-read-write/50189587#50189587", "title": "Does setting a writer name for a Moo read-only attribute make it read-write?", "body": "<p>I think this is intended behavior and not a bug. As soon as you create a writer with <code>writer =&gt; 'set_surname'</code> the attribute is no longer read-only in the sense that you can now modify it through the writer. If you want a private writer and a public reader you could put an underscore in front of the name of the writer to indicate that it is internal to the class:</p>\n\n<pre><code>has surname =&gt; (\n    is      =&gt; 'ro',\n    reader  =&gt; 'get_surname',\n    writer  =&gt; '_set_surname',\n);\n</code></pre>\n\n<p>Putting an underscore in front of a method name is the common way in Perl to give a hint to the user that an attribute is intended for private use only. </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1525568465, "last_edit_date": 1525568465, "creation_date": 1525556822, "answer_id": 50194299, "question_id": 50187573, "link": "https://stackoverflow.com/questions/50187573/does-setting-a-writer-name-for-a-moo-read-only-attribute-make-it-read-write/50194299#50194299", "title": "Does setting a writer name for a Moo read-only attribute make it read-write?", "body": "<p>Yes, because <code>is</code> doesn't make anything read-only; it simply creates an accessor.</p>\n\n<ul>\n<li><code>is =&gt; 'rw'</code> is just a shortcut for <code>accessor =&gt; 'attribute_name'</code>.</li>\n<li><code>is =&gt; 'ro'</code> is just a shortcut for <code>reader =&gt; 'attribute_name'</code>.</li>\n</ul>\n\n<p>If you specify a <code>writer</code>, you will be able to write to the attribute, even if you used <code>is =&gt; 'ro'</code>.</p>\n\n<p>If I want a public reader and a private/protected writer, I use</p>\n\n<pre><code>has surname =&gt; (\n    reader =&gt; 'get_surname',\n    writer =&gt; '_set_surname',\n);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>has surname =&gt; (\n    reader =&gt; 'surname',\n    writer =&gt; '_set_surname',\n);\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8559625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876a093c5b69ad7e681fa4c1c7d55012?s=128&d=identicon&r=PG&f=1", "display_name": "felima", "link": "https://stackoverflow.com/users/8559625/felima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1525568465, "creation_date": 1525510449, "question_id": 50187573, "link": "https://stackoverflow.com/questions/50187573/does-setting-a-writer-name-for-a-moo-read-only-attribute-make-it-read-write", "title": "Does setting a writer name for a Moo read-only attribute make it read-write?", "body": "<p>I'm studying Moo and bumped into this basic question.\nIf I set an accessor or a writer name for a read-only attribute the attribute becomes writable. Do accessors or writers imply that the attribute is writable even if it's set to read-only (is => 'ro')?</p>\n\n<p>Here is the Class code:</p>\n\n<pre><code>#!/home/fl/perl5/perlbrew/perls/perl-5.26.1/bin/perl\npackage MooPerson;\nuse Moo;\nuse namespace::clean;\n\nhas firstname =&gt; (\n    is     =&gt; 'rw',\n    reader =&gt; 'get_firstname',\n    writer =&gt; 'set_firstname',\n);\n\nhas surname =&gt; (\n    is      =&gt; 'ro',\n    reader  =&gt; 'get_surname',\n    writer  =&gt; 'set_surname',\n);\n\nsub get_fullname {\n    my ($self) = @_;\n    my $firstname = $self-&gt;get_firstname;\n    my $surname   = $self-&gt;get_surname;\n    return \"$firstname $surname\";\n}\n1;\n</code></pre>\n\n<p>Object code:</p>\n\n<pre><code>#!/home/fl/perl5/perlbrew/perls/perl-5.26.1/bin/perl\nuse lib 'lib';\nuse MooPerson;\nuse feature 'say';\nuse strict;\nuse warnings;\n\nsay \"new object person\";\nmy $person = MooPerson-&gt;new(\n    firstname =&gt; 'Homer',\n    surname   =&gt; 'Simpson',\n);\n\nsay \"person-&gt;get_firstname: \" . $person-&gt;get_firstname();\nsay \"person-&gt;get_surname: \" . $person-&gt;get_surname();\n\nsay \"\\nchange firstname and surname\";\n$person-&gt;set_firstname('Aristotle');\n$person-&gt;set_surname('Amadopolis');\n\nsay \"person-&gt;get_firstname: \" . $person-&gt;get_firstname();\nsay \"person-&gt;get_surname: \" . $person-&gt;get_surname();\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>fl@dancertest:~/perltest$ ./firstMoo.pl\nnew object person\nperson-&gt;get_firstname: Homer\nperson-&gt;get_surname: Simpson\n\nchange firstname and surname\nperson-&gt;get_firstname: Aristotle\nperson-&gt;get_surname: Amadopolis\n</code></pre>\n\n<p>The same behavior occurs when I use accessor.\n(is => 'ro') only works if I use the auto generated accessor name, in this case \"surname\".</p>\n\n<p>Is it an intended behavior or a bug?</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525484599, "post_id": 50184880, "comment_id": 87387036, "body": "this question has other syntax examples:  <a href=\"https://stackoverflow.com/questions/12535408/perl-how-do-i-retrieve-an-array-from-a-hash-of-arrays\" title=\"perl how do i retrieve an array from a hash of arrays\">stackoverflow.com/questions/12535408/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1525496469, "post_id": 50184915, "comment_id": 87388626, "body": "It wouldn&#39;t be much different without autovivification: <code>push @{ $h{$year} &#47;&#47;= {} }, $val;</code>"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 1, "last_activity_date": 1525484461, "creation_date": 1525484461, "answer_id": 50184915, "question_id": 50184880, "link": "https://stackoverflow.com/questions/50184880/perl-creation-of-hash-where-values-are-array/50184915#50184915", "title": "perl creation of hash where values are array", "body": "<p>You should read about <a href=\"https://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\" rel=\"nofollow noreferrer\"><code>autovivification</code></a>:</p>\n\n<pre><code>#!perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper; \n\nmy %h;\nwhile (my $line = &lt;DATA&gt;) {\n  chomp $line;\n  my ($val, $year) = split /\\s+/, $line;\n\n  push @{$h{$year}}, $val;\n}\n\nprint Dumper \\%h;\n# $VAR1 = {                   \n#          '1901' =&gt; [       \n#                      'a1', \n#                      'a2'  \n#                    ],      \n#          '1902' =&gt; [       \n#                      'a3', \n#                      'a4'  \n#                    ],      \n#          '1903' =&gt; [       \n#                      'a5', \n#                      'a6'  \n#                    ]       \n#        };                  \n__DATA__\na1 1901 score1\na2 1901 score2\na3 1902 score3\na4 1902 score4\na5 1903 score6\na6 1903 score7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1525680067, "creation_date": 1525680067, "answer_id": 50209592, "question_id": 50184880, "link": "https://stackoverflow.com/questions/50184880/perl-creation-of-hash-where-values-are-array/50209592#50209592", "title": "perl creation of hash where values are array", "body": "<p>So, the next step was to find the row corresponding to max score, I wrote something like this. This gets me per year wise what is the max score but I am unable to fetch the index of the calculated max so that I can use that to print the corresponding values in column 1.\nFor example: if for the year 1901 score2 is max, then I want to print</p>\n\n<pre><code>a2 1901 score2\n</code></pre>\n\n<p>But with my current code I can only print</p>\n\n<pre><code>1901 score2\n\nuse strict;\nuse warnings;\nuse List::Util qw( min max );\nuse Data::Dumper;\nmy $file=shift;\nopen (DATA, $file);\nmy %h1;\nmy @tmp;\nmy $max_value;\nmy $a;\nmy $b;\nwhile (my $line = &lt;DATA&gt;) {\n  chomp $line;\n  my ($val, $year, $score) = split /\\s+/, $line;\n  push @{$h1{$year}}, $val;\n  push @{$h1{$year}}, $score;\n}\nforeach my $x (sort keys %h1)\n{\n        foreach (@{$h1{$x}})\n        {\n                if ($_=~/^[0-9]/)\n                {\n                        push @tmp, $_;\n                }\n$max_value= max @tmp;\n        }\n        print \"$x\\t$max_value\\n\";\n}\nprint Dumper \\%h1;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 50184915, "answer_count": 2, "score": -1, "last_activity_date": 1525680067, "creation_date": 1525484016, "question_id": 50184880, "link": "https://stackoverflow.com/questions/50184880/perl-creation-of-hash-where-values-are-array", "title": "perl creation of hash where values are array", "body": "<p>I have a file in the following format</p>\n\n<pre><code>a1 1901 score1\na2 1901 score2\na3 1902 score3\na4 1902 score4\na5 1903 score6\na6 1903 score7\n</code></pre>\n\n<p>I want to create a hash of every year and the values in the first column corresponding to this year as an array (which means year as key of the hash and the values in first column as array of values). \nHow to do this using perl..</p>\n"}, {"tags": ["postgresql", "perl", "dbi", "perlbrew", "dbd-pg"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525463895, "post_id": 50182243, "comment_id": 87381843, "body": "If your tests are meant to figure out if you can safely upgrade your database, I would not recommend using a different Perl version, as that would falsify your test results."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1525465037, "post_id": 50182243, "comment_id": 87382364, "body": "Are the drivers backwards compatible? If so, you could reinstall DBD::Pg using the newer drivers, using the 10 drivers for both DB"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 1, "creation_date": 1525493800, "post_id": 50182243, "comment_id": 87388275, "body": "Yes, the best solution is to use PostgreSQL v10 on the client side to connect to both 9.3 and v10 servers. The 9.3 client should also work, though. PostgreSQL is pretty good with version interoperability."}], "owner": {"reputation": 83, "user_id": 4103723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee11dbda96390ab7b7a3875ad821cc12?s=128&d=identicon&r=PG&f=1", "display_name": "Adina", "link": "https://stackoverflow.com/users/4103723/adina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1589821263, "creation_date": 1525463775, "last_edit_date": 1589821263, "question_id": 50182243, "link": "https://stackoverflow.com/questions/50182243/how-do-i-connect-to-different-versions-of-postgres-using-dbdpg-on-one-system", "title": "How do I connect to different versions of Postgres using DBD::Pg on one system", "body": "<p>My production system uses Postgres 9.3 and Perl; I have a test Postgres 10.3 database that I'd like to run the same Perl scripts against to make sure that everything works. </p>\n\n<p>I'm using Perl <code>DBI</code> and <code>DBD::Pg</code> to connect to the databases. I'm logging client and server versions in the scripts so that I always know what's being used. </p>\n\n<p>On the production system, my log will say something like: </p>\n\n<pre><code>lib_version=90310, server_version=90310\n</code></pre>\n\n<p>When I run the same script against the test version, it says:</p>\n\n<pre><code>lib_version=90310, server_version=100300\n</code></pre>\n\n<p>How do I get <code>DBD::Pg</code> to use the Postgres 10 libraries? I remember having to configure <code>DBD::Pg</code> with some Postgres libraries when I first installed it; can I have multiple configurations for <code>DBD::Pg</code>? I'm using Perlbrew, so I could use that to set up a different version of Perl and then reinstall all of my modules to the different version; that would be a pain, but it's possible. </p>\n\n<p>Edited: The point here is that I want to test a pure Postgres 10.3 environment without messing up the test system that needs to be in sync with the production Postgres 9.3 system. If it's not possible to have one machine use different clients, then I will have to set up a new test system. </p>\n"}, {"tags": ["html", "perl", "localhost", "apache2", "cgi"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1525454289, "post_id": 50180115, "comment_id": 87377319, "body": "This is a question about Apache configuration, so it belongs on <a href=\"https://serverfault.com\">Server Fault</a>.  Go back over the Apache docs on enabling CGI <i>very carefully</i>.  Clearly you have missed a step."}, {"owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1525454532, "post_id": 50180115, "comment_id": 87377447, "body": "@JimGarrison I don&#39;t have that module &quot;LoadModule cgid_module modules/mod_cgid.so&quot;, but I think I don&#39;t need it because I didn&#39;t build my Apache with shared module support. If not, I don&#39;t know what can it be."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1525454608, "post_id": 50180115, "comment_id": 87377490, "body": "Did you build in CGI support as a static module? Is that even possible?  Without CGI support <i>somewhere</i> in the system it won&#39;t execute CGI programs."}, {"owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1525454704, "post_id": 50180115, "comment_id": 87377534, "body": "Well I don&#39;t know, enabling that module is just for that kind of installation. Also I am using Apache2 in Mac OS High Sierra, so I don&#39;t have the same directories as the ones shown in the tutorial from Apache. Don&#39;t know if that supposes any problem..."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1525454764, "post_id": 50180115, "comment_id": 87377560, "body": "Again, this question belongs on <a href=\"https://serverfault.com\">Server Fault</a>.  Be sure to include all the information you provided in the comments as well."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1525481595, "post_id": 50180115, "comment_id": 87386614, "body": "Which operating system? Some Unix/Linux? The file is executable? But I agree, <a href=\"https://serverfault.com/\">Server Fault</a> or even better <a href=\"https://superuser.com/\">Super User</a> is a better place for this question."}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "is_accepted": false, "score": 0, "last_activity_date": 1525522254, "creation_date": 1525522254, "answer_id": 50189272, "question_id": 50180115, "link": "https://stackoverflow.com/questions/50180115/cgi-script-displayed-as-plain-text-in-apache2-localhost/50189272#50189272", "title": "CGI Script displayed as Plain Text in Apache2 (localhost)", "body": "<p>The problem was the directory configuration, so I kept the default http.config file, that has a preset ScriptAlias for the /cgi-bin/ directory to the following directory:</p>\n\n<blockquote>\n  <p>/Library/WebServer/CGI-Executables</p>\n</blockquote>\n\n<p>Then I enabled the CGI Module by uncommenting the line (removing the '#' before the line) in the httpd.conf file from apache2:</p>\n\n<blockquote>\n  <p>LoadModule cgi_module libexec/apache2/mod_cgi.so</p>\n</blockquote>\n\n<p>Finally I saved the file, and then I restarted the Apache2 server using the command:</p>\n\n<blockquote>\n  <p>sudo /usr/sbin/apachectl restart</p>\n</blockquote>\n\n<p>Then I just pasted the .cgi script in the CGI-Executables directory, setting the permissions of the file as <strong>chmod a+x</strong>.</p>\n\n<p>To run the script now you just have to access </p>\n\n<blockquote>\n  <p>localhost/cgi-bin/script.cgi</p>\n</blockquote>\n\n<p>Thank you for the help anyways!</p>\n"}], "owner": {"reputation": 403, "user_id": 9705070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiPKG.jpg?s=128&g=1", "display_name": "alvarobartt", "link": "https://stackoverflow.com/users/9705070/alvarobartt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 716, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525522254, "creation_date": 1525454245, "last_edit_date": 1525454339, "question_id": 50180115, "link": "https://stackoverflow.com/questions/50180115/cgi-script-displayed-as-plain-text-in-apache2-localhost", "title": "CGI Script displayed as Plain Text in Apache2 (localhost)", "body": "<p>I currently have to do a web server in Apache2 that consists on a Login/Register web, and I have to call a CGI Script to validate the input data from the user. Well, when I call the script with the submit button, the CGI Script appears as Plain Text, and I don't know what else to do to fix it.</p>\n\n<p>I have tried uncommenting CGI Modules in /etc/apache2/httpd.conf, setting a default directory for CGI Scripts, uncommenting the AddHandler for CGI and changing Options values in my localhost directory and in the CGI directory adding ExecCGI in them all. But it still does not work, it just appears as plain text.</p>\n\n<p>P.S.: I followed this tutorial (<a href=\"http://httpd.apache.org/docs/2.2/howto/cgi.html\" rel=\"nofollow noreferrer\">http://httpd.apache.org/docs/2.2/howto/cgi.html</a>) and also looked for the solution here in StackOverflow, but I got nothing working for me.</p>\n\n<p>Edit: Also thank you for helping if you do :)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1525455874, "post_id": 50180042, "comment_id": 87378106, "body": "Input from <code>&lt;&gt;</code> comes either from standard input, or from each file listed on the command line. See <a href=\"http://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">perlop</a> for more information. The position of declaring <code>my @array</code> does not make a difference though, so approach 2 and 3 are identical. Approach 1 will be indentical to 2 and 3 if there is no arguments in <code>@ARGV</code> (that is on the command line)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525455929, "post_id": 50180042, "comment_id": 87378137, "body": "There is no <i>best pattern</i>. One of the core ideas behind Perl is that <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">there is more than one way to do it</a>. Often one of several possible ways is more suited for a specific use case, because it&#39;s faster, shorter, easier to read or easier to maintain. All of those have merit. If you&#39;re just beginning your journey into programming, use the way that feels most comfortable for you, and make sure you are consistent. The rest will come with time. :)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525458013, "post_id": 50180626, "comment_id": 87379166, "body": "@melpomene, That&#39;s not exactly right either. Basically, <code>@ARGV</code> isn&#39;t expected to be a list of file names so much as a list of arguments to pass to 2-arg <code>open</code>, which means it can be <code>gunzip -c foo.gz |</code> or <code>-</code> . I was keeping things simple. <a href=\"https://pastebin.com/UxG0hjdw\" rel=\"nofollow noreferrer\">Example</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525461680, "post_id": 50180626, "comment_id": 87380875, "body": "But primarily, I didn&#39;t want to promote this misfeature. All programs should probably use <a href=\"http://search.cpan.org/perldoc?ARGV::readonly\" rel=\"nofollow noreferrer\">ARGV::readonly</a> or similar for security purposes. In Linux, you can use <code>&#47;proc&#47;self&#47;fd&#47;0</code>, and there are also shell features you can use (assuming you&#39;re in some odd situation where you can&#39;t simply leave out <code>-</code>)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525463049, "post_id": 50180626, "comment_id": 87381472, "body": "Oh, that&#39;s a fun module. If you <code>use</code> it twice by accident, it&#39;ll break your <code>@ARGV</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525465640, "post_id": 50180626, "comment_id": 87382654, "body": "@melpomene, The guts could have been placed at the top level instead of in <code>import</code>, but this way the module can be loaded without triggering the behaviour. A flag could prevent it from &quot;escaping&quot; twice, but I don&#39;t really see the need. The feature I see as missing is the ability to perform the &quot;escaping&quot; at runtime. This would allow runtime use of <code>GetOptions</code>, for example. That can be done using <code>use ARGV::readonly qw( ); ... ARGV::readonly-&gt;import(); ...</code>, but that&#39;s not clean. Simple to fix the module in a backwards compatible way, though"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1525457013, "last_edit_date": 1525457013, "creation_date": 1525456465, "answer_id": 50180626, "question_id": 50180042, "link": "https://stackoverflow.com/questions/50180042/input-from-stdin-to-array/50180626#50180626", "title": "Input from STDIN to array", "body": "<p>The first reads from <code>STDIN</code> instead of <code>ARGV</code>. <code>ARGV</code> is a \"magical\" handle that reads from each of the files listed in <code>@ARGV</code> in turn, or from <code>STDIN</code> if <code>@ARGV</code> is empty.</p>\n\n<p>The last two are identical.</p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525457013, "creation_date": 1525453957, "last_edit_date": 1525456606, "question_id": 50180042, "link": "https://stackoverflow.com/questions/50180042/input-from-stdin-to-array", "title": "Input from STDIN to array", "body": "<p>All of the following seem to work. But are the equivalent?  </p>\n\n<p>Approach 1:  </p>\n\n<pre><code>chomp(my @array = &lt;STDIN&gt;); \n</code></pre>\n\n<p>Approach 2:  </p>\n\n<pre><code>my @array;  \nchomp(@array = &lt;&gt;);   \n</code></pre>\n\n<p>Approach 3:  </p>\n\n<pre><code>chomp(my @array = &lt;&gt;);  \n</code></pre>\n"}, {"tags": ["perl", "cpan"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 6, "last_activity_date": 1525450398, "creation_date": 1525450398, "answer_id": 50179195, "question_id": 50179133, "link": "https://stackoverflow.com/questions/50179133/how-do-i-fix-the-undefined-subroutine-main-error/50179195#50179195", "title": "How do I fix the undefined subroutine main error", "body": "<p>A quote from the docs:</p>\n\n<blockquote>\n  <p>This function is not exported by default, but exportable.</p>\n</blockquote>\n\n<p>Try:</p>\n\n<pre><code>my $res = Unix::Passwd:File::get_max_uid();\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>use Unix::Passwd:File qw(get_max_uid);\n</code></pre>\n"}], "owner": {"reputation": 232, "user_id": 4265700, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-gavhKqqAPk8/AAAAAAAAAAI/AAAAAAAAAV4/coZuZEf6_Jc/photo.jpg?sz=128", "display_name": "Aitor Ramos Pajares", "link": "https://stackoverflow.com/users/4265700/aitor-ramos-pajares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 50179195, "answer_count": 1, "score": 1, "last_activity_date": 1585253008, "creation_date": 1525450174, "last_edit_date": 1585253008, "question_id": 50179133, "link": "https://stackoverflow.com/questions/50179133/how-do-i-fix-the-undefined-subroutine-main-error", "title": "How do I fix the undefined subroutine main error", "body": "<p>I am using the CPAN <a href=\"https://metacpan.org/pod/Unix::Passwd::File\" rel=\"nofollow noreferrer\">Unix::Passwd::File</a> module, and when a I use any of its functions, the script throws the error: <code>Undefined subroutine &amp;main</code></p>\n\n<p>For example, for get the max uid:</p>\n\n<pre><code>#!/urs/bin/perl\nuse Unix::Passwd:File;\n\nmy $res = get_max_uid();\n</code></pre>\n\n<p>the error is <code>Undefined subroutine &amp;main::get_max_uid called at scriptname.pl line 4</code></p>\n"}, {"tags": ["perl", "ipc"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525445865, "post_id": 50177534, "comment_id": 87372829, "body": "You&#39;ll have to show the code where you <i>&quot;read on several Worker Scripts [sic]&quot;</i>."}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525446591, "post_id": 50177534, "comment_id": 87373309, "body": "I store all the <code>logreader</code> and <code>errorreader</code> pipes together with a <code>IO::Select</code> Object for each Worker Process in an <code>HASH</code> to execute a <code>IO::Select::can_read()</code> on them."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525447016, "post_id": 50177534, "comment_id": 87373600, "body": "Why are you using global variables all over the place? Are you not using <code>use strict; use warnings;</code>?"}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1525448137, "post_id": 50177534, "comment_id": 87374286, "body": "I do use <code>use strict; use warnings;</code>. yes the pipes are global to the Master Script <code>master.pl</code> as to come back to them to do the reading."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525448185, "post_id": 50177534, "comment_id": 87374308, "body": "[Only read the title] Keep in mind that the end of pipe handle is only closed once both the parent and child close their copy of the handle."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525448228, "post_id": 50177534, "comment_id": 87374329, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! I see numerous scoping errors and other errors caught by this."}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1525449331, "post_id": 50177534, "comment_id": 87374884, "body": "if the pipe is not closed and at <code>master.pl</code> I read <code>pipe (8): transmission done.</code> and I cannot read the message from Child Process <code>closing transmission ...</code> I must call it a <b>broken</b> pipe. Even the intent to read further after <code>transmission done</code> leads to <b>dead lock</b>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1525452984, "post_id": 50177534, "comment_id": 87376717, "body": "Please provide a minimal, <i>runnable</i> demonstration of the problem. (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1525601529, "post_id": 50177534, "comment_id": 87413753, "body": "Now I built the Master Script master.pl and run it with perl v5.24.1 . But with this Test Script I could not reproduce the Error of the Broken Pipe. But even in the Real World Application it sometimes happens and sometimes not. I developped this Application on a System with perl v5.10 and from 4 Processes 3 run and 1 breaks. Especially if it does a sleep call. I still keep wondering under which circumstances could a Pipe break?"}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1527613566, "post_id": 50177534, "comment_id": 88188392, "body": "I wonder if the Pipes could break if the Worker Script <code>hello.pl</code> would be another Master Script <code>master.pl</code> which I was discarting because the <code>hello.pl</code> Script has its own address space."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1527613201, "post_id": 50223148, "comment_id": 88188222, "body": "the Phenomenon that I am observing is that <code>sysread()</code> returns <code>0</code>. Therefore the <code>master.pl</code> Script writes <code>pipe (8): transmission done.</code> when the <code>hello.pl</code> Script starts to execute the System Command. The expected Behaviour is that the <code>IO::Select::can_read()</code> would time-out while the <code>hello.pl</code> Script is sleeping."}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1527615519, "post_id": 50223148, "comment_id": 88189274, "body": "According to the Test Script how would look your <code>Check()</code> Sub Routine when <code>my $ifinishpid = waitpid($rprocess-&gt;{&quot;pid&quot;}, WNOHANG);</code> would return in <code>$ifinishpid</code> another value"}, {"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 0, "creation_date": 1527616069, "post_id": 50223148, "comment_id": 88189552, "body": "Additionally the official Linux System Documentation according to <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/waitpid.2.html</a> explains &quot;<b>wait() and waitpid()</b>:        The wait() system call suspends execution of the calling thread until        one of its children terminates.  The call <code>wait(&amp;wstatus)</code> <i>is        equivalent to</i>:            <code>waitpid(-1, &amp;wstatus, 0);</code> &quot; There would be no difference in the System Behaviour"}], "tags": [], "owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "is_accepted": false, "score": 0, "last_activity_date": 1525730884, "creation_date": 1525730884, "answer_id": 50223148, "question_id": 50177534, "link": "https://stackoverflow.com/questions/50177534/why-do-pipes-from-child-processes-break-sometimes-and-sometimes-not/50223148#50223148", "title": "Why do Pipes from Child Processes break sometimes and sometimes not?", "body": "<p>I think you have to use <code>wait</code> and not <code>waitpid</code>.  <code>wait</code> waits for any child while <code>waitpid</code> only waits on one specific child.</p>\n"}, {"comments": [{"owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "edited": false, "score": 1, "creation_date": 1527837086, "post_id": 50623164, "comment_id": 88285805, "body": "I am sorry if you dont like my answer but it is what actually happened. Now that I know the Answer obviously I could change my Question to fit the Answer or provide another testing script to demonstrate the Phenomenon. But since I know now the Answer already I dont need to ask the Question anymore. Yes, that is how Real World Problems are like."}], "tags": [], "owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "is_accepted": true, "score": 0, "last_activity_date": 1527836778, "last_edit_date": 1527836778, "creation_date": 1527765793, "answer_id": 50623164, "question_id": 50177534, "link": "https://stackoverflow.com/questions/50177534/why-do-pipes-from-child-processes-break-sometimes-and-sometimes-not/50623164#50623164", "title": "Why do Pipes from Child Processes break sometimes and sometimes not?", "body": "<p>Since nobody could give me any useful Answer or even Hint in 1 month I will post what I have found out about the Phenomenon of the <strong>Broken Pipe</strong> in order to help others that might face a similar problem.</p>\n\n<hr>\n\n<p>Finally I could track down the Phenomenon of the <strong>Broken Pipe</strong>.<br />\nI added long enough sleeping time that would let me track the System Activity with the <code>strace</code> Command and it actually documents the <strong>Broken Pipe</strong> Error:</p>\n\n<pre><code>$ strace -p 11729\nProcess 11729 attached\nrestart_syscall(&lt;... resuming interrupted call ...&gt;) = 0\nwrite(1, \"hello script!!\\nhello waiting 20 \"..., 67) = 67\npipe([3, 4])                            = 0\npipe([5, 6])                            = 0\nclone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7fe670d5f9d0) = 13238\nclose(6)                                = 0\nclose(4)                                = 0\nread(5, \"\", 4)                          = 0\nclose(5)                                = 0\nioctl(3, SNDCTL_TMR_TIMEBASE or SNDRV_TIMER_IOCTL_NEXT_DEVICE or TCGETS, 0x7fff334b57b0) = -1 EINVAL (Invalid argument)\nlseek(3, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(3, \"total 228K\\ndrwxr-xr-x.  4 usr15 \"..., 4096) = 1868\nread(3, \"\", 4096)                       = 0\nclose(3)                                = 0\nrt_sigaction(SIGHUP, {SIG_IGN, [], SA_RESTORER, 0x7fe66f8e27e0}, {SIG_DFL, [], 0}, 8) = 0\nrt_sigaction(SIGINT, {SIG_IGN, [], SA_RESTORER, 0x7fe66f8e27e0}, {SIG_DFL, [], 0}, 8) = 0\nrt_sigaction(SIGQUIT, {SIG_IGN, [], SA_RESTORER, 0x7fe66f8e27e0}, {SIG_DFL, [], 0}, 8) = 0\nwait4(13238, [{WIFEXITED(s) &amp;&amp; WEXITSTATUS(s) == 0}], 0, NULL) = 13238\n--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=13238, si_status=0, si_utime=0, si_stime=0} ---\nrt_sigaction(SIGHUP, {SIG_DFL, [], SA_RESTORER, 0x7fe66f8e27e0}, NULL, 8) = 0\nrt_sigaction(SIGINT, {SIG_DFL, [], SA_RESTORER, 0x7fe66f8e27e0}, NULL, 8) = 0\nrt_sigaction(SIGQUIT, {SIG_DFL, [], SA_RESTORER, 0x7fe66f8e27e0}, NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nnanosleep({30, 0}, 0x7fff334b5b90)      = 0\nwrite(2, \"HELLO ERROR 1 !\\n\", 16)       = -1 EPIPE (Broken pipe)\n--- SIGPIPE {si_signo=SIGPIPE, si_code=SI_USER, si_pid=11729, si_uid=501} ---\n+++ killed by SIGPIPE +++\n</code></pre>\n\n<p>It documents as supposed that the <code>hello.pl</code> completes correctly and ends writing the Error Message <code>write(2, \"HELLO ERROR 1 !\\n\", 16)       = -1</code><br/>\nBut it finds that the Pipe is broken, causing an Error <code>EPIPE (Broken pipe)</code> which causes it to crash with <code>+++ killed by SIGPIPE +++</code></p>\n\n<p>So the Answer to the Question<br />\n<em>Under which circumstances could a Pipe break?</em>\nis</p>\n\n<ul>\n<li>If the <strong>forked Child Process was already terminated</strong>.</li>\n</ul>\n\n<p><em>But why couldn't I read the Output before the Pipe is broken ?</em></p>\n\n<p>The Phenomenon of the <strong>Cut Output</strong></p>\n\n<pre><code>    cmd: './hello.pl'\n    cmd rng ...\n    pipe (8): transmission done.\n</code></pre>\n\n<ul>\n<li>results from a combination of <code>print()</code> in the forked Child Process\nand the <code>sysread()</code> in the Parent Process.<br /> The Output is\nactually buffered on the Child side and finally written to the Parent\nside.</li>\n</ul>\n\n<p><em>Why should the Child Process be terminated before receiving the Output?</em></p>\n\n<ul>\n<li>This comes from a Combination with Objecthood in the actual\nReal World Application which implements the <code>Object::DESTROY</code>\nMethod.<br /> This Method includes a <code>kill()</code> Cleanup Logic for still\nrunning Child Processes which theoretically should not be triggered.<br />\nBut in a Real World Application the Processes are not inmediately\nread and reaped what causes them to be killed by the\n<code>Object::DESTROY</code> Logic.<br />But I cannot find anthing of this in the Execution Log because it Object was already destroyed by <em>Perl's Garbage Collector</em>.</li>\n</ul>\n\n<p>Therefore some Processes get killed but others not. And sometimes they get killed but other times not.</p>\n"}], "owner": {"reputation": 185, "user_id": 7774231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmzCR.jpg?s=128&g=1", "display_name": "Bodo Hugo Barwich", "link": "https://stackoverflow.com/users/7774231/bodo-hugo-barwich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 50623164, "answer_count": 2, "score": 0, "last_activity_date": 1527836778, "creation_date": 1525444892, "last_edit_date": 1525507602, "question_id": 50177534, "link": "https://stackoverflow.com/questions/50177534/why-do-pipes-from-child-processes-break-sometimes-and-sometimes-not", "title": "Why do Pipes from Child Processes break sometimes and sometimes not?", "body": "<p>I am working on a System in Perl with a Master Script that needs to execute several different Worker Scripts that execute different Tasks on the System at the same time.<br />\nThose Scripts do not need to be written in Perl as well. They can be any Programm that is executeable on the Command Line and returns the Results over the <code>STDOUT</code> and <code>STDERR</code> and the <code>EXITCODE</code>.</p>\n\n<p>So I made a little Example Script <code>hello.pl</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint STDERR \"HELLO ERROR 0 !\\n\";\n\nprint \"hello script!!\\n\";\n\nprint \"hello waiting 3 sec ...\\n\";\n\nsleep 3;\n\nprint \"hello list:\\n\";\nprint \"cmd: 'ls -lah'\\n\";\n\nprint `ls -lah`;\n\nprint \"res: '$?'\\n\";    \n\nprint \"hello waiting 2 sec ...\\n\";\n\nsleep 2;    \n\nprint STDERR \"HELLO ERROR 1 !\\n\";\n</code></pre>\n\n<p>The Master Script needs to capture the Result of the <code>STDOUT</code> on one side and the Error Notifications in <code>STDERR</code> on the other side.</p>\n\n<p>The Master Script does a <code>fork</code> to execute the Worker Script in a non-blocking mode and uses <code>waitpid</code> and <code>select</code> to monitor the Worker Script progress.</p>\n\n<p>So the Code of the <code>master.pl</code> Script is this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse IO::Select;\nuse POSIX \":sys_wait_h\";\n\n\nsub Launch\n{\n  my $rprocess = shift;\n  my $irs = 0;\n\n\n  local *logreader;\n  local *errorreader;\n  my $logwriter   = undef;\n  my $errorwriter = undef;\n\n  pipe( *logreader,   $logwriter );\n  pipe( *errorreader, $errorwriter );\n\n  #Spawn the Child Process\n  my $iprcpid = fork();\n\n  #Check the Success of Process Forking\n  if(defined $iprcpid)\n  {           \n    #------------------------\n    #Sub Process Launch succeeded\n\n    # Check whether parent/child process\n    if($iprcpid &gt; 0)\n    {\n      #------------------------\n      #Parent Process\n\n      close($logwriter);\n      close($errorwriter);\n\n      $rprocess-&gt;{\"pid\"} = $iprcpid;\n      $rprocess-&gt;{\"log_pipe\"} = *logreader;\n      $rprocess-&gt;{\"error_pipe\"} = *errorreader;\n\n      $irs = 1;\n    }\n    elsif($iprcpid == 0)\n    {\n      #------------------------\n      #Child Process\n\n      my $ierr = 0;\n\n      close(*logreader);\n      close(*errorreader);\n\n      open( STDOUT, \"&gt;&amp;=\", $logwriter );\n      open( STDERR, \"&gt;&amp;=\", $errorwriter );\n\n\n      #------------------------\n      #Execute the configured Command\n\n      print \"cmd: '\" . $rprocess-&gt;{\"file\"} . \"'\\n\";\n\n      print \"cmd rng ...\\n\";\n\n      print `$rprocess-&gt;{\"file\"}`; \n\n      $ierr = $?;\n\n      print \"closing transmission ...\\n\";   \n\n      close STDOUT;\n      close STDERR;\n\n      exit $ierr; \n    }\n    else    #An Error has ocurred in the Sub Process Launch\n    {\n        # Unable to fork\n        print \"ERROR: Sub Process '\" . $rprocess-&gt;{\"name\"} . \"' Launch failed: $!\\n\";\n    }   #if($iprcpid &gt; 0)\n  }\n  else    #An Error has ocurred in the Process Spawning   \n  {\n    # Unable to fork\n    print \"ERROR: Sub Process '\" . $rprocess-&gt;{\"name\"} . \"' Launch failed: $!\\n\";\n  }  #if(defined $iprcpid)\n\n  return $irs;\n}\n\nsub Read\n{\n  my $rprocess = shift;\n\n  my $ppsel = $rprocess-&gt;{\"select\"};\n  my $pplog = $rprocess-&gt;{\"log_pipe\"};\n  my $pperr = $rprocess-&gt;{\"error_pipe\"};\n  my @arrppselrdy = undef;\n  my $pprdy = undef;\n  my $srdln = \"\";\n  my $irdcnt = 0;\n\n  unless(defined $ppsel)\n  {\n    $ppsel = IO::Select-&gt;new();\n\n    $ppsel-&gt;add($pplog);\n    $ppsel-&gt;add($pperr);\n\n    #Store the Selector Object\n    $rprocess-&gt;{\"select\"} = $ppsel;\n  }\n  else  #The Selector was already created\n  {\n    $ppsel = $rprocess-&gt;{\"select\"};\n  }  #unless(defined $ppsel)    \n\n  while(@arrppselrdy = $ppsel-&gt;can_read(1))\n  {\n    foreach $pprdy (@arrppselrdy)\n    {\n      $irdcnt = sysread($pprdy, $srdln, 8192);\n\n      if(defined $irdcnt)\n      {\n        if($irdcnt &gt; 0)\n        {\n          if(fileno($pprdy) == fileno($pplog))\n          {\n            $rprocess-&gt;{\"log\"} .= \"pipe (\" . fileno($pprdy) . \"): reading report ...\\n\";\n\n            $rprocess-&gt;{\"log\"} .= $srdln;\n          }\n          elsif(fileno($pprdy) == fileno($pperr))\n          {\n            $rprocess-&gt;{\"log\"} .= \"pipe (\" . fileno($pprdy) . \"): reading error ...\\n\";\n\n            $rprocess-&gt;{\"error\"} .= $srdln;\n          }   #if(fileno($pprdy) == fileno($pplog))\n        }\n        else    #End of Transmission\n        {\n          $rprocess-&gt;{\"log\"} .= \"pipe (\" . fileno($pprdy) . \"): transmission done.\\n\";\n\n          #Remove the Pipe File Handle\n          $ppsel-&gt;remove($pprdy);  \n\n        } #if($irdcnt &gt; 0)\n      }\n      else  #Reading from the Pipe failed\n      {\n        #Remove the Pipe File Handle\n        $ppsel-&gt;remove($pprdy);\n\n        if($!)\n        {\n          $rprocess-&gt;{\"error\"} .= \"ERROR: Sub Process \" . $rprocess-&gt;{\"name\"} \n            . \": Read failed with [\" . ($! * 1) . \"]!\\n\"\n            . \"Message: '$!'\\n\";\n        }  #if($!)\n      }  #if(defined $irdcnt)\n    }  #foreach $pprdy (@arrppselrdy)\n  } #while(@arrppselrdy = $ppsel-&gt;can_read(1))\n\n  $rprocess-&gt;{\"log\"} .= \"try read done. '\" . $ppsel-&gt;count . \"' pipes left.\\n\";\n}\n\nsub Check\n{\n  my $rprocess = shift;\n  my $irng = 0;\n\n  if($rprocess-&gt;{\"pid\"} &gt; 0\n    &amp;&amp; $rprocess-&gt;{\"status\"} &lt; 0)\n  {\n    my $ifinishpid = waitpid($rprocess-&gt;{\"pid\"}, WNOHANG);\n\n    if($ifinishpid &gt; -1)\n    {\n      if($ifinishpid == 0)\n      {\n        $irng = 1;\n      }\n      else\n      {\n        $rprocess-&gt;{\"status\"} = $?;\n      }\n\n      #Read the Message Pipes\n      Read($rprocess);\n\n      if($ifinishpid &gt; 0)\n      {\n        close $rprocess-&gt;{\"log_pipe\"};\n        close $rprocess-&gt;{\"error_pipe\"};\n      }\n    }\n    else  #Sub Process does not exist\n    {\n      $rprocess-&gt;{\"error\"} .= \"ERROR: Sub Process does not exist!\\n\";\n    }  #if($ifinishpid &gt; 0)\n  }  #if($rprocess-&gt;{\"pid\"} &gt; 0 &amp;&amp; $rprocess-&gt;{\"status\"} &lt; 0)\n\n  return $irng;\n}\n\n\n\nmy %hshprocesses = (\"hello1\" =&gt; {\"name\" =&gt; \"hello1\", \"pid\" =&gt; -1, \"file\" =&gt; \"./hello.pl\"\n    , \"log_pipe\" =&gt; undef, \"error_pipe\" =&gt; undef, \"select\" =&gt; undef\n    , \"log\" =&gt; \"\", \"error\" =&gt; \"\", \"status\" =&gt; -1}\n  , \"hello2\" =&gt; {\"name\" =&gt; \"hello2\", \"pid\" =&gt; -1, \"file\" =&gt; \"sleep 3 ; ./hello2.pl\"\n    , \"log_pipe\" =&gt; undef, \"error_pipe\" =&gt; undef, \"select\" =&gt; undef\n    , \"log\" =&gt; \"\", \"error\" =&gt; \"\", \"status\" =&gt; -1}\n  , \"hello3\" =&gt; {\"name\" =&gt; \"hello3\", \"pid\" =&gt; -1, \"file\" =&gt; \"./hello3.pl ; sleep 2\"\n    , \"log_pipe\" =&gt; undef, \"error_pipe\" =&gt; undef, \"select\" =&gt; undef\n    , \"log\" =&gt; \"\", \"error\" =&gt; \"\", \"status\" =&gt; -1}\n  , \"hello4\" =&gt; {\"name\" =&gt; \"hello4\", \"pid\" =&gt; -1, \"file\" =&gt; \"./hello4.pl\"\n    , \"log_pipe\" =&gt; undef, \"error_pipe\" =&gt; undef, \"select\" =&gt; undef\n    , \"log\" =&gt; \"\", \"error\" =&gt; \"\", \"status\" =&gt; -1});\n\n\nprint \"prcs launching ...\\n\";\n\nforeach (keys %hshprocesses)\n{\n  unless(Launch($hshprocesses{$_}))\n  {\n    print \"prc '\" . $hshprocesses{$_}{\"name\"} . \"': Launch failed!\\n\";\n  }\n}  #foreach (keys %hshprocesses)\n\nprint \"prcs launched.\\n\";\n\nmy $irunningcount = 0;\n\ndo\n{\n  $irunningcount = 0;\n\n  foreach (keys %hshprocesses)\n  {\n    $irunningcount++ if(Check($hshprocesses{$_}));\n  }  #foreach (keys %hshprocesses)\n\n  print \"prc rng cnt: '$irunningcount'\\n\";\n}\nwhile($irunningcount &gt; 0);\n\nforeach (keys %hshprocesses)\n{\n  print \"process (\" . $hshprocesses{$_}{\"pid\"} . \") '\" . $hshprocesses{$_}{\"name\"} . \"':\\n\";\n  print \"status [\" . $hshprocesses{$_}{\"status\"} . \"]\\n\";\n  print \"log:\\n\"\n    . \"'\" . $hshprocesses{$_}{\"log\"} . \"'\\n\";\n  print \"error:\\n\"\n    . \"'\" . $hshprocesses{$_}{\"error\"} . \"'\\n\";\n}  #foreach (keys %hshprocesses)\n</code></pre>\n\n<p>So reading on <code>logreader</code> and <code>errorreader</code> I thought I would be able to capture the whole output.<br /></p>\n\n<p>The expected Report would be like this:</p>\n\n<pre><code>$ ./master.pl\nprcs launching ...\nprcs launched.\nprc rng cnt: '4'\nprc rng cnt: '3'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '1'\nprc rng cnt: '0'\nprocess (2742) 'hello4':\nstatus [0]\nlog:\n'pipe (3): reading report ...\ncmd: './hello4.pl'\ncmd rng ...\npipe (5): reading error ...\ntry read done. '2' pipes left.\npipe (5): reading error ...\npipe (3): reading report ...\nhello4 script!!\nhello waiting 3 sec ...\nhello4 list:\ncmd: 'ls -lah'\ntotal 24K\ndrwxr-xr-x  2 bodo bodo   90 may  5 08:23 .\ndrwxr-xr-x 11 bodo bodo  128 may  4 18:49 ..\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:33 hello2.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:37 hello3.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:34 hello4.pl\n-rwxr-xr-x  1 bodo bodo  303 may  4 18:50 hello.pl\n-rwxr-xr-x  1 bodo bodo 5,7K may  5 08:23 master.pl\nres: '0'\nhello waiting 2 sec ...\npipe (3): reading report ...\nclosing transmission ...\npipe (5): transmission done.\npipe (3): transmission done.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\n'\nerror:\n'HELLO4 ERROR 0 !\nHELLO4 ERROR 1 !\n'\nprocess (2743) 'hello1':\nstatus [0]\nlog:\n'pipe (4): reading report ...\ncmd: 'sleep 3 ; ./hello.pl'\ncmd rng ...\ntry read done. '2' pipes left.\npipe (7): reading error ...\ntry read done. '2' pipes left.\ntry read done. '2' pipes left.\npipe (7): reading error ...\npipe (4): reading report ...\nhello script!!\nhello waiting 3 sec ...\nhello list:\ncmd: 'ls -lah'\ntotal 24K\ndrwxr-xr-x  2 bodo bodo   90 may  5 08:23 .\ndrwxr-xr-x 11 bodo bodo  128 may  4 18:49 ..\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:33 hello2.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:37 hello3.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:34 hello4.pl\n-rwxr-xr-x  1 bodo bodo  303 may  4 18:50 hello.pl\n-rwxr-xr-x  1 bodo bodo 5,7K may  5 08:23 master.pl\nres: '0'\nhello waiting 2 sec ...\nclosing transmission ...\npipe (7): transmission done.\npipe (4): transmission done.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\ntry read done. '0' pipes left.\n'\nerror:\n'HELLO ERROR 0 !\nHELLO ERROR 1 !\n'\nprocess (2745) 'hello3':\nstatus [0]\nlog:\n'pipe (6): reading report ...\ncmd: './hello3.pl ; sleep 2'\ncmd rng ...\npipe (9): reading error ...\ntry read done. '2' pipes left.\npipe (9): reading error ...\ntry read done. '2' pipes left.\npipe (6): reading report ...\nhello3 script!!\nhello waiting 3 sec ...\nhello3 list:\ncmd: 'ls -lah'\ntotal 24K\ndrwxr-xr-x  2 bodo bodo   90 may  5 08:23 .\ndrwxr-xr-x 11 bodo bodo  128 may  4 18:49 ..\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:33 hello2.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:37 hello3.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:34 hello4.pl\n-rwxr-xr-x  1 bodo bodo  303 may  4 18:50 hello.pl\n-rwxr-xr-x  1 bodo bodo 5,7K may  5 08:23 master.pl\nres: '0'\nhello waiting 2 sec ...\nclosing transmission ...\npipe (9): transmission done.\npipe (6): transmission done.\ntry read done. '0' pipes left.\n'\nerror:\n'HELLO3 ERROR 0 !\nHELLO3 ERROR 1 !\n'\nprocess (2746) 'hello2':\nstatus [0]\nlog:\n'pipe (8): reading report ...\ncmd: './hello2.pl'\ncmd rng ...\npipe (11): reading error ...\ntry read done. '2' pipes left.\npipe (8): reading report ...\nhello2 script!!\nhello waiting 3 sec ...\nhello2 list:\ncmd: 'ls -lah'\ntotal 24K\ndrwxr-xr-x  2 bodo bodo   90 may  5 08:23 .\ndrwxr-xr-x 11 bodo bodo  128 may  4 18:49 ..\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:33 hello2.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:37 hello3.pl\n-rwxr-xr-x  1 bodo bodo  307 may  4 22:34 hello4.pl\n-rwxr-xr-x  1 bodo bodo  303 may  4 18:50 hello.pl\n-rwxr-xr-x  1 bodo bodo 5,7K may  5 08:23 master.pl\nres: '0'\nhello waiting 2 sec ...\nclosing transmission ...\npipe (11): reading error ...\npipe (8): transmission done.\npipe (11): transmission done.\ntry read done. '0' pipes left.\n'\nerror:\n'HELLO2 ERROR 0 !\nHELLO2 ERROR 1 !\n'\n</code></pre>\n\n<p>But this works only if there is only 1 Worker Script.<br />\nIf the Master Script tries to read on several Worker Scripts this Transmission Pipes are closed by the Child right before executing the Worker Script <code>hello.pl</code> .\nThe last thing that is read is:</p>\n\n<pre><code>        cmd: './hello.pl'\n        cmd rng ...\n</code></pre>\n\n<p>The Master Script uses the <code>IO::Select</code> Module to read from <code>logreader</code> and <code>errorreader</code> with a selector Object.<br /> \nThat way I find in the Progress Log:</p>\n\n<pre><code>        cmd: './hello.pl'\n        cmd rng ...\n        pipe (8): transmission done.\n</code></pre>\n\n<p>But all the stuff from <code>hello.pl</code> is lost.</p>\n\n<p>Sometimes I still find the first line of the <code>hello.pl</code> <code>STDERR</code> in the Error Report</p>\n\n<pre><code>HELLO ERROR 0 !\n</code></pre>\n\n<p>Why does the Pipe sometimes break and sometimes not?<br />\nHow can I prevend this from happening?</p>\n\n<p>Now with this Test Script I could not reproduce the Error of the <strong>Broken Pipe</strong>.<br />\nBut even in the Real World Application it sometimes happens and sometimes not.<br />\nI developped this Application on a System with perl v5.10 and from 4 Processes 3 run and 1 breaks. Especially if it does a <code>sleep</code> call.</p>\n\n<p>Under which circumstances could a Pipe break?</p>\n\n<hr>\n\n<p><strong>edit 2018-05-05:</strong> I built the Master Script <code>master.pl</code> and run it with perl v5.24.1</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525439950, "post_id": 50175932, "comment_id": 87368865, "body": "Please provide a source if you are quoting something."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1525442658, "post_id": 50175932, "comment_id": 87370704, "body": "Could you use alternatives like <code>if ( $string =~ &#47;$regex1|$regex2|...&#47;g ) { ... }</code> ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525445649, "post_id": 50175932, "comment_id": 87372685, "body": "I&#39;ve downvoted because I think your question is very hard to read. I think you are using quote markup for your regular text, but it could also be that you are quoting something. I have written an answer for what I believe you want to do, but I could be entirely wrong. Please <a href=\"https://stackoverflow.com/posts/50175932/edit\">edit</a> your question and reformat it. Use normal text for text, code markup for code and only use quotes if you actually quote something, and in that case provide a link to what you are quoting. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1525446441, "post_id": 50175932, "comment_id": 87373215, "body": "@ssr1012: You are often unreasonably agitated about getting anonymous/close votes when your questions clearly deserve them. You are unlikely to get related feedback: there is a reason for the votes being anonymous. Please just spend more effort on writing good and clear English and explaining yourself better, then you will see the votes go down. And your questions will always be much better received if you show the code that you have written in attempting to solve the problem yourself."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525452075, "post_id": 50175932, "comment_id": 87376338, "body": "Your regexes use parentheses <code>()</code> but it is not clear whether you are using them to capture parts of the match results or just for grouping.  If you need capturing then @simbabque answer looks like the way to go.  Are you just using parens to group?  If so then there are easier ways to match multiple regex."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525498487, "post_id": 50175932, "comment_id": 87388942, "body": "@Borodin: I am really worried about the way of asking the question since I understood that I have clearly explained what are all my issues/request/requirements however you are all people expecting further more details on my question. Anyhow I will try to update myself upmost level."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1525499096, "post_id": 50175932, "comment_id": 87389047, "body": "Requested question are updated."}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "edited": false, "score": 1, "creation_date": 1525448104, "post_id": 50177713, "comment_id": 87374261, "body": "If you don&#39;t have a recent Perl <code>if (my @capture = $t =~ $search-&gt;{pattern}) { $search-&gt;{callback}-&gt;(@capture); }</code> will DRT."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "edited": false, "score": 0, "creation_date": 1525448276, "post_id": 50177713, "comment_id": 87374352, "body": "@mr_ron thanks, I incorporated your suggestion into my answer :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1525448262, "last_edit_date": 1525448262, "creation_date": 1525445554, "answer_id": 50177713, "question_id": 50175932, "link": "https://stackoverflow.com/questions/50175932/how-to-find-multiple-regex-patterns-in-a-single-way-using-perl/50177713#50177713", "title": "how to find multiple regex patterns in a single way using Perl", "body": "<p>Disclaimer: Your question is very hard to read, so this is pretty much guesswork. I am not sure I understand what you want to do.</p>\n\n<p>When you are processing data in a dynamic way, a typical approach is to use a <a href=\"https://en.wikipedia.org/wiki/Dispatch_table\" rel=\"nofollow noreferrer\"><em>dispatch table</em></a>. We can do something similar here. Often a hash or hash reference is used for that, but since we want a specific order, I will be using an array instead.</p>\n\n<pre><code>my @dispatch = (\n    {\n        pattern =&gt; qr/f(o)(o)/,\n        callback =&gt; sub {\n            my ($one, $two) = @_;\n            print \"Found $one and $two\\n\";\n        },\n    },\n    {\n        pattern =&gt; qr/(bar)/,\n        callback =&gt; sub {\n            my $capture = shift;\n            print \"Saw $capture\";\n        },\n    },\n);\n</code></pre>\n\n<p>This basically is a list of search patterns and associated instructions. Each pattern has a <a href=\"https://en.wikipedia.org/wiki/Callback_(computer_programming)\" rel=\"nofollow noreferrer\"><em>callback</em></a>, which is a code reference. I decided it would make sense to pass in the capture variables, because your patterns have capture groups.</p>\n\n<p>Now in order to call them, we iterate over the dispatch array, match the pattern and then call the associated callback, passing in all the captures.</p>\n\n<pre><code>my $text = \"Foo bar foo bar baz.\";\n\nforeach my $search (@dispatch) {\n    if ($text =~ $search-&gt;{pattern}) {\n        $search-&gt;{callback}-&gt;(@{^CAPTURE}); # this requires Perl 5.26\n    }\n}\n</code></pre>\n\n<p>Please note that I am using <a href=\"http://perldoc.perl.org/perlvar.html#%40%7B%5ECAPTURE%7D\" rel=\"nofollow noreferrer\"><code>@{^CAPTURE}</code></a>, which was added to Perl in version 5.25.7, so you would require at least <a href=\"http://perldoc.perl.org/perl5260delta.html#%40%7B%5ECAPTURE%7D%2C-%25%7B%5ECAPTURE%7D%2C-and-%25%7B%5ECAPTURE_ALL%7D\" rel=\"nofollow noreferrer\">the stable Perl 5.26 release</a> to use it. (On an older Perl, <code>my @capture = $t =~ $search-&gt;{pattern}</code> and <code>$search-&gt;{callback}-&gt;(@capture)</code> will behave similarly).</p>\n\n<p>This is way more elegant than having a list of <code>if () {}</code> statement because it's very easy to extend. The dispatch table could be created on the fly, based on some input, or entirely read from disk.</p>\n\n<p>When we run this code, it creates the following output</p>\n\n<pre><code>Found o and o\nSaw bar\n</code></pre>\n\n<p>This is not very spectacular, but you should be able to adapt it to your patterns. On the other hand I don't know what you are actually trying to do. If you wanted to modify the string instead of only matching, you might need additional arguments for your callbacks.</p>\n\n<p>If you want to learn more about dispatch tables, I suggest you read the second chapter of <a href=\"https://hop.perl.plover.com/\" rel=\"nofollow noreferrer\">Mark Jason Dominus' excellent book <em>Higher Order Perl</em></a>, which is available for free as a PDF on his website.</p>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": 2, "last_activity_date": 1525509968, "creation_date": 1525509968, "answer_id": 50187510, "question_id": 50175932, "link": "https://stackoverflow.com/questions/50175932/how-to-find-multiple-regex-patterns-in-a-single-way-using-perl/50187510#50187510", "title": "how to find multiple regex patterns in a single way using Perl", "body": "<p>Your question is hard to read, mainly because you have the /g at the end of your regex searches (which returns a list), however, you only check if it matches once. </p>\n\n<p>I'm making the following assumptions</p>\n\n<ul>\n<li>All matches are required</li>\n<li>the code can be a single or double match</li>\n<li>both groups captured in one line</li>\n</ul>\n\n<p>i think you want </p>\n\n<pre><code>while ( $string =~ /(([a-z]+)(\\d+)|\\}([a-z]+)|([a-z]+)(\\+|\\-)|([0-9])\\](\\+|\\-))/g )\n{\n#$1 has the whole match\n#$2 has the first group if defined\n#$3 has the second group if defined\n}\n</code></pre>\n\n<p>However, I prefer the method below. this will capture in one line</p>\n\n<pre><code>while ($string =~ /([a-z]+\\d+|\\}[a-z]+|[a-z]+\\+|\\-|[0-9]\\]\\+|\\-)/g ) \n{\n# in here split the match if required\n}\n</code></pre>\n\n<p>I recommend you use <a href=\"http://perldoc.perl.org/perlre.html#Details-on-some-modifiers\" rel=\"nofollow noreferrer\">regex comments</a> to make this clearer. </p>\n\n<p>if you just want a single match, use</p>\n\n<pre><code>if(\n$string=~m/([a-z]+)(\\d+)/   ||\n$string=~m/\\}([a-z]+)/      ||\n$string=~m/([a-z]+)(\\+|\\-)/ ||\n$string=~m/([0-9])\\](\\+|\\-)/ \n)\n{\n#some code\n}\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1525509968, "creation_date": 1525439847, "last_edit_date": 1525499049, "question_id": 50175932, "link": "https://stackoverflow.com/questions/50175932/how-to-find-multiple-regex-patterns-in-a-single-way-using-perl", "title": "how to find multiple regex patterns in a single way using Perl", "body": "<h1>Question Updated</h1>\n\n<p>I have list of (few more) regex patterns like: (<strong><em>Note:</strong> Sequence is very Important</em>)  </p>\n\n<pre><code>([a-z]+)(\\d+)\n\\}([a-z]+)\n([a-z]+)(\\+|\\-)\n([0-9])\\](\\+|\\-)\n...\n...\n</code></pre>\n\n<p>my input file like :</p>\n\n<pre><code>\\ce{CO2}  \n\\ce{2CO}  \n\\ce{H2O}  \n\\ce{Sb2O3}  \n...\n...    \n</code></pre>\n\n<p>In my code I am finding the each and every regex patterns like </p>\n\n<pre><code>if($string=~m/([a-z]+)(\\d+)/g) {  my statements ... }\nif($string=~m/\\}([a-z]+)/g) {  my statements ... }\nif($string=~m/([a-z]+)(\\+|\\-)/g) {  my statements ... }\nif($string=~m/([0-9])\\](\\+|\\-)/g) {  my statements ... }\n</code></pre>\n\n<p>Instead of doing the above code Is there any other way to simplify the code?</p>\n\n<p>Could you someone please share your thoughts for my improvement for better coding.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1525438988, "post_id": 50175494, "comment_id": 87368226, "body": "What to <code>$a =~ s&#47;^\\D+&#47;&#47;r</code> and <code>$b =~ s&#47;^D+&#47;&#47;r</code> print? I suspect something <code>parse()</code> doesn&#39;t like..."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525443535, "post_id": 50177108, "comment_id": 87371287, "body": "You were 1 minute faster than me :-)"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 5, "last_activity_date": 1525660987, "last_edit_date": 1525660987, "creation_date": 1525443441, "answer_id": 50177108, "question_id": 50175494, "link": "https://stackoverflow.com/questions/50175494/why-does-the-sort-fail-in-the-script-but-not-in-the-one-liner/50177108#50177108", "title": "Why does the sort fail in the script but not in the one-liner?", "body": "<p>In the non-working code, there's a simple typo.  You have:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@versions = sort { version-&gt;parse($a =~ s/^\\D+//r) cmp version-&gt;parse($b =~ s/^D+//r) } @versions;\n</code></pre>\n\n<p>That might be better formatted as:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@versions = sort { version-&gt;parse($a =~ s/^\\D+//r) cmp\n                   version-&gt;parse($b =~ s/^D+//r) } @versions;\n</code></pre>\n\n<p>Split over two lines, the asymmetry (bug) is obvious.\nYou are missing the backslash before the second <code>D</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@versions = sort { version-&gt;parse($a =~ s/^\\D+//r) cmp\n                   version-&gt;parse($b =~ s/^\\D+//r) } @versions;\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 50177108, "answer_count": 1, "score": 0, "last_activity_date": 1525660987, "creation_date": 1525438493, "last_edit_date": 1525491186, "question_id": 50175494, "link": "https://stackoverflow.com/questions/50175494/why-does-the-sort-fail-in-the-script-but-not-in-the-one-liner", "title": "Why does the sort fail in the script but not in the one-liner?", "body": "<p>The following snippet works fine:  </p>\n\n<pre><code>cat versions.txt | perl -Mversion -le'  \n   chomp( @a = &lt;&gt; );  \n   print for sort { $left = $a; $right = $b; $left =~ s!^\\D+!!; $right =~ s!^\\D+!!; version-&gt;parse($left) cmp version-&gt;parse($right) } @a;  \n'     \n</code></pre>\n\n<p>The following code does not, but I don't understand why. They seem to be effectively the same code.  </p>\n\n<pre><code>use strict;  \nuse warnings;  \nuse version;  \n\nchomp(my @versions = &lt;&gt;);  \n@versions = sort { version-&gt;parse($a =~ s/^\\D+//r) cmp version-&gt;parse($b =~ s/^D+//r) } @versions;   \nprint $_.\"\\n\" for @versions;  \n</code></pre>\n\n<p>I get:  </p>\n\n<blockquote>\n  <p>Invalid version format (non-numeric data) at script line 7</p>\n</blockquote>\n"}, {"tags": ["perl", "xpath", "xml-twig"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525437296, "post_id": 50174399, "comment_id": 87367113, "body": "Why do you have package variables in there?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525438495, "post_id": 50174399, "comment_id": 87367920, "body": "Your Perl code is  unreadable. Please indent it properly and tidy it up."}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525455985, "post_id": 50174399, "comment_id": 87378160, "body": "Thank you @Borodin. I will take care of it next time. And apology for that."}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525456199, "post_id": 50174399, "comment_id": 87378268, "body": "@simbabque, I didn&#39;t get you. Could you please explain?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525456308, "post_id": 50174399, "comment_id": 87378325, "body": "You have variables declared with <code>our</code>. Those are lexical package variables. It doesn&#39;t make sense to use them in this context."}, {"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525456919, "post_id": 50174399, "comment_id": 87378596, "body": "Actually, I am trying to declare it as global variables. So, I used <code>our</code> as opposite to <code>my</code>. Is there any other way to declare them as global?   I am not very proficient at Perl. So, please excuse me for any silly mistake :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1525458302, "post_id": 50174399, "comment_id": 87379306, "body": "@Nee: If you want a variable to be global to the source file, then declaring it with <code>my</code> near the top of the file will do that (such as your <code>$register_count</code>). If you want it to be accessible from all other modules in the program then you&#39;re right that you need <code>our</code>, but you should probably rethink your design. In common with most other languages, it is better in Perl to restrict the scope of a variable as much as possible. Even <code>my</code> variables should be declared <i>as late as possible</i>, and you should probably be making more use of subroutine parameters."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1525517088, "post_id": 50176632, "comment_id": 87393806, "body": "I removed the handlers and accessing the XML through the DOM. Now, <code>foreach my $row ( $table-&gt;get_xpath( &quot;&#47;&#47;row&quot; ) )</code> is picking <code>row</code>s from all the <code>table</code>s. I want it to pick rows of one table at a time. Can you please tell me what would be the reason?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 1, "creation_date": 1525517994, "post_id": 50176632, "comment_id": 87394072, "body": "@Nee: You need a dot in the XPath expression, otherwise the search will start at the document root. So <code>$table-&gt;get_xpath(&#39;.&#47;&#47;row&#39;)</code>. Or you can use <code>$table-&gt;first_descendant(&#39;row&#39;)</code>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1525442073, "creation_date": 1525442073, "answer_id": 50176632, "question_id": 50174399, "link": "https://stackoverflow.com/questions/50174399/perl-xml-twig-get-xpath-table-not-able-to-get-all-the-table-elements/50176632#50176632", "title": "Perl: XML-Twig get_xpath(&quot;//table&quot;) not able to get all the &lt;table&gt; elements", "body": "<p>The problem is the calls to <code>purge</code> at the end of each of your handler subroutines. This deletes from memory all fully-process nodes, so you are removing the whole of the first <code>table</code> element before you use <code>get_xpath</code> to search for it. There is no need to <code>purge</code> or <code>flush</code> the nodes accessed by the handlers</p>\n\n<p>You are using two different ways of processing your data: via handlers and through <code>get_xpath</code> on the complete twig. I suggest that you remove the handlers altogether and just access the XML through the DOM</p>\n"}], "owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 50176632, "answer_count": 1, "score": -1, "last_activity_date": 1525444209, "creation_date": 1525435113, "last_edit_date": 1525444209, "question_id": 50174399, "link": "https://stackoverflow.com/questions/50174399/perl-xml-twig-get-xpath-table-not-able-to-get-all-the-table-elements", "title": "Perl: XML-Twig get_xpath(&quot;//table&quot;) not able to get all the &lt;table&gt; elements", "body": "<p>I am parsing this file with XML-Twig perl module:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE reference\n  PUBLIC \"-//OASIS//DTD DITA Reference//EN\" \"reference.dtd\"&gt;\n&lt;reference xmlns:ditaarch=\"http://dita.oasis-open.org/architecture/2005/\" id=\"dav1395327178563\" xml:lang=\"en-us\" ditaarch:DITAArchVersion=\"1.2\"&gt;\n  &lt;title&gt;Display&lt;/title&gt;\n  &lt;shortdesc&gt;&lt;/shortdesc&gt;\n  &lt;prolog&gt;\n\n\n  &lt;/prolog&gt;\n  &lt;refbody&gt;\n    &lt;table&gt;\n      &lt;title&gt;LPSV register&lt;/title&gt;\n      &lt;desc&gt;Address offset: &lt;codeph&gt;0x100&lt;/codeph&gt;.&lt;/desc&gt;\n      &lt;tgroup cols=\"5\"&gt;\n        &lt;colspec colname=\"col1\" colnum=\"1\"/&gt;\n        &lt;colspec colname=\"col2\" colnum=\"2\"/&gt;\n        &lt;colspec colname=\"col3\" colnum=\"3\"/&gt;\n        &lt;colspec colname=\"col4\" colnum=\"4\"/&gt;\n        &lt;colspec colname=\"col5\" colnum=\"5\"/&gt;\n        &lt;thead&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;Bits&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;Reset value&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;Access type&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;Name&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;Usage&lt;/entry&gt;\n          &lt;/row&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;4:0&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;0&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;tt&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;xx&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;\n              &lt;p&gt;Video layer input format.&lt;/p&gt;\n\n            &lt;/entry&gt;\n          &lt;/row&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;7:5&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;-&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;-&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;-&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;Reserved&lt;/entry&gt;\n          &lt;/row&gt;\n\n        &lt;/tbody&gt;\n      &lt;/tgroup&gt;\n    &lt;/table&gt;\n    &lt;table&gt;\n      &lt;title&gt;LV_CONTROL&lt;/title&gt;\n      &lt;desc&gt;Address offset: &lt;codeph&gt;0x104&lt;/codeph&gt;.&lt;/desc&gt;\n      &lt;tgroup cols=\"5\"&gt;\n        &lt;colspec colname=\"col1\" colnum=\"1\"/&gt;\n        &lt;colspec colname=\"col2\" colnum=\"2\"/&gt;\n        &lt;colspec colname=\"col3\" colnum=\"3\"/&gt;\n        &lt;colspec colname=\"col4\" colnum=\"4\"/&gt;\n        &lt;colspec colname=\"col5\" colnum=\"5\"/&gt;\n        &lt;thead&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;Bits&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;Reset value&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;Access type&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;Name&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;Usage&lt;/entry&gt;\n          &lt;/row&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;0&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;0&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;RWPU&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;EN&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;layer enable flag&lt;/entry&gt;\n          &lt;/row&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;3:1&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;0&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;rr&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;ss&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;layer data flow configuration&lt;/entry&gt;\n          &lt;/row&gt;\n          &lt;row&gt;\n            &lt;entry colname=\"col1\"&gt;4&lt;/entry&gt;\n            &lt;entry colname=\"col2\"&gt;0&lt;/entry&gt;\n            &lt;entry colname=\"col3\"&gt;rr&lt;/entry&gt;\n            &lt;entry colname=\"col4\"&gt;rr&lt;/entry&gt;\n            &lt;entry colname=\"col5\"&gt;layer inverse gamma enable flag&lt;/entry&gt;\n          &lt;/row&gt;\n        &lt;/tbody&gt;\n      &lt;/tgroup&gt;\n    &lt;/table&gt;\n  &lt;/refbody&gt;\n&lt;/reference&gt;\n</code></pre>\n\n<p>But the <code>get_xpath(\"//table\")</code> only picks, first <code>&lt;table&gt;</code> element. Can anyone please help me what's wrong in my script:</p>\n\n<pre><code>use strict;\nuse open ':std', ':encoding(UTF-8)';    # To remove 'Wide character in print' error\n\n#use warnings;\nuse XML::Twig;\n\nmy @input_xml_files = ( 'dav1395327178563.xml' ); #&lt;input_regs/*.xml&gt;;\n\nour @registers;\nour @registers_desc;\nour @registers_offset;\n\nmy $register_count = 0;\n\nforeach my $input_xml_file ( @input_xml_files ) {\n\n    my $twig = XML::Twig-&gt;new(\n        twig_handlers =&gt; {\n            'table/title'       =&gt; \\&amp;register_name,\n            #'section/dl'        =&gt; \\&amp;register_description,\n            'table/desc/codeph' =&gt; \\&amp;register_offset\n        },\n    );\n    $twig-&gt;parsefile( $input_xml_file );\n\n    $input_xml_file =~ s/.xml//;\n    $input_xml_file =~ s/input_regs\\///;\n\n    my $regs_file_name = $input_xml_file . \".regs\";\n\n    #chdir ($curdir);\n\n    open( REGS_PPFE, \"&gt;$regs_file_name\" ) || die( \"Can't open the file.\" );\n\n    foreach my $table ( $twig-&gt;get_xpath( \"//table\" ) ) { # get each &lt;table&gt;\n\n        # my $header = $table-&gt;prev_sibling-&gt;text;\n\n        my @headers;\n        my $register_id = $registers[$register_count];\n\n        $register_id =~ s/[\\(\\s+-]/_/g;\n        $register_id =~ s/,//g;           # Remove ,\n\n        print $regs_file_name. \"\\n\";\n        print $table. \"\\n\\n\";\n\n        #print $register_id.\"\\n\";\n        print REGS_PPFE \"name=\\\"$register_id\\\" id=\\\"$register_id\\\"\n\\\"$registers[$register_count]\\\"\n\noffset=\\\"$registers_offset[$register_count]\\\"\n\\n\\n\";\n\n################################## Bit fields ####################################################################\n\n        my $bit_num        = 1;    # bit number\n        my $bit_width_temp = 0;\n        my $bit_offset     = 0;    # bit offset\n\n        my %entries;\n\n        my $row_count = 0;         # row counter\n\n        my $reserved_bit_offset;\n        my $reserved_bit_width;\n\n        my $prev_bit_offset     = 0;\n        my $prev_bit_width_temp = 0;\n        my $prev_colon          = 0;\n        my $prev_single         = 0;\n\n        foreach my $row ( $table-&gt;get_xpath( \"//row\" ) ) { #foreach my $row ( $table-&gt;get_xpath(\"tgroup/tbody/row\") ) # get each &lt;row&gt; of one &lt;table&gt;\n\n            # my %entries;\n            $row_count = $row_count + 1;\n\n            # print $row_count, \"\\n\";\n\n            my @row_entries = map { $_-&gt;text =~ s/\\n\\s+//rg; } $row-&gt;children;  # remove 'linefeed and whitespace' (s/\\n\\s+//gr) /\n\n            if ( @headers ) {\n\n                # my $bit_width_temp;\n                # my $bit_offset;\n                my $bit_width;    # bit width\n\n                @entries{@headers} = @row_entries;\n\n                #foreach my $field (@headers)\n                #{\n                $entries{'Bits'} =~ s/[\\[\\]]//g;    # remove [] from this text\n\n                #print \"$entries{'Bits'}\\n\";\n\n                if ( $entries{'Bits'} =~ /:/ ) {      # e.g. 3:2\n\n                    $prev_bit_width_temp = $bit_width_temp;\n                    $prev_bit_offset     = $bit_offset;\n\n                    # print $reg_name,\" Prev prev_bit_width_temp: \", $prev_bit_width_temp, \" Prev prev_bit_offset: \", $prev_bit_offset;\n                    $prev_colon = 1 - $prev_single;\n\n                    #$prev_single = 0;\n                    ( $bit_width_temp, $bit_offset ) = split( ':', $entries{'Bits'} );\n                    $bit_width = int( $bit_width_temp ) - int( $bit_offset ) + 1;\n\n                    # print \" Now bit_width_temp: \",$bit_width_temp, \" Now bit_offset: \",$bit_offset, \"\\n\";\n\n                }\n                else {    # e.g. 24\n\n                    $prev_bit_offset     = $bit_offset;\n                    $prev_bit_width_temp = $bit_width_temp;\n\n                    # print $reg_name, \" Prev prev_bit_width_temp: \", $prev_bit_width_temp,\" Prev prev_bit_offset: \", $prev_bit_offset;\n                    $prev_single = 1 - $prev_colon;\n\n                    #$prev_colon = 0;\n                    ( $bit_width_temp, $bit_offset ) = ( 0, $entries{'Bits'} );\n                    $bit_width = int( $bit_width_temp ) + 1;\n\n                    # print  \" Now bit_width_temp: \",$bit_width_temp,\" Now bit_offset: \",$bit_offset,\"\\n\";\n                }\n\n                my $bit_reset = $entries{'Reset value'};\n\n                print \"This is binary \\n\" if -B $bit_reset;\n\n                #my $bit_access = $entries{'Access'};\n                #$bit_access =~ s/RAZ\\/WI/ROZ/g;\n                my $bit_name = $entries{'Name'};\n\n                #$bit_name =~ s/[\\(\\s+-]/_/g;\n                #$entries{'Usage'} =~ s/[\u2018\u2019]/'/g;\n                #print $bit_name;\n                if ( $bit_name =~ /-/ ) {\n                    print REGS_PPFE \"reserved_bit_field position=\\\"$bit_offset\\\" width=\\\"$bit_width\\\" \nreset_value value=\\\"0x$bit_reset\\\" \n\\n\";\n                }\n                else {\n\n                    print REGS_PPFE\n                            \"&lt;bit_field name=\\\"$bit_name\\\" id=\\\"$bit_name\\\" position=\\\"$bit_offset\\\" width=\\\"$bit_width\\\" access=\\\"RW\\\"&gt;\n&lt;brief_description&gt;$entries{'Name'}&lt;/brief_description&gt;\n&lt;long_description&gt;\n&lt;p&gt;$entries{'Usage'}&lt;/p&gt;\n&lt;/long_description&gt;\n&lt;reset_value value=\\\"0x$bit_reset\\\" override=\\\"true\\\"/&gt;\n&lt;/bit_field&gt;\\n\";\n\n                }\n\n                $bit_num = $bit_num + 1;\n            }\n            else {\n\n                @headers = @row_entries;\n            }\n        }\n        print REGS_PPFE \"&lt;/register_def&gt;\";\n        $register_count++;\n    }\n\n    close( REGS_PPFE );\n\n}\n\n#print \"\\n\\n\\n\\n@registers \\n\";\n#print \"\\n@registers_desc \\n\\n\\n\\n\\n\";\n#================================================== Subroutines =================================================\n\nsub register_name {\n    my ( $twig, $text_elt ) = @_;\n    push @registers, $text_elt-&gt;text;\n    print $text_elt -&gt;text . \"\\n\";\n    $twig-&gt;purge;\n}\n\nsub register_description {\n    my ( $twig, $text_elt ) = @_;\n\n    #print $text_elt -&gt; text;\n    my $temp_reg_desc = $text_elt-&gt;text;\n\n    $temp_reg_desc =~ s/\\bPurpose/&lt;p&gt;Purpose: /i;\n    $temp_reg_desc =~ s/\\bUsage constraints/&lt;\\/p&gt;&lt;p&gt;Usage constraints: /i;\n    $temp_reg_desc =~ s/\\bConfigurations/&lt;\\/p&gt;&lt;p&gt;Configurations: /i;\n    $temp_reg_desc =~ s/\\bAttributes.*//;    #Remove all text after Attributes\n    $temp_reg_desc = $temp_reg_desc . \"&lt;/p&gt;\";\n\n    #print $temp_reg_desc;\n    push @registers_desc, $temp_reg_desc;\n\n    $twig-&gt;purge;\n}\n\nsub register_offset {\n    my ( $twig, $text_elt ) = @_;\n\n    #print $text_elt -&gt; text;\n\n    push @registers_offset, $text_elt-&gt;text;\n\n    $twig-&gt;purge;\n}\n</code></pre>\n"}, {"tags": ["perl", "dbi", "fetchall", "arrayref"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525435961, "post_id": 50174145, "comment_id": 87366190, "body": "You are mixing up strings and data structures. Take a look at what is in your <code>$databases</code>. Do the following; <code>use Data::Dumper; my $databases = $SQL-&gt;fetchall_arrayref(); print Dumper $databases;</code> and then <a href=\"https://stackoverflow.com/posts/50174145/edit\">edit</a> your question and add the output please."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525436341, "post_id": 50174145, "comment_id": 87366460, "body": "Ok, so you have got an array reference that holds several array references. Now what exactly do you want to print out?"}, {"owner": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525436534, "post_id": 50174145, "comment_id": 87366589, "body": "I had/still have this in my mind.  That this is the value of the array  postgres1078556kb test107529kb  each line being an output of the select statement , with independent values on 1 row. and inside the loop over the rows i have too loop through the rows to get the values"}, {"owner": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525436600, "post_id": 50174145, "comment_id": 87366637, "body": "This maybe sounds strange but by typing my explenation i found a solution and i tried it out and it works.  :D"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525436630, "post_id": 50174145, "comment_id": 87366660, "body": "That&#39;s not strange at all. That&#39;s called learning. It often helps to explain things to someone to understand them yourself. Well done! :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525436655, "post_id": 50174145, "comment_id": 87366679, "body": "Feel free to write up your solution as your own answer. You can accept that answer tomorrow. Don&#39;t put it into the question though please."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525437161, "post_id": 50174932, "comment_id": 87367034, "body": "You might also want to read <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldsc.html</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a>"}], "tags": [], "owner": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "is_accepted": true, "score": 2, "last_activity_date": 1525436736, "creation_date": 1525436736, "answer_id": 50174932, "question_id": 50174145, "link": "https://stackoverflow.com/questions/50174145/perl-dbi-select-fetches-empy-strings-in-array/50174932#50174932", "title": "Perl dbi (select) fetches empy strings in array", "body": "<p>I found the solution to my own question , for future readers:</p>\n\n<p>My 2 loops where not correctly done (I used a foreach and a while) the following code did the job.</p>\n\n<pre><code> foreach my $row (@$databases)\n        {\n\n            my $databaseColumnNumber =0;\n             foreach my $val (@$row) \n             {\n                print \"\\n\" , $val;\n            }\n\n        }\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 6351302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1025fa10c031d56e4aa1df7bdcdc2b48?s=128&d=identicon&r=PG&f=1", "display_name": "achahbar", "link": "https://stackoverflow.com/users/6351302/achahbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 50174932, "answer_count": 1, "score": 1, "last_activity_date": 1525436736, "creation_date": 1525434254, "last_edit_date": 1525436671, "question_id": 50174145, "link": "https://stackoverflow.com/questions/50174145/perl-dbi-select-fetches-empy-strings-in-array", "title": "Perl dbi (select) fetches empy strings in array", "body": "<p>I have a perl script that connect to a postgres db and fetches a couple select statements that it runs on it. This output have the purpose to print in word afterword. While i was building my project i didn't notice something that happens with the fetching part ,it was after i print it in word that i noticed something strange. </p>\n\n<p>I execute a select statement and fetches this in an arrayref , but when i print this arrayreferentie I don't got only values in my array but also empty strings and de cli gives me some error code with it. I firstly though to just chomp after i read a line so that it wil go to the next line but that didn't work . Is there anyone who have come to this problem already ?</p>\n\n<p>This is my code:</p>\n\n<pre><code>my $query = $_[0];    #select multiple columns\nmy $SQL = $dbh-&gt;prepare($query);  \n$SQL -&gt; execute();\n\nmy $headers = $SQL-&gt;{NAME};\nmy $databases = $SQL-&gt;fetchall_arrayref();\n\n#testing fase , print the fetch to see what would be print in word\nforeach my $row (@$databases)\n    {\n\n        my $databaseColumnNumber =0;\n\n        while ($databaseColumnNumber &lt;= @$databases)\n        {\n            print \"\\n\" , $row -&gt; [$databaseColumnNumber];\n             $databaseColumnNumber++;\n        }\n            #chomp $row;   ### this was a testing line to see if it would chomp after the empty value\n    }\n\n\n\n$SQL-&gt;finish();\n</code></pre>\n\n<p>The output of the print in my CLI is as followed</p>\n\n<pre><code>postgres \n10 \n7856 kB\n//emptyline(which represents the empty value in the array\n Use of uninitialized value in print atC:\\Users\\xxxxx\n//emptyline(which represents the empty value in the array\n Use of uninitialized value in print at\n  Use of uninitialized value in print atC:\\Users\\xxxxx\n//newline from the print to go to the new line in the array\ntest \n10 \n7529 kB \n//emptyline(which represents the empty value in the array\n Use of uninitialized value in print atC:\\Users\\xxxxx\n//emptyline(which represents the empty value in the array\n Use of uninitialized value in print at\n  Use of uninitialized value in print atC:\\Users\\xxxxx\n</code></pre>\n\n<p>[EDIT]</p>\n\n<pre><code>$VAR1 = [\n          [\n            'postgres',\n            '10',\n            '7856 kB'\n          ],\n          [\n            'test',\n            '10',\n            '7529 kB'\n          ],\n          [\n            'template1',\n            '10',\n            '6865 kB'\n          ],\n          [\n            'template0',\n            '10',\n            '6865 kB'\n          ]\n        ];\n$VAR1 = [\n          [\n            'city',\n            '408 kB',\n            '152 kB'\n          ],\n          [\n            'countrylanguage',\n            '136 kB',\n            '88 kB'\n          ],\n          [\n            'country',\n            '96 kB',\n            '56 kB'\n          ]\n        ];\n</code></pre>\n"}, {"tags": ["perl", "nginx", "dancer", "plack", "psgi"], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 1652904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d1f1ce8e4d0ab147736563e59dd8b4?s=128&d=identicon&r=PG", "display_name": "XiM", "link": "https://stackoverflow.com/users/1652904/xim"}, "is_accepted": true, "score": 2, "last_activity_date": 1525544320, "last_edit_date": 1525544320, "creation_date": 1525513030, "answer_id": 50187933, "question_id": 50173648, "link": "https://stackoverflow.com/questions/50173648/nginx-unit-in-relation-to-psgi-dancer-stack/50187933#50187933", "title": "Nginx Unit in relation to PSGI/Dancer stack", "body": "<p>In your example nginx and Starman are comunicating using HTTP, not PSGI (because PSGI is interface, and HTTP is protocol). So stack will look like <code>Unit-&gt;Dancer</code>. In case if you need some nginx features your can use it in front of Unit: <code>nginx-&gt;Unit-&gt;Dancer</code>.</p>\n"}], "owner": {"reputation": 642, "user_id": 1498827, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1fd718fa88dfbe25b406c8004551f02a?s=128&d=identicon&r=PG", "display_name": "microwth", "link": "https://stackoverflow.com/users/1498827/microwth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 50187933, "answer_count": 1, "score": 1, "last_activity_date": 1525544320, "creation_date": 1525432578, "question_id": 50173648, "link": "https://stackoverflow.com/questions/50173648/nginx-unit-in-relation-to-psgi-dancer-stack", "title": "Nginx Unit in relation to PSGI/Dancer stack", "body": "<p>According to <a href=\"http://techcrunch.com/2017/09/06/nginx-launches-its-application-platform/\" rel=\"nofollow noreferrer\">Nginx goes beyond its server roots and launches its application platform</a> </p>\n\n<blockquote>\n  <p>..Unit is a modern application server for applications written in\n  PHP, Python and Go (with support for node.js, Java, Ruby Perl and\n  others following soon), that run in dynamic environments.</p>\n</blockquote>\n\n<p>Where does Unit fit in a ngnix->PSGI->Starman->Dancer stack? \nwhich part does it replace or adds to?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1525439784, "post_id": 50173317, "comment_id": 87368769, "body": "A little bit of context would have been nice. Like how do your hashes (&#39;%hoh&#39;, &#39;%top_strategies&#39;) actually look like (as an executable statement). A little complete script demonstrating the problem in its environment would be ideal."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1525431885, "creation_date": 1525431885, "answer_id": 50173463, "question_id": 50173317, "link": "https://stackoverflow.com/questions/50173317/elements-limit-for-sorted-hash-of-hashes/50173463#50173463", "title": "Elements limit for sorted hash of hashes", "body": "<p>You don't want to be using a <code>while</code> loop, as that'll repeatedly 'spin' your sort. <code>while</code> runs repeatedly when a condition is \"true\" and reshuffling your list multiple times is not what you want to be doing. </p>\n\n<p>Also, when you're sorting something, you need to specify what to sort. You've told sort to use a subroutine (comparing <code>$hoh</code> elements) but without specifying <em>what</em> to sort based on that comparison. You <em>probably</em> want to sort <code>keys %hoh</code>. </p>\n\n<p>First sort your list, then grab the first 5 elements. </p>\n\n<p>You could do this with a 'for' loop:</p>\n\n<pre><code>my $count = 0;\nmy $limit = 5;\nfor my $key ( sort {$hoh{$b}{aaaa}&lt;=&gt;$hoh{$a}{aaaa}) keys %hoh ) { \n    print \"$key $hoh{$key}{'aaaa'} $hoh{$key}{'bbbb'}\\n\";  \n    last if $count++ &gt; $limit;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1525432011, "creation_date": 1525431363, "last_edit_date": 1525432011, "question_id": 50173317, "link": "https://stackoverflow.com/questions/50173317/elements-limit-for-sorted-hash-of-hashes", "title": "Elements limit for sorted hash of hashes", "body": "<p>I would like to sort the hash of hashes according to the value of one of the keys and print only the 5 best results. I tried to do it with while, but unfortunately it failed.</p>\n\n<p>Example values</p>\n\n<pre><code>key1 = 1\nkey2 = 2\nkey3 = 3\nkey4 = 4\nkey5 = 5\nkey6 = 6\nkey7 = 7\n</code></pre>\n\n<p>My try:</p>\n\n<pre><code>my limit = 5;\nwhile (my $keys (sort {$hoh{$b}{aaaa}&lt;=&gt;$hoh{$a}{aaaa}) &amp;&amp; my $i &lt;= $limit) {\n  $i++;\n  print \"KEY: $keys VALUE1: $hoh{$keys}-&gt;{aaaa} VALUE2: $top_strategies{$keys}-&gt;{bbbb}   \\n\";\n}\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>KEY: key1 VALUE1: 1 VALUE2: 3213\nKEY: key2 VALUE1: 2 VALUE2: 312\nKEY: key3 VALUE1: 3 VALUE2: 41\nKEY: key4 VALUE1: 4 VALUE2: 414123\nKEY: key5 VALUE1: 5 VALUE2: 532\n</code></pre>\n\n<p>My result:</p>\n\n<pre><code>syntax error at backtest.pl line 252, near \"$keys (\"\nsyntax error at backtest.pl line 252, near \"}&lt;=&gt;\"\n</code></pre>\n\n<p>What am I doing wrong? Or is there any other solution to achieve this?</p>\n"}, {"tags": ["perl", "intellij-idea", "ide", "perl-module", "intellij-plugin"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1525437126, "post_id": 50173289, "comment_id": 87367008, "body": "I cannot see much, frankly. Just a screenshot of some syntax highlighted pragmas. May be a little context (the whole script) and the warnings you get (please, both as text, not screenshots!) might lighten the dark."}], "answers": [{"tags": [], "owner": {"reputation": 1655, "user_id": 1054259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/01d9a993f7e9961f5ec52aa2b518d151?s=128&d=identicon&r=PG", "display_name": "Gordolio", "link": "https://stackoverflow.com/users/1054259/gordolio"}, "is_accepted": true, "score": 2, "last_activity_date": 1552487193, "creation_date": 1552487193, "answer_id": 55144250, "question_id": 50173289, "link": "https://stackoverflow.com/questions/50173289/unable-to-find-package-file-warning-in-intellij-and-perl-plugin/55144250#55144250", "title": "Unable to find package file warning in Intellij and Perl plugin", "body": "<p>I had this issue until I ensured that my local perl was properly configured in the IDE preferences.</p>\n\n<ol>\n<li><code>File</code> >> <code>Preferences</code> ... or <code>Command</code> + <code>,</code> on the Mac.</li>\n<li><code>Language &amp; Frameworks</code> >> <code>Perl5</code> >> <code>Project</code></li>\n<li>Choose your perl interpreter from the dropdown. If one doesn't exist, then select the Gear button to the right of the dropdown to set one up. (I'm using <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a>)</li>\n<li>Choose a target version to ensure the most correct language features.</li>\n</ol>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 55144250, "answer_count": 1, "score": 1, "last_activity_date": 1552487193, "creation_date": 1525431286, "question_id": 50173289, "link": "https://stackoverflow.com/questions/50173289/unable-to-find-package-file-warning-in-intellij-and-perl-plugin", "title": "Unable to find package file warning in Intellij and Perl plugin", "body": "<p>I've the Intellij ultimate edition with the <a href=\"https://www.google.de/search?q=perl+intellij&amp;oq=perl+intellij&amp;aqs=chrome..69i57j0l3.2332j0j1&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">Perl</a> installed.</p>\n\n<p>I'm getting the title warning for all my <code>*.pm</code> files for keywords like <code>warning</code>, <code>strict</code>, <code>constant</code>, as you can see from my screenshot here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tJZtc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tJZtc.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why this happens?</p>\n"}, {"tags": ["perl", "google-analytics", "google-api", "google-analytics-api"], "owner": {"reputation": 421, "user_id": 8122260, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6d7vELvRyUE/AAAAAAAAAAI/AAAAAAAAAXU/HV-tYF0ANgU/photo.jpg?sz=128", "display_name": "Boyke Ferdinandes", "link": "https://stackoverflow.com/users/8122260/boyke-ferdinandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525392866, "creation_date": 1525392866, "question_id": 50165420, "link": "https://stackoverflow.com/questions/50165420/google-analytics-error-code-403-insufficient-permission-perl", "title": "Google Analytics Error code 403 Insufficient Permission Perl", "body": "<p>before posting I make sure to check other similar threads.\nbut none has the same problem as mine.\nthe closest two would be:\n<a href=\"https://stackoverflow.com/questions/32907713/google-analytics-php-api-403-insufficient-permission\">Google Analytics PHP API &quot;(403) Insufficient Permission&quot;</a>\nand <a href=\"https://stackoverflow.com/questions/34995980/google-analytics-api-inconsistent-error-insufficientpermissions-403\">Google Analytics API - inconsistent error &quot;insufficientPermissions&#39; (403)</a>\nbut there is no specific answer/solution to that thread.\nand found this <a href=\"https://stackoverflow.com/questions/47905867/python-google-analytics-management-api-throws-error-403-forbidden\">Python Google Analytics Management API throws error 403 Forbidden</a> but I dont really know/understand if this is related to my issue..perhaps someone can enlighten me?</p>\n\n<p>I have 2 clients, A &amp; B. Both claimed has granted me the access to Read &amp; Analyse\nI succeed extracting data from A, but failed on B. \nI believe, I have both GA Profile ID correct and no coding error (since A succeed).\nTo confirm that I dont use wrong GA profile ID, GA Profile ID would be 9876543 from the example below</p>\n\n<pre><code>/a12345w654321p9876543/\n</code></pre>\n\n<p>The error code is 403, insufficient permission for this profile.</p>\n\n<pre><code>GA error: 403 Forbidden {\"error\":{\"errors\":[{\"domain\":\"global\",\"reason\":\"insufficientPermissions\",\"message\":\"User does not have sufficient permissions for this profile.\"}],\"code\":403,\"message\":\"User does not have sufficient permissions for this profile.\"}} at ./ga_pp_yest.pl line 90.\n</code></pre>\n\n<p>Then, I tried to give access to the same account on my own website (for testing purpose).\nI go to Property level and give permission Read &amp; Analyse. (even tried changing to Account Level with Edit permission)\nI still get the same error.</p>\n\n<p>some of my code:</p>\n\n<pre><code>my $analytics = Net::Google::Analytics-&gt;new;\n# Authenticate\nmy $oauth = Net::Google::Analytics::OAuth2-&gt;new(\n  client_id     =&gt; $client_id,\n  client_secret =&gt; $client_secret,\n);\nmy $token = $oauth-&gt;refresh_access_token($refresh_token);\n$analytics-&gt;token($token);\n\n$req = $analytics-&gt;new_request(\n  start_date  =&gt; \"$startDate\",\n  end_date    =&gt; \"$startDate\",\n  ids         =&gt; \"ga:$profile_id\",\n  dimensions  =&gt; \"ga:pagePath,ga:date,ga:hour,ga:channelGrouping,ga:deviceCategory,ga:region,ga:city\",\n  metrics     =&gt; \"ga:entrances\",\n  max_results =&gt; \"1000\",\n);\n$res = $analytics-&gt;retrieve($req);\ndie( \"GA error: \" . $res-&gt;error_message ) if !$res-&gt;is_success;\n</code></pre>\n\n<p>I checked the token, it gave me 1 hour of access. using this link <a href=\"https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=accessToken\" rel=\"nofollow noreferrer\">https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=accessToken</a></p>\n\n<p>any help is greatly appreciated.\nthank you very much</p>\n"}, {"tags": ["perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1525384530, "post_id": 50164199, "comment_id": 87346735, "body": "Note that the leak happens even with bare <code>get</code> without saving any contents."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525385438, "post_id": 50164199, "comment_id": 87347034, "body": "Good point. And it&#39;s the same for the <code>LWP::Simple</code> <code>getstore</code> function."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 3, "creation_date": 1525386744, "post_id": 50164199, "comment_id": 87347378, "body": "<a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=120643\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=120643</a>  Looks like a known bug in IO::Socket::SSL.  Try upgrading that library.  Although you are making an <code>http</code> request, it actually gets redirected to <code>https</code> so it uses SSL."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1525386889, "post_id": 50164199, "comment_id": 87347412, "body": "It was fixed in IO::Socket::SSL 2.048 (april 16, 2017).  Current version is 2.056.  According to the Changelog: <a href=\"https://metacpan.org/source/SULLR/IO-Socket-SSL-2.056/Changes\" rel=\"nofollow noreferrer\">metacpan.org/source/SULLR/IO-Socket-SSL-2.056/Changes</a>"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525404555, "post_id": 50164199, "comment_id": 87351139, "body": "Thanks, upgraded but that didn&#39;t solve it"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525419003, "post_id": 50164199, "comment_id": 87356416, "body": "Yes, I can reproduce the leak with 2.054."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1525717426, "post_id": 50164199, "comment_id": 87457658, "body": "@choroba FYI I added debugging info"}], "answers": [{"comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525438520, "post_id": 50173247, "comment_id": 87367935, "body": "sorry if I&#39;m missing something, but the <code>SSL_OCSP_NO_STAPLE</code> constant is not available (bareword not allowed error)."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525439489, "post_id": 50173247, "comment_id": 87368583, "body": "@beasy: it is exported by IO::Socket::SSL. My guess is that you&#39;ve forgot to include the library as shown in my example code."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525444507, "post_id": 50173247, "comment_id": 87371978, "body": "Correct on the constant, my mistake."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525444673, "post_id": 50173247, "comment_id": 87372093, "body": "This code copied exactly is producing the same issue for me. I will look into trying the patch you posted..."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525457150, "post_id": 50173247, "comment_id": 87378700, "body": "update: I have applied the patch using the linux <code>patch</code> command and the issue persists"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525470664, "post_id": 50173247, "comment_id": 87384433, "body": "@beasy: I&#39;m unable to reproduce your problem. Could you please update your question with the module versions of LWP, LWP::Protocol::https,  IO::Socket::SSL and Net::SSLeay your are actually using (i.e. not the ones which might be somewhere on your disk) and also with the version of Perl and how you&#39;ve measured the leak?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525716634, "post_id": 50173247, "comment_id": 87457238, "body": "Took me a couple days, but the info has been added to the OP as requested. Let me know if there&#39;s anything else you need"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525722699, "post_id": 50173247, "comment_id": 87460271, "body": "@beasy: strange - Ubuntu 16.04, perl 5.16.3 via Perlbrew, OpenSSL 1.0.2 and same version of the modules - and the problem does not happen to me. Thus there might be differences in the build options (<code>perl -V</code>) or in the OS you are using (<code>uname -a</code> on UNIX like system) or the version of OpenSSL (<code>Net::SSLeay::OPENSSL_VERSION_NUMBER()</code>, <code>Net::SSLeay::SSLeay()</code> )"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1525801228, "post_id": 50173247, "comment_id": 87496014, "body": "You&#39;re right. I installed v5.24.3 with <code>perlbrew</code> and the leak does not occur. Thank you for your help on this."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1525431175, "creation_date": 1525431175, "answer_id": 50173247, "question_id": 50164199, "link": "https://stackoverflow.com/questions/50164199/lwpuseragent-memory-usage-while-saving-content/50173247#50173247", "title": "LWP::UserAgent memory usage while saving content", "body": "<p>There is a memory leak in the OCSP handling which is relevant if the target site uses OCSP stapling (only in this case is revocation checking done by default). A first leak in this area was fixed in Net::SSLeay<sup>1</sup> 1.83. But I've found a second leak which is not fixed yet although a patch is available (since a few minutes). See <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=125273\" rel=\"nofollow noreferrer\">issue 125273</a> for details of the problem and the patch.</p>\n\n<p>It is also possible to work around this problem by disabling OCSP stapling:</p>\n\n<pre><code>use IO::Socket::SSL;\nuse LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;ssl_opts(SSL_ocsp_mode =&gt; SSL_OCSP_NO_STAPLE); ## disable OCSP stapling\n$ua-&gt;get('http://www.wikipedia.org', ':content_file' =&gt; 'save.txt') for 0..500;\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup> Net::SSLeay is the underlying library for IO::Socket::SSL which itself provides SSL functionality to LWP.</p>\n"}], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 1, "accepted_answer_id": 50173247, "answer_count": 1, "score": 5, "last_activity_date": 1525801416, "creation_date": 1525383493, "last_edit_date": 1525801416, "question_id": 50164199, "link": "https://stackoverflow.com/questions/50164199/lwpuseragent-memory-usage-while-saving-content", "title": "LWP::UserAgent memory usage while saving content", "body": "<p>EDIT: The issue below was produced on stock Perl 5.16.3 on an AWS ec2 micro instance. It was ultimately solved by installing and switching to Perl 5.24.3 with <code>perlbrew</code>. </p>\n\n<hr>\n\n<p><code>LWP::UserAgent</code> seems to be causing some kind of memory leak when saving content. </p>\n\n<pre><code>use v5.10;\nuse strict;\nuse warnings;\n\nuse IO::Socket::SSL;\nuse LWP::UserAgent;\nuse Memory::Usage;\nuse Time::HiRes 'usleep';\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $mu = Memory::Usage-&gt;new;\n$ua-&gt;ssl_opts(SSL_ocsp_mode =&gt; SSL_OCSP_NO_STAPLE); ## disable OCSP stapling\nfor (1..50) {\n    $mu-&gt;record(\"before request: $_\");\n    $ua-&gt;get('http://www.wikipedia.org/wiki/Special:Random', ':content_file' =&gt; 'temp.html');\n    usleep 50000;\n}\n\n$mu-&gt;dump();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  time    vsz (  diff)    rss (  diff) shared (  diff)   code (  diff)   data (  diff)\n     0  213964 ( 213964)  25112 ( 25112)   7532 (  7532)      8 (     8)  17976 ( 17976) before request: 1\n     0  225744 ( 11780)  31428 (  6316)   8120 (   588)      8 (     0)  23580 (  5604) before request: 2\n     0  226824 (  1080)  32500 (  1072)   8120 (     0)      8 (     0)  24660 (  1080) before request: 3\n     0  227920 (  1096)  33596 (  1096)   8120 (     0)      8 (     0)  25756 (  1096) before request: 4\n     0  229016 (  1096)  34692 (  1096)   8120 (     0)      8 (     0)  26852 (  1096) before request: 5\n     1  230112 (  1096)  35784 (  1092)   8120 (     0)      8 (     0)  27948 (  1096) before request: 6\n     1  231204 (  1092)  36880 (  1096)   8120 (     0)      8 (     0)  29040 (  1092) before request: 7\n     1  232296 (  1092)  37968 (  1088)   8120 (     0)      8 (     0)  30132 (  1092) before request: 8\n     1  233388 (  1092)  39060 (  1092)   8120 (     0)      8 (     0)  31224 (  1092) before request: 9\n     1  234484 (  1096)  40152 (  1092)   8120 (     0)      8 (     0)  32320 (  1096) before request: 10\n     1  235572 (  1088)  41248 (  1096)   8120 (     0)      8 (     0)  33408 (  1088) before request: 11\n     2  236668 (  1096)  42344 (  1096)   8120 (     0)      8 (     0)  34504 (  1096) before request: 12\n     2  237764 (  1096)  43440 (  1096)   8120 (     0)      8 (     0)  35600 (  1096) before request: 13\n     2  238864 (  1100)  44536 (  1096)   8120 (     0)      8 (     0)  36700 (  1100) before request: 14\n     2  239956 (  1092)  45632 (  1096)   8120 (     0)      8 (     0)  37792 (  1092) before request: 15\n     2  241044 (  1088)  46720 (  1088)   8120 (     0)      8 (     0)  38880 (  1088) before request: 16\n     3  242140 (  1096)  47816 (  1096)   8120 (     0)      8 (     0)  39976 (  1096) before request: 17\n     3  243240 (  1100)  48916 (  1100)   8120 (     0)      8 (     0)  41076 (  1100) before request: 18\n     3  244336 (  1096)  50008 (  1092)   8120 (     0)      8 (     0)  42172 (  1096) before request: 19\n     3  245428 (  1092)  51096 (  1088)   8120 (     0)      8 (     0)  43264 (  1092) before request: 20\n     3  246516 (  1088)  52196 (  1100)   8120 (     0)      8 (     0)  44352 (  1088) before request: 21\n     4  247612 (  1096)  53288 (  1092)   8120 (     0)      8 (     0)  45448 (  1096) before request: 22\n     4  248704 (  1092)  54380 (  1092)   8120 (     0)      8 (     0)  46540 (  1092) before request: 23\n     4  249796 (  1092)  55476 (  1096)   8120 (     0)      8 (     0)  47632 (  1092) before request: 24\n     4  250892 (  1096)  56568 (  1092)   8120 (     0)      8 (     0)  48728 (  1096) before request: 25\n     4  251988 (  1096)  57660 (  1092)   8120 (     0)      8 (     0)  49824 (  1096) before request: 26\n     4  253076 (  1088)  58752 (  1092)   8120 (     0)      8 (     0)  50912 (  1088) before request: 27\n     5  254168 (  1092)  59852 (  1100)   8120 (     0)      8 (     0)  52004 (  1092) before request: 28\n     5  255272 (  1104)  60940 (  1088)   8120 (     0)      8 (     0)  53108 (  1104) before request: 29\n     5  256360 (  1088)  62036 (  1096)   8120 (     0)      8 (     0)  54196 (  1088) before request: 30\n     5  257456 (  1096)  63132 (  1096)   8120 (     0)      8 (     0)  55292 (  1096) before request: 31\n     5  258556 (  1100)  64236 (  1104)   8120 (     0)      8 (     0)  56392 (  1100) before request: 32\n     6  259652 (  1096)  65324 (  1088)   8120 (     0)      8 (     0)  57488 (  1096) before request: 33\n     6  260740 (  1088)  66416 (  1092)   8120 (     0)      8 (     0)  58576 (  1088) before request: 34\n     6  261832 (  1092)  67504 (  1088)   8120 (     0)      8 (     0)  59668 (  1092) before request: 35\n     6  262928 (  1096)  68600 (  1096)   8120 (     0)      8 (     0)  60764 (  1096) before request: 36\n     6  264016 (  1088)  69692 (  1092)   8120 (     0)      8 (     0)  61852 (  1088) before request: 37\n     7  265120 (  1104)  70796 (  1104)   8120 (     0)      8 (     0)  62956 (  1104) before request: 38\n     7  266212 (  1092)  71888 (  1092)   8120 (     0)      8 (     0)  64048 (  1092) before request: 39\n     7  267304 (  1092)  72980 (  1092)   8120 (     0)      8 (     0)  65140 (  1092) before request: 40\n     7  268396 (  1092)  74072 (  1092)   8120 (     0)      8 (     0)  66232 (  1092) before request: 41\n     7  269484 (  1088)  75168 (  1096)   8120 (     0)      8 (     0)  67320 (  1088) before request: 42\n     7  270584 (  1100)  76260 (  1092)   8120 (     0)      8 (     0)  68420 (  1100) before request: 43\n     8  271676 (  1092)  77356 (  1096)   8120 (     0)      8 (     0)  69512 (  1092) before request: 44\n     8  272776 (  1100)  78448 (  1092)   8120 (     0)      8 (     0)  70612 (  1100) before request: 45\n     8  273868 (  1092)  79540 (  1092)   8120 (     0)      8 (     0)  71704 (  1092) before request: 46\n     8  274964 (  1096)  80632 (  1092)   8120 (     0)      8 (     0)  72800 (  1096) before request: 47\n     8  276052 (  1088)  81728 (  1096)   8120 (     0)      8 (     0)  73888 (  1088) before request: 48\n     9  277144 (  1092)  82816 (  1088)   8120 (     0)      8 (     0)  74980 (  1092) before request: 49\n     9  278232 (  1088)  83912 (  1096)   8120 (     0)      8 (     0)  76068 (  1088) before request: 50\n</code></pre>\n\n<p>Perl version is 5.16.3 ; Modules versions below using <code>cpan -D</code></p>\n\n<pre><code>CPAN: Module::CoreList loaded ok (v5.20170923)\n(no description)\nS/SU/SULLR/IO-Socket-SSL-2.056.tar.gz\n/home/ec2-user/perl5/lib/perl5/IO/Socket/SSL.pm\nInstalled: 2.056\nCPAN:      2.056  up to date\nSteffen Ullrich (SULLR)\nSteffen_Ullrich@genua.de\n</code></pre>\n\n<p>...</p>\n\n<pre><code>CPAN: Module::CoreList loaded ok (v5.20170923)\n(no description)\nM/MI/MIKEM/Net-SSLeay-1.85.tar.gz\n/home/ec2-user/perl5/lib/perl5/x86_64-linux-thread-multi/Net/SSLeay.pm\nInstalled: 1.85\nCPAN:      1.85  up to date\nMike McCauley (MIKEM)\nmikem@airspayce.com\n</code></pre>\n\n<p>...</p>\n\n<pre><code>CPAN: Module::CoreList loaded ok (v5.20170923)\n(no description)\nO/OA/OALDERS/libwww-perl-6.33.tar.gz\n/home/ec2-user/perl5/lib/perl5/LWP/UserAgent.pm\nInstalled: 6.33\nCPAN:      6.33  up to date\nOlaf Alders (OALDERS)\nolaf@wundersolutions.com\n</code></pre>\n\n<p>...</p>\n\n<pre><code>CPAN: Module::CoreList loaded ok (v5.20170923)\n(no description)\nO/OA/OALDERS/LWP-Protocol-https-6.07.tar.gz\n/home/ec2-user/perl5/lib/perl5/LWP/Protocol/https.pm\nInstalled: 6.07\nCPAN:      6.07  up to date\nOlaf Alders (OALDERS)\nolaf@wundersolutions.com\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 1, "creation_date": 1525380158, "post_id": 50163430, "comment_id": 87345089, "body": "Thanks! Wrong subtrahend in question was my mistake, I&#39;ll fix it for clarity"}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 5, "last_activity_date": 1525379554, "creation_date": 1525379554, "answer_id": 50163430, "question_id": 50163371, "link": "https://stackoverflow.com/questions/50163371/how-to-calculate-with-matched-number/50163430#50163430", "title": "How to calculate with matched number", "body": "<p>You need to use the <code>e</code> modifier to <strong>e</strong>valuate the right side as an expression:</p>\n\n<pre><code>perl -pe 's/^(\\d+)/$1 - 2/ge' file\n</code></pre>\n\n<p>I also subtract 2 to get your desired output.</p>\n\n<p>Refer to <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"noreferrer\">perlop</a></p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "is_accepted": false, "score": 1, "last_activity_date": 1525438676, "last_edit_date": 1525438676, "creation_date": 1525391368, "answer_id": 50165246, "question_id": 50163371, "link": "https://stackoverflow.com/questions/50163371/how-to-calculate-with-matched-number/50165246#50165246", "title": "How to calculate with matched number", "body": "<p>Another approach.</p>\n\n<pre><code>perl -lane '$F[0] -= 2 if $F[0] =~ /^\\d+$/; print \"@F\"' file\n</code></pre>\n\n<p>Also you are only doing one substitution per line, which is enforced by matching <code>^</code> - start of string (without //m), and don't really need the 'g' modifier - so maybe <code>s/^(\\d+)\\b/$1-2/e</code>.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/3014199/peer\">peer</a> for clarifying what seemed to be leading space in the example data.</p>\n"}], "owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50163430, "answer_count": 2, "score": 2, "last_activity_date": 1525438676, "creation_date": 1525379326, "last_edit_date": 1525437535, "question_id": 50163371, "link": "https://stackoverflow.com/questions/50163371/how-to-calculate-with-matched-number", "title": "How to calculate with matched number", "body": "<p>I have a file where every line starts with an integer and I want to subtract 2 from each of those numbers so that e.g.</p>\n\n<pre><code>2 foo\n2 bar\n3 foo\n3 bar\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>0 foo\n0 bar\n1 foo\n1 bar\n</code></pre>\n\n<p>I've tried </p>\n\n<pre><code>perl -pe 's/^(\\d+)/($1 - 2)/g' file   #-&gt; '(2 - 2) foo'...\nperl -pe 's/^(\\d+)/add($1, -2)/g' file #-&gt; 'add(2, -2) foo'...\n</code></pre>\n\n<p>Both don't work for me. I've read that Perl will interpret strings as numbers based on the context in which I use them, but I seem unable to make my intentions clear.</p>\n"}, {"tags": ["mysql", "perl", "encoding", "character-encoding", "dbi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525378951, "post_id": 50161750, "comment_id": 87344523, "body": "At the very least, you need to add <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code> to add an encoding/decoding layer to STDIN/STDOUT/STDERR and to files opened in scope."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525465548, "post_id": 50161751, "comment_id": 87382611, "body": "I forgot it effectively does <code>SET NAMES utf8</code> when passed to <code>connect</code>, in addition to the decoding effect obtained from <code>$dbh-&gt;{mysql_enable_utf8} = 1;</code>"}], "tags": [], "owner": {"reputation": 1010, "user_id": 1094673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765cc49efa6c5b256240fa5d75f539ef?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/1094673/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1525372309, "creation_date": 1525372309, "answer_id": 50161751, "question_id": 50161750, "link": "https://stackoverflow.com/questions/50161750/encoding-trouble-when-writing-in-database-perl/50161751#50161751", "title": "Encoding trouble when writing in database (Perl)", "body": "<p>This <a href=\"http://blog.thewebsitepeople.org/2012/06/perl-default-to-utf-8-encoding/\" rel=\"nofollow noreferrer\">valuable article</a> provided the solution: </p>\n\n<p>The problem arises during the communication between DBI and the DB, and is solved by adding the <strong>mysql_enable_utf8</strong> flag during the connection:</p>\n\n<pre><code>DBI-&gt;connect($dbistring, 'xxxx', 'xxxx', { mysql_enable_utf8 =&gt; 1 });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1525410096, "creation_date": 1525410096, "answer_id": 50167462, "question_id": 50161750, "link": "https://stackoverflow.com/questions/50161750/encoding-trouble-when-writing-in-database-perl/50167462#50167462", "title": "Encoding trouble when writing in database (Perl)", "body": "<p><strong>Some issues in Perl</strong></p>\n\n<pre><code>use utf8;\nuse open ':std', ':encoding(UTF-8)';\n\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:\".$dsn, $user, $password, {\n       PrintError =&gt; 0,\n       RaiseError =&gt; 1,\n       mysql_enable_utf8 =&gt; 1,  # Switch to UTF-8 for communication and decode.\n});\n# or {mysql_enable_utf8mb4 =&gt; 1} if using utf8mb4\n</code></pre>\n\n<p><strong>Mojibake</strong></p>\n\n<p>See \"Mojibake\" in <a href=\"https://stackoverflow.com/questions/38363566/trouble-with-utf-8-characters-what-i-see-is-not-what-i-stored\">Trouble with UTF-8 characters; what I see is not what I stored</a> for other issues to check on.</p>\n"}], "owner": {"reputation": 1010, "user_id": 1094673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765cc49efa6c5b256240fa5d75f539ef?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/1094673/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525464467, "creation_date": 1525372309, "last_edit_date": 1525464467, "question_id": 50161750, "link": "https://stackoverflow.com/questions/50161750/encoding-trouble-when-writing-in-database-perl", "title": "Encoding trouble when writing in database (Perl)", "body": "<p>In Perl <strong>v5.10.1</strong>, I try to read a file and store strings in a database.\nProblems arise when strings contain accents and exotic characters.</p>\n\n<p>On my CentOS 6, the 'locale' command indicates:\n<strong>LANG=en_US.UTF-8</strong></p>\n\n<p>My DB is <strong>MySQL</strong>, the field I'm writing on is varchar(64) <strong>utf8_unicode_ci</strong>.</p>\n\n<p>I run my test through a Putty console, set with Window > Translation > Remote character set: UTF8, though printed characters are garbled, but this is not the main problem.</p>\n\n<p>Here's my script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\nuse DBI;\n\n# A test string\nmy $test = '\u00e9';\nprint \"- 1: $test\\n\";\n\n# First string in my file, containing a single '\u00e9'\nmy $string = '';\nopen(my $fh, '&lt;', 'myFile');\nwhile(my $line = &lt;$fh&gt;) {\n  chomp $line;\n  $string = $line;\n  last;\n}\nclose $fh;\nprint \"- 2: $string\\n\";\n\n\n# Writing test string and first string in DB\nmy $dbistring = 'DBI:mysql:database=xxxx;host=xxxx;port=xxxx';\nmy $socket = DBI-&gt;connect($dbistring, 'xxxx', 'xxxx');\nmy $cmd = 'UPDATE Strings SET string=\"'.$test.'\" WHERE id=1';\nmy $request = $socket-&gt;prepare($cmd);\n$request-&gt;execute();\n$cmd = 'UPDATE Strings SET string=\"'.$string.'\" WHERE id=2';\n$request = $socket-&gt;prepare($cmd);\n$request-&gt;execute();\n</code></pre>\n\n<p>The prints are as follows:</p>\n\n<ul>\n<li><p>1: \u2592</p></li>\n<li><p>2: \u2592</p></li>\n</ul>\n\n<p>In my DB table, fields end up as:</p>\n\n<ul>\n<li><p>id 1: \u00c3\u00a9</p></li>\n<li><p>id 2: \u00c3\u00a9</p></li>\n</ul>\n\n<p>To avoid a possible double-encoding from Perl string concatenation, I tried: </p>\n\n<pre><code>$string = Encode::decode('UTF-8', $string);\n</code></pre>\n\n<p>giving me the same result.\nSame if I indicate '&lt;:encoding(UTF-8)' when opening the file.</p>\n\n<p>I am much confused, as my process chain seems to be all set in UTF8. Suggestions greatly appreciated.</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525369529, "post_id": 50160623, "comment_id": 87339897, "body": "If system commands are being used by the installer (at all), you may have better luck installing from MINGW.  <code>SourceTree</code> (a UI for git) comes with a &#39;works out of the box&#39; install.  Then you can do <code>cd &#47;c&#47;Program\\ Files&#47;StrawberryPerl&#47;bin</code> (or whatever the path is).  Then <code>.&#47;perl.exe -MCPAN -e &#39;install Text::Trim&#39;</code>, for example.  If that works..the module should be accessible from perl wherever you run it from."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 1, "creation_date": 1525370014, "post_id": 50160623, "comment_id": 87340184, "body": "The cpan installer is already verbose. One of the reasons cpanm was created was to avoid the verbosity. When you use cpanm, you can add verbosity using the <b>-v</b> flag. That said, I was also able to install this module using cpanm so my guess is there was some pathing in the module build script that cpanm was able to convert for windows that cpan couldn&#39;t. Just a guess though. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525370072, "post_id": 50160623, "comment_id": 87340217, "body": "I think something&#39;s wrong in your <code>cpan</code> config. Please provide the output of <code>o conf</code> from the <code>cpan&gt;</code> prompt."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1525370122, "post_id": 50160623, "comment_id": 87340234, "body": "According to this: <a href=\"http://www.cpan.org/modules/INSTALL.html\" rel=\"nofollow noreferrer\">cpan.org/modules/INSTALL.html</a> cpanm might be the preferred install method anyway?  Strawberry perl is specifically mentioned as having it preinstalled."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1525370265, "post_id": 50160623, "comment_id": 87340307, "body": "Re &quot;<i>might be the preferred install method anyway?</i>&quot;, Some people like to claim that, but there&#39;s no reason to use <code>cpanm</code> unless you&#39;re installing to a low memory (e.g. embedded) system. (At least, that&#39;s the only reason I was given for using <code>cpanm</code>, and I&#39;ve asked a lot of people.) It does suppress output, but it&#39;s bad to hide warnings! Some people complain that you have to press enter to configure <code>cpan</code> the first time you run it (to have it autoconfigure), but that very small cost to pay for the extra flexibility."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525370879, "post_id": 50160623, "comment_id": 87340633, "body": "@ikegami - Well, installing <code>cpanm</code> is the first actual instruction on that webpage with the note &quot;you&#39;ll thank us later&quot;, which I&#39;d consider pretty authoritative.  On the other hand, I&#39;d probably consider you <i>more</i> authoritative....and I&#39;ve never even used <code>cpanm</code> :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1525371461, "post_id": 50160623, "comment_id": 87340905, "body": "@zzxyz, If you want authoritative, just check what comes with Perl :) That said, I don&#39;t consider either authoritative since it&#39;s a personal choice, and noone has authority over those."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526413082, "post_id": 50160623, "comment_id": 87732515, "body": "@ikegami sorry for the delay, I posted the output of <code>o conf</code>. I am still getting the same error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526507096, "post_id": 50160623, "comment_id": 87776894, "body": "Sorry, don&#39;t know what you are getting that error."}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 958, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1612356167, "creation_date": 1525367788, "last_edit_date": 1526413048, "question_id": 50160623, "link": "https://stackoverflow.com/questions/50160623/cpan-install-fails-with-is-not-recognized-as-an-internal-or-external-comman", "title": "cpan install fails with &quot;&#39;.&#39; is not recognized as an internal or external command&quot;", "body": "<p>I am using Strawberry Perl 64-bit on Windows (5.26.2.1). Some CPAN modules install correctly, such as Log::Log4perl. However a lot of different modules are failing install with the same error: <code>'.' is not recognized as an internal or external command</code>.</p>\n\n<p>I'm not really sure what to do about this. My best guess is that maybe these modules don't work with Windows, but that's just a guess. An example is Text::Trim which doesn't have any message in its docs that it wouldn't work on Windows.</p>\n\n<p>If you know how to make CPAN install messages more verbose, that might also help track this down. Here is the error:</p>\n\n<pre><code>cpan[6]&gt; install Text::Trim\ninstall Text::Trim\nRunning install for module 'Text::Trim'\nChecksum for C:\\Users\\me\\.cpan\\sources\\authors\\id\\M\\MA\\MATTLAW\\Text-Trim-1.02.tar.gz ok\nConfiguring M/MA/MATTLAW/Text-Trim-1.02.tar.gz with Build.PL\nCreated MYMETA.yml and MYMETA.json\nCreating new 'Build' script for 'Text-Trim' version '1.02'\n  MATTLAW/Text-Trim-1.02.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Build.PL installdirs=site -- OK\nRunning Build for M/MA/MATTLAW/Text-Trim-1.02.tar.gz\nBuilding Text-Trim\n  MATTLAW/Text-Trim-1.02.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe ./Build -- OK\nRunning Build test\nt\\01..trim.t ..... ok\nt\\02..ltrim.t .... ok\nt\\03..rtrim.t .... ok\nt\\04..unicode.t .. ok\nt\\05..undef.t .... ok\nt\\99..pod.t ...... ok\nAll tests successful.\nFiles=6, Tests=63,  2 wallclock secs ( 0.05 usr +  0.70 sys =  0.75 CPU)\nResult: PASS\n  MATTLAW/Text-Trim-1.02.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe ./Build test -- OK\nRunning Build install\n'.' is not recognized as an internal or external command,\noperable program or batch file.\n  MATTLAW/Text-Trim-1.02.tar.gz\n  ./Build install  -- NOT OK\nFailed during this command:\n MATTLAW/Text-Trim-1.02.tar.gz                : install NO\n</code></pre>\n\n<p>Note that I also have Berrybrew installed, so I was also thinking they could interfere with each other, but the fact that Log::Log4perl works makes me think it's relatively unlikely.</p>\n\n<p>EDIT: Strangely, installing Text::Trim using <strong>cpanm</strong> worked...</p>\n\n<p>EDIT: Per request in the comments, here is the output from <code>o conf</code> from the cpan command prompt below. Note however that the cpan this is running is at <code>C:\\berrybrew\\5.26.1_64\\perl\\bin\\cpan.bat</code> so it's strange that it's picking up other versions of certain things from <code>C:\\Strawberry\\c\\bin</code>.</p>\n\n<pre><code>cpan[2]&gt; o conf\n$CPAN::Config options from C:\\Users\\me\\.cpan/CPAN/MyConfig.pm:\n    commit             [Commit changes to disk]\n    defaults           [Reload defaults from disk]\n    help               [Short help about 'o conf' usage]\n    init               [Interactive setting of all options]\n\n    applypatch         []\n    auto_commit        [0]\n    build_cache        [100]\n    build_dir          [C:\\Users\\me\\.cpan\\build]\n    build_dir_reuse    [0]\n    build_requires_install_policy [yes]\n    bzip2              [/mingw64/bin/bzip2]\n    cache_metadata     [1]\n    check_sigs         [0]\n    cleanup_after_install undef\n    colorize_debug     undef\n    colorize_output    [0]\n    colorize_print     undef\n    colorize_warn      undef\n    commandnumber_in_prompt [1]\n    commands_quote     undef\n    connect_to_internet_ok [1]\n    cpan_home          [C:\\Users\\me\\.cpan]\n    curl               [C:\\Users\\me\\AppData\\Local\\Continuum\\Anaconda3\\Library\\bin\\curl.EXE]\n    dontload_hash      undef\n    dontload_list      undef\n    ftp                undef\n    ftp_passive        [1]\n    ftp_proxy          []\n    ftpstats_period    undef\n    ftpstats_size      undef\n    getcwd             [cwd]\n    gpg                [/usr/bin/gpg]\n    gzip               [/usr/bin/gzip]\n    halt_on_failure    [0]\n    histfile           [C:\\Users\\me\\.cpan\\histfile]\n    histsize           [100]\n    http_proxy         []\n    inactivity_timeout [0]\n    index_expire       [1]\n    inhibit_startup_message [0]\n    keep_source_where  [C:\\Users\\me\\.cpan\\sources]\n    load_module_verbosity [none]\n    lynx               undef\n    make               [C:\\Strawberry\\c\\bin\\gmake.EXE]\n    make_arg           []\n    make_install_arg   []\n    make_install_make_command [C:\\Strawberry\\c\\bin\\gmake.EXE]\n    makepl_arg         [INSTALLDIRS=site]\n    mbuild_arg         []\n    mbuild_install_arg []\n    mbuild_install_build_command [./Build]\n    mbuildpl_arg       [installdirs=site]\n    ncftp              undef\n    ncftpget           undef\n    no_proxy           []\n    pager              [C:\\windows\\system32\\more.COM]\n    password           undef\n    patch              [C:\\Strawberry\\c\\bin\\patch.EXE]\n    patches_dir        undef\n    perl5lib_verbosity [none]\n    plugin_list\n    prefer_external_tar [0]\n    prefer_installer   [MB]\n    prefs_dir          [C:\\Users\\me\\.cpan\\prefs]\n    prerequisites_policy [follow]\n    proxy_pass         undef\n    proxy_user         undef\n    randomize_urllist  undef\n    recommends_policy  [1]\n    scan_cache         [atstart]\n    shell              [C:\\windows\\system32\\cmd.exe]\n    show_unparsable_versions [0]\n    show_upload_date   [0]\n    show_zero_versions [0]\n    suggests_policy    [0]\n    tar                [/usr/bin/tar]\n    tar_verbosity      [none]\n    term_is_latin      [1]\n    term_ornaments     [1]\n    test_report        [0]\n    trust_test_report_history [0]\n    unzip              [/usr/bin/unzip]\n    urllist\n        0 [http://www.cpan.org/]\n    use_prompt_default [0]\n    use_sqlite         [0]\n    username           undef\n    version_timeout    [15]\n    wait_list          undef\n    wget               []\n    yaml_load_code     [0]\n    yaml_module        [YAML]\n</code></pre>\n"}, {"tags": ["java", "regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "edited": false, "score": 0, "creation_date": 1525427070, "post_id": 50160097, "comment_id": 87361000, "body": "Ok that&#39;s enough, the question is now locked until we can be convinced you&#39;re going to stop this."}], "answers": [{"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525367386, "post_id": 50160337, "comment_id": 87338757, "body": "Even if you put another <code>]</code> there, same error happens. This line is somehow misleading."}, {"owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525367489, "post_id": 50160337, "comment_id": 87338818, "body": "@ikegami I think revo is just commenting on how misleading the error message is."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525367514, "post_id": 50160337, "comment_id": 87338834, "body": "@ikegami Yes, but reading this <i>It thinks that there should be another <code>]</code>.</i> implies that putting another <code>]</code> doesn&#39;t produce an error but it does."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525367928, "post_id": 50160337, "comment_id": 87339087, "body": "@ikegami You didn&#39;t get the point. <code>[^[]</code> produces an error, this <code>[^[]]</code> and <code>[^a[]]</code> too but not this <code>[^a[b]]</code> because Java supports some character class operations. The sentence was misleading, better now but still not perfect."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525368077, "post_id": 50160337, "comment_id": 87339175, "body": "@ikegami I didn&#39;t say that it is. I&#39;m talking about a sentence. Do not expand it to entire solution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525368774, "post_id": 50160337, "comment_id": 87339551, "body": "@revo, Fixed. I hope Sweeper doesn&#39;t mind the edits!"}], "tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": false, "score": 1, "last_activity_date": 1525368747, "last_edit_date": 1525368747, "creation_date": 1525366761, "answer_id": 50160337, "question_id": 50160097, "link": "https://stackoverflow.com/questions/50160097/convert-perl-regex-to-java/50160337#50160337", "title": "Convert Perl regex to Java", "body": "<p>In Java, you can't have this:</p>\n\n<pre><code>[^[]\n</code></pre>\n\n<p>This is because Java's character class set operations use nested character classes, and this looks like a malformed one.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Operation       Perl (Experiemental)    Java             Result\n------------    --------------------    -------------    --------\nUnion           (?[ [a-e] | [n-r] ])    [a-e[n-r]]       [a-en-r]\nIntersection    (?[ [a-m] &amp; [f-r] ])    [a-m&amp;&amp;[f-r]]     [f-m]\nDifference      (?[ [a-r] - [f-m] ])    [a-r&amp;&amp;[^f-m]]    [a-en-r]\n</code></pre>\n\n<p>But that's not what you meant. You want the inverse of the character class with just <code>[</code> in it (i.e. a character class matching all characters except <code>[</code>). For this, you need to escape the <code>[</code>:</p>\n\n<pre><code>[^\\[]\n</code></pre>\n\n<p>The whole thing in Java string literal:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"([^\\\\[]+)\\\\[([^\\\\]]+)\\\\]\");\n</code></pre>\n"}], "notice": {"owner_user_id": 3956566, "creation_date": 1525426977, "body": "<p>Lock this post if there are disputes about its content that need to be resolved.</p>"}, "owner": {"reputation": 561, "user_id": 3052312, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ymHc7.jpg?s=128&g=1", "display_name": "MitchBroadhead", "link": "https://stackoverflow.com/users/3052312/mitchbroadhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": -3, "locked_date": 1525426977, "last_activity_date": 1525426953, "creation_date": 1525365900, "last_edit_date": 1525426953, "question_id": 50160097, "link": "https://stackoverflow.com/questions/50160097/convert-perl-regex-to-java", "title": "Convert Perl regex to Java", "body": "<p>I am converting <a href=\"http://cpansearch.perl.org/src/DSTAAL/Mail-Log-Parse-1.0400/lib/Mail/Log/Parse/Postfix.pm\" rel=\"nofollow noreferrer\">http://cpansearch.perl.org/src/DSTAAL/Mail-Log-Parse-1.0400/lib/Mail/Log/Parse/Postfix.pm</a> to Java.</p>\n\n<p>I am trying to convert the following line</p>\n\n<pre><code>($line_info{previous_host_name}, $line_info{previous_host_ip})\n                = $line_info{previous_host} =~ m/([^[]+)\\[([^\\]]+)\\]/;\n</code></pre>\n\n<p>If I enter the line into the regexp converter page at <a href=\"http://www.regexplanet.com/advanced/java/index.html\" rel=\"nofollow noreferrer\">http://www.regexplanet.com/advanced/java/index.html</a> I get</p>\n\n<pre><code>Unclosed character class near index 18 ([^[]+)\\[([^\\]]+)\\] ^\n</code></pre>\n\n<p>The original perl script executes fine.</p>\n"}, {"tags": ["regex", "perl", "escaping", "text-processing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525364601, "post_id": 50159742, "comment_id": 87337223, "body": "Please <a href=\"https://stackoverflow.com/posts/50159742/edit\">edit</a> your question and include some example data. It would also be nice if your code was indented to make it more readable. Your pattern looks fine for what you describe. Problem must be that your data is not what you expect it to be."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1525364867, "post_id": 50159742, "comment_id": 87337367, "body": "When <code>*</code> gets included, it will match nine characters not 8? check it <a href=\"https://regex101.com/r/LXSqEs/1\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1525365013, "post_id": 50159742, "comment_id": 87337481, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers.  You can <a href=\"https://stackoverflow.com/posts/50159742/edit\">edit your question</a> to include more information."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4266474, "user_type": "registered", "profile_image": "https://graph.facebook.com/1827993916/picture?type=large", "display_name": "Jason", "link": "https://stackoverflow.com/users/4266474/jason"}, "edited": false, "score": 0, "creation_date": 1525443708, "post_id": 50160063, "comment_id": 87371423, "body": "Well, it sort of worked this morning.  :-).  All good.  I run the above results through a cross reference file where everything was failing because I had system, the two digits on the right in the file.  Had one file I was testing without those that I copied back and it all worked..  Again, thanks for your help.  Kind of streamlined that script a little."}, {"owner": {"reputation": 23, "user_id": 4266474, "user_type": "registered", "profile_image": "https://graph.facebook.com/1827993916/picture?type=large", "display_name": "Jason", "link": "https://stackoverflow.com/users/4266474/jason"}, "edited": false, "score": 1, "creation_date": 1525464496, "post_id": 50160063, "comment_id": 87382129, "body": "Made one final change to get it to display like before.  Took this:     print &quot;Results:\\n&quot;, join(&quot;\\n&quot;, @output), &quot;\\n&quot;;, and changed it to this: print OUTFILE join(&quot;\\n&quot;, @output), &quot;\\n&quot;; print join(&quot;\\n&quot;, @output), &quot;\\n&quot;;"}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 6, "last_activity_date": 1525366121, "last_edit_date": 1525366121, "creation_date": 1525365752, "answer_id": 50160063, "question_id": 50159742, "link": "https://stackoverflow.com/questions/50159742/using-perls-regular-expression-to-find-items/50160063#50160063", "title": "Using Perl&#39;s regular expression to find items", "body": "<p>It has nothing to do with the asterisk!  The asterisked item is <code>*D1708235</code>, but your regex requires the first alphabetic character to be <code>[ABMQRWY]</code>, which does not include <code>D</code>.</p>\n\n<p>That said, here's a cleaned-up example:</p>\n\n<pre><code>my @output;\n\nwhile(&lt;&gt;) {\n    chomp;                       # Don't need to specify $_ - it's the default\n    next if /^\\s*$/;             # Ditto, and the single-line form for readability\n    #print;     # If you want to see what it's doing\n\n    my @fields = split;          # Split $_ on whitespace-separated fields\n\n    foreach my $field (@fields) {\n        #print \"-$field-\\n\";\n        push @output, $field     # Again, single-line form\n            if $field =~ /^\\*?[ABDMQRWY][A-Z0-9]{4}235/;\n    }                         #  ^ the missing link   ^ no trailing whitespace\n}\n\nprint \"Results:\\n\", join(\"\\n\", @output), \"\\n\";\n</code></pre>\n\n<p>I removed the trailing whitespace from the <code>$field</code> regex because the <code>split</code> will produce fields that have neither leading nor trailing whitespace.</p>\n\n<p>Input:</p>\n\n<pre><code>W50DW235 DW\nM50DW235 DW\nQ0608235 08\nAPJ40235 40\nM3515235 15\nM34DW235 DW\nM3408235 08\nRES08235 08\nBSP20235 20\nW1208235 08\nB3008235 08\n\n18122/0655 18122/0700 W50DW235 DW LEV001 002 D50DW235\n18122/0735 18122/0740 M50DW235 DW LEV002 002 W50DW235\n\n18123/0300 18123/0400 *D1708235 08 LEV001 001\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Results:\nW50DW235\nM50DW235\nQ0608235\nAPJ40235\nM3515235\nM34DW235\nM3408235\nRES08235\nBSP20235\nW1208235\nB3008235\nW50DW235\nD50DW235\nM50DW235\nW50DW235\n*D1708235\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4266474, "user_type": "registered", "profile_image": "https://graph.facebook.com/1827993916/picture?type=large", "display_name": "Jason", "link": "https://stackoverflow.com/users/4266474/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 50160063, "answer_count": 1, "score": 2, "last_activity_date": 1525366121, "creation_date": 1525364520, "last_edit_date": 1525365967, "question_id": 50159742, "link": "https://stackoverflow.com/questions/50159742/using-perls-regular-expression-to-find-items", "title": "Using Perl&#39;s regular expression to find items", "body": "<p>I have a set up Perl scripts I use to retrieve data from a text file, but one thing that will not show up is anything that starts with an asterisk.  Here's the code I have:</p>\n\n<pre><code>while(&lt;INFILE&gt;) {\n   chomp $_;\n\n    if (m/^\\s*$/) {\n        next;\n    }\n\n    my @fields = split(/\\  /,$_);\n    my @output;\n\n    foreach my $field(@fields) {\n        if($field =~ /^\\*?[ABMQRWY][A-Z0-9]{4}235 / ) {\n            push @output,$field;\n        }\n    }\n}\n</code></pre>\n\n<p>My if statement grabs everything that is 8 characters long, but sometimes there's an * in front of jobs that it will not pull.  How do I include that?  I know I need to escape it, but not sure where to put it.  </p>\n\n<p>Here's some examples of the data I'm pulling:</p>\n\n<pre><code>W50DW235 DW\nM50DW235 DW\nQ0608235 08\nAPJ40235 40\nM3515235 15\nM34DW235 DW\nM3408235 08\nRES08235 08\nBSP20235 20\nW1208235 08\nB3008235 08\n</code></pre>\n\n<p>This is raw lines from the file:</p>\n\n<pre><code>18122/0655 18122/0700  W50DW235 DW        LEV001  002  D50DW235\n18122/0735 18122/0740  M50DW235 DW        LEV002  002  W50DW235\n</code></pre>\n\n<p>The line it won't pull from with an asterisk is like this:</p>\n\n<pre><code>18123/0300 18123/0400 *D1708235 08        LEV001  001\n</code></pre>\n\n<p>In order to pull the data, I use the following which catches the items with a two space break:</p>\n\n<pre><code>my @fields = split(/\\  /,$_);\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1525371604, "post_id": 50158847, "comment_id": 87340989, "body": "Have you checked the cpan installer settings? They may not update automatically when using multiple versions of Perl. Open cpan and then run <code>o conf</code> and look for the <code>make</code> settings. That should tell you if your hunch is right that it was still trying to use strawberry&#39;s gmake."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1525371970, "post_id": 50158847, "comment_id": 87341161, "body": "Note that it may also be that your command-line is still pointing to Strawberry&#39;s version of cpan and not Berrybrew&#39;s. I&#39;m not sure how to check this in Windows though."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1525443026, "post_id": 50158847, "comment_id": 87370954, "body": "Try <code>berrybrew switch 5.26.1_64</code>, close the terminal, and open a new one and you will then be using that version. Note that berrybrew does not have its own version of cpan, it uses the version within the specific Strawberry Perl instance that you&#39;re currently using. berrybrew is simply a management tool for Strawberry Perl versions, nothing more (I&#39;m the author of berrybrew). Also, perhaps try using <code>cpanm</code> instead of <code>cpan</code> and see if that helps."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1525443083, "post_id": 50158847, "comment_id": 87370995, "body": "Also, the <code>use</code> command for berrybrew is a one-off thing. It allows you to temporarily use a different version of Perl than the one you&#39;re currently <code>switch</code>ed to."}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525361558, "creation_date": 1525361558, "question_id": 50158847, "link": "https://stackoverflow.com/questions/50158847/cpan-installs-broken-when-using-berrybrew-and-strawberry-perl-on-windows", "title": "cpan installs broken when using Berrybrew and Strawberry Perl on Windows", "body": "<p>I think this might be an issue w/ having had Strawberry Perl and Berrybrew on the same system.</p>\n\n<p>I had Strawberry Perl installed, and then installed Berrybrew and uninstalled Strawberry Perl.</p>\n\n<p>At that point Berrybrew on Windows worked for me, but when I try to install CPAN modules it didn't. I get the same type of error for multiple CPAN modules. Below is an example. This is using my 5.26.1_64 install with Berrybrew.</p>\n\n<p>I think it is looking for Strawberry Perl's gmake.</p>\n\n<pre><code>cpan[1]&gt; install Log::Log4perl\nReading 'C:\\Users\\me\\.cpan\\Metadata'\n  Database was generated on Thu, 03 May 2018 13:54:25 GMT\nRunning install for module 'Log::Log4perl'\nFetching with LWP:\nhttp://www.cpan.org/authors/id/M/MS/MSCHILLI/Log-Log4perl-1.49.tar.gz\nFetching with LWP:\nhttp://www.cpan.org/authors/id/M/MS/MSCHILLI/CHECKSUMS\nChecksum for C:\\Users\\me\\.cpan\\sources\\authors\\id\\M\\MS\\MSCHILLI\\Log-Log4perl-1.49.tar.gz ok\nScanning cache C:\\Users\\me\\.cpan\\build for sizes\n............................................................................DONE\nConfiguring M/MS/MSCHILLI/Log-Log4perl-1.49.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a gmake-style Makefile\nWriting Makefile for Log::Log4perl\nWriting MYMETA.yml and MYMETA.json\n  MSCHILLI/Log-Log4perl-1.49.tar.gz\n  C:\\berrybrew\\5.26.1_64\\perl\\bin\\perl.exe Makefile.PL INSTALLDIRS=site -- OK\nRunning make for M/MS/MSCHILLI/Log-Log4perl-1.49.tar.gz\nThe system cannot find the path specified.\n  MSCHILLI/Log-Log4perl-1.49.tar.gz\n  C:\\Strawberry\\c\\bin\\gmake.EXE -- NOT OK\nFailed during this command:\n MSCHILLI/Log-Log4perl-1.49.tar.gz            : make NO\n</code></pre>\n\n<p>Then I reinstalled Strawberry Perl on my system, and installing Log::Log4perl worked (installed it for Strawberry Perl, of course). It did fail one test, but I think that's unrelated.</p>\n\n<p>Now that I realized the issue is that it is looking for Strawberry Perl's gmake, I figured maybe it would work now that I have Strawberry Perl again. But now I can't turn Berrybrew on again. I had turned it off with <code>berrybrew off</code> and now I want to turn it on again with this:</p>\n\n<pre><code>&gt; berrybrew use 5.26.1_64\nperl-5.26.1_64\n==============\nMicrosoft Windows [Version 6.1.7601]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\n\n&lt;berrybrew use 5.26.1_64&gt;: run \"exit\" leave this environment\n</code></pre>\n\n<p>That's a pretty strange message. The command does not have an effect.</p>\n\n<p>Any ideas how I can get Berrybrew working again and tell it to use a better version of gmake (not tied to Strawberry Perl)?</p>\n"}, {"tags": ["arrays", "perl", "reference"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525351142, "post_id": 50155116, "comment_id": 87328158, "body": "See <a href=\"https://stackoverflow.com/q/50145350/1331451\">my comments from today on this question</a> for an explanation of why <code>\\qw&#47;foo bar&#47;</code> doesn&#39;t work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525351381, "post_id": 50155116, "comment_id": 87328324, "body": "<code>my $arrayref = \\(qw(test if this works);</code> will give you a scalar reference to the last element in the list. <code>\\&quot;works&quot;</code>"}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525351965, "post_id": 50155116, "comment_id": 87328705, "body": "@simbabque I read your answer and the perlreftut and it made sense and I came up with what people said here. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1525351925, "post_id": 50155543, "comment_id": 87328677, "body": "I was just reading the document @simbabque told me to read <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a> and it hit me. Come back to post my own answer and you beat me to it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525352159, "post_id": 50155543, "comment_id": 87328827, "body": "That is an array reference, but it is not a reference to the array variable <code>@array</code> in the question. There is a distinct difference!"}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525352378, "post_id": 50155543, "comment_id": 87328991, "body": "@simbabque - I suppose in that sense my example was not clearly showing what I wanted to accomplish. I wanted to do the above. I do understand that array does not exist in this scenario and now we just have an array REF that can be passed into different variables and will contain those values.  My objective was to get rid of array as it seemed redundant."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1525352437, "post_id": 50155543, "comment_id": 87329034, "body": "@KirsKringle in that case, yes, this is exactly what you needed. :)"}], "tags": [], "owner": {"reputation": 451, "user_id": 6192034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d1065e25fc0d226168e89562610278?s=128&d=identicon&r=PG&f=1", "display_name": "Zzyzx", "link": "https://stackoverflow.com/users/6192034/zzyzx"}, "is_accepted": true, "score": 12, "last_activity_date": 1525351849, "creation_date": 1525351849, "answer_id": 50155543, "question_id": 50155116, "link": "https://stackoverflow.com/questions/50155116/create-an-array-ref-in-one-line-in-perl/50155543#50155543", "title": "Create an Array Ref in one line in Perl", "body": "<p>You can do that by using the 'square-bracketed anonymous array constructor' for it. It will create an array reference 'literal'</p>\n\n<pre><code>my $arrayref = [ qw(test if this works) ];\n</code></pre>\n\n<p>or list every member out:</p>\n\n<pre><code>my $arrayref = [ 'test', 'if', 'this', 'works' ];\n</code></pre>\n\n<p>You could verify both results with Data Dumper:</p>\n\n<pre><code>$VAR1 = [\n          'test',\n          'if',\n          'this',\n          'works'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1119, "user_id": 145511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a99c5026c0ac0c48f3e89d91f9b1ff?s=128&d=identicon&r=PG", "display_name": "Glenn", "link": "https://stackoverflow.com/users/145511/glenn"}, "is_accepted": false, "score": 2, "last_activity_date": 1525351856, "creation_date": 1525351856, "answer_id": 50155550, "question_id": 50155116, "link": "https://stackoverflow.com/questions/50155116/create-an-array-ref-in-one-line-in-perl/50155550#50155550", "title": "Create an Array Ref in one line in Perl", "body": "<p>If your goal is to create an array reference in one line, use square brackets to create an array reference, which creates an anonymous array.</p>\n\n<pre><code>use Data::Dumper;\nmy $arrayRef = [qw(test if this works)];\nprint Dumper($arrayRef);\n</code></pre>\n\n<p>So if this is what you are looking to do, it is possible.</p>\n"}, {"tags": [], "owner": {"reputation": 3160, "user_id": 954777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/heMKU.jpg?s=128&g=1", "display_name": "smonff", "link": "https://stackoverflow.com/users/954777/smonff"}, "is_accepted": false, "score": -1, "last_activity_date": 1612719300, "last_edit_date": 1612719300, "creation_date": 1612719000, "answer_id": 66090955, "question_id": 50155116, "link": "https://stackoverflow.com/questions/50155116/create-an-array-ref-in-one-line-in-perl/66090955#66090955", "title": "Create an Array Ref in one line in Perl", "body": "<p>Not a very big surprise, but there is even the <a href=\"https://metacpan.org/pod/Quote::Ref\" rel=\"nofollow noreferrer\"><code>Quote::Ref</code></a> module for that.</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use Quote::Ref 'qwa';\n \nmy $arrayref = qwa( test if this works ); \n# ==&gt; $arrayref = [ qw( test if this works ) ]\n</code></pre>\n<p>Dunno if it adds any readability for something that simple, just adding <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">OMWTDI</a>...</p>\n"}], "owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1137, "favorite_count": 0, "accepted_answer_id": 50155543, "answer_count": 3, "score": 5, "last_activity_date": 1612719300, "creation_date": 1525350512, "question_id": 50155116, "link": "https://stackoverflow.com/questions/50155116/create-an-array-ref-in-one-line-in-perl", "title": "Create an Array Ref in one line in Perl", "body": "<p>I was pondering on the question of whether I could make an array ref in one line in Perl. Sort of like you would define an array. I would normally do the following:</p>\n\n<pre><code>#!/usr/bin/perl\n# your code goes here\nuse warnings;\nuse strict;\nuse Data::Dumper;\n\nmy @array = qw(test if this works);\nmy $arrayref = \\@array;\nprint Dumper($arrayref);\n</code></pre>\n\n<p>My thought was you should be able to just do:</p>\n\n<pre><code>my $arrayref = \\(qw(test if this works);\n</code></pre>\n\n<p>This, however, does not work the way I expected. Is this even possible?</p>\n"}, {"tags": ["perl", "hex", "decimal"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525338948, "post_id": 50151221, "comment_id": 87320192, "body": "Good job on finding a solution and writing your own answer! :)"}], "tags": [], "owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "is_accepted": true, "score": 4, "last_activity_date": 1525381346, "last_edit_date": 1525381346, "creation_date": 1525338831, "answer_id": 50151221, "question_id": 50151123, "link": "https://stackoverflow.com/questions/50151123/perl-decimal-to-32bits-hex-convert/50151221#50151221", "title": "Perl: Decimal to 32bits hex convert", "body": "<p>You can specify the length of the field between the <code>%</code> and the <code>X</code> (e.g. <code>%8X</code>). By default, the number will be padded with spaces, but using a leading zero for the length (e.g. <code>%08X</code>) will cause <code>printf</code> to pad with zeroes instead. Therefore, the following can be used:</p>\n\n<pre><code>printf(\"0x%08X\", 64);\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 50151221, "answer_count": 1, "score": 1, "last_activity_date": 1525381346, "creation_date": 1525338543, "last_edit_date": 1525338902, "question_id": 50151123, "link": "https://stackoverflow.com/questions/50151123/perl-decimal-to-32bits-hex-convert", "title": "Perl: Decimal to 32bits hex convert", "body": "<p>I want to convert decimal number <code>64</code> into hex representation: <code>0x00000040</code>. I am using </p>\n\n<pre><code>printf(\"0x%X\", 64);\n</code></pre>\n\n<p>but it gives output: <code>0x40</code>. Can anyone please help me how to represent the decimal number in <code>0x00000000</code> format?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1525333723, "post_id": 50149354, "comment_id": 87317028, "body": "You can define <code>$a</code> and <code>$b</code> as lexicals (with <code>my</code>) and remove STRING inside <code>foo</code>. Since they are lexicals, they will stay just the way the are. You can even <a href=\"https://perldoc.perl.org/Memoize.html\" rel=\"nofollow noreferrer\">memoize foo</a> so that it gets cached."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 1, "creation_date": 1525334259, "post_id": 50149354, "comment_id": 87317345, "body": "<code>$a</code> and <code>$b</code> are package global variables, and they are used by <code>sort</code> internally so if you modify them it will affect the search result as you observed. You should treat them as read only, and follow the suggestion given by @jjmerelo in his comment above"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1525337434, "post_id": 50149354, "comment_id": 87319223, "body": "@jjmerelo: Could you elaborate with some details please?"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1525338386, "post_id": 50149354, "comment_id": 87319850, "body": "@Jim elaborated <a href=\"https://stackoverflow.com/a/50151055/891440\">in a full answer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1525361816, "post_id": 50150736, "comment_id": 87335560, "body": "How about showing a shwartzian transform too? Aka decorate sort undecorate"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1525421676, "post_id": 50150736, "comment_id": 87357854, "body": "@ysth Yes, thank you, with <code>func(regex)</code> in sorting it should be mentioned. Added"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1550179996, "last_edit_date": 1550179996, "creation_date": 1525337281, "answer_id": 50150736, "question_id": 50149354, "link": "https://stackoverflow.com/questions/50149354/modifying-strings-inside-the-sort-comparator/50150736#50150736", "title": "Modifying strings inside the sort comparator", "body": "<p>One way: use the <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>/r</code> modifier</a></p>\n\n<pre><code>print for sort {\n    foo( $a =~ s/^STRING//r ) cmp foo( $b =~ s/^STRING//r )\n} @ary\n</code></pre>\n\n<p>with which the substitution operator <code>s/</code> returns the modified string and leaves the original unchanged. If there is no match the original string is returned what seems to fit the purpose. See the end for an optimization if this is used on large arrays, or if the function call takes time.</p>\n\n<p>Another way would be to change the substitution to match-and-capture, when \nfeasible.</p>\n\n<hr>\n\n<p>There is an extensive discussion of this in <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>.  First, <code>$a</code> and <code>$b</code> are (package) globals</p>\n\n<blockquote>\n  <p>The <code>$a</code> and <code>$b</code> are set as package globals in the package the sort() is called from</p>\n</blockquote>\n\n<p>The block <code>{ }</code> stands for an anonymous subroutine and </p>\n\n<blockquote>\n  <p>... the elements to be compared are passed into the subroutine as the package global variables <code>$a</code> and <code>$b</code> </p>\n</blockquote>\n\n<p>so the aliasing implies that changing them affects the elements.  Thus</p>\n\n<blockquote>\n  <p>The values to be compared are always passed by reference and should not be modified.</p>\n</blockquote>\n\n<p>what does happen when <code>$a</code>, <code>$b</code> get changed so the elements change.</p>\n\n<p>In the second case you copy <code>$a</code> and <code>$b</code> into (what should be!) lexicals <code>$x</code> and <code>$y</code> and the connection with <code>@ary</code> is broken so the elements aren't changed.</p>\n\n<p>Please <em>always</em> have <code>use warnings;</code> and <code>use strict;</code> at the beginning of the program. This is an excellent, if extreme, example -- it could matter a lot whether the variables you introduce to try things out are global (<code>$x</code>) or lexical (<code>my $x</code>).</p>\n\n<hr>\n\n<p>Code that processes elements to use the resulting value for sort comparison has an efficiency flaw. The comparison is done on two elements at a time, so elements get processed multiple times. And each time we do the same processing and compute the same value for an element. </p>\n\n<p>This inefficiency is notable only for large enough data sets and most of the time one need not worry. But in this case a regex engine runs and there is also a function call involved, and those aren't exactly cheap in Perl. Also, the call's  overhead is unspecified and I imagine that there is some work involved. </p>\n\n<p>To optimize this one can pre-process the input and then sort</p>\n\n<pre><code>my @sorted_ary =  \n    map { $_-&gt;[1] }\n    sort { $a-&gt;[0] cmp $b-&gt;[0] }\n    map { [ foo( s/^STRING//r ), $_ ] }\n    @ary;\n</code></pre>\n\n<p>The <code>map</code> that takes the input <code>@ary</code> applies the regex and the function call and stores that result, along with the original element, in a two-element arrayref, for each element of <code>@ary</code>. This list of arrayrefs is then <code>sort</code>ed, using the first arrayref element for comparison. The last <code>map</code> extracts the second element from sorted arrayrefs, thus returning the original items sorted as needed.</p>\n\n<p>This is called <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>. See \"<em>Examples</em>\" in <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>, for example. </p>\n\n<p>One should keep in mind that the gains are notable only for large enough data while this maneuver comes with an overhead as well (and in a far more complex code). So consider using it only when there is a demonstrable problem of this kind with sorting.</p>\n"}, {"tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": false, "score": 1, "last_activity_date": 1525338356, "creation_date": 1525338356, "answer_id": 50151055, "question_id": 50149354, "link": "https://stackoverflow.com/questions/50149354/modifying-strings-inside-the-sort-comparator/50151055#50151055", "title": "Modifying strings inside the sort comparator", "body": "<p>Please consider this code, which elaborates on my <a href=\"https://stackoverflow.com/questions/50149354/modifying-strings-inside-the-sort-comparator?noredirect=1#comment87317028_50149354\">previous comment</a></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse v5.14;\n\nmy @array=qw(a b c d foo bar baz); #This creates the array\nmy @prefixed = map { \"STRING$_\"} @array;\n\n#This is the sorting part we're interested in\nsay for sort { sans_prefix($a) cmp sans_prefix($b) } @prefixed;\n\n# This sub does the extraction\nsub sans_prefix {\n  my ($no_prefix) = ($_[0] =~ /STRING(\\w+)/);\n  return $no_prefix;\n}\n</code></pre>\n\n<p>The logic that extracts the part that is not prefix is stashed away in <code>sans_prefix</code>. We're doing no substitution, but anyway we're acting on a lexical ($_[0]) and not modifying it, so this returns </p>\n\n<pre><code>STRINGa\nSTRINGb\nSTRINGbar\nSTRINGbaz\nSTRINGc\nSTRINGd\nSTRINGfoo\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1550179996, "creation_date": 1525332806, "question_id": 50149354, "link": "https://stackoverflow.com/questions/50149354/modifying-strings-inside-the-sort-comparator", "title": "Modifying strings inside the sort comparator", "body": "<p>I have the following code that in the sort comparator, it removes a prefix string before doing the comparison.  </p>\n\n<pre><code>print for sort { \n   $a =~ s/^STRING//;  \n   $b =~ s/^STRING//;  \n   foo($a) cmp foo($b)     \n} @a;  \n</code></pre>\n\n<p>Although the comparison and order is correct, the prefix string is being removed from the output.<br>\nThe following keeps the prefix string (as I wanted).  </p>\n\n<pre><code>print for sort { \n   $x = a;  \n   $y = b;  \n   $x =~ s/^STRING//;  \n   $y =~ s/^STRING//;  \n   foo($x) cmp foo($y)     \n} @a;    \n</code></pre>\n\n<p>But I am confused how the second part keeps the prefix.<br>\nIs it doing a copy of the string and in the case of the array strips the original reference?<br>\nAlso am I doing something wrong in the first snippet and end up with the issue?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525338254, "post_id": 50149057, "comment_id": 87319772, "body": "You might want to explain what <i>supremum</i> means for non-native English speakers, like both of us. :)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1525340656, "post_id": 50149057, "comment_id": 87321354, "body": "Supremum is a maths term, it&#39;s like the maximum, but it doesn&#39;t have to be part of the set, i.e. <code>rand 20</code> generates numbers <code>0 &lt;= x &lt; 20</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1525331842, "creation_date": 1525331842, "answer_id": 50149057, "question_id": 50148963, "link": "https://stackoverflow.com/questions/50148963/how-to-round-off-ten-random-numbers-in-array/50149057#50149057", "title": "How to round off ten random numbers in array?", "body": "<p><a href=\"http://p3rl.org/rand\" rel=\"nofollow noreferrer\">rand</a> can take a parameter that specifies the supremum of the generated numbers. Just call <a href=\"http://p3rl.org/int\" rel=\"nofollow noreferrer\">int</a> to truncate it:</p>\n\n<pre><code>my @randoms = map int rand 20, 1 .. 10;\n</code></pre>\n\n<p>It generates numbers in the range 0 .. 19.</p>\n"}], "owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1525331842, "creation_date": 1525331561, "question_id": 50148963, "link": "https://stackoverflow.com/questions/50148963/how-to-round-off-ten-random-numbers-in-array", "title": "How to round off ten random numbers in array?", "body": "<p>Trying to generate ten numbers which are random and without decimal point.</p>\n\n<p><code>my @randoms = map { rand } (1..10)</code></p>\n\n<p>This code returns ten random numbers yet with decimal like \n0.218220758325518. </p>\n\n<p>I want round off these numbers. </p>\n\n<p>Need a help. Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525311428, "post_id": 50145350, "comment_id": 87309547, "body": "<i>&quot;the nth element of the anonymous array <code>$anon</code> over the <code>$aref</code> variable&quot;</i> What does <i>&quot;over the <code>$aref</code> variable&quot;</i> mean?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525311594, "post_id": 50145350, "comment_id": 87309582, "body": "<i>&quot;I wanted to get the 3rd element of $anon by making the index 2 but it returned nothing&quot;</i> No subroutine can return <i>nothing</i> and no variable can contain <i>nothing</i>. What do you mean here?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1525314298, "post_id": 50145350, "comment_id": 87310198, "body": "<code>[ LIST ]</code> is basically short for <code>do { my @a = LIST; \\@a }</code>, so you have <code>my @x = (1,3,5,7,9); my $anon = \\@anon; my $y = \\$anon; my @z = ($y); my $aref = \\@z;</code> and you would need <code>${ ${ ${ $aref }[0] } }[2]</code> or <code>$aref-&gt;[0]-&gt;$*-&gt;[2]</code> for that wacky data structure. Of course, you should be using <code>my @array  = (1,3,5,7,9); my $anon = \\@array;</code> with <code>$ { $aref } [2]</code> or <code>$aref-&gt;[2]</code>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525330688, "post_id": 50145350, "comment_id": 87315471, "body": "@Borodin What does &quot;over the $aref variable&quot; mean? Sorry for the late reply (I had to go bed after I posted the question) I mean iterating over the <code>$anon</code> using another variable such as <code>$aref</code> so that I can loop over and process the elements of <code>$anon</code>"}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525333081, "post_id": 50145350, "comment_id": 87316656, "body": "@Borodin No subroutine can return nothing and no variable can contain nothing. What do you mean here? I meant space. On the console output, it returned without any error but because it didn&#39;t output any element I called it simply nothing."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525338461, "post_id": 50145350, "comment_id": 87319899, "body": "The way you changed the code now invalidates the answers. What you have there now is just an array. <code>qw()</code> returns a list of quoted words. The fact that you chose <code>[</code> as the delimiter doesn&#39;t make that list an array reference. Your <code>@area</code> will just be a flat array with elements <code>1, 3, 5, 7, 9, 2, 4, 6, 8, 0, &#39;a&#39;, &#39;e&#39;, ...</code>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525339245, "post_id": 50145350, "comment_id": 87320388, "body": "@simbabque How to make the words returned by <code>qw( )</code> arrays and/or array references so that I can access for instance <code>1, 3, 5, 7, 9</code> , <code>2, 4, 6, 8, 0</code> separately? How to avoid making a flat array meanwhile?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525339311, "post_id": 50145350, "comment_id": 87320437, "body": "<code>my @foo = ( [ qw&#47;a b c&#47; ], [ qw&#47;1 2 3&#47; ], ... )</code> \u2013 you should really read <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525341376, "post_id": 50145350, "comment_id": 87321825, "body": "@simbabque Actually I read Programming Perl 4th edition, particularly the 8th chapter called &#39;References&#39;. That part which you added square brackets to <code>qw&#47;a b c&#47;</code> expressions  seems to solve the problem. The 8th chapter of the book and the perlreftut just didn&#39;t give information on that particular case, i.e. how to make <code>qw( )</code> block a distinct array."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525341532, "post_id": 50145350, "comment_id": 87321920, "body": "<code>qw()</code> is not a block. In programming, the right terminology is very important, so we know what we&#39;re talking about. <code>qw()</code> returns a <i>list</i>. And a list is not an array either in Perl. Essentially you can assign the list to an array variable, and you can stick a list into an anonymous array reference, but you cannot take the reference of a list. Give it some practice and you&#39;ll quickly get the hang of this. Knowing when to use <code>[]</code>, <code>{}</code> or neither and how to stick those into each other will come naturally after a while. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525341691, "post_id": 50145350, "comment_id": 87322045, "body": "Also take a look at <a href=\"https://stackoverflow.com/a/14006130/1331451\">stackoverflow.com/a/14006130/1331451</a> and <a href=\"https://stackoverflow.com/a/6024268/1331451\">stackoverflow.com/a/6024268/1331451</a> and <a href=\"https://www.effectiveperlprogramming.com/2010/01/whats-the-difference-between-a-list-and-an-array/\" rel=\"nofollow noreferrer\">effectiveperlprogramming.com/2010/01/&hellip;</a>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525344268, "post_id": 50145350, "comment_id": 87323681, "body": "@simbabque I took a look at the links; they&#39;re so helpful. so it seems I basically got stuck trying to take a reference of the list returned by <code>qw( )</code> The trick is to enclose <code>qw</code> in brackets (in par with your previous comment) and I couldn&#39;t find it though I browsed various posts, articles, tutorials."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525344978, "post_id": 50145350, "comment_id": 87324149, "body": "Well the point is, you cannot take a reference of a list. You stick a list into an anonymous array reference. The list is just several pieces of information together, while an array is giving them a name, and a reference to an array is turning that array into a scalar pointer-like thing that you can pass around without copying all the values in the array all the time."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1525374096, "post_id": 50145350, "comment_id": 87342202, "body": "It would help if we knew what you were trying to do with the data. Looking at the data structure you provided, it reminds me a lot of <a href=\"https://metacpan.org/pod/Spreadsheet::ParseExcel\" rel=\"nofollow noreferrer\">Spreadsheet::ParseExcel</a> where you use two arrays to loop through the rows and columns of a spreadsheet to determine the coordinates of each cell. Take a look at the synopsis of the module and see if it&#39;s close to what you&#39;re trying to accomplish."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525311237, "post_id": 50145468, "comment_id": 87309491, "body": "Please check your code before posting. <code>$aref-&gt;[0]</code> is the <i>scalar</i> <code>\\$anon</code> and won&#39;t take kindly to being indexed. Your suggestion will cause a <b><i>Not an ARRAY reference</i></b> warning. You should think twice if the answer to a question seems obvious."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525312071, "post_id": 50145468, "comment_id": 87309689, "body": "Ah, I missed the double reference. Thanks @Borodin. I&#39;ve updated my answer."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1525334094, "post_id": 50145468, "comment_id": 87317251, "body": "Thank you for the reply. I added the rationale behind my question. I&#39;d like to iterate over the array elements of an array inside a loop so that I can process them. I have to use <code>qw</code> to make the arrays look simple and readable, but when I use <code>qw</code>, it looks like the array becomes anonymous. That&#39;s why I tried to get the nth element of those anonymous arrays using a dereference operator."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1525334461, "post_id": 50145468, "comment_id": 87317467, "body": "@Romario In your updated example, you actually end up with a one-dimensional, flattened array. I suggest you use something like Data::Dumper to inspect your data structures to see what&#39;s actually happening. <code>use Data::Dumper; die Dumper(\\@area);</code> My advice about reading perllol stands!"}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1525337217, "post_id": 50145468, "comment_id": 87319087, "body": "@mwp Yes it&#39;s kind of a one-dimensional array and I just can&#39;t do any proper iteration yet operation on it.  I&#39;ve tried making it like <a href=\"http://oi65.tinypic.com/307qnox.jpg\" rel=\"nofollow noreferrer\">oi65.tinypic.com/307qnox.jpg</a> (screenshot) but still got difficulties iterating. I had added Data::Dumper but couldn&#39;t get any useful information of it so I gave up using it."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1525312371, "last_edit_date": 1525312371, "creation_date": 1525308913, "answer_id": 50145468, "question_id": 50145350, "link": "https://stackoverflow.com/questions/50145350/how-can-i-get-the-nth-element-of-a-dereferenced-anonymous-array/50145468#50145468", "title": "How can I get the nth element of a dereferenced anonymous array?", "body": "<p>You have a classic list-of-lists data structure, with a twist. You need to fetch the first element of the outer array reference, given by <code>$aref</code>, dereference the result, and then fetch the <em>n</em>th element of the inner array reference returned by that expression. This should do the trick:</p>\n\n<pre><code>${ $aref-&gt;[0] }-&gt;[2]\n</code></pre>\n\n<p>You may want to read through <a href=\"https://perldoc.perl.org/perllol.html\" rel=\"nofollow noreferrer\">perllol</a> and possibly even <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> for more information and ideas. If you have control over this data structure, there are better ways to build it. For example, if it were built like so:</p>\n\n<pre><code>my $anon = [1, 3, 5, 7, 9]; # a reference to an anonymous array\nmy $aref = [$anon]; # a reference to an anonymous array containing only the above reference\n</code></pre>\n\n<p>You could simply do:</p>\n\n<pre><code>$aref-&gt;[0][2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1525333897, "post_id": 50145613, "comment_id": 87317123, "body": "Thank you for the reply. I added the rationale. I&#39;d like to iterate over the array elements of an array inside a loop so that I can process them. I have to use <code>qw</code> to make it look simple and readable, but when I use <code>qw</code>, it looks like the array becomes anonymous. I&#39;d like to iterate over those anonymous arrays and their elements."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1525310397, "last_edit_date": 1525310397, "creation_date": 1525309995, "answer_id": 50145613, "question_id": 50145350, "link": "https://stackoverflow.com/questions/50145350/how-can-i-get-the-nth-element-of-a-dereferenced-anonymous-array/50145613#50145613", "title": "How can I get the nth element of a dereferenced anonymous array?", "body": "<blockquote>\n  <p>How can I get the nth element of a dereferenced anonymous array?</p>\n</blockquote>\n\n<p>You have too many <em>reference to</em> operators. You have built a nested structure three levels deep and it's no wonder you're having trouble navigating it</p>\n\n<p>The problem is that your <code>$anon</code> is already a <em>reference to an anonymous array</em>. Square brackets <code>[...]</code> construct an anonymous array and return a reference to it</p>\n\n<p>You then have</p>\n\n<pre><code>my $aref  = [\\$anon]\n</code></pre>\n\n<p>which creates another reference to an array with one element: a reference to the <em>scalar</em> <code>$anon</code>.</p>\n\n<p>So you have built this</p>\n\n<pre><code>$anon = [1, 3, 5, 7, 9]\n\n$aref = [ \\ [1, 3, 5, 7, 9] ]\n</code></pre>\n\n<p>So</p>\n\n<pre><code>${$aref}[0]          is \\ [1, 3, 5, 7, 9]\n${${$aref}[0]}       is [1, 3, 5, 7, 9]\n${${${$aref}[0]}}[2] is 5\n</code></pre>\n\n<p>But why are you working with references to arrays at all, and especially references to scalars? It would be best to begin with an ordinary array, and write</p>\n\n<pre><code>my @array = ( 1, 3, 5, 7, 9 );\nmy $aref = \\@array;\n\nprint $aref-&gt;[2];\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>5\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1598211264, "creation_date": 1525307676, "last_edit_date": 1598211264, "question_id": 50145350, "link": "https://stackoverflow.com/questions/50145350/how-can-i-get-the-nth-element-of-a-dereferenced-anonymous-array", "title": "How can I get the nth element of a dereferenced anonymous array?", "body": "<pre><code>use strict;\n\nmy $anon = [1,3,5,7,9];\nmy $aref  = [\\$anon];\n\nprint &quot;3rd element: &quot;  . $ { $aref } [2] . &quot;\\n&quot;;\n</code></pre>\n<p>I'd like to get the nth element of the anonymous array <code>$anon</code> over the <code>$aref</code> variable. In the code I wanted to get the 3rd element of <code>$anon</code> by making the index 2 but it returned nothing. If I write  <code>$ { $aref } [0]</code> then it returns something like REF(0x7fd459027ac0)</p>\n<p>How can I get the nth, for example the 3rd element of <code>$anon</code> ?</p>\n<p>Rationale:</p>\n<pre><code>my @area = (\n    qw[1 3 5 7 9],\n    qw[2 4 6 8 0],\n    qw[a e i u o],\n    qw[b c d f g]\n    );\n\nforeach my $row (@area) {\n    foreach my $cell (@$row)\n    {\n    # do some processing on the element\n    print $cell . &quot; &quot;;\n    }\n    print &quot;\\n&quot;;\n}\n</code></pre>\n"}]