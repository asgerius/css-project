[{"tags": ["python", "perl", "shell", "subprocess"], "comments": [{"owner": {"reputation": 343895, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1435839428, "post_id": 31173136, "comment_id": 50374065, "body": "related: here&#39;s how you could <a href=\"http://stackoverflow.com/a/23795689/4279\">play a guessing game using <code>pexpect</code> or <code>subprocess</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 343895, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1435839251, "post_id": 31173187, "comment_id": 50373902, "body": "or <code>output, status = pexpect.run(&#39;perl foo.pl&#39;, withexitstatus=1, events={&#39;(?i)user:&#39;: &#39;my_username&#39;, &#39;(?i)password:&#39;: &#39;my_password&#39;})</code>"}], "tags": [], "owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "is_accepted": false, "score": 3, "last_activity_date": 1435839309, "last_edit_date": 1435839309, "creation_date": 1435792563, "answer_id": 31173187, "question_id": 31173136, "link": "https://stackoverflow.com/questions/31173136/python-calling-perl-script/31173187#31173187", "title": "Python calling Perl Script", "body": "<p>check out <a href=\"https://pexpect.readthedocs.org\" rel=\"nofollow\">the pexpect module</a>.  It does exactly what you want, for example:</p>\n\n<pre><code>child = pexpect.spawn('perl foo.pl')\nchild.expect('User:')\nchild.sendline('my_username')\nchild.expect('Password:')\nchild.sendline('my_password')\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 5071607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142040ecd78c5349c04779b953f38731?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5071607/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435839309, "creation_date": 1435792180, "question_id": 31173136, "link": "https://stackoverflow.com/questions/31173136/python-calling-perl-script", "title": "Python calling Perl Script", "body": "<p>So when I run my Perl script on command line, it will ask for </p>\n\n<p>User: (type name and press enter)</p>\n\n<p>Password: (then it will ask for password and then I press enter)\nthen I can run commands</p>\n\n<p>So if you see, that is a sequence of steps</p>\n\n<p>I know when you use the subproccess commands, I can call a script and have it run. But once Python runs the command, how do you continue to type in the user password after typing in user? When I ran it using \"subprocess.call(command, shell=True)\" Pycharm ask for \"User:\" and when I type it in, it freezes.</p>\n\n<p>If possible, I want to configure python to put in my login info into the script and then run a command. I've done something like this in the past but it just ran the script and outputed the data. This perl script requires me to logon before I can output data which is where im having problems. </p>\n"}, {"tags": ["linux", "bash", "perl", "ssh", "scp"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435793146, "post_id": 31173025, "comment_id": 50354225, "body": "You need to create the matching directory structure on the remote end? It doesn&#39;t already exist?"}, {"owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435793444, "post_id": 31173025, "comment_id": 50354307, "body": "Yes my script does this sort of"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435793607, "post_id": 31173025, "comment_id": 50354335, "body": "Yes, I saw that it did but I was checking that that was necessary. That requirement means you can&#39;t just use scp for this since it won&#39;t do that. Which means <code>tar</code> is likely the best option if you can&#39;t use something <code>rsync</code>."}, {"owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "edited": false, "score": 0, "creation_date": 1435820534, "post_id": 31173025, "comment_id": 50361781, "body": "Did you try setting <code>--protocol=...</code> on rsync to match the remote?"}, {"owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "reply_to_user": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "edited": false, "score": 0, "creation_date": 1435843808, "post_id": 31173025, "comment_id": 50377271, "body": "@meuh In the vast majority of cases the protocol mismatch error has nothing to do with <code>rsync</code> protocol, and is typically caused by the remote shell&#39;s profile printing things upon login for non-interactive shells."}], "answers": [{"tags": [], "owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "is_accepted": true, "score": 1, "last_activity_date": 1435813709, "creation_date": 1435813709, "answer_id": 31175996, "question_id": 31173025, "link": "https://stackoverflow.com/questions/31173025/select-scp-copy/31175996#31175996", "title": "Select SCP Copy", "body": "<p>Assuming your filenames don't contain newlines, you can do it with <code>cpio(1)</code>:</p>\n\n<pre><code>find . -type f \\( -name '*.sh' -o -name '*.[jw]ar' \\) -print | \\\n    cpio -oa | \\\n    ssh \"${USER}@${MACHINE}\" \"cd ${remotePrefix}; cpio -idm\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 0, "last_activity_date": 1435935978, "creation_date": 1435935978, "answer_id": 31209825, "question_id": 31173025, "link": "https://stackoverflow.com/questions/31173025/select-scp-copy/31209825#31209825", "title": "Select SCP Copy", "body": "<p>use <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow\">Net::SFTP::Foreign</a>:</p>\n\n<pre><code>use Net::SFTP::Foreign;\nmy $sftp = Net::SFTP::Foreign-&gt;new($host, user =&gt; $user);\n$sftp-&gt;rput('.', $remote_prefix,\n            wanted =&gt; qr/\\.(?:sh|war|jar)$/);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5042589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e207e31844bf506774a4ea2a6c92aa2d?s=128&d=identicon&r=PG&f=1", "display_name": "CheesyMacHack", "link": "https://stackoverflow.com/users/5042589/cheesymachack"}, "is_accepted": false, "score": 1, "last_activity_date": 1444850689, "creation_date": 1444850689, "answer_id": 33133905, "question_id": 31173025, "link": "https://stackoverflow.com/questions/31173025/select-scp-copy/33133905#33133905", "title": "Select SCP Copy", "body": "<p>kinda old post but i just had a similar task and after some research came up with this in bash, uses sshpass to allow inline ssh usage, the base dir exists on both local and remote server.  The new file directories will be created on the remote server. This is called like: <code>script fid src-base-dir</code></p>\n\n<pre><code>#!/bin/bash\n\nfid=$1;  \nbasedir=$2;\n\n##myfiles are fixed 10 numeric files stored in respective directories starting at the 6th pos\n##eg dir 1234560000 for files 1234560000.file - 1234569999.file\n\ndir=${fid:0:6}0000;     ## modify for your directory type or use other shell substring  \nfpath=$dir/$fid.file;   ## here you could expand bash to specify extensions or all eg $dir/$fid.{csv,jpg,js}\n\nif [ -a \"$basedir/$fpath\" ]\nthen\n    rDir=$(sshpass -e ssh -p &lt;myport&gt; &lt;user&gt;@&lt;server&gt; \"ls '$basdir/$dir' 2&gt;&amp;1 &gt; /dev/null \");\n    if [[ ! -z $rDir ]];        \n    then\n        sshpass -e ssh -p &lt;myport&gt; &lt;user&gt;@&lt;server&gt; \"mkdir '$basedir/$dir'\";\n        sshpass -e scp -P &lt;myport&gt; $basedir/$fpath &lt;user&gt;@&lt;server&gt;:\"$basedir/$fpath\";\n    else\n        sshpass -e scp -P &lt;myport&gt; $basedir/$fpath &lt;user&gt;@&lt;server&gt;:\"$basedir/$fpath\";\n    fi\nelse\n    echo $basedir/$fpath no exist!!\nfi\n</code></pre>\n"}], "owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 31175996, "answer_count": 3, "score": 0, "last_activity_date": 1444850689, "creation_date": 1435791438, "last_edit_date": 1592644375, "question_id": 31173025, "link": "https://stackoverflow.com/questions/31173025/select-scp-copy", "title": "Select SCP Copy", "body": "<p>I've seen an example that used RSYNC and SSH to do this, however in my specific case I could not get this working - it gave me some error about protocol versions</p>\n<p>I'd like to copy over all files of type <code>.sh</code>, <code>.jar</code>, <code>.war</code> from a directory structure over to a remote host that is a 2 hop (ssh with proxy) ssh away.</p>\n<p>I'm not sure of the best way to do this.  Would it be with SCP or some sort of bash script?</p>\n<h3>What I know:</h3>\n<pre><code>find . | grep &quot;\\.sh&quot;\n</code></pre>\n<p>will give me a nice list of files and i can probably use <code>xargs</code> to do something with them.</p>\n<p>I guess some options would be to create a <code>tar.gz</code> file and <code>scp</code> it over, or perhaps write a little bash script to do individual SCP-ing?</p>\n<p>I came up with this terrible way to do this with perl but its REALLY slow</p>\n<pre><code>my $find = `find .`;\n\nmy $remote = &quot;USER\\@MACHINE:&quot;;\n\nmy $remotePrefix = &quot;/devel/test&quot;;\n\n\nmy @files = split('\\n', $find);\n\nforeach (@files) {\n\n    if (/(.*\\/)([^\\/]*\\.sh)$/ or\n        /(.*\\/)([^\\/]*\\.jar)$/ or\n        /(.*\\/)([^\\/]*\\.war)$/\n        ) {\n\n        my $fullPath = $_;\n        my $directory = $1;\n        my $file = $2;\n    \n\n    # print &quot;$fullPath =&gt; $directory   ||     $file\\n&quot;;\n\n    $cmd1 = qq(ssh USER\\@MACHINE mkdir -p $remotePrefix$directory);\n    $cmd2 = qq(scp $_ $remote$remotePrefix$_);\n\n\n    `$cmd1`;\n    `$cmd2`;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435828144, "post_id": 31172849, "comment_id": 50366426, "body": "Looks like you&#39;re fiddling with XML. Is it? If so, there&#39;s probably an <code>XML::Twig</code> one liner."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 2762725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cbcadfb216af8aa55e075227a586ee94?s=128&d=identicon&r=PG&f=1", "display_name": "eric kulcyk", "link": "https://stackoverflow.com/users/2762725/eric-kulcyk"}, "edited": false, "score": 0, "creation_date": 1435792474, "post_id": 31172930, "comment_id": 50354058, "body": "Where do I add the replaces then?"}, {"owner": {"reputation": 151, "user_id": 2762725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cbcadfb216af8aa55e075227a586ee94?s=128&d=identicon&r=PG&f=1", "display_name": "eric kulcyk", "link": "https://stackoverflow.com/users/2762725/eric-kulcyk"}, "edited": false, "score": 0, "creation_date": 1435792480, "post_id": 31172930, "comment_id": 50354060, "body": "$line =~ s/\\&lt;Foo\\&gt;(.*)\\&lt;\\/Foo\\&gt;/\\&lt;Foo\\&gt;$version\\&lt;\\/Foo\\&gt;/;         $line =~ s/\\&lt;Bar\\&gt;(.*)\\&lt;\\/Bar\\&gt;/\\&lt;Bar\\&gt;$revision\\&lt;\\/Bar\\&gt;/;"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 151, "user_id": 2762725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cbcadfb216af8aa55e075227a586ee94?s=128&d=identicon&r=PG&f=1", "display_name": "eric kulcyk", "link": "https://stackoverflow.com/users/2762725/eric-kulcyk"}, "edited": false, "score": 0, "creation_date": 1435830536, "post_id": 31172930, "comment_id": 50368200, "body": "&#39;replace string&#39; is already declared in my snippet. The substitution skeleton is <code>s&#47;&#47;&#47;</code>"}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 0, "last_activity_date": 1435790775, "creation_date": 1435790775, "answer_id": 31172930, "question_id": 31172849, "link": "https://stackoverflow.com/questions/31172849/perl-find-and-replace-one-liner/31172930#31172930", "title": "Perl find and replace one liner", "body": "<p>Try this :</p>\n\n<pre><code>perl -i.bak -pe 's/\\d+\\.\\d+\\.\\d+\\.1000\\b/1000/g' *.config\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 2762725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cbcadfb216af8aa55e075227a586ee94?s=128&d=identicon&r=PG&f=1", "display_name": "eric kulcyk", "link": "https://stackoverflow.com/users/2762725/eric-kulcyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435790775, "creation_date": 1435790306, "question_id": 31172849, "link": "https://stackoverflow.com/questions/31172849/perl-find-and-replace-one-liner", "title": "Perl find and replace one liner", "body": "<p>I've been looking at the other find and replace questions on Perl, and I'm not sure how exactly to implement this variation in one line.  The only difference is that I want to replace two things, one is the original, and one is the replacing a modification of the original string.  The code I have in a pm module is:</p>\n\n<pre><code>my $num_args = $#ARGV + 1;\nif ($num_args != 2) {\n    print \"\\nUsage: pscript.pm path to file [VERSION]\\n\";\n    exit;\n}\n\nmy $version = $ARGV[1];\nmy $revision = $ARGV[1];\n$revision =~ s/.*\\.//g;\nopen ($inHandle, \"&lt;\", $ARGV[0]) or die $^E;\nopen ($outHandle, \"&gt;\", \"$ARGV[0].mod\") or die $^E;\nwhile(my $line = &lt;$inHandle&gt;)\n{\n        $line =~ s/\\&lt;Foo\\&gt;(.*)\\&lt;\\/Foo\\&gt;/\\&lt;Foo\\&gt;$version\\&lt;\\/Foo\\&gt;/;\n        $line =~ s/\\&lt;Bar\\&gt;(.*)\\&lt;\\/Bar\\&gt;/\\&lt;Bar\\&gt;$revision\\&lt;\\/Bar\\&gt;/;\n        print $outHandle $line;\n}\n\nclose $inHandle;\nclose $outHandle;\n\nunlink $ARGV[0];\nrename \"$ARGV[0].mod\", $ARGV[0];\n</code></pre>\n\n<p>What is different is:</p>\n\n<pre><code>$revision =~ s/.*\\.//g;\n</code></pre>\n\n<p>which turns the version X.X.X.1000 into just 1000, and then uses that for the find and replace.</p>\n\n<p>Can this be done using the</p>\n\n<pre><code>perl -i.bak  -p -e 's/old/new/g;' *.config\n</code></pre>\n\n<p>format?</p>\n"}, {"tags": ["html", "xml", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1435871814, "post_id": 31172181, "comment_id": 50394127, "body": "You shouldn&#39;t use an ampersand <code>&amp;</code> when you are calling Perl subroutines -- just <code>my $header = getXHTMLHeader()</code> is correct. And you shouldn&#39;t use prototypes when you are defining subroutines -- those <code>()</code> after the subroutine names make sure that no parameters are ever passed, which isn&#39;t what you want at all. Just <code>sub start { ... }</code> is correct. And you should reserve capital letters for global identifiers such as package names -- local identifiers should consist of lower-case letters, decimal digits and underscores"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435872018, "post_id": 31172181, "comment_id": 50394252, "body": "It would help a lot if you showed the actual HTML that you wanted as output"}], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "edited": false, "score": 0, "creation_date": 1435856676, "post_id": 31172922, "comment_id": 50386120, "body": "Thanks a lot xxfelixxx. I used your quick and dirty way and it gets the job done perfectly. I am trying to understand the following line though, which I think is doing pattern matching and something more, like getting the specific part of $line into $tag and $value strings:  my ($tag, $value) = $line =~ m|\\s+&lt;(.+?)&gt;(.+)&lt;|;"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "edited": false, "score": 0, "creation_date": 1435869156, "post_id": 31172922, "comment_id": 50392960, "body": "1. store into variables $tag and $value 2. the result of the pattern match of $line 3. matching spaces followed by a &#39;&lt;&#39; followed by anything 4. capture the &#39;anything&#39;, it goes into $tag 5. matching &#39;&gt;&#39; followed by anything 6. capture the &#39;anything&#39; it goes into $value 7. followed by &#39;&lt;&#39;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1436174141, "post_id": 31172922, "comment_id": 50481577, "body": "Hmm... parsing XML with a regex. That <i>never</i> goes wrong :-/"}, {"owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "edited": false, "score": 0, "creation_date": 1436216531, "post_id": 31172922, "comment_id": 50508087, "body": "Dave, I tried to install Template module so I could use LibXML instead of using regex, but found that CPAN is not installed (or at least not working now) on the Linux box that I am using. But I&#39;ll get CPAN working and will use LibXML for parsing as it&#39;ll be a more reliable way and good learning for me as well."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1436533243, "post_id": 31172922, "comment_id": 50666864, "body": "The absence of the Tempalte Toolkit won&#39;t stop you from using XML::LibXML for parsing the XML. You&#39;ll just need to use a different approach for creating your output."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1435870883, "last_edit_date": 1435870883, "creation_date": 1435790751, "answer_id": 31172922, "question_id": 31172181, "link": "https://stackoverflow.com/questions/31172181/how-to-convert-tag-names-and-values-from-xml-into-html-using-perl/31172922#31172922", "title": "How to convert tag names and values from XML into HTML using Perl", "body": "<p>The quick and dirty way is to just use a regular expression.  However it comes with the risk of missing some data and getting burned by edge cases.  But since you asked for it...</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\n\nopen my $fh, 'filename.xml'\n    or die \"unable to open filename.xml : $!\";\nmy $count = 1;\nprint \"&lt;head&gt;&lt;title&gt;'Output of snmpwalk for cpeIP4'&lt;/title&gt;&lt;/head&gt;\\n\";\nprint \"&lt;body&gt;&lt;h2&gt;'Output of snmpwalk for cpeIP4'&lt;/h2&gt;\\n\";\nprint \"&lt;table summary='Output of snmpwalk for cpeIP4'&gt;&lt;tr&gt;&lt;th&gt;Tag Name&lt;/th&gt;&lt;th&gt;Tag Value&lt;/th&gt;&lt;/tr&gt;\\n\";\nwhile (my $line = &lt;$fh&gt;) {\n    next unless $line =~ m|&lt;eSTB|;\n    # Store into into $tag and $value\n    # the result of matching whitespace, followed by '&lt;'\n    # followed by anything (store into $tag)\n    # followed by '&gt;'\n    # followed by anything (store into $value)\n    # followed by '&lt;'\n    my ($tag, $value) = $line =~ m|\\s+&lt;(.+?)&gt;(.+?)&lt;|;\n    print \"&lt;tr&gt;&lt;td&gt;\" . $count++ . \". $tag&lt;/td&gt;&lt;td&gt;$value&lt;/td&gt;&lt;/tr&gt;\\n\";\n}\nprint \"&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;\\n\";\n</code></pre>\n\n<p>Produces the following:</p>\n\n<pre><code>&lt;head&gt;&lt;title&gt;'Output of snmpwalk for cpeIP4'&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;&lt;h2&gt;'Output of snmpwalk for cpeIP4'&lt;/h2&gt;\n&lt;table summary='Output of snmpwalk for cpeIP4'&gt;&lt;tr&gt;&lt;th&gt;Tag Name&lt;/th&gt;&lt;th&gt;Tag Value&lt;/th&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;1. eSTBGeneralErrorCode.0&lt;/td&gt;&lt;td&gt;INTEGER: 0&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;2. eSTBGeneralConnectedState.0&lt;/td&gt;&lt;td&gt;INTEGER: true(1)&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;3. eSTBGeneralPlatformID.0&lt;/td&gt;&lt;td&gt;INTEGER: 2076&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;4. eSTBGeneralFamilyID.0&lt;/td&gt;&lt;td&gt;INTEGER: 25&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;5. eSTBGeneralModelID.0&lt;/td&gt;&lt;td&gt;INTEGER: 60436&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;6. eSTBMoCAMACAddress.0&lt;/td&gt;&lt;td&gt;STRING: 0:0:0:0:0:0&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;7. eSTBMoCANumberOfNodes.0&lt;/td&gt;&lt;td&gt;INTEGER: 0&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "edited": false, "score": 0, "creation_date": 1435856636, "post_id": 31182594, "comment_id": 50386097, "body": "Thank you Dave. I agree that the solution you provided is too neat and simple than what I was trying. I think I don&#39;t have supporting module for &quot;Template&quot; though. I am getting error as: Can&#39;t locate Template.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at Call_to_snmpwalk_V_8.pl line 14. BEGIN failed--compilation aborted at Call_to_snmpwalk_V_8.pl line 14. I am trying to find how I can correct this error. I have already included use 5.010 and I am on perl v5.10.1"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "edited": false, "score": 0, "creation_date": 1435860837, "post_id": 31182594, "comment_id": 50388478, "body": "Sounds like you don&#39;t have the Template module installed. You just need to install it by whatever means you use to install CPAN modules."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1435911762, "last_edit_date": 1435911762, "creation_date": 1435834449, "answer_id": 31182594, "question_id": 31172181, "link": "https://stackoverflow.com/questions/31172181/how-to-convert-tag-names-and-values-from-xml-into-html-using-perl/31182594#31182594", "title": "How to convert tag names and values from XML into HTML using Perl", "body": "<p>Firstly, I think you're using the wrong tool for this. I always find <a href=\"https://metacpan.org/release/XML-LibXML\" rel=\"nofollow\">XML::LibXML</a> far easier to use than XML::Parser. You load XML::LibXML, but you never make use of it.</p>\n\n<p>Secondly, I think you'll find your live is easier if you think of this as two stages - one to extract the data and one to output the new data.</p>\n\n<p>Here's the first stage, which stores the data you need in an array.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse XML::LibXML;\nuse Data::Dumper;\n\nmy $file = shift || die \"Must give XML file\\n\";\n\nmy $parser = XML::LibXML-&gt;new();\nmy $doc = $parser-&gt;parse_file($file);\n\nmy @tags;\n\n# Find the nodes using an XPath expression\nforeach ($doc-&gt;findnodes('//GI-eSTB-MIB-NPH/*')) {\n  push @tags, { name =&gt; $_-&gt;nodeName, content =&gt; $_-&gt;textContent };\n}\n\n# Just here to show the intermediate data structure\nsay Dumper \\@tags;\n</code></pre>\n\n<p>You then need to use <code>@tags</code> to generate your output. For over fifteen years we've know that it's a terrible idea to include hard-coded HTML in amongst your Perl code, so I'd highly recommend looking at a templating system like the <a href=\"https://metacpan.org/release/XML-LibXML\" rel=\"nofollow\">Template Toolkit</a>.</p>\n\n<p>I created a <code>xml.tt</code> file like this:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Output of snmpwalk for cpeIP4&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;&lt;h2&gt;Output of snmpwalk for cpeIP4&lt;/h2&gt;\n&lt;table summary='Output of snmpwalk for cpeIP4'&gt;\n&lt;tr&gt;\n&lt;th&gt;Tag Name&lt;/th&gt;&lt;th&gt;Tag Value&lt;/th&gt;&lt;\n/tr&gt;\n[% FOREACH tag IN tags -%]\n&lt;tr&gt;&lt;td&gt;[% loop.count %]. [% tag.name %]&lt;/td&gt;&lt;td&gt;[% tag.content %]&lt;/td&gt;&lt;/tr&gt;\n[% END -%]\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And then the second half of my program looks like this:</p>\n\n<pre><code>use Template;\n\nmy $tt = Template-&gt;new;\n$tt-&gt;process('xml.tt', { tags =&gt; \\@tags });\n</code></pre>\n\n<p>I hope you agree that all looks a lot simpler than your approach.</p>\n"}], "owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 31172922, "answer_count": 2, "score": 1, "last_activity_date": 1435911762, "creation_date": 1435786833, "last_edit_date": 1435872076, "question_id": 31172181, "link": "https://stackoverflow.com/questions/31172181/how-to-convert-tag-names-and-values-from-xml-into-html-using-perl", "title": "How to convert tag names and values from XML into HTML using Perl", "body": "<p>Is there any way to convert a simple XML document into HTML using Perl that would give me a table of tag names and tag values?</p>\n\n<p>The XML file <code>output.xml</code> is like this</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;doc&gt;\n    &lt;GI-eSTB-MIB-NPH&gt;\n        &lt;eSTBGeneralErrorCode.0&gt;INTEGER: 0&lt;/eSTBGeneralErrorCode.0&gt;\n        &lt;eSTBGeneralConnectedState.0&gt;INTEGER: true(1)&lt;/eSTBGeneralConnectedState.0&gt;\n        &lt;eSTBGeneralPlatformID.0&gt;INTEGER: 2076&lt;/eSTBGeneralPlatformID.0&gt;\n        &lt;eSTBGeneralFamilyID.0&gt;INTEGER: 25&lt;/eSTBGeneralFamilyID.0&gt;\n        &lt;eSTBGeneralModelID.0&gt;INTEGER: 60436&lt;/eSTBGeneralModelID.0&gt;\n        &lt;eSTBMoCAMACAddress.0&gt;STRING: 0:0:0:0:0:0&lt;/eSTBMoCAMACAddress.0&gt;\n        &lt;eSTBMoCANumberOfNodes.0&gt;INTEGER: 0&lt;/eSTBMoCANumberOfNodes.0&gt;\n    &lt;/GI-eSTB-MIB-NPH&gt;\n&lt;/doc&gt;\n</code></pre>\n\n<p>I am trying to create HTML which looks like this</p>\n\n<pre><code>1. eSTBGeneralPlatformID.0 - INTEGER: 2076\n2. eSTBGeneralFamilyID.0 - INTEGER: 25\n3. \n</code></pre>\n\n<p>I was trying to use code from the web but I am really having a hard time understanding how to generate the required format for HTML tags.</p>\n\n<p>What I was trying was this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Parser;\nuse XML::LibXML;\n\n#Add TagNumberConversion.pl here\n\nmy $parser = XML::Parser-&gt;new();\n$parser-&gt;setHandlers(\n    Start =&gt; \\&amp;start,\n    End   =&gt; \\&amp;end,\n    Char  =&gt; \\&amp;char,\n    Proc  =&gt; \\&amp;proc,\n);\n\nmy $header = &amp;getXHTMLHeader();\nprint $header;\n\n$parser-&gt;parsefile( '20150630104826.xml' );\n\nmy $currentTag = \"\";\n\nsub start() {\n\n    my ( $parser, $name, %attr ) = @_;\n    $currentTag = $name;\n\n    if ( $currentTag eq 'doc' ) {\n        print \"&lt;head&gt;&lt;title&gt;\"\n            . \"Output of snmpwalk for cpeIP4\"\n            . \"&lt;/title&gt;&lt;/head&gt;\";\n        print \"&lt;body&gt;&lt;h2&gt;\" . \"Output of snmpwalk for cpeIP4\" . \"&lt;/h2&gt;\";\n        print '&lt;table summary=\"'\n            . \"Output of snmpwalk for cpeIP4\"\n            . '\"&gt;&lt;tr&gt;&lt;th&gt;Tag Name&lt;/th&gt;&lt;th&gt;Tag Value&lt;/th&gt;&lt;/tr&gt;';\n    }\n    elsif ( $currentTag eq 'GI-eSTB-MIB-NPH' ) {\n        print \"&lt;tr&gt;\";\n    }\n    elsif ( $currentTag =~ /^eSTB/ ) {\n        print \"&lt;tr&gt;\";\n    }\n    else {\n        print \"&lt;td&gt;\";\n    }\n}\n\nsub end() {\n\n    my ( $parser, $name, %attr ) = @_;\n    $currentTag = $name;\n\n    if ( $currentTag eq 'doc' ) {\n        print \"&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;\";\n    }\n    elsif ( $currentTag eq 'GI-eSTB-MIB-NPH' ) {\n        print \"&lt;/tr&gt;\";\n    }\n    elsif ( $currentTag =~ /^eSTB/ ) {\n        print \"&lt;/tr&gt;\";\n    }\n    else {\n        print \"&lt;/td&gt;\";\n    }\n}\n\nsub char() {\n    my ( $parser, $data ) = @_;\n\n    print $data;\n}\n\nsub proc() {\n    my ( $parser, $target, $data ) = @_;\n\n    if ( lc( $target ) eq 'perl' ) {\n        $data = eval( $data );\n        print $data;\n    }\n}\n\nsub getXHTMLHeader() {\n\n    my $header = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE html\nPUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;';\n\n    return $header;\n}\n</code></pre>\n\n<p>This is code in progress, but I realize that this will be overkill for my requirement.</p>\n\n<p>So I am trying to figure out if there is any quick way to do it using Perl. </p>\n\n<p>Please give me some pointers if there is indeed any quick way.</p>\n"}, {"tags": ["json", "perl", "cgi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1435782077, "post_id": 31170479, "comment_id": 50349583, "body": "Replace last line with <code>print decode(&#39;UTF-8&#39;, $json_text, Encode::FB_CROAK) . &quot;\\n&quot;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435799093, "post_id": 31170871, "comment_id": 50355621, "body": "Yes - that does work and, as stated below, I think I am encoding data that is already UTF8. Not sure how to get around that. Unfortunately STDOUT really has no meaning in a CGI script (?) so I&#39;m not sure I can use the method above."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 1, "creation_date": 1435800087, "post_id": 31170871, "comment_id": 50355846, "body": "You&#39;re not making any sense. You wouldn&#39;t have the problem if you didn&#39;t use STDOUT. And yes, CGI does use STDOUT."}, {"owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435801561, "post_id": 31170871, "comment_id": 50356176, "body": "I have not been able to figure out to to use a CGI object as a filehande to hand to binmode. The encoded json data must be printed to the CGI object to be returned to the jQuery making the AJAX request. If you know how to do this I am all ears and eyes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435804838, "post_id": 31170871, "comment_id": 50356845, "body": "What are you talking about. We&#39;ve already established that CGI uses STDOUT, so you use exactly the code I posted."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 2, "creation_date": 1435823193, "post_id": 31170871, "comment_id": 50363262, "body": "@Omortis CGI.pm doesn&#39;t send anything anywhere. Your code needs to <code>print</code> stuff. CGI.pm just gives you crappy old functions that generate HTML for you. Also keep in mind that CGI.pm is not in core any more. :)"}, {"owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435942745, "post_id": 31170871, "comment_id": 50424449, "body": "ikegami: you are correct - I was half-asleep when I looked at this previously and didn&#39;t set it up correctly in my CGI script. Since this is old code that is being ported to a new language the last ASCII encode swizzle is the way to go. Thanks - I appreciate it - nothing like some sleep!"}, {"owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435942808, "post_id": 31170871, "comment_id": 50424477, "body": "simbabque: agreed - I don&#39;t even use it for printing HTML, only for acquiring form data. As stated above we are moving away from perl for this stuff anyway. Thanks for the help everyone!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 11, "last_activity_date": 1435944165, "last_edit_date": 1435944165, "creation_date": 1435781949, "answer_id": 31170871, "question_id": 31170479, "link": "https://stackoverflow.com/questions/31170479/perls-jsonxs-not-encoding-utf8-correctly/31170871#31170871", "title": "Perl&#39;s JSON::XS not encoding UTF8 correctly?", "body": "<p><code>encode_json</code> (short for <code>JSON::XS-&gt;new-&gt;utf8-&gt;encode</code>) encodes using UTF-8, then you are re-encoding it by printing it to STDOUT to which you've added an encoding layer. Effectively, you are doing <code>encode_utf8(encode_utf8($uncoded_json))</code>.</p>\n\n<h2>Solution 1</h2>\n\n<pre><code>use open ':std', ':encoding(utf8)';  # Defaults\nbinmode STDOUT;                      # Override defaults\nprint encode_json(\\%data);\n</code></pre>\n\n<h2>Solution 2</h2>\n\n<pre><code>use open ':std', ':encoding(utf8)';    # Defaults\nprint JSON::XS-&gt;new-&gt;encode(\\%data);   # Or to_json from JSON.pm\n</code></pre>\n\n<h2>Solution 3</h2>\n\n<p>The following works with any encoding on STDOUT by using <code>\\u</code> escapes for non-ASCII:</p>\n\n<pre><code>print JSON::XS-&gt;new-&gt;ascii-&gt;encode(\\%data);\n</code></pre>\n\n<hr>\n\n<p>In the comments, you mention it's actually a CGI script.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse utf8;                      # Encoding of source code.\nuse open ':encoding(UTF-8)';   # Default encoding of file handles.\nBEGIN {\n   binmode STDIN;                       # Usually does nothing on non-Windows.\n   binmode STDOUT;                      # Usually does nothing on non-Windows.\n   binmode STDERR, ':encoding(UTF-8)';  # For text sent to the log file.\n}\n\nuse CGI      qw( -utf8 );\nuse JSON::XS qw( ); \n\n{\n   my $cgi = CGI-&gt;new();\n   my $data = { code =&gt; \"Gew\u00fcrztraminer\" };\n   print $cgi-&gt;header('application/json');\n   print encode_json($data);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435782244, "post_id": 31170938, "comment_id": 50349682, "body": "Rather wasteful to ask to UTF-8 encode it only to follow up with a decode and yet another encode!"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1435782379, "post_id": 31170938, "comment_id": 50349746, "body": "Yes, but points is to explain what is wrong rather make it efficient."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1435782435, "post_id": 31170938, "comment_id": 50349784, "body": "The code doesn&#39;t explain that, the explanation does."}, {"owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435798968, "post_id": 31170938, "comment_id": 50355589, "body": "The pragma &quot;use utf8&quot; was only included so that I could use the &#252; in the included source code pasted here and is not included in the original CGI perl code. I agree that it does muddy the water a bit as an example.  In the CGI source (which would be difficult to meaningfully share) the UTF8 data is coming from a DBI database query and is correct until passed through encode_json. The data is correct in the hash %data (as shown by CGI utils) but is not correct once encoded and shows exactly the behavior above (first run). Is the problem that I am trying to encode data that is already UTF8?"}, {"owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 0, "creation_date": 1435799211, "post_id": 31170938, "comment_id": 50355646, "body": "Hynek I just noticed your use of binmode - this is very similar to my original CGI - I tried it but no change..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1435804751, "post_id": 31170938, "comment_id": 50356828, "body": "Never ever use <code>is_utf8</code>. If you need to force the use of one of the two storage formats, use <code>utf8::upgrade</code> or <code>utf8::downgrade</code>, neither of which are needed here."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435825507, "post_id": 31170938, "comment_id": 50364615, "body": "@ikegami: <code>is_utf8</code> doesn&#39;t forces anything! <code>is_utf8</code> <i>Test whether $string is marked internally as encoded in UTF-8.</i> according to the documentation. It reads the flag!"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "edited": false, "score": 1, "creation_date": 1435826035, "post_id": 31170938, "comment_id": 50364944, "body": "@Omortis: You read data from DBI? Here we go. Check if your data read from DBI is flagged internally as Unicode using <code>is_utf8</code> and if not then use <code>utf8::upgrade</code> . It is usual bug in DBI drivers. Then use approach in @ikegami&#39;s answer and choose if you would like to have IO in binary or utf8 mode."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 3, "last_activity_date": 1435782557, "last_edit_date": 1435782557, "creation_date": 1435782144, "answer_id": 31170938, "question_id": 31170479, "link": "https://stackoverflow.com/questions/31170479/perls-jsonxs-not-encoding-utf8-correctly/31170938#31170938", "title": "Perl&#39;s JSON::XS not encoding UTF8 correctly?", "body": "<p><code>JSON::XS</code> encodes its output into octets. It means the external representation of encoded utf8 string, but it is not unicode string. For more details see <a href=\"http://perldoc.perl.org/perlunicode.html\" rel=\"nofollow\">perlunicode</a>. In short, content of <code>$json_text</code> is prepared for transmitting by <code>IO</code> handler in binary code. If you create scalar content of <code>$data{code}</code> after <code>use utf8;</code> you have scalar containing internally encoded unicode characters string. (Which is internally encoded as utf8 but it is implementation detail you should not rely on. Pragma <code>use utf8;</code> means the source code is encoded as <code>utf8</code> and nothing else.) If you would like to output both scalars in <code>utf8</code> encoded <code>IO</code> handler you have to transform <code>$json_string</code> into internal unicode chracters string.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::XS; \nuse utf8;\nbinmode STDOUT, \":encoding(utf8)\";\n\nmy (%data);\n\n$data{code} = \"Gew\u00fcrztraminer\";\nprint \"data{code} = \" . $data{code} . \"\\n\";\n\nmy $json_text = encode_json \\%data;\nutf8::decode($json_text);\nprint $json_text . \"\\n\";\n</code></pre>\n\n<p>Or how it is intended to use, output encoded string using IO handler in binary mode.</p>\n\n<pre><code>my $json_text = encode_json \\%data;\nbinmode STDOUT;\nprint $json_text . \"\\n\";\n</code></pre>\n\n<p>Try</p>\n\n<pre><code>print utf8::is_utf8($json_text) ? \"UTF8\" : \"OCTETS\" . \"\\n\";\n</code></pre>\n\n<p>to see what is inside.</p>\n"}], "owner": {"reputation": 978, "user_id": 3212967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/K14XW.png?s=128&g=1", "display_name": "Omortis", "link": "https://stackoverflow.com/users/3212967/omortis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2971, "favorite_count": 4, "answer_count": 2, "score": 7, "last_activity_date": 1435944165, "creation_date": 1435780480, "question_id": 31170479, "link": "https://stackoverflow.com/questions/31170479/perls-jsonxs-not-encoding-utf8-correctly", "title": "Perl&#39;s JSON::XS not encoding UTF8 correctly?", "body": "<p>This simple code segment shows an issue I am having with JSON::XS encoding in Perl:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse JSON::XS; \nuse utf8;\nbinmode STDOUT, \":encoding(utf8)\";\n\nmy (%data);\n\n$data{code} = \"Gew\u00fcrztraminer\";\nprint \"data{code} = \" . $data{code} . \"\\n\";\n\nmy $json_text = encode_json \\%data;\nprint $json_text . \"\\n\";\n</code></pre>\n\n<p>The output this yields is:</p>\n\n<pre><code>johnnyb@boogie:~/Projects/repos &gt; ./jsontest.pl \ndata{code} = Gew\u00fcrztraminer\n{\"code\":\"Gew\u00c3\u00bcrztraminer\"}\n</code></pre>\n\n<p>Now if I comment out the binmode line above I get:</p>\n\n<pre><code>johnnyb@boogie:~/Projects/repos &gt; ./jsontest.pl \ndata{code} = Gew\ufffdrztraminer\n{\"code\":\"Gew\u00fcrztraminer\"}\n</code></pre>\n\n<p>What is happening here? Note that I am trying to fix this behavior in a perl CGI script in which binmode can not be used but I always get the \"\u00c3\u00bc\" characters as above returned in the JSON stream. How do I debug this? What am I missing? </p>\n"}, {"tags": ["perl", "hash", "module"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1435768601, "last_edit_date": 1435768601, "creation_date": 1435767858, "answer_id": 31166818, "question_id": 31166739, "link": "https://stackoverflow.com/questions/31166739/returning-new-hash-key-from-a-module/31166818#31166818", "title": "Returning new hash key from a module", "body": "<p>I'm not sure what you're expecting. You're calling <code>module::add_number</code>, which doesn't exist -- there is only a <code>test_module::add_number</code>. And the <code>add_number</code> subroutine is modifying the <code>$%test_module::hash</code> hash whereas your main code is printing <code>%main::hash</code></p>\n\n<p>You must <strong><em>always</em></strong> <code>use strict</code> and <code>use warnings</code> at the top of every Perl program. That will reveal many simple errors that are easily overlooked</p>\n\n<p>You should also avoid package variables unless they are unavoidable. Lexical variables -- declared with <code>my</code> -- should be your first choice. In addition, global identifiers such as package names should be capitalised, whereas lexical identifiers use just lower-case letters</p>\n\n<p>Your main program sets <code>$hash{a}</code> etc. to null strings, after which the <code>add_number</code> subroutine requires them to be hash references so that it can set element <code>number</code> of the subsidiary hash. It is best not to initialise the hash elements if you need to do this</p>\n\n<p>Finally, it is better to pass hash and array variables by reference if you need to modify them in separate subroutines, rather than declaring an <code>our</code> variable and fully-qualifying it with the package name to determine which one you're talking about</p>\n\n<p>Your code should look like this</p>\n\n<h3>main.pl</h3>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse TestModule;\n\nmy %hash;\n\nTestModule::add_number(\\%hash);\n\nmy @letters = sort keys %hash;\n\nfor my $letter (@letters) {\n    print \"$hash{$letter}{number}\\n\";\n}\n</code></pre>\n\n<h3>TestModule.pm</h3>\n\n<pre><code>use strict;\nuse warnings;\n\npackage TestModule;\n\nsub add_number {\n    my ($hash) = @_;\n\n    $hash-&gt;{a}{number} = 1;\n    $hash-&gt;{b}{number} = 2;\n    $hash-&gt;{c}{number} = 3;\n}\n\n1;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>You could also export <code>add_number</code> from <code>TestModule</code> by changing it to this</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage TestModule;\n\nuse Export qw/ import /;\nour @EXPORT = qw/ add_number /;\n\nsub add_number {\n    my ($hash) = @_;\n\n    $hash-&gt;{a}{number} = 1;\n    $hash-&gt;{b}{number} = 2;\n    $hash-&gt;{c}{number} = 3;\n}\n\n1;\n</code></pre>\n\n<p>Then the <code>use TestModule</code> statement in the main code will import the <code>add_number</code> identifier, and you can call it with just <code>add_number(\\%hash)</code></p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5070429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c328ab06d4a7126d402754ee2932bf08?s=128&d=identicon&r=PG&f=1", "display_name": "happytuna", "link": "https://stackoverflow.com/users/5070429/happytuna"}, "edited": false, "score": 0, "creation_date": 1435773673, "post_id": 31166945, "comment_id": 50344746, "body": "thanks very much hunter, this worked perfectly.  I need to dissect what you did.  they syntax is more involved than i thought it would be.  but it is what it is.  and it&#39;s great! thanks for catching my typo btw"}, {"owner": {"reputation": 19, "user_id": 5070429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c328ab06d4a7126d402754ee2932bf08?s=128&d=identicon&r=PG&f=1", "display_name": "happytuna", "link": "https://stackoverflow.com/users/5070429/happytuna"}, "edited": false, "score": 0, "creation_date": 1435968497, "post_id": 31166945, "comment_id": 50431985, "body": "I&#39;m creating keys outside and inside a subroutine on the same hash.  However, after the subroutine, the values in the keys I created before the subroutine is called, are now interpreted as array references."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 4, "last_activity_date": 1435768248, "creation_date": 1435768248, "answer_id": 31166945, "question_id": 31166739, "link": "https://stackoverflow.com/questions/31166739/returning-new-hash-key-from-a-module/31166945#31166945", "title": "Returning new hash key from a module", "body": "<p>The <code>%hash</code> variable in your <code>\"MAIN CODE\"</code> section and the <code>%hash</code> variable in your <code>\"MODULE CODE\"</code> section are <em>not</em> the same variable. One of them is <code>%main::hash</code> and the other is <code>%test_module::hash</code>;</p>\n\n<p>If you want a subroutine to be able to modify a variable, you need to pass a <em>reference</em> to that variable:</p>\n\n<p>Main code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse test_module;\nmy %hash;\n\n$hash{a}=\"\";\n$hash{b}=\"\";\n$hash{c}=\"\";\n\n# | - typo here, needs the 'test_' prefix\n# v\ntest_module::add_number(\\%hash); \n# the \\ creates a reference to your %hash variable\n\nmy @letters = (sort keys %hash);\nfor my $letter (@letters) {\n    print \"$hash{$letter}-&gt;{number}\\n\";\n}\n</code></pre>\n\n<p>Module code:</p>\n\n<pre><code>package test_module;\n\nsub add_number {\n    my ($hash_ref) = @_;\n\n    # now that this is a reference, you need to dereference\n    # accesses with the -&gt; operator\n    $hash_ref-&gt;{a} = { number =&gt; 1 };\n    $hash_ref-&gt;{b} = { number =&gt; 2 };\n    $hash_ref-&gt;{c} = { number =&gt; 3 };\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5070429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c328ab06d4a7126d402754ee2932bf08?s=128&d=identicon&r=PG&f=1", "display_name": "happytuna", "link": "https://stackoverflow.com/users/5070429/happytuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1435768601, "creation_date": 1435767592, "last_edit_date": 1435768074, "question_id": 31166739, "link": "https://stackoverflow.com/questions/31166739/returning-new-hash-key-from-a-module", "title": "Returning new hash key from a module", "body": "<p>I declared a hash in my main script, and I'm trying to add a new key called \"number\" and give it a value.  I'm adding this new key in a subroutine defined in a separate module file.  The problem I'm having is that the new key and value is not seen when I use it in my main program.  </p>\n\n<p>I'm expecting the output to be:</p>\n\n<pre><code>1 \n2 \n3\n</code></pre>\n\n<p>But it's just printing carriage returns...  seems like it doesn't see the new values I added to the hash.</p>\n\n<p>Thank you in advance   </p>\n\n<p>Below is my code which demonstrates my issue.  </p>\n\n<h3>MAIN CODE</h3>\n\n<pre><code>#!/usr/bin/perl\nuse test_module;\nour %hash;\n\n$hash{a}=\"\";\n$hash{b}=\"\";\n$hash{c}=\"\";\n\nmodule::add_number();\n\nmy @letters = (sort keys %hash);\nfor my $letter (@letters) {\n    print \"$hash{$letter}{number}\\n\";\n}\n</code></pre>\n\n<h3>MODULE CODE</h3>\n\n<pre><code>package test_module;\n\nsub add_number {\n    $hash{a}{number}=1;\n    $hash{b}{number}=2;\n    $hash{c}{number}=3;\n}\n\n1\n</code></pre>\n"}, {"tags": ["xml", "perl", "utf-8"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 8, "creation_date": 1435765782, "post_id": 31165784, "comment_id": 50340181, "body": "Element name can&#39;t start with a digit. Therefore, <code>0</code> is invalid token after <code>&lt;</code> where a tag could start."}, {"owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1435768773, "post_id": 31165784, "comment_id": 50342051, "body": "Thanks a lot choroba. It saved me lot of hassle and I&#39;ll rethink about my whole approach now."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1436026957, "post_id": 31165784, "comment_id": 50445372, "body": "If you have solved your problem, could you summarise what you&#39;ve done as an answer (and accept it) please?"}, {"owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "edited": false, "score": 0, "creation_date": 1436302248, "post_id": 31165784, "comment_id": 50551780, "body": "I decided to have one xml element as &quot;eSTBGeneralErrorCode.0; eSTBGeneralConnectedState.0; etc&quot; instead of creating two separate elements. My apologies for delay in accepting the answer. Somehow, I am unable to see the option to accept the answer. I think it might be due to the post being little old or I didn&#39;t have required access for it (this was my first question)."}], "answers": [{"tags": [], "owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "is_accepted": true, "score": 0, "last_activity_date": 1539121510, "creation_date": 1539121510, "answer_id": 52729777, "question_id": 31165784, "link": "https://stackoverflow.com/questions/31165784/how-to-correct-error-not-well-formed-invalid-token-at-line-6/52729777#52729777", "title": "How to correct error: not well-formed (invalid token) at line 6", "body": "<p>Solution was to follow choroba's advice and avoid having element names starting with digits.</p>\n\n<p>I decided to have one xml element as <code>eSTBGeneralErrorCode.0; eSTBGeneralConnectedState.0; etc</code> instead of creating two separate elements. My apologies for delay in accepting the answer. </p>\n\n<p>Finally figured out how to do this.</p>\n"}], "owner": {"reputation": 865, "user_id": 3209087, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0932d741b5753d12f105fa0410037b5c?s=128&d=identicon&r=PG&f=1", "display_name": "300", "link": "https://stackoverflow.com/users/3209087/300"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4420, "favorite_count": 0, "accepted_answer_id": 52729777, "answer_count": 1, "score": 1, "last_activity_date": 1539121510, "creation_date": 1435764934, "question_id": 31165784, "link": "https://stackoverflow.com/questions/31165784/how-to-correct-error-not-well-formed-invalid-token-at-line-6", "title": "How to correct error: not well-formed (invalid token) at line 6", "body": "<p>I am trying to convert an xml file into html file using perl code but getting this error that xml is not well formed and having an invalid token.\nCode:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse XML::Parser;\nuse XML::LibXML;\n\nmy $parser = XML::Parser-&gt;new();\n$parser-&gt;setHandlers(   Start   =&gt; \\&amp;start,\n                        End     =&gt; \\&amp;end,\n                        Char    =&gt; \\&amp;char,\n                        Proc    =&gt; \\&amp;proc,\n                );\nmy $header = &amp;getXHTMLHeader();\nprint $header;\n$parser-&gt;parsefile('output.xml');\n\nmy $currentTag = \"\";\n\nsub start() {\n        my ($parser, $name, %attr) = @_;\n        $currentTag = lc($name);\n        if ($currentTag eq 'doc') {\n                print \"&lt;head&gt;&lt;title&gt;\". \"Output of snmpwalk for cpeIP4\" . \"&lt;/title&gt;&lt;/head&gt;\";\n                print \"&lt;body&gt;&lt;h2&gt;\" . \"Output of snmpwalk for cpeIP4\" . \"&lt;/h2&gt;\";\n                print '&lt;table summary=\"' . \"Output of snmpwalk for cpeIP4\" . '\"&gt;&lt;tr&gt;&lt;th&gt;Tag Name&lt;/th&gt;&lt;th&gt;0&lt;/th&gt;&lt;th&gt;1&lt;/th&gt;&lt;th&gt;2&lt;/th&gt;&lt;th&gt;3&lt;/th&gt;&lt;th&gt;4&lt;/th&gt;&lt;th&gt;5&lt;/th&gt;&lt;th&gt;6&lt;/th&gt;&lt;th&gt;7&lt;/th&gt;&lt;th&gt;8&lt;/th&gt;&lt;th&gt;9&lt;/th&gt;&lt;th&gt;10&lt;/th&gt;&lt;th&gt;11&lt;/th&gt;&lt;th&gt;12&lt;/th&gt;&lt;th&gt;13&lt;/th&gt;&lt;th&gt;14&lt;/th&gt;&lt;th&gt;15&lt;/th&gt;&lt;th&gt;16&lt;/th&gt;&lt;/tr&gt;';\n        }\n        elsif ($currentTag eq 'GI-eSTB-MIB-NPH') {\n                print \"&lt;tr&gt;\";\n        }\n        #elsif ($currentTag !~ /^(0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16)$/)\n        elsif ($currentTag ne '0' || $currentTag ne '1' || $currentTag ne '2' || $currentTag ne '3' || $currentTag ne '4' || $currentTag ne '5' || $currentTag ne '6' || $currentTag ne '7' || $currentTag ne '8' || $currentTag ne '9' || $currentTag ne '10' || $currentTag ne '11' || $currentTag ne '12' || $currentTag ne '13' || $currentTag ne '14' || $currentTag ne '15' || $currentTag ne '16' ) {\n                print \"&lt;tr&gt;\";\n        }\n        else {\n                print \"&lt;td&gt;\";\n        }\n}\nsub end() {\n        my ($parser, $name, %attr) = @_;\n        $currentTag = lc($name);\n        if ($currentTag eq 'doc') {\n                print \"&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;\";\n        }\n        elsif ($currentTag eq 'GI-eSTB-MIB-NPH') {\n                print \"&lt;/tr&gt;\";\n        }\n        #elsif ($currentTag !~ /^(0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16)$/)\n        elsif ($currentTag ne '0' || $currentTag ne '1' || $currentTag ne '2' || $currentTag ne '3' || $currentTag ne '4' || $currentTag ne '5' || $currentTag ne '6' || $currentTag ne '7' || $currentTag ne '8' || $currentTag ne '9' || $currentTag ne '10' || $currentTag ne '11' || $currentTag ne '12' || $currentTag ne '13' || $currentTag ne '14' || $currentTag ne '15' || $currentTag ne '16' ) {\n                print \"&lt;/tr&gt;\";\n        }\n        else {\n                print \"&lt;/td&gt;\";\n        }\n}\nsub char() {\n        my ($parser, $data) = @_;\n        print $data;\n}\nsub proc() {\n        my ($parser, $target, $data) = @_;\n        if (lc($target) eq 'perl') {\n                $data = eval($data);\n                print $data;\n        }\n}\nsub getXHTMLHeader() {\n        my $header = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n        &lt;!DOCTYPE html\n          PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n          \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n          &lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;';\n        return $header;\n}\n</code></pre>\n\n<p>The contents of output.xml are(for example, actual file contains lot more details in similar format):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;doc&gt;\n    &lt;GI-eSTB-MIB-NPH&gt;\n        &lt;eSTBGeneralErrorCode&gt;\n            &lt;0&gt;INTEGER: 0&lt;/0&gt;\n        &lt;/eSTBGeneralErrorCode&gt;\n        &lt;eSTBGeneralConnectedState&gt;\n            &lt;0&gt; INTEGER: true(1) &lt;/0&gt;\n        &lt;/eSTBGeneralConnectedState&gt;\n        &lt;eSTBGeneralPlatformID&gt;\n            &lt;0&gt; INTEGER: 2076 &lt;/0&gt;\n        &lt;/eSTBGeneralPlatformID&gt;\n    &lt;/GI-eSTB-MIB-NPH&gt;\n&lt;/doc&gt;\n</code></pre>\n\n<p>Actual error is: </p>\n\n<pre><code>not well-formed (invalid token) at line 6, column 13, byte 112 at /usr/lib64/perl5/XML/Parser.pm line 187\n</code></pre>\n\n<p>I have searched for solution and found some posts where same issue was mentioned but didn't find solution that could help me here. Following are the things I tried that I had found from various online forums:</p>\n\n<ol>\n<li>Checked format of xml and compared at <a href=\"http://www.w3schools.com/xml/xml_server.asp\" rel=\"nofollow\">http://www.w3schools.com/xml/xml_server.asp</a></li>\n<li>Adding space &lt;0> INTEGER: 0 </li>\n<li>removed - encoding=\"UTF-8\"</li>\n<li>changed \"UTF-8\" to \"UTF-16\" and \"ISO-8859-1\"</li>\n<li>perl -ne 'print $_ if not m/^output_1.xml and used output_1.xml</li>\n<li>perl -ne'print $_ if ! /^\n<li>strings output.xml > output_1.xml and used output_1.xml</li>\n</ol>\n\n<p>Please suggest if I can try something more. I am not sure if there's really something wrong in the xml or in my code somewhere.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435764396, "post_id": 31165406, "comment_id": 50339281, "body": "I don&#39;t think this is a bug, just an example of Perl &quot;guessing wrong&quot; between <code>map BLOCK LIST</code> and <code>map EXPR, LIST</code>, which is documented toward the end of <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>perldoc -f map</code></a>. Hopefully somebody can explain exactly why Perl guesses the way it does for your examples in an answer."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435764783, "post_id": 31165406, "comment_id": 50339553, "body": "@ThisSuitIsBlackNot yes, it looks that way <a href=\"https://eval.in/390502\" rel=\"nofollow noreferrer\">eval.in/390502</a> but usually <code>map EXPR, LIST</code> requires <code>+</code> in front of EXPR. Otherwise it is a BLOCK."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1435765627, "post_id": 31165406, "comment_id": 50340077, "body": "@\u0421\u0443\u0445\u043e\u043927 no, map EXPR does not usually require a +.  Perl usually guesses well.  Here, it looks like you are creating an anonymous hash, not a block."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1435765830, "post_id": 31165406, "comment_id": 50340221, "body": "@ysth in first three examples which are basically same thing, it guesses BLOCK as expected."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435767519, "post_id": 31165406, "comment_id": 50341317, "body": "The &quot;why&quot; probably can&#39;t be answered without looking at the code for Perl&#39;s parser. (Anybody?) Also, you can see the same parsing behavior without <code>map</code>. <code>perl -we&#39;{&quot;x&quot;.&quot;y&quot;=&gt;1}&#39;</code>, <code>perl -we&#39;{(&quot;x&quot;=&gt;1)}&#39;</code>, and <code>perl -we&#39;{(&quot;x&quot;)=&gt;1}&#39;</code> all give <code>Useless use of a constant in void context</code> warnings (parsed as a block); <code>perl -we&#39;{&quot;x&quot;=&gt;1}&#39;</code> gives <code>Useless use of anonymous hash in void context</code> (parsed as an expression)."}], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435814532, "post_id": 31166575, "comment_id": 50359212, "body": "Tnx, but this doesn&#39;t explain why similar constructs are interpreted as BLOCK while one particular is viewed as EXPR."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 6, "last_activity_date": 1435767519, "last_edit_date": 1435767519, "creation_date": 1435767124, "answer_id": 31166575, "question_id": 31165406, "link": "https://stackoverflow.com/questions/31165406/syntax-error-when-map-returns-list/31166575#31166575", "title": "Syntax error when map() returns LIST", "body": "<p>From <a href=\"http://metacpan.org/pod/perlref#pod3\" rel=\"noreferrer\"><code>perlref</code></a></p>\n\n<blockquote>\n  <p>Because curly brackets (braces) are used for several other things including BLOCKs, you may occasionally have to disambiguate braces at the beginning of a statement by putting a + or a return in front so that Perl realizes the opening brace isn't starting a BLOCK. <strong>The economy and mnemonic value of using curlies is deemed worth this occasional extra hassle</strong>.</p>\n</blockquote>\n\n<p>To make your intentions clearer and to help the parser,</p>\n\n<ul>\n<li><p>Say <code>+{...}</code> to unambiguously specify a hash reference</p>\n\n<pre><code>@list_of_hashrefs = map +{ \"$_ x\" =&gt; $_ }, 1..5;\n</code></pre></li>\n<li><p>Say <code>{; ...}</code> to unambiguously specify a code block</p>\n\n<pre><code>%mappings = map {; \"$_ x\" =&gt; $_ } 1..5;\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1435873136, "last_edit_date": 1592644375, "creation_date": 1435871122, "answer_id": 31194633, "question_id": 31165406, "link": "https://stackoverflow.com/questions/31165406/syntax-error-when-map-returns-list/31194633#31194633", "title": "Syntax error when map() returns LIST", "body": "<blockquote>\n<p>Why perl thinks this should be <code>map EXPR, LIST</code> instead of <code>map BLOCK LIST</code>?</p>\n</blockquote>\n<p>The relevant section of code is in <code>toke.c</code>, Perl's lexer (the below is from Perl 5.22.0):</p>\n<pre class=\"lang-c prettyprint-override\"><code>/* This hack serves to disambiguate a pair of curlies\n * as being a block or an anon hash.  Normally, expectation\n * determines that, but in cases where we're not in a\n * position to expect anything in particular (like inside\n * eval&quot;&quot;) we have to resolve the ambiguity.  This code\n * covers the case where the first term in the curlies is a\n * quoted string.  Most other cases need to be explicitly\n * disambiguated by prepending a &quot;+&quot; before the opening\n * curly in order to force resolution as an anon hash.\n *\n * XXX should probably propagate the outer expectation\n * into eval&quot;&quot; to rely less on this hack, but that could\n * potentially break current behavior of eval&quot;&quot;.\n * GSAR 97-07-21\n */\nt = s;\nif (*s == '\\'' || *s == '&quot;' || *s == '`') {\n    /* common case: get past first string, handling escapes */\n    for (t++; t &lt; PL_bufend &amp;&amp; *t != *s;)\n        if (*t++ == '\\\\')\n            t++;\n    t++;\n}\nelse if (*s == 'q') {\n    if (++t &lt; PL_bufend\n        &amp;&amp; (!isWORDCHAR(*t)\n            || ((*t == 'q' || *t == 'x') &amp;&amp; ++t &lt; PL_bufend\n                &amp;&amp; !isWORDCHAR(*t))))\n    {   \n        /* skip q//-like construct */\n        const char *tmps;\n        char open, close, term;\n        I32 brackets = 1;\n\n        while (t &lt; PL_bufend &amp;&amp; isSPACE(*t))\n            t++;\n        /* check for q =&gt; */\n        if (t+1 &lt; PL_bufend &amp;&amp; t[0] == '=' &amp;&amp; t[1] == '&gt;') {\n            OPERATOR(HASHBRACK);\n        }\n        term = *t;\n        open = term;\n        if (term &amp;&amp; (tmps = strchr(&quot;([{&lt; )]}&gt; )]}&gt;&quot;,term)))\n            term = tmps[5];\n        close = term;\n        if (open == close)\n            for (t++; t &lt; PL_bufend; t++) {\n                if (*t == '\\\\' &amp;&amp; t+1 &lt; PL_bufend &amp;&amp; open != '\\\\')\n                    t++;\n                else if (*t == open)\n                    break;\n            }\n        else {\n            for (t++; t &lt; PL_bufend; t++) {\n                if (*t == '\\\\' &amp;&amp; t+1 &lt; PL_bufend)\n                    t++;\n                else if (*t == close &amp;&amp; --brackets &lt;= 0)\n                    break;\n                else if (*t == open)\n                    brackets++;\n            }\n        }\n        t++;\n    }\n    else\n        /* skip plain q word */\n        while (t &lt; PL_bufend &amp;&amp; isWORDCHAR_lazy_if(t,UTF))\n             t += UTF8SKIP(t);\n}\nelse if (isWORDCHAR_lazy_if(t,UTF)) {\n    t += UTF8SKIP(t);\n    while (t &lt; PL_bufend &amp;&amp; isWORDCHAR_lazy_if(t,UTF))\n         t += UTF8SKIP(t);\n}\nwhile (t &lt; PL_bufend &amp;&amp; isSPACE(*t))\n    t++;\n/* if comma follows first term, call it an anon hash */\n/* XXX it could be a comma expression with loop modifiers */\nif (t &lt; PL_bufend &amp;&amp; ((*t == ',' &amp;&amp; (*s == 'q' || !isLOWER(*s)))\n                   || (*t == '=' &amp;&amp; t[1] == '&gt;')))\n    OPERATOR(HASHBRACK);\nif (PL_expect == XREF)\n{\n  block_expectation:\n    /* If there is an opening brace or 'sub:', treat it\n       as a term to make ${{...}}{k} and &amp;{sub:attr...}\n       dwim.  Otherwise, treat it as a statement, so\n       map {no strict; ...} works.\n     */\n    s = skipspace(s);\n    if (*s == '{') {\n        PL_expect = XTERM;\n        break;\n    }\n    if (strnEQ(s, &quot;sub&quot;, 3)) {\n        d = s + 3;\n        d = skipspace(d);\n        if (*d == ':') {\n            PL_expect = XTERM;\n            break;\n        }\n    }\n    PL_expect = XSTATE;\n}\nelse {\n    PL_lex_brackstack[PL_lex_brackets-1] = XSTATE;\n    PL_expect = XSTATE;\n}\n</code></pre>\n<hr />\n<h1>Explanation</h1>\n<p>If the first term after the opening curly is a string (delimited by <code>'</code>, <code>&quot;</code>, or <code>`</code>) or a bareword beginning with a capital letter, and the following term is <code>,</code> or <code>=&gt;</code>, the curly is treated as the beginning of an anonymous hash (that's what <code>OPERATOR(HASHBRACK);</code> means).</p>\n<p>The other cases are a little harder for me to understand. I ran the following program through gdb:</p>\n<pre><code>{ (x =&gt; 1) }\n</code></pre>\n<p>and ended up in the final <code>else</code> block:</p>\n<pre class=\"lang-c prettyprint-override\"><code>else {\n    PL_lex_brackstack[PL_lex_brackets-1] = XSTATE;\n    PL_expect = XSTATE;\n}\n</code></pre>\n<p>Suffice it to say, the execution path is clearly different; it ends up being parsed as a block.</p>\n"}], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 31194633, "answer_count": 2, "score": 10, "last_activity_date": 1435873136, "creation_date": 1435763986, "last_edit_date": 1435765668, "question_id": 31165406, "link": "https://stackoverflow.com/questions/31165406/syntax-error-when-map-returns-list", "title": "Syntax error when map() returns LIST", "body": "<p>This works,</p>\n\n<pre><code>print map { $_.\" x\" =&gt; $_ } 1..5;\nprint map { (\"$_ x\" =&gt; $_) } 1..5;\nprint map { (\"$_ x\") =&gt; $_ } 1..5;\n</code></pre>\n\n<p>but this throws syntax error,</p>\n\n<pre><code>print map { \"$_ x\" =&gt; $_ } 1..5;\n</code></pre>\n\n<p><strike>Is this documented bug, undocumented bug, or I can't see why this should not compile?</strike></p>\n\n<p>Why perl thinks this should be <code>map EXPR, LIST</code> instead of <code>map BLOCK LIST</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 2, "creation_date": 1435757170, "post_id": 31162330, "comment_id": 50333781, "body": "@toolic why wouldn&#39;t it? It certainly prints an <code>END</code> block. But probebly it&#39;s not completely loaded at the time the <code>BEGIN</code> is executed."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 1, "creation_date": 1435757244, "post_id": 31162330, "comment_id": 50333841, "body": "Yes. So, could be more precise. How get printed the BEGIN block statements (like with the -d:Trace) but in ANY other way? (e.g. by using the DB:: or such?)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435758846, "post_id": 31163371, "comment_id": 50335131, "body": "For what it&#39;s worth anyway."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 2, "creation_date": 1435759429, "post_id": 31163371, "comment_id": 50335584, "body": "+1, thank you for the explanation. This is <i>first</i> time when i saw an answer like: &quot;it is impossible&quot;. ;) Usually, for the &quot;impossible&quot; questions got answers, like: <i>it *is possible* but only by brutal hacking</i> ... :) :D"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 3, "creation_date": 1435759476, "post_id": 31163371, "comment_id": 50335617, "body": "I didn&#39;t say it&#39;s impossible. I just don&#39;t know how. :-P"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1435758837, "creation_date": 1435758837, "answer_id": 31163371, "question_id": 31162330, "link": "https://stackoverflow.com/questions/31162330/how-to-convince-develtrace-to-print-the-begin-block-statements/31163371#31163371", "title": "How to convince Devel::Trace to print the BEGIN-block statements?", "body": "<p><em>Disclaimer: This is just an attempt to explain the behaviour.</em></p>\n\n<hr>\n\n<p>Devel::Trace hooks up to the <a href=\"http://perldoc.perl.org/DB.html\" rel=\"nofollow\">Perl debugging API</a> through the DB model. That is just code. <a href=\"https://metacpan.org/source/MJD/Devel-Trace-0.12/Trace.pm#L8\" rel=\"nofollow\">It installs a sub</a> <code>DB::DB</code>.</p>\n\n<p>The big question is, when is that executed. According to <a href=\"http://perldoc.perl.org/perlmod.html#BEGIN%2C-UNITCHECK%2C-CHECK%2C-INIT-and-END\" rel=\"nofollow\">perlmod</a>, there are five block types that are executed at specific points during execution. One of them is <code>BEGIN</code>, which is the first.</p>\n\n<p>Consider this program.</p>\n\n<pre><code>use strict;\nuse warnings;\nour ($x, $y);\n\nBEGIN { $x = '42' }\nUNITCHECK { 'unitcheck' }\nCHECK { 'check' }\nINIT { 'init' }\nEND { 'end' }\n\nprint \"$x\\n\";\n</code></pre>\n\n<p>This will output the following:</p>\n\n<pre><code>&gt;&gt; trace.pl:8: INIT { 'init' }\n&gt;&gt; trace.pl:3: our ($x, $y);\n&gt;&gt; trace.pl:11: print \"$x\\n\";\n42\n&gt;&gt; trace.pl:9: END { 'end' }\n</code></pre>\n\n<p>So Devel::Trace <em>sees</em> the <code>INIT</code> block and the <code>END</code> block. But why the <code>INIT</code> block?</p>\n\n<p>Above mentioned perlmod says:</p>\n\n<blockquote>\n  <p>INIT blocks are run just before the Perl runtime begins execution, in \"first in, first out\" (FIFO) order.</p>\n</blockquote>\n\n<p>Apparently at that phase, the <code>DB::DB</code> has already been installed. I could not find any documentation that says when a <code>sub</code> definition is run exactly. However, it seems it's after <code>BEGIN</code> and before <code>INIT</code>. Hence, it does not see whatever goes on in the <code>BEGIN</code>.</p>\n\n<p>Adding a <code>BEGIN { $Devel::Trace::TRACE = 1 }</code> to the beginning of the file also does not help.</p>\n\n<p>I rummaged around in documentation for perldebug and the likes, but could not find an explanation of this behaviour. My guess is that the debugger interface doesn't know about <code>BEGIN</code> at all. They are executed very early after all (consider e.g. <code>perl -c -E 'BEGIN{ say \"foo\" } say \"bar\"'</code> will print <em>foo</em>.)</p>\n"}, {"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1435777919, "post_id": 31166829, "comment_id": 50347289, "body": "Thank you. One question. Where is this documented?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435820078, "post_id": 31166829, "comment_id": 50361505, "body": "Funny how I read past this when researching my answer. Didn&#39;t occur to me to try it though. :)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 8, "last_activity_date": 1435767903, "creation_date": 1435767903, "answer_id": 31166829, "question_id": 31162330, "link": "https://stackoverflow.com/questions/31162330/how-to-convince-develtrace-to-print-the-begin-block-statements/31166829#31166829", "title": "How to convince Devel::Trace to print the BEGIN-block statements?", "body": "<p>It's very possible. Set <code>$DB::single</code> in an early <code>BEGIN</code> block.</p>\n\n<pre><code>use strict;\nuse warnings;\nour $x;\nBEGIN { $DB::single = 1 }\n\nBEGIN {\n    $x = 42;\n}\nprint \"$x\\n\";\n</code></pre>\n\n<p><code>$DB::single</code> is a debugger variable used to determine whether the <code>DB::DB</code> function will be invoked at each line. In compilation phase it is usually false but you can set it in compilation phase in a <code>BEGIN</code> block.</p>\n\n<p>This trick is also helpful to set a breakpoint inside a <code>BEGIN</code> block when you want to debug compile-time code in the standard debugger.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 3, "accepted_answer_id": 31166829, "answer_count": 2, "score": 10, "last_activity_date": 1435767903, "creation_date": 1435756247, "last_edit_date": 1435757623, "question_id": 31162330, "link": "https://stackoverflow.com/questions/31162330/how-to-convince-develtrace-to-print-the-begin-block-statements", "title": "How to convince Devel::Trace to print the BEGIN-block statements?", "body": "<p>Have a simple script p.pl:</p>\n\n<pre><code>use strict;\nuse warnings;\nour $x;\nBEGIN {\n    $x = 42;\n}\nprint \"$x\\n\";\n</code></pre>\n\n<p>When I run it as:</p>\n\n<pre><code>perl -d:Trace p.pl\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>&gt;&gt; p.pl:3: our $x;\n&gt;&gt; p.pl:7: print \"$x\\n\";\n42\n</code></pre>\n\n<p>how to get printed the BEGIN block statements too, e.g. the <code>$x = 42;</code>?</p>\n\n<p>Because my intention isn't clear, adding the clarification:</p>\n\n<p>Looking for ANY way to print statements when the perl script runs (like Devel::Trace it does) but <em>including</em> the statements in the BEGIN block.</p>\n"}, {"tags": ["perl", "parsing"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1435740519, "post_id": 31156514, "comment_id": 50322112, "body": "Check the links <a href=\"https://github.com/choroba/marpa-enhanced-calculator\" rel=\"nofollow noreferrer\">here</a> for non-calculator examples on <a href=\"http://p3rl.org/Marpa::R2\" rel=\"nofollow noreferrer\">Marpa::R2</a> ."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1435747127, "post_id": 31156514, "comment_id": 50326509, "body": "Try something like <code>calc.pl &#39;a = 43 b = 3 * 8; print a + b&#39;</code>. But the point was to show the other links :-)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1435747632, "post_id": 31156514, "comment_id": 50326840, "body": "I updated the code in GitHub to accept input without a trailing separator."}], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1435753061, "post_id": 31157455, "comment_id": 50330660, "body": "imho the op want much more as simple numerical expressions."}], "tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": true, "score": 3, "last_activity_date": 1435742751, "creation_date": 1435742751, "answer_id": 31157455, "question_id": 31156514, "link": "https://stackoverflow.com/questions/31156514/are-parseyapp-parselex-or-marpar2-still-used/31157455#31157455", "title": "Are Parse::Yapp, Parse::Lex or Marpa::R2 still used?", "body": "<p>For small simple parser jobs like this sort of thing, I wrote <a href=\"http://metacpan.org/pod/Parser::MGC\" rel=\"nofollow\"><code>Parser::MGC</code></a>. Your particular case of numerical expression evaluation is likely some variant of one of the examples, namely</p>\n\n<p><a href=\"https://metacpan.org/source/PEVANS/Parser-MGC-0.13/examples/eval-expr.pl\" rel=\"nofollow\">https://metacpan.org/source/PEVANS/Parser-MGC-0.13/examples/eval-expr.pl</a></p>\n"}, {"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1435794629, "post_id": 31166593, "comment_id": 50354589, "body": "From this <a href=\"http://drops.dagstuhl.de/opus/volltexte/2012/3513/pdf/6.pdf\" rel=\"nofollow noreferrer\">study</a> Marpa looks pretty inefficient"}, {"owner": {"reputation": 831, "user_id": 1679046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a97d683b2b3040cc355862faaa908d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Kegler", "link": "https://stackoverflow.com/users/1679046/jeffrey-kegler"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 2, "creation_date": 1435796723, "post_id": 31166593, "comment_id": 50355133, "body": "Note the date; that it is talking about an earlier version of Marpa, Marpa::XS; and the methodological caveats.  Alberto was gracious enough to share his paper with me before publication and it inspired a lot of the changes which appeared in Marpa::R2."}], "tags": [], "owner": {"reputation": 831, "user_id": 1679046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a97d683b2b3040cc355862faaa908d?s=128&d=identicon&r=PG", "display_name": "Jeffrey Kegler", "link": "https://stackoverflow.com/users/1679046/jeffrey-kegler"}, "is_accepted": false, "score": 2, "last_activity_date": 1435767199, "creation_date": 1435767199, "answer_id": 31166593, "question_id": 31156514, "link": "https://stackoverflow.com/questions/31156514/are-parseyapp-parselex-or-marpar2-still-used/31166593#31166593", "title": "Are Parse::Yapp, Parse::Lex or Marpa::R2 still used?", "body": "<p>Marpa::R2 is in heavy and increasing use.  IBM advertises their use of it: <a href=\"https://www.ibm.com/developerworks/community/blogs/jalvord/entry/sitworld_itm_situation_audit?lang=en\" rel=\"nofollow\">https://www.ibm.com/developerworks/community/blogs/jalvord/entry/sitworld_itm_situation_audit?lang=en</a>  Metacpan lists ~30 direct dependences and there are indirect dependences from those.  There are open-source C, ECMAScript parsers.  There's more stuff listed on the web site: <a href=\"http://savage.net.au/Marpa.html#Applications\" rel=\"nofollow\">http://savage.net.au/Marpa.html#Applications</a></p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 31157455, "answer_count": 2, "score": 9, "last_activity_date": 1435767199, "creation_date": 1435740127, "last_edit_date": 1495539975, "question_id": 31156514, "link": "https://stackoverflow.com/questions/31156514/are-parseyapp-parselex-or-marpar2-still-used", "title": "Are Parse::Yapp, Parse::Lex or Marpa::R2 still used?", "body": "<p>I would like to write simple parser in Perl that mainly provide an additional layer over an existing language. I was looking at <code>Parse::Yapp</code>, <code>Parse::Lex</code> or even <code>Marpa::R2</code>, but the only concrete example is always the same: a simple calculator that does <code>43 * 8 + 1</code>. I cannot easily find any other examples so I am wondering if these packages are still a good choice to implement a parser. </p>\n\n<p>Are <code>Parse::Yapp</code>, <code>Parse::Lex</code> or <code>Marpa::R2</code> still a good solution over a <a href=\"https://stackoverflow.com/questions/7476116/yaml-parsing-lex-or-hand-rolled\">hand-rolled</a> approach?</p>\n\n<p>Where can I find more examples and documentation on these modules? The CPAN pages are usually pretty empty</p>\n"}, {"tags": ["perl", "http", "contacts", "yahoo-api"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435739925, "post_id": 31156150, "comment_id": 50321715, "body": "Why do you have the Microsoft doc if we are talking about Yahoo?"}, {"owner": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435740554, "post_id": 31156150, "comment_id": 50322144, "body": "It&#39;s just reference, maybe I am wrong but get contact photo from Microsoft impossible, I wrote to convince me in the opposite if i&#39;m wrong :). <a href=\"https://developer.yahoo.com/social/rest_api_guide/field-resource.html#field-object\" rel=\"nofollow noreferrer\">Here</a> Yahoo doc where described how to work with single field."}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "edited": false, "score": 0, "creation_date": 1538382587, "post_id": 52355399, "comment_id": 92109455, "body": "Thx, but it&#39;s a very old project and I&#39;ll not return to it)"}, {"owner": {"reputation": 2712, "user_id": 2267932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb8389c99a599092b185844a3d0599a5?s=128&d=identicon&r=PG", "display_name": "MarSoft", "link": "https://stackoverflow.com/users/2267932/marsoft"}, "reply_to_user": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "edited": false, "score": 0, "creation_date": 1538406653, "post_id": 52355399, "comment_id": 92122861, "body": "But this question is the most relevant for the problem, and when someone else bumps into it (like me) then they may find this information useful."}], "tags": [], "owner": {"reputation": 2712, "user_id": 2267932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb8389c99a599092b185844a3d0599a5?s=128&d=identicon&r=PG", "display_name": "MarSoft", "link": "https://stackoverflow.com/users/2267932/marsoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1537638857, "last_edit_date": 1537638857, "creation_date": 1537110040, "answer_id": 52355399, "question_id": 31156150, "link": "https://stackoverflow.com/questions/31156150/404-error-when-get-contact-photo-from-yahoo-api/52355399#52355399", "title": "404 error when GET contact photo from Yahoo API", "body": "<p>Looks like <strong>Yahoo contacts API is mostly dead/broken</strong>.\nIt is well documented in their <a href=\"https://developer.yahoo.com/social/rest_api_guide/\" rel=\"nofollow noreferrer\">book</a>, but in reality some of its features do not work [anymore]. These broken features include single-field requests (either <code>GET</code> or <code>PUT</code>), field-collection requests like <code>/contact/ID/emails</code> (again, regardless of HTTP method), and as you noticed image fetching.\nIt is still possible to create new contact or remove an existing one, because multiple-contacts and single-contact endpoints are alive. But it is <strong>not possible to edit an existing contact</strong> or <strong>to get contact image</strong>.</p>\n\n<p>In addition, this API doesn't set any <code>CORS</code> headers which makes it impossible to use this API from the browser directly.\n<em>(How to fix from Yahoo side: add <code>Access-Control-Allow-Origin: *</code> header to API endpoints. How to workaround from client side: use your backend as a proxy)</em></p>\n\n<p>There is a <a href=\"https://developer.yahoo.com/social/contacts/\" rel=\"nofollow noreferrer\">page</a>, linked from their developers' main page, which claims to be the <a href=\"https://developer.yahoo.com/social/contacts/\" rel=\"nofollow noreferrer\">documentation for a current version of Yahoo Social API</a>, but <strong>this page is broken</strong> as well. It has links to \"documentation\" and \"forum\", both with empty <code>href</code> leading to the same page. And the only working link is to the aforementioned REST API book which is labelled \"Legacy API\".</p>\n\n<h3>Summary:</h3>\n\n<ul>\n<li>There is probably some new version of API but it is not documented anywhere, the page designated for documentation is broken.</li>\n<li>There is a good docs for \"older\" version of API, but the API itself is not fully functional.</li>\n<li>Web version of Contacts app (in Yahoo Mail) uses its own backend, not the public API, and requests are protected with cookies rather than OAuth keys. Hence we cannot easily use this API, although it is probably the only working way to get the required information.</li>\n</ul>\n\n<hr>\n\n<p><strong>UPD:</strong> asked them in <a href=\"https://twitter.com/MaryasinS/status/1043557508709867520\" rel=\"nofollow noreferrer\">Twitter</a> and <a href=\"https://yahoo.uservoice.com/forums/600772-new-mail/suggestions/35417872-fix-contacts-api\" rel=\"nofollow noreferrer\">Uservoice</a>, please vote. Hopefully someone will finally look into this issue.</p>\n"}], "owner": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1537638857, "creation_date": 1435739029, "last_edit_date": 1436256833, "question_id": 31156150, "link": "https://stackoverflow.com/questions/31156150/404-error-when-get-contact-photo-from-yahoo-api", "title": "404 error when GET contact photo from Yahoo API", "body": "<p>I use <code>ShuttleCloud</code> for import contacts, but he not support work with contacts photos. Since ShuttleCloud give me contact id, i easy recieved contact photo from Google, but cannot from Yahoo. (as i understand, microsoft not support mechanism for return <a href=\"https://msdn.microsoft.com/en-us/library/hh243648.aspx#photo\" rel=\"nofollow\">contact photo</a>).</p>\n\n<p>For example i use url for get information about contact:</p>\n\n<pre><code>my $url = 'https://social.yahooapis.com/v1/user/72KIKWBUXCMY6XVHD5B5UN52PU/contact/13?format=json';\n</code></pre>\n\n<p>Then i use recieved url for GET image:</p>\n\n<pre><code>my $url = 'http://social.yahooapis.com/v1/user/72KIKWBUXCMY6XVHD5B5UN52PU/contact/13/Image/2';\n</code></pre>\n\n<p>All according to the <a href=\"https://developer.yahoo.com/social/rest_api_guide/field-resource.html#field-object\" rel=\"nofollow\">documentation</a>. But Yahoo return <code>404 Not Found on Accelerator</code>. If i use <code>https</code> instead <code>http</code>, Yahoo return <code>404 Not Found</code>.</p>\n\n<p>Code with GET request:</p>\n\n<pre><code>my $ua  = LWP::UserAgent-&gt;new();\nmy $req = HTTP::Request-&gt;new(GET =&gt; $url);\n$req-&gt;header('Authorization' =&gt; 'Bearer '.$token);\nmy $resp = $ua-&gt;request($req);\n</code></pre>\n\n<p>P.S. All requests using Single Field (name, address, etc) have similar return code and error.</p>\n\n<p>My scopes: \nContacts - Read/Write;\nSocial Directory (Profiles) - Read/Write Public and Private.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1435738571, "post_id": 31155897, "comment_id": 50320851, "body": "What is stopping you to write perl script?"}, {"owner": {"reputation": 702, "user_id": 4064006, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QrdHQ.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4064006/will"}, "edited": false, "score": 1, "creation_date": 1435738622, "post_id": 31155897, "comment_id": 50320891, "body": "Have you tried anything? Is there any problems?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435739395, "post_id": 31155897, "comment_id": 50321388, "body": "perl scripts support <code>kill</code>. Although ideally you&#39;ll find a way to uniquely identify the target process,  because there may be dupes in a <code>ps</code> list.  Alternatively - set an alarm signal, because that does it all for you."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1435758590, "creation_date": 1435758590, "answer_id": 31163257, "question_id": 31155897, "link": "https://stackoverflow.com/questions/31155897/track-and-kill-a-process-on-timeout-using-perl-script/31163257#31163257", "title": "Track and kill a process on timeout using Perl script", "body": "<p>Based on your code - there is a reason why <code>use strict</code> and <code>use warnings</code> are strongly recommended. </p>\n\n<p>Specifically:</p>\n\n<pre><code>Can't modify constant item in scalar assignment at line 17, near \"$$;\"\n</code></pre>\n\n<p>You aren't doing what you think you're doing there. </p>\n\n<p>If you set it to </p>\n\n<pre><code> kill ( 'INT', -$$ ); \n</code></pre>\n\n<p>Then you will send a <code>SIGINT</code> to the current process group - parent <em>and</em> child. I'm not sure why you're doing this when you don't want to kill the parent.</p>\n\n<p>I'd suggest you can simplify this greatly by:</p>\n\n<pre><code>else {      # child\n  alarm 5;\n  exec (q[perl -e 'while (1) {print 1}'  tee test.txt]);\n  exit;     # the child shouldn't execute code hereafter\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3863080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be74ca0dd0b0a65a031d4f56af247bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag Kumar", "link": "https://stackoverflow.com/users/3863080/anurag-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435771084, "creation_date": 1435738188, "last_edit_date": 1435752527, "question_id": 31155897, "link": "https://stackoverflow.com/questions/31155897/track-and-kill-a-process-on-timeout-using-perl-script", "title": "Track and kill a process on timeout using Perl script", "body": "<p>I want to write a Perl script which can monitor a running process. If the process executes for more than expected time,then it should be killed.\nI am trying to do this on a <code>Linux</code> machine(Linux_x8664).</p>\n\n<p>I cannot achieve the same using <code>cronjob</code> because I want to embed the same to another Perl script, which I have been using from a long time.</p>\n\n<p>If you have any suggestions, Please suggest me.</p>\n\n<p>I have a code to do that, But the problem is that my perl script is rinning a process using system command. And I want to track the pid of that invoked process and I want to kill it on timeout.</p>\n\n<p>=========================</p>\n\n<pre><code>#!/usr/pde/bin/perl\n my $pid;\n my $finish=0;\n\n # actions after timeout to keep SIGHANDLER short\n #\n sub timeout {\n   print \"Timed out pid $pid\\n\";\n\n   # kill the process group, but not the parent process\n   local $SIG{INT}='IGNORE';\n   local $SIG{TERM}='IGNORE';\n   kill 'INT' = -$$;\n\n   # eventually try also with TERM and KILL if necessary\n   die 'alarm';\n }\n\n eval {\n    local $SIG{ALRM} = sub { $finish=1 };\n\n    alarm 5;\n\n    die \"Can't fork!\" unless defined ($pid=fork); # check also this!\n\n    if ($pid) { # parent\n      warn \"child pid: $pid\\n\";\n\n      # Here's the code that checks for the timeout and do the work:\n      while (1) {\n        $finish and timeout() and last;\n        sleep 1;\n      }\n\n      waitpid ($pid, 0);\n    }\n    else {      # child\n      exec (q[perl -e 'while (1) {print 1}'  tee test.txt]);\n      exit;     # the child shouldn't execute code hereafter\n    }\n\n    alarm 0;\n\n };\n\n warn \"\\$@=$@\\n\";`enter code here`\n die \"Timeout Exit\\n\" if $@ and  $@ =~ /alarm/;\n print \"Exited normally.\\n\";\n __END__\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1435738610, "post_id": 31155754, "comment_id": 50320878, "body": "Something <a href=\"https://regex101.com/r/bD6vT8/1\" rel=\"nofollow noreferrer\">like this</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1435740227, "post_id": 31156177, "comment_id": 50321924, "body": "More succinctly, <code>while(&lt;&gt;) { my @fields = split; print &quot;@fields\\n&quot; if $fields[0] !~ &#47;^\\d&#47;; }</code>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1435740501, "post_id": 31156177, "comment_id": 50322104, "body": "Or then even <code>perl -Ane &#39;print if $F[0] !~ &#47;^\\d&#47;&#39; file</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1435741008, "post_id": 31156177, "comment_id": 50322450, "body": "@DavidHammen: There are problems with that alternative. Firstly, the real code is unlikely to have just a single statement to be executed for filtered-in file records, so the statement modifier form of <code>if</code> can&#39;t be used unless we also enclose the statements in a <code>do</code> block, and that&#39;s very untidy. Secondly, the <code>\\d</code> character class includes many non-ASCII Unicode characters as well as just the decimal digits, so <code>[0-9]</code> is safer unless you use <code>\\d</code> with the <code>&#47;a</code> <i>ASCII-safe</i> regex modifier which requires version 5.14 or later of Perl"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1435741396, "post_id": 31156177, "comment_id": 50322711, "body": "@tripleee: As I mentioned, the <code>print</code> is just my own imagining, and the OP is very likely to want multiple statements executed for each matching line. Also, only the first three fields are of interest, so printing the whole line won&#39;t do what is required. Perhaps <code>say &quot;@F[0..2]&quot;</code> is acceptable"}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1435741604, "post_id": 31156177, "comment_id": 50322849, "body": "I have tried the solution @stribizhev suggested in the question&#39;s comments. It some how doesn&#39;t write the last(third) parameter(the one with csv) into the file. It gives a <code>Use of uninitialized value $_ in concatenation</code> at some line number that doesn&#39;t exist(300+ when I only have 149 lines). Here&#39;s my <a href=\"http://rextester.com/APM23933\" rel=\"nofollow noreferrer\">current code</a> in case if you would like to view it. Not sure whether it&#39;s not capturing or a logical error in it. EDIT: I changed the link, see the last line if you want to see one of the lines that was written to the file."}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1435742035, "post_id": 31156177, "comment_id": 50323143, "body": "I&#39;m not really good with <code>next</code> or <code>last</code>, so I&#39;m still figuring out with my current codes or if not I&#39;ll try out your answer. In the codes I am trying to read from a specific line to another line but I don&#39;t really know how so I just break if it reaches my desired end line."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1435741098, "last_edit_date": 1435741098, "creation_date": 1435739117, "answer_id": 31156177, "question_id": 31155754, "link": "https://stackoverflow.com/questions/31155754/regex-to-capture-text-not-beginning-with-number-but-containing-number/31156177#31156177", "title": "Regex to capture text not beginning with number but containing number", "body": "<p>It's hard to be sure what you need, but it looks like you can split each line on whitespace and select just the first three fields, rejecting any line whose first field starts with a decimal digit</p>\n\n<p>Here's a demonstration which reads from files specified on the command line</p>\n\n<pre><code>while ( &lt;&gt; ) {\n    my @fields = split;\n    next if $fields[0] =~ /^[0-9]/;\n\n    print \"@fields[0..2]\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 31156177, "answer_count": 1, "score": 0, "last_activity_date": 1435741098, "creation_date": 1435737782, "last_edit_date": 1435738089, "question_id": 31155754, "link": "https://stackoverflow.com/questions/31155754/regex-to-capture-text-not-beginning-with-number-but-containing-number", "title": "Regex to capture text not beginning with number but containing number", "body": "<p>I am writing a perl script and part of it is to capture data that does not begin with a number. I have tried <code>(\\w)\\s+(\\d+)\\s+(\\S+)\\s+(\\d.+)</code>. Below are some parts of the file(too big to put all lines here).</p>\n\n<p>The text I want to capture is</p>\n\n<pre><code>BBACCap            8            N/A           48,46,44,42,40,38,36,34,32,\n</code></pre>\n\n<p>or can be </p>\n\n<pre><code>IG-XL_DataTool     N/A          N/A           N/A\n</code></pre>\n\n<p>or </p>\n\n<pre><code>DC-30              1            N/A           1,0\n</code></pre>\n\n<p>The regex does match for the above data I need however I am also capturing data(which I don't want) such as </p>\n\n<pre><code>1       2\n2       3, 4\n</code></pre>\n\n<p>and also(which I don't want)</p>\n\n<pre><code>1.0     BBAC-15     805-004-50 0301B5C5 0829-E 5445\n    aka: 805-004-02,805-004-03\n</code></pre>\n\n<p>but only <code>E 5445\n        aka: 805-004-02,805-004-03</code> from the above.</p>\n\n<p>Any help on this?</p>\n"}, {"tags": ["bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435737821, "post_id": 31155726, "comment_id": 50320415, "body": "Actually I only want the <code>--</code>. Thanks for that. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435737841, "post_id": 31155726, "comment_id": 50320428, "body": "I don&#39;t need the parsing, I just need them to go through to the program."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 4, "last_activity_date": 1435737847, "last_edit_date": 1435737847, "creation_date": 1435737685, "answer_id": 31155726, "question_id": 31155659, "link": "https://stackoverflow.com/questions/31155659/how-do-i-pass-command-line-options-to-a-perl-program-with-perl-e/31155726#31155726", "title": "How do I pass command line options to a Perl program with perl -e?", "body": "<p>You can use the <code>-s</code>, like:</p>\n\n<pre><code>perl -se 'print \"got $some\\n\"' -- -some=SOME\n</code></pre>\n\n<p>the above prints:</p>\n\n<pre><code>got SOME\n</code></pre>\n\n<p>From the <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\">perlrun</a>:</p>\n\n<blockquote>\n  <p>-s   enables rudimentary switch parsing for switches on the command\n  line after the program name but before any\n              filename arguments (or before an argument of --).  Any switch found there is removed from @ARGV and sets\n              the corresponding variable in the Perl program.  The following program prints \"1\" if the program is\n              invoked with a -xyz switch, and \"abc\" if it is invoked with -xyz=abc.</p>\n\n<pre><code>            #!/usr/bin/perl -s\n            if ($xyz) { print \"$xyz\\n\" }\n\n        Do note that a switch like --help creates the variable \"${-help}\", which is not compliant with \"use strict\n        \"refs\"\".  Also, when using this option on a script with warnings enabled you may get a lot of spurious\n        \"used only once\" warnings.\n</code></pre>\n</blockquote>\n\n<p>For the simple arg-passing use the <code>--</code>, like:</p>\n\n<pre><code>perl -E 'say \"@ARGV\"' -- -some -xxx -ddd\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>-some -xxx -ddd\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3239, "user_id": 435004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de17b55eaba89e6609705c1fb15e175?s=128&d=identicon&r=PG", "display_name": "DomQ", "link": "https://stackoverflow.com/users/435004/domq"}, "is_accepted": false, "score": 2, "last_activity_date": 1435738598, "creation_date": 1435738598, "answer_id": 31156021, "question_id": 31155659, "link": "https://stackoverflow.com/questions/31155659/how-do-i-pass-command-line-options-to-a-perl-program-with-perl-e/31156021#31156021", "title": "How do I pass command line options to a Perl program with perl -e?", "body": "<p>Just pass <code>--</code> before the flags that are to go to the program, like so:</p>\n\n<pre><code>  perl -e 'print join(\"/\", @ARGV)' -- -foo bar\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>  -foo/bar\n</code></pre>\n"}], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 31155726, "answer_count": 2, "score": 3, "last_activity_date": 1435738598, "creation_date": 1435737426, "question_id": 31155659, "link": "https://stackoverflow.com/questions/31155659/how-do-i-pass-command-line-options-to-a-perl-program-with-perl-e", "title": "How do I pass command line options to a Perl program with perl -e?", "body": "<p>I want to pass command line options that start with a dash (<code>-</code> or <code>--</code>) to a Perl programm I am running with the <code>-e</code> flag:</p>\n\n<pre><code>$ perl -E 'say @ARGV' -foo\nUnrecognized switch: -foo  (-h will show valid options).\n</code></pre>\n\n<p>Passing arguments that don't start with a <code>-</code> obviously work:</p>\n\n<pre><code>$ perl -E 'say @ARGV' foo\nfoo\n</code></pre>\n\n<p><strong>How do I properly escape those so the program reads them correctly?</strong></p>\n\n<p>I tried a bunch of variations like <code>\\-foo</code>, <code>\\\\-foo</code>, <code>'-foo'</code>, <code>'\\-foo'</code>, <code>'\\\\-foo'</code>. None of those work though some produce different messages. <code>\\\\-foo</code> actually runs and outputs <code>\\-foo</code>.</p>\n"}, {"tags": ["regex", "perl", "file-io"], "comments": [{"owner": {"reputation": 29, "user_id": 4087058, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/822ea9c32395a496c02b9652f94ccb95?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/4087058/priya"}, "edited": false, "score": 0, "creation_date": 1435731670, "post_id": 31153858, "comment_id": 50317050, "body": "this is only small snippet of my code. If there is something missing please ignore"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435732020, "post_id": 31153858, "comment_id": 50317225, "body": "So where is the line 89 into <code>idve.pl</code> ?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1435732664, "post_id": 31153858, "comment_id": 50317570, "body": "Your code will not execute. There is compilation errors. Declare <code>@Result</code> at line 33."}, {"owner": {"reputation": 29, "user_id": 4087058, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/822ea9c32395a496c02b9652f94ccb95?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/4087058/priya"}, "edited": false, "score": 0, "creation_date": 1435732903, "post_id": 31153858, "comment_id": 50317681, "body": "There are some typo mistakes. Actual code is different. I tried to correct all typo mistakes. Please help me now"}, {"owner": {"reputation": 29, "user_id": 4087058, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/822ea9c32395a496c02b9652f94ccb95?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/4087058/priya"}, "edited": false, "score": 0, "creation_date": 1435733315, "post_id": 31153858, "comment_id": 50317912, "body": "I m using getoptions function to give file directory . I am giving $opt_filepath to give specific directory in that common path. There are so many folders in home/priya/scripts/....../check . While executing script I will give priyascript -filepath test, as a switch . To do processing in that test folder"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435817898, "post_id": 31154784, "comment_id": 50360415, "body": "@Priya: You also don&#39;t use <code>@Result</code> after you&#39;ve filled it"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435734815, "creation_date": 1435734815, "answer_id": 31154784, "question_id": 31153858, "link": "https://stackoverflow.com/questions/31153858/program-is-not-executing-from-other-directories-in-perl/31154784#31154784", "title": "program is not executing from other directories in perl", "body": "<p>You are opening the input file without a path. Instead of</p>\n\n<pre><code>open (FH, \"&lt;\", $file )\n</code></pre>\n\n<p>you should have</p>\n\n<pre><code>open (FH, \"&lt;\", \"$dir/$file\" )\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4087058, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/822ea9c32395a496c02b9652f94ccb95?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/4087058/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 31154784, "answer_count": 1, "score": 0, "last_activity_date": 1435734815, "creation_date": 1435731581, "last_edit_date": 1435732752, "question_id": 31153858, "link": "https://stackoverflow.com/questions/31153858/program-is-not-executing-from-other-directories-in-perl", "title": "program is not executing from other directories in perl", "body": "<p>I written some perl code to get some file names and get some values from files. If I execute my perl script from current directory i,e the directory all input files are located, it is executing fine and giving me fine results. If I change the perl script to different directory it saying could not open that file. here is small snippet of code.</p>\n\n<hr>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Getopt::Long;\nmy $opt_filepath;\n\n&amp;GetOptions (\n\"filepath:s\"  =&gt; \\$opt_filepath,);\n\nmy $dir =\"/home/priya/scripts/${opt_filepath}/check\";  #base directory to look up for the files\n    print \"$dir \\n\";\n    # Create output csv file\n    my $fileName = \"Output.csv\"; #output redirects to current directory\n  # ---- Read and Write as .csv file -------------------------\n open (FILEHANDLER, \"&gt;\", $fileName) or die(\"Could not write output File                                                         '$fileName' : $!\");\n       print FILEHANDLER \"Section,\";\n    print FILEHANDLER \"Result\";\n    print FILEHANDLER \"\\n\";\n\nmy @fileName = ();\nmy @FileContents = ();\nmy @Result = ();\n   opendir(DIR, $dir) or die \"Unable to read Directory : $!\";\nwhile (my $file = readdir(DIR)) {\n    #Only files not subdirectories\n    next unless (-f \"$dir/$file\");\n        next unless ($file =~ m/^EXP_.*/i); #will search for all EXP files\n print \"$file \\n\";\n@fileName = split(/_/, $file, 8);\n        print FILEHANDLER $fileName[1].\",\";\nopen (FH, \"&lt;\", $file ) or die(\"Could not open Input File : $!\");\n        @FileContents = &lt;FH&gt;;\n@Result = grep (/^ADDSUB/, @FileContents);\nprint FILEHANDLER $FileContents[1].\"\\n\";\n\n        close FH;\n}\nclosedir(DIR);\nclose FILEHANDLER;\nexit 0;\n</code></pre>\n\n<p>if execute in the directory which i have all input EXP files, it is executing good and giving me good results. If i copy the code to different directory and execute it is giving me this error</p>\n\n<pre><code>&gt;priyascript.pl -filepath test\n/home/priya/scripts/test/check\nEXPresult_101101_test\nCould not open Input File : No such file or directory at priyascript.pl line 31\n</code></pre>\n\n<p>i printed $file to check whether it is passing the file name. It is passing the file name but not opening it. \nI checked with all folder permissions and given 777</p>\n\n<p>Please help me</p>\n"}, {"tags": ["regex", "perl", "readline"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435728210, "post_id": 31153065, "comment_id": 50315665, "body": "<code>$.</code> =&gt; current file line number. <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html</a>"}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435728341, "post_id": 31153065, "comment_id": 50315710, "body": "@\u0421\u0443\u0445\u043e\u043927 Ohh I just saw the link. What should I use if I want to stop at the that line?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435734236, "post_id": 31153065, "comment_id": 50318390, "body": "This looks like XML. It it?  If so, the solution may be even easier"}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435735196, "post_id": 31153065, "comment_id": 50318960, "body": "@Sobrique It&#39;s not, I found a solution. I removed the <code>if</code> condition and added a <code>last if &#47;^\\&lt;\\&#47;TEST\\_HEAD TH 1\\&gt;&#47;;</code> at the end of the last <code>elsif</code> after the curly bracket. Do you think I if it&#39;s possible if I put another <code>if</code> condition containing another regex after that? Because I still want to read some lines in another line. Or should I make a new while loop for <code>&lt;$log_fh&gt;</code>?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435746330, "post_id": 31153065, "comment_id": 50325989, "body": "@\u0421\u0443\u0445\u043e\u043927 How big is the input file? (e.g. less than 200KB) For small files the easiest option may be to slurp whole file into variable and extract the records from the scalar variable."}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435794166, "post_id": 31153065, "comment_id": 50354477, "body": "@\u0421\u0443\u0445\u043e\u043927 The files are about 8MB each so I guess that would be out of the option"}], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1435728941, "post_id": 31153175, "comment_id": 50315917, "body": "Hmm but only those two lines (and maybe a few, too many lines to point out from) are in that format, the rest are in plain text. Would the whole file be considered as a XML like document? And for the nesting logic it&#39;s alright, that&#39;s just for capturing data on the lines I want."}, {"owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "edited": false, "score": 0, "creation_date": 1435729494, "post_id": 31153175, "comment_id": 50316120, "body": "I tried your answer, it gives me a <code>Use of uninitialized value $_ in concatenation (.) or string at ...</code>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1435728801, "last_edit_date": 1495539838, "creation_date": 1435728495, "answer_id": 31153175, "question_id": 31153065, "link": "https://stackoverflow.com/questions/31153065/how-to-read-from-specific-line-to-another-line-perl/31153175#31153175", "title": "How to read from specific line to another line - Perl", "body": "<p>Without going much into the nested matching logic you may want to change</p>\n\n<pre><code>if($. =~ /\\&lt;TEST_HEAD TH 1\\&gt;/)\n</code></pre>\n\n<p>into</p>\n\n<pre><code>if (/&lt;TEST_HEAD TH 1&gt;/ .. /&lt;\\/TEST_HEAD TH 1&gt;/)\n</code></pre>\n\n<p>What you ask is actually XY problem and it would be better to process xml like document with xml parser. <a href=\"https://stackoverflow.com/questions/16268188/parsing-complex-xml-in-perl\">Parsing complex XML in Perl</a></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1435740431, "creation_date": 1435740431, "answer_id": 31156632, "question_id": 31153065, "link": "https://stackoverflow.com/questions/31153065/how-to-read-from-specific-line-to-another-line-perl/31156632#31156632", "title": "How to read from specific line to another line - Perl", "body": "<p>Without knowing specifically how your data looks, I'd also offer another approach.</p>\n\n<p>Set <code>$/</code> to a record separator, and then you grab a chunk of text in one go. You can then apply a bunch of different regexes to it all at once. </p>\n\n<p>E.g.:</p>\n\n<pre><code>local $/ = 'TEST_HEAD';\n\nwhile (&lt;$log_fh&gt;) {\n    next unless m/^\\s*TH/;\n\n    my ( $tester_name, $tester_id ) = (m/Computer Name:\\s*(\\S+)(-\\d+)/i);\n    my ($op_sys) = (m/Operating System:\\s*(.*\\S)/i);\n    my ( $slot, $board, $part, $serial ) =\n        (m/^([\\d]+)\\.\\d\\s+(\\S+)\\s+([\\d-]*)\\s+([\\d|\\w]*)(?=\\s)/m);\n\n    # etc.\n\n    # then validate and update your array:\n    $details{$tester_name} = $tester_name;\n    ## etc.\n}\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 3910757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ee7d2a2e6ef6a7e5d06502f4193b3c75?s=128&d=identicon&r=PG&f=1", "display_name": "kross", "link": "https://stackoverflow.com/users/3910757/kross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 31153175, "answer_count": 2, "score": 0, "last_activity_date": 1435740431, "creation_date": 1435727940, "last_edit_date": 1435728320, "question_id": 31153065, "link": "https://stackoverflow.com/questions/31153065/how-to-read-from-specific-line-to-another-line-perl", "title": "How to read from specific line to another line - Perl", "body": "<p>I'm doing a Perl script and I have a log file where I need to extract data from. I want to know how to read from a specific line to another line(not end of file).</p>\n\n<p>I tried it this way by putting a <code>last if</code> if it reaches the line that I want to stop at but it doesn't work. The line that I want to start reading from is <code>&lt;TEST_HEAD TH 1&gt;</code> and stops at <code>&lt;/TEST_HEAD TH 1&gt;</code>. I'm doing this because my regular expression captures data that I do not need, so I tried to read from a specific line to another line.</p>\n\n<p>This is what I've done so far:</p>\n\n<pre><code>while(&lt;$log_fh&gt;)\n{\n    if($. =~ /\\&lt;TEST_HEAD TH 1\\&gt;/)\n    {\n      if ( /Computer Name:\\s*(\\S+)(-\\d+)/i )\n      {\n          $details{tester_name} = $1 . $2;\n          $details{tester_type} = $1;\n          push @{$details{tester_arr}}, $1 . $2;\n      }\n      elsif ( /Operating System:\\s*(.*\\S)/i )\n      {\n          $details{op_sys} = $1;\n      }\n      elsif ( /IG-XL Version:\\s*([^;]*)/i )\n      {\n          $details{igxl_vn} = $1;\n      }\n      elsif ( /^([\\d]+)\\.\\d\\s+(\\S+)\\s+([\\d-]*)\\s+([\\d|\\w]*)(?=\\s)/ )\n      {\n          push @{$details{slot}}, $1;\n          push @{$details{board_name}},  $2;\n          push @{$details{part_no}},  $3;\n          push @{$details{serial_no}},  $4;\n      }\n      last if $. == /\\&lt;\\/TEST_HEAD TH 1\\&gt;/;\n    }\n}\n</code></pre>\n\n<p>Just a modified sample of the raw data file:</p>\n\n<pre><code>&lt;TEST_HEAD TH 1&gt; #Start reading here\n\n    (Lines containing data to be captured)\n\n&lt;/TEST_HEAD TH 1&gt; #end reading here\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1435739148, "post_id": 31153072, "comment_id": 50321217, "body": "+1. But <code>Non-destructive substitution modifier</code> not working in before the version of <code>5.14</code>. Tells the error something like <code>Bareword found where operator expected at regex.pl line 2, near &quot;s&#47;(.)\\1+&#47;$1&#47;gr&quot; Can&#39;t modify constant item in substitution (s&#47;&#47;&#47;) at regex.pl line 2, near &quot;s&#47;(.)\\1+&#47;$1&#47;gr&quot;</code> But i learn something from your answer. :)"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1435742241, "post_id": 31153072, "comment_id": 50323291, "body": "@Hussain I don&#39;t know about perl but about pcre. I don&#39;t find any diff between your regex and mine."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 1, "last_activity_date": 1435729616, "last_edit_date": 1435729616, "creation_date": 1435727978, "answer_id": 31153072, "question_id": 31153056, "link": "https://stackoverflow.com/questions/31153056/unique-the-repeat-value-of-string-content/31153072#31153072", "title": "unique the repeat value of string content", "body": "<p>You may try this,</p>\n\n<pre><code>echo \"AAAAATTTTTGGGGGGCCCCCAAAATTTT\" | perl -pe 's/(.)\\1+/\\1/g'\n</code></pre>\n\n<p><code>(.)</code> captures a single character.</p>\n\n<p><code>\\1+</code> matches the following same character one or more times.</p>\n\n<p><a href=\"https://regex101.com/r/tV6oG0/1\" rel=\"nofollow\">DEMO</a></p>\n\n<p><strong>or</strong></p>\n\n<pre><code>use warnings;\n\nprint \"AAAAATTTTTGGGGGGCCCCCAAAATTTT\" =~ s/(.)\\1+/$1/gr;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4902466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIioJ.jpg?s=128&g=1", "display_name": "Sant", "link": "https://stackoverflow.com/users/4902466/sant"}, "edited": false, "score": 0, "creation_date": 1435729458, "post_id": 31153113, "comment_id": 50316104, "body": "thanks you @vks.  this regex result can&#39;t be assign to a variable. let me know how to do."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1435738911, "post_id": 31153113, "comment_id": 50321051, "body": "@vks your pattern not unique the character which occurring one time. Example, data like this <code>$s = &quot;ATGC&quot;</code> your pattern not give the result. so use the <code>*</code> instead of  <code>+</code> :)"}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1435738999, "post_id": 31153113, "comment_id": 50321116, "body": "@Hussain when its <code>ATGC</code> we need to match it.see here <a href=\"https://regex101.com/r/cK4iV0/5\" rel=\"nofollow noreferrer\">regex101.com/r/cK4iV0/5</a>"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 0, "last_activity_date": 1435728183, "creation_date": 1435728183, "answer_id": 31153113, "question_id": 31153056, "link": "https://stackoverflow.com/questions/31153056/unique-the-repeat-value-of-string-content/31153113#31153113", "title": "unique the repeat value of string content", "body": "<pre><code>(.)\\K\\1+\n</code></pre>\n\n<p>You can try this.Replace by <code>empty string</code>.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/cK4iV0/4\" rel=\"nofollow\">https://regex101.com/r/cK4iV0/4</a></p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 4861757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/15ee3b81f6bd4510acc3999af15718d9?s=128&d=identicon&r=PG&f=1", "display_name": "stackcareer", "link": "https://stackoverflow.com/users/4861757/stackcareer"}, "is_accepted": false, "score": 0, "last_activity_date": 1435740654, "last_edit_date": 1435740654, "creation_date": 1435731073, "answer_id": 31153745, "question_id": 31153056, "link": "https://stackoverflow.com/questions/31153056/unique-the-repeat-value-of-string-content/31153745#31153745", "title": "unique the repeat value of string content", "body": "<pre><code>use strict;\nuse warnings;\nprint\"AAAAATTTTTGGGGGGCCCCCAAAATTTT\"=~s/(A|T|G|C)\\1*/$1/gr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1435738624, "creation_date": 1435738624, "answer_id": 31156035, "question_id": 31153056, "link": "https://stackoverflow.com/questions/31153056/unique-the-repeat-value-of-string-content/31156035#31156035", "title": "unique the repeat value of string content", "body": "<p>Try this</p>\n\n<pre><code>use warnings;\nuse strict;\nmy $s = \"AAAAATTTTTGGGGGGCCCCCAAAATTTTAAAGGF\";\nmy @va = $s =~m/(.)\\1*/g;\nprint @va,\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4902466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIioJ.jpg?s=128&g=1", "display_name": "Sant", "link": "https://stackoverflow.com/users/4902466/sant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31156035, "answer_count": 4, "score": 0, "last_activity_date": 1435740654, "creation_date": 1435727896, "question_id": 31153056, "link": "https://stackoverflow.com/questions/31153056/unique-the-repeat-value-of-string-content", "title": "unique the repeat value of string content", "body": "<p><strong>Example</strong><br>\nINPUT  </p>\n\n<blockquote>\n  <p>$str= \"AAAAATTTTTGGGGGGCCCCCAAAATTTT\";</p>\n</blockquote>\n\n<p>OUTPUT</p>\n\n<blockquote>\n  <p>ATGCAT</p>\n</blockquote>\n"}, {"tags": ["php", "perl", "berkeley-db"], "comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1435745679, "post_id": 31152753, "comment_id": 50325569, "body": "How big is the file?  Could you generated &quot;right&quot; Berkeley DB version from text input on the target system?"}], "answers": [{"tags": [], "owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "is_accepted": true, "score": 5, "last_activity_date": 1435738765, "creation_date": 1435738765, "answer_id": 31156070, "question_id": 31152753, "link": "https://stackoverflow.com/questions/31152753/how-to-specify-version-of-berkeleydb-when-creating-file-using-perl-db-file/31156070#31156070", "title": "How to specify version of BerkeleyDB when creating file using perl DB_File?", "body": "<p>No, there is no way to tell perl's DB_File to create a specific version , AFAIK libdb itself doesn't have that feature</p>\n\n<p>If you compile/link against version 4.x of libdb, then DB_File only gets to use that version</p>\n\n<p>So if you need DB_File that uses libdb-4.x you will have to downgrad or install another copy in a different @INC directory</p>\n\n<p>When installing this is the file you edit  <a href=\"https://metacpan.org/source/PMQS/DB_File-1.835/config.in\" rel=\"noreferrer\">https://metacpan.org/source/PMQS/DB_File-1.835/config.in</a></p>\n\n<p>Simply change <code>DBNAME = -ldb-2.4.10</code> to match the version that your php install used</p>\n\n<p>Specify a different install directory with <a href=\"https://metacpan.org/pod/ExtUtils::MakeMaker#INSTALL_BASE\" rel=\"noreferrer\">https://metacpan.org/pod/ExtUtils::MakeMaker#INSTALL_BASE</a> then tell perl where to find it with <a href=\"https://metacpan.org/pod/perlrun#PERL5LIB\" rel=\"noreferrer\">https://metacpan.org/pod/perlrun#PERL5LIB</a></p>\n\n<p><a href=\"https://metacpan.org/pod/local::lib\" rel=\"noreferrer\">https://metacpan.org/pod/local::lib</a> also documents this </p>\n"}], "owner": {"reputation": 799, "user_id": 1327079, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/047016389f58a3a3b134a7f7915b7740?s=128&d=identicon&r=PG", "display_name": "tu-Reinstate Monica-dor duh", "link": "https://stackoverflow.com/users/1327079/tu-reinstate-monica-dor-duh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 31156070, "answer_count": 1, "score": 4, "last_activity_date": 1435738765, "creation_date": 1435726275, "question_id": 31152753, "link": "https://stackoverflow.com/questions/31152753/how-to-specify-version-of-berkeleydb-when-creating-file-using-perl-db-file", "title": "How to specify version of BerkeleyDB when creating file using perl DB_File?", "body": "<p>We seem to have hit a version incompatibility in BerkeleyDB between our perl scripts and our PHP scripts.  Our perl scripts generate BDB and our php scripts merely read them.</p>\n\n<p>Our perl scripts use DB_File to create a BDB file:</p>\n\n<pre><code>use DB_File;\n$DBFILE=\"output.db\";\ntie(%db, \"DB_File\", $DBFILE, O_RDWR | O_CREAT, 0644)\n    or warning(\"Could not open db file '$DBFILE'\");\n</code></pre>\n\n<p>This previously created a file of type:</p>\n\n<pre><code>$ file output.db\noutput.db: Berkeley DB (Hash, version 9, native byte-order)\n</code></pre>\n\n<p>But, after an upgrade of sys-libs/db and DB_File, now creates a file of type:</p>\n\n<pre><code>$ file output.db\noutput.db: Berkeley DB (Hash, version 10, native byte-order)\n</code></pre>\n\n<p>At the other of the system we have a PHP script.  When the upgrade occurred, our PHP code (based on dba_open()) started complaining about the version:</p>\n\n<pre><code>Notice:  dba_open(): output.db: unsupported hash version: 10 in dbread.php on line 16\n</code></pre>\n\n<p>I have tried upgrading PHP, but version 10 doesn't seem to be supported yet.</p>\n\n<p>Is there a way to tell perl's DB_File to create a specific version when creating the DB?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435741060, "post_id": 31151851, "comment_id": 50322486, "body": "I&#39;m not really sure regular expressions are really the tool for this job. At best you end up with some extremely convoluted syntax which is - as you&#39;ve found - really hard to disentangle."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435741140, "post_id": 31151851, "comment_id": 50322542, "body": "Also: Why do you distrust the opinion of good programmers? The prevailing opinion is - <code>strict</code> and <code>warnings</code> should be your very first troubleshooting steps, because they highlight some errors that will &quot;work&quot; but not produce desired results."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435741200, "post_id": 31151851, "comment_id": 50322584, "body": "<a href=\"http://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\" title=\"why use strict and warnings\">stackoverflow.com/questions/8023959/why-use-strict-and-warni&zwnj;&#8203;ngs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1435745376, "last_edit_date": 1495540278, "creation_date": 1435743656, "answer_id": 31157798, "question_id": 31151851, "link": "https://stackoverflow.com/questions/31151851/counting-presence-of-words-within-context-near-other-words/31157798#31157798", "title": "Counting presence of words within context (near other words)", "body": "<p>Well, first off - the text you give... looks like <code>red</code> is more than 4 words away from <code>fish</code> in the first place? </p>\n\n<p>But failing that - the problem is I think because your regex is \"consuming\" the text on the first match so it doesn't it the second match. </p>\n\n<p>In this, you start to hit the limitations of the regular expression engine - <a href=\"http://www.regular-expressions.info/keep.html\" rel=\"nofollow noreferrer\">http://www.regular-expressions.info/keep.html</a> </p>\n\n<p>How important is it that you use a single regular expression to do your search? Bear in mind that whilst a regular expression <em>looks</em> quite concise, it can be hard to read and computationally expensive. </p>\n\n<p>I would suggest therefore that your initial suggestion of splitting up your patterns isn't as bad as it sounds - in order to match 'red' and 'blue' on the second example, you need to allow for the conditions that'll permit duplicate matches.</p>\n\n<p>E.g. </p>\n\n<pre><code> fish cat red red blue blue\n</code></pre>\n\n<p>How many hits <em>should</em> you get here? You can use something like a hash to count duplicates of words and deduplicate 'relationships' though:</p>\n\n<pre><code>my %matches = (\n        $text1 =~ m/\n                       \\b\n                       ($WORD_LIST_2)\n                       \\W+\n                       (?:\\w+\\W+){0,$within_N_words}?\n                       ($WORD_LIST_1)\\b\n                   /gix\n);\n\nprint Dumper \\%matches;\n</code></pre>\n\n<p>We match into a hash, because then when we 'insert' paired words, we get key-value pairs:</p>\n\n<pre><code>$VAR1 = {\n          'fish' =&gt; 'blue'\n        };\n</code></pre>\n\n<p>But it may be of use to know - you can use <code>qr</code> in perl to \"compile\" a regex and see what you actually end up with. </p>\n\n<p>In your example:</p>\n\n<pre><code>print qr /\\b(?=($WORD_LIST_1)\\W+(?:\\w+\\W+){0,$within_N_words}?(?:$WORD_LIST_2))\\b|\\b(?=(?:$WORD_LIST_2)\\W+(?:\\w+\\W+){0,$within_N_words}?($WORD_LIST_1))\\b/;\n\n(?^:\\b(?=(red|blue|green|brown)\\W+(?:\\w+\\W+){0,4}?(?:(?^:cat|dog|bird|fish)))\\b|\\b(?=(?:(?^:cat|dog|bird|fish))\\W+(?:\\w+\\W+){0,4}?(red|blue|green|brown))\\b)\n</code></pre>\n\n<p>The first pattern doesn't match at all. \nThe second does, but only once because it 'eats' the existing patterns. </p>\n\n<pre><code>my @finds2 = ( $text1 =~ m/\\b(?:$WORD_LIST_2)\\W+(?:\\w+\\W+){0,$within_N_words}?($WORD_LIST_1)\\b/gi )\n</code></pre>\n\n<p>Finds <code>blue</code>. Drop the 'nongreedy' modifier, and it'll find <code>red</code>. But because your pattern has 'eaten' the preceeding bits, it can't match twice with the <code>g</code> modifier. </p>\n\n<p>I don't <em>think</em> perl will support multi-matching in that context, because if you think about it, the number of comparisons needed quickly gets huge.</p>\n\n<p>I would also offer:</p>\n\n<ul>\n<li>check out the <code>x</code> modifier for writing your regexes when they get long. </li>\n<li>You can compile regexes, and it's advantageous when using variables that are effectively static (like you are). </li>\n</ul>\n\n<p>So something like this:</p>\n\n<pre><code>my @pets = qw (cat dog bird fish );\nmy $WORD_LIST_2 = join( \"|\", map {quotemeta} @pets );\n$WORD_LIST_2 = qr/$WORD_LIST_2/;\n\nmy @finds2 = (\n    $text1 =~ m/\n                   \\b\n                   (?:$WORD_LIST_2)\n                   \\W+\n                   (?:\\w+\\W+){0,$within_N_words}?\n                   ($WORD_LIST_1)\\b\n               /gix\n);\n</code></pre>\n\n<p>For 1: Because your capturing is both 'sides' of the alternation, but only one can match. So the one that doesn't returns <code>undef</code>. Split your pattern into two, and you won't have this problem. Or use <code>?|</code> for branch reset.  <a href=\"http://www.effectiveperlprogramming.com/2010/09/use-branch-reset-grouping-to-number-captures-in-alternations/\" rel=\"nofollow noreferrer\">http://www.effectiveperlprogramming.com/2010/09/use-branch-reset-grouping-to-number-captures-in-alternations/</a></p>\n\n<p>For 2: <a href=\"https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\">Why use strict and warnings?</a></p>\n\n<p>So I'd suggest ending up with something like:</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @colors = qw ( red blue green brown );    \nmy $WORD_LIST_1 = join( \"|\", map {quotemeta} @colors );\n   $WORD_LIST_1 = qr/$WORD_LIST_1/;\n\nmy @pets = qw (cat dog bird fish );\nmy $WORD_LIST_2 = join( \"|\", map {quotemeta} @pets );\n   $WORD_LIST_2 = qr/$WORD_LIST_2/;\n\nmy $within_N_words = 4;\n\nwhile ( my $text1 = &lt;DATA&gt; ) {\n\n    print $text1;\n\n    my %matches = (\n        $text1 =~ m/(?|                                       \n                        \\b                                #word break\n                          ($WORD_LIST_2) \n                          \\W+\n                          (?:\\w+\\W+){0,$within_N_words}?   #nongreedy 0-N 'words'. \n                          ($WORD_LIST_1) \n                        \\b\n                      |\n                        \\b\n                            ($WORD_LIST_1) \n                            \\W+\n                            (?:\\w+\\W+){0,$within_N_words}?\n                            ($WORD_LIST_2)\n                        \\b\n                      )\n                    /gix\n    );\n\n    print Dumper \\%matches;\n}\n\n__DATA__\nThe red haired dog quickly and sharply ran away from the blue nosed cat.\nThe green spotted cat drinks blue water.\nThe brown feathered, green beaked bird flew away.\nThe fish with blue fins and red tails.\n</code></pre>\n\n<p>This gives us both words and context:</p>\n\n<pre><code>The red haired dog quickly and sharply ran away from the blue nosed cat.\n$VAR1 = {\n          'blue' =&gt; 'cat',\n          'red' =&gt; 'dog'\n        };\nThe green spotted cat drinks blue water.\n$VAR1 = {\n          'green' =&gt; 'cat'\n        };\nThe brown feathered, green beaked bird flew away.\n$VAR1 = {\n          'brown' =&gt; 'bird'\n        };\nThe fish with blue fins and red tails.\n$VAR1 = {\n          'fish' =&gt; 'blue'\n        };\n</code></pre>\n\n<p>(You can use <code>values</code> to extract just the words). </p>\n"}], "owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 31157798, "answer_count": 1, "score": 0, "last_activity_date": 1435745376, "creation_date": 1435719499, "question_id": 31151851, "link": "https://stackoverflow.com/questions/31151851/counting-presence-of-words-within-context-near-other-words", "title": "Counting presence of words within context (near other words)", "body": "<p>First of all, thanks for any help you can give me on this question.  I have a list of words, in the example below it is a list of colors. Let's call this WORD_LIST_1. \nI want to count the number of times each word appears in a body of text. I can do this with a simple regular expression.\nHowever, I have another list of words that capture context. In the example below the context is a list of pets. Let's call this WORD_LIST_2.\nI'd like to count the number of times each of the words in WORD_LIST_1 that are within X number of words of any of the words in WORK_LIST_2.\nMy strategy is to extract the matches to WORD_LIST_1 words into an array using a regular expression and then create hash that counts the number of times each word is in this array.\nI can do easily when the context word (WORD_LIST_2) follows the WORD_LIST_1 word. \nHowever, I run into a problem when the WORD_LIST_2 word appears before the WORD_LIST_1 words, specifically when there multiple WORD_LIST_2 words.</p>\n\n<p>Below is the code. </p>\n\n<pre><code>#!/usr/bin/perl -w\n#use strict;\n\n@colors = (\"red\", \"blue\", \"green\", \"brown\");\n\n$WORD_LIST_1 = join(\"|\",@colors);\n\n@pets = (\"cat\",\"dog\",\"bird\",\"fish\");\n$WORD_LIST_2 = join(\"|\",@pets);\n\n#$text1 = \"The red haired dog quickly and sharply ran away from the blue nosed cat.\";\n#$text1 = \"The green spotted cat drinks blue water.\";\n#$text1 = \"The brown feathered, green beaked bird flew away.\";\n$text1 = \"The fish with blue fins and red tails.\";\n\n@finds = ();\n$within_N_words = 4;\n@finds = $text1 =~ m/\\b(?=($WORD_LIST_1)\\W+(?:\\w+\\W+){0,$within_N_words}?(?:$WORD_LIST_2))\\b|\\b(?=(?:$WORD_LIST_2)\\W+(?:\\w+\\W+){0,$within_N_words}?($WORD_LIST_1))\\b/gi;\n\n@finds = grep defined, @finds;\n\nprint \"\\n\\n\", join(\"|\", @finds), \"\\n\\n\";\n</code></pre>\n\n<p>Note that the fourth $text1 line has blue and red following fish. But it only returns \"blue\" and doesn't return \"red\" too. I've check the first three sentences that are commented out and they appear to be working well. </p>\n\n<p>My approach is based on this page: <a href=\"http://www.regular-expressions.info/near.html\" rel=\"nofollow\">http://www.regular-expressions.info/near.html</a></p>\n\n<p>Thoughts I've considered includd using a positive look-behind, but I need to have variable lengths in the look behind. </p>\n\n<p>I've thought about reversing the entire text string and regular expression, then searching again. But this could result in double counting.</p>\n\n<p>I've also thought about searching for each WORD_LIST_1 word in individual regular expersions using some sort of loop. \nHowever, this takes a lot of time on my real data as the actual WORD_LIST_1 list is 500 or so words and I have multiple bodies of length text I want to search. </p>\n\n<p>Two other side notes: </p>\n\n<p>(1)the regular expression above occasionally returns empty elements into the @finds array. I can't figure out why. My work around is to use the grep defined line. What is the correct way to address this. Rather, why is my regular expression returning blank elements?</p>\n\n<p>(2) I'm still learning the \"proper\" way to use PERL. I've commented out use strict in this example as I don't believe in the context I am using perl it makes a difference. I'm sure someone can tell me why this is wrong of me. Good  PERL programmers always seem to tell me I shouldn't run perl code without using strict, but no one yet has convinced me it is something I need to worry about. However, I'm open to learning. </p>\n"}, {"tags": ["visual-studio", "perl", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1435711674, "post_id": 31150635, "comment_id": 50311696, "body": "It seems like <code>perlio.c</code> is using some implementation-dependent details of the <code>_iobuf</code> structure (which is an implementation-dependent detail itself). MS has been making significant changes to the runtime recently - it looks like your project is getting bitten by relying on implementation details. You might post information about where the <code>perlio.c</code> file is from - the first one I came across has nowhere near 2800 lines.  You might also post some of the code from around line 2896 for context about the error."}, {"owner": {"reputation": 11, "user_id": 5067221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7b31467717ca6678dd3b417a01d9eb?s=128&d=identicon&r=PG&f=1", "display_name": "brandonthestark", "link": "https://stackoverflow.com/users/5067221/brandonthestark"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1435793982, "post_id": 31150635, "comment_id": 50354431, "body": "I added some lines missing into the header of visual studio corecrt_wstdio.h from stdio.h from wine. I copied the struct lines where it includes the information about this struct and this thing worked for me. I guess MS VS messed up by splitting some libraries for VS 2015 RC. I hope they clear the issue during the release version."}], "answers": [{"tags": [], "owner": {"reputation": 2675, "user_id": 545475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zl64v.jpg?s=128&g=1", "display_name": "Arnavion", "link": "https://stackoverflow.com/users/545475/arnavion"}, "is_accepted": false, "score": 2, "last_activity_date": 1465576450, "last_edit_date": 1465576450, "creation_date": 1437756454, "answer_id": 31615790, "question_id": 31150635, "link": "https://stackoverflow.com/questions/31150635/build-error-in-visual-studio-in-perlio-h-and-iobuf/31615790#31615790", "title": "Build Error in visual Studio in perlio.h and iobuf", "body": "<p>Just found this while hitting it myself. Presumably you were compiling the official CPAN Perl source. It has many problems while compiling with VS 2015 from its extensive use of the internals of the <code>FILE</code> struct. The new CRT that ships with 2015 (the Win 10 Universal CRT) has changed the <code>FILE</code> struct to an opaque one, as @Michael Burr mentioned in the comment.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct _iobuf\n{\n    void* _Placeholder;\n} FILE;\n</code></pre>\n\n<ul>\n<li><p><code>perlio.c</code> has multiple cases of trying to use <code>FILE::_base</code> and <code>FILE::_ptr</code>. These can be disabled by undefining <code>USE_STDIO_BASE</code> and <code>USE_STDIO_PTR</code> in config.h. (In a clean build <code>config.h</code> is generated by copying <code>config_H.vc</code>)</p></li>\n<li><p><code>perlio.c</code> also uses <code>FILE::_file</code>. This one is not controlled by any <code>#define</code>. The only way is to remove the offending line.</p></li>\n<li><p><code>win32.c</code> extensively uses internals of the <code>FILE</code> struct, such as in <code>fdupopen</code> where it tries to generate a new <code>FILE*</code> from an existing one for the same filename, open mode and file position. There is no POSIX way to do this, and I don't know if there's any WinAPI to do it either.</p></li>\n<li><p><code>win32.c</code> also tries to provide a wrapper around <code>gets()</code>, which has also been removed. (It was removed from the C and C++ standards for being insecure.)</p></li>\n</ul>\n\n<p>For the last two points, I have not found any workaround either. For now, you have to either use an older VS to compile Perl, or use 2015 but with an older SDK.</p>\n\n<p>Edit: You can follow the progress on this on <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=125714\" rel=\"nofollow\">Perl's bug tracker (ID:125714)</a>. For better or worse, their workaround seems to be to simply cast the pointer to the new internal struct and access <em>that</em> one's internals.</p>\n"}], "owner": {"reputation": 11, "user_id": 5067221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7b31467717ca6678dd3b417a01d9eb?s=128&d=identicon&r=PG&f=1", "display_name": "brandonthestark", "link": "https://stackoverflow.com/users/5067221/brandonthestark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2679, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511924718, "creation_date": 1435709896, "last_edit_date": 1511924718, "question_id": 31150635, "link": "https://stackoverflow.com/questions/31150635/build-error-in-visual-studio-in-perlio-h-and-iobuf", "title": "Build Error in visual Studio in perlio.h and iobuf", "body": "<p>I am trying to compile some project using visual studio 2015 RC but I am facing issues when it tries to compile perlio.c. From what I have read this error is related to Visual Studio 2015 rather than the application that I am trying to build.\nI have the following error:</p>\n\n<pre><code>C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10056.0\\ucrt\\errno.h(112): note: see previous definition of 'ENOTSOCK'\nperlio.c(2896): error C2039: '_file': is not a member of '_iobuf'\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10056.0\\ucrt\\corecrt_wstdio.h(26): note: see declaration of '_iobuf'\n\nCommand errors:\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.00.22816 for x86\n</code></pre>\n\n<p>So how to solve this error:</p>\n\n<pre><code>_file' is not a member of '_iobuf'\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1435739881, "post_id": 31150543, "comment_id": 50321670, "body": "This isn&#39;t how StackOverflow works. You don&#39;t just post your homework here for us to write for you. You post code that isn&#39;t working how you want it to and we help you find the solution."}], "answers": [{"tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": false, "score": 4, "last_activity_date": 1435709998, "last_edit_date": 1435709998, "creation_date": 1435709654, "answer_id": 31150597, "question_id": 31150543, "link": "https://stackoverflow.com/questions/31150543/i-have-a-string-in-perl-how-do-i-replace-it-with-the-same-string-but-with-a/31150597#31150597", "title": "I have a string in perl, how do I replace it with the same string but with [ ] around only the numbers?", "body": "<p>This should work. It replaces groups of one or more digits, the \"\\d+\" part, with the captured string surrounded by [], the \"[$1]\" part. </p>\n\n<pre><code>$a = \"bob123bob123\";\n\n$a =~ s/(\\d+)/[$1]/g;\n\nprint \"$a\";\n# bob[123]bob[123]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5067489, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yh2NNEU1BeE/AAAAAAAAAAI/AAAAAAAAAHg/c12uHHMMjk4/photo.jpg?sz=128", "display_name": "Eric Hunt-Schroeder", "link": "https://stackoverflow.com/users/5067489/eric-hunt-schroeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1437565405, "answer_count": 1, "score": -6, "last_activity_date": 1435709998, "creation_date": 1435709145, "last_edit_date": 1435709537, "question_id": 31150543, "link": "https://stackoverflow.com/questions/31150543/i-have-a-string-in-perl-how-do-i-replace-it-with-the-same-string-but-with-a", "closed_reason": "Needs more focus", "title": "I have a string in perl, how do I replace it with the same string but with [ ] around only the numbers?", "body": "<p>Example: DATA500 replaced with DATA[500]</p>\n"}, {"tags": ["linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 1737991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e80336e9b7bea4d4de3047f541760ac?s=128&d=identicon&r=PG", "display_name": "Demiurg", "link": "https://stackoverflow.com/users/1737991/demiurg"}, "edited": false, "score": 0, "creation_date": 1532437138, "post_id": 31150328, "comment_id": 89966447, "body": "Please add  <code>$Data::Dumper::Useperl = 1;</code>  as modern Data::Dumper uses XS and simple hack won&#39;t work"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 81, "user_id": 1737991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e80336e9b7bea4d4de3047f541760ac?s=128&d=identicon&r=PG", "display_name": "Demiurg", "link": "https://stackoverflow.com/users/1737991/demiurg"}, "edited": false, "score": 0, "creation_date": 1532447290, "post_id": 31150328, "comment_id": 89974145, "body": "@Demiurg what simple hack?"}, {"owner": {"reputation": 81, "user_id": 1737991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e80336e9b7bea4d4de3047f541760ac?s=128&d=identicon&r=PG", "display_name": "Demiurg", "link": "https://stackoverflow.com/users/1737991/demiurg"}, "edited": false, "score": 0, "creation_date": 1532594075, "post_id": 31150328, "comment_id": 90036393, "body": "<code>$Data::Dumper::Useqq=1;</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 81, "user_id": 1737991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e80336e9b7bea4d4de3047f541760ac?s=128&d=identicon&r=PG", "display_name": "Demiurg", "link": "https://stackoverflow.com/users/1737991/demiurg"}, "edited": false, "score": 0, "creation_date": 1532613125, "post_id": 31150328, "comment_id": 90048634, "body": "@Demiurg how is that a &quot;hack&quot;?  It says to dump strings double-quoted and show non-space whitespace or non-printable characters as escape sequences, which is exactly what I want.  Whether the XS or perl backend is used is irrelevant.  Can you explain better why I should add Useperl?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1435707658, "creation_date": 1435707658, "answer_id": 31150328, "question_id": 31150295, "link": "https://stackoverflow.com/questions/31150295/perl-is-changing-and-eliminating-declared-variables-when-parsing-and-printing-se/31150328#31150328", "title": "Perl is changing and eliminating declared variables when parsing and printing segments of file? Possible bug?", "body": "<p>I suspect your file contains carriage return characters.</p>\n\n<p>Eliminate them with <code>s/\\r//;</code> in your input loop.</p>\n\n<p>If you have a problem where a variable's value doesn't seem to be quite what you expect, you can make non-printable characters obvious by doing:</p>\n\n<pre><code>use Data::Dumper;\n$Data::Dumper::Useqq=1;\nprint Dumper $variable;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 4560113, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb116b84b6ebb26f58fb444b06ca0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "je_b", "link": "https://stackoverflow.com/users/4560113/je-b"}, "edited": false, "score": 0, "creation_date": 1435766121, "post_id": 31152212, "comment_id": 50340404, "body": "That is true, but not helpful to answer the question."}], "tags": [], "owner": {"reputation": 81, "user_id": 1737991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e80336e9b7bea4d4de3047f541760ac?s=128&d=identicon&r=PG", "display_name": "Demiurg", "link": "https://stackoverflow.com/users/1737991/demiurg"}, "is_accepted": false, "score": 0, "last_activity_date": 1435722448, "creation_date": 1435722448, "answer_id": 31152212, "question_id": 31150295, "link": "https://stackoverflow.com/questions/31150295/perl-is-changing-and-eliminating-declared-variables-when-parsing-and-printing-se/31152212#31152212", "title": "Perl is changing and eliminating declared variables when parsing and printing segments of file? Possible bug?", "body": "<p>And array elements counting from 0, not 1. So  $line[7] is Slot18, not Slot17.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435767392, "creation_date": 1435767392, "answer_id": 31166652, "question_id": 31150295, "link": "https://stackoverflow.com/questions/31150295/perl-is-changing-and-eliminating-declared-variables-when-parsing-and-printing-se/31166652#31166652", "title": "Perl is changing and eliminating declared variables when parsing and printing segments of file? Possible bug?", "body": "<p>The problem with varying line terminators on different platforms is best solved by using the <code>\\R</code> regex expression which matches any single vertical whitespace character (including <code>LF</code> and <code>CR</code>) as well as the CR LF pair that is found in Windows and on the internet</p>\n\n<p>Replacing <code>chomp</code> with <code>s/\\R\\z//</code> will remove the line terminator from any file, regardless of its source</p>\n"}], "owner": {"reputation": 213, "user_id": 4560113, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb116b84b6ebb26f58fb444b06ca0f4e?s=128&d=identicon&r=PG&f=1", "display_name": "je_b", "link": "https://stackoverflow.com/users/4560113/je-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 31150328, "answer_count": 3, "score": 0, "last_activity_date": 1435767392, "creation_date": 1435707452, "last_edit_date": 1435766087, "question_id": 31150295, "link": "https://stackoverflow.com/questions/31150295/perl-is-changing-and-eliminating-declared-variables-when-parsing-and-printing-se", "title": "Perl is changing and eliminating declared variables when parsing and printing segments of file? Possible bug?", "body": "<p>I am trying to parse a file using Perl (v5.10.1 built for x86_64-linux) and the file has blocks of information of three lines like this:</p>\n\n<pre><code>Header1,Header2,Header3,Header4,Header5,Header6,Header7,Header8,Header9\nSlot11,Slot12,Slot13,Slot14,Slot15,Slot16,Slot17,Slot18,Slot19\nSlot21,\nSlot31,\nSlot11,Slot12,Slot13,Slot14,Slot15,Slot16,Slot17,Slot18,Slot19\nSlot21,\nSlot31,\nSlot11,Slot12,Slot13,Slot14,Slot15,Slot16,Slot17,Slot18,Slot19\nSlot21,\nSlot31,\nand so on....\n</code></pre>\n\n<p>Now, I have Perl script that loads the file line per line</p>\n\n<pre><code>my @lines; \nwhile (&lt;$INPUT&gt;) {\n    chomp;\n    push @lines, $_;\n}\n</code></pre>\n\n<p>And then I process it...</p>\n\n<pre><code>for (my $i = 1; $i &lt;= $#lines; $i+=3) { ###skip the header line\n    chomp $lines[$i];\n    my @line = split (/\\,/, $lines[$i]);\n    my $cl1 = $line[6]; #Load Slot17\n    my $cl2 = $line[7]; #Load Slot18\n    my $ref1 = $lines[$i + 1]; #Load Slot21\n    my $ref2 = $lines[$i + 2]; #Load Slot31\n    chomp $ref1;\n    chomp $ref2;\n    chomp $cl1;\n    chomp $cl2;\n    #######Beware, problematic line!!!!!!!!\n    print \"$cl1\\t$cl2\\t$ref1\\t$ref2\\n\";  \n</code></pre>\n\n<p>}</p>\n\n<p>Each time I run this script the output is completely different to what I expected.</p>\n\n<pre><code>    Slot17     Slot31     Slot21\n</code></pre>\n\n<p>If I change the problematic line with:</p>\n\n<pre><code>    print \"$cl1\\n$cl2\\n$ref1\\n$ref2\\n\";\n</code></pre>\n\n<p>The results is as expected, that is:</p>\n\n<pre><code>    Slot17\n    Slot18\n    Slot21\n    Slot31\n</code></pre>\n\n<p>I also debugged the script and print variable by variable just before the problematic line and everything is fine. The problem seems to be in the print line, but I'm totally puzzled about what is causing it. Furthermore, this is a very simple script, there isn't that much space for unnoticed mistakes. How and why is my computer changing positions and eliminating results in my output? What causes this behaviour?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435710132, "post_id": 31150259, "comment_id": 50311372, "body": "prStrWidth is from PDF::Reuse  <a href=\"http://search.cpan.org/dist/PDF-Reuse/Reuse.pm#prStrWidth_-_calculate_the_string_width\" rel=\"nofollow noreferrer\">search.cpan.org/dist/PDF-Reuse/&hellip;</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435710227, "post_id": 31150259, "comment_id": 50311398, "body": "You may need to change prstrwidth to prStrWidth to get the code to compile."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1435759139, "last_edit_date": 1435759139, "creation_date": 1435710569, "answer_id": 31150711, "question_id": 31150259, "link": "https://stackoverflow.com/questions/31150259/perl-calculating-length-of-array-elements-with-prstrwidth/31150711#31150711", "title": "perl calculating length of array elements with prStrWidth", "body": "<p>From PDF::Reuse   prStrWidth()</p>\n\n<pre><code>prStrWidth - calculate the string width\n\nprStrWidth($string, $font, $fontSize)\n    Returns string width in points. Should be used in conjunction with\n    one of these predefined fonts of Acrobat/Reader: Times-Roman,\n    Times-Bold, Times-Italic, Times-BoldItalic, Courier, Courier-Bold,\n    Courier-Oblique, Courier-BoldOblique, Helvetica, Helvetica-Bold,\n    Helvetica-Oblique, Helvetica-BoldOblique or with a TrueType font\n    embedded with prTTFont. If some other font is given, Helvetica is\n    used, and the returned value will at the best be approximate.\n</code></pre>\n\n<p>The following works:</p>\n\n<pre><code>#!/usr/bin/env perl                                                                         \n\nuse strict;\nuse PDF::Reuse;\n\nmy $field_str;\n# ( \"w_0\\n\", \"w_1\", \"w_2\", ... )\nmy @field = map { \"w$_ \" . ($_ % 10 ? '' : \"\\n\") } ( 0 .. 50);\n\nfor my $cnt (0 .. $#field) {\n    $field_str .= $field[$cnt];\n\n    if( $cnt != (scalar @field - 1) ) {\n        my $line_pos = (rindex($field_str, \"\\n\") &gt; 0) ?   rindex($field_str, \"\\n\") : 0;\n\n        my ( $strwidth1 ) = prStrWidth(substr($field_str, $line_pos),'Courier New',5);\n        my ( $strwidth2 ) = prStrWidth($field[$cnt+1],'Courier New',5);\n        my ( $totalwidth ) = $strwidth1 + $strwidth2;\n\n        $field_str .= ($totalwidth &lt; 70) ? '' : \"\\n\";\n    }\n}\n\nprint $field_str;\n</code></pre>\n\n<p>Which produces the following:</p>\n\n<pre><code>w0\nw1 w2 w3 w4 w5 w6 w7 w8\nw9 w10\nw11 w12 w13 w14 w15 w16\nw17 w18 w19 w20\nw21 w22 w23 w24 w25 w26\nw27 w28 w29 w30\nw31 w32 w33 w34 w35 w36\nw37 w38 w39 w40\nw41 w42 w43 w44 w45 w46\nw47 w48 w49 w50\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 3224907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a30ee6a5c98fdddd76cfeff0ad6c8e2d?s=128&d=identicon&r=PG&f=1", "display_name": "user3224907", "link": "https://stackoverflow.com/users/3224907/user3224907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 31150711, "answer_count": 1, "score": 0, "last_activity_date": 1435759139, "creation_date": 1435707240, "question_id": 31150259, "link": "https://stackoverflow.com/questions/31150259/perl-calculating-length-of-array-elements-with-prstrwidth", "title": "perl calculating length of array elements with prStrWidth", "body": "<p>I am not sure if we can calculate the length of array element by summing one up with the other using <code>prStrWidth</code> but this was my try:</p>\n\n<pre><code>my @field = split //, $case_field;\n\nfor $cnt (0 .. $#field) {\n$field_str .= $field[$cnt];\n\nif($cnt != (scalar @field - 1)) {\n$line_pos = (rindex($field_str, \"\\n\") &gt; 0) ? rindex($field_str, \"\\n\") : 0;\n\nmy ( $strwidth1 ) = prstrwidth(substr($field_str, $line_pos),'Courier New',5);\nmy ( $strwidth2 ) = prstrwidth($field[$cnt+1],'Courier New',5);\nmy ( $totalwidth ) = $strwidth1 + $strwidth2;\n\n$field_str .= ($totalwidth &lt; 70) ? '' : \"\\n\";\n</code></pre>\n\n<p>That didn't work. Basically I need to calculate the width of the two strings using <code>prStrWidth</code> instead of using the length function.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "perl", "quotes"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 0, "creation_date": 1435700337, "post_id": 31148745, "comment_id": 50308160, "body": "I tried it but got the following error message:Quantifier follows nothing in regex; marked by &lt;-- HERE in m/(?:\\G(?!\\A)|[^&quot;]*&quot;)[^&quot;,]*K(?:,|&quot;(* &lt;-- HERE SKIP)(*F))"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 0, "creation_date": 1435701147, "post_id": 31148745, "comment_id": 50308502, "body": "@Duncan: if backtracking control verbs are not supported you can use: <code>$string =~ s&#47;(?:\\G(?!\\A)|[^&quot;]*&quot;)[^&quot;,]*(?:\\K,|(&quot;[^&quot;]*(?:&quot;|\\z)))&#47;$1&#47;g;</code>"}, {"owner": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 0, "creation_date": 1435701203, "post_id": 31148745, "comment_id": 50308522, "body": "I changed it to $string =~ s/(?:\\G(?!\\A)|[^&quot;]*&quot;)[^&quot;,]*\\K(?:,|&quot;(?!))//g;, but now it runs but does not remove the commas. My Perl version is 5.8.8."}, {"owner": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 0, "creation_date": 1435701522, "post_id": 31148745, "comment_id": 50308656, "body": "Still no luck - with $string =~ s/(?:\\G(?!\\A)|[^&quot;]*&quot;)[^&quot;,]*(?:\\K,|(&quot;[^&quot;]*(?:&quot;|\\z)))/$1/g; it runs but does not remove the commas."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 1, "creation_date": 1435701636, "post_id": 31148745, "comment_id": 50308713, "body": "@Duncan <code>\\K</code> wasn&#39;t added until Perl 5.10, so that won&#39;t work. You can use a capturing group as an alternative."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 0, "creation_date": 1435701759, "post_id": 31148745, "comment_id": 50308769, "body": "@Duncan: try <code>$string =~ s&#47;((?:\\G(?!\\A)|[^&quot;]*&quot;)[^&quot;,]*)(?:,|(&quot;[^&quot;]*(?:&quot;|\\z)))&#47;$1$2&#47;g;</code>"}, {"owner": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "edited": false, "score": 0, "creation_date": 1435701879, "post_id": 31148745, "comment_id": 50308824, "body": "Worked great! Thanks for your help, everybody!"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1435701995, "post_id": 31148745, "comment_id": 50308862, "body": "Hallelujah! <code>&lt;&#176;^^^^&#231;&#231;&#231;&#231;&#231;&gt;</code>"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 2, "last_activity_date": 1435702458, "last_edit_date": 1435702458, "creation_date": 1435699374, "answer_id": 31148745, "question_id": 31148586, "link": "https://stackoverflow.com/questions/31148586/perl-regex-to-remove-commas-between-quotes/31148745#31148745", "title": "Perl Regex To Remove Commas Between Quotes?", "body": "<p>You can use this kind of pattern:</p>\n\n<pre><code>$string =~ s/(?:\\G(?!\\A)|[^\"]*\")[^\",]*\\K(?:,|\"(*SKIP)(*FAIL))//g;\n</code></pre>\n\n<p>pattern details:</p>\n\n<pre><code>(?: # two possible beginnings:\n    \\G(?!\\A) # contiguous to the previous match\n  |          # OR\n    [^\"]*\"   # all characters until an opening quote\n)\n[^\",]*     #\"# all that is not a quote or a comma\n\\K           # discard all previous characters from the match result\n(?:          # two possible cases:\n    ,        # a comma is found, so it will be replaced\n  |          # OR\n    \"(*SKIP)(*FAIL) #\"# when the closing quote is reached, make the pattern fail\n                      # and force the regex engine to not retry previous positions.\n)\n</code></pre>\n\n<p>If you use an older perl version, <code>\\K</code> and the backtracking control verbs may be not supported. In this case you can use this pattern with capture groups:</p>\n\n<pre><code>$string =~ s/((?:\\G(?!\\A)|[^\"]*\")[^\",]*)(?:,|(\"[^\"]*(?:\"|\\z)))/$1$2/g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 2, "last_activity_date": 1435704807, "creation_date": 1435704807, "answer_id": 31149883, "question_id": 31148586, "link": "https://stackoverflow.com/questions/31148586/perl-regex-to-remove-commas-between-quotes/31149883#31149883", "title": "Perl Regex To Remove Commas Between Quotes?", "body": "<p>One way would be to use the nice module <a href=\"https://metacpan.org/pod/Text::ParseWords\" rel=\"nofollow\"><code>Text::ParseWords</code></a> to isolate the specific field and perform a simple transliteration to get rid of the commas:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::ParseWords;\n\nmy $str = '06/14/2015,19:13:51,\"Mrs, Nkoli,,,ka N,ebedo,,m\" &lt;ubabankoffice93@gmail.com&gt;,1,2';\nmy @row = quotewords(',', 1, $str);\n$row[2] =~ tr/,//d;\nprint join \",\", @row;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>06/14/2015,19:13:51,\"Mrs Nkolika Nebedom\" &lt;ubabankoffice93@gmail.com&gt;,1,2\n</code></pre>\n\n<p>I assume that no commas can appear legitimately in your email field. Otherwise some other replacement method is required.</p>\n"}], "owner": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1435704807, "creation_date": 1435698687, "question_id": 31148586, "link": "https://stackoverflow.com/questions/31148586/perl-regex-to-remove-commas-between-quotes", "title": "Perl Regex To Remove Commas Between Quotes?", "body": "<p>I am trying to remove commas between double quotes in a string, while leaving other commas intact? (This is an email address which sometimes contains spare commas). The following \"brute force\" code works OK on my particular machine, but is there a more elegant way to do it, perhaps with a single regex?\nDuncan</p>\n\n<pre><code>$string = '06/14/2015,19:13:51,\"Mrs, Nkoli,,,ka N,ebedo,,m\" &lt;ubabankoffice93@gmail.com&gt;,1,2';\nprint \"Initial string = \", $string, \"&lt;br&gt;\\n\";\n\n# Extract stuff between the quotes\n$string =~ /\\\"(.*?)\\\"/;\n\n$name = $1;\nprint \"name = \", $1, \"&lt;br&gt;\\n\";\n# Delete all commas between the quotes\n$name =~ s/,//g;\nprint \"name minus commas = \", $name, \"&lt;br&gt;\\n\";\n# Put the modified name back between the quotes\n$string =~ s/\\\"(.*?)\\\"/\\\"$name\\\"/;\nprint \"new string = \", $string, \"&lt;br&gt;\\n\";\n</code></pre>\n"}, {"tags": ["html", "perl", "html-parsing"], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 5066821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34632328f854aa5a6baa8d1bccfdbbda?s=128&d=identicon&r=PG&f=1", "display_name": "user75857", "link": "https://stackoverflow.com/users/5066821/user75857"}, "is_accepted": false, "score": 1, "last_activity_date": 1435692176, "creation_date": 1435692176, "answer_id": 31146707, "question_id": 31145511, "link": "https://stackoverflow.com/questions/31145511/html-parsing-get-content-from-inner-tags/31146707#31146707", "title": "HTML Parsing: Get content from inner tags", "body": "<p>You are finding all the <code>div</code> elements when you want just the inner ones. The <code>findnodes</code> method takes an XPath expression, so you can write</p>\n\n<pre><code>print $_-&gt;as_text, \"\\n\" for $tree-&gt;findnodes('div/div')\n</code></pre>\n"}], "owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1435692176, "creation_date": 1435688156, "question_id": 31145511, "link": "https://stackoverflow.com/questions/31145511/html-parsing-get-content-from-inner-tags", "title": "HTML Parsing: Get content from inner tags", "body": "<p><strong>Test input file:</strong></p>\n\n<pre><code># cat test.html \n&lt;div&gt;line 1&lt;div&gt;Another 1&lt;/div&gt;&lt;/div&gt;\n&lt;div&gt;line 2&lt;div&gt;Another 2&lt;/div&gt;&lt;/div&gt;\n&lt;div&gt;line 3&lt;div&gt;Another 3&lt;/div&gt;&lt;/div&gt;\n</code></pre>\n\n<p><strong>Expected output:</strong></p>\n\n<pre><code>Another 1\nAnother 2\nAnother 3\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse HTML::TreeBuilder;\n\nmy $tree = HTML::TreeBuilder-&gt;new;\n\n# $tree-&gt;ignore_ignorable_whitespace(0);\n# $tree-&gt;no_space_compacting(1)\n\n$tree-&gt;parse_file(\"test.html\");\n\nforeach my $a ($tree-&gt;find(\"div\")) \n{\n  print $a-&gt;as_text.\"\\n\";\n}\n</code></pre>\n\n<p><strong>Script Output:</strong></p>\n\n<pre><code>line 1Another 1\nAnother 1\nline 2Another 2\nAnother 2\nline 3Another 3\nAnother 3\n</code></pre>\n\n<p><strong>QUESTION:</strong>\nI am seeking help in extracting only the content from <strong><em>inner</em></strong> <code>div</code> tags. My script outputs the <code>line 1Another 1</code> first and then it outputs <code>Another 1</code>. However, I am interested only in <code>Another 1</code>.</p>\n\n<p>I tried playing around with <a href=\"http://search.cpan.org/~cjm/HTML-Tree-5.03/lib/HTML/TreeBuilder.pm#ignore_ignorable_whitespace\" rel=\"nofollow\">ignore_ignorable_whitespace</a> and <a href=\"http://search.cpan.org/~cjm/HTML-Tree-5.03/lib/HTML/TreeBuilder.pm#no_space_compacting\" rel=\"nofollow\">no_space_compacting</a> (as seen in the script comments) but it did not work. Either I am not using it correctly OR I am barking up the wrong tree.</p>\n"}, {"tags": ["perl", "batch-file", "clearquest"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1435678946, "post_id": 31142422, "comment_id": 50296021, "body": "How much control do you have over the box? Is it other users you have to protect against, or other administrators?"}, {"owner": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435683863, "post_id": 31142422, "comment_id": 50298945, "body": "@Sobrique - currently my personal laptop, so locked down. However, I intend to move this to a departmental service machine with shared access, where all users have admin privileges. It&#39;s not that I don&#39;t trust <i>them</i> with my bug-system credentials, but the door is open (figuratively speaking)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1435685433, "post_id": 31142422, "comment_id": 50299738, "body": "If everyone has admin, then there just isn&#39;t much to be done beyond hope you can trust them. Which does simplify the problem, at least.."}], "answers": [{"comments": [{"owner": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "edited": false, "score": 0, "creation_date": 1435683588, "post_id": 31142796, "comment_id": 50298799, "body": "Some good thoughts there, thanks. This is in windows presently, although the perl scripts should be able to run as-is under linux. Squeezing a linux box out of our IT department would be a huge task on its own, unfortunately. I will look at mods to pick request files, though."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1435679123, "creation_date": 1435679123, "answer_id": 31142796, "question_id": 31142422, "link": "https://stackoverflow.com/questions/31142422/how-to-store-user-credentials-for-script/31142796#31142796", "title": "How to store user credentials for script", "body": "<p>There's two things to watch out for. One is having your process list \"show up\" the auth credentials. \nParticularly on Unix - if you run <code>ps</code> it'll show you the arguments, which might include a username and password. The way of handling this is mostly 'read from a file, not the arg list'. On Unix, you can also amend <code>$0</code> to change how you show in <code>ps</code> (but that doesn't help command history, and it's also not perfect as there'll be a short period before it's applied). </p>\n\n<p>The other is - storing the data at rest. </p>\n\n<p>This is a bit more difficult. Pretty fundamentally, there aren't many solution that let your script access the credentials that wouldn't allow a malicious user to do so.</p>\n\n<p>After all, by the simple expedient of inserting a <code>print $password</code> into your script... they bypass pretty much any control you could put on it. Especially if they have admin access on your box, at which point... there's really nothing you can do. </p>\n\n<p>Solutions I'd offer though:</p>\n\n<p>Create a file with (plaintext) username and password. Set minimum permissions on it. Run the script as a user that has privileges, but don't let anyone else access that user account. </p>\n\n<p>That way other people can 'see' your script (and may need to to run it) but can't copy it/hack it/run it themselves. </p>\n\n<p>I would suggest <code>sudo</code> for this on Unix. For Windows, I'm not sure how much granularity you have over <code>RunAs</code> - that's worth a look, or alternatively have a scheduled task that runs as your service account, and picks up 'request files' for processing that can be generated by anyone. </p>\n"}, {"comments": [{"owner": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "edited": false, "score": 0, "creation_date": 1435716155, "post_id": 31149717, "comment_id": 50312724, "body": "Another interesting idea. Tried it, but while compiling the bat to an exe hid the details of the bat file nicely, the weakness was that while the perl code is running the credentials are visible. +1 for out-of-the-box thinking!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1436176895, "post_id": 31149717, "comment_id": 50483423, "body": "It has the same limitations though - your executable will have to have the credentials embedded &#39;somehow&#39; for it to extract. It&#39;s slightly more difficult to disassemble, but only slightly. It would be unwise to rely on this sort of obfuscation for security."}], "tags": [], "owner": {"reputation": 81, "user_id": 3906758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7c53ab2fcb2f75ad043b494c848662?s=128&d=identicon&r=PG&f=1", "display_name": "Jos Lemmerling", "link": "https://stackoverflow.com/users/3906758/jos-lemmerling"}, "is_accepted": false, "score": 1, "last_activity_date": 1435703823, "creation_date": 1435703823, "answer_id": 31149717, "question_id": 31142422, "link": "https://stackoverflow.com/questions/31142422/how-to-store-user-credentials-for-script/31149717#31149717", "title": "How to store user credentials for script", "body": "<p>As the level of security doesn't need to be so high, perhaps consider to create a simple exe? The password could possibly be read out of the memory somehow, but I guess this way creates a big enough barrier. </p>\n\n<p>Or something like this could be helpful?</p>\n\n<p><a href=\"http://www.battoexeconverter.com/\" rel=\"nofollow\">http://www.battoexeconverter.com/</a></p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 31142796, "answer_count": 2, "score": 3, "last_activity_date": 1435703823, "creation_date": 1435678000, "question_id": 31142422, "link": "https://stackoverflow.com/questions/31142422/how-to-store-user-credentials-for-script", "title": "How to store user credentials for script", "body": "<p>I am required to utilize an old version of ClearQuest 7, and the only APIs that are enabled in our installation are for VBA (Excel) and RatlPERL. (The REST API isn't an option for us - although it suffers the same cleartext credential problem.)</p>\n\n<p>I've written a <a href=\"https://github.com/mogsdad/cqperl-scripts/blob/master/scripts/query.pl\" rel=\"nofollow\">ratlperl script</a> that executes queries into the defect database, and produces csv output. Note that ratlperl requires cleartext user credentials for authentication.</p>\n\n<pre><code>ratlperl query.cqpl -u %userid% -p %password% -q \"%query%\" -c %outfile%\n</code></pre>\n\n<p>That script is called from a <a href=\"https://github.com/mogsdad/cqperl-scripts/blob/master/scripts/query.bat\" rel=\"nofollow\">Windows Batch file</a>. When run from the Windows command line with no parameters, the batch file requests user credentials, but they can also be provided as parameters. </p>\n\n<pre><code>query.bat %userid% %password% \n</code></pre>\n\n<p>I trigger daily queries, with the user credentials passed as parameters for the batch file.</p>\n\n<p>This all works well, but I'd rather not store the cleartext password in this way. The registry would be one possibility, but anyone with access to the machine would have access to those credentials.</p>\n\n<p>How can I store these credentials in a somewhat secure way?</p>\n"}, {"tags": ["json", "perl"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 10, "last_activity_date": 1435676688, "creation_date": 1435676688, "answer_id": 31141931, "question_id": 31141767, "link": "https://stackoverflow.com/questions/31141767/how-to-assign-a-name-to-json-array-in-perl/31141931#31141931", "title": "How to assign a name to JSON Array in Perl", "body": "<p>You could pass a reference to a hash with <code>Friends</code> as the key and a reference to your array as the value:</p>\n\n<pre><code>my $json = to_json({\"Friends\" =&gt; \\@loop_data});\n</code></pre>\n"}], "owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 31141931, "answer_count": 1, "score": 5, "last_activity_date": 1435676783, "creation_date": 1435676239, "last_edit_date": 1435676783, "question_id": 31141767, "link": "https://stackoverflow.com/questions/31141767/how-to-assign-a-name-to-json-array-in-perl", "title": "How to assign a name to JSON Array in Perl", "body": "<p>In my script to_json() converting loop_data in json format and assigning to $json.</p>\n\n<pre><code>my $json = to_json(\\@loop_data);\nprint $json;\n</code></pre>\n\n<p>gives this output.</p>\n\n<pre><code>[\n    {\n        \"Name\": \"Vivek\",\n        \"Age\": 20\n    },\n    {\n        \"Name\": \"Sonali\",\n        \"Age\": 19\n    }\n]\n</code></pre>\n\n<p>But instead of that i want print $json to give this output.</p>\n\n<pre><code>{\"Friends\" : [\n    {\n        \"Name\": \"Vivek\",\n        \"Age\": 20\n    },\n    {\n        \"Name\": \"Sonali\",\n        \"Age\": 19\n    }\n]}\n</code></pre>\n\n<p>Where to add \"Friends\" and  {}.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1435675644, "post_id": 31141431, "comment_id": 50293622, "body": "Well, you are explicitly referring to another namespace when running it as <code>BB::bfunc()</code>. It&#39;s not like it&#39;s polluted your existing namespace."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435676498, "post_id": 31141852, "comment_id": 50294289, "body": "This feels a bit like rambling, I might clean it up later, but right now I have to run."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1435677488, "post_id": 31141852, "comment_id": 50295005, "body": "But I wonder, when would it be useful to access the name in another namespace without explicitly including the module with a <code>use</code>? Wouldn&#39;t this just lead to confusion for a maintainer? Then he suddenly sees a call to function in another namespace that he did not explicitly include. What if maintainer of the <code>AA</code> package suddenly decides that he would no longer include namespace <code>BB</code>, then the script <code>p.pl</code> would break down, and so on.."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1435677675, "post_id": 31141852, "comment_id": 50295142, "body": "Well it would break. True. That&#39;s why you should have a test suite. And also why you should include the modules you use. Just because you can do it this way, which could be considered bad style or sloppy doesn&#39;t mean you have to do it. I just explained why it works."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435677889, "post_id": 31141852, "comment_id": 50295311, "body": "Perl lets you do a bunch of things that are a bad idea in practice. It&#39;s <i>generally</i> bad form to reference &#39;included&#39; stuff based on dependency chaining, especially of modules you don&#39;t make use of."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435678125, "post_id": 31141852, "comment_id": 50295461, "body": "Exactly. Thank you @sob. Then if course there is also stuff like Modern::Perl or even Moose that load things like strict and warnings into your current namespace."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435678228, "post_id": 31141852, "comment_id": 50295532, "body": "Yes. If you&#39;re doing anything serious with OO, then using the default implementation is just going to cause you pain. If all you want is a &#39;super <code>hash</code>&#39; then it works well enough. `"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435678314, "post_id": 31141852, "comment_id": 50295611, "body": "I don&#39;t get that comment."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435678409, "post_id": 31141852, "comment_id": 50295669, "body": "Er. That if you&#39;re doing anything serious that requires e.g. encapsulation techniques like OO, that you should ensure that people <i>can&#39;t</i> do nasty things by e.g. using <code>Moose</code>. If it&#39;s just your code that you&#39;re using an object for convenience, then I&#39;d call it less of an issue."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1435682319, "post_id": 31141852, "comment_id": 50298075, "body": "Re &quot;when would it be useful to access the name in another namespace without explicitly including the module with a use?&quot; 1) When it&#39;s documented that loading one module loads a slew of related modules. But primarily, 2) <code>$o-&gt;method</code> calls <code>method</code> is some unknown/arbitrary/variable package. As the user of the object, you should assume the module defining is already loaded. The creator of the object is the one that needs to worry about loading the module."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1435676485, "creation_date": 1435676485, "answer_id": 31141852, "question_id": 31141431, "link": "https://stackoverflow.com/questions/31141431/name-space-pollution-from-indirectly-included-module/31141852#31141852", "title": "Name space pollution from indirectly included module", "body": "<p>While it's good practice to <code>use</code> or <code>require</code> every dependency that you are planning to access (tried to avoid <em>use</em> here), you don't have to do that.</p>\n\n<p>As long as you use full package names, that is fine. The important part is that Perl knows about the namespaces. If it does not, it will fail.</p>\n\n<p>When you <code>use</code> something, that is equivalent to:</p>\n\n<pre><code>BEGIN {\n  require Foo::Bar;\n  Foo::Bar-&gt;import();\n}\n</code></pre>\n\n<p>The <code>require</code> will take the <code>Foo::Bar</code> and convert it to a path according to the operating system's conventions. On Linux, it will try to find <code>Foo/Bar.pm</code> somewhere inside <code>@INC</code>. It will then load that file and make a note in <code>%INC</code> that it loaded the file.</p>\n\n<p>Now Perl knows about that namespace. In case of the <code>use</code> it might <code>import</code> something into your own namespace. But it will always be available from everywhere after that as long as you use the full name. Just the same, stuff that you have in your main <code>script.pl</code> would be available inside of packages by saying <code>main::frobnicate()</code>. (Please don't do that!)</p>\n\n<p>It's also not uncommon to bundle several namespaces/packages in one <code>.pm</code> module file. There are quite a few big names on CPAN that do it, like <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\">XML::Twig</a>. </p>\n\n<p>If you do that, and don't import anything, the only way to get to the stuff under the different namespaces is by using the full name.</p>\n\n<p>As you can see, this is not polluting at all. </p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1435678447, "post_id": 31142320, "comment_id": 50295695, "body": "Thanks, for the clarification. Then it seems this feature has its pros and cons. Maybe the developers of Perl decided that it would not be too harmful to have it, and since it would give some benefits in special cases, they decided to keep it?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1435678556, "post_id": 31142320, "comment_id": 50295769, "body": "More likely it&#39;s because it&#39;s always been that way, and changing it might break a lot of things :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435682141, "post_id": 31142320, "comment_id": 50297982, "body": "To what does &quot;if&quot; refer in the above comments?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435682249, "post_id": 31142320, "comment_id": 50298039, "body": "Tyop fi it&#39;s the thing I think you&#39;re referring to."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1435682209, "last_edit_date": 1435682209, "creation_date": 1435677764, "answer_id": 31142320, "question_id": 31141431, "link": "https://stackoverflow.com/questions/31141431/name-space-pollution-from-indirectly-included-module/31142320#31142320", "title": "Name space pollution from indirectly included module", "body": "<p>You're not polluting a namespace, because the function within <code>BB</code> isn't being 'imported' into your existing namespace. </p>\n\n<p>They are separate, and may be referenced autonomously.</p>\n\n<p>If you're making a module, then usually you'll define via <code>Exporter</code> two lists:</p>\n\n<p><code>@EXPORT</code> and <code>@EXPORT_OK</code>. </p>\n\n<p>The former is the list of things that <em>should</em> be imported when you <code>use</code> the package.  The latter is the things that you can explicity import via:</p>\n\n<pre><code>use MyPackage qw ( some_func ); \n</code></pre>\n\n<p>You can also define <code>package</code> variables in your local namespace via <code>our</code> and reference them via <code>$main</code>. </p>\n\n<pre><code> our $fish = \"haddock\";\n print $main::fish;\n</code></pre>\n\n<p>When you do this, you're explicitly referencing the <code>main</code> namespace. When you <code>use</code> a module, then you cause <code>perl</code> to go and look for it, and include it in your <code>%INC</code>. I then 'knows about' that namespace - because it must in order for the dependencies to resolve.</p>\n\n<p>But this isn't namespace pollution, because it doesn't include anything in your namespace until your ask. </p>\n\n<p>This might make a bit more sense if you have multiple packages within the same program:</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage CC;\n\nour $package_var = \"Blong\";\n\nsub do_something {\n   print $package_var,\"\\n\"; \n}\n\npackage main;\n\nuse Data::Dumper;\nour $package_var = \"flonk\";\nprint Dumper $package_var;\nprint Dumper $CC::package_var;\n</code></pre>\n\n<p>Each <code>package</code> is it's own namespace, but you can 'poke' things in another. <code>perl</code> will also let you do this with object - poking at the innards of instantiated objects or indeed \"patch\" them.</p>\n\n<p>That's quite powerful, but I'd generally suggest Really Bad Style. </p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 31142320, "answer_count": 2, "score": 2, "last_activity_date": 1435682209, "creation_date": 1435675385, "question_id": 31141431, "link": "https://stackoverflow.com/questions/31141431/name-space-pollution-from-indirectly-included-module", "title": "Name space pollution from indirectly included module", "body": "<p>Consider the following script <code>p.pl</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse AA;\n\nBB::bfunc();\n</code></pre>\n\n<p>where the file <code>AA.pm</code> is:</p>\n\n<pre><code>package AA;\n\nuse BB;\n1;\n</code></pre>\n\n<p>and the file <code>BB.pm</code> is:</p>\n\n<pre><code>package BB;\n\nsub bfunc {\n    print \"Running bfunc..\\n\";\n}\n1;\n</code></pre>\n\n<p>Running <code>p.pl</code> gives output (with no warnings or errors):</p>\n\n<pre><code>Running bfunc..\n</code></pre>\n\n<p><strong>Q:</strong> Why is it possible to call <code>BB::bfunc()</code> from <code>p.pl</code> even though there is no <code>use BB;</code> in <code>p.pl</code>? Isn't this odd behavior? Or are there situation where this could be useful?</p>\n\n<p>(To me, it seems like this behavior only presents an information leak to another package and violates the data hiding principle.. Leading to programs that are difficult to maintain.. )</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1, "user_id": 4809583, "user_type": "registered", "profile_image": "https://graph.facebook.com/914029405315627/picture?type=large", "display_name": "Rahul Porwal", "link": "https://stackoverflow.com/users/4809583/rahul-porwal"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1435672434, "post_id": 31140087, "comment_id": 50290981, "body": "@serenesat :   elsif($_ =~ m/(\\w+)(_\\w+.*).txt/){\t \t\tif($_ =~m/(\\w+)(_\\w+.*.txt)/){ \tprint&quot;$1\\t$2\\n&quot;; } }"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4809583, "user_type": "registered", "profile_image": "https://graph.facebook.com/914029405315627/picture?type=large", "display_name": "Rahul Porwal", "link": "https://stackoverflow.com/users/4809583/rahul-porwal"}, "edited": false, "score": 0, "creation_date": 1435748550, "post_id": 31140652, "comment_id": 50327478, "body": "thanks dear!!! but it is printing multiple times. i want to print only one time"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 4809583, "user_type": "registered", "profile_image": "https://graph.facebook.com/914029405315627/picture?type=large", "display_name": "Rahul Porwal", "link": "https://stackoverflow.com/users/4809583/rahul-porwal"}, "edited": false, "score": 0, "creation_date": 1435778743, "post_id": 31140652, "comment_id": 50347722, "body": "Huh, no it doesn&#39;. You must have duplicates in @files. How did you read the folder?!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1435673408, "creation_date": 1435673408, "answer_id": 31140652, "question_id": 31140087, "link": "https://stackoverflow.com/questions/31140087/how-to-print-files-name-having-same-name-just-a-character-difference-in-perl/31140652#31140652", "title": "how to print files name having same name just a character difference in perl", "body": "<p>Grouping is usually done using hashes.</p>\n\n<pre><code>my %files_by_prefix;\nfor my $file (@files) {\n   my ($prefix) = $file =~ /^([^_]+)_/\n      or next;\n\n   push @{ $files_by_prefix{$prefix} }, $file;\n}\n\nfor my $prefix (sort keys %files_by_prefix) {\n   print(join(\"\\t\", sort @{ $files_by_prefix{$prefix} }), \"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4809583, "user_type": "registered", "profile_image": "https://graph.facebook.com/914029405315627/picture?type=large", "display_name": "Rahul Porwal", "link": "https://stackoverflow.com/users/4809583/rahul-porwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1435675639, "answer_count": 1, "score": -4, "last_activity_date": 1435673408, "creation_date": 1435672114, "last_edit_date": 1435673268, "question_id": 31140087, "link": "https://stackoverflow.com/questions/31140087/how-to-print-files-name-having-same-name-just-a-character-difference-in-perl", "closed_reason": "Not suitable for this site", "title": "how to print files name having same name just a character difference in perl", "body": "<p>I have files in folder named <code>SRR1425702_1.txt</code>, <code>SRR1425702_2.txt</code>, <code>SRR1425709_1.txt</code>, <code>SRR1425709_2.txt</code>. I want to print the files with the same prefix (the part before <code>_</code>) on the same line, separated by tabs.</p>\n\n<pre><code>SRR1425702_1.txt&lt;TAB&gt;SRR1425702_2.txt\nSRR1425709_1.txt&lt;TAB&gt;SRR1425709_2.txt\n</code></pre>\n"}, {"tags": ["regex", "linux", "perl", "perlscript"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1435668085, "post_id": 31138559, "comment_id": 50287623, "body": "<code>&#47;^[#$]&#47; or print while &lt;$fh&gt;;</code> or <code>perl -ne &#39;&#47;^[#$]&#47; or print&#39; config.ini</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1435668863, "creation_date": 1435668863, "answer_id": 31138883, "question_id": 31138559, "link": "https://stackoverflow.com/questions/31138559/grep-from-within-perl-script/31138883#31138883", "title": "Grep from within perl script", "body": "<pre><code>cat config.ini | grep -v \"^#\" | grep -v \"^$\"\n</code></pre>\n\n<p>is a poor way of writing</p>\n\n<pre><code>grep -v \"^[#$]\" config.ini\n</code></pre>\n\n<hr>\n\n<p>To produce the string</p>\n\n<pre><code>grep -v \"^[#$]\" config.ini\n</code></pre>\n\n<p>You can use the string literal</p>\n\n<pre><code>'grep -v \"^[#$]\" config.ini'\n</code></pre>\n\n<p>So</p>\n\n<pre><code>system('grep -v \"^[#$]\" config.ini');\ndie(\"Killed by signal \".($? &amp; 0x7F).\"\\n\") if $? &amp; 0x7F;\ndie(\"Exited with error \".($? &gt;&gt; 8).\"\\n\") if $? &gt;&gt; 8;\n</code></pre>\n\n<hr>\n\n<pre><code>system('grep -v \"^[#$]\" config.ini');\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>system('/bin/sh', '-c', 'grep -v \"^[#$]\" config.ini');\n</code></pre>\n\n<p>But we don't need the shell, so the following can use instead:</p>\n\n<pre><code>system('grep', '-v', '^[#$]', 'config.ini');\ndie(\"Killed by signal \".($? &amp; 0x7F).\"\\n\") if $? &amp; 0x7F;\ndie(\"Exited with error \".($? &gt;&gt; 8).\"\\n\") if $? &gt;&gt; 8;\n</code></pre>\n\n<hr>\n\n<p>But it would be cleaner and more robust to do it in Perl.</p>\n\n<pre><code>open(my $fh, '&lt;', 'config.ini')\n   or die($!);\n\nwhile (&lt;$fh&gt;) {\n   print if !/^[#$]/;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1435670641, "last_edit_date": 1435670641, "creation_date": 1435668884, "answer_id": 31138888, "question_id": 31138559, "link": "https://stackoverflow.com/questions/31138559/grep-from-within-perl-script/31138888#31138888", "title": "Grep from within perl script", "body": "<p>If you're making external calls to <code>grep</code> from inside a Perl program, then you're doing it wrong. There's nothing that <code>grep</code> can do that Perl can't do for you.</p>\n\n<pre><code>while (&lt;$input_filehandle&gt;) {\n  next if /^[#$]/; # Skip comment lines or empty lines.\n\n  # Do something with your data, which is in $_\n}\n</code></pre>\n\n<p><strong>Update:</strong> Thinking further about this, I think I'd write it slightly differently.</p>\n\n<pre><code>while (&lt;$input_filehandle&gt;) {\n  # Split on comment character - this allows comments to start\n  # anywhere on the line.\n  my ($line, $comment) = split /#/, $_, 2;\n\n  # Check for non-whitespace characters in the remaining input.\n  next unless $line =~ /\\S/;\n\n  # Do something with your data, which is in $_\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5065422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xF49SAMou54/AAAAAAAAAAI/AAAAAAAAAM8/59JsxMyhS9M/photo.jpg?sz=128", "display_name": "hector lerma", "link": "https://stackoverflow.com/users/5065422/hector-lerma"}, "is_accepted": false, "score": 0, "last_activity_date": 1437047617, "creation_date": 1437047617, "answer_id": 31453409, "question_id": 31138559, "link": "https://stackoverflow.com/questions/31138559/grep-from-within-perl-script/31453409#31453409", "title": "Grep from within perl script", "body": "<pre><code>print if !(/^#/|/^$/);\n</code></pre>\n\n<p>I did try using the expression suggested but didn't work as good as this one, is there a way to reduce it or write ir in a better way?</p>\n"}], "owner": {"reputation": 11, "user_id": 5065422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xF49SAMou54/AAAAAAAAAAI/AAAAAAAAAM8/59JsxMyhS9M/photo.jpg?sz=128", "display_name": "hector lerma", "link": "https://stackoverflow.com/users/5065422/hector-lerma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1437047617, "creation_date": 1435667906, "last_edit_date": 1435671036, "question_id": 31138559, "link": "https://stackoverflow.com/questions/31138559/grep-from-within-perl-script", "title": "Grep from within perl script", "body": "<p>I'm a bit stuck into an issue on how to declare a grep from within a perl script. What I want to do is let my perl script to execute the following command:</p>\n\n<pre><code>cat config.ini | grep -v \"^#\" | grep -v \"^$\"\n</code></pre>\n\n<p>Normally this expression will clean up / filter all the entries who have # and $ at the beginning and print the variables configured.</p>\n\n<p>However I don't know how to declare it. I have used next expression, but when i get to the point to introduce grep # or $ it fails</p>\n\n<pre><code>system(\"(cat config.ini| grep ........);\n</code></pre>\n\n<p>Any suggestion?</p>\n"}, {"tags": ["regex", "perl", "tokenize"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1435664208, "post_id": 31137093, "comment_id": 50284821, "body": "It looks like your old code was run like this: <code>$ perl script.pl inputfile.txt &gt;outputfile.txt</code> because it reads the file whose name has been supplied as an argument and <code>print</code>s the results. So it would make sense to send that output to a new file. If you wanted it to go through more files, write a wrapper in either Perl, or maybe bash."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 4, "creation_date": 1435665408, "post_id": 31137093, "comment_id": 50285641, "body": "<a href=\"http://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\" title=\"why use strict and warnings\">stackoverflow.com/questions/8023959/why-use-strict-and-warni&zwnj;&#8203;ngs</a>"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1435666533, "post_id": 31137093, "comment_id": 50286437, "body": "Instead of all these complicated replacements, why not just capture letters (and numbers if you want the <code>###</code>)? E.g. <code>my @words = $document =~ &#47;[a-z]+|\\d+&#47;gi</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435667694, "post_id": 31137327, "comment_id": 50287310, "body": "I really don&#39;t understand what you&#39;re trying to do here"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435675342, "post_id": 31137327, "comment_id": 50293396, "body": "@Borodin, I thought its question was how to simply use its original script and apply it to each file into a specific folder. I pretend that he does not need to modify the script, but just use a shell script over its original Perl program. I am wrong?"}], "tags": [], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "is_accepted": false, "score": 1, "last_activity_date": 1435664977, "last_edit_date": 1435664977, "creation_date": 1435664574, "answer_id": 31137327, "question_id": 31137093, "link": "https://stackoverflow.com/questions/31137093/need-help-executing-perl-tokening-script/31137327#31137327", "title": "Need help executing perl tokening script", "body": "<p>You don't really need to edit the original script to apply it to the content of a directory. The shell will be your friend in this case. </p>\n\n<p>Your first script will read every files passed as arguments or, as default, the content of <code>stdin</code>. In other terms you can call your original script like this: </p>\n\n<pre><code>$ ./script file &gt; output\n$ cat file | ./script | less\n</code></pre>\n\n<p>If you want to parse all the files you can still use your shell:</p>\n\n<pre><code>$ ls | xargs -n1 -I{} sh -c \"./script {} &gt; {}.out\"\n</code></pre>\n\n<p>It might be clearer with this short example: </p>\n\n<p>Consider a similar script of yours named <code>script</code>: </p>\n\n<pre><code>#!/usr/bin/perl \nwhile(&lt;&gt;) {\n   chomp\n   print \"&gt;$_&lt;\\n\";\n}\nprint \"\\n\";\n</code></pre>\n\n<p>Now, from you shell you can do: </p>\n\n<pre><code>$ mkdir foo &amp;&amp; cd foo\n$ echo -e \"Hello\\nYou\\nI am A\" &gt;&gt; a.txt\n$ echo -e \"Hello\\nYou\\nI am A\" &gt;&gt; b.txt\n\n$ ls | xargs -n1 -I{} sh -c \"./script {} &gt; {}.out\"\n\n$ ls \na.txt  a.txt.out  b.txt  b.txt.out  script  script.out\n$ cat a.txt.out\n&gt;Hello&lt;\n&gt;You&lt;\n&gt;I am A&lt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435667160, "creation_date": 1435667160, "answer_id": 31138283, "question_id": 31137093, "link": "https://stackoverflow.com/questions/31137093/need-help-executing-perl-tokening-script/31138283#31138283", "title": "Need help executing perl tokening script", "body": "<p>Your main problem is that you are opening each file and reading its contents into <code>$x</code>, and then passing <code>$x</code> as a file handle to the original loop. But it's not a file handle -- it's just plain text. If you just omit the reading of the file then your code is close to working</p>\n\n<p>I think this will do as you ask. It uses <code>glob</code> in preference to <code>opendir</code>/<code>readdir</code> because it is more concise</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile ( my $file = glob '1999_txt/*' ) {\n\n    next unless -f $file;\n\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\n    while ( &lt;$fh&gt; ) {\n        chomp;\n\n        s/&lt;[^&lt;&gt;]*&gt;//g;             # Remove HTML tags\n        tr/A-Z/a-z/;               # downcase\n\n        s/([a-z]+|[^a-z]+)/$1 /g;  # separate letter strings from other types of sequences\n\n        s/[^a-z0-9\\$\\% ]//g;       # delete anything not a letter, digit, $, or %\n\n        s/[0-9]+/#/g;              # map numerical strings to #\n\n        s/\\s+/ /g;                 # these three lines clean up whitespace\n        s/^\\s+//;                  # so it's always exactly one space\n        s/\\s+$//;                  # between words, no newlines\n\n        print if /\\S/;             # print what's left if it's not just whitespace\n    }\n\n    print \"\\n\"; # final newline, so whole doc is on one line that ends in newline\n}\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 5053802, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7841cd9601ec8b1865f556ec9bfaaca7?s=128&d=identicon&r=PG", "display_name": "hipHopMetropolisHastings", "link": "https://stackoverflow.com/users/5053802/hiphopmetropolishastings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1435667625, "creation_date": 1435663874, "question_id": 31137093, "link": "https://stackoverflow.com/questions/31137093/need-help-executing-perl-tokening-script", "title": "Need help executing perl tokening script", "body": "<p>I'm a Perl amateur. Recently I was given a Perl script that takes a text file and removes all formatting except for the individual words follows by a space. The problem is that the script is unclear how to input a file location. I've set up some code to run through an entire directory of files, but haven't been able to get the code to execute yet. I'll post the original code followed by what I added. Thanks for the help!</p>\n\n<p>Original:</p>\n\n<pre><code>while(&lt;&gt;) {\n    chomp;\n    s/\\&lt;[^&lt;&gt;]*\\&gt;//g;           # eliminate markup\n    tr/[A-Z]/[a-z]/;           # downcase\n\n     s/([a-z]+|[^a-z]+)/\\1 /g;  # separate letter strings from other types of sequences\n\n    s/[^a-z0-9\\$\\% ]//g;       # delete anything not a letter, digit, $, or %\n\n    s/[0-9]+/\\#/g;             # map numerical strings to #\n\n    s/\\s+/ /g;                 # these three lines clean up white space (so it's always exactly one space between words, no newlines\n    s/^\\s+//;\n    s/\\s+$/ /;\n\n\n    print if(m/\\S/);           # print what's left\n}\nprint \"\\n\"; # final newline, so whole doc is on one line that ends in newline\n</code></pre>\n\n<p>My Changes:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\n$dirtoget=\"1999_txt/\";\nopendir(IMD, $dirtoget) || die(\"Cannot open directory\");\n@thefiles= readdir(IMD); #\nclosedir(IMD);\n    foreach $f (@thefiles)\n    {\n        unless ( ($f eq \".\") || ($f eq \"..\") )\n        {\n            $fr=\"$dirtoget$f\";\n            open(FILEREAD, \"&lt; $fr\");\n\n$x=\"\";\nwhile($line = &lt;FILEREAD&gt;) { $x .= $line; } # read the whole file into one string\nclose FILEREAD;\n\nprint \"$x/n\";   \nwhile(&lt;$x&gt;) {\n    chomp;\n    s/\\&lt;[^&lt;&gt;]*\\&gt;//g;           # eliminate markup\n    tr/[A-Z]/[a-z]/;           # downcase\n\n    s/([a-z]+|[^a-z]+)/\\1 /g;  # separate letter strings from other types of sequences\n\n    s/[^a-z0-9\\$\\% ]//g;       # delete anything not a letter, digit, $, or %\n\n    s/[0-9]+/\\#/g;             # map numerical strings to #\n\n    s/\\s+/ /g;                 # these three lines clean up white space (so it's always exactly one space between words, no newlines\n    s/^\\s+//;\n    s/\\s+$/ /;\n\n\n    print if(m/\\S/);           # print what's left\n}\nprint \"\\n\"; # final newline, so whole doc is on one line that ends in newline\n\n}}\n</code></pre>\n"}, {"tags": ["perl", "crontab", "sudo", "perlnetssh", "remote-login"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435664906, "post_id": 31137079, "comment_id": 50285264, "body": "You can enable debug when <a href=\"https://metacpan.org/pod/Net::SSH::Perl#Net::SSH::Perl-new-host-params\" rel=\"nofollow noreferrer\">connecting</a>, and <code>eq</code> is string operator but <code>undef</code> is not a string (<code>use strict; use warnings;</code>)"}, {"owner": {"reputation": 491, "user_id": 3918591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68dc1ca3c957987a52b8e0bada4e922f?s=128&d=identicon&r=PG&f=1", "display_name": "Archemar", "link": "https://stackoverflow.com/users/3918591/archemar"}, "edited": false, "score": 0, "creation_date": 1435673010, "post_id": 31137079, "comment_id": 50291550, "body": "from host B, don&#39;t you have a offending key when connecting manually ?"}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1435677004, "post_id": 31137079, "comment_id": 50294650, "body": "Are you running the script as root from the comand line, or as some other user?"}, {"owner": {"reputation": 58, "user_id": 4204612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5nVKI.jpg?s=128&g=1", "display_name": "rkdevs", "link": "https://stackoverflow.com/users/4204612/rkdevs"}, "edited": false, "score": 0, "creation_date": 1435917407, "post_id": 31137079, "comment_id": 50410120, "body": "Len Jaffe - Manually means from command line, i have tried with root, sudo and i succeed but while running it from cron, i can do remote connection with module but can&#39;t be able to login  ...!!!"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5019187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834ece1d11606fb67c4575cc1ffdedf5?s=128&d=identicon&r=PG&f=1", "display_name": "chetangb", "link": "https://stackoverflow.com/users/5019187/chetangb"}, "edited": false, "score": 0, "creation_date": 1435695494, "post_id": 31147544, "comment_id": 50305770, "body": "CPAN doc for this module there is an option strict_host_key_checking  This corresponds to the StrictHostKeyChecking ssh configuration option. Allowed values are no, yes, or ask. no disables host key checking, e.g., if you connect to a virtual host that answers to multiple IP addresses. yes or ask enable it, and when it fails in interactive mode, you are asked whether to continue. The host is then added to the list of known hosts."}, {"owner": {"reputation": 59, "user_id": 5019187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834ece1d11606fb67c4575cc1ffdedf5?s=128&d=identicon&r=PG&f=1", "display_name": "chetangb", "link": "https://stackoverflow.com/users/5019187/chetangb"}, "edited": false, "score": 0, "creation_date": 1435695637, "post_id": 31147544, "comment_id": 50305860, "body": "<code>my $ssh = Net::SSH::Perl-&gt;new($host,port=&gt;$port,strict_host_key_checki&zwnj;&#8203;ng=&gt;no);</code>  if you don&#39;t need host key check, put &#39;yes&#39; if known host check is required"}, {"owner": {"reputation": 58, "user_id": 4204612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5nVKI.jpg?s=128&g=1", "display_name": "rkdevs", "link": "https://stackoverflow.com/users/4204612/rkdevs"}, "edited": false, "score": 0, "creation_date": 1435741101, "post_id": 31147544, "comment_id": 50322515, "body": "chetangb, Thanks for suggestion . But i still can&#39;t solve the issue by doing       the removing hostkey from ~/.ssh/known_hosts (root user) and also adding &quot;strict_host_key_checking=&gt;no&quot; in Net::SSH::Perl module parameters ."}], "tags": [], "owner": {"reputation": 59, "user_id": 5019187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834ece1d11606fb67c4575cc1ffdedf5?s=128&d=identicon&r=PG&f=1", "display_name": "chetangb", "link": "https://stackoverflow.com/users/5019187/chetangb"}, "is_accepted": true, "score": 1, "last_activity_date": 1435694840, "creation_date": 1435694840, "answer_id": 31147544, "question_id": 31137079, "link": "https://stackoverflow.com/questions/31137079/unable-to-run-perl-script-for-ssh-login-to-windows-server-using-netsshperl/31147544#31147544", "title": "Unable to run perl script for ssh login to Windows server (using Net::SSH::Perl) from crontab", "body": "<p>It looks like host key verification is failing preventing the authentication. There may be host keys stored in ~/.ssh/known_hosts in the user's(root) home directory try deleting the remote host key from \"known_hosts\" and then re-try.</p>\n"}], "owner": {"reputation": 58, "user_id": 4204612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5nVKI.jpg?s=128&g=1", "display_name": "rkdevs", "link": "https://stackoverflow.com/users/4204612/rkdevs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 1, "accepted_answer_id": 31147544, "answer_count": 1, "score": 0, "last_activity_date": 1435694840, "creation_date": 1435663836, "last_edit_date": 1435667610, "question_id": 31137079, "link": "https://stackoverflow.com/questions/31137079/unable-to-run-perl-script-for-ssh-login-to-windows-server-using-netsshperl", "title": "Unable to run perl script for ssh login to Windows server (using Net::SSH::Perl) from crontab", "body": "<p>I have a Perl script which is doing remote login to the Windows server via the <code>Net::SSH::Perl</code> module. </p>\n\n<p>If I run the script manually from my shell, it gives no error. Running from a crontab, however, it connects properly to the remote Windows server but can't log in.</p>\n\n<p>Here is the script:</p>\n\n<pre><code>use Net::SSH::Perl;\nuse Date::Calc qw(:all);\nuse DateTime::Format::Epoch;\n\n$lin_host = `hostname -s`;\nchomp($lin_host);\nprint \"Test script is started on server $lin_host at time \",join(\":\",Now()),\"\\n\";\n$host = \"any valid ip\";\n$user = \"valid username\";\n$pass = \"valid password\";\n$port = \"valid port\";\n\nif ($ARGV[0] eq \"eodupdate\")\n{\n        $host = \"valid host\";\n}\n\nprint \"Connecting : $host with user $user and pwd $pass\\n\";\nmy $ssh = Net::SSH::Perl-&gt;new($host,port=&gt;$port);\nif ($ssh eq undef)\n{\n        print \"Can't connect to server $host\\n\";\n        exit;\n}\nprint \"Connected ... \\nNow ,Trying to loggin ,sever ip : $host\\n\";\n$ssh-&gt;login($user, $pass);\nprint \"Yeah , successfully logged in to $host\\n\";\n</code></pre>\n\n<p>On server A, By running this script in csh shell I get output like :</p>\n\n<pre><code>Test script is started on server name\nConnecting : * with user * and pwd *\nConnected ...\nNow ,Trying to loggin ,sever ip : *\nYeah , successfully logged in to *\n</code></pre>\n\n<p>In the shell, <code>perl test.pl</code> and <code>sudo perl test.pl</code> both work fine.</p>\n\n<p>But running this script in cron as user root:</p>\n\n<pre><code>Test script is started on server name\nConnecting : * with user * and pwd *\nConnected ...\nNow ,Trying to loggin ,sever ip : * \n</code></pre>\n\n<p>Note: I am able to do this on another Linux server B with same file permissions, same username, and same password. The difference is that when I run this Perl script without <code>sudo</code> on server B, I am getting this error:</p>\n\n<pre><code>host key has changed! at /usr/local/share/perl5/Net/SSH/Perl/Kex/DH1.pm line 49\n</code></pre>\n\n<p>I don't see this error from Linux server A (the one on which I can't connect via cron)</p>\n\n<p>What is wrong and how can I solve it?</p>\n"}, {"tags": ["regex", "perl", "file-io", "split"], "comments": [{"owner": {"reputation": 767, "user_id": 4332742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MkdSw.jpg?s=128&g=1", "display_name": "Anshul Rai", "link": "https://stackoverflow.com/users/4332742/anshul-rai"}, "edited": false, "score": 1, "creation_date": 1435659323, "post_id": 31135071, "comment_id": 50281722, "body": "What&#39;s your desired output?"}, {"owner": {"reputation": 39, "user_id": 4861757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/15ee3b81f6bd4510acc3999af15718d9?s=128&d=identicon&r=PG&f=1", "display_name": "stackcareer", "link": "https://stackoverflow.com/users/4861757/stackcareer"}, "reply_to_user": {"reputation": 767, "user_id": 4332742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MkdSw.jpg?s=128&g=1", "display_name": "Anshul Rai", "link": "https://stackoverflow.com/users/4332742/anshul-rai"}, "edited": false, "score": 0, "creation_date": 1435659743, "post_id": 31135071, "comment_id": 50282015, "body": "as i explained above about my desired output"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1435660487, "creation_date": 1435660487, "answer_id": 31135935, "question_id": 31135071, "link": "https://stackoverflow.com/questions/31135071/how-to-split-one-file-into-multiple-files-using-perl/31135935#31135935", "title": "How to split one file into multiple files using perl?", "body": "<p>Something like this should do the trick:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\n\nopen( my $file, \"&lt;\", \"/home/httpd/cgi-bin/r/ftp.txt\" );\nopen( my $output, \"&gt;\", \"pre-match\" ) or die $!;\n\nwhile ( my $line = &lt;$file&gt; ) {\n    if ( $line =~ m/^\\&gt;/g ) {\n        my ($output_name) = ( $line =~ m/^\\&gt;(\\w+)/ );\n        close($output);\n        open( $output, \"&gt;\", $output_name . \".output\" ) or die $!;\n    }\n    print {$output} $line;\n}\n\nclose($output);\n</code></pre>\n\n<p>If your line matches that regular expression, we 'pick out' the first word (so <code>KCY61710</code> etc.) and open a file called <code>KCY61710.output</code>. </p>\n\n<p>We print each line as we go to this output, closing and re-opening each time we hit one of those lines. </p>\n\n<p>A <code>pre-match</code> file exists in case the first line(s) don't match this pattern. </p>\n"}, {"tags": [], "owner": {"reputation": 6121, "user_id": 1364945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pU9ds.gif?s=128&g=1", "display_name": "Kenosis", "link": "https://stackoverflow.com/users/1364945/kenosis"}, "is_accepted": false, "score": 2, "last_activity_date": 1435676722, "creation_date": 1435676722, "answer_id": 31141941, "question_id": 31135071, "link": "https://stackoverflow.com/questions/31135071/how-to-split-one-file-into-multiple-files-using-perl/31141941#31141941", "title": "How to split one file into multiple files using perl?", "body": "<p>Here's another option:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nlocal $/ = '';\n\nwhile (&lt;&gt;) {\n    my ($fileName) = /^&gt;([^\\s]+)/;\n    open my $fh, '&gt;', \"$fileName.txt\" or die \"Can't write to '$fileName.txt'\";\n    print $fh $_;\n    close $fh;\n}\n</code></pre>\n\n<p>Usage: <code>perl script.pl inFile</code></p>\n\n<p>Since each (FASTA?) record is a paragraph, <code>$/</code> is set to empty (<code>''</code>) to read the file in paragraph mode--one 'record' at a time.  Each record's id is captured for use as that record's file name, and then that record is written to its file.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 39, "user_id": 4861757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/15ee3b81f6bd4510acc3999af15718d9?s=128&d=identicon&r=PG&f=1", "display_name": "stackcareer", "link": "https://stackoverflow.com/users/4861757/stackcareer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2538, "favorite_count": 0, "accepted_answer_id": 31135935, "answer_count": 2, "score": -3, "last_activity_date": 1435676722, "creation_date": 1435658134, "last_edit_date": 1435660203, "question_id": 31135071, "link": "https://stackoverflow.com/questions/31135071/how-to-split-one-file-into-multiple-files-using-perl", "title": "How to split one file into multiple files using perl?", "body": "<p>I have the file as ftp.txt which contains many versions of lines such as</p>\n\n<pre><code>&gt;KCY60942 pep:novel supercontig:GCA_000682575.1:ab248605.contig.36_1:19:588:-1 gene:J738_3590 transcript:KCY60942 description:\"putative transposase 1\"\nMTHLNELYLILNKYLKWNKSHLKCFALIMLVIILKQTCNLSSASKALPIKCLPQSFYRRM\nQRFFAGQYFDYRQISQLIFNMFSFDQVQLTLDRTNWKWGKRNINILMLAIVYRGIAIPIL\nWTLLNKRGNSDTKERIALIQRFIAIFGKDRIVNVFADREFIGEQWFTWLIEQDINFCIRV\nKKTSLSPII\n\n&gt;KCY61710 pep:novel supercontig:GCA_000682575.1:ab248605.contig.22_1:4164:6320:1 gene:J738_2986 transcript:KCY61710 description:\"tonB-dependent siderophore receptor family protein\"\nMQRTTKHFQINALALAIAMSTISAHAETDQQTSEYGTLPTIKVKAGSGQENEKSYIAGKT\nDTAVPLGLSVREVPQSVSVITQQRLQDQQLSTLVEVAENVTGVSVNRYETNRGGIYSRGF\nVVDNYIIDGIPTTYSLPWSSGEIFSSMALYDHIDVVRGATGLTFGAGNPSAAINMVRKRA\nTSTEPTANVEVSAGSWDNYRVMGDIANSLNQSGTVRGRAVAQYEQGDSYTDLLSKEKLSL\nLLSAEADLSENTLLSGGVTYQEDDPRGPMWGGLPVWFSDGTKTNWSKNITTSADWTRWNV\nKYTNLFADLTHKFNDNWSAKLSYSHGKRDANSKLLYVSGSVDKNTGLGLSPYASAYDLEV\nEQDNASLQLNGSFDLWGLEQKVVLGYQYSNQDFTAYARSTDTKMEIGNFFEWNGSMPEPV\nWNAPTLNEKYNIEQNALFAATYLNPIEPLKFILGGRFTNYEKNIYGRSSSIKYDHEFVPY\nAGIIYDFNDVYTAYASYTSIFQPQDKKDFDGNYLDPVEGNSTEVGLKSAWFDGRLNGTLA\nLYHIKQDNLAQEAGDVTRNGVKEIYYRAAKGATSEGFEVEVSGQITPDWNITAGYSQFSA\nKDTNDVDVNTQLPRKMIQTFTTYKLSGKLENITVGGGVNWQSSTYINAENPKEVIEKVEQ\nGDYALVNLMARYQITKDFSAQLNINNVFDKKYYGVFPAYGQITLGAPRNAALTLQYKF\n</code></pre>\n\n<p>my query is to separate each version and want to save it each version with different file names?\ni tried the below code but i get only the line which startsup</p>\n\n<pre><code>#!/usr/local/bin/perl\nopen( FILE, \"/home/httpd/cgi-bin/r/ftp.txt\" );\nwhile ( $line = &lt;FILE&gt; ) {\n    if ( $line =~ m/^\\&gt;/g ) {\n        print $line;\n    }\n}\n</code></pre>\n\n<p>my desired output should be those two different versions which starts as  like this >KCY60942 and >KCY61710 must saved in different filenames such as >KCY60942 should be saved in one file name and >KCY61710 it should be saved in another file name.</p>\n"}, {"tags": ["perl", "plsql"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435659891, "post_id": 31135061, "comment_id": 50282112, "body": "<code>$string =~ tr&#47;&quot;&#47; &#47;;</code> (like <code>TRANSLATE( string1, chars_to_replace, replacement_chars )</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 155, "user_id": 4602130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/99cfa5e78525de43e768cd7b9ddc8921?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu", "link": "https://stackoverflow.com/users/4602130/silviu"}, "edited": false, "score": 1, "creation_date": 1435658769, "post_id": 31135163, "comment_id": 50281395, "body": "It is removing all occurences of &#39; &quot; &#39; into a single space. What else you need?"}, {"owner": {"reputation": 155, "user_id": 4602130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/99cfa5e78525de43e768cd7b9ddc8921?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu", "link": "https://stackoverflow.com/users/4602130/silviu"}, "edited": false, "score": 0, "creation_date": 1435658811, "post_id": 31135163, "comment_id": 50281419, "body": "my fault, i forgot to write &quot;/g&quot;"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1435658364, "creation_date": 1435658364, "answer_id": 31135163, "question_id": 31135061, "link": "https://stackoverflow.com/questions/31135061/substitute-replace-string-with-perl/31135163#31135163", "title": "Substitute, replace string with perl", "body": "<p>Try this it should work:    </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $string= '\"only this I need\"';\n\nprint \"$string \\n\"; #prints \"only this I need\"\n\n$string =~ s/\"/ /g;\n\nprint \"$string \\n\"; #prints only this I need\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1435661796, "creation_date": 1435661796, "answer_id": 31136370, "question_id": 31135061, "link": "https://stackoverflow.com/questions/31135061/substitute-replace-string-with-perl/31136370#31136370", "title": "Substitute, replace string with perl", "body": "<p>This is a way to remove quotes from string:</p>\n\n<pre><code>my $string= '\"only this I need\"';\n$string =~ m/\"([^\"]*)\"/;\nprint \"$1\\n\";\n</code></pre>\n\n<p>In case if you know the first and last character is quotes, you can do this without using <code>regex</code>, just use <code>substr</code>:</p>\n\n<pre><code>my $string= '\"only this I need\"';\n$string = substr $string, 1, -1;\nprint \"$string\\n\";\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 4602130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/99cfa5e78525de43e768cd7b9ddc8921?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu", "link": "https://stackoverflow.com/users/4602130/silviu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 31135163, "answer_count": 2, "score": 0, "last_activity_date": 1435661796, "creation_date": 1435658082, "last_edit_date": 1435660293, "question_id": 31135061, "link": "https://stackoverflow.com/questions/31135061/substitute-replace-string-with-perl", "title": "Substitute, replace string with perl", "body": "<p>I have string  like this:</p>\n\n<p><code>$string= \"only this I need\"</code>. </p>\n\n<p>I am new in perl, and I tried to translate a PL/SQL code in perl.<br>\nMy goal is to replace <code>\"</code> with a blank space, finally it should look like this:</p>\n\n<p><code>$string = only this I need</code></p>\n\n<p>In PL/SQL I use this, and is working very well:</p>\n\n<pre><code>REGEXP_REPLACE(string,'\"','');\n</code></pre>\n\n<p>In perl I tried this, but is not working: <code>$string=~s/\"/'';</code> receiving an error.</p>\n\n<p>Please, help me, tell me what I need to read to do my job properly?</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1435658609, "post_id": 31134618, "comment_id": 50281277, "body": "Is this proper csv? Can it contain quoted commas and spaces and odd characters, such as <code>&quot;foo bar&quot;, &quot;a,b,c,d&quot;, &quot;&amp;auml;&#229;&#228;&#246;&quot;</code>?"}, {"owner": {"reputation": 55, "user_id": 4063154, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ac4f60dd09162c9e8afa7ede8c54245f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardsop", "link": "https://stackoverflow.com/users/4063154/richardsop"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1438178903, "post_id": 31134618, "comment_id": 51344340, "body": "Yes, it is a proper csv file"}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1435657595, "post_id": 31134809, "comment_id": 50280579, "body": "<code>(\\w+)</code> will fail for lines such as <code>foo bar</code> or <code>?query=foo&amp;bar=baz</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435657598, "post_id": 31134809, "comment_id": 50280581, "body": "A lot more concise than the one I was putting together. Although I suppose that isn&#39;t always a good thing..."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435657638, "post_id": 31134809, "comment_id": 50280611, "body": "@Sobrique yes, that is true."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1435657668, "post_id": 31134809, "comment_id": 50280630, "body": "@TLP I was referring to original input."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1435658297, "post_id": 31134809, "comment_id": 50281058, "body": "Well, the original input looks like placeholders to me. As far as we know, it is arbitrary strings."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1435658441, "post_id": 31134809, "comment_id": 50281151, "body": "@TLP how about <code>(.+)</code>?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1435658496, "post_id": 31134809, "comment_id": 50281189, "body": "I was testing something along the lines <code>([^,]+)</code>, but now I am wondering if the most correct way is not to use <code>Text::CSV</code>."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 3, "last_activity_date": 1435658694, "last_edit_date": 1435658694, "creation_date": 1435657455, "answer_id": 31134809, "question_id": 31134618, "link": "https://stackoverflow.com/questions/31134618/multiple-pattern-match-and-replace/31134809#31134809", "title": "Multiple pattern match and replace", "body": "<p>Perl from command line,</p>\n\n<pre><code>perl -i -pe'\n  BEGIN{ local (@ARGV, $/, $^I) =pop; %h = split /[\\s,]+/, &lt;&gt; }\n  s| (\\S+)\\K |,$h{$1}|x\n' pattern.txt replace.txt\n</code></pre>\n\n<p>It slurps content of second file (<code>$/</code> to undef), and temporarily disables in-place editing (<code>$^I</code> to undef), splits string on white-spaces/commas and populate <code>%h</code> hash in key/value manner. Then for every line of first file adds comma and value for current key.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1435657674, "creation_date": 1435657674, "answer_id": 31134900, "question_id": 31134618, "link": "https://stackoverflow.com/questions/31134618/multiple-pattern-match-and-replace/31134900#31134900", "title": "Multiple pattern match and replace", "body": "<p>Not sure this really needs a regex as you're not really altering your source, as much as 'just' printing based on key fields. </p>\n\n<p>So I would approach it something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nopen( my $replace, \"&lt;\", \"replace.txt\" ) or die $!;\n\nmy %replacements;\nwhile (&lt;$replace&gt;) {\n    chomp;\n    my ( $key, $value ) = split(/,/);\n    $replacements{$key} = $value;\n}\nclose($replace);\n\nopen( my $input,  \"&lt;\", \"input.txt\" )    or die $!;\nopen( my $output, \"&gt;\", \"patterns.txt\" ) or die $!;\n\nwhile ( my $line = &lt;$input&gt; ) {\n    chomp $line;\n    if ( $replacements{$line} ) {\n        print {$output} $replacements{$line}, \"\\n\";\n    }\n}\n\nclose($input);\nclose($output);\n</code></pre>\n\n<p>It's not as concise as some of the other examples, but hopefully clearer what it's actually doing. This I call a good thing. (I can make it much more compact, in the way that <code>perl</code> is (in)famous for). </p>\n"}, {"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 2, "last_activity_date": 1435659366, "creation_date": 1435659366, "answer_id": 31135575, "question_id": 31134618, "link": "https://stackoverflow.com/questions/31134618/multiple-pattern-match-and-replace/31135575#31135575", "title": "Multiple pattern match and replace", "body": "<p>With the possibility of arbitrary characters in your input, it might be safest to use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\"><code>Text::CSV</code></a>. The benefit is that it will handle things like quoted delimiters, multiline strings, etc. The drawback is that it can break on non-csv content, so it sort of relies on your input being proper csv.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new({\n        binary =&gt; 1,\n        eol =&gt; $/,\n    });\nmy %s;\nmy ($input, $replace) = @ARGV;\nopen my $fh, \"&lt;\", $replace or die \"Cannot open $replace: $!\";\nwhile (my $row = $csv-&gt;getline($fh)) {\n    my ($key, $line) = @$row;\n    $s{$key} = $line;\n}\n\nopen $fh, \"&lt;\", $input or die \"Cannot open $input: $!\";\nwhile (&lt;$fh&gt;) {\n    chomp;\n    $csv-&gt;print(*STDOUT, [$_, $s{$_}]);\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4063154, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ac4f60dd09162c9e8afa7ede8c54245f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardsop", "link": "https://stackoverflow.com/users/4063154/richardsop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 31134809, "answer_count": 3, "score": 1, "last_activity_date": 1435659366, "creation_date": 1435656889, "last_edit_date": 1435657110, "question_id": 31134618, "link": "https://stackoverflow.com/questions/31134618/multiple-pattern-match-and-replace", "title": "Multiple pattern match and replace", "body": "<p>How to extract patterns from a file  and replace the multiple patterns with a new pattern from a file?\nFor example:\nLets say the pattern file is pattern.txt, as follows with 2,000 lines.   </p>\n\n<pre><code>a  \nb   \nd  \ne  \nf  \n....  \n...  \n...  \n</code></pre>\n\n<p>File to replace pattens is replace.txt  containing:      </p>\n\n<pre><code>a,1    \nb,3  \nc,5  \nd,10  \ne,14   \n....  \n...  \n...   \n</code></pre>\n\n<p>The intended final file content for file patterns.txt is:  </p>\n\n<pre><code>a,1    \nb,3    \nd,10  \ne,14  \n....  \n...  \n... \n</code></pre>\n"}, {"tags": ["perl", "glade"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435655199, "post_id": 31133950, "comment_id": 50278837, "body": "So what&#39;s the problem you&#39;re having?"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435655501, "post_id": 31133950, "comment_id": 50279052, "body": "I need the output of <code>system</code> to be captured in the TextView simultaneously with its capture on the console. That&#39;s not happening."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435655836, "post_id": 31134101, "comment_id": 50279282, "body": "Ah, I see. I expected to be able to do something with system(), as this capture is the only thing lacking. Thanks a lot!"}], "tags": [], "owner": {"reputation": 3218, "user_id": 1285655, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b3ff3f7a09887e25b9d55a46f998fff?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1285655/matthias"}, "is_accepted": false, "score": 2, "last_activity_date": 1435663465, "last_edit_date": 1495541759, "creation_date": 1435655523, "answer_id": 31134101, "question_id": 31133950, "link": "https://stackoverflow.com/questions/31133950/dynamically-capture-output-of-system-command-in-perl/31134101#31134101", "title": "Dynamically capture output of system command in Perl", "body": "<p>What you want to do is not possible with <code>system()</code>. <code>System()</code> forks a new process <em>and</em> waits for it to terminate. Then your program continues (see <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">manual</a>). You could start a sub-process (executing whatever <code>system()</code> did for you) and read this sub-process' stdout. You could for example get inspired here: <a href=\"https://stackoverflow.com/questions/18295250/redirecting-stdin-stdout-from-execed-process-to-pipe-in-perl\">redirecting stdin/stdout from exec&#39;ed process to pipe in Perl</a></p>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435658553, "post_id": 31134623, "comment_id": 50281232, "body": "Thank you. I suppose the use of <code>open</code> is my best bet. Will do this!"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435722518, "post_id": 31134623, "comment_id": 50314055, "body": "This is very useful but does not really solve my problem, actually - the output is not <i>dynamically</i> updated in the TextView as it is generated. There is a distinct delay, sadly."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435733992, "post_id": 31134623, "comment_id": 50318269, "body": "Look up autoflush in the IO::handle docs. Open like this is already running in a parallel process."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1435659535, "last_edit_date": 1435659535, "creation_date": 1435656897, "answer_id": 31134623, "question_id": 31133950, "link": "https://stackoverflow.com/questions/31133950/dynamically-capture-output-of-system-command-in-perl/31134623#31134623", "title": "Dynamically capture output of system command in Perl", "body": "<p>If you're trying to 'capture' the output of a <code>system</code> call, then I would suggest the best approach is to use <code>open</code> and open a filehandle to your process:</p>\n\n<pre><code>my $pid = open ( my $process_output, '-|', \"command\" ); \n</code></pre>\n\n<p>Then you can read <code>$process_output</code> exactly as you would a file handle (bear in mind it'll block if there's no IO pending). </p>\n\n<pre><code>while ( &lt;$process_output&gt; ) { \n   print; \n}\n\nclose ( $process_output ); \n</code></pre>\n\n<p>You can 'fake' the behaviour of <code>system</code> via the <code>waitpid</code> system call:</p>\n\n<pre><code> waitpid ( $pid, 0 ); \n</code></pre>\n\n<p>This will 'block' your main program until the system call has completed. </p>\n"}], "owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 31134623, "answer_count": 2, "score": 0, "last_activity_date": 1435663465, "creation_date": 1435655076, "question_id": 31133950, "link": "https://stackoverflow.com/questions/31133950/dynamically-capture-output-of-system-command-in-perl", "title": "Dynamically capture output of system command in Perl", "body": "<p>In my Perl code, I use a system command to run a script. I'm using Gtk2::Perl and Glade to build a UI. I need the output of the command to be captured not just to the console (which <code>Capture::Tiny</code> does), but also to a TextView in my GUI. </p>\n\n<pre><code>system(\"command\");\n\n$stdout = tee{                         #This captures the output to the console\nsystem(\"command\");  \n};\n\n$textbuffer-&gt;set_text($stdout);       #This does set the TextView with the captured output, but *after* the capture is over. \n</code></pre>\n\n<p>Any help would be greatly appreciated. </p>\n"}, {"tags": ["regex", "perl", "substring"], "comments": [{"owner": {"reputation": 25213, "user_id": 3651607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnc14.png?s=128&g=1", "display_name": "Andy Korneyev", "link": "https://stackoverflow.com/users/3651607/andy-korneyev"}, "edited": false, "score": 0, "creation_date": 1435653635, "post_id": 31133362, "comment_id": 50277825, "body": "Do you have literally <code>\\t</code> (two symbols, &quot;\\&quot; and &quot;t&quot;) in your real string, or do you have tab symbol there?"}, {"owner": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "reply_to_user": {"reputation": 25213, "user_id": 3651607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnc14.png?s=128&g=1", "display_name": "Andy Korneyev", "link": "https://stackoverflow.com/users/3651607/andy-korneyev"}, "edited": false, "score": 0, "creation_date": 1435653692, "post_id": 31133362, "comment_id": 50277872, "body": "No, I have a real tab. The &quot;\\t&quot; is just a &quot;simulation&quot; :-)"}], "answers": [{"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 0, "last_activity_date": 1435653722, "creation_date": 1435653722, "answer_id": 31133516, "question_id": 31133362, "link": "https://stackoverflow.com/questions/31133362/can-not-catch-substring-by-regex-which-ends-with-tab/31133516#31133516", "title": "Can not catch substring by regex which ends with tab", "body": "<pre><code>/ANN=(.*?)[;\\t]/\n</code></pre>\n\n<p>Make your regex <code>non greedy</code>.</p>\n\n<p><code>.*</code> is greedy and will match upto the last <code>; or \\t</code> available.</p>\n"}, {"comments": [{"owner": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "edited": false, "score": 0, "creation_date": 1435654043, "post_id": 31133517, "comment_id": 50278100, "body": "Thanks for all the comments! But the problem was not that the regex used the LAST tab, but that I get NOTHING back. This does also not change if I make the regex non-greedy"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "edited": false, "score": 1, "creation_date": 1435654633, "post_id": 31133517, "comment_id": 50278461, "body": "@Michael: Then please edit the question with the exact code. As you can see, my code returns something with both greedy and non-greedy quantifiers."}, {"owner": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "edited": false, "score": 0, "creation_date": 1435655782, "post_id": 31133517, "comment_id": 50279247, "body": "Sorry choroba. My question was not matching the actual input data. sorry for that. See my EDIT2..."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "edited": false, "score": 1, "creation_date": 1435658246, "post_id": 31133517, "comment_id": 50281030, "body": "Then you can just use <code>([^;]*)</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 0, "last_activity_date": 1435676920, "last_edit_date": 1435676920, "creation_date": 1435653725, "answer_id": 31133517, "question_id": 31133362, "link": "https://stackoverflow.com/questions/31133362/can-not-catch-substring-by-regex-which-ends-with-tab/31133517#31133517", "title": "Can not catch substring by regex which ends with tab", "body": "<p>Just use the non-greedy quantifier <code>*?</code> that matches the least it can:</p>\n\n<pre><code>for my $string ('ANN=abcdefgh;blabla', \"ANN=abcdefgh\\tyxz\\tyxz\") {\n    (my @splitUpAnn) = $string =~ /ANN=(.*?)[;\\t]/;\n    print \"@splitUpAnn\\n\";\n}\n</code></pre>\n\n<p>If you want to get the string up to the first semicolon if present, or everything otherwise, just use</p>\n\n<pre><code>$string =~ /ANN=([^;]*)/\n</code></pre>\n\n<p>i.e. capture everything that's not a semicolon.</p>\n"}, {"comments": [{"owner": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "edited": false, "score": 1, "creation_date": 1435654157, "post_id": 31133518, "comment_id": 50278170, "body": "Thanks for the DEMO site. Might be very helpful for me!"}], "tags": [], "owner": {"reputation": 767, "user_id": 4332742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MkdSw.jpg?s=128&g=1", "display_name": "Anshul Rai", "link": "https://stackoverflow.com/users/4332742/anshul-rai"}, "is_accepted": false, "score": 1, "last_activity_date": 1435653727, "creation_date": 1435653727, "answer_id": 31133518, "question_id": 31133362, "link": "https://stackoverflow.com/questions/31133362/can-not-catch-substring-by-regex-which-ends-with-tab/31133518#31133518", "title": "Can not catch substring by regex which ends with tab", "body": "<p>Use <code>.*?</code> instead of <code>.*</code>. </p>\n\n<p><code>.*</code> is <strong>greedy</strong> so it matches with second occurrence of TAB.</p>\n\n<p><a href=\"https://regex101.com/r/dD7rX3/2\" rel=\"nofollow\">DEMO</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1435674232, "creation_date": 1435674232, "answer_id": 31140975, "question_id": 31133362, "link": "https://stackoverflow.com/questions/31133362/can-not-catch-substring-by-regex-which-ends-with-tab/31140975#31140975", "title": "Can not catch substring by regex which ends with tab", "body": "<pre><code>my ($ann) = $tabValues[7] =~ /ANN=(.*?)[;\\t]/;\n</code></pre>\n\n<p>The leading <code>^</code> negates the character class, so <code>[^;\\t]</code> matches any character except <code>;</code> and tab.</p>\n\n<p>There are multiple suggestions of making you <code>.*</code> non-greedy, but using non-greediness as anything but an optimization is very fragile and error prone.</p>\n"}, {"tags": [], "owner": {"reputation": 492, "user_id": 3226989, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/BCvQM.jpg?s=128&g=1", "display_name": "Rafiki", "link": "https://stackoverflow.com/users/3226989/rafiki"}, "is_accepted": false, "score": 0, "last_activity_date": 1435677355, "creation_date": 1435677355, "answer_id": 31142184, "question_id": 31133362, "link": "https://stackoverflow.com/questions/31133362/can-not-catch-substring-by-regex-which-ends-with-tab/31142184#31142184", "title": "Can not catch substring by regex which ends with tab", "body": "<p>I've tested  and I got a match</p>\n\n<pre><code>if ( \"ANN=abcdefgh;blabla\"  =~ /(ANN=(.*)[;\\t])/ ) {\n    print $1.\"\\n\" ;}\nif ( \"ANN=abcdefgh\\tyxz\\tyxz\"  =~ /(ANN=(.*)[;\\t])/ ) {\n    print $1.\"\\n\" ;}\n</code></pre>\n\n<p>result is:</p>\n\n<pre><code>ANN=abcdefgh;\nANN=abcdefgh    yxz\n</code></pre>\n\n<p>So:</p>\n\n<ul>\n<li>your request is really greedy, as described in previous answers</li>\n<li>Perhaps the problem lies in the way you put the values in the array, but the regexp is correct</li>\n</ul>\n"}], "owner": {"reputation": 646, "user_id": 1647462, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8b4738a25e8e995b98e0e43aa364d433?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1647462/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 31133517, "answer_count": 5, "score": 0, "last_activity_date": 1435677355, "creation_date": 1435653266, "last_edit_date": 1435655715, "question_id": 31133362, "link": "https://stackoverflow.com/questions/31133362/can-not-catch-substring-by-regex-which-ends-with-tab", "title": "Can not catch substring by regex which ends with tab", "body": "<p>I have two types of strings:</p>\n\n<p>1: <code>ANN=abcdefgh;blabla</code></p>\n\n<p>2 wrong version: <code>ANN=abcdefgh\\tyxz\\tyxz</code></p>\n\n<p>2 actual version: <code>ANN=abcdefgh</code></p>\n\n<p>Now I want to extract the <code>abcdefgh</code> with a regex. So the start to extract is always after \"ANN=\". But the end is eighter a semicolon (;) or the FIRST occurrence of a tab.</p>\n\n<p>How does the regex for this look? I tried:</p>\n\n<pre><code>(my @splitUpAnn) = $tabValues[7] =~ /ANN=(.*)[;\\t]/;\n</code></pre>\n\n<p>But I always get just the version 1 with the semicolon back, but it does not work for version two...</p>\n\n<p>EDIT: To be clear. I did not get back ANYTHING for the version two. The problem is NOT that the last tab is used!</p>\n\n<p>EDIT2: Ups, there was something different in the input data than expected. Either I have a semicolon at the end of NOTHING (see \"2 actual version\"). Sorry for that! So what would the regex then be?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1435651572, "creation_date": 1435651572, "answer_id": 31132821, "question_id": 31132599, "link": "https://stackoverflow.com/questions/31132599/perl-regex-selectively-replace-the-record-separator/31132821#31132821", "title": "perl regex selectively replace the record separator", "body": "<p>You can just go over the string character by character, remembering how deep you are in brackets, and replace commas with vertical bars if needed.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $string = '(rupert, paul, 23, 8, [{fin, dan, jack},{bill,34,26,49},{84,28}],{34,jack,bon})';\n\nmy $inside;\nfor my $pos (0 .. length($string) - 1) {\n    my $char = substr $string, $pos, 1;\n    $inside++ if $char =~ /[[{]/;\n    $inside-- if $char =~ /[]}]/;\n    substr $string, $pos, 1, '|' if ',' eq $char &amp;&amp; $inside;\n}\nprint $string, \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 11, "user_id": 5064367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b17ad88b80d3de20de68180db81583?s=128&d=identicon&r=PG&f=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/5064367/yuvi"}, "edited": false, "score": 0, "creation_date": 1435655198, "post_id": 31132833, "comment_id": 50278836, "body": "Just accepting the answer is really enough. There are a lot of other good regex testing Web sites (e.g. <a href=\"https://www.debuggex.com/\" rel=\"nofollow noreferrer\">debuggex.com</a>), too."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 11, "user_id": 5064367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b17ad88b80d3de20de68180db81583?s=128&d=identicon&r=PG&f=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/5064367/yuvi"}, "edited": false, "score": 0, "creation_date": 1435684769, "post_id": 31132833, "comment_id": 50299407, "body": "Please ley me know if you need more assistance with it."}, {"owner": {"reputation": 11, "user_id": 5064367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b17ad88b80d3de20de68180db81583?s=128&d=identicon&r=PG&f=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/5064367/yuvi"}, "edited": false, "score": 0, "creation_date": 1436697439, "post_id": 31132833, "comment_id": 50713373, "body": "Thank you, i tried changing the regex so that the pattern matches replaced the complete structure. For example (1,2,3,4,{1,1,1,3[{a,b,c},{a,b,c}],4,5[{d,c,e},{d,c,e}],5},4 gives me (1,2,3,4,{1,1,1,3[{a|b|c}|{a|b|c}],4,5[{d|c|e}|{d|c|e}]|5},4&zwnj;&#8203;. I need (1,2,3,4,{1|1|1|3[{a|b|c}|{a|b|c}]|4|5[{d|c|e}|{d|c|e}]|5},4&zwnj;&#8203;. Great if this is possible in a one liner."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 3, "last_activity_date": 1436813771, "last_edit_date": 1436813771, "creation_date": 1435651617, "answer_id": 31132833, "question_id": 31132599, "link": "https://stackoverflow.com/questions/31132599/perl-regex-selectively-replace-the-record-separator/31132833#31132833", "title": "perl regex selectively replace the record separator", "body": "<p>You can use a regex that will check if the comma is followed by <code>]</code> or <code>}</code> with no preceding them.</p>\n\n<pre><code>my $s = \"(rupert, paul, 23, 8, [{fin, dan, jack},{bill,34,26,49},{84,28}],{34,jack,bon})\\n(rupert, paul, 23, 8, [{fin| dan| jack}|{bill|34|26|49}|{84|28}],{34|jack|bon})\"; \n$s =~ s/,(?=(?:\\{[^{}]*\\}|[^{}])*})|,(?=(?:\\[[^\\[\\]]*\\]|[^\\[\\]])*\\])/|/g;\nprint \"$s\\n\";\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/kXAoaP\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<p>And here is the <a href=\"https://regex101.com/r/xY0aD0/3\" rel=\"nofollow\">regex demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 0, "last_activity_date": 1435652719, "creation_date": 1435652719, "answer_id": 31133188, "question_id": 31132599, "link": "https://stackoverflow.com/questions/31132599/perl-regex-selectively-replace-the-record-separator/31133188#31133188", "title": "perl regex selectively replace the record separator", "body": "<pre><code>,(?=[^\\[{}]*(?:\\]|}))\n</code></pre>\n\n<p>You can try this and replace by <code>|</code>.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/cK4iV0/3\" rel=\"nofollow\">https://regex101.com/r/cK4iV0/3</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5064367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b17ad88b80d3de20de68180db81583?s=128&d=identicon&r=PG&f=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/5064367/yuvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1436813771, "creation_date": 1435650786, "last_edit_date": 1436774071, "question_id": 31132599, "link": "https://stackoverflow.com/questions/31132599/perl-regex-selectively-replace-the-record-separator", "title": "perl regex selectively replace the record separator", "body": "<p>I have a CSV file having patterns the below pattern</p>\n\n<pre><code>(rupert, paul, 23, 8, [{fin, dan, jack},{bill,34,26,49},{84,28}],{34,jack,bon})\n</code></pre>\n\n<p>The CSV with in the \"{}\" and \"[]\" should be replaced with a pipe character \"|\". The formatted output should be as below.</p>\n\n<pre><code>(rupert, paul, 23, 8, [{fin| dan| jack}|{bill|34|26|49}|{84|28}],{34|jack|bon})\n</code></pre>\n\n<p>I want to use a Perl regex but am getting nowhere. Any help is greatly appreciated.</p>\n\n<p>The solution provided by the perl guru's work fine for single {} however i found that the free flowing text has some nested {}'s. I tried modifying the perl onliner's to accommodate the nested flower braces with no success.</p>\n\n<p>(1,2,der,bet,na,4,5,{a,b,1,2,sd[{1,2},{4,5}],c{q,ew,3,4},1,2,3,cf{2,4,5,8},6}.</p>\n\n<p>The solution gives</p>\n\n<p>(1,2,der,bet,na,4,5,{a,b,1,2,sd[{1|2},{4|5}],c{q|ew|3|4},1,2,3,cf{2|4|5|8}|6}.</p>\n\n<p>But the need is to have</p>\n\n<p>(1,2,der,bet,na,4,5,{a|b|1|2|sd[{1|2}|{4|5}]|c{q|ew|3|4}|1|2|3|cf{2|4|5|8}|6}.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 8006, "user_id": 2753501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0a5ac280a03c3a9d89488dc33f0ef075?s=128&d=identicon&r=PG&f=1", "display_name": "ZygD", "link": "https://stackoverflow.com/users/2753501/zygd"}, "edited": false, "score": 0, "creation_date": 1435671710, "post_id": 31132364, "comment_id": 50290389, "body": "Why not combine both threads into one which would have both functions: first create file and then read it?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435673237, "post_id": 31132364, "comment_id": 50291773, "body": "More detail is needed to answer this question. However I suspect the problem is that you&#39;re assuming shared variables when they&#39;re not."}, {"owner": {"reputation": 1, "user_id": 5061069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c089508fc9545406892a4f8121ef0de?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Kumar", "link": "https://stackoverflow.com/users/5061069/akshay-kumar"}, "edited": false, "score": 0, "creation_date": 1435760368, "post_id": 31132364, "comment_id": 50336307, "body": "Actuallly CFG files which are being created they are fetched from a source and the contents of that file are written in the file. I want that first thread should continue to make files as there will be plenty of files to create about 300-400 and I want that second thread should start after 2-3 seconds and it should start reading files."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1436445544, "creation_date": 1436445544, "answer_id": 31317779, "question_id": 31132364, "link": "https://stackoverflow.com/questions/31132364/collaborating-of-two-threads/31317779#31317779", "title": "Collaborating of two threads", "body": "<p>I think your problem here will be that you're not rereading the directory. </p>\n\n<pre><code>opendir( DIR, $filedir ) or die $!;\nwhile ( my $files = readdir(DIR) ) {\n</code></pre>\n\n<p>Because it's not obvious, what's <em>actually</em> happening is the <em>first</em> time you call <code>readdir</code> it reads the directory, and subsequent calls just iterate that list.</p>\n\n<p>That's to prevent strange things happening if - for example - I'm creating a file <em>in</em> that directory <em>within</em> my loop. </p>\n\n<p>So in effect - your second thread only ever looks at that directory once. It's functionally similar to:</p>\n\n<pre><code>my @files = readdir(DIR); \nforeach my $file ( @files ) {\n</code></pre>\n\n<p>I would suggest that what you need is the <a href=\"http://perldoc.perl.org/functions/rewinddir.html\" rel=\"nofollow\"><code>rewinddir</code></a> function. Or perhaps use a <code>Thread::Queue</code> or other mechanism to pass through files in need of processing. </p>\n"}], "owner": {"reputation": 1, "user_id": 5061069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c089508fc9545406892a4f8121ef0de?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Kumar", "link": "https://stackoverflow.com/users/5061069/akshay-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436445544, "creation_date": 1435650047, "last_edit_date": 1436445140, "question_id": 31132364, "link": "https://stackoverflow.com/questions/31132364/collaborating-of-two-threads", "title": "Collaborating of two threads", "body": "<p>I have created a Perl script with the two threads:</p>\n\n<p>1) Create <code>.cfg</code> files<br>\n2) Read those <code>.cfg</code> files</p>\n\n<p>I want to accomplish that while one thread is busy making files, side by side my second thread would read those files.</p>\n\n<p>Bu I am facing a problem at that moment when my second thread is created it will only read that files which are created at that moment. Can anyone give idea about accomplishing this task.</p>\n\n<p>The Create threads and Reading files functions are mentioned below: </p>\n\n<pre><code>sub CreateThreads() {\n    $threads[0] = threads-&gt;create( \\&amp;CreateCFG );\n    sleep 3;\n    $threads[1] = threads-&gt;create( \\&amp;ReadCFG );\n}\n\nsub ReadCFG() {\n\n    my $id = threads-&gt;tid();\n\n    opendir( DIR, $filedir ) or die $!;\n\n    while ( my $files = readdir(DIR) ) {\n        if ( $files eq \".\" || $files eq \"..\" ) {\n            next;\n        }\n        else {\n            my $filepath = $filedir . \"/\" . $files;\n\n            if ( $files =~ m/$probename/ ) {\n                my @file = split( \"&amp;\", $files );\n\n                if ( $file[3] !~~ @reportrobots ) {\n                    push( @reportrobots, $file[3] );\n                    my $raddr =\n                        \"/\" . $file[1] . \"/\" . $file[2] . \"/\" . $file[3];\n                    &amp;ProbeReport( \\$userdata_file, \\$filepath, \\$raddr );\n                }\n\n            }\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "hash", "text-files"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1435649970, "post_id": 31132168, "comment_id": 50275663, "body": "Show the sample input please."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1435651816, "post_id": 31132168, "comment_id": 50276708, "body": "To inspect how a data structure actually looks like, use something like the  <code>Data::Dumper</code> module. Could you edit the question to show such output?  Likely, your hash is OK but the lines contain an extra <code>\\r</code> character or so that causes the same output line to be overwritten."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1435652303, "post_id": 31132168, "comment_id": 50276978, "body": "Your code is working for me. :)"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1435656152, "post_id": 31132168, "comment_id": 50279513, "body": "Add NEW-LINE character to your print lines to be sure you do not misread the output: <code>print($log_hash{$log_key},&quot;\\n&quot;);</code>"}, {"owner": {"reputation": 1, "user_id": 4800077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zZIvkt6k8ec/AAAAAAAAAAI/AAAAAAAAA74/eonx03psW5c/photo.jpg?sz=128", "display_name": "shreya turmari", "link": "https://stackoverflow.com/users/4800077/shreya-turmari"}, "edited": false, "score": 0, "creation_date": 1435720473, "post_id": 31132168, "comment_id": 50313646, "body": "Hi, I tried this code, and still have the same problem. Log file:  instance_73 434 641 instance_83 428 635 instance_56 434 640  I used the code to open a command file as well.  cmd file: CMD_1 447 632 CMD_2 449 643 CMD_3 434 632  There is no problem with this. The command file gives the expected result, but the for the log file, only the last line is getting stored."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4800077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zZIvkt6k8ec/AAAAAAAAAAI/AAAAAAAAA74/eonx03psW5c/photo.jpg?sz=128", "display_name": "shreya turmari", "link": "https://stackoverflow.com/users/4800077/shreya-turmari"}, "edited": false, "score": 0, "creation_date": 1435720567, "post_id": 31133966, "comment_id": 50313668, "body": "My log file has unique values. Hi, I tried this code, and still have the same problem. Log file:  instance_73 434 641 instance_83 428 635 instance_56 434 640  I used the code to open a command file as well.  cmd file: CMD_1 447 632 CMD_2 449 643 CMD_3 434 632  There is no problem with this. The command file gives the expected result, but the for the log file, only the last line is getting stored."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1435655137, "creation_date": 1435655137, "answer_id": 31133966, "question_id": 31132168, "link": "https://stackoverflow.com/questions/31132168/i-want-to-read-a-txt-file-seperated-by-spaces-line-by-line-and-store-it-in-a-h/31133966#31133966", "title": "I want to read a .txt file seperated by spaces, line by line and store it in a hash in perl", "body": "<p>Without some sample input, it's very hard to tell. However the most likely cause is that hashes require unique keys, and maybe your logfile isn't delivering those. </p>\n\n<p>Consider a log:</p>\n\n<pre><code>today some message\ntoday another message\ntoday some more messages\n</code></pre>\n\n<p>These will all be inserted into hash element <code>today</code> and each will overwrite each other.</p>\n\n<p>To check if this is what's happening:</p>\n\n<pre><code>push (  @{$log_hash{$log_key}, $log_val );\n</code></pre>\n\n<p>And then use <code>Data::Dumper</code> to view:</p>\n\n<pre><code>print Dumper \\%log_hash;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4800077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zZIvkt6k8ec/AAAAAAAAAAI/AAAAAAAAA74/eonx03psW5c/photo.jpg?sz=128", "display_name": "shreya turmari", "link": "https://stackoverflow.com/users/4800077/shreya-turmari"}, "edited": false, "score": 0, "creation_date": 1435719980, "post_id": 31134915, "comment_id": 50313542, "body": "Hi, I tried this code to open Two files. The log file is still giving me the same problem, but it works just fine for the command file. the log file looks like this: instance_73 434 641 instance_83 428 635 instance_56 434 640 instance_29 435 619 instance_53 442 647 instance_44 442 650"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 1, "user_id": 4800077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zZIvkt6k8ec/AAAAAAAAAAI/AAAAAAAAA74/eonx03psW5c/photo.jpg?sz=128", "display_name": "shreya turmari", "link": "https://stackoverflow.com/users/4800077/shreya-turmari"}, "edited": false, "score": 0, "creation_date": 1435731893, "post_id": 31134915, "comment_id": 50317151, "body": "@shreyaturmari: With the given input data of logfile, this code will give you following output: <code>instance_73 434 641 434 641 instance_83 428 635 428 635 instance_56 434 640 434 640</code> If this is not correct please add your expected output."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1435732132, "last_edit_date": 1435732132, "creation_date": 1435657721, "answer_id": 31134915, "question_id": 31132168, "link": "https://stackoverflow.com/questions/31132168/i-want-to-read-a-txt-file-seperated-by-spaces-line-by-line-and-store-it-in-a-h/31134915#31134915", "title": "I want to read a .txt file seperated by spaces, line by line and store it in a hash in perl", "body": "<p>Your code is working, I just changed style. Just check this below code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Enter the log file name: \";\nchomp (my $log_file = &lt;STDIN&gt;);\nmy %log_hash;\nopen my $log, \"&lt;\", \"$log_file\" or die \"Can't open file: $!\";\nwhile ( my $log_line = &lt;$log&gt; )\n{\n    chomp $log_line;\n    my($log_key, $log_val) = split(\" \", $log_line, 2);\n    print $log_key, \"\\n\";\n    print $log_val, \"\\n\";\n    $log_hash{$log_key} = $log_val;\n    print $log_hash{$log_key}, \"\\n\";\n}\nclose $log;\n</code></pre>\n\n<p>Considering the input data you have written in question.</p>\n\n<p>logfile Output:</p>\n\n<pre><code>instance_73\n434 641\n434 641\ninstance_83\n428 635\n428 635\ninstance_56\n434 640\n434 640\n</code></pre>\n\n<p>cmdfile Output:</p>\n\n<pre><code>CMD_1\n447 632\n447 632\nCMD_2\n449 643\n449 643\nCMD_3\n434 632\n434 632\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1435760021, "post_id": 31153440, "comment_id": 50336042, "body": "This really needs more explanation as to what it&#39;s doing."}], "tags": [], "owner": {"reputation": 65, "user_id": 4894585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eccc0f3f16d095977d35aeee0c6818a?s=128&d=identicon&r=PG&f=1", "display_name": "QASource", "link": "https://stackoverflow.com/users/4894585/qasource"}, "is_accepted": false, "score": 0, "last_activity_date": 1435776996, "last_edit_date": 1435776996, "creation_date": 1435729828, "answer_id": 31153440, "question_id": 31132168, "link": "https://stackoverflow.com/questions/31132168/i-want-to-read-a-txt-file-seperated-by-spaces-line-by-line-and-store-it-in-a-h/31153440#31153440", "title": "I want to read a .txt file seperated by spaces, line by line and store it in a hash in perl", "body": "<p>Please check the code below: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy @lines = &lt;DATA&gt;;\nforeach (@lines){\n    chomp $_;\n    my ($key, $val) = split (\" \", $_, 2);\n    print \"$key:$val\\n\";\n}\n__DATA__\nthis is line number 1\nthis is line number 2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4800077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zZIvkt6k8ec/AAAAAAAAAAI/AAAAAAAAA74/eonx03psW5c/photo.jpg?sz=128", "display_name": "shreya turmari", "link": "https://stackoverflow.com/users/4800077/shreya-turmari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1435776996, "creation_date": 1435649435, "last_edit_date": 1435730961, "question_id": 31132168, "link": "https://stackoverflow.com/questions/31132168/i-want-to-read-a-txt-file-seperated-by-spaces-line-by-line-and-store-it-in-a-h", "title": "I want to read a .txt file seperated by spaces, line by line and store it in a hash in perl", "body": "<p>I used the following code:</p>\n\n<pre><code>print \"Enter the log file name \\n\";\nchomp (my $log_file = &lt;STDIN&gt;);\nmy %log_hash ;\nopen(my $log, \"&lt;$log_file\") or die \"Can't open file\";\nwhile ( my $log_line = &lt;$log&gt; ) {\n    chomp($log_line);\n    my($log_key,$log_val) = split(\" \", $log_line,2);\n    print $log_key , \"\\n\";\n    print $log_val , \"\\n\";\n    $log_hash{$log_key} = $log_val;\n    print $log_hash{$log_key};\n\n}\n</code></pre>\n\n<p>When I run this, I see that only the last line is being printed. The rest of the values are not present in <code>log_hash</code>.\nHow do I rectify this?</p>\n\n<p>I tried this code, and still have the same problem.<br>\nLog file: </p>\n\n<pre><code>instance_73 434 641\ninstance_83 428 635\ninstance_56 434 640...\n</code></pre>\n\n<p>I used the code to open a command file as well.<br>\ncmd file:</p>\n\n<pre><code>CMD_1 447 632\nCMD_2 449 643\nCMD_3 434 632...\n</code></pre>\n\n<p>There is no problem with this. The command file gives the expected result(the keys and values are interchanged), but the for the log file, only the last line is getting stored.</p>\n\n<p>This is the result for the log file:</p>\n\n<pre><code>...instance_91\n446 631\ninstance_61\n442 631\ninstance_40\n448 647\n448 647\n</code></pre>\n\n<p>This is for the command file:</p>\n\n<pre><code>447 632\nCMD_1\nCMD_1\n449 643\nCMD_2\nCMD_2\n434 632\nCMD_3\nCMD_3...\n</code></pre>\n"}, {"tags": ["json", "perl", "csv"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1435633055, "post_id": 31128748, "comment_id": 50269523, "body": "I&#39;m pretty sure that&#39;s Perl code, not PHP."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1435652004, "post_id": 31128748, "comment_id": 50276823, "body": "Welcome to Stack Overflow. Usually if you ask a question here, you are supposed to show what you have tried, and explain what the problem is. You can see the <a href=\"https://stackoverflow.com/tour\">faq</a> and take the <a href=\"http://stackoverflow.com/tour\">tour</a>. I don&#39;t think you are familiar with programming, so that won&#39;t help you probably."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435652038, "post_id": 31128748, "comment_id": 50276840, "body": "<b>Here&#39;s a tip though:</b> the program reads a file called <code>categories.json</code> and I believe you know how to run the program. All it does is read and rearrange data from that JSON file. Find out where that file is created and regenerate it from your own system. Ask that in the Bigcommerce community. As is, the file only has those 50 categories. If it had all your categories, it would do what you want."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1435656764, "creation_date": 1435656764, "answer_id": 31134565, "question_id": 31128748, "link": "https://stackoverflow.com/questions/31128748/i-need-to-convert-a-json-file-into-a-readable-csv/31134565#31134565", "title": "I need to convert a Json file into a readable csv", "body": "<p>There is a pretty fundamental problem with mapping JSON to CSV. JSON is a nested data structure, where CSV isn't. Therefore you'll always have to mess around with converting - how would you colliminate:</p>\n\n<pre><code>{\n    \"data2\" : { \n        \"fish\" : \"paste\"\n    },\n    \"data\" : [\n         { \n             \"somesub\" : \"somethingelse\" \n         },\n         {\n             \"somesub\" : \"anotherthing\" \n         }\n    ]\n}\n</code></pre>\n\n<p>This won't turn into a flat data structure like CSV easily. </p>\n\n<p>If you've some <em>trivial</em> JSON to convert, it's not too hard, but depends <em>entirely</em> on the structure of your JSON file, and how you want to map things.</p>\n\n<p>For a trivial example:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\nuse Data::Dumper;\n\nlocal $/;\nmy $data = from_json(&lt;DATA&gt;);\nprint Dumper $data;\n\nmy @columns = qw ( col1 col2 col3 );\n\nprint join( \",\", \"key\", @columns ), \"\\n\";\nforeach my $key ( sort keys %$data ) {\n    print join( \",\", $key, @{ $data-&gt;{$key} }{@columns} ), \"\\n\";\n}\n\n\n__DATA__\n{\n  \"1\" : \n     {\n    \"col1\" : \"value1\",\n    \"col2\" : \"value2\",\n    \"col3\" : \"value3\"\n    },\n      \"2\" : {\n        \"col1\" : \"value4\",\n        \"col2\" : \"value5\",\n        \"col3\" : \"value6\" \n    }\n}\n</code></pre>\n\n<p>For a more complex example - it may be appropriate to use <code>Text::CSV</code> - but it depends rather what's in your JSON content - the simplistic <code>join</code> approach above doesn't cope with line feeds, embedded quotes or commas within the text. So it might be better to use <code>Text::CSV</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse JSON;\nuse Text::CSV;\nuse Data::Dumper;\n\nlocal $/;\nmy $data = from_json ( &lt;DATA&gt; );\nprint Dumper $data;\n\nmy $csv = Text::CSV -&gt; new ( { 'binary' =&gt; 1 } );\nmy @columns = qw ( col1 col2 col3 );\n$csv -&gt; column_names ( @columns );\n\nforeach my $key ( sort keys %$data ) {\n    $csv -&gt; print_hr ( \\*STDOUT, $data-&gt;{$key} );\n    print \"\\n\";\n}\n\nforeach my $key ( sort keys %$data ) {\n    my $row = [ $key, @{$data-&gt;{$key}}{@columns} ];\n    $csv -&gt; print ( \\*STDOUT, $row );\n    print \"\\n\";\n}\n</code></pre>\n\n<p>This uses the same <code>__DATA__</code> block as above, and also runs twice - once with using 'column headings' to print - which works provided you don't want to preserve the \"key\" field, and the second which assembles an array reference to print. </p>\n"}], "owner": {"reputation": 11, "user_id": 5063598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3TD2c8AnLXA/AAAAAAAAAAI/AAAAAAAAOfw/ydK-FDVlMu0/photo.jpg?sz=128", "display_name": "Ana Cuenca", "link": "https://stackoverflow.com/users/5063598/ana-cuenca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3011, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435656764, "creation_date": 1435632734, "last_edit_date": 1435634340, "question_id": 31128748, "link": "https://stackoverflow.com/questions/31128748/i-need-to-convert-a-json-file-into-a-readable-csv", "title": "I need to convert a Json file into a readable csv", "body": "<p>I got this Perl code that is supposed to read my categories and put them into a csv file. After many tries i finally got it but is only ready 50 of my over 500 categories. Any way to modify this routine to read all my categories. </p>\n\n<p>Here is the Perl file I got from the Bigcommerce forum.</p>\n\n<pre><code>use strict;\nuse JSON::PP;\n\nopen (my $fh, \"&lt;\", 'categories.json');\nmy $json_text = &lt;$fh&gt;;\nmy $perl_scalar = decode_json($json_text);\n\n\n# Make a list of ids to names, so that I can build a content path for Neto    category CSV\n\nmy $id;\nforeach my $element (@$perl_scalar)\n{\n         $id-&gt;{$element-&gt;{id}}=$element-&gt;{name};\n}\n\n# Actually print out the CSV content, in Neto's required format.\n\n\n\nprint \"content type,content path,name,description 1,description 2,sort order,seo meta description,seo page title,seo meta keywords\\n\";\n\n foreach my $element (@$perl_scalar)\n{\n       print \"Product Category,\";\n       my $parent_category = $element-&gt;{parent_category_list}[0];\n       if ($parent_category == $element-&gt;{id})\n       {\n            print \",\";\n        }\n       else\n       {\n            print $id-&gt;{$parent_category}, \",\";\n        }\n       print $element-&gt;{name}, \",\", $element-&gt;{description}, \",,\", $element-&gt;{sort_order}, \",\", $element-&gt;{meta_description}, \",,\\n\";\n        } \n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 93, "user_id": 3140450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NYj86.jpg?s=128&g=1", "display_name": "Katie F", "link": "https://stackoverflow.com/users/3140450/katie-f"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1435618270, "post_id": 31126728, "comment_id": 50266056, "body": "Thanks Ed - I want to append a new column at the end of the same file it&#39;s extracting the substring from and write the substring value into that new column."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 4, "creation_date": 1435618588, "post_id": 31126728, "comment_id": 50266153, "body": "Edit your question to do the following 2 things: 1) Explain what <code>write it to a new column</code> means and 2) Post a few more lines of sample input (includes cases you think will be hard to deal with) and the associated expected output. I suspect when you say in your comment <code>append a new column at the end of the same file</code> you really mean <code>append a new column to the end of each line</code> but idk maybe you really do want to add one column at the end of the file, whatever that means,"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435619850, "post_id": 31126728, "comment_id": 50266490, "body": "That&#39;s a strange-looking URL! It would be clearer if you showed the real data. Are there really question marks in the query like that? Are they supposed to delimit another query field, as they&#39;re supposed to be ampersands <code>&amp;</code>"}, {"owner": {"reputation": 93, "user_id": 3140450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NYj86.jpg?s=128&g=1", "display_name": "Katie F", "link": "https://stackoverflow.com/users/3140450/katie-f"}, "edited": false, "score": 0, "creation_date": 1435620261, "post_id": 31126728, "comment_id": 50266621, "body": "Hey Borodin - I did replace some text in the URL with the &quot;?&quot; so that I would have a delimiter.  The URL looks more like this:  <a href=\"https://www.website.com?utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=\" rel=\"nofollow noreferrer\">website.com?utm_source=google&amp;utm_medium=cpc&amp;utm_campai&hellip;</a>{ifs&zwnj;&#8203;earch:s}{?443OZgNf?}&zwnj;&#8203;_pcrid_{creative}_pk&zwnj;&#8203;w_{keyword}_pmt_{mat&zwnj;&#8203;chtype}_&amp;utm_term={k&zwnj;&#8203;eyword}&amp;network={net&zwnj;&#8203;work}&amp;position={adpo&zwnj;&#8203;sition}&amp;devicetype={&zwnj;&#8203;device}  So I&#39;m looking to pull out &quot;443OZgNf&quot; and write it to a new column."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1435625991, "post_id": 31126728, "comment_id": 50267992, "body": "@KatieF Your best bet would be to find a module that can parse the arguments to the query for you. It is a really bad idea to change <code>&amp;</code> to <code>?</code> -- the string is already delimited by <code>&amp;</code>."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1435626855, "post_id": 31126728, "comment_id": 50268200, "body": "<a href=\"http://stackoverflow.com/questions/12425393/perl-parse-url-to-get-the-value-using\" title=\"perl parse url to get the value using\">stackoverflow.com/questions/12425393/&hellip;</a>"}, {"owner": {"reputation": 93, "user_id": 3140450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NYj86.jpg?s=128&g=1", "display_name": "Katie F", "link": "https://stackoverflow.com/users/3140450/katie-f"}, "edited": false, "score": 0, "creation_date": 1435627471, "post_id": 31126728, "comment_id": 50268344, "body": "It wasn&#39;t delimited by &quot;&amp;&quot; it was delimited by other characters, which is why I did a find and replace so that I would have a common delimiter.  I&#39;ve just written a ruby script as the solution."}], "answers": [{"tags": [], "owner": {"reputation": 9957, "user_id": 722180, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hoSXr.png?s=128&g=1", "display_name": "bjfletcher", "link": "https://stackoverflow.com/users/722180/bjfletcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1435620566, "creation_date": 1435620566, "answer_id": 31127202, "question_id": 31126728, "link": "https://stackoverflow.com/questions/31126728/how-can-i-use-sed-or-bash-perl-awk-to-pull-out-a-substring-and-write-it-to/31127202#31127202", "title": "How can I use sed (or bash / perl / awk) to pull out a substring and write it to a new column?", "body": "<p>You can use this regular expression (Perl flavour):</p>\n\n<pre><code>s/^.*?\\?.*?\\?(.*?)\\?.*$/$1/\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>$ echo 'https://www.website.com?utm_campaign=blahblahblah&amp;blahblah?SUBSTRING?moreblahblahblahs' | perl -lpe 's/^.*?\\?.*?\\?(.*?)\\?.*$/$1/'\nSUBSTRING\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": false, "score": 0, "last_activity_date": 1435624262, "last_edit_date": 1435624262, "creation_date": 1435623416, "answer_id": 31127583, "question_id": 31126728, "link": "https://stackoverflow.com/questions/31126728/how-can-i-use-sed-or-bash-perl-awk-to-pull-out-a-substring-and-write-it-to/31127583#31127583", "title": "How can I use sed (or bash / perl / awk) to pull out a substring and write it to a new column?", "body": "<p>You have not explained what \"write a new column\" means but here is how you can <em>pull out \"443OZgNf\"</em>.</p>\n\n<p>First, as a shorthand, let's define variables for your two long urls:</p>\n\n<pre><code>$ url='https://www.website.com/?utm_source=google&amp;utm_medium=cpc&amp;utm_campaign={ifsearch:\u200c\u200bs}{?443OZgNf?}_pcrid_{creative}_pkw_{keyword}_pmt_{matchtype}_&amp;utm_term={keyword}\u200c\u200b&amp;network={network}&amp;position={adposition}&amp;devicetype={device}'\n$ url2='https://www.website.com?utm_campaign=blahblahblah&amp;blahblah?SUBSTRING?moreblahblahblahs'\n</code></pre>\n\n<h3>Using awk</h3>\n\n<p>With awk, we can define <code>?</code> as the field separator and then print the third field:</p>\n\n<pre><code>$ echo \"$url\" | awk -F'?' '{print $3}'\n443OZgNf\n$ echo \"$url2\" | awk -F'?' '{print $3}'\nSUBSTRING\n</code></pre>\n\n<p><code>-F'?'</code> changes the field separator to a question mark.  <code>print $3</code> prints the third field</p>\n\n<h3>Using sed</h3>\n\n<pre><code>$ echo \"$url\" | sed -r 's/([^?]*[?]){2}([^?]*)[?].*/\\2/'\n443OZgNf\n$ echo \"$url2\" | sed -r 's/([^?]*[?]){2}([^?]*)[?].*/\\2/'\nSUBSTRING\n</code></pre>\n\n<p>Here, <code>([^?]*[?]){2}</code> matches all the text up to the first two question marks.  <code>([^?]*)</code> matches all the text between the second and third <code>?</code> and saves the text in group 2.  <code>[?].*</code> matches the third question mark and all after it.</p>\n\n<h3>Using tr and sed</h3>\n\n<pre><code>$ echo \"$url\" | tr '?' '\\n' | sed -n '3p'\n443OZgNf\n$ echo \"$url2\" | tr '?' '\\n' | sed -n '3p'\nSUBSTRING\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": true, "score": 2, "last_activity_date": 1435627136, "creation_date": 1435627136, "answer_id": 31128047, "question_id": 31126728, "link": "https://stackoverflow.com/questions/31126728/how-can-i-use-sed-or-bash-perl-awk-to-pull-out-a-substring-and-write-it-to/31128047#31128047", "title": "How can I use sed (or bash / perl / awk) to pull out a substring and write it to a new column?", "body": "<p>You can extract the query string using the <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow\"><code>URI</code></a> module. Then extracting your target substring will be much easier. And perhaps more importantly, more stable.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse URI;\n\nmy $q = 'https://www.website.com/?utm_source=google&amp;utm_medium=cpc&amp;utm_campaign={ifsearch:??s}{?443OZgNf?}_pcrid_{creative}_pkw_{keyword}_pmt_{matchtype}_&amp;utm_term={keyword}??&amp;network={network}&amp;position={adposition}&amp;devicetype={device}';\nmy $uri = URI-&gt;new($q);\nmy %query = $uri-&gt;query_form;\nmy ($str) = $query{utm_campaign} =~ /{\\?([^?]+)\\?}/;\nprint $str;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>443OZgNf\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 0, "last_activity_date": 1435627885, "creation_date": 1435627885, "answer_id": 31128143, "question_id": 31126728, "link": "https://stackoverflow.com/questions/31126728/how-can-i-use-sed-or-bash-perl-awk-to-pull-out-a-substring-and-write-it-to/31128143#31128143", "title": "How can I use sed (or bash / perl / awk) to pull out a substring and write it to a new column?", "body": "<p>In native bash, assuming that the URL is in the third column of the file, and that we don't need to deal with columns containing literal <code>,</code>s in their data:</p>\n\n<pre><code>while IFS=, read first second url rest; do\n    url_piece=${url#*\"?\"*\"?\"}    # trim everything up to the second \"?\"\n    url_piece=${url_piece%%\"?\"*} # trim everything after the first \"?\" in what's left\n\n    # print variables with commas after them...\n    printf -v out '%s,' \"$first\" \"$second\" \"$url\" \"$rest\" \"$url_piece\"\n    # ...and print to stdout without the last comma.\n    printf '%s\\n' \"${out%,}\"\ndone &lt;in.csv &gt;out.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435628443, "creation_date": 1435628443, "answer_id": 31128208, "question_id": 31126728, "link": "https://stackoverflow.com/questions/31126728/how-can-i-use-sed-or-bash-perl-awk-to-pull-out-a-substring-and-write-it-to/31128208#31128208", "title": "How can I use sed (or bash / perl / awk) to pull out a substring and write it to a new column?", "body": "<p>If I understand you correctly that you want to pull the text from between the 2nd and 3rd <code>?</code> and append that to the end of the string, then a short script will do:</p>\n\n<pre><code>#!/bin/bash\n\ninfile=${1:-/dev/stdin}\n\nwhile read -r line; do\n    printf \"%s %s\\n\" \"$line\" $(sed -e 's/^.*[?].*[?]\\(.*\\)[?].*$/\\1/' &lt;&lt;&lt;\"$line\")\ndone &lt;\"$infile\"\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ bash parseurl.sh url.txt\nhttps://www.website.com?utm_campaign=blahblahblah&amp;blahblah?SUBSTRING?moreblahblahblahs SUBSTRING\n</code></pre>\n\n<p>If I didn't understand correctly, then let me know and I'll rework it.</p>\n"}], "owner": {"reputation": 93, "user_id": 3140450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NYj86.jpg?s=128&g=1", "display_name": "Katie F", "link": "https://stackoverflow.com/users/3140450/katie-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "closed_date": 1435672843, "accepted_answer_id": 31128047, "answer_count": 5, "score": -6, "last_activity_date": 1435628443, "creation_date": 1435617450, "last_edit_date": 1435617562, "question_id": 31126728, "link": "https://stackoverflow.com/questions/31126728/how-can-i-use-sed-or-bash-perl-awk-to-pull-out-a-substring-and-write-it-to", "closed_reason": "Needs details or clarity", "title": "How can I use sed (or bash / perl / awk) to pull out a substring and write it to a new column?", "body": "<p>I have a string in a csv file (a URL) that looks similar to this:</p>\n\n<pre><code>https://www.website.com?utm_campaign=blahblahblah&amp;blahblah?SUBSTRING?moreblahblahblahs\n</code></pre>\n\n<p>I want to pull out the substring that's between the second and third question marks and write it to a new column.</p>\n\n<p>Any help is appreciated!  Thanks!</p>\n"}, {"tags": ["git", "perl", "unix"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1435668669, "post_id": 31125687, "comment_id": 50288054, "body": "<a href=\"https://metacpan.org/pod/Git::Hooks\" rel=\"nofollow noreferrer\">Git::Hooks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1435613402, "post_id": 31125783, "comment_id": 50264228, "body": "Where is that module located?  Online somewhere?  I&#39;m googling and coming up with nothing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1435613840, "post_id": 31125783, "comment_id": 50264428, "body": "Hopefully, in your systems package manager (<code>apt-get</code>? <code>yum</code>?). You should avoid installing modules for your system by any other means, but the risk of harm is mininal. If your package manager doesn&#39;t have it, <code>sudo cpan Git::Hook</code> should be fine. This will get it from CPAN, the repository for Perl modules."}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1435614044, "post_id": 31125783, "comment_id": 50264493, "body": "I found the module here <a href=\"https://github.com/gnustavo/Git-Hooks/blob/next/lib/Git/Hooks.pm\" rel=\"nofollow noreferrer\">github.com/gnustavo/Git-Hooks/blob/next/lib/Git/Hooks.pm</a> since it was from a tutorial I was following.  I can&#39;t find it on CPAN, though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1435614208, "post_id": 31125783, "comment_id": 50264569, "body": "Like the first two times you asked, I&#39;m going to recommend using your system&#39;s package manager (with <code>cpan</code> as a fallback)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1435620192, "post_id": 31125783, "comment_id": 50266594, "body": "@MrPickles: <a href=\"http://search.cpan.org/~gnustavo/Git-Hooks-1.3.0/lib/Git/Hooks.pm\" rel=\"nofollow noreferrer\">Here it is on CPAN</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435620401, "post_id": 31125783, "comment_id": 50266657, "body": "I meant <code>cpan</code> the command line tool. The full command was posted above."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1435613713, "last_edit_date": 1435613713, "creation_date": 1435612857, "answer_id": 31125783, "question_id": 31125687, "link": "https://stackoverflow.com/questions/31125687/git-cant-locate-git-hooks-pm/31125783#31125783", "title": "Git: Can&#39;t locate Git/Hooks.pm", "body": "<p>It appears that your program includes <code>use Git::Hooks;</code>, but that you didn't install the module. You should use your system's package manager to install it if you're using your system perl.</p>\n"}], "owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "closed_date": 1435668571, "answer_count": 1, "score": -1, "last_activity_date": 1435613713, "creation_date": 1435612454, "question_id": 31125687, "link": "https://stackoverflow.com/questions/31125687/git-cant-locate-git-hooks-pm", "closed_reason": "Duplicate", "title": "Git: Can&#39;t locate Git/Hooks.pm", "body": "<p>Writing a driver script for my git hooks in Perl.  Unfortunately, I keep getting this syntax error that doesn't make sense.</p>\n\n<pre><code>Can't locate Git/Hooks.pm in @INC (@INC contains: /path/to/myLibraries.)\n</code></pre>\n\n<p>I understand it is looking for Git/Hooks.pm in my include directories.  Unfortunately, I only see the Git directory, but no Hooks.pm file.  </p>\n\n<p>I tried finding <code>Hooks.pm</code> on GitHub (i.e. source code of Git), but can't even find it there.</p>\n\n<p><a href=\"https://github.com/git/git/tree/master/perl/Git\" rel=\"nofollow\">https://github.com/git/git/tree/master/perl/Git</a></p>\n\n<p>The only thing I see in the library I am using is <code>I18N.pm IndexInfo.pm SVN SVN.pm</code>, which is exactly what I see for git's source code.</p>\n\n<p>Does this file even exist...anywhere?  If so, where and when I find it can I just copy it into the directory and call it good?</p>\n"}, {"tags": ["java", "perl", "encryption", "blowfish"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435613630, "post_id": 31125672, "comment_id": 50264340, "body": "Tip: Using <code>encode_base64($ciphertext, &#39;&#39;)</code> instead of <code>encode_base64($ciphertext)</code> prevents line feeds from being added in the middle."}], "answers": [{"comments": [{"owner": {"reputation": 352, "user_id": 3614327, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d4c959be35985d5e02eed44e072d599?s=128&d=identicon&r=PG&f=1", "display_name": "alvaroc", "link": "https://stackoverflow.com/users/3614327/alvaroc"}, "edited": false, "score": 0, "creation_date": 1435614020, "post_id": 31125917, "comment_id": 50264486, "body": "Thanks ikegami. I got confused about the -keysize parameter <a href=\"http://search.cpan.org/~lds/Crypt-CBC-2.33/CBC.pm\" rel=\"nofollow noreferrer\">here</a>:    -keysize        Force the cipher keysize to the indicated number of bytes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 352, "user_id": 3614327, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d4c959be35985d5e02eed44e072d599?s=128&d=identicon&r=PG&f=1", "display_name": "alvaroc", "link": "https://stackoverflow.com/users/3614327/alvaroc"}, "edited": false, "score": 0, "creation_date": 1435635485, "post_id": 31125917, "comment_id": 50270009, "body": "Blowfish expects a wide range of keys sizes (8..56) since it really expects a passphrase. Crypt::CBC expects that each algorithm always wants a key of the same size, so it asks the algorithm what size it wants in order to validate the key provided. The backend, Crypt::Blowfish, needs to tells Crypt::CBC something, so it says it expects a key of size 0. You must override Crypt::CBC&#39;s check by saying a <code>-keysize</code> of the length you provided is expected. Crypt::Blowfish still validates the size of the key."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1435613422, "creation_date": 1435613422, "answer_id": 31125917, "question_id": 31125672, "link": "https://stackoverflow.com/questions/31125672/difference-in-blowfish-encryption-between-perl-and-java/31125917#31125917", "title": "Difference in blowfish encryption between Perl and Java", "body": "<p>In Java, you use</p>\n\n<pre><code>String Key = \"1234567890\";\n</code></pre>\n\n<p>In Perl, you use </p>\n\n<pre><code>my $key = \"1234567890\\0\\0\\0\\0\\0\\0\";\n</code></pre>\n\n<p>If you actually used the same key, you'd get the same result.</p>\n\n<pre><code>my $key = \"1234567890\";\n\n-literal_key =&gt; 1, -key =&gt; $key, -keysize =&gt; length($key)\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 3614327, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d4c959be35985d5e02eed44e072d599?s=128&d=identicon&r=PG&f=1", "display_name": "alvaroc", "link": "https://stackoverflow.com/users/3614327/alvaroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 2, "accepted_answer_id": 31125917, "answer_count": 1, "score": 2, "last_activity_date": 1435613422, "creation_date": 1435612392, "question_id": 31125672, "link": "https://stackoverflow.com/questions/31125672/difference-in-blowfish-encryption-between-perl-and-java", "title": "Difference in blowfish encryption between Perl and Java", "body": "<p>We\u00b4re writing and application in both Java and Perl storing encrypted CBC Blowfish in the same database. Both will be encrypting and decrypting, so they need to be able to get the plain text that the other encrypted. </p>\n\n<p>a) I went to some online tools to encrypt some text with CBC and IV vector. One such site <a href=\"http://sladex.org/blowfish.js/\" rel=\"nofollow\">is this</a><br>\nplaintext  HELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOU<br>\nkey 1234567890<br>\nsince the site does not allow to enter the IV vector we assumed it would be zeroed which turned out to be right:  </p>\n\n<p><em>ciphertext</em><br>\nP4mtWDzIIc2x/Taqc9T46A3T0aTCelmANBRf6RgEzSF29DLdMRiEhck98jac04+Tg0q7HpLalow0J6nZNUW+HWtRvYmLnt92UuIZ1ckaBEa9TSdR2YP9rQ==  </p>\n\n<p>b) The following Java code does the encryption: </p>\n\n<pre><code>import java.security.InvalidAlgorithmParameterException;  \nimport java.security.InvalidKeyException;  \nimport java.security.NoSuchAlgorithmException;  \n\nimport javax.crypto.BadPaddingException;\nimport javax.crypto.Cipher;\nimport javax.crypto.IllegalBlockSizeException;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.spec.*;\n\nimport org.apache.commons.codec.binary.*;\n\npublic class simple {\n\n public static void main(String[] args) {\n   String Key = \"1234567890\";\n   byte[] KeyData = Key.getBytes(); \n   String IV    = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n   try { \n     SecretKeySpec KS = new SecretKeySpec(KeyData, \"Blowfish\");\n     // modo CBC\n     Cipher cipher = Cipher.getInstance(\"Blowfish/CBC/PKCS5Padding\");\n     try {\n       try {    \n         IvParameterSpec IVparam = new javax.crypto.spec.IvParameterSpec(IV.getBytes());                     \n         cipher.init(Cipher.ENCRYPT_MODE, KS,IVparam);\n       } catch (InvalidAlgorithmParameterException e) {System.out.println(e);};  \n     } catch (InvalidKeyException e) {System.out.println(e);};  \n\n    // get the text to encrypt\n    String inputText = \"HELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOU\";\n\n    // encrypt message\n    try {\n      byte[] encrypted = cipher.doFinal(inputText.getBytes());\n      Base64 b64 = new Base64();\n      System.out.println(\"Java Ciphertext\\n\" + b64.encodeAsString(encrypted));\n    } catch (IllegalBlockSizeException e) {System.out.println(e);}\n    catch (BadPaddingException e) {System.out.println(e);}  \n   }  \n   catch (NoSuchPaddingException e) {}\n   catch (NoSuchAlgorithmException e) {}\n }   \n\n}\n</code></pre>\n\n<p>The output is:<br>\n<em>Java Ciphertext</em><br>\nP4mtWDzIIc2x/Taqc9T46A3T0aTCelmANBRf6RgEzSF29DLdMRiEhck98jac04+Tg0q7HpLalow0J6nZNUW+HWtRvYmLnt92UuIZ1ckaBEaLkpDfHZfp8g==</p>\n\n<p>As you can see both outputs are \"almost\" the same (Maybe due to padding but that's no relevant at the moment. It\u00b4s strange however since the plaintext is intentionally 80 caracters to avoid padding)</p>\n\n<p>c) We wrote this small Perl program:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Crypt::Blowfish;\nuse MIME::Base64;\nuse Crypt::CBC;\n\nmy $cipher = Crypt::CBC-&gt;new(-key =&gt; \"1234567890\\0\\0\\0\\0\\0\\0\", -cipher =&gt; \"Blowfish\", -iv =&gt; \"\\0\\0\\0\\0\\0\\0\\0\\0\", -literal_key =&gt; 1, -header =&gt; \"none\", -keysize =&gt; 16);\nmy $ciphertext = $cipher-&gt;encrypt(\"HELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOU\");\n\nprint \"Perl Base64: \",encode_base64($ciphertext),\"\\n\"; \nprint \"Descrifrado: \", $cipher-&gt;decrypt($ciphertext); \n</code></pre>\n\n<p>But this program produce the following:<br>\n<em>Perl Base64:</em>   AW0AYJfIp1Lg5L+zTM0nZj07U6ETlxxIg3CKiZItg8wkA1Jqx79ZckzWfYwzN26ZPyCDnlfh0b37\n0ZK61ng8MaMc9RFgtuXTeYLBOJC7LGYCHlMddmPwUQ==<br>\n<em>Descrifrado:</em> HELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOUHELLOYOU</p>\n\n<p>Which is not the same as the Java program (which is consistent with the online tools) although it can get the plain text correctly</p>\n\n<p>So maybe we are not prompting the same parameters in the object creation. In particular:  </p>\n\n<pre><code>my $cipher = Crypt::CBC-&gt;new(-key =&gt; \"1234567890\\0\\0\\0\\0\\0\\0\", -cipher =&gt; \"Blowfish\", -iv =&gt; \"\\0\\0\\0\\0\\0\\0\\0\\0\", -literal_key =&gt; 1, -header =&gt; \"none\", -keysize =&gt; 16);\n</code></pre>\n\n<p>After inspecting the code my only guess is that Java and Perl use different key size, so my question is</p>\n\n<p>\u00bfWhat key size does Java use? After browsing the source code for <em>SecretKeySpec</em> <a href=\"http://developer.classpath.org/doc/javax/crypto/spec/SecretKeySpec-source.html\" rel=\"nofollow\">here</a> we could not determine such size so 128 bits was assumed, hence the 16 size (16 x 8 = 128) and the \\0 padding of the key in the Perl code.  </p>\n\n<p>Of course, If you can spot something else wrong, it would be greatly appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1435613022, "post_id": 31124833, "comment_id": 50264052, "body": "It&#39;s hard to figure out what you&#39;re doing. It looks like you&#39;re making something complicated out of something extremely simple. The dollar global vars, are, well global. Avoid using them. Also, if you need to control the pos() of a variable, that can be done as well."}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435610662, "post_id": 31125216, "comment_id": 50262948, "body": "You might be right, but this is not the question :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435610740, "post_id": 31125216, "comment_id": 50262980, "body": "@nowox &quot;So, I am wondering if I can simply: 1. avoid the second regex to clobber the regex variables, or...&quot; I showed you how to do #1."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435610899, "post_id": 31125216, "comment_id": 50263058, "body": "Well, I agree, you may have answered my first point. Actually this YAML example is bullshit, I just wanted to came across a simple example with to nested regexes."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435611218, "post_id": 31125216, "comment_id": 50263217, "body": "@nowox If you&#39;re trying to solve a different problem, please show <i>that</i> problem, not some contrived example. The answer to your contrived example is &quot;don&#39;t use <code>$`</code> and friends because they&#39;re not necessary and over-complicate the code.&quot;"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435612288, "post_id": 31125216, "comment_id": 50263707, "body": "@nowox I still think this is an XY problem, but you can always localize the variables to a block: <code>perl -wE &#39;$_ = &quot;foo bar&quot;; &#47;foo&#47;; { local $&amp;; &#47;bar&#47;; say $&amp; } say $&amp;&#39;</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1435625464, "post_id": 31125216, "comment_id": 50267864, "body": "@ThisSuitIsBlackNot: unnecessary; see my answer"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 0, "last_activity_date": 1435610603, "creation_date": 1435610603, "answer_id": 31125216, "question_id": 31124833, "link": "https://stackoverflow.com/questions/31124833/store-all-regex-related-variables-in-one-shot/31125216#31125216", "title": "Store all regex related variables in one shot", "body": "<p>I'm not familiar with handlebars, but it seems like your code would be simplified by using an optional non-capturing group:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nwhile (&lt;DATA&gt;) {\n    my ($tag, $helper, $params) = $_ =~ /{{ (\\w+) (?: \\s+ (\\w+) \\s+ (\\w+) )? }}/gx;\n\n    say $helper if defined $helper;\n    say $params if defined $params;\n}\n\n__DATA__\n{{foo}}\n{{foo bar baz}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1493, "user_id": 4399474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071244d72e3a6f73f9329753619eeb7c?s=128&d=identicon&r=PG", "display_name": "user52889", "link": "https://stackoverflow.com/users/4399474/user52889"}, "is_accepted": true, "score": 3, "last_activity_date": 1435613697, "last_edit_date": 1435613697, "creation_date": 1435612301, "answer_id": 31125652, "question_id": 31124833, "link": "https://stackoverflow.com/questions/31124833/store-all-regex-related-variables-in-one-shot/31125652#31125652", "title": "Store all regex related variables in one shot", "body": "<p><a href=\"https://metacpan.org/pod/Regexp::Result\" rel=\"nofollow\">Regexp::Result</a> captures <code>$1</code>, <code>$2</code>, <code>pos</code>, and all the good punctuation variables, and looks like exactly what you need. (It does not capture the inefficient punctuation variables <code>$&amp;</code>, <code>$'</code> and dollar-backtick, because if you use them anywhere they will cause all your regexp matches to incur a performance penalty.)</p>\n\n<p>For the <code>while</code> loop you may also find <a href=\"https://metacpan.org/pod/Regexp::Flow\" rel=\"nofollow\">Regexp::Flow</a> useful depending on what exactly you end up doing in that loop. It creates the Regexp::Result objects for you and passes them into a coderef.</p>\n\n<p><em>Disclosure: I'm the author of both modules</em></p>\n\n<p>Instead of the three inefficient variables, if you need them, you can use <code>${^MATCH}</code>, <code>${^PREMATCH}</code>, <code>${^POSTMATCH}</code>, provided you use the <code>/p</code> flag when you execute your regular expression. Using Regexp::Result, you can get them with <code>$rr-&gt;match</code>, etc.</p>\n\n<p>For completeness, if you just need the numbered captures and nothing else, <a href=\"https://metacpan.org/pod/Data::Munge\" rel=\"nofollow\">Data::Munge</a> provides a function <code>submatches</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1435625345, "creation_date": 1435625345, "answer_id": 31127822, "question_id": 31124833, "link": "https://stackoverflow.com/questions/31124833/store-all-regex-related-variables-in-one-shot/31127822#31127822", "title": "Store all regex related variables in one shot", "body": "<p>The regex variables are localized to the block they appear in, so just nest your second regex in a block:</p>\n\n<pre><code>$_ = 'b c';\n/(\\w)\\s(\\w)/; # First regex\n{\n    say \"Found a b\" if $1 =~ /b/;\n}\nsay \"$1, $2\" # Match from the first regex\n</code></pre>\n\n<p>or, minimally, make it <code>...if do { $1 =~ /b/ };</code>.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 31125652, "answer_count": 3, "score": 1, "last_activity_date": 1435625345, "creation_date": 1435609220, "last_edit_date": 1435611655, "question_id": 31124833, "link": "https://stackoverflow.com/questions/31124833/store-all-regex-related-variables-in-one-shot", "title": "Store all regex related variables in one shot", "body": "<h2>In short</h2>\n\n<p>How can I preserve regex variables such as <code>$+</code>, <code>$-</code>, <code>$&amp;</code> or <code>$'</code> across the evaluation of another regex? </p>\n\n<pre><code>/(\\w)\\s(\\w)/ # First regex\nsay \"Found a b\" if $1 =~ /b/;\nsay \"$1, $2\" # Match from the first regex\n</code></pre>\n\n<h2>In details</h2>\n\n<p>For a small <a href=\"/questions/tagged/handlebars\" class=\"post-tag\" title=\"show questions tagged &#39;handlebars&#39;\" rel=\"tag\">handlebars</a> parser I would like to evaluate two cascaded <a href=\"/questions/tagged/regex\" class=\"post-tag\" title=\"show questions tagged &#39;regex&#39;\" rel=\"tag\">regex</a>. The first one identifies a tag and the second one gets the nature of the tag. </p>\n\n<p>So I wrote this:</p>\n\n<pre><code>my $out = '';\nwhile(/\\{\\{(?&lt;tag&gt;.*?)\\}\\}/g) {   \n    if($+{tag} =~ /^\\#(?&lt;helper&gt;\\w+)\\s+(?&lt;parameters&gt;.*)$/) {\n        # Do something\n    }\n\n    $_ = $`.($data{$+{tag}} // $+{tag}).$';\n}\n</code></pre>\n\n<p>In this particular case I want to use the result from the first regex after the execution of another regex which clobber the regexes variables (<code>$+</code>, <code>$-</code>, <code>$&amp;</code>, <code>$'</code>, ...).</p>\n\n<p>I know I can make this example use an intermediate storage like this below. However this is not the primary topic of this question. </p>\n\n<pre><code>push @regex, {match =&gt; $&amp;, prematch =&gt; $`, #... \n};\n</code></pre>\n\n<blockquote>\n  <p>So, I am wondering if I can simply: </p>\n  \n  <ol>\n  <li>avoid the second regex to clobber the regex variables, or</li>\n  <li>save all the related regex variables in one shot?</li>\n  </ol>\n</blockquote>\n\n<p>I am not discussing the implementation or the method used here. Only the above question matters. </p>\n\n<h2>For the curious only</h2>\n\n<p>Here is how I parse my <a href=\"/questions/tagged/mustache\" class=\"post-tag\" title=\"show questions tagged &#39;mustache&#39;\" rel=\"tag\">mustache</a> tags. The next step will be to parse helpers, lists and hash keys and keep everything as simple as possible...</p>\n\n<pre><code>my %data = ( name =&gt; 'John Doe', nick =&gt; 'Nikita', number =&gt; 42, );\n\n$_ = do {local $/; &lt;DATA&gt;};\n$_ = $`.($data{$+{tag}} // $+{tag}).$' while /\\{\\{(?&lt;tag&gt;.*?)\\}\\}/g;\nsay;\n\n__DATA__\nHello {{name}}, how are you doing?\nI know your nickname is {{nick}} your favorite number is {{number}}.\n</code></pre>\n"}, {"tags": ["perl", "function", "object", "hash", "module"], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1435598283, "post_id": 31121210, "comment_id": 50256084, "body": "<code>return;</code> or <code>return ();</code> may be a better choice, and custom filter could be more efficient only for <i>very</i> large hashes?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1435598380, "post_id": 31121210, "comment_id": 50256134, "body": "@\u0421\u0443\u0445\u043e\u043927, We&#39;re approximating <code>$hash{$key}</code>, so I used the same semantics as <code>$hash{$key}</code>. Well, if the filter was written in XS, it would always be more efficient."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1435596733, "last_edit_date": 1435596733, "creation_date": 1435596522, "answer_id": 31121210, "question_id": 31121122, "link": "https://stackoverflow.com/questions/31121122/hash-element-from-an-objects-return-in-a-single-string/31121210#31121210", "title": "HASH element from an object&#39;s return in a single string", "body": "<p>It's impossible to return a hash. Subs can only return a list of scalars. You are assigning that list of scalars to an existing hash <code>my %hash</code> and getting an element of that hash.</p>\n\n<p>You could disguise the fact that you are creating a new hash by using an anonymous hash:</p>\n\n<pre><code>my $val = { $m-&gt;getKeyValPairs() }-&gt;{$key};\n</code></pre>\n\n<p>Alternatively, a custom filter could be more efficient:</p>\n\n<pre><code>sub find_val {\n   my $target_key = shift;\n   while (@_) {\n      my $key = shift;\n      my $val = shift;\n      return $val if $key eq $target_key;\n   }\n\n   return undef;\n}\n\nmy $val = find_val $key, $m-&gt;getKeyValPairs();\n</code></pre>\n\n<p>But the best option would be to have the method return a reference to a hash instead. Then, you wouldn't have to perform the wasteful activity of creating a hash. You'd simply use the following:</p>\n\n<pre><code>$m-&gt;getHashRef()-&gt;{$key}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 466, "user_id": 4895979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/uFYyR.png?s=128&g=1", "display_name": "Arsenii", "link": "https://stackoverflow.com/users/4895979/arsenii"}, "edited": false, "score": 0, "creation_date": 1435596922, "post_id": 31121244, "comment_id": 50255378, "body": "Thanks! I&#39;ve just replaced a return with a reference and it works and moreover looks great now! Thanks!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 5, "last_activity_date": 1435596643, "creation_date": 1435596643, "answer_id": 31121244, "question_id": 31121122, "link": "https://stackoverflow.com/questions/31121122/hash-element-from-an-objects-return-in-a-single-string/31121244#31121244", "title": "HASH element from an object&#39;s return in a single string", "body": "<p>If a sub does <code>return %hash</code>, it actually returns a list of keys and values (alternating).  You can put it back in a hash and get a specific key with:</p>\n\n<pre><code>print +{ $m-&gt;getHash() }-&gt;{needed_element_key};\n</code></pre>\n\n<p>(The leading <code>+</code> is needed to prevent perl from thinking the <code>{</code> is a block returning a filehandle to print to.)</p>\n\n<p>But you are better off just returning a hash reference.</p>\n"}], "owner": {"reputation": 466, "user_id": 4895979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/uFYyR.png?s=128&g=1", "display_name": "Arsenii", "link": "https://stackoverflow.com/users/4895979/arsenii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 31121210, "answer_count": 2, "score": 3, "last_activity_date": 1435596733, "creation_date": 1435596224, "question_id": 31121122, "link": "https://stackoverflow.com/questions/31121122/hash-element-from-an-objects-return-in-a-single-string", "title": "HASH element from an object&#39;s return in a single string", "body": "<p>I have a module <strong>Module.pm</strong> with function <code>getHash()</code> which returns, as you guessed, a hash of data)). We all know well how to get an element form that hash, using a standard model:</p>\n\n<pre><code>use Module;\nmy $m = new Module;\nmy %hash = $m-&gt;getHash();\nprint $hash{needed_element's_key};\n</code></pre>\n\n<p>everything is ok.\nBut what if you need to write two last strings in a single string <strong>WITHOUT</strong> initializing a new HASH (and occupying a memory for a whole hash, using just one element)?</p>\n\n<p>Is it possible to do so somehow? Like, say, <code>$m-&gt;getHash()-&gt;{needed_element's_key};</code>\nOf course, the given example does not work.\nAny suggestions?\nThanks!</p>\n"}, {"tags": ["perl", "cygwin", "cpan"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435591358, "post_id": 31118721, "comment_id": 50252084, "body": "I think that&#39;s suppose to be <code>... -exec &#47;bin&#47;rebase ...</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435591619, "post_id": 31118721, "comment_id": 50252242, "body": "I don&#39;t know where that command is coming from."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435591658, "post_id": 31118721, "comment_id": 50252268, "body": "What version of ExtUtils::MakeMaker do you have?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435596066, "post_id": 31118721, "comment_id": 50254872, "body": "That&#39;s the newest. Sorry, but I don&#39;t have time to help you debug this. But if the command is in <code>Makefile</code>, just add the missing <code>-exec</code> and run <code>make install</code> again (as a one-time fix)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1435605123, "post_id": 31118721, "comment_id": 50259774, "body": "Actually, the <code>-</code> indicates it&#39;s suppose to be <code>... | &#47;bin&#47;rebase ...</code>"}, {"owner": {"reputation": 404, "user_id": 3320478, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00e9417c21fff19050af08dd80976cdd?s=128&d=identicon&r=PG&f=1", "display_name": "chenino", "link": "https://stackoverflow.com/users/3320478/chenino"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435652610, "post_id": 31118721, "comment_id": 50277179, "body": "worked for now, but i really would like to know, why cpan constantly fails like this"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1435670682, "last_edit_date": 1435670682, "creation_date": 1435670368, "answer_id": 31139404, "question_id": 31118721, "link": "https://stackoverflow.com/questions/31118721/installing-cpan-modules-in-cygwin-fails/31139404#31139404", "title": "Installing cpan Modules in cygwin fails", "body": "<p>My update-to-date Cygwin comes with</p>\n\n<ul>\n<li>ExtUtils::MakeMaker 6.57_05</li>\n<li>ExtUtils::MM_Cygwin 6.57_07</li>\n</ul>\n\n<p>That's odd for a few reason, but what we care about is that version of MM_Cygwin is buggy.</p>\n\n<pre><code>sub install {\n    my($self, %attribs) = @_;\n    my $s = ExtUtils::MM_Unix::install($self, %attribs);\n    return '' unless $s;\n    return $s unless %{$self-&gt;{XS}};\n\n    my $INSTALLDIRS = $self-&gt;{INSTALLDIRS};\n    my $INSTALLLIB = $self-&gt;{\"INSTALL\". ($INSTALLDIRS eq 'perl' ? 'ARCHLIB' : uc($INSTALLDIRS).\"ARCH\")};\n    my $dop = \"\\$\\(DESTDIR\\)$INSTALLLIB/auto/\";\n    my $dll = \"$dop/$self-&gt;{FULLEXT}/$self-&gt;{BASEEXT}.$self-&gt;{DLEXT}\";\n    $s =~ s|^(pure_install :: pure_\\$\\(INSTALLDIRS\\)_install\\n\\t)\\$\\(NOECHO\\) \\$\\(NOOP\\)\\n|$1\\$(CHMOD) \\$(PERM_RWX) $dll\\n\\t/bin/find $dop -xdev -name \\\\*.$self-&gt;{DLEXT} /bin/rebase -sOT -\\n|m if (( $Config{myarchname} eq 'i686-cygwin') and not ( exists $ENV{CYGPORT_PACKAGE_VERSION} ));\n    $s;\n}\n</code></pre>\n\n<p>You could add the missing <code>|</code> to <code>/usr/lib/perl5/5.14/ExtUtils/MM_Cygwin.pm</code> as a quick permanent fix.</p>\n\n<hr>\n\n<p>Alternatively, Cygwin has a package named <code>perl-ExtUtils-MakeMaker</code> that upgrade the distribution to 7.04_01.</p>\n\n<p>...Except the bug is still present there. If you have this package installed, the file to fix is <code>/usr/lib/perl5/vendor_perl/5.14/ExtUtils/MM_Cygwin.pm</code>.</p>\n\n<hr>\n\n<p>Alternatively, you can upgrade ExtUtils::MakeMaker to the latest dev release (which uses a completely different command).</p>\n\n<pre><code>cpan B/BI/BINGOS/ExtUtils-MakeMaker-7.05_22.tar.gz\n</code></pre>\n"}], "owner": {"reputation": 404, "user_id": 3320478, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00e9417c21fff19050af08dd80976cdd?s=128&d=identicon&r=PG&f=1", "display_name": "chenino", "link": "https://stackoverflow.com/users/3320478/chenino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 31139404, "answer_count": 1, "score": 1, "last_activity_date": 1435670682, "creation_date": 1435589192, "question_id": 31118721, "link": "https://stackoverflow.com/questions/31118721/installing-cpan-modules-in-cygwin-fails", "title": "Installing cpan Modules in cygwin fails", "body": "<p>I am trying to install different Perl Modules from CPAN in a cygwin-32bit enviroment and always get Errors of the same kind. This one is from trying to install Net::SSLeay, did make, install and tried force install too, nothing seemed to work. </p>\n\n<pre><code>drmariad@drmariad-MOBL ~/.cpan/build/Net-SSLeay-1.70-eDSzRW$ make install\n\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\nchmod 755 /usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int/auto//Net/SSLeay/SSLeay.dll\n/bin/find /usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int/auto/ -xdev -name \\*.dll /bin/rebase -sOT -\n/bin/find: paths must precede expression: /bin/rebase\nUsage: /bin/find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec] [path...] [expression]\nMakefile:731: recipe for target 'pure_install' failed\nmake: *** [pure_install] Error 1\n</code></pre>\n\n<p>Most of the time it is the bin/find fails message i get in the installations, but i don't know how to change that behaviour. I got errors and failures with most of the modules i tryed to install.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 2, "creation_date": 1435588847, "post_id": 31118556, "comment_id": 50250231, "body": "According to the error message, you don&#39;t have the JSON module installed."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435588869, "post_id": 31118556, "comment_id": 50250248, "body": "How are you &#39;running&#39; perl in your browsers? But the error message says you don&#39;t have <code>JSON</code> installed. Try installing that."}, {"owner": {"reputation": 2547, "user_id": 319625, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2249a157f31c182502c41e39fe3f0e02?s=128&d=identicon&r=PG", "display_name": "skeniver", "link": "https://stackoverflow.com/users/319625/skeniver"}, "edited": false, "score": 0, "creation_date": 1435591587, "post_id": 31118556, "comment_id": 50252220, "body": "Thanks. It&#39;s a web host and so can&#39;t install JSON, but can I download it myself and &#39;use lib&#39; or something similar from within my script?"}], "answers": [{"comments": [{"owner": {"reputation": 2547, "user_id": 319625, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2249a157f31c182502c41e39fe3f0e02?s=128&d=identicon&r=PG", "display_name": "skeniver", "link": "https://stackoverflow.com/users/319625/skeniver"}, "edited": false, "score": 0, "creation_date": 1435591626, "post_id": 31118768, "comment_id": 50252245, "body": "Thanks. But why would it run OK from one browser (outputting JSON correctly) and not in another?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2547, "user_id": 319625, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2249a157f31c182502c41e39fe3f0e02?s=128&d=identicon&r=PG", "display_name": "skeniver", "link": "https://stackoverflow.com/users/319625/skeniver"}, "edited": false, "score": 0, "creation_date": 1435591885, "post_id": 31118768, "comment_id": 50252406, "body": "Well, do you get the same <code>use JSON;</code> statement of the same script in all cases? If so, the search path can be influenced by environment variables. Add <code>BEGIN { print(STDERR &quot;$_: $ENV{$_}\\n&quot;) for sort grep &#47;^PERL&#47;, keys %ENV; }</code> before <code>use JSON;</code> and report what it ouputs."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1435589309, "creation_date": 1435589309, "answer_id": 31118768, "question_id": 31118556, "link": "https://stackoverflow.com/questions/31118556/perl-script-run-in-some-browsers-but-not-others/31118768#31118768", "title": "Perl script run in some browsers but not others", "body": "<p>The error you showed is an inability to locate <code>JSON.pm</code> in response to doing <code>use JSON;</code> or <code>require JSON;</code>. Install the module using your system's package manager.</p>\n"}], "owner": {"reputation": 2547, "user_id": 319625, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2249a157f31c182502c41e39fe3f0e02?s=128&d=identicon&r=PG", "display_name": "skeniver", "link": "https://stackoverflow.com/users/319625/skeniver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1435589309, "creation_date": 1435588770, "question_id": 31118556, "link": "https://stackoverflow.com/questions/31118556/perl-script-run-in-some-browsers-but-not-others", "title": "Perl script run in some browsers but not others", "body": "<p>I have a perl script running on a webserver which appears to run fine from some browsers, but not in others. On machine A it runs in Firefox but not in Chrome or Safari. On machine B it runs in Chrome but not in Firefox or Safari. Here is a screen shot of two browsers:\n<img src=\"https://i.stack.imgur.com/3GIlN.png\" alt=\"enter image description here\"></p>\n\n<p>Any ideas as to why this might happen?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5049340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/595c1bc0349c50f140389be9b36a1ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user5049340", "link": "https://stackoverflow.com/users/5049340/user5049340"}, "edited": false, "score": 0, "creation_date": 1436278108, "post_id": 31254528, "comment_id": 50536190, "body": "sorry i probably should have commented on this earlier but i found the problem, all you need to do is change the imap-&gt;put to imap-&gt;copy to put a duplicate message into another inbox and then imap-&gt;delete the original message, I then added a whole bunch of other crap to the code but that was the answer to my original question thanks anyway."}], "tags": [], "owner": {"reputation": 359, "user_id": 1001500, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/eCNDe.png?s=128&g=1", "display_name": "gfunk", "link": "https://stackoverflow.com/users/1001500/gfunk"}, "is_accepted": false, "score": 0, "last_activity_date": 1436212565, "creation_date": 1436212565, "answer_id": 31254528, "question_id": 31117801, "link": "https://stackoverflow.com/questions/31117801/moving-gmail-messages-with-netimapsimple/31254528#31254528", "title": "Moving gmail messages with Net::IMAP::Simple", "body": "<p>I had to strip down my code, but below is the gist of it. Works for me before I cut it out and pasted here, lemme know if it works else i'll edit it</p>\n\n<pre><code>use Mail::IMAPClient;\nuse Email::MIME::Attachment::Stripper;\nuse other stuff as needed....\n\n# login\nmy $sock = IO::Socket::SSL-&gt;new(PeerAddr=&gt;'imap.gmail.com',PeerPort=&gt;993);\nmy $imap = Mail::IMAPClient-&gt;new(Socket =&gt; $sock, User =&gt; $user, Password =&gt; $pass, Ignoresizeerrors =&gt; 1);\ndie $imap-&gt;LastError() unless $imap-&gt;IsAuthenticated();\n\n# decoding mime (you can probably skip)\nmy $message = $imap-&gt;message_string(123);\nmy $decoded_mime = \"\";\nmy @decoded_list = MIME::Words::decode_mimewords($message);\nfor(my $i=0; $i&lt;scalar(@decoded_list); ++$i) {\n  my @set = @{$decoded_list[$i]};\n  if(scalar(@set) == 1) {\n    $decoded_mime .= $set[0];\n  }\n  else {\n    eval {\n      Encode::from_to($set[0],$set[1],'utf-8');\n    };\n    if($@) { eval {}; }\n    $decoded_mime .= $set[0];\n  }\n}\n$message = $decoded_mime;\n\n# Strip attachments      \n$mime = Email::MIME::Attachment::Stripper-&gt;new($message);\n$mime = $mime-&gt;message; # convert to regular Email::MIME\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5049340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/595c1bc0349c50f140389be9b36a1ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user5049340", "link": "https://stackoverflow.com/users/5049340/user5049340"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 667, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1436212565, "creation_date": 1435586743, "last_edit_date": 1435609768, "question_id": 31117801, "link": "https://stackoverflow.com/questions/31117801/moving-gmail-messages-with-netimapsimple", "title": "Moving gmail messages with Net::IMAP::Simple", "body": "<p>I am trying to use <a href=\"https://metacpan.org/pod/Net::IMAP::Simple\" rel=\"nofollow\"><code>Net::IMAP::Simple</code></a> to move mail to an <code>old_messages</code> folder after I have read and stripped the attachments from them, but when I do it all of the moved messages are blank and from <em>\"unknown sender\"</em>, and the inbox is unchanged. I've checked around and nobody seems to have had this problem before.</p>\n\n<p>I have also tried this using both <a href=\"https://metacpan.org/pod/Email::Simple\" rel=\"nofollow\"><code>Email::Simple</code></a> and <a href=\"https://metacpan.org/pod/Email::MIME\" rel=\"nofollow\"><code>Email::MIME</code></a> as the <code>$es</code> object passed as an argument in the statement</p>\n\n<pre><code>$imap-&gt;put( 'OLD_MESSAGES', $es, \"\") or warn $imap-&gt;errstr\n</code></pre>\n\n<p>but neither worked.</p>\n\n<p>Here's my code using <code>Email::MIME</code></p>\n\n<pre><code>use strict;\nuse warnings;\n\n# required modules\nuse Net::IMAP::Simple;\nuse Email::MIME;\nuse IO::Socket::SSL;\nuse Email::MIME::Attachment::Stripper;\n\n# fill in your details here\nmy $username = 'usersite.com';\nmy $password = 'password';\nmy $mailhost = 'imap.gmail.com';\n\n# Connect\nmy $imap = Net::IMAP::Simple-&gt;new( $mailhost, port =&gt; 993, use_ssl =&gt; 1, )\n    || die \"Unable to connect to IMAP: $Net::IMAP::Simple::errstr\\n\";\n\n# Log in\nif ( !$imap-&gt;login( $username, $password ) ) {\n    print STDERR \"Login failed: \" . $imap-&gt;errstr . \"\\n\";\n    exit( 64 );\n}\n\n# Look in the the INBOX\nmy $nm = $imap-&gt;select( 'INBOX' );\n\n# How many messages are there?\nmy ( $unseen, $recent, $num_messages ) = $imap-&gt;status();\nprint \"unseen: $unseen, recent: $recent, total: $num_messages\\n\\n\";\n\nmy $filepath = \"C:/Users/doug/Desktop/gmail/\";\n\n## Iterate through unseen messages\nfor ( my $i = 1 ; $i &lt;= $nm ; $i++ ) {\n\n    if ( !$imap-&gt;seen( $i ) ) {\n        next;\n    }\n    else {\n        my $es = Email::MIME-&gt;new( join '', @{ $imap-&gt;get( $i ) } );\n\n        #my $es = Email::MIME-&gt;new( join '', @{ $imap-&gt;top($i) } );\n        my $text        = $es-&gt;body;\n        my $stripper    = Email::MIME::Attachment::Stripper-&gt;new( $es );\n        my @attachments = $stripper-&gt;attachments;\n\n        printf(\n            \"[%03d] %s\\n\\t%s\\n%s\",\n            $i,\n            $es-&gt;header( 'From' ),\n            $es-&gt;header( 'Subject' ), $text\n        );\n        my $l = 0;\n        foreach $_ ( @attachments ) {\n\n            my $fh = IO::File-&gt;new();\n            binmode( $fh );\n            open( $fh, '&gt;', \"$filepath\" . \"$_-&gt;{filename}\" );\n            print $fh \"$_-&gt;{payload}\\n\";\n            $fh-&gt;close;\n\n        }\n        $imap-&gt;put( 'OLD_MESSAGES', $es, \"\" ) or warn $imap-&gt;errstr;\n    }\n}\n\n# Disconnect\n$imap-&gt;quit;\n\nexit;\n</code></pre>\n"}, {"tags": ["excel", "perl", "spreadsheet"], "answers": [{"tags": [], "owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "is_accepted": false, "score": 0, "last_activity_date": 1435589848, "creation_date": 1435589848, "answer_id": 31118959, "question_id": 31116571, "link": "https://stackoverflow.com/questions/31116571/how-to-devide-a-cell-into-multiple-columns-in-excel-using-spreadsheetwriteexce/31118959#31118959", "title": "How to devide a cell into multiple columns in excel using Spreadsheet::WriteExcel?", "body": "<pre><code>my $format = $workbook-&gt;add_format(\n                                    border  =&gt; 6,\n                                    valign  =&gt; 'vcenter',\n                                    align   =&gt; 'center',\n                                  );\n\n$worksheet-&gt;merge_range('A2:A5', '16580', $format);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3949322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f06e4e510ed8dd892a9ce2c1b373200c?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Kumar", "link": "https://stackoverflow.com/users/3949322/vimal-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435589848, "creation_date": 1435583277, "last_edit_date": 1435583541, "question_id": 31116571, "link": "https://stackoverflow.com/questions/31116571/how-to-devide-a-cell-into-multiple-columns-in-excel-using-spreadsheetwriteexce", "title": "How to devide a cell into multiple columns in excel using Spreadsheet::WriteExcel?", "body": "<p>In the below example <code>entity_id</code> and <code>pos</code> are headers and others are values for them.</p>\n\n<pre><code>|   Entity_id   |      pos      |\n|   16580       | code  | count |\n|               | 056   |  2    |\n|               | 101   |  4    |\n|               | 082   |  10   |\n</code></pre>\n\n<p>How can I create the above format using <code>Spreadsheet::WriteExcel</code>?</p>\n"}, {"tags": ["regex", "perl", "perl-module", "regex-lookarounds", "perl-data-structures"], "comments": [{"owner": {"reputation": 1, "user_id": 4653614, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kDfTNuoa4fs/AAAAAAAAAAI/AAAAAAAAAIg/pUzGrzR9Bfo/photo.jpg?sz=128", "display_name": "Gaurav Jain", "link": "https://stackoverflow.com/users/4653614/gaurav-jain"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1435572971, "post_id": 31112948, "comment_id": 50239691, "body": "#!/usr/bin/perl      use strict;     use warnings;      my $dir = &#39;/home/gaurav/Desktop/CSP&#39;;      opendir(DIR, $dir) or die $!;      while (my $file = readdir(DIR)) {          # We only want files         next unless (-f &quot;$dir/$file&quot;);          # Use a regular expression to find files ending in .txt         next unless ($file =~ /\\.pdf$/);          print &quot;$file\\n&quot;;     }      closedir(DIR);     exit 0;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435574539, "post_id": 31112948, "comment_id": 50240602, "body": "I have copied you cored from comment into main text. Please can you check it&#39;s still correct?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1435574683, "post_id": 31112948, "comment_id": 50240700, "body": "What are you having problems with? You already have code to check that the file name ends with &quot;.pdf&quot;. It&#39;s simple to extend the logic to check that the file name starts with &quot;Sample&quot; as well."}, {"owner": {"reputation": 1, "user_id": 4653614, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kDfTNuoa4fs/AAAAAAAAAAI/AAAAAAAAAIg/pUzGrzR9Bfo/photo.jpg?sz=128", "display_name": "Gaurav Jain", "link": "https://stackoverflow.com/users/4653614/gaurav-jain"}, "edited": false, "score": 0, "creation_date": 1435576350, "post_id": 31112948, "comment_id": 50241735, "body": "Actually geetring name i want to make insert in database .i got all name starting with sample that is count 3 .Now i want to use these name to make 3 insert in mysql .Where should i save it to make insert for all three."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435581134, "post_id": 31112948, "comment_id": 50244796, "body": "That is an entirely different question, and probably warrants opening a new one."}], "answers": [{"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 2, "last_activity_date": 1435574289, "last_edit_date": 1435574289, "creation_date": 1435573259, "answer_id": 31113193, "question_id": 31112948, "link": "https://stackoverflow.com/questions/31112948/perl-script-to-read-a-directory-and-having-file-name-started-by-a-particular-nam/31113193#31113193", "title": "Perl script to read a directory and having file name started by a particular name", "body": "<pre><code>my $DirectoryName = '......';\n\nchdir( $DirectoryName ) or die \"Can't change directory: $!\\n\";\nmy @files = glob( \"sample*\");\nfor my $file (@files) {\n  print $file,\"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1435574502, "creation_date": 1435574502, "answer_id": 31113624, "question_id": 31112948, "link": "https://stackoverflow.com/questions/31112948/perl-script-to-read-a-directory-and-having-file-name-started-by-a-particular-nam/31113624#31113624", "title": "Perl script to read a directory and having file name started by a particular name", "body": "<p>I'd suggest that rather than <code>readdir</code> what you really want is <code>glob</code>. This latter expands a pattern in the same way as the shell does, and returns matches. The reason it's particularly useful is that <code>readdir</code> returns file names, where <code>glob</code> returns full paths. (e.g. directory too). </p>\n\n<p>E.g. </p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\nmy $dir = '/home/gaurav/Desktop/CSP';\n\nforeach my $file ( glob ( \"$dir/sample*.pdf\" ) ) {\n    print $file,\"\\n\";\n}\n</code></pre>\n\n<p>if you want to skip any 'non files' there's two approaches:</p>\n\n<pre><code>next unless -f $file; \n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>foreach my $file ( grep { -f $_ } glob ( \"$dir/sample*.pdf\" ) )  {\n</code></pre>\n\n<p>But that's probably a moot point unless you've got directories suffixed <code>.pdf</code> which would be a bit unusual. </p>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1435576380, "last_edit_date": 1435576380, "creation_date": 1435574556, "answer_id": 31113642, "question_id": 31112948, "link": "https://stackoverflow.com/questions/31112948/perl-script-to-read-a-directory-and-having-file-name-started-by-a-particular-nam/31113642#31113642", "title": "Perl script to read a directory and having file name started by a particular name", "body": "<p>This will give list of all files name which start with <em>sample</em> and have extention <em>.pdf</em>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopendir my $dir, \"/home/gaurav/Desktop/CSP\" or die \"Can't open directory: $!\";\nmy @files = grep { /sample.*\\.pdf$/ } readdir $dir;\nprint \"@files\";\nclosedir $dir;\n</code></pre>\n\n<p>Use a <code>foreach</code> loop if you want print file names one by one:</p>\n\n<pre><code>foreach my $file (@files)\n{\n    print \"$file\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1435585484, "post_id": 31116406, "comment_id": 50247833, "body": "Why not skipping the <code>else</code> clause? It doesn&#39;t do anything."}], "tags": [], "owner": {"reputation": 69, "user_id": 4993679, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-UAE_we5QYb8/AAAAAAAAAAI/AAAAAAAAACo/t-n0EmagoNM/photo.jpg?sz=128", "display_name": "Prakash Khandelwal", "link": "https://stackoverflow.com/users/4993679/prakash-khandelwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1470136160, "last_edit_date": 1470136160, "creation_date": 1435582790, "answer_id": 31116406, "question_id": 31112948, "link": "https://stackoverflow.com/questions/31112948/perl-script-to-read-a-directory-and-having-file-name-started-by-a-particular-nam/31116406#31116406", "title": "Perl script to read a directory and having file name started by a particular name", "body": "<p>I will do that like below. </p>\n\n<pre><code>$file =~ /^sample.*\\.pdf$/i\n</code></pre>\n\n<p>Here 'i' is used for case insensitive. it will search both 'sample' and 'Sample'.</p>\n\n<pre><code>while ( my $file = readdir(DIR) ) \n{\n\n      if((-f \"$dir/$file\" ) &amp;&amp; ($file =~ /^sample.*\\.pdf$/i))\n      {\n          print \"$file \\n\";\n      }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4653614, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kDfTNuoa4fs/AAAAAAAAAAI/AAAAAAAAAIg/pUzGrzR9Bfo/photo.jpg?sz=128", "display_name": "Gaurav Jain", "link": "https://stackoverflow.com/users/4653614/gaurav-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1785, "favorite_count": 0, "closed_date": 1435601123, "answer_count": 4, "score": -1, "last_activity_date": 1470136160, "creation_date": 1435572602, "last_edit_date": 1435574896, "question_id": 31112948, "link": "https://stackoverflow.com/questions/31112948/perl-script-to-read-a-directory-and-having-file-name-started-by-a-particular-nam", "closed_reason": "Needs details or clarity", "title": "Perl script to read a directory and having file name started by a particular name", "body": "<p>I have a directory containing thousand of file.<br>\nSuppose I have 3 pdf files having same name like:</p>\n\n<ol>\n<li>sample_Q1.pdf </li>\n<li>sample_Q2.pdf </li>\n<li>sample_Q3.pdf</li>\n</ol>\n\n<p>Now I want to find the file list having particular name started with \"Sample\".</p>\n\n<p>I'm currently using:</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\nmy $dir = '/home/gaurav/Desktop/CSP';\nopendir( DIR, $dir ) or die $!;\nwhile ( my $file = readdir(DIR) ) {\n\n# We only want files\n    next unless ( -f \"$dir/$file\" );\n\n# Use a regular expression to find files ending in .txt\n    next unless ( $file =~ /\\.pdf$/ );\n    print \"$file\\n\";\n}\n\nclosedir(DIR);\nexit 0;\n</code></pre>\n"}, {"tags": ["perl", "ebay-api"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1435583822, "post_id": 31113582, "comment_id": 50246693, "body": "Often the way - part of the process of framing the question will often shake loose new insight. but thank you for taking the time to post the answer."}], "tags": [], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "is_accepted": true, "score": 2, "last_activity_date": 1435574391, "creation_date": 1435574391, "answer_id": 31113582, "question_id": 31112707, "link": "https://stackoverflow.com/questions/31112707/ebay-api-gerorders-not-giving-any-results/31113582#31113582", "title": "eBay API - GerOrders not giving any results", "body": "<p>Ok, I knew this would happen. 2 days of battling with this, and then as soon as I post something - I find the solution :)</p>\n\n<p>The issue was that I was passing the following in the XML:</p>\n\n<p><code>&lt;OrderStatus&gt;Active&lt;/OrderStatus&gt;</code></p>\n\n<p>It in fact needed to be:</p>\n\n<p><code>&lt;OrderStatus&gt;Completed&lt;/OrderStatus&gt;</code></p>\n\n<p>That is now grabbing them perfectly :) </p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 31113582, "answer_count": 1, "score": 3, "last_activity_date": 1435574391, "creation_date": 1435571848, "question_id": 31112707, "link": "https://stackoverflow.com/questions/31112707/ebay-api-gerorders-not-giving-any-results", "title": "eBay API - GerOrders not giving any results", "body": "<p>I'm trying to figure out why my <strong>GetOrders</strong> function for the <strong>eBay API</strong> isn't working. Below are the headers I'm passing (this is in <em>Perl</em>):</p>\n\n<pre><code>$objHeader-&gt;push_header('X-EBAY-API-COMPATIBILITY-LEVEL' =&gt; $compatabilityLevel);\n$objHeader-&gt;push_header('X-EBAY-API-DEV-NAME' =&gt; $devID);\n$objHeader-&gt;push_header('X-EBAY-API-APP-NAME' =&gt; $appID);\n$objHeader-&gt;push_header('X-EBAY-API-CERT-NAME' =&gt; $certID);\n$objHeader-&gt;push_header('X-EBAY-API-CALL-NAME' =&gt; 'GetOrders');\n$objHeader-&gt;push_header('X-EBAY-API-SITEID' =&gt; '3');\n$objHeader-&gt;push_header('Content-Type' =&gt; 'text/xml');\n</code></pre>\n\n<p>...and the XML I'm passing is as follows: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n    &lt;GetOrdersRequest xmlns=\"urn:ebay:apis:eBLBaseComponents\"&gt;\n    &lt;DetailLevel&gt;ReturnAll&lt;/DetailLevel&gt;\n    &lt;NumberOfDays&gt;3&lt;/NumberOfDays&gt;\n    &lt;OrderRole&gt;Seller&lt;/OrderRole&gt;&lt;OrderStatus&gt;Active&lt;/OrderStatus&gt;\n    &lt;RequesterCredentials&gt;&lt;eBayAuthToken&gt;$userToken&lt;/eBayAuthToken&gt;&lt;/RequesterCredentials&gt;\n    &lt;/GetOrdersRequest&gt;\n</code></pre>\n\n<p>(obviously <strong>$userToken</strong> is replaced with my actual user token)</p>\n\n<p>I get a return from it:</p>\n\n<pre><code>$VAR1 = {\n          'xmlns' =&gt; 'urn:ebay:apis:eBLBaseComponents',\n          'Build' =&gt; 'E929_CORE_APIXO_17568878_R1',\n          'PageNumber' =&gt; '1',\n          'PaginationResult' =&gt; {\n                                'TotalNumberOfPages' =&gt; '0',\n                                'TotalNumberOfEntries' =&gt; '0'\n                              },\n          'OrderArray' =&gt; {},\n          'Ack' =&gt; 'Success',\n          'HasMoreOrders' =&gt; 'false',\n          'Timestamp' =&gt; '2015-06-29T09:49:25.963Z',\n          'Version' =&gt; '929',\n          'ReturnedOrderCountActual' =&gt; '0',\n          'OrdersPerPage' =&gt; '100'\n        };\n</code></pre>\n\n<p>..but as you can see, no results. I know for a fact there are results (I've had it working with the PHP API already using the same kind of values as far as I can tell). Worst case scenario, I could create a basic PHP script to grab the results, and then pipe into the Perl script. Obviously this isn't ideal though (I would much prefer to have it all in one programming language)</p>\n\n<p>Anyone got any ideas? I'm drawing a blank on it :/</p>\n"}, {"tags": ["linux", "perl", "ftp", "debian"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1435571140, "creation_date": 1435571140, "answer_id": 31112510, "question_id": 31112435, "link": "https://stackoverflow.com/questions/31112435/perl-netftp-get-error-bad-remote-filename-ex-pl/31112510#31112510", "title": "Perl Net::FTP get error Bad remote filename &#39;ex.pl", "body": "<p>The problem here is - you need to <code>chomp $array;</code> because otherwise you get a newline embedded. </p>\n\n<p>I would note - you're doing something a little messy with that <code>open</code> call - <code>INN</code> will be a global file handle, and you don't close it. It would be better to:</p>\n\n<pre><code>open ( my $input, \"&lt;\", \"ftp\" ) or die $!;\nmy $filename = &lt;$input&gt;; #read one line;\nchomp $filename;\n</code></pre>\n\n<p>I would also suggest assigning name/login etc. earlier on in your program:</p>\n\n<pre><code>my ( $hostname, $login, $password ) = @ARGV; \n</code></pre>\n\n<p>Because then you can error check these things (e.g. if they exist, and are valid etc.). </p>\n"}], "owner": {"reputation": 37, "user_id": 4255847, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a30473418065e3c8cb540c4f143bcef5?s=128&d=identicon&r=PG&f=1", "display_name": "user4255847", "link": "https://stackoverflow.com/users/4255847/user4255847"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 31112510, "answer_count": 1, "score": 0, "last_activity_date": 1435571140, "creation_date": 1435570878, "last_edit_date": 1435570964, "question_id": 31112435, "link": "https://stackoverflow.com/questions/31112435/perl-netftp-get-error-bad-remote-filename-ex-pl", "title": "Perl Net::FTP get error Bad remote filename &#39;ex.pl", "body": "<p>I have file called ftp which has filename e.g ex.pl as its only content and am i trying to read it via file handle and store it in scalar variable and trying to get it through $ftp->get but it gives error: Bad remote filename 'ex.pl\n' \nwhere ex.pl is an actual file stored in my directory.\nHere is my code:</p>\n\n<pre><code>sub restore () {\n    #open (IN,\"ftpfile\") or die \"failed to open: $!\";\n    open( INN, \"ftp\" ) or die \"fail to open: $!\";\n    my $array = &lt;INN&gt;;\n    print $array;\n    my $ftp = Net::FTP-&gt;new(\"$ARGV[0]\") or die \"host error: $@\";\n    $ftp-&gt;login( \"$ARGV[1]\", \"$ARGV[2]\" )\n        or die \"login error: \", $ftp-&gt;message;\n    $ftp-&gt;cwd(\"/home/qwerty/perl\");\n    $ftp-&gt;get(\"$array\") or die \"error:\", $ftp-&gt;message;\n}\n\nrestore;\n</code></pre>\n"}, {"tags": ["perl", "charts", "tcl", "tkx"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435570855, "post_id": 31111839, "comment_id": 50238452, "body": "I&#39;m afraid your question is a bit too vague to give a meaningful answer. Please take a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for some detail on what makes a good question."}, {"owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "edited": false, "score": 0, "creation_date": 1435571102, "post_id": 31111839, "comment_id": 50238609, "body": "It&#39;s not Tkx but you can check <a href=\"http://search.cpan.org/~djibel/Tk-Chart-1.16/lib/Tk/Chart.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~djibel/Tk-Chart-1.16/lib/Tk/Chart.pm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 1, "last_activity_date": 1435589898, "creation_date": 1435589898, "answer_id": 31118981, "question_id": 31111839, "link": "https://stackoverflow.com/questions/31111839/perl-module-for-making-tkx-chart/31118981#31118981", "title": "Perl module for making TKX Chart", "body": "<p>No; at least nothing stood out in a <a href=\"https://metacpan.org/search?q=Tkx\" rel=\"nofollow\">CPAN search</a>. Tkx makes it easy to call through to Tcl code, though, so you could use a <a href=\"http://wiki.tcl.tk/9503\" rel=\"nofollow\">Tcl chart</a> library.</p>\n"}], "owner": {"reputation": 81, "user_id": 1432641, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3a4ffffe430e3623dfa9e5d7b86e00ba?s=128&d=identicon&r=PG", "display_name": "user1432641", "link": "https://stackoverflow.com/users/1432641/user1432641"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435589898, "creation_date": 1435569104, "question_id": 31111839, "link": "https://stackoverflow.com/questions/31111839/perl-module-for-making-tkx-chart", "title": "Perl module for making TKX Chart", "body": "<p>Is there any perl module for making chart in TKX.</p>\n\n<p>atleast any options for image based chart shall also be OK</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1435569808, "post_id": 31111734, "comment_id": 50237799, "body": "I suspect the question is rather &quot;why is it doing this?&quot; rather than &quot;how can I avoid it?&quot;"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435570589, "post_id": 31111734, "comment_id": 50238301, "body": "As I understand <b>global</b> &quot;STDIN glob as filehandle&quot; is <b>reassigned</b> in called sub-procedure before calling procedure uses it.  <i>IMHO</i> To be safe you should use in $fp assignemts IO::File constructor for named files and IO::Handle constructor for STDIN."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435654672, "post_id": 31111734, "comment_id": 50278487, "body": "I would suggest testing <code>defined</code> rather than <code>length</code>."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 3, "last_activity_date": 1435655019, "last_edit_date": 1435655019, "creation_date": 1435568804, "answer_id": 31111734, "question_id": 31110393, "link": "https://stackoverflow.com/questions/31110393/bad-value-in-a-file-pointer/31111734#31111734", "title": "Bad value in a file pointer", "body": "<pre><code>my $fp = *STDIN;            \nopen $fp, '&lt;', $name if $name;\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>my $fp = *STDIN;            \nopen STDIN, '&lt;', $name if $name;\n</code></pre>\n\n<p>You are instructing <code>open</code> to change <code>STDIN</code>. If you want to create a new handle, you need to pass an undefined scalar to <code>open</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nqx{echo \"a file\" &gt; a};\nqx{echo \"b file\" &gt; b};\nqx{echo \"c file\" &gt; c};\n\nprocess('a');\nprocess('c');\nprocess('');\n\nsub process {\n    my $name = shift;\n    my $fp;\n    if( defined( $name ) and length( $name ) ) {\n      open $fp, '&lt;', $name\n    }else{\n      $fp = *STDIN;\n    }\n    process('b') if defined($name) and $name eq 'a';\n\n    print \"Processing file '$name' (fp=$fp)\\n\";\n    print while(&lt;$fp&gt;);\n}\n</code></pre>\n\n<p>Tested using <code>echo stdin | perl scriptname</code>.</p>\n\n<p><strong>WARNING</strong> Switch to <code>if length($name)</code> from <code>if $name</code> to avoid \"misbehaving\" with a file named <code>0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 2, "creation_date": 1435570536, "post_id": 31112007, "comment_id": 50238263, "body": "This is an excellent answer. I would not have thought of using <code>strace</code> to see what&#39;s really happening. You just taught me a method that will be very useful for many cases. Thanks."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1435572393, "post_id": 31112007, "comment_id": 50239376, "body": "I would also like to offer - your question is well constructed - it&#39;s a simple, repeatable example that demonstrates the problem. That makes figuring out what&#39;s going in considerably easier."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 1, "creation_date": 1435604152, "post_id": 31112007, "comment_id": 50259208, "body": "Clarification: the OP&#39;s script does not &quot;[close] STDIN in sub process <code>b</code>&quot;; instead it leaves STDIN open but at EOF, which &quot;means when <code>a</code> gets to start reading it, there&#39;s nothing there.&quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435647703, "post_id": 31112007, "comment_id": 50274403, "body": "Good point.  I was thinking of how best to phrase what is happening to STDIN because it is replaced, twice, but in neither case is it really closed per se. But still, the second replacement makes the previous one disappear"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1435647606, "last_edit_date": 1435647606, "creation_date": 1435569584, "answer_id": 31112007, "question_id": 31110393, "link": "https://stackoverflow.com/questions/31110393/bad-value-in-a-file-pointer/31112007#31112007", "title": "Bad value in a file pointer", "body": "<p>This has to be to do with reassigning <code>STDIN</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nqx{echo \"a file\" &gt; a};\nqx{echo \"b file\" &gt; b};\nqx{echo \"c file\" &gt; c};\n\nprocess('a');\nprocess('c');\n\nsub process {\n    my $name = shift;\n    print \"Starting process with $name from \", scalar caller(), \" \\n\";\n    my $fp;    #  = *STDIN;\n    print \"Process before open $name: \", Dumper($fp), \"\\n\";\n    open $fp, '&lt;', $name if $name;\n    print \"Process  after open $name: \", Dumper($fp), \"\\n\";\n    process('b') if $name eq 'a';\n    print \"Processing file '$name' (fp=$fp)\\n\";\n    print \"Contents of $name:\\n\";\n    print while (&lt;$fp&gt;);\n    print \"Done with $name\\n\\n\\n\";\n}\n</code></pre>\n\n<p>This gives the output:</p>\n\n<pre><code>Starting process with a from main \nProcess before open a: $VAR1 = undef;\n\nProcess  after open a: $VAR1 = \\*{'::$fp'};\n\nStarting process with b from main \nProcess before open b: $VAR1 = undef;\n\nProcess  after open b: $VAR1 = \\*{'::$fp'};\n\nProcessing file 'b' (fp=GLOB(0x136412c))\nContents of b:\n\"b file\" \nDone with b\n\n\nProcessing file 'a' (fp=GLOB(0x606f54))\nContents of a:\n\"a file\" \nDone with a\n\n\nStarting process with c from main \nProcess before open c: $VAR1 = undef;\n\nProcess  after open c: $VAR1 = \\*{'::$fp'};\n\nProcessing file 'c' (fp=GLOB(0x136412c))\nContents of c:\n\"c file\" \nDone with c\n</code></pre>\n\n<p>If you do the same, but just change that one line back to:</p>\n\n<pre><code> my $fp = *STDIN;\n</code></pre>\n\n<p>And you get Dumper reporting (rest of output snipped for brevity):</p>\n\n<pre><code>Process before open a: $VAR1 = *::STDIN\nProcess  after open a: $VAR1 = *::STDIN;\n</code></pre>\n\n<p>However it clearly <em>is</em> opening, because it's printing the file content. </p>\n\n<p>If you fire up <code>strace</code> and run through the two processes (cut down thus):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nmy $fh;\nopen ( $fh, \"&lt;\", \"fishfile\" ) or warn $!;\nprint &lt;$fh&gt;;\n</code></pre>\n\n<p>And run this <code>strace myscript</code>. (Note - <code>strace</code> is a linux specific tool - there are others for other platforms)</p>\n\n<p>(note - I'm using a file called <code>fishfile</code> with a content of <code>fish</code> because that way I am pretty sure I can find the text :))</p>\n\n<p>Doing it twice - once with the assigning <code>STDIN</code> you'll see a couple of differences around the <code>open</code> operation.  Run them both through <code>diff</code> and you'll see there's lot of it but the interesting part is:</p>\n\n<p>Without the <code>STDIN</code> assignment:</p>\n\n<pre><code>open ( \"fishfile\", O_RDONLY) = 3\nread (3, \"fish\\n\", 8192 )    = 5\nwrite ( 1, \"fish\\n\", 5 )     = 5\n</code></pre>\n\n<p>With the <code>STDIN</code> assignment:</p>\n\n<pre><code>open ( \"fishfile\", O_RDONLY) = 3\ndup2 ( 3, 0 )                = 0 \nclose ( 3 )                  = 0\nread (0, \"fish\\n\", 8192 )    = 5\nwrite ( 1, \"fish\\n\", 5 )     = 5\n</code></pre>\n\n<p>(Note - return code for <code>open</code> is the file descriptor number - e.g. 3)</p>\n\n<p>So what is it <em>actually</em> doing is:</p>\n\n<ul>\n<li>opening your new file</li>\n<li>duplicating it over file descriptor zero (which is <code>STDIN</code>) </li>\n<li>reading the new <code>STDIN</code>. </li>\n<li>write it to file descriptor <code>1</code> or <code>STDOUT</code>. (<code>2</code> is <code>STDERR</code>). </li>\n</ul>\n\n<p>So as a result - because you are - by doing this - clobbering <code>STDIN</code> with your own file descriptor, and because <code>STDIN</code> is globally scoped (rather than your <code>$fh</code> which is lexically scoped):</p>\n\n<ul>\n<li>You are masking <code>STDIN</code> in sub process <code>b</code> and then reading it until EOF, which means when <code>a</code> gets to start reading it, there's nothing there. </li>\n</ul>\n\n<p>If however you move the <code>open</code> to <em>after</em> the call to <code>b</code>:</p>\n\n<pre><code>sub process {\n    my $name = shift;\n    print \"Starting process with $name from \", scalar caller(), \" \\n\";\n    my $fp = *STDIN;\n\n    process('b') if $name eq 'a';\n    print \"Process before open $name: \", Dumper($fp), \"\\n\";\n    open $fp, '&lt;', $name if $name;\n    print \"Process  after open $name: \", Dumper($fp), \"\\n\";\n\n    print \"Processing file '$name' (fp=$fp)\\n\";\n    print \"Contents of $name:\\n\";\n    print while (&lt;$fp&gt;);\n    print \"Done with $name\\n\\n\\n\";\n}\n</code></pre>\n\n<p>That works successfully. I'm assuming based on your previous questions this is related to processing a file, then opening sub processes based on the content. </p>\n\n<p>The solution would therefore be test for the existence of <code>$name</code> before cloning <code>STDIN</code> and you won't have the the problem. </p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 31112007, "answer_count": 2, "score": 3, "last_activity_date": 1435655019, "creation_date": 1435564051, "last_edit_date": 1435565353, "question_id": 31110393, "link": "https://stackoverflow.com/questions/31110393/bad-value-in-a-file-pointer", "title": "Bad value in a file pointer", "body": "<p>This short example illustrates a problem I have in Perl. The idea is to process <code>stdin</code> as default or use an input file if specified. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nqx{echo \"a file\" &gt; a};\nqx{echo \"b file\" &gt; b};\nqx{echo \"c file\" &gt; c};\n\nprocess('a');\nprocess('c');\n\nsub process {\n    my $name = shift;\n    my $fp = *STDIN;            \n    open $fp,  '&lt;', $name if $name;    \n    process('b') if $name eq 'a';\n\n    print \"Processing file '$name' (fp=$fp)\\n\";    \n    print while(&lt;$fp&gt;);\n}\n</code></pre>\n\n<p>The output I get is: </p>\n\n<pre><code>$ ./curious.pl\nProcessing file 'b' (fp=*main::STDIN)\nb file\nProcessing file 'a' (fp=*main::STDIN)\nProcessing file 'c' (fp=*main::STDIN)\nc file\n</code></pre>\n\n<p>And should be:</p>\n\n<pre><code>$ ./curious.pl\nProcessing file 'b' (fp=*main::STDIN)\nb file\nProcessing file 'a' (fp=*main::STDIN)\na file\nProcessing file 'c' (fp=*main::STDIN)\nc file\n</code></pre>\n\n<p>I am probably missing two things:</p>\n\n<ul>\n<li>Why does <code>$fp</code> is equal to <code>*main::STDIN</code> and not to the current opened file?</li>\n<li>Why the content <code>'a'</code> is not read?</li>\n</ul>\n\n<p>Logically, <code>$fp</code> is local to the subroutine. It is first assigned to <code>*STDIN</code> then altered by <code>open</code> with a file pointer to <code>a</code>. Then I process <code>b</code>. When I return to the processing of <code>b</code> I should still have a pointer to <code>a</code> inside <code>$fp</code>. </p>\n\n<p>I've read <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow\">here</a> that handler passed to <code>open</code> must be an undefined scalar. However it seems to work with <code>b</code> and <code>c</code>.</p>\n"}, {"tags": ["algorithm", "perl", "parsing", "tree", "perl-data-structures"], "comments": [{"owner": {"reputation": 449, "user_id": 5052042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9gJ9o.jpg?s=128&g=1", "display_name": "neophytte", "link": "https://stackoverflow.com/users/5052042/neophytte"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1438146065, "post_id": 31108400, "comment_id": 51324249, "body": "added to the question - thanks ..."}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 5052042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9gJ9o.jpg?s=128&g=1", "display_name": "neophytte", "link": "https://stackoverflow.com/users/5052042/neophytte"}, "edited": false, "score": 0, "creation_date": 1438917081, "post_id": 31694028, "comment_id": 51656933, "body": "Thank you - after playing with your code, I was able to successfully generate the correct information to put inside this code:  <a href=\"http://thecodeplayer.com/walkthrough/css3-family-tree\" rel=\"nofollow noreferrer\">link</a>  Which produced this picture in HTML:  !(<a href=\"http://neophytte.mine.nu/forum/simpleforum_files/attachments/output_tree.jpg\" rel=\"nofollow noreferrer\">neophytte.mine.nu/forum/simpleforum_files/attachments/&hellip;</a>)  Richard"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1438155548, "last_edit_date": 1438155548, "creation_date": 1438155245, "answer_id": 31694028, "question_id": 31108400, "link": "https://stackoverflow.com/questions/31108400/perl-two-column-flat-file-to-a-complex-unordered-list-tree/31694028#31694028", "title": "Perl two column flat file to a complex unordered list tree", "body": "<p>The following program is close to what you want:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse HTML::Entities;\n\nsub render {\n    my ($underlings_of, $level, $key) = @_;\n    my $underlings = $underlings_of-&gt;{$key} or return;\n    print \"  \" x $level, \"&lt;ul&gt;\\n\";\n    for my $underling (sort @$underlings) {\n        print \"  \" x ($level + 1), \"&lt;li&gt;\", encode_entities($underling), \"&lt;/li&gt;\\n\";\n        render($underlings_of, $level + 1, $underling);\n    }\n    print \"  \" x $level, \"&lt;/ul&gt;\\n\";\n}\n\nmy %underlings_of;\n\nwhile (my $line = readline DATA) {\n    chomp $line;\n    my ($mgr, $emp) = split /\\t/, $line;\n    push @{$underlings_of{$mgr}}, $emp;\n}\n\nrender(\\%underlings_of, 0, '');\n\n__DATA__\nuser4   user8\nuser8   user9\n    user1\nuser1   user2\nuser2   user3\nuser2   user5\nuser2   user4\nuser3   user5\nuser4   user6\nuser4   user7\n</code></pre>\n\n<p>It produces the following output:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;ul&gt;\n  &lt;li&gt;user1&lt;/li&gt;\n  &lt;ul&gt;\n    &lt;li&gt;user2&lt;/li&gt;\n    &lt;ul&gt;\n      &lt;li&gt;user3&lt;/li&gt;\n      &lt;ul&gt;\n        &lt;li&gt;user5&lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;li&gt;user4&lt;/li&gt;\n      &lt;ul&gt;\n        &lt;li&gt;user6&lt;/li&gt;\n        &lt;li&gt;user7&lt;/li&gt;\n        &lt;li&gt;user8&lt;/li&gt;\n        &lt;ul&gt;\n          &lt;li&gt;user9&lt;/li&gt;\n        &lt;/ul&gt;\n      &lt;/ul&gt;\n      &lt;li&gt;user5&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/ul&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>User <code>user5</code> is listed twice because they appear twice in the input hierarchy, under <code>user2</code> and under <code>user3</code>. This means your structure isn't really a tree, it's a directed acyclic (hopefully) graph.</p>\n\n<p>For other approaches, <a href=\"https://en.wikipedia.org/wiki/Topological_sorting\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Topological_sorting</a> may be helpful because I believe your problem is an instance of topological sorting.</p>\n"}], "owner": {"reputation": 449, "user_id": 5052042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9gJ9o.jpg?s=128&g=1", "display_name": "neophytte", "link": "https://stackoverflow.com/users/5052042/neophytte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 31694028, "answer_count": 1, "score": 0, "last_activity_date": 1438155548, "creation_date": 1435555798, "last_edit_date": 1495540283, "question_id": 31108400, "link": "https://stackoverflow.com/questions/31108400/perl-two-column-flat-file-to-a-complex-unordered-list-tree", "title": "Perl two column flat file to a complex unordered list tree", "body": "<p>I have a data file for an organizational chart that has been pulled from our AD structure and looks like this, with the Manager being the first field, and the employee the second - in some situations a manager will look after a few staff:</p>\n\n<pre><code>__EXAMPLE__\nuser4   user8\nuser8   user9\n    user1\nuser1   user2\nuser2   user3\nuser2   user5\nuser2   user4\nuser3   user5\nuser4   user6\nuser4   user7\n</code></pre>\n\n<p>This needs to be output in a HTML unordered list such as this:</p>\n\n<pre><code># Intended output\n#\n# &lt;ul&gt;\n#   &lt;li&gt;user1&lt;/li&gt;\n#   &lt;ul&gt;\n#       &lt;li&gt;user2&lt;/li&gt;\n#       &lt;ul&gt;\n#           &lt;li&gt;user3&lt;/li&gt;\n#           &lt;ul&gt;\n#               &lt;li&gt;user5&lt;/li&gt;\n#           &lt;/ul&gt;\n#           &lt;li&gt;user4&lt;/li&gt;\n#           &lt;ul&gt;\n#               &lt;li&gt;user6&lt;/li&gt;\n#               &lt;li&gt;user7&lt;/li&gt;\n#               &lt;li&gt;user8&lt;/li&gt;\n#             &lt;ul&gt;\n#               &lt;li&gt;user9&lt;/li&gt;\n#             &lt;/ul&gt;\n#           &lt;/ul&gt;\n#       &lt;/ul&gt;   \n#   &lt;/ul&gt;\n# &lt;/ul&gt;\n</code></pre>\n\n<p>I've figured I can probably use the example code at this location: <a href=\"https://stackoverflow.com/questions/22464214/parse-text-file-and-create-complex-tree-structure-in-perl\">Parse Text file and create complex tree structure in perl</a> but I'm struggling to get the initial example into the required format.</p>\n\n<p>I've got some code which sucks the whole datafile into an array, checks the Manager value is not null, then recursively tries to match the next manager up the tree (until it hits the null) which should give me the output like:</p>\n\n<pre><code>user1\nuser1 user2\nuser1 user2 user3\nuser1 user2 user3 user5\nuser1 user2 user4\nuser1 user2 user4 user6\nuser1 user2 user4 user7\nuser1 user2 user4 user8\nuser1 user2 user4 user8 user9\n</code></pre>\n\n<p>Unfortunately my Perl is very rusty and my code looks terrible; I'm not sure I'm approaching this the best way, so was hoping to get some words of wisdom from someone wiser than me.</p>\n\n<p>Current example:</p>\n\n<pre><code>#!/usr/bin/perl\n#\nuse strict;\nuse warnings;\n\nmy @Complete = &lt;DATA&gt;;\n\nforeach my $line (@Complete) {\n    chomp($line);\n    my ($fl, $usr) = split(/\\t/, $line); #Formal Leader &amp;&amp; User\n    foreach my $leader (@Complete) {\n        chomp($leader);\n        if ($leader =~ /$fl$/) {\n            $line = $leader.\"\\t\".$usr;\n            ($fl,$usr) = split(/\\t/, $line, 2);\n            $leader = '';\n        }\n        last if ($fl eq '');\n    }\n    print \"'\".$line.\"'\\n\";\n}\n\n__DATA__\nuser4   user8\nuser8   user9\n    user1\nuser1   user2\nuser2   user3\nuser2   user5\nuser2   user4\nuser3   user5\nuser4   user6\nuser4   user7\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk"], "answers": [{"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": false, "score": 1, "last_activity_date": 1435537772, "creation_date": 1435537772, "answer_id": 31106221, "question_id": 31106166, "link": "https://stackoverflow.com/questions/31106166/count-number-of-matching-fields-in-each-line/31106221#31106221", "title": "count number of matching fields in each line", "body": "<p>In awk:</p>\n\n<pre><code>$ awk '{c=0; for (i=1;i&lt;=NF;i++) c+=($i==\"./.\"); printf \"Line %s has %s\\n\",NR,c+0;}' file\nLine 1 has 2\n</code></pre>\n\n<h3>How it works</h3>\n\n<p>By default, awk splits each record (line) into fields.  We loop through all the fields looking for equality with <code>./.</code>.</p>\n\n<ul>\n<li><p><code>c=0</code></p>\n\n<p>Set the count to zero.</p></li>\n<li><p><code>for (i=1;i&lt;=NF;i++) c+=($i==\"./.\")</code></p>\n\n<p>Increment count <code>c</code> by one every time a field exactly matches <code>./.</code>.</p>\n\n<p><code>$i</code> is the content of the i'th field.  <code>$i==\"./.\"</code> is one if the field exactly matches <code>./.</code>.  Thus, <code>c+=($i==\"./.\")</code> increments <code>c</code> by one for each matching field.</p></li>\n<li><p><code>printf \"Line %s has %s\\n\",NR,c+0</code></p>\n\n<p>Print the results for this line.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 4992910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Hwkmo.png?s=128&g=1", "display_name": "ate50eggs", "link": "https://stackoverflow.com/users/4992910/ate50eggs"}, "is_accepted": false, "score": 1, "last_activity_date": 1435538574, "creation_date": 1435538574, "answer_id": 31106301, "question_id": 31106166, "link": "https://stackoverflow.com/questions/31106166/count-number-of-matching-fields-in-each-line/31106301#31106301", "title": "count number of matching fields in each line", "body": "<p>You need to set an iterator to capture each line. The match count syntax in Perl is a little strange too</p>\n\n<pre><code>my$F=shift@ARGV;\nopen IN, \"$F\";\n$s = \"\\.\\/\\.\";\nwhile($string1 = &lt;IN&gt;){\n    $num1 = () = $string1 =~ m/$s/gi;\n    print \"foo: $num1 $string1\\n\";\n    next;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "is_accepted": false, "score": 4, "last_activity_date": 1435538595, "creation_date": 1435538595, "answer_id": 31106304, "question_id": 31106166, "link": "https://stackoverflow.com/questions/31106166/count-number-of-matching-fields-in-each-line/31106304#31106304", "title": "count number of matching fields in each line", "body": "<p>You could do:</p>\n\n<pre><code>perl -nE '$count = () = m{\\./\\.}g; say \"Line $. has $count\";' file\n</code></pre>\n\n<p><a href=\"http://ideone.com/j4Z6Gk\" rel=\"nofollow\"><strong>Ideone Demo</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 6121, "user_id": 1364945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pU9ds.gif?s=128&g=1", "display_name": "Kenosis", "link": "https://stackoverflow.com/users/1364945/kenosis"}, "is_accepted": true, "score": 2, "last_activity_date": 1435556537, "last_edit_date": 1435556537, "creation_date": 1435540719, "answer_id": 31106491, "question_id": 31106166, "link": "https://stackoverflow.com/questions/31106166/count-number-of-matching-fields-in-each-line/31106491#31106491", "title": "count number of matching fields in each line", "body": "<p>Here's another option:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n    print \"Line $. has \", ( split m|\\./\\.| ) - 1, \"\\n\";\n}\n</code></pre>\n\n<p>Usage: <code>perl script.pl dataFile [&gt;outFile]</code></p>\n\n<p>The brackets indicate an optional parameter you can use to send output to a file.</p>\n\n<p>The script <code>split</code>s each line on the field-pattern that you want to match, then returns the number of elements-1 from that <code>split</code> as the number of fields matching \"./.\".  On your sample line, it returns:</p>\n\n<p><code>Line 1 has 2</code></p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 31106491, "answer_count": 4, "score": 0, "last_activity_date": 1435556537, "creation_date": 1435537315, "question_id": 31106166, "link": "https://stackoverflow.com/questions/31106166/count-number-of-matching-fields-in-each-line", "title": "count number of matching fields in each line", "body": "<p>I have a file where each line has a certain number of fields matching \"./.\" that looks something like:</p>\n\n<pre><code>chrM    57  .   T   C   4848.99 GT:AD:DP:GQ:PL  ./. 1/1:1,149:150:99:4903,439,0 0/0:202,0:202:99:0,541,6030 0/0:249,1:250:99:0,646,7558 0/0:249,1:250:99:0,647,7484 0/0:111,0:111:99:0,304,3346 0/0:171,0:172:99:0,397,4599 0/0:118,0:118:99:0,340,3827 0/0:247,0:247:99:0,650,7312 0/0:218,0:219:99:0,611,6728 0/0:242,0:242:99:0,686,7589 0/0:250,0:250:99:0,689,7599 0/0:144,0:144:99:0,409,4608 0/0:250,0:250:99:0,680,7585 0/0:141,3:144:99:0,321,4233 0/0:71,0:71:99:0,205,2260   0/0:204,0:205:99:0,568,6312 ./. 0/0:191,0:191:99:0,523,5874 0/0:249,0:250:99:0,665,7443 0/0:142,0:143:99:0,340,3991 0/0:218,0:218:99:0,575,6612 0/0:247,0:247:99:0,665,7412 0/0:250,0:250:99:0,692,7768 0/0:250,0:250:99:0,689,7749 0/0:247,2:249:99:0,674,7574\n</code></pre>\n\n<p>I would like to count the number of fields exactly matching \"./.\" in each line, and print the number of matches for each line. I believe I could do something like the code below but code doesn't work (I am new to perl). I think there should be an easier solution in awk.</p>\n\n<pre><code>#! perl -w  \n\nmy$F=shift@ARGV;\nopen IN, \"$F\";\nwhile(&lt;IN&gt;){\n    $num1++ while ($string1 =~ m/\\.\\/\\./g);\n    print \"The first line has $num1\\n\";\n    next;\n}\n</code></pre>\n"}, {"tags": ["perl", "output", "hash"], "comments": [{"owner": {"reputation": 5, "user_id": 5041177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40870784bdd46d665e0a90bf063599b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dr G", "link": "https://stackoverflow.com/users/5041177/dr-g"}, "edited": false, "score": 0, "creation_date": 1435514061, "post_id": 31102769, "comment_id": 50220836, "body": "i attempted to use the following format and i was not having much success           unless (open(OUTPUT, &quot;$output_file&quot;) ) {          print &quot;cannot create new file \\&quot;$output_file&quot;;          }          while(my $line = &lt;          print OUTPUT &quot;&quot;%s\\t%s\\n&quot;, $1, $name{$1} // &#39;undef&#39;&quot;;}"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1435515578, "post_id": 31102769, "comment_id": 50221365, "body": "What exactly are you expecting the <code>printf</code> line to print? Please give an example. It&#39;s difficult to tell by how you&#39;ve laid things out."}, {"owner": {"reputation": 5, "user_id": 5041177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40870784bdd46d665e0a90bf063599b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dr G", "link": "https://stackoverflow.com/users/5041177/dr-g"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1435515712, "post_id": 31102769, "comment_id": 50221428, "body": "printf line prints the number and letters if the the number is present in the second file  so say that 1, 2, and 4 are present in the second file. then 1, 2, and 4 will be printed along with their corresponding letters"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435518319, "post_id": 31102769, "comment_id": 50222353, "body": "That code is mostly my solution to [this question](stackoverflow.com/questions/31008421) but the data you say you&#39;ve got now is different. Is that intentional?"}, {"owner": {"reputation": 5, "user_id": 5041177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40870784bdd46d665e0a90bf063599b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dr G", "link": "https://stackoverflow.com/users/5041177/dr-g"}, "edited": false, "score": 0, "creation_date": 1435518460, "post_id": 31102769, "comment_id": 50222413, "body": "yes i generalized it. i thought it would be simpler to explain."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435518546, "post_id": 31102769, "comment_id": 50222442, "body": "But there are commas in the input now whereas there weren&#39;t any before, and there&#39;s a space after the <code>&gt;</code> that wasn&#39;t there, and the ID is now a number. You need a different program to handle that"}, {"owner": {"reputation": 5, "user_id": 5041177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40870784bdd46d665e0a90bf063599b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dr G", "link": "https://stackoverflow.com/users/5041177/dr-g"}, "edited": false, "score": 0, "creation_date": 1435518624, "post_id": 31102769, "comment_id": 50222470, "body": "I know, I used those as separation makers. I&#39;ll edit them if they are causing any confusion."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435518677, "post_id": 31102769, "comment_id": 50222486, "body": "Are they really there in the data file? If not then you should really remove them from your question. Better still show some real data"}, {"owner": {"reputation": 5, "user_id": 5041177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40870784bdd46d665e0a90bf063599b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dr G", "link": "https://stackoverflow.com/users/5041177/dr-g"}, "edited": false, "score": 0, "creation_date": 1435518732, "post_id": 31102769, "comment_id": 50222508, "body": "Just did. Thanks for the suggestion. Cheers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435518780, "post_id": 31102769, "comment_id": 50222530, "body": "Thanks. And is there really a space after the <code>&gt;</code>? FASTA files don&#39;t normally look like that"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435519087, "post_id": 31102769, "comment_id": 50222641, "body": "Thanks! I&#39;ve tidied your Perl code a little and added some markdown so that it&#39;s clear where the data starts and ends. Hope that&#39;s okay"}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1435516663, "last_edit_date": 1435516663, "creation_date": 1435516259, "answer_id": 31103299, "question_id": 31102769, "link": "https://stackoverflow.com/questions/31102769/printing-a-hash-into-an-output-file-after-creating-it-on-the-command-line/31103299#31103299", "title": "printing a hash into an output file after creating it on the command line", "body": "<p>Try the following. I've changed your regexes a little bit. Note that I've assumed your lines start with a \">\" character, and the \"--\" you used in your example aren't there (otherwise, your regex will need to start with <code>/^--&gt;</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy ( $first_file, $second_file ) = @ARGV;\nmy $write_file = 'output.txt';\n\nmy %name;\n\nopen my $fh1, '&lt;', $first_file\n  or die qq{Unable to open \"$first_file\": $!};\n\nwhile ( &lt;$fh1&gt; ) {\n    s/,//;\n    if ( /^&gt;\\s+(\\S+)\\s+(\\S+)/ ) {\n        $name{$1} = $2;\n    }\n}\nclose $fh1;\n\nopen my $fh2, '&lt;', $second_file\n  or die qq{Unable to open \"$second_file\": $!};\n\nopen my $wfh, '&gt;', $write_file\n  or die \"Unable to open write file $write_file: $!\";\n\nwhile ( &lt;$fh2&gt; ) {\n    s/,//;\n    if ( /^&gt;\\s+(\\S+)/ ) {\n        printf $wfh \"%s\\t%s\\n\", $1, $name{$1} // 'undef';\n    }\n}\n\nclose $fh2;\nclose $wfh;\n</code></pre>\n\n<p>Input file 1:</p>\n\n<pre><code>&gt; 1, ABCD\n&gt; 2, XFSD\n&gt; 3, GDWE\n&gt; 4, MMDD\n</code></pre>\n\n<p>Input file 2:</p>\n\n<pre><code>&gt; 1, 0.5\n&gt; 4, 9.99\n&gt; 6, 22.22\n</code></pre>\n\n<p>Output file:</p>\n\n<pre><code>1   ABCD\n4   MMDD\n6   undef\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1435518450, "creation_date": 1435518450, "answer_id": 31103687, "question_id": 31102769, "link": "https://stackoverflow.com/questions/31102769/printing-a-hash-into-an-output-file-after-creating-it-on-the-command-line/31103687#31103687", "title": "printing a hash into an output file after creating it on the command line", "body": "<p>All you need to do to redirect the output to a file is to specify it on the command line</p>\n\n<pre><code>program.pl file1.txt file2.txt &gt; output.txt\n</code></pre>\n\n<p>I suggest you do it that way so that you can choose where the output gets sent without editing the program</p>\n"}], "owner": {"reputation": 5, "user_id": 5041177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40870784bdd46d665e0a90bf063599b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dr G", "link": "https://stackoverflow.com/users/5041177/dr-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 31103687, "answer_count": 2, "score": -1, "last_activity_date": 1435518965, "creation_date": 1435513296, "last_edit_date": 1435518965, "question_id": 31102769, "link": "https://stackoverflow.com/questions/31102769/printing-a-hash-into-an-output-file-after-creating-it-on-the-command-line", "title": "printing a hash into an output file after creating it on the command line", "body": "<p>I am trying to use a hash that was created and extracting the results into a output file. My script is down below. Any help would be greatly appreciated. Cheers.</p>\n\n<h3>sample of <code>first_file</code> data</h3>\n\n<pre><code>&gt;nameID ABCD\n</code></pre>\n\n<h3>sample of <code>second_file</code> data</h3>\n\n<pre><code>&gt;nameID 0.5\n</code></pre>\n\n<h3>My Perl code</h3>\n\n<pre><code>my ( $first_file, $second_file ) = @ARGV;\n\nmy %name;\n\n{\n    open my $fh, '&lt;', $first_file or die qq{Unable to open \"$first_file\": $!};\n\n    my $key;\n    while ( &lt;$fh&gt; ) {\n        if ( /^&gt;(\\S+)/ ) {\n            $key = $1;\n        }\n        elsif ( /\\S/ ) {\n            chomp;\n            $name{$key} .= $_;\n        }\n    }\n}\n\nopen my $fh, '&lt;', $second_file or die qq{Unable to open \"$second_file\": $!};\nwhile ( &lt;$fh&gt; ) {\n    if ( /^&gt;(\\S+)/ ) {\n        printf \"%s\\t%s\\n\", $1, $name{$1} // 'undef';\n    }\n}\n</code></pre>\n\n<p>The trouble I was having was extracting <code>printf \"%s\\t%s\\n\", $1, $name{$1} // 'undef'</code> from the command line into an output file.</p>\n"}, {"tags": ["perl", "debugging"], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1435528392, "creation_date": 1435528392, "answer_id": 31105152, "question_id": 31102558, "link": "https://stackoverflow.com/questions/31102558/perl-debugger-filehandle-as-input/31105152#31105152", "title": "Perl Debugger: Filehandle as Input", "body": "<p>Here's a simple example setting it up using <code>RemotePort</code>, which seemed easier to me:</p>\n\n<p>The trick to using <code>RemotePort</code> is that you have to have someone listening on the remote end BEFORE you launch the script to be debugged. </p>\n\n<p>As soon as you launch your script with <code>-d</code> Perl will attempt to connect to <code>RemotePort</code>. So you have to make sure the initial connection succeeds by having someone listening there beforehand.</p>\n\n<p>Here I assume some Linux/Unix variant, which has the <code>netcat</code> utility installed. We use <code>netcat</code> to wait for incoming connections in this example, but you can use anything else you wish too which is able to create a service port and shuffle data between that and the current TTY:</p>\n\n<p><strong>In terminal 1</strong>:</p>\n\n<pre><code> # Use netcat to listen for incoming connections on port 9999\n &gt; nc -l -p 9999\n</code></pre>\n\n<p><strong>In terminal 2</strong>:</p>\n\n<pre><code> # Start perl with -d and request a RemotePort connection \n &gt; PERLDB_OPTS=RemotePort=127.0.0.1:9999 perl -d my_script.pl\n</code></pre>\n\n<p>As soon as you do that in terminal 1 you will see something like this:</p>\n\n<pre><code>Loading DB routines from perl5db.pl version 1.39_10\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(my_script.pl:4):\n  DB&lt;1&gt; \n</code></pre>\n\n<p>There you go..debug away.</p>\n"}, {"tags": [], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1435530414, "creation_date": 1435530414, "answer_id": 31105394, "question_id": 31102558, "link": "https://stackoverflow.com/questions/31102558/perl-debugger-filehandle-as-input/31105394#31105394", "title": "Perl Debugger: Filehandle as Input", "body": "<p><a href=\"https://metacpan.org/pod/Devel::Trepan\" rel=\"nofollow\">Devel::Trepan</a> is a gdb-like debugger. Although it has remote control, you can also run it at the outset with the option <code>--command</code> which will \"source\" (in the gdb-sense) or run a series of debugger commands. </p>\n\n<p>To go into remote control, either start the debugger using the <code>--server</code> option or inside the debugger use the \"<a href=\"https://metacpan.org/pod/Devel::Trepan::CmdProcessor::Command::Server\" rel=\"nofollow\">server</a>\" command once inside the debugger.</p>\n\n<p>See <a href=\"https://metacpan.org/pod/Devel::Trepan::Options\" rel=\"nofollow\">Options</a> for a list of options you can give at the outset.</p>\n"}], "owner": {"reputation": 23, "user_id": 5058623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed4aa5c41037511750121d7ab631db60?s=128&d=identicon&r=PG&f=1", "display_name": "atomic", "link": "https://stackoverflow.com/users/5058623/atomic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 31105152, "answer_count": 2, "score": 2, "last_activity_date": 1435530414, "creation_date": 1435511915, "last_edit_date": 1435514141, "question_id": 31102558, "link": "https://stackoverflow.com/questions/31102558/perl-debugger-filehandle-as-input", "title": "Perl Debugger: Filehandle as Input", "body": "<p>I have this problem:\nI need to control the perl-debugger from an external script. \nBy research I found out about various solutions, but I don't understand them.\nI failed to properly set up the RemotePort option (editing \".perldb\"), which was the first I tried, and found no useful information on providing a filehandle from which the debugger would get its input (by somehow setting @cmdfhs) \nI found both options over here: <a href=\"http://search.cpan.org/~nwclark/perl-5.8.6/lib/perl5db.pl\" rel=\"nofollow\">http://search.cpan.org/~nwclark/perl-5.8.6/lib/perl5db.pl</a></p>\n\n<p>It would be nice if you could tell me how to provide the filehandle from which the debugger gets its input, or if you know a link where this is explained?</p>\n"}, {"tags": ["arrays", "perl", "optimization"], "comments": [{"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1435511538, "post_id": 31102307, "comment_id": 50220013, "body": "Instead of loading the data into multiple arrays, I&#39;d use a single hash where the keys are the values of the second field.  Then as you loop over the second file, extract the desired fields and do a simple hash lookup on the key.  If it exists, output the data.  Using this approach will use less memory and doesn&#39;t need the nested foreach loops."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1435512128, "post_id": 31102307, "comment_id": 50220170, "body": "Your nested foreach loops is the main cause of the inefficiency because it is repeatedly looping over the complete set of data from the second file (once for every line in the first file).  Using the hash approach I suggested only loops over the second file once."}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1435513299, "post_id": 31102307, "comment_id": 50220574, "body": "Thank you very much for your response. What do you mean &quot; do a simple hash lookup on the key&quot;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435517549, "post_id": 31102307, "comment_id": 50222081, "body": "Are you sure your files are tab-separated? There are no tabs in the data that you&#39;ve posted. And is <code>52854\tC\tT\t0&#47;1:13:4:138:9:318:-5,0,-5</code> the output that you expect from that vcf file?"}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435518588, "post_id": 31102307, "comment_id": 50222448, "body": "The output that I&#39;m expected is like that:  <code>1413129 G       T       1&#47;1:19:0:0:19:684:-5,-5,0</code> I believe that it is tab separated. there are four fields. The last one is a little bit strange I know, but its one field."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435515354, "post_id": 31102983, "comment_id": 50221293, "body": "Thank you very much! It&#39;s working, but the output is a little bit strange. The first line that it is printed is not whole and it doesn&#39;t print only the field that are selected, it prints the whole line."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435517273, "post_id": 31102983, "comment_id": 50221995, "body": "Sorry, your script was strange/unusual for me - I have not inspected it close enough to detect info you really wanted :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435517903, "post_id": 31102983, "comment_id": 50222182, "body": "@AndrzejA.Filip: The problem is with your <code>split</code> statement. You have <code>&#39;\\t&#39;</code> in single quotes, which will try to split on the two characters backslash, <code>t</code>. You want double quotes there for a tab character. Or better, you can use slashes to reflect that it&#39;s a regular expression"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435518613, "post_id": 31102983, "comment_id": 50222461, "body": "@Borodin Are you SURE?  I have used splits from the script to be improved. <code>&#39;\\t&#39;</code> splits TAB separated files on my test system (perl 5.20.2-6 on Debian/testing). Anyway I have applied your suggestion to improve portability."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435519233, "post_id": 31102983, "comment_id": 50222697, "body": "@AndrzejA.Filip: I&#39;m certain. <code>perl -E&quot;say length &#39;\\t&#39;&quot;</code> shows 2, because there is a backslash and a <code>t</code>. And yes. I hadn&#39;t noticed the original post was wrong as well!"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435519909, "post_id": 31102983, "comment_id": 50222934, "body": "@Borodin <code>print scalar( split(&#39;\\t&#39;,&quot;a\\tb b\\tc&quot;))</code> produces 3 on my test system.  What does it produce on your comp?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435526063, "post_id": 31102983, "comment_id": 50224787, "body": "@AndrzejA.Filip: Ah, you&#39;re right. Whatever string you pass it&#39;s then compiled as a regex pattern, and the two characters backslash and &#39;t&#39; have the same effect in that context as a single horizontal tab character. All the more reason to delimit it with slashes rather than either single or double quotes!"}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 1, "last_activity_date": 1435519541, "last_edit_date": 1435519541, "creation_date": 1435514386, "answer_id": 31102983, "question_id": 31102307, "link": "https://stackoverflow.com/questions/31102307/how-can-i-find-the-common-items-from-two-arrays-fast/31102983#31102983", "title": "How can I find the common items from two arrays fast?", "body": "<p>Below please find minimal modification of your script for hash based searches</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $map_file = $ARGV[0];\nmy $vcf_file = $ARGV[1];\n\nmy %vcf_hash;\nopen( my $vcf_info, $vcf_file) or die \"Could not open $vcf_file: $!\";\nwhile( my $line = &lt;$vcf_info&gt;)  {\n    next if $line =~ m/^#/; # Skip comment lines\n    chomp $line;\n    my (@data) = split(/\\t/, $line);\n    die unless @data &gt;= 10; # Check number of fields in the input line\n    my ($pos) = $data[1];\n    # $. - line number in the file\n    $vcf_hash{$pos}{$.} = \\@data;\n}\n\nopen( my $map_info, $map_file) or die \"Could not open $map_file: $!\";\nwhile( my $mline = &lt;$map_info&gt;)  {\n    chomp $mline;\n    my (@data) = split(/\\t/, $mline);\n    die unless @data &gt;= 2; # Check number of fields in the input line\n    my ($pos) = $data[1];\n    if( exists $vcf_hash{$pos}) {\n      my $hash_ref = $vcf_hash{$pos};\n      for my $n (sort{$a&lt;=&gt;$b} keys %$hash_ref) {\n        my $array_ref = $hash_ref-&gt;{$n};\n        my $pos2     = $array_ref-&gt;[1];\n        my $ref2     = $array_ref-&gt;[3];\n        my $allele   = $array_ref-&gt;[4];\n        my $genotype = $array_ref-&gt;[9];\n        print $pos2 . \"\\t\" . $ref2. \"\\t\".$allele.\"\\t\".$genotype. \"\\n\";\n      }\n    }\n}\n</code></pre>\n\n<p>The script may be improved further to reduce memory use if you use huge data files.</p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435517427, "post_id": 31103356, "comment_id": 50222046, "body": "Thank you very much Borodin. It compiles fine. The only issue is that the $pos variable masks previous declaration. Otherwise it works fine as it seems"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435517722, "post_id": 31103356, "comment_id": 50222115, "body": "@Vasilis: Okay thanks, I&#39;ve fixed that issue. Have you tried it with your live data? I presume that&#39;s not your downvote?"}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435518344, "post_id": 31103356, "comment_id": 50222367, "body": "No, of course its not mine. It works perfect and very fast! Thank you very much again :)"}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435518654, "post_id": 31103356, "comment_id": 50222479, "body": "Can I ask you and something else, cause your syntax is too advanced for me? What I have to modify if I want to print the whole line of the file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435519393, "post_id": 31103356, "comment_id": 50222744, "body": "@Vasilis: Instead of the <code>print join(...), &quot;\\n&quot;</code> line you need just <code>print &quot;$_\\n&quot;</code>"}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1435522932, "post_id": 31103356, "comment_id": 50223873, "body": "Great! Thank you very much :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435517665, "last_edit_date": 1435517665, "creation_date": 1435516572, "answer_id": 31103356, "question_id": 31102307, "link": "https://stackoverflow.com/questions/31102307/how-can-i-find-the-common-items-from-two-arrays-fast/31103356#31103356", "title": "How can I find the common items from two arrays fast?", "body": "<p>Here's a version that should run much faster than your own</p>\n\n<p>It reads the map file and stores each <code>pos</code> field in hash <code>%wanted</code>. Then it reads through the second file and checks whether the record is in the list of wanted values. If so then it splits the record and prints the fields you require</p>\n\n<p>Note that I haven't been able to test this beyond making sure that it compiles</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nmy ( $map_file, $vcf_file ) = @ARGV;\n\nmy %wanted;\n\n{\n    open my $map_fh, '&lt;', $map_file;\n\n    while ( &lt;$map_fh&gt; ) {\n        chomp;\n        my $pos = ( split /\\t/, $_, 3 )[1];\n        ++$wanted{$pos};\n    }\n}\n\n{\n    open my $vcf_fh, '&lt;', $vcf_file;\n\n    while ( &lt;$vcf_fh&gt; ) {\n\n        next if /^#/;\n\n        chomp;\n        my $pos = ( split /\\t/, $_, 3 )[1];\n        next unless $wanted{$pos};\n\n        my ( $ref, $allele, $genotype ) = ( split /\\t/ )[3, 4, 9];\n        print join(\"\\t\", $pos, $ref, $allele, $genotype), \"\\n\";\n\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1435582623, "creation_date": 1435582623, "answer_id": 31116345, "question_id": 31102307, "link": "https://stackoverflow.com/questions/31102307/how-can-i-find-the-common-items-from-two-arrays-fast/31116345#31116345", "title": "How can I find the common items from two arrays fast?", "body": "<p>There is not a need to keep your <code>map_file</code> in memory but just keys. It is good to make them keys in a hash which you use for existence checking. You don't have to keep your <code>vcf_file</code> in memory as well, but you can just make a decision to output or not.</p>\n\n<pre><code>#!/app/languages/perl/5.14.2/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nuse constant KEY =&gt; 1;\nuse constant FIELDS =&gt; ( 1, 3, 4, 9 );\n\nmy ( $map_file, $vcf_file ) = @ARGV;\n\nmy %map;\n{\n    my $fh;\n    open $fh, '&lt;', $map_file;\n\n    while (&lt;$fh&gt;) {\n        $map{ ( split /\\t/, $_, KEY + 2 )[KEY] } = undef;\n    }\n}\n\n{\n    my $fh;\n    open $fh, '&lt;', $vcf_file;\n    while (&lt;$fh&gt;) {\n        next if /^#/;\n        chomp;\n        my @data = split /\\t/;\n        print join \"\\t\", @data[FIELDS] if exists $map{ $data[KEY] };\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1435582623, "creation_date": 1435510311, "question_id": 31102307, "link": "https://stackoverflow.com/questions/31102307/how-can-i-find-the-common-items-from-two-arrays-fast", "title": "How can I find the common items from two arrays fast?", "body": "<p>I am trying to findy the common lines among two tab separated files based one field.\nOne line of the first file:</p>\n\n<pre><code>1       52854   s64199.1        A       .       .       .       PR      GT      0/0\n</code></pre>\n\n<p>One line of the second file:</p>\n\n<pre><code>chr1    52854     .       C       T       215.302 .       AB=0.692308;ABP=7.18621;AC=1;AF=0.5;AN=2;AO=9;CIGAR=1X;DP=13;DPB=13;DPRA=0;EPP=3.25157;EPPR=3.0103;GTI=0;LEN=1;MEANALT=1;MQM=60;MQMR=60;NS=1;NUMALT=1;ODDS=17.5429;PAIRED=0;PAIREDR=0.25;PAO=0;PQA=0;PQR=0;PRO=0;QA=318;QR=138;RO=4;RPP=3.25157;RPPR=5.18177;RUN=1;SAF=0;SAP=22.5536;SAR=9;SRF=1;SRP=5.18177;SRR=3;TYPE=snp;technology.illumina=1;BVAR  GT:DP:RO:QR:AO:QA:GL    0/1:13:4:138:9:318:-5,0,-5\n</code></pre>\n\n<p>Based on the second field (52854) in this example I have a much.\nHere is my code which finds the common ones, but my files are quite large and takes a lot of time.\nIs there any way to speed up the process?\nThank you very much in advance.</p>\n\n<pre><code>#!/app/languages/perl/5.14.2/bin/perl\nuse strict;\nuse warnings;\nmy $map_file = $ARGV[0];\nmy $vcf_file = $ARGV[1];\nopen my $map_info, $map_file or die \"Could not open $map_file: $!\";\n\nmy @map_array = ();\nmy @vcf_array = ();\nwhile( my $mline = &lt;$map_info&gt;)  {\n    chomp $mline;\n    my @data1 = split('\\t', $mline);\n    my $pos1 = $data1[1];\n    push (@map_array, $pos1);\n}\nopen my $vcf_info, $vcf_file or die \"Could not open $vcf_file: $!\";\nwhile( my $line = &lt;$vcf_info&gt;)  {\n    if ($line !~ m/^#/) {\n            push (@vcf_array, $line);\n    }\n}\nforeach my $a (@map_array) {\n    chomp $a;\nforeach my $b (@vcf_array) {\n            chomp $b;\n            my @data = split('\\t', $b);\n            my $pos2 = $data[1];\n            my $ref2 = $data[3];\n            my $allele = $data[4];\n            my $genotype = $data[9];\n            if ($a == $pos2) {\n               print $pos2 . \"\\t\" . $ref2. \"\\t\".$allele.\"\\t\".$genotype. \"\\n\";     \n            #print \"$b\\n\";\n            }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 2, "creation_date": 1435504976, "post_id": 31101252, "comment_id": 50218041, "body": "Have you tried anything yourself?"}], "answers": [{"tags": [], "owner": {"reputation": 1404, "user_id": 5042170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38b9d9b68e759ee2d234fefbccdf401?s=128&d=identicon&r=PG&f=1", "display_name": "HashSu", "link": "https://stackoverflow.com/users/5042170/hashsu"}, "is_accepted": false, "score": 1, "last_activity_date": 1435615350, "creation_date": 1435615350, "answer_id": 31126340, "question_id": 31101252, "link": "https://stackoverflow.com/questions/31101252/split-large-dataset-into-subsets-based-on-columns/31126340#31126340", "title": "split large dataset into subsets based on columns", "body": "<p>Have you got the answer if not : try this below</p>\n\n<pre><code>use strict;\nuse warnings;\nopen FH, \"&lt;input.txt\";\nmy @ARR = &lt;FH&gt;;\nmy (@MAIN, @one, @two, @thr, @fou);\nforeach (@ARR)\n{\n     push (@MAIN, $1), push (@one, $2),push (@two, $3),push (@thr, $4),push (@fou, $5), if($_ =~ /(\\S+)\\s+?(\\S+)\\s+?(\\S+)\\s+?(\\S+)\\s+?(\\S+)/);\n}\nforeach (1..4)\n{\n    open FH, \"&gt;FILE$_\".\".txt\";\n    my @ARR;\n    for(my $i = 0;$i&lt;@MAIN;$i++)\n    {\n        if($_ == 1){@ARR = @one;}\n        if($_ == 2){@ARR = @two;}\n        if($_ == 3){@ARR = @thr;}\n        if($_ == 4){@ARR = @fou;}\n        print FH $MAIN[$i],\"\\t\",$ARR[$i],\"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6121, "user_id": 1364945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pU9ds.gif?s=128&g=1", "display_name": "Kenosis", "link": "https://stackoverflow.com/users/1364945/kenosis"}, "is_accepted": true, "score": 1, "last_activity_date": 1435630040, "creation_date": 1435630040, "answer_id": 31128430, "question_id": 31101252, "link": "https://stackoverflow.com/questions/31101252/split-large-dataset-into-subsets-based-on-columns/31128430#31128430", "title": "split large dataset into subsets based on columns", "body": "<p>Perhaps the following will be helpful:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ( $col, @fhs );\n\n# Get header's columns\nmy @header = split ' ', &lt;&gt;;\n\n# open cols-1 files for appending (array of file handles); write their headers\nfor $col ( 1 .. $#header ) {\n    open $fhs[$col], '&gt;&gt;', \"file$col.txt\"\n      or die \"Unable to open file$col.txt: $!\";\n\n    print { $fhs[$col] } \"$header[0]\\t$header[$col]\\n\";\n}\n\n# split each record into fields; append fields as new records to their files\nwhile (&lt;&gt;) {\n    my @record = split;\n\n    for $col ( 1 .. $#header ) {\n        print { $fhs[$col] } \"$record[0]\\t$record[$col]\\n\";\n    }\n}\n</code></pre>\n\n<p>Usage: <code>perl script.pl dataFile</code></p>\n\n<p>This approach reads only one line at a time from your dataset, so there should be no problem processing \"a very large dataset.\"</p>\n"}, {"comments": [{"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1435726211, "post_id": 31129435, "comment_id": 50315059, "body": "my file contains 96 columns + row names in column 1. Does this change anything in the script"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1436781121, "post_id": 31129435, "comment_id": 50738448, "body": "<code>awk -v OFS=&quot;\\t&quot;</code> is just to set output separator, I didn&#39;t receive any error while testing, what os and version of awk you have ?"}, {"owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1436781646, "post_id": 31129435, "comment_id": 50738755, "body": "Sorry, it seems to be the missing tab. -vOFS"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "edited": false, "score": 0, "creation_date": 1436790196, "post_id": 31129435, "comment_id": 50743851, "body": "Okay, otherwise set it in BEGIN block like this <code>awk &#39;BEGIN{OFS=&quot;\\t&quot;}{ remaning code }&#39; file</code> if you are on <code>mawk</code> install <code>gawk</code>"}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": false, "score": 1, "last_activity_date": 1435637645, "creation_date": 1435637645, "answer_id": 31129435, "question_id": 31101252, "link": "https://stackoverflow.com/questions/31101252/split-large-dataset-into-subsets-based-on-columns/31129435#31129435", "title": "split large dataset into subsets based on columns", "body": "<p>You may try this</p>\n\n<pre><code>awk -vOFS=\"\\t\" '{for(i=2;i&lt;=NF;i++){ f=sprintf(\"file_%d.txt\",i-1); if(f in F){ print $1,$i &gt;&gt;f }else{ print $1,$i &gt;f; F[f]} close(f) }}' file\n</code></pre>\n\n<p><strong>Better Readable version</strong></p>\n\n<pre><code>awk -vOFS=\"\\t\" '{\n       # Loop through fields\n       for(i=2;i&lt;=NF;i++)\n       { \n            # Filename variable \n            f=sprintf(\"file_%d.txt\",i-1)\n\n            # If filename index exists in array F\n            # Append to file if exists\n            if(f in F)\n            { \n               print $1,$i &gt;&gt;f \n            }\n        else{ \n               # write to file\n               print $1,$i &gt;f \n\n               # Array F where key is filename\n               F[f]\n            } \n            # close file since we do not know how many columns exists \n            # in your original file, to avoid too many open files error\n            # we close everytime, and append if filename exists in array F\n            close(f) \n       }\n    }' file\n</code></pre>\n"}], "owner": {"reputation": 654, "user_id": 4033639, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/79757e1aaaebf7f131c462f5234bfe54?s=128&d=identicon&r=PG&f=1", "display_name": "BioMan", "link": "https://stackoverflow.com/users/4033639/bioman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 31128430, "answer_count": 3, "score": -4, "last_activity_date": 1435637645, "creation_date": 1435503909, "question_id": 31101252, "link": "https://stackoverflow.com/questions/31101252/split-large-dataset-into-subsets-based-on-columns", "title": "split large dataset into subsets based on columns", "body": "<p>I have a very large dataset (20000x97) that I want to split into multiple subsets where column 1 should be included in every subset then each of the remaining columns should be in separate files together with column 1. The output should be tab-separated. Please see example below.</p>\n\n<p>Mydata (example):</p>\n\n<pre><code>Seq                     124R 239G 361R 267G\nTGAGGTAGTAGTTTGTGCTGTTG 27  15  15  52\nCACCCGTAGAACCGACCTT 58  32  44  69\nTCAAGTAATCCAGGATAGGC    4   4   6   15\nTTTGGCAATGGTAGAACTCACACTGGTGAGGT    7   45  0   33\nCACCCGTAGAACCGACCTTGC   488 740 834 1784\nCTGAGACCTCTGGGTTCTGAGCT 20  11  4   33\nCCCATAAAGTAGAAAGCAC 47  53  56  235\nTACCCATTGCATATCGGAGTTGT 174 257 206 333\n</code></pre>\n\n<p>I want to split the file into subfiles like this:</p>\n\n<p>file1:</p>\n\n<pre><code>Seq                     124G\nTGAGGTAGTAGTTTGTGCTGTTG 27\nCACCCGTAGAACCGACCTT 58\nTCAAGTAATCCAGGATAGGC    4\nTTTGGCAATGGTAGAACTCACACTGGTGAGGT    7\nCACCCGTAGAACCGACCTTGC   488\nCTGAGACCTCTGGGTTCTGAGCT 20\nCCCATAAAGTAGAAAGCAC 47\nTACCCATTGCATATCGGAGTTGT 174\n</code></pre>\n\n<p>file2: </p>\n\n<pre><code>Seq                     239G\nTGAGGTAGTAGTTTGTGCTGTTG 15\nCACCCGTAGAACCGACCTT 32\nTCAAGTAATCCAGGATAGGC    4\nTTTGGCAATGGTAGAACTCACACTGGTGAGGT    45\nCACCCGTAGAACCGACCTTGC   740\nCTGAGACCTCTGGGTTCTGAGCT 11\nCCCATAAAGTAGAAAGCAC 53\nTACCCATTGCATATCGGAGTTGT 257\n</code></pre>\n\n<p>file3...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1435499798, "post_id": 31099749, "comment_id": 50216453, "body": "NTFS is not case-sensitive. It is case-preserving. If you want <code>textfile.txt</code> and you have <code>TextFile.tXt</code>, your Windows program will happily open it for you. You have to live with that. Now, Perl is neither Fortran nor BASIC, so case matters. If you have <code>package warnings</code> and you use <code>use WarningS</code>, there will be problems. Again, you have to live with that, and learn to type the correct name of the module in your program even though the file system does not distinguish between <code>warnings.pm</code> and <code>WarningS.PM</code>. #factsoflife."}, {"owner": {"reputation": 2056, "user_id": 605471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7dc80021316baa860f63afe2963783fd?s=128&d=identicon&r=PG", "display_name": "T-Bull", "link": "https://stackoverflow.com/users/605471/t-bull"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1435520012, "post_id": 31099749, "comment_id": 50222984, "body": "@Sinan&#220;n&#252;r: Obviously I know that. I couldn&#39;t have asked the question in the way I did if i didn&#39;t know that."}], "answers": [{"comments": [{"owner": {"reputation": 2056, "user_id": 605471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7dc80021316baa860f63afe2963783fd?s=128&d=identicon&r=PG", "display_name": "T-Bull", "link": "https://stackoverflow.com/users/605471/t-bull"}, "edited": false, "score": 0, "creation_date": 1435519863, "post_id": 31100173, "comment_id": 50222915, "body": "Interesting, wasn&#39;t aware of that. Turns out, Devel::Symdump is essentially a convenience wrapper around that."}], "tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": false, "score": 4, "last_activity_date": 1435530591, "last_edit_date": 1435530591, "creation_date": 1435496976, "answer_id": 31100173, "question_id": 31099749, "link": "https://stackoverflow.com/questions/31099749/list-all-packages-which-are-loaded-defined-not-installed/31100173#31100173", "title": "List all packages which are loaded/defined (not installed)", "body": "<p>Walk the symbol table.</p>\n\n<p>Start from <code>%::</code> and look at all keys whose names themselves end in <code>::</code>, and recurse.</p>\n"}, {"comments": [{"owner": {"reputation": 2056, "user_id": 605471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7dc80021316baa860f63afe2963783fd?s=128&d=identicon&r=PG", "display_name": "T-Bull", "link": "https://stackoverflow.com/users/605471/t-bull"}, "edited": false, "score": 0, "creation_date": 1435519805, "post_id": 31100556, "comment_id": 50222893, "body": "That&#39;s the way to go. More specifically, <code>Devel::Symdump-&gt;packages()</code> returns exactly what I was looking for."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 3, "last_activity_date": 1435499422, "creation_date": 1435499422, "answer_id": 31100556, "question_id": 31099749, "link": "https://stackoverflow.com/questions/31099749/list-all-packages-which-are-loaded-defined-not-installed/31100556#31100556", "title": "List all packages which are loaded/defined (not installed)", "body": "<p>Use <a href=\"https://metacpan.org/pod/Devel::Symdump\" rel=\"nofollow\">Devel::Symdump</a></p>\n\n<blockquote>\n<pre><code>require Devel::Symdump;\n@packs = qw(some_package another_package);\n$obj = Devel::Symdump-&gt;new(@packs);        # no recursion\n$obj = Devel::Symdump-&gt;rnew(@packs);       # with recursion\n# Methods\n@array = $obj-&gt;packages;\n@array = $obj-&gt;scalars;\n@array = $obj-&gt;arrays;\n@array = $obj-&gt;hashes;\n@array = $obj-&gt;functions;\n@array = $obj-&gt;filehandles;  # deprecated, use ios instead\n@array = $obj-&gt;dirhandles;   # deprecated, use ios instead\n@array = $obj-&gt;ios;\n@array = $obj-&gt;unknowns;     # only perl version &lt; 5.003 had some\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 2056, "user_id": 605471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7dc80021316baa860f63afe2963783fd?s=128&d=identicon&r=PG", "display_name": "T-Bull", "link": "https://stackoverflow.com/users/605471/t-bull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "accepted_answer_id": 31100556, "answer_count": 2, "score": 3, "last_activity_date": 1435530591, "creation_date": 1435494230, "last_edit_date": 1435529790, "question_id": 31099749, "link": "https://stackoverflow.com/questions/31099749/list-all-packages-which-are-loaded-defined-not-installed", "title": "List all packages which are loaded/defined (not installed)", "body": "<p><strong>Please read this question carefully before replying, it is often misunderstood.</strong></p>\n\n<p>I need a way to check if a particular <em>package</em> exists in the current interpreter. I figured there might be a way to list all loaded packages, so that I can search in that list. Let's have an example. This is a simple script which defines several packages:</p>\n\n<pre><code>#!/path/to/perl\n\npackage Foo;\n\n# some code in package Foo\n\npackage Bar;\n\n# some code in package Bar\n\npackage main;\n\n# main program. Want to have a list which includes 'Foo' and 'Bar'\n</code></pre>\n\n<p>As you can see, there's no <code>use</code> or <code>require</code> here. That's the point. I'm <em>not</em> looking for the modules installed on my system (those can be listed by traversing <code>@INC</code>). Nor do I look for the <em>modules</em> that have been <code>require</code>d (those are listed in <code>%INC</code>). I want to have a list of <em>packages</em> which are available to the runtime, i.e. which have been defined with a <code>package</code> statement. I guess it's equivalent to speak of a list of defined <em>namespaces</em>.</p>\n\n<h3>What could this be good for?</h3>\n\n<p>The thing is this. In a rather large project I often find myself refactoring the structure of my modules. That includes moving or renaming modules/packages. When renaming a module from <code>Util::Foo</code> to <code>Util::Bar</code>, 3 things have to be done.</p>\n\n<ul>\n<li>rename the module from <code>Util/Foo.pm</code> to <code>Util/Bar.pm</code></li>\n<li>modify the package statement from <code>package Util::Foo;</code> to <code>package Util::Bar;</code></li>\n<li>change the <code>use</code> clauses from <code>use Util::Foo;</code> to <code>use Util::Bar;</code></li>\n</ul>\n\n<p>If I do steps 1 and 3, but forget to modify the package statement, the module <code>Util::Bar</code> is loaded, but the package <code>Util::Bar</code> is not defined. Rather, the <code>Util::Foo</code> package is still defined. That leads to strange, incomprehensible warnings/errors when running the script. Perl won't point to the obvious error because defining a package within a module of another name is perfectly legal in Perl.</p>\n\n<p>Another oddity I came across is when I have a case-sensitivity mistake in the <code>use</code> clause. If I have a module <code>FooBar</code> which correctly defines the package <code>FooBar</code>, but I <code>use</code> the module/package <code>Foobar</code> (lowercase b), I get an instant error on a Unix system, because the module file is not found, but on a Windows system, a module file <em>is</em> found. If I then continue to use the wrong package name due to copy&amp;paste, method-not-found errors arise which are hard to track down. Similarly, I had strange errors with respect to overridden methods from a superclass in a situation like this.</p>\n"}, {"tags": ["javascript", "json", "angularjs", "perl"], "comments": [{"owner": {"reputation": 5766, "user_id": 4762763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5JJmA.jpg?s=128&g=1", "display_name": "sebastienbarbier", "link": "https://stackoverflow.com/users/4762763/sebastienbarbier"}, "edited": false, "score": 2, "creation_date": 1435491847, "post_id": 31099298, "comment_id": 50214122, "body": "Can you display on your server side <code>$cgi-&gt;param(&#39;mydata&#39;)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "edited": false, "score": 0, "creation_date": 1435492213, "post_id": 31099397, "comment_id": 50214212, "body": "I changed the code as per your suggestion. But still same issue. :("}], "tags": [], "owner": {"reputation": 2087, "user_id": 4963159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6MRMcyVfr1g/AAAAAAAAAAI/AAAAAAAAAFI/8i87JW1tlcg/photo.jpg?sz=128", "display_name": "Michele Ricciardi", "link": "https://stackoverflow.com/users/4963159/michele-ricciardi"}, "is_accepted": false, "score": 0, "last_activity_date": 1435491910, "last_edit_date": 1495540278, "creation_date": 1435491910, "answer_id": 31099397, "question_id": 31099298, "link": "https://stackoverflow.com/questions/31099298/malformed-json-string-error-while-passing-json-from-angularjs/31099397#31099397", "title": "malformed JSON string Error while passing JSON from AngularJS", "body": "<p>I think it may be related to this issue: <a href=\"https://stackoverflow.com/questions/19254029/angularjs-http-post-does-not-send-data\">AngularJs $http.post() does not send data</a></p>\n\n<p>Usually I would post data like this:</p>\n\n<pre><code>var req = {\n    url: '/cgi-bin/PlaceOrder.pl',\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json'},\n    data: {\"mydata\" : NewOrder}\n};  \n</code></pre>\n\n<p>However I am assuming that you are expecting the data as request params from this:</p>\n\n<pre><code>my $decdata = decode_json($cgi-&gt;param('mydata'));\n</code></pre>\n\n<p>If that is the case then the linked SO question is what you are looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "edited": false, "score": 0, "creation_date": 1435493713, "post_id": 31099566, "comment_id": 50214658, "body": "Hi Dev-One. I tried your suggestion. But i am still getting the same error."}, {"owner": {"reputation": 4199, "user_id": 3884734, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uEbDe.jpg?s=128&g=1", "display_name": "Sajal", "link": "https://stackoverflow.com/users/3884734/sajal"}, "reply_to_user": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "edited": false, "score": 0, "creation_date": 1435493851, "post_id": 31099566, "comment_id": 50214702, "body": "Can you share the server side function on how you are handling the request of the json object i.e $cgi-&gt; param(&#39;myData&#39;)"}, {"owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "edited": false, "score": 0, "creation_date": 1435494222, "post_id": 31099566, "comment_id": 50214789, "body": "I am handling like this:  my $decdata = decode_json($cgi-&gt;param(&#39;myData&#39;));"}, {"owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "edited": false, "score": 0, "creation_date": 1435494303, "post_id": 31099566, "comment_id": 50214814, "body": "Please be informed i am using Perl (not php), that&#39;s why using function decode_json (not json_decode)"}], "tags": [], "owner": {"reputation": 4199, "user_id": 3884734, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uEbDe.jpg?s=128&g=1", "display_name": "Sajal", "link": "https://stackoverflow.com/users/3884734/sajal"}, "is_accepted": false, "score": 0, "last_activity_date": 1435495225, "last_edit_date": 1435495225, "creation_date": 1435492957, "answer_id": 31099566, "question_id": 31099298, "link": "https://stackoverflow.com/questions/31099298/malformed-json-string-error-while-passing-json-from-angularjs/31099566#31099566", "title": "malformed JSON string Error while passing JSON from AngularJS", "body": "<p>Angular $http.post accepts two params as url and payload</p>\n\n<pre><code>   var url = '/cgi-bin/PlaceOrder.pl';\n   var payLoad = {'myData' :JSON.stringify(NewOrder)}; \n\n    $http.post(url, payLoad)\n    .success(function(data) {\n    console.log(success);\n    })\n</code></pre>\n\n<p>At the server side, while fetching the required json string from the request param and then desearlize the json as following:</p>\n\n<pre><code>    $result = $cgi-&gt;param('myData');\n    my $decdata = decode_json($result);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "edited": false, "score": 0, "creation_date": 1435680821, "post_id": 31142784, "comment_id": 50297247, "body": "Thanks neuro_sys. It works like a charm. I was struggling in this from couple of days. Your solution is just perfect. Thanks again"}], "tags": [], "owner": {"reputation": 745, "user_id": 1682781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247f1c0ca8cd2d73c8d61bdd94d48170?s=128&d=identicon&r=PG", "display_name": "neuro_sys", "link": "https://stackoverflow.com/users/1682781/neuro-sys"}, "is_accepted": true, "score": 3, "last_activity_date": 1435680309, "last_edit_date": 1435680309, "creation_date": 1435679103, "answer_id": 31142784, "question_id": 31099298, "link": "https://stackoverflow.com/questions/31099298/malformed-json-string-error-while-passing-json-from-angularjs/31142784#31142784", "title": "malformed JSON string Error while passing JSON from AngularJS", "body": "<p><code>$cgi-&gt;param('myData')</code> returns the query param string 'mydata', which in your case is not sent. </p>\n\n<p>You're posting the json data in the request body of your http post payload, and not as a query/form param. In that case, you'd need some other function to read the contents of the request body in your server-side script.</p>\n\n<p>which happens to be:\n<code>\nmy $data = $query-&gt;param('POSTDATA');\n</code></p>\n\n<p>as described in here: <a href=\"http://search.cpan.org/~lds/CGI.pm-3.43/CGI.pm#HANDLING_NON-URLENCODED_ARGUMENTS\" rel=\"nofollow\">http://search.cpan.org/~lds/CGI.pm-3.43/CGI.pm#HANDLING_NON-URLENCODED_ARGUMENTS</a></p>\n\n<p>Also you should remove the \"mydata=\" from your json in the body you post, because http request payload bodies do not have parameter names (they're for query/form-params only).</p>\n\n<p>Your end code should be like this:</p>\n\n<pre><code>var req = {\n    url: '/cgi-bin/PlaceOrder.pl',\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json'},\n    data: NewOrder\n}; \n</code></pre>\n\n<p>and the servers side:</p>\n\n<pre><code>my $decdata = decode_json($query-&gt;param('POSTDATA'));\n</code></pre>\n"}], "owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1440, "favorite_count": 0, "accepted_answer_id": 31142784, "answer_count": 3, "score": 3, "last_activity_date": 1435680309, "creation_date": 1435491186, "last_edit_date": 1435678050, "question_id": 31099298, "link": "https://stackoverflow.com/questions/31099298/malformed-json-string-error-while-passing-json-from-angularjs", "title": "malformed JSON string Error while passing JSON from AngularJS", "body": "<p>I am trying to pass JSON string in ajax request. This is my code.</p>\n\n<pre><code>    NewOrder =  JSON.stringify (NewOrder);\n    alert (NewOrder);\n\n    var req = {\n        url: '/cgi-bin/PlaceOrder.pl',\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json'},\n        data: \"mydata=\"+ NewOrder\n    };  \n\n    $http(req)\n    .success(function (data, status, headers, config) {\n        alert ('success');\n    })\n    .error(function (data, status, headers, config) {\n        alert (status);\n        alert (data);\n        alert ('Error')\n    });\n</code></pre>\n\n<p>alert (NewOrder) gives - </p>\n\n<pre><code>{\"ItemList\":[{\"ItemName\":\"Quality Plus Pure Besan 500 GM\",\"Quantity\":1,\"MRP\":\"28.00\",\"SellPrice\":\"25.00\"}],\"CustomerID\":1,\"DeliverySlot\":2,\"PaymentMode\":1}\n</code></pre>\n\n<p>Which seems to be a valid JSON string.</p>\n\n<p>But in script side I am getting following error. in this line</p>\n\n<pre><code>my $decdata = decode_json($cgi-&gt;param('mydata'));\n</code></pre>\n\n<p>malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before &quot;(end of string)&quot;) </p>\n\n<p>Can please someone help me why i am getting this error?</p>\n"}, {"tags": ["linux", "bash", "perl"], "comments": [{"owner": {"reputation": 11116, "user_id": 4539709, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0pdoL.jpg?s=128&g=1", "display_name": "0m3r", "link": "https://stackoverflow.com/users/4539709/0m3r"}, "edited": false, "score": 0, "creation_date": 1435488809, "post_id": 31098938, "comment_id": 50213350, "body": "See this <a href=\"http://www.cyberciti.biz/tips/renaming-multiple-files-at-a-shell-prompt.html\" rel=\"nofollow noreferrer\">Link</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1435497173, "post_id": 31098938, "comment_id": 50215658, "body": "Aren&#39;t there tons of duplicates to this around?"}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4159118, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kn28s.jpg?s=128&g=1", "display_name": "TonyStark", "link": "https://stackoverflow.com/users/4159118/tonystark"}, "is_accepted": false, "score": 1, "last_activity_date": 1435492319, "creation_date": 1435492319, "answer_id": 31099461, "question_id": 31098938, "link": "https://stackoverflow.com/questions/31098938/is-there-a-way-to-rename-bulk-of-files-in-linux/31099461#31099461", "title": "Is there a way to rename bulk of files in linux", "body": "<p>You can easily do:</p>\n\n<pre><code>i=0; for image in *.jpg; do mv \"$image\" \"smith_welding_`printf \"%.5d\"`$i.jpg\"; ((i++)); done\n</code></pre>\n\n<p>Output:\n<br>\n<code>smith_welding_000000.jpg \n smith_welding_000001.jpg \n smith_welding_000002.jpg</code></p>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 2, "last_activity_date": 1435494080, "creation_date": 1435494080, "answer_id": 31099728, "question_id": 31098938, "link": "https://stackoverflow.com/questions/31098938/is-there-a-way-to-rename-bulk-of-files-in-linux/31099728#31099728", "title": "Is there a way to rename bulk of files in linux", "body": "<p>There is Perl <code>rename</code> application. It is usually in package <code>rename</code> (Debian) or <code>perl-rename</code> or something like this.</p>\n\n<pre><code>$ cat `which /usr/bin/rename`\n#!/usr/bin/perl -w\n\neval 'exec /usr/bin/perl -w -S $0 ${1+\"$@\"}'\n    if 0; # not running under some shell\n# $Revision: 331 $$Date: 2013-04-30 21:23:41 +0100 (Tue, 30 Apr 2013) $\n# Robin's RCS header:\n# RCSfile: rename.PL,v Revision: 1.3   Date: 2006/05/25 09:20:32 \n# Larry's RCS header:\n#  RCSfile: rename,v   Revision: 4.1   Date: 92/08/07 17:20:30 \n#\n#  Log: rename,v \n# Revision 1.5  1998/12/18 16:16:31  rmb1\n# moved to perl/source\n# changed man documentation to POD\n#\n# Revision 1.4  1997/02/27  17:19:26  rmb1\n# corrected usage string\n#\n# Revision 1.3  1997/02/27  16:39:07  rmb1\n# added -v\n#\n# Revision 1.2  1997/02/27  16:15:40  rmb1\n# *** empty log message ***\n#\n# Revision 1.1  1997/02/27  15:48:51  rmb1\n# Initial revision\n#\n\nuse strict;\nuse File::Rename ();\nuse Pod::Usage;\n\nmain() unless caller;\n\nsub main {\n    my $options = File::Rename::Options::GetOptions\n        or pod2usage;\n\n    mod_version() if $options-&gt;{show_version};\n    pod2usage( -verbose =&gt; 2 ) if $options-&gt;{show_manual};\n    pod2usage( -exitval =&gt; 1 ) if $options-&gt;{show_help};\n\n    @ARGV = map {glob} @ARGV if $^O =~ m{Win}msx;\n\n    File::Rename::rename(\\@ARGV, $options);\n}\n\nsub mod_version {\n    print __FILE__ .\n        ' using File::Rename version '.\n        $File::Rename::VERSION .\"\\n\\n\";\n    exit 0\n}   \n\n1;\n\n__END__\n\n=head1 NAME\n\nrename - renames multiple files\n\n=head1 SYNOPSIS\n\nB&lt;rename&gt;\nS&lt;[ B&lt;-h&gt;|B&lt;-m&gt;|B&lt;-V&gt; ]&gt;\nS&lt;[ B&lt;-v&gt; ]&gt;\nS&lt;[ B&lt;-n&gt; ]&gt;\nS&lt;[ B&lt;-f&gt; ]&gt;\nS&lt;[ B&lt;-e&gt;|B&lt;-E&gt; I&lt;perlexpr&gt;]*|I&lt;perlexpr&gt;&gt;\nS&lt;[ I&lt;files&gt; ]&gt;\n\n=head1 DESCRIPTION\n\nC&lt;rename&gt;\nrenames the filenames supplied according to the rule specified as the\nfirst argument.\nThe I&lt;perlexpr&gt; \nargument is a Perl expression which is expected to modify the C&lt;$_&gt;\nstring in Perl for at least some of the filenames specified.\nIf a given filename is not modified by the expression, it will not be\nrenamed.\nIf no filenames are given on the command line, filenames will be read\nvia standard input.\n\nFor example, to rename all files matching C&lt;*.bak&gt; to strip the extension,\nyou might say\n\n        rename 's/\\e.bak$//' *.bak\n\nTo translate uppercase names to lower, you'd use\n\n        rename 'y/A-Z/a-z/' *\n\n=head1 OPTIONS\n\n=over 8\n\n=item B&lt;-v&gt;, B&lt;-verbose&gt;\n\nVerbose: print names of files successfully renamed.\n\n=item B&lt;-n&gt;, B&lt;-nono&gt;\n\nNo action: print names of files to be renamed, but don't rename.\n\n=item B&lt;-f&gt;, B&lt;-force&gt;\n\nOver write: allow existing files to be over-written.\n\n=item B&lt;-h&gt;, B&lt;-help&gt;\n\nHelp: print SYNOPSIS and OPTIONS.\n\n=item B&lt;-m&gt;, B&lt;-man&gt;\n\nManual: print manual page.\n\n=item B&lt;-V&gt;, B&lt;-version&gt;\n\nVersion: show version number.\n\n=item B&lt;-e&gt;\n\nExpression: code to act on files name.\n\nMay be repeated to build up code (like C&lt;perl -e&gt;).\nIf no B&lt;-e&gt;, the first argument is used as code.\n\n=item B&lt;-E&gt;\n\nStatement: code to act on files name, as B&lt;-e&gt; but terminated by ';'.\n\n=back\n\n=head1 ENVIRONMENT\n\nNo environment variables are used.\n\n=head1 AUTHOR\n\nLarry Wall\n\n=head1 SEE ALSO\n\nmv(1), perl(1)\n\n=head1 DIAGNOSTICS\n\nIf you give an invalid Perl expression you'll get a syntax error.\n\n=head1 BUGS\n\nThe original\nC&lt;rename&gt;\ndid not check for the existence of target filenames,\nso had to be used with care.\nI hope I've fixed that (Robin Barker).\n\n=cut\n</code></pre>\n\n<p>And this will do the trick:</p>\n\n<pre><code>rename 'our$i;$_=sprintf\"smith_welding_%06d.jpg\",++$i' *.jpg\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1367722, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b014b75ed07af8e1b223bc9d2da94c2f?s=128&d=identicon&r=PG", "display_name": "TenG", "link": "https://stackoverflow.com/users/1367722/teng"}, "is_accepted": false, "score": 0, "last_activity_date": 1435494672, "creation_date": 1435494672, "answer_id": 31099827, "question_id": 31098938, "link": "https://stackoverflow.com/questions/31098938/is-there-a-way-to-rename-bulk-of-files-in-linux/31099827#31099827", "title": "Is there a way to rename bulk of files in linux", "body": "<p>Look at the mmv command, which can handles patterns in the target name:</p>\n\n<p><a href=\"http://mylinuxbook.com/mmv-a-command-line-utility-to-move-copy-link-append-multiple-files-easily/\" rel=\"nofollow\">http://mylinuxbook.com/mmv-a-command-line-utility-to-move-copy-link-append-multiple-files-easily/</a></p>\n"}], "owner": {"reputation": 447, "user_id": 4534554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/47b20b231f30b4d198892a55000ada6d?s=128&d=identicon&r=PG", "display_name": "Cagri", "link": "https://stackoverflow.com/users/4534554/cagri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 1, "closed_date": 1436353082, "answer_count": 3, "score": 2, "last_activity_date": 1435494672, "creation_date": 1435488543, "last_edit_date": 1495540280, "question_id": 31098938, "link": "https://stackoverflow.com/questions/31098938/is-there-a-way-to-rename-bulk-of-files-in-linux", "closed_reason": "Duplicate", "title": "Is there a way to rename bulk of files in linux", "body": "<p>Is there a command in Shell/Bash or Perl that can rename all the files in a folder. </p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/8416990/shell-bash-shortcut-for-bulk-renaming-of-files-in-a-folder\">1</a>, counter was stayed same, but I would like to change counter as well.</p>\n\n<p>I am looking for here is in my folder documents with the following naming convention:</p>\n\n<pre><code>smith_welding_&lt;XXXXXX&gt;.jpg\n</code></pre>\n\n<p>Where <code>XXXXXX</code> is the counter and it is started from <code>001191</code> to <code>001254</code>.jpg</p>\n\n<p>I would like to rename all the files with the above given convention and the counter needs to be started from <code>000000</code>:</p>\n\n<pre><code>smith_welding_&lt;XXXXXX&gt;.jpg\n</code></pre>\n\n<p>Is there any command that can help me with the above?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1435485741, "post_id": 31098326, "comment_id": 50212444, "body": "See also <a href=\"http://stackoverflow.com/questions/953707/in-perl-how-can-i-read-an-entire-file-into-a-string\">how can I read an entire file into a string?</a> and <a href=\"http://stackoverflow.com/questions/206661/what-is-the-best-way-to-slurp-a-file-into-a-string-in-perl\">What is the best way to slurp a file into a string in Perl?</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1435561559, "post_id": 31098326, "comment_id": 50233306, "body": "The second isn&#39;t shorter. It only looks that way because you forgot that you needed error checking. Problems opening a file is the most common error!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435587227, "post_id": 31098326, "comment_id": 50249058, "body": "&quot;With my oneliners I often want to fetch a whole file inside a string.&quot; <code>perl -0777 -nwE &#39;say $_&#39; &#47;path&#47;to&#47;file</code>"}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1435486027, "post_id": 31098453, "comment_id": 50212538, "body": "Good hack, I like it. Unfortunately it is still very cryptical for newbies. Perl miss a native way to slurp files <i>i.e.</i> <code>$str = slurp($file)</code>"}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1435486153, "post_id": 31098453, "comment_id": 50212574, "body": "&quot;Perl 6 has a built in function to slurp in files. That is, to read the contents of a whole file into a scalar variable.&quot; <a href=\"http://perl6maven.com/perl6-files\" rel=\"nofollow noreferrer\">perl6maven.com/perl6-files</a>"}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435486395, "post_id": 31098453, "comment_id": 50212628, "body": "Perl 6 is still in alpha version. <a href=\"http://perl6.guide/\" rel=\"nofollow noreferrer\">perl6.guide</a>"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1435486732, "post_id": 31098453, "comment_id": 50212730, "body": "Yes and since 2001... I am afraid Perl will be dead before the first release of Perl 6 :("}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1472232108, "post_id": 31098453, "comment_id": 65685617, "body": "<a href=\"http://hastebin.com/irisonamog.pl\" rel=\"nofollow noreferrer\">hastebin.com/irisonamog.pl</a> modernized it for you."}], "tags": [], "owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "is_accepted": true, "score": 1, "last_activity_date": 1435486438, "last_edit_date": 1435486438, "creation_date": 1435485744, "answer_id": 31098453, "question_id": 31098326, "link": "https://stackoverflow.com/questions/31098326/shortest-way-to-read-a-whole-file-in-perl-with-ony-core-modules/31098453#31098453", "title": "Shortest way to read a whole file in Perl with ony core modules", "body": "<p>another way is:</p>\n\n<pre><code>my $file_content = do{local(@ARGV,$/)=$filename;&lt;&gt;};\n</code></pre>\n\n<blockquote>\n  <p>Cool, huh? This works by localizing @ARGV and saving $filename as the\n  first element of @ARGV. The empty diamond operator &lt;> automatically\n  opens a filehandle to the first element of @ARGV, which is the\n  filename. If you need to set a PerlIO layer, the filehandle name is\n  ARGV so you can use binmode to set the layer (before the file is\n  read!):</p>\n</blockquote>\n\n<p><a href=\"http://perltricks.com/article/21/2013/4/21/Read-an-entire-file-into-a-string\" rel=\"nofollow\">http://perltricks.com/article/21/2013/4/21/Read-an-entire-file-into-a-string</a></p>\n\n<blockquote>\n  <p>Perl 6 (still in alpha version) has a built in function to slurp in files. That is, to read the\n  contents of a whole file into a scalar variable.</p>\n</blockquote>\n\n<pre><code>my $data = slurp $filename;\n</code></pre>\n\n<p><a href=\"http://perl6maven.com/perl6-files\" rel=\"nofollow\">http://perl6maven.com/perl6-files</a></p>\n"}, {"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435487457, "post_id": 31098725, "comment_id": 50212928, "body": "Indeed it is good, but not part of core modules. Thus, it is not a very compatible solution :("}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 4, "creation_date": 1435502157, "post_id": 31098725, "comment_id": 50217195, "body": "I never understand why people are so against modules in Perl and only want to use the core library. The modules exist to help people and to save people having to write their own implementations of features. You never see many people in other languages like java saying i only want to use the core java library and no others jars."}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "edited": false, "score": 2, "creation_date": 1435574819, "post_id": 31098725, "comment_id": 50240774, "body": "not so rarely install a new module requires to local compile it and when you do &quot;make&quot; it fails."}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "edited": false, "score": 2, "creation_date": 1435575008, "post_id": 31098725, "comment_id": 50240895, "body": "second if you have a script that do something simple and you have to distribute it, you don&#39; like to have many dependencies."}, {"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 1, "creation_date": 1435582149, "post_id": 31098725, "comment_id": 50245515, "body": "File::Slurp is a pure Perl module, so compilation is not required in this case"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 0, "last_activity_date": 1435487178, "creation_date": 1435487178, "answer_id": 31098725, "question_id": 31098326, "link": "https://stackoverflow.com/questions/31098326/shortest-way-to-read-a-whole-file-in-perl-with-ony-core-modules/31098725#31098725", "title": "Shortest way to read a whole file in Perl with ony core modules", "body": "<p>There is a good module at CPAN to do that: <a href=\"https://metacpan.org/pod/File::Slurp\" rel=\"nofollow\">File::Slurp</a>, a Simple and Efficient Reading/Writing/Modifying of Complete Files</p>\n\n<pre><code># read in a whole file into a scalar variable ($text)\nmy $text = read_file( $filename ) ;\n</code></pre>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 1, "closed_date": 1435489030, "accepted_answer_id": 31098453, "answer_count": 2, "score": 2, "last_activity_date": 1435503430, "creation_date": 1435484962, "last_edit_date": 1435503430, "question_id": 31098326, "link": "https://stackoverflow.com/questions/31098326/shortest-way-to-read-a-whole-file-in-perl-with-ony-core-modules", "closed_reason": "Duplicate", "title": "Shortest way to read a whole file in Perl with ony core modules", "body": "<p>With my oneliners I often want to fetch a whole file inside a string. With only core modules the only solutions I know considering <code>$file = 'foo'</code> are:</p>\n\n<pre><code>$str = do {local $/; open $fh, '&lt;', $file; &lt;$fh&gt;};\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>$str = qx{cat $file};\n</code></pre>\n\n<p>The second method is shorter to write, easier to understand, but involves a lot more complexity behind the curtain (sys_execve). </p>\n\n<p>Is there any better way or a nice sugar that I don't know?</p>\n"}, {"tags": ["java", "regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "edited": false, "score": 0, "creation_date": 1435474066, "post_id": 31096842, "comment_id": 50209871, "body": "what is <code>$1</code>? how use it in <code>String.replaceAll</code>"}, {"owner": {"reputation": 39861, "user_id": 1076640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0VNy.jpg?s=128&g=1", "display_name": "yshavit", "link": "https://stackoverflow.com/users/1076640/yshavit"}, "reply_to_user": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "edited": false, "score": 0, "creation_date": 1435474162, "post_id": 31096842, "comment_id": 50209900, "body": "Do you know what it is in the original perl you posted? If not, that would be where to start, but that&#39;s a different question, and I&#39;d recommend you read up on Perl&#39;s regexes (and regexes in general). If you do understand that, I&#39;m not sure what the question is -- the String.replaceAll docs link to plenty of good docs."}, {"owner": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "edited": false, "score": 0, "creation_date": 1435474359, "post_id": 31096842, "comment_id": 50209936, "body": "The orginal code is here: <a href=\"https://github.com/sullo/nikto/blob/master/program/plugins/nikto_core.plugin\" rel=\"nofollow noreferrer\">github.com/sullo/nikto/blob/master/program/plugins/&hellip;</a> line 3000."}, {"owner": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "edited": false, "score": 0, "creation_date": 1435475368, "post_id": 31096842, "comment_id": 50210129, "body": "thanks for help.. <code>$1</code> is capture group. and <code>String.replaceAll</code> doesn&#39;t support capture group. <a href=\"http://stackoverflow.com/a/1277171/2730925\">stackoverflow.com/a/1277171/2730925</a> is used instead of replaceALL."}, {"owner": {"reputation": 39861, "user_id": 1076640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0VNy.jpg?s=128&g=1", "display_name": "yshavit", "link": "https://stackoverflow.com/users/1076640/yshavit"}, "reply_to_user": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "edited": false, "score": 1, "creation_date": 1435475397, "post_id": 31096842, "comment_id": 50210132, "body": "<code>String.replaceAll</code> absolutely supports capture groups. <code>&quot;hello world&quot;.replaceAll(&quot;l(\\\\w)&quot;, &quot;_$1&quot;)</code> results in &quot;he_lo wor_d&quot;."}, {"owner": {"reputation": 39861, "user_id": 1076640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0VNy.jpg?s=128&g=1", "display_name": "yshavit", "link": "https://stackoverflow.com/users/1076640/yshavit"}, "reply_to_user": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "edited": false, "score": 0, "creation_date": 1435475767, "post_id": 31096842, "comment_id": 50210231, "body": "But yes, if you need to do some processing on each capture (for instance, parsing it and then doing some operation on that parsed value), then you need the Matcher loop approach. In your case, it looks like it&#39;d be overkill -- but it would work."}], "tags": [], "owner": {"reputation": 39861, "user_id": 1076640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0VNy.jpg?s=128&g=1", "display_name": "yshavit", "link": "https://stackoverflow.com/users/1076640/yshavit"}, "is_accepted": true, "score": 2, "last_activity_date": 1435537143, "last_edit_date": 1435537143, "creation_date": 1435473119, "answer_id": 31096842, "question_id": 31096801, "link": "https://stackoverflow.com/questions/31096801/converting-perl-snippet-to-java/31096842#31096842", "title": "Converting perl snippet to java", "body": "<ul>\n<li>For <code>qr</code>, check out <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#compile-java.lang.String-\" rel=\"nofollow\"><code>Pattern.compile</code></a>, which throws a PatternSyntaxException if the given string isn't a valid regex.</li>\n<li>For <code>s///</code>, check out <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-\" rel=\"nofollow\"><code>String.replaceAll</code></a>.</li>\n<li><code>eval BLOCK</code> is named <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/try.html\" rel=\"nofollow\"><code>try</code></a> in Java.</li>\n</ul>\n\n<p>Putting it all together: you would want to invoke <code>Pattern.compile</code> in the body of a try-catch. If you catch a PatternSyntaxExpression, you would invoke rquote, and use <code>String.replaceAll</code> there.</p>\n"}], "owner": {"reputation": 780, "user_id": 2730925, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/64bf99d2f46bc8bb1631cb95a08bf929?s=128&d=identicon&r=PG&f=1", "display_name": "mrd abd", "link": "https://stackoverflow.com/users/2730925/mrd-abd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 31096842, "answer_count": 1, "score": -1, "last_activity_date": 1435537143, "creation_date": 1435472764, "question_id": 31096801, "link": "https://stackoverflow.com/questions/31096801/converting-perl-snippet-to-java", "title": "Converting perl snippet to java", "body": "<p>I want to rewrite a perl code in java:</p>\n\n<pre><code>sub validate_and_fix_regex {\n    my $regex = $_[0];\n    eval { qr/$regex/ };\n    if ($@) {\n        $regex = rquote($regex);\n    }\n    return $regex;\n}\n\nsub rquote {\n    my $string = $_[0] || return;\n    $string =~ s/([^A-Za-z_0-9 \"'\\\\])/\\\\$1/g;\n    return $string;\n}\n</code></pre>\n\n<p>the code gets a regex and fix it if it has any escaped character. i cant find any alternative for <code>eval { qr/$regex/ };</code> and <code>$string =~ s/([^A-Za-z_0-9 \"'\\\\])/\\\\$1/g;</code> in java.</p>\n"}, {"tags": ["linux", "apache", "perl", "fedora"], "comments": [{"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 1, "creation_date": 1435470015, "post_id": 31095775, "comment_id": 50209142, "body": "Suggest you look at your apache config file.Find section that defines cgi-bin as a valid folder to run scripts from, and add other folders you want. Also, your script and folder need execution rights, such as chmod files to 755."}, {"owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "edited": false, "score": 1, "creation_date": 1435563119, "post_id": 31095775, "comment_id": 50234188, "body": "Have a look at your Apache log file The reason for &#39;End of script..&#39; errors often appears there."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1435570690, "creation_date": 1435570690, "answer_id": 31112378, "question_id": 31095775, "link": "https://stackoverflow.com/questions/31095775/perl-cgi-end-of-script-output-before-headers/31112378#31112378", "title": "perl cgi &quot;End of script output before headers&quot;", "body": "<p>We can't diagnose your problem without further detail because what that error means is that apache didn't get that far with running your script.</p>\n\n<p>Now, as that's the first line of your script, it's likely that means apache couldn't run it at all.</p>\n\n<p>Usual culprits for this are:</p>\n\n<ul>\n<li>script not executable</li>\n<li>code otherwise broken such that it doesn't compile with <code>perl -c</code>. </li>\n</ul>\n\n<p>The solution would be to check your apache logs which would capture <code>STDERR</code> from when this is happening, and that'll help you diagnose it. </p>\n"}], "owner": {"reputation": 41, "user_id": 5057348, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ueHKgDDAsgk/AAAAAAAAAAI/AAAAAAAANJI/gqY-m6qPDpM/photo.jpg?sz=128", "display_name": "Thomas Kao", "link": "https://stackoverflow.com/users/5057348/thomas-kao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3093, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1435570690, "creation_date": 1435460935, "question_id": 31095775, "link": "https://stackoverflow.com/questions/31095775/perl-cgi-end-of-script-output-before-headers", "title": "perl cgi &quot;End of script output before headers&quot;", "body": "<p>Could anyone help me with this? This one bugs me for couple days...</p>\n\n<p>environment:<br />\nrunning a simple perl cgi script on fedora 21,<br />\nServer version: Apache/2.4.10 (Fedora),<br />\nThis is perl 5, version 18, subversion 4 (v5.18.4) built for x86_64-linux-thread-multi,<br />\ngetenforce: Permissive<br />\n<br />\nthe cgi script:</p>\n\n<pre><code>#!/usr/bin/perl\nprint \"Content-type: text/html\\n\\n\";\n\nuse strict;\nuse warnings;\nprint \"Hello, world!&lt;br /&gt;\\n\";\n\nforeach my $key (keys %ENV) {\n    print \"$key --&gt; $ENV{$key}&lt;br /&gt;\";\n}\n</code></pre>\n\n<p><br />\nproblem:<br />\nthe script won't run in 127.0.0.1/~username/subfolder/<br />\nI should knew how to setup perl-cgi environment, and the same code works on 127.0.0.1/cgi-bin, 127.0.0.1/cgi-bin/subfolder/, 127.0.0.1/~username/<br />\n<br />\nI always get \"End of script output before headers\" when execute script under user's subfolder. <br />\nCould anyone helps? Thanks</p>\n"}, {"tags": ["perl", "bots", "irc"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1435458752, "post_id": 31093909, "comment_id": 50207440, "body": "What makes you think <code>usleep</code> isn&#39;t working? Print out <code>Time::HiRes::time</code> before and after it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5056500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2add9c84794ffea576d8e9efd960c67?s=128&d=identicon&r=PG&f=1", "display_name": "z3l7or", "link": "https://stackoverflow.com/users/5056500/z3l7or"}, "edited": false, "score": 0, "creation_date": 1435450430, "post_id": 31094686, "comment_id": 50206063, "body": "Ok, thanks for the help. I will look through the Net::IRC docs for a specific command to do this."}], "tags": [], "owner": {"reputation": 4391, "user_id": 1768238, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/664064d00df3f2536ec209ab5df7df4c?s=128&d=identicon&r=PG", "display_name": "tilpner", "link": "https://stackoverflow.com/users/1768238/tilpner"}, "is_accepted": false, "score": 0, "last_activity_date": 1435448483, "creation_date": 1435448483, "answer_id": 31094686, "question_id": 31093909, "link": "https://stackoverflow.com/questions/31093909/how-can-i-get-these-perl-scripts-to-delay/31094686#31094686", "title": "How can I get these Perl scripts to delay?", "body": "<p><em>You're asking multiple questions, but I can only answer one from my phone</em></p>\n\n<p>You can change nicknames by sending</p>\n\n<pre><code>NICK newnick\n</code></pre>\n\n<p>Further information can be found in the <a href=\"https://tools.ietf.org/html/rfc2812#section-3.1.2\" rel=\"nofollow\">RFC 2812</a>.</p>\n\n<p>However, Net::IRC might have more appropriate means for that.</p>\n"}, {"tags": [], "owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "is_accepted": false, "score": 0, "last_activity_date": 1435467895, "creation_date": 1435467895, "answer_id": 31096331, "question_id": 31093909, "link": "https://stackoverflow.com/questions/31093909/how-can-i-get-these-perl-scripts-to-delay/31096331#31096331", "title": "How can I get these Perl scripts to delay?", "body": "<p>I have also had trouble from usleep from Time::HiRes. This should effect a sleep of 250ms:</p>\n\n<pre><code>select(undef, undef, undef, 0.25);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5056500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2add9c84794ffea576d8e9efd960c67?s=128&d=identicon&r=PG&f=1", "display_name": "z3l7or", "link": "https://stackoverflow.com/users/5056500/z3l7or"}, "is_accepted": true, "score": 0, "last_activity_date": 1435507880, "creation_date": 1435507880, "answer_id": 31101914, "question_id": 31093909, "link": "https://stackoverflow.com/questions/31093909/how-can-i-get-these-perl-scripts-to-delay/31101914#31101914", "title": "How can I get these Perl scripts to delay?", "body": "<p>Thank you for everyone's help. I was able to get the <code>usleep</code> command working and verify that it was delaying properly by changing the delay to a larger amount of seconds (e.g. <code>usleep(25000000)</code>, 25 seconds) and then changing back to 0.25 seconds by removing one <code>0</code> at a time. I also added <code>print Time::HiRes::time;</code> before and after to verify that the delay was working. I also found that the proper command to change nicks is <code>$self-&gt;nick($botnick2);</code>, even though it is nowhere to be found in any Net::IRC documentation. Once again, thank you all for the help and advice.</p>\n"}], "owner": {"reputation": 1, "user_id": 5056500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2add9c84794ffea576d8e9efd960c67?s=128&d=identicon&r=PG&f=1", "display_name": "z3l7or", "link": "https://stackoverflow.com/users/5056500/z3l7or"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 31101914, "answer_count": 3, "score": 0, "last_activity_date": 1435507880, "creation_date": 1435442054, "last_edit_date": 1592644375, "question_id": 31093909, "link": "https://stackoverflow.com/questions/31093909/how-can-i-get-these-perl-scripts-to-delay", "title": "How can I get these Perl scripts to delay?", "body": "<p>I'm making a simple IRC bot in Perl that can be used to &quot;hunt ducks&quot; in response to <a href=\"https://github.com/jnmtx/CloudBot/blob/gonzobot/plugins/duckhunt.py\" rel=\"nofollow noreferrer\">this IRC game bot</a>. I'm doing this on a private scripting channel, <code>irc.freenode.net ##duckhunt2</code> so as not to interfere with real people playing the game.</p>\n<p>So far I've tried making a Perl bot using <a href=\"https://metacpan.org/pod/Net::IRC\" rel=\"nofollow noreferrer\"><code>Net::IRC</code></a> and a plugin for XChat, <a href=\"https://github.com/pr1m4zu1/IRCHunterBot\" rel=\"nofollow noreferrer\">with my code here</a>. The duck source bot sends a message like</p>\n<pre><code>\u30fb\u309c\u309c\u30fb\u3002\u3002\u30fb\u309c\u309c\\_O&lt; quack!\n</code></pre>\n<p>a random amount of time in between 8-60 minutes since the last duck was shot to let you know that a duck has arrived. You can then reply with <code>.bang</code> to shoot the duck and get one point added to your score. However, if you reply too quickly (within one second), it puts you in a 2 hour cooldown mode where you can't shoot any ducks. Sometimes it also throws in 7 second cooldowns because of &quot;jammed guns&quot; and such, as shown in line 272 of the game bot code.</p>\n<h3>Perl code</h3>\n<pre><code>use Net::IRC;\nuse Time::HiRes qw(usleep nanosleep);\n\n$ducksource = 'DUCK_SOURCE';\n$server     = 'IRC_SERVER';\n$channel    = 'IRC_CHANNEL';\n$botnick    = 'BOT_NICKNAME';\n$botnick2   = 'BOT_BACKUP_NICKNAME';\n$password   = 'BOT_PASSWORD';\n$botadmin   = 'BOT_ADMIN_NICKNAME';\n\n$irc = new Net::IRC;\n\n$conn = $irc-&gt;newconn(\n    Nick     =&gt; $botnick,\n    Server   =&gt; $server,\n    Port     =&gt; IRC_SERVER_PORT,\n    Username =&gt; $botnick\n);\n\n$conn-&gt;add_global_handler('376',        \\&amp;on_connect);\n$conn-&gt;add_global_handler('disconnect', \\&amp;on_disconnect);\n$conn-&gt;add_global_handler('kick',       \\&amp;on_kick);\n$conn-&gt;add_global_handler('msg',        \\&amp;on_msg);\n$conn-&gt;add_global_handler('public',     \\&amp;on_public);\n\n$irc-&gt;start;\n\nsub on_connect {\n\n    $self = shift;\n\n    $self-&gt;privmsg('nickserv', &quot;identify $password&quot;);\n    $self-&gt;join($channel);\n\n    print &quot;Connected\\n&quot;;\n}\n\nsub on_disconnect {\n\n    $self = shift;\n\n    print &quot;Disconnected, attempting to reconnect\\n&quot;;\n    $self-&gt;connect();\n}\n\nsub on_kick {\n\n    $self = shift;\n\n    $self-&gt;join($channel);\n    $self-&gt;privmsg('nickserv', &quot;/nick $botnick&quot;);\n}\n\nsub on_msg {\n\n    $self  = shift;\n    $event = shift;\n\n    if ($event-&gt;nick eq $botadmin) {\n\n        foreach $arg ($event-&gt;args) {\n\n            if ($arg =~ m/uptime/) {\n                $self-&gt;privmsg($botadmin, `uptime`);\n            }\n        }\n    }\n}\n\nsub on_public {\n\n    $self  = shift;\n    $event = shift;\n\n    if ($event-&gt;nick eq $ducksource) {\n\n        foreach $arg ($event-&gt;args) {\n\n            if (($arg =~ m/&lt;/) &amp;&amp; ($arg !~ m/&gt;/)) {\n                usleep(250000);\n                $self-&gt;privmsg($channel, &quot;.bang&quot;);\n            }\n\n            if (   ($arg =~ m/missed/)\n                || ($arg =~ m/jammed/)\n                || ($arg =~ m/luck/)\n                || ($arg =~ m/WTF/)) {\n                $self-&gt;privmsg('nickserv', &quot;/nick $botnick2&quot;);\n                $self-&gt;privmsg($channel,   &quot;.bang&quot;);\n                $self-&gt;privmsg('nickserv', &quot;/nick $botnick&quot;);\n            }\n\n            if (($arg =~ m/script/) || ($arg =~ m/period/)) {\n                $self-&gt;privmsg('nickserv', &quot;/nick $botnick2&quot;);\n                $self-&gt;privmsg($channel,   &quot;.bang&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p>The Perl bot connects to the server, joins the chat room, and responds to a duck appearing, but I can't get it to delay the sending of the command <code>.bang</code> so that the game bot receives it after 1 second has passed and I don't go into the two-hour cooldown mode.</p>\n<p>I know that the Perl <code>sleep</code> command only accept multiples of one second. I need to delay 0.25 seconds because it takes about 0.75 seconds for the message to reach the game bot, so I've tried using Time::HiRes and the <code>usleep</code> command, which uses microseconds (1,000 microseconds = 1 millisecond).</p>\n<p>On line 61 of my code, I added <code>usleep(250000)</code> which should make the script pause for 0.25s before sending the message on the next line</p>\n<pre><code>$self-&gt;privmsg($channel, &quot;.bang&quot;)\n</code></pre>\n<p>But the script does not wait -- it just sends the message as normal. It acts like it is ignoring the <code>usleep</code> command.</p>\n<p>How can I fix this and make the bot wait before it sends the message?</p>\n<p>Secondly, I'm confused over how to change nicknames. If the game bot gives me a 7 second cooldown, I'd like to quickly change my nick to another nick (e.g. <code>HunterBot6000</code> to <code>HunterBot6000_</code>) shoot the duck (<code>.bang</code>), and change my nick back before another bot gets the duck. Typically you accomplish a nick change through the <code>/nick NEWNICK</code> command. However, I've tried sending this command to the channel and <em>NickServ</em>, and this doesn't change my nickname. How should I accomplish this?</p>\n<p>I also tried writing an XChat plugin for the script to see if that would get rid of the timing issue, but that doesn't work either. After connecting to the server and joining the chat room in XChat, I load the plugin, and I have the same issue -- it responds to ducks with <code>.bang</code> but I cannot get it to wait before sending.</p>\n<p>You can see the documentation <a href=\"http://xchatdata.net/Scripting/BasicPerlScript\" rel=\"nofollow noreferrer\"><em>Writing a simple XChat Perl Script</em></a>. What am I doing wrong?</p>\n"}, {"tags": ["perl", "filenames", "glob"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4971350, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/9facb63c95b9bdb43ed31e5825033e70?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/4971350/raven"}, "edited": false, "score": 0, "creation_date": 1435459670, "post_id": 31093977, "comment_id": 50207615, "body": "Thankyou soo much Sir! @Jim Davis"}, {"owner": {"reputation": 89, "user_id": 4971350, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/9facb63c95b9bdb43ed31e5825033e70?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/4971350/raven"}, "edited": false, "score": 0, "creation_date": 1435461556, "post_id": 31093977, "comment_id": 50207903, "body": "how about inserting a specific file name into a database? how can I apply the concept of basename?"}], "tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 7, "last_activity_date": 1435442624, "creation_date": 1435442624, "answer_id": 31093977, "question_id": 31093833, "link": "https://stackoverflow.com/questions/31093833/glob-function-in-perl-for-getting-filenames/31093977#31093977", "title": "glob() function in Perl for getting filenames", "body": "<p>You could use <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"noreferrer\"><code>File::Basename</code></a>:</p>\n\n<pre><code>use File::Basename;\nmy @files = glob('/Perl/Assignment/*');\nforeach my $file (@files){\n    print basename($file), \"\\n\";\n}\n</code></pre>\n\n<p>It's been a part of core Perl for a long time.</p>\n\n<p>(Have to use parens in this case because otherwise it thinks the <code>\"\\n\"</code> is an argument to <code>basename</code> instead of <code>print</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1435447645, "creation_date": 1435447645, "answer_id": 31094580, "question_id": 31093833, "link": "https://stackoverflow.com/questions/31093833/glob-function-in-perl-for-getting-filenames/31094580#31094580", "title": "glob() function in Perl for getting filenames", "body": "<p>If you give <code>glob</code> a path then it will return one. You can <code>chdir</code> to the directory and specify just the file name pattern, like this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nuse constant DIR =&gt; '/Perl/Assignment';\n\nchdir DIR;\n\nmy @files = glob '*';\n\nsay for @files;\n</code></pre>\n\n<p>or, if it is important that the working directory isn't changed then you can localise it using the <a href=\"https://metacpan.org/pod/File::chdir\" rel=\"nofollow\"><code>File::chdir</code></a> module, like this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nuse constant DIR =&gt; '/Perl/Assignment';\n\nmy @files = do {\n    local $CWD = DIR;\n    glob '*';\n};\n\nsay for @files;\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4971350, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/9facb63c95b9bdb43ed31e5825033e70?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/4971350/raven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18652, "favorite_count": 0, "accepted_answer_id": 31093977, "answer_count": 2, "score": 2, "last_activity_date": 1435447645, "creation_date": 1435441484, "question_id": 31093833, "link": "https://stackoverflow.com/questions/31093833/glob-function-in-perl-for-getting-filenames", "title": "glob() function in Perl for getting filenames", "body": "<p>How can I get the specific name of a file stored in a particular folder using glob() function? I have a sample source code below but having different output, it rather displays the complete path of the file instead of showing only the specific file name. How can I retrieve the file name only from the path set or how can I directly access and get the specific file name? thanks!</p>\n\n<pre><code>@files = glob('/Perl/Assignment/*');\nforeach $files(@files){\n    print \"$files\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>/Perl/Assignment/file1.txt\n/Perl/Assignment/file2.txt\n/Perl/Assignment/file3.txt\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>file1.txt\nfile2.txt\nfile3.txt\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435437455, "post_id": 31092986, "comment_id": 50202979, "body": "Parallel::ForkManager"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1435439738, "post_id": 31092986, "comment_id": 50203602, "body": "Can&#39;t you use a Unix shell for this purpose, such as <code>bash</code>?"}, {"owner": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435440330, "post_id": 31092986, "comment_id": 50203762, "body": "There are other parts to the script that are much easier with the power of Perl"}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435437190, "post_id": 31093199, "comment_id": 50202894, "body": "What is the purpose of <code>&#39;-|&#39;</code>? Could you give an example of forking?"}], "tags": [], "owner": {"reputation": 28073, "user_id": 377037, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fb2956c6a757f40f0ee02aa30fd2090f?s=128&d=identicon&r=PG", "display_name": "Tom van der Woerdt", "link": "https://stackoverflow.com/users/377037/tom-van-der-woerdt"}, "is_accepted": false, "score": 0, "last_activity_date": 1435436868, "creation_date": 1435436868, "answer_id": 31093199, "question_id": 31092986, "link": "https://stackoverflow.com/questions/31092986/call-several-other-scripts-async/31093199#31093199", "title": "Call Several Other Scripts Async", "body": "<p>Perl and parallel don't go well together, but here are a few thoughts :</p>\n\n<ul>\n<li><code>fork()</code> a few times, and manage each child independently</li>\n<li>Perl allows you to open filehandles to processes: <code>open my $fh, '-|', 'command_to_run.sh'</code>. You could use this and poll those handles</li>\n<li>Fork them to the background and store their process IDs</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435448293, "post_id": 31093284, "comment_id": 50205654, "body": "How can I check if each one is still running, and kill them?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435455801, "post_id": 31093284, "comment_id": 50206960, "body": "You mean manually? <code>ps</code> and <code>kill</code> as usual. If automatically, then when?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435455892, "post_id": 31093284, "comment_id": 50206975, "body": "By the way, the redirection of STDOUT is optional. You said something that hinted you might not want to see the output of the children, so I included it as a demonstration."}, {"owner": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435456679, "post_id": 31093284, "comment_id": 50207114, "body": "Okay, thanks! How can I store the PID of each for later use?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "edited": false, "score": 0, "creation_date": 1435458239, "post_id": 31093284, "comment_id": 50207361, "body": "<code>$pm-&gt;running_procs</code> returns the PIDs of the active children at any moment in time, but you&#39;re probably more interested in setting up <code>on_start</code> and <code>on_finish</code> callbacks. The PID of the process that was started or reaped is passed to the callback as the first argument. See update."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1435458156, "last_edit_date": 1435458156, "creation_date": 1435437606, "answer_id": 31093284, "question_id": 31092986, "link": "https://stackoverflow.com/questions/31092986/call-several-other-scripts-async/31093284#31093284", "title": "Call Several Other Scripts Async", "body": "<pre><code>use Parallel::ForkManager qw( );\n\nuse constant MAX_SIMUL_CHILDREN =&gt; 10;\n\nmy $pm = Parallel::ForkManager-&gt;new(MAX_SIMUL_CHILDREN);\nfor my $cmd (@cmds) {\n   $pm-&gt;start()\n      and next;\n\n   open(STDOUT, '&gt;', '/dev/null')\n      or die($!);\n\n   exec($cmd)\n      or die($!);\n\n   $pm-&gt;finish();  # Never reached, but that's ok.\n}\n\n$pm-&gt;wait_all_children();\n</code></pre>\n\n<hr>\n\n<p>Adding the following before the loop will log the PID of the children.</p>\n\n<pre><code>$pm-&gt;run_on_start(sub {\n   my ($pid, $ident) = @_;\n   print(\"Child $pid started.\\n\");\n});\n\n$pm-&gt;run_on_finish(sub {\n   my ($pid, $exit_code, $ident, $exit_signal) = @_;\n   if ($exit_signal)  { print(\"Child $pid killed by signal $exit_signal.\\n\"); }\n   elsif ($exit_code) { print(\"Child $pid exited with error $exit_code.\\n\"); }\n   else               { print(\"Child $pid completed successfully.\\n\"); }\n});\n</code></pre>\n\n<p><code>$ident</code> is the value passed to <code>$pm-&gt;start()</code>. It can be used to give a \"name\" to a process.</p>\n"}], "owner": {"reputation": 596, "user_id": 4379392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/627c210cc69fd889aa62c9e2409fa933?s=128&d=identicon&r=PG", "display_name": "Rogue", "link": "https://stackoverflow.com/users/4379392/rogue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1435458156, "creation_date": 1435435493, "question_id": 31092986, "link": "https://stackoverflow.com/questions/31092986/call-several-other-scripts-async", "title": "Call Several Other Scripts Async", "body": "<p>I know there a lot of ways to do this, but because there are so many I don't know which one to choose.  </p>\n\n<p>What I want to accomplish:<br>\n1. Start several child scripts<br>\n2. Be able to check if they are running<br>\n3. Be able to kill them<br>\n4. I DON'T need to capture their output, and their output does not need to be displayed.</p>\n\n<p>Each of these scripts is in their own file.</p>\n\n<p>I haven't done scripting in a while and I'm stuck in an OOP mindset, so forgive me if I say something ridiculous.</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 798372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/383ba8f2609a21395b37850a84dc137f?s=128&d=identicon&r=PG", "display_name": "Chris Dennis", "link": "https://stackoverflow.com/users/798372/chris-dennis"}, "edited": false, "score": 0, "creation_date": 1435491002, "post_id": 31098895, "comment_id": 50213934, "body": "Excellent.  Thanks for that -- I&#39;ll give it a try."}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 1, "last_activity_date": 1435488295, "creation_date": 1435488295, "answer_id": 31098895, "question_id": 31092776, "link": "https://stackoverflow.com/questions/31092776/how-much-magic-can-dbixclassrowset-columns-do/31098895#31098895", "title": "How much magic can DBIx::Class::Row::set_columns do?", "body": "<p>This feature isn't core although it is planned.\nCurrently there is the <a href=\"https://metacpan.org/release/DBIx-Class-ResultSet-RecursiveUpdate\" rel=\"nofollow\">DBIx::Class::ResultSet::RecursiveUpdate</a> module that implements this.</p>\n"}], "owner": {"reputation": 927, "user_id": 798372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/383ba8f2609a21395b37850a84dc137f?s=128&d=identicon&r=PG", "display_name": "Chris Dennis", "link": "https://stackoverflow.com/users/798372/chris-dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 31098895, "answer_count": 1, "score": 0, "last_activity_date": 1435488295, "creation_date": 1435433849, "question_id": 31092776, "link": "https://stackoverflow.com/questions/31092776/how-much-magic-can-dbixclassrowset-columns-do", "title": "How much magic can DBIx::Class::Row::set_columns do?", "body": "<p>Is <a href=\"http://search.cpan.org/~ribasushi/DBIx-Class-0.082820/lib/DBIx/Class/Row.pm#set_columns\" rel=\"nofollow\">DBIx::Class::Row::set_columns</a> clever enough to update prefetched child rows?</p>\n\n<p>I've tried it, and it doesn't seem to be.  I'm probably expecting too much magic.</p>\n\n<p>I did something like this:</p>\n\n<pre><code>my $data = {\n    id =&gt; 1,\n    date =&gt; '2015-06-27',\n    # etc.\n    invoice_lines =&gt; [{\n        id =&gt; 101,\n        # etc.\n    ]},\n};\nmy $rs = $schema-&gt;resultset('Invoice')-&gt;search(\n    { 'me.id' =&gt; $id },\n    { prefetch =&gt; 'invoice_lines' },\n)-&gt;first;\n$rs-&gt;set_columns($data);\n</code></pre>\n\n<p>and got something like this:</p>\n\n<pre><code>SELECT me.id, me.date, ..., invoice_lines.id, ... FROM invoices me LEFT \nJOIN invoice_lines invoice_lines ON invoice_lines.invoice_id = me.id WHERE ( me.id = ? ) ORDER BY me.id: '1'\nMojo::Reactor::EV: Read failed: DBIx::Class::Row::get_column(): No such column 'invoice_lines' on MyProg::DB::Schema::Result::Invoice at /home\n/chris/stuff/Invoices.pm line 289\n</code></pre>\n\n<p>It thinks 'invoice_lines' is just another column, rather than a relationship.  The relationships are working properly when inserting into or reading from the database, so I haven't included all the gory details.</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1435440457, "post_id": 31091164, "comment_id": 50203804, "body": "Is it running out of memory?  You might try using <a href=\"https://metacpan.org/pod/App::cpanminus\" rel=\"nofollow noreferrer\">cpanm</a> instead."}], "answers": [{"comments": [{"owner": {"reputation": 22423, "user_id": 196507, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ctXYp.png?s=128&g=1", "display_name": "lepe", "link": "https://stackoverflow.com/users/196507/lepe"}, "edited": false, "score": 1, "creation_date": 1490769902, "post_id": 31100482, "comment_id": 73254467, "body": "in short, use cpanm (in Ubuntu the package is called cpanminus, and the way of installing a module is: cpanm Log::Log4perl)"}, {"owner": {"reputation": 58753, "user_id": 33522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/3MBg6.png?s=128&g=1", "display_name": "chovy", "link": "https://stackoverflow.com/users/33522/chovy"}, "edited": false, "score": 0, "creation_date": 1609758460, "post_id": 31100482, "comment_id": 115913394, "body": "how to do on arch?"}], "tags": [], "owner": {"reputation": 3217, "user_id": 21987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e82fa3d3e0a99a93777b65a4ccda8126?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/21987/joel"}, "is_accepted": true, "score": 5, "last_activity_date": 1435498882, "last_edit_date": 1495535459, "creation_date": 1435498882, "answer_id": 31100482, "question_id": 31091164, "link": "https://stackoverflow.com/questions/31091164/cpan-getting-killed-when-installing-loglog4perl/31100482#31100482", "title": "cpan getting killed when installing Log::Log4perl", "body": "<p>It appears that this is a resource issue and it looks like other people have had <a href=\"http://www.perlmonks.org/?node_id=214426\" rel=\"nofollow noreferrer\">similar</a> <a href=\"http://www.perlmonks.org/?node_id=781809\" rel=\"nofollow noreferrer\">issues</a> with this as well.  At the point in the run that you're showing, CPAN is trying to slurp that entire 02packages.details.txt.gz file into memory which is causing your OS to kill the process.</p>\n\n<p>Take a look at <a href=\"https://stackoverflow.com/a/11110491/21987\">this answer</a> for instructions on how to use cpanm, or you could try downloading the module as a gz and run <code>perl Makefile.PL &amp;&amp; make &amp;&amp; make install</code>.</p>\n"}], "owner": {"reputation": 55556, "user_id": 197606, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/14da0a77145571d61cee03ac6bb0fb35?s=128&d=identicon&r=PG", "display_name": "Webnet", "link": "https://stackoverflow.com/users/197606/webnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2308, "favorite_count": 0, "accepted_answer_id": 31100482, "answer_count": 1, "score": 2, "last_activity_date": 1435498882, "creation_date": 1435424007, "question_id": 31091164, "link": "https://stackoverflow.com/questions/31091164/cpan-getting-killed-when-installing-loglog4perl", "title": "cpan getting killed when installing Log::Log4perl", "body": "<p>I'm trying to install the perl module <code>Log::Log4perl</code> on a basic Digital Ocean server through Ubuntu as a backup tool I'm trying to use depends on it but it keeps saying \"Killed\".  <strong>Could anyone with experience with cpan provide some guidiance on where I can find a log file telling me what the problem is?</strong></p>\n\n<pre><code>$ cpan Log::Log4perl\nReading '/root/.cpan/sources/authors/01mailrc.txt.gz'\n............................................................................DONE\nReading '/root/.cpan/sources/modules/02packages.details.txt.gz'\n  Database was generated on Sat, 27 Jun 2015 12:17:02 GMT\n  HTTP::Date not available\n..............\n  New CPAN.pm version (v2.10) available.\n  [Currently running version is v2.00]\n  You might want to try\n    install CPAN\n    reload cpan\n  to both upgrade CPAN.pm and run the new version without leaving\n  the current session.\n\n\n............Killed\n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 46143, "user_id": 7498, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa6a7a12f4cd03bc8c98fa8e9af9ad41?s=128&d=identicon&r=PG", "display_name": "innaM", "link": "https://stackoverflow.com/users/7498/innam"}, "edited": false, "score": 1, "creation_date": 1435400848, "post_id": 31087594, "comment_id": 50192343, "body": "So what is the problem? What have you tried so far and how did that fail?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063739"}, "reply_to_user": {"reputation": 46143, "user_id": 7498, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa6a7a12f4cd03bc8c98fa8e9af9ad41?s=128&d=identicon&r=PG", "display_name": "innaM", "link": "https://stackoverflow.com/users/7498/innam"}, "edited": false, "score": 0, "creation_date": 1435401219, "post_id": 31087594, "comment_id": 50192445, "body": "I don&#39;t know how to ignore &#39;&gt;&#39; of every line and 1 more problem is that every protein contains sequence on new line so how to write code for it ?"}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1435403510, "post_id": 31087594, "comment_id": 50193089, "body": "Your output isn&#39;t a CSV. There should be some delimiter separating fields, like a comma."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063739"}, "edited": false, "score": 0, "creation_date": 1435403934, "post_id": 31087594, "comment_id": 50193206, "body": "I want to save it in spreadsheet. Like Id will be save in Id column only."}, {"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "edited": false, "score": 0, "creation_date": 1435415633, "post_id": 31087594, "comment_id": 50196374, "body": "With all of these folks writing free code, why hasn&#39;t anybody used <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel\" rel=\"nofollow noreferrer\">metacpan.org/pod/Spreadsheet::WriteExcel</a> yet?"}], "answers": [{"comments": [{"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1435549543, "post_id": 31088013, "comment_id": 50229513, "body": "As with fugu&#39;s solution, I can&#39;t be certain why the down vote, but a Perl solution was requested. (And if you take issue with this, I agree, I don&#39;t know what that should matter; that part isn&#39;t justified.)  Also the solution while compact is to me a little cryptic.  I think it would be helpful to have a description in English as to what that sed is doing so that if some of the assumptions that it requires are not met it may give an idea of what/where to change."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063739"}, "edited": false, "score": 0, "creation_date": 1435554958, "post_id": 31088013, "comment_id": 50230826, "body": "I understand csv files. look I want to convert that text file in spreadsheet. Because its very huge file. First i want to delete all this &#39;&gt;&#39; signs. then 1st column will be ID consists of name protein (LPT_ECOLI next row AK1H_ECOLI etc) 2nd column will be Length (190-255 (Clockwise) next row 337-2799 (clockwise)) 3rd column name ( Thr operon leader peptide next row  (Bifunctional) 4th column sequence etc. Like that. As my text file is very big, so I am trying to use array."}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1435590198, "post_id": 31088013, "comment_id": 50251225, "body": "I don&#39;t see the connection between &quot;text file is very big&quot;  necessitating &quot;tyring to use array&quot;?  None of the solutions given use arrays, although one uses a hash table as noted."}], "tags": [], "owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "is_accepted": false, "score": 2, "last_activity_date": 1435638171, "last_edit_date": 1435638171, "creation_date": 1435402920, "answer_id": 31088013, "question_id": 31087594, "link": "https://stackoverflow.com/questions/31087594/conversion-text-file-into-csv-using-perl/31088013#31088013", "title": "Conversion text file into csv using perl", "body": "<p>With a somewhat awkward <code>sed</code> script:</p>\n\n<pre><code>sed -nE '/^[0-9]+[ \\t]+&gt;/ { s/^[0-9]+[ \\t]+&gt;[ \\t]+//; h; n; x; G; s/\\n/,/; s/[ \\t]*,[ \\t]*/,/g; p }'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>LPT_ECOLI,190-255 (Clockwise),Thr operon leader peptide,KRISTTITTTITITTGNGAG\nAK1H_ECOLI,337-2799 (Clockwise),Bifunctional aspartokinase/homoserine dehydrogenase I,MRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n\n<p>This you can import in your spreadsheet as CSV.</p>\n\n<p><strong>Edit:</strong> Same thing with Perl if you insist:</p>\n\n<pre><code>perl -lpe 'chomp($_ .= \",\" . &lt;&gt;) if (s/^\\d+\\s*&gt;\\s*//o); s/\\s*,\\s*/,/g'\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4063739"}, "edited": false, "score": 0, "creation_date": 1435404117, "post_id": 31088079, "comment_id": 50193246, "body": "Thanks rocky but its giving output same as input format not in table form or in list. And yes input file have standard format."}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 1, "creation_date": 1435404190, "post_id": 31088079, "comment_id": 50193270, "body": "I don&#39;t think you understand what a CSV is. <a href=\"http://edoceo.com/utilitas/csv-file-format\" rel=\"nofollow noreferrer\">edoceo.com/utilitas/csv-file-format</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063739"}, "edited": false, "score": 0, "creation_date": 1435404394, "post_id": 31088079, "comment_id": 50193341, "body": "OK, is it possible to create table in txt format only?"}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 1, "creation_date": 1435404616, "post_id": 31088079, "comment_id": 50193411, "body": "&quot;txt format only&quot; is pretty vague. How are you going to figure out where fields end in this &quot;txt only format&quot;?   As lcd047 wrote, you would import this into a spreadsheet program. Please edit your question to clarify what you mean. If this is in a standard format, is it in one of the formats that BIoPerl understands? Also, are you able or willing to put any effort into coding?"}], "tags": [], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1435404990, "last_edit_date": 1435404990, "creation_date": 1435403376, "answer_id": 31088079, "question_id": 31087594, "link": "https://stackoverflow.com/questions/31087594/conversion-text-file-into-csv-using-perl/31088079#31088079", "title": "Conversion text file into csv using perl", "body": "<p>And in Perl:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict; use warnings;\nopen(my $fh, \"&lt;\", \"foo.data\") || die;\nmy $last_was_rec_start = 0;\nmy ($id, $len, $name);\nforeach (my $lineno=1; my $line = &lt;$fh&gt;; $lineno++ ) {\n    chomp($line);\n    if ($last_was_rec_start) {\n        # Add validation that line matches protein sequence?\n        print \"${id},${len},${name}',$line\\n\";\n        $last_was_rec_start = 0;\n        next;\n    }\n    my @fields = split(/,\\s+/, $line);\n    unless (scalar(@fields) == 3) {\n        print STDERR \"Malformed line ${lineno}; expecting 3 comma-delimited fields:\\n${line}\\n\";\n        next;\n    };\n    $len = $fields[1];\n    $name = $fields[2];\n    unless ($fields[0] =~ /\\d+ &gt; (.*)/) {\n        print STDERR \"Malformed line ${lineno}; expecting number &gt;\\n${line}\\n\";\n        next;\n    }\n    $last_was_rec_start = 1;\n    $id = $1;\n}\n</code></pre>\n\n<p>Which gives this output on your example: </p>\n\n<pre><code>LPT_ECOLI,190-255 (Clockwise),Thr operon leader peptide',KRISTTITTTITITTGNGAG\nAK1H_ECOLI,337-2799 (Clockwise),Bifunctional aspartokinase/homoserine dehydrogenase I',MRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n\n<p>Basically the code starts off by reading lines splitting on comma or \",\". The first field sub-matched to find remove the number >. After we find a line match\nthe line after is taken as a sequence line.</p>\n\n<p>However, you might also want to look at <a href=\"http://www.bioperl.org/wiki/Main_Page\" rel=\"nofollow\">Bio::Perl</a>. It can probably write CSV files and if your input in some standard format it might be able to read that as well.</p>\n"}, {"comments": [{"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1435549242, "post_id": 31088878, "comment_id": 50229443, "body": "Dunno why the down vote, but the requirement that ID&#39;s are unique wasn&#39;t explicitly indicated and doesn&#39;t feel needed. If the data is huge, then keeping that hash around is going to slow things down. That said, it&#39;s also true that the problem domain and requirements is also not clear.  So this might be perfectly fine."}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 2, "last_activity_date": 1435408911, "creation_date": 1435408911, "answer_id": 31088878, "question_id": 31087594, "link": "https://stackoverflow.com/questions/31087594/conversion-text-file-into-csv-using-perl/31088878#31088878", "title": "Conversion text file into csv using perl", "body": "<p>Provided your <code>IDS</code> are unique this will do what you want:</p>\n\n<pre><code>my ($id, $length, $name, $sequence);\nmy %data;\nwhile(&lt;DATA&gt;){\n    chomp;\n    my @split = split(/,/); \n    ($id, $length, $name) = @split[0..2] if /^\\d+/;\n    $id =~ s/^\\d+\\s&gt;\\s//;\n    $data{$id} = [$name, $length, $_] if /^[A-Z]/;  \n}\n\n\nopen my $out, '&gt;', 'out.csv' or die $!;\nprint $out \"Id,Length,Name,Sequence\\n\";\n\nforeach my $id (sort keys %data){\n    ($length, $name, $sequence) = @{$data{$id}};\n    print $out \"$id,$length,$name,$sequence\\n\";\n\n}\n\n__DATA__\n1 &gt; LPT_ECOLI, 190-255 (Clockwise), Thr operon leader peptide \nKRISTTITTTITITTGNGAG\n2 &gt; AK1H_ECOLI, 337-2799 (Clockwise), Bifunctional aspartokinase/homoserine dehydrogenase I\nMRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n\n<p>This works by splitting your data on <code>,</code> and building a hash of arrays, using the ids as keys and the other information as values. This can then be printed to a <code>.csv</code> file. </p>\n"}, {"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1435413880, "last_edit_date": 1435413880, "creation_date": 1435413064, "answer_id": 31089506, "question_id": 31087594, "link": "https://stackoverflow.com/questions/31087594/conversion-text-file-into-csv-using-perl/31089506#31089506", "title": "Conversion text file into csv using perl", "body": "<p>Below please find sample code - in working wersion replace <code>&lt;DATA&gt;</code> with <code>&lt;STDIN&gt;</code> and use execute it as <code>script &lt; input-file &gt; output-file</code></p>\n\n<pre><code>use strict; use warnings;\n\n# print CSV header line\nprint \"N, Id, Length, Name, Sequence\\n\";\n\nmy($line1,$line2);\nwhile( defined($line1=&lt;DATA&gt;) and defined($line2=&lt;DATA&gt;)) {\n  # put two input lines slurped above into $_\n  local $_ = $line1 . $line2;\n\n  my ($N, $Id, $Length, $Name, $Sequence ) = m{\n    ^(\\d{1,6}) # $N - record numer (?)\n    \\x20&gt;\\x20\n    ([A-Z1-9_]{1,128}?) # $Id\n    \\x20*,\\x20*\n    ([- ()0-9A-Za-z]{1,128}?) # Length\n    \\x20*,\\x20*\n    ([^,\\\"\\'\\n\\r]{1,256}?) # $Name\n    # the quotes (\\\"\\') are escaped/backslashed to make SO syntax coloring work\n    \\x20*\\r?\\n\n    ([A-Z]{1,4096}?) # $Sequence\n    \\r?\\n\n  }sox or die \"wrong line format (line $.):\\n $_\";\n  printf \"%d, %s, %s, %s, %s\\n\", $N, $Id, $Length, $Name, $Sequence;\n}\ndie if defined($line1); # incoplete set of input lines;\n__DATA__\n1 &gt; LPT_ECOLI, 190-255 (Clockwise), Thr operon leader peptide\nKRISTTITTTITITTGNGAG\n2 &gt; AK1H_ECOLI, 337-2799 (Clockwise), Bifunctional aspartokinase/homoserine dehydrogenase I\nMRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6121, "user_id": 1364945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pU9ds.gif?s=128&g=1", "display_name": "Kenosis", "link": "https://stackoverflow.com/users/1364945/kenosis"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1435427180, "post_id": 31090922, "comment_id": 50199819, "body": "@fugu - Yes, by concatenating the two reads from the DATA file handle."}], "tags": [], "owner": {"reputation": 6121, "user_id": 1364945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pU9ds.gif?s=128&g=1", "display_name": "Kenosis", "link": "https://stackoverflow.com/users/1364945/kenosis"}, "is_accepted": false, "score": 2, "last_activity_date": 1435422488, "creation_date": 1435422488, "answer_id": 31090922, "question_id": 31087594, "link": "https://stackoverflow.com/questions/31087594/conversion-text-file-into-csv-using-perl/31090922#31090922", "title": "Conversion text file into csv using perl", "body": "<p>Here's another option:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile ( my $lines = &lt;DATA&gt; . &lt;DATA&gt; ) {\n    print join (',', ( split /&gt;\\s+|,\\s+|\\n/, $lines )[ 1 .. 4 ]), \"\\n\";\n}\n\n__DATA__\n1 &gt; LPT_ECOLI, 190-255 (Clockwise), Thr operon leader peptide\nKRISTTITTTITITTGNGAG\n2 &gt; AK1H_ECOLI, 337-2799 (Clockwise), Bifunctional aspartokinase/homoserine dehydrogenase I\nMRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>LPT_ECOLI,190-255 (Clockwise),Thr operon leader peptide,KRISTTITTTITITTGNGAG\nAK1H_ECOLI,337-2799 (Clockwise),Bifunctional aspartokinase/homoserine dehydrogenase I,MRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n\n<p>The <code>while</code> loop starts by reading in two lines at a time.  The <code>split</code> uses a regex to split those lines on \" >\" or \", \" or \"\\n\", and then <code>join</code>s  elements 1-4 from the <code>split</code> with a comma and <code>print</code>s the results.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4063739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1608, "favorite_count": 0, "answer_count": 5, "score": -3, "last_activity_date": 1435638171, "creation_date": 1435400288, "last_edit_date": 1435401720, "question_id": 31087594, "link": "https://stackoverflow.com/questions/31087594/conversion-text-file-into-csv-using-perl", "title": "Conversion text file into csv using perl", "body": "<p>I have long text file and I want to convert it in spreadsheet. It consists of Id, Name, Length and sequence. Every new protein starts with (>) sign and order are Id, name Length and sequence on new line</p>\n\n<p>Example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1 &gt; LPT_ECOLI, 190-255 (Clockwise), Thr operon leader peptide \nKRISTTITTTITITTGNGAG\n2 &gt; AK1H_ECOLI, 337-2799 (Clockwise), Bifunctional aspartokinase/homoserine dehydrogenase I\nMRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAP\n</code></pre>\n\n<p>Output </p>\n\n<p>Table will be</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Id Length Name Sequence\nLPT_ECOLI 90-255(Clockwisw) Thr operon lader peptide KRISTTITTT\n</code></pre>\n"}, {"tags": ["perl", "web-scraping", "www-mechanize-firefox"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435413911, "post_id": 31086611, "comment_id": 50195910, "body": "Unless your inputs have IDs, the only way I can see to do this is with <a href=\"https://metacpan.org/pod/WWW::Mechanize::Firefox#mech-eval_in_page-str-env-document\" rel=\"nofollow noreferrer\"><code>eval</code></a>. I can&#39;t test, but it seems like it should work."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1435440158, "post_id": 31086611, "comment_id": 50203729, "body": "I&#39;ve never used <code>WWW::Mechanize::Firefox</code>, but I&#39;d consider switching to <a href=\"http://search.cpan.org/perldoc?Selenium::Remote::Driver\" rel=\"nofollow noreferrer\">Selenium::Remote::Driver</a>."}], "answers": [{"tags": [], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "is_accepted": true, "score": 1, "last_activity_date": 1435415549, "creation_date": 1435415549, "answer_id": 31089839, "question_id": 31086611, "link": "https://stackoverflow.com/questions/31086611/how-do-i-set-a-value-with-wwwmechanizefirefox-when-there-are-three-input-t/31089839#31089839", "title": "How do I set a value with WWW::Mechanize::Firefox when there are three &lt;input&gt; tags with the same name?", "body": "<p>I managed to get it working with <code>eval_in_page</code>:</p>\n\n<pre><code>$mech -&gt; eval_in_page(\n  'document.getElementsByName(\"search_term\")[0].value = \"' . $value_search . '\"'\n);\n</code></pre>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 1, "accepted_answer_id": 31089839, "answer_count": 1, "score": 2, "last_activity_date": 1435415549, "creation_date": 1435392843, "last_edit_date": 1435397527, "question_id": 31086611, "link": "https://stackoverflow.com/questions/31086611/how-do-i-set-a-value-with-wwwmechanizefirefox-when-there-are-three-input-t", "title": "How do I set a value with WWW::Mechanize::Firefox when there are three &lt;input&gt; tags with the same name?", "body": "<p>I am using <code>WWW::Mechanize::Firefox</code> to automate some interaction with a web page. Evertyhing works well until I reach a page where I want the script to enter a specific value into an <code>&lt;input...&gt;</code> box. Unfortunatly, this page has three <code>&lt;input...</code> boxes with exaclty the same name:</p>\n\n<pre><code>&lt;input name=\"search_term\" value=\"\" class=\"inputbox\" type=\"text\"&gt;\n</code></pre>\n\n<p>The line in the perl script used to fill the value is</p>\n\n<pre><code>$mech -&gt; field('search_term', $value_search);\n</code></pre>\n\n<p>Since the name <em>search_term</em> does not identify exactly one <code>&lt;input&gt;</code> tag, the script halts with this error message:</p>\n\n<pre><code>3 elements found for input with name 'search_term' ....\n</code></pre>\n\n<p>So, is there a way to indicate which of the three <code>&lt;input&gt;</code> I want to fill?</p>\n\n<p><strong>Edit</strong></p>\n\n<p><em>ThisSuitIsBlackNot</em> points out that according to the documentation I should be able to set a third parameter to indicate which of multiple matching elements I refer to. Obviously, this third parameter is ignored so that</p>\n\n<pre><code>$mech -&gt; field('search_term', $value_search, 1);\n</code></pre>\n\n<p>still halts with the same error message as without explicitely setting the third parameter.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1864610"}, "edited": false, "score": 0, "creation_date": 1435384497, "post_id": 31085615, "comment_id": 50188752, "body": "And your question is...?"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1435384848, "post_id": 31085615, "comment_id": 50188807, "body": "i can&#39;t add 2 level file in there respective folder"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1435385124, "post_id": 31085615, "comment_id": 50188847, "body": "in second level it have 2 folder:- (1) meta-inf and (2)oebps and in both it have some file but when i add file them, than all file are added in main dir which is 9781471839108_epub. i don&#39;t know why? :("}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1435480520, "post_id": 31085615, "comment_id": 50211190, "body": "is any one can solve my problem ?"}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1435596707, "post_id": 31120297, "comment_id": 50255255, "body": "Thanks a lot for this reply and today i am also try with addTree() and its working. But you are great for me bcz i am very new with perl"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1435596841, "post_id": 31120297, "comment_id": 50255325, "body": "how can i contact you because i am sure again i need your help so please give me any contact reference like fb, what&#39;up, BBM, etc.."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435595240, "last_edit_date": 1435595240, "creation_date": 1435593492, "answer_id": 31120297, "question_id": 31085615, "link": "https://stackoverflow.com/questions/31085615/use-perl-to-add-a-directory-and-its-files-and-subdirectories-to-a-zip-archive/31120297#31120297", "title": "Use Perl to add a directory and its files and subdirectories to a zip archive", "body": "<p>The main problem is that you're specifically using <code>basename</code> to trim the path information from each file or directory that you store. If you had left the full path intact it would have reflected the disk directory structure in the zip archive</p>\n\n<p>There is also no need to walk the file paths yourself, as the <code>Archive::Zip</code> methods <code>addTree</code> and <code>addTreeMatching</code> will do that for you</p>\n\n<p>You haven't explained what you're trying to do, but from your Perl code it looks like you just want to store a whole directory structure in a zip file. There is one test in there</p>\n\n<pre><code>if ( $isbn_folder =~ m/([0-9a-zA-Z])/ )\n</code></pre>\n\n<p>which I think is there just to remove the <code>.</code> and <code>..</code> pseudo-directories</p>\n\n<p>The directory that you select for storage is the <em>last</em> subdirectory of the current directory, which you can find with</p>\n\n<pre><code>my $base_folder = ( grep -d, glob '*')[-1];\n</code></pre>\n\n<p>and you can save that to the zip archive with a call to <code>addTree</code>, as shown below</p>\n\n<p>I have used a <code>select</code> parameter that you can use to choose which files and directories are added to the archive. In this case it always returns <em>true</em>, so everything is archived, but it serves as a useful log of what files are being stored</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse Archive::Zip qw/ :ERROR_CODES :MISC_CONSTANTS /;\n\nuse constant ZIP_FILE =&gt; 'D:\\perl\\Tool\\Test\\making_epub\\temp.zip';\n\nSTDOUT-&gt;autoflush;\n\nmy $base_folder = ( grep -d, glob '*')[-1];\n\nmy $zip = Archive::Zip-&gt;new;\n\n$zip-&gt;addTree({\n  root =&gt; $base_folder,\n  select =&gt; sub {\n    say \"Storing $_\";\n    1;\n  },\n  compressionLevel = DEFLATING_COMPRESSION_NORMAL,\n});\n\n$zip-&gt;writeToFileNamed(ZIP_FILE) == AZ_OK or die \"Failed to save zip file: $!\";\n\nsay \"\\nZip file written\";\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1167, "favorite_count": 0, "accepted_answer_id": 31120297, "answer_count": 1, "score": -2, "last_activity_date": 1435595240, "creation_date": 1435384020, "last_edit_date": 1435594010, "question_id": 31085615, "link": "https://stackoverflow.com/questions/31085615/use-perl-to-add-a-directory-and-its-files-and-subdirectories-to-a-zip-archive", "title": "Use Perl to add a directory and its files and subdirectories to a zip archive", "body": "<p>This is the folder structure </p>\n\n<pre><code>9781471839108_epub\n    - 9781471839108_epub_ncx_r1.ncx\n    - 9781471839108_epub_opf_r1.opf\n    - mimetype\n    meta-inf\n        - container.xml\n    oebps\n        - ack.htm\n        - ch01.htm\n        audio\n            - 1.mp3\n        images\n            - 1-1.jpg\n</code></pre>\n\n<hr>\n\n<p>When I want to put file in second level folder ( <code>meta-inf</code> and <code>oebps</code>) all files are put in the main folder </p>\n\n<p>How can I put files in their respective folders like \nin <code>meta-inf</code> folder I want to put <code>container.xml</code> file </p>\n\n<hr>\n\n<p>Below is the coding which is done by me</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Cwd;\nmy $dir = getcwd;\n\nuse Archive::Zip;\nuse Archive::Zip qw( :ERROR_CODES );\nuse File::Basename 'basename';\n\nmy $zip         = Archive::Zip-&gt;new();\nmy $isbn_folder = \"0\";\n\nopendir( min_dir, $dir ) or die \"Cannot open $dir: $!\";\n\nforeach my $min_file ( readdir min_dir ) {\n    if ( -d $min_file ) {\n        $isbn_folder = $min_file;\n    }\n}\nclosedir min_dir;\n\nmy $isbn_folder_path = \"$dir/$isbn_folder\";\nopendir( isbn_dir, $isbn_folder_path ) or die \"Cannot open $dir: $!\";\nmy @isbn_files = readdir( isbn_dir );\nclosedir isbn_dir;\n\nforeach my $isbn_file ( @isbn_files ) {\n\n    if ( -f \"$isbn_folder_path/$isbn_file\" ) {\n\n        my @member = $isbn_file;\n\n        foreach my $member ( @member ) {\n            my $mine_file_path_add = \"$isbn_folder_path/$member\";\n            my $member             = basename $mine_file_path_add;\n            $zip-&gt;addFile( $mine_file_path_add, $member )\n                or die 'unable to add file to archive';\n        }\n    }\n\n    if ( -d \"$isbn_folder_path/$isbn_file\" ) {\n\n        my @isbn_folder = $isbn_file;\n\n        foreach my $isbn_folder ( @isbn_folder ) {\n\n            if ( $isbn_folder =~ m/([0-9a-zA-Z])/ ) {\n\n                my @isbn_folder1 = $isbn_folder;\n\n                foreach my $isbn_folder1 ( @isbn_folder1 ) {\n\n                    my $mine_file_path_add = \"$isbn_folder_path/$isbn_folder1\";\n                    my $member             = basename $mine_file_path_add;\n\n                    $zip-&gt;addDirectory( '$mine_file_path_add/', $member )\n                        or die 'unable to add file to archive';\n\n#__________I have problem to put this file on there respective dir______________\n\n                    opendir( oebps_dir, $mine_file_path_add )\n                        or die \"Cannot open $dir: $!\";\n                    my @isbn_folder = readdir( oebps_dir );\n                    closedir oebps_dir;\n\n                    foreach my $isbn_folder ( @isbn_folder ) {\n\n                        if ( -f \"$mine_file_path_add/$isbn_folder\" ) {\n\n                            my @member = $isbn_folder;\n\n                            foreach my $member ( @member ) {\n                                my $mine_file_path_add =\n                                    \"$mine_file_path_add/$member\";\n                                my $member = basename $mine_file_path_add;\n                                $zip-&gt;addFile( $mine_file_path_add, $member )\n                                    or die 'unable to add file to archive';\n                            }\n                        }\n                    }\n\n#____________________________________\n                }\n            }\n        }\n    }\n}\n\nunless ( $zip-&gt;writeToFileNamed( \"d:/perl/Tool/Test/making_epub/temp.zip\" ) ==\n    AZ_OK ) {\n    die \"whoops!\";\n}\n</code></pre>\n"}, {"tags": ["angularjs", "perl"], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 5052168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188616bee15e43ff497704be646d2fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjith S", "link": "https://stackoverflow.com/users/5052168/ranjith-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1435387252, "creation_date": 1435387252, "answer_id": 31085967, "question_id": 31085049, "link": "https://stackoverflow.com/questions/31085049/not-able-to-upload-the-file-on-server-angularjs-and-perl/31085967#31085967", "title": "Not able to upload the file on server (AngularJS and Perl)", "body": "<p>Try using file-model, this code works for me</p>\n\n<pre><code>&lt;input type=\"file\" file-model=\"myFile\"/&gt;\n\nvar fd = new FormData();\nfd.append('file', $scope.myFile);\n$http.post(uploadUrl, fd, {\n  transformRequest: angular.identity,\n  headers: {'Content-Type': undefined}\n})\n.success(function(){\n //success\n})\n .error(function(){\n //failure\n});\n</code></pre>\n"}], "owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435387252, "creation_date": 1435378114, "question_id": 31085049, "link": "https://stackoverflow.com/questions/31085049/not-able-to-upload-the-file-on-server-angularjs-and-perl", "title": "Not able to upload the file on server (AngularJS and Perl)", "body": "<p>This is my file upload code.</p>\n\n<pre><code>&lt;input type=\"file\" name=\"file\" onchange=\"angular.element(this).scope().uploadFile(this.files)\"/&gt;\n\n\n$scope.uploadFile = function(files) {\n    var fd = new FormData();\n    //Take the first selected file\n    fd.append(\"file\", files[0]);\n\n    $http.post(\"http://admin.localhost/cgi-bin/upload.pl\", fd, {\n        withCredentials: true,\n        headers: {'Content-Type': undefined },\n        transformRequest: angular.identity\n    }).success(function(){\n            alert ('success');\n        })\n        .error(function(){\n            alert ('error');\n        })\n};\n</code></pre>\n\n<p>Perl Code</p>\n\n<pre><code>#!c:/perl64/bin/perl.exe\n\nuse strict;\nuse warnings;\nuse DBI;\nuse CGI::Carp qw(warningsToBrowser fatalsToBrowser);\nuse CGI;\nuse CGI qw(:standard);\nuse JSON;\nuse CGI::Carp qw ( fatalsToBrowser );\nuse File::Basename;\n\n#send the obligatory Content-Type\nprint \"Content-Type: text/html\\n\\n\"; \n\n$CGI::POST_MAX = 1024 * 5000;\nmy $safe_filename_characters = \"a-zA-Z0-9_.-\";\n\nmy $cgi = new CGI();\nmy $upload_dir = \"admin.localhost/images/dummy\"; #location on our server  \nmy $filename = \"dummy.png\";\n\nmy $upload_filehandle = $cgi-&gt;upload(\"file\");\nprint $upload_filehandle;\n\nopen UPLOADFILE, \"&gt;../..$upload_dir$filename\"  or die $!;\nbinmode UPLOADFILE;\n\nwhile ( &lt;$upload_filehandle&gt; )\n{\n    print UPLOADFILE;\n}\nclose UPLOADFILE;\n</code></pre>\n\n<p>Although alert in controller is coming success, but file is not getting uploaded on the server.</p>\n\n<p>Can please some one help me what i m missing or what is wrong?</p>\n"}, {"tags": ["string", "perl", "if-statement", "concatenation"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 6, "creation_date": 1435355208, "post_id": 31082584, "comment_id": 50183528, "body": "There may be more than one way to do string concatenation, but using <code>+</code> is not one of those ways."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 6, "creation_date": 1435355896, "post_id": 31082584, "comment_id": 50183758, "body": "Nor is <code>==</code> the way to assign values."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1435356968, "post_id": 31082584, "comment_id": 50184080, "body": "You also have a logic error: only the first non-empty field will be appended to <code>$Description</code>, since you&#39;re using <code>elsif</code>. I assume this is just pseudo-code, though."}, {"owner": {"reputation": 115, "user_id": 2898004, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2b7fa59f891c13f6386b91e3ba56d3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Sinford", "link": "https://stackoverflow.com/users/2898004/mark-sinford"}, "edited": false, "score": 0, "creation_date": 1435357376, "post_id": 31082584, "comment_id": 50184180, "body": "I&#39;m a dope.. I&#39;m bouncing back and forth between C# and Perl for this application and this week got the best of me.  I&#39;m actually in C# for this, hence the colossal formatting mistakes.  Forgive me, guys... my apologies."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 2, "creation_date": 1435363019, "post_id": 31082584, "comment_id": 50185569, "body": "The real solution is of course to split those fields in the database. Storing concatenated values like that violates 1NF."}], "answers": [{"comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 2, "creation_date": 1435355747, "post_id": 31082643, "comment_id": 50183712, "body": "<code>join &#39; &#39;, grep length &gt; 0, $Year, $Make, $Model, $Color, $ColorLower, $Style</code> will work as well."}, {"owner": {"reputation": 115, "user_id": 2898004, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2b7fa59f891c13f6386b91e3ba56d3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Sinford", "link": "https://stackoverflow.com/users/2898004/mark-sinford"}, "edited": false, "score": 0, "creation_date": 1435357440, "post_id": 31082643, "comment_id": 50184197, "body": "Great solutions.. which I&#39;ll implement once I figure out what language I&#39;m coding today.  I&#39;m sure others will find the beauty in these one-liners.  Thanks!"}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 2, "creation_date": 1435385155, "post_id": 31082643, "comment_id": 50188855, "body": "There&#39;s no need for the <code>&gt; 0</code> test.  Lengths can&#39;t be negative, and 0 is false in Perl.  <code>grep { length $_ }</code> would be more idiomatic."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1435392690, "post_id": 31082643, "comment_id": 50190348, "body": "@cjm: Good point so <code>join &#39; &#39;, grep length, $Year, ...</code> is sufficient."}], "tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 5, "last_activity_date": 1435355188, "creation_date": 1435355188, "answer_id": 31082643, "question_id": 31082584, "link": "https://stackoverflow.com/questions/31082584/perl-concatenate-non-empty-strings/31082643#31082643", "title": "Perl - Concatenate non-empty strings", "body": "<p>Perhaps something like this:</p>\n\n<pre><code>$desc = join ' ', grep { length $_ &gt; 0 }\n  $Year, $Make, $Model, $Color, $ColorLower, $Style;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 8, "creation_date": 1435385277, "post_id": 31083345, "comment_id": 50188869, "body": "The string <code>0</code> is also false.  Based on the names, those variables are unlikely to be 0, but it&#39;s generally better to say <code>length</code> when that&#39;s what you mean."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435359648, "creation_date": 1435359648, "answer_id": 31083345, "question_id": 31082584, "link": "https://stackoverflow.com/questions/31082584/perl-concatenate-non-empty-strings/31083345#31083345", "title": "Perl - Concatenate non-empty strings", "body": "<p>There is no need for the length test. An empty string is <em>false</em>, so this will work</p>\n\n<pre><code>$desc = join ' ', grep $_, $year, $make, $model, $color, $color_lower, $style;\n</code></pre>\n\n<p>It's also worth pointing out that capital letters are reserved for Perl global identifiers such as package names. Mixed-case identifiers are also particularly difficult for those who don't have English as their first language, and <a href=\"https://en.wikipedia.org/wiki/Snake_case\" rel=\"nofollow\"><em>Wikipedia</em> has this to say</a></p>\n\n<blockquote>\n  <p><strong><em>\"At least one study found that readers can recognize snake case values more quickly than <code>CamelCase</code>\"</em></strong></p>\n</blockquote>\n"}], "owner": {"reputation": 115, "user_id": 2898004, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2b7fa59f891c13f6386b91e3ba56d3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Sinford", "link": "https://stackoverflow.com/users/2898004/mark-sinford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 31082643, "answer_count": 2, "score": 0, "last_activity_date": 1435359648, "creation_date": 1435354889, "question_id": 31082584, "link": "https://stackoverflow.com/questions/31082584/perl-concatenate-non-empty-strings", "title": "Perl - Concatenate non-empty strings", "body": "<p>I'm in need of a little help \"optimizing\" my code because I'm convinced there's a better, cleaner way to do it.  I have 6 variables that are created by being parsed out of a longer string:</p>\n\n<pre><code>Year\nMake\nModel\nColor\nColorLower\nStyle\n</code></pre>\n\n<p>Depending on the record I may have details in some or all of these variables. In most cases, though, some are blank.  Following the variables being populated I add them into a database field that is the description of a car/vehicle.</p>\n\n<p>Currently my if/else block goes one by one and if a variable has a non-zero length, the concatenated description variable </p>\n\n<pre><code>if (length($Year)&gt;0)\n{\n    $Description == $Description + \" \" + Year\n}\nelsif (length($Make) &gt; 0)\n    $Description == $Description + \" \" + $Make\n}   ...and so on\n</code></pre>\n\n<p>TMTOWTDI definitely applies here, and I always marvel at the elegant one-liners that the experts come up with.  Although what I have now is working, I'd be interested in hearing is there is a shorter, more compact way that I could maximize my code.</p>\n\n<p>Thanks all.</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435354491, "post_id": 31081758, "comment_id": 50183285, "body": "Never used them, but maybe <a href=\"https://metacpan.org/pod/CPAN::Inject\" rel=\"nofollow noreferrer\"><code>CPAN::Inject</code></a> or <a href=\"https://metacpan.org/pod/CPAN::Mini::Inject\" rel=\"nofollow noreferrer\"><code>CPAN::Mini::Inject</code></a> could be useful."}, {"owner": {"reputation": 1, "user_id": 5054424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bdD15.png?s=128&g=1", "display_name": "hash_pling", "link": "https://stackoverflow.com/users/5054424/hash-pling"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435404930, "post_id": 31081758, "comment_id": 50193495, "body": "I already tried CPAN::Mini(::Inject) before. The problem is, that things get pretty complex and I have to maintain a local CPAN mirror, which i kind of huge at the (currently I needed to download more than 3GB of distribution packages, that I don&#39;t need at the end). But thx anyway, for some readers this may be a good solution, too."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435413060, "post_id": 31081758, "comment_id": 50195708, "body": "What about CPAN::Inject? As far as I can tell from the docs, that should work with your existing CPAN installation (no need to set up a local mirror)."}], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1435371911, "creation_date": 1435371911, "answer_id": 31084524, "question_id": 31081758, "link": "https://stackoverflow.com/questions/31081758/how-to-install-local-tar-file-dependencies-together-with-dependencies-from-cpan/31084524#31084524", "title": "How to install local tar file dependencies together with dependencies from CPAN?", "body": "<p>You could use this tool <a href=\"http://search.cpan.org/~bingos/CPANPLUS-0.9152/bin/cpan2dist\" rel=\"nofollow\">http://search.cpan.org/~bingos/CPANPLUS-0.9152/bin/cpan2dist</a> . It lets you specify filters to define what modules are loaded locally and what is fetched from CPAN. It's part of the CPANPLUS module, which should cone with newer versions of Perl I think.</p>\n"}], "owner": {"reputation": 1, "user_id": 5054424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bdD15.png?s=128&g=1", "display_name": "hash_pling", "link": "https://stackoverflow.com/users/5054424/hash-pling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435371911, "creation_date": 1435351045, "question_id": 31081758, "link": "https://stackoverflow.com/questions/31081758/how-to-install-local-tar-file-dependencies-together-with-dependencies-from-cpan", "title": "How to install local tar file dependencies together with dependencies from CPAN?", "body": "<p>Let's assume there is a distribution \"Example\" that is packed in <code>example-1.0.tar.gz</code> which contains a <code>Makefile.PL</code> that points to all dependencies. After extracting, \"Example\" could be easily installed (including all its dependencies) by calling <code>cpanm .</code> if all its dependencies were available on CPAN.</p>\n\n<p>How do I install a simialar file (let's call it <code>example-2.0.tar.gz</code>) if I am given a folder \"deps\" containing most of the distribution's dependencies</p>\n\n<ul>\n<li>dependency-1.tar.gz</li>\n<li>dependency-2.tar.gz</li>\n<li>...</li>\n<li>dependency-N.tar.gz</li>\n</ul>\n\n<p>where N is a huge number?</p>\n\n<p>Further assumptions are:</p>\n\n<ul>\n<li>dependency-*tar.gz files have to be preferred over the available CPAN modules</li>\n<li>some dependencies are not available on CPAN but only in this \"deps\" folder</li>\n<li>the folder \"deps\" is incomplete and further dependencies have to be installed from CPAN.</li>\n</ul>\n\n<p>Is there a simple way to install <code>example-2.0.tar.gz</code>?</p>\n\n<p>I would like to know if there is some command line like <code>cpanm --use-local-deps=~/deps example-2.0.tar.gz</code> which does not need further workarounds.</p>\n"}, {"tags": ["regex", "xml", "bash", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1435349590, "post_id": 31081330, "comment_id": 50181186, "body": "<a href=\"http://shadow.cat/blog/matt-s-trout/mstpan-3/\" rel=\"nofollow noreferrer\">shadow.cat/blog/matt-s-trout/mstpan-3</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1435349798, "post_id": 31081330, "comment_id": 50181267, "body": "I guess after the interpolation, some regex delimiter conflicts were discovered, i.e. with <code>&#47;</code> of the closing tag. To fix that you need to escape all meta characters before hand, or use a different delimiter, <code>~</code> for example."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435355383, "post_id": 31081330, "comment_id": 50183599, "body": "Don&#39;t attempt to generate Perl code from the shell!!! Pass the values as command-line arguments of env vars"}], "answers": [{"comments": [{"owner": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435430284, "post_id": 31081775, "comment_id": 50200837, "body": "I was using cygwin perl, which cannot cleanly install modules with cpan. I Installed ActivePerl, but it seems that ActivePerl and cygwin perl conflict if installed on the same Windows machine. I was trying to avoid this kind of overhead. I expect that the administration effort will be worse then effort needed to get a safe and working regex for this one-off problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435446831, "post_id": 31081775, "comment_id": 50205376, "body": "@Charlweed: The difference is that you only have to install the module <i>once</i> and you will have a solution for any XML problem that you may come across. I&#39;m not familiar with Cygwin Perl but you may get some mileage out of bypassing cpan and following the instructions in <a href=\"http://perldoc.perl.org/perlmodinstall.html\" rel=\"nofollow noreferrer\">perlmodinstall</a>. And <a href=\"http://www.perlmonks.org/?node_id=745457\" rel=\"nofollow noreferrer\">here&#39;s a perlmonks post</a> about it that may help. If you have a choice then I recommend you go with Strawberry Perl, which has many non-core modules as well as a make utility and compilers"}, {"owner": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 1, "creation_date": 1435597033, "post_id": 31081775, "comment_id": 50255430, "body": "For future readers: I eventually got ActivePerl to work alongside cygwin, but I did have to edit my account&#39;s bashrc/profile, delete my local .cpan dir, edit cygwin&#39;s /etc bash settings, clear the Windows registry of the previous ActivePerl settings, and edit ActivePerls&#39;s new registry entries."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435351098, "creation_date": 1435351098, "answer_id": 31081775, "question_id": 31081330, "link": "https://stackoverflow.com/questions/31081330/how-to-escape-xml-for-use-in-perl-multiline-search-and-replace/31081775#31081775", "title": "How to escape xml for use in perl multiline search and replace?", "body": "<p>It's <em>always</em> better to use a proper XML parser than try to hack something together with regular expressions</p>\n\n<p>Here's an example using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow\"><code>Mojo::DOM</code></a>, because it often gets overlooked in favour of <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> or <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a></p>\n\n<p>I've had to wrap your XML sample in a <code>&lt;root&gt;</code> element to make it well-formed. I'm sure the real document looks nothing like this, but it's the best guess I've got and the real case isn't likely to require the Perl to be changed a great deal</p>\n\n<p>The input file is expected as a parameter on the command line</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Mojo::DOM;\n\nmy $xml = do { local $/; &lt;&gt; };\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($xml);\n\nmy $keys   = $dom-&gt;find('key')-&gt;grep(sub { $_-&gt;text eq 'DefaultVolume' });\nmy $string = $keys-&gt;[0]-&gt;next;\n$string-&gt;content('EBD0A8B3-EE3D-427F-9A83-099C37A90556');\n\nprint $dom, \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>&lt;root&gt;\n  &lt;key&gt;DefaultVolume&lt;/key&gt;\n  &lt;string&gt;EBD0A8B3-EE3D-427F-9A83-099C37A90556&lt;/string&gt;\n&lt;/root&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435431842, "post_id": 31082103, "comment_id": 50201321, "body": "No, because both UUIDs appear more then one in the xml file. I can only math on the multiline string."}, {"owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "reply_to_user": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435506388, "post_id": 31082103, "comment_id": 50218457, "body": "Not that I disagree with @Borodin, but a command line solution has it&#39;s place, especially if you want to be minimally invasive of your platform or just don&#39;t want to build a system manipulating XML files (yes, I&#39;ve been there)."}, {"owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "reply_to_user": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435511147, "post_id": 31082103, "comment_id": 50219897, "body": "I did want to point out that in your original version you were not matching on a multiline string."}, {"owner": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435597192, "post_id": 31082103, "comment_id": 50255501, "body": "This is probably the answer that I wanted, but I have already installed ActivePerl and Mojo::DOM."}, {"owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "reply_to_user": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "edited": false, "score": 0, "creation_date": 1435602686, "post_id": 31082103, "comment_id": 50258434, "body": "sorry it took so long."}], "tags": [], "owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "is_accepted": false, "score": 1, "last_activity_date": 1435506214, "last_edit_date": 1435506214, "creation_date": 1435352549, "answer_id": 31082103, "question_id": 31081330, "link": "https://stackoverflow.com/questions/31081330/how-to-escape-xml-for-use-in-perl-multiline-search-and-replace/31082103#31082103", "title": "How to escape xml for use in perl multiline search and replace?", "body": "<p>I'll bet this would work:</p>\n\n<pre><code>macDefault=\"91630106-4A1F-4C58-81E9-D51877DE2EAB\"\n\nwinDefault=\"EBD0A8B3-EE3D-427F-9A83-099C37A90556\"\n\nperl -0pe  's/'\"$macDefault\"'/'\"$winDefault\"'/' \n</code></pre>\n\n<p>or, accommodating your comment:</p>\n\n<p><code>perl -0pe 's?(&lt;key&gt;DefaultVolume&lt;/key&gt;\\s*&lt;string&gt;)'\"$macDefault\"'(\\s*&lt;/string&gt;)?$1'\"$winDefault\"$2'?s' config.plist</code></p>\n\n<p>Noting the /s for multiline matching.</p>\n"}], "owner": {"reputation": 1374, "user_id": 816566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c3560aae55811daf374fb0ba79e3ee2a?s=128&d=identicon&r=PG", "display_name": "Charlweed", "link": "https://stackoverflow.com/users/816566/charlweed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435506214, "creation_date": 1435349360, "last_edit_date": 1435349737, "question_id": 31081330, "link": "https://stackoverflow.com/questions/31081330/how-to-escape-xml-for-use-in-perl-multiline-search-and-replace", "title": "How to escape xml for use in perl multiline search and replace?", "body": "<p>I want to use perl to replace a key-value pair in an xml file, but I am having problems escaping the xml from the regex parser.\nAll this is supposed to run from a bash script. So I have two variables:</p>\n\n<pre><code>macDefault=\"&lt;key&gt;DefaultVolume&lt;/key&gt;\\\n                &lt;string&gt;91630106-4A1F-4C58-81E9-D51877DE2EAB&lt;/string&gt;\"\n\nwinDefault=\"&lt;key&gt;DefaultVolume&lt;/key&gt;\\\n                &lt;string&gt;EBD0A8B3-EE3D-427F-9A83-099C37A90556&lt;/string&gt;\"\n</code></pre>\n\n<p>And I want perl to replace the occurrence of the value $macDefault with the value of $winDefault in the file config.plist</p>\n\n<p>Unfortunately</p>\n\n<pre><code>perl -0pe  's/'\"$macDefault\"'/'\"$winDefault\"'/' config.plist\n</code></pre>\n\n<p>does not work, as perl reports:</p>\n\n<pre><code>Having no space between pattern and following word is deprecated at -e line 1.\nBareword found where operator expected at -e line 1, near \"s/&lt;key&gt;DefaultVolume&lt;/key&gt;                &lt;string&gt;91630106-4A1F-4C58-81E9-D51877DE2EAB&lt;/string\"\nHaving no space between pattern and following word is deprecated at -e line 1.\nBareword found where operator expected at -e line 1, near \"&lt;string&gt;EBD0A8B3\"\n        (Missing operator before EBD0A8B3?)\nBareword found where operator expected at -e line 1, near \"427F\"\n        (Missing operator before F?)\nBareword found where operator expected at -e line 1, near \"9A83\"\n        (Missing operator before A83?)\nBareword found where operator expected at -e line 1, near \"099C37A90556\"\n        (Missing operator before C37A90556?)\nsyntax error at -e line 1, near \"s/&lt;key&gt;DefaultVolume&lt;/key&gt;                &lt;string&gt;91630106-4A1F-4C58-81E9-D51877DE2EAB&lt;/string\"\nIllegal octal digit '9' at -e line 1, at end of line\nIllegal octal digit '9' at -e line 1, at end of line\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435347930, "post_id": 31080945, "comment_id": 50180419, "body": "You need to do an <a href=\"http://stackoverflow.com/questions/13040333/what-perl-built-in-functions-are-atomic\">atomic operation</a> or the results will be completely crazy."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1435348105, "post_id": 31080945, "comment_id": 50180500, "body": "You <b><i>must always</i></b> <code>use strict</code> and <code>use warnings</code> at the top of every Perl program you write. Is is an invaluable measure that will quickly highlight many simple errors that you may otherwise overlook"}, {"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 0, "creation_date": 1435352607, "post_id": 31080945, "comment_id": 50182531, "body": "I do always use that. Just for this I wanted to keep my test file for SO as minimal as possible."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435587525, "post_id": 31080945, "comment_id": 50249310, "body": "@Bijan And yet you left in the shebang line. There&#39;s no need to remove strict and warnings from your code snippets; in fact, you should always be copy-and-pasting exactly what you ran into your questions."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1435347947, "creation_date": 1435347947, "answer_id": 31081008, "question_id": 31080945, "link": "https://stackoverflow.com/questions/31080945/perl-thread-to-increment-variable/31081008#31081008", "title": "Perl Thread To Increment Variable", "body": "<pre><code>use threads::shared;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my $total :shared = 0;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>lock $total;\nprint ++$total . \" \";\n</code></pre>\n"}], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 31081008, "answer_count": 1, "score": 1, "last_activity_date": 1435347947, "creation_date": 1435347681, "question_id": 31080945, "link": "https://stackoverflow.com/questions/31080945/perl-thread-to-increment-variable", "title": "Perl Thread To Increment Variable", "body": "<p>I have the following Perl code::</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse threads;\nuse Thread::Queue;\nuse DateTime;\n\n$| = 1; my $numthreads  = 20;\n\n$min = 1;\n$max = 100;\n\nmy $fetch_q   = Thread::Queue-&gt;new();\nour $total = 0;\nsub fetch {\n    while ( my $target = $fetch_q-&gt;dequeue() ) {\n            print $total++ . \" \";\n    }\n}\n\nmy @workers = map { threads-&gt;create( \\&amp;fetch ) } 1 .. $numthreads;\n\n$fetch_q-&gt;enqueue( $min .. $max );\n$fetch_q-&gt;end();\n\nforeach my $thr (@workers) {$thr-&gt;join();}\n</code></pre>\n\n<p>The code creates 20 threads and then increments a variable <code>$total</code>.</p>\n\n<p>The current output is something like:</p>\n\n<pre><code>0 0 0 0 0 1 0 0 1 1 2 0 0 1 0 2 0 3 0 1 0 2 1 0 2 1 0 0 3 0\n</code></pre>\n\n<p>But the desired output is:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 .... 30\n</code></pre>\n\n<p>Is there a way to have Perl increment the variable? The order does not matter (i.e. its fine if it is 1 2 4 5 3).</p>\n"}, {"tags": ["perl", "anyevent"], "answers": [{"comments": [{"owner": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "edited": false, "score": 0, "creation_date": 1435355963, "post_id": 31082398, "comment_id": 50183774, "body": "This is great, thanks again ikegami. I&#39;ve implemented your patch into my program and it works precisely as you described with the desired results. Thanks for submitting a bug report as well. This really had me scratching my head, so I very much appreciate your help."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435483690, "post_id": 31082398, "comment_id": 50211928, "body": "Note that this answer is wrong, and monkeypatching things will only hide the issue. See my answer for an explanation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435511966, "post_id": 31082398, "comment_id": 50220128, "body": "@Marc Lehmann, 1) AE is definitely calling <code>SET_FL</code> incorrectly. 2) I always recommend against monkeypatching, but I compromised my ethics since I wasn&#39;t planning on submitting the bug report since I didn&#39;t want to deal with you. It sounds like you&#39;re not going to fix the bug anyway? 3) Even though AE::H uses non-blocking handles and library-level buffering, it can still handle the OP&#39;s use-case. It can even handle concurrency (<code>my $guard = lock_handle($hdl, LOCK_EX, sub {    my ($lock, $hdl) = @_;     $hdl-&gt;push_write($s);     $hdl-&gt;on_drain(sub{       $lock-&gt;unlock();    }); }); </code>)."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 1, "creation_date": 1435607849, "post_id": 31082398, "comment_id": 50261305, "body": "1) all we have is your assertion, without any evidence. asserting things doesn&#39;t make them true. 2) I didn&#39;t argue with your ethics, I argued with your bad advice. Asking unfair loaded questions is definitely immoral though. 3) It doesn&#39;t matter if the OP&#39;s code <i>sometimes</i> might happen to work - the bug might bite at any time, and your answer is simply bad advice. It&#39;s his choice, of course, but I prefer writing correct code over code that seems to work sometimes, and when I advise others, I prefer to teach them correct solutions rather than hacks."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435608036, "post_id": 31082398, "comment_id": 50261436, "body": "I also think it is a good idea to warn others about your bad answer, simply so that other people don&#39;t fall into the trap and assume using AnyEvent::Handle with files is in any way a good programming technique. It will only cause grief. It&#39;s the responsible thing to do, really."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435608500, "post_id": 31082398, "comment_id": 50261717, "body": "1) Changing flags is not a bug. Calling it &quot;clobbering&quot; doesn&#39;t make it a bug either. Name a few of those flags that can be &quot;clobbered&quot; but shouldn&#39;t? 2) It seems you don&#39;t understand what a loaded question is - see <a href=\"https://en.wikipedia.org/wiki/Loaded_question\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Loaded_question</a> for an explanation. To spell it out for you, any answer to your question requires accepting your &quot;bug&quot; claims as true. If this is contested, as in this case, it is impossible to answer, and trying to trick people to accept your claims this way is unfair. If you are honestly interested in an answer ask an honest question not a trick one."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435608612, "post_id": 31082398, "comment_id": 50261791, "body": "@ikegami you confuse me with the OP - only the OP can fix bugs in his code. Your answer is wrong and misleading already - the OP doesn&#39;t need to fix his code for this to be true. If you plan to adjust your question to be more correct, you could do so at any time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435609916, "post_id": 31082398, "comment_id": 50262539, "body": "@Marc Lehmann, Changing flags is not a bug, but unintentionally changing flags you know nothing about is. Why don&#39;t know name all of those flags you changed if it was intentional? Re &quot;you confuse me with the OP&quot;, Not even close."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435610974, "post_id": 31082398, "comment_id": 50263099, "body": "@ikegami: let&#39;s not get carried away here. Fact is that the OPs code relies on explicitly unsupported behaviour, and this is the reason why it doesn&#39;t work. Whether AE <i>also</i> has a bug <i>elsewhere</i> is immaterial to his problem, and suggesting a hack is simply bad advice. The right thing to do is to fix the bug causing his problems, and worry about unrelated issues elsewhere. Imagining flags neither you nor I don&#39;t know about (and don&#39;t exist) isn&#39;t leading anywhere, and certainly doesn&#39;t help anybody running into this same problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435611000, "post_id": 31082398, "comment_id": 50263107, "body": "@Marc Lehmann, The module supports it just fine. It provides all the needed primitives. the bug is imposing a completely artificial limitation."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435612041, "post_id": 31082398, "comment_id": 50263597, "body": "@ikegami: I cannot understand your definition of &quot;support&quot; then - the module documents that it doesn&#39;t support it, and OP asked his question here because it doesn&#39;t work in practise either. I also don&#39;t think this discussion is improving this question, so unless you move it elsewhere, I will not comment further, as the important things have all been said."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1435612247, "post_id": 31082398, "comment_id": 50263682, "body": "@Marc Lehmann, Actually, it doesn&#39;t. I think you are referring to &quot;This is a helper module to make it easier to do event-based I/O on stream-based filehandles (sockets, pipes, and other stream things).&quot; 1) It doesn&#39;t say it doesn&#39;t work on non-streams, 2) It would be lying if it did."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1435610310, "last_edit_date": 1435610310, "creation_date": 1435354017, "answer_id": 31082398, "question_id": 31080723, "link": "https://stackoverflow.com/questions/31080723/anyevent-file-writes-plus-logrotate-lead-to-unexpected-file-sizes/31082398#31082398", "title": "AnyEvent file writes plus logrotate lead to unexpected file sizes", "body": "<p>Normally, writing to a handle opened for append handle first seeks to the end of the file.</p>\n\n<blockquote>\n  <p>If the file was <code>open</code>(2)ed with <code>O_APPEND</code>, the file offset is first set to the end of the file before writing. The adjustment of the file offset and the write operation are performed as an atomic step.</p>\n</blockquote>\n\n<p>But you're not seeing that with AnyEvent::Handle. The following demonstrates the problem:</p>\n\n<pre><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   use AE               qw( );\n   use AnyEvent::Handle qw( );\n\n   sub wait_for_drain {\n      my ($hdl) = @_;\n      my $drained = AE::cv();\n      $hdl-&gt;on_drain($drained);\n      $drained-&gt;recv();\n   }\n\n\n   my $qfn = \"log\";\n   unlink($qfn);\n\n   open(my $fh, \"&gt;&gt;\", $qfn) or die $!;\n   $fh-&gt;autoflush(1);\n\n   my $hdl = AnyEvent::Handle-&gt;new(\n      fh =&gt; $fh,\n      on_error =&gt; sub {\n         my ($hdl, $fatal, $msg) = @_;\n         if ($fatal) { die($msg); } else { warn($msg); }\n      },\n   );\n\n   $hdl-&gt;push_write(\"abc\\n\");\n   $hdl-&gt;push_write(\"def\\n\");\n   wait_for_drain($hdl);\n   print(-s $qfn, \"\\n\");\n\n   truncate($qfn, 0);\n   print(-s $qfn, \"\\n\");\n\n   $hdl-&gt;push_write(\"ghi\\n\");\n   wait_for_drain($hdl);\n   print(-s $qfn, \"\\n\");\n'\n8\n0\n12\n</code></pre>\n\n<p>While the following illustrates the behaviour you should be seeing:</p>\n\n<pre><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   my $qfn = \"log\";\n   unlink($qfn);\n\n   open(my $fh, \"&gt;&gt;\", $qfn) or die $!;\n   $fh-&gt;autoflush(1);\n\n   print($fh \"abc\\n\");\n   print($fh \"def\\n\");\n   print(-s $qfn, \"\\n\");\n\n   truncate($qfn, 0);\n   print(-s $qfn, \"\\n\");\n\n   print($fh \"ghi\\n\");\n   print(-s $qfn, \"\\n\");\n'\n8\n0\n4\n</code></pre>\n\n<p>The problem is that AnyEvent::Handle clobbers some of the handle's flag. The AnyEvent code above boils down to the following:</p>\n\n<pre><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   use Fcntl qw( F_SETFL O_NONBLOCK );\n\n   my $qfn = \"log\";\n   unlink($qfn);\n\n   open(my $fh, \"&gt;&gt;\", $qfn) or die $!;\n   $fh-&gt;autoflush(1);\n\n   fcntl($fh, F_SETFL, O_NONBLOCK);\n\n   print($fh \"abc\\n\");\n   print($fh \"def\\n\");\n   print(-s $qfn, \"\\n\");\n\n   truncate($qfn, 0);\n   print(-s $qfn, \"\\n\");\n\n   print($fh \"ghi\\n\");\n   print(-s $qfn, \"\\n\");\n'\n8\n0\n12\n</code></pre>\n\n<p>The following is what AnyEvent::Handle should be doing instead:</p>\n\n<pre><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   use Fcntl qw( F_GETFL F_SETFL O_NONBLOCK );\n\n   my $qfn = \"log\";\n   unlink($qfn);\n\n   open(my $fh, \"&gt;&gt;\", $qfn) or die $!;\n   $fh-&gt;autoflush(1);\n\n   my $flags = fcntl($fh, F_GETFL, 0)\n      or die($!);\n\n   fcntl($fh, F_SETFL, $flags | O_NONBLOCK)\n      or die($!);\n\n   print($fh \"abc\\n\");\n   print($fh \"def\\n\");\n   print(-s $qfn, \"\\n\");\n\n   truncate($qfn, 0);\n   print(-s $qfn, \"\\n\");\n\n   print($fh \"ghi\\n\");\n   print(-s $qfn, \"\\n\");\n'\n8\n0\n4\n</code></pre>\n\n<p>I have submitted a bug report, but the author of the module is unwilling to fix the bug, so I'm forced to recommend the rather awful practice of monkey patching. Add the following to your program:</p>\n\n<pre><code>use AnyEvent       qw( );\nuse AnyEvent::Util qw( );\nuse Fcntl          qw( );\n\nBEGIN {\n   if (!AnyEvent::WIN32) {\n      my $fixed_fh_nonblocking = sub($$) {\n         my $flags = fcntl($_[0], Fcntl::F_GETFL, 0)\n             or return;\n\n         $flags = $_[1]\n            ? $flags | AnyEvent::O_NONBLOCK\n            : $flags &amp; ~AnyEvent::O_NONBLOCK;\n\n         fcntl($_[0], AnyEvent::F_SETFL, $flags);\n      };\n\n      no warnings \"redefine\";\n      *AnyEvent::Util::fh_nonblocking = $fixed_fh_nonblocking;\n   }\n}\n</code></pre>\n\n<p>With this fix, your program will work correctly</p>\n\n<pre><code>$ perl -e'\n   use strict;\n   use warnings;\n\n   use AE               qw( );\n   use AnyEvent         qw( );\n   use AnyEvent::Handle qw( );\n   use AnyEvent::Util   qw( );\n   use Fcntl            qw( );\n\n   BEGIN {\n      if (!AnyEvent::WIN32) {\n         my $fixed_fh_nonblocking = sub($$) {\n            my $flags = fcntl($_[0], Fcntl::F_GETFL, 0)\n                or return;\n\n            $flags = $_[1]\n               ? $flags | AnyEvent::O_NONBLOCK\n               : $flags &amp; ~AnyEvent::O_NONBLOCK;\n\n            fcntl($_[0], AnyEvent::F_SETFL, $flags);\n         };\n\n         no warnings \"redefine\";\n         *AnyEvent::Util::fh_nonblocking = $fixed_fh_nonblocking;\n      }\n   }\n\n   sub wait_for_drain {\n      my ($hdl) = @_;\n      my $drained = AE::cv();\n      $hdl-&gt;on_drain($drained);\n      $drained-&gt;recv();\n   }\n\n\n   my $qfn = \"log\";\n   unlink($qfn);\n\n   open(my $fh, \"&gt;&gt;\", $qfn) or die $!;\n   $fh-&gt;autoflush(1);\n\n   my $hdl = AnyEvent::Handle-&gt;new(\n      fh =&gt; $fh,\n      on_error =&gt; sub {\n         my ($hdl, $fatal, $msg) = @_;\n         if ($fatal) { die($msg); } else { warn($msg); }\n      },\n   );\n\n   $hdl-&gt;push_write(\"abc\\n\");\n   $hdl-&gt;push_write(\"def\\n\");\n   wait_for_drain($hdl);\n   print(-s $qfn, \"\\n\");\n\n   truncate($qfn, 0);\n   print(-s $qfn, \"\\n\");\n\n   $hdl-&gt;push_write(\"ghi\\n\");\n   wait_for_drain($hdl);\n   print(-s $qfn, \"\\n\");\n'\n8\n0\n4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "edited": false, "score": 0, "creation_date": 1435790961, "post_id": 31098068, "comment_id": 50353585, "body": "If I understand correctly, I should remove sections of code that refer to the file I/O operations using AnyEvent and replace them with the builtin perl I/O functions. Simply put, I would open a file handle in the timer&#39;s callback, write my data, and close the file handle. Thus eliminating the perceived need to use AnyEvent::Handle for that. This works in my example code above and is working in my production program as well. A side effect of this is the ability to discard the requirement for the copytruncate in logrotate. (see new code snippet above for clarification). Thanks!"}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "reply_to_user": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "edited": false, "score": 1, "creation_date": 1438025641, "post_id": 31098068, "comment_id": 51268082, "body": "Yes - the idea behind AnyEvent::Handle is to allow event-based non-blocking I/O, where some outside source pushes data towards you. This model doesn&#39;t make sense for disks (or even network filesystems), where you explicitly have to request data. Disks usually have pretty bounded I/O times, too, making it often not necessary to handle disk I/O via events - the disk usually delivers in tens of milliseconds, the network might take hours or more for new data. If disk I/O is an issue and slows down your program, AnyEvent::IO (+IO::AIO) is the right module, or maybe IO::AIO directly."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "reply_to_user": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "edited": false, "score": 1, "creation_date": 1438025964, "post_id": 31098068, "comment_id": 51268267, "body": "Otherwise, built-in perl I/O is the right thing to use for files. In some cases, it can be convenient to use AnyEvent::Handle (e.g. when dealing with STDIN/STDOUT, which might be a pipe, a network socket, or a file, and you don&#39;t know which one), which is why AnyEvent::Handle doesn&#39;t refuse to work with these file handles, but generally, you should only use AnyEvent::Handle for cases where your handle could be a socket, pipe or another streaming source. In these cases, it will also work with files properly then."}], "tags": [], "owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1435607895, "last_edit_date": 1435607895, "creation_date": 1435483619, "answer_id": 31098068, "question_id": 31080723, "link": "https://stackoverflow.com/questions/31080723/anyevent-file-writes-plus-logrotate-lead-to-unexpected-file-sizes/31098068#31098068", "title": "AnyEvent file writes plus logrotate lead to unexpected file sizes", "body": "<p>ikegamis answer is very misleading - your code contains a bug, namely using AnyEvent::Handle for file I/O, which is undocumented and unsupported behaviour. The \"bug\" that ikegami perceives results from using AnyEvent::Handle on an illegal file handle.</p>\n\n<p>While you can try to rely on undocumented behaviour and monkeypatch things and hope it will magically work, you will likely keep running into problems as long as you use AnyEvent::Handle for non-stream filehandles, so I would sugets fixing the actual bug.</p>\n\n<p>If you want to do event-based file I/O, then you should look into AnyEvent::IO (and install a suitable backend such as IO::AIO). Otherwise, you should use the normal perl I/O functions (built-ins, IO:: classes and so on) to access files.</p>\n\n<p>Update: the deeper reason that AnyEvent::Handle doesn't work on files is that ultimately it makes no sense, because the notion of non-blocking I/O doesn't apply to files in a useful way, so using AnyEvent::Handle only adds overhead.</p>\n"}], "owner": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 31082398, "answer_count": 2, "score": 4, "last_activity_date": 1435791155, "creation_date": 1435346719, "last_edit_date": 1492085621, "question_id": 31080723, "link": "https://stackoverflow.com/questions/31080723/anyevent-file-writes-plus-logrotate-lead-to-unexpected-file-sizes", "title": "AnyEvent file writes plus logrotate lead to unexpected file sizes", "body": "<p>I have a script that writes out to a file on a frequent basis using AnyEvent. I've written the following sample to illustrate the issue I'm facing.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse AnyEvent;\nuse AnyEvent::Handle;\n\nmy $outputFile = 'out_test.log';\nopen my $out, \"&gt;&gt;\", $outputFile or die \"Can't open output\\n\";\n\nmy $data = \"test string\"x50000 . \"\\n\";\n\nmy $out_ready = AnyEvent-&gt;condvar;\nmy $out_hdl; $out_hdl = AnyEvent::Handle-&gt;new(\n    fh =&gt; $out,\n    on_error =&gt; sub {\n        my ($hdl, $fatal, $msg) = @_;\n        AE::log error =&gt; $msg;\n        $hdl-&gt;destroy;\n        $out_ready-&gt;send;\n    }\n);\n\nmy $timer = AnyEvent-&gt;timer(\n    after =&gt; 0,\n    interval =&gt; 5,\n    cb =&gt; sub {\n        $out_hdl-&gt;push_write($data);\n    }\n);\n\n$out_ready-&gt;recv;\n</code></pre>\n\n<p>This works well, but the file size gets to be enormous after a while. We use logrotate for problems like this so I created the following logrotate configuration file.</p>\n\n<pre><code>/path/to/out_test.log {\n        size 2M\n        copytruncate\n        rotate 4\n}\n</code></pre>\n\n<p>This also works well, and any time the above output file exceeds 2M it is rotated to out_test.log.1. However, when out_test.log is written to immediately after rotation, the file size is the same as the rotated log file. This behavior and what I'm experiencing is explained here: <a href=\"https://serverfault.com/a/221343\">https://serverfault.com/a/221343</a></p>\n\n<p>While I understand the issue, I don't know how to fix the problem in the sample Perl code I provided.</p>\n\n<p>I don't have to implement log rotation via logrotate, but it would be preferred. If it's simple to implement in the script I can do that, but it would be nice if I could make the above sample play nice with logrotate. Any help or comments are appreciated. Thanks!</p>\n\n<p>EDIT</p>\n\n<p>Based on the answers below I was able to get things working with the monkeypatch ikegami provided as well as leveraging native perl I/O as per Marc Lehmann's advice. My example code looks like this and works well. Additionally this removes the requirement for the copytruncate directive in logrotate.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse AnyEvent;\nuse AnyEvent::Handle;\n\nmy $outputFile = 'out_test.log';\nopen my $out, \"&gt;&gt;\", $outputFile or die \"Can't open output\\n\";\n\nmy $data = \"test string\"x50000 . \"\\n\";\n\nmy $cv = AnyEvent::condvar();\nmy $timer = AnyEvent-&gt;timer(\n    after =&gt; 0,\n    interval =&gt; 5,\n    cb =&gt; sub {\n        open my $out, \"&gt;&gt;\", $outputFile or die \"Can't open output\\n\";\n        print $out $data;\n        close $out; \n    }\n);\n\n$cv-&gt;recv;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 2, "creation_date": 1435388260, "post_id": 31079521, "comment_id": 50189420, "body": "You don&#39;t have <code>sales($)</code> and <code>sales()</code> rows in any section of this YAML file, as YAML mapping keys are case sensitive. FWIW you don&#39;t even have <code>Sales</code> <b>or</b> <code>Sales($)</code> in all of them, as the last document in this file consists  of the Null scalar only. You would have found out, and would do yourself a favor, by using proper YAML parsing (in Perl or any language). Using regex is as inappropriate for YAML as it is for HTML/XML/JSON/CSV."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1435343567, "creation_date": 1435343567, "answer_id": 31079920, "question_id": 31079521, "link": "https://stackoverflow.com/questions/31079521/perl-script-to-skip-a-line/31079920#31079920", "title": "Perl script to skip a line", "body": "<p>You could preference the sales($) <em>and</em> use just a single capture buffer<br>\nwith a Branch Reset construct <code>(?|,,)</code>  </p>\n\n<pre><code> # /(?m)^Order\\h+ID:\\h*(.*)\\s+(?|(?:^.*\\s+)?^Sales\\(\\$\\):\\h*(.*)\\s+|^Sales:\\h*(.*)\\s+)^Transaction\\h+Datetime:\\h*(.*)/\n\n (?m)\n ^ Order \\h+ ID: \\h* \n ( .* )                        # (1)\n \\s+ \n (?|\n      (?: ^ .* \\s+ )?\n      ^ Sales\\(\\$\\): \\h* \n      ( .* )                        # (2)\n      \\s+ \n   |  \n      ^ Sales: \\h* \n      ( .* )                        # (2)\n      \\s+ \n )\n ^ Transaction \\h+ Datetime: \\h* \n ( .* )                        # (3)\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code> **  Grp 0 -  ( pos 0 , len 85 ) \nOrder ID: W00875205405667\nSales($): '7.5'\nTransaction Datetime: 2015-03-29 16:17:00  \n **  Grp 1 -  ( pos 10 , len 15 ) \nW00875205405667  \n **  Grp 2 -  ( pos 37 , len 5 ) \n'7.5'  \n **  Grp 3 -  ( pos 66 , len 19 ) \n2015-03-29 16:17:00  \n\n-------------------\n\n **  Grp 0 -  ( pos 92 , len 102 ) \nOrder ID: W00875205405668\nSales: '74.50'\nSales($): '72.5'\nTransaction Datetime: 2015-03-29 16:17:00  \n **  Grp 1 -  ( pos 102 , len 15 ) \nW00875205405668  \n **  Grp 2 -  ( pos 145 , len 6 ) \n'72.5'  \n **  Grp 3 -  ( pos 175 , len 19 ) \n2015-03-29 16:17:00  \n\n-------------------\n\n **  Grp 0 -  ( pos 201 , len 84 ) \nOrder ID: W00875205405669\nSales: '12.50'\nTransaction Datetime: 2015-03-29 16:17:00  \n **  Grp 1 -  ( pos 211 , len 15 ) \nW00875205405669  \n **  Grp 2 -  ( pos 235 , len 7 ) \n'12.50'  \n **  Grp 3 -  ( pos 266 , len 19 ) \n2015-03-29 16:17:00  \n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 2845124, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/737e49099fcce77affc9008b6dac3fad?s=128&d=identicon&r=PG&f=1", "display_name": "srinath", "link": "https://stackoverflow.com/users/2845124/srinath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1435387416, "creation_date": 1435342080, "last_edit_date": 1435387416, "question_id": 31079521, "link": "https://stackoverflow.com/questions/31079521/perl-script-to-skip-a-line", "title": "Perl script to skip a line", "body": "<p>I have YAML file as input. In input file, I have sales and sales($) rows. I need to take only one row as output.<br>\nLogic: </p>\n\n<ol>\n<li>if sales($) row is present then we need to take this row. </li>\n<li>If Both Sales($) and Sales rows are present then we need sales($) row.</li>\n<li>If Sales row is present then we need sales row.(Only if sales row present)</li>\n</ol>\n\n<p>Can anyone guide how to achieve this perl 5?</p>\n\n<p>My Input File Looks like...   </p>\n\n<pre><code>---\nOrder ID: W00875205405667\nSales($): '7.5'\nTransaction Datetime: 2015-03-29 16:17:00\n---\nOrder ID: W00875205405668\nSales: '74.50'\nSales($): '72.5'\nTransaction Datetime: 2015-03-29 16:17:00\n---\nOrder ID: W00875205405669\nSales: '12.50'\nTransaction Datetime: 2015-03-29 16:17:00\n---\n</code></pre>\n\n<p>Need Output File as:</p>\n\n<pre><code>---\nOrder ID: W00875205405667\nSales: '7.5'\nTransaction Datetime: 2015-03-29 16:17:00\n---\nOrder ID: W00875205405668\nSales: '72.50'\nTransaction Datetime: 2015-03-29 16:17:00\n---\nOrder ID: W00875205405669\nSales: '12.50'\nTransaction Datetime: 2015-03-29 16:17:00\n---\n</code></pre>\n"}, {"tags": ["perl", "mingw-w64", "msys2"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1435340704, "post_id": 31078095, "comment_id": 50176942, "body": "&quot;Much of the world is now running v5.22&quot;. That&#39;s incredibly far from the truth."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435340873, "post_id": 31078095, "comment_id": 50177025, "body": "@ikegami: I think you&#39;d better look in your dictionary"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1435340937, "post_id": 31078095, "comment_id": 50177059, "body": "Much of the word is running what their distro packaged 5 years ago."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435341094, "post_id": 31078095, "comment_id": 50177148, "body": "@ikegami: Much of the world doesn&#39;t have a computer at all"}, {"owner": {"reputation": 27, "user_id": 5053753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ac253f8ff28ce4ccfaf5604a2166ff?s=128&d=identicon&r=PG&f=1", "display_name": "Kaden Badalian", "link": "https://stackoverflow.com/users/5053753/kaden-badalian"}, "edited": false, "score": 0, "creation_date": 1435342480, "post_id": 31078095, "comment_id": 50177808, "body": "When I type &quot;perl --version&quot;, it says I have 5.22.  Could there be a different problem? (I am very inexperienced with this type of thing.  Sorry if I sound dumb.)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435345614, "last_edit_date": 1435345614, "creation_date": 1435336622, "answer_id": 31078095, "question_id": 31077676, "link": "https://stackoverflow.com/questions/31077676/i-get-this-undefined-reference-error-when-i-try-to-install-this-perl-module/31078095#31078095", "title": "I get this undefined reference error when I try to install this Perl module", "body": "<p>You have a very old installation of perl. The <code>Perl_hv_common_key_len</code> was added in Perl v5.8.9 which is nearly seven years ago, so you are running an even earlier release of v5.8. Much of the world is now running v5.22 so I suggest that you update</p>\n"}], "owner": {"reputation": 27, "user_id": 5053753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ac253f8ff28ce4ccfaf5604a2166ff?s=128&d=identicon&r=PG&f=1", "display_name": "Kaden Badalian", "link": "https://stackoverflow.com/users/5053753/kaden-badalian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435345614, "creation_date": 1435334915, "last_edit_date": 1435335681, "question_id": 31077676, "link": "https://stackoverflow.com/questions/31077676/i-get-this-undefined-reference-error-when-i-try-to-install-this-perl-module", "title": "I get this undefined reference error when I try to install this Perl module", "body": "<p>I am using msys2 for mingw and am trying to download this Params::Validate module.  I get this error, but can't find online what the problem is.  I would really appreciate it if you could tell me what's wrong and how to fix it.<br>\nThanks!</p>\n\n<pre><code>cpan[1]&gt; install Params::Validate  \nlib/Params/Validate/XS.o:XS.c:(.text+0x34c): undefined reference to  'Perl_hv_common_key_len'\nlib/Params/Validate/XS.o:XS.c:(.text+0x34c): relocation truncated to fit: \nR_X86_64_PC32 against undefined symbol 'Perl_hv_common_key_len'  \ncollect2: error: ld returned 1 exit status  \nerror building blib/arch/auto/Params/Validate/XS/XS.dll from  \nlib/Params/Validate/XS.o at /usr/share/perl5/core_perl/ExtUtils/CBuilder/Base.pm line 320.\n  DROLSKY/Params-Validate-1.19.tar.gz  \n  ./Build -- NOT OK  \nFailed during this command:  \n DROLSKY/Params-Validate-1.19.tar.gz          : make NO\n</code></pre>\n"}, {"tags": ["python", "linux", "perl", "ssh", "paramiko"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435332302, "post_id": 31076714, "comment_id": 50172228, "body": "Have you tried running the command from bash with verbosity set? $ ssh -vvv user@host  cmd"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435332475, "post_id": 31076714, "comment_id": 50172323, "body": "Have you tried running the command directly on the remote machine?  Do you have correct permissions to run it?  Are you invoking it correctly?  Perhaps no output is &#39;expected&#39; with that particular invokation.  Perhaps the Term:-dumb part is the problem, try removing that."}, {"owner": {"reputation": 11, "user_id": 5053588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e5e75e5d3dd400823b7dcd166ef085?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/5053588/aaa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435333611, "post_id": 31076714, "comment_id": 50173101, "body": "When i remove the Term:-dumb part i get the error TERM environment variable not set. I tried running directly on the remote machine and its give an output."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435335169, "post_id": 31076714, "comment_id": 50174031, "body": "Have you tried other TERM settings?  TERM=xterm perhaps? You can use it directly as in &#39;TERM=foo commandforperlscript&#39; man 7 term gives more info."}, {"owner": {"reputation": 11, "user_id": 5053588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e5e75e5d3dd400823b7dcd166ef085?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/5053588/aaa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435336162, "post_id": 31076714, "comment_id": 50174556, "body": "tried foo and xterm, still no output. but other commands like help --grep, ifconfig works but not the perl script command"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435336867, "post_id": 31076714, "comment_id": 50174949, "body": "If you redirect the output of the script to a file, does it get written? Just add &#39;&gt; perloutput&#39; to the end of your command.  If it gets written, you could just scp it over and read that."}, {"owner": {"reputation": 11, "user_id": 5053588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e5e75e5d3dd400823b7dcd166ef085?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/5053588/aaa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435342729, "post_id": 31076714, "comment_id": 50177927, "body": "it doesn&#39;t write. The file is empty"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435343544, "post_id": 31076714, "comment_id": 50178325, "body": "Try creating a simple perl script that just outputs hello world.  Now try calling that script instead of you perl script.  Does it still not output anything?  You may need to redirect the output to /tmp/foo if you do not have write permissions on /"}, {"owner": {"reputation": 11, "user_id": 5053588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e5e75e5d3dd400823b7dcd166ef085?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/5053588/aaa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1435417412, "post_id": 31076714, "comment_id": 50196839, "body": "solved the problem with &quot;expect&quot; and &#39;spawn&#39;  . had to force it to interactive mode"}], "owner": {"reputation": 11, "user_id": 5053588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e5e75e5d3dd400823b7dcd166ef085?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/5053588/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435332138, "creation_date": 1435331582, "last_edit_date": 1435332138, "question_id": 31076714, "link": "https://stackoverflow.com/questions/31076714/reading-perl-script-command-output-using-paramiko-from-remote-ssh", "title": "Reading Perl script command output using paramiko from remote ssh", "body": "<p>I can't read a perl script command out from shh. I can reading things like ifconfig, pwd but I installed an application written in perl but cant read out from its command from another server when using remote ssh. Tried a lot of steps</p>\n\n<pre><code>ssh = paramiko.SSHClient()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n\nssh.connect(hostname=sys_ip,\n            port=22,\n            username=sys_username,\n            password=sys_password)\n\ncmd = \"cd /; export TERM=${TERM:-dumb}; commandforperlscript\"\n</code></pre>\n\n<p>I get no output and no errors. </p>\n"}, {"tags": ["perl", "constructor", "overriding", "inline", "moose"], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1435331149, "post_id": 31076468, "comment_id": 50171502, "body": "I do declare the package immutable, but I was required to add <code>inline_constructor =&gt; 0</code>.  Is there any way to achieve the functionality I want without fully overriding <code>new</code>?  Or if that is not possible, is there a way to ensure that the overridden <code>new</code> will still be &quot;inline?&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1435332038, "post_id": 31076468, "comment_id": 50172056, "body": "@tjwrona1992: I suggest you take a look at <a href=\"https://metacpan.org/pod/MooseX::Role::Flyweight\" rel=\"nofollow noreferrer\"><code>MooseX::Role::Flyweight</code></a> which adds an <code>instance</code> method that behaves the same as <code>new</code> but will return a previously-created object if it has been called before with the same parameters"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1435340351, "post_id": 31076468, "comment_id": 50176773, "body": "That does look like a potential solution; however it is not a part of the standard distribution of ActivePerl.  Where I work the network security is very strict and we are unable to download anything so I am unable to get any modules from cpan.  Even using the cpan command to install modules fails.  Is there a way to do this without a non core module?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1435341027, "post_id": 31076468, "comment_id": 50177108, "body": "@tjwrona1992: That&#39;s a silly rule. Can you download the distribution and install it from that, or aren&#39;t you allowed USB drives either? You could print off the source at home and type it in?!"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1435341537, "post_id": 31076468, "comment_id": 50177387, "body": "Well I can get modules, I just have to go through IT and get it approved then they need to make a work order and install it themselves... Then anyone else who would want to use my code would need to do the same so its just really a hassle.  I guess if I had the source code I could save it in the same folder as my module and package it in a way that people could use it.  I&#39;ve done that with a couple things but that just seems unnecessary."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1435343042, "post_id": 31076468, "comment_id": 50178089, "body": "Also using <code>MooseX::Role::Flyweight</code> would change the way users interact with the module and would require them to use the <code>instance</code> function rather than <code>new</code>.  I would really prefer to keep the interface with users as basic/familiar as possible so people using it will know how to use it without reading a bunch of documentation."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1435347717, "post_id": 31076468, "comment_id": 50180314, "body": "@tjwrona1992: Okay, well pure Perl modules <i>are</i> the source files, and this one&#39;s <a href=\"https://metacpan.org/source/STEVENL/MooseX-Role-Flyweight-1.03/lib/MooseX/Role/Flyweight.pm\" rel=\"nofollow noreferrer\">literally 40 lines of Perl</a>. I suggest you either pretend you wrote it yourself or read and understand it so that you can implement something similar that lets you keep the <code>new</code> method. Essentially it keeps a hash of the objects that have been created, using a JSON-encoded version of the parameters for the keys"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435331236, "last_edit_date": 1435331236, "creation_date": 1435330974, "answer_id": 31076468, "question_id": 31076321, "link": "https://stackoverflow.com/questions/31076321/why-is-it-very-bad-practice-to-override-new-when-using-moose/31076468#31076468", "title": "Why is it &quot;very bad practice&quot; to override new when using Moose?", "body": "<p><em>In-lining</em> a subroutine means to copy its code at the point of the call instead of inserting a subroutine call. This is much faster because it avoids the overhead of collecting the parameters and any local variables on the stack as well as the the call and return operations. It is impossible if the class hasn't been declared immutable because any mutation may mean that the constructor has to change and so no longer can be inserted in-line</p>\n"}, {"tags": [], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "is_accepted": true, "score": 1, "last_activity_date": 1435580655, "creation_date": 1435580655, "answer_id": 31115647, "question_id": 31076321, "link": "https://stackoverflow.com/questions/31076321/why-is-it-very-bad-practice-to-override-new-when-using-moose/31115647#31115647", "title": "Why is it &quot;very bad practice&quot; to override new when using Moose?", "body": "<p>I found another issue with overriding <code>new</code>, other than <code>Moose</code> not being able to <em>in-line</em> the constructor.  I discovered that if you override <code>new</code>, it prevents <code>Moose</code> from being able to make attributes \"required\" when calling the constructor.</p>\n\n<hr>\n\n<p>For example if you override <code>new</code> and define a class with an attribute like so:</p>\n\n<p><code>has 'var' =&gt; (is =&gt; 'rw', isa =&gt; 'Str', =&gt; required =&gt; 1);</code></p>\n\n<p><code>Moose</code> will allow you to create a new instance of this class without passing it a value for <code>var</code>.</p>\n\n<hr>\n\n<p>I found a workable solution for what I want to do, at least I think it's workable.  I don't really need the speed of an <em>in-line</em> constructor (I'm not creating millions of objects), but I do need the ability to \"require\" attributes.  If you use the <code>around</code> function provided by Moose you can essentially override new, without preventing <code>Moose</code> from being able to \"require\" attributes.</p>\n\n<p>ex:</p>\n\n<pre><code>around new =&gt; sub {\n    my ($orig, $class, %args) = @_;\n\n    # loop through objects in list\n    for my $object (@list) {\n\n        # if $args used to define the new object\n        # match the arguments of any object in the list\n        # return the matched object without calling new\n    }\n\n    # Create a new object\n    my $self = $class-&gt;orig(%args);\n\n    # Add it to the list of objects.\n    push @list, $self;\n};\n</code></pre>\n\n<p>This approach still gives you the warning about not being able to create an <em>in-line</em> constructor, but at least it will function correctly.</p>\n\n<p><em>Note: adding <code>__PACKAGE__-&gt;meta-&gt;make_immutable('inline_constructor' =&gt; 0);</code> to the end of your package will suppress this warning.</em></p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 31115647, "answer_count": 2, "score": 4, "last_activity_date": 1435580655, "creation_date": 1435330558, "last_edit_date": 1435330981, "question_id": 31076321, "link": "https://stackoverflow.com/questions/31076321/why-is-it-very-bad-practice-to-override-new-when-using-moose", "title": "Why is it &quot;very bad practice&quot; to override new when using Moose?", "body": "<p>From the <a href=\"http://search.cpan.org/dist/Moose/lib/Moose/Manual/BestPractices.pod#Never_override_new\" rel=\"nofollow\">Moose::Manual::BestPractices</a> page:</p>\n\n<blockquote>\n  <p>Overriding <code>new</code> is a <strong>very bad practice</strong>. Instead, you should use a <code>BUILD</code> or <code>BUILDARGS</code> methods to do the same thing. When you override <code>new</code>, Moose can no longer inline a constructor when your class is immutabilized.</p>\n</blockquote>\n\n<p><strong>My question is why is this considered very bad practice?</strong></p>\n\n<p>I thought an \"inline\" constructor just meant that the constructor was defined in the same package as the class.  If this is true wouldn't it mean that if you overrode <code>new</code> within that package the constructor would still be considered an \"inline\" constructor?  Please correct me if I'm wrong.  I don't fully understand the concept of what it means for a constructor to be \"inline.\"</p>\n\n<hr>\n\n<p>The reason I came across this question is because I'm creating a script that builds a list of objects.  If a user attempts to create a new object that is identical to one in the list I want to stop <code>Moose</code> from creating a new object and just return a reference to the existing one.</p>\n\n<p>When a new object is created I want to push it onto the list and return the new object.  When an attempt is made to create existing object the existing object should be returned and not pushed onto the list. </p>\n\n<pre><code># Some pseudo code showing the logic of what I attempted\naround BUILDARGS =&gt; sub {\n    my ($orig, $self, %args) = @_;\n\n    # loop through objects in list\n    for my $object (@list) {\n\n        # if $args used to define the new object\n        # match the arguments of any object in the list\n        # return the matched object\n\n        # I want this to directly return the object\n        # and skip the call to BUILD\n    }\n\n    return $self-&gt;orig(\n        # Insert args here\n    );\n};\n\nsub BUILD {\n    my ($self) = @_;\n\n    # I don't want this call to happen if the object already existed\n    push @list, $self;\n}   \n</code></pre>\n\n<p>When creating a new object I attempted to use <code>BUILD</code> to push it onto the list once it is created.  The problem is when I attempted to create an existing object and use <code>BUILDARGS</code> to return the existing object doesn't seem to stop <code>Moose</code> from calling <code>BUILD</code> which attempts to push the object onto the list.</p>\n\n<p>The only way I was able to get around this was to override <code>new</code> and have it return the existing object without creating a new one.</p>\n\n<pre><code># Some pseudo code showing the overridden constructor\nsub new {\n    my ($class, %args) = @_;\n\n    # loop through objects in list\n    for my $object (@list) {\n\n        # if $args used to define the new object\n        # match the arguments of any object in the list\n        # return the matched object\n    }\n\n    # Build the object\n    my $self = bless {\n        # Insert args here\n    }, $class;\n\n    # Add the object to the list\n    push @list, $object;\n}\n</code></pre>\n\n<p>Overriding <code>new</code> worked, but if it really is such a horrible idea, as the <code>Moose</code> documentation seems to suggest, is there a better way to do it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1435328880, "post_id": 31075600, "comment_id": 50169926, "body": "It&#39;s far from clear what you want to do. Are you searching the file name or the file contents? Are you looking for <code>$runVar.csv</code>, <code>&quot;$runVar&quot;.csv</code>, <code>&lt;runVar&gt;.csv</code>, or the <i>contents</i> of variable <code>runVar</code> followed by <code>.csv</code>?"}, {"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 0, "creation_date": 1435328889, "post_id": 31075600, "comment_id": 50169934, "body": "i did not understand what do you exacly want, are you searching for a file that has a name &quot;$runVar.csv&quot; in some folder and if you find it, you have to send an email ?"}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1435329270, "post_id": 31075600, "comment_id": 50170195, "body": "Hi borodin, I am not looking for the contents of the file, actually i have this variable named runVar in my script &amp; that variable will return me  a numerical value, and now i want to search a file (whose name) is ending with that runVar.csv, so i said there can be anything ahead in that name. To be more clear ill give you example: i want to search this file &quot;DA_Mismatch_Count-RunId_1595.csv&quot; where this numerical value  would be returned from runVar"}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1435332287, "creation_date": 1435332287, "answer_id": 31076923, "question_id": 31075600, "link": "https://stackoverflow.com/questions/31075600/how-to-search-file-ending-with-pattern-in-a-directory-using-perl-script/31076923#31076923", "title": "How to search file ending with pattern in a directory using Perl script", "body": "<p>If I understand you correctly, you want to look for a file with a name of \"anything$runVar.csv\", and then do something with that file. Here's an example of how to do that. If a file is found, it'll open it and print the contents.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $run_var = 1822;\n\nmy $rx = qr/(?&lt;!\\d)$run_var\\.csv/;\n\nmy $dir = \".\";\n\nopendir my $dh, $dir or die $!;\n\nwhile (my $file = readdir($dh)){\n\n    if ($file =~ $rx){\n        open my $fh, '&lt;', $file\n          or die $!;\n\n        for my $line (&lt;$fh&gt;){\n            chomp $line;\n            print \"$line\\n\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435336919, "creation_date": 1435336919, "answer_id": 31078180, "question_id": 31075600, "link": "https://stackoverflow.com/questions/31075600/how-to-search-file-ending-with-pattern-in-a-directory-using-perl-script/31078180#31078180", "title": "How to search file ending with pattern in a directory using Perl script", "body": "<p>Please don't put capital letters in Perl lexical identifiers. <code>$run_var</code> is much more readable, especially for those whose first language isn't English</p>\n\n<p>This is very easily done with <code>glob</code></p>\n\n<pre><code>my @matches = glob \"*$run_var.csv\";\n</code></pre>\n\n<p>You will have to add the directory that you want to search to the beginning of the pattern string, or you can <code>chdir</code> there before you call <code>glob</code></p>\n"}], "owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1435336919, "creation_date": 1435328380, "last_edit_date": 1435328687, "question_id": 31075600, "link": "https://stackoverflow.com/questions/31075600/how-to-search-file-ending-with-pattern-in-a-directory-using-perl-script", "title": "How to search file ending with pattern in a directory using Perl script", "body": "<p>I have to search a particular csv file ending with a variable \"$runVar\".csv in a folder. This should be the pattern : <code>anything &lt;runVar&gt;.csv</code>. I have to attach the output of this search and mail it.\nplease help. I tried mailing thing with a example file in shell using mutt. please confirm it will work in perl too?</p>\n"}, {"tags": ["perl", "pdf", "text"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1435333004, "post_id": 31075302, "comment_id": 50172686, "body": "Been there. Then, I discovered <a href=\"http://poppler.freedesktop.org/\" rel=\"nofollow noreferrer\">pdftohtml</a>. See &quot;<a href=\"http://www.nu42.com/2014/09/scraping-pdf-documents-without-losing.html\" rel=\"nofollow noreferrer\">Scraping PDF documents without losing your sanity</a>&quot;."}, {"owner": {"reputation": 3, "user_id": 5053293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8032a8a9a5fb138c844d7eebb64d99?s=128&d=identicon&r=PG&f=1", "display_name": "PerlNun", "link": "https://stackoverflow.com/users/5053293/perlnun"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1435340549, "post_id": 31075302, "comment_id": 50176872, "body": "Thank-you for the poppler suggestion. Never heard of it. I will try it tomorrow when I am at home."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5053293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8032a8a9a5fb138c844d7eebb64d99?s=128&d=identicon&r=PG&f=1", "display_name": "PerlNun", "link": "https://stackoverflow.com/users/5053293/perlnun"}, "edited": false, "score": 0, "creation_date": 1438537665, "post_id": 31079518, "comment_id": 51479797, "body": "CAM::PDF was a nice effort. The Apache-tiki is working fine. What I like about it is that it can be called within a perl script."}], "tags": [], "owner": {"reputation": 335, "user_id": 1069971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97cb0751612283213d3736bc03549d7?s=128&d=identicon&r=PG", "display_name": "vivek85", "link": "https://stackoverflow.com/users/1069971/vivek85"}, "is_accepted": false, "score": 0, "last_activity_date": 1435342072, "creation_date": 1435342072, "answer_id": 31079518, "question_id": 31075302, "link": "https://stackoverflow.com/questions/31075302/convert-pdf-to-text-using-perl/31079518#31079518", "title": "Convert pdf to text using perl", "body": "<p>Any reason why you would like to use Perl? There are many other pdftotext tools that you can use, which will do this job better. Try poppler-utils. One of the best pdf conversion tools available.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5053293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8032a8a9a5fb138c844d7eebb64d99?s=128&d=identicon&r=PG&f=1", "display_name": "PerlNun", "link": "https://stackoverflow.com/users/5053293/perlnun"}, "edited": false, "score": 0, "creation_date": 1436020961, "post_id": 31082202, "comment_id": 50443594, "body": "#!/bin/perl use strict; use warnings; use Cwd;  my $tika = &quot;C:/Apache_tiki&quot;; chdir $tika; my $here = getcwd(); print &quot;Current directory: $here\\n&quot;; my $myfile=&quot;Example.pdf&quot;; my $text=<code>java -jar tika-app-1.9.jar --text &quot;$myfile&quot;</code>; print &quot;Text: $text\\n&quot;;"}], "tags": [], "owner": {"reputation": 406, "user_id": 1879794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hOga3.jpg?s=128&g=1", "display_name": "MrCleanX", "link": "https://stackoverflow.com/users/1879794/mrcleanx"}, "is_accepted": true, "score": 0, "last_activity_date": 1435353002, "creation_date": 1435353002, "answer_id": 31082202, "question_id": 31075302, "link": "https://stackoverflow.com/questions/31075302/convert-pdf-to-text-using-perl/31082202#31082202", "title": "Convert pdf to text using perl", "body": "<p><a href=\"https://tika.apache.org/download.html\" rel=\"nofollow\">Try Apache Tika.</a> I just started using it to pull text for a small search engine I'm developing. So far it's been pretty nice. </p>\n\n<p>The perl code goes like this...</p>\n\n<pre><code>my $text = `java -jar /some/path/tika-app-1.8.jar --text '/some/file'`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8537, "user_id": 14783, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7f7ebc731345d37a667c3242cf928703?s=128&d=identicon&r=PG", "display_name": "Chris Dolan", "link": "https://stackoverflow.com/users/14783/chris-dolan"}, "is_accepted": false, "score": 2, "last_activity_date": 1438370573, "creation_date": 1438370573, "answer_id": 31753690, "question_id": 31075302, "link": "https://stackoverflow.com/questions/31075302/convert-pdf-to-text-using-perl/31753690#31753690", "title": "Convert pdf to text using perl", "body": "<p>I'm the author of CAM::PDF and I heartily recommend using a different tool for this task. :-) I wrote the text extraction as a fun experiment and quickly discovered that it's a very hard problem to get right.</p>\n"}], "owner": {"reputation": 3, "user_id": 5053293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8032a8a9a5fb138c844d7eebb64d99?s=128&d=identicon&r=PG&f=1", "display_name": "PerlNun", "link": "https://stackoverflow.com/users/5053293/perlnun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3099, "favorite_count": 0, "accepted_answer_id": 31082202, "answer_count": 3, "score": 0, "last_activity_date": 1482441480, "creation_date": 1435327509, "last_edit_date": 1435329018, "question_id": 31075302, "link": "https://stackoverflow.com/questions/31075302/convert-pdf-to-text-using-perl", "title": "Convert pdf to text using perl", "body": "<p>I have a pdf file that I would like to convert to a text file.\nI tried perl perl getpdftotext.exe fileName.pdf on a linux command line but nothing happens.\nI tried <code>CPAN CAM::PDF</code> and no luck.</p>\n\n<p>I get the error Use of uninitialized value in string eq at </p>\n\n<p><code>C:/Strawberry/perl/site/lib/CAM/PDF.pm line 2362</code></p>\n\n<p>and the output file is empty.</p>\n\n<p>I am able to read the number of pages in the pdf file.\n<code>my $num=$pdfone-&gt;numPages();</code> returns the correct number of pages.\nI am using Adobe Reader X version 10.1.4.\nI also tried a renderer, trying to get one page...2nd snippet\nI also get the error unintialized value. I have tried different pdf files.\nI am using Strawberry perl.</p>\n\n<p><code>enter code here</code></p>\n\n<pre><code>use CAM::PDF;\nuse CAM::PDF::PageText;\nuse PDF::API2;\n    my $pdfone = CAM::PDF-&gt;new('WFServlet.pdf');\n    my $outfile = \"pdfWFServeltRESULT.txt\"; \n    my @lines;\n    open (OUTF, \"&gt;$outfile\") || die \"Can not open $outfile\";\n\n    for my $page (1 .. $pdfone-&gt;numPages()) {\n       my $text = $pdfone-&gt;getPageText($page);\n       @lines = split (/\\n/, $text);\n    }\n    :\n    : #snippet 2\n use CAM::PDF;\n use PDF::API2;\n use CAM::PDF::PageText;\n :\n my $pageone_tree = $pdfone-&gt;getPageContentTree(1);\n my $doc-&gt;getPageText(1);\n if (defined $doc) {\n    print OUTF CAM::PDF::PageText-&gt;render($doc);\n }\n if (defined $pageone_tree) {\n    print OUTF CAM::PDF::PageText-&gt;render($pageone_tree);\n }\n</code></pre>\n"}, {"tags": ["perl", "moose", "type-constraints"], "comments": [{"owner": {"reputation": 2591, "user_id": 1162732, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c2fc947392492e1ff685f126964a2908?s=128&d=identicon&r=PG", "display_name": "zgpmax", "link": "https://stackoverflow.com/users/1162732/zgpmax"}, "edited": false, "score": 0, "creation_date": 1435324536, "post_id": 31073018, "comment_id": 50166905, "body": "I&#39;ve done such things in the past using coercion.  Can&#39;t see straight off why your existing coercion set-up isn&#39;t doing it.  You have remembered what is usually the major stumbling block which is adding the coercion meta attribute to the attributes where you want coercion to happen.  I suggest persevering with coercion."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1435325413, "post_id": 31073018, "comment_id": 50167567, "body": "This is exactly what <code>BUILDARGS</code> is for."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4702030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b100308eb6ada9450292ba82b88cd3d5?s=128&d=identicon&r=PG&f=1", "display_name": "etripe", "link": "https://stackoverflow.com/users/4702030/etripe"}, "edited": false, "score": 0, "creation_date": 1435413927, "post_id": 31074711, "comment_id": 50195913, "body": "Thanks for the suggestion. I&#39;ll look into what you said. I&#39;ll also have a look at the documentation to see what I gain by using MooseX::Types over the usual Moose::Util::TypeConstraints."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1435325925, "creation_date": 1435325925, "answer_id": 31074711, "question_id": 31073018, "link": "https://stackoverflow.com/questions/31073018/moose-construct-objects-from-single-arguments/31074711#31074711", "title": "Moose construct objects from single arguments", "body": "<p>You can definitely do it with types and coercion. Try using <a href=\"https://metacpan.org/pod/MooseX::Types\" rel=\"nofollow\">MooseX::Types</a> instead of the built-in ones.</p>\n\n<p>Here's a small example, partly lifted from the MooseX::Types docs.</p>\n\n<pre><code>package Foo;\nuse Moose;\nuse MooseX::Types -declare =&gt; [qw(MyDateTime)];\nuse MooseX::Types::Moose 'Int';\nuse DateTime;\n\nclass_type MyDateTime, { class =&gt; 'DateTime' };\ncoerce MyDateTime, from Int, via { DateTime-&gt;from_epoch( epoch =&gt; $_ ) };\n\nhas date =&gt; (\n    is      =&gt; 'ro',\n    isa     =&gt; MyDateTime,\n    default =&gt; sub {time},\n    coerce  =&gt; 1,\n);\n\npackage main;\n\nmy $foo = Foo-&gt;new;\nsay 'without args: ', $foo-&gt;date;\n\nmy $bar = Foo-&gt;new( date =&gt; time - 24 * 3600 );\nsay 'with args:    ', $bar-&gt;date;\n</code></pre>\n\n<p>This will print something like:</p>\n\n<pre><code>without args: 2015-06-26T13:35:38\nwith args:    2015-06-25T13:35:38\n</code></pre>\n\n<p>It looks a lot like what you have, just using the newer type thing. Give it a try.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 4702030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b100308eb6ada9450292ba82b88cd3d5?s=128&d=identicon&r=PG&f=1", "display_name": "etripe", "link": "https://stackoverflow.com/users/4702030/etripe"}, "edited": false, "score": 0, "creation_date": 1435414074, "post_id": 31074877, "comment_id": 50195948, "body": "Your solution seems more elegant than defining a custom type just for the sake of one class, like I did. I&#39;ll give it a shot."}, {"owner": {"reputation": 85, "user_id": 4702030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b100308eb6ada9450292ba82b88cd3d5?s=128&d=identicon&r=PG&f=1", "display_name": "etripe", "link": "https://stackoverflow.com/users/4702030/etripe"}, "edited": false, "score": 0, "creation_date": 1435435868, "post_id": 31074877, "comment_id": 50202513, "body": "Tried it now. Works like you said. For clarity&#39;s sake: &quot;use Moose::Util::TypeConstraints;&quot; also needs to be added to the &#39;First&#39; package for any coercion to work on its attributes, but I&#39;m sure that was implicit in your post, Borodin."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4702030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b100308eb6ada9450292ba82b88cd3d5?s=128&d=identicon&r=PG&f=1", "display_name": "etripe", "link": "https://stackoverflow.com/users/4702030/etripe"}, "edited": false, "score": 0, "creation_date": 1435446970, "post_id": 31074877, "comment_id": 50205413, "body": "@etripe: I&#39;m glad you have a solution. I&#39;d overlooked that modification, thank you. I&#39;ve added it to my post. By the way I don&#39;t think the <code>default</code> items are correct, as the constructor needs the <code>name</code> attribute to work"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4702030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b100308eb6ada9450292ba82b88cd3d5?s=128&d=identicon&r=PG&f=1", "display_name": "etripe", "link": "https://stackoverflow.com/users/4702030/etripe"}, "edited": false, "score": 0, "creation_date": 1435485700, "post_id": 31074877, "comment_id": 50212436, "body": "@etripe: I&#39;m not sure it makes sense to have a default at all, especially without any checking for uniqueness. But that depends a lot on the design of your real-world app so it&#39;s completely up to you. I guess, with the coercion in place, you could write <code>default = &#39;Default Type2&#39;</code> instead of calling the constructor"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435446932, "last_edit_date": 1435446932, "creation_date": 1435326379, "answer_id": 31074877, "question_id": 31073018, "link": "https://stackoverflow.com/questions/31073018/moose-construct-objects-from-single-arguments/31074877#31074877", "title": "Moose construct objects from single arguments", "body": "<p>You can do exactly as you describe using coercion</p>\n\n<ul>\n<li><p>Add</p>\n\n<pre><code>use Moose::Util::TypeConstraints;\n</code></pre>\n\n<p>to <code>First</code>, <code>Second::Type1</code> and <code>Second::Type2</code></p></li>\n<li><p>Add a coercion action to <code>Second::Type1</code></p>\n\n<pre><code>coerce 'Second::Type1'\n    =&gt; from 'Str'\n        =&gt; via { Second::Type1-&gt;new( name =&gt; $_ ) };\n</code></pre>\n\n<p>and to <code>Second::Type2</code></p>\n\n<pre><code>coerce 'Second::Type2'\n    =&gt; from 'Str'\n        =&gt; via { Second::Type2-&gt;new( name =&gt; $_ ) };\n</code></pre></li>\n<li><p>Enable coercion for the <code>type1</code> and <code>type2</code> attributes of <code>First</code></p>\n\n<pre><code>has 'type1' =&gt; (\n  is      =&gt; 'rw',\n  isa     =&gt; 'Second::Type1',\n  default =&gt; sub { Second::Type1-&gt;new },\n  coerce  =&gt; 1,\n);\n\nhas 'type2' =&gt; (\n  is      =&gt; 'rw',\n  isa     =&gt; 'Second::Type2',\n  default =&gt; sub { Second::Type2-&gt;new },\n  coerce  =&gt; 1,\n);\n</code></pre></li>\n</ul>\n\n<p>Then you can create a <code>First</code> object exactly as you say, with</p>\n\n<pre><code>my $first = First-&gt;new(type1 =&gt; 'foo', type2 =&gt; 'bar');\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4702030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b100308eb6ada9450292ba82b88cd3d5?s=128&d=identicon&r=PG&f=1", "display_name": "etripe", "link": "https://stackoverflow.com/users/4702030/etripe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 31074877, "answer_count": 2, "score": 4, "last_activity_date": 1435485441, "creation_date": 1435321151, "last_edit_date": 1435485441, "question_id": 31073018, "link": "https://stackoverflow.com/questions/31073018/moose-construct-objects-from-single-arguments", "title": "Moose construct objects from single arguments", "body": "<p>I've been dabbling with Moose for about seven months and Perl only slightly longer, but can't figure out how you can construct several attributes in a class by just supplying one argument for each, instead of a whole hashref of them. I've searched the documentation and the web extensively, but I'm either looking for the wrong words or missing something. </p>\n\n<p>I've adapted the design to be more generic. With the following basic setup:</p>\n\n<pre><code>package First;\nuse Moose;\nuse Second::Type1;\nuse Second::Type2;\nhas 'type1' =&gt; (\n  is =&gt; 'rw',\n  isa =&gt; 'Second::Type1',\n  default =&gt; sub {Second::Type1-&gt;new(name =&gt; 'random')}\n);\n\nhas 'type2' =&gt; (\n  is =&gt; 'rw',\n  isa =&gt; 'Second::Type2',\n  default =&gt; sub {Second::Type2-&gt;new(name =&gt; 'random')}\n);\n\npackage Second::Type1;\nuse Moose;\nuse This;\nhas 'name' =&gt; (\n  is =&gt; 'rw',\n  isa =&gt; 'Str',\n  required =&gt; 1,\n);\nhas 'this' =&gt; (\n  is =&gt; 'rw',\n  isa =&gt; 'This',\n  default =&gt; sub {This-&gt;new()}\n);\n# package has more attributes, but you get the idea\n__PACKAGE__-&gt;meta-&gt;make_immutable();\nno Moose;\n1;\n\npackage Second::Type2;\nuse Moose;\nuse That;\nhas 'name' =&gt; (\n  is =&gt; 'rw',\n  isa =&gt; 'Str',\n  required =&gt; 1,\n);\nhas 'that' =&gt; (\n  is =&gt; 'rw',\n  isa =&gt; 'That',\n  default =&gt; sub {That-&gt;new()}\n);\n# package has more attributes, but you get the idea\n__PACKAGE__-&gt;meta-&gt;make_immutable();\nno Moose;\n1;\n</code></pre>\n\n<p>I want to be able to construct a First by saying:</p>\n\n<pre><code>use First;\nmy $first = First-&gt;new(type1 =&gt; 'foo', type2 =&gt; 'bar');\n</code></pre>\n\n<p>where 'foo' equals the value for Second::Type1's 'name' attribute and 'bar' equals the value for Second::Type2's 'name' attribute.</p>\n\n<p>Now as to my own solution, I've (successfully) made a Moose::Role which only contains an 'around BUILDARGS' sub and then using a Factory class (the contents of which aren't relevant here IMO):</p>\n\n<pre><code>package Role::SingleBuildargs;\n\nuse Moose::Role;\nuse Factory::Second;\nrequires 'get_supported_args';\n\naround BUILDARGS =&gt; sub {\nmy ($class, $self, %args) = @_;\nmy @supported_args = $self-&gt;get_supported_args;\nmy $factory = Factory::Second-&gt;new();\n    my @errors = ();\n    foreach my $arg (sort {$a cmp $b} keys %args) {\n        if (grep {$_ eq $arg} @supported_args) {\n            my $val = $args{$arg};\n            if (!ref $val) {    # passed scalar init_arg\n                print \"$self (BUILDARGS): passed scalar\\n\";\n                print \"Building a Second with type '$arg' and name '$val'\\n\";\n                $args{$arg} = $factory-&gt;create(type =&gt; $arg, name =&gt; $val)\n            } elsif (ref $val eq 'HASH') {  # passed hashref init_arg\n                print \"$self (BUILDARGS): passed hashref:\\n\";\n                my %init_args = %$val;\n                delete $init_args{name} unless $init_args{name};\n                $init_args{type} = $arg;\n                $args{$arg} = $factory-&gt;create(%init_args);\n            } else {    # passed another ref entirely\n                print \"$self (BUILDARGS): cannot handle reference of type: \", ref $val, \"\\n\";\n                die;\n            }\n        } else {\n            push @errors, \"$self - Unsupported attribute: '$arg'\";\n        }\n    }\n    if (@errors) {\n        print join(\"\\n\", @errors), \"\\n\";\n        die;\n    }\n    return $self-&gt;$class(%args);\n    };\n\nno Moose;\n1;\n</code></pre>\n\n<p>and then I use that Role in the First class and other classes like First.</p>\n\n<p>I've also tried coercing via:</p>\n\n<pre><code>package Role::Second::TypeConstraints;\nuse Moose::Util::TypeConstraints\n\nsubtype 'SecondType1', as 'Second::Type1';\nsubtype 'SecondType2', as 'Second::Type2';\ncoerce 'SecondType1', from 'Str', via {Second::Type1-&gt;new(name =&gt; $_};\ncoerce 'SecondType2', from 'Str', via {Second::Type2-&gt;new(name =&gt; $_};\n\nno Moose::Util::TypeConstraints;\n1;\n</code></pre>\n\n<p>and modified the First package (listing only changes):</p>\n\n<pre><code>use Role::Second::TypeConstraints;\nhas 'type1' =&gt; (\n   isa =&gt; 'SecondType1',\n   coerce =&gt; 1,\n);\nhas 'type2' =&gt; (\n   isa =&gt; 'SecondType2',\n   coerce =&gt; 1,\n);    \n</code></pre>\n\n<p>That, however didn't work. If someone could explain why, that would be great.</p>\n\n<p>As to the actual question: what is the best way to obtain this kind of behaviour in your classes? Is there really no better way than modifying BUILDARGS, or did I miss something (about Moose::Util::TypeConstraints, perhaps)? TMTOWTDI and all, but mine doesn't seem efficient at all.</p>\n\n<p>EDIT: edited for consistency (mixed up generic class names)</p>\n"}, {"tags": ["perl", "hash", "perl-xs"], "comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1435322092, "post_id": 31072367, "comment_id": 50165330, "body": "I expect your paste is missing some parens, because that won&#39;t compile. Perhaps you mean: <code>if (SvTYPE(SvRV(value)) == SVt_PVAV)</code>  ?"}, {"owner": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1435323209, "post_id": 31072367, "comment_id": 50166030, "body": "Code updated, thank you."}, {"owner": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435328056, "post_id": 31072367, "comment_id": 50169415, "body": "@ikegami I updated my question. Problem that I don&#39;t see scalar value output for key <code>a</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435340355, "post_id": 31072367, "comment_id": 50176778, "body": "You&#39;re also iterating over the hash incorrectly. How do iterate over a hash is also demonstrated in my answer."}, {"owner": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "edited": false, "score": 0, "creation_date": 1435340439, "post_id": 31072367, "comment_id": 50176812, "body": "What is wrong with iterating? Why this code works if it is incorrect?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435340501, "post_id": 31072367, "comment_id": 50176846, "body": "As documented, <code>hv_iterinit</code> doesn&#39;t necessarily return the right number of keys, so get rid of all that extra code you added to use it and use the simpler and safer approach."}], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "edited": false, "score": 0, "creation_date": 1435333764, "post_id": 31075156, "comment_id": 50173193, "body": "I call that code again for hash, so it produce that output. I added reference check and it shows that value for key <code>a</code> is not a reference. So my second question is still valid."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "edited": false, "score": 0, "creation_date": 1435334796, "post_id": 31075156, "comment_id": 50173814, "body": "Don&#39;t lie. It was answered, but you changed it an hour later. If you have a new question, ask it in comments or as a question as appropriate. // You can check the type of scalar using <code>SvTYPE</code>, but why would you want to do that. If you want a string, use <code>SvPVutf8</code>. If you want an integer, use <code>SvIV</code>, etc. You should not care how it&#39;s stored."}, {"owner": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "edited": false, "score": 0, "creation_date": 1435335089, "post_id": 31075156, "comment_id": 50173979, "body": "I don&#39;t lie, problem was in first question, I was thinking that hash entry value is always a reference, but for some cases it doesn&#39;t. So thank you for answers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "edited": false, "score": 0, "creation_date": 1435335133, "post_id": 31075156, "comment_id": 50174008, "body": "You said &quot;So my second question is still valid.&quot; after you completely replaced the second question."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1435330179, "last_edit_date": 1435330179, "creation_date": 1435327104, "answer_id": 31075156, "question_id": 31072367, "link": "https://stackoverflow.com/questions/31072367/how-to-handle-hash-value-type-in-perl-xs/31075156#31075156", "title": "How to handle hash value type in Perl XS", "body": "<blockquote>\n  <p><em>Do we always have reference returned from <code>hv_iternextsv()</code> or sometimes it returns scalar?</em></p>\n</blockquote>\n\n<p>It always returns a scalar. Hashes values can only be scalars. Those scalars can be references (<code>$h{x} = [];</code>), but need not be (<code>$h{y} = 123;</code>).</p>\n\n<blockquote>\n  <p><em>Why I don't see scalar value output for key a.</em></p>\n</blockquote>\n\n<p>There's no way your could possibly return what you said it does, seeing as your hash has no key named <code>d</code>. For the hash you provided, your code outputs the following:</p>\n\n<pre><code>key a has scalar value\nkey c has hash value\n</code></pre>\n\n<p>But it's more of a coincidence than anything else that you got the right answer. <code>SvTYPE(SvRV(value))</code> when <code>value</code> isn't a reference??? That makes no sense! The fixed code follows:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Inline C =&gt; &lt;&lt;'__EOI__';\n\n  void print_keys(HV* hash) {\n    char *key;\n    I32 key_length;\n    SV *value;\n\n    hv_iterinit(hash);\n    while (value = hv_iternextsv(hash, &amp;key, &amp;key_length)) {\n      if (SvROK(value)) {\n        SV * const referenced = SvRV(value);\n        if (SvTYPE(referenced) == SVt_PVAV) {\n          printf(\"The value at key %s is reference to an array\\n\", key);\n        }\n        else if (SvTYPE(referenced) == SVt_PVHV) {\n           printf(\"The value at key %s is a reference to a hash\\n\", key);\n        }\n        else {\n           printf(\"The value at key %s is a reference\\n\", key);\n        }\n      } else {\n        printf(\"The value at key %s is not a reference\\n\", key);\n      }\n    }\n  }\n\n__EOI__\n\nprint_keys({a =&gt; \"b\", c =&gt; {d =&gt; \"e\"}});\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The value at key a is not a reference\nThe value at key c is a reference to a hash\n</code></pre>\n"}], "owner": {"reputation": 3612, "user_id": 2464355, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f06527656750e7dc39c2b01e85fc302c?s=128&d=identicon&r=PG", "display_name": "John Tracid", "link": "https://stackoverflow.com/users/2464355/john-tracid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 1, "accepted_answer_id": 31075156, "answer_count": 1, "score": 5, "last_activity_date": 1435569024, "creation_date": 1435319100, "last_edit_date": 1435569024, "question_id": 31072367, "link": "https://stackoverflow.com/questions/31072367/how-to-handle-hash-value-type-in-perl-xs", "title": "How to handle hash value type in Perl XS", "body": "<p>I need to process hash value depends on value type. Here is code with problem:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>I32 keys = hv_iterinit(hash);\nfor (I32 i = 0; i &lt; keys; i++)\n{\n  char *key = NULL;\n  I32 key_length = 0;\n  SV *value = hv_iternextsv(hash, &amp;key, &amp;key_length);\n  // SvROK(value);\n  if (SvTYPE(SvRV(value)) &lt; SVt_PVAV)\n  {\n    // handle scalar\n    printf(\"key %s has scalar value\\n\", key);\n  }\n  else if (SvTYPE(SvRV(value)) == SVt_PVAV)\n  {\n    // handle array\n    printf(\"key %s has array value\\n\", key);\n  }\n  else if (SvTYPE(SvRV(value)) == SVt_PVHV)\n  {\n    // handle hash\n    printf(\"key %s has hash value\\n\", key);\n  }\n}\n</code></pre>\n\n<p>If I don't use commented line, I have problem with scalar values. For example with following hash <code>{a =&gt; \"b\", c =&gt; {d =&gt; \"e\"}}</code> is produce output:</p>\n\n<pre><code>key c has hash value\nkey d has scalar value\n</code></pre>\n\n<p>So here are my questions:</p>\n\n<ol>\n<li>Do we always have reference returned from <code>hv_iternextsv()</code> or sometimes it returns scalar?</li>\n<li>Why I don't see scalar value output for key <code>a</code>.</li>\n</ol>\n\n<p>Update.</p>\n\n<p>My mistake was in working with result of <code>hv_iternextsv()</code>. I was thinking that is always a reference. Here is how working code looks like:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>I32 keys = hv_iterinit(hash);\nfor (I32 i = 0; i &lt; keys; i++)\n{\n  char *key = NULL;\n  I32 key_length = 0;\n  SV *value = hv_iternextsv(hash, &amp;key, &amp;key_length);\n  if (!SvROK(value))\n  {\n    // handle scalar\n  }\n  else\n  {\n    if (SvTYPE(SvRV(value)) == SVt_PVAV)\n    {\n      // handle array\n    }\n    else if (SvTYPE(SvRV(value)) == SVt_PVHV)\n    {\n      // handle hash\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1435314684, "post_id": 31070673, "comment_id": 50160678, "body": "With <code>-l</code>, you don&#39;t need <code>-E</code> and <code>say</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1435321406, "post_id": 31070673, "comment_id": 50164851, "body": "Echo command can also generate UTF-8 : <code>echo -e &#39;\\UE1&#39; | perl -CSA -nE &#39;print $_&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1435314576, "post_id": 31070867, "comment_id": 50160614, "body": "thanx. aceepting in 4 minutes :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1435316153, "last_edit_date": 1435316153, "creation_date": 1435314479, "answer_id": 31070867, "question_id": 31070673, "link": "https://stackoverflow.com/questions/31070673/how-to-convert-the-uxxxxx-sequence-to-character-in-perl/31070867#31070867", "title": "How to convert the U+XXXXX sequence to character in perl?", "body": "<p>Use <a href=\"http://p3rl.org/charnames\" rel=\"nofollow\">charnames</a>:</p>\n\n<pre><code>echo \"U+00E1\" | perl -Mcharnames=short -CO -lnE 'say charnames::vianame($_)'\n</code></pre>\n\n<p>You can also use <code>eval</code>, if you can control what comes in as input:</p>\n\n<pre><code>echo \"U+00E1\" | perl -CO -lnE 'say eval qq(\"\\\\N{$_}\")'\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3717023"}, "edited": false, "score": 0, "creation_date": 1435450052, "post_id": 31071021, "comment_id": 50206001, "body": "This answer would be better with some explanation of the code."}], "tags": [], "owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "is_accepted": false, "score": 0, "last_activity_date": 1435315016, "creation_date": 1435315016, "answer_id": 31071021, "question_id": 31070673, "link": "https://stackoverflow.com/questions/31070673/how-to-convert-the-uxxxxx-sequence-to-character-in-perl/31071021#31071021", "title": "How to convert the U+XXXXX sequence to character in perl?", "body": "<pre><code>echo \"U+00E1\" | perl -CO -lnE 'eval \"\\$a=\\\"\\\\N{$_}\\\";\"; say $a;'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1435331135, "post_id": 31071346, "comment_id": 50171492, "body": "like the <code>pack</code>, but honestly, still not understanding how the pack works."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1435331254, "post_id": 31071346, "comment_id": 50171566, "body": "@kobame: <code>pack</code> is nice, but returns something else than &quot;&#225;&quot;."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1435337639, "post_id": 31071346, "comment_id": 50175352, "body": "Yes, it was not visible what is wrong. It is fixed now."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1435339542, "post_id": 31071346, "comment_id": 50176322, "body": "I&#39;m still getting a different output. Check with <code>xxd</code>."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1435345097, "post_id": 31071346, "comment_id": 50179145, "body": "<code>$ echo &quot;U+00E1&quot; | perl -C -nE &#39;s&#47;U\\+&#47;0x&#47;;eval qq{say chr($_)}&#39; | xxd 00000000: c3a1 0a                                  ... $ echo &quot;U+00E1&quot; | perl -C -nE &#39;say chr(hex) if s&#47;U\\+&#47;&#47;&#39; | xxd 00000000: c3a1 0a                                  ... $ echo &quot;U+00E1&quot; | perl -Mcharnames=short -CO -lnE &#39;say charnames::vianame($_)&#39; | xxd 00000000: c3a1 0a</code>"}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 2, "last_activity_date": 1435337603, "last_edit_date": 1435337603, "creation_date": 1435316018, "answer_id": 31071346, "question_id": 31070673, "link": "https://stackoverflow.com/questions/31070673/how-to-convert-the-uxxxxx-sequence-to-character-in-perl/31071346#31071346", "title": "How to convert the U+XXXXX sequence to character in perl?", "body": "<p>Pure basic Perl solution:</p>\n\n<pre><code>echo \"U+00E1\" | perl -C -nE 'say chr(hex) if s/U\\+//'\n</code></pre>\n\n<p>Please, do not use unsafe (<code>eval</code>) solutions like:</p>\n\n<pre><code>echo \"U+00E1\" | perl -C -nE 's/U\\+/0x/;eval qq{say chr($_)}'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435340097, "creation_date": 1435340097, "answer_id": 31079017, "question_id": 31070673, "link": "https://stackoverflow.com/questions/31070673/how-to-convert-the-uxxxxx-sequence-to-character-in-perl/31079017#31079017", "title": "How to convert the U+XXXXX sequence to character in perl?", "body": "<p>Using <code>pack</code></p>\n\n<pre><code>echo U+0041 U+0042 U+0043 U+00E1 | perl -ne\"print pack 'U', hex for /\\p{hex}+/g\"\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>ABC\u00e1\n</code></pre>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 31070867, "answer_count": 4, "score": 3, "last_activity_date": 1435340097, "creation_date": 1435313896, "question_id": 31070673, "link": "https://stackoverflow.com/questions/31070673/how-to-convert-the-uxxxxx-sequence-to-character-in-perl", "title": "How to convert the U+XXXXX sequence to character in perl?", "body": "<p>This</p>\n\n<pre><code>perl -CO -E 'say \"\\N{U+00E1}\"'\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>\u00e1\n</code></pre>\n\n<p>How to achieve to get the same \u00e1 with the following:</p>\n\n<pre><code>echo \"U+00E1\" | perl -CO -lnE 'say what_here($_)'\n</code></pre>\n"}, {"tags": ["perl", "shell", "background"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435313513, "post_id": 31070260, "comment_id": 50159955, "body": "Backticks are code formatting markers on SO. You can avoid this by indented linefeed then 4 spaces.  Please can you clarify what you&#39;re trying to accomplish? There&#39;s not many reasons to try and background processes spawned via backticks from a perl script..."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435313674, "post_id": 31070260, "comment_id": 50160051, "body": "I have amended your formatting - could you have a look to make sure I haven&#39;t broken it - hopefully it was just the formatting."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435327480, "post_id": 31070260, "comment_id": 50168996, "body": "What makes you think the first doesn&#39;t work???"}, {"owner": {"reputation": 51, "user_id": 3578449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e11d0f4926314c8b0178fb3c9dd4d0?s=128&d=identicon&r=PG&f=1", "display_name": "flyboyleo", "link": "https://stackoverflow.com/users/3578449/flyboyleo"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435336430, "post_id": 31070260, "comment_id": 50174716, "body": "@Sobrique Thanks for editing the format."}, {"owner": {"reputation": 51, "user_id": 3578449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e11d0f4926314c8b0178fb3c9dd4d0?s=128&d=identicon&r=PG&f=1", "display_name": "flyboyleo", "link": "https://stackoverflow.com/users/3578449/flyboyleo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435336506, "post_id": 31070260, "comment_id": 50174763, "body": "@ikegami Thanks for reminding! I found a bug that avoiding the follow scripts running...The first method &#39;works&#39; now..but still just screen print &quot;nohup: redirecting stderr to stdout/n nohup: redirecting stderr to stdout/n nohup: redirecting stderr to stdout/n&quot;    like this 7 times but with nothing running at background. Although now I could submit these 7 jobs manually, I consider one day eventually I&#39;ll run something more than I can manually submitted.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435337825, "post_id": 31070260, "comment_id": 50175438, "body": "So the program did get executed (since it created output) and there&#39;s no reason to believe it wasn&#39;t executed in the background. So your diagnosis is inaccurate. Perhaps your script is having an error, but you discard the error messages without reading them. <code>system(&quot;nohup sh .&#47;tmpScript&#47;matrixR.$num[$i]-$num1.sh &amp;&quot;)</code> would make more sense, and the output will be in <code>nohup.out</code> by default."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435337907, "post_id": 31070688, "comment_id": 50175477, "body": "Improved to avoid superfluous process."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1435337971, "last_edit_date": 1435337971, "creation_date": 1435313946, "answer_id": 31070688, "question_id": 31070260, "link": "https://stackoverflow.com/questions/31070260/how-to-write-a-background-multiple-sh-run-in-a-perl-script-tried-several-metho/31070688#31070688", "title": "How to write a background multiple sh run in a perl script? (tried several methods but all failed)", "body": "<p>So, given your problem seems to be:</p>\n\n<p>invoke <code>sh ./tmpScript/matrixR.$num[$i]-$num1.sh &amp;</code> multiple times in parallel. </p>\n\n<p>My first thought would be that it's worth having a look at that script, because perl can probably do it too.</p>\n\n<p>However for the general case I would suggest using <a href=\"http://search.cpan.org/perldoc/Parallel::ForkManager\" rel=\"nofollow\"><code>Parallel::ForkManager</code></a>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Parallel::ForkManager;\nmy $manager = Parallel::ForkManager-&gt;new(30);\n\nfor ( $i = 0; $i &lt; @num - 1; $i++ ) {\n    $num1 = $num[ $i + 1 ] - 1;\n\n    $manager-&gt;start and next;\n    exec(\"./tmpScript/matrixR.$num[$i]-$num1.sh &gt;/dev/null\")\n       or die($!);\n}\n\n$manager-&gt;wait_all_children();\n</code></pre>\n\n<p>This has the added advantage that it'll parallelise 30 times, but wait until sup processes complete before continuing. Which means you don't denial-of-service your server. </p>\n"}], "owner": {"reputation": 51, "user_id": 3578449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e11d0f4926314c8b0178fb3c9dd4d0?s=128&d=identicon&r=PG&f=1", "display_name": "flyboyleo", "link": "https://stackoverflow.com/users/3578449/flyboyleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435337971, "creation_date": 1435312716, "last_edit_date": 1435313544, "question_id": 31070260, "link": "https://stackoverflow.com/questions/31070260/how-to-write-a-background-multiple-sh-run-in-a-perl-script-tried-several-metho", "title": "How to write a background multiple sh run in a perl script? (tried several methods but all failed)", "body": "<p>I tried to write a background multiple sh run in a perl script, below is my 3 tries:</p>\n\n<pre><code>for ( $i = 0; $i &lt; @num - 1; $i++ ) {\n    $num1 = $num[ $i + 1 ] - 1;\n\n    `nohup sh ./tmpScript/matrixR.$num[$i]-$num1.sh &amp;`\n    # Don't know why not background run........just run one by one and i have to wait.........\n}\n</code></pre>\n\n<p>Tried:</p>\n\n<pre><code>`sh *.sh &amp;`     \n#Wrong    ........just run one by one and i have to wait.........\n</code></pre>\n\n<p>Also tried:</p>\n\n<pre><code>`cd tmpScript; for file in *.sh; do nohup sh \\$file \\&amp;; done `;  \n#Still wrong........just run one by one and i have to wait.........\n</code></pre>\n\n<p>They all failed..Could any of you help and solve it? Thanks!</p>\n\n<p>p.s.: \"``\" these marks didn't displayed above..(seemed be eaten by stackoverflow, it's my first time asking..) </p>\n"}, {"tags": ["perl", "makefile", "module", "cygwin"], "comments": [{"owner": {"reputation": 2490, "user_id": 1173884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aJWD.jpg?s=128&g=1", "display_name": "Jindra Helcl", "link": "https://stackoverflow.com/users/1173884/jindra-helcl"}, "edited": false, "score": 0, "creation_date": 1435309636, "post_id": 31068968, "comment_id": 50157641, "body": "have you tried installing (or checking whether you have) gnu make on your cygwin installation?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1435310896, "post_id": 31068968, "comment_id": 50158401, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/7541019/manual-installation-of-a-perl-module\">Manual installation of a Perl Module</a>"}, {"owner": {"reputation": 128, "user_id": 5052232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50766c8031fdb9224ad5c25d91a639d?s=128&d=identicon&r=PG&f=1", "display_name": "Irfan N", "link": "https://stackoverflow.com/users/5052232/irfan-n"}, "reply_to_user": {"reputation": 2490, "user_id": 1173884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aJWD.jpg?s=128&g=1", "display_name": "Jindra Helcl", "link": "https://stackoverflow.com/users/1173884/jindra-helcl"}, "edited": false, "score": 0, "creation_date": 1435317500, "post_id": 31068968, "comment_id": 50162332, "body": "@JindraHelcl - I seem to have gnu make on my cygwin. Simply searching for the keyword &#39;make&#39; in my cygwin directory gives me the below list. Please suggest how do I go about installing the module using cygwin GNU make."}, {"owner": {"reputation": 128, "user_id": 5052232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50766c8031fdb9224ad5c25d91a639d?s=128&d=identicon&r=PG&f=1", "display_name": "Irfan N", "link": "https://stackoverflow.com/users/5052232/irfan-n"}, "edited": false, "score": 0, "creation_date": 1435317535, "post_id": 31068968, "comment_id": 50162366, "body": "<code>C:\\CYGWIN&gt;dir &#47;s | find &quot;make&quot; 04&#47;27&#47;2007  05:15 PM           191,488 makeinfo.exe 04&#47;06&#47;2007  02:13 PM            13,405 makewhatis 04&#47;06&#47;2007  02:13 PM             1,899 makewhatis.8.gz 04&#47;06&#47;2007  02:13 PM             1,917 makewhatis.8.gz 04&#47;06&#47;2007  02:13 PM             1,708 makewhatis.8.gz 04&#47;06&#47;2007  02:13 PM             1,998 makewhatis.8.gz 04&#47;06&#47;2007  02:13 PM             1,786 makewhatis.8.gz 04&#47;27&#47;2007  05:15 PM             2,148 makeinfo.1.gz 04&#47;06&#47;2007  02:13 PM             1,626 makewhatis.8.gz 04&#47;06&#47;2007  02:13 PM             1,591 makewhatis.8.gz</code>"}, {"owner": {"reputation": 2490, "user_id": 1173884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aJWD.jpg?s=128&g=1", "display_name": "Jindra Helcl", "link": "https://stackoverflow.com/users/1173884/jindra-helcl"}, "edited": false, "score": 0, "creation_date": 1435317997, "post_id": 31068968, "comment_id": 50162664, "body": "I think the list shows that you don&#39;t have make.. Just try to run &#39;make&#39; from your cygwin console."}, {"owner": {"reputation": 2490, "user_id": 1173884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aJWD.jpg?s=128&g=1", "display_name": "Jindra Helcl", "link": "https://stackoverflow.com/users/1173884/jindra-helcl"}, "edited": false, "score": 0, "creation_date": 1435318127, "post_id": 31068968, "comment_id": 50162725, "body": "When you have the make utility, you usually can run these commands: <code>perl Makefile.pl</code>, <code>make</code>, <code>make test</code>, and <code>make install</code>"}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1435322266, "post_id": 31068968, "comment_id": 50165445, "body": "CPAN for a long while now has supported HTTP as well as FTP. If it&#39;s specifically the FTP part your company objects to (not entirely unreasonably), you might get better luck using some HTTP mirrors instead."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1435309434, "creation_date": 1435309434, "answer_id": 31069093, "question_id": 31068968, "link": "https://stackoverflow.com/questions/31068968/manually-installing-a-perl-module-using-cygwin-gnu-make/31069093#31069093", "title": "Manually installing a Perl module using cygwin GNU make", "body": "<p>You might be able to get around the FTP restriction by using a <a href=\"https://metacpan.org/pod/distribution/CPAN-Mini/bin/minicpan\" rel=\"nofollow\">minicpan</a>. Basically this lets you build your own local CPAN mirror, for example on a USB key drive. It's intended to carry a snapshot of CPAN with you, e.g. when you are in transatlantic flights and just really need that module you didn't install.</p>\n\n<p>However, those restrictions are probably there for a reason. Downloading and installing/copying stuff from the internet might be against the corporate policy just the same as it's an external source. You should check that. On the other hand, those policies are often intended for the average office user that is not a developer, so you might be able to talk to them and explain why you and your team should be excepted from this policy, and how reusing code from CPAN would save your company a lot of time, which equals money.</p>\n"}], "owner": {"reputation": 128, "user_id": 5052232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50766c8031fdb9224ad5c25d91a639d?s=128&d=identicon&r=PG&f=1", "display_name": "Irfan N", "link": "https://stackoverflow.com/users/5052232/irfan-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1607030781, "creation_date": 1435309072, "last_edit_date": 1607030781, "question_id": 31068968, "link": "https://stackoverflow.com/questions/31068968/manually-installing-a-perl-module-using-cygwin-gnu-make", "title": "Manually installing a Perl module using cygwin GNU make", "body": "<p>I am trying to install a few Perl modules, one of them being Time::Format. My corporate group policy does not allow me to use CPAN (since it uses FTP) to install modules. Tried using makefile.pl, but nmake.exe (I am using windows cygwin) seems to be missing too. The policy does not allow to download the nmake.exe executable too. PPM isn't available too.</p>\n\n<p>How do I go about installing module manually? Is there a way where I could manually copy files from this module on to individual folders in my Perl directory? If yes, which files, go where?</p>\n"}, {"tags": ["regex", "perl", "escaping", "substring"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1435306889, "post_id": 31068009, "comment_id": 50156049, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> <code>&lt;&lt;&lt;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435317218, "post_id": 31068009, "comment_id": 50162136, "body": "OK, you&#39;ve specified a replacement string of <code>(eeef-ffgg)</code> - but want it replaced with <code>(XXXXXXXXX)</code>? So I take it you want different treatment of stuff in brackets?"}, {"owner": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435317527, "post_id": 31068009, "comment_id": 50162356, "body": "I have a given replacement string &quot;ccddd: (eeef-ffgg)&quot;. If the text is something else like &quot;aaddd: (eeef-ffgg)&quot; it should not replace anything. No special threatment for stuff in brackets. I just want perl to look out for the exact same replacement string in one input line. If it founds a result, it should replace anything except special characters and blanks with a X."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435319063, "post_id": 31068009, "comment_id": 50163270, "body": "@lycos: What do you call ` <i>special character</i>? Why does <code>ccddd: (eeef-ffgg)</code> get replaced by <code>XXXXX: (XXXXXXXXX)</code> and not <code>XXXXX: (XXXX-XXXX)</code>? Why are parentheses and colons special while hyphens are not? Is there anything other than letters and numbers that isn&#39;t <i>special</i>?"}, {"owner": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435319226, "post_id": 31068009, "comment_id": 50163369, "body": "@ Borodion: Hyphens should have been special characters too. I corrected the above example."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435316723, "post_id": 31068828, "comment_id": 50161821, "body": "This will replace the escape characters too. Is there a solution without removing the escape characters?  If you use this input data: <b>DATA</b> abcdefg hijkl: (mnop-qrst) uvwx aabbccd deeff: (gghh-iijj) kkll aaabbbc ccddd: (eeef-ffgg) ghhh  and this replace strings: ijkl: gghh-iijj ccddd: (eeef-ffgg) );"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435316992, "post_id": 31068828, "comment_id": 50161993, "body": "The <code>quotemeta</code> bit should take care of that for you. It escapes special characters for use in your regex. But if it&#39;s replacing <i>just</i> letters, then <code>tr</code> should do the job."}, {"owner": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435317312, "post_id": 31068828, "comment_id": 50162201, "body": "I edited the examples above to describe it further. When I use your example including the quotemeta bit, the last line looks like this aaabbbc XXXXXX XXXXXXXXXXX ghhh instead of aaabbbc XXXXX: (XXXXXXXXX) ghhh."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435317475, "post_id": 31068828, "comment_id": 50162315, "body": "How does that one look?"}, {"owner": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435318452, "post_id": 31068828, "comment_id": 50162925, "body": "That works fine. Is there a possibility to get it working without matching the amount of whitespaces? If the replacement string e.g. has multiple blanks between the values or less blanks than the input?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "edited": false, "score": 0, "creation_date": 1435318966, "post_id": 31068828, "comment_id": 50163205, "body": "Almost certainly. Might be worth opening another question for that though."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1435317450, "last_edit_date": 1435317450, "creation_date": 1435308637, "answer_id": 31068828, "question_id": 31068009, "link": "https://stackoverflow.com/questions/31068009/how-to-replace-the-characters-in-substring-including-escape-characters-with-th/31068828#31068828", "title": "How to replace the characters in substring, including escape characters, with the character &#39;X&#39;?", "body": "<p>The trick here I would suggest, is to pre-generate your regex patterns. </p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nmy @replace_strings = qw ( ijkl:\n    mnop-qrst\n    hijkl: );\n\nmy %replace = map { $_ =&gt; \"X\" x length($_) } @replace_strings;\n\nmy $replace_regex = join( \"|\", map {quotemeta} @replace_strings );\n$replace_regex = qr/($replace_regex)/;\n\nwhile (&lt;DATA&gt;) {\n    s/$replace_regex/$replace{$1}/g;\n    print;\n}\n\n __DATA__\n abcdefg hijkl: (mnop-qrst) uvwx\n</code></pre>\n\n<p>We:</p>\n\n<ul>\n<li>use a list of 'replacement strings'. </li>\n<li>use map to generate the substitutions ( X x length ) </li>\n<li>Generate a regex to match the 'search'</li>\n<li>then use that to apply the 'replace' </li>\n</ul>\n\n<p>This thus prints:</p>\n\n<pre><code>abcdefg XXXXXX (XXXXXXXXX) uvwx\n</code></pre>\n\n<p>You could use a similar technique. </p>\n\n<p>Following on from comments - it looks like you want to define some strings, and just replace the text within them. </p>\n\n<p>So how about something like this:</p>\n\n<pre><code>my %replace = map { $_ =&gt; ($_ =~ s/\\w/X/gr) } @replace_strings;\n</code></pre>\n\n<p>Which (on your source data) gives:</p>\n\n<pre><code>abcdefg hXXXX: (mnop-qrst) uvwx\naabbccd deeff: (XXXX-XXXX) kkll\naaabbbc XXXXX: (XXXX-XXXX) ghhh\n</code></pre>\n\n<p>(You can add <code>-</code> into the pattern if you want to replace that too). </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1435335513, "last_edit_date": 1435335513, "creation_date": 1435319338, "answer_id": 31072450, "question_id": 31068009, "link": "https://stackoverflow.com/questions/31068009/how-to-replace-the-characters-in-substring-including-escape-characters-with-th/31072450#31072450", "title": "How to replace the characters in substring, including escape characters, with the character &#39;X&#39;?", "body": "<h3>Update</h3>\n\n<p>Here's a solution that allows any whitespace in the pattern to match any amount of whitespace in the target string. Note that, to do this, I've had to escape the non-word characters manually, so <code>\\Q</code>...<code>\\E</code> aren't needed any more</p>\n\n<p>Note that the last pattern has many spaces between <code>ccddd:</code> and <code>(eeef-ffgg)</code> but it correctly matches a single space in the string</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @patterns = (\n  'ijkl:',\n  'gghh-iijj',\n  'ccddd:            (eeef-ffgg)',\n);\n\n# Build and compile the regex\nmy $pattern = join '|', map {\n  my $item = $_;\n  $item =~ s/([^\\w\\s])/\\\\$1/g;\n  $item =~ s/\\s+/\\\\s+/g;\n  $item;\n} @patterns;\n$pattern = qr/$pattern/;\n\nwhile ( my $s = &lt;DATA&gt; ) {\n  $s =~ s/($pattern)/$1 =~ tr{a-zA-Z0-9}{X}r/eg;\n  print $s;\n}\n\n__DATA__\nabcdefg hijkl: (mnop-qrst) uvwx\naabbccd deeff: (gghh-iijj) kkll\naaabbbc ccddd: (eeef-ffgg) ghhh\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>abcdefg hXXXX: (mnop-qrst) uvwx\naabbccd deeff: (XXXX-XXXX) kkll\naaabbbc XXXXX: (XXXX-XXXX) ghhh\n</code></pre>\n\n<hr>\n\n<h3>Original post</h3>\n\n<p>All that is necessary is to replace</p>\n\n<pre><code>s/(\\Q$pattern\\E)/'X' x length $1/e\n</code></pre>\n\n<p>with</p>\n\n<pre><code>s/(\\Q$pattern\\E)/$1 =~ tr{a-zA-Z0-9}{X}r/e\n</code></pre>\n\n<p>Here's a demonstration. Note that the <code>/r</code> modifier requires Perl v5.14 or better</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.014;\n\nmy @matches = (\n  'ijkl:',\n  'gghh-iijj',\n  'ccddd: (eeef-ffgg)',\n);\n\nwhile ( my $s = &lt;DATA&gt; ) {\n  $s =~ s/(\\Q$_\\E)/$1 =~ tr{a-zA-Z0-9}{X}r/e for @matches;\n  print $s;\n}\n\n__DATA__\nabcdefg hijkl: (mnop-qrst) uvwx\naabbccd deeff: (gghh-iijj) kkll\naaabbbc ccddd: (eeef-ffgg) ghhh\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>abcdefg hXXXX: (mnop-qrst) uvwx\naabbccd deeff: (XXXX-XXXX) kkll\naaabbbc XXXXX: (XXXX-XXXX) ghhh\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5049558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cabc4c52704426df6df1a7558695edf1?s=128&d=identicon&r=PG&f=1", "display_name": "lycos", "link": "https://stackoverflow.com/users/5049558/lycos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 31072450, "answer_count": 2, "score": 0, "last_activity_date": 1435335513, "creation_date": 1435305624, "last_edit_date": 1435319141, "question_id": 31068009, "link": "https://stackoverflow.com/questions/31068009/how-to-replace-the-characters-in-substring-including-escape-characters-with-th", "title": "How to replace the characters in substring, including escape characters, with the character &#39;X&#39;?", "body": "<p>I'd like to replace a substring (including escape characters) within a given string (including escape characters) in a perl script. If possible with regexp.</p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>abcdefg hijkl: (mnop-qrst) uvwx\naabbccd deeff: (gghh-iijj) kkll\naaabbbc ccddd: (eeef-ffgg) ghhh\n</code></pre>\n\n<p><strong>Replacement string examples:</strong></p>\n\n<pre><code>ijkl:\ngghh-iijj\nccddd: (eeef-ffgg)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>abcdefg hXXXX: (mnop-qrst) uvwx\naabbccd deeff: (XXXX-XXXX) kkll\naaabbbc XXXXX: (XXXX-XXXX) ghhh\n</code></pre>\n\n<p>I didn't find anything except the article \"Is there a way to replace a substring with a same amount of X characters the length of it?\", but there are no escape characters.<br>\nThe regexp <code>$s =~ s/(\\Q$pattern\\E)/'X' x length $1/e;</code> works for any alphanumeric replacement string, but not if it is containing special characters like <code>()=,.-:;*</code></p>\n\n<p>In the example above, both, the input and the replacement string can contain special characters.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1435306329, "post_id": 31067785, "comment_id": 50155744, "body": "Just enclose these variables into another pair of braces, <code>{my %context; sub process {..} sub job1 {..} }</code> or make a separate class/package."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1435309699, "post_id": 31067785, "comment_id": 50157678, "body": "It sounds that what you are after are the global variable + <code>local</code>. See: <a href=\"http://perldoc.perl.org/perlsub.html#Temporary-Values-via-local%28%29\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsub.html#Temporary-Values-via-local%28%&zwnj;&#8203;29</a> IOW, make <code>%context</code> global variable and in <code>sub process</code> use <code>local %context = whatever</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435309193, "post_id": 31068934, "comment_id": 50157354, "body": "It does not solve the problem. <code>%context</code> still need to be local to <code>process</code> if I want to avoid the use of a stack. However the closure is good to isolate all functions related to <code>process</code> from the rest of the program."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435309728, "post_id": 31068934, "comment_id": 50157695, "body": "I think I&#39;m missing something - would you be able to include in your illustration what sort of things you&#39;re using <code>%context</code> for? Because my next line of thinking would be to make a <code>subroutine factory</code> that generates anonymous subs."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435311257, "post_id": 31068934, "comment_id": 50158623, "body": "Ok, based on that example - I&#39;d suggest &quot;don&#39;t recurse&quot; because it stands a chance of getting a loop. (And even if it didn&#39;t, it&#39;s not actually all that efficient because of the nature of the resources being used). Answer updated."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435311392, "post_id": 31068934, "comment_id": 50158699, "body": "Nice approach but I can&#39;t do this. I must treat the include as they appear in the file. For example if I <code>#define FOO 42</code> inside an included file I must see this declaration later in my main file."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1435311584, "post_id": 31068934, "comment_id": 50158810, "body": "I might still suggest the same but take a two pass approach, but bear with me I&#39;ll see if I can think of a better approach. Would I be right in assuming that &quot;List all define statements in the order they were first seen&quot; is a reasonable goal?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1435311616, "post_id": 31068934, "comment_id": 50158830, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/81624/discussion-between-nowox-and-sobrique\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1435312975, "last_edit_date": 1435312975, "creation_date": 1435308960, "answer_id": 31068934, "question_id": 31067785, "link": "https://stackoverflow.com/questions/31067785/preserve-local-context-across-nested-subroutines/31068934#31068934", "title": "Preserve local context across nested subroutines", "body": "<p>The thing you're looking for - but you may not know it - is called a <a href=\"http://perldoc.perl.org/perlfaq7.html#What&#39;s-a-closure%3F\" rel=\"nofollow\"><code>closure</code></a>. (see also: <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\"><code>perlref</code></a>)</p>\n\n<pre><code>{\n    my %context;\n\n    sub job1 { print $context{foo} };\n    sub job2 { print $context{bar} };\n    sub init_context{ $context{foo} = 1 };\n}\n</code></pre>\n\n<p>Context remains private within this block, but accessible to all the subroutines. </p>\n\n<p>As an alternative - you can return a code reference from a subroutine - like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub make_sub_with_context {\n    my %context;\n    $context{\"bar\"} = 1;\n    return sub { print $context{\"bar\"}++ };\n}\n\nmy $job1_with_context = make_sub_with_context();\nmy $another_job_with_context = make_sub_with_context();\n$job1_with_context-&gt;();\n$job1_with_context-&gt;();\n\n$another_job_with_context-&gt;();\n$another_job_with_context-&gt;();\n$another_job_with_context-&gt;();\n</code></pre>\n\n<p>Which may be a better example. </p>\n\n<p>Edit:</p>\n\n<p>Following on from your updated example it looks like your problem spec is to iterate a set of files, and (recursively) traverse referenced files. </p>\n\n<p>Sort of like a <code>find</code> but following <code>include</code> directives. I would point out that by doing it that way, what you're doing is potentially going to end up with a loop, which isn't ideal. </p>\n\n<p>Can I suggest instead taking a different approach? Don't recurse:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @files_to_process = @ARGV;\nmy %done;\n\nwhile ( my $infile = pop @files_to_process ) {\n    next if $done{$infile}++;\n    open my $fp_in, '&lt;', $infile or die $!;\n    open my $fp_out, '&gt;', $infile . \".processed\" or die $!;\n    while ( my $line = &lt;$fp_in&gt; ) {\n        $line =~ s|\\/\\/.*$||;\n        if ( my ($include) = ( $line =~ m/#include \"(.*?)\"/ ) ) {\n            push @files_to_process, $include;\n        }\n        print {$fp_out} $line;\n    }\n    close($fp_out);\n    close($fp_in);\n}\n</code></pre>\n\n<p>With a bit more thought, and the expansion that this task needs to process stuff in declaration order - I'd offer instead - perhaps taking an OO approach would help. Something like:</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage parser;\n\nsub new {\n    my ($class) = @_;\n    my $self = {};\n    bless $self, $class;\n    return $self;\n}\n\nsub process {\n    my ( $self, $infile, $outfile ) = @_;\n    open my $fp_in,  '&lt;', $infile;\n    open my $fp_out, '&gt;', $outfile;\n\nLINE: while ( my $line = &lt;$fp_in&gt; ) {\n        $line =~ s|\\/\\/.*$||;\n\n        say STDERR \"File is $infile\";\n\n        if ( my ($includefile) = ( $line =~ m/#include \"(.*?)\"/ ) ) {\n            my $processor = parser-&gt;new();\n               $processor -&gt; process( $includefile, \"$includefile.processed\" );\n        }\n        $self-&gt;warning(\"Huh raisin, no!\") if /\\braisin/;\n\n        say STDERR \"Fill is still $infile\";\n\n        print $fp_out $line;\n    }\n}\n\npackage main;\n\nmy $processor = parser-&gt;new()-&gt;process(@ARGV);\n</code></pre>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 31068934, "answer_count": 1, "score": 0, "last_activity_date": 1435312975, "creation_date": 1435304843, "last_edit_date": 1435310235, "question_id": 31067785, "link": "https://stackoverflow.com/questions/31067785/preserve-local-context-across-nested-subroutines", "title": "Preserve local context across nested subroutines", "body": "<p>Let's consider the wanted code below. I have recursive calls to <code>process</code> and for each recursion I use a local <code>%context</code>. In this way I can get my context back when I return from a call. </p>\n\n<pre><code>sub process {\n    my %context; # Local context\n\n    process() if rerun();\n\n    job1();\n    job2();\n\n    sub job1() {print $context{foo}}\n    sub job2() {print $context{bar}}\n}\n</code></pre>\n\n<p>Unfortunately <a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a> does not manage nested subroutines as I expected. By moving my subroutines outside from the process subroutine I will get a problem because I won't be able to access <code>%context</code> anymore. So I need to make it global and use a stack as follow: </p>\n\n<pre><code>my %context;        # Local context\nmy @context_stack;\n\nsub process {\n    push @context_stack, %context;\n    %context = undef;\n\n    process() if rerun();\n\n    job1();\n    job2();\n\n    %context = pop @context_stack;\n}\n\nsub job1() {print $context{foo}}\nsub job2() {print $context{bar}}\n</code></pre>\n\n<p>The third solution is to pass the context to all subroutines which can be annoying for very small subroutines. Also <code>%context</code> become global to all my program. So I loose the privacy of this variable. </p>\n\n<pre><code>my %context;        # Local context\nmy @context_stack;\n\nsub process {\n    push @context_stack, %context;\n    %context = undef;\n\n    process() if rerun(\\%context);\n\n    job1(\\%context);\n    job2(\\%context);\n\n    %context = pop @context_stack;\n}\n\nsub job1() {$context = shift; print $context-&gt;{foo}}\nsub job2() {$context = shift; print $context-&gt;{bar}}\n</code></pre>\n\n<p>What would be the best approach?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>For a better understanding of my specific, I provide another example:</p>\n\n<pre><code>process(@ARGV);\nexit 0;\n\nsub process {\n    my $infile = shift;\n    my $outfile = shift;\n\n    open my $fp_in,  '&lt;', $infile;\n    open my $fp_out, '&gt;', $outfile;\n\n    LINE: while(&lt;$fp_in&gt;) { \n        remove_c_comment(); \n\n        say STDERR \"File is $infile\";\n\n        process($1, \"$1.processed\") if /#include \"(.*?)\";\n        warning(\"Huh raisin, no!\") if /\\braisin/;\n\n        say STDERR \"Fill is still $infile\";\n\n        print $fp_out $_;\n    }\n\n    sub remove_c_comment { s|//.*$|| }\n    sub warning { say \"[Warning] $infile:$. \".shift() }\n}\n</code></pre>\n"}, {"tags": ["perl", "windows-8.1"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1435301771, "post_id": 31066634, "comment_id": 50153190, "body": "Because a similar issue discouraged me from programming when I first tried it as a kid, I&#39;ll add this advice: the <a href=\"https://en.wiktionary.org/wiki/backtick\" rel=\"nofollow noreferrer\">backtick</a> on a US keyboard is the button below ESC. On other layouts, it might be harder to find. On e.g. a German one, it&#39;s the button left of backspace, which you have to press while holding shift, and then pressing space as it&#39;s intended as a <a href=\"https://en.wikipedia.org/?title=Grave_accent\" rel=\"nofollow noreferrer\">diacritical mark called grave accent</a> that can also be put on a letter, like <code>&#232;</code>. If that doesn&#39;t help, copy it from here: <code>`</code>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1435303381, "post_id": 31066634, "comment_id": 50154085, "body": "or use <code>qx()</code> which is easier to type and may even look nicer."}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": 1, "last_activity_date": 1435303528, "last_edit_date": 1435303528, "creation_date": 1435301101, "answer_id": 31066634, "question_id": 31066580, "link": "https://stackoverflow.com/questions/31066580/getting-the-wrong-output-for-perl-script/31066634#31066634", "title": "Getting the wrong output for perl script.", "body": "<p>You have to use backticks instead of single quotes:</p>\n\n<pre><code>print \"The date is \", `date /T`;\nprint \"The date is \", `date`, \".\\n\"; \n$directory=`cd`;\nprint \"\\nThe current directory is $directory.\";  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1435307298, "creation_date": 1435307298, "answer_id": 31068460, "question_id": 31066580, "link": "https://stackoverflow.com/questions/31066580/getting-the-wrong-output-for-perl-script/31068460#31068460", "title": "Getting the wrong output for perl script.", "body": "<p>You already have a good explanation of what you're doing wrong (using single quotes instead of backticks or <code>qx(...)</code>) but it's probably worth pointing out that you don't need to call external programs in either of the two cases in your examples.</p>\n\n<p>To get the current date, just call <code>localtime</code> in scalar context.</p>\n\n<pre><code>print scalar localtime;\n</code></pre>\n\n<p>For more complex date and time handling see <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> and <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow\">DateTime</a>.</p>\n\n<p>To get the current directory, use <a href=\"https://metacpan.org/pod/Cwd\" rel=\"nofollow\">Cwd</a>.</p>\n\n<pre><code>use Cwd;\n\nprint getcwd;\n</code></pre>\n\n<p>Not running unnecessary external programs is a good idea for two reasons. Firstly it makes your code more portable, and secondly it's more efficient (external programs are run in a new shell environment - and starting one of those is a relatively expensive operation).</p>\n"}], "owner": {"reputation": 19, "user_id": 5007408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c776b230dc766a9b84e26f47f7178c?s=128&d=identicon&r=PG&f=1", "display_name": "Jawn Fam", "link": "https://stackoverflow.com/users/5007408/jawn-fam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 31066634, "answer_count": 2, "score": 0, "last_activity_date": 1435307298, "creation_date": 1435300906, "question_id": 31066580, "link": "https://stackoverflow.com/questions/31066580/getting-the-wrong-output-for-perl-script", "title": "Getting the wrong output for perl script.", "body": "<p>I've been trying to figure out how to run this example for a while now and I'm still stuck on how to print the date. Below is the example I'm working on.     </p>\n\n<pre><code>(The Script for Unix/Linux)\n# Backquotes and command substitution\n1   print \"The date is \", 'date';      # Windows users: 'date /T'\n2   print \"The date is 'date'\", \".\\n\"; # Backquotes treated literally\n3   $directory='pwd';                  # Windows users: 'cd'\n4   print \"\\nThe current directory is $directory.\";\n\n(Output)\n1   The date is Mon Jun 25 17:27:49 PDT 2007.\n2   The date is 'date'.\n4   The current directory is /home/jody/ellie/perl.\n</code></pre>\n\n<p>This is my work and output. </p>\n\n<pre><code>print \"The date is \", 'date /T';\nprint \"The date is 'date'\", \".\\n\"; \n$directory='cd';\nprint \"\\nThe current directory is $directory.\";  \n\n(Output)\nThe date is date /TThe date is 'date'.\nThe current directory is cd. \n</code></pre>\n\n<p>Any help with this is greatly appreciated. Thanks.  </p>\n"}, {"tags": ["regex", "perl", "file-io"], "comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1435294692, "post_id": 31064864, "comment_id": 50150240, "body": "Don&#39;t forget to <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> the newline off your <code>$app</code>."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1435295921, "post_id": 31064864, "comment_id": 50150682, "body": "Ah yes, a very silly error - thanks a ton for pointing it out!"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435551011, "post_id": 31065276, "comment_id": 50229833, "body": "Thanks a million. This was very helpful"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1435305886, "last_edit_date": 1435305886, "creation_date": 1435294846, "answer_id": 31065276, "question_id": 31064864, "link": "https://stackoverflow.com/questions/31064864/search-for-a-pattern-in-a-file/31065276#31065276", "title": "Search for a pattern in a file", "body": "<p>The input did not matched in regex because newlines were coming along with them, so better use <code>chomp</code> to trim them. In while loop you are displacing two times the file handle, I don't know why. So after corrections this should work:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $line = \"\";\nmy $app = \"\";\n\nprint \"Enter the app\";\nchomp($app = &lt;STDIN&gt;);\nprint \"$app: \";\n\nopen my $fh, '&lt;', \"eg.txt\" or die \"Cannot open $!\";\n\nwhile($line = &lt;$fh&gt;)\n{\n    chomp $line;\n    if($line &amp;&amp; $line =~ /($app)( = )(..\\/)(..)(.*)/)  \n    {\n        print \"$5 \\n\";\n    }\n}\nclose($fh);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435295577, "post_id": 31065288, "comment_id": 50150567, "body": "That&#39;s perfect. Thank you! I can&#39;t believe I made an error as silly as skipping every other line. Thanks a lot!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435294883, "creation_date": 1435294883, "answer_id": 31065288, "question_id": 31064864, "link": "https://stackoverflow.com/questions/31064864/search-for-a-pattern-in-a-file/31065288#31065288", "title": "Search for a pattern in a file", "body": "<p>There are two main problems with your program</p>\n\n<ul>\n<li><p>The <code>$app</code> variable contains a newline at the end from the enter key you pressed when you typed it in. That will prevent the pattern from matching so you need to use <code>chomp</code> to remove it. The same applies to lines read from your file</p></li>\n<li><p>The <code>&lt;$fh&gt;</code> in your <code>while</code> statement reads a line from your file into the default variable <code>$_</code>, and then <code>$line = &lt;$fh&gt;</code> reads another, so you are ignoring alternate lines from the file</p></li>\n</ul>\n\n<p>Here is a version of your program that I think should work although I am unable to test it at present. I have dropped your <code>$line</code> variable altogether and hope that doesn't confuse you. <code>$_</code> is the default variable for the pattern match so it isn't mentioned explicitly anywhere</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Enter the app: \";\nmy $app = &lt;STDIN&gt;;\nchomp $app;\n\nopen my $fh, '&lt;', 'eg.txt' or die \"Cannot open: $!\";\n\nwhile ( &lt;$fh&gt; ) {\n    if ( /$app\\s*=\\s*(.+)/ ) {\n        my $path = $1;\n        $path =~ s/.*\\.\\.//;\n        print $path, \"\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435295899, "post_id": 31065311, "comment_id": 50150674, "body": "Thank you so much. Twas really silly of me to access the filehandle twice, and forget about the trailing newline too! As for the regular expression, yes - I now understand that mine was indeed dicey. The single spaces around the = sign are specified, though - but this comes in as excellent feedback for my next code.   Thanks a lot!"}], "tags": [], "owner": {"reputation": 2591, "user_id": 1162732, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c2fc947392492e1ff685f126964a2908?s=128&d=identicon&r=PG", "display_name": "zgpmax", "link": "https://stackoverflow.com/users/1162732/zgpmax"}, "is_accepted": false, "score": 0, "last_activity_date": 1435306153, "last_edit_date": 1435306153, "creation_date": 1435295057, "answer_id": 31065311, "question_id": 31064864, "link": "https://stackoverflow.com/questions/31064864/search-for-a-pattern-in-a-file/31065311#31065311", "title": "Search for a pattern in a file", "body": "<p>You are accessing <code>&lt;$fh&gt;</code> twice in your loop. This will have the effect of interpreting only every other line. You might want to change the top of the loop to something like this:</p>\n\n<pre><code>while (defined(my $line = &lt;$fh&gt;)) {\n</code></pre>\n\n<p>and remove the <code>my $line ...</code> at the top of the program.</p>\n\n<p>Also, you might want to consider chomping your input line so that you don't have to think about the trailing newline character:</p>\n\n<pre><code>while (defined(my $line = &lt;$fh&gt;)) {\n    chomp $line;\n</code></pre>\n\n<p>Your regular expression is also a bit dicey. You probably want to bind it to the beginning and end of the search space and escape the literal dots. You may also want <code>$app</code> to be interpreted as a string rather than a regexp, which can be done by wrapping it with <code>\\Q...\\E</code>. Also unless your file format specifies single spaces around the equals, I'd be tempted to make those flexible to zero or more occurrences. Also, if you aren't going to use the earlier captures, I would say don't do them, so:</p>\n\n<pre><code>if ($line &amp;&amp; $line =~ /^\\Q$app\\E *= *\\.\\.\\/\\.\\.(.*)$/)\n{\n    print $1;\n</code></pre>\n\n<p>(Some may say you should use <code>\\A</code> and <code>\\z</code> rather than <code>^</code> and <code>$</code>. That choice is left as an exercise to the reader.)</p>\n"}, {"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1435296087, "post_id": 31065480, "comment_id": 50150746, "body": "you are hardcoding COMP, That could be anything."}, {"owner": {"reputation": 29, "user_id": 5043419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGtks.jpg?s=128&g=1", "display_name": "velz", "link": "https://stackoverflow.com/users/5043419/velz"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1435296397, "post_id": 31065480, "comment_id": 50150863, "body": "I perceived the app name as COMP"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1435301011, "post_id": 31065480, "comment_id": 50152776, "body": "I get what you&#39;re doing, and I think it&#39;s a nice approach - but hardcoding wouldn&#39;t do for me, as I have a large number of application names that aren&#39;t &quot;COMP&quot;s, too. Hence, I do have to take that as an input from the user.  Thank you for the help!"}], "tags": [], "owner": {"reputation": 29, "user_id": 5043419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGtks.jpg?s=128&g=1", "display_name": "velz", "link": "https://stackoverflow.com/users/5043419/velz"}, "is_accepted": false, "score": 0, "last_activity_date": 1435305681, "last_edit_date": 1435305681, "creation_date": 1435295981, "answer_id": 31065480, "question_id": 31064864, "link": "https://stackoverflow.com/questions/31064864/search-for-a-pattern-in-a-file/31065480#31065480", "title": "Search for a pattern in a file", "body": "<p>Try this code:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $line = \"\";\nmy $app = \"\";\n\nprint \"Enter the app\";\n$app = &lt;STDIN&gt;;\nprint $app;\nopen my $fh, '&lt;', \"eg.txt\" or die \"Cannot open $!\";\nmy @line = &lt;$fh&gt;;\nmy @fetch = map { /COMP\\d+\\s\\=\\s(\\..\\/\\..\\/.*)/g  } @line ;\n$, = \"\\n\";\nprint @fetch;\n</code></pre>\n\n<p>and then please send your response.</p>\n"}], "owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31065288, "answer_count": 4, "score": 1, "last_activity_date": 1435306153, "creation_date": 1435292528, "last_edit_date": 1435295316, "question_id": 31064864, "link": "https://stackoverflow.com/questions/31064864/search-for-a-pattern-in-a-file", "title": "Search for a pattern in a file", "body": "<p>I have a file <code>eg.txt</code> with contents of this sort :</p>\n\n<pre><code>....text...\n....text...\nCOMP1 = ../../path1/path2/path3\nCOMP2 = ../../path4/path5/path6\n</code></pre>\n\n<p>and so on, for a large number of application names (the \"COMP\"s). I need to get the path -- the stuff including and after the second slash -- for a user-specified application.</p>\n\n<p>This is the code I've been trying :</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line = \"\";\nmy $app  = \"\";\n\nprint \"Enter the app\";\n$app = &lt;STDIN&gt;;\nprint $app;\n\nopen my $fh, '&lt;', \"eg.txt\" or die \"Cannot open $!\";\n\nwhile (&lt;$fh&gt;) {\n    $line = &lt;$fh&gt;;\n    if ( $line &amp;&amp; $line =~ /($app)( = )(..\\/)(..)(.*)/ ) {\n        print $5;\n    }\n}\n</code></pre>\n\n<p>This prints the name of the user-input application, and does nothing else. Any help would be greatly appreciated!</p>\n"}, {"tags": ["regex", "perl", "uri", "tld", "spamassassin"], "answers": [{"comments": [{"owner": {"reputation": 1829, "user_id": 482220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/acae6aa867d2cb3e088af9fca32434a8?s=128&d=identicon&r=PG", "display_name": "justinzane", "link": "https://stackoverflow.com/users/482220/justinzane"}, "edited": false, "score": 0, "creation_date": 1435333482, "post_id": 31065498, "comment_id": 50173015, "body": "Since this is going in a Spamassassin <code>local.cf</code> rule, I need a basic Perl regex without loading any other modules. The reason, I believe, is that the regex must be usable after being processed by re2c and compiled for &quot;spamd&quot;."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435296407, "last_edit_date": 1435296407, "creation_date": 1435296087, "answer_id": 31065498, "question_id": 31064554, "link": "https://stackoverflow.com/questions/31064554/perl-regex-to-exclude-certain-tlds-for-spamassassin/31065498#31065498", "title": "Perl Regex to Exclude Certain TLDs for Spamassassin", "body": "<p>You should use the <code>URI</code> module to separate the host name from the rest of the URL</p>\n\n<p>This example extracts only the final substring of the host name, so it will look at, say, <code>uk</code> from <code>bbc.co.uk</code>, but it should serve your purpose</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse URI;\n\nmy @urls = qw{\n    https://foo.com.us/asdf?qwerty=123\n    ftp://madeup.kernel.org/path/to/some/tarball.tar.bz2\n};\n\nfor my $url ( @urls ) {\n    $url = URI-&gt;new($url);\n    my $host = $url-&gt;host;\n    my ($tld) = $host =~ /([^.]+)\\z/;\n\n    if ( $tld !~ /^(?com|net|org)\\z/ ) {\n        # non-standard TLD\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1829, "user_id": 482220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/acae6aa867d2cb3e088af9fca32434a8?s=128&d=identicon&r=PG", "display_name": "justinzane", "link": "https://stackoverflow.com/users/482220/justinzane"}, "edited": false, "score": 0, "creation_date": 1435333679, "post_id": 31065698, "comment_id": 50173145, "body": "I had tried  ...<code>(?!com|net|org)\\&#47;</code> without success. [Though typo failure is possible. :)]  Is there a rationale for including the final slash within the &quot;or&quot; group?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1829, "user_id": 482220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/acae6aa867d2cb3e088af9fca32434a8?s=128&d=identicon&r=PG", "display_name": "justinzane", "link": "https://stackoverflow.com/users/482220/justinzane"}, "edited": false, "score": 0, "creation_date": 1435334996, "post_id": 31065698, "comment_id": 50173923, "body": "@justinzane: without that slash the regex would reject a name where the TLD <i>starts</i> with any of those strings. For instance, <code>www.batman.comics</code> would fail the test. Actually I&#39;ve rewritten a little it so that the URL doesn&#39;t have to have a path"}, {"owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "edited": false, "score": 1, "creation_date": 1457560297, "post_id": 31065698, "comment_id": 59467064, "body": "Nice use of <a href=\"http://www.rexegg.com/regex-quantifiers.html#possessive\" rel=\"nofollow noreferrer\">possessive greed</a>!  Note that the URL may not have a path, or there might be a port or query instead of a path.  I&#39;d recommend the negative lookahead be <code>(?!(?:com|net|org)\\b(?![.-]))</code> which includes a double negative to avoid a word break that is followed by a character allowed in a host name.  Also, the character class should be <code>[\\w-]</code> to allow numbers and dashes."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1435298003, "last_edit_date": 1435298003, "creation_date": 1435297155, "answer_id": 31065698, "question_id": 31064554, "link": "https://stackoverflow.com/questions/31064554/perl-regex-to-exclude-certain-tlds-for-spamassassin/31065698#31065698", "title": "Perl Regex to Exclude Certain TLDs for Spamassassin", "body": "<p>The regex pattern</p>\n\n<pre><code>//(?:[a-z]+\\.)*+(?!com/|net/|org/)\n</code></pre>\n\n<p>should do what you want. The slashes are part of the pattern, and are not delimiters</p>\n\n<p>Here's a demonstration</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy @urls = qw{\n    https://foo.com.us/asdf?qwerty=123\n    ftp://madeup.kernel.org/path/to/some/tarball.tar.bz2\n};\n\nfor ( @urls ) {\n    say m{//(?:[a-z]+\\.)*+(?!com/|net/|org/)} ? 'match' : 'no match';\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>match\nno match\n</code></pre>\n"}], "owner": {"reputation": 1829, "user_id": 482220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/acae6aa867d2cb3e088af9fca32434a8?s=128&d=identicon&r=PG", "display_name": "justinzane", "link": "https://stackoverflow.com/users/482220/justinzane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 31065698, "answer_count": 2, "score": 0, "last_activity_date": 1435298003, "creation_date": 1435290458, "question_id": 31064554, "link": "https://stackoverflow.com/questions/31064554/perl-regex-to-exclude-certain-tlds-for-spamassassin", "title": "Perl Regex to Exclude Certain TLDs for Spamassassin", "body": "<p>I am not at <strong>all</strong> able to code in Perl; so, what seems like a simple thing -- writing a regex to score all URIs that are <strong>not</strong> for \"com\" or \"net\" or \"org\" TLDs -- is apparently beyond my skills. Could someone kindly enlighten me?</p>\n\n<p>As an example I want <code>https://foo.com.us/asdf?qwerty=123</code> to match and <code>ftp://madeup.kernel.org/path/to/some/tarball.tar.bz2</code> to not match. </p>\n"}, {"tags": ["regex", "perl", "perl-module", "perl-data-structures"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1435274777, "post_id": 31062284, "comment_id": 50145330, "body": "You can use the flip-flop operator: <code>..</code>: <a href=\"http://perlhacks.com/2014/01/dots-perl/\" rel=\"nofollow noreferrer\">perlhacks.com/2014/01/dots-perl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435298380, "post_id": 31062704, "comment_id": 50151568, "body": "I think it&#39;s only in JavaScript that <code>[\\s\\S]</code> is necessary. Just a dot is fine, with the <code>&#47;s</code> modifier on the pattern"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1435330592, "post_id": 31062704, "comment_id": 50171132, "body": "@Borodin yes, thanks. I&#39;m good a perl dev. I&#39;ve updated the answer with your comments"}], "tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 1, "last_activity_date": 1435330560, "last_edit_date": 1495541174, "creation_date": 1435276449, "answer_id": 31062704, "question_id": 31062284, "link": "https://stackoverflow.com/questions/31062284/how-do-i-search-and-extract-commented-lines-from-a-file-using-perl/31062704#31062704", "title": "How do i search and extract commented lines from a file using perl?", "body": "<p>You can use a regex like this:</p>\n\n<pre><code>\\/\\*([\\s\\S]*?)\\*\\/\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/yV8gO3/1\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n\n<p>Code</p>\n\n<pre><code>my $str = 'you string';\nif ( $str =~ /\\/\\*([\\s\\S]*?)\\*\\// ) {\n    print \"Comment: $1\";\n}\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> pointed in his comment, you can use dot with <code>s</code> flag (single line) instead of <code>[\\s\\S]</code>, so you could change your regex to:</p>\n\n<pre><code>\\/\\*(.*?)\\*\\/\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5050950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed3a463a7b247f2e5ddc14e90d24d3c?s=128&d=identicon&r=PG&f=1", "display_name": "sravan ", "link": "https://stackoverflow.com/users/5050950/sravan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1435330560, "creation_date": 1435273728, "last_edit_date": 1435274624, "question_id": 31062284, "link": "https://stackoverflow.com/questions/31062284/how-do-i-search-and-extract-commented-lines-from-a-file-using-perl", "title": "How do i search and extract commented lines from a file using perl?", "body": "<p>I am new to Perl programming. Need your help in searching and extracting only commented lines from a file.  Below is an example</p>\n\n<pre><code>{\n    This is line 1\n    /*This is line 2\n    This is line 3\n    This is line 4*/\n    This is line 5\n}\n</code></pre>\n\n<p>I just want to search and extract only commented lines from above file. </p>\n"}, {"tags": ["mysql", "sql-server", "database", "perl", "dsn"], "comments": [{"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "edited": false, "score": 1, "creation_date": 1435259700, "post_id": 31058811, "comment_id": 50138678, "body": "What driver is mtodbc ? Are you shure it&#39;s correct?"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 2, "creation_date": 1435260384, "post_id": 31058811, "comment_id": 50139063, "body": "When changing drivers, keeping the same connection string and hoping for the best seldom works out well.  For DSN connections see: <a href=\"http://www.connectionstrings.com/dsn/\" rel=\"nofollow noreferrer\">connectionstrings.com/dsn</a> ."}, {"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "reply_to_user": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "edited": false, "score": 0, "creation_date": 1435260423, "post_id": 31058811, "comment_id": 50139083, "body": "@frhack I apologize. That was a typo. I meant the ODBC driver of course.."}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "edited": false, "score": 0, "creation_date": 1435260695, "post_id": 31058811, "comment_id": 50139224, "body": "In Linux I succesfully used freetds connection <a href=\"http://www.freetds.org/userguide/perl.htm\" rel=\"nofollow noreferrer\">freetds.org/userguide/perl.htm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 0, "creation_date": 1435260872, "post_id": 31059161, "comment_id": 50139325, "body": "Right. I understand this.. However, this isn&#39;t consistent with a database independent interface. As a user, I would expect to supply a generic DSN to DBI and have it map that DSN to the appropriate driver parameters required by the back end database driver. Yeah?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 0, "creation_date": 1435261282, "post_id": 31059161, "comment_id": 50139527, "body": "Why do you expect to provide the same connection string for all databases? Why do you think providing a connection string breaks portability?"}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "edited": false, "score": 1, "creation_date": 1435261478, "post_id": 31059161, "comment_id": 50139633, "body": "The interface  (DBI) is for query and statements execution, not for connection string / connection properties that necessarily remain db dependent"}, {"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 0, "creation_date": 1435261631, "post_id": 31059161, "comment_id": 50139713, "body": "@ikegami I don&#39;t. I would expect the DSN connection string driver type to change. As a user, I would expect to be able to pass a single set of parameters and have the module itself take care of the conversion of those parameters to the driver specific connection strings. For example, I pass <code>host=localhost</code> and that would get converted to <code>SERVER=localhost</code> for an MS SQL connection. Thus decoupling the driver specific DSN string format from the user."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435262016, "post_id": 31059161, "comment_id": 50139884, "body": "But ODBC takes a <i>DSN name</i>. It&#39;s a not a database or host or anything else MySQL has. What&#39;s wrong with using a useful name for it?! Using the wrong name won&#39;t help decouple anything."}, {"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 0, "creation_date": 1435262076, "post_id": 31059161, "comment_id": 50139917, "body": "@ikegami I&#39;m talking about the DBI specified DSN (i.e. the first parameter passed in to DBI-&gt;connect). I understand MySQL doesn&#39;t have a DSN parameter, but the DBI DSN that is supplied to connect to a database is not consistent across all databases, as I demonstrated in the example above."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1435262182, "post_id": 31059161, "comment_id": 50139973, "body": "Again, using the wrong name won&#39;t help decouple anything."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1435263240, "post_id": 31059161, "comment_id": 50140499, "body": "FWIW:  On Windows machines logged into the same AD domain as a MS SQL server I&#39;ve been able to use a format like <code>Server=myServerAddress;Database=myDataBase;Trusted_Connectio&zwnj;&#8203;n=True;</code> with <code>DBD::ODBC</code>.  Nice advantage is that I don&#39;t need to embed any passwords...."}, {"owner": {"reputation": 1514, "user_id": 897612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evivy.png?s=128&g=1", "display_name": "dpw", "link": "https://stackoverflow.com/users/897612/dpw"}, "edited": false, "score": 3, "creation_date": 1435263286, "post_id": 31059161, "comment_id": 50140525, "body": "From <a href=\"https://metacpan.org/pod/DBI#connect\" rel=\"nofollow noreferrer\">perldoc DBI</a>:  There is <i>no standard</i> for the text following the driver name. Each driver is free to use whatever syntax it wants. The only requirement the DBI makes is that all the information is supplied in a single string. You must consult the documentation for the drivers you are using for a description of the syntax they require."}, {"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "reply_to_user": {"reputation": 1514, "user_id": 897612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evivy.png?s=128&g=1", "display_name": "dpw", "link": "https://stackoverflow.com/users/897612/dpw"}, "edited": false, "score": 0, "creation_date": 1435267052, "post_id": 31059161, "comment_id": 50142386, "body": "@dpw Thanks for that information. I didn&#39;t see that in the documentation previously. I overlooked it.   As per the documentation: &quot;It recommended that they (DBD drivers) support the three common names <code>host</code>, <code>port</code>, and <code>database</code> &quot;  Unfortunately, subclasses of DBD are not enforced to maintain a consistent DSN naming strategy."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1435260533, "creation_date": 1435260533, "answer_id": 31059161, "question_id": 31058811, "link": "https://stackoverflow.com/questions/31058811/perl-dbi-connection-inconsistencies/31059161#31059161", "title": "Perl DBI Connection Inconsistencies", "body": "<p>The parameters required by drivers vary by driver. The example in the DBD::ODBC documentation is</p>\n\n<pre><code>DBI-&gt;connect('dbi:ODBC:DSN=mydsn', $user, $pass)\n</code></pre>\n\n<p>Based on links posted in the comment, it appears possible to shorten the above to</p>\n\n<pre><code>DBI-&gt;connect('dbi:ODBC:mydsn', $user, $pass)\n</code></pre>\n\n<p>There's no information on the possibility of other parameters being accepted (e.g. a means of specifying a file DSN or of inlining a DSN).</p>\n"}, {"comments": [{"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 0, "creation_date": 1435267479, "post_id": 31059268, "comment_id": 50142609, "body": "This is great information. I did not see this when reading the documentation earlier. This leaves more room for discussion, however. Unfortunately, because subclasses of DBD are not enforced to specific DSN string guidelines, this leaves room for interface differences across different database engines. This is a bad design, IMO..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 1, "creation_date": 1435268861, "post_id": 31059268, "comment_id": 50143213, "body": "@Jonathan There is a huge variety of drivers for DBI, including drivers for things that aren&#39;t even RDBMS&#39;s, like DBD::CSV, DBD::DBM, and DBD::WMI. You don&#39;t &quot;connect&quot; to these the same way you connect to a typical RDBMS, and even RDBMS&#39;s vary (some use a connection identifier, some require a database name, some even allow you to specify a separate credentials file). This is very difficult to standardize."}, {"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1435269385, "post_id": 31059268, "comment_id": 50143436, "body": "@ThisSuitIsBlackNot I understand the difficulty in providing an interface to many systems. However, from a top level module that provides a &quot;database independent interface&quot; these connection strings should not have to be bound to the implementation details of the underlying database engines. I see your point though.."}, {"owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "reply_to_user": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 2, "creation_date": 1435269525, "post_id": 31059268, "comment_id": 50143497, "body": "@Jonathan It&#39;s not bad design. It&#39;s not possible to standardize all db connections string. In java jdbc (the java equivalent of perl DBI) there&#39;s the same &#39;problem&#39;. <a href=\"http://www.roseindia.net/tutorial/java/jdbc/databaseurl.html\" rel=\"nofollow noreferrer\">roseindia.net/tutorial/java/jdbc/databaseurl.html</a>"}, {"owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "edited": false, "score": 1, "creation_date": 1435269944, "post_id": 31059268, "comment_id": 50143687, "body": "@frhack Sounds good. Thanks for all of the information. I really appreciate it. It&#39;s been a great discussion."}], "tags": [], "owner": {"reputation": 4021, "user_id": 3360759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndket.png?s=128&g=1", "display_name": "frhack", "link": "https://stackoverflow.com/users/3360759/frhack"}, "is_accepted": true, "score": 4, "last_activity_date": 1435262978, "last_edit_date": 1435262978, "creation_date": 1435260886, "answer_id": 31059268, "question_id": 31058811, "link": "https://stackoverflow.com/questions/31058811/perl-dbi-connection-inconsistencies/31059268#31059268", "title": "Perl DBI Connection Inconsistencies", "body": "<p>In windows you can use:</p>\n\n<pre><code>DBI-&gt;connect('dbi:ODBC:driver={SQL Server};database=catalog;Server=server\\\\instance;',$user,$password);\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li>server is the ip addres of mssql server</li>\n<li>instance is the instance name</li>\n<li>catalog is the database name </li>\n</ul>\n\n<p>In linux/unix I suggest <a href=\"http://www.freetds.org/userguide/perl.htm\" rel=\"nofollow\">freetds</a></p>\n\n<p>From <a href=\"http://dbi.perl.org/docs/\" rel=\"nofollow\">DBI documentation</a>:</p>\n\n<p><a href=\"https://metacpan.org/pod/DBI#connect\" rel=\"nofollow\"><strong>Connect</strong></a></p>\n\n<pre><code>$dbh = DBI-&gt;connect($data_source, $username, $password)\n          or die $DBI::errstr;\n$dbh = DBI-&gt;connect($data_source, $username, $password, \\%attr)\n          or die $DBI::errstr;\n</code></pre>\n\n<p>Examples of $data_source values are:</p>\n\n<pre><code>dbi:DriverName:database_name\ndbi:DriverName:database_name@hostname:port\ndbi:DriverName:database=database_name;host=hostname;port=port\n</code></pre>\n\n<blockquote>\n  <p><strong>There is no standard for the text following the driver name. Each\n  driver is free to use whatever syntax it wants</strong>. The only requirement\n  the DBI makes is that all the information is supplied in a single\n  string. You must consult the documentation for the drivers you are\n  using for a description of the syntax they require.</p>\n  \n  <p><strong>It is recommended that drivers support the ODBC style, shown in the\n  last example above. It is also recommended that they support the three\n  common names 'host', 'port', and 'database' (plus 'db' as an alias for\n  database). This simplifies automatic construction of basic DSNs:\n  \"dbi:$driver:database=$db;host=$host;port=$port\"</strong>. Drivers should aim\n  to 'do something reasonable' when given a DSN in this form, but if any\n  part is meaningless for that driver (such as 'port' for Informix) it\n  should generate an error if that part is not empty.</p>\n</blockquote>\n"}], "owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 1, "accepted_answer_id": 31059268, "answer_count": 2, "score": 3, "last_activity_date": 1435298510, "creation_date": 1435259375, "last_edit_date": 1592644375, "question_id": 31058811, "link": "https://stackoverflow.com/questions/31058811/perl-dbi-connection-inconsistencies", "title": "Perl DBI Connection Inconsistencies", "body": "<h3>Background</h3>\n<p>I am working on a project than involves the retrieval of data from two difference databases. One of the databases is using a Microsoft SQL database engine and the other is running a MySQL engine. I need an easy way to specify the Data Source Name (DSN) from a configuration perspective, but due to inconsistencies in the DSN naming conventions, this is not possible with the<code>DBI</code> module (from what I have experienced).</p>\n<h3>MySQL</h3>\n<p>Consider the following connection:</p>\n<pre><code>my $dsn = &quot;dbi:mysql:host=$host;database=$db_name&quot;;\nmy $dbh = DBI-&gt;connect($dsn, $user, $pass);\n</code></pre>\n<p>Assuming the supplied database name exists at the host, this connection will be succesful. I have tested this many times. Feel free to verify this yourself.</p>\n<hr />\n<h3>MS SQL</h3>\n<p>Now I try to connect to a Microsoft SQL server using the same DSN connection string format, with the exception of the database driver type.</p>\n<pre><code>my $dsn = &quot;dbi:odbc:host=$host;database=$db_name&quot;;\nmy $dbh = DBI-&gt;connect($dsn, $user, $pass);\n</code></pre>\n<p>Even if the database exists on the supplied host, this connection fails, and the error message is like that shown below:</p>\n<pre><code>DBI connect('host=$host;database=$db_name','$user',...) failed: (mtodbc): Fetching info: [unixODBC][Driver Manager]Connnection does not exist (SQLSTATE:08003) (CODE:0) (SEVERITY:SQLException) DBD: [dbd_db_login6/checkOutConnectionW(login)] RetCode=[-1] at perl_script.pl line X\n</code></pre>\n<hr />\n<p>The DBI module is a database independent interface for <code>Perl</code>, yet clearly this problem <em>is</em> database dependent.. This seems like a bad design decision. Am I missing something? If so, please provide some reasoning why this design was done in this way.</p>\n"}, {"tags": ["oracle", "perl", "gcc", "aix"], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 4844822, "user_type": "registered", "profile_image": "https://graph.facebook.com/459123704243311/picture?type=large", "display_name": "Zsigmond L\u0151rinczy", "link": "https://stackoverflow.com/users/4844822/zsigmond-l%c5%91rinczy"}, "is_accepted": false, "score": 1, "last_activity_date": 1435260627, "creation_date": 1435260627, "answer_id": 31059181, "question_id": 31058312, "link": "https://stackoverflow.com/questions/31058312/dbd-oracle-1-74-install-with-oracle-client-12-1-0-2/31059181#31059181", "title": "DBD-Oracle 1.74 install with Oracle Client 12.1.0.2", "body": "<p>Well, <strong>-bI:/usr/lib/iocp.exp</strong> is an option for the linker, not for gcc; edit the script/Makefile in question, change it to <strong>-Wl,-bI:/usr/lib/iocp.exp</strong></p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 4095154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fdc63859b0cb4348f4afc40d7a1d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "mjp", "link": "https://stackoverflow.com/users/4095154/mjp"}, "is_accepted": false, "score": 0, "last_activity_date": 1435754662, "last_edit_date": 1435754662, "creation_date": 1435263415, "answer_id": 31059981, "question_id": 31058312, "link": "https://stackoverflow.com/questions/31058312/dbd-oracle-1-74-install-with-oracle-client-12-1-0-2/31059981#31059981", "title": "DBD-Oracle 1.74 install with Oracle Client 12.1.0.2", "body": "<p>That did it, there were 2 places in the Makefile that needed the change. There were other places in the file that I saw the -Wl,-bI but for some reason not on the iocp lines.</p>\n\n<p>Thank you for your help.</p>\n"}], "owner": {"reputation": 47, "user_id": 4095154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fdc63859b0cb4348f4afc40d7a1d3fc?s=128&d=identicon&r=PG&f=1", "display_name": "mjp", "link": "https://stackoverflow.com/users/4095154/mjp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445288862, "creation_date": 1435257789, "question_id": 31058312, "link": "https://stackoverflow.com/questions/31058312/dbd-oracle-1-74-install-with-oracle-client-12-1-0-2", "title": "DBD-Oracle 1.74 install with Oracle Client 12.1.0.2", "body": "<p>System environment is:\n OS: AIX 7.1 TL3 SP5\n Perl: 5.22.0 with DBI 1.633\n gcc: 4.8.3\n Oracle: Client 12.1.0.2.3 (Administrator install)</p>\n\n<p>Running make stops on this error:\ngcc: error: unrecognized command line option '-bI:/usr/lib/iocp.exp'</p>\n\n<p>Originally, client 12.1.0.1.7 was installed, I was able to install DBD-Oracle with that version, but not with the new update.</p>\n\n<p>When installing the new client, I had to enable iocp (I/O Completion Ports) in AIX in order to install it.  That seems to be what gcc is complaining about.</p>\n\n<p>Has anyone had any luck with this version of Oracle client/DBD-Oracle?</p>\n"}]