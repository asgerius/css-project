[{"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567918544, "post_id": 57798448, "comment_id": 102106713, "body": "That&#39;s unfortunate - I was worried that might be the case. So it sounds like its either use a temp file, or don&#39;t use File::ReadBackwards (either stick w/ external commands as I am doing currently or take a different approach altogether as proposed by zdim). Thanks for the info!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1567658423, "last_edit_date": 1567658423, "creation_date": 1567657694, "answer_id": 57798448, "question_id": 57796510, "link": "https://stackoverflow.com/questions/57796510/perl-piping-gunzip-output-to-filereadbackwards/57798448#57798448", "title": "Perl - Piping gunzip Output to File::ReadBackwards", "body": "<p>You can't. <a href=\"http://search.cpan.org/perldoc?File::ReadBackwards\" rel=\"noreferrer\">File::ReadBackwards</a> requires a seekable handle (i.e. a plain file and not a pipe or socket).</p>\n\n<p>To use File::ReadBackwards, you'd have to first send the output to a named temporary file (which you could create using <a href=\"http://search.cpan.org/perldoc?File::Temp\" rel=\"noreferrer\">File::Temp</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1567686613, "post_id": 57801942, "comment_id": 102042698, "body": "FWIW, you can replace the external command with <code>my $us = do { my ($h, $d); open $h, &#39;&lt;&#39;, $file and seek $h, -4, 2 and read($h, $d, 4) &gt;= 4 and unpack &#39;V&#39;, $d or die &quot;cannot get uncompressed size&quot; };</code>. And yes, this will be broken with multi-member gzip files ... no different from <code>gunzip -l $file</code> ;-) (but at least it doesn&#39;t interpolate a user supplied string in a shell command). Notice that that &quot;size&quot; is only modulo 2^32 (4G) of the real size."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567705518, "post_id": 57801942, "comment_id": 102052609, "body": "Interpolating a user-supplied string can be achieved as follows: <code>use String::ShellQuote qw( shell_quote ); my $cmd = shell_quote(&#39;gunzip&#39;, &#39;-l&#39;, &#39;--&#39;, $file);  `$cmd`</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1567764797, "post_id": 57801942, "comment_id": 102070301, "body": "@mosvy The user input is easily controlled (which it surely should be!).  But the other comment is critical since I completely forgot about that 4Gb screw, crucial here since files may actually be larger.   Edited"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567794759, "post_id": 57801942, "comment_id": 102084255, "body": "@dwillis77 Edited substantially.  Don&#39;t know how much it helps but should be worth looking over"}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567918278, "post_id": 57801942, "comment_id": 102106677, "body": "@zdim Thank you very much for the ideas - lots of food for though here. I&#39;ll need some more time to chew through it all and try out my various options. But yes the overall goal is to return results (lines) in reverse (from the end of the file), up to an optional limit set by the user. And this result set may come from one or more files (depending on number of results returned from each)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567928200, "post_id": 57801942, "comment_id": 102108078, "body": "@dwillis77 OK, thanks.  One simple thing you can always do is to pipe <code>gunzip</code> and keep a buffer of lines as it reads through the file. Then eventually process it (reverse) in Perl.  It&#39;s still a bit lower though.  I added a section with this."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1569825284, "last_edit_date": 1569825284, "creation_date": 1567674060, "answer_id": 57801942, "question_id": 57796510, "link": "https://stackoverflow.com/questions/57796510/perl-piping-gunzip-output-to-filereadbackwards/57801942#57801942", "title": "Perl - Piping gunzip Output to File::ReadBackwards", "body": "<p>While <code>File::ReadBackwards</code> won't work as desired, here is another take. </p>\n\n<p>In the original approach you first <code>gunzip</code> before <code>tac</code>-ing, and the whole file is read so to get to its end; thus <code>tac</code> is there only for convenience. (For a plain uncompressed file one can get file size from file metadata and then seek toward the end of a file so to not have to read the whole thing.) </p>\n\n<p>Then try the same, or similar, in Perl.  The <a href=\"https://perldoc.perl.org/IO/Uncompress/Gunzip.html\" rel=\"nofollow noreferrer\">IO::Uncompress::Gunzip</a> module also has <code>seek</code> method. It does have to uncompress data up to that point</p>\n\n<blockquote>\n  <p>Note that the implementation of <code>seek</code> in this module does not provide true random access to a compressed file/buffer</p>\n</blockquote>\n\n<p>but with it we still avoid copying uncompressed data (into variables) and so pay the minimal price here, to uncompress data in order to <code>seek</code>. In my timings this saves upward from an order of magnitude, making it far closer to system's <code>gunzip</code> (competitive on the order of 10Mb file sizes).</p>\n\n<p>For that we also need the uncompressed size, which module's <code>seek</code> uses, which I get with system's <code>gzip -l</code>. Thus I still need to parse output of an external tool; so there's that issue.<sup>&dagger;</sup></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse IO::Uncompress::Gunzip qw($GunzipError);\n\nmy $file = shift;\ndie \"Usage: $0 file\\n\" if not $file or not -f $file; \n\nmy $z = IO::Uncompress::Gunzip-&gt;new($file) or die \"Error: $GunzipError\"; \n\nmy $us = (split ' ', (`gunzip -l $file`)[1])[1];  # CHECK gunzip's output\nsay \"Uncompressed size: $us\"; \n\n# Go to 1024 bytes before uncompressed end (should really be more careful\n# since we aren't guaranteed that size estimate)\n$z-&gt;seek($us-1024, 0);\n\nwhile (my $line = $z-&gt;getline) { \n    print $line if $z-&gt;eof;\n}\n</code></pre>\n\n<p>(Note: docs advertise <code>SEEK_END</code> but it didn't work for me, neither as a constant nor as 2. Also note that the constructor <em>does not fail</em> for non-existent files so the program doesn't <code>die</code> there.)</p>\n\n<p>This only prints the last line. Collect those lines into an array instead, for more involved work.</p>\n\n<p>For compressed text files on order of 10Mb in size this runs as fast as <code>gunzip | tac</code>. For files around 100Mb in size it is slower by a factor of two.  This is a rather rudimentary estimate, and it depends on all manner of detail.  But I am comfortable to say that it will be noticeably slower for larger files.</p>\n\n<hr>\n\n<p>However, the code above has a particular problem with file sizes possible in this case, in tens of Gb.  The good <em>old</em> <code>gzip</code> format has the limitation, nicely stated in <a href=\"https://www.gnu.org/software/gzip/manual/html_node/Invoking-gzip.html#Invoking-gzip\" rel=\"nofollow noreferrer\">gzip manual</a></p>\n\n<blockquote>\n  <p>The <code>gzip</code> format represents the input size modulo <em>2^32</em> [...]</p>\n</blockquote>\n\n<p>Then sizes obtained by <code>--list</code> for files larger than 4Gb undermine the above optimization: We'll <code>seek</code> to a place early in the file instead of to near its end (for a 17Gb file the size is reported by <code>-l</code> as 1Gb and so we seek there), and then in fact read the bulk of the file by <code>getline</code>.  </p>\n\n<p>The best solution would be to use the known value for the uncompressed data size -- if that is known. Otherwise, if the compressed file size exceeds 4Gb then <code>seek</code> to its compressed size (as far as we can safely), and after that use <code>read</code> with very large chunks</p>\n\n<pre><code>my $len = 10*1_024_000;  # only hundreds of reads but large buffer\n\n$z-&gt;read($buf, $len) while not $z-&gt;eof;\n\nmy @last_lines = split /\\n/, $buf;\n</code></pre>\n\n<p>The last step depends on what actually need be done.  If it is indeed to read lines backwards then you can do <code>while (my $el = pop @last_lines) { ... }</code> for example, or <code>reverse</code> the array and work away. Note that it is likely that the last read will be far lesser than <code>$len</code>.  </p>\n\n<p>On the other hand, it could so happen that the last read buffer is too small for what's needed; so one may want to always copy the needed number of lines and keep that across reads.</p>\n\n<p>The buffer size to read (<code>$len</code>) clearly depends on specifics of the problem. </p>\n\n<hr>\n\n<p>Finally, if this is too much bother you can pipe <code>gunzip</code> and keep a buffer of lines.</p>\n\n<pre><code>use String::ShellQuote qw(shell_quote); \n\nmy $num_lines  = ...;  # user supplied\nmy @last_lines;\n\nmy $cmd = shell_quote('gunzip', '-c', '--', $file);\n\nmy $pid = open my $fh, '-|', $cmd  // die \"Can't open $cmd: $!\";\n\npush @last_lines, scalar &lt;$fh&gt;  for 0..$num_lines;  # to not have to check\n\nwhile (&lt;$fh&gt;) { \n    push @last_lines, $_;\n    shift @last_lines;\n}\nclose $fh;\n\nwhile (my $line = pop @last_lines) {\n    print;  # process backwards\n}\n</code></pre>\n\n<p>I put <code>$num_lines</code> on the array right away so to not have to test the size of <code>@last_lines</code> against <code>$num_lines</code> for every <code>shift</code>, so on every read. (This improves runtime by nearly 30%.)</p>\n\n<p>Any hint of the number of lines (of uncompressed data) is helpful, so that we skip ahead and avoid copying data into variables, as much as possible.</p>\n\n<pre><code># Stash $num_lines on array\n&lt;$fh&gt; for 0..$num_to_skip;   # skip over an estimated number of lines\n# Now push+shift while reading\n</code></pre>\n\n<p>This can help quite a bit, but depending on how well we can estimate the number of lines. Altogether, in my tests this is still slower than <code>gunzip | tac | head</code>, by around 50% in the very favorable case when I skip 90% of the file. </p>\n\n<hr>\n\n<p><sup>&dagger;</sup> The uncompressed size can be found without going to external tools as</p>\n\n<pre><code>my $us = do { \n    my $d; \n    open my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n    seek($fh, -4, 2)  and  read($fh, $d, 4) &gt;= 4  and  unpack('V', $d) \n        or die \"Can't get uncompressed size: $!\";\n };\n</code></pre>\n\n<p>Thanks to mosvy for a comment with this. </p>\n\n<p>If we still stick with using system's <code>gunzip</code> then the safety of running an external command with user input (filename), practically bypassed here by checking for that file, need be taken into account by using <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> to compose the command</p>\n\n<pre><code>use String::ShellQuote qw(shell_quote); \nmy $cmd = shell_quote('gunzip', '-l', '--', $file);\n# my $us = ... qx($cmd) ...;\n</code></pre>\n\n<p>Thanks to ikegami for comment.</p>\n"}], "owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569825284, "creation_date": 1567637917, "question_id": 57796510, "link": "https://stackoverflow.com/questions/57796510/perl-piping-gunzip-output-to-filereadbackwards", "title": "Perl - Piping gunzip Output to File::ReadBackwards", "body": "<p>I have a Perl project (CGI script, running on Apache) that has previously always used gunzip and tac (piping gunzip to tac, and piping that to filehandle) in order to accomplish its workload, which is to process large, flat text files, sometimes on the order of 10GB or more each in size. More specifically, in my use case these files are needing to be decompressed on-the-fly AND read backwards at times as well (there are times when both are a requirement - mainly for speed).</p>\n\n<p>When I started this project, I looked at using <code>File::ReadBackwards</code> but decided on tac instead for performance reasons. After some discussion on a slightly-related topic last night and several suggestions to try and keep the processing entirely within Perl, I decided to give <code>File::ReadBackwards</code> another shot to see how it stands up under this workload.</p>\n\n<p>Some preliminary tests indicate that it may in fact be comparable, and possibly even better, than tac. However, so far I've only been able to test this on uncompressed files. But it now has grabbed my interest so I'd like to see if I could make it work with compressed files as well.</p>\n\n<p>Now I'm pretty sure I could probably unzip a file to <em>another</em> file, then read that backwards, but I think that would have terrible performance. Especially because the user has the option to limit results to X number for the exact reason of <em>helping</em> performance so I do not want to have to process/decompress the entirety of a file every single time I pull any lines out of it. Ideally I would like to be able to do what I do now, which is to decompress and read it backwards on-the-fly, with the ability to bail out as soon as I hit my quota if needed.</p>\n\n<p>So, my dilemma is that I need to find a way to pipe output from gunzip, into <code>File::ReadBackwards</code>, if possible.</p>\n\n<p>On a side note, I would be willing to give <code>IO::Uncompress::Gunzip</code> a chance as well (compare the decompression performance against a plain, piped gunzip process), either for performance gain (which would surprise me) or for convenience/the ability to pipe output to <code>File::ReadBackwards</code> (which I find slightly more likely).</p>\n\n<p>Does anyone have any ideas here? Any advice is much appreciated.</p>\n"}, {"tags": ["perl", "split"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11978940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oVZYMBPZ6cI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKlRjsuDAdpvjyninTczfedQuoBA/photo.jpg?sz=128", "display_name": "sarge", "link": "https://stackoverflow.com/users/11978940/sarge"}, "edited": false, "score": 0, "creation_date": 1567685919, "post_id": 57796477, "comment_id": 102042327, "body": "Appreciate you pointing out &#39;\\e&#39; is two characters. However, your answer does nothing different than what I was doing."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 25, "user_id": 11978940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oVZYMBPZ6cI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKlRjsuDAdpvjyninTczfedQuoBA/photo.jpg?sz=128", "display_name": "sarge", "link": "https://stackoverflow.com/users/11978940/sarge"}, "edited": false, "score": 0, "creation_date": 1567689860, "post_id": 57796477, "comment_id": 102044659, "body": "@sarge no, <code>perl -ne &#39;print join &quot;\\t&quot;, split &#47;[;,]|\\\\e&#47;, $_&#39; your_data</code> will not print <code>esuzy</code> with <code>e</code> as your version (<code>&#47;[\\;,\\\\\\e]&#47;</code>) does."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1567637634, "creation_date": 1567637634, "answer_id": 57796477, "question_id": 57796354, "link": "https://stackoverflow.com/questions/57796354/how-do-i-split-strings-with-e-metacharacters-in-perl/57796477#57796477", "title": "How do I split strings with \\e metacharacters in perl?", "body": "<p><code>\\e</code> is not a character, it's an escape code that represents a character. If your text contains literally <code>\\e</code> then that's two characters, and a character class (the part in <code>[]</code>) can only match one character, in this case it matches the backslash.</p>\n\n<p>You can use an alternation to match multiple strings of arbitrary length:</p>\n\n<pre><code>/[;,]|\\\\e/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 11978940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oVZYMBPZ6cI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKlRjsuDAdpvjyninTczfedQuoBA/photo.jpg?sz=128", "display_name": "sarge", "link": "https://stackoverflow.com/users/11978940/sarge"}, "edited": false, "score": 0, "creation_date": 1568036061, "post_id": 57832814, "comment_id": 102136436, "body": "Thanks, and you&#39;re right, it does work. Thanks @Grinnz"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568043798, "post_id": 57832814, "comment_id": 102140688, "body": "This is different from the problem in OP because <code>\\e</code> in a double quoted string contains the literal escape character, rather than the two characters \\ and <code>e</code>. Thus the literal escape character in your character class also matches it."}], "tags": [], "owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1567851953, "creation_date": 1567851953, "answer_id": 57832814, "question_id": 57796354, "link": "https://stackoverflow.com/questions/57796354/how-do-i-split-strings-with-e-metacharacters-in-perl/57832814#57832814", "title": "How do I split strings with \\e metacharacters in perl?", "body": "<p>I tried running following code, and it gave output as expected :</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Data::Dumper;\n\nmy @x = (\n    \"joe\\@gmail.com,joe\\@xyz.com,joe\\@isp.net\",\n\n    \"fred\\@123.com;fred\\@gmail.com\",\n\n    \"suzy\\@yahoo.com\\esuzy\\@abc.com\"\n);\n\nforeach (@x) {\n    my @array = split /[;,\\e]/, $_;\n    print Dumper(\\@array);\n}\n\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          'joe@gmail.com',\n          'joe@xyz.com',\n          'joe@isp.net'\n        ];\n$VAR1 = [\n          'fred@123.com',\n          'fred@gmail.com'\n        ];\n$VAR1 = [\n          'suzy@yahoo.com',\n          'suzy@abc.com'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11978940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oVZYMBPZ6cI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKlRjsuDAdpvjyninTczfedQuoBA/photo.jpg?sz=128", "display_name": "sarge", "link": "https://stackoverflow.com/users/11978940/sarge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 57796477, "answer_count": 2, "score": 0, "last_activity_date": 1567851953, "creation_date": 1567636400, "question_id": 57796354, "link": "https://stackoverflow.com/questions/57796354/how-do-i-split-strings-with-e-metacharacters-in-perl", "title": "How do I split strings with \\e metacharacters in perl?", "body": "<p>I need to split strings from a variable where the delimeter may be one of three characters:</p>\n\n<p><code>;</code> -or- <code>,</code> -or- <code>\\e</code></p>\n\n<p>I can escape the <code>;</code>, but escape <code>\\e</code> is giving me fits.</p>\n\n<p>Data looks like:</p>\n\n<p><code>joe@gmail.com,joe@xyz.com,joe@isp.net</code></p>\n\n<p><code>fred@123.com;fred@gmail.com</code></p>\n\n<p><code>suzy@yahoo.com\\esuzy@abc.com</code></p>\n\n<p>I start by matching some strings, if true place the data in an array, splitting on whatever delimeter matches:</p>\n\n<pre><code>if($ax=~/abc.com|xyz.com|123.com/) {\n  my @addr=split /[\\;,\\\\\\e]/, $ax;\n  ...\n}\n</code></pre>\n\n<p>Output in this scenario gives me:</p>\n\n<pre><code>'joe@gmail.com',\n'joe@xyz.com',\n'joe@isp.net'\n\n'fred@123.com',\n'fred@gmail.com'\n\n'suzy@yahoo.com',\n'esuzy@abc.com'  &lt;--- Note the 'e'\n</code></pre>\n\n<p>Regex gives me anxiety.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1567603920, "post_id": 57788390, "comment_id": 102012255, "body": "Review with an eye towards improving it? So many things can be done better with that script... the line you quoted can benefit from using <code>first</code> from the <code>List::Util</code> module for starters."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1567608553, "post_id": 57788390, "comment_id": 102015057, "body": "<a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1567602980, "post_id": 57788628, "comment_id": 102011714, "body": "One can use <a href=\"http://search.cpan.org/perldoc?autovivification\" rel=\"nofollow noreferrer\"><code>no autovivification;</code></a> to turn off/configure this behaviour."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1567608658, "post_id": 57788628, "comment_id": 102015116, "body": "One could also (more laboriously) use <code>ref</code> and <code>exists</code> guards before diving into data structures: <code>if (ref($foo) eq &#39;HASH&#39; &amp;&amp; exists $foo-&gt;{bar}) {...}</code>. Unwieldy, to be sure, but sometimes a sharper sword than the pragma."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1567626581, "post_id": 57788628, "comment_id": 102023022, "body": "@DavidO No need for <code>ref</code>. If you&#39;re expecting a reference or nothing, a simple truth test will do."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 8, "last_activity_date": 1567600884, "creation_date": 1567600884, "answer_id": 57788628, "question_id": 57788390, "link": "https://stackoverflow.com/questions/57788390/why-an-undef-variable-becomes-without-define/57788628#57788628", "title": "Why an undef variable becomes {} without define?", "body": "<p>The problem here is a Perl feature called \"autovivification\". Basically, it means that if you treat an undefined Perl variable as a type of reference, then Perl will create a reference of that type and store it in your variable.</p>\n\n<p>So your problem starts when you execute this statement:</p>\n\n<pre><code>if ($wuser-&gt;{'pass'} eq 'x')\n</code></pre>\n\n<p>Perl sees you treating <code>$wuser</code> as a hash reference, so it creates an empty hash and stores a reference to that hash in <code>$wuser</code>. It can then look up the \"pass\" key in that hash and find that it doesn't exist.</p>\n\n<p>Usually, this is seen as a feature. You can run code like:</p>\n\n<pre><code>my $hash; # created as undef\n$hash-&gt;{foo}{bar}{baz} = 1;\n</code></pre>\n\n<p>And Perl will create this data structure for you:</p>\n\n<pre><code>{\n  'foo' =&gt; {\n    'bar' =&gt; {\n      'baz' =&gt; 1\n    }\n  }\n};\n</code></pre>\n\n<p>without you needing to go to the trouble of creating all the intermediate levels of the hash.</p>\n\n<p>Of course, your code is rather artificial. You know that <code>$wuser</code> is false when you start looking for keys. All references are true, so a false reference can never contain keys.</p>\n"}], "owner": {"reputation": 33, "user_id": 12019625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dde3020bf1053db09ab2b97d3b0b09a?s=128&d=identicon&r=PG&f=1", "display_name": "minty_he", "link": "https://stackoverflow.com/users/12019625/minty-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57788628, "answer_count": 1, "score": 3, "last_activity_date": 1567600884, "creation_date": 1567600048, "question_id": 57788390, "link": "https://stackoverflow.com/questions/57788390/why-an-undef-variable-becomes-without-define", "title": "Why an undef variable becomes {} without define?", "body": "<p>I'm working on review webmin's <a href=\"https://github.com/webmin/webmin/blob/master/password_change.cgi#L21\" rel=\"nofollow noreferrer\">source code</a>.</p>\n\n<p><code>($wuser) = grep { $_-&gt;{'name'} eq $in{'user'} } &amp;acl::list_users();</code></p>\n\n<p>If we pass <code>$in{'user'}</code> like <code>?user=notexist</code>, variable <code>$wuser</code> will be <code>undef</code>, isn't it?</p>\n\n<p>The abstract code descript what happened below.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># $wuser is undef now.\n#die Dumper($wuser);\nif($wuser){die 'not die here';}\n        if ($wuser-&gt;{'pass'} eq 'x') {\n                #never reach here.\n                die 'not die in branch 1';\n        }\n        elsif ($wuser-&gt;{'pass'} eq '*LK*' ||\n               $wuser-&gt;{'pass'} =~ /^\\!/) {\n                #never reach here too.\n                die 'not die in branch 2';\n        }\nif($wuser){die 'so....why die here '.Dumper($wuser);}\n# $wuser is {} now.\n}\n\n</code></pre>\n\n<p>So...when and how an undef variable becomes {} without any define...</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 9, "last_activity_date": 1567598252, "creation_date": 1567598252, "answer_id": 57787920, "question_id": 57787770, "link": "https://stackoverflow.com/questions/57787770/trouble-adding-to-hash-in-perl/57787920#57787920", "title": "Trouble adding to hash in perl", "body": "<p>To add a new element to an array, use <a href=\"http://p3rl.org/push\" rel=\"noreferrer\">push</a>. As we\n're dealing with an array reference, we need to dereference it first.</p>\n\n<pre><code>push @{ $json_data-&gt;{CommandCenters} }, { NewItem =&gt; [\"haha\", \"moredata\"] };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 11951910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e03113010e0ff5276db85314438f15?s=128&d=identicon&r=PG&f=1", "display_name": "newdeveloper", "link": "https://stackoverflow.com/users/11951910/newdeveloper"}, "edited": false, "score": 0, "creation_date": 1567614441, "post_id": 57788399, "comment_id": 102018179, "body": "Thanks for the explanation.  New to perl, someone left so I have to fill in."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1567600081, "creation_date": 1567600081, "answer_id": 57788399, "question_id": 57787770, "link": "https://stackoverflow.com/questions/57787770/trouble-adding-to-hash-in-perl/57788399#57788399", "title": "Trouble adding to hash in perl", "body": "<blockquote>\n  <p>When I try to add a new item to the hash I get the following error. <code>Not a HASH reference</code> When I use <code>ref()</code> I am getting HASH as the type.</p>\n</blockquote>\n\n<p>Attention to detail is a vital skill for a successful programmer. And you're missing something subtle here.</p>\n\n<p>When you use <code>ref()</code>, I assume you're passing it your <code>$json_data</code> variable. And that is, indeed, a hash reference. But the line that generates your <code>Not a HASH reference</code> is this line:</p>\n\n<pre><code>$json_data-&gt;{CommandCenters}{NewItem} = [\"haha\",\"moredata\"];\n</code></pre>\n\n<p>And that's not just treating <code>$json_data</code> as a hash reference (<code>$json_data-&gt;{...}</code>) it's also treating <code>$json_data-&gt;{CommandCenters}</code> as a hash reference. And that's where your problem is. <code>$json_data-&gt;{CommandCenters}</code> is an array reference, not a hash reference. It's generated from the bit of your JSON that looks like this:</p>\n\n<pre><code>\"CommandCenters\": [\n  {\n    \"secretary\": \"jill\",\n    \"janitor\": \"mike\"\n  }\n]\n</code></pre>\n\n<p>And those <code>[ .. ]</code> mark it as an array not a hash. You can't add a new key/value pair to an array; you need to <code>push()</code> new data to the end of the array. Something like:</p>\n\n<pre><code>push @{ $json_data-&gt;{CommandCenters} }, { NewItem =&gt; [\"haha\", \"moredata\"] };\n</code></pre>\n\n<p>That will leave you with this data structure:</p>\n\n<pre><code>$VAR1 = {\n  'CommandCenters' =&gt; [\n    {\n      'janitor' =&gt; 'mike',\n      'secretary' =&gt; 'jill'\n    },\n    {\n      'NewItem' =&gt; [\n        'haha',\n        'moredata'\n      ]\n    }\n  ],\n  'Location' =&gt; 'Arkansas'\n};\n</code></pre>\n\n<p>And <code>encode_json()</code> will turn that into the JSON that you want.</p>\n"}], "owner": {"reputation": 181, "user_id": 11951910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e03113010e0ff5276db85314438f15?s=128&d=identicon&r=PG&f=1", "display_name": "newdeveloper", "link": "https://stackoverflow.com/users/11951910/newdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57787920, "answer_count": 2, "score": 2, "last_activity_date": 1567600081, "creation_date": 1567597736, "question_id": 57787770, "link": "https://stackoverflow.com/questions/57787770/trouble-adding-to-hash-in-perl", "title": "Trouble adding to hash in perl", "body": "<p>I am reading a file replacing data and returning output to json. When I try to add a new item to the hash I get the following error. <code>Not a HASH reference</code> When I use <code>ref()</code> I am getting <code>HASH</code> as the type.</p>\n\n<p>I have tried.</p>\n\n<pre><code>my $json_data = decode_json($template);\n$json_data-&gt;{CommandCenters}{NewItem} = [\"haha\",\"moredata\"];\n</code></pre>\n\n<p>Gives the <code>not a hash reference</code> error</p>\n\n<p>The <code>$json_data</code> is below.</p>\n\n<pre><code>  {\n     \"Location\":\"Arkansas\",\n     \"CommandCenters\": [\n          {\n          \"secretary\": \"jill\",\n          \"janitor\": \"mike\"\n          }\n       ],\n  }\n</code></pre>\n\n<p>I am looking for the following output after I add the element.</p>\n\n<pre><code>{\n  \"Location\":\"Arkansas\",\n  \"city\": \"little rock\"\n  \"CommandCenters\": [\n   {\n      \"secretary\": \"jill\",\n      \"janitor\": \"mike\"\n   },\n   {\n       \"NewItem\":[\"whatever\",\"more data\"]\n   }\n   ],\n}\n</code></pre>\n\n<p>If I use <code>$json_data-&gt;{CommandCenters}[0]{NewItem} = ['whatever','sure'];</code> I do not get an error but I get unexpected results.\nThe data is added but in the incorrect slot.</p>\n\n<pre><code>\"commandcenters\":\n [\n    \"secretary\":\"jill\",\n    \"janitor\": \"mike\",\n     \"newitem\": \n     [\n        \"whatever\",\"sure\"\n     ],\n ]\n</code></pre>\n"}, {"tags": ["linux", "bash", "shell", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1567587670, "post_id": 57784409, "comment_id": 102003448, "body": "<i>I tried join, but join gives errors in my shell</i> - how did you try it?"}, {"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 1, "creation_date": 1567592463, "post_id": 57784409, "comment_id": 102006139, "body": "Your <code>awk</code> attempt was on the right track: <code>awk &#39;NR==FNR {h[gensub(&quot;,&quot;,&quot;&quot;,1,$1)] = $2; next} {print $0,h[$7]}&#39; file2 file1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5343483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77465421abfd2d1603161dc3c0e228d5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice", "link": "https://stackoverflow.com/users/5343483/novice"}, "edited": false, "score": 0, "creation_date": 1567587471, "post_id": 57784749, "comment_id": 102003332, "body": "Hi Kjetli, Thanks a lot for prompt answer, I ran the above solution as .sh file, and got below error, my shell is bash.                                                                                                      test.sh: line 1: syntax error near unexpected token <code>(&#39; test.sh: line 1: </code>my %h = split/[, \\n]+/, qx(cat file2);&#39;"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 169, "user_id": 5343483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77465421abfd2d1603161dc3c0e228d5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice", "link": "https://stackoverflow.com/users/5343483/novice"}, "edited": false, "score": 0, "creation_date": 1567587658, "post_id": 57784749, "comment_id": 102003444, "body": "@Novice  I added <code>#!&#47;usr&#47;bin&#47;perl</code> as the first line now. Save my answer into <code>merge.pl</code> for example and <code>chmod +x merge.pl</code>. Now you should be able to run: <code>.&#47;merge.pl</code> and if that doesn&#39;t work run: <code>perl merge.pl</code>. (All three files should be in the current directory: merge.pl, file1 and file2)"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1567588093, "last_edit_date": 1567588093, "creation_date": 1567586841, "answer_id": 57784749, "question_id": 57784409, "link": "https://stackoverflow.com/questions/57784409/how-to-merge-files-based-on-a-common-column/57784749#57784749", "title": "How to merge files based on a common column?", "body": "<pre><code>#!/usr/bin/perl\nmy %z = split/[, \\n]+/, qx(cat file2);  # read file2 into %z for lookups\nmy @file1 = split/\\n/, qx(cat file1);   # read lines of file1 into @file1\nfor( @file1 ){                          # for each line of file1\n  /http\\S+/;                     # find the url, \\S+ is non-space chars\n  print \"$_ $z{$&amp;}\\n\";           # url in $&amp; print the line and \"the zoom\" from %z\n}\n</code></pre>\n\n<p>Replace <code>file1</code> and <code>file2</code> with <code>$ARGV[0]</code> and <code>$ARGV[1]</code> if you want to get the filenames from the command line. I don't know if <code>/usr/bin/parse</code> and <code>awk</code> could work in this situation like you suggest. Would be interesting to see how. Perl is superior to awk in most cases.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 5343483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77465421abfd2d1603161dc3c0e228d5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice", "link": "https://stackoverflow.com/users/5343483/novice"}, "edited": false, "score": 0, "creation_date": 1567605497, "post_id": 57784945, "comment_id": 102013222, "body": "Thanks a lot @Xiawi, it wroked for me."}], "tags": [], "owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "is_accepted": true, "score": 1, "last_activity_date": 1567587997, "last_edit_date": 1567587997, "creation_date": 1567587525, "answer_id": 57784945, "question_id": 57784409, "link": "https://stackoverflow.com/questions/57784409/how-to-merge-files-based-on-a-common-column/57784945#57784945", "title": "How to merge files based on a common column?", "body": "<p>It can be done with <code>awk</code> but it would be easier with the same separator in both file. Thus first remove the comma in <code>file2</code>:</p>\n\n<pre><code>sed -i.old 's/,//' file2\n</code></pre>\n\n<p>The you can process with:</p>\n\n<pre><code>awk '{\n\n    if(FILENAME==\"file1\"){\n        m[$7]=$0\n    }\n    else {\n        if(m[$1]!=\"\"){\n           print m[$1],$2\n        }\n    }\n}' file1 file2\n</code></pre>\n\n<p>it first registers the content of <code>file1</code> into a map with a key on the <code>http://...</code> and a value that contains the full line (<code>$0</code>). Then it processes <code>file2</code> and displays what is expected if the second column of <code>file2</code> corresponds to a key of the map.</p>\n\n<p>In your particular case, you can do all in one line with:</p>\n\n<pre><code>awk -F'[ ,]' '{\n\n    if(FILENAME==\"file1\"){\n        m[$7]=$0\n    }\n    else {\n        if(m[$1]!=\"\"){\n           print m[$1],$2\n        }\n    }\n}' file1 file2\n</code></pre>\n\n<p>Both space and comma are considered as separator by awk</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1567587908, "creation_date": 1567587908, "answer_id": 57785059, "question_id": 57784409, "link": "https://stackoverflow.com/questions/57784409/how-to-merge-files-based-on-a-common-column/57785059#57785059", "title": "How to merge files based on a common column?", "body": "<p>Read <code>file2</code> into a hash and then process <code>file1</code> a line at a time, extracting the key and looking it up in your hash. Something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen my $fh2, '&lt;', 'file2' or die $!;\n\nmy %data_hash = map { split /,/ } &lt;$fh2&gt;;\n\nclose $fh2;\n\nopen my $fh1, '&lt;', 'file1' or die $!;\n\nwhile (&lt;$fh1&gt;) {\n  if (my ($key) = /\\b(http:\\S+)/) {\n    if (exists $data_hash{$key}) {\n      chomp;\n      print \"$_ $data_hash{$key}\";\n    } else {\n      # Key doesn't exist in file2\n      print;\n    }\n  } else {\n    # No http key found on a line in file1\n    print;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1567587958, "creation_date": 1567587958, "answer_id": 57785073, "question_id": 57784409, "link": "https://stackoverflow.com/questions/57784409/how-to-merge-files-based-on-a-common-column/57785073#57785073", "title": "How to merge files based on a common column?", "body": "<p>Using <code>join</code> is a bit complicated because the two files have different delimiters, but:</p>\n\n<pre><code>$ join -17 -21 -o 1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,1.10,1.11,1.12,2.2 &lt;(sort -k7,7 a.txt) &lt;(sort -k1,1 -t, b.txt | tr -d ',')\n25-08-2019 : Port port1 of URL http://ip1:port1/ is [ NOT OPEN ] ZOOM1\n25-08-2019 : Port port2 of URL http://ip2:port2/ is [ NOT OPEN ] ZOOM2\n</code></pre>\n\n<p>If the files are already sorted based on the URL, the <code>sort</code> bits can be removed, though you still need to strip the commas from the second file.</p>\n"}, {"tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": false, "score": 1, "last_activity_date": 1567595588, "creation_date": 1567595588, "answer_id": 57787198, "question_id": 57784409, "link": "https://stackoverflow.com/questions/57784409/how-to-merge-files-based-on-a-common-column/57787198#57787198", "title": "How to merge files based on a common column?", "body": "<p>Please try the following:</p>\n\n<pre><code>awk 'NR==FNR {h[$1]=$2; next} {print $0\" \"h[$7]}' &lt;(sed \"s/,//\" file2) file1\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>25-08-2019 : Port port1 of URL http://ip1:port1/ is [ NOT OPEN ] ZOOM1\n25-08-2019 : Port port2 of URL http://ip2:port2/ is [ NOT OPEN ] ZOOM2\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5343483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77465421abfd2d1603161dc3c0e228d5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice", "link": "https://stackoverflow.com/users/5343483/novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 57784945, "answer_count": 5, "score": 3, "last_activity_date": 1567601768, "creation_date": 1567585626, "last_edit_date": 1567601768, "question_id": 57784409, "link": "https://stackoverflow.com/questions/57784409/how-to-merge-files-based-on-a-common-column", "title": "How to merge files based on a common column?", "body": "<p>There are 2 files, file1 is the output of a telnet command i.e.</p>\n\n<pre><code>25-08-2019 : Port port1 of URL http://ip1:port1/ is [ NOT OPEN ]  \n25-08-2019 : Port port2 of URL http://ip2:port2/ is [ NOT OPEN ] \n</code></pre>\n\n<p>and another is the file2, which is like</p>\n\n<pre><code>http://ip1:port1/, ZOOM1  \nhttp://ip2:port2/, ZOOM2  \nhttp://ip3:port3/, ZOOM3\n</code></pre>\n\n<p>I need to merge these 2 files based on common IP and port. The output should be a 3rd file like:</p>\n\n<pre><code>25-08-2019 : Port port1 of URL http://ip1:port1/ is [ NOT OPEN ]  ZOOM1  \n25-08-2019 : Port port2 of URL http://ip2:port2/ is [ NOT OPEN ]  ZOOM2\n</code></pre>\n\n<p>I tried <code>join</code>, but <code>join</code> gives errors in my shell. Any help <em>without</em> <code>join</code> would be highly helpful.</p>\n\n<p>I tried <code>join</code>, this works as a command line, but fails in a shell script, both in <code>bash</code> and <code>sh</code>. Moreover it does not match, it just copy-pastes.</p>\n\n<p><code>paste -d \" : \" file1 &lt;(cut -s -d ',' -f2 file2)</code></p>\n\n<p>I also tried the <code>awk</code> command, but it does not process files as expected.  </p>\n\n<pre><code>awk 'NR==FNR {h[$2] = $3; next} {print $1,$2,$3,h[$2]}' file2 file1 &gt; file3\n</code></pre>\n"}, {"tags": ["perl", "reference", "hashref"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1570777381, "post_id": 57784193, "comment_id": 103028298, "body": "Hate to bother with this, but as a reminder see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  And if the answer(s) actually didn&#39;t resolve the matter I&#39;d appreciate to know about it"}], "answers": [{"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1567586135, "post_id": 57784446, "comment_id": 102002611, "body": "Thx for the <code>+</code> tip. But couldn&#39;t or shouldn&#39;t the <code>-&gt;</code> prevented it from being interpreted as a block?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1567605359, "post_id": 57784446, "comment_id": 102013125, "body": "@Kjetil S., No, because it can only reach the <code>-&gt;</code> after deciding whether to parse what starts with <code>{</code> as a block or a hash constructor. Remember, a block contains statements, whereas the hash constructor contains a (possibly null) expression, so they use different parsing rules. Since they&#39;re different, the parser can&#39;t simply parse the contents of the curlies then make a decision by looking at what follows the <code>}</code>. It does look ahead at token after the <code>{</code> to guess at what the <code>{</code> means, but to look further ahead is simply not productive."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567605412, "post_id": 57784446, "comment_id": 102013163, "body": "(Reposted comment to fix a nasty typo causing to say the opposite of what I meant.)"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567623640, "post_id": 57784446, "comment_id": 102021876, "body": "@ikegami I don&#39;t know the Perl parser/compiler, but know enough about parsing to think that my simple example code is well within the reach of a traditional backtracking recursive parser. I suspect the Perl compiler have many rules which uses such backtracking already (and not only look-ahead to try to resolve ambiguous tokens straight away) where it&#39;s not immediately clear what it&#39;s looking at and have to rewind to try something else. I&#39;m guessing that this case was deemed too rare, is on a todo list or was overlooked."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1567625550, "post_id": 57784446, "comment_id": 102022626, "body": "@Kjetil S., First, Perl uses an LR parser, not an LL parser, so backtracking isn&#39;t a thing. That&#39;s a good thing. When writing an LL parser, you try to eliminate all backtracking. It&#39;s slow, and it leads to poor error handling. Aside from the poor error handling, it would lead to other major problems: Perl&#39;s syntax is often dependent on whether statement, expression or operator is expected to remove ambiguities, so your solution to remove ambiguities would actually add some."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1567625907, "post_id": 57784446, "comment_id": 102022778, "body": "@Kjetil S., Also, you&#39;re wrong that <code>-&gt;{$1}</code> would disambiguate because <code>-</code> is perfectly valid after a block. So you&#39;d only discover the error after another level of recursions, which means you&#39;d mishandle that much more bad code. Attempting what you suggest would not be productive. It just changes the kinds of guesses the parser has to make (what is this vs where did the error actually happen?), which simply shifts when you get weird errors. At least the way it is now is predictable, and avoidable once a programmer is made aware. It&#39;s a lot hard to ask programmers not to make syntax errors."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1571267279, "post_id": 57784446, "comment_id": 103187721, "body": "I understand that the second part of the <code>s&#47;&#47;&#47;e</code> is attempted to be interpreted as a BLOCK when it starts with <code>{</code>. My question is why. <code>$a={1..8}-&gt;{5}</code> is ok (6), then again <code>print({1..8}-&gt;{5})</code> gives the same error while <code>print &quot;&quot;,{1..8}-&gt;{5}</code> doesn&#39;t. Might be about scalar context? But <code>@a=({1..8}-&gt;{5})</code> works. Wouldn&#39;t it be more natural to add a <code>do</code> as in <code>s&#47;&#47;do{...}&#47;e</code> if we wanted the second part to be read as a block and a missing <code>do</code> should default to the <code>{</code> being interpreted as the start of a hashref?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1571331345, "post_id": 57784446, "comment_id": 103214850, "body": "@KjetilS. &quot;<i>question is why</i>&quot; --- again, the best I can think of is that &quot;<i>it has to guess at <code>{</code> ...</i>&quot; (from the answer).  As for these other examples, I don&#39;t know enough about how parsing works to discern in detail how it guesses.  In most of them the <code>{}</code> seems to be taken as a block, with &quot;<i>uninitialized</i>&quot; warnings since <code>1..8</code> doesn&#39;t return a reference. Perhaps it is the context that guides the guess?  Or some heuristics? On the practical side, all these examples clearly push their luck and should be written more properly so that nobody has to guess."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1571331603, "post_id": 57784446, "comment_id": 103214941, "body": "@KjetilS. Btw, the <code>print({1..8}-&gt;{5})</code> for me simply fails as syntax error.  All these examples could be just discarded by the compiler, as &quot;ambiguous.&quot;  But that would then probably cripple some useful legitimate (I mean clear) uses so it tolerates it ... and guesses."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1588570432, "last_edit_date": 1588570432, "creation_date": 1567585745, "answer_id": 57784446, "question_id": 57784193, "link": "https://stackoverflow.com/questions/57784193/syntax-error-in-hashref-lookup-can-not-see-why/57784446#57784446", "title": "Syntax error in hashref lookup, can not see why", "body": "<p>The <code>{...}</code> are <a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">interpreted</a> as a BLOCK, not a hashref. We can see this by adding a <code>+</code> </p>\n\n<pre><code>perl -E'say for map s/(\u00e6|\u00f8|\u00e5)/+{qw(\u00e6 ae \u00f8 oe \u00e5 aa)}-&gt;{$1}/ger, qw(r\u00f8d gul bl\u00e5)'\n</code></pre>\n\n<p>and now it works, since what follows the <a href=\"https://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators\" rel=\"nofollow noreferrer\">unary <code>+</code></a> must be an expression; so <code>+</code> disambiguates the code. Then the interpreter goes on to identify the construct as an anonymous hash constructor. </p>\n\n<p>Otherwise it has to guess at <code>{</code> since it can't parse away before deciding whether it is parsing a block or an expression. It could analyze the context to determine what <code>{...}</code> is but I'd find it reasonable if that was simply deemed much too complex as a trade off.</p>\n\n<p>In the other example it is the concatenation operator (<code>.</code>) that does it.</p>\n\n<hr>\n\n<p>For another example of the unary <code>+</code> forcing treatment of the following code as <em>an expression</em>, and for details about related documentation, see <a href=\"https://stackoverflow.com/a/56556921/4653379\">this post</a>.</p>\n"}], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1588570432, "creation_date": 1567584882, "last_edit_date": 1568165786, "question_id": 57784193, "link": "https://stackoverflow.com/questions/57784193/syntax-error-in-hashref-lookup-can-not-see-why", "title": "Syntax error in hashref lookup, can not see why", "body": "<pre><code>perl -E 'say for map s/(\u00e6|\u00f8|\u00e5)/   {qw(\u00e6 ae \u00f8 oe \u00e5 aa)}-&gt;{$1}/ger, qw(r\u00f8d gul bl\u00e5)'\nperl -E 'say for map s/(\u00e6|\u00f8|\u00e5)/\"\".{qw(\u00e6 ae \u00f8 oe \u00e5 aa)}-&gt;{$1}/ger, qw(r\u00f8d gul bl\u00e5)'\n</code></pre>\n\n<p>The first line above gives me <code>syntax error at -e line 1, near \"}-&gt;\"</code> but the second prints <code>roed</code>, <code>gul</code> and <code>blaa</code> as expected. Is this a weakness of the compiler or are there some reason for it that I can't see? I tested and got this behaviour in versions 5.10, 5.22 and 5.26.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1567591547, "post_id": 57783260, "comment_id": 102005696, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/198931/discussion-on-question-by-dwillis77-perl-behavioral-differences-closing-child-pr\">moved to chat</a>."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "reply_to_user": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1567591750, "post_id": 57783260, "comment_id": 102005785, "body": "@zdim - To your earlier point about how one open() method may be invoking a shell process and the other not - I think that might be exactly the reason for the differing behavior! I just looked closer and indeed, open() always invokes a shell (<code>sh -c gunzip -c [file]</code> in my case, which is a child of the Perl process itself and has a subprocess of <code>gzip -d -c [file]</code> under it), while open3() does not (it has <code>gzip -d -c [file]</code> as a direct subprocess of the Perl process when a single-piped command is invoked). With the double-pipe, a shell is invoked by both variations."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1567594360, "post_id": 57783260, "comment_id": 102007046, "body": "As @zdim says, it runs the command through a shell because perl is noticing that it contains shell metacharacters (the double quotes). You can kill the shell process and all its children (the process group) passing to <code>kill</code> the pid number negated as in <code>kill 15, -$pid</code>."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1567594474, "post_id": 57783260, "comment_id": 102007112, "body": "Also, you don&#39;t need to <code>waitpid</code> on a process created as a pipe. Perl will do it for you from the <code>close</code> call anyway."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1567594922, "post_id": 57783260, "comment_id": 102007389, "body": "@salva - Thanks for the clarification; unfortunately, the negative PID method didn&#39;t work either. But the negative signal DID work when I ran it on the parent Perl process. So it would seem the subprocesses are in the same process group with that?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567629327, "post_id": 57783260, "comment_id": 102023728, "body": "&quot;<i>the subprocesses are in the same process group</i>&quot;  -- the shell that  perl starts will fork off what it needs to run the given pipeline, and those new processes are in the <a href=\"https://en.wikipedia.org/wiki/Process_group\" rel=\"nofollow noreferrer\">process group</a> with the shell that started them. To oversimplify things, a signal to the process group leader with the negated signal number goes to all processes in the group, which is why I suggested to try that.  However, you are right that the shell is <i>not</i> a process group leader but the perl script is."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567589219, "post_id": 57783853, "comment_id": 102004319, "body": "Thanks for the reply Shawn! Unfortunately, I do need to do a lot more with these files than just read the first or last line - I just used that as the simplest example of where I had noticed the issue with the piped processes. But my app as a whole is doing some heavy processing of some very large files, and so for performance reasons I decided to go with gzip and tac as opposed to the Perl modules to do the same, as they seemed to be much faster for this type of workload (at least based on the info I gathered when I started the project)."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567590160, "post_id": 57783853, "comment_id": 102004847, "body": "@dwillis77 Considering that when <code>tac</code>&#39;s standard input is a pipe and not a file it has to read everything into memory before it can start printing out lines in reverse order, using it on the output of gunzipping a large file seems unlikely to be better than just doing your processing entirely in perl."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567591090, "post_id": 57783853, "comment_id": 102005407, "body": "Interesting point... I wouldn&#39;t mind giving the Perl module in your example a shot to compare decompression performance. I mainly had researched the ReadBackwards one when comparing to tac previously - I did not compare the module you mentioned to g(un)zip."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567591133, "post_id": 57783853, "comment_id": 102005438, "body": "However, I&#39;m not sure that it has to read 100% of the file into memory before it can start printing out lines from the end because I just did a query against a gzip&#39;d file backwards (9GB uncompressed, only 305MB(!) compressed), on a box with only 4GB RAM total, and it came back in just over a minute (with 1K results, which was the cap I set) with memory usage only hovering around 1.4GB during the search and no swap usage (CPU was ramped up during the search obviously, but not memory)."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567594286, "post_id": 57783853, "comment_id": 102007008, "body": "@dwillis77 <code>tac</code> is not reading the whole thing in the memory; it&#39;s using a temporary file and is reading it by seeking backwards from its end (strace it if you don&#39;t believe me). This answer of &quot;write the whole thing in perl&quot; would be much better if it included a tac implementation in <code>perl</code> which doesn&#39;t try to load the whole file in the memory, which doesn&#39;t sound like rocket science, but would better be the subject of another Q). Or if it pointed to a ready made module doing it."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567594820, "post_id": 57783853, "comment_id": 102007339, "body": "Makes sense; that explains the behavior I saw with memory usage not capped. So the File::ReadBackwards Perl module <i>does</i> load the whole thing in memory then in order to read it backwards?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1567595076, "post_id": 57783853, "comment_id": 102007454, "body": "@mosvy Which <code>tac</code> implementation is this? The <a href=\"https://github.com/IIJ-NetBSD/netbsd-src/blob/master/usr.bin/tail/reverse.c\" rel=\"nofollow noreferrer\">bsd ones</a> I checked sure don&#39;t do anything with temporary files."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1567595638, "post_id": 57783853, "comment_id": 102007712, "body": "The <a href=\"http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/tac.c?id=f2dfea7e99b36961530035750e72e80c41b83542#n542\" rel=\"nofollow noreferrer\"><code>tac</code> from GNU coreutils</a>. What that bsd implemetation does is really broken; they should better refuse non-seekable files outright instead of buffering them in memory."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567604239, "post_id": 57783853, "comment_id": 102012433, "body": "Re &quot;<i>So the File::ReadBackwards Perl module does load the whole thing in memory then in order to read it backwards?</i>&quot;, No, it reads from the end in the exact same manner as a file is read from the start: Read a chunk, look for lines in the chunk, and read other chunks when needed. (As such, it requires a seekable file.)"}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567609136, "post_id": 57783853, "comment_id": 102015414, "body": "Hmm. Was just wondering since the previous comment implied that the Perl modules written to do the same, <i>did</i> try to load the whole file in memory. In any case, I will benchmark current versions of Perl modules doing these tasks against my current setup just to know for sure, because I am interested. But so far <code>tac</code> has proved quite efficient tbh."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1567583672, "creation_date": 1567583672, "answer_id": 57783853, "question_id": 57783260, "link": "https://stackoverflow.com/questions/57783260/perl-behavioral-differences-closing-child-process-spawned-with-open-vs-ipco/57783853#57783853", "title": "Perl Behavioral Differences Closing Child Process Spawned with open() vs. IPC::Open3", "body": "<p>If you just want to read the last line of a gzipped file, it's easy to do it in pure perl without calling an external program:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse IO::Uncompress::Gunzip qw/$GunzipError/;\n\nmy $fname = 'foo.txt.gz';\nmy $z = new IO::Uncompress::Gunzip $fname or die \"Couldn't open file: $GunzipError\\n\";\nmy $row;\nwhile (&lt;$z&gt;) {\n  $row = $_;\n}\nsay \"Row: $row\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567592652, "post_id": 57785718, "comment_id": 102006230, "body": "Hrmm, I must have misunderstood the open3() documentation. As in the example <a href=\"https://www.perlmonks.org/?node_id=419919\" rel=\"nofollow noreferrer\">here</a> (and also in the IPC::Open3 docs), it is mentioned that if *ERROR is false, it uses the same filehandle as stdout. In Perl, undef is one of the values that will eval to false, right? EDIT/UPDATE: Ok, I get it, yes reading one line from stdout we would not see the error if it was there. I missed that one."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567592775, "post_id": 57785718, "comment_id": 102006305, "body": "Yes, I&#39;ve already corrected that, though it doesn&#39;t change anything to the idea, really. You&#39;ll have to read the error message from <code>$fh</code>."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567593018, "post_id": 57785718, "comment_id": 102006425, "body": "Thanks for the response, its starting to become clearer. I was able to confirm though that there is some difference in the way open() and open3() spawn processes (see my comment above or the chat the convo was moved to). I did not mess with the <code>SIGPIPE</code> handling at all (at least not to my knowledge). But this is a CGI script running from a webpage. You say that Perl&#39;s parent would have been the one to affect this. Is it possible that apache was the one causing the process(es) to ignore the received <code>SIGPIPE</code>?"}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567593062, "post_id": 57785718, "comment_id": 102006441, "body": "Because if I remember correctly (I will readjust my script to confirm) I believe I got the same errors  in the logs back when I was just closing the filehandle and doing nothing else (as suggested here). Hence the reason I went on this hunt in the first place."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567593423, "post_id": 57785718, "comment_id": 102006611, "body": "Maybe not apache but fastcgi or similar. I will test it when I got a machine where I could run that. My objections to the kill/wait danse weren&#39;t directly related to the gist of the problem, so I&#39;ll remove the last paragraph from the answer (I do hope you did get my point in the comments)"}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567593877, "post_id": 57785718, "comment_id": 102006818, "body": "All of the <code>open -|</code>, <code>open |-</code>, <code>system</code>, <code>open2</code>, <code>open3</code>, etc will run the <code>command</code> by passing it to <code>&#47;bin&#47;sh -c</code> unless the command is passed as a list or it doesn&#39;t contain any shell metacharacters. Using anything like a pipeline completely precludes either."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 1, "creation_date": 1567594669, "post_id": 57785718, "comment_id": 102007240, "body": "Sure, no worries. That makes sense about the commands - the open3() command that didn&#39;t invoke the <code>sh -c</code> had no pipes or special chars (<code>gunzip</code> only, without <code>tac</code>), whereas the same command with open() would have a pipe (<code>-|</code>). Lots of useful info provided here, and your answer does explain what is going on (although I&#39;d still like to wrap my head around exactly <i>why</i> the process is ignoring the <code>SIGPIPE</code>), so I&#39;m accepting this as the answer. Thanks for taking the time to explain this stuff (I&#39;m still fairly new to Perl as you can probably tell - this is my first sizeable project in it)."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567602211, "post_id": 57785718, "comment_id": 102011216, "body": "@dwillis77 I have confirmed that fastcgi (and not apache) is setting <code>SIGPIPE</code> to &quot;ignore&quot;, and updated the answer. I&#39;ve also removed some misinformation, especially the quick-n-dirty fix, which didn&#39;t work with a standard-compliant <code>&#47;bin&#47;sh</code>."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567610022, "post_id": 57785718, "comment_id": 102015893, "body": "Thanks for all your info - it really put me on the right track. I think I finally did figure out why its ignoring the <code>SIGPIPE</code> - I&#39;m not using fastcgi <i>but</i> I am using mod_cgid and we can see right in the mod_cgid.c source for my version (2.4.18) that it says in a comment <code>Note that we already ignore SIGPIPE in the core server</code>. So it would appear that it is indeed ignoring it, thus causing the situation you described. Thanks again - never would have figured this out without the info here."}, {"owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "edited": false, "score": 0, "creation_date": 1567714522, "post_id": 57785718, "comment_id": 102056208, "body": "And, just to confirm for any future readers - setting the <code>SIGPIPE</code> disposition back to the default manually in my code did resolve the issue (and then just closing the filehandle with <code>close()</code> and letting Perl clean up the piped processes). It seems either an empty handler (as noted by mosvy in the answer) or also just a <code>$SIG{PIPE} = &quot;DEFAULT&quot;;</code> will work to accomplish this as well. Thanks again to all who responded."}], "tags": [], "owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "is_accepted": true, "score": 2, "last_activity_date": 1567679130, "last_edit_date": 1592644375, "creation_date": 1567590221, "answer_id": 57785718, "question_id": 57783260, "link": "https://stackoverflow.com/questions/57783260/perl-behavioral-differences-closing-child-process-spawned-with-open-vs-ipco/57785718#57785718", "title": "Perl Behavioral Differences Closing Child Process Spawned with open() vs. IPC::Open3", "body": "<p>This happens because either your perl script or its parent is ignoring the <code>SIGPIPE</code> signal, and the ignore signal dispositions are inherited by the children.</p>\n<p>Here is a simpler testcase for your condition:</p>\n<pre><code>$ perl -e '$SIG{PIPE}=&quot;IGNORE&quot;; open my $fh, &quot;-|&quot;, &quot;seq 100000 | tac; true&quot;; print scalar &lt;$fh&gt;'\n100000\ntac: write error\n$ (trap &quot;&quot; PIPE; perl -e 'open my $fh, &quot;-|&quot;, &quot;seq 100000 | tac&quot;; print scalar &lt;$fh&gt;')\n100000\ntac: write error\n$ (trap &quot;&quot; PIPE; perl -e 'my $pid = open my $fh, &quot;-|&quot;, &quot;seq 100000 | tac&quot;; print scalar &lt;$fh&gt;; kill 15, $pid; waitpid $pid, 0')\n100000\n$ tac: write error\n</code></pre>\n<p>The latter version does the same <code>kill</code> as the version from the OP, which will not kill either the right or left side of the pipeline, but the shell running and waiting for both (some shells will exec through the left side of a pipeline; with such shells, a <code>; exit $?</code> could be appended to the command in order to reproduce the example).</p>\n<p>A case where <code>SIGPIPE</code> is ignored upon entering a <code>perl</code> script is when run via <code>fastcgi</code> -- which sets the <code>SIGPIPE</code> disposition to <a href=\"https://github.com/FastCGI-Archives/mod_fastcgi/blob/48cb8e51411856d62a2d45d412a1158fcdfa6805/fcgi_pm.c#L428\" rel=\"nofollow noreferrer\">ignore</a>, and <a href=\"https://fastcgi-archives.github.io/FastCGI_FAQ.html#Signals\" rel=\"nofollow noreferrer\">expects</a> the script to handle it. In that case simply setting an <code>SIGPIPE</code> handler instead of <code>IGNORE</code> (even an empty handler) would work, since in that case the signal disposition will be reset to default upon executing external commands:</p>\n<pre><code>$SIG{PIPE} = sub { };\nopen my $fh, '-|', 'trap - PIPE; ... | tac';\n</code></pre>\n<p>When run as a standalone script it could be some setup bug (I've see it happen in questions related to containerization on Linux), or someone trying to exploit buggy programs running with elevated privileges not bothering to handle <code>write(2)</code> errors (<code>EPIPE</code> in this case).</p>\n<blockquote>\n<p><code>my $pid = open3(my $in, my $fh, undef, &quot;gunzip -c \\&quot;$fname\\&quot;&quot;);</code></p>\n<p>...and then killing it just like I did above, I don't get any errors.</p>\n</blockquote>\n<p>Where should you get the errors from, if you're redirecting its stderr to the same <code>$fh</code> you only read the first line from?</p>\n<p>The thing is absolutely no different with <code>open3</code>:</p>\n<pre><code>$ (trap &quot;&quot; PIPE; perl -MIPC::Open3 -e 'my $pid = open3 my $in, my $out, my $err, &quot;seq 100000 | tac 2&gt;/dev/tty&quot;; print scalar &lt;$out&gt;')\n100000\n$ tac: write error\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 9556012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa32535cb00e541083eeff86ec6e47b?s=128&d=identicon&r=PG&f=1", "display_name": "dwillis77", "link": "https://stackoverflow.com/users/9556012/dwillis77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 2, "accepted_answer_id": 57785718, "answer_count": 2, "score": 3, "last_activity_date": 1567679130, "creation_date": 1567581228, "last_edit_date": 1567586183, "question_id": 57783260, "link": "https://stackoverflow.com/questions/57783260/perl-behavioral-differences-closing-child-process-spawned-with-open-vs-ipco", "title": "Perl Behavioral Differences Closing Child Process Spawned with open() vs. IPC::Open3", "body": "<p>I'm trying to figure this out but haven't been able to wrap my head around it. I need to open a piped subprocess and read from its output. Originally I was using the standard open() call like this:</p>\n\n<pre><code>#!/usr/bin/perl;\n\nuse warnings;\nuse strict;\nuse Scalar::Util qw(openhandle);\nuse IPC::Open3;\n\nmy $fname = \"/var/log/file.log.1.gz\";\nmy $pid = open(my $fh, \"-|:encoding(UTF-8)\", \"gunzip -c \\\"$fname\\\" | tac\");\n\n# Read one line from the file\nwhile (my $row = &lt;$fh&gt;) {\n    print \"Row: $row\\n\";\n    last; # Bail out early\n}\n\n# Check if the PID is valid and kill it if so\nif (kill(0, $pid) == 1) {\n    kill(15, $pid);\n    waitpid($pid, 0);\n    $pid = 0;\n}\n\n# Close the filehandle if it is still open\nif (openhandle($fh)) {\n    close $fh;\n}\n</code></pre>\n\n<p>The above works, except that I get errors from tac in the logs saying:</p>\n\n<pre><code>tac: write error\n</code></pre>\n\n<p>From what I can tell from various testing and research that I've done, this is happening because killing the PID returned from open() just kills the first child process (but not the second) and so when I then close the filehandle, tac is still writing to it, thus the \"write error\" due to the broken pipe. The strange thing is, at times when I check ($? >> 8) if the close() call returns false, it will return 141, indicating it received a SIGPIPE (backing up my theory above). However, other times it returns 0 which is strange.</p>\n\n<p>Furthermore, if I run the same command but without a double-pipe (only a single one), like this (everything else the same as above):</p>\n\n<pre><code>my $pid = open(my $fh, \"-|:encoding(UTF-8)\", \"gunzip -c \\\"$fname\\\"\");\n</code></pre>\n\n<p>...I'll get an error in the logs like this:</p>\n\n<pre><code>gzip: stdout: Broken pipe\n</code></pre>\n\n<p>...but in this case, gunzip/gzip was the only process (which I killed via the returned PID), so I'm not sure why it would still be writing to the pipe when I close the filehandle (since it was supposed to be killed already, AND waited for with waitpid()).</p>\n\n<p>I'm trying to repro this in the Perl debugger but its difficult because I can't get the stderr of the child process with plain open() (the way I'm seeing the external process' stderr in prod is in the apache2 logs - this is a CGI script).</p>\n\n<p>I understand from reading the docs that I can't get the PID of all child processes in a multi-piped open with open(), so I decided to try and resort to a different method so that I could close all processes cleanly. I tried open3(), and interestingly, without making any changes (literally running basically the same exact scenario as above but with open3() instead of open()):</p>\n\n<pre><code>my $pid = open3(my $in, my $fh, undef, \"gunzip -c \\\"$fname\\\"\");\n</code></pre>\n\n<p>...and then killing it just like I did above, I don't get any errors. This holds true for both the single piped process as shown above, as well as the double-piped process that involves piping to \"tac\".</p>\n\n<p>Therefore, I'm wondering what I am missing here? I know there are differences in the way open() and open3() work, but are there differences in the way that child processes are spawned from them? In both cases I can see that the initial child (the PID returned) is itself a child of the Perl process. But its almost as if the process spawned by open(), is not getting properly killed and/or cleaned up (via waitpid()) while the same process spawned by open3() is, and that's the part I can't figure out.</p>\n\n<p>And, more to the bigger picture and the issue at hand - what is the suggestion for the best way to cleanly close a multi-piped process in this sort of scenario? Am I spending more time than is warranted on this? The script itself works as it should aside from these errors, so if it turns out that the tac and gzip errors I'm seeing are inconsequential, should I just live with them and move on?</p>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567559082, "post_id": 57779957, "comment_id": 101995149, "body": "Tip: You should ALWAYS use <code>use strict; use warnings;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567559121, "post_id": 57779957, "comment_id": 101995157, "body": "Tip: You really should check if <code>open</code> succeeds or not, if only by adding <code>or die $!</code>. It&#39;s one of the most likely thing to fail"}], "answers": [{"comments": [{"owner": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 0, "creation_date": 1567555685, "post_id": 57779966, "comment_id": 101994610, "body": "Neat, it worked.  Can you explain what your syntax is doing?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567559186, "post_id": 57779966, "comment_id": 101995164, "body": "And you can make sure found something using <code>my ($regular) = map(...) or die &quot;No matching lines\\n&quot;;</code>"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 3, "last_activity_date": 1567555731, "last_edit_date": 1567555731, "creation_date": 1567555604, "answer_id": 57779966, "question_id": 57779957, "link": "https://stackoverflow.com/questions/57779957/can-i-restrict-grep-or-map-to-first-match-when-im-expecting-only-one-match/57779966#57779966", "title": "Can I restrict grep (or map) to first match when I&#39;m expecting only one match?", "body": "<p>You could assign the results of the operation to a list that contains just one element:</p>\n\n<pre><code>my ($regular) = map(/^regular\\.roll (.*)$/, @lines);\nprint $regular;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 0, "creation_date": 1567555901, "post_id": 57779987, "comment_id": 101994640, "body": "So kind of like casting a type after the operation?"}, {"owner": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 0, "creation_date": 1567559806, "post_id": 57779987, "comment_id": 101995285, "body": "Can <code>first</code> return capture groups?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1567557490, "last_edit_date": 1567557490, "creation_date": 1567555792, "answer_id": 57779987, "question_id": 57779957, "link": "https://stackoverflow.com/questions/57779957/can-i-restrict-grep-or-map-to-first-match-when-im-expecting-only-one-match/57779987#57779987", "title": "Can I restrict grep (or map) to first match when I&#39;m expecting only one match?", "body": "<p>You can capture a single match by assigning to a scalar in <em>list context</em></p>\n\n<pre><code>($regular) = map(/^regular\\.roll (.*)$/, @lines);\n</code></pre>\n\n<p>The parentheses on the left hand side are important, otherwise you are imposing scalar context on the right hand size and the result will be something else, like the number of elements.</p>\n\n<p>If you're trying to capture the first match from <code>grep</code> (but not <code>map</code>) and you are more comfortable using Perl modules, the <code>first</code> function in the <code>List::Util</code> package returns the first match, and is more efficient than calling <code>grep</code> and discarding all the extra matches.</p>\n\n<pre><code>use List::Util 'first';\n...\n$regular = first { /pattern/ } @input;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1567557065, "creation_date": 1567557065, "answer_id": 57780106, "question_id": 57779957, "link": "https://stackoverflow.com/questions/57779957/can-i-restrict-grep-or-map-to-first-match-when-im-expecting-only-one-match/57780106#57780106", "title": "Can I restrict grep (or map) to first match when I&#39;m expecting only one match?", "body": "<p>You can use standard <code>foreach</code> loop and terminate it when the match is found.</p>\n\n<pre><code>use strict; use warnings;\n\n# sample array to be searched\nmy @array = qw( A B C );\n\nmy $match;  # variable to hold matching element\n# \"last\" terminates the loop when /B/ pattern matches\n# print below is only for debug purposes to show which elements are tested\nprint(\"? $_\\n\") and /B/ and $match = $_ and last foreach @array;\n# below is short version\n# /B/ and $match = $_ and last foreach @array;\n\n# print $match if it is defined (if it have been assigned in foreach loop)\nprint \"MATCH: $match\\n\" if defined($match);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 0, "creation_date": 1567558610, "post_id": 57780163, "comment_id": 101995071, "body": "Thanks for the info.  It annoys me Perl doesn&#39;t just use <code>use strict</code>, <code>use warnings</code> by default."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 1, "creation_date": 1567558741, "post_id": 57780163, "comment_id": 101995091, "body": "@deanresin My sentiment as well. I have a shortcut in my vim (<code>wss</code>, warning-strict-say) which enters them.  Somewhere in docs it says, half jokingly, that <code>warnings</code> not being enforced is a bug"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 1, "creation_date": 1567559256, "post_id": 57780163, "comment_id": 101995181, "body": "@deanresin It can&#39;t for backwards compatibility. That said, <code>use 5.012;</code> and higher effectively does <code>use strict;</code> for you. I so wish they made that enable warnings too. (They can always be turned off using <code>no warnings;</code> if you happen to want them off.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "edited": false, "score": 1, "creation_date": 1567559841, "post_id": 57780163, "comment_id": 101995298, "body": "@deanresin There are &quot;frameworks&quot; (large modules I mean) which enable them, for example <code>Moose</code> (or <code>Moo</code>) etc. But, yeah, as ikegami perfectly puts it &quot;<i>I so wish...</i>&quot; ..."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1568091466, "last_edit_date": 1568091466, "creation_date": 1567557799, "answer_id": 57780163, "question_id": 57779957, "link": "https://stackoverflow.com/questions/57779957/can-i-restrict-grep-or-map-to-first-match-when-im-expecting-only-one-match/57780163#57780163", "title": "Can I restrict grep (or map) to first match when I&#39;m expecting only one match?", "body": "<p><strong>Note</strong>&nbsp; See the end for how to stop right after the first match (one statement, with a module)</p>\n\n<hr>\n\n<p>In order for the regex <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">match operator</a> to return the capture(s) themselves it indeed need be invoked in list <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a>. But then you can form that list as you wish -- with just one scalar for instance, to catch only one from the returned list of scalars</p>\n\n<pre><code>my ($regular) = map { /^regular\\.roll (.*)/ } @lines;\n</code></pre>\n\n<p>Here the <code>($v1, $v2,...)</code> on the LHS provides the list context for the <a href=\"https://stackoverflow.com/questions/54564428/scalar-vs-list-assignment-operator\">assignment operator</a>, and with only one variable the first of the returned list of <code>(.*)</code> captures is assigned and the rest discarded.  </p>\n\n<p>This above has mostly been stated already but I think that it is important to comment on a few other things in the question as well.</p>\n\n<ul>\n<li><p><strong>Always</strong> have <code>use warnings;</code> and <code>use strict;</code> at the beginning of a program</p></li>\n<li><p>An <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a> statement <strong>must</strong> be tested for failure, and if it failed you print the <a href=\"https://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">error</a>. Commonly</p>\n\n<pre><code>open my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n</code></pre></li>\n<li><p>I suggest to <code>chomp</code> in a separate statement</p></li>\n<li><p>There is no reason for <code>$</code> anchor in that regex (except with multiline string and <code>/m</code> modifier)</p></li>\n<li><p>When printing, if you put it under quotes it's interpolated with spaces (<a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\">see $,</a>) in between</p>\n\n<pre><code>say \"@regular\";\n</code></pre>\n\n<p>or, print each element on its own line</p>\n\n<pre><code>say for @regular;\n</code></pre>\n\n<p>In order to be able to use <code>say</code> <a href=\"https://perldoc.perl.org/feature.html\" rel=\"nofollow noreferrer\">feature</a> you need <code>use feature qw(say);</code></p></li>\n</ul>\n\n<hr>\n\n<p>Since only the first match is needed we'd rather not go through the rest of the list once a match is found. This can be achieved using <code>first_result</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils#firstres-BLOCK-LIST\" rel=\"nofollow noreferrer\">List::MoreUtils</a> (riffing off of mob's idea)</p>\n\n<pre><code>my $regular = firstres { my ($m) = /^regular\\.roll (.*)/; $m } @lines;\n</code></pre>\n\n<p>The syntax inside the block is a little wordy but returning <code>$1</code> after a lone regex didn't work for me (?).  If having two statements is a bother this can be shortened, at the expense of readability</p>\n\n<pre><code>my $regular = firstres { ( /^regular\\.roll (.*)/ )[0] } @lines;\n</code></pre>\n\n<p>where <code>()</code> around the regex provide for list context, and <code>[0]</code> takes the first element of that list.  I added spaces around regex to try to alleviate that syntax a little; they aren't needed.</p>\n"}], "owner": {"reputation": 1291, "user_id": 1933677, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a933694897eb06e75d7be41e948288f?s=128&d=identicon&r=PG", "display_name": "deanresin", "link": "https://stackoverflow.com/users/1933677/deanresin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 57779987, "answer_count": 4, "score": 6, "last_activity_date": 1568091466, "creation_date": 1567555406, "question_id": 57779957, "link": "https://stackoverflow.com/questions/57779957/can-i-restrict-grep-or-map-to-first-match-when-im-expecting-only-one-match", "title": "Can I restrict grep (or map) to first match when I&#39;m expecting only one match?", "body": "<p>I am literally brand new to Perl.  I have the following...</p>\n\n<pre><code>#!/usr/bin/perl\n\n#config file\n$config = \"$ENV{'HOME'}/.config/.wallpaperrc\";\n\nopen my $handle, '&lt;', $config;\nchomp(my @lines = &lt;$handle&gt;);\nclose $handle;\n\n@regular = map(/^regular\\.roll (.*)$/, @lines);\n\nprint(@regular);\n</code></pre>\n\n<p>It works but it seems awkward and improper to be using an array when I am only expecting one match and only want one match.  If I make @regular scalar then the function returns the number of matches instead.</p>\n\n<p>I tried to search for the answer but the results are muddied with all the questions using Perl grep within Bash.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1567546650, "post_id": 57778979, "comment_id": 101992921, "body": "That pretty clearly tells you that it&#39;s <i>not</i> found in the same element, and so you need to create a flag to carry state from one to another."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1567548745, "post_id": 57778979, "comment_id": 101993423, "body": "The nested one seems all good and clear -- just not there?  Note that you can combine this to <code>&#47;(?:Forward to|...).*?Discard)&#47;</code>  (with ellipsis for the rest of that long alternation), if <code>Discard</code> indeed comes <i>after</i> (and if you don&#39;t need to know when the first phrase is there but <code>Discard</code> isn&#39;t).  Note that names <code>$a</code> and <code>$b</code> are a bit of no-no since <code>sort</code> uses them.  The <code>$a</code> is declared so it&#39;s good but ... (makes me nervous to see an <code>$a</code> outside of <code>sort</code>)"}, {"owner": {"reputation": 382, "user_id": 334931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f34fd19efd04f944b9db5d053afab57?s=128&d=identicon&r=PG", "display_name": "polettix", "link": "https://stackoverflow.com/users/334931/polettix"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567664631, "post_id": 57778979, "comment_id": 102031404, "body": "It would be useful to see the data that you tested this on. Maybe it&#39;s just missing a case where <code>$a</code> matches <i>both</i> regular expressions. By the way, follow @zdim&#39;s advice about <code>$a</code>, e.g. see here <a href=\"https://stackoverflow.com/questions/26143243/in-perl-do-a-and-b-have-any-special-use-outside-of-the-sort-function\" title=\"in perl do a and b have any special use outside of the sort function\">stackoverflow.com/questions/26143243/&hellip;</a>"}], "owner": {"reputation": 21, "user_id": 6281561, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cVnmgTjrwaw/AAAAAAAAAAI/AAAAAAAAAaE/4A5cm-Y2SMg/photo.jpg?sz=128", "display_name": "Randy", "link": "https://stackoverflow.com/users/6281561/randy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567546242, "creation_date": 1567546242, "question_id": 57778979, "link": "https://stackoverflow.com/questions/57778979/nested-if-loop-doesnt-evaluate-as-expected", "title": "Nested if loop doesn&#39;t evaluate as expected", "body": "<p>I'm trying to modify a vendor's perl script to evaluate whether a string exists in the current element from an array, after first evaluating whether another string exists in the same (I think) element. </p>\n\n<p>I want to look for \"Forward to|Redirect to|Mirror to\" and if exists <em>then</em> look for \"Discard\". Right now their code looks for \"Discard\" whether or not the previous strings exist or not.</p>\n\n<pre><code>sub processAccount {\nmy $account=$_[0];\nmy $Rules=$cli-&gt;GetAccountMailRules($account);\n\n  foreach my $Rule (@$Rules) {\n    my $actions=$Rule-&gt;[3];\n\n    foreach my $actn (@$actions) {\n      my $a=$actn-&gt;[0];\n      if($a=~/Forward to|Redirect to|Mirror to/) {\n        print \"$account: '$a' -&gt; $actn-&gt;[1]\\n\";\n      } \n      if($a=~/Discard/) {\n        print \"$account: Discard\\n\";\n      }\n\n    }\n  }\n</code></pre>\n\n<p>I've tried nesting the if loop looking for \"Discard\", but it never evaluates as true.</p>\n\n<pre><code>foreach my $actn (@$actions) {\n  my $a=$actn-&gt;[0];\n  if($a=~/Forward to|Redirect to|Mirror to/) {\n    print \"$account: '$a' -&gt; $actn-&gt;[1]\\n\";\n    if($a=~/Discard/) {\n      print \"$account: Discard\\n\";\n     }\n   }\n }\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "mojo-useragent", "mojo-dom"], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 1, "last_activity_date": 1567542950, "creation_date": 1567542950, "answer_id": 57778420, "question_id": 57778270, "link": "https://stackoverflow.com/questions/57778270/mojodom-and-text-method-to-remove-spaces/57778420#57778420", "title": "Mojo::DOM and Text Method to remove spaces", "body": "<p><a href=\"https://metacpan.org/pod/Mojo%3A%3AUtil\" rel=\"nofollow noreferrer\">Mojo::Util</a> provides <a href=\"https://metacpan.org/pod/Mojo%3A%3AUtil#trim\" rel=\"nofollow noreferrer\">trim</a> which should do what you want:</p>\n\n<blockquote>\n  <p><code>my $trimmed = trim $str;</code></p>\n  \n  <p>Trim whitespace characters from both ends of string.</p>\n</blockquote>\n"}], "owner": {"reputation": 75, "user_id": 10546869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3_LmQqfkVxE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCk5Nau3q6Zn2oOdR5W6HLTv-Rg3g/mo/photo.jpg?sz=128", "display_name": "jsor", "link": "https://stackoverflow.com/users/10546869/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57778420, "answer_count": 1, "score": 1, "last_activity_date": 1567542950, "creation_date": 1567542104, "question_id": 57778270, "link": "https://stackoverflow.com/questions/57778270/mojodom-and-text-method-to-remove-spaces", "title": "Mojo::DOM and Text Method to remove spaces", "body": "<p>I have the following code which using Mojo::DOM to get the text</p>\n\n<pre><code>my $text =ua-&gt;get('https://my_site.org'.$_)-&gt;res-&gt;dom-&gt;at('div.container-fluid h1')-&gt;text;\n</code></pre>\n\n<p>while the text under h1 if on the following format :</p>\n\n<pre><code>&lt;h1&gt;\n                       my_text                    &lt;/h1&gt;\n</code></pre>\n\n<p>the $text is come with the heading and trailing spaces</p>\n\n<p>I can do something like this to remove the heading and the trailing spaces</p>\n\n<pre><code>  $text =~ s/^\\s+//;\n  $text=~ s/\\s+$//;\n</code></pre>\n\n<p>but I am wondering if its possible to do this with mojolicious functionality ?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 2, "creation_date": 1567541943, "post_id": 57778230, "comment_id": 101991391, "body": "What is your desired output?"}, {"owner": {"reputation": 2048, "user_id": 10552687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd4bd62f003f927fbf2881ba3a31716?s=128&d=identicon&r=PG&f=1", "display_name": "dvo", "link": "https://stackoverflow.com/users/10552687/dvo"}, "edited": false, "score": 0, "creation_date": 1567541984, "post_id": 57778230, "comment_id": 101991408, "body": "Can you explain your string further? What is the pattern of the string in terms of letters (upper or lower case), numbers, dashes, etc.?"}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1567542007, "post_id": 57778230, "comment_id": 101991417, "body": "You did not match the last 3 parts <a href=\"https://regex101.com/r/JU1nJa/1/\" rel=\"nofollow noreferrer\">regex101.com/r/JU1nJa/1</a> Why not use a pattern like <code>^[a-z0-9]+(?:-[a-z0-9]+)*</code> <a href=\"https://regex101.com/r/gdoklm/1\" rel=\"nofollow noreferrer\">regex101.com/r/gdoklm/1</a>"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 2048, "user_id": 10552687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd4bd62f003f927fbf2881ba3a31716?s=128&d=identicon&r=PG&f=1", "display_name": "dvo", "link": "https://stackoverflow.com/users/10552687/dvo"}, "edited": false, "score": 0, "creation_date": 1567542186, "post_id": 57778230, "comment_id": 101991485, "body": "@dvo that is the exact pattern of all the strings. The letters may vary and the numbers but all of them have the exact same amount of letters in the same place with the same amount of numbers in the same place and same dashes in the same place. So right now, I&#39;m looking for an exact matching for the string above."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1567542306, "post_id": 57778230, "comment_id": 101991523, "body": "@Thefourthbird I tried that but it did not work."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1567542377, "post_id": 57778230, "comment_id": 101991560, "body": "Which one did not work? The first or the second? Are you only matching characters a-z, <code>-</code> and 0-9? Because <code>\\D</code> matches not a digit and is a broad match."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1567542426, "post_id": 57778230, "comment_id": 101991577, "body": "@Thefourthbird I tried &quot;^[a-z0-9]+(?:-[a-z0-9]+)*&quot;. Also, I just edited my post to elaborate a bit further on the issue. Edit: testing it out with the site link you provided right now."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1567542652, "post_id": 57778230, "comment_id": 101991651, "body": "@Thefourthbird The first one is not working either. I also added a &quot;+&quot; to the end because there are more letters and dashes that follow in the string but that did not work."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1567542722, "post_id": 57778230, "comment_id": 101991679, "body": "Does your match start at the start of the string? Else try omitting the leading <code>^</code>"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1567542747, "post_id": 57778230, "comment_id": 101991687, "body": "@Thefourthbird yes, it does start at the start."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567542935, "post_id": 57778230, "comment_id": 101991765, "body": "Show the code, you may be using the regex in a wrong way."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1567544454, "post_id": 57778230, "comment_id": 101992267, "body": "What are the ellipsis (<code>...</code>) for -- can you show the whole, actual string? (Along with your actual code as Wiktor asked.) Do you literally just need to &quot;<i>match</i>&quot; it (to know that it&#39;s there) or do you need to extract stuff from it, like that last digit? (btw, the string you show has <code>b</code> last, not the digit(s).)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1567544732, "post_id": 57778230, "comment_id": 101992361, "body": "<code>**  Grp 0 -  ( pos 0 : len 25 )  no-mac4-two-git5a0r-m0-18    **  Grp 1 -  ( pos 23 : len 2 )  18</code> is exactly what matches. What is your question ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1567544734, "post_id": 57778230, "comment_id": 101992362, "body": "&quot;<i>it is not correct</i>&quot; -- how/why is it not correct?  The regex you show on that string you show captures number <code>18</code>.  What do you want to capture?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1567545223, "post_id": 57778230, "comment_id": 101992497, "body": "You might as well use this <code>&#47;^\\D+(?:\\d+\\D+)+(\\d+)&#47;</code> you don&#39;t get any difference any other way. If you have a certain number of <i>yes/no</i> pairs of which to validate, use a quantifier <code>&#47;^\\D+(?:\\d+\\D+){4}(\\d+)&#47;</code>"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567546948, "post_id": 57778230, "comment_id": 101993015, "body": "@WiktorStribi\u017cew I don&#39;t think so because I used it for other patterns of strings, as well. I was able to get the regex right and it worked fine. So the problem seems to be me incorrectly matching. My code is about 500 lines"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1567547055, "post_id": 57778230, "comment_id": 101993051, "body": "@sln <code>&#47;^\\D+(?:\\d+\\D+)+(\\d+)&#47;</code> worked! thank you!!!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1567548659, "post_id": 57778230, "comment_id": 101993404, "body": "You&#39;re quite welcome"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567555261, "post_id": 57778230, "comment_id": 101994542, "body": "So, you basically want to match the last chunk of digits in a string? <code>&#47;\\d+(?=\\D*$)&#47;</code> or <code>&#47;\\d+(?!.*\\d)&#47;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1567623965, "post_id": 57778230, "comment_id": 102022004, "body": "Lets basically benchmark it <code>Regex1:   ^\\D+(?:\\d+\\D+)+(\\d+) Completed iterations:   50  &#47;  50     ( x 1000 ) Elapsed Time:    0.37 s,   374.02 ms,   374018 &#181;s Matches per sec:   133,683  Regex2:   \\d+(?=\\D*$) Completed iterations:   50  &#47;  50     ( x 1000 ) Elapsed Time:    0.43 s,   429.60 ms,   429597 &#181;s Matches per sec:   116,388  Regex3:   \\d+(?!.*\\d) Completed iterations:   50  &#47;  50     ( x 1000 ) Elapsed Time:    0.45 s,   452.38 ms,   452375 &#181;s Matches per sec:   110,527</code> The farther out you go, the worse it gets for the assertions, by exponentially.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1567624209, "post_id": 57778230, "comment_id": 102022099, "body": "It is for this performance reason and some others, I&#39;m opening it back up."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1568045849, "post_id": 57778230, "comment_id": 102141648, "body": "I agree that it could qualify as a dupe of matching the last number in a string. @sln Out of curiosity, why reopen the question without providing one of the patterns as an answer? Do you agree reclosing the question instead?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1568056518, "post_id": 57778230, "comment_id": 102146133, "body": "@Thefourthbird - <code>I agree that it could qualify as a dupe of matching the last number in a string</code> Really ? How do you know that ? And if so,  what makes you think any dup is correct in advising a method as listed ? I assert that you cannot advise a solution that says to skip to the end of a string. There is no such thing brother .."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568720564, "post_id": 57778230, "comment_id": 102356778, "body": "@sfr So, <code>&#47;(\\d+)(?=\\D*$)&#47;</code> will <a href=\"https://ideone.com/mpNqu8\" rel=\"nofollow noreferrer\">also work</a>, right? It is clear then you need to match the last number in a string and <a href=\"https://stackoverflow.com/questions/5320525/regular-expression-to-match-last-number-in-a-string\">this</a> is a valid dupe reason. Please consider removing this post as I cannot reclose it."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1568976785, "post_id": 57778230, "comment_id": 102456170, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5320525/regular-expression-to-match-last-number-in-a-string\">Regular expression to match last number in a string</a>"}, {"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1569569121, "post_id": 57778230, "comment_id": 102646641, "body": "I disagree that this is a duplicate of the proposed dup-target. The OP has said they want to match the entire string up to what&#39;s described in the question, not just the last digit (as is the case in the proposed dup-target). Unfortunately, the OP hasn&#39;t said what &quot;there is more to it&quot; actually consists of. We have to <i>assume</i> the OP saying <code>&#47;^\\D+(?:\\d+\\D+)+(\\d+)&#47;</code> worked indicates they want to match the entire string up to the last digit, but even that is uncertain, because we don&#39;t know what&#39;s in the final portion of the string and we&#39;re not actually told there are no more digits."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1570434812, "creation_date": 1570434812, "answer_id": 58265454, "question_id": 57778230, "link": "https://stackoverflow.com/questions/57778230/matching-strings-in-perl-with-mix-of-digits-nondigits/58265454#58265454", "title": "Matching strings in Perl with mix of digits, nondigits", "body": "<p>You <a href=\"https://stackoverflow.com/questions/57778230/matching-strings-in-perl-with-mix-of-digits-nondigits/58265454#comment101993051_57778230\">say</a> <code>/^\\D+(?:\\d+\\D+)+(\\d+)/</code> worked for you so your question is about matching the last 1+ digit chunk in the string.</p>\n\n<p>The <strong><a href=\"https://ideone.com/PuhqsM\" rel=\"nofollow noreferrer\">answers are here</a></strong>:</p>\n\n<pre><code>(\\d+)(?!.*\\d)\n(\\d+)\\D*\\z\n.*(?:\\D|^)(\\d+)\n</code></pre>\n\n<p><a href=\"https://ideone.com/PuhqsM\" rel=\"nofollow noreferrer\">Proof</a>:</p>\n\n<pre><code>if (\"no-mac4-two-git5a0r-m0-18md12b....\" =~ /(\\d+)(?=\\D*$)/) {\n    print \"$1\";\n}\n# =&gt; 12\nif (\"no-mac4-two-git5a0r-m0-18md12b....\" =~ /(\\d+)\\D*\\z/) {\n    print \"$1\\n\";\n}\n# =&gt; 12\nif (\"no-mac4-two-git5a0r-m0-18md12b....\" =~ /.*(?:\\D|^)(\\d+)/) {\n    print \"$1\";\n}\n# =&gt; 12\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1570434812, "creation_date": 1567541845, "last_edit_date": 1567542386, "question_id": 57778230, "link": "https://stackoverflow.com/questions/57778230/matching-strings-in-perl-with-mix-of-digits-nondigits", "title": "Matching strings in Perl with mix of digits, nondigits", "body": "<p>I have a string that looks like </p>\n\n<blockquote>\n  <p>no-mac4-two-git5a0r-m0-18md12b....</p>\n</blockquote>\n\n<p>I'm trying to match it as <code>/^\\D+\\d+\\D+\\d\\D\\d\\D+\\d+\\D+(\\d+)/</code> but it is not correct. Can I get some help with this? I only need to match this part of the string although there is more to it which is why I'm using the \"+\" at the end.</p>\n\n<p>Further explanation:</p>\n\n<p>These strings are part of a path name. I am trying to retrieve some paths based off whether they match the regex. All the paths have a string with the exact same pattern and format as I showed above. I am not able to successfully return any paths with the way I was matching it though.</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567535924, "post_id": 57776352, "comment_id": 101989238, "body": "Why not just run the command in the background with the shell: <code>$ssh-&gt;exec(&quot;python test.py &amp;&quot;);</code> ? See <a href=\"https://kb.iu.edu/d/afnz\" rel=\"nofollow noreferrer\">Run a Unix process in the background</a>"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1567536738, "post_id": 57776352, "comment_id": 101989568, "body": "Good idea @hakon. So in this case test.py will execute from background and the Perl script will not bother about the test.py executed successfully or not and continues it&#39;s flow. Correct me if I&#39;m wrong."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567536999, "post_id": 57776352, "comment_id": 101989666, "body": "Yes that is correct."}], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567578954, "post_id": 57777419, "comment_id": 101999261, "body": "So in order to see if test.py is executed successfully or not what should I do (In my question (2)) ? As of now I am giving timeout inside exec command. Is there any other solution for this?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567582986, "post_id": 57777419, "comment_id": 102001052, "body": "I think if you set timeout to <code>undef</code> it will wait forever (i.e. until the command finishes). You could use this to fork a new process that waits for the python script, while the parent process continues working"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567584282, "post_id": 57777419, "comment_id": 102001687, "body": "In this case yes, its waiting forever and never comes back to perl script."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567586069, "post_id": 57777419, "comment_id": 102002578, "body": "I thought it could be because the python script had turned on output buffering, but I ran small test now with <code>python -u</code>, and it still does not work.. strange. I will have to look closer into this issue"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567586664, "post_id": 57777419, "comment_id": 102002887, "body": "Thanks a lot @Hakon. But I don&#39;t wish to give timeout inside exec command."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567587373, "post_id": 57777419, "comment_id": 102003277, "body": "You are welcome. See my updated answer for an approach"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567609942, "post_id": 57777419, "comment_id": 102015852, "body": "Yep that is useful. So without getting the $str its hard to assume whether the remote script executed or not right."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567610521, "post_id": 57777419, "comment_id": 102016180, "body": "Yes, but it <i>should</i> not be hard. I think it is a bug. The timeout parameter to <code>exec()</code> should work similarly to <code>waitfor()</code>. I will see if I can find out more.."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1567665567, "post_id": 57777419, "comment_id": 102031745, "body": "I found a better workaround, see my updated answer."}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1568043435, "post_id": 57777419, "comment_id": 102140549, "body": "Thank you Hakon. But if you print <code>$result</code> its giving a value 1 if you found the string. Instead of that can I print whatever value its been returned from remote script?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1568049178, "post_id": 57777419, "comment_id": 102143090, "body": "Hi! The output should be available by calling <code>$ssh-&gt;before()</code>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1567665532, "last_edit_date": 1567665532, "creation_date": 1567537417, "answer_id": 57777419, "question_id": 57776352, "link": "https://stackoverflow.com/questions/57776352/remote-script-execution-using-netsshexpect-in-perl/57777419#57777419", "title": "Remote script execution using Net::SSH::Expect in perl", "body": "<p>Since the command handed to <code>$ssh-&gt;exec(\"command\")</code> is run by the shell on the server, you can run the Python command in the background like you would do for a normal shell command, by including an &amp; (an ampersand) at the end of the command:</p>\n\n<pre><code>$ssh-&gt;exec(\"python test.py &amp;\");\n</code></pre>\n\n<p>This will cause <code>exec()</code> to return immediately, while the python command is running as a background process on the server.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>It seems like <code>$ssh-&gt;exec($cmd, $timeout)</code> is not able to tell exactly when the <code>$cmd</code> finished. I wonder if this is a bug? It always waits <code>$timeout</code> seconds, even if the command finishes before that. A workaround is use <code>$ssh-&gt;send()</code> combined with <code>$ssh-&gt;waitfor()</code> like this:</p>\n\n<pre><code>$str = '__DONE__';\n$ssh-&gt;send(\"python test.py; echo $str\");\nmy $result = $ssh-&gt;waitfor($str, undef);  #&lt;-- undef means wait for ever or \n                                          # until $str is matched.\n</code></pre>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572953682, "creation_date": 1567531891, "last_edit_date": 1572953682, "question_id": 57776352, "link": "https://stackoverflow.com/questions/57776352/remote-script-execution-using-netsshexpect-in-perl", "title": "Remote script execution using Net::SSH::Expect in perl", "body": "<p>I am trying to execute remote script using following command by connecting to one of the server using <code>Net::SSH::Expect</code> perl module.</p>\n\n<pre><code>$ssh-&gt;exec(\"python test.py\");\n</code></pre>\n\n<p>Script is shown below:</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse Net::SSH::Expect;\n\nmy $ssh = Net::SSH::Expect-&gt;new (\n    host =&gt; 'hostip', #deb-2-scripting ip\n    user =&gt; 'user',\n    password =&gt; 'password',\n    raw_pty =&gt; 1\n);\n\n..\n..\n$result = $ssh-&gt;exec(\"python test.py\");\n..\n..\n$ssh-&gt;close();\n</code></pre>\n\n<p>Actually this remote script <code>(test.py)</code> is taking longer than expected to execute (Because its having so many checks inside).</p>\n\n<ol>\n<li>Is there any way that I can just fire this script <code>(test.py)</code> and continue with my perl script execution (I dont want to wait till test.py execution completion). \nOR</li>\n<li>How can I wait till the test.py execution completion without giving timeout.\nSince I could see by giving <code>$ssh-&gt;exec(\"python test.py\", 10);</code> this waits for 10 seconds so that <code>test.py</code> execution gets succeeded.</li>\n</ol>\n"}, {"tags": ["excel", "perl", "datetime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1567522249, "post_id": 57774128, "comment_id": 101983433, "body": "This might very well be a little bit off-topic. I&#39;m not really sure how to rephrase it into less of a module recommendation question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 0, "creation_date": 1567526326, "post_id": 57774128, "comment_id": 101985548, "body": "@martin thanks for that edit! What a blunder. Fancy coming to the <a href=\"http://act.yapc.eu/lpw2019/\" rel=\"nofollow noreferrer\">London Perl Workshop</a> in October for a pint? :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567527489, "post_id": 57774128, "comment_id": 101986061, "body": "The way I see it, the question boils down to: What are the differences between the the formats returned by <code>$ocale-&gt;date_format_short</code> and those used by Excel (Windows?). If there are more differences, then it might be worth writing a module. If you identified the only difference, then handling like you are is fine. However, a quick look for the former didn&#39;t lead to anything."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1567527580, "post_id": 57774128, "comment_id": 101986088, "body": "Tip: <code>(?:^|[^y])\\K</code> might be faster than <code>(?&lt;!y)</code>. But given the shortness of the strings and the lack of /g, I probably shouldn&#39;t have mentioned it :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567532160, "post_id": 57774128, "comment_id": 101987821, "body": "@ikegami I have considered writing a module for this, but as always, checking first is probably a good idea. I&#39;m also not sure what form that module would have. // Windows, most likely. I am talking about the XLS format (although my screenshot is Libre Office on Ubuntu, that&#39;s all I have), which is what the product I am working on delivers. Most users for that file would be on Windows."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567532301, "post_id": 57774128, "comment_id": 101987874, "body": "By &quot;used by Excel (Windows?)&quot;, I meant &quot;used by Excel (which probably simply uses what Windows uses)&quot;"}, {"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 1, "creation_date": 1567594511, "post_id": 57774128, "comment_id": 102007141, "body": "@simbabque - will try to come along.  A friend of mine used to teach at David Game long ago..."}], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1567523897, "creation_date": 1567522200, "last_edit_date": 1567523897, "question_id": 57774128, "link": "https://stackoverflow.com/questions/57774128/how-do-i-write-a-locale-aware-datetime-sensibly-into-spreadsheetwriteexcel", "title": "How do I write a locale-aware DateTime sensibly into Spreadsheet::WriteExcel?", "body": "<p>I have got a <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> object that is in a specific locale (with a <a href=\"https://metacpan.org/pod/DateTime::Locale\" rel=\"nofollow noreferrer\">DateTime::Locale</a> object attached to it). I want to write a date string to an XLS file using <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel\" rel=\"nofollow noreferrer\">Spreadsheet::WriteExcel</a>, but I want the output that's visible to user of the Excel file to be of the same locale as the one attached to my DateTime object.</p>\n\n<p>There is some <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel#DATES-AND-TIME-IN-EXCEL\" rel=\"nofollow noreferrer\">documentation on this matter within Spreadsheet::WriteExcel</a>. It's possible to set formats using a combination of a string, <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel#add_format(%25properties)\" rel=\"nofollow noreferrer\"><code>$wb-&gt;add_format()</code></a> and <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel#write_date_time($row,-$col,-$date_string,-$format)\" rel=\"nofollow noreferrer\"><code>$ws-&gt;write_date_time()</code></a>.</p>\n\n<p>I can get locale information from DateTime via DateTime::Locale by looking at the <a href=\"https://metacpan.org/pod/DateTime#CLDR-Patterns\" rel=\"nofollow noreferrer\">CLDR patterns</a>. There are also the named formats, which are easier to use. Something like <code>$locale-&gt;date_format_short</code> is actually quite nice.</p>\n\n<pre><code>use DateTime::Locale;\n\nsay DateTime::Locale-&gt;load('en_GB')-&gt;date_format_short; # dd/MM/y\nsay DateTime::Locale-&gt;load('en_US')-&gt;date_format_short; # M/d/yy\n</code></pre>\n\n<p>Now the problem with this is, that Excel does not know what a single <code>y</code> means. So my workaround has been to just replace a single <code>y</code> with <code>yy</code>, as that seems to roughly be the same.</p>\n\n<p>Excel also doesn't like upper case letters in the format. I have no idea how it distinguishes between minutes and months, but it works.</p>\n\n<p>This example seems to work, but I am sure it's not perfect.</p>\n\n<pre><code>use strict; \nuse warnings;\nuse Spreadsheet::WriteExcel;\nuse DateTime;\nuse DateTime::Locale;\n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new(\"date_time.xls\");\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n# Write the column headers\n$worksheet-&gt;write('A1', 'Formatted date');\n$worksheet-&gt;write('B1', 'Format');\n$worksheet-&gt;write('C1', 'Locale');\n\nmy $row = 0;\nfor my $locale (qw/en_GB en_US de_DE ko_KR/) {\n    $row++;\n    my $format_string =\n      lc(DateTime::Locale-&gt;load($locale)-&gt;date_format_short)\n      =~ s{\n           (?&lt;!y)   #  2. not preceded by a y\n           y        # 1. a single y\n           (?!y)    #   3. not followed by a y\n        }{yy}xr;    #    4. replaced with two y\n    my $format = $workbook-&gt;add_format(num_format =&gt; $format_string);\n\n    $worksheet-&gt;write_date_time($row, 0, DateTime-&gt;now-&gt;datetime, $format);\n    $worksheet-&gt;write($row, 1, $format_string);\n    $worksheet-&gt;write($row, 2, $locale);\n}\n</code></pre>\n\n<p>This produces the following Excel file.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JXwxi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JXwxi.png\" alt=\"Screenshot of Excel file with 4 different formats\"></a></p>\n\n<p>They all work, but the code is smelly. Is there something I've overlooked? Maybe someone has written a more correct converter for these format strings that I've not seen yet.</p>\n\n<p>Please note that <a href=\"https://metacpan.org/pod/DateTime::Format::Excel\" rel=\"nofollow noreferrer\">DateTime::Format::Excel</a> is not helpful as it only works the other way around, turning Excel dates into DateTime objects.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1567517717, "post_id": 57772833, "comment_id": 101980774, "body": "Stupid of me, Thanks!"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 3, "last_activity_date": 1567517750, "last_edit_date": 1567517750, "creation_date": 1567517637, "answer_id": 57772833, "question_id": 57772671, "link": "https://stackoverflow.com/questions/57772671/perl-argument-missing/57772833#57772833", "title": "Perl argument missing", "body": "<p>Using <code>::</code> when invoking the method call does not pass in the class as a parameter. Essentially, your first parameter in <code>new()</code> is the filename, which is being put into the <code>$class</code> variable.</p>\n\n<p>Change:</p>\n\n<pre><code>StepReader::new('assets/glasses.STEP');\n</code></pre>\n\n<p>...to:</p>\n\n<pre><code>StepReader-&gt;new('assets/glasses.STEP');\n#         ^^\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 57772833, "answer_count": 1, "score": 3, "last_activity_date": 1567517750, "creation_date": 1567517024, "question_id": 57772671, "link": "https://stackoverflow.com/questions/57772671/perl-argument-missing", "title": "Perl argument missing", "body": "<p>I have a method called <code>new</code>. When calling new I'm passing an argument, but when I run the application I get the error that there is no argument or the argument is empty. </p>\n\n<p><strong>StepReader.pm</strong></p>\n\n<pre><code>package StepReader;\n\nuse strict;\nuse warnings;\n\nsub new {   \n    # Variable for file path\n    my $class = shift;\n    my ($filename) = @_;\n    if (!defined($filename) or length($filename) == 0) { die 'file path argument is required!'} # check if argument is empty or not!\n    # Open my file\n    open(my $fh, '&lt;:encoding(UTF-8)', $filename)\n        or die \"Could not open file '$filename' $!\";\n\n    # Print the file!\n    while (my $row = &lt;$fh&gt;) {\n        chomp $row;\n        print \"$row\\n\";\n    }\n\n    return bless {}, $class;\n}\n\n1;\n</code></pre>\n\n<p><strong>example.pm</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse lib 'src/';\nuse StepReader;\n\nStepReader::new('assets/glasses.STEP');\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>file path argument is required! at src/StepReader.pm line 10.\n</code></pre>\n\n<p><em>or</em></p>\n\n<pre><code>Use of uninitialized value $filename in print at src/StepReader.pm line 10.\n</code></pre>\n\n<p>I hope someone is able to help me. Thanks in advance!</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 7, "last_activity_date": 1567512614, "last_edit_date": 1567512614, "creation_date": 1567512240, "answer_id": 57771406, "question_id": 57771227, "link": "https://stackoverflow.com/questions/57771227/perl-cant-locate-object-method/57771406#57771406", "title": "Perl Can&#39;t locate object method", "body": "<p>The immediate problem is that there is no class called <code>stepReader</code> in your code, only <code>src::stepReader</code>:</p>\n\n<blockquote>\n<pre><code>package src::stepReader;\n</code></pre>\n</blockquote>\n\n<p>That is, the function is called <code>src::stepReader::load</code>, not <code>stepReader::load</code>. Change the package declaration to:</p>\n\n<pre><code>package stepReader;\n</code></pre>\n\n<p>Also, module names that start with lowercase letters are informally reserved for pragmata. For normal modules the convention is to use an uppercase letter:</p>\n\n<pre><code>package StepReader;\n</code></pre>\n\n<p>(and rename the file <code>StepReader.pm</code> to match).</p>\n\n<hr>\n\n<p>The parameter unpacking is broken, too:</p>\n\n<blockquote>\n<pre><code>    # Variable for file path\n    my $filename = @_;\n</code></pre>\n</blockquote>\n\n<p>This puts the <code>@_</code> array in scalar context, giving the number of elements. You want list assignment instead (with parentheses on the left-hand side), and method calls pass the invocant as an implicit first argument:</p>\n\n<pre><code>    my ($class, $filename) = @_;\n\n    ...\n    return bless {}, $class;\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>    my $class = shift;\n    my ($filename) = @_;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    my $class = shift;\n    my $filename = shift;\n</code></pre>\n\n<hr>\n\n<p>You should always start your files with <code>use strict; use warnings;</code> or equivalent. It's currently missing from <code>example.pm</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse lib 'src';\nuse StepReader;\n\n# This line is not needed, but if it were:\n# our @ISA = ('StepReader');\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 57771406, "answer_count": 1, "score": 4, "last_activity_date": 1567512614, "creation_date": 1567511580, "question_id": 57771227, "link": "https://stackoverflow.com/questions/57771227/perl-cant-locate-object-method", "title": "Perl Can&#39;t locate object method", "body": "<p>This is my first time working with perl (v5.28.1). I'm getting the error:  </p>\n\n<pre><code>'Can't locate object method \"load\" via stepReader (perhaps you forgot to load 'stepReader')'. \n</code></pre>\n\n<p>When I print something in the file it works, but somehow my method can't be found.</p>\n\n<p>I have <code>stepReader.pm</code> in a subdirectory called <code>src</code></p>\n\n<p>**</p>\n\n<p><strong>example.pm</strong></p>\n\n<pre><code>use lib 'src/';\nuse stepReader;\n\n@ISA = ('stepReader');\n\nmy $class = stepReader-&gt;load('assets/glasses.STEP');\n</code></pre>\n\n<p><strong>stepReader.pm</strong></p>\n\n<pre><code>package src::stepReader;\n\nuse strict;\nuse warnings;\n\nsub load {  \n    # Variable for file path\n    my $filename = @_;\n    # Open my file\n    open(my $fh, '&lt;:encoding(UTF-8)', $filename)\n        or die \"Could not open file '$filename' $!\";\n\n    # Print the file!\n    while (my $row = &lt;$fh&gt;) {\n        chomp $row;\n        print \"$row\\n\";\n    }\n\n    return bless {}, shift;\n}\n\nprint \"test if this works!\";\n\n1;\n</code></pre>\n\n<p><em>Output:</em></p>\n\n<pre><code>Can't locate object method \"load\" via package \"stepReader\" (perhaps you forgot to load \"stepReader\"?) at example.pm line 6.\ntest if this works!\n</code></pre>\n\n<p>I suspect this is something easy, but I hope someone can help me. Thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1567512443, "post_id": 57770869, "comment_id": 101977821, "body": "This <code>qr</code> expression is not assigned to anything: <code>qr&#39;root\\&#39;s New password:\\s*&#39;;</code>. So it seems like useless use of <code>qr</code> in a void context. Please show more of your code."}, {"owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567579020, "post_id": 57770869, "comment_id": 101999292, "body": "I have added the code"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1567579255, "post_id": 57770869, "comment_id": 101999384, "body": "I would strongly recommend against using <code>Switch</code>. It&#39;s a source filter."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1567579361, "post_id": 57770869, "comment_id": 101999419, "body": "You have indeed random <code>qr</code> expressions just sitting around in your program. It&#39;s like writing <code>&quot;hello&quot;; &quot;how are you doing today?&quot;;</code>. It&#39;s not doing anything."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1567608304, "post_id": 57770869, "comment_id": 102014921, "body": "You have an anonymous sub with <code>qr&#47;&#47;</code> expressions that create Regexp objects, but in void context, so they&#39;re useless. <code>qr&#39;root\\&#39;s New password:\\s*&#39;;</code> doesn&#39;t do anything, the regexp object isn&#39;t handed off to anything.  This happens again a few lines below."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 12034889, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/edf1fffeaae65d0b97531b61872d34d3?s=128&d=identicon&r=PG", "display_name": "rooteritschka", "link": "https://stackoverflow.com/users/12034889/rooteritschka"}, "is_accepted": true, "score": 0, "last_activity_date": 1567868263, "creation_date": 1567868263, "answer_id": 57834826, "question_id": 57770869, "link": "https://stackoverflow.com/questions/57770869/my-code-to-change-the-password-from-remote-server-is-not-working/57834826#57834826", "title": "My code to change the password from remote server is not working", "body": "<p>There are individual solutions for different systems. So some systems got from their god the must have highlevel restrictions. So the regular says, that you cant login as root directly. To step up the long way to the stage you can use sudo or su. I didnt see that mind in your lines.      </p>\n\n<pre><code># The simpliest way is to use what you have!\nsub passwd \n{  \n   my $user = @_[0];\n   my $password = @_[1];\n   #\n   # as root \n   my $execline = qq~passwd $user:$password~;\n   #\n   # as root with second password\n   my $execline = qq~passwd $user:$password\\n$password~;\n   #\n   # for microsoft certified ubuntu noobs, kidding mint's\n   my $execline = qq~sudo $password &amp;&amp; passwd $user:$password~;\n   #\n   # for apple greyed, debian nerds, solaris freaks \n   my $execline = qq~su $password &amp;&amp; passwd $user:$password~;\n   #\n   my $return = system(\"$execline\");\n}\n\nprint &amp;passwd(\"root\",\"the magical word\");\n#\n# elseif read this.url([to get the higher experience][1]);\n[1]: https://stackoverflow.com/questions/714915/using-the-passwd-command-from-within-a-shell-script\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57834826, "answer_count": 1, "score": -1, "last_activity_date": 1567868263, "creation_date": 1567510428, "last_edit_date": 1567578998, "question_id": 57770869, "link": "https://stackoverflow.com/questions/57770869/my-code-to-change-the-password-from-remote-server-is-not-working", "title": "My code to change the password from remote server is not working", "body": "<p>I was using this in the perl script, where it is login to a couple of servers and trying to change the password for the servers through a remote host. But the problem is that the password is not getting changed on both the servers as well as i am not finding a way to check if the new passwords are passed to the servers using expect. i am posting that part of the code where it is checking for the prompt and trying to change the password.</p>\n\n<pre><code>     #!/usr/bin/perl\npackage Session;\nuse strict;\nuse warnings;\nuse Expect;\nuse IO::Pty;\nuse Data::Dumper;\nuse Time::HiRes qw(usleep);\nuse Switch;\nuse YAML;\nuse feature 'say';\n\nmy $host1 = $ARGV[0];\nmy $host2 = $ARGV[1];\nmy $host1_adapter_name = $ARGV[2];\nmy $host2_adapter_name = $ARGV[3];\n\nmy $exp = Expect-&gt;new;\nmy ($selfObj) = @_;\nmy $str = \"{$host1}\\{root} # \";\nmy $cmdStr; my $result; my $dev_id; \nmy $timeout = 10;\nmy $min = 192;\nmy $range = 32;\n\n\nmy $host1_dev_id = _adapter($host1_adapter_name);\nmy $host2_dev_id = _adapter($host2_adapter_name);\nmy @hosts = (\"$host1\", \"$host2\");\nprint (\"host2 name is=$host2------\");\nforeach my $n (@hosts)\n{\n    print (\"value of n is $n\\n\");\n    if ( $n eq $host1 )\n    {\n        _login($n,$host1_dev_id);\n    }\n        if ( $n eq $host2)\n        {\n            print (\"inside 2nd if-----\\n\");\n                _login($n,$host2_dev_id);\n        }\n\n}  \n\nsub _login\n{\n    my ($host,$host_dev_id) = @_;\n    my $exit = 1;\n    $exp-&gt;raw_pty(1);\n    $exp = Expect-&gt;spawn(\"telnet $host\") or die \"unable to connect , Please check the connection &amp; retry again: $!\\n\";\n\n    if (!defined($exp))\n    {\n        print \"Please check the connection &amp; retry again\\n\";\n            return -1;\n    }\n\n    `sleep 2 `;\n\n    $exp-&gt;expect($timeout,\n    [\n        qr'[lL]ogin:[\\s]?[a]?[s]?[\\s]?$',\n            sub\n            {\n            $exp-&gt;send(\"root\\r\");\n            `sleep 3 `;\n            exp_continue;\n        }\n        ],\n        [\n            qr'[pP]assword:[\\s]?$',\n            sub\n            {\n            $exp-&gt;send(\"That11NeverWork!\\r\");\n            exp_continue;\n            }\n        ],\n\n        [\n            qr '[#&gt;:][\\s]?$',\n            sub {\n\n            $cmdStr = \"passwd\\r\";\n            $result =_run_cmd($cmdStr);\n\n            qr'root\\'s New password:\\s*'; \n            $exp-&gt;send(\"raym0nd24\");\n\n            qr'Enter the new password again:\\s*';\n            $exp-&gt;send(\"raym0nd24\");\n           # $exp-&gt;send('passwd:\\s*',5);\n\n            $exit = 0;\n                exp_continue;\n\n    }\n],\n[\n        eof =&gt;\n        sub\n        {\n            print(\"FileName : Session.pm , ERROR: premature EOF in command execution.\\n\");\n        }\n],\n       '-re', qr'[#$&gt;:]\\s?$', # wait for shell prompt, then exit expect\n);\n}\n\n\n\n#############################################################\n#############################################################################\nsub _adapter\n{\n        my ($adapter_name) = @_;\n        print \"Adapter name: $adapter_name\\n\";\n        chomp($adapter_name);\n        switch($adapter_name){\n                case \"AUSTIN\"             {$dev_id=\"e414571614102004\"}\n                case \"CX5\"                {$dev_id=\"b315191014103506\"}\n                case \"CX4\"                {$dev_id=\"b31513101410f704\"}\n                case \"CX4_EG10\"           {$dev_id=\"b315151014101f06\"}\n                case \"CX4_EG25\"           {$dev_id=\"b315151014101e06\"}\n                case \"CX3\"                {$dev_id=\"RoCE\"}\n                case \"CX2\"                {$dev_id=\"b315506714106104\"}\n                case \"CX3_PRO\"              {$dev_id=\"RoCE\"}\n                case \"CX3_PRO1\"            {$dev_id=\"b31507101410e704\"}\n                case \"HOUSTON_LR\"         {$dev_id=\"df1020e214104004\"}\n                case \"HOUSTON_SR\"         {$dev_id=\"df1020e214100f04\"}\n                case \"HOUSTON_Cu\"         {$dev_id=\"df1020e214103d04\"}\n                case \"SHINER_S\"           {$dev_id=\"e4148a1614109304\"}\n                case \"SHINER_T\"           {$dev_id=\"e4148e1614109204\"}\n                case \"SLATE_SR\"           {$dev_id=\"df1020e21410e304\"}\n                case \"SLATE_CU\"           {$dev_id=\"df1020e21410e404\"}\n                case \"EVERGLADES\"         {$dev_id=\"b315151014101e06\"}\n                else              { print \"Adapter not in list\\n\"}\n        }\n        return $dev_id;\n}\n\n#######################################################################################\n##########################################################\nsub _run_cmd\n{\n    my $output; my $output1;\n    my ($cmdStr) = @_;\n    $exp-&gt;send($cmdStr .\"\\r\");\n    $exp-&gt;expect(21, '-re', $str);\n    $output = $exp-&gt;exp_before();\n    $exp-&gt;clear_accum();\n        my @PdAt_val = split(\"\\r?\\n\", $output);\n        foreach my $line1 (@PdAt_val)\n        {\n                chomp($line1);\n                if ( $line1 =~ /(\\(\\d+\\))(\\s*root\\s*\\@\\s*)/)\n                {\n                        if ( $1 =~ /\\((\\d+)\\)/)\n                        {\n                                if ($1 != 0)\n                                {\n                                        print(\"*************** Command $cmdStr didn't ran sucessfully ***************\\n\");\n                                        exit;\n                                }\n                        }\n                }\n       }\n\n    return $output;\n}\n\n\n\n######################################################################\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 3, "creation_date": 1567510387, "post_id": 57770737, "comment_id": 101976736, "body": "The problem is that you need to escape the backslashes once for Perl, once for the shell and once for regex. But the solution is to not use an external command (<code>grep</code>) to do something Perl is really good at."}, {"owner": {"reputation": 183, "user_id": 1190069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6fbc374057ef3b4dc6f80f02442680?s=128&d=identicon&r=PG", "display_name": "mimi.vx", "link": "https://stackoverflow.com/users/1190069/mimi-vx"}, "edited": false, "score": 4, "creation_date": 1567510447, "post_id": 57770737, "comment_id": 101976776, "body": "why call shell command grep? perl is great in work with text files and regexpes ... and this can help you: <a href=\"https://perlmaven.com/how-to-grep-a-file-using-perl\" rel=\"nofollow noreferrer\">perlmaven.com/how-to-grep-a-file-using-perl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1567510725, "creation_date": 1567510725, "answer_id": 57770953, "question_id": 57770737, "link": "https://stackoverflow.com/questions/57770737/how-to-grep-square-brackets-in-perl/57770953#57770953", "title": "How to grep square brackets in perl", "body": "<p>Your problem is that you need to escape the <code>[</code> and <code>]</code> twice, as <code>[ ... ]</code> has a special meaning in regexes (it defines a character class).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @output = `grep \"\\\\[0\\\\]\" log `;\n\nprint for @output;\n</code></pre>\n\n<p>But you really don't need to use the external <code>grep</code> command. Perl is great at text processing.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n  print if /\\[0\\]/;\n}\n</code></pre>\n\n<p>My solution reads from any file whose name is given as an argument to the program (or from <code>STDIN</code>).</p>\n"}], "owner": {"reputation": 53, "user_id": 9648572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "krishna reddy", "link": "https://stackoverflow.com/users/9648572/krishna-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 57770953, "answer_count": 1, "score": 4, "last_activity_date": 1567510725, "creation_date": 1567509953, "last_edit_date": 1567510282, "question_id": 57770737, "link": "https://stackoverflow.com/questions/57770737/how-to-grep-square-brackets-in-perl", "title": "How to grep square brackets in perl", "body": "<p>I am trying to grep [0](including square brackets) in a file using perl, I tried following code</p>\n\n<pre><code>my @output = `grep \\\"\\[0\\]\\\" log `;\n</code></pre>\n\n<p>But instead of returning [0], it is giving output where it matches 0</p>\n"}, {"tags": ["csv", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 2, "creation_date": 1567489484, "post_id": 57765593, "comment_id": 101966657, "body": "To get rid of <code>^M</code> you can do <code>dos2unix sample.txt</code>"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 7, "creation_date": 1567489609, "post_id": 57765593, "comment_id": 101966700, "body": "This is CSV format data, you probably DON&#39;T want to get rid of the quotes. This feels like an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>.  Tell us what you&#39;re <i>REALLY</i> trying to accomplish, i.e. why you think you need to remove the quotes."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1567490172, "post_id": 57765593, "comment_id": 101966857, "body": "<code>cat yourfile | dos2unix | tr -d &#39;&quot;&#39;</code>"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567490980, "post_id": 57765593, "comment_id": 101967123, "body": "David tr with removing double quotes it removes all quotes ?"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1567491027, "post_id": 57765593, "comment_id": 101967138, "body": "@david : I want to achieve the output what is shown above. I want to remove quotes where the delimiter value is not present in the data"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1567491200, "post_id": 57765593, "comment_id": 101967210, "body": "I got you, sorry, my quick look looked like you wanted to remove all double-quotes."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1567522976, "post_id": 57765593, "comment_id": 101983852, "body": "Are you SURE there&#39;s <code>^M</code>s (<code>\\r</code>s) inside the quoted fields? If this were a file exported from Excel, for example, then there&#39;d be <code>\\r\\n</code> at the end of each record but inside the quoted fields it&#39;d only be <code>\\n</code> for the newline, not <code>\\r\\n</code>. In any case, to handle it with awk see <a href=\"https://stackoverflow.com/questions/45420535/whats-the-most-robust-way-to-efficiently-parse-csv-using-awk\">whats-the-most-robust-way-to-efficiently-parse-csv-using-awk</a>&zwnj;&#8203;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577476335, "post_id": 57765593, "comment_id": 105183328, "body": "A remider, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 1, "creation_date": 1567491606, "post_id": 57765722, "comment_id": 101967354, "body": "Thanks for your detailed explanation. Can you explain me the last pattern which you have applied. awk -v FPAT=&quot;([^,]+)|(\\&quot;[^\\&quot;]+\\&quot;)&quot; -v OFS=, &#39;{for (i=1;i&lt;=NF;i++) if($i!~&quot;,&quot;) $i=substr($i,2,length($i)-2)}1&#39; sample.txt"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567492114, "post_id": 57765722, "comment_id": 101967540, "body": "@user1485267 added some more info"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567495269, "post_id": 57765722, "comment_id": 101968907, "body": "Thanks for the info. But with third function it doesn&#39;t work i got same ouptut what i achived in second step"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567495718, "post_id": 57765722, "comment_id": 101969132, "body": "Currently awk version which i am trying is GNU Awk 3.1.7"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567531953, "post_id": 57765722, "comment_id": 101987747, "body": "Jotne - the OP has a newline within a quoted field, you can&#39;t handle that with just FPAT. @user1485267 that version of gawk is 10 years out of date (it was released in 2009), we&#39;re now on gawk 5.0.1 - you should update your version as you&#39;re missing a TON of great functionality (including FPAT) and some bug fixes, see <a href=\"https://www.gnu.org/software/gawk/manual/gawk.html#Feature-History\" rel=\"nofollow noreferrer\">gnu.org/software/gawk/manual/gawk.html#Feature-History</a> for the list of features added per release and <a href=\"https://ftp.gnu.org/gnu/gawk/\" rel=\"nofollow noreferrer\">ftp.gnu.org/gnu/gawk</a> for the release dates."}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1567538601, "post_id": 57765722, "comment_id": 101990218, "body": "@EdMorton That is why I added two awk :)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1567539226, "post_id": 57765722, "comment_id": 101990424, "body": "Ah, I see. I didn&#39;t get that the first script was trying to combine lines. Got it, thx."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567570465, "post_id": 57765722, "comment_id": 101996942, "body": "@Jotne : Sorry i cannot update the version. I have to try with the current version itself whatever the possibilities are there"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567571603, "post_id": 57765722, "comment_id": 101997150, "body": "@user1485267 sounds that you are on an outdated system and should upgrade all."}], "tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 2, "last_activity_date": 1567507821, "last_edit_date": 1567507821, "creation_date": 1567489899, "answer_id": 57765722, "question_id": 57765593, "link": "https://stackoverflow.com/questions/57765593/remove-double-quotes-if-delimiter-value-is-not-present-in-data/57765722#57765722", "title": "Remove double quotes if delimiter value is not present in data", "body": "<p><code>FPAT</code> is the way to go using <code>gnu awk</code>, it handles comma separated files. </p>\n\n<ol>\n<li>remove ^m</li>\n<li>clean lines</li>\n<li>remove qutes</li>\n</ol>\n\n<p>. </p>\n\n<pre><code>dos2unix sample.txt  \n\nawk '{printf \"%s\"(/,$/?\"\":\"\\n\"),$0}' sample.txt &gt; tmp &amp;&amp; mv tmp sample.txt\n\"name\",\"address\",\"age\"\n\"ram\",\"abcd,def\",\"10\"\n\"abhi\",\"xyz\",\"25\"\n\"ad\",\"ram,John\",\"35\"\n\n\nawk -v FPAT=\"([^,]+)|(\\\"[^\\\"]+\\\")\" -v OFS=, '{for (i=1;i&lt;=NF;i++) if($i!~\",\") $i=substr($i,2,length($i)-2)}1' sample.txt\nname,address,age\nram,\"abcd,def\",10\nabhi,xyz,25\nad,\"ram,John\",35\n</code></pre>\n\n<p>All in one go:</p>\n\n<pre><code>dos2unix sample.txt &amp;&amp; awk '{printf \"%s\"(/,$/?\"\":\"\\n\"),$0}' sample.txt | awk -v FPAT=\"([^,]+)|(\\\"[^\\\"]+\\\")\" -v OFS=, '{for (i=1;i&lt;=NF;i++) if($i!~\",\") $i=substr($i,2,length($i)-2)}1'\n</code></pre>\n\n<p>Normally you set Filed Separator <code>FS or F</code> to tell how filed are separated.  <code>FPAT=\"([^,]+)|(\\\"[^\\\"]+\\\")\"</code>  FPAT tells how the filed looks like using a regex.  This regex is complicated and often used with CSV.  </p>\n\n<ul>\n<li><code>(i=1;i&lt;=NF;i++)</code> loop through on by one field on the line.</li>\n<li><code>if($i!~\",\")</code> if it does not contain comma, then </li>\n<li><code>$i=substr($i,2,length($i)-2)</code> remove first and last character, the <code>\"</code></li>\n</ul>\n\n<p>If a field for some reason do not contain <code>\"</code>, this is more robust:</p>\n\n<pre><code>awk -v FPAT=\"([^,]+)|(\\\"[^\\\"]+\\\")\" -v OFS=, '{for (i=1;i&lt;=NF;i++) if($i!~\",\") {n=split($i,a,\"\\\"\");$i=(n&gt;1?a[2]:$i)}}1' file\n</code></pre>\n\n<p>It will not do any thing to a field not contains double quote.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1604015181, "last_edit_date": 1604015181, "creation_date": 1567493789, "answer_id": 57766450, "question_id": 57765593, "link": "https://stackoverflow.com/questions/57765593/remove-double-quotes-if-delimiter-value-is-not-present-in-data/57766450#57766450", "title": "Remove double quotes if delimiter value is not present in data", "body": "<p>Use a library to parse CSV files.  Apart from always wanting to use a library for that here you also have very specific reasons for it, with embedded newlines and delimiters.</p>\n<p>In Perl a good library is <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> (which wraps <code>Text::CSV_XS</code> if installed).  A basic example</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Text::CSV;\n\nmy $file = shift or die &quot;Usage: $0 file.csv\\n&quot;;\n\nmy $csv = Text::CSV-&gt;new({ binary =&gt; 1, auto_diag =&gt; 1 }); \n\nopen my $fh, '&lt;', $file  or die &quot;Can't open $file: $!&quot;;\n\nwhile (my $row = $csv-&gt;getline($fh)) { \n    s/\\n+//g for @$row; \n    $csv-&gt;say(\\*STDOUT, $row);\n}\n</code></pre>\n<p>Comments</p>\n<ul>\n<li><p>The <code>binary</code> option in the constructor is what allows newlines embedded in data</p>\n</li>\n<li><p>Once a line is read into the array reference <code>$row</code> I remove newlines in each field with a simplistic regex. By all means please improve this as/if needed</p>\n</li>\n<li><p>The pruning of <code>$row</code> works as follows.  In a <code>foreach</code> loop each element is <em>aliased</em> by the loop variable, so if that gets changed the array changes. I used default where elements are aliased by <code>$_</code>, which the regex changes so <code>$row</code> changes</p>\n</li>\n<li><p>The processed output is printed to <code>STDOUT</code>. Or, open an output file and pass that filehandle to <code>say</code> (or to <code>print</code> in older module versions) so the output goes directly to that file</p>\n</li>\n</ul>\n<p>The above prints, for the sample input provided in the question</p>\n<pre>\nname,address,age\nram,\"abcd,def\",10\nabhi,xyz,25\nad,\"ram,John\",35\n</pre>\n"}, {"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567962593, "post_id": 57766454, "comment_id": 102115367, "body": "Thank you tshino for your time."}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": false, "score": 1, "last_activity_date": 1567493815, "creation_date": 1567493815, "answer_id": 57766454, "question_id": 57765593, "link": "https://stackoverflow.com/questions/57765593/remove-double-quotes-if-delimiter-value-is-not-present-in-data/57766454#57766454", "title": "Remove double quotes if delimiter value is not present in data", "body": "<p>With <code>perl</code>, please try the following:</p>\n\n<pre><code>perl -e '\nwhile (&lt;&gt;) {\n    s/\\r$//;      # remove trailing CR code\n    $str .= $_;\n}\n\nwhile ($str =~ /(\"((\"\")|[^\"])*\"\\n?)|((^|(?&lt;=,))[^,]*((?=,)|\\n))/g) {\n    $_ = $&amp;;\n    if (/,/) {    # the element contains \",\"\n        s/\\n//g;  # then remove newline(s) if any\n    } else {      # otherwise remove surrounding double quotes\n        s/^\"//s; s/\"$//s;\n    }\n    push(@ary, $_);\n\n    if (/\\n$/) {  # newline terminates the element\n        print join(\",\", @ary);\n        @ary = ();\n    }\n}' sample.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>name,address,age\nram,\"abcd,def\",10\nabhi,xyz,25\nad,\"ram,John\",35\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567502450, "post_id": 57768468, "comment_id": 101972471, "body": "Thanks for your solution. If i am not sure how many columns come in future. in that case the solution provided by you it wont be feasible."}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567502583, "post_id": 57768468, "comment_id": 101972541, "body": "@user1485267 I over thought the problem, see amended simplified solution."}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": true, "score": 2, "last_activity_date": 1567503106, "last_edit_date": 1567503106, "creation_date": 1567501715, "answer_id": 57768468, "question_id": 57765593, "link": "https://stackoverflow.com/questions/57765593/remove-double-quotes-if-delimiter-value-is-not-present-in-data/57768468#57768468", "title": "Remove double quotes if delimiter value is not present in data", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed ':a;/[^\"]$/{N;s/\\n//;ba};s/\"\\([^\",]*\\)\"/\\1/g' file\n</code></pre>\n\n<p>The solution is in two parts:</p>\n\n<ol>\n<li>Join broken lines to make whole ones.</li>\n<li>Remove double quotes surrounding fields that do not contain commas.</li>\n</ol>\n\n<p>If the current line does not end with double quotes, append the next line, remove the newline and repeat. Otherwise: remove double quotes surrounding fields that do not contain double quotes or commas.</p>\n\n<p>N.B. Supposes that fields do not contain quoted double quotes. If that is the case, the condition for the first step would need to be amended and double quotes within fields would need to catered for.</p>\n"}], "owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 1, "accepted_answer_id": 57768468, "answer_count": 4, "score": 1, "last_activity_date": 1604015181, "creation_date": 1567488955, "last_edit_date": 1569810451, "question_id": 57765593, "link": "https://stackoverflow.com/questions/57765593/remove-double-quotes-if-delimiter-value-is-not-present-in-data", "title": "Remove double quotes if delimiter value is not present in data", "body": "<p>An input file is given, each line of which contains quotes for each column and carriage return/ new line character.</p>\n\n<ul>\n<li><p>If the line contains new lines it has be appended with in the same\nline which is inside the quotes i.e for example line 1</p></li>\n<li><p>Removing of double quotes for each column if the delimiter(,) is\nnot present.</p></li>\n<li><p>Removing of Carriage Return characters i.e(^M)</p></li>\n</ul>\n\n<p>To exemplify, given the following input file</p>\n\n<pre><code>\"name\",\"address\",\"age\"^M\n\"ram\",\"abcd,^M\ndef\",\"10\"^M\n\"abhi\",\"xyz\",\"25\"^M\n\"ad\",\"ram,John\",\"35\"^M\n</code></pre>\n\n<p>I would like to obtain the following output by means of a sed/perl/awk script/oneliner.</p>\n\n<pre><code>name,address,age\nram,\"abcd,def\",10\nabhi,xyz,25\nad,\"ram,John\",35\n</code></pre>\n\n<p>Solutions which i have tired it so far\nFor appending with previous line</p>\n\n<pre><code>sed '/^[^\"]*\"[^\"]*$/{N;s/\\n//}' sample.txt\n</code></pre>\n\n<p>for replacing control-m characters</p>\n\n<pre><code>perl -pne 's/\\\\r//g' sample.txt\n</code></pre>\n\n<p>But i didn't achieve final output what i required below</p>\n"}, {"tags": ["perl", "docker"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567463320, "post_id": 57763162, "comment_id": 101962193, "body": "Does <code>&#47;perl5lib&#47;My&#47;Module.pm</code> exist? Does the relevant user/group have permissions to read <code>&#47;perl5lib</code>, <code>&#47;perl5lib&#47;My</code> and <code>&#47;perl5lib&#47;My&#47;Module.pm</code>? Are any of <code>&#47;perl5lib</code>, <code>&#47;perl5lib&#47;My</code> or <code>&#47;perl5lib&#47;My&#47;Module.pm</code> symlinks?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1567463676, "post_id": 57763162, "comment_id": 101962257, "body": "What happens if you change <code>-MMy::Module</code> to <code>-e &#39;require &quot;&#47;perl5lib&#47;My&#47;Module.pm&quot;;&#39;</code>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567465088, "post_id": 57763162, "comment_id": 101962466, "body": "Can you show the output of just <code>print &quot;@INC&quot;</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567467597, "post_id": 57763162, "comment_id": 101962824, "body": "@choroba There&#39;s no reason to believe there&#39;s a bug in <code>perl</code>&#39;s handling of <code>-I&#47;perl5lib</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567472985, "post_id": 57763162, "comment_id": 101963663, "body": "@ikegami the mapping from -I to <code>@INC</code> is not straightforward"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567477252, "post_id": 57763162, "comment_id": 101964320, "body": "@ysth, In the sense that it might add more than just the one directory, but even if <code>&#47;perl5lib</code> doesn&#39;t exist or can&#39;t be read, <code>-I&#47;perl5lib</code> will still get added."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1567510370, "post_id": 57763162, "comment_id": 101976731, "body": "I can confirm that <code>&#47;perl5lib</code> is first item in <code>@INC</code> and <code>&#47;data&#47;projects&#47;My-Module</code> has 777 permissions. Now I figured out what was the issue. If I use other name (e.g. <code>&#47;libperl</code> ) then <code>&#47;perl5lib</code> for mounting module sources everything is ok. Very-very-very strange issue."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1567510703, "post_id": 57763162, "comment_id": 101976902, "body": "Ah, my mistake. No problem with usage <code>&#47;perl5lib</code> name as mount point. Problem was that docker-compose already has volume mounted to <code>&#47;perl5lib</code> which points to another location"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567477075, "post_id": 57764169, "comment_id": 101964290, "body": "<code>ls -lR</code> would be more useful than <code>find</code> as it shows file types and permissions"}], "tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": false, "score": 1, "last_activity_date": 1567777007, "last_edit_date": 1567777007, "creation_date": 1567475776, "answer_id": 57764169, "question_id": 57763162, "link": "https://stackoverflow.com/questions/57763162/folder-is-in-inc-but-module-loads-from-other-location/57764169#57764169", "title": "Folder is in $INC but module loads from other location", "body": "<p>With this command (which should be more-or-less equivalent to what you are doing)</p>\n\n<pre><code>docker run perl:5.28 perl -I/xyz -V\n</code></pre>\n\n<p>Regardless <code>/xyz</code> exists or not within the container instance, I can visually confirm that <code>/xyz</code> is the first entry of <code>@INC</code>:</p>\n\n<pre><code>  ...\n  Compiled at Aug 15 2019 02:34:38\n  @INC:\n    /xyz\n    /usr/local/lib/perl5/site_perl/5.28.2/x86_64-linux-gnu\n    /usr/local/lib/perl5/site_perl/5.28.2\n    /usr/local/lib/perl5/vendor_perl/5.28.2/x86_64-linux-gnu\n    /usr/local/lib/perl5/vendor_perl/5.28.2\n    /usr/local/lib/perl5/5.28.2/x86_64-linux-gnu\n    /usr/local/lib/perl5/5.28.2\n</code></pre>\n\n<p>Given by your message that <code>My/Module.pm</code> got required from an alternative place, I'd guess that your <code>/perl5lib</code> is empty, or simply does not contain <code>My/Module.pm</code>  -- or somehow that alternative path comes first then your <code>/perl5lib</code>. Not sure how that would be the case, but I'm trying to enumerate some possibilities.</p>\n\n<p>Anyway, you should be able to inspect the content of <code>/perl5lib</code> by running</p>\n\n<pre><code>docker-compose run -v /data/projects/My-Module:/perl5lib project-container find /perl5lib\n</code></pre>\n\n<p>(I guess <code>find</code> command is available in your container, but if not, try <code>ls -R</code> or something similar...)</p>\n\n<p>Last... in case you are using Docker on macOS -- which I cannot tell from the information you provided -- you need to verify that the <code>/data/projects/My-Module</code> is in the list of \"File Sharing\" preference. Otherwise that folder cannot be mounted.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567777007, "creation_date": 1567462799, "question_id": 57763162, "link": "https://stackoverflow.com/questions/57763162/folder-is-in-inc-but-module-loads-from-other-location", "title": "Folder is in $INC but module loads from other location", "body": "<p>I need to test my project with new module version.\nBut for some reason Perl can not load it.</p>\n\n<pre><code>docker-compose run -v /data/projects/My-Module:/perl5lib project-container perl -I/perl5lib -MMy::Module -e 'print $INC{\"My/Module.pm\"}'\n</code></pre>\n\n<p>It must print</p>\n\n<pre><code>/perl5lib\n</code></pre>\n\n<p>But in fact it prints</p>\n\n<pre><code>/usr/local/share/perl/5.26.1/My/Module.pm\n</code></pre>\n\n<p>Same result with </p>\n\n<pre><code>docker-compose run -e PERL5LIB=/perl5lib -v /data/projects/My-Module:/perl5lib project-container perl -MMy::Module -e 'print $INC{\"My/Module.pm\"}'\n</code></pre>\n\n<p>Please help me to find what could be the issue.</p>\n\n<pre><code>$ perl --version\n\nThis is perl 5, version 26, subversion 1 (v5.26.1) built for x86_64-linux-gnu-thread-multi\n\n$ docker-compose --version\ndocker-compose version 1.24.1, build 4667896\n</code></pre>\n"}, {"tags": ["perl", "perl-tidy"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1567459765, "post_id": 57762668, "comment_id": 101961496, "body": "Tip: Best to leave pragmas (strict, warnings, utf8, open) where they are, or at least first.  These are conventionally all lower-case."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1567463789, "post_id": 57762668, "comment_id": 101962279, "body": "Personally I don&#39;t see the point in sorting <code>use</code> statements alphabetically."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1567491560, "post_id": 57762668, "comment_id": 101967339, "body": "If there&#39;s so many <code>use</code> statements that sorting makes sense then see <a href=\"https://metacpan.org/pod/Import::Into\" rel=\"nofollow noreferrer\">Import::Into</a>"}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 2, "creation_date": 1567492374, "post_id": 57762668, "comment_id": 101967634, "body": "I tend to group the use statement. First core modules, then CPAN modules, finally the modules of the company."}, {"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567507824, "post_id": 57762668, "comment_id": 101975366, "body": "@ikegami, Yes, we are aware of these. We use Mojolicious so this is handled already by <code>use Mojo::Base...</code> which of course will stay first.  @BarneySchmale, this is more or less our current situation.  @zdim, thanks for the hint, but for now I think we do not need it."}], "owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567458821, "creation_date": 1567458405, "last_edit_date": 1567458821, "question_id": 57762668, "link": "https://stackoverflow.com/questions/57762668/how-to-or-should-we-sort-use-ourclass-qwmay-be-some-imports-statements-wi", "title": "How to or should we sort &quot;use Our::Class qw(may_be some_imports);&quot; statements with Perl::Tidy (or not)?", "body": "<p>We would like to sort <code>use</code> statements alphabetically in the beginning of our classes automatically via perltidy or maybe other tool if available. We already use <code>Test::PerlTidy</code> to test if the code is formatted before committing.</p>\n\n<p>I found that Perl::Tidy has the options <a href=\"https://metacpan.org/pod/Perl::Tidy#prefilter\" rel=\"nofollow noreferrer\"><code>prefilter</code></a> and <a href=\"https://metacpan.org/pod/Perl::Tidy#postfilter\" rel=\"nofollow noreferrer\"><code>postfilter</code></a>.\n<code>prefilter</code> looks like the better approach, because I can sort the statements as I wish in any logical for me order, then leave it to perltidy to format it.</p>\n\n<ol>\n<li>Would you recommend sorting use statements? The <code>use</code>d classes do not depend on using one before the other.</li>\n<li>Would you recommend using these Perl::Tidy features?</li>\n<li>Is there a better approach?</li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567448651, "post_id": 57761229, "comment_id": 101958602, "body": "@ysth I voted to close for lack of MCVE."}, {"owner": {"reputation": 31, "user_id": 12011148, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iV8ESqYt6Kk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reBhlyluh1KOF99pwudKsQDAj5wVg/photo.jpg?sz=128", "display_name": "user12011148", "link": "https://stackoverflow.com/users/12011148/user12011148"}, "edited": false, "score": 0, "creation_date": 1567448862, "post_id": 57761229, "comment_id": 101958670, "body": "Hi the result should be abc99_xyz == abc99 not  \t\tabc99_xyz == abc9"}, {"owner": {"reputation": 31, "user_id": 12011148, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iV8ESqYt6Kk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reBhlyluh1KOF99pwudKsQDAj5wVg/photo.jpg?sz=128", "display_name": "user12011148", "link": "https://stackoverflow.com/users/12011148/user12011148"}, "edited": false, "score": 0, "creation_date": 1567448916, "post_id": 57761229, "comment_id": 101958691, "body": "this is my first time here so may be not able to explain properly forgive me for that"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567448960, "post_id": 57761229, "comment_id": 101958706, "body": "@ysth Yeah, but there is no question."}, {"owner": {"reputation": 31, "user_id": 12011148, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iV8ESqYt6Kk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reBhlyluh1KOF99pwudKsQDAj5wVg/photo.jpg?sz=128", "display_name": "user12011148", "link": "https://stackoverflow.com/users/12011148/user12011148"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567449260, "post_id": 57761229, "comment_id": 101958794, "body": "@ikegami,$k =~ /^\\Q$h\\E_/ and $k =~ /^\\Q$h\\E(?:_|\\z)/ both worked.Thanks a lot"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567451523, "post_id": 57761229, "comment_id": 101959467, "body": "@ysth, In an answer, I would have mentioned that too :) +1"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1567451579, "post_id": 57761708, "comment_id": 101959481, "body": "Tip: <code>%patterns</code> can be built from an array using <code>my %patterns = map { $_ =&gt; 1 } @patterns;</code>"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 5, "last_activity_date": 1567451309, "creation_date": 1567451309, "answer_id": 57761708, "question_id": 57761229, "link": "https://stackoverflow.com/questions/57761229/string-comparison-using-operator/57761708#57761708", "title": "string comparison using =~ operator", "body": "<p>Sounds like you need to adjust your match to require the <code>_</code> after the matched string.</p>\n\n<pre><code>my @strings = ( 'abc99_xyz', 'abc9_xxx');\nmy @patterns = ( 'abc99', 'abc9' );\nfor my $string (@strings) {\n    for my $pattern (@patterns) {\n        if ( $string =~ /^\\Q$pattern\\E_/ ) {\n            print \"$string == $pattern\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>In the match, the <code>^</code> says the pattern must match at the beginning of the string, the <code>\\Q</code>/<code>\\E</code> make any special characters in <code>$pattern</code> such as <code>*</code> match literally, and the <code>_</code> makes it require a <code>_</code> in the string immediately after <code>$pattern</code>.</p>\n\n<p>If you have many strings and/or patterns, it would be better to find the part of each string before the _ and use a hash lookup:</p>\n\n<pre><code>my @strings = ( 'abc99_xyz', 'abc9_xxx');\nmy %patterns = ( 'abc99' =&gt; 1, 'abc9' =&gt; 1 );\nfor my $string (@strings) {\n    if ( $string =~ /^([^_]+)/ &amp;&amp; $patterns{$1} ) {\n        print \"$string == $1\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12011148, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iV8ESqYt6Kk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reBhlyluh1KOF99pwudKsQDAj5wVg/photo.jpg?sz=128", "display_name": "user12011148", "link": "https://stackoverflow.com/users/12011148/user12011148"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567451309, "creation_date": 1567447996, "last_edit_date": 1567448879, "question_id": 57761229, "link": "https://stackoverflow.com/questions/57761229/string-comparison-using-operator", "title": "string comparison using =~ operator", "body": "<p>string comparison using =~ operator</p>\n\n<p>I have  two arrays @a containing abc99_xyz ,abc9_xxx  and @b containing abc99 ,abc9 as a string and I want match only abc99_xyz of array @a with abc99 of @b but abc9 is also getting matched with abc99_xyz of @a when I am using ~= operator.</p>\n\n<p>Code is as below:</p>\n\n<pre><code>@a=qw(abc99_xyz abc9_xxx);\n@b=qw(abc99 abc9);\n\nforeach $k(@a)\n        {\n\n        foreach $h(@b)\n        {\n        if($k =~ $h)\n        {\n        print\" $k == $h\\n\";\n        }\n     }\n }\n</code></pre>\n\n<p>only abc99_xyz should match with abc99 and not abc9.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1567434771, "post_id": 57758603, "comment_id": 101953589, "body": "Why do you need the <code>0+</code>, if the file contains the PID or 0?"}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567434914, "post_id": 57758603, "comment_id": 101953650, "body": "I need to have it in the $pid variable anyway from $line. Sure casting to number in Perl doesn&#39;t make sense."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1567438236, "post_id": 57758603, "comment_id": 101955121, "body": "@MiroslavPopov: <i>I need to have it in the <code>$pid</code> variable anyway from <code>$line</code></i> Or you could read it directly into <code>$pid</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1567435666, "post_id": 57758748, "comment_id": 101954006, "body": "+1 for <code>chomp( my $pid = ... )</code>. I didn&#39;t know how to shorten that. First thought <code>my $pid = chomp &lt;$fh&gt;;</code>, but it returns the count of chomps:)))"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1567435373, "last_edit_date": 1567435373, "creation_date": 1567434828, "answer_id": 57758748, "question_id": 57758603, "link": "https://stackoverflow.com/questions/57758603/read-a-single-number-from-a-file-in-perl/57758748#57758748", "title": "Read a single number from a file in Perl", "body": "<p>I like <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> for doing things like this.</p>\n\n<pre><code>use Path::Tiny;\n\nchomp(my $pid = path('pid')-&gt;slurp);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>use Path::Tiny;\n\nmy ($pid) = path('pid')-&gt;lines({ chomp =&gt; 1, count =&gt; 1 });\n</code></pre>\n\n<p>I'm not sure why you want to force the file to be a number. Do you not trust the contents of the file?</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1567435730, "creation_date": 1567435730, "answer_id": 57758952, "question_id": 57758603, "link": "https://stackoverflow.com/questions/57758603/read-a-single-number-from-a-file-in-perl/57758952#57758952", "title": "Read a single number from a file in Perl", "body": "<p>The common way without modules would be:</p>\n\n<pre><code>open my $fh, '&lt;', 'pid' or die $!;\nchomp( my $pid = &lt;$fh&gt; );\n</code></pre>\n\n<p>No need to close the filehandle, it will be closed when it runs out of scope. Checking the return value of open, though, is not optional.</p>\n"}], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57758952, "answer_count": 2, "score": 0, "last_activity_date": 1567435730, "creation_date": 1567434248, "question_id": 57758603, "link": "https://stackoverflow.com/questions/57758603/read-a-single-number-from-a-file-in-perl", "title": "Read a single number from a file in Perl", "body": "<p>How to read a PID number from a file in a better way?</p>\n\n<p>A file named <code>pid</code> contains the current process's PID or a 0;</p>\n\n<p>I want to read it from the file in a variable and I came with the longest possible solution:</p>\n\n<pre><code>open my $fh, '&lt;', 'pid';\nmy $line = &lt;$fh&gt;;\nclose $fh;\n\nchomp $line;\nmy $pid = 0+ $line;\n\nsay $pid;\n</code></pre>\n\n<p>Is there a more elegant solution?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1567426517, "post_id": 57756697, "comment_id": 101949940, "body": "Smartmatch will do it ~~ :-) ... Sorry I was trying to be funny. Smartmatch will do it, but the Perl guys are trying to remove and certainly not encourage its use. Just use a map."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567432768, "post_id": 57756697, "comment_id": 101952715, "body": "<code>grep</code> and <code>any</code> (from List::Util and List::MoreUtils) would be better than <code>map</code>"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "edited": false, "score": 0, "creation_date": 1567427663, "post_id": 57756901, "comment_id": 101950457, "body": "what if $str =&quot;This is a testabc code &quot;; and it matches with test. So how to get that test"}, {"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567428530, "post_id": 57756901, "comment_id": 101950865, "body": "It will match &quot;test&quot; as it is not matching whole words.  To match whole words only use: my @m=grep $str=~/\\b$_\\b/, @val;"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1567427082, "creation_date": 1567427082, "answer_id": 57756901, "question_id": 57756697, "link": "https://stackoverflow.com/questions/57756697/how-to-check-whether-any-of-the-array-values-are-present-in-a-string-and-also-th/57756901#57756901", "title": "How to check whether any of the array values are present in a string and also the matching array value using grep in Perl", "body": "<p>This ought to do it:</p>\n\n<pre><code>my $str=\"This is a test code \";\n#$str.=\"not\";\nmy @val=(\"not\",\"hope\",\"test\",\"beta\");\nmy @m=grep $str=~/$_/, @val;\nprint \"Matched: @m\";\nprint \"First match, if any: $m[0]\";\n</code></pre>\n\n<p>You should also think about if you want case-insensitive matching. Should \"Internet\" also match \"internet\"? And if you want to match whole words only or also parts of words. Should \"smart\" also match \"smartphone\"? Change <code>/$_/</code> into <code>/$_/i</code> to match case-insensitive and into <code>/\\b$_\\b/i</code> to also match whole words only.</p>\n"}], "owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567427633, "creation_date": 1567426100, "last_edit_date": 1567427633, "question_id": 57756697, "link": "https://stackoverflow.com/questions/57756697/how-to-check-whether-any-of-the-array-values-are-present-in-a-string-and-also-th", "title": "How to check whether any of the array values are present in a string and also the matching array value using grep in Perl", "body": "<p>I need to check if any of the array values in @val is matching to the string $str. If so I need to get which array value is matched there.</p>\n\n<p>This is for windows running Perl</p>\n\n<pre><code>$str =\"This is a testabc code \";\n@val=(\"not\",\"hope\",\"test\",\"beta\");\n\n#How to find whether any of the @val elements are present in $str and also which element is matching using grep .\n</code></pre>\n\n<p>I need to get the output as \"test\" is found</p>\n"}, {"tags": ["perl", "slurp"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1567439093, "post_id": 57759035, "comment_id": 101955467, "body": "@melpomene, In reply to the comment to your deleted answer, <code>local</code> doesn&#39;t remove magic. <code>perl -e&#39;local $! = 5; CORE::say $!&#39;</code> You gotta localize the entire glob. <code>perl -e&#39;local *!; $! = 5; CORE::say $!&#39;</code> So yeah, unrelated. Note that <code>local $_</code> is special cased so it does remove magic. <code>perl -e&#39;for $x ($!) { local $x = 5; CORE::say $x }&#39;</code> vs <code>perl -e&#39;for ($!) { local $_ = 5; CORE::say $_ }&#39;</code>"}, {"owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1567439120, "post_id": 57759035, "comment_id": 101955482, "body": "&quot;writing directly to the result of the left-hand side of the assignment&quot;: in this, you mean the left-hand as in &quot;the one on the left of the <code>do {}</code>&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 1, "creation_date": 1567439262, "post_id": 57759035, "comment_id": 101955550, "body": "I only talk about <code>local $&#47; = &lt;&gt;</code>. The rest is irrelevant to the question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1567439399, "post_id": 57759035, "comment_id": 101955584, "body": "In the full statement, <code>do</code> makes a copy of the result, which is then assigned (copied) to the <code>$contents</code>. These particular copies are efficient; they don&#39;t result in a copy of the string buffer. (5.20 introduced a copy-on-write mechanism, so copying scalars containing strings is always efficient. But this was efficient before that because of an optimization that occurred when copying temporary scalars. Ownership of the string buffer would be transferred via pointer assignment rather than duplicating the string buffer.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1567439956, "post_id": 57759035, "comment_id": 101955799, "body": "The copy made by <code>do</code> does involve creating (and then freeing) a new scalar, however, so <code>my $contents; { local $&#47;; $content = &lt;$fh&gt;; }</code> is a bit more efficient. This is the inefficiency that the <code>$x = &lt;&gt;</code> optimization eliminates. (Note that I go for readability and use <code>do</code>. After all, we&#39;re reading from the disc.)"}, {"owner": {"reputation": 382, "user_id": 334931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f34fd19efd04f944b9db5d053afab57?s=128&d=identicon&r=PG", "display_name": "polettix", "link": "https://stackoverflow.com/users/334931/polettix"}, "edited": false, "score": 0, "creation_date": 1567932789, "post_id": 57759035, "comment_id": 102108849, "body": "Thanks for the interesting and thorough explanation, and I&#39;d suggest that you move/duplicate the bold comment about not relying on this behaviour right at the beginning of the answer for the TL;DR impatients"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1567954216, "last_edit_date": 1567954216, "creation_date": 1567436031, "answer_id": 57759035, "question_id": 57756523, "link": "https://stackoverflow.com/questions/57756523/why-can-i-slurp-a-file-by-assigning-the-result-of-angle-brackets-to-the-input-re/57759035#57759035", "title": "Why can I slurp a file by assigning the result of angle brackets to the input record separator?", "body": "<p>This is the result of an undocumented optimization on which you shouldn't rely.</p>\n\n<hr>\n\n<p>Normally <code>LHS = RHS</code> is evaluated as follows:</p>\n\n<ol>\n<li>RHS is evaluated.</li>\n<li>LHS is evaluated.</li>\n<li>Assignment is evaluated.</li>\n</ol>\n\n<p>As you can see, the right-hand side of the assignment is evaluated first<sup>[1]</sup>. This allows the following to work:</p>\n\n<pre><code>my $x = 123;\n\n{\n   my $x = $x * 2;\n   say $x;  # 456\n}\n\nsay $x;  # 123\n</code></pre>\n\n<p>Obviously, something different &mdash;and undocumented&mdash; is happening in your case. That's because <code>LHS = &lt;$fh&gt;</code> is special. Rather than reading from the file then assigning the result to the left-hand side, <code>readline</code> (<code>&lt;&gt;</code>) writes directly to the result of the left-hand side of the assignment.<sup>[2]</sup></p>\n\n<ol>\n<li>LHS is evaluated. (This backs up <code>$/</code> and sets it to <code>undef</code> in your case.)</li>\n<li><code>$fh</code> is evaluated.</li>\n<li><code>readline</code> is evaluated, writing directly to the result of the left-hand side of the assignment.</li>\n</ol>\n\n<p>No assignment is performed.</p>\n\n<p><strong>This optimization is undocumented, and you shouldn't rely on it.</strong></p>\n\n<p><code>local $/ = uc(&lt;$fh&gt;)</code> wouldn't work, for example.</p>\n\n<hr>\n\n<ol>\n<li><p>The compiled code has the right-hand side evaluated first:</p>\n\n<pre><code>$ perl -MO=Concise,-exec -e'$L = $R'\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 1 -e:1) v:{\n3  &lt;#&gt; gvsv[*R] s                   &lt;- $R\n4  &lt;#&gt; gvsv[*L] s                   &lt;- $L\n5  &lt;2&gt; sassign vKS/2                &lt;- =\n6  &lt;@&gt; leave[1 ref] vKP/REFC\n-e syntax OK\n</code></pre>\n\n<p>The following shows the right-hand side evaluated first:</p>\n\n<pre><code>$ perl -e'sub f :lvalue { CORE::say $_[0]; $x } f(\"L\") = f(\"R\")'\nR\nL\n</code></pre></li>\n<li><p><code>$x = uc(&lt;&gt;)</code> evaluates <code>uc(&lt;&gt;)</code> before <code>$x</code>, then performs an assignment:</p>\n\n<pre><code>$ perl -MO=Concise,-exec -e'$x = uc(&lt;&gt;)'\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 1 -e:1) v:{\n3  &lt;#&gt; gv[*ARGV] s                  \\\n4  &lt;1&gt; readline[t3] sK/1             &gt; RHS\n5  &lt;1&gt; uc[t4] sK/1                  /\n6  &lt;#&gt; gvsv[*x] s                   -&gt; LHS\n7  &lt;2&gt; sassign vKS/2\n8  &lt;@&gt; leave[1 ref] vKP/REFC\n-e syntax OK\n</code></pre>\n\n<p><code>$x = uc(&lt;&gt;)</code> evaluates <code>$x</code> before <code>&lt;&gt;</code>, and it doesn't perform an assignment:</p>\n\n<pre><code>$ perl -MO=Concise,-exec -e'$x = &lt;&gt;'\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 1 -e:1) v:{\n3  &lt;#&gt; gvsv[*x] s                   -&gt; LHS\n4  &lt;#&gt; gv[*ARGV] s                  \\  RHS\n5  &lt;1&gt; readline[t3] sKS/1           /\n6  &lt;@&gt; leave[1 ref] vKP/REFC\n-e syntax OK\n</code></pre>\n\n<p>Note the (uppercase) <code>S</code> next to <code>readline</code> that wasn't there before. This \"special\" flag is what tells <code>readline</code> to write to <code>$x</code>.</p>\n\n<p>Adding <code>local</code> doesn't change anything.</p>\n\n<pre><code>$ perl -MO=Concise,-exec -e'local $x = &lt;&gt;'\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 1 -e:1) v:{\n3  &lt;#&gt; gvsv[*x] s/LVINTRO\n4  &lt;#&gt; gv[*ARGV] s\n5  &lt;1&gt; readline[t3] sKS/1\n6  &lt;@&gt; leave[1 ref] vKP/REFC\n-e syntax OK\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 57759035, "answer_count": 1, "score": 6, "last_activity_date": 1567954216, "creation_date": 1567425237, "question_id": 57756523, "link": "https://stackoverflow.com/questions/57756523/why-can-i-slurp-a-file-by-assigning-the-result-of-angle-brackets-to-the-input-re", "title": "Why can I slurp a file by assigning the result of angle brackets to the input record separator?", "body": "<p>I know I can slurp a file by setting <a href=\"https://perldoc.pl/perlvar.html#$/\" rel=\"noreferrer\">the input record separator (<code>$/</code>) to an undefined value</a>, like</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $fh, '&lt;', $filename or die \"Cannot read from $file: $!\";\nmy $contents = do { local $/; &lt;$fh&gt; };\n</code></pre>\n\n<p>But recently I came across a very similar but different idiom:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open my $fh, '&lt;', $filename or die \"Cannot read from $file: $!\";\nmy $contents = do { local $/ = &lt;$fh&gt; };\n</code></pre>\n\n<p>(Note the <code>local $/ = &lt;$fh&gt;</code> instead of <code>local $/; &lt;$fh&gt;</code>).</p>\n\n<p>Both of these <em>work</em>, and there are examples on CPAN of both <a href=\"https://grep.cpanauthors.org/search?q=%22local+%24%2F+%3D+&lt;%22\" rel=\"noreferrer\">the variant with the assignment</a> and <a href=\"https://grep.cpanauthors.org/search?q=%22local+%24%2F%3B+&lt;%22\" rel=\"noreferrer\">the one without</a> (although the latter is not surprisingly, much more common).</p>\n\n<p>But my question is <strong>why does it work</strong>? What is the variant with the assignment doing?</p>\n\n<p>PS: I <em>also</em> know that I should be using eg. <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"noreferrer\">File::Slurper</a> to slurp files, but life is funny like that sometimes.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "reply_to_user": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 0, "creation_date": 1567417309, "post_id": 57754626, "comment_id": 101945859, "body": "I need to find it using grep not with index"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 1, "creation_date": 1567417316, "post_id": 57754626, "comment_id": 101945863, "body": "Why do you specifically want to use <code>grep</code> for that purpose?"}, {"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1567424819, "post_id": 57754626, "comment_id": 101949131, "body": "@GMB because I need to check that string with multiple values. I&#39;ll make it simple, Suppose im having an array @val=(&quot;demo&quot;,&quot;test&quot;,&quot;gone&quot;); . So I need to check any of these values are present in the string and also need to know which value it is matched to."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "edited": false, "score": 0, "creation_date": 1567419189, "post_id": 57754692, "comment_id": 101946701, "body": "What if I have multiple string values to match.For example, $val is an array.How to check whether anyone of the array value matches the string"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "edited": false, "score": 0, "creation_date": 1567422009, "post_id": 57754692, "comment_id": 101947927, "body": "@Sahal, That&#39;s where grep is useful."}, {"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567424603, "post_id": 57754692, "comment_id": 101949044, "body": "@ikegami Can you show some demo code for that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "edited": false, "score": 0, "creation_date": 1567425432, "post_id": 57754692, "comment_id": 101949413, "body": "@Sahal, As per <a href=\"https://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">documentation</a>, one of the usage is <code>grep EXPR, LIST</code>, and &quot;<code>LIST</code>&quot; means an &quot;expression that returns zero or more scalars in list context&quot;. <code>@a</code> is such an expression."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1567417371, "creation_date": 1567417371, "answer_id": 57754692, "question_id": 57754626, "link": "https://stackoverflow.com/questions/57754626/how-to-check-string-is-present-or-not-using-grep-in-perl/57754692#57754692", "title": "How to check string is present or not using grep in Perl", "body": "<p><a href=\"http://p3rl.org/grep\" rel=\"nofollow noreferrer\">grep</a> is useful when filtering a list. String is not a list in Perl, you should just just the match or <a href=\"http://p3rl.org/index\" rel=\"nofollow noreferrer\">index</a>.</p>\n\n<pre><code>if (-1 != index $string, $val) {\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if ($string =~ /$val/i) {\n</code></pre>\n\n<p>Your syntax is wrong. When using <code>if</code> with <code>else</code>, curly brackets aren't optional.</p>\n\n<pre><code>if (grep /$val/i, $string) {\n    print \"found\";\n} else {\n    print \"not found\";\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1567422716, "answer_count": 1, "score": -1, "last_activity_date": 1567417371, "creation_date": 1567417055, "question_id": 57754626, "link": "https://stackoverflow.com/questions/57754626/how-to-check-string-is-present-or-not-using-grep-in-perl", "closed_reason": "Duplicate", "title": "How to check string is present or not using grep in Perl", "body": "<p>I need to find whether a value is present in a string or not using grep in if condition. I tried few code but that was incorrect</p>\n\n<p>This is for windows running Perl.</p>\n\n<pre><code>$string =\"This is a test string\";\n$val =\"test\";\nif( grep /$val/i, $string)\nprint \"found\";\nelse\nprint \"not found\";\n</code></pre>\n\n<p>I expect the output to be found</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12007308, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCRZdu6QADDUFp5Xss_IaBN1adZCus3LRdVVY5zUQ=k-s128", "display_name": "Rajesh Murugesan", "link": "https://stackoverflow.com/users/12007308/rajesh-murugesan"}, "edited": false, "score": 0, "creation_date": 1567370821, "post_id": 57749341, "comment_id": 101936130, "body": "Thanks GMB. I&#39;m using a script to search and replace the contents descried above. How to use the one-liner in the script. It&#39;s a perl script."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 1, "user_id": 12007308, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCRZdu6QADDUFp5Xss_IaBN1adZCus3LRdVVY5zUQ=k-s128", "display_name": "Rajesh Murugesan", "link": "https://stackoverflow.com/users/12007308/rajesh-murugesan"}, "edited": false, "score": 0, "creation_date": 1567374549, "post_id": 57749341, "comment_id": 101936768, "body": "@RajeshMurugesan: oh ok, that was not explained in your original question... You would probably need to update your question and show the relevant part of your script. Or you could also have a look at the perlfaq link in my answer, which provides more examples."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1567370510, "last_edit_date": 1567370510, "creation_date": 1567370144, "answer_id": 57749341, "question_id": 57749182, "link": "https://stackoverflow.com/questions/57749182/search-and-replace-a-string-in-a-file/57749341#57749341", "title": "Search and replace a string in a file", "body": "<p>You could use the following one-liner to pull out the lines between the two patterns:</p>\n\n<pre><code>perl -0777 -ne 'print \"$1\\n\" while /IP1_NAME(.*?)END_OF_LIST/gs' in.txt &gt; out.txt\n</code></pre>\n\n<p>Where <code>in.txt</code> is your input file and <code>out.txt</code> is the output file.</p>\n\n<p>This use case is actually described in <a href=\"https://metacpan.org/pod/distribution/perlfaq/lib/perlfaq6.pod#How-can-I-pull-out-lines-between-two-patterns-that-are-themselves-on-different-lines?\" rel=\"nofollow noreferrer\">perlfaq6: Regular Expressions</a>.</p>\n\n<p>You can then modify the output file to replace <code>CLIENT_NAME</code> with <code>tester_ip</code>:</p>\n\n<pre><code>perl -pi -e 's/CLIENT_NAME/tester_ip/' y.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567442870, "post_id": 57750155, "comment_id": 101956805, "body": "This is fine for a one run script. However, if you want to use the flip-flop in something that possibly runs more than once, you want to make sure you avoid this pitfall: <a href=\"https://stackoverflow.com/questions/2143554/is-perls-flip-flop-operator-bugged-it-has-global-state-how-can-i-reset-it\" title=\"is perls flip flop operator bugged it has global state how can i reset it\">stackoverflow.com/questions/2143554/&hellip;</a> (still relevant)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1567380500, "creation_date": 1567380500, "answer_id": 57750155, "question_id": 57749182, "link": "https://stackoverflow.com/questions/57749182/search-and-replace-a-string-in-a-file/57750155#57750155", "title": "Search and replace a string in a file", "body": "<p>As a script instead of a one-liner, using the scalar <a href=\"https://perldoc.pl/perlop#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a>:</p>\n\n<pre><code>#/usr/bin/env perl\nuse warnings;\nuse strict;\nuse autodie;\nuse feature qw/say/;\n\nprocess('input.txt', qr/^IP1_NAME$/, qr/^END_OF_LIST$/, 'tester_ip');\n\nsub process {\n  my ($filename, $startpat, $endpat, $newip) = @_;\n  open my $file, '&lt;', $filename;\n  while (my $line = &lt;$file&gt;) {\n    chomp $line;\n    if ($line =~ /$startpat/ .. $line =~ /$endpat/) {\n      next unless $line =~ /^\\s/; # Skip the start and lines.\n      $line =~ s/^\\s+//; # Remove indentation\n      $line =~ s/CLIENT_NAME/$newip/g; # Replace with desired value\n      say $line;\n    }\n  }\n}\n</code></pre>\n\n<p>Running this on your sample input file produces:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/ip1name/ip1dir/ //tester_ip/ip1name/ip1dir\n/ip1testname/ip1testdir/ //tester_ip/ip1testname/ip1testdir\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 1, "last_activity_date": 1567443996, "creation_date": 1567443996, "answer_id": 57760609, "question_id": 57749182, "link": "https://stackoverflow.com/questions/57749182/search-and-replace-a-string-in-a-file/57760609#57760609", "title": "Search and replace a string in a file", "body": "<p>I am assuming there is additional stuff in your input file, otherwise we would not have to jump through the hoops with these start and end markers as and we could just say </p>\n\n<pre><code>perl -ne \"print if /^ /\"\n</code></pre>\n\n<p>and that would be silly, right ;-)</p>\n\n<p>So, the flipflop has potential problems as I stated in my comment. And while clever, it does not buy you that much in terms of readability or verbosement (verbocity?), since you have to test again anyway in order to not process the marker lines.</p>\n\n<p>As long as there is no <em>exclusive flip flop</em> operator, I would go for a more robust solution.</p>\n\n<pre><code>my $in;\n\nwhile (&lt;DATA&gt;) {\n    $in = 1, next if /^IP\\d_NAME/;\n    $in = 0       if /^END_OF_LIST/;\n\n    if ( $in )\n    {\n        s/CLIENT_NAME/tester_ip/;\n        print;\n    }\n}\n__DATA__\ncruft\nIP1_NAME    \n   /ip1name/ip1dir/ //CLIENT_NAME/ip1name/ip1dir\n   /ip1testname/ip1testdir/ //CLIENT_NAME/ip1testname/ip1testdir\nEND_OF_LIST\nmore\ncruft\nIP2_NAME\n   /ip2name/ip2dir/ //CLIENT_NAME/ip2name/ip2dir\n   /ip2testname/ip2testdir/ //CLIENT_NAME/ip2testname/ip2testdir\nEND_OF_LIST\nLore Ipsargh!\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12007308, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCRZdu6QADDUFp5Xss_IaBN1adZCus3LRdVVY5zUQ=k-s128", "display_name": "Rajesh Murugesan", "link": "https://stackoverflow.com/users/12007308/rajesh-murugesan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567443996, "creation_date": 1567368911, "last_edit_date": 1567370254, "question_id": 57749182, "link": "https://stackoverflow.com/questions/57749182/search-and-replace-a-string-in-a-file", "title": "Search and replace a string in a file", "body": "<p>I'm trying to read contents from an input file, copy only certain lines of code from the file and print in an output file.</p>\n\n<p>Certain lines of code is determined by:</p>\n\n<ol>\n<li>Code name to determine the first line (IP1_NAME or IP2_NAME)</li>\n<li>Pattern to determine the last line (END_OF_LIST)</li>\n</ol>\n\n<p>Input file:</p>\n\n<pre><code>IP1_NAME    \n   /ip1name/ip1dir/ //CLIENT_NAME/ip1name/ip1dir\n   /ip1testname/ip1testdir/ //CLIENT_NAME/ip1testname/ip1testdir\nEND_OF_LIST\nIP2_NAME\n   /ip2name/ip2dir/ //CLIENT_NAME/ip2name/ip2dir\n   /ip2testname/ip2testdir/ //CLIENT_NAME/ip2testname/ip2testdir\nEND_OF_LIST\n</code></pre>\n\n<p>Output file: </p>\n\n<p>(If IP1_NAME is chosen and the CLIENT_NAME should be replaced by tester_ip)</p>\n\n<pre><code>/ip1name/ip1dir/ //tester_ip/ip1name/ip1dir\n/ip1testname/ip1testdir/ //tester_ip/ip1testname/ip1testdir\n</code></pre>\n"}, {"tags": ["perl", "operators", "expression"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567359079, "post_id": 57748038, "comment_id": 101933664, "body": "For starters, ALWAYS use <code>use strict; use warnings;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567359235, "post_id": 57748038, "comment_id": 101933691, "body": "<a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> takes two args. (Well, technically, up 3, but we just want the default for the third arg.) <code>split</code>&#39;s first arg is a regex pattern on which to split. You have that right. <code>split</code>&#39;s second arg is the value to split. That&#39;s the value of <code>$address</code>. That&#39;s it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567359356, "post_id": 57748038, "comment_id": 101933718, "body": "Tip: <code>if &#47;&#47;g</code> makes no sense. Drop the <code>g</code>. Aside from making no sense, it will often work as if the <code>g</code> wasn&#39;t there as desired, but it will produce really weird results other times."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12006882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cacdef018ee06488f3f9c8a51d7f730?s=128&d=identicon&r=PG&f=1", "display_name": "Derp", "link": "https://stackoverflow.com/users/12006882/derp"}, "edited": false, "score": 0, "creation_date": 1567360732, "post_id": 57748223, "comment_id": 101934007, "body": "OK, I think I get it, I was creating more work by capture a bunch of data that I didn&#39;t need. So you find the correct address using the if statement. Then my $zip is assigned to the numerical digits in those addresses?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 13, "user_id": 12006882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cacdef018ee06488f3f9c8a51d7f730?s=128&d=identicon&r=PG&f=1", "display_name": "Derp", "link": "https://stackoverflow.com/users/12006882/derp"}, "edited": false, "score": 0, "creation_date": 1567361134, "post_id": 57748223, "comment_id": 101934092, "body": "@Derp: yes, exactly. Also see my updated answer for a shortest solution (although maybe a bit more complex)."}, {"owner": {"reputation": 13, "user_id": 12006882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cacdef018ee06488f3f9c8a51d7f730?s=128&d=identicon&r=PG&f=1", "display_name": "Derp", "link": "https://stackoverflow.com/users/12006882/derp"}, "edited": false, "score": 0, "creation_date": 1567364365, "post_id": 57748223, "comment_id": 101934778, "body": "The short solution is definitely more complex. Thank you very much for taking the time to help and explain this to me. It helped me realize what I was doing incorrectly. Cheers!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567364379, "post_id": 57748223, "comment_id": 101934781, "body": "the <code>$_ =~</code> is unneeded.  but  far better to write code that doesn&#39;t use <code>$_</code>: <code>while (my $line = &lt;DATA&gt;) ... if $line =~ ...</code>"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567364577, "post_id": 57748223, "comment_id": 101934820, "body": "@ysth: yes I actually removed the <code>$_ =~</code> pretty much at the same time when you commented this... Thanks though !"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 2, "last_activity_date": 1567364460, "last_edit_date": 1567364460, "creation_date": 1567359808, "answer_id": 57748223, "question_id": 57748038, "link": "https://stackoverflow.com/questions/57748038/i-am-having-difficulty-printing-certain-information-from-a-data-source/57748223#57748223", "title": "I am having difficulty printing certain information from a __DATA__ source", "body": "<p>The error message that you are getting indicates that you are not using <code>split</code> correctly. I guess that you actually meant:</p>\n\n<pre><code>($home,$town,$state,$zip) = split(\",\", $address);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>($address) = split (\",\",$home,$town,$state,$zip);\n</code></pre>\n\n<p>But fixing this will still not return the result you expect, mainly because the state and the zip code are not separated by a comma, but by a space. As your code is, <code>$zip</code> will end up undefined, while <code>$state</code> will contain both the state name and zip code.</p>\n\n<p>Other considerations:</p>\n\n<ul>\n<li>always <code>use strict</code> and <code>use warnings</code></li>\n<li><code>split</code> usually takes a regular expression as first argument instead of a plain string ; also it takes <code>$_</code> as default argument, as many other perl built-ins.</li>\n</ul>\n\n<p>Consider:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nwhile (&lt;DATA&gt;){\n    my $address = (split /:/)[2];\n    if ($address =~ m/MA/g) {\n        my ($zip) = ($address =~ /(\\d+)$/);\n        print \"$zip\\n\";\n    }\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><p>since the adress is the only part that you need, don't capture the other parts; this avoids instantiating useless variables</p></li>\n<li><p>the zip code is made of a series of digits at the end of the adress</p></li>\n</ul>\n\n<hr>\n\n<p>Here is a shorter syntax that just uses a single regular expression to parse the string, capture the relevant part and print it:</p>\n\n<pre><code>while (&lt;DATA&gt;){\n    print \"$1\\n\" if /^[^:]+:[^:]+:[^:]+MA (\\d+):/;\n}\n</code></pre>\n\n<p>Regexp explanation:</p>\n\n<ul>\n<li><code>^</code> is the beginning of the string</li>\n<li><code>[^:]+:</code> represents a group of as many characters as possible other than <code>:</code> (at least one), followed by <code>:</code></li>\n<li>the third group of non-<code>:</code> characters should end with string <code>MA</code>, a space, and a series of digits; the parens around the digits indicates the this part of the string should be captured (it will then be available as <code>$1</code>)</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 12006882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cacdef018ee06488f3f9c8a51d7f730?s=128&d=identicon&r=PG&f=1", "display_name": "Derp", "link": "https://stackoverflow.com/users/12006882/derp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57748223, "answer_count": 1, "score": 1, "last_activity_date": 1567364460, "creation_date": 1567358249, "last_edit_date": 1567359910, "question_id": 57748038, "link": "https://stackoverflow.com/questions/57748038/i-am-having-difficulty-printing-certain-information-from-a-data-source", "title": "I am having difficulty printing certain information from a __DATA__ source", "body": "<p>I am having difficulty printing just the zip code for Massachusetts for a home work assignment. The information is pulled from <strong>DATA</strong> and this can not be edited to make it easier.</p>\n\n<p>I'm not asking for a direct answer just maybe some guidance of different methods this is my first programming language so I am still trying to understand. Thank you for your time.     </p>\n\n<p>I have been able to print the entire address successfully using the first section of code below. </p>\n\n<p>I tried to split $address again by using the second section of code, but keep getting a fault for too many arguments for split at line 5. I've tried different formats of this code non of which are successful.  </p>\n\n<pre><code>use warnings;\nmy ($name, $phone, $address, $Bday, $salary);\nwhile (&lt;DATA&gt;){\n($name, $phone, $address, $Bday, $salary) = split(\":\", $_);\n\nprint \"$address\\n\" if $address =~ m/MA/g;\n\n}\n\nuse warnings;\nmy ($name, $phone, $address, $Bday, $salary);\nwhile (&lt;DATA&gt;){\n($name, $phone, $address, $Bday, $salary) = split(\":\", $_);\n($address) = split (\",\",$home,$town,$state,$zip);\n\nprint \"$zip\\n\" if $address =~ m/MA/g;\n\n}\n\n__DATA__\nTommy Savage: 408-724-0140:122 Oxbow Court, Sunnyvale, CA 94087:5/19/66:34200\nLesle Kerstin: 408-456-1234:4 Harvard Square, Boston, MA 02133:4/22/62:52600\nJonDeLoach: 408-253-3122:123 Park St., San Jose, CA 94086:7/25/53:85100\nEphram Hardy: 293-259-5395:235 Carlton Lane, Joliet, IL 73858:8/12/20:56700\nBetty Boop: 245-836-8357:635 Cutesy Lane, Hollywood, CA 91464:6/23/23:14500\nWilliam Kopf: 846-836-2837:6937 Ware Road, Milton, PA 93756:9/21/46:43500\nNorma Corder: 397-857-2753:74 Pine Street, Deadborn, MI 23874:3/28/45:245700 \nJames Ikeda: 834-938-8376:23445 Aster Ave., Allentown, NJ 83745:12/1/38:45000\nLori Gortz: 327-832-5728:3465 Mirlo Street, Peabody, MA 34756:10/2/65:35200\nBarbara Kerz: 385-573-8326:832 Ponce Drive, Gary, IN 83756:12/15/46:268500\n</code></pre>\n\n<p>Output needs to just be the zip codes for MA</p>\n\n<pre><code>02133\n34756\n</code></pre>\n"}, {"tags": ["c++", "perl", "swig"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567332972, "post_id": 57744240, "comment_id": 101928275, "body": "How did you compile your extension?"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1567335857, "post_id": 57744240, "comment_id": 101928840, "body": "@H&#229;konH&#230;gland - I have now added the compilation commands used to compile this. Please have a look."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567336930, "post_id": 57744240, "comment_id": 101929063, "body": "I am on Ubuntu 19.04, swig version 3.0.12. Using your provided compilation commands, I can compile the extension and then run the script <code>testDerivedClass.pl</code> provided I add the current directory to the include path: <code>perl -I. testDerivedClass.pl</code>. It <i>does not</i> produce the error <code>undefined symbol: _ZN9BaseClassIiE10base_helloEi</code>. However this type of error can occur if you use <code>gcc</code> instead of <code>g++</code> to compile the extension"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567337252, "post_id": 57744240, "comment_id": 101929144, "body": "@H&#229;konH&#230;gland: I just tried what you explained but I still seem to get the same error. Can you share your exact logs of what you tried out? that would be really helpful.  Moreover, did you see the output of the second method call in Perl script?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567337483, "post_id": 57744240, "comment_id": 101929184, "body": "Sure! But note that even if I do not get <code>undefined symbol: _ZN9BaseClassIiE10base_helloEi</code> I still get an error: <code>RuntimeError Usage: intBaseClass_base_hello(self,value);</code>, I will check out that error first.."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1567337538, "post_id": 57744240, "comment_id": 101929194, "body": "That is because the second method (base_hello) needs an int value, so I used it like base_hello(int(5)) or just base_hello(5)."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567337740, "post_id": 57744240, "comment_id": 101929218, "body": "Ok, then I see the problem. Now after doing: <code>$obj-&gt;base_hello(1)</code> in <code>testDerivedClass.pl</code> I also get the error: <code>undefined symbol: _ZN9BaseClassIiE10base_helloEi</code>. I will check further to see if I can find the problem!"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567337887, "post_id": 57744240, "comment_id": 101929241, "body": "Yes. That is the issue here. Note that this works if we remove the templates. I was able to make the same inheritance case work. But I need to have the template for something which I am trying to do. :("}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 1, "creation_date": 1567351870, "post_id": 57746241, "comment_id": 101932066, "body": "Hi Hakon - Yes this does the trick. Now I am able to make it work as expected. Thank you so much for taking out your time to help me and the community. I really appreciate it. Cheers!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1567343247, "creation_date": 1567343247, "answer_id": 57746241, "question_id": 57744240, "link": "https://stackoverflow.com/questions/57744240/swig-c-to-perl-not-able-to-execute-inherited-public-method-of-base-class/57746241#57746241", "title": "swig c++ to perl: not able to execute inherited public method Of base class", "body": "<p>You need to force instantiation of the template class <code>BaseClass&lt;int&gt;</code> in order for the symbol <code>BaseClass&lt;int&gt;::base_hello(int)</code> to be defined in <code>BaseClass.so</code>. So add the following line to the bottom of <code>BaseClass.cpp</code>:</p>\n\n<pre><code>template class BaseClass&lt;int&gt;;  // &lt;-- explicitly instantiate the template specialization for int\n</code></pre>\n\n<p>and then recompile everything and it should work. See also <a href=\"https://stackoverflow.com/a/1022676/2173773\">this post</a></p>\n"}], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 57746241, "answer_count": 1, "score": 3, "last_activity_date": 1567343247, "creation_date": 1567325048, "last_edit_date": 1567336910, "question_id": 57744240, "link": "https://stackoverflow.com/questions/57744240/swig-c-to-perl-not-able-to-execute-inherited-public-method-of-base-class", "title": "swig c++ to perl: not able to execute inherited public method Of base class", "body": "<p>I am trying to generate Perl packages for some C++ classes (which may use templates), and facing this weird issue that the derived class object is unable to call the base class method, which it inherited in C++ class publicly.</p>\n\n<p>After reading the swig 4.0 manual, I was able to setup my classes (including template ones) and compile them properly sans errors. I got to know how to order them and how to separate the modules in order to get them compiled properly.</p>\n\n<p>Somehow the derived class object, when used in perl, is unable to access base class method - and here is where I need some help. If I look at the object dump (using <code>objdump -t</code> command), I see that the base_hello() method is still undefined but can't seem to figure out why?</p>\n\n<p>I tried to link it explicitly with the DerivedClass.so file but to no avail.</p>\n\n<p><em>Note that I was able to make the same thing work but sans the templates. I was able to execute the base class method from the derived class object, in my Perl script.</em></p>\n\n<p>Can anyone point me in a direction where I could investigate further? Currently I am not able to find any related information on internet for my use case i.e. <em>unable to execute base class method in Perl</em>.</p>\n\n<p>If this problem interests you, please find the files used below to do this small test:</p>\n\n<p><strong>Perl Program throws undefined symbol error:</strong></p>\n\n<pre><code>20190901 03:25 [compuser@lenovoe470:template-base-class]$  perl testDerivedClass.pl\n\nHello from derived class\nperl: symbol lookup error: /home/compuser/mystuff/study/ace/swig-with-ace/template-base-class/BaseClass.so: undefined symbol: _ZN9BaseClassIiE10base_helloEi\n\n20190901 03:25 [compuser@lenovoe470:template-base-class]$  \n</code></pre>\n\n<p><strong>Baseclass.i</strong></p>\n\n<pre><code>%module BaseClass\n%{\n#include \"BaseClass.h\"\n%}\n\n%include \"BaseClass.h\"\n%template(intBaseClass) BaseClass&lt; int &gt; ;\n</code></pre>\n\n<p><strong>Derivedclass.i</strong></p>\n\n<pre><code>%module DerivedClass\n\n%import \"BaseClass.i\"\n\n%{\n#include \"DerivedClass.h\"\n%}\n\n%include \"DerivedClass.h\"\n</code></pre>\n\n<p><strong>Baseclass.h</strong></p>\n\n<pre><code>#ifndef BC__\n#define BC__\n\n#include &lt;iostream&gt;\n\ntemplate &lt;class T&gt;\nclass BaseClass {\n  public:\n    void base_hello(T value);\n};\n\n#endif /* BC__ */\n\n</code></pre>\n\n<p><strong>Baseclass.cpp</strong></p>\n\n<pre><code>#include \"BaseClass.h\"\ntemplate &lt;class T&gt;\nvoid BaseClass&lt;T&gt;::base_hello(T value) {\n  std::cerr &lt;&lt; \"Hello from base class: \" &lt;&lt; value &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><strong>Derivedclass.h</strong></p>\n\n<pre><code>#ifndef __DC_\n#define __DC_\n\n#include \"BaseClass.h\"\nclass DerivedClass : public BaseClass &lt;int&gt; {\n  public:\n    void derived_hello();\n};\n\n#endif /* __DC_ */\n</code></pre>\n\n<p><strong>Derivedclass.cpp</strong></p>\n\n<pre><code>#include \"DerivedClass.h\"\n\nvoid DerivedClass::derived_hello() {\n  std::cerr &lt;&lt; \"Hello from derived class\\n\";\n}\n</code></pre>\n\n<p><strong>testDerivedClass.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse DerivedClass;\n\nmy $obj = new DerivedClass::DerivedClass();\n\n$obj-&gt;derived_hello();\n$obj-&gt;base_hello();\n\n__END__\n</code></pre>\n\n<p><strong>UPDATE:</strong> Adding compilation commands</p>\n\n<pre><code>#### For Base Class\n/usr/local/bin/swig -c++ -perl5 BaseClass.i\ng++ -std=c++11 -c -fPIC `perl -MConfig -e 'print join(\" \", @Config{qw(ccflags optimize cccdlflags)}, \"-I$Config{archlib}/CORE\")'` -D_GNU_SOURCE  -L.  BaseClass.cpp BaseClass_wrap.cxx\ng++ -std=c++11 -lstdc++ `perl -MConfig -e 'print $Config{lddlflags}'` -L.  BaseClass.o BaseClass_wrap.o -o BaseClass.so\n\n#### For Derived Class\n/usr/local/bin/swig -c++ -perl5 DerivedClass.i\ng++ -std=c++11 -c -fPIC `perl -MConfig -e 'print join(\" \", @Config{qw(ccflags optimize cccdlflags)}, \"-I$Config{archlib}/CORE\")'` -D_GNU_SOURCE  -L.  DerivedClass.cpp DerivedClass_wrap.cxx\ng++ -std=c++11 -lstdc++ `perl -MConfig -e 'print $Config{lddlflags}'` -L.  DerivedClass.o DerivedClass_wrap.o -o DerivedClass.so\n</code></pre>\n"}, {"tags": ["perl", "version", "perlbrew"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567315658, "post_id": 57743372, "comment_id": 101925441, "body": "Do you want a programmatic solution, or do you want instructions for a human?"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567315917, "post_id": 57743372, "comment_id": 101925474, "body": "it&#39;s part of a script, so programmatic.  I&#39;d be fine using git tags alternatively, but I can&#39;t determine how perl marks a git tag as stable either -- I was thinking about just grabbing the latest one that had a <code>-RC</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567316458, "post_id": 57743372, "comment_id": 101925540, "body": "That would return the wrong version in the month(s) before a new version comes out."}], "answers": [{"comments": [{"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1567316811, "post_id": 57743490, "comment_id": 101925580, "body": "thanks a lot! So, it&#39;s just even numbered versions that are stable, good to know"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1567316855, "post_id": 57743490, "comment_id": 101925585, "body": "Since 5.6, yes."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1567316691, "last_edit_date": 1567316691, "creation_date": 1567316383, "answer_id": 57743490, "question_id": 57743372, "link": "https://stackoverflow.com/questions/57743372/perlbrew-version-number-of-latest-stable-version/57743490#57743490", "title": "Perlbrew version number of latest stable version", "body": "<pre><code>perlbrew available | perl -e'\n   my @available_perls = &lt;&gt;;\n   s/^\\s+|\\s+\\z//g for @available_perls;\n\n   my ($latest_ver, $latest_minor);\n   for my $cand (@available_perls) {\n      my ($ver, $minor) = $cand =~ m/^perl-(5\\.(6|8|[0-9]+[02468])\\.[0-9]+)$/\n         or next;\n\n      ($latest_ver, $latest_minor) = ($ver, $minor)\n         if !defined $latest_minor\n         || $latest_minor &lt; $minor;\n   }\n\n   die \"Can\\x27t determine latest stable Perl release\\n\"\n      if !defined $latest_ver;\n\n   print \"$latest_ver\\n\";\n'\n</code></pre>\n\n<p>Effectively lifted straight out of App::perlbrew.</p>\n\n<hr>\n\n<p>If you had App::perlbrew installed, you could use the following:</p>\n\n<pre><code>/path/to/perl/with/module/perl -MApp::perlbrew -e'\n   my $latest_ver = App::perlbrew-&gt;new-&gt;resolve_stable_version;\n   print \"$latest_ver\\n\";\n'\n</code></pre>\n"}], "owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57743490, "answer_count": 1, "score": 0, "last_activity_date": 1567316691, "creation_date": 1567314901, "question_id": 57743372, "link": "https://stackoverflow.com/questions/57743372/perlbrew-version-number-of-latest-stable-version", "title": "Perlbrew version number of latest stable version", "body": "<p>I see <code>perlbrew install</code> can take a <code>stable</code> argument to install the latest, but I would like to get the latest stable version number to check against before installing. </p>\n\n<p>How can I get the version number of the latest stable perl using perlbrew?</p>\n"}, {"tags": ["perl", "hash", "reference"], "answers": [{"comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 1, "creation_date": 1567328555, "post_id": 57742968, "comment_id": 101927465, "body": "Hey @ikegami. This is holli from Perlmonks. I&#39;m trying to get involved in SO but I am having a hard time with the attidude of people here. Posts are getting edited, perfect questions get put on hold all the time and I just saw your post here getting downvoted. How do you deal with that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567328655, "post_id": 57742968, "comment_id": 101927485, "body": "@Holli, There was a bug in my answer. That&#39;s probably why it was downvoted. I would have appreciated being told that, but I thankfully figured it out and fixed it."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1567406994, "post_id": 57742968, "comment_id": 101941732, "body": "Intense focus on question-and-answer quality here which can be overdone quite often.  Nonetheless an incredibly helpful site."}, {"owner": {"reputation": 51, "user_id": 11482461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dsc7qt0eqww/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdH6KoSqjj0IOxFLPSamK0BylCoPg/mo/photo.jpg?sz=128", "display_name": "Jessica Castrogiovanni", "link": "https://stackoverflow.com/users/11482461/jessica-castrogiovanni"}, "edited": false, "score": 0, "creation_date": 1567619120, "post_id": 57742968, "comment_id": 102020070, "body": "Thank you for your detailed answer ikegami! :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567619214, "post_id": 57742968, "comment_id": 102020107, "body": "If this satisfactorily answers your question, check the mark next to it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1580017186, "last_edit_date": 1580017186, "creation_date": 1567308134, "answer_id": 57742968, "question_id": 57742545, "link": "https://stackoverflow.com/questions/57742545/implementing-a-dispatch-table/57742968#57742968", "title": "Implementing a dispatch table", "body": "<p>What follows are four approaches for implementing a method-based dispatch table. The differences explained afterwards.</p>\n\n<pre><code>my %DISPATCH = (\n    ONE   =&gt; \\&amp;funcOne,\n    TWO   =&gt; \\&amp;funcTwo,\n    THREE =&gt; \\&amp;funcThree,\n    FOUR  =&gt; \\&amp;funcFour,\n);\n\nsub runTesting {\n    my ($self, $type) = @_;\n    my $method = $DISPATCH{$type};\n    return $self-&gt;$method(\"string\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %DISPATCH = (\n    ONE   =&gt; __PACKAGE__-&gt;can('funcOne'),\n    TWO   =&gt; __PACKAGE__-&gt;can('funcTwo'),\n    THREE =&gt; __PACKAGE__-&gt;can('funcThree'),\n    FOUR  =&gt; __PACKAGE__-&gt;can('funcFour'),\n);\n\nsub runTesting {\n    my ($self, $type) = @_;\n    my $method = $DISPATCH{$type};\n    return $self-&gt;$method(\"string\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %DISPATCH = (\n    ONE   =&gt; 'funcOne',\n    TWO   =&gt; 'funcTwo',\n    THREE =&gt; 'funcThree',\n    FOUR  =&gt; 'funcFour',\n);\n\nsub runTesting {\n    my ($self, $type) = @_;\n    my $method_name = $DISPATCH{$type};\n    return $self-&gt;$method_name(\"string\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %DISPATCH = (\n    ONE   =&gt; sub { shift-&gt;funcOne(@_) },\n    TWO   =&gt; sub { shift-&gt;funcTwo(@_) },\n    THREE =&gt; sub { shift-&gt;funcThree(@_) },\n    FOUR  =&gt; sub { shift-&gt;funcFour(@_) },\n);\n\nsub runTesting {\n    my ($self, $type) = @_;\n    my $cb = $DISPATCH{$type};\n    return $cb-&gt;($self, \"string\");\n}\n</code></pre>\n\n<p>All four approaches allow the methods to be defined in the same class.</p>\n\n<p>The last three approaches allow the methods to be defined in a superclass as well.</p>\n\n<p>The last two approaches allow a subclass to provide or override the method as well. These are your best options.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 11482461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dsc7qt0eqww/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdH6KoSqjj0IOxFLPSamK0BylCoPg/mo/photo.jpg?sz=128", "display_name": "Jessica Castrogiovanni", "link": "https://stackoverflow.com/users/11482461/jessica-castrogiovanni"}, "edited": false, "score": 0, "creation_date": 1567619087, "post_id": 57743136, "comment_id": 102020060, "body": "Thank you for your answer!"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 2, "last_activity_date": 1567311088, "creation_date": 1567311088, "answer_id": 57743136, "question_id": 57742545, "link": "https://stackoverflow.com/questions/57742545/implementing-a-dispatch-table/57743136#57743136", "title": "Implementing a dispatch table", "body": "<p>How about passing in <code>$self</code> in the dynamic dispatch method:</p>\n\n<pre><code>sub runTesting {\n    my ($self, $type) = @_;\n    ($self-&gt;{DISPATCH}{$type} || sub {})-&gt;($self,\"string\");\n                                           ^^^^^\n}\n</code></pre>\n\n<p>I believe the problem is that you are invoking the methods as plain functions and not object methods.</p>\n"}], "owner": {"reputation": 51, "user_id": 11482461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dsc7qt0eqww/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdH6KoSqjj0IOxFLPSamK0BylCoPg/mo/photo.jpg?sz=128", "display_name": "Jessica Castrogiovanni", "link": "https://stackoverflow.com/users/11482461/jessica-castrogiovanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1580017186, "creation_date": 1567299865, "last_edit_date": 1567304183, "question_id": 57742545, "link": "https://stackoverflow.com/questions/57742545/implementing-a-dispatch-table", "title": "Implementing a dispatch table", "body": "<p>I'm trying to implement a dispatch table which calls functions inside a Perl module. I know how to implement dispatch tables generally, but I can't seem to get it right when referencing an object method from within $self. Maybe I haven't Googled enough, but so far, the right syntax is elusive.</p>\n\n<p>I have traced the parameters though the calls, and I know what is happening -- the function references are not receiving a reference to $self as their first parameter. This is what I currently have inside $self. I believe I copied this over properly; if I made a mistake and it doesn't run, I apologize.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package MyRefHashTest;\n\nuse strict;\nuse warnings;\n\nsub new {\n    my $class = shift;\n    my $self = {\n        DISPATCH =&gt; {\n            ONE =&gt; \\&amp;funcOne,\n            TWO =&gt; \\&amp;funcTwo,\n            THREE =&gt; \\&amp;funcThree,\n            FOUR =&gt; \\&amp;funcFour\n        }\n    };\n\n    bless $self, $class;\n    return $self;\n}\n\nsub funcOne {\n    my ($self, $param) = @_;\n    print \"func1 $param \\n\";\n}\n\nsub funcTwo {\n    my ($self, $param) = @_;\n    print \"func2 $param \\n\";\n}\n\nsub funcThree {\n    my ($self, $param) = @_;\n    print \"func3 $param \\n\";\n}\n\nsub funcFour {\n    my ($self, $param) = @_;\n    print \"func4 $param \\n\";\n}\n\nsub runTesting {\n    my ($self, $type) = @_;\n    ($self-&gt;{DISPATCH}{$type} || sub {})-&gt;(\"string\");\n}\n\n1;\n\n# To Test:\n$test = MyRefHashTest-&gt;new;\n$test-&gt;runTesting(\"ONE\");\n$test-&gt;runTesting(\"TWO\");\n$test-&gt;runTesting(\"THREE\");\n$test-&gt;runTesting(\"FOUR\");\n</code></pre>\n\n<p>The actual output I get is that $param is undefined in the function calls from the dispatch table, when it should not be. This is how I know that the references to $self are not where they should be. The functions think that $type is $self.</p>\n\n<p>I have tried editing the hash table references so they look like \\$self->functionName, but that only results in a compilation error for $self not being properly defined on that line.</p>\n\n<p>Can anyone guide me to the right syntax for this, please?</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: After much more work, I finally found a solution. It's some very interesting syntax, a lot more complicated than I thought. Essentially, I'm building the hash from the inside out:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    my $self = {\n        DISPATCH =&gt; undef\n    };\n    $self-&gt;{DISPATCH} = {\n        ONE =&gt; sub { $self-&gt;funcOne(@_); },\n        TWO =&gt; sub { $self-&gt;funcTwo(@_); },\n        THREE =&gt; sub { $self-&gt;funcThree(@_); },\n        FOUR =&gt; sub { $self-&gt;funcFour(@_); }\n    };\n</code></pre>\n\n<p>It works, but it seems like a lot of hassle for what it is. If anyone knows of an easier way to do this, I would still be very interested in it. If there isn't an easier way, on the other hand, I hope this can help somebody.</p>\n"}, {"tags": ["sqlite", "perl", "sqlcipher"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567250557, "post_id": 57737217, "comment_id": 101914191, "body": "On a linux machine, I have an extra step between the <code>chmod</code> and the <code>xsubpp</code> commands to generate <code>SQLcipher.xsi</code>. (By the way, it doesn&#39;t build on my machine either because of compile errors later on.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567251077, "post_id": 57737217, "comment_id": 101914291, "body": "What&#39;s the output of <code>C:\\perl\\bin\\perl -MDBI -MDBI::DBD -e&quot;print DBI::DBD-&gt;dbd_postamble&quot;</code>? I think that&#39;s failing, the error is ignored, and the error message is suppressed."}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567252818, "post_id": 57737217, "comment_id": 101914681, "body": "&gt;C:\\perl\\bin\\perl -MDBI -MDBI::DBD -e&quot;print DBI::DBD-&gt;dbd_postamble&quot; *** You&#39;re using Microsoft Visual C++ compiler or similar but     the LIB and INCLUDE environment variables are not both set.      You need to run the VCVARS32.BAT batch file that was supplied     with the compiler before you can use it.      A copy of vcvars32.bat can typically be found in the following     directories under your Visual Studio install directory:         Visual C++ 6.0:     vc98\\bin         Visual Studio .NET: vc7\\bin      Find it, run it, then retry this."}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567252855, "post_id": 57737217, "comment_id": 101914688, "body": "if I run vcvars32.bat nothing happens"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567252896, "post_id": 57737217, "comment_id": 101914694, "body": "I was able to install it on centOS  7 machine without problems"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567252896, "post_id": 57737217, "comment_id": 101914695, "body": "It should launch a new shell with certain env vars setup. Or do you mean you still get the same error from the command being run within that shell?"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567254435, "post_id": 57737217, "comment_id": 101915049, "body": "after I ran vcvars32.bat, then run the command C:\\perl\\bin\\perl -MDBI -MDBI::DBD -e&quot;print DBI::DBD-&gt;dbd_postamble&quot;, now I get the below message:"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567254504, "post_id": 57737217, "comment_id": 101915065, "body": "Multiple copies of Driver.xst found in: C:/perl/site/lib/auto/DBI/ C:/perl/lib/auto/DBI/ at -e line 1. Using DBI 1.631 (for perl 5.016003 on MSWin32-x64-multi-thread) installed in C:/perl/site/lib/auto/DBI/  # --- This section was generated by DBI::DBD::dbd_postamble() DBI_INSTARCH_DIR=C:\\perl\\site\\lib\\auto\\DBI DBI_DRIVER_XST=C:\\perl\\site\\lib\\auto\\DBI\\Driver.xst  # The main dependency (technically correct but probably not used) $(BASEEXT).c: $(BASEEXT).xsi  # This dependency is needed since MakeMaker uses the .xs.o rule $(BASEEXT)$(OBJ_EXT): $(BASEEXT).xsi"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567254509, "post_id": 57737217, "comment_id": 101915066, "body": "$(BASEEXT).xsi: $(DBI_DRIVER_XST) C:\\perl\\site\\lib\\auto\\DBI\\Driver_xst.h         $(PERL) -p -e &quot;s/~DRIVER~/$(BASEEXT)/g&quot; $(DBI_DRIVER_XST) &gt; $(BASEEXT).xsi  # ---"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567257362, "post_id": 57737217, "comment_id": 101915703, "body": "That looks right. Now run <code>cpan DBD::SQLcipher</code> from within that shell"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567258915, "post_id": 57737217, "comment_id": 101916087, "body": "sqlite3.c(16507): warning C4996: &#39;fopen&#39;: This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details. C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt\\stdio.h(205): note: see declaration of &#39;fopen&#39; sqlite3.c(16824): fatal error C1083: Cannot open include file: &#39;openssl/rand.h&#39;: No such file or directory NMAKE : fatal error U1077: &#39;&quot;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\cl.EXE&quot;&#39; : return code &#39;0x2&#39;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567259393, "post_id": 57737217, "comment_id": 101916211, "body": "Sounds like it needs the openssl library --including header files-- to be available."}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567261904, "post_id": 57737217, "comment_id": 101916903, "body": "I installed openssl under C:\\OpenSSL-Win64\\ and set that path and restarted windows still same error  Cannot open include file: &#39;openssl/rand.h. how to tell where it is located, I see it in C:\\OpenSSL-Win64\\include\\openssl"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567262161, "post_id": 57737217, "comment_id": 101916981, "body": "I copied the include/openssl folder to VC/include folder now new error: sqlite3.c(16941): error C2079: &#39;hctx&#39; uses undefined struct &#39;hmac_ctx_st&#39; .... sqlite3.c(16958): error C2079: &#39;ectx&#39; uses undefined struct &#39;evp_cipher_ctx_st&#39; NMAKE : fatal error U1077: &#39;&quot;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\cl.EXE&quot;&#39; : return code &#39;0x2&#39;"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567262731, "post_id": 57737217, "comment_id": 101917152, "body": "I have &quot;SQLite Browser&quot; windows program installed. It has sqlcipher.dll, can I use these."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567294912, "post_id": 57737217, "comment_id": 101923433, "body": "Re &quot;<i>how to tell where it is located</i>&quot;, Via the <code>INCLUDE</code> and <code>LIB</code> env vars, I think."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567294938, "post_id": 57737217, "comment_id": 101923436, "body": "Re &quot;<i><code>&#39;ectx&#39; uses undefined struct &#39;evp_cipher_ctx_st&#39;</code></i>&quot;, I think that&#39;s the same error I was getting in linux."}], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1567319430, "post_id": 57742298, "comment_id": 101925935, "body": "Are you able to build it on windows? I followed your steps, now I am getting these errors: sqlite3.c(16941): error C2079: &#39;hctx&#39; uses undefined struct &#39;hmac_ctx_st&#39;, sqlite3.c(16958): error C2079: &#39;ectx&#39; uses undefined struct &#39;evp_cipher_ctx_st&#39;, sqlite3.c(16944): warning C4133: &#39;function&#39;: incompatible types - from &#39;int *&#39; to &#39;HMAC_CTX *&#39;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1567324372, "post_id": 57742298, "comment_id": 101926645, "body": "Didn&#39;t try on Windows. This is a question-answer site. You c asked a question, and this answered it. If you have more questions, post new Questions."}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1567326844, "post_id": 57742298, "comment_id": 101927106, "body": "I know this is a question answer site and based on your answer I asked another question, you changed your comment to answer so I supposed you tried it and success, thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1567328030, "post_id": 57742298, "comment_id": 101927348, "body": "You&#39;re missing the point. The comments are not the place for new questions. // I changed my comment into an answer because you confirmed that it answered your question"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1567332017, "post_id": 57742298, "comment_id": 101928061, "body": "no problem, just posted it as a new question  <a href=\"https://stackoverflow.com/questions/57743756/perl-compile-sqlcipher-on-windows-error-c2079-hctx-uses-undefined-struct-hmac-ct\" title=\"perl compile sqlcipher on windows error c2079 hctx uses undefined struct hmac ct\">stackoverflow.com/questions/57743756/&hellip;</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1567295221, "creation_date": 1567295221, "answer_id": 57742298, "question_id": 57737217, "link": "https://stackoverflow.com/questions/57737217/install-perl-module-dbdsqlcipher-on-windows/57742298#57742298", "title": "Install Perl module DBD::SQLcipher on Windows", "body": "<p>Rules that should be added to the makefile aren't being added because of an exception which is being ignored. You can verify this by running</p>\n\n<pre><code>perl -MDBI -MDBI::DBD -e\"print DBI::DBD-&gt;dbd_postamble\"\n</code></pre>\n\n<p>There error is probably the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>*** You're using Microsoft Visual C++ compiler or similar but\n    the LIB and INCLUDE environment variables are not both set.\n\n    You need to run the VCVARS32.BAT batch file that was supplied\n    with the compiler before you can use it.\n\n    A copy of vcvars32.bat can typically be found in the following\n    directories under your Visual Studio install directory:\n        Visual C++ 6.0:     vc98\\bin\n        Visual Studio .NET: vc7\\bin\n\n    Find it, run it, then retry this.\n\n    If you think this error is not correct then just set the LIB and\n    INCLUDE environment variables to some value to disable the check.\n</code></pre>\n\n<p>If so, it's reminding you that you need to run <code>cpan DBD::SQLcipher</code> within the shell created by <code>vcvars32</code> as it will have environment variables needed by your compiler properly set.</p>\n"}], "owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567295221, "creation_date": 1567247478, "last_edit_date": 1567249047, "question_id": 57737217, "link": "https://stackoverflow.com/questions/57737217/install-perl-module-dbdsqlcipher-on-windows", "title": "Install Perl module DBD::SQLcipher on Windows", "body": "<p>I need to install Perl module DBD::SQLcipher on windows 10 Perl version 5.16.\nthe ppm package says</p>\n\n<pre><code>c:\\&gt;ppm install DBD::SQLcipher\nppm install failed: Can't find any package that provides DBD::SQLcipher\n</code></pre>\n\n<p>and the cpan module gives error:</p>\n\n<pre><code>c:\\&gt;cpan install DBD::SQLcipher\nMicrosoft (R) Program Maintenance Utility Version 14.00.23026.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ncp lib/DBD/SQLcipher/VirtualTable.pm blib\\lib\\DBD\\SQLcipher\\VirtualTable.pm\ncp lib/DBD/SQLcipher.pm blib\\lib\\DBD\\SQLcipher.pm\ncp lib/DBD/SQLcipher/Fulltext_search.pod blib\\lib\\DBD\\SQLcipher\\Fulltext_search.pod\ncp lib/DBD/SQLcipher/VirtualTable/FileContent.pm blib\\lib\\DBD\\SQLcipher\\VirtualTable\\FileContent.pm\ncp lib/DBD/SQLcipher/Cookbook.pod blib\\lib\\DBD\\SQLcipher\\Cookbook.pod\ncp lib/DBD/SQLcipher/VirtualTable/PerlData.pm blib\\lib\\DBD\\SQLcipher\\VirtualTable\\PerlData.pm\ncp lib/DBD/SQLcipher/Constants.pm blib\\lib\\DBD\\SQLcipher\\Constants.pm\nRunning Mkbootstrap for DBD::SQLcipher ()\n        C:\\perl\\bin\\perl.exe -MExtUtils::Command -e chmod -- 644 SQLcipher.bs\n        C:\\perl\\bin\\perl.exe C:\\perl\\site\\lib\\ExtUtils\\xsubpp  -typemap C:\\perl\\lib\\ExtUtils\\typemap -typemap typemap  SQLcipher.xs &gt; SQLcipher.xsc &amp;&amp; C:\\perl\\bin\\perl.exe -MExtUtils::Command -e mv -- SQLcipher.xsc SQLcipher.c\nCannot open 'SQLcipher.xsi': No such file or directory in constants.inc, line 367\nNMAKE : fatal error U1077: 'C:\\perl\\bin\\perl.exe' : return code '0x1'\nStop.\n  TGASIBA/DBD-SQLcipher-0.02.tgz\n  nmake.exe -- NOT OK\n</code></pre>\n"}, {"tags": ["perl", "ssl", "openssl", "rhel", "lwp"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567239430, "post_id": 57736285, "comment_id": 101911818, "body": "Does adding <code>use IO::Socket::SSL;</code> to the working program break it?"}, {"owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567240258, "post_id": 57736285, "comment_id": 101911984, "body": "It does not. Nor does removing it and forcing  the use of Net::SSLeay fix things, I&#39;ve added information reflecting this"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567240617, "post_id": 57736285, "comment_id": 101912061, "body": "I&#39;m having difficulty seeing the difference between the working and the non-working program. What does it take to make the working program stop working?"}, {"owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567240728, "post_id": 57736285, "comment_id": 101912083, "body": "Swapping the url, is what does it. I&#39;m unsure exactly how, but the server I actually care about differs from the openssl setup somehow that causes this error. However the fact that I can connect to a local server as proof of concept seems to imply that it is not because the library cannot use the necessary ciphers. This is what I find so confusing, as it is reported as if the cipher is unsupported. I probably don&#39;t need to include both programs, but I don&#39;t know enough about ssl to really say much more so I included them. Would you recommend I alter the question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567241093, "post_id": 57736285, "comment_id": 101912173, "body": "ah ok. Sorry, I can&#39;t help you. I don&#39;t know how to debug SSL."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1567253283, "post_id": 57736285, "comment_id": 101914772, "body": "<a href=\"https://github.com/noxxi/p5-ssl-tools\" rel=\"nofollow noreferrer\">github.com/noxxi/p5-ssl-tools</a> could reveal more."}, {"owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1567276470, "post_id": 57736285, "comment_id": 101920392, "body": "the version of IO::Socket::SSL available in the repositories is not sufficient to run those tools. I&#39;ve online tools to examine the endpoint, but nothing stands out to me. Is there something in particular you think I should be looking for @daxim"}], "owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567280529, "creation_date": 1567238807, "last_edit_date": 1567280529, "question_id": 57736285, "link": "https://stackoverflow.com/questions/57736285/issues-connecting-to-server-with-sslv3-disabled-in-legacy-perl", "title": "Issues connecting to server with sslv3 disabled in legacy perl", "body": "<p>As the title says, I'm attempting to POST some JSON to a REST API using a pretty old version of perl, specifically 5.10.1. I'm working in a pretty old legacy codebase on RHEL 6. The handshake fails with error 500 because the server has sslv3 disabled. However I'm using versions of LWP and IO::Socket::SSL that I believe nominally support at least TLSv1, which the server supports so I'm unsure why the connection fails as it should just use an acceptable cipher. The server appears to be behind a cloudfront reverse proxy which may be relevant. I don't know enough about SSL to say for certain, but it appears that the issue is in the way the server I care about is set up and how the version of perl and libraries in use implement the cipher. Using an online <a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=dev.superquoteapi.fis.rcuh.com&amp;s=99.84.224.116&amp;latest\" rel=\"nofollow noreferrer\">tool</a> I noticed that the handshake fails on several browsers that do not support SNI. The version of openssl available should support this, but neither of the perl SSL implementations appear to. Is there a way around this? </p>\n\n<p><a href=\"https://stackoverflow.com/questions/49166769/using-perl-5-8-8-with-openssl-1-0-1-to-connect-with-tlsv1-2\">this</a> question seems to be dealing with a similar issue, but they solve it by installing a newer version of perl, which I'm not sure I can do given that this would likely break large portions of the codebase.</p>\n\n<p><a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1355802\" rel=\"nofollow noreferrer\">This</a> unresolved bug seems to accidentally document this behavior\nmy problem is identical to the one listed, but I can also connect to the openssl host. I'm not sure that it's the same problem but I am on the same version of redhat with the same software and the same inconsistent behavior so it seems valuable. If it helps  my software versions are as follows</p>\n\n<pre><code>openssl-1.0.1e-58.el6_10.i686\nperl-Crypt-SSLeay-0.57-17.el6.x86_64\nperl-IO-Socket-SSL-1.31-3.el6_8.2.noarch\nperl-Net-SSLeay-1.35-10.el6_8.1.x86_64\n</code></pre>\n\n<p>If I run  </p>\n\n<p><code>printf 'HTTP/1.0 200 Ok\\r\\n\\r\\n' | openssl s_server -accept 2000 -cert certificate.pem -key key.pem -no_ssl2 -no_ssl3 -no_tls1</code></p>\n\n<p>the following script (test.pl) is able to connect using the same libraries </p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new(timeout =&gt; 600);\nmy $req = HTTP::Request-&gt;new(POST =&gt; $ARGV[0]);\n$req-&gt;content_type('application/json');\n$req-&gt;content_encoding('gzip');\n$req-&gt;content('');\nmy $res = $ua-&gt;request($req);\nprint $res-&gt;status_line, \"\\n\";\n</code></pre>\n\n<pre><code>&gt;perl5.10.1 test.pl https://localhost:2000/\n200 Ok\n</code></pre>\n\n<p>However, when I run an only slightly more complicated program using the same libraries and perl version I get errors relating to the sslv3 handshake</p>\n\n<pre><code>500 Can't connect to dev.superquoteapi.fis.rcuh.com:443 (SSL connect attempt failed with unknown errorerror:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure)\n</code></pre>\n\n<p>I've even tried to force the program to use only TLSv1, but to no avail, the following line seems to have no impact</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; {verify_hostname =&gt; 0}, SSL_version =&gt; '!TLSv12:TLSv1:!SSLv2:!SSLv3', allowed_protocols =&gt; ['https']);\n</code></pre>\n\n<p>The program I am actually working with is listed below</p>\n\n<pre><code>use LWP;\nuse IO::Socket::SSL;\nmy $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; {verify_hostname =&gt; 0}, SSL_version =&gt; '!TLSv12:TLSv1:!SSLv2:!SSLv3', allowed_protocols =&gt; ['https']);\n\nmy $req = HTTP::Request-&gt;new('POST', 'https://dev.superquoteapi.fis.rcuh.com:443/api/quote');\n\n$req-&gt;header('Content-Type' =&gt; 'application/json');\n$req-&gt;header('Accept' =&gt; 'application/json');\n#an api key is required and set in a header, but I won't list that here\n\nopen(my $fd, '&lt;', 'data,json') \n    or die \"Unable to open file, $!\";\nmy @json=&lt;$fd&gt;;\nclose($fd)\n    or warn \"Unable to close the file handle: $!\";\n$req-&gt;content(@json);\nmy $resp = $ua-&gt;request($req);\nprint $resp-&gt;as_string;\n</code></pre>\n\n<p>I have tried removing <code>IO::Socket::SSL</code> and replacing it with <code>Net::SSL</code> as is referenced in this question <a href=\"https://stackoverflow.com/questions/8026524/how-do-i-force-lwp-to-use-cryptssleay-for-https-requests\">How do I force LWP to use Crypt::SSLeay for HTTPS requests?</a> but this does not seem to help. The code I used was </p>\n\n<pre><code>use Net::SSL ();\nBEGIN {\n  $Net::HTTPS::SSL_SOCKET_CLASS = \"Net::SSL\"; # Force use of Net::SSL\n}\n</code></pre>\n\n<p>The two programs are more or less identical. The issue seems to be in the way the specific server <code>https://dev.superquoteapi.fis.rcuh.com</code> handles ssl requests. However I do not know enough about SSL/TLS to verify this meaningfully, so I have included both for completeness.</p>\n\n<p>I apologize if this question is a bit rambling, but I really need help, and I just want to provide as much information as I can. If I can provide further information, or remove unhelpful information please let me know, I am absolutely at my wits end.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 0, "creation_date": 1567238872, "post_id": 57735641, "comment_id": 101911717, "body": "I think looking for a positive match blinded me to your equivalent (condition != 2) example. On top of that, I probably misread the final paragraph on <a href=\"https://docstore.mik.ua/orelly/perl3/prog/ch03_20.htm\" rel=\"nofollow noreferrer\">this page</a>. Not that that would have helped because even the use of xor would involve an additional evaluation - which is what I&#39;ve been trying to work around. So, thank you for the clarification. Perfect!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 1, "creation_date": 1567239161, "post_id": 57735641, "comment_id": 101911765, "body": "Well, there&#39;s <code>elsif (!(condition == 2))</code> if you want something more positive."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1567237880, "last_edit_date": 1567237880, "creation_date": 1567232066, "answer_id": 57735641, "question_id": 57735341, "link": "https://stackoverflow.com/questions/57735341/structure-or-syntax-for-empty-if-elsif-else-block-in-perl/57735641#57735641", "title": "Structure or syntax for empty if/elsif/else block in perl", "body": "<pre><code>if (condition == 1) {\n  do something\n}\nelsif (condition == 2) {\n  ; # do nothing aka carry on\n}\nelse {\n  exit;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if ((condition == 1) || (condition == 2)) {\n  if (condition == 1) {\n    do something\n  }\n}\nelse {\n  exit;\n}\n</code></pre>\n\n<p>are equivalent to</p>\n\n<pre><code>if (condition == 1) {\n  do something\n}\nelsif (condition != 2) {\n  exit;\n}\n</code></pre>\n\n<p>None of the above test for \"one or the other but not both and not neither\". For that, you'd need the following:</p>\n\n<pre><code>if (condition == 1 || condition == 2) {\n  do something\n}\n</code></pre>\n\n<p>Since <code>condition</code> can't be both 1 and 2, no further checks are needed. On the other hand, if you had two independent conditions, you could literally use xor.</p>\n\n<pre><code>if (condition1 xor condition2) {\n  do something\n}\n</code></pre>\n\n<p>Warning: This is a low-precedence operator (like <code>not</code>, <code>and</code> and <code>or</code>), so you may need to put parens around both of the expressions it has for operands.</p>\n"}, {"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 0, "last_activity_date": 1567327347, "last_edit_date": 1567327347, "creation_date": 1567287198, "answer_id": 57741729, "question_id": 57735341, "link": "https://stackoverflow.com/questions/57735341/structure-or-syntax-for-empty-if-elsif-else-block-in-perl/57741729#57741729", "title": "Structure or syntax for empty if/elsif/else block in perl", "body": "<pre><code>my %dispatch = {\n    1 =&gt; sub { dosomething() },\n    2 =&gt; sub { dosomethingelse() },\n}\n\nexists $dispatch{$condition}  ?\n    $dispatch{$condition}-&gt;() :\n    do_default();\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 57735641, "answer_count": 2, "score": 0, "last_activity_date": 1567327347, "creation_date": 1567227976, "question_id": 57735341, "link": "https://stackoverflow.com/questions/57735341/structure-or-syntax-for-empty-if-elsif-else-block-in-perl", "title": "Structure or syntax for empty if/elsif/else block in perl", "body": "<p>This amounts to testing for xor (one or the other but not both and not neither) where the task demands something is done for the one but not for the other but we abandon the project if both or neither.</p>\n\n<p>This example might be most to the point but the empty block doesn't sit well with me</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if (condition == 1) {\n  do something\n}\nelsif (condition == 2) {\n  ; # do nothing aka carry on\n}\nelse {\n  exit;\n}\n</code></pre>\n\n<p>Nesting seems no better and in this example misses (ie, does not validate) the second condition</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if (condition) {\n  if (condition == 1) {\n    do something\n  }\n}\nelse {\n  exit;\n}\n</code></pre>\n\n<p>Combining both of the above avoids the empty block and will work but forces redundant testing and seems inefficient.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ((condition == 1) || (condition == 2)) {\n  if (condition == 1) {\n    do something\n  }\n}\nelse {\n  exit;\n}\n</code></pre>\n\n<p>Is there an alternative I haven't thought of? Why might one choose one structure over another? Thanks for your insights.</p>\n"}, {"tags": ["perl", "instagram"], "answers": [{"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": true, "score": 5, "last_activity_date": 1567242611, "last_edit_date": 1567242611, "creation_date": 1567207832, "answer_id": 57734117, "question_id": 57734069, "link": "https://stackoverflow.com/questions/57734069/perl-wwwmechanize-instagram/57734117#57734117", "title": "Perl WWW::Mechanize Instagram", "body": "<p>No. <code>WWW::Mechanize</code> can only deal with vanilla HTML. It can not deal with Javascript. You need a headless browser like <code>WWW::Mechanize::Chrome</code>. Instagram offers an <a href=\"https://www.instagram.com/developer/\" rel=\"nofollow noreferrer\">API</a> though, you're probably better of using that if it can do what you need.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12001474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1567219535, "accepted_answer_id": 57734117, "answer_count": 1, "score": 0, "last_activity_date": 1567259449, "creation_date": 1567207234, "last_edit_date": 1567259449, "question_id": 57734069, "link": "https://stackoverflow.com/questions/57734069/perl-wwwmechanize-instagram", "closed_reason": "Needs details or clarity", "title": "Perl WWW::Mechanize Instagram", "body": "<p>Is it possible to use WWW::Mechanize in Perl code to login on Instagram? When I load the login form under <a href=\"https://www.instagram.com/accounts/login/?source=auth_switcher\" rel=\"nofollow noreferrer\">https://www.instagram.com/accounts/login/?source=auth_switcher</a> my code shows an error that it cannot find the login form.</p>\n\n<pre><code>my $browser;\nmy $res;\nmy $url;\n\nmy $username;\nmy $password;\nmy @formlist;\n\n$username = \"aaa\";\n$password = \"bbb\";\n\n$browser = WWW::Mechanize-&gt;new();\n\n$url = \"https://www.instagram.com/accounts/login/?source=auth_switcher\";\n$browser-&gt;get($url);\n\n$browser-&gt;form_number(1);\n$browser-&gt;field(\"username\", $username);\n$browser-&gt;field(\"password\", $password);\n$browser-&gt;click();\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11992792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD86g3kyhuuueUVwB_Pg9mIboDj6K85DgeV-VK_=k-s128", "display_name": "Saptak Acharjee", "link": "https://stackoverflow.com/users/11992792/saptak-acharjee"}, "edited": false, "score": 0, "creation_date": 1567488206, "post_id": 57745834, "comment_id": 101966282, "body": "It&#39;s working. Thanks a lot. Really there are dozens of ways to write a problem code in Perl. Below I&#39;ve given another code that I did before getting this solution and that worked also. Really Interesting."}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 1, "last_activity_date": 1567339360, "creation_date": 1567339360, "answer_id": 57745834, "question_id": 57732839, "link": "https://stackoverflow.com/questions/57732839/save-contents-of-those-files-which-contain-a-specific-known-string-in-an-single/57745834#57745834", "title": "Save contents of those files which contain a specific known string in an single .txt or .tmp file using perl", "body": "<p>Well, you tried I guess. </p>\n\n<p>Welcome to the wonderful world of Perl where there are always a dozen ways of doing X :-) One possible way to achieve what you want. I put in a lot of comments I hope are helpful. It's also a bit verbose for the sake of clarity. I'm sure it could be golfed down to 5 lines of code. </p>\n\n<pre><code>use warnings;  # Always start your Perl code with these two lines, \nuse strict;    # and Perl will tell you about possible mistakes\n\nuse experimental 'signatures';\n\nuse File::Slurp;\n\n# this is a subroutine/function, a block of code that can be called from \n# somewhere else. it takes to arguments, that the caller must provide\n\nsub find_in_file( $filename, $what_to_look_for ) \n{\n    # the open function opens $filename for reading \n    # (that's what the \"&lt;\" means, \"&gt;\" stands for writing)\n    # if successfull open will return we will have a \"file handle\" in the variable $in\n    # if not open will return false ... \n    open( my $in, \"&lt;\", $filename )\n        or die $!; # ... and the program will exit here. The variable $! will contain the error message\n\n    # now we read the file using a loop\n    # readline will give us the next line in the file\n    # or something false when there is nothing left to read\n    while ( my $line = readline($in) )\n    {\n        # now we test wether the current line contains what\n        # we are looking for.\n        # the index function gives us the index of a string within another string.\n        # for example index(\"abc\", \"c\") will give us 3\n        if ( index( $line, $what_to_look_for ) &gt; 0 )\n        {\n            # we found what we were looking for\n            # so we don't need to keep looking in this file anymore\n            # so we must first close the file\n            close( $in );\n\n            # and then we indicate to the caller the search was a successfull\n            # this will immedeatly end the subroutine\n            return 1;\n        }\n    }\n\n    # If we arrive here the search was unsuccessful\n    # so we tell that to the caller\n    return 0;\n}\n\n\n# Here starts the main program\n# First we get a list of files\n# we want to look at\nmy @possible_files = glob( \"where/your/files/are/output_*.txt\" );\n\n# Here we will store the files that we are interested in, aka that contain PYAG_GENERATED\nmy @wanted_files;\n\n# and now we can loop over the files and see if they contain what we are looking for\nforeach my $filename ( @possible_files )\n{\n    # here we use the function we defined earlier\n    if ( find_in_file( $filename, \"PYAG_GENERATED\" ) )\n    {\n        # with push we can add things to the end of an array\n        push @wanted_files, $filename;\n    }\n}\n\n# We are finished searching, now we can start adding the files together\n# if we found any\nif ( scalar @wanted_files &gt; 0 )\n{\n    # Now we could code that us ourselves, open the files, loop trough them and write out\n    # line by line. But we make life easy for us and just\n    # use two functions from the module File::Slurp, which comes with Perl I believe\n    # If not you have to install it\n    foreach my $filename ( @wanted_files )\n    {\n        append_file( \"new_1.txt\", read_file( $filename ) );\n    }\n\n    print \"Output created from \" . (scalar @wanted_files) . \" files\\n\";\n}\nelse\n{\n    print \"No input files\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 11992792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD86g3kyhuuueUVwB_Pg9mIboDj6K85DgeV-VK_=k-s128", "display_name": "Saptak Acharjee", "link": "https://stackoverflow.com/users/11992792/saptak-acharjee"}, "is_accepted": false, "score": 0, "last_activity_date": 1567488546, "creation_date": 1567488546, "answer_id": 57765534, "question_id": 57732839, "link": "https://stackoverflow.com/questions/57732839/save-contents-of-those-files-which-contain-a-specific-known-string-in-an-single/57765534#57765534", "title": "Save contents of those files which contain a specific known string in an single .txt or .tmp file using perl", "body": "<pre><code>use strict;\nuse warnings;\nmy @a;\nmy $i=1;\nmy $find1=\"PYAG_GENERATED\"; \nmy $n=1;\nmy $total_files=47276; #got this no. of files by writing 'ls' command in the terminal\nwhile($n&lt;=$total_files){\nopen(NEW,\"&lt;output_$n.txt\") or die \"could not open:$!\";\nmy $join=join('',&lt;NEW&gt;);\n$a[$i]=$join;\n#print \"$a[10]\";\n$n++;\n$i++;\n}\nclose NEW;\nfor($i=1;$i&lt;=$total_files;$i++){\n    if($a[$i]=~m/$find1/){\n    open(NEW1,\"&gt;&gt;new_1.tmp\") or die \"could not open:$!\";\n    print NEW1 $a[$i];\n    }\n}\nclose NEW1;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11992792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD86g3kyhuuueUVwB_Pg9mIboDj6K85DgeV-VK_=k-s128", "display_name": "Saptak Acharjee", "link": "https://stackoverflow.com/users/11992792/saptak-acharjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567488546, "creation_date": 1567196615, "question_id": 57732839, "link": "https://stackoverflow.com/questions/57732839/save-contents-of-those-files-which-contain-a-specific-known-string-in-an-single", "title": "Save contents of those files which contain a specific known string in an single .txt or .tmp file using perl", "body": "<p>I'm trying to write a perl script where I'm trying to save whole contents of those files which contain a specific string 'PYAG_GENERATED', in a single .txt/.tmp file one after another. These file names are in a specific pattern and this pattern is 'output_nnnn.txt' where nnnn is 0001,0002 and so on. But I don't know how many number of files are present with this 'output_nnnn.txt' name. \nI'm new in perl and I don't know how I can resolve this issue to get the output correctly. Can anyone help me. Thanks in advance. </p>\n\n<p>I've tried to write perl script in different ways but nothing is coming in output file. I'm giving here one of those I've tried. 'new_1.txt' is the new file where I want to save the expected output and \"PYAG_GENERATED\" is that specific string I'm finding for in the files.</p>\n\n<pre><code>open(NEW,\"&gt;&gt;new_1.txt\") or die \"could not open:$!\";\n$find2=\"PYAG_GENERATED\";\n$n='0001';\nwhile('output_$n.txt'){\n    if(/find2/){\n    print NEW;\n    }\n    $n++;\n}\nclose NEW;\n</code></pre>\n\n<p>I expect that the output file 'new_1.txt' will save the whole contents of the the files(with filename pattern 'output_nnnn.txt') which have 'PYAG_GENERATED' string at least once inside.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567193580, "post_id": 57731972, "comment_id": 101904665, "body": "Have you tried to install it? Try <code>cpan Devel::CheckLib</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567238508, "post_id": 57731972, "comment_id": 101911652, "body": "When you do the installation manually (e.g. using <code>perl Makefile.PL</code>), you need to install the distribution&#39;s dependencies. These are usually listed in the <code>README</code> file in the distribution. Or you could simple use <code>cpan DBD::mysql</code> and let <code>cpan</code> handle those for you."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1567238720, "creation_date": 1567238720, "answer_id": 57736273, "question_id": 57731972, "link": "https://stackoverflow.com/questions/57731972/problems-installing-dbdmysql-for-perl-on-sun-unix/57736273#57736273", "title": "Problems Installing DBD::mysql for Perl on Sun Unix", "body": "<p>When you do the installation manually (e.g. using <code>perl Makefile.PL</code>), you need to install the distribution's dependencies. These are usually listed in a <code>README*</code> file in the distribution (not here) and in a <code>META.*</code> file.</p>\n\n<pre><code>\"prereqs\" : {\n   \"configure\" : {\n      \"requires\" : {\n         \"DBI\" : \"1.609\",\n         \"Data::Dumper\" : \"0\",\n         \"Devel::CheckLib\" : \"1.09\",\n         \"ExtUtils::MakeMaker\" : \"0\"\n      }\n   },\n   \"build\" : {\n      \"requires\" : {\n         \"ExtUtils::MakeMaker\" : \"0\"\n      }\n   },\n   \"test\" : {\n      \"requires\" : {\n         \"Test::Deep\" : \"0\",\n         \"Test::Simple\" : \"0.90\",\n         \"Time::HiRes\" : \"0\",\n         \"bigint\" : \"0\"\n      },\n      \"recommends\" : {\n         \"Proc::ProcessTable\" : \"0\"\n      },\n      \"suggests\" : {\n         \"Test::DistManifest\" : \"0\",\n         \"Test::Pod\" : \"1.00\"\n      }\n   },\n   \"runtime\" : {\n      \"requires\" : {\n         \"DBI\" : \"1.609\",\n         \"perl\" : \"5.008001\"\n      }\n   }\n}\n</code></pre>\n\n<p>(The numbers represent minimum versions, and the <code>perl</code> dependency refers to the version of Perl &mdash;in this case 5.8.1&mdash; rather than a module.)</p>\n\n<p>Or you could simple use the following command and let <code>cpan</code> handle the dependencies for you.</p>\n\n<pre><code>cpan DBD::mysql\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10944925"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567238720, "creation_date": 1567191548, "last_edit_date": 1567238548, "question_id": 57731972, "link": "https://stackoverflow.com/questions/57731972/problems-installing-dbdmysql-for-perl-on-sun-unix", "title": "Problems Installing DBD::mysql for Perl on Sun Unix", "body": "<p>Trying to add <code>MySQL</code> to my existing Perl installation.</p>\n\n<p>I am using <code>DBD-mysql-4.050</code> and then running <code>perl Makefile.PL</code>, \nbut I get this <strong>error</strong>:</p>\n\n<blockquote>\n  <p>Can't locate Devel/CheckLib.pm in @INC</p>\n</blockquote>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1567190805, "post_id": 57731694, "comment_id": 101903708, "body": "<code>$@</code> is &quot;The currently raised exception or the Perl syntax error message from the last <code>eval</code> operation.&quot; You should examine it."}, {"owner": {"reputation": 201, "user_id": 10090133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omfbo.png?s=128&g=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/10090133/marisa"}, "reply_to_user": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1567192766, "post_id": 57731694, "comment_id": 101904380, "body": "@Jeff Y: And again, I feel like a dope. I screwed up a query and didn&#39;t realize it. Logged $@ and saw it right away. Thanks man."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 1, "creation_date": 1567193346, "post_id": 57731694, "comment_id": 101904589, "body": "Welcome. Don&#39;t feel bad for mistakes; everyone makes them. The moral is: don&#39;t leave any source of debug information behind (unexamined)."}], "owner": {"reputation": 201, "user_id": 10090133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omfbo.png?s=128&g=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/10090133/marisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567189989, "creation_date": 1567189989, "question_id": 57731694, "link": "https://stackoverflow.com/questions/57731694/perl-prepare-and-execute-multiple-queries-then-write-each-to-csv", "title": "Perl - Prepare and Execute Multiple Queries then Write Each to CSV", "body": "<p>I am working on report automation and I need to be able to process multiple SQL queries, one right after the other then dump those results to a CSV file. I need to call two stored procedures to generate temporary tables that store the necessary data. I have gotten it working with one SP call and one prepare and execute. However, when I introduce the second SP and prepare/execute, it's not working and immediately fails out.</p>\n\n<p><code>$getStoreData</code> returns one row of information where <code>$getDepartmentData</code> returns multiple rows. The two do not have the same number of headers. Even if I limit it to one data query with the two SP calls, I get the same behavior so I'm assuming it's failing on multiple SP calls. But I'm not entirely sure.</p>\n\n<pre><code>eval {\n    $executeStoreDataSP = $storeConnection-&gt;prepare($storeDataSP);\n    $executeStoreDataSP-&gt;execute() or $logger-&gt;error(\"Failed to execute store SP.\");\n    $executeDepartmentDataSP = $storeConnection-&gt;prepare($departmentDataSP);\n    $executeDepartmentDataSP-&gt;execute() or $logger-&gt;error(\"Failed to execute dept SP.\");\n    $getStoreData = $storeConnection-&gt;prepare($storeDataSql);\n    $getStoreData-&gt;execute() or $logger-&gt;error(\"Failed to gather store-level data.\");\n    $getDepartmentData = $storeConnection-&gt;prepare($departmentDataSql);\n    $getDepartmentData-&gt;execute() or $logger-&gt;error(\"Failed to gather department-level data.\");\n};\nif ($@) {\n    $logger-&gt;info(\"Failed to extract data for $storeInfo[0].\");\n}\nelse {\n    # Print Store Info/Data\n    $reportCsv-&gt;print($reportOutput, \\@headersStoreData);\n    $reportCsv-&gt;print($reportOutput, $getStoreData);\n\n    # Print Department Data\n    $reportCsv-&gt;print($reportOutput, \\@headersDepartmentData);\n    while (my $reportData = $getDepartmentData-&gt;fetchrow_arrayref) {\n        $reportCsv-&gt;print($reportOutput, $reportData);\n    }\n}\n</code></pre>\n\n<p>When I run the script, it immediately evaluates to having failed the previous conditions. I have tested these individually and they work when run in the MySQL CLI. I'm not sure why it would immediately fail. I would expect it to write the results as it was previously.</p>\n"}, {"tags": ["json", "perl", "utf-8", "encode"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1567175466, "post_id": 57728268, "comment_id": 101897559, "body": "<a href=\"https://www.fileformat.info/info/unicode/char/0421/index.htm\" rel=\"nofollow noreferrer\">Unicode Character &#39;CYRILLIC CAPITAL LETTER ES&#39; (U+0421)</a>"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1567205624, "post_id": 57728268, "comment_id": 101907727, "body": "&quot;got json&quot;: What is the Content-Type response header value?"}, {"owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1567233875, "post_id": 57728268, "comment_id": 101910843, "body": "@mob I have seen this page, but it didn&#39;t help me to make my code work)"}, {"owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1567233947, "post_id": 57728268, "comment_id": 101910858, "body": "@TomBlodget <code>&#39;application&#47;json; charset=utf-8&#39;</code>"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1567259077, "post_id": 57728268, "comment_id": 101916121, "body": "It seems you are confusing yourself with your debugging output. The original response processing works or could work as in the answer by @ikegami"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567233411, "post_id": 57729791, "comment_id": 101910780, "body": "<i>decode_json/from_json will correctly return &quot;\u0421orrect&quot;</i> nope, I still get \u0420\u040eorrect"}, {"owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567233556, "post_id": 57729791, "comment_id": 101910796, "body": "I performed <code>use JSON::XS qw( decode_json );</code>  <code>my $json_utf8 = &#39;{&quot;value&quot;:&quot;\\u0421orrect&quot;}&#39;;</code> <code>my $data = decode_json($json_utf8);</code> <code>open(my $fh, &#39;&gt;:encoding(cp1251)&#39;, &quot;test.txt&quot;)</code> <code>or die(&quot;Can&#39;t create \\&quot;test.txt\\&quot;: $!\\n&quot;);</code> <code>print $fh $data-&gt;{&#39;value&#39;};</code> <code>say $data-&gt;{&#39;value&#39;};</code> and got \u0420\u040eorrect and, surprisingly, emty text file...."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567233878, "post_id": 57729791, "comment_id": 101910844, "body": "It will print the wrong thing to STDOUT because you didn&#39;t encode what you send to STDOUT. This is covered by my answer already. It didn&#39;t create an empty file as you claim, however. It correctly writes <code>\u0421orrect</code> encoded using cp1251 to the file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567234259, "post_id": 57729791, "comment_id": 101910907, "body": "Well, if you got the error <code>Can&#39;t call method &quot;say&quot; on unblessed reference</code>, it&#39;s because you didn&#39;t add <code>use feature qw( say );</code>. And of course, you should ALWAYS use <code>use strict; use warnings;</code>, though that shouldn&#39;t have an effect here."}, {"owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567235738, "post_id": 57729791, "comment_id": 101911178, "body": "Sorry, it was my mistake, I got Correct into file, I don&#39;t know what it was and whay I didn&#39;t see this word. And I encodid STDUT using <code>use PerlIO::encoding;</code> but got \\x{0421}orrect... Any way Correct in file - it is a big progress) Howewer,  I am writing API, so I should process this json and return it in correct form... How can I made this word become <code>Correct</code> into my code?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567237820, "post_id": 57729791, "comment_id": 101911533, "body": "<code>use PerlIO::encoding;</code> doesn&#39;t do anything. You&#39;d need <code>use open &#39;:std&#39;, &#39;:encoding(...)&#39;;</code>. Again, this is covered (by a link) in my answer."}, {"owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "edited": false, "score": 0, "creation_date": 1567281234, "post_id": 57729791, "comment_id": 101921423, "body": "Of course, I used not only <code>use PerlIO::encoding;</code>. I tried to encode stdout by using <code>binmode(STDOUT, &quot;:utf8&quot;);</code> but it brought me an error, so I wrote <code>{    local $PerlIO::encoding::fallback = Encode::PERLQQ();    binmode STDOUT, &quot;:encoding(cp1252)&quot;;}</code> It didn&#39;t make my code work (I still got \\x{0421} orrect). But it didn&#39;t give me any errors too, what made me think that I am on the right way and problem still not in encoding stdout) Finally I used exactly what you wrote <code>use open &#39;:std&#39;, &#39;:encoding(cp1251)&#39;;</code> and... it works, I get this magical &quot;Correct&quot; on my console! Thank you so much!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1567180492, "last_edit_date": 1567180492, "creation_date": 1567179955, "answer_id": 57729791, "question_id": 57728268, "link": "https://stackoverflow.com/questions/57728268/how-to-convert-u0421-into-letter-c/57729791#57729791", "title": "How to convert \\u0421 into letter &quot;C&quot;?", "body": "<p>You mention escaping multiple times, but you want to do the opposite (unescape).</p>\n\n<p><code>decode_json</code>/<code>from_json</code> will correctly return \"\u0421orrect\" (Where the \"C\" is CYRILLIC CAPITAL LETTER ES).</p>\n\n<pre><code>use JSON::XS qw( decode_json );\n\nmy $json_utf8 = '{\"value\":\"\\u0421orrect\"}';\nmy $data = decode_json($json_utf8);\n</code></pre>\n\n<hr>\n\n<p>You do need to encode your outputs, though. For example, if you have Cyrillic-based Windows system, and you wanted to create a native file, you could use</p>\n\n<pre><code>open(my $fh, '&gt;:encoding(cp1251)', $qfn)\n   or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\nsay $fh $data-&gt;{value};\n</code></pre>\n\n<p>If you want to hardcode the encoding, or if you're interested in the encoding output to STDOUT and STDERR as well, check out <a href=\"https://www.perlmonks.org/?node_id=1231890\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1567325247, "creation_date": 1567325247, "answer_id": 57744256, "question_id": 57728268, "link": "https://stackoverflow.com/questions/57728268/how-to-convert-u0421-into-letter-c/57744256#57744256", "title": "How to convert \\u0421 into letter &quot;C&quot;?", "body": "<p>Apologies if you realise this already - I just think it's worth pointing out so we're all on the same page.</p>\n\n<ul>\n<li>Character number <code>\\x{0421}</code> has the description <a href=\"https://www.mclean.net.nz/ucf/?c=U+0421\" rel=\"nofollow noreferrer\">\"CYRILLIC CAPITAL LETTER ES\"</a> and looks like this: \u0421</li>\n<li>Character number <code>\\x{0043}</code> has the description <a href=\"https://www.mclean.net.nz/ucf/?c=U+0043\" rel=\"nofollow noreferrer\">\"LATIN CAPITAL LETTER C\"</a> and looks like this: C</li>\n</ul>\n\n<p>So depending on the font you're using, it's entirely likely that the two characters appear identical.</p>\n\n<p>You asked \"How can I encode this text?\" but you didn't explain what you mean by that or why you want to \"encode\" it.  There is no encoding that will convert '\u0421' (\\x{0421}) into 'C' (\\x{0043}) - they are two different characters from two different alphabets.</p>\n\n<p>So the question is, what are you trying to achieve?  Are you trying to check if the string returned from the server matched <code>\"Correct\"</code>?  If so, that simply won't work, because the server is returning the string <code>\"\u0421orrect\"</code>.  They might look the same, but they are two different strings.</p>\n\n<p>It's possible that whole situation is an error in the server code and it should be returning <code>\"Correct\"</code>.  If that is the case and you can't rely on the server reliably returning the <code>\"Correct\"</code>, one workaround would be to use a <a href=\"https://perldoc.perl.org/5.30.0//perlop.html#tr%2f_SEARCHLIST_%2f_REPLACEMENTLIST_%2fcdsr\" rel=\"nofollow noreferrer\">character replacement</a>, to \"normalise\" the string before you inspect its contents.  For example:</p>\n\n<pre><code>use JSON::XS qw( decode_json );\n\nmy $response = &lt;&lt;EOF;\n{\n    \"status\": \"\\u0421orrect\"\n}\nEOF\n\nmy $data = decode_json($response);\n\nmy $status = $data-&gt;{status};\n$status =~ tr/\\x{0421}/C/;\n\nif($status eq \"Correct\") {\n    say \"The status is correct\";\n}\nelse {\n    say \"The status is not correct\";\n}\n</code></pre>\n\n<p>This code will work now, and in the future if the server code is fixed to return <code>\"Correct\"</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 11999665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oolld0qeF58/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOA7csgn-MP5mC-2SeocUrhuk4qw/photo.jpg?sz=128", "display_name": "\u041cargarita", "link": "https://stackoverflow.com/users/11999665/%d0%9cargarita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 57729791, "answer_count": 2, "score": 1, "last_activity_date": 1567325247, "creation_date": 1567173953, "last_edit_date": 1567317479, "question_id": 57728268, "link": "https://stackoverflow.com/questions/57728268/how-to-convert-u0421-into-letter-c", "title": "How to convert \\u0421 into letter &quot;C&quot;?", "body": "<p>I made a post query to server and got json. It contains wrong symbol: instead \"Correct\" I got \"\\u0421orrect\". How can I encode this text?</p>\n\n<p>A parse_json function performs it like \"\u0420\u040eorrect\";</p>\n\n<p>I found out that</p>\n\n<pre><code>$a = \"\\x{0421}orrect\";\n$a= encode(\"utf-8\",  $a);\n</code></pre>\n\n<p>returns \"\u0420\u040eorrect\", and </p>\n\n<pre><code>$a = \"\\x{0421}orrect\";\n$a= encode(\"cp1251\",  $a);\n</code></pre>\n\n<p>returns \"Correct\"</p>\n\n<p>So I've decided to change \\u to \\x and then to use cp1251.</p>\n\n<pre><code>\\u to \\x\n</code></pre>\n\n<p>I wrote:</p>\n\n<pre><code>Encode::Escape::enmode 'unicode-escape', 'perl';\nEncode::Escape::demode 'unicode-escape', 'python';       \n$content= encode 'unicode-escape', decode 'unicode-escape', $content;\n</code></pre>\n\n<p>and got \\x{0421}orrect.</p>\n\n<p>And then I tried:</p>\n\n<pre><code>$content = encode( 'cp1251', $content );\n</code></pre>\n\n<p>And... nothing changed! I still have \\x{0421}orrect...</p>\n\n<p>I notice something interesting:</p>\n\n<pre><code>$a = \"\\x{0421}orrect\";\n$a= encode(\"cp1251\",  $a);\n</code></pre>\n\n<p>returns \"Correct\"</p>\n\n<p>BUT</p>\n\n<pre><code>$a = '\\x{0421}orrect';\n$a= encode(\"cp1251\",  $a);\n</code></pre>\n\n<p>still returns \"\\x{0421}orrect\".</p>\n\n<p>Maybe this is a key, but I don't know what I can do with this.</p>\n\n<p>I've already tried to encode and decode, Encode:: from_to,JSON::XS and utf8.</p>\n"}, {"tags": ["html", "perl", "cgi"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1567174790, "post_id": 57727740, "comment_id": 101897189, "body": "What prints HTML output? System?"}, {"owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "edited": false, "score": 0, "creation_date": 1567174891, "post_id": 57727740, "comment_id": 101897241, "body": "The piece of code above prints the output."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1567175839, "post_id": 57727740, "comment_id": 101897773, "body": "You seem to be confused between standard text output and HTML. Try piping the output of your code above through a second perl one-liner: <code>| perl  -pe &#39;s&#47;$&#47;&lt;br&gt;&#47;&#39;</code> before sending your output into an HTML document."}, {"owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "edited": false, "score": 0, "creation_date": 1567176104, "post_id": 57727740, "comment_id": 101897939, "body": "The HTML is embedded in the .cgi file. After the above codesnippet there&#39;s just a <code>print &quot;&lt;&#47;body&gt;&quot;;</code>, so where should <code>| perl -pe &#39;s&#47;$&#47;&lt;br&gt;&#47;&#39;</code> be placed?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1567176761, "post_id": 57727740, "comment_id": 101898314, "body": "The way your code is currently written I assume that system is producing output. If you wish to alter the output that system is producing you need to capture it into your program, and then alter it, and then print it.  Capturing can be done pretty easily with Capture::Tiny, or with backticks, or less simply with one of the IPC::Open* modules."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1567176819, "post_id": 57727740, "comment_id": 101898355, "body": "I think I&#39;m starting to understand; this is all automated and direct. Maybe try adding this line before the <code>system</code> call (or the <code>if</code>) above then?: <code>print &quot;Content-type: text&#47;plain\\n\\n&quot;;</code> (Like in this example: <a href=\"https://en.wikipedia.org/wiki/Common_Gateway_Interface#Example\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Common_Gateway_Interface#Example</a> .)"}, {"owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "edited": false, "score": 0, "creation_date": 1567177055, "post_id": 57727740, "comment_id": 101898466, "body": "Pretty at the beginning of the script there&#39;s already this: <code>print $cgi-&gt;header(&#39;text&#47;html&#39;);</code> and if I try your suggestion then it simply prints: Content-type: text/plain"}, {"owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1567177241, "post_id": 57727740, "comment_id": 101898571, "body": "@DavidO how would you implement that in this case?"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1567177245, "post_id": 57727740, "comment_id": 101898573, "body": "Then change that to be <code>&#39;text&#47;plain&#39;</code>, or else you will have to modify your <code>ranking</code> command to output <b>HTML</b> rather than plain text. You seem to have a conflict between what your page is declaring vs. what your program is outputting (html vs. plain text; they are <b>different</b>)."}, {"owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "edited": false, "score": 0, "creation_date": 1567177406, "post_id": 57727740, "comment_id": 101898656, "body": "I see, but if I change it to text/plain then the entire HTML page isn&#39;t &#39;rendered&#39;. Just the code appears. Maybe you  are right I need to modify the <code>ranking</code> command, but is there a solution for this problem? Would be interesting"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1567178165, "post_id": 57727740, "comment_id": 101899050, "body": "Well, the other solution is to &quot;capture&quot; and massage the output of the <code>ranking</code> command as @DavidO is suggesting. I will put proposed code into an answer below in a moment."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567180532, "post_id": 57729557, "comment_id": 101900095, "body": "You can just <code>s&#47;\\n&#47;&lt;br&gt;&#47;g</code> without <code>&#47;m</code>."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567180674, "post_id": 57729557, "comment_id": 101900148, "body": "True. I wanted to leave the <code>\\n</code>s in for readability though, so would suggest <code>s&#47;\\n&#47;&lt;br&gt;\\n&#47;g</code>. (<code>$</code> doesn&#39;t <b>match</b> <code>\\n</code>, it zero-matches just before the <code>\\n</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567182068, "post_id": 57729557, "comment_id": 101900673, "body": "Injection bug!! <code>&amp;</code> and <code>&lt;</code> should also be escaped"}], "tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": true, "score": 1, "last_activity_date": 1567178968, "creation_date": 1567178968, "answer_id": 57729557, "question_id": 57727740, "link": "https://stackoverflow.com/questions/57727740/how-to-add-new-lines-to-stdout-in-perl/57729557#57729557", "title": "How to add new lines to stdout in perl", "body": "<p>Replace the <code>system</code> call with the backtick operator in Perl to capture your output into a variable, then massage the output before printing:</p>\n\n<pre><code>if ($cmd eq 'set'){\n         $_ = `ranking set $bug_id $rank`;\n         $? == 0\n           or die \"command 'ranking set $bug_id $rank' failed: $?\";\n         s/$/&lt;br&gt;/mg;\n         print;\n }\n</code></pre>\n\n<p>The <code>/m</code> on the <code>s/</code> is needed so that the text is treated as <code>m</code>ultiple lines (<code>$</code> matches at <code>\\n</code>). The <code>/g</code> says \"do all occurrences\" (all lines).</p>\n\n<p>Maybe this will work for you. (Caveat: untested.)</p>\n"}], "owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 57729557, "answer_count": 1, "score": 0, "last_activity_date": 1567178968, "creation_date": 1567171921, "question_id": 57727740, "link": "https://stackoverflow.com/questions/57727740/how-to-add-new-lines-to-stdout-in-perl", "title": "How to add new lines to stdout in perl", "body": "<p>I have this piece of code at the end of a .cgi-file:</p>\n\n<pre><code>if ($cmd eq 'set'){\n         my @args = ('ranking', 'set', $bug_id, $rank);\n         system(@args) == 0\n           or die \"system @args failed: $?\";\n }\n</code></pre>\n\n<p>You can input the data and it's interpreted as a system command. An example output on the HTML-page is the following:</p>\n\n<pre><code>Current ranking is 1, I will decrement all bugs with higher ranking by one Not shifting any bug, since there is another one with ranking Bug 111 removed from ranking Bug 111 inserted into ranking at position 1\n</code></pre>\n\n<p>(all in one line)</p>\n\n<p>But I need to format the output like this:</p>\n\n<pre><code>Current ranking is 1,\nI will decrement all bugs with higher ranking by one\nNot shifting any bug, since there is another one with ranking\nBug 111 removed from ranking\nBug 111 inserted into ranking at position 1\n</code></pre>\n\n<p>How can I add those new lines to the HTML-page?</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 3, "creation_date": 1567168900, "post_id": 57726859, "comment_id": 101893977, "body": "What have you tried so far?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1567169295, "post_id": 57726859, "comment_id": 101894146, "body": "Try this: <code>perl -0777 -pE &#39;s&#47;\\n\\n+&#47;&#47;g&#39; file</code>"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 1, "creation_date": 1567171065, "post_id": 57726859, "comment_id": 101895087, "body": "if <code>awk</code>, <code>awk &#39;$0==&quot;&quot;{flag=0;next}{if(!flag){flag=1;printf &quot;%s&quot;, $0}else{printf &quot;\\n%s&quot;, $0}}END{printf &quot;\\n&quot;}&#39; file</code>. If a line is empty, don&#39;t print the next line on a newline, that&#39;s what this <code>awk</code> script does."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567170810, "post_id": 57727374, "comment_id": 101894926, "body": "What if the line breaks are CRLF? Or mixed?"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567171470, "post_id": 57727374, "comment_id": 101895333, "body": "@WiktorStribi\u017cew, use the <code>\\s</code> solution in the update but change the <code>\\n</code> to <code>[\\n\\r]</code>."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567171823, "post_id": 57727374, "comment_id": 101895540, "body": "That is a wrong approach."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1567172559, "post_id": 57727374, "comment_id": 101895937, "body": "Agreed, the &quot;right&quot; approach would be to 1) detect if there is any CRLF, 2) determine which is the dominant style if there is any mixing, 3) change all CRLF to LF, 4) do the perl, 5) change all LF to CRLF if CRLF was the dominant style. But this is all beyond the scope of the question."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567250130, "post_id": 57727374, "comment_id": 101914081, "body": "@JeffY : How would we identified for CRLF characters ?"}], "tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 3, "last_activity_date": 1567171048, "last_edit_date": 1567171048, "creation_date": 1567170495, "answer_id": 57727374, "question_id": 57726859, "link": "https://stackoverflow.com/questions/57726859/append-previous-line-with-current-line-if-the-file-contains-blanks/57727374#57727374", "title": "append previous line with current line if the file contains blanks", "body": "<p>See also H\u00e5kon H\u00e6gland's comment above. This is one of those problems that lends itself to treating the whole file as one long string (with embedded newline characters). Perl has a flag <code>-0</code> for changing or turning off the default \"record separator\" definition that accomplishes this. Then you just need to realize that, depending on your definition of \"blank line\", you seem to be requesting that all sequences of <strong>two or more</strong> newline characters in a row simply be removed. (If your definition of \"blank line\" can include lines with blank characters on them (whitespace, i.e. spaces and tabs), you'll need a more complicated expression.) This compact one-liner will do it:</p>\n\n<pre><code>$ perl -0pe 's/\\n\\n+//g' blanklines\nA\nB\nC\n1D\nEB\n</code></pre>\n\n<p>Now please tell me this was not a homework assignment.</p>\n\n<p>Update: I realized a couple of additional things. 1) Since newline is included in Perl's whitespace special escape <code>\\s</code>, expanding to handle the case of blank lines having blank characters on them is <strong>not</strong> really more complex: <code>perl -0pe 's/\\n\\s+//g' blanklines</code>. 2) There is an edge case that this solution doesn't handle right: blank lines at the end of the input. I'll leave that as a problem for the student. :-)</p>\n"}], "owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1567181523, "answer_count": 1, "score": -3, "last_activity_date": 1567250011, "creation_date": 1567168437, "last_edit_date": 1567250011, "question_id": 57726859, "link": "https://stackoverflow.com/questions/57726859/append-previous-line-with-current-line-if-the-file-contains-blanks", "closed_reason": "Needs more focus", "title": "append previous line with current line if the file contains blanks", "body": "<p>I want to append lines to the previous line if the blank line is followed by the line.</p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>A\nB\nC\n1\nD\nE\nB\n</code></pre>\n\n<p><strong>Ouput:</strong></p>\n\n<pre><code>A\nB\nC\n1D\nEB\n</code></pre>\n"}, {"tags": ["perl", "date", "datetime"], "comments": [{"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 3, "creation_date": 1567153553, "post_id": 57723019, "comment_id": 101886869, "body": "what have you tried so far? show us your code. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1567393219, "post_id": 57723239, "comment_id": 101939014, "body": "I have try it as you said ,but get error msg &quot;Argument &quot;11:59:57.036&quot; isn&#39;t numeric in numeric lt (&lt;) at code/extract5Mindata.pl line 16, &lt;$fh&gt; line 21984.&quot; , I have update my question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1567420117, "post_id": 57723239, "comment_id": 101947091, "body": "Oops! Fixed. . ."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1567420103, "last_edit_date": 1567420103, "creation_date": 1567153826, "answer_id": 57723239, "question_id": 57723019, "link": "https://stackoverflow.com/questions/57723019/how-to-extract-5minutes-records-from-specific-datetime-from-txt/57723239#57723239", "title": "how to extract 5minutes records from specific datetime from txt?", "body": "<pre><code>use DateTime     qw( );\nuse Text::CSV_XS qw( );\n\nmy $dt = DateTime-&gt;now( time_zone =&gt; 'local' );\n$dt-&gt;subtract( minutes =&gt; 5 );\nmy $start_date = $dt-&gt;strftime(\"%Y-%m-%d\");\nmy $start_time = $dt-&gt;strftime(\"%H:%M:%S\");\n\nmy $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\nwhile ( my $row = $csv-&gt;getline($fh_in) ) {\n    next\n       if $row-&gt;[4] lt $start_date\n       || $row-&gt;[4] eq $start_date &amp;&amp; $row-&gt;[5] lt $start_time;\n\n    $csv-&gt;say($fh_in, $row);\n}\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567420103, "creation_date": 1567152850, "last_edit_date": 1567396438, "question_id": 57723019, "link": "https://stackoverflow.com/questions/57723019/how-to-extract-5minutes-records-from-specific-datetime-from-txt", "title": "how to extract 5minutes records from specific datetime from txt?", "body": "<p>Trying to find use perl or simple way for get 5 minutes events( from 19:25:00) and write to other txt file,</p>\n\n<p>files are in form :  </p>\n\n<pre><code>10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:28:00.178,0.000,6,....S.,212,1,40,1    \n10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:28:00.178,0.000,6,....S.,212,1,40,1\n10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:29:00.178,0.000,6,....S.,212,1,40,1\n10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:32:00.180,0.000,6,....S.,212,1,40,1\n</code></pre>\n\n<p>the results I want is ,</p>\n\n<pre><code>10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:28:00.178,0.000,6,....S.,212,1,40,1    \n10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:28:00.178,0.000,6,....S.,212,1,40,1\n10.10.10.1,10.10.10.2,6000,1433,2019-02-28,19:29:00.178,0.000,6,....S.,212,1,40,1\n</code></pre>\n\n<p>my code ,</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DateTime     qw( );\nuse Text::CSV_XS qw( );\n\nopen my $fh, '&lt;', 'in.csv';\nopen my $fo, '&gt;', 'out.txt';\nmy $dt = DateTime-&gt;now( time_zone =&gt; 'local' );\n$dt-&gt;subtract( minutes =&gt; 5 );\nmy $start_date = $dt-&gt;strftime(\"2019-02-28\");\nmy $start_time = $dt-&gt;strftime(\"17:31:22.000\");\n\nmy $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n    next\n       if $row-&gt;[4] &lt; $start_date\n       || $row-&gt;[4] == $start_date &amp;&amp; $row-&gt;[5] &lt; $start_time;\n\n      $csv-&gt;say($fh, $row);\n}\n</code></pre>\n\n<p>but get the error messgae as below,</p>\n\n<pre><code>Argument \"2019-02-28\" isn't numeric in numeric lt (&lt;) \nArgument \"11:59:57.023\" isn't numeric in numeric lt (&lt;) \n</code></pre>\n"}, {"tags": ["powershell", "perl", "svn"], "comments": [{"owner": {"reputation": 61, "user_id": 8178436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/743e4edbfb6eee223afeeb484ce38907?s=128&d=identicon&r=PG&f=1", "display_name": "Zhu", "link": "https://stackoverflow.com/users/8178436/zhu"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1567145138, "post_id": 57720918, "comment_id": 101883393, "body": "I tried and the same problem. Only in git bash does the script work."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1567145149, "creation_date": 1567145149, "answer_id": 57721300, "question_id": 57720918, "link": "https://stackoverflow.com/questions/57720918/perl-execute-system-command-without-interpolation/57721300#57721300", "title": "perl execute system command without interpolation", "body": "<p>Backticks use <code>cmd</code>, not Power Shell.</p>\n\n<p>On a build of Perl that uses <code>sh</code> (including macOS, MSYS and Cygwin), you should use</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $cmd = shell_quote('svn', 'commit', '-m', \"#$task_number $comment\") . ' 2&gt;&amp;1';\n`$cmd`\n</code></pre>\n\n<p>On a build of Perl that uses <code>cmd</code>, you should use </p>\n\n<pre><code>use Win32::ShellQuote qw( quote_system_cmd );\n\nmy $cmd = quote_system_cmd('svn', 'commit', '-m', \"#$task_number $comment\") . ' 2&gt;&amp;1';\n`$cmd`\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8178436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/743e4edbfb6eee223afeeb484ce38907?s=128&d=identicon&r=PG&f=1", "display_name": "Zhu", "link": "https://stackoverflow.com/users/8178436/zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57721300, "answer_count": 1, "score": 1, "last_activity_date": 1567145149, "creation_date": 1567142722, "question_id": 57720918, "link": "https://stackoverflow.com/questions/57720918/perl-execute-system-command-without-interpolation", "title": "perl execute system command without interpolation", "body": "<p>I want to call svn commit in my perl script. following codes seem to work in git bash, but not powershell:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$task_number = $ARGV[0];\n$comment     = $ARGV[1];\nprint(`svn commit -m '#$task_number $comment' 2&gt;&amp;1`);\n</code></pre>\n\n<p>when running in powershell, I get an error like </p>\n\n<p><code>svn: E200009: '$MY_WORKING_DIRECTORY\\$comment' is not under version control</code></p>\n\n<p>where $comment is just what I get in my perl script. It seems that powershell has done some interpolation. How should I change my script to fix this? Thanks in advance.</p>\n"}, {"tags": ["perl", "installation", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "edited": false, "score": 0, "creation_date": 1567131878, "post_id": 57718905, "comment_id": 101880912, "body": "Yeah, that thought occurred to me while I was driving home.  It works"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1567122559, "creation_date": 1567122559, "answer_id": 57718905, "question_id": 57718791, "link": "https://stackoverflow.com/questions/57718791/how-do-i-change-where-cpan-caches-files/57718905#57718905", "title": "How do I change where cpan caches files?", "body": "<p><code>cpan</code> likes to work out of <code>$HOME/.cpan</code>, and you probably don't want to try too hard to convince it to use something else. </p>\n\n<p>The best advice is to make a symbolic link to <code>$HOME/.cpan</code> from a more bountiful file system. </p>\n"}], "owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57718905, "answer_count": 1, "score": 1, "last_activity_date": 1567122559, "creation_date": 1567121240, "question_id": 57718791, "link": "https://stackoverflow.com/questions/57718791/how-do-i-change-where-cpan-caches-files", "title": "How do I change where cpan caches files?", "body": "<p>I'm trying to install a bunch of Perl modules.  I'm getting a lot of errors that look like this:</p>\n\n<pre><code>Cannot write to \u2018/home/mayo/foo/.cpan/sources/authors/id/C/CH/CHROMATIC/SUPER-1.20190531.tar.gz.tmp10717\u2019 (Disk quota exceeded).\n</code></pre>\n\n<p>How do I change the location of the .cpan directory?</p>\n"}, {"tags": ["git", "perl", "cmake"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567120819, "post_id": 57718159, "comment_id": 101879093, "body": "hmmm, the phrase <code>You need perl in your PATH</code> doesn&#39;t appear in any of the three repos you mentioned. Could you please narrow down the source of the message? Without knowing what check leads to the message, we can&#39;t really help you satisfy it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567121039, "post_id": 57718159, "comment_id": 101879142, "body": "It might help to make sure that both of the dirs output by <code>perl -V:&#39;(site)?bin&#39;</code> are in the PATH."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567121140, "post_id": 57718159, "comment_id": 101879161, "body": "The line feed in <code>DEFAULT_LIBDIRS=&quot;&#47;lib &#47;usr&#47;lib&quot;</code> is suspicious"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567121465, "post_id": 57718159, "comment_id": 101879234, "body": "Might be from Qt&#39;s installer, which has a script named <a href=\"https://code.qt.io/cgit/qt/qtbase.git/tree/configure\" rel=\"nofollow noreferrer\"><code>configure</code></a> which includes <a href=\"https://pastebin.com/gQRC6try\" rel=\"nofollow noreferrer\">this</a>. You might want to modify that file to add debugging information. What does it see for <code>$PATH</code>? What does <code>$WHICH perl</code> output and is its error code?"}, {"owner": {"reputation": 36, "user_id": 11995076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BjBTpAsvyQ4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVaKNRmiXjNPCQgtpukhdOQKC8nw/photo.jpg?sz=128", "display_name": "Alessandro Pierro", "link": "https://stackoverflow.com/users/11995076/alessandro-pierro"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567155471, "post_id": 57718159, "comment_id": 101887786, "body": "I could add a full log of the whole process. I&#39;ll update the post in order to answer your questions."}], "owner": {"reputation": 36, "user_id": 11995076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BjBTpAsvyQ4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVaKNRmiXjNPCQgtpukhdOQKC8nw/photo.jpg?sz=128", "display_name": "Alessandro Pierro", "link": "https://stackoverflow.com/users/11995076/alessandro-pierro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567157254, "creation_date": 1567115747, "last_edit_date": 1567157254, "question_id": 57718159, "link": "https://stackoverflow.com/questions/57718159/installing-osmand-ios-missing-perl-in-path", "title": "Installing OsmAnd-ios, missing perl in PATH", "body": "<p>I am trying to install OsmAnd-ios project from Github page <a href=\"https://github.com/osmandapp/OsmAnd-ios\" rel=\"nofollow noreferrer\">https://github.com/osmandapp/OsmAnd-ios</a></p>\n\n<p>I did something like this:</p>\n\n<ul>\n<li><code>git clone https://github.com/osmandapp/OsmAnd-ios.git</code></li>\n<li><code>repo init -u https://github.com/osmandapp/OsmAnd-manifest -m readonly.xml</code></li>\n<li><code>cd OsmAnd-ios</code></li>\n<li><code>git clone https://github.com/osmandapp/OsmAnd-core.git</code></li>\n<li>rename the folder <code>OsmAnd-core</code> to <code>core</code></li>\n<li><code>git clone https://github.com/osmandapp/OsmAnd-build.git</code></li>\n<li>rename the folder <code>OsmAnd-build</code> to <code>build</code></li>\n<li>open <code>./prepare.sh</code> and update line <code>ROOT=\"$SRCLOC/../\"</code> to <code>ROOT=\"$SRCLOC/\"</code></li>\n<li>run command <code>./prepare.sh</code></li>\n</ul>\n\n<p>In my case this leads to the following error:</p>\n\n<pre><code>DEFAULT_LIBDIRS=\"/lib\n/usr/lib\"\n\nYou need perl in your PATH to make a build from GIT.\nCannot proceed.\nFailed to configure 'qtbase-ios' for 'ios.simulator.clang.static', aborting...\nCMake Error at utils/common.cmake:58 (message):\n  Failed to build upstream \"/Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/build/../core/externals/qtbase-ios\" for ios/clang/fat: 1\nCall Stack (most recent call first):\n  qt.cmake:34 (build_upstream_ex)\n  CMakeLists.txt:240 (include)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/baked/fat-ios-clang.xcode/CMakeFiles/CMakeOutput.log\".\nFailed to bake project files 'fat-ios-clang.xcode' (1)\nFailed to generate project for XCode, aborting...\n\n</code></pre>\n\n<p>I think my perl is properly installed, I added it to the <code>$PATH</code> using the command</p>\n\n<p><code>export PATH=\"/usr/bin:$PATH\"</code>, that because the command <code>whereis perl</code> returned <code>/usr/bin/perl</code></p>\n\n<p>UPDATE #1</p>\n\n<p>This is a full log of the <code>./prepare.sh</code> command:</p>\n\n<pre><code>cli-10-105-4-243:OsmAnd-ios alessandro$ ./prepare.sh \nUpdating dependencies via CocoaPods\nUpdate all pods\nUpdating local specs repositories\n  $ /usr/bin/git -C /Users/alessandro/.cocoapods/repos/master fetch origin\n  --progress\n  remote: Enumerating objects: 3121, done.        \n  remote: Counting objects: 100% (3121/3121), done.        \n  remote: Compressing objects: 100% (2513/2513), done.        \n  remote: Total 2605 (delta 1785), reused 0 (delta 0), pack-reused 0        \n  Receiving objects: 100% (2605/2605), 272.25 KiB | 1.51 MiB/s, done.\n  Resolving deltas: 100% (1785/1785), completed with 461 local objects.\n  From https://github.com/CocoaPods/Specs\n     d46887f228d..eecdebc1214  master     -&gt; origin/master\n  $ /usr/bin/git -C /Users/alessandro/.cocoapods/repos/master rev-parse --abbrev-ref\n  HEAD\n  master\n  $ /usr/bin/git -C /Users/alessandro/.cocoapods/repos/master reset --hard\n  origin/master\n  HEAD is now at eecdebc1214 [Add] DryKline 0.1.3\n\nCocoaPods 1.8.0.beta.2 is available.\nTo update use: `sudo gem install cocoapods --pre`\n[!] This is a test version we'd love you to try.\n\nFor more information, see https://blog.cocoapods.org and the CHANGELOG for this version at https://github.com/CocoaPods/CocoaPods/releases/tag/1.8.0.beta.2\n\nAnalyzing dependencies\nPre-downloading: `QuickDialog` from `https://github.com/escoz/QuickDialog.git`\nDownloading dependencies\nUsing AFDownloadRequestOperation (2.0.1)\nUsing AFNetworking (2.5.4)\nUsing BRCybertron (1.1.1)\nUsing CocoaSecurity (1.2.4)\nUsing DACircularProgress (2.2.0)\nUsing FFCircularProgressView (0.5)\nUsing Firebase (4.0.4)\nUsing FirebaseAnalytics (4.0.2)\nUsing FirebaseCore (4.0.4)\nUsing FirebaseInstanceID (2.0.10)\nUsing FormatterKit (1.8.2)\nUsing GoogleToolboxForMac (2.2.1)\nUsing HTAutocompleteTextField (1.3.2)\nUsing JASidePanels (1.3.2)\nUsing MBProgressHUD (0.9.2)\nUsing MDFInternationalization (2.0.0)\nUsing MaterialComponents (84.0.0)\nInstalling QuickDialog 1.0.2\nUsing Reachability (3.1.1)\nUsing RegexKitLite (4.0)\nUsing SWTableViewCell (0.3.7)\nUsing TPKeyboardAvoiding (1.2.11)\nUsing UIActionSheet-Blocks (1.0.1)\nUsing UIAlertView-Blocks (1.0)\nUsing nanopb (0.3.901)\nGenerating Pods project\nIntegrating client project\nSending stats\nPod installation complete! There are 20 dependencies from the Podfile and 25 total pods installed.\n\n[!] `xcodeproj` was renamed to `project`. Please update your Podfile accordingly.\nBaking project files for cross-platform target 'fat-ios-clang'\nBaking project files 'fat-ios-clang.xcode'\nPossibly baked dir /Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/build/utils/../../baked/fat-ios-clang.xcode needs to be deleted.\nCMake Deprecation Warning at /usr/local/share/cmake-3.6/Modules/CMakeForceCompiler.cmake:79 (message):\n  The CMAKE_FORCE_C_COMPILER macro is deprecated.  Instead just set\n  CMAKE_C_COMPILER and allow CMake to identify the compiler.\nCall Stack (most recent call first):\n  targets/fat-ios-clang.cmake:11 (CMAKE_FORCE_C_COMPILER)\n  /Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/baked/fat-ios-clang.xcode/CMakeFiles/3.6.2/CMakeSystem.cmake:6 (include)\n  CMakeLists.txt:4 (project)\n\n\nCMake Deprecation Warning at /usr/local/share/cmake-3.6/Modules/CMakeForceCompiler.cmake:93 (message):\n  The CMAKE_FORCE_CXX_COMPILER macro is deprecated.  Instead just set\n  CMAKE_CXX_COMPILER and allow CMake to identify the compiler.\nCall Stack (most recent call first):\n  targets/fat-ios-clang.cmake:12 (CMAKE_FORCE_CXX_COMPILER)\n  /Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/baked/fat-ios-clang.xcode/CMakeFiles/3.6.2/CMakeSystem.cmake:6 (include)\n  CMakeLists.txt:4 (project)\n\n\nSystem is unknown to cmake, create:\nPlatform/iOS to use this system, please send your config file to cmake@www.cmake.org so it can be added to cmake\nYour CMakeCache.txt file was copied to CopyOfCMakeCache.txt. Please send that file to cmake@www.cmake.org.\nUsing cross-platform target settings from toolchain file 'targets/fat-ios-clang.cmake'\nCMAKE_TARGET_OS = ios\nCMAKE_TARGET_CPU_ARCH = fat\nCMAKE_TARGET_CPU_ARCH_FAMILY = fat\nCMAKE_SHARED_LIBS_ALLOWED_ON_TARGET = FALSE\nCMAKE_STATIC_LIBS_ALLOWED_ON_TARGET = TRUE\nCMAKE_COMPILER_FAMILY = clang\nOSMAND_OUTPUT_ROOT = /Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/build/../binaries/ios.clang$(EFFECTIVE_PLATFORM_NAME)\nCMAKE_ASM_FLAGS =  -fvisibility=hidden\nCMAKE_C_FLAGS =  -fvisibility=hidden\nCMAKE_CXX_FLAGS =  -std=c++11 -fvisibility=hidden -fvisibility-inlines-hidden\nGoing to build embedded Qt for ios/clang\n\nThis is the Qt Open Source Edition.\n\nYou are licensed to use this software under the terms of\nthe GNU Lesser General Public License (LGPL) versions 3.\nYou are also licensed to use this software under the terms of\nthe GNU General Public License (GPL) versions 2.\n\nYou have already accepted the terms of the Open Source license.\n\n./configure: line 3323: [: too many arguments\n./configure: line 3323: [: too many arguments\nDEFAULT_INCDIRS=\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/10.0.1/include\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator12.4.sdk/usr/include\n\"\nDEFAULT_LIBDIRS=\"/lib\n/usr/lib\"\n\nYou need perl in your PATH to make a build from GIT.\nCannot proceed.\nFailed to configure 'qtbase-ios' for 'ios.simulator.clang.static', aborting...\nCMake Error at utils/common.cmake:58 (message):\n  Failed to build upstream \"/Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/build/../core/externals/qtbase-ios\" for ios/clang/fat: 1\nCall Stack (most recent call first):\n  qt.cmake:34 (build_upstream_ex)\n  CMakeLists.txt:240 (include)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/baked/fat-ios-clang.xcode/CMakeFiles/CMakeOutput.log\".\nFailed to bake project files 'fat-ios-clang.xcode' (1)\nFailed to generate project for XCode, aborting...\n</code></pre>\n\n<p>The Command <code>perl -V:'(site)?bin'</code> output is :</p>\n\n<pre><code>bin='/usr/bin';\nsitebin='/usr/local/bin';\n</code></pre>\n\n<p>I have found the file which is giving me the error, it is located in:\n\u2068\u2068core\u2069 \u25b8 \u2068externals\u2069 \u25b8 \u2068qtbase-ios\u2069 \u25b8 \u2068upstream.patched\u2069 and it's named configure</p>\n\n<p>I added this lines: </p>\n\n<pre><code>echo \"PATH variable: $PATH\"\necho \"Perl error path: $relpath/.git\"\necho \"if [ -z PERL ] -&gt; $PERL\"\n</code></pre>\n\n<p>And getting this output</p>\n\n<pre><code>PATH variable: /usr/bin:/usr/bin/perl:/usr/bin/perl:/usr/local/bin:/usr/bin:/usr/local:/usr:/usr/:/usr/bin/perl:/usr/bin/perl:/Users/alessandro/perl5/perlbrew/bin:/Users/alessandro/perl5/perlbrew/perls/perl-5.28.0/bin:/opt/local/bin:/opt/local/sbin:/usr/local/opt/node@10/bin:x/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:/opt/local/sbin:/usr/bin/perl:/opt/X11/bin\n\nPerl error path: /Users/alessandro/Desktop/XCodeProjects/OsmAnd-ios/core/externals/qtbase-ios/upstream.patched.ios.simulator.clang.static/.git\n\nif [ -z PERL ] -&gt; \n</code></pre>\n\n<p>So $PERL is empty.</p>\n"}, {"tags": ["bash", "perl", "comparison", "version"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1567103260, "post_id": 57715849, "comment_id": 101873664, "body": "Try this: <code>perl -Mversion -e &#39;exit(!(version-&gt;parse(&quot;0.9.8.8&quot;)&lt;0.9.10.0))&#39;</code>"}, {"owner": {"reputation": 2147, "user_id": 5649639, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d62527cc72c1a877a15b7bfc27d79a50?s=128&d=identicon&r=PG&f=1", "display_name": "SebMa", "link": "https://stackoverflow.com/users/5649639/sebma"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567103811, "post_id": 57715849, "comment_id": 101873867, "body": "@H&#229;konH&#230;gland Is this normal that you use the <code>parse()</code> method only for the first version number ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567103912, "post_id": 57715849, "comment_id": 101873911, "body": "@SebMa After reading the documentation, I think it is safer to parse both versions. I will write an answer"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1567105177, "post_id": 57715849, "comment_id": 101874438, "body": "<a href=\"https://stackoverflow.com/q/19973852/1030675\">stackoverflow.com/q/19973852/1030675</a>"}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1567104747, "post_id": 57716140, "comment_id": 101874246, "body": "Should be equivalent to <code>exit (version-&gt;parse(&quot;0.9.8.8&quot;) &gt;= version-&gt;parse(&quot;0.9.10.0&quot;))</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567110934, "post_id": 57716140, "comment_id": 101876513, "body": "Or just <code>perl -Mversion -e&#39;exit version-&gt;parse(&quot;0.9.8.8&quot;) &gt;= &quot;0.9.10.0&quot;&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1567111164, "post_id": 57716140, "comment_id": 101876589, "body": "And of course, the OP probably wants at least of the versions to be variable, so <code>perl -Mversion -e&#39;exit version-&gt;parse($ARGV[0]) &gt;= &quot;0.9.10.0&quot;&#39; -- &quot;$v&quot;</code>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1567106101, "last_edit_date": 1567106101, "creation_date": 1567104083, "answer_id": 57716140, "question_id": 57715849, "link": "https://stackoverflow.com/questions/57715849/cannot-compare-two-version-string-by-calling-perl-oneliner-from-bash/57716140#57716140", "title": "Cannot compare two version string by calling perl oneliner from bash", "body": "<p>Perl literals like <code>0.1.2.3</code> are interpreted as <a href=\"https://perldoc.perl.org/5.26.1/perldata.html#Version-Strings\" rel=\"nofollow noreferrer\"><code>vstrings</code></a> and have magic associated with them:</p>\n\n<blockquote>\n  <p>A literal of the form <code>v1.20.300.4000</code> is parsed as a string composed of\n  characters with the specified ordinals. This form, known as v-strings,\n  provides an alternative, more readable way to construct strings,\n  rather than use the somewhat less readable interpolation form\n  <code>\"\\x{1}\\x{14}\\x{12c}\\x{fa0}\"</code>. This is useful for representing Unicode\n  strings, and for comparing version \"numbers\" using the string\n  comparison operators, <code>cmp</code>, <code>gt</code>, <code>lt</code> etc. If there are two or more dots\n  in the literal, the leading <code>v</code> may be omitted.</p>\n</blockquote>\n\n<p>So when you compare <code>0.9.8.8 &lt; 0.9.10.0</code> you are comparing to <code>vstrings</code> numerical less than, this would lead to a warning like (if you enable <code>warnings</code>):</p>\n\n<pre><code>Argument \"\\0^I\\n\\0\" isn't numeric in numeric lt (&lt;) at -e line 1.\n</code></pre>\n\n<p>You should use string comparison for <code>vstrings</code>, \nsee <a href=\"http://blogs.perl.org/users/grinnz/2018/04/a-guide-to-versions-in-perl.html\" rel=\"nofollow noreferrer\">this blog post</a> for more information. </p>\n\n<p>However, it is better to use the <a href=\"https://metacpan.org/pod/version\" rel=\"nofollow noreferrer\">version</a> module to compare versions.</p>\n\n<p>According to the <a href=\"https://metacpan.org/pod/version\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>If you need to compare version numbers, but can't be sure whether they\n  are expressed as numbers, strings, v-strings or version objects, then\n  you should use version.pm to parse them all into objects for\n  comparison.<br>\n  [...]<br>\n  Version objects overload the cmp and &lt;=> operators. Perl automatically\n  generates all of the other comparison operators based on those two so\n  all the normal logical comparisons will work.\n  This may give surprising results:</p>\n\n<pre><code>$v1 = version-&gt;parse(\"v0.97.0\");\n$bool = $v1 &gt; 0.96; # FALSE since 0.96 is v0.960.0\n</code></pre>\n  \n  <p>Always comparing to a version object will help avoid surprises.</p>\n</blockquote>\n\n<p>So you can do:</p>\n\n<pre><code>perl -Mversion -e 'exit !(version-&gt;parse(\"0.9.8.8\")&lt;version-&gt;parse(\"0.9.10.0\"))'\n</code></pre>\n"}], "owner": {"reputation": 2147, "user_id": 5649639, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d62527cc72c1a877a15b7bfc27d79a50?s=128&d=identicon&r=PG&f=1", "display_name": "SebMa", "link": "https://stackoverflow.com/users/5649639/sebma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 57716140, "answer_count": 1, "score": 0, "last_activity_date": 1567106101, "creation_date": 1567102767, "question_id": 57715849, "link": "https://stackoverflow.com/questions/57715849/cannot-compare-two-version-string-by-calling-perl-oneliner-from-bash", "title": "Cannot compare two version string by calling perl oneliner from bash", "body": "<p>I want a bash function to return 0 if the result of one comparison between to version numbers is true and to return 1 if it's false so here's what I do :</p>\n\n<pre><code>$ perl -e \"exit(!(0.9.8.8 &lt; 0.9.10.0))\"\n$ echo $?\n1\n</code></pre>\n\n<p>But it does not work because if I change the comparison sign, the exit code is  the same :</p>\n\n<pre><code>$ perl -e \"exit(!(0.9.8.8 &gt; 0.9.10.0))\"\n$ echo $?\n1\n</code></pre>\n\n<p>This simple code works with floats but not with version numbers, how can I make my code to work for version numbers ?</p>\n"}, {"tags": ["perl", "perldoc"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1567097618, "post_id": 57713681, "comment_id": 101871351, "body": "There isn&#39;t anything specific. If you look at Perl modules on CPAN and how they are documented you will see some standards, but there are no default Perl toolchain utilities to generate docs."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1567097926, "post_id": 57713681, "comment_id": 101871476, "body": "See also <a href=\"https://stackoverflow.com/questions/29033768/how-to-use-doxygen-and-doxygenfilterperl-to-generate-documentation-for-perl\">How to use Doxygen and Doxygen::Filter::Perl to generate documentation for Perl sub routines?</a>"}, {"owner": {"reputation": 629, "user_id": 722785, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/683b39730e13bd63a2286f882b82e638?s=128&d=identicon&r=PG", "display_name": "Ryan Dunphy", "link": "https://stackoverflow.com/users/722785/ryan-dunphy"}, "edited": false, "score": 0, "creation_date": 1567100218, "post_id": 57713681, "comment_id": 101872478, "body": "Seems like Doxygen might be a good fit.  I&#39;ll just leave this here for future reference: <a href=\"http://www.bigsister.ch/doxygenfilter/documentation.html\" rel=\"nofollow noreferrer\">bigsister.ch/doxygenfilter/documentation.html</a>"}], "owner": {"reputation": 629, "user_id": 722785, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/683b39730e13bd63a2286f882b82e638?s=128&d=identicon&r=PG", "display_name": "Ryan Dunphy", "link": "https://stackoverflow.com/users/722785/ryan-dunphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567094110, "creation_date": 1567093532, "last_edit_date": 1567094110, "question_id": 57713681, "link": "https://stackoverflow.com/questions/57713681/jsdoc-style-commenting-for-perl-objects-and-sub", "title": "JSDoc style commenting for Perl Objects and sub", "body": "<p>I'm looking for a way of implementing JSDoc style comments in Perl.  I've gotten myself stuck in a bit of a Google loop when I search for \"JSDoc\" and \"Perl\" because apparently JSDoc is/was written in Perl, and therefore all of my research pushes me in the wrong direction.</p>\n\n<p>I understand that POD is the standard for generating CPAN style documentation, but I haven't had any luck digging up any detailed examples beyond: </p>\n\n<pre><code>  =head1 MYMODULE\n  My module is awesome\n  =cut\n\n</code></pre>\n\n<p>What I'm hoping to have, is something that would be able to handle a comment similar to JSDoc, that supports comments such as this:</p>\n\n<pre><code>/** A sub that does things to AnotherModule\n  @description A detailed description of the sub\n  @param {MyModule::AnotherModule} anotherModule Another Module\n  @returns {MyModule::YetAnotherModule} A modified object\n*/\nsub ProcessAnotherModule {\n...\n</code></pre>\n\n<p>In a random screenshot on Google search, I've seen a single examples of this:</p>\n\n<pre><code># @param name Your name\n# @return A welcome message\nsub hello {\n  my $name = shift;\n  return \"Hello \" . $name;\n}\n</code></pre>\n\n<p>Which leads me to believe that somewhere out there, there is a code comment library for handing this.  </p>\n\n<p>Any recommendations?</p>\n\n<p><em>FYI, I'm using Eclipse &amp; Epic, so bonus points if there's a solution that can be implemented in that environment and maybe could output code hinting etc</em></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1567080058, "post_id": 57707634, "comment_id": 101861562, "body": "<code>gzcat</code> should be <code>zcat</code> on line 4? I use zcat all the time, but&#39;ve never heard of gzcat."}, {"owner": {"reputation": 19, "user_id": 11992792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD86g3kyhuuueUVwB_Pg9mIboDj6K85DgeV-VK_=k-s128", "display_name": "Saptak Acharjee", "link": "https://stackoverflow.com/users/11992792/saptak-acharjee"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1567095524, "post_id": 57707634, "comment_id": 101870443, "body": "It&#39;s not showing any error at this &#39;gzcat&#39; line."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11992792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD86g3kyhuuueUVwB_Pg9mIboDj6K85DgeV-VK_=k-s128", "display_name": "Saptak Acharjee", "link": "https://stackoverflow.com/users/11992792/saptak-acharjee"}, "edited": false, "score": 0, "creation_date": 1567092418, "post_id": 57710039, "comment_id": 101868967, "body": "It&#39;s working. But I&#39;ve to work with those split strings again  and have to find a specific string &#39;PYAG_ <i>GENERATED&#39;. If this string found then store the full line after a string &#39;.MACRO&#39; (PYAG</i> _GENERATED and .MACRO are all present inside the .gz file) in another .txt/.tmp file. How I can execute this with all these &#39;output_nnnn.txt&#39;. Can you guide me little more on this? Thanks in advance."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1567081479, "last_edit_date": 1567081479, "creation_date": 1567081075, "answer_id": 57710039, "question_id": 57707634, "link": "https://stackoverflow.com/questions/57707634/scan-a-large-gz-file-and-split-its-strings-from-a-known-wordwhich-is-repeated/57710039#57710039", "title": "Scan a large .gz file and split it&#39;s strings from a known word(which is repeated in the file) and save the all split strings in a .txt file", "body": "<p>This might be how I would do it if it was a one time job:</p>\n\n<pre><code>zcat dsbnatrgd.scntcl.gz | perl -ne'sub newf{$n||=\"0000\";$n++;open($fh,\"&gt;\",\"output_$n.txt\")||die}$fh||newf();/(.*)\\.EOM(.*)/ and print {$fh} $1 and newf() and print {$fh} $2 or print {$fh} $_'\n</code></pre>\n\n<p>This gives you a new file <code>output_nnnn.txt</code> each time an <code>.EOM</code> is seen somewhere. <code>nnnn</code> is <code>0001</code>, <code>0002</code> and so on. The <code>.EOM</code> can be seen in the middle of a line as well, then the before and after .EOM is kept as well as the last string in the previous file and the first string in the next file.</p>\n\n<p>The oneliner explained:</p>\n\n<pre><code>sub newf{\n  $n||=\"0000\";\n  $n++;                               #increase the filename counter\n  open($fh,\"&gt;\",\"output_$n.txt\")||die  #open a new output filehandler\n}\n$fh||newf();        # 1st input line: create $fh file handler if it dont exists\n/(.*)\\.EOM(.*)/     # if the input line have a .EOM mark, grab whats before and after\n   and print {$fh} $1 #...and print the before on current file\n   and newf()         #...and open new file\n   and print {$fh} $2 #...and print the after .EOM to the new file\nor print {$fh} $_     #or if no .EOM on current line, just print it to the current output file\n</code></pre>\n\n<p>(Or did you mean the .EOM mark was uncompressed inside the .gz file? In that case the .gz file is probably invalid)</p>\n\n<p>The reason your approach don't work might be because of very large input. You mentioned that the .gz file was some GB and then the input is probably several times bigger than that even. My approach here don't attempt to keep everything in memory at once so it doesn't matter how big your file is.</p>\n"}], "owner": {"reputation": 19, "user_id": 11992792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD86g3kyhuuueUVwB_Pg9mIboDj6K85DgeV-VK_=k-s128", "display_name": "Saptak Acharjee", "link": "https://stackoverflow.com/users/11992792/saptak-acharjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567081479, "creation_date": 1567072510, "question_id": 57707634, "link": "https://stackoverflow.com/questions/57707634/scan-a-large-gz-file-and-split-its-strings-from-a-known-wordwhich-is-repeated", "title": "Scan a large .gz file and split it&#39;s strings from a known word(which is repeated in the file) and save the all split strings in a .txt file", "body": "<p>I'm trying to write a perl script where I'm trying to open and read a .gz file and split it from a known word('.EOM') which is repeated many times in that file and save all the splits in a .txt or .tmp file. That .gz file is very very large( in some GB). I've tried many different ways but every time it's showing the following error at the end.\n\"panic:sv_setpvn called with negative strlen at perl_gz1.pl line 7, line 38417185 \"\nhere 'per_gz1.pl' is my perl file name and 'line 101' is the line where I've written the following code line: my @spl=split('.EOM',$join); </p>\n\n<p>I don't know what type of error is this and how I can resolve it. Can anyone help to resolve it? Is there another way to do the same without getting this error? Thanks in advance.\nI've attached my full code.</p>\n\n<p>I've tried following codes:</p>\n\n<pre><code>use strict ;\nuse warnings;\nmy $file = \"/nfs/iind/disks/saptak/dsbnatrgd.scntcl.gz\";\nopen(IN, \"gzcat $file |\",) or die \"gunzip $file: $!\";\nmy $join = join('',&lt;IN&gt;);\n#print $join;\nmy @spl=split('.EOM',$join);\nprint @spl;\nclose IN;\n\n\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError) ;\nmy $input = \"/nfs/iind/disks/cpc_disk0025/saptak/dsbnatrgd.scntcl.gz\";\nmy $output = \"NEW1.tmp\";\ngunzip $input =&gt; $output or die \"gunzip failed: $GunzipError\\n\";\nmy $data = join(\"\", \"NEW1.tmp\");\n#use File::Slurp;\n#my $data = read_file(\"NEW1.tmp\");\nmy @spl=split(/.EOM/,$data)\n\nand\n\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError) ;\nuse IO::File ;\nmy $input = new IO::File \"&lt;/nfs/iind/disks/cpc_disk0025/saptak/dsbnatrgd.scntcl.gz\" or die \"Cannot open 'file1.txt.gz': $!\\n\" ;\nmy $buffer ;\ngunzip $input =&gt; \\$buffer or die \"gunzip failed: $GunzipError\\n\";\nprint $buffer;\nmy @spl=split(\".EOM\",$buffer);\n\nBut same error is coming every time.\n</code></pre>\n\n<p>I expect array @spl will save the file with split every time at the specified word/string and the output print it. So that I can work forward with this array @spl but no output is coming and The error \"panic:sv_setpvn called with negative strlen at perl_gz1.pl line 7, line 38417185 \"  is showing on the output screen.</p>\n"}, {"tags": ["html", "perl", "hash", "query-string"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 3, "creation_date": 1567083401, "post_id": 57707107, "comment_id": 101863495, "body": "As Dave Cross points out below, there is existing code that will do this for you. When you&#39;re faced with a programming problem, ask yourself if it&#39;s likely that other folks have run into it, too. If so, look for existing solutions that have already been written, tested and debugged before trying to roll your own."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1567160756, "post_id": 57707107, "comment_id": 101890248, "body": "Hi Andy. I&#39;m not afraid of a bit of work, or even the time it takes to figure something out in greater detail, but yes, I agree, there is no point reinventing the wheel. Which is why I&#39;m here. I spend a LOT of time reading here and elsewhere. But sometimes it&#39;s worth looking for clarification on the subtleties. Cheers, mate. Your interest is appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 0, "creation_date": 1567161008, "post_id": 57710498, "comment_id": 101890359, "body": "You&#39;re right. Just what I was looking for. One point of clarification, if you could. Is there a difference between my first example - my $q = new CGI() and your configuration - my $q = CGI-&gt;new? Or to put it another way, couldn&#39;t I have  just used - my %params = $q-&gt;Vars - instead of my @keys = $q-&gt;param? Thank you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 1, "creation_date": 1567161539, "post_id": 57710498, "comment_id": 101890560, "body": "@Bobby: Syntax like <code>new Class</code> is known as &quot;indirect object notation&quot;. It works fine 99% of the time, but when it breaks you&#39;ll waste days trying to track down the problem. The safer and saner way to write it is <code>Class-&gt;new()</code>. There&#39;s no good reason to keep using the older, buggy syntax. I guess you&#39;re using an older version of CGI.pm which still uses the dodgy version in its documentation."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 1, "creation_date": 1567161702, "post_id": 57710498, "comment_id": 101890626, "body": "@Bobby: See the section on &quot;Indirect Object Notation&quot; in <a href=\"https://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perlobj</a> for more details."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 0, "creation_date": 1567163226, "post_id": 57710498, "comment_id": 101891342, "body": "I&#39;m not sure about using an older version. Maybe the problem is I haven&#39;t been coding for years. Things like this are great refreshers. Anyway, I&#39;ve read the section you pointed to, which let&#39;s me know I have much more to read before I&#39;m done. Thank you again."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1567082590, "creation_date": 1567082590, "answer_id": 57710498, "question_id": 57707107, "link": "https://stackoverflow.com/questions/57707107/html-query-string-into-perl-hash/57710498#57710498", "title": "HTML Query String into Perl Hash?", "body": "<p>If you look at the <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">documentation for CGI.pm</a>, you'll see a section entitled \"<a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#Fetching-the-parameter-list-as-a-hash\" rel=\"nofollow noreferrer\">Fetching the parameter list as a hash</a>\" which seems to answer your question.</p>\n\n<p>You can either do it using a CGI object:</p>\n\n<pre><code>use CGI;\n\nmy $q = CGI-&gt;new;\n\nmy %params = $q-&gt;Vars;\n</code></pre>\n\n<p>Or using the function-based interface to the module:</p>\n\n<pre><code>use CGI ':cgi-lib';\n\nmy %params = Vars();\n</code></pre>\n\n<p>Note, that if you have multiple parameters with the same name (as generated from query string like <code>param1=foo&amp;param1=bar</code>) then the value in the hash will be string where the various values will be separated by the character <code>\\0</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 57710498, "answer_count": 1, "score": 2, "last_activity_date": 1567082590, "creation_date": 1567070831, "question_id": 57707107, "link": "https://stackoverflow.com/questions/57707107/html-query-string-into-perl-hash", "title": "HTML Query String into Perl Hash?", "body": "<p>Typically I've only ever had to pass a handful of values between web pages. To retrieve them, I've typed out, one-by-one, the values I knew would be in the query string. For example...</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $var = param('input');\n</code></pre>\n\n<p>I'd repeat that for as many times as necessary... which was seldom very many.</p>\n\n<p>However, I find myself in a situation where I have to pass quite a few values. To make matters more interesting, I won't know precisely how many variables or which ones will be passed. It's true, the possibilities are from a finite set but it will be a chore to go through them one by one. It would be nice to be able to pass a hash between web pages with the same efficiency that we pass hashes to and from functions. But I know of no such way. So...</p>\n\n<p>I have worked up two methods for grabbing the HTML query string and saving the results to a hash. One works with the $ENV query string. It works but must use GET, and strings must be cleaned up. The other uses CGI. It can retrieve using the POST method and is generally cleaner than ENV. Both use about the same number of lines of code, with CGI squeaking in one line shorter than ENV.</p>\n\n<p>My question is: Is there an ideal, quick, efficient, confident, problem-free way to pass a hash full of values between web pages? Along those lines I thought it would be better to access the values directly from $query = new CGI() rather than use intermediate steps to recreate the hash and re-save the values? Or, at the very least, copy it directly into a usable hash. I've tried several syntactical variations but no luck. I've read of other configurations but to date they seem more complex than what I've come up with so far.</p>\n\n<p>Here's my examples (mocked up for sake of illustration) so you can see what I've been doing. My actual list of values will be longer than what I've included here.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nmy $thispage = $ENV{'SCRIPT_NAME'};\n$thispage =~ s/(?:.+\\/)([^#?]+)/$1/ig;\nprint \"Content-type: text/html\\n\\n\";\nprint qq(&lt;p&gt;Save query string to hash...&lt;/p&gt;\\n);\n\nmy %hash;\nmy $query_string = $ENV{'QUERY_STRING'} ;\nmy @pairs = split(/\\&amp;/, $query_string);\nforeach my $pair (@pairs){\n my ($key, $value) = split(/=/, $pair);\n $value =~ s/\\+/ /g ; \n $hash{$key} = $value ; \n}\n\nprint qq(\\n&lt;blockquote&gt;&lt;pre&gt;) ;\nwhile ( my ($key,$value) = each %hash) {\n# let's make it readable\nprint sprintf \"%-9s\", $key;\nprint \"=&gt; $value\\n\";\n}\nprint qq(&lt;/pre&gt;&lt;/blockquote&gt;\\n\\n) ;\n\nprint qq(&lt;p&gt;\n&lt;form action=\"$thispage\" method=\"GET\"&gt;\n &lt;input type=\"hidden\" name=\"Purple\" value=\"Color\"&gt;\n &lt;input type=\"hidden\" name=\"Orange\" value=\"Fruit\"&gt;\n &lt;input type=\"hidden\" name=\"Family\" value=\"Relatives\"&gt;\n &lt;input type=\"hidden\" name=\"Twelve\" value=\"Number\"&gt;\n &lt;input type=\"hidden\" name=\"Silver\" value=\"Coins\"&gt;\n &lt;input type=\"hidden\" name=\"Thirty\" value=\"Middle aged\"&gt;\n &lt;input type=\"hidden\" name=\"People\" value=\"Are Hell\"&gt;\n &lt;input type=\"hidden\" name=\"Future\" value=\"Past\"&gt;\n &lt;input type=\"hidden\" name=\"Banana\" value=\"Yellow\"&gt;\n &lt;input type=\"hidden\" name=\"Africa\" value=\"Continent\"&gt;\n &lt;input type=\"hidden\" name=\"Monday\" value=\"Hateful Things\"&gt;\n &lt;input type=\"hidden\" name=\"Office\" value=\"Politics\"&gt;\n &lt;input type=\"hidden\" name=\"Nature\" value=\"Second\"&gt;\n &lt;input type=\"hidden\" name=\"Eleven\" value=\"Tufnel\"&gt;\n &lt;input type=\"hidden\" name=\"Animal\" value=\"Muppet\"&gt;\n &lt;input type=\"hidden\" name=\"Rachel\" value=\"Ex\"&gt;\n &lt;input type=\"submit\" class=\"button\" value=\"ENV Query String to Hash!\"&gt;\n&lt;/form&gt;\n);\n\n__END__\n</code></pre>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\nuse CGI qw(:standard);\nuse strict;\nuse warnings;\nmy $thispage = $ENV{'SCRIPT_NAME'};\n$thispage =~ s/(?:.+\\/)([^#?]+)/$1/ig;\nprint \"Content-type: text/html\\n\\n\";\nprint qq(&lt;p&gt;Save query string to hash...&lt;/p&gt;\\n);\n\nmy %hash;\nmy $query = new CGI();\nmy @keys = $query-&gt;param;\nforeach my $key (@keys ) {\n $hash{$key} = $query-&gt;param($key);\n}\n\nprint qq(\\n&lt;blockquote&gt;&lt;pre&gt;) ;\nwhile ( my ($key,$value) = each %hash) {\n# let's make it readable\nprint sprintf \"%-9s\", $key;\nprint \"=&gt; $value\\n\";\n}\nprint qq(&lt;/pre&gt;&lt;/blockquote&gt;\\n\\n) ;\n\nprint qq(&lt;p&gt;\n&lt;form action=\"$thispage\" method=\"POST\"&gt;\n &lt;input type=\"hidden\" name=\"Friday\" value=\"TGIF\"&gt;\n &lt;input type=\"hidden\" name=\"Yellow\" value=\"Banana\"&gt;\n &lt;input type=\"hidden\" name=\"Poetry\" value=\"Yawn\"&gt;\n &lt;input type=\"hidden\" name=\"August\" value=\"Heat\"&gt;\n &lt;input type=\"hidden\" name=\"Potato\" value=\"Bobby\"&gt;\n &lt;input type=\"hidden\" name=\"Sunday\" value=\"School\"&gt;\n &lt;input type=\"hidden\" name=\"Circle\" value=\"Clique\"&gt;\n &lt;input type=\"hidden\" name=\"Breath\" value=\"less\"&gt;\n &lt;input type=\"hidden\" name=\"Circus\" value=\"Carnival\"&gt;\n &lt;input type=\"hidden\" name=\"London\" value=\"Bridge\"&gt;\n &lt;input type=\"hidden\" name=\"Energy\" value=\"Bill\"&gt;\n &lt;input type=\"hidden\" name=\"Sister\" value=\"Ignatius\"&gt;\n &lt;input type=\"hidden\" name=\"Monkey\" value=\"Shines\"&gt;\n &lt;input type=\"hidden\" name=\"System\" value=\"Fail\"&gt;\n &lt;input type=\"hidden\" name=\"Austin\" value=\"Steve\"&gt;\n &lt;input type=\"hidden\" name=\"Secret\" value=\"Policeman's Ball\"&gt;\n &lt;input type=\"submit\" class=\"button\" value=\"CGI Query String to Hash!\"&gt;\n&lt;/form&gt;\n);\n\n__END__\n</code></pre>\n\n<p>Thanks for taking the time to read this. Extra special thanks for considered responses.</p>\n\n<p>Cheers,</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567069581, "post_id": 57706690, "comment_id": 101855827, "body": "show your code as well."}, {"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "reply_to_user": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567070140, "post_id": 57706690, "comment_id": 101856085, "body": "@Bruce I added my code in the question"}, {"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567071482, "post_id": 57706690, "comment_id": 101856777, "body": "Always use strict; use warnings; See <a href=\"https://perlmaven.com/always-use-strict-and-use-warnings\" rel=\"nofollow noreferrer\">perlmaven.com/always-use-strict-and-use-warnings</a>"}, {"owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "reply_to_user": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567072534, "post_id": 57706690, "comment_id": 101857357, "body": "@Bruce I added that and I forgot to add it in the code here . then also output is not fetching"}, {"owner": {"reputation": 3958, "user_id": 164909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0215f0a0870cd3011a2ace4a3cd574ec?s=128&d=identicon&r=PG", "display_name": "wallenborn", "link": "https://stackoverflow.com/users/164909/wallenborn"}, "edited": false, "score": 0, "creation_date": 1567072969, "post_id": 57706690, "comment_id": 101857576, "body": "You&#39;re using the att() method, which means you are looking for the attribute &quot;string&quot; in the element &quot;Title&quot;, as in &lt;Title string=&quot;test&quot;&gt;Text here&lt;/Title&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "is_accepted": true, "score": 2, "last_activity_date": 1567071350, "creation_date": 1567071350, "answer_id": 57707265, "question_id": 57706690, "link": "https://stackoverflow.com/questions/57706690/how-to-fetch-data-from-xml-file-in-perl/57707265#57707265", "title": "How to fetch data from XML file in Perl?", "body": "<p>This code snippet should get the title text from the xml file.</p>\n\n<pre><code>my $filepath = \"xml_file.xml\";\n\nmy $openXml = XML::Twig-&gt;new();\n$openXml-&gt;parsefile($filepath);\nmy $title = $openXml-&gt;root-&gt;first_child_text('Title');\nsay $title; \n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 11670354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VqIQ7lIhDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reagM9OwFuCQ7AJvY_ZX9DAL2wmKw/mo/photo.jpg?sz=128", "display_name": "Sahal", "link": "https://stackoverflow.com/users/11670354/sahal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57707265, "answer_count": 1, "score": 0, "last_activity_date": 1567078511, "creation_date": 1567069409, "last_edit_date": 1567078511, "question_id": 57706690, "link": "https://stackoverflow.com/questions/57706690/how-to-fetch-data-from-xml-file-in-perl", "title": "How to fetch data from XML file in Perl?", "body": "<p>I need to get the value of <code>&lt;Title&gt;</code> from XML file with Perl. I tried with Twig but still value is not fetching.</p>\n\n<p>This is the XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n&lt;Specification SchemaVersion=\"4.3\"&gt;\n&lt;Title&gt;&lt;![CDATA[Txt to fetch]]&gt;&lt;/Title&gt;\n\n#more tags here\n\n&lt;/Specification&gt;\n</code></pre>\n\n<p>Here the sample Perl code which I tried:</p>\n\n<pre><code>my $openXml=XML::Twig-&gt;new();\n$openXml-&gt;parsefile($filepath);\nforeach my $root($openXml-&gt;root-&gt;children('Specification')){\n$title=$root-&gt;first_child('Title')-&gt;att('string');\n}\n</code></pre>\n\n<p>I need to take the value from that Title tag.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567057452, "post_id": 57703666, "comment_id": 101850292, "body": "<code>local $^I = &#39;&#39;;</code>"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567057797, "post_id": 57703666, "comment_id": 101850377, "body": "Thanks @ikegami for your comment. I&#39;m a bit confused. How should I use the <code>$^I</code> properly? This is the first time I heard of this. Or can you point me to some reference articles that I can check on? :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1567058530, "post_id": 57703666, "comment_id": 101850611, "body": "<code>-i</code> literally adds <code>$^I = &#39;&#39;;</code>. The thing is, you&#39;re probably used to pairing it with <code>-p</code>. So maybe you want to look into what <code>-p</code> adds. If only that was mentioned in the <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">documentation</a>..."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567059602, "post_id": 57703666, "comment_id": 101850968, "body": "I&#39;m using <code>binmode(STDOUT, &#39;:raw&#39;); </code> not sure if this will affect the <code>$^I = &#39;&#39;;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1567073660, "post_id": 57703666, "comment_id": 101857961, "body": "You shouldn&#39;t be using STDOUT, so that&#39;s no good. <code>binmode(select())</code> inside the loop should work, though."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567073280, "post_id": 57704738, "comment_id": 101857769, "body": "Re &quot;<i>I did not find out how to set binmode before the loop</i>&quot;, You can&#39;t. You can add <code>:encoding</code> using <code>use open &#39;:std&#39;, &#39;:encoding(...)&#39;;</code>, but there&#39;s no way to tell <code>use open</code> to default to &quot;binary&quot; handles"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1567069563, "last_edit_date": 1567069563, "creation_date": 1567062205, "answer_id": 57704738, "question_id": 57703666, "link": "https://stackoverflow.com/questions/57703666/perl-in-place-substitution/57704738#57704738", "title": "Perl in-place substitution", "body": "<p>You can try something like this:</p>\n\n<pre><code>my $filename = 'test.dat';\n@ARGV = ($filename);\n$^I = '';\nwhile(&lt;&lt;&gt;&gt;) {\n    binmode(ARGV, ':raw');\n    # Do the substitiution on $_ here ...\n    print;\n}\n</code></pre>\n\n<p>I did not find out how to set <code>binmode</code> before the loop, since <code>ARGV</code> is only defined after the <code>&lt;&gt;</code> operator has been used. </p>\n\n<ul>\n<li><p>The <code>$^I</code> and <code>ARGV</code>variables are decribed in <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perlvar</code></a></p></li>\n<li><p>See <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a> for information about why you should use <code>&lt;&lt;&gt;&gt;</code> instead of <code>&lt;&gt;</code>.</p></li>\n</ul>\n\n<h3>Some notes:</h3>\n\n<ul>\n<li>The <code>while(&lt;&gt;) { ... }</code>\nAccording to <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a>, the loop</li>\n</ul>\n\n<blockquote>\n<pre><code>while (&lt;&gt;) {  ...         # code for each line\n}\n</code></pre>\n  \n  <p>is equivalent to the following Perl-like pseudo code:</p>\n\n<pre><code>unshift(@ARGV, '-') unless @ARGV;   \nwhile ($ARGV = shift) { \n    open(ARGV, $ARGV);\n    while (&lt;ARGV&gt;) {    \n       ...        # code for each line    \n    }  \n}  \n</code></pre>\n</blockquote>\n\n<ul>\n<li>Using in-place edit without a backup file: <code>$^I=\"\"</code>:</li>\n</ul>\n\n<p>According to <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>:</p>\n\n<blockquote>\n  <p>If no extension is supplied, and your system supports it, the original\n  file is kept open without a name while the output is redirected to a\n  new file with the original filename. When perl exits, cleanly or not,\n  the original file is unlinked.</p>\n</blockquote>\n\n<p>and some more information in <a href=\"https://backreference.org/2011/01/29/in-place-editing-of-files/\" rel=\"nofollow noreferrer\">this</a> blog:</p>\n\n<blockquote>\n  <p>Perl opens and immediately unlink()s the original file, then opens a\n  new file with the same name (new file descriptor and inode), and sends\n  output to this second file; at the end, the old file is closed and\n  thus deleted because it was unlinked, and what's left is a changed\n  file with the same name as the original.</p>\n</blockquote>\n\n<p>See also <a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/doio.c#l1191\" rel=\"nofollow noreferrer\">doio.c</a> for actual implementation.</p>\n\n<ul>\n<li><p>According to the above, the following might work:</p>\n\n<pre><code>my $fn = 'test.dat';\nopen ( my $fh, '&lt;:raw', $fn ) or die \"Could not open file '$fn': $!\";\nunlink $fn or die \"$!\";\nopen ( my $fh2, '&gt;:raw', $fn ) or die \"Could not reopen file '$fn': $!\";\nwhile(&lt;$fh&gt;) {\n    # Do the substitutions on $_ here ...\n    print $fh2 $_;\n}\nclose $fh;\nclose $fh2;\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57704738, "answer_count": 1, "score": 3, "last_activity_date": 1567069563, "creation_date": 1567057340, "last_edit_date": 1567059649, "question_id": 57703666, "link": "https://stackoverflow.com/questions/57703666/perl-in-place-substitution", "title": "Perl in-place substitution", "body": "<p>In Perl one liner, we can use the <code>-i</code> argument to do an in-place substitution. What's the equivalence of <code>-i</code> when writing perl code in the IDE?</p>\n\n<p>Consider the following code:</p>\n\n\n\n<pre><code>binmode(STDOUT, ':raw');\nopen my $fh, '&lt;', $filename;\nwhile (&lt;$fh&gt;) {\n    s/^/&lt;rootroot&gt;/ if $.==1;\n    if (/(&lt;link rel[^&lt;&gt;\\n]*?)(\\/?)(&gt;)/g) {\n        my ($p1, $p2, $p3) = ($1, $2, $3);\n        s/$p1$p2$p3/($p2 ? qq|$p1$p2$p3&lt;span class=\"entry\"&gt;| : qq|$p1\\/$p3&lt;span class=\"entry\"&gt;|)/ge;\n    };\n    s/&lt;\\/&gt;/&lt;entry_end&gt;&lt;\\/entry_end&gt;/;\n    s/$/&lt;\\/rootroot&gt;/ if eof;\n\n}\n</code></pre>\n\n<p>How can we save all the lines of changes in-place?</p>\n\n<p>Because I need to do a quick validation on the html file using XML::LibXML right after the in-place change of the html source..</p>\n\n<p>Thanks in advance. </p>\n"}]