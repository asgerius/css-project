[{"tags": ["perl", "file", "csv", "text"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1519248004, "post_id": 48915454, "comment_id": 84837713, "body": "Why not just do : <code>.&#47;script.pl &gt; new_file.csv</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1519248511, "post_id": 48915454, "comment_id": 84837968, "body": "A complete simple example for writing CSV in <a href=\"https://stackoverflow.com/a/45641994/4653379\">this post</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": -1, "last_activity_date": 1519294531, "creation_date": 1519294531, "answer_id": 48924800, "question_id": 48915454, "link": "https://stackoverflow.com/questions/48915454/write-to-new-csv-file/48924800#48924800", "title": "Write to new CSV file", "body": "<p>You're very close, you've just got things in the wrong order. The line to <code>open</code> the new file should go before the <code>while</code> loop. And then you need to add that filehandle to the <code>printf</code> statements. Although really they should be just <code>print</code> statements as you're not doing any formatting.</p>\n\n<pre><code>open my $newfile, '&gt;', $newfile or die \"Could not write $newfile\"; #create new file\n\nwhile( my $row = $csv-&gt;getline($fh) ) {\n    push @data, $row;\n    print $newfile \"$row-&gt;[0]\\t\";\n    print $newfile \"$row-&gt;[1]\\t\";\n    print $newfile \"$row-&gt;[2]\\t\";\n    print $newfile \"$row-&gt;[3]\\t\";\n    print $newfile \"$row-&gt;[13]\\n\";\n}\n</code></pre>\n\n<p>Also, you could also do the line that does the output like this as it'll make it much easier if you want to change what columns you're outputting or re-order them.</p>\n\n<pre><code>print $newfile join(\"\\t\",@$row[0,1,2,3,13]),\"\\n\";\n</code></pre>\n\n<p>And if you need the header in the output put this before the loop.</p>\n\n<pre><code>print $newfile join(\"\\t\",@$header[0,1,2,3,13]),\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9383625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b3022c80b10b5c3ae1d42732325bd35?s=128&d=identicon&r=PG&f=1", "display_name": "miheadhurts", "link": "https://stackoverflow.com/users/9383625/miheadhurts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1519294531, "creation_date": 1519247116, "question_id": 48915454, "link": "https://stackoverflow.com/questions/48915454/write-to-new-csv-file", "title": "Write to new CSV file", "body": "<p>I am trying to write data to a new CSV file. I know how to create the new file and how to gather the data I want from the old file, but I'm not sure how to actually write the gathered data to the new file. I want the columns that I print to also be written to the new CSV file. This is what I have so far:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Text::CSV_XS;\n\nmy @data;\nmy $file = 'FinalTest.csv'; #original file\nmy $newfile = 'filteredData.csv'; #new file\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1 });\nopen my $fh, '&lt;', $file or die \"Could not open $file: $!\";\n\nmy $header = $csv-&gt;getline($fh)\n   or die(\"No header\\n\");\n$csv-&gt;column_names(@$header); #removes header row\n\nwhile( my $row = $csv-&gt;getline($fh) ) {\n    push @data, $row;\n    printf \"$row-&gt;[0]\\t\";\n    printf \"$row-&gt;[1]\\t\";\n    printf \"$row-&gt;[2]\\t\";\n    printf \"$row-&gt;[3]\\t\";\n    printf \"$row-&gt;[13]\\n\";\n}\n\nopen my $newfile, '&gt;', $newfile or die \"Could not write $newfile\"; #create new file\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1519247281, "post_id": 48915439, "comment_id": 84837363, "body": "show output of <code>show create table transaction</code> (as a code block in your question, <i>not</i> an image, please)"}, {"owner": {"reputation": 3, "user_id": 9393178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NY0X", "link": "https://stackoverflow.com/users/9393178/ny0x"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1519247924, "post_id": 48915439, "comment_id": 84837674, "body": "Added show create table transaction to question."}, {"owner": {"reputation": 3, "user_id": 9393178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NY0X", "link": "https://stackoverflow.com/users/9393178/ny0x"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1519248791, "post_id": 48915439, "comment_id": 84838114, "body": "Thanks ysth, this is likely solved now.  I see there was no partition value for anything equal to 217 or higher."}], "answers": [{"comments": [{"owner": {"reputation": 1527, "user_id": 4857270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ed62a3f8d09be0f1bee9d8a89e0bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard van Helden", "link": "https://stackoverflow.com/users/4857270/gerard-van-helden"}, "edited": false, "score": 1, "creation_date": 1519249004, "post_id": 48915843, "comment_id": 84838223, "body": "A rather opinionated suggestion based on my personal experience: You&#39;re probably best off with replacing the storage engine with InnoDB and leave the partitioning to the storage implementation"}], "tags": [], "owner": {"reputation": 1527, "user_id": 4857270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ed62a3f8d09be0f1bee9d8a89e0bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard van Helden", "link": "https://stackoverflow.com/users/4857270/gerard-van-helden"}, "is_accepted": true, "score": 1, "last_activity_date": 1519248803, "creation_date": 1519248803, "answer_id": 48915843, "question_id": 48915439, "link": "https://stackoverflow.com/questions/48915439/table-has-no-partition-for-value-217/48915843#48915843", "title": "Table has no partition for value 217", "body": "<p>Your table uses <a href=\"https://dev.mysql.com/doc/refman/5.7/en/partitioning-range.html\" rel=\"nofollow noreferrer\">RANGE partitioning</a> and is not instructed what to do with values 217 and up.</p>\n\n<p>Read up on what partitioning does and decide if you want to keep it. If so, you will by then also have figured out how you can solve your problem :) (Either by adding partitions or removing partitioning altogether).</p>\n"}, {"tags": [], "owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "is_accepted": false, "score": 0, "last_activity_date": 1519248827, "creation_date": 1519248827, "answer_id": 48915849, "question_id": 48915439, "link": "https://stackoverflow.com/questions/48915439/table-has-no-partition-for-value-217/48915849#48915849", "title": "Table has no partition for value 217", "body": "<p>The root cause of the error seems quite obvious: in the insert statement the value for <code>period_time_pk</code> is <code>217</code>. If you check out the create table statement for the table, the table is partitioned by <code>period_time_pk</code> field and the last partition expression is:</p>\n\n<pre><code>PARTITION t35 VALUES LESS THAN (217) ENGINE = MyISAM\n</code></pre>\n\n<p>Therefore there is no partition defined that could hold the value <code>217</code>. You need to add a new partition to hold this value.</p>\n"}], "owner": {"reputation": 3, "user_id": 9393178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NY0X", "link": "https://stackoverflow.com/users/9393178/ny0x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3670, "favorite_count": 0, "accepted_answer_id": 48915843, "answer_count": 2, "score": 0, "last_activity_date": 1519248827, "creation_date": 1519247035, "last_edit_date": 1519248423, "question_id": 48915439, "link": "https://stackoverflow.com/questions/48915439/table-has-no-partition-for-value-217", "title": "Table has no partition for value 217", "body": "<p>We have a ugly perl script that is used to parse csv data and populate this into MySQL.  The original dev is long gone but now the script is failing and I'm trying to determine why.</p>\n\n<p>MySQL Version 5.7.21</p>\n\n<p>When running it we get this error.</p>\n\n<p><code>DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Table has no partition for value 217 [for Statement \"INSERT INTO transaction ( case_qty, customer_pk, da_allocation, dist_customer_pk, dist_invoice_number, dist_item_pk, dist_manufacturer_pk, dist_quantity, dist_txn_date, distributor_pk, fb_item_pk, fb_manufacturer_pk, historical_hierarchy_pk, mfr_operator_va, mfr_rebateable_volume, min, original_rebate, period_time_pk, reporting_qty, reporting_uom, total_qty_purchased, total_vol, transaction_time_pk) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )\" with ParamValues: 0=4, 1='19457', 2=0, 3='373809', 4='17755751', 5='106004', 6='75959', 7=4, 8='2018-01-19', 9='63', 10='227174', 11='130', 12='29546', 13=0, 14=0, 15='7888-928', 16=0, 17=217, 18=4, 19='CA', 20=41.3, 21=165.2, 22='217'] at load_usage.pl line 152</code></p>\n\n<p>I'm trying  to determine why exactly this MySQL statement is failing so I can find the underlying cause.  All these columns are in the database and are spelled correctly. </p>\n\n<p>Here is the columns we have in that table.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VdKd2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VdKd2.png\" alt=\"table columns\"></a></p>\n\n<p>Output of <code>show create table transaction</code>:</p>\n\n<pre><code>CREATE TABLE `transaction` (\n  `pk` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `historical_hierarchy_pk` smallint(5) unsigned NOT NULL,\n  `dist_item_pk` int(10) unsigned NOT NULL,\n  `dist_manufacturer_pk` mediumint(8) unsigned NOT NULL,\n  `distributor_pk` smallint(5) unsigned NOT NULL,\n  `fb_item_pk` int(10) unsigned NOT NULL,\n  `fb_manufacturer_pk` mediumint(8) unsigned NOT NULL,\n  `customer_pk` mediumint(8) unsigned NOT NULL,\n  `dist_customer_pk` mediumint(8) unsigned NOT NULL,\n  `period_time_pk` smallint(5) unsigned NOT NULL,\n  `transaction_time_pk` smallint(5) unsigned NOT NULL,\n  `dist_txn_date` date NOT NULL,\n  `dist_quantity` decimal(7,2) NOT NULL DEFAULT '0.00',\n  `total_vol` decimal(9,2) NOT NULL DEFAULT '0.00',\n  `total_qty_purchased` decimal(10,4) NOT NULL DEFAULT '0.0000',\n  `reporting_qty` decimal(10,4) NOT NULL DEFAULT '0.0000',\n  `reporting_uom` char(2) NOT NULL DEFAULT '',\n  `case_qty` decimal(10,4) NOT NULL DEFAULT '0.0000',\n  `mfr_rebateable_volume` decimal(9,2) NOT NULL DEFAULT '0.00',\n  `mfr_operator_va` decimal(9,2) NOT NULL DEFAULT '0.00',\n  `dist_invoice_number` varchar(30) NOT NULL DEFAULT '',\n  `min` varchar(30) NOT NULL DEFAULT '',\n  `original_rebate` decimal(9,2) NOT NULL DEFAULT '0.00',\n  `da_allocation` decimal(9,2) NOT NULL DEFAULT '0.00',\n  PRIMARY KEY (`pk`,`period_time_pk`),\n  KEY `historical_hierarchy_pk_key` (`historical_hierarchy_pk`),\n  KEY `dist_item_pk_key` (`dist_item_pk`),\n  KEY `dist_manufacturer_pk_key` (`dist_manufacturer_pk`),\n  KEY `distributor_pk_key` (`distributor_pk`),\n  KEY `fb_item_pk_key` (`fb_item_pk`),\n  KEY `fb_manufacturer_pk_key` (`fb_manufacturer_pk`),\n  KEY `customer_pk_key` (`customer_pk`),\n  KEY `period_time_pk_key` (`period_time_pk`),\n  KEY `transaction_time_pk_key` (`transaction_time_pk`),\n  KEY `dist_customer_key` (`dist_customer_pk`)\n) ENGINE=MyISAM AUTO_INCREMENT=351758733 DEFAULT CHARSET=latin1 COMMENT='$Revision$'\n/*!50100 PARTITION BY RANGE (period_time_pk)\n(PARTITION t0 VALUES LESS THAN (112) ENGINE = MyISAM,\n PARTITION t1 VALUES LESS THAN (116) ENGINE = MyISAM,\n PARTITION t2 VALUES LESS THAN (119) ENGINE = MyISAM,\n PARTITION t3 VALUES LESS THAN (121) ENGINE = MyISAM,\n PARTITION t4 VALUES LESS THAN (124) ENGINE = MyISAM,\n PARTITION t5 VALUES LESS THAN (127) ENGINE = MyISAM,\n PARTITION t6 VALUES LESS THAN (130) ENGINE = MyISAM,\n PARTITION t7 VALUES LESS THAN (133) ENGINE = MyISAM,\n PARTITION t8 VALUES LESS THAN (136) ENGINE = MyISAM,\n PARTITION t9 VALUES LESS THAN (139) ENGINE = MyISAM,\n PARTITION t10 VALUES LESS THAN (142) ENGINE = MyISAM,\n PARTITION t11 VALUES LESS THAN (145) ENGINE = MyISAM,\n PARTITION t12 VALUES LESS THAN (148) ENGINE = MyISAM,\n PARTITION t13 VALUES LESS THAN (151) ENGINE = MyISAM,\n PARTITION t14 VALUES LESS THAN (154) ENGINE = MyISAM,\n PARTITION t15 VALUES LESS THAN (157) ENGINE = MyISAM,\n PARTITION t16 VALUES LESS THAN (160) ENGINE = MyISAM,\n PARTITION t17 VALUES LESS THAN (163) ENGINE = MyISAM,\n PARTITION t18 VALUES LESS THAN (166) ENGINE = MyISAM,\n PARTITION t19 VALUES LESS THAN (169) ENGINE = MyISAM,\n PARTITION t20 VALUES LESS THAN (172) ENGINE = MyISAM,\n PARTITION t21 VALUES LESS THAN (175) ENGINE = MyISAM,\n PARTITION t22 VALUES LESS THAN (178) ENGINE = MyISAM,\n PARTITION t23 VALUES LESS THAN (181) ENGINE = MyISAM,\n PARTITION t24 VALUES LESS THAN (184) ENGINE = MyISAM,\n PARTITION t25 VALUES LESS THAN (187) ENGINE = MyISAM,\n PARTITION t26 VALUES LESS THAN (190) ENGINE = MyISAM,\n PARTITION t27 VALUES LESS THAN (193) ENGINE = MyISAM,\n PARTITION t28 VALUES LESS THAN (196) ENGINE = MyISAM,\n PARTITION t29 VALUES LESS THAN (199) ENGINE = MyISAM,\n PARTITION t30 VALUES LESS THAN (202) ENGINE = MyISAM,\n PARTITION t31 VALUES LESS THAN (205) ENGINE = MyISAM,\n PARTITION t32 VALUES LESS THAN (208) ENGINE = MyISAM,\n PARTITION t33 VALUES LESS THAN (211) ENGINE = MyISAM,\n PARTITION t34 VALUES LESS THAN (214) ENGINE = MyISAM,\n PARTITION t35 VALUES LESS THAN (217) ENGINE = MyISAM) */ |\n</code></pre>\n"}, {"tags": ["perl", "get", "cgi", "uri"], "comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1519229838, "post_id": 48910465, "comment_id": 84827358, "body": "didn&#39;t tried your code but, do you <code>use strict; use warnings;</code> ? it may help you in the future ;)"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1519230407, "post_id": 48910465, "comment_id": 84827770, "body": "Have you tried running your cgi-script on the command line? <code>perl -le &#39;use CGI;my$q=CGI-&gt;new;print &quot;$_ = &quot;.$q-&gt;param($_) for qw(sf page)&#39; &quot;page=hello&amp;sf=1&quot;</code>. Try running: <code>perl your-script.pl &quot;page=hello&amp;sf=1&quot;</code>. Maybe you see something that helps you find the problem."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 4, "creation_date": 1519232409, "post_id": 48911054, "comment_id": 84829230, "body": "OP needs <code>print $cgi-&gt;header(&#39;text&#47;plain&#39;)</code> before producing output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1519315206, "post_id": 48911054, "comment_id": 84870429, "body": "@Sinan: In this case, <code>print $q-&gt;header(&#39;text&#47;plain&#39;)</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1519231120, "creation_date": 1519231120, "answer_id": 48911054, "question_id": 48910465, "link": "https://stackoverflow.com/questions/48910465/check-whether-a-cgi-get-parameter-exists/48911054#48911054", "title": "Check whether a CGI GET parameter exists", "body": "<p>The <code>param</code> method will return <code>undef</code> if the given value doesn't exist</p>\n\n<p>You need this</p>\n\n<pre><code>my $sf_var = $q-&gt;param('sf');\n\nif ( not defined $sf_var ) {\n    print \"There is no sf parameter\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1505, "favorite_count": 0, "accepted_answer_id": 48911054, "answer_count": 1, "score": -2, "last_activity_date": 1519232053, "creation_date": 1519229439, "last_edit_date": 1519232053, "question_id": 48910465, "link": "https://stackoverflow.com/questions/48910465/check-whether-a-cgi-get-parameter-exists", "title": "Check whether a CGI GET parameter exists", "body": "<p>I'm trying to determine whether a <code>GET</code> query parameter exists from within a Perl CGI program</p>\n\n<p>Here's my query when<code>sf</code> exists:</p>\n\n<pre><code>http://server.com/support?page=hello&amp;sf=1\n</code></pre>\n\n<p>Second, here's my query when<code>sf</code> does not exist:</p>\n\n<pre><code>http://server.com/support?page=hello\n</code></pre>\n\n<p>Here's some pseudo code of what I'd like to accomplish:</p>\n\n<pre><code>if (sfVariable does not exist) {\n     // process code\n}\n</code></pre>\n\n<p>I have tried this with no luck (just printed the variable to ensure we are retrieving it correctly):</p>\n\n<pre><code>use CGI;\n\nmy $q = CGI-&gt;new;\nmy $sfVar = $q-&gt;param('sf');\nprint $sfVar;\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Here is where I am at:</p>\n\n<pre><code>use CGI;\nmy $q = CGI-&gt;new;\nmy $page = $q-&gt;param('sf');\nif(not defined $page){\n  print \"no sf variable\\n\";\n}\n</code></pre>\n\n<p>And I get an error. Here's the log:</p>\n\n<pre><code>[Wed Feb 21 16:39:56.041581 2018] [cgi:error] [pid 6198] [client 111.111.111.111:57878] malformed header from script 'test': Bad header: no sf variable\n[Wed Feb 21 16:42:02.146266 2018] [cgi:error] [pid 11150] [client 111.111.111.111:58047] malformed header from script 'test': Bad header: no sf variable\n[Wed Feb 21 16:42:11.578022 2018] [cgi:error] [pid 29861] [client 111.111.111.111:58062] End of script output before headers: test\n</code></pre>\n"}, {"tags": ["perl", "moo"], "answers": [{"comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1519225386, "post_id": 48908794, "comment_id": 84824148, "body": "Thanks Sinan for your quick answer. &quot;you should not assume anything about any other fields in the builder for a specific member&quot; - I don&#39;t see that documented anywhere. It is confusing that those alphabetically lower are available and the others not. Yeah, I worked around it using <code>lazy =&gt; 1</code>, although <code>BUILD</code> is probably a better place for it."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1519225628, "post_id": 48908794, "comment_id": 84824324, "body": "I really don&#39;t understand why I should not be able to rely on the attributes that actually were provided or that have default values. Wouldn&#39;t that make the builders more handy?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 1, "creation_date": 1519226070, "post_id": 48908794, "comment_id": 84824614, "body": "Is there a language where you can rely on the order of initialization of private non-static fields in the constructor? If a property needs access to the values of members of a fully initialized object, it needs to be implemented as a method. <code>lazy</code> makes that more efficient since the result of the method call is cached, but that&#39;s what&#39;s going on there."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1519227026, "post_id": 48908794, "comment_id": 84825316, "body": "You can imagine a case where you have builder <code>a</code> and builder <code>b</code> defined as <code>b + 1</code> and <code>a + 1</code> respectively. Obviously there is going to be some order of which ones are initialized first."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1519231076, "post_id": 48908794, "comment_id": 84828276, "body": "@AKHolland And which order would that be? Should you be able to rely on a particular order?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 1, "creation_date": 1519236594, "post_id": 48908794, "comment_id": 84831732, "body": "@Peter: I doubt if it&#39;s true that only attributes with a lexically smaller name are accessible. The construct used by <code>Moo</code> is a <i>hash</i>, which is inherently and deliberately <i>unsorted</i>, so I would expect the builder methods to be called in a random order. It&#39;s very possible that <code>Moo</code> sorts the attribute names, if only so that successive runs of the same initialisation  code produce the same results. A dummy attribute <code>zz</code>, whose builder method would have access to every other attribute, but that&#39;s an unpleasant approach and an ordinary method is surely preferable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 1, "creation_date": 1519242143, "post_id": 48908794, "comment_id": 84834587, "body": "@PeterV.M&#248;rch  Re: &quot;<i>why I should not be able to rely on the attributes</i>&quot;  -- you are in the middle of the initialization in the constructor, that&#39;s enough. Best assume that there is no data until <i>all</i> that is done. Not only must you deal with that member only but you have to be careful with that in itself if it involves complex data structures or composition/inheritance of other objects (order of <i>their</i> construction etc). It&#39;s in every language as Sinan says, and really more so in those with more involved OO machinery."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1519292525, "post_id": 48908794, "comment_id": 84854355, "body": "Ok, ok, ok. I get it. :-)"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 6, "last_activity_date": 1519224801, "last_edit_date": 1519224801, "creation_date": 1519224401, "answer_id": 48908794, "question_id": 48908537, "link": "https://stackoverflow.com/questions/48908537/why-does-moos-builder-method-have-access-to-only-some-of-the-other-attributes/48908794#48908794", "title": "Why does Moo&#39;s builder method have access to only some of the other attributes?", "body": "<p>In fact, you should not assume anything about any other fields in the builder for a specific member. If the value of some member of your class depends on the values of one or more other members, then the appropriate place to handle that would be the class <a href=\"https://metacpan.org/pod/Moo#BUILD\" rel=\"noreferrer\">BUILD</a> method.</p>\n\n<p>I don't know exactly what you are trying to achieve, but are you looking for <a href=\"https://metacpan.org/pod/Moo#is\" rel=\"noreferrer\">lazy</a>?</p>\n\n<p>Or, maybe <code>b</code> needs to be a method in your class</p>\n"}], "owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 48908794, "answer_count": 1, "score": 2, "last_activity_date": 1519224801, "creation_date": 1519223706, "question_id": 48908537, "link": "https://stackoverflow.com/questions/48908537/why-does-moos-builder-method-have-access-to-only-some-of-the-other-attributes", "title": "Why does Moo&#39;s builder method have access to only some of the other attributes?", "body": "<p>I was expecting a builder method to have access to all the other attributes provided by the caller. But it seems it only has access to those whose name is alphabetically less than the current attribute's. E.g. why can the builder for <code>b</code> here see the value of <code>a</code> but not <code>c</code>? (Both 'a' and 'c' are present in the final object)</p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Data::Dumper;\n{\n    package P;\n    use Moo;\n\n    printf \"Moo version: %s\\n\", $Moo::VERSION;\n\n    # a and c are defined in the same way\n    has a =&gt; ( is =&gt; 'ro' );\n    has c =&gt; ( is =&gt; 'ro' );\n    has b =&gt; (\n        is =&gt; 'ro',\n        builder =&gt; '_build_b',\n    );\n\n    sub _build_b {\n        my ($self) = @_;\n        print Data::Dumper-&gt;new(\n            [ $self ], [ 'self_during_build_b' ]\n        )-&gt;Indent(1)-&gt;Sortkeys(1)-&gt;Dump;\n        return \"somebuiltvalue\";\n    }\n}\nmy $p = P-&gt;new({ a =&gt; 1, c =&gt; 3 });\nprint Data::Dumper-&gt;new([$p],['p'])-&gt;Indent(1)-&gt;Sortkeys(1)-&gt;Dump;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Moo version: 2.003004\n$self_during_build_b = bless( {\n  'a' =&gt; 1\n}, 'P' );\n$p = bless( {\n  'a' =&gt; 1,\n  'b' =&gt; 'somebuiltvalue',\n  'c' =&gt; 3\n}, 'P' );\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1519223445, "last_edit_date": 1519223445, "creation_date": 1519223083, "answer_id": 48908297, "question_id": 48908194, "link": "https://stackoverflow.com/questions/48908194/regex-to-match-on-path-after-a-known-path-in-a-url/48908297#48908297", "title": "Regex to match on path after a known path in a URL", "body": "<p>You may make the <code>/.*</code> optional. Use</p>\n\n<pre><code>perl -pe 's|^.*/branches/([^/]*)(?:/.*)?$|$1|'\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>sed 's|^.*/branches/\\([^/]*\\)\\(/.*\\)\\?$|\\1|'\n</code></pre>\n\n<p>Or if you can afford a GNU <code>grep</code>:</p>\n\n<pre><code>grep -oP '/branches/\\K[^/]+'\n</code></pre>\n\n<p>The <code>(?:/.*)?</code> part matches 1 or 0 occurrences of  a <code>/</code> followed with any 0+ chars other than line break chars. The <code>sed</code> solution is identical, just the metacharacters are escaped since it is a BRE POSIX compliant pattern. In the <code>grep</code> solution, <code>/branches/\\K</code> matches <code>/branches/</code> and the value is discarded after that and the only text returned is the one matched with <code>[^/]+</code> (one or more chars other than <code>/</code>).</p>\n\n<p>See an <a href=\"https://ideone.com/7HnjmS\" rel=\"nofollow noreferrer\"><strong>online demo</strong></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519225113, "post_id": 48908332, "comment_id": 84823964, "body": "+1 because simpler is better, but you do not need the trailing <code>.*</code> at all. You do not need to escape the <code>&#47;</code>."}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519225527, "post_id": 48908332, "comment_id": 84824256, "body": "Have you tried ? trailing <code>.*</code> is required. True for <code>&#47;</code> thanks."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519226292, "post_id": 48908332, "comment_id": 84824784, "body": "Yes, I tried. My reading of the question, &quot;<i>the path that appears after a certain path in a URL</i>&quot; means the OP does not just want <code>new-feature</code> but the entire path including and following <code>new-feature</code>."}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519226366, "post_id": 48908332, "comment_id": 84824836, "body": "That&#39;s not how I understand the question, and that&#39;s why sample output is often more clear. OP said <i>Given either of the above URLs, I want to capture &quot;new-feature&quot;</i>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519226913, "post_id": 48908332, "comment_id": 84825244, "body": "Except that if one knows that one wants the string <code>new-feature</code>, which is constant and immutable, there is no need for all these gymnastics."}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519226990, "post_id": 48908332, "comment_id": 84825290, "body": "Thanks to the down voters to explain what&#39;s wrong ? My output is identical to accepted answer..."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519239996, "post_id": 48908332, "comment_id": 84833453, "body": "There is only one down-vote ... I voted your answer up conditionally, then I retracted my vote. See also <a href=\"https://meta.stackexchange.com/questions/121350/ive-just-been-downvoted-how-should-i-react\">I&#39;ve just been downvoted. How should I react?</a>. You may never know why the other person voted your answer down, and you should not care."}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1519240192, "post_id": 48908332, "comment_id": 84833555, "body": "Yes, just curious to know why, that&#39;s all :)"}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 1, "last_activity_date": 1519225549, "last_edit_date": 1519225549, "creation_date": 1519223175, "answer_id": 48908332, "question_id": 48908194, "link": "https://stackoverflow.com/questions/48908194/regex-to-match-on-path-after-a-known-path-in-a-url/48908332#48908332", "title": "Regex to match on path after a known path in a URL", "body": "<p>Try this :</p>\n\n<pre><code>perl -pe 's|.*?/branches/([^/]+).*|$1|'\n</code></pre>\n\n<p>Note</p>\n\n<ul>\n<li><code>$1</code> not sed-like <code>\\1</code></li>\n<li><code>[^\\/]+</code> means: all character except <code>/</code>, and <code>+</code> means at least one occurence</li>\n</ul>\n\n<p>Another solution :</p>\n\n<pre><code>perl -lne 'print $&amp; if m|/branches/\\K[^/]+|'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 5018364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30TXw.jpg?s=128&g=1", "display_name": "Md. Miraj Khan", "link": "https://stackoverflow.com/users/5018364/md-miraj-khan"}, "is_accepted": false, "score": -2, "last_activity_date": 1519225171, "creation_date": 1519225171, "answer_id": 48909045, "question_id": 48908194, "link": "https://stackoverflow.com/questions/48908194/regex-to-match-on-path-after-a-known-path-in-a-url/48909045#48909045", "title": "Regex to match on path after a known path in a URL", "body": "<p>For PCRE PHP below code work fine for me.</p>\n\n<p>/branches/(.+)//</p>\n\n<p><a href=\"https://regex101.com/r/5m2uQe/1\" rel=\"nofollow noreferrer\">live demo</a> <a href=\"https://regex101.com/r/5m2uQe/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/5m2uQe/1</a></p>\n"}], "owner": {"reputation": 1226, "user_id": 870060, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f03cc1e1c43d417af4327ec55f74f70e?s=128&d=identicon&r=PG", "display_name": "Scribblemacher", "link": "https://stackoverflow.com/users/870060/scribblemacher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 48908297, "answer_count": 3, "score": 2, "last_activity_date": 1519303065, "creation_date": 1519222798, "last_edit_date": 1519303065, "question_id": 48908194, "link": "https://stackoverflow.com/questions/48908194/regex-to-match-on-path-after-a-known-path-in-a-url", "title": "Regex to match on path after a known path in a URL", "body": "<p>I'm trying to get a perl regex to git me the path that appears after a certain path in a URL:</p>\n\n<p>URLs to test against:</p>\n\n<pre><code>http://example.org/project/branches/new-feature\nhttp://example.org/project/branches/new-feature/src\n</code></pre>\n\n<p>Given either of the above URLs, I want to capture \"new-feature\". Using the Perl regex below, I can the second URL but not the first.</p>\n\n<pre><code>echo $url | perl -pe 's|^.*/branches/(.*?)/.*$|\\1|'\n</code></pre>\n\n<p>The issue is with the slash after \"new-feature\", which may or may not be present.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 1, "creation_date": 1519213402, "post_id": 48904913, "comment_id": 84815601, "body": "Take a look <a href=\"https://stackoverflow.com/questions/2415954/how-can-i-store-perls-system-function-output-to-a-variable\">here</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1519213574, "post_id": 48904913, "comment_id": 84815734, "body": "Why don&#39;t you just read the <code>~&#47;.bash_history</code> file directly?"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519215921, "post_id": 48904913, "comment_id": 84817389, "body": "@Borodin To me it seems more similar to what I suggested. The question doesn&#39;t ask what is the diffrence between <code>system</code> and other ways to make a call, it asks how to store the result of a <code>system</code> call in a variable, which is the same with what is asked <a href=\"https://stackoverflow.com/questions/2415954/how-can-i-store-perls-system-function-output-to-a-variable\">here</a>"}, {"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519232535, "post_id": 48904913, "comment_id": 84829311, "body": "Dear @Borodin and @John, I know that using back-tic, <code>qx&#47;&#47;</code> or opening a pipe it is simple to obtain the output of the command. The problem is that with <code>system</code> is possible to pass <code>-i</code> to bash, not with other methods. If it is mandatory I will force a write on <code>~&#47;.bash_history</code> and then i will read the penultimate row of the file (see my comment to @xxfelixxx answer), I was just asking if there is a more elegant way."}, {"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1519233505, "post_id": 48904913, "comment_id": 84829925, "body": "@JohnDoe thanks, but I&#39;m not able to run properly the <code>history</code> command."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519235544, "post_id": 48904913, "comment_id": 84831118, "body": "Why can&#39;t you pass an <code>-i</code> option to <code>qx&#47;&#47;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1519224572, "post_id": 48905770, "comment_id": 84823561, "body": "That is not reading the file directly. Doing so would involve using <code>open</code>, not spawning external commands"}, {"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "edited": false, "score": 0, "creation_date": 1519232167, "post_id": 48905770, "comment_id": 84829077, "body": "The bash history is not written every time a command is launched. On my system your example does not work. So I have to do <code>$echo &quot;foo&quot;</code>, then <code>$ history -w</code>, and then <code>perl -e &#39;chomp(my $cmd = qx(tail -n 2 ~&#47;.bash_history| head -n 1)); print &quot;$cmd bar\\n&quot;;&#39;</code>. I&#39;m looking to some more elegant solution if exists."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1519257398, "post_id": 48905770, "comment_id": 84841426, "body": "You can add &#39;history -a&#39; to your .bashrc to have it get written out after every command."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1519260936, "post_id": 48905770, "comment_id": 84842351, "body": "@ChrisTurner, what I meant by using the history file directly was to read the history file, not to try to invoke bash and use its history builtin.  You are correct that we could just read the file from within perl, but then you need to read through the file and print the last line...when tail -n 1 does this for you)"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 0, "last_activity_date": 1519261285, "last_edit_date": 1519261285, "creation_date": 1519215511, "answer_id": 48905770, "question_id": 48904913, "link": "https://stackoverflow.com/questions/48904913/obtain-the-last-command-executed-by-bash-inside-a-perl-script/48905770#48905770", "title": "Obtain the last command executed by bash, inside a perl script", "body": "<p>Use <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">qx</a> to capture shell command output.  Read the <code>~/.bash_history</code> file directly since you cannot capture the output of the shell builtin function <code>history</code>.  </p>\n\n<p>You may need to add <code>history -a</code> to your <code>.bashrc</code> file to get bash to write the history file after every command, or add <code>history -w</code> to your bash <code>PROMPT_COMMAND</code>.  Other settings are covered nicely over at  <a href=\"https://unix.stackexchange.com/questions/18212/bash-history-ignoredups-and-erasedups-setting-conflict-with-common-history\">unix.stackexchange.com</a>.</p>\n\n<pre><code>$ echo \"foo\"\nfoo\n$ perl -e 'chomp(my $cmd = qx(tail -n 1 ~/.bash_history)); print \"$cmd bar\\n\";'\necho \"foo\" bar\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "closed_date": 1519215670, "accepted_answer_id": 48905770, "answer_count": 1, "score": 1, "last_activity_date": 1519261285, "creation_date": 1519212997, "last_edit_date": 1519233724, "question_id": 48904913, "link": "https://stackoverflow.com/questions/48904913/obtain-the-last-command-executed-by-bash-inside-a-perl-script", "closed_reason": "Duplicate", "title": "Obtain the last command executed by bash, inside a perl script", "body": "<p>I would like to write a perl script that do something similar to what <a href=\"https://en.wikipedia.org/wiki/Fc_(Unix)\" rel=\"nofollow noreferrer\">fc</a> do. Indeed I want to edit programmatically the last command executed.\nSomething like this should work</p>\n\n<pre><code>perl -wle 'print system(\"/bin/bash\", \"-i\", \"-c\", \"history | tail -n 1\")'\n</code></pre>\n\n<p>but <code>system</code> return the exit status of the command executed, not the stdout, that is what I want, while I'm not able to activate the history (<code>-i</code> flag)  using back-tic, <code>qx//</code> or opening a pipe.</p>\n\n<p>I know that using back-tic, <code>qx//</code> or opening a pipe it is simple to read the stdout of the command, but int this case how to use the builtin bash <code>hisotry</code> command properly?</p>\n\n<p>Even using <code>system</code> and passing <code>-i</code> to bash, I'm not able to get the expected output from <code>history | tail -n 1</code>. Bi redirecting the output to a file I found its content empty.</p>\n\n<pre><code>perl -wle 'print system(\"/bin/bash\", \"-i\", \"-c\", \"history | tail -n 1 &gt; /tmp/pippo\")'\n</code></pre>\n\n<p>So am I forced to write the bash history on a file whit <code>history -w</code> and to read that file inside perl?</p>\n"}, {"tags": ["perl", "bluetooth", "hid", "bluez"], "owner": {"reputation": 487, "user_id": 447876, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ba0b13f80f0d84d4e144b07ea42e7154?s=128&d=identicon&r=PG", "display_name": "sebastian nielsen", "link": "https://stackoverflow.com/users/447876/sebastian-nielsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519205824, "creation_date": 1519205824, "question_id": 48902487, "link": "https://stackoverflow.com/questions/48902487/how-i-do-to-emulate-a-bluetooth-hid-keyboard-in-linux", "title": "How I do to emulate a bluetooth HID keyboard in linux?", "body": "<p>How I do in Linux, to emulate a Bluetooth HID keyboard in Linux, with perl?</p>\n\n<p>I have tried with the Net::Bluetooth ( <a href=\"http://search.cpan.org/~addutko/Net-Bluetooth-0.41/Bluetooth.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~addutko/Net-Bluetooth-0.41/Bluetooth.pm</a> ) module, but can't find anywhere I put in the HID descriptor, and I can't find anywhere if I should use RFCOMM or L2CAP. (05010906a101050719e029e71500250175019508810295017508810395057501050819012905910295017503910395067508150025650507190029658100c0)</p>\n\n<p>I also do NOT want to tie a physical keyboard to the Bluetooth \"output\" like \"hidclient\" do, rather I want to either expose a device similiar to \"/dev/hidg0\" where I can write raw HID packets (like \"\\x00\\x00\\x04\\x00\\x00\\x00\\x00\\x00\" for the key \"a\"), or a similiar perl interface where I can write such packets.</p>\n\n<p>Also, in addition to this, I want to be able to read off some static unique serial number or similiar from the remote device (the \"host\" that the \"emulated keyboard\" is connected to) to authenticate the host to the keyboard.</p>\n\n<p>I also have only found python examples of emulating HID devices. Anyone that can Point me in the right direction on how to register SDP services in Perl?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1519203186, "creation_date": 1519203186, "answer_id": 48901593, "question_id": 48901360, "link": "https://stackoverflow.com/questions/48901360/perl-regex-adding-a-symbol-in-front-of-another-symbol-in-a-string/48901593#48901593", "title": "Perl Regex: Adding a symbol in front of another symbol in a string", "body": "<p>Change the regular expression delimiter to a <code>|</code> and then substitute all forward slashes <code>/</code> with back-slash forward-slash <code>\\/</code>.  The back-slash must be escaped, since it is itself the 'escape' character.  So <code>\\\\/</code>;  The trailing <code>g</code> means perform the replacement everywhere, the leading <code>s</code> means substitute:  <code>s|\\|\\\\/|g</code>.  </p>\n\n<p>Have a read of <a href=\"http://perldoc%20perlretut\" rel=\"nofollow noreferrer\">perldoc perlretut</a> for a friendly introduction to regular expressions.</p>\n\n<pre><code>my $string = \"a/hello/bye/d\";\n$string =~ s|/|\\\\/|g;\nprint $string . \"\\n\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>a\\/hello\\/bye\\/d\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 5384164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/915d1997617a7f7cac627959d6c054d1?s=128&d=identicon&r=PG&f=1", "display_name": "Yaswanth Gelli", "link": "https://stackoverflow.com/users/5384164/yaswanth-gelli"}, "is_accepted": false, "score": 1, "last_activity_date": 1519205949, "creation_date": 1519205949, "answer_id": 48902539, "question_id": 48901360, "link": "https://stackoverflow.com/questions/48901360/perl-regex-adding-a-symbol-in-front-of-another-symbol-in-a-string/48902539#48902539", "title": "Perl Regex: Adding a symbol in front of another symbol in a string", "body": "<p>You could use quotemeta() to achieve that.</p>\n\n<pre><code>: perl -e 'my $string = \"a/hello/bye/d\"; print quotemeta($string); print \"\\n\"'\na\\/hello\\/bye\\/d\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4991056, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a881503bc92a1f9ddf2155e5da35a471?s=128&d=identicon&r=PG&f=1", "display_name": "beginner", "link": "https://stackoverflow.com/users/4991056/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1519495068, "answer_count": 2, "score": -4, "last_activity_date": 1519205949, "creation_date": 1519202399, "question_id": 48901360, "link": "https://stackoverflow.com/questions/48901360/perl-regex-adding-a-symbol-in-front-of-another-symbol-in-a-string", "closed_reason": "Not suitable for this site", "title": "Perl Regex: Adding a symbol in front of another symbol in a string", "body": "<p>If i had a string:</p>\n\n<pre><code>my $string = \"a/hello/bye/d\";\n</code></pre>\n\n<p>I would like to add in a \"\\\" symbol infront of every \"/\" symbol found inside the string. Are there any possible ways to do this?</p>\n\n<p>Example:</p>\n\n<pre><code>$string = \"a\\/hello\\/bye\\/d\";\n</code></pre>\n"}, {"tags": ["perl", "template-toolkit"], "answers": [{"tags": [], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "is_accepted": true, "score": 2, "last_activity_date": 1519295042, "creation_date": 1519295042, "answer_id": 48924977, "question_id": 48901220, "link": "https://stackoverflow.com/questions/48901220/how-to-join-lists-references-into-a-single-one/48924977#48924977", "title": "How to join lists (references) into a single one", "body": "<p>The list VMethod <code>merge()</code> will do the job:</p>\n\n<pre><code>[% testList1 = [0,1,2,3,4,5] %]\n[% testList2 = [6,7,8,9,10,] %]\n\n[% doSomething = '' %]\n[% FOREACH item IN testList1.merge(testList2) %]\n  [% doSomething = doSomething _ 'useful ' _ item %]\n[% END %]\n[% doSomething %]\n</code></pre>\n\n<p>See <a href=\"http://www.template-toolkit.org/docs/manual/VMethods.html#section_merge\" rel=\"nofollow noreferrer\">http://www.template-toolkit.org/docs/manual/VMethods.html#section_merge</a> for more information.</p>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 48924977, "answer_count": 1, "score": 0, "last_activity_date": 1519295042, "creation_date": 1519201834, "last_edit_date": 1519285846, "question_id": 48901220, "link": "https://stackoverflow.com/questions/48901220/how-to-join-lists-references-into-a-single-one", "title": "How to join lists (references) into a single one", "body": "<p>I have 2 lists with complex (similar) hashes in them and i want to iterate over both lists within a single loop to not duplicate the code (I also do not want to make a block or macro)</p>\n\n<pre><code>testList1 = [0,1,2,3,4,5];\ntestList2 = [6,7,8,9,10,];\n\nFOREACH item IN [testList1 , testList2]; # &lt;--- ???\n  doSomething = doSomething _ 'useful ' _ item;\nEND;\n</code></pre>\n\n<p>The above statement creates a new list that contains only the references to the lists, but i want a temporary list with their contents.</p>\n\n<p>How can i achieve this without extra manual list building logic. Is there some construct?</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519196025, "post_id": 48899436, "comment_id": 84804784, "body": "Note that this merely stores the <i>values</i> of the scalars in the array, but that&#39;s surely what the OP wants."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 4, "last_activity_date": 1519194504, "creation_date": 1519194504, "answer_id": 48899436, "question_id": 48899412, "link": "https://stackoverflow.com/questions/48899412/how-to-store-scalar-variables-in-perl-array/48899436#48899436", "title": "How to store scalar variables in perl array?", "body": "<p>You don't need take reference of scalars by <code>\\</code>. You can directly do:</p>\n\n<pre><code>@numbers = ($num1, $num2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 9396010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e0e843934a57e82bc87e031686a094?s=128&d=identicon&r=PG&f=1", "display_name": "Darius D", "link": "https://stackoverflow.com/users/9396010/darius-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1519308543, "creation_date": 1519308543, "answer_id": 48929473, "question_id": 48899412, "link": "https://stackoverflow.com/questions/48899412/how-to-store-scalar-variables-in-perl-array/48929473#48929473", "title": "How to store scalar variables in perl array?", "body": "<p>You stored a reference in your array.</p>\n\n<pre><code>@numbers=(\\$num1 ,\\$num2);\n</code></pre>\n\n<p>Delete the \"\\\" in front of your Variables and it work.</p>\n\n<pre><code>@numbers=($num1 ,$num2);\n</code></pre>\n\n<hr>\n\n<p>A other simple Way is to use the push function from perl.</p>\n\n<pre><code>push(@numbers,($num1,$num2));\n</code></pre>\n\n<p>With push you append your array.</p>\n"}], "owner": {"reputation": 147, "user_id": 8622811, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/b99f6d7e3938f5f31578cc93d42953f0?s=128&d=identicon&r=PG&f=1", "display_name": "Abhilasha", "link": "https://stackoverflow.com/users/8622811/abhilasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1320, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519308543, "creation_date": 1519194410, "question_id": 48899412, "link": "https://stackoverflow.com/questions/48899412/how-to-store-scalar-variables-in-perl-array", "title": "How to store scalar variables in perl array?", "body": "<p>I have an array</p>\n\n<pre><code>my @numbers;\nmy $num1 = 23;\nmy $num2 = 4;\n@numbers=(\\$num1 ,\\$num2);\nprint @numbers;\n</code></pre>\n\n<p>then on printing the array i get something like this SCALAR(0x6a16ec8), i want the values. How do i properly store the scalar values in the array?</p>\n"}, {"tags": ["perl", "spring-cloud-netflix"], "owner": {"reputation": 11, "user_id": 3343428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d46d804a68df5568bff5be8f896a11?s=128&d=identicon&r=PG&f=1", "display_name": "anil.mavila", "link": "https://stackoverflow.com/users/3343428/anil-mavila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519191131, "creation_date": 1519191131, "question_id": 48898761, "link": "https://stackoverflow.com/questions/48898761/spring-cloud-eureka-library-for-perl", "title": "Spring Cloud Eureka library for perl", "body": "<p>Are there any library for adding perl service(s) to eureka server similar to how we have eureka-js-client module for nodejs?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1519169456, "post_id": 48895344, "comment_id": 84797529, "body": "Is the <code>PERL_UNICODE</code> environment variable set? Do you have any <code>use open</code> statements in your code?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519170137, "post_id": 48895344, "comment_id": 84797728, "body": "The <code>content</code> method is from <a href=\"http://search.cpan.org/~oalders/HTTP-Message-6.14/lib/HTTP/Message.pm\" rel=\"nofollow noreferrer\">HTTP::Message</a>  and &quot;<i>the original raw content is returned</i>&quot; by it, so you are dumping bytes to the file. (It is a general rule to always decode input and encode output though.)  As for the other question, how will you &quot;<i>send the string to another server using HTTP</i>&quot;?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519177263, "post_id": 48895344, "comment_id": 84799535, "body": "The way it sends over HTTP is very complex, but basically it&#39;s a PSGI response. I expected that that is just byte-for-byte."}], "answers": [{"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519172860, "post_id": 48896328, "comment_id": 84798436, "body": "The main part of my question was, what is the utf8 layer actually doing. How is it changing the data on input or output?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519172931, "post_id": 48896328, "comment_id": 84798465, "body": "The problem I see with decoding input and encoding output is: What if the input I am writing is already in Utf8, and then I write it using the layer &#39;utf8&#39;, wouldn&#39;t I double-encode and create jibberish?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 1, "creation_date": 1519173183, "post_id": 48896328, "comment_id": 84798533, "body": "@Stephen, Yes, but the correct fix isn&#39;t removing the encoding layer; it&#39;s decoding your inputs. You shouldn&#39;t be working with encoded text (e.g. text encoded using UTF-8); you should be working with decoded text (Unicode Code Points)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519173241, "post_id": 48896328, "comment_id": 84798555, "body": "@Stephen  The <code>layers</code> are complex (I don&#39;t know their implementation) but in general they set encoding/decoding for affected I/O channels as specified.  Read the (whole) <code>open</code> pragma page.  // Yes, double-encoding is absolutely something to watch out for.  It&#39;ll depend on details of what your code does (for one thing, <i>always do both</i>)"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 1, "creation_date": 1519173778, "post_id": 48896328, "comment_id": 84798677, "body": "@Stephen what you have now works as long as the server sends UTF-8 (which isn&#39;t something you control, or even check for). But if you use <code>decoded_content</code> plus open the output as <code>:encoding(UTF-8)</code>, it works <i>regardless</i> of what encoding the server uses (so long as it correctly advertises that in the headers, which is 99% true by now)."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519173876, "post_id": 48896328, "comment_id": 84798706, "body": "@Stephen but you&#39;ve noticed something that&#39;s very common to &quot;Unicode problems&quot;, which is that code that&#39;s completely wrong will often &quot;almost&quot; work, but fixing <i>part</i> of the problem will seem to make things much worse. You have to do <i>everything</i> right to get correct results."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1519176376, "post_id": 48896328, "comment_id": 84799329, "body": "<i>&quot;Please recall that one should always decode all input and encode all output&quot;</i>  -- I&#39;m not sure you can make this blanket statement.  If your local character set is not UTF-8, and you decode a UTF-8 string that contains characters not in your local character set, you will lose information and will not be able to re-encode back to UTF-8."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519178590, "post_id": 48896328, "comment_id": 84799844, "body": "So if I read between the lines here, it seems like the internal representation of a string in Perl will be different depending on whether it&#39;s been decoded or not? If it hasn&#39;t, it is just a byte string, but if it has, it&#39;s a string of character points?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519178805, "post_id": 48896328, "comment_id": 84799894, "body": "I actually control the server that is sending this data. And it seems to be sending as UTF8 just fine, but I never set it to that. I am using a complex response with PSGI that uses a callback method to write the response (the second example here: <a href=\"https://metacpan.org/pod/PSGI#Delayed-Response-and-Streaming-Body\" rel=\"nofollow noreferrer\">metacpan.org/pod/PSGI#Delayed-Response-and-Streaming-Body</a>). There isn&#39;t any way to set a character encoding here. YET I am writing string to it which have been decoded (so I guess they are code points) and they are being received by the recipient server as UTF8"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1519179358, "post_id": 48896328, "comment_id": 84800011, "body": "The other thing is, I even perform a regular expression search on that raw content that I get back from $response-&gt;content to match certain parts. I&#39;m actually only writing one of those match groups to the file, and that&#39;s what&#39;s showing up fine in diffs with the &quot;correct&quot; utf8 files. So it&#39;s a little strange if the raw content can&#39;t be trusted that this works for me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1519180631, "post_id": 48896328, "comment_id": 84800274, "body": "@JimGarrison  I agree that most &quot;blanket&quot; statements aren&#39;t bullet proof. But what would one say? It&#39;s a good general rule, and then there is a matter of how to apply it. I am not sure I understand the rest. If I receive utf8 and decode it then the program will carry on with Unicode code points. Then I can encode that appropriately and send it out."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1519180898, "post_id": 48896328, "comment_id": 84800338, "body": "@JimGarrison <code>decode</code> doesn&#39;t care what your &quot;local character set&quot; is. It won&#39;t lose data. It decodes into a representation that includes everything in Unicode and then a bit more for good measure, not the system locale. <i>Encoding into</i> an encoding that lacks certain characters is a problem, but of course it is. And not a problem if you&#39;re targeting UTF-8."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1521583144, "last_edit_date": 1592644375, "creation_date": 1519172221, "answer_id": 48896328, "question_id": 48895344, "link": "https://stackoverflow.com/questions/48895344/making-sure-that-my-handling-of-utf8-is-correct/48896328#48896328", "title": "making sure that my handling of utf8 is correct", "body": "<p>There is no &quot;<em>handling of utf8</em>&quot; in the main question and that in itself isn't right.</p>\n<p>The whole thing works, as the server <em>is</em> sending utf8 as you say, in the following way.</p>\n<p>The <code>content</code> method used on <code>$response</code> is from <a href=\"http://search.cpan.org/%7Eoalders/HTTP-Message-6.14/lib/HTTP/Message.pm\" rel=\"nofollow noreferrer\">HTTP::Message</a></p>\n<blockquote>\n<p>The content() method sets the raw content if an argument is given. If no argument is given the content is not touched. In either case the original raw content is returned.</p>\n</blockquote>\n<p>Since you don't specify layers<sup>\u2020</sup> in <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a> the default is used, likely <code>:unix:perlio</code> for Unix, with no encoding (see <a href=\"https://perldoc.perl.org/PerlIO.html\" rel=\"nofollow noreferrer\">PerlIO</a>). So you are dumping the original bytes to the disk, unchanged.</p>\n<p>Looking further down the page, at <code>decoded_content( %options )</code>, we see the default</p>\n<blockquote>\n<p><code>default_charset</code></p>\n<p>This override the default charset guessed by content_charset() or if that fails &quot;ISO-8859-1&quot;.</p>\n</blockquote>\n<p>and can establish what you are getting by printing it</p>\n<pre><code>say 'Content type: ', $response-&gt;content_charset;\n</code></pre>\n<p>where you should get <code>Content type: UTF-8</code>.  But if you were receiving a different encoding from the server then <em>that</em> would wind up in the file and any code that expects utf8 would break.</p>\n<p>One should <em>always decode all input and encode all output</em>. Then we know exactly what is going on. As input is decoded the program carries on with character strings (not bytes in whatever encoding was sent). In the end encode suitably for output. This <a href=\"https://www.effectiveperlprogramming.com/2011/08/know-the-difference-between-character-strings-and-utf-8-strings/\" rel=\"nofollow noreferrer\">EffectivePerler article</a> should be useful. Here you'd use <code>decoded_content</code> and write files opened with <code>:encoding(UTF-8)</code>.</p>\n<p>With <code>use open &quot;:std&quot;, &quot;:encoding(UTF-8)&quot;;</code> all I/O in the lexical scope of this pragma will be handled as utf8. (This can be overriden for other specific uses, say by specifying layers in the three argument open.)\nSee <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma</a>.</p>\n<p>As for the other question, you need to properly encode what you intend to &quot;<em>send to another server</em>.&quot;  How to do that depends on how you are &quot;sending&quot; it.</p>\n<hr />\n<p><sup>\u2020</sup> \u00a0 With <a href=\"https://perldoc.perl.org/PerlIO.html\" rel=\"nofollow noreferrer\">PerlIO</a> the I/O &quot;layers&quot; can be set so that encoding of input and output is done as needed behind the scenes, as data is read or written. The work is done by <a href=\"https://perldoc.perl.org/Encode.html\" rel=\"nofollow noreferrer\">Encode</a>. For a nice explanation of the process see <a href=\"http://search.cpan.org/%7Ejhi/perl-5.8.1/ext/Encode/lib/Encode/PerlIO.pod\" rel=\"nofollow noreferrer\">Encode::PerlIO</a>.\nAlso see <a href=\"https://perldoc.perl.org/perlunitut.html\" rel=\"nofollow noreferrer\">perlunitut</a>, <a href=\"https://perldoc.perl.org/perlunifaq.html\" rel=\"nofollow noreferrer\">perlunifaq</a>, and <a href=\"http://perldoc.perl.org/perluniintro.html\" rel=\"nofollow noreferrer\">perluniitro</a>.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1521583144, "creation_date": 1519166111, "question_id": 48895344, "link": "https://stackoverflow.com/questions/48895344/making-sure-that-my-handling-of-utf8-is-correct", "title": "making sure that my handling of utf8 is correct", "body": "<p>I am using Perl for a module that involves processing a lot of Unicode documents. I started getting nervous because I'm not opening and closing files with the utf8 layers like <code>open (OUT, '&gt;:utf8', $textfile)</code>. However, I have been thoroughly testing and the output was still as expected. So I want to better understand why.</p>\n\n<p>In a nutshell, my Perl module passes a document to an external service and gets a response. The response will be in Utf8. It uses LWP::UserAgent for this. When it gets the response it just writes it to a file:</p>\n\n<pre><code>my $fh;\nopen($fh, '&gt;', $outputpath) or die \"Could not open file '$outputpath' $!\";\nprint $fh $response-&gt;content;\nclose $fh;\n</code></pre>\n\n<p>I have diffed these files against Unicode files representing the \"expected\" output and it is fine. And yet, you can see in my open command that I was not using the utf8 layer. So why is that?</p>\n\n<p>What if I just returned $response->content to some other process, instead of printing it? Would it still be proper Unicode then?</p>\n\n<hr>\n\n<p>I also have a separate process that I would like to ask about, very similar question. In this case I am trying to build a new service which replaces an old one. The old one read from a file like <code>open(my $fh, '&lt;:utf8', $inputfile)</code> and wrote to a new file like <code>open(my $fh, '&gt;:utf8', $outputfile)</code>. The new service will still read the same way, but will not write to the output file anymore. It will send the string to another server using HTTP, and on that server it will be printed to a file using <code>open(my $fh, '&gt;', $outputfile)</code> so no utf8 layer. I can't change that code immediately. </p>\n\n<p>I want the file contents to be the exact same as they would otherwise have been (none of the other processing rules are changing). Should I be nervous about losing the layer?</p>\n\n<p>I think maybe it would help if I understood better what these layers are doing.</p>\n"}, {"tags": ["regex", "bash", "perl", "grep"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1519162742, "post_id": 48894599, "comment_id": 84795100, "body": "See <a href=\"https://regex101.com/r/YRrnHS/1\" rel=\"nofollow noreferrer\">regex101.com/r/YRrnHS/1</a>, there is explanation on the right."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1519163311, "post_id": 48894699, "comment_id": 84795354, "body": "You do not need to copy/paste regex101 output, the post is a dupe and must be closed. <a href=\"https://stackoverflow.com/questions/22937618\">What does this regex mean</a>, under <i>Tools: Testers and Explainers</i>, contains even more tools helping understand a regex pattern."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": true, "score": 0, "last_activity_date": 1519162976, "creation_date": 1519162976, "answer_id": 48894699, "question_id": 48894599, "link": "https://stackoverflow.com/questions/48894599/bash-greping-for-perl-regex/48894699#48894699", "title": "BASH -- grep&#39;ing for perl-regex", "body": "<ul>\n<li><a href=\"https://www.perlmonks.org/?node_id=518444\" rel=\"nofollow noreferrer\">Positive Lookbehind</a> (?&lt;=\\S/1.\\d.\\s) Assert that the Regex below matches</li>\n<li><code>\\S</code> matches any non-whitespace character (equal to [^\\r\\n\\t\\f\\v ])</li>\n<li><code>\\/</code> matches the character / literally (case sensitive)</li>\n<li><code>1</code> matches the character 1 literally (case sensitive)</li>\n<li><code>\\.</code> matches the character . literally (case sensitive)</li>\n<li><code>\\d</code> matches a digit (equal to [0-9])</li>\n<li><code>.</code> matches any character (except for line terminators)</li>\n<li><code>\\s</code> matches any whitespace character (equal to [\\r\\n\\t\\f\\v ])\nMatch a single character present in the list below [345]</li>\n<li><code>345</code> matches a single character in the list 345 (case sensitive)</li>\n<li><code>\\d+</code> matches a digit (equal to [0-9])</li>\n<li><code>+</code> Quantifier \u2014 Matches between one and unlimited times, as many times as possible, giving back as needed (greedy)</li>\n</ul>\n\n<p>Output simply copied from  <a href=\"https://regex101.com/r/HfJSNm/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/HfJSNm/1</a> : very handy to test/share/have automatic explications on regexes.</p>\n"}], "owner": {"reputation": 35, "user_id": 9352051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4bd72b4f5b840071524cc34bf86e4a?s=128&d=identicon&r=PG&f=1", "display_name": "Sparky1", "link": "https://stackoverflow.com/users/9352051/sparky1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1519162687, "accepted_answer_id": 48894699, "answer_count": 1, "score": -2, "last_activity_date": 1519162976, "creation_date": 1519162466, "question_id": 48894599, "link": "https://stackoverflow.com/questions/48894599/bash-greping-for-perl-regex", "closed_reason": "Duplicate", "title": "BASH -- grep&#39;ing for perl-regex", "body": "<p>Beginner here and I'm trying to understand this. Can someone please break down the part in between the single quotes and describe what it does?</p>\n\n<pre><code>grep -oP '(?&lt;=\\S\\/1\\.\\d.\\s)[345]\\d+'\n</code></pre>\n\n<p>Many thanks in advance!</p>\n"}, {"tags": ["arrays", "perl", "output"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1519156675, "post_id": 48893107, "comment_id": 84792051, "body": "how do you know if you need it repeated $carton_specs{25}{boxNo} times or $carton_specs{50}{boxNo} times?"}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1519163684, "post_id": 48893107, "comment_id": 84795515, "body": "it needs to iterate through both loops."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 1, "creation_date": 1519158667, "post_id": 48893328, "comment_id": 84793076, "body": "That worked perfectly!! Thank you so much for the quick response!  I just got done getting a 20 min lecture from my boss about how we should have hired someone to do this because I obviously can&#39;t figure it out.  Lets just ignore the part where I knew nothing of Perl 4 days ago, taught myself Perl, and learned as much of the nuances as I could sort out while trying to write a sub and implement at the same time!  again, THANK YOU!!!"}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519158719, "post_id": 48893328, "comment_id": 84793090, "body": "And now that i&#39;m looking at the final code, push seems so obvious!"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 0, "last_activity_date": 1519156955, "creation_date": 1519156955, "answer_id": 48893328, "question_id": 48893107, "link": "https://stackoverflow.com/questions/48893107/perl-generating-hash-of-complex-records/48893328#48893328", "title": "Perl generating hash of complex records", "body": "<p>It sounds to me like you are looking for <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\"><code>push</code></a> plus the information from <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> (plus maybe the <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\"><code>..</code> range operator</a>). I hope I understood your specifications correctly:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Data::Dump;\n\nmy $raterequest = {\n    Shipment =&gt; {\n        Package =&gt; [ ],\n    } };\n\nmy %carton_specs =  (\n    25 =&gt; { boxQty =&gt; 25, boxWt =&gt; 4, boxNo =&gt;  2 },\n    50 =&gt; { boxQty =&gt; 50, boxWt =&gt; 8, boxNo =&gt; 17 },\n);\n\nfor my $carton (sort keys %carton_specs) {\n    for ( 1 .. $carton_specs{$carton}{boxNo} ) {\n        push @{ $raterequest-&gt;{Shipment}{Package} }, {\n            PackagingType =&gt; {\n                Code =&gt; '02',\n                Description =&gt; 'Package',\n            },\n            PackageWeight =&gt; {\n                UnitOfMeasurement =&gt; { Code =&gt; 'LBS' },\n                Weight =&gt; $carton_specs{$carton}{boxWt},\n            },\n        };\n    }\n}\n\ndd $raterequest;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  Shipment =&gt; {\n    Package =&gt; [\n      {\n        PackageWeight =&gt; { UnitOfMeasurement =&gt; { Code =&gt; \"LBS\" }, Weight =&gt; 4 },\n        PackagingType =&gt; { Code =&gt; \"02\", Description =&gt; \"Package\" },\n      },\n      {\n        PackageWeight =&gt; { UnitOfMeasurement =&gt; { Code =&gt; \"LBS\" }, Weight =&gt; 4 },\n        PackagingType =&gt; { Code =&gt; \"02\", Description =&gt; \"Package\" },\n      },\n      {\n        PackageWeight =&gt; { UnitOfMeasurement =&gt; { Code =&gt; \"LBS\" }, Weight =&gt; 8 },\n        PackagingType =&gt; { Code =&gt; \"02\", Description =&gt; \"Package\" },\n      },\n      # ... omit 16 repetitions of the previous hashref ...\n    ],\n  },\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 48893328, "answer_count": 1, "score": 1, "last_activity_date": 1519156955, "creation_date": 1519156085, "question_id": 48893107, "link": "https://stackoverflow.com/questions/48893107/perl-generating-hash-of-complex-records", "title": "Perl generating hash of complex records", "body": "<p>The big problem that I can't seem to figure out.\nI need to input into this complex hash (array?):</p>\n\n<pre><code>my $raterequest =  \n{\n    Shipment =&gt;\n    {\n        Shipper =&gt;\n        {\n            (static data here)\n        },\n        ShipTo =&gt;\n        {\n            (static data here too)\n        },\n        Package =&gt;\n        [\n            {\n                PackagingType =&gt;\n                {\n                    Code =&gt; '02',\n                    Description =&gt; 'Package'\n                },\n                PackageWeight =&gt;\n                {\n                    UnitOfMeasurement =&gt;\n                    {\n                        Code =&gt; 'LBS'\n                    },\n                    Weight =&gt; $boxWt\n                },\n            },\n\n            {\n                PackagingType =&gt;\n                {\n                    Code =&gt; '02',\n                    Description =&gt; 'Package'\n                },\n                PackageWeight =&gt;\n                {\n                    UnitOfMeasurement =&gt;\n                    {\n                        Code =&gt; 'LBS'\n                    },\n                    Weight =&gt; $boxWt\n                },\n            }\n        ],\n    }\n};\n</code></pre>\n\n<p>What I need to input is everything inside the <code>Package</code> array.</p>\n\n<p>I have an LoH that generates an output like this:</p>\n\n<pre><code>my %carton_specs = \n    (\n        25 =&gt; {\n            boxQty  =&gt;  25,\n            boxWt   =&gt;  4,\n            boxNo   =&gt;  2\n        },\n        50 =&gt; {\n            boxQty  =&gt;  50,\n            boxWt   =&gt;  8,\n            boxNo   =&gt;  17\n        },\n);\n</code></pre>\n\n<p>Where I need to repeat the anonymous array inside <code>Package</code></p>\n\n<pre><code>{\n    PackagingType =&gt;\n    {\n        Code =&gt; '02',\n        Description =&gt; 'Package'\n    },\n    PackageWeight =&gt;\n    {\n        UnitOfMeasurement =&gt;\n        {\n            Code =&gt; 'LBS'\n        },\n        Weight =&gt; $boxWt\n    },\n},\n</code></pre>\n\n<p>times the number returned from <code>$boxNo</code>.  The only variable that changes in that is the <code>Weight =&gt; $boxWt</code></p>\n\n<p>Please excuse anything that I might have named wrong.  I have been fighting with this for 2 days and my head is exploding.</p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1519155590, "post_id": 48892955, "comment_id": 84791468, "body": "aha, I see. Thank you! I feel so silly, but your explanation was so clear :)"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 10, "last_activity_date": 1519155428, "creation_date": 1519155428, "answer_id": 48892955, "question_id": 48892921, "link": "https://stackoverflow.com/questions/48892921/initializing-a-coderef-field-of-a-moose-class/48892955#48892955", "title": "Initializing a CodeRef field of a Moose class", "body": "<p><code>$user-&gt;check()</code> is equivalent to <code>$user-&gt;check</code>. It just returns the value of the <code>check</code> attribute (i.e, the coderef) without doing anything with it -- just like any other accessor would. The fact that this attribute holds a coderef doesn't change that.</p>\n\n<p>If you want to retrieve the coderef, then call it, you need another arrow:</p>\n\n<pre><code>$user-&gt;check-&gt;()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 7, "last_activity_date": 1519155811, "creation_date": 1519155811, "answer_id": 48893046, "question_id": 48892921, "link": "https://stackoverflow.com/questions/48892921/initializing-a-coderef-field-of-a-moose-class/48893046#48893046", "title": "Initializing a CodeRef field of a Moose class", "body": "<p>An alternative is to use the trait <code>Code</code> implemented by <a href=\"https://metacpan.org/pod/Moose::Meta::Attribute::Native::Trait::Code\" rel=\"noreferrer\">Moose::Meta::Attribute::Native::Trait::Code</a>, and then define a <em>handle</em> with a different name.</p>\n\n<pre><code>package Person;\n\nuse Moose;\n\nhas 'check' =&gt; (\n    is      =&gt; 'rw',\n    isa     =&gt; 'CodeRef',\n    traits  =&gt; ['Code'],\n    handles =&gt; {\n        run_check =&gt; 'execute',\n    },\n);\n</code></pre>\n\n<p>And then call it like this</p>\n\n<pre><code>my $user = Person-&gt;new(\n    first_name =&gt; 'Example',\n    last_name  =&gt; 'User',\n    check      =&gt; sub {\n        print \"yo yo\\n\";\n    },\n);\n\nprint \"here\\n\";\n$user-&gt;run_check;\nprint \"here\\n\";\n</code></pre>\n\n<p>This allows you to separate the accessor for the code-ref from the functionality it fulfills.</p>\n"}], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 48892955, "answer_count": 2, "score": 5, "last_activity_date": 1519236941, "creation_date": 1519155300, "last_edit_date": 1519236941, "question_id": 48892921, "link": "https://stackoverflow.com/questions/48892921/initializing-a-coderef-field-of-a-moose-class", "title": "Initializing a CodeRef field of a Moose class", "body": "<p>I have a Moose class <code>Person</code></p>\n\n<pre><code> package Person;\n\n  use Moose;\n\n  has 'first_name' =&gt; (\n      is  =&gt; 'rw',\n      isa =&gt; 'Str',\n  );\n\n  has 'last_name' =&gt; (\n      is  =&gt; 'rw', \n      isa =&gt; 'Str',\n  );\n\n  has 'check' =&gt; (\n      is =&gt; 'rw',\n      isa =&gt; 'CodeRef',\n  );\n\n  no Moose;\n  __PACKAGE__-&gt;meta-&gt;make_immutable;\n</code></pre>\n\n<p>I am initializing a new <code>Person</code> object in another file like so</p>\n\n<pre><code>use Person;\n\nmy $user = Person-&gt;new(\n    first_name =&gt; 'Example',\n    last_name  =&gt; 'User',\n    check =&gt; sub {\n        print \"yo yo\\n\";\n    },\n  ); \n\nprint \"here\\n\";\n$user-&gt;check();\nprint \"here\\n\";\n</code></pre>\n\n<p>The two <code>here</code> debug statements are printing but the debug message in the subroutine is not. </p>\n\n<p>I'd like to know the correct way for me to pass a function to the constructor such that I can pass an anonymous sub routine to the object.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1519147894, "post_id": 48890988, "comment_id": 84787329, "body": "Seconding the &quot;don&#39;t do this&quot; advice."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1519149825, "post_id": 48890988, "comment_id": 84788451, "body": "Thank you very much, amon! Scalar::Util::readonly It&#39;s exactly what i need."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1519160952, "post_id": 48890988, "comment_id": 84794283, "body": "except that the answer tries to explain why you <i>don&#39;t</i> need that and <i>shoudn&#39;t</i> need that :("}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 8, "last_activity_date": 1519147667, "creation_date": 1519147667, "answer_id": 48890988, "question_id": 48890828, "link": "https://stackoverflow.com/questions/48890828/how-to-distinguish-variable-from-literal-constant-in-function-parameters/48890988#48890988", "title": "How to distinguish variable from literal/constant in function parameters", "body": "<p>Don't do this. The function should always behave the same. In-place modifications are rather non-obvious. If you want to modify a value, explicitly ask for a reference. This makes the modification more visible at the call site.</p>\n\n<p>If you really have to determine whether an argument is constant, you can use <a href=\"https://metacpan.org/pod/Scalar::Util#readonly\" rel=\"noreferrer\"><code>readonly()</code> from Scalar::Util</a>. Internally, each scalar has a flag that controls whether modifications are allowed. This is set for literals. Assignments to read-only scalars will fail. With <code>readonly()</code> you can query this flag.</p>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 48890988, "answer_count": 1, "score": 3, "last_activity_date": 1519147667, "creation_date": 1519147163, "question_id": 48890828, "link": "https://stackoverflow.com/questions/48890828/how-to-distinguish-variable-from-literal-constant-in-function-parameters", "title": "How to distinguish variable from literal/constant in function parameters", "body": "<p>In such case, how to recognize whether there were variable or literal was passed to the function f()?</p>\n\n<p>How to implement passed_as_constant() check (see in the code below)?</p>\n\n<pre><code>sub f {\n  my $refStr=\\$_[0];\n  return if passed_as_constant($_[0]) and !defined(wantarray);\n  substr(${$refStr}, 0, 1)='D';\n# return the copy of the string if it was passed\n# to the function as constant aka \"literally\" or if copying was explicitly requested by the left-side context\n  (passed_as_constant($_[0]) or defined(wantarray)) and return ${$refStr};\n}\n# Argument was passed literally and function called without left-side context - we may simply \"do nothing\"\nf('Bingo!');\n\n# Argument was passed literally and left-side context is here. We must return a copy of literal/constant\nsay my $s=f('Bingo!');\n\n# Here we can modify the $s \"in-place\"\nf(my $s='Bingo!');\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "cpan", "anyevent"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1519232827, "post_id": 48889767, "comment_id": 84829507, "body": "This module&#39;s tests always <a href=\"http://www.cpantesters.org/distro/A/AnyEvent-Fork.html#AnyEvent-Fork-1.31?grade=1&amp;perlmat=2&amp;patches=2&amp;oncpan=2&amp;distmat=2&amp;perlver=ALL&amp;osname=darwin&amp;version=1.31\" rel=\"nofollow noreferrer\">fail</a> on OS/X. You could try approaching the author. He prefers being contacted by email (<code>schmorp@schmorp.de</code>) over using a bug tracker."}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519143856, "creation_date": 1519143856, "question_id": 48889767, "link": "https://stackoverflow.com/questions/48889767/cant-install-anyeventdbi-with-cpan-on-macos-high-sierra", "title": "Can&#39;t install AnyEvent::DBI with Cpan on macOS High Sierra", "body": "<p>there was a problem installing the AnyEvent::DBI for perl v5.18.2 on macOS High Sierra 10.13.3\nAs I understood, the AnyEvent::Fork dependency module is not installed, here's the information from CPAN</p>\n\n<pre><code>cpan[1]&gt; install AnyEvent::Fork\nReading '/Users/dmitry/.cpan/Metadata'\n  Database was generated on Tue, 20 Feb 2018 15:29:03 GMT\nRunning install for module 'AnyEvent::Fork'\nChecksum for /Users/dmitry/.cpan/sources/authors/id/M/ML/MLEHMANN/AnyEvent-Fork-1.31.tar.gz ok\nScanning cache /Users/dmitry/.cpan/build for sizes\n............................................................................DONE\nConfiguring M/ML/MLEHMANN/AnyEvent-Fork-1.31.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for AnyEvent::Fork\nWriting MYMETA.yml and MYMETA.json\n  MLEHMANN/AnyEvent-Fork-1.31.tar.gz\n  /usr/bin/perl Makefile.PL -- OK\nRunning make for M/ML/MLEHMANN/AnyEvent-Fork-1.31.tar.gz\ncp Fork/Template.pm blib/lib/AnyEvent/Fork/Template.pm\ncp Fork/Serve.pm blib/lib/AnyEvent/Fork/Serve.pm\ncp Fork/Early.pm blib/lib/AnyEvent/Fork/Early.pm\ncp Fork.pm blib/lib/AnyEvent/Fork.pm\nManifying 3 pod documents\n  MLEHMANN/AnyEvent-Fork-1.31.tar.gz\n  /usr/bin/make -- OK\nRunning make test\nPERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/00_load.t ...... ok\nt/01_early.t ..... ok\nt/02_template.t .. ok\nt/03_new.t ....... ok\nt/04_tofrom.t .... Failed 2/18 subtests\n\nTest Summary Report\n-------------------\nt/04_tofrom.t  (Wstat: 0 Tests: 18 Failed: 2)\n  Failed tests:  16-17\nFiles=5, Tests=34,  1 wallclock secs ( 0.04 usr  0.02 sys +  0.15 cusr  0.04 csys =  0.25 CPU)\nResult: FAIL\nFailed 1/5 test programs. 2/34 subtests failed.\nmake: *** [test_dynamic] Error 255\n  MLEHMANN/AnyEvent-Fork-1.31.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports MLEHMANN/AnyEvent-Fork-1.31.tar.gz\nFailed during this command:\n MLEHMANN/AnyEvent-Fork-1.31.tar.gz           : make_test NO\n\ncpan[2]&gt; reports MLEHMANN/AnyEvent-Fork-1.31.tar.gz\nDistribution: M/ML/MLEHMANN/AnyEvent-Fork-1.31.tar.gz\nFetching 'http://www.cpantesters.org/show/AnyEvent-Fork.yaml'...DONE\n\nCatching error: \"CPAN::Exception::yaml_process_error=HASH(0x7fdfcd59c350)\" at /Library/Perl/Updates/5.18.2/CPAN.pm line 392.\n    CPAN::shell() called at /Library/Perl/Updates/5.18.2/App/Cpan.pm line 414\n    App::Cpan::_process_options(\"App::Cpan\") called at /Library/Perl/Updates/5.18.2/App/Cpan.pm line 511\n    App::Cpan::run(\"App::Cpan\") called at /usr/local/bin/cpan line 10\n\ncpan[3]&gt;\n</code></pre>\n\n<p>The most interesting on the previous version of macOS I installed this module. </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 5, "last_activity_date": 1519140419, "creation_date": 1519140419, "answer_id": 48888674, "question_id": 48888635, "link": "https://stackoverflow.com/questions/48888635/perl-regular-expression-issues/48888674#48888674", "title": "Perl Regular Expression issues", "body": "<pre><code>my ($date, $time) = split /T/, $string;\n</code></pre>\n\n<p>In your case, you forget to put your match in list context.</p>\n\n<pre><code>my ($mystring) = ($string =~  m/T(.*)Z/);\n</code></pre>\n\n<p>In scalar context, you get the number of captured substrings.</p>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1519140603, "accepted_answer_id": 48888674, "answer_count": 1, "score": 2, "last_activity_date": 1519140638, "creation_date": 1519140282, "question_id": 48888635, "link": "https://stackoverflow.com/questions/48888635/perl-regular-expression-issues", "closed_reason": "Duplicate", "title": "Perl Regular Expression issues", "body": "<p>how do I capture everything after T and everything before T using a regex.</p>\n\n<p>What I have so far is only giving me the number 1.</p>\n\n<pre><code> my $string = '2014-06-09T01:59:54.998Z';\n my $mystring = $string =~  m/T(.*)Z/;\n</code></pre>\n\n<p>I am not very well with regex.  I assumed this is getting anything between T and Z.  Tried leaving off the Z still prints 1.But it only prints</p>\n\n<pre><code>  1\n</code></pre>\n"}, {"tags": ["perl", "cpan", "data-dumper"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1519126997, "post_id": 48884258, "comment_id": 84773443, "body": "Perl 5.8.8 is now over 12 years old. Any chance you can upgrade?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1519127064, "post_id": 48884258, "comment_id": 84773487, "body": "The problem isn&#39;t with Perl or <code>Data::Dumper</code> - it&#39;s with <code>Memoize::Expire</code>. Looks like it isn&#39;t implementing all of the functions required for <code>tie</code>ing a hash."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519127641, "post_id": 48884258, "comment_id": 84773871, "body": "@haukex: No I can&#39;t upgrade perl version, @Chris: <code>Memoize::Expire</code> is updated already but still I am getting this error."}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1519130603, "post_id": 48885413, "comment_id": 84775679, "body": "Thanks @haukex, This solved my problem, I will report this problem to   <code>Memoize::Expire</code>, Unfortunately <code>Memoize::Expire</code> is being used in some legacy codebase."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 6, "last_activity_date": 1519130004, "creation_date": 1519130004, "answer_id": 48885413, "question_id": 48884258, "link": "https://stackoverflow.com/questions/48884258/getting-datadumper-object-print-error/48885413#48885413", "title": "Getting Data::Dumper Object print error", "body": "<p>This reproduces the <code>Can't locate object method \"FIRSTKEY\" via package \"Memoize::Expire\"</code> error (tested on Perl 5.26):</p>\n\n<pre><code>use Memoize::Expire;\nuse Data::Dumper;\ntie my %cache =&gt; 'Memoize::Expire';\nprint Dumper(\\%cache);\n</code></pre>\n\n<p>I think this could be considered a bug in <a href=\"https://metacpan.org/pod/Memoize::Expire\" rel=\"noreferrer\"><code>Memoize::Expire</code></a>: it doesn't provide the <a href=\"http://perldoc.perl.org/perltie.html#FIRSTKEY-this\" rel=\"noreferrer\"><code>FIRSTKEY</code></a> and <code>NEXTKEY</code> implementations that <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"noreferrer\"><code>Data::Dumper</code></a> needs. You may want to report a bug in the <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Memoize\" rel=\"noreferrer\">issue tracker</a>, although unfortunately the distribution seems unmaintained for several years. (You might also want to consider your use of <code>Memoize::Expire</code> in the first place - what are you using it for, do you really need it, etc.)</p>\n\n<p>Since <code>Data::Dumper</code> is typically used for debugging, my question would be if you really need to see the contents of the <code>Memoize::Expire</code> object. If so, you might consider switching to <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"noreferrer\"><code>Data::Dump</code></a> because it provides <a href=\"https://metacpan.org/pod/Data::Dump::Filtered\" rel=\"noreferrer\"><code>Data::Dump::Filtered</code></a>. While the following will <strong>not</strong> provide a data structure that can be <code>eval</code>ed back to Perl, it will hopefully give you useful debug output:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Memoize::Expire;\nuse Data::Dump;\nuse Data::Dump::Filtered 'add_dump_filter';\n\nadd_dump_filter sub {\n    my ($ctx, $ref) = @_;\n    if ($ctx-&gt;reftype eq 'HASH' &amp;&amp; defined(tied(%$ref))) {\n            return { comment=&gt;\"hashref tied to:\",\n                object=&gt;tied(%$ref) };\n    }\n    return undef; # normal processing\n};\n\ntie my %cache =&gt; 'Memoize::Expire';\n$cache{x}='y';\ndd \\%cache;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code># hashref tied to:\nbless({\n  C =&gt; { x =&gt; \"Z\\x8C\\25b\\0\\0\\0\\0\\xFF\\xFFy\" },\n  LIFETIME =&gt; 0,\n  NUM_USES =&gt; 0,\n}, \"Memoize::Expire\")\n</code></pre>\n\n<p>Finally, here's an IMO <strong>ugly hack</strong> quick fix with implementations borrowed from <a href=\"http://perldoc.perl.org/Tie/Hash.html\" rel=\"noreferrer\"><code>Tie::StdHash</code></a>. This should get rid of the error but will however <strong>not</strong> show you the internal structure of the object:</p>\n\n<pre><code>sub Memoize::Expire::FIRSTKEY { my $a = scalar keys %{$_[0]{C}}; each %{$_[0]{C}} }\nsub Memoize::Expire::NEXTKEY  { each %{$_[0]{C}} }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519155246, "post_id": 48890813, "comment_id": 84791296, "body": "Sorry, but this answer is flawed in several places: 1. <code>$self</code> doesn&#39;t need to be tied nor an object (since <code>Data::Dumper</code> recurses); 2. <code>tied $self</code> should be <code>tied %$self</code> (since the error is regarding <code>FIRSTKEY</code>, we know it&#39;s not a tied scalar); and 3. to be applicable in general, <code>||</code> should be <code>&#47;&#47;</code> (defined-or). <a href=\"https://gist.github.com/haukex/7da1940256716ec1ff6bd3f9c89814e5\" rel=\"nofollow noreferrer\">gist.github.com/haukex/7da1940256716ec1ff6bd3f9c89814e5</a>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1519147119, "creation_date": 1519147119, "answer_id": 48890813, "question_id": 48884258, "link": "https://stackoverflow.com/questions/48884258/getting-datadumper-object-print-error/48890813#48890813", "title": "Getting Data::Dumper Object print error", "body": "<p><code>$self</code> is a tie'd object with some of the tied methods unimplemented. A workaround to dumping the tied object is to dump the underlying object</p>\n\n<pre><code>print Dumper(tied $self)\n</code></pre>\n\n<p>or in cases where it is ambiguous whether the object is tied or not</p>\n\n<pre><code>print Dumper(tied $self || $self)\n</code></pre>\n"}], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 1, "accepted_answer_id": 48885413, "answer_count": 2, "score": 2, "last_activity_date": 1519147119, "creation_date": 1519126029, "question_id": 48884258, "link": "https://stackoverflow.com/questions/48884258/getting-datadumper-object-print-error", "title": "Getting Data::Dumper Object print error", "body": "<p><strong>Problem:</strong></p>\n\n<p>I am trying to print the <code>$self</code> object to know the contained data structure like below line and getting the error:</p>\n\n<pre><code>use Data::Dumper;\nmy $self = shift;\nprint Dumper($self);\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>Can't locate object method \"FIRSTKEY\" via package \"Memoize::Expire\" at /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/Data/Dumper.pm line 158\n</code></pre>\n\n<p><strong>Version Information:</strong></p>\n\n<pre><code>$ perl -MData::Dumper -le 'print Data::Dumper-&gt;VERSION';\n2.121\n\n$ perl -MMemoize::Expire -le 'print Memoize::Expire-&gt;VERSION';\n1.03\n\n$ perl -V\nSummary of my perl5 (revision 5 version 8 subversion 8) configuration:\n  Platform:\n    osname=linux, osvers=2.6.18-53.1.14.el5pae, archname=i386-linux-thread-multi\n    uname='linux builder16.centos.org 2.6.18-53.1.14.el5pae #1 smp wed mar 5 12:07:47 est 2008 i686 athlon i386 gnulinux '\n    config_args='-des -Doptimize=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables -Dversion=5.8.8 -Dmyhostname=localhost -Dperladmin=root@localhost -Dcc=gcc -Dcf_by=Red Hat, Inc. -Dinstallprefix=/usr -Dprefix=/usr -Darchname=i386-linux -Dvendorprefix=/usr -Dsiteprefix=/usr -Duseshrplib -Dusethreads -Duseithreads -Duselargefiles -Dd_dosuid -Dd_semctl_semun -Di_db -Ui_ndbm -Di_gdbm -Di_shadow -Di_syslog -Dman3ext=3pm -Duseperlio -Dinstallusrbinperl=n -Ubincompat5005 -Uversiononly -Dpager=/usr/bin/less -isr -Dd_gethostent_r_proto -Ud_endhostent_r_proto -Ud_sethostent_r_proto -Ud_endprotoent_r_proto -Ud_setprotoent_r_proto -Ud_endservent_r_proto -Ud_setservent_r_proto -Dinc_version_list=5.8.7 5.8.6 5.8.5 -Dscriptdir=/usr/bin'\n    hint=recommended, useposix=true, d_sigaction=define\n    usethreads=define use5005threads=undef useithreads=define usemultiplicity=define\n    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef\n    use64bitint=undef use64bitall=undef uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='gcc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm',\n    optimize='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables',\n    cppflags='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -I/usr/include/gdbm'\n    ccversion='', gccversion='4.1.2 20071124 (Red Hat 4.1.2-42)', gccosandvers=''\n    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12\n    ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=4, prototype=define\n  Linker and Libraries:\n    ld='gcc', ldflags =' -L/usr/local/lib'\n    libpth=/usr/local/lib /lib /usr/lib\n    libs=-lresolv -lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc\n    perllibs=-lresolv -lnsl -ldl -lm -lcrypt -lutil -lpthread -lc\n    libc=/lib/libc-2.5.so, so=so, useshrplib=true, libperl=libperl.so\n    gnulibc_version='2.5'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E -Wl,-rpath,/usr/lib/perl5/5.8.8/i386-linux-thread-multi/CORE'\n    cccdlflags='-fPIC', lddlflags='-shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables -L/usr/local/lib'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: MULTIPLICITY PERL_IMPLICIT_CONTEXT\n                        PERL_MALLOC_WRAP USE_ITHREADS USE_LARGE_FILES\n                        USE_PERLIO USE_REENTRANT_API\n  Built under linux\n  Compiled at Sep 17 2008 13:37:09\n  @INC:\n    /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.7/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.6/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.8\n    /usr/lib/perl5/site_perl/5.8.7\n    /usr/lib/perl5/site_perl/5.8.6\n    /usr/lib/perl5/site_perl/5.8.5\n    /usr/lib/perl5/site_perl\n    /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.7/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.6/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.8\n    /usr/lib/perl5/vendor_perl/5.8.7\n    /usr/lib/perl5/vendor_perl/5.8.6\n    /usr/lib/perl5/vendor_perl/5.8.5\n    /usr/lib/perl5/vendor_perl\n    /usr/lib/perl5/5.8.8/i386-linux-thread-multi\n    /usr/lib/perl5/5.8.8\n</code></pre>\n\n<p>I can not update perl version, I have tried updating <code>Data::Dumper</code> with <code>cpan install Data::Dumper;</code>.</p>\n\n<p>Which shows this <code>/usr/bin/make test -- OK</code> after installation.</p>\n\n<p>But when I check again the version remains the same.</p>\n\n<p>So Is there any way I can solve this problem?</p>\n\n<p>Or I could use some other way to print the desired Object?</p>\n"}, {"tags": ["html", "image", "perl", "cgi"], "comments": [{"owner": {"reputation": 1410, "user_id": 3286832, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fISO7.jpg?s=128&g=1", "display_name": "Yannis", "link": "https://stackoverflow.com/users/3286832/yannis"}, "edited": false, "score": 0, "creation_date": 1519123379, "post_id": 48882995, "comment_id": 84770899, "body": "&quot;it&#39;s not working&quot; is not exactly helpful. Have you read the stackoverflow&#39;s help pages on how to ask a question?"}, {"owner": {"reputation": 1115, "user_id": 9305209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c118w.png?s=128&g=1", "display_name": "Mario Cianciolo", "link": "https://stackoverflow.com/users/9305209/mario-cianciolo"}, "edited": false, "score": 2, "creation_date": 1519124966, "post_id": 48882995, "comment_id": 84772117, "body": "You wrote <code>hight</code> instead of <code>height</code>. I don&#39;t know whether it solves your problem."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1519125961, "post_id": 48882995, "comment_id": 84772763, "body": "Not that I want to encourage you to continue using this very outdated style of HTML and means of generating it, but shouldn&#39;t the align bit go into the same hash reference as everything else"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1519126241, "post_id": 48882995, "comment_id": 84772947, "body": "@ChrisTurner You are correct, it should - plus <code>CENTER</code> should be in quotes."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 1, "last_activity_date": 1519125939, "creation_date": 1519125939, "answer_id": 48884235, "question_id": 48882995, "link": "https://stackoverflow.com/questions/48882995/to-print-image-in-center-by-perl-cgi-html/48884235#48884235", "title": "To print image in center by Perl cgi HTML", "body": "<p>This is more of a HTML/CSS question. See <a href=\"https://stackoverflow.com/a/7055404/9300627\">Center image using text-align center?</a> - applying that here:</p>\n\n<pre><code>print img({style=&gt;\"display:block;margin: 0 auto;\",\n    src=&gt;\"/image.png\",width=&gt;\"200px\",height=&gt;\"100px\"});\n</code></pre>\n\n<p>Or use a CSS class and put <code>class=&gt;\"classname\"</code> in the hashref instead of <code>style</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9385019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KnEPXWXFhts/AAAAAAAAAAI/AAAAAAAAABg/0U2vCMXs40U/photo.jpg?sz=128", "display_name": "Hossam Gbr", "link": "https://stackoverflow.com/users/9385019/hossam-gbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519690256, "creation_date": 1519122246, "last_edit_date": 1519690256, "question_id": 48882995, "link": "https://stackoverflow.com/questions/48882995/to-print-image-in-center-by-perl-cgi-html", "title": "To print image in center by Perl cgi HTML", "body": "<p>i want to ask how to print my image in center by using perl cgi \nhere is my code :</p>\n\n<pre><code>print img({src=&gt;\"/image.png\",width=&gt;\"200px\",hight=&gt;\"100px\"}),\n</code></pre>\n\n<p>i tried:</p>\n\n<pre><code>print img({-align=&gt;CENTER}, {src=&gt;\"/image.png\",width=&gt;\"200px\",hight=&gt;\"100px\"}),\n</code></pre>\n\n<p>but it's not working </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1519118105, "post_id": 48881374, "comment_id": 84767168, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14699822/perl-exact-string-match\">perl exact string match</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 8, "last_activity_date": 1519117848, "creation_date": 1519117848, "answer_id": 48881476, "question_id": 48881374, "link": "https://stackoverflow.com/questions/48881374/regular-expression-for-the-usage-of/48881476#48881476", "title": "Regular expression for the usage of +", "body": "<p>The string <code>FreD</code> matches <code>/^[A-Z][a-z]+/</code> because <code>[A-Z]</code> matches <code>F</code> and <code>[a-z]+</code> matches <code>re</code>.</p>\n\n<p>To get the desired result, anchor the end of the regex as well: <code>/^[A-Z][a-z]+$/</code>.</p>\n\n<p>See also <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"noreferrer\">perlretut</a>.</p>\n\n<p><em>(Edit: I see now that @Biffen has provided the same answer in the comments, sorry)</em></p>\n"}], "owner": {"reputation": 385, "user_id": 9023753, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b2fd523f9da0a97d8dc639cca0e6c938?s=128&d=identicon&r=PG&f=1", "display_name": "huang cheng", "link": "https://stackoverflow.com/users/9023753/huang-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 48881476, "answer_count": 1, "score": 1, "last_activity_date": 1519117947, "creation_date": 1519117496, "last_edit_date": 1519117647, "question_id": 48881374, "link": "https://stackoverflow.com/questions/48881374/regular-expression-for-the-usage-of", "title": "Regular expression for the usage of +", "body": "<p>Here is my code. I want to print out all the lines at the beginning of capital:</p>\n\n<pre><code>while(&lt;&gt;){\n    if(/^[A-Z][a-z]+/){\n        print;\n    }\n}\n</code></pre>\n\n<p><code>test.txt</code>:</p>\n\n<pre><code>Fred\nfred\nFRED\nFreD\n</code></pre>\n\n<p>After I execute the command:</p>\n\n<pre><code>perl sc.pl test.txt\n\nFred\nFreD\n</code></pre>\n\n<p>Why the <code>FreD</code> will be printed out? I have use <code>[a-z]+</code>, it seems that the <code>+</code>  only match the lower case expect the last one?</p>\n"}, {"tags": ["linux", "perl"], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 219992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06699a5aca21dcc4eb625cfce49a5817?s=128&d=identicon&r=PG", "display_name": "Dienow", "link": "https://stackoverflow.com/users/219992/dienow"}, "is_accepted": true, "score": 4, "last_activity_date": 1519110883, "creation_date": 1519110883, "answer_id": 48879703, "question_id": 48879649, "link": "https://stackoverflow.com/questions/48879649/how-to-grep-for-a-particular-number-in-a-csv-file/48879703#48879703", "title": "how to grep For a particular number in a csv file", "body": "<p><code>grep ^8, example.txt</code></p>\n\n<p>Where ^ indicates that the matching pattern must start at the beginning of the line. I've also added \",\" to the regular expression so it won't match lines starting with 80</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1519123841, "post_id": 48880937, "comment_id": 84771249, "body": "I&#39;d typically only break out <code>Text::CSV</code> if I know I have multiline/quoted fields. Otherwise <code>split</code> does the job, and that&#39;s both simple and covers a usefully large proportion of cases."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1519124830, "post_id": 48880937, "comment_id": 84772011, "body": "@Sobrique If I knew <i>for sure</i> that the format was simple, I agree with you - although in my experience requirements tend to grow unexpectedly \ud83d\ude09. In this case, if I were coding defensively, I&#39;d probably write <code>&#47;^\\d(?:,\\d)*$&#47; or die &quot;invalid format&quot;;</code> to play it safe before <code>split</code>ting."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 4, "last_activity_date": 1519115998, "creation_date": 1519115998, "answer_id": 48880937, "question_id": 48879649, "link": "https://stackoverflow.com/questions/48879649/how-to-grep-for-a-particular-number-in-a-csv-file/48880937#48880937", "title": "how to grep For a particular number in a csv file", "body": "<p>Since you tagged this with <code>perl</code>, I assume you're looking for a Perl solution. The simplest, but least robust would be:</p>\n\n<pre><code>$ perl -ne 'print if /^8,/' example.csv\n8,1,0,2,3,2,0,0,0\n</code></pre>\n\n<p>This does the same as @Dienow's <code>grep</code> solution. It's also possible to use the <a href=\"http://perldoc.perl.org/perlrun.html#*-F*_pattern_\" rel=\"nofollow noreferrer\"><code>-F</code> command-line option</a> to split the lines on commas - but note that this doesn't handle the case of quoted fields, escaped delimiters, etc.</p>\n\n<pre><code>$ perl -F, -nle 'print if $F[0]==8' example.csv\n8,1,0,2,3,2,0,0,0\n</code></pre>\n\n<p>If you're working with CSV files a lot, I recommend you make use of <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\"><code>Text::CSV</code></a> (also install <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\"><code>Text::CSV_XS</code></a> for speed).</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new({ binary=&gt;1, auto_diag=&gt;2, eol=&gt;$/ });\nwhile ( my $row = $csv-&gt;getline(*ARGV) ) {\n    $csv-&gt;print(select, $row) if $row-&gt;[0] == 8;\n}\n$csv-&gt;eof or $csv-&gt;error_diag;\n</code></pre>\n\n<p>And then run this like so:</p>\n\n<pre><code>$ perl csv.pl example.csv\n8,1,0,2,3,2,0,0,0\n</code></pre>\n\n<p>The only minor caveat being that it may reformat the input line (but it will of course still be proper CSV).</p>\n"}], "owner": {"reputation": 147, "user_id": 8622811, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/b99f6d7e3938f5f31578cc93d42953f0?s=128&d=identicon&r=PG&f=1", "display_name": "Abhilasha", "link": "https://stackoverflow.com/users/8622811/abhilasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 0, "accepted_answer_id": 48879703, "answer_count": 2, "score": 0, "last_activity_date": 1519115998, "creation_date": 1519110655, "question_id": 48879649, "link": "https://stackoverflow.com/questions/48879649/how-to-grep-for-a-particular-number-in-a-csv-file", "title": "how to grep For a particular number in a csv file", "body": "<p>I have this csv file</p>\n\n<pre><code>4,1,0,1,1,1,0,0,0\n5,1,0,1,2,1,0,0,0\n6,1,0,1,3,1,0,0,0\n7,1,0,1,4,1,0,0,0\n8,1,0,2,3,2,0,0,0\n9,1,0,2,4,2,0,0,0\n10,1,0,2,5,2,0,0,0\n11,1,0,2,6,2,0,0,0\n12,1,1,3,3,3,0,0,1\n13,1,1,3,4,3,0,0,1\n14,1,1,3,5,3,0,0,1\n15,1,1,3,6,3,0,0,1\n16,1,1,3,7,3,0,0,1\n17,1,1,4,6,4,0,0,1\n18,1,1,4,7,4,0,0,1\n19,1,1,4,8,4,0,0,1\n20,1,1,5,7,5,0,0,1\n</code></pre>\n\n<p>I want to grep for line beginning with 8\ni am trying </p>\n\n<pre><code>grep 8 example.csv\n</code></pre>\n\n<p>Then i get the foll o/p </p>\n\n<pre><code>8,1,0,2,3,2,0,0,0\n18,1,1,4,7,4,0,0,1\n19,1,1,4,8,4,0,0,1\n</code></pre>\n\n<p>I just want the line beginning with 8. how should i do it?</p>\n"}, {"tags": ["postgresql", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1519104767, "post_id": 48875533, "comment_id": 84760827, "body": "Found this, might help... <a href=\"https://blog.2ndquadrant.com/postgresql-filename-to-table/\" rel=\"nofollow noreferrer\">blog.2ndquadrant.com/postgresql-filename-to-table</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "edited": false, "score": 0, "creation_date": 1519225261, "post_id": 48881215, "comment_id": 84824068, "body": "Thanks. I ran the code above and got the following :pg_filenode_relation ----------------------  (1 row)"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "reply_to_user": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "edited": false, "score": 0, "creation_date": 1519225421, "post_id": 48881215, "comment_id": 84824175, "body": "I made a mistake with the number - does it return anything with 21607?"}, {"owner": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "edited": false, "score": 0, "creation_date": 1519883651, "post_id": 48881215, "comment_id": 85091794, "body": "I re-ran again but it comes back with :pg_filenode_relation ---------------------- (1 row) \u2013"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "reply_to_user": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "edited": false, "score": 0, "creation_date": 1519889486, "post_id": 48881215, "comment_id": 85093967, "body": "Well, then no relation corresponds to this filenode."}], "tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": false, "score": 1, "last_activity_date": 1519225373, "last_edit_date": 1519225373, "creation_date": 1519117008, "answer_id": 48881215, "question_id": 48875533, "link": "https://stackoverflow.com/questions/48875533/postgresql-could-not-truncate-file-global-21607-permission-denied/48881215#48881215", "title": "PostgreSQL - &#39;could not truncate file &quot;global/21607&quot;: permission denied&#39;", "body": "<p>Assuming you are on a recent version of PostgreSQL, you could try:</p>\n\n<pre><code>SELECT pg_filenode_relation(\n          (SELECT oid FROM pg_tablespace WHERE spcname = 'pg_global'),\n          21607\n       );\n</code></pre>\n\n<p>Could it be that there is an anti-virus program running that locks the file?</p>\n"}], "owner": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519225373, "creation_date": 1519081766, "question_id": 48875533, "link": "https://stackoverflow.com/questions/48875533/postgresql-could-not-truncate-file-global-21607-permission-denied", "title": "PostgreSQL - &#39;could not truncate file &quot;global/21607&quot;: permission denied&#39;", "body": "<p>So I inherited a Windows system that runs a perl script that connects to a local PostgreSQL database (also on running on this Windows Server). It moves data from one table to another.</p>\n\n<p>I got the following error:</p>\n\n<pre><code>could not truncate file \"global/21607\": permission denied\n</code></pre>\n\n<p>Is it possible to find which table corresponds to \"global/21607\"?</p>\n"}, {"tags": ["perl", "date", "datetime", "time"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 4, "creation_date": 1519072241, "post_id": 48873663, "comment_id": 84751282, "body": "<a href=\"https://www.perlmonks.org/?node_id=1209504\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1519072312, "post_id": 48873663, "comment_id": 84751315, "body": "<i>variable input formats</i> All your inputs are YYYY-MM-DD hh:mm:ss. What am I missing?"}, {"owner": {"reputation": 45, "user_id": 3411672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54f1bbf7f0791ac243d80d5bf4c4cf8?s=128&d=identicon&r=PG", "display_name": "eniad", "link": "https://stackoverflow.com/users/3411672/eniad"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519073516, "post_id": 48873663, "comment_id": 84751809, "body": "@MattJacob These are test dates. I didn&#39;t want to complicate the issue of the epoch time. Actual dates can have variable formats."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1519080786, "post_id": 48873663, "comment_id": 84754742, "body": "So show at least a good sample of those variable formats."}, {"owner": {"reputation": 551, "user_id": 1190901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09c028702d3dfe58dc4589b3290c1?s=128&d=identicon&r=PG", "display_name": "tangent", "link": "https://stackoverflow.com/users/1190901/tangent"}, "edited": false, "score": 2, "creation_date": 1519081802, "post_id": 48873663, "comment_id": 84755041, "body": "The problem is with Date::Parse - see <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=105031\" rel=\"nofollow noreferrer\">this issue</a>. Full answer on <a href=\"http://perlmonks.org/?node_id=1209514\" rel=\"nofollow noreferrer\">perlmonks</a>"}, {"owner": {"reputation": 45, "user_id": 3411672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54f1bbf7f0791ac243d80d5bf4c4cf8?s=128&d=identicon&r=PG", "display_name": "eniad", "link": "https://stackoverflow.com/users/3411672/eniad"}, "edited": false, "score": 1, "creation_date": 1519146143, "post_id": 48873663, "comment_id": 84786261, "body": "I have added a sample of the variable formats. I didn&#39;t include them initially because I was trying to tease out the problem with the extra 100 years."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 3411672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54f1bbf7f0791ac243d80d5bf4c4cf8?s=128&d=identicon&r=PG", "display_name": "eniad", "link": "https://stackoverflow.com/users/3411672/eniad"}, "is_accepted": true, "score": 2, "last_activity_date": 1519158492, "last_edit_date": 1519158492, "creation_date": 1519086921, "answer_id": 48876256, "question_id": 48873663, "link": "https://stackoverflow.com/questions/48873663/perl-dateparse-how-to-correctly-parse-dates-between-1901-and-1969/48876256#48876256", "title": "Perl Date::Parse - how to correctly parse dates between 1901 and 1969", "body": "<p>The underlying issue was answered by tangent.</p>\n\n<blockquote>\n  <p>The problem is with Date::Parse - see <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=105031\" rel=\"nofollow noreferrer\">this issue</a>. Full answer on <a href=\"http://perlmonks.org/?node_id=1209514\" rel=\"nofollow noreferrer\">perlmonks</a> \u2013 <a href=\"https://stackoverflow.com/users/1190901/tangent\">tangent</a> </p>\n</blockquote>\n\n<h2>Solution 1</h2>\n\n<p>My solution is to use Date::Parse strptime instead of str2time.</p>\n\n<p>Date::Parse strptime parse the date into an array ( $ss, $mm, $hh, $day, $month, $year, $zone ). That allows the year to be converted back to a 4-digit year using:</p>\n\n<pre><code>if ( $year &lt; 1000 ) { $year += 1900; }\n</code></pre>\n\n<p>The date is then passed into DateTime->new().</p>\n\n<h2>Solution 2 (better)</h2>\n\n<p>Based on discussion with thanos on perlmonks, I explored using the Date::Manip module to parse datetimes. This simplified parsing variable inputs to as little as one line. It even handles 2-digit years correctly. Here is a snippet of the code:</p>\n\n<pre><code>say UnixDate( ParseDate($_), '%Y-%m-%d %T' ) for (@dates);\n</code></pre>\n\n<p>See example scripts and output on <a href=\"http://perlmonks.org/index.pl?node_id=1209520\" rel=\"nofollow noreferrer\">perlmonks</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 3411672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54f1bbf7f0791ac243d80d5bf4c4cf8?s=128&d=identicon&r=PG", "display_name": "eniad", "link": "https://stackoverflow.com/users/3411672/eniad"}, "edited": false, "score": 0, "creation_date": 1519158543, "post_id": 48884536, "comment_id": 84793019, "body": "Using Date::Manip simplified my code greatly (see my answer). Thanks!"}], "tags": [], "owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "is_accepted": false, "score": 1, "last_activity_date": 1519126916, "creation_date": 1519126916, "answer_id": 48884536, "question_id": 48873663, "link": "https://stackoverflow.com/questions/48873663/perl-dateparse-how-to-correctly-parse-dates-between-1901-and-1969/48884536#48884536", "title": "Perl Date::Parse - how to correctly parse dates between 1901 and 1969", "body": "<p>Just to add another possible solution using module <a href=\"http://search.cpan.org/~sbeck/Date-Manip/lib/Date/Manip.pod\" rel=\"nofollow noreferrer\">Date::Manip</a>.</p>\n\n<pre><code>use Date::Manip;\nuse use feature 'say';\n\nforeach my $datestr (@dates) {\n    my $epochSecs = UnixDate($datestr,'%s');\n    my $date = UnixDate( ParseDateString(\"epoch $epochSecs\"), \"%Y-%m-%d %T\");\n    say \"Date value =  \".$datestr.\", epoch = \".$epochSecs.\", date = \" .$date;\n}\n</code></pre>\n\n<p>Hope this helps, BR.</p>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1519143717, "post_id": 48885629, "comment_id": 84784583, "body": "The OP needs to be able to handle dates in multiple formats supported by Date::Parse. The example code in the question is not great because all the dates are ISO 8601."}, {"owner": {"reputation": 45, "user_id": 3411672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54f1bbf7f0791ac243d80d5bf4c4cf8?s=128&d=identicon&r=PG", "display_name": "eniad", "link": "https://stackoverflow.com/users/3411672/eniad"}, "edited": false, "score": 1, "creation_date": 1519145877, "post_id": 48885629, "comment_id": 84786099, "body": "Here is an array of multiple formats I might receive: <code>my @dates = (     &quot;2018-02-20 00:00:00&quot;,     &quot;20180220&quot;,     &quot;02&#47;20&#47;2018&quot;,     &quot;02&#47;20&#47;18&quot;,     &quot;2018-02-20&quot; );</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1519177309, "last_edit_date": 1519177309, "creation_date": 1519130828, "answer_id": 48885629, "question_id": 48873663, "link": "https://stackoverflow.com/questions/48873663/perl-dateparse-how-to-correctly-parse-dates-between-1901-and-1969/48885629#48885629", "title": "Perl Date::Parse - how to correctly parse dates between 1901 and 1969", "body": "<p>Epoch time is the number of seconds since 1970-01-01T00:00:00Z. The date your are trying to convert to epoch time is earlier than this.</p>\n\n<p>Why are you using two different date-time libraries? If you want a DateTime object, use a DateTime module.</p>\n\n<pre><code>use DateTime::Format::DateParse qw( );\n\nfor my $dt_str (@dates) {\n    my $dt = DateTime::Format::DateParse-&gt;parse_datetime($dt_str, $DEFAULT_TIME_ZONE)\n       or die(...);\n\n    ...\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>1899-06-24 09:44:00 =&gt; 3799-06-24T09:44:00  &lt;- doh!\n1900-12-31 23:59:59 =&gt; 3800-12-31T23:59:59  &lt;- doh!\n1901-01-01 00:00:00 =&gt; 1901-01-01T00:00:00\n1960-12-31 23:59:59 =&gt; 1960-12-31T23:59:59\n1966-06-24 09:44:00 =&gt; 1966-06-24T09:44:00\n1968-12-31 23:59:59 =&gt; 1968-12-31T23:59:59\n1969-01-01 00:00:00 =&gt; 1969-01-01T00:00:00\n1969-12-31 23:59:59 =&gt; 1969-12-31T23:59:59\n1970-01-01 00:00:01 =&gt; 1970-01-01T00:00:01\n2000-01-01 00:00:00 =&gt; 2000-01-01T00:00:00\n2017-06-24 23:59:59 =&gt; 2017-06-24T23:59:59\n2018-06-24 09:44:00 =&gt; 2018-06-24T09:44:00\n2238-06-24 09:44:00 =&gt; 2238-06-24T09:44:00\n2018-02-20 00:00:00 =&gt; 2018-02-20T00:00:00\n20180220            =&gt; 2018-02-20T00:00:00\n02/20/2018          =&gt; 2018-02-20T00:00:00\n02/20/18            =&gt; 1918-02-20T00:00:00\n2018-02-20          =&gt; 2018-02-20T00:00:00\n</code></pre>\n\n<p>Let's avoid DateParse entirely.</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\nuse List::MoreUtils            qw( first_result );\n\nmy @patterns = (\n   '%Y-%m-%d %H:%M:%S',\n   '%Y-%m-%d',\n   '%Y%m%d',\n   '%m/%d/%Y',\n   '%m/%d/%y',\n);\n\nmy @formats =\n   map {\n      DateTime::Format::Strptime-&gt;new(\n         pattern   =&gt; $_,\n         time_zone =&gt; $DEFAULT_TIME_ZONE,\n         on_error  =&gt; 'undef',\n      )\n   }\n      @patterns;\n\nfor my $dt_str (@dates) {\n    my $dt = first_result { $_-&gt;parse_datetime($dt_str) } @formats\n       or die(...);\n\n    ...\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>1899-06-24 09:44:00 =&gt; 1899-06-24T09:44:00\n1900-12-31 23:59:59 =&gt; 1900-12-31T23:59:59\n1901-01-01 00:00:00 =&gt; 1901-01-01T00:00:00\n1960-12-31 23:59:59 =&gt; 1960-12-31T23:59:59\n1966-06-24 09:44:00 =&gt; 1966-06-24T09:44:00\n1968-12-31 23:59:59 =&gt; 1968-12-31T23:59:59\n1969-01-01 00:00:00 =&gt; 1969-01-01T00:00:00\n1969-12-31 23:59:59 =&gt; 1969-12-31T23:59:59\n1970-01-01 00:00:01 =&gt; 1970-01-01T00:00:01\n2000-01-01 00:00:00 =&gt; 2000-01-01T00:00:00\n2017-06-24 23:59:59 =&gt; 2017-06-24T23:59:59\n2018-06-24 09:44:00 =&gt; 2018-06-24T09:44:00\n2238-06-24 09:44:00 =&gt; 2238-06-24T09:44:00\n2018-02-20 00:00:00 =&gt; 2018-02-20T00:00:00\n20180220            =&gt; 2018-02-20T00:00:00\n02/20/2018          =&gt; 2018-02-20T00:00:00\n02/20/18            =&gt; 2018-02-20T00:00:00\n2018-02-20          =&gt; 2018-02-20T00:00:00\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3411672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54f1bbf7f0791ac243d80d5bf4c4cf8?s=128&d=identicon&r=PG", "display_name": "eniad", "link": "https://stackoverflow.com/users/3411672/eniad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 48876256, "answer_count": 3, "score": 1, "last_activity_date": 1519177309, "creation_date": 1519071998, "last_edit_date": 1519146060, "question_id": 48873663, "link": "https://stackoverflow.com/questions/48873663/perl-dateparse-how-to-correctly-parse-dates-between-1901-and-1969", "title": "Perl Date::Parse - how to correctly parse dates between 1901 and 1969", "body": "<h2>Background</h2>\n\n<p>I am using Perl to parse dates and datetimes input by users who aren't too careful with their formatting. The Perl module <code>Date::Parse</code> seems great because it handles most cases I need to handle.</p>\n\n<p>Except datetimes between <code>1901-01-01 00:00:00</code> and <code>1968-12-31 23:59:59</code>, as I found out today. For those datetimes, Date::Parse str2time adds an extra 100 years when it parses the datetime to epoch time.</p>\n\n<h2>Code</h2>\n\n<p>Here is the code I am using to parse the datetimes:</p>\n\n<pre><code>#!/usr/bin/perl\n#---------------------------------------------------------------------\n# format_date.pl\n#\n# format variable date inputs\n#---------------------------------------------------------------------\n\nuse strict;\nuse warnings;\n\nuse Date::Parse;\nuse DateTime;\n\nmy $DEFAULT_TIME_ZONE = \"GMT\";\n\nmy @dates = (\n    \"1899-06-24 09:44:00\",\n    \"1900-12-31 23:59:59\",\n    \"1901-01-01 00:00:00\",\n    \"1960-12-31 23:59:59\",\n    \"1966-06-24 09:44:00\",\n    \"1968-12-31 23:59:59\",\n    \"1969-01-01 00:00:00\",\n    \"1969-12-31 23:59:59\",\n    \"1970-01-01 00:00:01\",\n    \"2000-01-01 00:00:00\",\n    \"2017-06-24 23:59:59\",\n    \"2018-06-24 09:44:00\",\n    \"2238-06-24 09:44:00\"\n\n);\n\nforeach my $string (@dates) {\n\n    # format datetime field from any valid datetime input\n    # default time zone is used if timezone is not included in string\n    my $epoch = str2time( $string, $DEFAULT_TIME_ZONE );\n\n    # error if date is not correctly parsed\n    if ( !$epoch ) {\n        die(\"ERROR ====&gt; invalid datetime ($string), \"\n        . \"datetime format should be YYYY-MM-DD HH:MM:SS\");\n    }\n\n    my $date = DateTime-&gt;from_epoch( epoch =&gt; $epoch );\n\n    printf( \"formatting datetime: value = %20s, epoch = %20u, \"\n            . \"date = %20s\\n\", $string, $epoch, $date );\n\n}\n\nexit 0;\n</code></pre>\n\n<p>Side note: I need to improve my error handling because the valid date <code>1970-01-01 00:00:00</code> will throw an error.</p>\n\n<h2>Output</h2>\n\n<p>The additional 100 years for dates between 1901 and 1969 can be seen in the output:</p>\n\n<pre><code>formatting datetime: value =  1899-06-24 09:44:00, epoch = 18446744071484095456, date =  1899-06-24T09:44:00\nformatting datetime: value =  1900-12-31 23:59:59, epoch = 18446744071532098815, date =  1900-12-31T23:59:59\nformatting datetime: value =  1901-01-01 00:00:00, epoch =            978307200, date =  2001-01-01T00:00:00\nformatting datetime: value =  1960-12-31 23:59:59, epoch =           2871763199, date =  2060-12-31T23:59:59\nformatting datetime: value =  1966-06-24 09:44:00, epoch =           3044598240, date =  2066-06-24T09:44:00\nformatting datetime: value =  1968-12-31 23:59:59, epoch =           3124223999, date =  2068-12-31T23:59:59\nformatting datetime: value =  1969-01-01 00:00:00, epoch = 18446744073678015616, date =  1969-01-01T00:00:00\nformatting datetime: value =  1969-12-31 23:59:59, epoch = 18446744073709551615, date =  1969-12-31T23:59:59\nformatting datetime: value =  1970-01-01 00:00:01, epoch =                    1, date =  1970-01-01T00:00:01\nformatting datetime: value =  2000-01-01 00:00:00, epoch =            946684800, date =  2000-01-01T00:00:00\nformatting datetime: value =  2017-06-24 23:59:59, epoch =           1498348799, date =  2017-06-24T23:59:59\nformatting datetime: value =  2018-06-24 09:44:00, epoch =           1529833440, date =  2018-06-24T09:44:00\nformatting datetime: value =  2238-06-24 09:44:00, epoch =           8472332640, date =  2238-06-24T09:44:00\n</code></pre>\n\n<h2>Additional notes</h2>\n\n<p>The <a href=\"http://search.cpan.org/~gbarr/TimeDate-2.30/lib/Date/Parse.pm\" rel=\"nofollow noreferrer\"><code>Date::Parse</code></a> documentation suggests it can handle dates at least as old at 1901-01-01. The <a href=\"http://search.cpan.org/~drolsky/Time-Local-1.25/lib/Time/Local.pm\" rel=\"nofollow noreferrer\"><code>Time::Local</code></a> documentation suggest it should be able handle dates even older.</p>\n\n<h2>Question</h2>\n\n<p>How should I handle this oddity? Is there a better way to parse variable input formats suing Perl?</p>\n\n<h2>Edit: examples of multiple date formats</h2>\n\n<p>Input can be in multiple formats. Here is an array of examples:</p>\n\n<pre><code>my @dates = (\n    \"2018-02-20 00:00:00\",\n    \"20180220\",\n    \"02/20/2018\",\n    \"02/20/18\",    # interpreted as 1918-02-20\n    \"2018-02-20\"\n);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1519033176, "post_id": 48863027, "comment_id": 84729412, "body": "@WiktorStribi\u017cew thanks for bringing that up. I have corrected it. It was a typo. thanks."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1519036369, "post_id": 48863027, "comment_id": 84731448, "body": "I can see two solutions - let me know if they work for you 1) add a space after the variable (<code>$email_body =~ s&#47;\\{REGISTRATION URL\\}&#47;$registration_url.&#39; &#39;&#47;ieg;</code>) 2) replace with space everything that is not a whitespace (<code>$email_body =~ s&#47;\\{REGISTRATION URL\\}\\S+&#47;$registration_url&#47;ieg</code>)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1519039734, "post_id": 48863027, "comment_id": 84733395, "body": "Are you talking about the user editing the template, or the value that is replaced into the <code>{REGISTRATION URL}</code> placeholder?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1519039832, "post_id": 48863027, "comment_id": 84733453, "body": "Obviously, you have problems with your template engine:   &quot;So, this <i>eventually</i> turns out to be <a href=\"https://www.example.com/reg?invite_id=1f2sdfg23\" rel=\"nofollow noreferrer\">example.com/reg?invite_id=1f2sdfg23</a>.&quot;   Why not fix it?"}, {"owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1519039900, "post_id": 48863027, "comment_id": 84733492, "body": "@simbabque I am talking about user editing the template. The URL is generated dynamically in a different process"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1519040342, "post_id": 48863027, "comment_id": 84733780, "body": "I would probably add a single whitespace after this specific placeholder programmatically."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519043779, "post_id": 48865689, "comment_id": 84735798, "body": "Why the <code>&#47;e</code> modifiers?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519044121, "post_id": 48865689, "comment_id": 84736015, "body": "I wanted to change the OP code as little as possible."}, {"owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "edited": false, "score": 1, "creation_date": 1519047836, "post_id": 48865689, "comment_id": 84738288, "body": "@mrzasa The second solution is working as a charm. Had never used \\S+.. good to know. Thanks"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1519041390, "creation_date": 1519041390, "answer_id": 48865689, "question_id": 48863027, "link": "https://stackoverflow.com/questions/48863027/how-to-remove-a-dot-from-a-dynamically-created-url/48865689#48865689", "title": "How to remove a dot from a dynamically created URL", "body": "<p>As wrote in the comment - I can see two solutions</p>\n\n<p>1) add a space after the variable </p>\n\n<pre><code>($email_body =~ s/\\{REGISTRATION URL\\}/$registration_url.' '/ieg;) \n</code></pre>\n\n<p>2) replace with space everything that is not a whitespace </p>\n\n<pre><code>($email_body =~ s/\\{REGISTRATION URL\\}\\S+/$registration_url/ieg)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "is_accepted": false, "score": 0, "last_activity_date": 1519042537, "creation_date": 1519042537, "answer_id": 48866034, "question_id": 48863027, "link": "https://stackoverflow.com/questions/48863027/how-to-remove-a-dot-from-a-dynamically-created-url/48866034#48866034", "title": "How to remove a dot from a dynamically created URL", "body": "<p>Perhaps the best approach would be to check your file before starting the process of replacing those variables. If you expect that line to be <code>finish your registration here: {REGISTRATION URL}</code>, then you can check if that line is what you were expecting like this: <code>$checkEmailTag =~ /\\s\\{REGISTRATION URL\\}$/</code>. In this case, a preceding space, then your tag and then the end of the line.</p>\n\n<p>If it's not, then you can throw an error stating your file is corrupted and abort the process, or add a space so that user characters won\u00b4t hurt your URL allowing you to continue, or any other course of action you see fit.</p>\n\n<p>You don't need to do this for every variable in your file, just for critical variables like this one.</p>\n"}, {"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 1, "last_activity_date": 1519045140, "creation_date": 1519045140, "answer_id": 48866782, "question_id": 48863027, "link": "https://stackoverflow.com/questions/48863027/how-to-remove-a-dot-from-a-dynamically-created-url/48866782#48866782", "title": "How to remove a dot from a dynamically created URL", "body": "<p>A common convention is to embed URLs in <code>&lt;brokets&gt;</code> in plain text to show exactly where the URL begins and ends.</p>\n\n<pre><code>No misunderstanding: &lt;http://stackoverflow.com/&gt;!\n</code></pre>\n"}], "owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 48865689, "answer_count": 3, "score": 2, "last_activity_date": 1519045140, "creation_date": 1519032645, "last_edit_date": 1519039607, "question_id": 48863027, "link": "https://stackoverflow.com/questions/48863027/how-to-remove-a-dot-from-a-dynamically-created-url", "title": "How to remove a dot from a dynamically created URL", "body": "<p>In my application, we have a template; where the user can edit and then save it to the DB. The Template is then used by our application to send email invites.</p>\n\n<p>Here is the draft template: </p>\n\n<pre><code>Dear {USER FIRST NAME} {USER LAST NAME}: \n\n{COLLEGE NAME} is providing your access to `example` services, including a dedicated online account. Registration was started for you. \n\nWithout delay, please finish the last few items of your registration. \n\nPlease promptly\nfinish your registration here: {REGISTRATION URL} \n\nAlso, please {LOG IN} for the first time, to be sure you encounter no issues. If you have questions, Support@example.com is available to help. Once you finish registration, access to your secure account and related example member services will stay with you as you proceed through learning experiences, within and beyond coursework. Thank you\n</code></pre>\n\n<p>Just before sending the invites, the application is replacing the KEYS with real user data. Like <code>{USER FIRST NAME}</code> is replaced with <code>RAHUL</code> and so on.</p>\n\n<p>The problem which I am facing is ... the user edits the template and adds a dot(.) at the end of the <code>{REGISTRATION URL}</code>.</p>\n\n<p>LIKE THIS:</p>\n\n<p><code>Please promptly finish your registration here:\n{REGISTRATION URL}.</code></p>\n\n<p>So, this eventually turns out to be <code>https://www.example.com/reg?invite_id=1f2sdfg23.</code> in the email body. The invite code is corrupted now. This is causing the problem to the user as they will be shown an error message. Invite not found page.</p>\n\n<p><strong>How can I contain this situation. We have informed the user not to do that but I want to preempt the situation even if the user unknowingly does it. I do not want any non-alpha numeric character after the <code>1f2sdfg23</code>. It should always be followed by a line-break.</strong></p>\n\n<p>I tried the below regular expresssion:</p>\n\n<pre><code>    $email_body =~ s/\\{REGISTRATION URL\\}([^a-zA-Z])/$registration_url/ieg;\n</code></pre>\n\n<p>This is working for one instance of dot. </p>\n\n<p>What if the user enters multiple dots \n<code>Please promptly finish your registration here:\n{REGISTRATION URL}...\n{REGISTRATION URL}#\netc..</code></p>\n\n<pre><code>$email_body =~ s/\\{REGISTRATION URL\\}([^a-zA-Z]+)/$registration_url/ieg;\n</code></pre>\n\n<p>If I extend the filter by allowing multiple characters, then it is removing the unwanted characters. But the problem, re-occurs when the user has promptly given <code>{REGISTRATION URL}</code>. The above line of code will remove the line spacing. I do not want that to happen. </p>\n\n<p><strong>Let me know what best approach I can apply here.</strong>\nThanks in Advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 1, "creation_date": 1519028887, "post_id": 48861991, "comment_id": 84727011, "body": "Looks like a duplicate of <a href=\"https://stackoverflow.com/questions/3508630/how-do-i-capture-perls-stdout-in-a-variable\" title=\"how do i capture perls stdout in a variable\">stackoverflow.com/questions/3508630/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 9290295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49a509c178a29f40e7ad11cff7efed95?s=128&d=identicon&r=PG&f=1", "display_name": "ziks", "link": "https://stackoverflow.com/users/9290295/ziks"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1519030202, "post_id": 48861991, "comment_id": 84727682, "body": "@ChatterOne, I tried but not working in my script"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1519030357, "post_id": 48861991, "comment_id": 84727753, "body": "If you already tried to use <code>Capture::Tiny</code> can you post the code?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1519031741, "post_id": 48861991, "comment_id": 84728509, "body": "You can&#39;t use <code>system</code> to capture output, you can use <code>qx</code>. <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Quote-Like-Operators</a>"}, {"owner": {"reputation": 31, "user_id": 9290295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49a509c178a29f40e7ad11cff7efed95?s=128&d=identicon&r=PG&f=1", "display_name": "ziks", "link": "https://stackoverflow.com/users/9290295/ziks"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1519032325, "post_id": 48861991, "comment_id": 84728874, "body": "@xxfelixxx,<code>$stdout=qx(&quot;curl @command&quot;);</code> instead of <code>$stdout=system(&quot;curl @command&quot;);</code> but not working"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1519034218, "post_id": 48861991, "comment_id": 84730100, "body": "Why do you mean by &quot;not working&quot;? I tried using <code>qx</code>, and it works as desired. Tell us <i>exactly</i> what happens when you use <code>qx</code> instead of <code>system</code> please. And show us your <i>real</i> code please (the last 3 lines don&#39;t compile, you need to escape the <code>&quot;</code> around <code>1.txt</code> in the <code>die</code>)."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1519035079, "post_id": 48861991, "comment_id": 84730618, "body": "Please note that <code>qx</code> is <i>not</i> a function, it&#39;s quote operator, so <code>qx(&quot;command&quot;)</code> won&#39;t work, since there are too many quotes. Use <code>qx(command)</code> or <code>qx&quot;command&quot;</code>"}, {"owner": {"reputation": 31, "user_id": 9290295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49a509c178a29f40e7ad11cff7efed95?s=128&d=identicon&r=PG&f=1", "display_name": "ziks", "link": "https://stackoverflow.com/users/9290295/ziks"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1519038503, "post_id": 48861991, "comment_id": 84732701, "body": "thanks @el.pescado .."}], "answers": [{"tags": [], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "is_accepted": true, "score": -1, "last_activity_date": 1519034287, "creation_date": 1519034287, "answer_id": 48863542, "question_id": 48861991, "link": "https://stackoverflow.com/questions/48861991/how-can-i-store-curl-output-into-a-file-using-perl/48863542#48863542", "title": "How can I store Curl output into a file using Perl?", "body": "<p>You can't use system to capture output, you can use backticks `` in place of system.</p>\n\n<p>Something like:</p>\n\n<pre><code>my @command= '--request POST --data-binary \"@Raajpal_long.wav\"\n \"https://services.govivace.com:49162/SpeakerId\naction=search&amp;confidence_threshold=0.0&amp;number_of_matches=20&amp;format=8K_PCM16\"';\n\nmy $result = `curl @command`;\n\nif ( $? == -1 ){\n    print \"\\n Curl Command failed: $!\\n\";\n} elsif ($? == 0 ) {\n    print \"$result\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 3, "last_activity_date": 1519061525, "creation_date": 1519061525, "answer_id": 48871316, "question_id": 48861991, "link": "https://stackoverflow.com/questions/48861991/how-can-i-store-curl-output-into-a-file-using-perl/48871316#48871316", "title": "How can I store Curl output into a file using Perl?", "body": "<p>You're already shelling out to curl to make the request; it would be cleaner to just use curl's <a href=\"https://curl.haxx.se/docs/manpage.html#-o\" rel=\"nofollow noreferrer\"><code>-o</code>/<code>--output</code></a> option to write to a file instead of stdout.</p>\n\n<blockquote>\n<pre><code>-o, --output &lt;file&gt;\n</code></pre>\n  \n  <p>Write output to  instead of stdout. If you are using {} or [] to\n  fetch multiple documents, you can use '#' followed by a number in the\n   specifier. That variable will be replaced with the current\n  string for the URL being fetched. Like in:</p>\n  \n  <p><code>curl http://{one,two}.example.com -o \"file_#1.txt\"</code></p>\n  \n  <p>or use several variables like:</p>\n  \n  <p><code>curl http://{site,host}.host[1-5].com -o \"#1_#2\"</code></p>\n  \n  <p>You may use this option as many times as the number of URLs you have.\n  For example, if you specify two URLs on the same command line, you can\n  use it like this:</p>\n  \n  <p><code>curl -o aa example.com -o bb example.net</code></p>\n  \n  <p>and the order of the -o options and the URLs doesn't matter, just that\n  the first -o is for the first URL and so on, so the above command line\n  can also be written as</p>\n  \n  <p><code>curl example.com example.net -o aa -o bb</code></p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 9290295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49a509c178a29f40e7ad11cff7efed95?s=128&d=identicon&r=PG&f=1", "display_name": "ziks", "link": "https://stackoverflow.com/users/9290295/ziks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "accepted_answer_id": 48863542, "answer_count": 2, "score": -2, "last_activity_date": 1561619393, "creation_date": 1519028588, "last_edit_date": 1561619393, "question_id": 48861991, "link": "https://stackoverflow.com/questions/48861991/how-can-i-store-curl-output-into-a-file-using-perl", "title": "How can I store Curl output into a file using Perl?", "body": "<p>I have a directory there are lots of .wav files. I read the data of each file through curl command and store it into different files.</p>\n\n<p>This is not complete script. some part of the script -  </p>\n\n<pre><code>@command= '--request POST --data-binary \"@Raajpal_long.wav\" \n \"https://xxxx.xx.xxxx:xxxx/SpeakerId\n action=search&amp;confidence_threshold=0.0&amp;number_of_matches=20&amp;format=8K_PCM16\"';\n\n $stdout=system(\"curl @command\");\n</code></pre>\n\n<p>when I run the perl script it gives the output on command line window : </p>\n\n<pre><code>{\"status\": 0, \"processing_time\": 96.0, \"enrollment_audio_time\": 131.10000610351562, \"matches\": [{\"speaker\": \"sw\", \"identification_score\": 252.54136657714844}]}\n</code></pre>\n\n<p>I want to store this output into a file.</p>\n\n<p>I used -</p>\n\n<pre><code>open (FILE, \"&gt;1.txt\") or die \"Unable to open \"1.txt\";\n$stdout=system(\"curl @command\");\nprint FILE $stdout;\n</code></pre>\n\n<p>It's save only zero(0);</p>\n\n<p>Can any one tell me how to solve this ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1519029584, "post_id": 48861942, "comment_id": 84727372, "body": "You don&#39;t need the <code>while</code>, the <code>&lt;&gt;</code> will do all the reading for you. <code>print reverse &lt;&gt;;</code> is enough."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1519054843, "post_id": 48861942, "comment_id": 84742643, "body": "Don&#39;t post pictures of text. Post text as text."}], "answers": [{"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 4, "last_activity_date": 1519030028, "creation_date": 1519030028, "answer_id": 48862300, "question_id": 48861942, "link": "https://stackoverflow.com/questions/48861942/operator-issue/48862300#48862300", "title": "Operator &lt;&gt; issue", "body": "<p>Why was it wrong? Because <code>while(&lt;&gt;)</code> reads a line into <code>$_</code>. And then you ignore the value. Then it waits for your input because you used <code>&lt;&gt;</code> <em>again</em>, after it had finished. So it guesses you want to read from input, because you've used up everything else available.</p>\n"}, {"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1519056014, "post_id": 48866231, "comment_id": 84743340, "body": "It can be kind of tricky to write an application to reverse a file line by line in constant memory. One implementation I remember created a source and destination memory mapped file, and used <code>memcpy</code> to write the first line to the end of the destination file, etc. You can also use a memory map to start reading at the end of the source and keep searching backward for new-line characters while creating output."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1519064997, "post_id": 48866231, "comment_id": 84748100, "body": "@ZanLynx Use <code>File::ReadBackwards</code>."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 4, "last_activity_date": 1519072748, "last_edit_date": 1519072748, "creation_date": 1519043259, "answer_id": 48866231, "question_id": 48861942, "link": "https://stackoverflow.com/questions/48861942/operator-issue/48866231#48866231", "title": "Operator &lt;&gt; issue", "body": "<p>You miss the first line, because that was read into <code>$_</code> with your <code>while(&lt;&gt;)</code>.</p>\n\n<pre><code>  print reverse &lt;&gt;;\n</code></pre>\n\n<p>The <code>&lt;&gt;</code> is evaluated in list context. That is, all the remaining input is slurped into a list which is reversed and printed.</p>\n\n<p>Now, the loop goes back to the conditional, waiting for another line on input. Try</p>\n\n<pre><code>print reverse &lt;&gt;;\n</code></pre>\n\n<p>by itself, not in a loop.</p>\n\n<p>Of course, slurping like this will make the memory footprint of your program proportional to the size of its input which is not practical for large inputs.</p>\n\n<p>If you do need to reverse large files, use <a href=\"https://metacpan.org/pod/File::ReadBackwards\" rel=\"nofollow noreferrer\">File::ReadBackwards</a>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse File::ReadBackwards;\n\nfor my $arg (@ARGV) {\n    my $reader = File::ReadBackwards-&gt;new($arg)\n        or die \"Cannot read '$arg': $!\";\n    while (defined(my $line = $reader-&gt;readline)) {\n        print $line;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 9023753, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b2fd523f9da0a97d8dc639cca0e6c938?s=128&d=identicon&r=PG&f=1", "display_name": "huang cheng", "link": "https://stackoverflow.com/users/9023753/huang-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 48866231, "answer_count": 2, "score": 0, "last_activity_date": 1519072748, "creation_date": 1519028297, "last_edit_date": 1519043344, "question_id": 48861942, "link": "https://stackoverflow.com/questions/48861942/operator-issue", "title": "Operator &lt;&gt; issue", "body": "<p>I create a file named <code>fred</code>:</p>\n\n<pre><code>fred_1\nfred_2\nfred_3\n</code></pre>\n\n<p>I write a Perl script named <code>lac.pl</code>:</p>\n\n<pre><code>while(&lt;&gt;){\n    print reverse &lt;&gt;;\n}\n</code></pre>\n\n<p>Then I execute the below command.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IXf51.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IXf51.png\" alt=\"\"></a></p>\n\n<p>Why did the output miss <code>fred_1</code>, and the program not end, just waiting for my  input?</p>\n\n<p>If I update the Perl script like below, the result will be right:</p>\n\n<pre><code>print reverse &lt;&gt;;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DZqdd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DZqdd.png\" alt=\"\"></a></p>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 3762, "user_id": 1392490, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8abc9ba3fc894ddce9e4da8f579fc9f4?s=128&d=identicon&r=PG", "display_name": "rollstuhlfahrer", "link": "https://stackoverflow.com/users/1392490/rollstuhlfahrer"}, "edited": false, "score": 5, "creation_date": 1519026494, "post_id": 48861467, "comment_id": 84726009, "body": "Not sure if this is better suited on <a href=\"https://codereview.stackexchange.com/help/on-topic\">code review</a>"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1519029217, "post_id": 48861467, "comment_id": 84727186, "body": "Have you tried actually using that <code>dbh</code> you&#39;re passing to <code>fetch_data</code> instead of ignoring it and opening a new connection every time?"}, {"owner": {"reputation": 11, "user_id": 6134624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c9b57f8a807917f9dd57a83c27cde6?s=128&d=identicon&r=PG&f=1", "display_name": "Sourav Kumar", "link": "https://stackoverflow.com/users/6134624/sourav-kumar"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1519035470, "post_id": 48861467, "comment_id": 84730885, "body": "@ChatterOne yes, that type change i have already tested."}, {"owner": {"reputation": 11, "user_id": 6134624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c9b57f8a807917f9dd57a83c27cde6?s=128&d=identicon&r=PG&f=1", "display_name": "Sourav Kumar", "link": "https://stackoverflow.com/users/6134624/sourav-kumar"}, "edited": false, "score": 0, "creation_date": 1519035640, "post_id": 48861467, "comment_id": 84730972, "body": "i have made 2 different simple script, one for perl and another for php, and to  my surprise these scripts proves that perl takes almost one fourth time than PHP in command line scripting(cron jobs)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1519044441, "post_id": 48861467, "comment_id": 84736205, "body": "Conclusion: Perl is better than PHP. Use Perl."}, {"owner": {"reputation": 11, "user_id": 6134624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c9b57f8a807917f9dd57a83c27cde6?s=128&d=identicon&r=PG&f=1", "display_name": "Sourav Kumar", "link": "https://stackoverflow.com/users/6134624/sourav-kumar"}, "edited": false, "score": 0, "creation_date": 1519121075, "post_id": 48861467, "comment_id": 84769198, "body": "Yes based on test, it proved that perl is better than PHP in scripting"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6134624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c9b57f8a807917f9dd57a83c27cde6?s=128&d=identicon&r=PG&f=1", "display_name": "Sourav Kumar", "link": "https://stackoverflow.com/users/6134624/sourav-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1519035926, "creation_date": 1519035926, "answer_id": 48864039, "question_id": 48861467, "link": "https://stackoverflow.com/questions/48861467/script-taking-around-6-times-more-time-in-php-then-perl/48864039#48864039", "title": "Script taking around 6 times more time in php then perl", "body": "<p>i have made 2 different simple script, one for perl and another for php, and to my surprise these scripts proves that perl takes almost one fourth time than PHP in command line scripting(cron jobs)</p>\n\n<p><strong>Sample PHP Script:</strong></p>\n\n<pre><code>&lt;?php\n\n$start_time = (float) array_sum(explode(' ',microtime()));\nfor($i=1;$i&lt;=20000000;$i++)\n{\n     echo 'hello world';\n}\n$time_end = (float) array_sum(explode(' ',microtime()));\n$cron_time = ($time_end - $start_time);\n$cron_time = intval($cron_time);\necho \"\\ntime taken===\".$cron_time;\n?&gt;\n</code></pre>\n\n<p><strong>PERL Script Code</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nmy $time_start = time();\nfor(my $i=1;$i&lt;=20000000;$i++)\n{\n     print 'hello world';\n}\nmy $time_end = time();\nmy $cron_time = $time_end - $time_start;\n$cron_time = int($cron_time);\nprint \"\\ntime taken===\".$cron_time;\n</code></pre>\n\n<p>Perl script is taking 17 Sec while php took 66 Sec.</p>\n"}], "owner": {"reputation": 11, "user_id": 6134624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c9b57f8a807917f9dd57a83c27cde6?s=128&d=identicon&r=PG&f=1", "display_name": "Sourav Kumar", "link": "https://stackoverflow.com/users/6134624/sourav-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1519041683, "creation_date": 1519026084, "last_edit_date": 1519041683, "question_id": 48861467, "link": "https://stackoverflow.com/questions/48861467/script-taking-around-6-times-more-time-in-php-then-perl", "title": "Script taking around 6 times more time in php then perl", "body": "<p>My PHP script is taking almost 6 times more time than PERL script, my script is to write xml file for sitemap, in this process i am fetching 20k data from DB in one go and writing xml for that after writing that XML file again fetching data for another 20k and again writing another xml file, this way i am creating around 650 xml files, each contains 20k sitemap records. Means We are fetching data from DB around 650 times.</p>\n\n<p>Please help in reducing this time or suggest any alternative solution.</p>\n\n<pre><code>public function SitemapGenerate($dbh='')\n    {\n        global $sthsplit;\n        $total_count=0;\n        $sql= 'select count(1) COUNT from some_table';\n        $sth = oci_parse($dbh,$sql);\n        oci_execute($sth);\n        oci_fetch_all($sth, $res);\n        oci_close($dbh);\n        $total_count = $res['COUNT'][0];\n        $start=1; $end =20000;\n        $succesMsg = $this-&gt;fetch_data($start,$end,$total_count,$dbh);\n//         oci_close($dbh);\n        sleep(1);\n    }\n    public function fetch_data($start,$end,$total_count)\n    {\n            $sqlsplit = '';\n            $dbh = $this-&gt;connect('abc','abc','db');\n            $sqlsplit = \"select * from some_table where rn between $start and $end\";\n            $sthsplit = oci_parse($dbh,$sqlsplit);\n            oci_execute($sthsplit);\n            oci_close($dbh);\n            $this-&gt;splitquery($sthsplit,$total_count,$dbh);\n    }\n\n    public function removeControllCharfunction($str)\n    {\n            $str = preg_replace( \"/&amp;lt;/\", '&lt;', $str );\n            $str = preg_replace( \"/&amp;gt;/\", '&gt;', $str );\n            $str = preg_replace( \"/(&lt;\\s*a\\b.*?\\/\\s*a\\s*&gt;)|(&lt;\\s*\\/?\\s*a\\b.*?\\s*&gt;)/\", ' ', $str );\n            $str = preg_replace( \"/(&lt;\\s*img\\b.*?\\s*&gt;)/\", ' ', $str );\n            $str = preg_replace( \"/(http\\:\\/\\/|www\\.)(.*?)[^\\s\\&lt;]*/\", ' ', $str );\n            $str = preg_replace( \"/\\b([\\w\\-\\_\\.]*?)(\\@[\\w\\-\\_\\.]*?)(\\s+?|$)/\", ' ', $str );\n            $str = preg_replace(\"/\\&amp;/\",\"&amp;amp;\",$str);\n            return ($str);\n    }\n\n    public function splitquery($sthsplit,$total_count,$dbh)\n    {\n            global $filePath,$no_of_files,$file_num,$start_time,$global_record,$no_of_files_mb;\n            $counter = $ID = $NAME = $records = $cron_time = $time_end = 0;\n            $xml = $file_name = $imagePath = $largeimagePath = $fullpath = $final_xml = $title = $fullpath_mb = $xml_mb = $final_xml_mb = $file_name_mb = $final_xml_mb1 = $final_xml1 = '';\n            $ha = array();\n\n            while($ha = oci_fetch_array($sthsplit,OCI_ASSOC))\n            {\n                    $counter++; $valid=0;$records++;$global_record++;\n                    $ID   = $ha['ID'];\n                    $NAME = $ha['TITLE'];\n                    $NAME = strtolower($NAME);\n                    $NAME = preg_replace(\"/^\\s+|\\s+$/\",\"\",$NAME);\n                    $NAME = preg_replace(\"/[ \\'\\/~`\\!@#\\$%\\^&amp;\\*\\(\\)_\\-\\+=\\{\\}\\[\\]\\|;:\\\"\\&lt;\\&gt;,\\.\\?\\\\\\]+/\",\"-\",$NAME);\n                    $NAME = preg_replace(\"/^-|-$/\",\"\",$NAME);\n                    $title   = $ha['TITLE'];\n                    $title   = $this-&gt;removeControllCharfunction($title);\n\n                    //Mobile Sitemap Code Start here//\n                    $fullpath_mb = \"https://somepath?i=$ID\";\n                    $xml_mb=\"&lt;url&gt;&lt;loc&gt;$fullpath_mb&lt;/loc&gt;&lt;mobile:mobile/&gt;&lt;/url&gt;\\n\";\n                    $final_xml_mb .= $xml_mb;\n                    //Mobile Sitemap code ends here//\n                    $fullpath=&lt;&lt;&lt;EOT\nhttps://www.somepath/$NAME-$ID.html\nEOT;\n                    $xml     =&lt;&lt;&lt;EOT\n&lt;url&gt;&lt;loc&gt;$fullpath&lt;/loc&gt;\nEOT;\n                    $imagePath      = (isset($ha['PHOTO']) &amp;&amp; $ha['PHOTO'] != '') ? $ha['PHOTO'] : '';\n                    $largeimagePath = (isset($ha['LARGE_PHOTO']) &amp;&amp; $ha['LARGE_PHOTO'] != '') ? $ha['LARGE_PHOTO'] : '';\n                    $imagePath      = $this-&gt;changeImghostDomain($imagePath);\n                    $largeimagePath = $this-&gt;changeImghostDomain($largeimagePath);\n                    $imagePath      = preg_replace(\"/\\&amp;/\",\"%26\",$imagePath);\n                    $largeimagePath = preg_replace(\"/\\&amp;/\",\"%26\",$largeimagePath);\n                    $largeimagePath = preg_replace(\"/http:/\",\"https:\",$largeimagePath);\n\n                    if((isset($largeimagePath)) &amp;&amp; (!(preg_match(\"/add-image.gif$/i\", $largeimagePath) &gt; 0)) &amp;&amp; ($largeimagePath != '') &amp;&amp; (!(preg_match(\"/coming-soon.gif$/i\", $largeimagePath) &gt; 0)) &amp;&amp; (!(preg_match(\"/ts\\/t_product_sample/i\", $largeimagePath) &gt; 0)) &amp;&amp; (preg_match(\"/(jpg|jpeg|gif|png|JPG|JPEG|GIF|PNG)$/i\", $largeimagePath) &gt; 0) &amp;&amp; (preg_match(\"/imimg\\.com/i\", $largeimagePath) &gt; 0))\n                    {\n                            $xml .=&lt;&lt;&lt;EOT\n&lt;image:image&gt;&lt;image:loc&gt;$largeimagePath&lt;/image:loc&gt;&lt;image:title&gt;$title&lt;/image:title&gt;&lt;/image:image&gt;\nEOT;\n                            $valid=1;\n                    }\n                    else if((isset($imagePath)) &amp;&amp; (!(preg_match(\"/imimg\\.com/i\", $imagePath) &gt; 0)) &amp;&amp; ($imagePath != '') &amp;&amp; (!(preg_match(\"/coming-soon.gif$/i\", $imagePath) &gt; 0)) &amp;&amp; (!(preg_match(\"/ts\\/t_product_sample/i\", $imagePath) &gt; 0)) &amp;&amp; (preg_match(\"/(jpg|jpeg|gif|png|JPG|JPEG|GIF|PNG)$/i\", $imagePath) &gt; 0) &amp;&amp; (preg_match(\"/imimg\\.com/i\", $largeimagePath) &gt; 0))\n                    {\n                            $xml .=&lt;&lt;&lt;EOT\n&lt;image:image&gt;&lt;image:loc&gt;$imagePath&lt;/image:loc&gt;&lt;image:title&gt;$title&lt;/image:title&gt;&lt;/image:image&gt;\nEOT;\n                            $valid=1;\n                    }\n                    $xml .=&lt;&lt;&lt;EOT\n&lt;xhtml:link rel=\"alternate\" media=\"only screen and (max-width: 640px)\" href=\"https://somepath?i={$ha['ID']}\" /&gt;&lt;/url&gt;\\n\nEOT;\n                    $final_xml .= $xml;\n                    if($counter==20000)\n                    {\n//                     echo \"not real: \".(memory_get_peak_usage(false)/1024/1024).\" MiB\\n\";\n                            $file_num++;\n                            $counter=0;\n                            $final_xml1 =&lt;&lt;&lt;EOT\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\\n&lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"&gt;\\n$final_xml&lt;/urlset&gt;\nEOT;\n                            $file_name =\"$filePath/$file_num.xml\";\n                            $no_of_files .=&lt;&lt;&lt;EOT\nhttps://www.somepath$file_num.xml (Have Complete 20000 Url's)\\n\nEOT;\n\n                            $myfile = fopen($file_name, \"w\") or die(\"\\nFailed To Open File \\n$file_name \\nAt LINE: \".__LINE__ .\"\\nIn FILE:\".__FILE__);\n                            fwrite($myfile,$final_xml1);\n                            fclose($myfile);\n                            sleep(1);\n                            $final_xml1 = null;\n                            $final_xml = null;\n                            //Mobile XML Code starts here//\n                            $final_xml_mb1=&lt;&lt;&lt;EOT\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\\n &lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"&gt;\\n$final_xml_mb&lt;/urlset&gt;\nEOT;\n                            $file_name_mb=\"$filePath/$file_num.xml\";\n                            $no_of_files_mb .= &lt;&lt;&lt;EOT\nhttps://somepath-$file_num.xml (Have Complete 20000 Url's)\\n\nEOT;\n                            $myfile1 = fopen($file_name_mb, \"w\") or die(\"\\nFailed To Open File \\n$file_name_mb \\nAt LINE: \".__LINE__ .\"\\nIn FILE:\".__FILE__);\n                            fwrite($myfile1,$final_xml_mb1);\n                            fclose($myfile1);\n                            sleep(1);\n                            $final_xml_mb = null;\n                            $final_xml_mb1 = null;\n                            $xml = null;\n                            //Mobile XML code ends here//\n                            echo \"not real: \".(memory_get_peak_usage(false)/1024/1024).\" MiB\\n\";\n//                             ob_flush();\n//                             echo \"not real: \".(memory_get_peak_usage(false)/1024/1024).\" MiB\\n\";\n                    }\n            }\n            if($counter&gt;0 &amp;&amp; $counter&lt;20000)\n            {\n                    $file_num++;\n                    $final_xml=&lt;&lt;&lt;EOT\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\\n&lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"&gt;\\n$final_xml&lt;/urlset&gt;\nEOT;\n                    $file_name=&lt;&lt;&lt;EOT\n$filePath/$file_num.xml\nEOT;\n                    $no_of_files .=&lt;&lt;&lt;EOT\nhttps://www.somefilepath$file_num.xml (Have Complete $counter Url's)\\n\nEOT;\n                    $myfile = fopen($file_name, \"w\") or die(\"\\nFailed To Open File \\n$file_name \\nAt LINE: \".__LINE__ .\"\\nIn FILE:\".__FILE__);\n                    fwrite($myfile,$final_xml);\n                    fclose($myfile);\n                    sleep(1);\n                    $final_xml = '';\n\n                    //Mobile XML Code starts here//\n                    $final_xml_mb=&lt;&lt;&lt;EOT\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\\n &lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"&gt;\\n$final_xml_mb&lt;/urlset&gt;\nEOT;\n                    $file_name_mb=\"$filePath/$file_num.xml\";\n                    $no_of_files_mb .= &lt;&lt;&lt;EOT\nhttps://somefilepath-$file_num.xml (Have Complete $counter Url's)\\n\nEOT;\n                    $myfile1 = fopen($file_name_mb, \"w\") or die(\"\\nFailed To Open File \\n$file_name_mb \\nAt LINE: \".__LINE__ .\"\\nIn FILE:\".__FILE__);\n                    fwrite($myfile1,$final_xml_mb);\n                    fclose($myfile1);\n                    sleep(1);\n                    $final_xml_mb = '';\n                    $xml = null;\n                    //Mobile XML code ends here//\n//                     ob_flush();\n\n            }\n\n            $msg='';\n            $this-&gt;write_index_xml($file_num);\n            $this-&gt;write_mb_index_xml($file_num);\n            if($records==20000 &amp;&amp; $global_record &lt; $total_count)\n            {\n                $start= $global_record+1;\n                if(($total_count-$global_record)&gt; 20000)\n                    $end = $global_record+20000;\n                else\n                    $end = $global_record+($total_count-$global_record);\n\n                oci_free_statement($sthsplit);\n                $this-&gt;fetch_data($start,$end,$total_count,$dbh);\n            }\n\n    }\n\n    public function write_index_xml($count)\n    {\n            global $filePath;\n            $s=0;\n            $newmasterfile = $sitemap_index_final = $sitemap_index_file_name = '';\n            $mtime = date(\"Y-m-d\").'T'.date(\"G:i:s\");\n\n            $sitemap_index_final=&lt;&lt;&lt;EOT\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;sitemapindex xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.google.com/schemas/sitemap-image/1.1\"&gt;\nEOT;\n            for($s=1;$s&lt;=$count;$s++)\n            {\n                $sitemap_index_final .=&lt;&lt;&lt;EOT\n    &lt;sitemap&gt;\n            &lt;loc&gt;https://www.somefilepath$s.xml&lt;/loc&gt;\n            &lt;lastmod&gt;$mtime+5:30&lt;/lastmod&gt;\n    &lt;/sitemap&gt;\nEOT;\n            }\n\n            $sitemap_index_final .='&lt;/sitemapindex&gt;';\n            $sitemap_index_file_name=\"$filePath/indexSSL.xml\";\n\n            if(file_exists($sitemap_index_file_name))\n            {\n                $newmasterfile = \"$filePath/indexSSL.xml\\n\";\n            }\n            $myfile = fopen($sitemap_index_file_name, \"w\") or die(\"\\nFailed To Open File \\n$sitemap_index_file_name \\nAt LINE: \".__LINE__ .\"\\nIn FILE:\".__FILE__);\n            fwrite($myfile,$sitemap_index_final);\n            fclose($myfile);\n            $newmasterfile = $sitemap_index_final = $sitemap_index_file_name = null;\n    }\n\n    public function write_mb_index_xml($count)\n    {\n            global $filePath;\n            $s=0;\n            $newmasterfile = $sitemap_index_final = $sitemap_index_file_name = '';\n            $mtime = date(\"Y-m-d\").'T'.date(\"G:i:s\");\n\n            $sitemap_index_final=&lt;&lt;&lt;EOT\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;sitemapindex xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.google.com/schemas/sitemap-image/1.1\"&gt;\nEOT;\n            for($s=1;$s&lt;=$count;$s++)\n            {\n                $sitemap_index_final .=&lt;&lt;&lt;EOT\n    &lt;sitemap&gt;\n            &lt;loc&gt;https://somefilepath-$s.xml&lt;/loc&gt;\n            &lt;lastmod&gt;$mtime+5:30&lt;/lastmod&gt;\n    &lt;/sitemap&gt;\nEOT;\n            }\n\n            $sitemap_index_final .='&lt;/sitemapindex&gt;';\n            $sitemap_index_file_name=\"$filePath/prod.xml\";\n\n            if(file_exists($sitemap_index_file_name))\n            {\n                $newmasterfile = \"$filePath/prod.xml\\n\";\n            }\n            $myfile = fopen($sitemap_index_file_name, \"w\") or die(\"\\nFailed To Open File \\n$sitemap_index_file_name \\nAt LINE: \".__LINE__ .\"\\nIn FILE:\".__FILE__);\n            fwrite($myfile,$sitemap_index_final);\n            fclose($myfile);\n            $newmasterfile = $sitemap_index_final = $sitemap_index_file_name = null;\n    }\n\n    public function connect($userid,$password,$dbName)\n    {\n            $dbh = oci_connect($userid,$password,$dbName);\n            if ($dbh)\n                return $dbh;\n            else\n            {\n                $emsg    = oci_error();\n                $msg.= \"\\n\\n {$emsg['message']}\\n\\n\";\n                echo \"\\n\\n not connected $msg \\n\\n\";\n                exit;\n            }\n    }\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519044738, "post_id": 48860421, "comment_id": 84736390, "body": "There&#39;s no need to do those <code>-e</code> checks. You <i>must</i> test that the return code from <code>return</code> is non zero and print the value of <code>$!</code> to give the reason for failure. Alternatively you can enable <code>use autodie</code> which will do all the necessary checks implicitly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519651615, "post_id": 48860421, "comment_id": 84983776, "body": "<i>&quot;If the detail record is 5 and the trailer record  <code>00000000000000005</code> is not 5 or something like <code>00000000000000007</code>&quot;</i> That&#39;s a bizarre requirement. Okay, you tell me: is <code>00000000000000005</code> &quot;something like&quot; <code>00000000000000007</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519027151, "post_id": 48861012, "comment_id": 84726296, "body": "Hi i would like to compare the no of columns from the file with &quot;00000000000000005&quot; ie the trailer record. Lets say i am counting the no of lines from an input file with $. and it says it is 5 and i want to compare the trailer record ie &quot;00000000000000005&quot; if it is &quot;00000000000000006&quot; then it will say trailer record count doesnot match"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519030323, "post_id": 48861012, "comment_id": 84727742, "body": "I don&#39;t quite understand that you insist on a string &quot;00000000000000006&quot; and can&#39;t use an integer. If you need another check then add <code>die &quot;....&quot; unless $line == $l_recordLength</code> where <code>$l_recordLength</code> is an input parameter."}, {"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519031011, "post_id": 48861012, "comment_id": 84728093, "body": "can you please tell what these line $line = 0 if /^000/;          $line++; is actually doing?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519031863, "post_id": 48861012, "comment_id": 84728588, "body": "If the current line, i.e. <code>$_</code>, starts with the string <code>000</code> then set <code>$line</code> to 0. <code>$line++</code> increments the value. So at the beginning of the record <code>$line</code> will be 1 and incremented for every following line."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519032115, "post_id": 48861012, "comment_id": 84728755, "body": "...and <code>while(&lt;DATA&gt;)</code> just loops over the lines after <code>__DATA__</code> and assigns each line to <code>$_</code>. But that loop and the data is just there so that the code that really matters, i.e. what is inside the <code>while</code> loop, can be tested by running the script."}, {"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519032783, "post_id": 48861012, "comment_id": 84729164, "body": "thank you so much and what does the below means          my($record_length) = /^999(\\d+)/;             $record_length += 0; # integer"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519033030, "post_id": 48861012, "comment_id": 84729323, "body": "The first line extracts the number string after <code>999</code> from the start of the line and assigns it to <code>$record_length</code>. The following <code>+= 0</code> coerces the string to an integer, because &quot;number in string&quot; + &quot;number&quot; equals a &quot;number&quot;."}, {"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519036168, "post_id": 48861012, "comment_id": 84731298, "body": "just one more question. How can i redirect the output to the log file in the same code?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1519041751, "post_id": 48861012, "comment_id": 84734569, "body": "<code>open(my $logfh, &quot;&gt;&quot;, &quot;logfile.txt&quot;); print $logfh &quot;message to log...\\n&quot;;</code>  All of the above is basic Perl stuff. I would suggest to take a Perl beginners tutorial."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": -1, "last_activity_date": 1519025884, "last_edit_date": 1519025884, "creation_date": 1519023779, "answer_id": 48861012, "question_id": 48860421, "link": "https://stackoverflow.com/questions/48860421/count-total-records-in-file-and-compare-with-trailer-records-in-perl/48861012#48861012", "title": "Count total records in File and compare with trailer records in Perl", "body": "<p>Not sure if I understood your question correctly. This is how I would write it:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $records = 0;\nmy $line;\nwhile (&lt;DATA&gt;) {\n    #print \"LINE: $_\";\n\n    # inside a record\n    if (/^000/.../^999/) {\n        #print \"RECORD: $_\";\n\n        # start of record\n        $line = 0 if /^000/;\n\n        $line++;\n\n        # end of record\n        if (/^999/) {\n            $records++;\n\n            # record length check\n            my($record_length) = /^999(\\d+)/;\n            $record_length += 0; # integer\n            die \"Record $records is $line line(s) long, but should be $record_length!\\n\"\n                unless $line == $record_length;\n\n            print \"Record $records is OK\\n\";\n        }\n    }\n}\n\n__DATA__\nasdjaslkdjasd\nasdjasdjasld\nasdjasdaskd\n\n000FDPOSTAXENTITY2018021317243200001\nDTL11~|~|110~|~|220~|~|T0333~|~|~|~|\nDTL11~|~|333~|~|444~|~|T0555~|~|~|~|\nDTL11~|~|555~|~|222~|~|T0777~|~|~|~|\n99900000000000000005~|~|~|~|~|~|~|~|\n\nasdasdasd\n\nasdasdasdasd\n\n000FDPOSTAXENTITY2018021317243200001\nDTL11~|~|110~|~|220~|~|T0333~|~|~|~|\nDTL11~|~|555~|~|222~|~|T0777~|~|~|~|\n99900000000000000005~|~|~|~|~|~|~|~|\n\nasdasdasd\n</code></pre>\n\n<p>Example run on the embedded data:</p>\n\n<pre><code>Record 1 is OK\nRecord 2 is 4 line(s) long, but should be 5!\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519651515, "creation_date": 1519020791, "last_edit_date": 1519651515, "question_id": 48860421, "link": "https://stackoverflow.com/questions/48860421/count-total-records-in-file-and-compare-with-trailer-records-in-perl", "title": "Count total records in File and compare with trailer records in Perl", "body": "<p></p>\n\n<p>I have the following code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ( -e $filein ) {\n\n    if ( open( FILEIN, $filein ) ) {\n\n        print log_date() . \"STARTING TO CHECK  FILE \\n\";\n\n        while ( &lt;FILEIN&gt; ) {\n\n            chomp( $_ );\n\n            if ( length( $_ ) == $l_recordLength ) {\n\n                $rectype = substr( $_, $0, 3 );\n                my $config = \"fdposmarkertaxentity.ini\";\n\n                if ( -e $config ) {\n\n                    my $cfg = new Config::IniFiles( -file =&gt; $config );\n                    print \"$rectype \\n\";\n\n                    if ( $rectype eq \"999\" ) {\n\n                        print log_date() . \"CHECK TRAILER RECORD IN CHECKFILE SUBROUTINE WHILE CHECKING  FILE \\n\";\n                        $filereccnt = substr( $_, 3, 17 );\n\n                        if ( ( $filereccnt != $. ) || ( $. &lt;= 2 ) ) {\n\n                            if ( $BLog ) {\n\n                                $errhdrordtlrec += $l_valueOne;\n\n                                print HEADERTRAILER_ERROR_LOGFILE log_date() . \"$. \\n\";\n                                print HEADERTRAILER_ERROR_LOGFILE log_date() . \"$_ \\n\";\n                                print HEADERTRAILER_ERROR_LOGFILE log_date() . \"====================================================================================================== \\n\";\n                                $ERRHDRTRLRRCRDMSG = \"Trailer record count does not match record or no records present in file.\";\n                                print HEADERTRAILER_ERROR_LOGFILE log_date() . \"$ERRHDRTRLRRCRDMSG $filereccnt \\n\";\n                                print HEADERTRAILER_ERROR_LOGFILE log_date() . \"====================================================================================================== \\n\";\n\n                                $BTrailerRecAlreadyRead = $l_valueOne;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And my record file contains below inputs</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>000FDPOSTAXENTITY2018021317243200001\nDTL11~|~|110~|~|220~|~|T0333~|~|~|~|\nDTL11~|~|333~|~|444~|~|T0555~|~|~|~|\nDTL11~|~|555~|~|222~|~|T0777~|~|~|~|\n99900000000000000005~|~|~|~|~|~|~|~|\n</code></pre>\n\n<p>I want to compare the number of lines from an input file. <code>00000000000000005</code> is the line count in a file. My record file has five lines. If the detail record is 5 and the trailer record  <code>00000000000000005</code> is not 5 or something like <code>00000000000000007</code> then it will throw error message like</p>\n\n<blockquote>\n  <p>Trailer record count doesnot match</p>\n</blockquote>\n\n<p>else if it is <code>00000000000000005</code> it will throw</p>\n\n<blockquote>\n  <p>Trailer record count matches</p>\n</blockquote>\n\n<p>Can anyone help me out with the solution?</p>\n"}, {"tags": ["perl", "nginx", "sed"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519021129, "post_id": 48860219, "comment_id": 84724059, "body": "<code>sed</code> doesn&#39;t like newlines in the replacement literal."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1519054743, "post_id": 48860219, "comment_id": 84742577, "body": "Are you trying to match an entire line in <code>nginx.conf</code>?"}, {"owner": {"reputation": 125, "user_id": 3784248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3e2565e0d4380c3490c9a8ceb892c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Alejandro Santiago", "link": "https://stackoverflow.com/users/3784248/ren%c3%a9-alejandro-santiago"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1519055002, "post_id": 48860219, "comment_id": 84742734, "body": "@Beta Yes, although I&#39;m really trying to match whatever is necessary to insert the $replacement_string right after that line in nginx.conf."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1519055769, "post_id": 48860219, "comment_id": 84743186, "body": "Then may I suggest writing the replacement string to a file and then using sed&#39;s &#39;r&#39; (read) command?"}, {"owner": {"reputation": 125, "user_id": 3784248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3e2565e0d4380c3490c9a8ceb892c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Alejandro Santiago", "link": "https://stackoverflow.com/users/3784248/ren%c3%a9-alejandro-santiago"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519059383, "post_id": 48860219, "comment_id": 84745266, "body": "I thought about that initially but I&#39;m trying to avoid creating a separate file just for that. I just really want to find out how to insert a block of lines with new lines,etc., without taking the file approach. I&#39;ll try to see if what @ikegami suggested helps, otherwise I might just take your advice."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1519021282, "creation_date": 1519021282, "answer_id": 48860519, "question_id": 48860219, "link": "https://stackoverflow.com/questions/48860219/unterminated-delimeter-in-sed-command-while-passing-a-variable/48860519#48860519", "title": "Unterminated Delimeter in sed Command While Passing a Variable", "body": "<p><code>sed</code> doesn't like newlines in the replacement literal.</p>\n\n<pre><code>$ sed 's~a~b~' /dev/null\n\n$ sed 's~a~b\n~' /dev/null\nsed: -e expression #1, char 5: unterminated `s' command\n</code></pre>\n\n<p>It does accept <code>\\n</code>, so you could replace the newlines with <code>\\n</code>. Of course, you could simply do the work in Perl. This will help you address a number of other issues:</p>\n\n<ul>\n<li>Shell command injection bug.</li>\n<li>Lack of escaping <code>\\</code> in the replacement literal.</li>\n<li>Lack of error detecting and handling.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 3784248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3e2565e0d4380c3490c9a8ceb892c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Alejandro Santiago", "link": "https://stackoverflow.com/users/3784248/ren%c3%a9-alejandro-santiago"}, "is_accepted": true, "score": 0, "last_activity_date": 1519088243, "creation_date": 1519088243, "answer_id": 48876403, "question_id": 48860219, "link": "https://stackoverflow.com/questions/48860219/unterminated-delimeter-in-sed-command-while-passing-a-variable/48876403#48876403", "title": "Unterminated Delimeter in sed Command While Passing a Variable", "body": "<p>Thanks to @Beta's comments above I was able to obtain the result I wanted. It involved:</p>\n\n<ol>\n<li>changing the subroutine getstringforreplace() to print the contents of qq() to a temporary file,</li>\n<li>doing an in-place replacement using sed to read the contents of that file into /etc/nginx/nginx.conf,</li>\n<li>and then removing the temporary file.</li>\n</ol>\n\n<p>...which is below:</p>\n\n<pre><code>getstringforreplace(); # Prints $replacement_string to temp.txt.\nmy $command = qq ( sudo sed -i -e '/octet-stream;/r temp.txt' /etc/nginx/nginx.conf );\nsystem ( $command );\nsystem ( 'sudo rm temp.txt' );\n</code></pre>\n\n<p>Ideally, I would have liked to not have to print to a file, etc., but for the moment this yields the desired result.</p>\n"}], "owner": {"reputation": 125, "user_id": 3784248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3e2565e0d4380c3490c9a8ceb892c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Alejandro Santiago", "link": "https://stackoverflow.com/users/3784248/ren%c3%a9-alejandro-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 48876403, "answer_count": 2, "score": 0, "last_activity_date": 1519088243, "creation_date": 1519019578, "question_id": 48860219, "link": "https://stackoverflow.com/questions/48860219/unterminated-delimeter-in-sed-command-while-passing-a-variable", "title": "Unterminated Delimeter in sed Command While Passing a Variable", "body": "<p>I've been struggling with this for more than an hour now and I'm not sure what's wrong. Using Perl, I'm trying to use sed to do an in-line replacement of a string in /etc/nginx/nginx.conf as noted by using  the sed command below:</p>\n\n<pre><code>my $replacement_string = getstringforreplace();\nmy $command = qq ( sudo sed -i \"s~default_type        application/octet-stream;~default_type        application/octet-stream;$replacement_string~\" /etc/nginx/nginx.conf );\nsystem ( $command );\ndie ( $command ); # Using this for debugging purposes.\n</code></pre>\n\n<p>I'm really trying to place the $replacement_string after matching that 'default type' line in nginx.conf but I'm not sure what to use besides sed.</p>\n\n<p>I've (1) changed the delimiters to avoid any issues with the forward slashes, (2) double quoted the replacement (I'm really not sure why, I was using single quotes before), and (3) removed a newline character I had right before the $replacement_string, among other things.</p>\n\n<p>I went ahead and put the <em>die ( $command );</em> in there as noted in <a href=\"https://stackoverflow.com/questions/14968056/unterminated-s-command\">this</a> answer, but I'm not seeing what's wrong. This is what that returns -- which is pretty much what I want:</p>\n\n<pre><code>sudo sed -i \"s~default_type        application/octet-stream;~default_type        application/octet-stream;\n# Load modular configuration files from the /etc/nginx/conf.d directory.\n# See http://nginx.org/en/docs/ngx_core_module.html#include\n# for more information.\ninclude /etc/nginx/conf.d/*.conf;\n\nserver {\n    listen       80 default_server;\n    listen       [::]:80 default_server;\n    tserver_name  _;\n    root         /usr/share/nginx/html;\n\n    # Load configuration files for the default server block.\n    include /etc/nginx/default.d/*.conf;\n\n    location / {\n    }\n\n    error_page 404 /404.html;\n        location = /40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n    }\n}\n~\" /etc/nginx/nginx.conf\n</code></pre>\n\n<p>The $replacement_string is returned by the call to the subroutine getstringforreplace() below:</p>\n\n<pre><code>sub getstringforreplace\n{\n    my $message = qq (\n    # Load modular configuration files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n    # for more information.\n    include /etc/nginx/conf.d/*.conf;\n\n    server {\n        listen       80 default_server;\n        listen       [::]:80 default_server;\n        tserver_name  _;\n        root         /usr/share/nginx/html;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n    }\n    );\n    return $message;\n}\n</code></pre>\n\n<p>Any guidance would be really appreciated as I'm not sure how to get rid of this <em>unterminated `s' command</em> issue. I'm thinking now it has to do with that qq() from the subroutine I'm calling.</p>\n"}, {"tags": ["perl", "build", "automation", "headless"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1518985868, "post_id": 48856225, "comment_id": 84715936, "body": "Running <code>.&#47;Build installdeps</code> is an unusual way to install dependencies?! Why can&#39;t you install your distribution via the normal cpan/cpanm tools? You could then select whether you want to install suggested dependencies via command-line parameter."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518988484, "post_id": 48856225, "comment_id": 84716808, "body": "There&#39;s an env var used by smokers. Don&#39;t remember what it is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518989377, "post_id": 48856225, "comment_id": 84717106, "body": "And of course, tying stdin to /dev/null might do the trick."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1518989379, "post_id": 48856225, "comment_id": 84717107, "body": "Does <a href=\"https://stackoverflow.com/a/11959600\">stackoverflow.com/a/11959600</a> help?"}], "owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "closed_date": 1518995512, "answer_count": 0, "score": 0, "last_activity_date": 1518985616, "creation_date": 1518985616, "question_id": 48856225, "link": "https://stackoverflow.com/questions/48856225/how-to-avoid-interaction-with-build-installdeps-in-perl-standard-installation", "closed_reason": "Duplicate", "title": "How to avoid interaction with &quot;Build installdeps&quot; in perl standard installation routine?", "body": "<p>A standard perl installation routine, e.g. for po4a 0.52 is</p>\n\n<pre><code>perl ./Build.PL PREFIX=/some/prefix\n./Build installdeps\n./Build\n./Build install\n</code></pre>\n\n<p>how to avoid interaction with all of the commands, e.g.</p>\n\n<pre><code>Checking optional dependencies:\nInstall SGMLS? [y ]\n</code></pre>\n\n<p>during <code>./Build installdeps</code>.</p>\n\n<p>I'm using this in a system bootstrapping script on an almost empty docker image in a headless environment (GitLab CI service), so solutions with a smaller list of dependent steps is preferred or those with longer ones.</p>\n\n<p>I know about tools like <code>expect</code> (or <code>pexpect</code> in python), but they're complicated and require quite some amount of bootstrapping. I could research the sequence of input that makes sense and read it from a file, but I'd like to avoid that if there's an easier solution, like an argument I can pass to <code>Build</code>. I found <a href=\"http://www.perlmonks.org/?node_id=1074554\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=1074554</a> which seems overly complicated.</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519071404, "post_id": 48856087, "comment_id": 84750925, "body": "Superfluous <code>scalar</code> in the <code>print</code> line."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1519084638, "last_edit_date": 1519084638, "creation_date": 1518984758, "answer_id": 48856087, "question_id": 48856062, "link": "https://stackoverflow.com/questions/48856062/how-to-determine-multi-array-size-in-perl/48856087#48856087", "title": "How to determine multi-array size in PERL?", "body": "<p><code>$#array</code> gives you the index of the last element, the size is in fact <code>$#array + 1</code> or <code>scalar @array</code> (or <code>@array</code> in scalar context).  To get the size of a nested array, use dereference:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @ary_2d=([12,13,14,15],[67,68,69,70,71]);\n\nmy $size = @ary_2d;\nprint \"m: $size\\n\";\n\nprint \"n: \", scalar @$_, \"\\n\" for @ary_2d;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1519034873, "post_id": 48856715, "comment_id": 84730481, "body": "I think this could really do with some more explanation of what&#39;s going on."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1519066293, "post_id": 48856715, "comment_id": 84748745, "body": "@Sobrique: It is straightforward and idiomatic Perl. I don&#39;t know which part needs explanation. If you ask a specific question I can add a specific explanation."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 1, "last_activity_date": 1518988860, "creation_date": 1518988860, "answer_id": 48856715, "question_id": 48856062, "link": "https://stackoverflow.com/questions/48856062/how-to-determine-multi-array-size-in-perl/48856715#48856715", "title": "How to determine multi-array size in PERL?", "body": "<pre><code>use List::Util qw( max );\nmy @ary_2d=([12,13,14,15],[67,68,69,70,71]);\nprintf \"%dx%d\\n\", 0+@ary_2d, max map 0+@$_, @ary_2d;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4760272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-JQ5vdeNdWmQ/AAAAAAAAAAI/AAAAAAAADMo/KlSms3irUXQ/photo.jpg?sz=128", "display_name": "Leon WANG", "link": "https://stackoverflow.com/users/4760272/leon-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 48856087, "answer_count": 2, "score": 1, "last_activity_date": 1519084638, "creation_date": 1518984528, "question_id": 48856062, "link": "https://stackoverflow.com/questions/48856062/how-to-determine-multi-array-size-in-perl", "title": "How to determine multi-array size in PERL?", "body": "<p>I created a 2d(mxn) array,@ary_2d, which is used to read different values from different files. Thus, the m and n values keep changing. It is very hard to determine the scalar because each file has different data set, especially for different m values. How can I determine m and n in a simple way? For 1d array, let's say @ary_1d, I can decide it using $#ary_1d. How can I decide the m and n values in the similar way? Any suggestion or easier way would be highly appreciated.\nLet's see an example below.</p>\n\n<p><code>my @ary_2d=([12,13,14,15],[67,68,69,70,71]);</code>  # row 1: [12,13,14,15] with 4 elements/columns; row 2: [67,68,69,70,71] with 5 elements/columns</p>\n\n<p>in 1d array, like @ary_1d, we can use\n    <code>$#ary_id</code>\nto get the size of this array. However, how can we get the m value (row value) when we handle 2 or higher dimension arrays? Any simple and clear command would be highly appreciated.</p>\n\n<p>Best,\nLeon</p>\n"}, {"tags": ["perl", "sockets", "tcp", "netcat"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1518984476, "post_id": 48855977, "comment_id": 84715510, "body": "I see at least two problems with your code: (1) you use <code>recv</code> &amp; <code>send</code> on a TCP stream instead of an UDP socket, (2) both server &amp; client start with <code>recv</code> and wait forever, because the other side isn&#39;t sending anyting"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1518984769, "post_id": 48855977, "comment_id": 84715596, "body": "Plus you overwrite <code>$sock</code> inside the server loop..."}], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 4089766, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ezdT6.jpg?s=128&g=1", "display_name": "baconSoda", "link": "https://stackoverflow.com/users/4089766/baconsoda"}, "edited": false, "score": 0, "creation_date": 1518986494, "post_id": 48856138, "comment_id": 84716116, "body": "Thanks @Stefan.  So i see that the strings need to end with \\n character.  Also using this the server stays up listening, but once the client sends the data it disconnects on the second iteration, with the error &quot; cannot determine the peer address &quot;. How do i make this run indefinitely (till ctrl +c). also this uses hardcoded strings, how would i send user input?  Meanwhile you&#39;ve mentioned im using send/recv, is there anything else i should be using ?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518999305, "post_id": 48856138, "comment_id": 84719456, "body": "<i>So i see that the strings need to end with \\n character</i> -- Easy enough to test, but the answer is no. The most important thing to know about sockets is: when you send data over a socket, the data can be split into multiple chunks. The read() in the server merely blocks until it has read a total of 1024 bytes--or the other side closes the socket, in which case read() returns what it has read so far.  That means the server won&#39;t read the whole string if the string is longer than 1024 bytes.  It doesn&#39;t matter if the string contains newlines or not--the newlines have no affect on read()."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518999440, "post_id": 48856138, "comment_id": 84719488, "body": "*also this uses hardcoded strings, how would i send user input -- Write a program--without using sockets--that gets user input and prints it out."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1519021569, "post_id": 48856138, "comment_id": 84724200, "body": "I do not think that the <code>\\n</code> matter as the code uses <code>autoflush()</code>. The problem was that your protocol was &quot;broken&quot;, i.e. both were waiting and no side initiated the protocol. This is not a Perl issue, it would have happened in any other language too."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1519021997, "post_id": 48856138, "comment_id": 84724345, "body": "You are correct. &quot;As is&quot; the server will only handle one request from the client and go back to listening for the next connect.  You will need to hand-off the socket returned by <code>accept()</code> to a parallel running &quot;process&quot; that runs the protocol for that socket. There are several options how to do that: (a) <code>fork()</code>, i.e. a separate child process, (b) create a thread or (c) an event loop using <code>IO::Select</code> or <code>IO::Poll</code> to listen to a set of sockets, i.e. the listen + N accepted sockets. You&#39;ll need to decide what is applicable to your scenario"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1519022339, "post_id": 48856138, "comment_id": 84724453, "body": "Another alternative is to use POE, i.e. <code>POE::Component::Server::TCP</code>"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1519035176, "post_id": 48856138, "comment_id": 84730685, "body": "<i>I do not think that the \\n matter as the code uses autoflush()</i>.-- I don&#39;t understand how newlines and autoflush() have anything to do with each other."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1519041612, "post_id": 48856138, "comment_id": 84734490, "body": "When an output handle is in &quot;cooked&quot; mode <code>\\n</code> cause a flush. With <code>autoflush()</code> the handle is flushed after every write"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1518986082, "last_edit_date": 1518986082, "creation_date": 1518985140, "answer_id": 48856138, "question_id": 48855977, "link": "https://stackoverflow.com/questions/48855977/established-tcp-connection-but-socket-doesnt-send-recv-data/48856138#48856138", "title": "Established TCP connection but socket doesn&#39;t send/recv data", "body": "<p>Code for the server (tested with telnet localhost 9040):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IO::Socket::INET;\n\nmy $port = 9040;\nmy $listen = IO::Socket::INET-&gt;new(Listen    =&gt; 1,\n                                   LocalPort =&gt; $port,\n                                   Proto     =&gt; 'tcp',\n                                   ReuseAddr =&gt; 1,\n                                   ReusePort =&gt; 1);\nwhile ($listen) {\n    print \"\\nListening on port $port ...\\n\";\n    my $sock  = $listen-&gt;accept();\n    my $client_IP = $sock-&gt;peerhost();\n    my $client_port = $sock-&gt;peerport();\n    print \"\\n Connected from $client_IP $client_port \\n\";\n\n    my $data;\n    $sock-&gt;recv($data, 1024);\n    print $data;\n\n    #writing to  socket\n    $sock-&gt;autoflush(1);\n    my $response = \"oohlalala\\n\" ;\n    $sock-&gt;send($response);\n    shutdown($sock, 1);\n}\n</code></pre>\n\n<p>Client code (tested against above server):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IO::Socket::INET;\n\nmy $port = 9040;\nmy $sock = IO::Socket::INET-&gt;new(PeerAddr  =&gt; 'localhost',\n                                 PeerPort  =&gt; $port,\n                                 Proto     =&gt; 'tcp');\n\nif ($sock) {\n    my $server_IP = $sock-&gt;peerhost();\n    my $server_port = $sock-&gt;peerport();\n    print \"\\n Connected to $server_IP $server_port \\n\";\n\n    # initiate protocol\n    $sock-&gt;autoflush(1);\n    print $sock \"OK\\n\";\n\n    my $data;\n    $sock-&gt;recv($data, 1024);\n    print $data;\n\n    shutdown($sock, 1);\n}\n</code></pre>\n\n<p>Output from server:</p>\n\n<pre><code>Listening on port 9040 ...\n\n Connected from 127.0.0.1 36106 \nOK\n\nListening on port 9040 ...\n</code></pre>\n\n<p>Output from client:</p>\n\n<pre><code> Connected to 127.0.0.1 9040 \noohlalala\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 433, "user_id": 4089766, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ezdT6.jpg?s=128&g=1", "display_name": "baconSoda", "link": "https://stackoverflow.com/users/4089766/baconsoda"}, "edited": false, "score": 0, "creation_date": 1519098171, "post_id": 48864362, "comment_id": 84759077, "body": "thanks @7stud for the detailed explanation. I really appreciate it"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 433, "user_id": 4089766, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ezdT6.jpg?s=128&g=1", "display_name": "baconSoda", "link": "https://stackoverflow.com/users/4089766/baconsoda"}, "edited": false, "score": 0, "creation_date": 1519178172, "post_id": 48864362, "comment_id": 84799750, "body": "@baconSoda, You are welcome.  I changed my first example because the server was sort of doubling down with my line oriented protocol: the server was also closing the socket after finding the end of line marker.  You don&#39;t need two markers to signal the end of the line.  Now, the difference between the line oriented protocol and the close the socket protocol is more stark."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 2, "last_activity_date": 1519177971, "last_edit_date": 1519177971, "creation_date": 1519037018, "answer_id": 48864362, "question_id": 48855977, "link": "https://stackoverflow.com/questions/48855977/established-tcp-connection-but-socket-doesnt-send-recv-data/48864362#48864362", "title": "Established TCP connection but socket doesn&#39;t send/recv data", "body": "<p>From <a href=\"https://perldoc.perl.org/IO/Socket.html\" rel=\"nofollow noreferrer\">IO::Socket</a>: </p>\n\n<blockquote>\n  <p>As of VERSION 1.18 all IO::Socket objects have autoflush turned on by\n  default. This was not the case with earlier releases.</p>\n</blockquote>\n\n<p>Perl version 2.0 was released in 1988.  You are most likely using perl version 5.x.</p>\n\n<blockquote>\n  <p><strong>1)</strong> the major difference between the client and the server is only that\n  the server has an added LISTEN parameter which enables it to listen\n  for incoming connections ?</p>\n</blockquote>\n\n<p>According to the <a href=\"http://%20https://perldoc.perl.org/IO/Socket/INET.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>If Listen is defined then a listen socket is created...</p>\n</blockquote>\n\n<p>A listen socket can call <code>accept()</code>.  If a regular socket calls accept(), accept() returns undef.</p>\n\n<blockquote>\n  <p><strong>accept()</strong></p>\n  \n  <p>In a scalar context the new socket is returned, or undef upon failure.\n  In a list context a two-element array is returned containing the new\n  socket and the peer address; the list will be empty upon failure.</p>\n  \n  <p><a href=\"https://perldoc.perl.org/IO/Socket.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/IO/Socket.html</a></p>\n</blockquote>\n\n<p>Here is a <a href=\"https://docs.oracle.com/javase/tutorial/networking/sockets/definition.html\" rel=\"nofollow noreferrer\">nice, short, basic description of sockets</a>.</p>\n\n<p>Your server code probably hides some of what's going on.  It would be more illustrative if it was written like this:</p>\n\n<pre><code>$server_socket = IO::Socket::INET(.....);\n...\n...\nmy $client_socket = $server_socket-&gt;accept();\n...\n...\n</code></pre>\n\n<p>There are two different sockets.  accept() returns a new socket for the server and the client to communicate with, so the original server socket can keep listening for client connections.</p>\n\n<blockquote>\n  <p><strong>2)</strong> Are there any steps missing between recv and displaying the data?</p>\n</blockquote>\n\n<p>Depending on what you're doing, you might want to get rid of the characters that mark the end of the data, which the code would have used to signal the other side that it should stop trying to read more data from the socket.</p>\n\n<p>Receiving the data is the tricky part.  An agreed upon protocol must be used by both the client and the server to avoid deadlock, which is when both the client and the server are waiting for the other side to send data.     In the example below, I employ a \"line oriented\" protocol where one side stops reading from the socket when it reads a newline.  In networking, by convention a newline is considered to be \"\\r\\n\", which represents the ascii characters <code>carriage return</code> and <code>line feed</code>, but to avoid any type of automatic \"\\n\" translations on various OS's, the socket library uses the actual ascii codes: 13 and 10, which in hex notation is: \"\\x0D\\x0A\".</p>\n\n<p>server.pl:</p>\n\n<pre><code>use strict;  \nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nuse IO::Socket::INET;\nuse Socket qw( :crlf );  # \"\\x0D\\x0A\" constants CRLF and $CRLF\n\nmy $host = 'localhost';\nmy $port = 15_678;\n\nmy $server_socket = IO::Socket::INET-&gt;new(\n        Listen    =&gt; 5,\n        LocalPort =&gt; $port,\n        LocalAddr =&gt; $host,\n        Proto     =&gt; 'tcp',\n        ReuseAddr =&gt; 1,\n        ReusePort =&gt; 1\n);\n\nsay \"Server listening on port: $port\\n\";\n\nwhile (my $client_socket = $server_socket-&gt;accept() ) {\n\n    my $client_ip = $client_socket-&gt;peerhost();\n    my $client_port = $client_socket-&gt;peerport();\n    say \"Connection from $client_ip:$client_port\";\n\n    {\n        local $/ = CRLF; # $/ is the input record separator, which is \"\\n\" \n                         #by default. Both &lt;$INFILE&gt; and getline() read up to\n                         #and including the input record separator.\n        while(my $line = $client_socket-&gt;getline) { #Blocks until CRLF is read \n                                                 #from the socket or the other \n                                                 #side closes the socket.\n            chomp $line; #chomp() removes input record separator from end of line.\n            say \"Server received: $line\";\n\n            my $response = reverse $line;\n            $client_socket-&gt;send(\"$response$CRLF\");\n\n            say \"Server sent: $response\";\n        }\n\n    }  #Here $/ is restored to whatever it was before this parenthesized block. \n       #That is what declaring a variable as local does.\n\n    say \"-\" x 30;\n\n    #Execution arrives here after the client closes the socket:\n    $client_socket-&gt;shutdown(2);  #Send signals to other side of socket.\n                                  #Not necessary in this example because other threads  \n                                  #aren't also reading from the socket.\n    $client_socket-&gt;close();  #Close the filehandle associated with the socket.\n}\n</code></pre>\n\n<p>Note that just like when reading a file, getline will return everything it has read so far when it receives an eof signal, and for the next iteration of the while loop getline will return undef causing the while loop to terminate.</p>\n\n<p>client.pl:</p>\n\n<pre><code>use strict;  \nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nuse IO::Socket::INET;\nuse Socket qw( :crlf ); #\\x0D\\x0A constants CRLF and $CRLF \n\nmy $port = 15_678;\n\nmy @lines = (\n    \"hello world\",\n    \"goodbye mars\",\n);\n\nmy $sock = IO::Socket::INET-&gt;new(\"localhost:$port\");\n\nfor my $line(@lines){\n\n    my $server_ip = $sock-&gt;peerhost();\n    my $server_port = $sock-&gt;peerport();\n    say \"Connected to $server_ip:$server_port\";\n\n    $sock-&gt;send(\"$line$CRLF\");\n    say \"Client sent: $line\";\n\n    my $response;\n    {\n        local $/ = CRLF;\n        $response = $sock-&gt;getline();\n        chomp $response;\n    }  \n\n    say \"Client received: $response\";\n    say '-' x 30;\n\n}\n\n#Tell the server that no more data is coming from this client:\n$sock-&gt;shutdown(2);  #Send signals to other side of socket.\n$sock-&gt;close();  #Close the filehandle associated with the socket.\n</code></pre>\n\n<p>After running the client program twice...</p>\n\n<p>Server output:</p>\n\n<pre><code>Server listening on port: 15678\n\nConnection from 127.0.0.1:56085\nServer received: hello world\nServer sent: dlrow olleh\nServer received: goodbye mars\nServer sent: sram eybdoog\n------------------------------\nConnection from 127.0.0.1:56096\nServer received: hello world\nServer sent: dlrow olleh\nServer received: goodbye mars\nServer sent: sram eybdoog\n------------------------------\n</code></pre>\n\n<p>Client output:</p>\n\n<pre><code>$ perl client.pl \nConnected to 127.0.0.1:15678\nClient sent: hello world\nClient received: dlrow olleh\n------------------------------\nConnected to 127.0.0.1:15678\nClient sent: goodbye mars\nClient received: sram eybdoog\n------------------------------\n$ perl client.pl \nConnected to 127.0.0.1:15678\nClient sent: hello world\nClient received: dlrow olleh\n------------------------------\nConnected to 127.0.0.1:15678\nClient sent: goodbye mars\nClient received: sram eybdoog\n------------------------------\n$ \n</code></pre>\n\n<blockquote>\n  <p><strong>3)</strong> Shouldn't atleast the hardcoded string \"$response\" be sent when the\n  program executes the while loop the first time?</p>\n</blockquote>\n\n<p>Yes, all statements in a while loop will have executed <em>after</em> the first loop has finished executing--but when a statement higher up in the loop is blocking, then the send will never execute.</p>\n\n<blockquote>\n  <p><strong>4)</strong> How do shutdown($sock,1) and sleep(1) differ in this implementation? Is it okay to let the socket sleep or should I use\n  shutdown($sock,1) to signal to the client/server that data has been\n  sent ?</p>\n</blockquote>\n\n<p>I'm not sure how shutdown() and sleep() are related in any way. sleep() stops your code from executing for the specified time, while shutdown() sends something to the other side of a socket. </p>\n\n<p>\"Closing the socket\", i.e. calling <code>shutdown()</code>, to mark the end of the data is another protocol that you can adopt.  It makes things pretty easy: one side just continues to read from the socket in some sort of read statement, and when the other side closes the socket, the read will return.  Here's an example:</p>\n\n<p>server.pl:</p>\n\n<pre><code>use strict;  \nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nuse IO::Socket::INET;\n\nmy $host = 'localhost';\nmy $port = 15_678;\n\nmy $server_socket = IO::Socket::INET-&gt;new(\n        Listen    =&gt; 5,\n        LocalPort =&gt; $port,\n        LocalAddr =&gt; $host,\n        Proto     =&gt; 'tcp',\n        ReuseAddr =&gt; 1,\n        ReusePort =&gt; 1\n);\n\nsay \"Server listening on port: $port\\n\";\n\nwhile (my $client_socket = $server_socket-&gt;accept() ) {\n\n    my $client_ip = $client_socket-&gt;peerhost();\n    my $client_port = $client_socket-&gt;peerport();\n    say \"Connection from $client_ip:$client_port\";\n\n    my $data;\n    {\n        local $/ = undef;  #This input record separtor will never be found...\n        $data = &lt;$client_socket&gt;;  #...so this reads everything--including newlines--until it gets an eof signal.\n    }\n\n    say \"Server received: $data\";\n    my $response = reverse $data;\n    $client_socket-&gt;send($response);\n\n    $client_socket-&gt;shutdown(2); #Doesn't close filehandle -- merely sends signals.\n    $client_socket-&gt;close();  ##Close the filehandle associated with the socket.\n\n    say \"Server sent: $response\";\n    say \"-\" x 30;\n}\n</code></pre>\n\n<p>client.pl:</p>\n\n<pre><code>use strict;  \nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\n\nuse IO::Socket::INET;\n\nmy $port = 15_678;\n\nmy @data = (\n    \"hello \\n world\",   #Now newlines are in the data\n    \"goodbye \\n mars\",\n);\n\nfor my $data (@data){\n    my $sock = IO::Socket::INET-&gt;new(\"localhost:$port\");\n    my $server_ip = $sock-&gt;peerhost();\n    my $server_port = $sock-&gt;peerport();\n    say \"Connected to $server_ip:$server_port\";\n\n    $sock-&gt;send($data);\n    say \"Client sent: $data\";\n    $sock-&gt;shutdown(1);\n\n    my  $response;\n    { \n        local $/ = undef;  #This input record separtor will never be found...\n        $response = &lt;$sock&gt;;  ##...so this reads everything--including newlines--until it gets an eof signal.\n    }\n    $sock-&gt;shutdown(0);\n\n    $sock-&gt;close();\n\n    say \"Client received: $response\";\n    say '-' x 30;\n\n}\n</code></pre>\n\n<p>Server output:</p>\n\n<pre><code>Server listening on port: 15678\n\nConnection from 127.0.0.1:53139\nServer received: hello \n world\nServer sent: dlrow \n olleh\n------------------------------\nConnection from 127.0.0.1:53140\nServer received: goodbye \n mars\nServer sent: sram \n eybdoog\n------------------------------\n</code></pre>\n\n<p>Client output:</p>\n\n<pre><code>Connected to 127.0.0.1:15678\nClient sent: hello \n world\nClient received: dlrow \n olleh\n------------------------------\nConnected to 127.0.0.1:15678\nClient sent: goodbye \n mars\nClient received: sram \n eybdoog\n------------------------------\n</code></pre>\n"}], "owner": {"reputation": 433, "user_id": 4089766, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ezdT6.jpg?s=128&g=1", "display_name": "baconSoda", "link": "https://stackoverflow.com/users/4089766/baconsoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1287, "favorite_count": 1, "accepted_answer_id": 48864362, "answer_count": 2, "score": 0, "last_activity_date": 1519177971, "creation_date": 1518983965, "last_edit_date": 1518984459, "question_id": 48855977, "link": "https://stackoverflow.com/questions/48855977/established-tcp-connection-but-socket-doesnt-send-recv-data", "title": "Established TCP connection but socket doesn&#39;t send/recv data", "body": "<p>I'm writing a simple TCP client and server Perl script. \nAs of now I verify the 3 way TCP handshake using wireshark, and the connection is established.\nBut when i try to send or recv data nothing happens. </p>\n\n<p>Questions:</p>\n\n<p>1) the major difference between the client and the server is only that the server has an added LISTEN parameter which enables it to listen for incoming connections ?</p>\n\n<p>2)Are there any steps missing between recv and displaying the data? </p>\n\n<p>3)Shouldn't atleast the hardcoded string \"$response\" be sent when the program executes the while loop the first time?</p>\n\n<p>4)How do shutdown($sock,1) and sleep(1) differ in this implementation? Is it okay to let the socket sleep or should I use shutdown($sock,1) to signal to the client/server that data has been sent ?</p>\n\n<p>on inspecting the status of the connection in wireshark, i've noticed that only the handshake takes place. there is no data exchanged at all. So im pretty sure the problem lies somewhere on writing to the socket and reading data from the socket (using the keyboard or hardcoded strings). </p>\n\n<p>Any help would be really appreciated. </p>\n\n<p>The client is as follows:</p>\n\n<pre><code>#!/usr/bin/perl \nuse IO::Socket;\nuse Getopt::Long;\n#$IP_addr = $ARGV[0];\n#$tgt_port = $ARG[1];\n\n#netcat client\n\n$port = 9040;\n$sock = IO::Socket::INET-&gt;new( PeerAddr =&gt; 'localhost',\n                               PeerPort =&gt; $port,\n                               LocalPort =&gt; 9000,               \n                               Proto     =&gt; 'tcp')\n                               or die \"\\nunable to bind on localhost : $port...\";\n\nwhile ($sock){\n    #Get the clients IP and port number \n        $client_IP = $sock -&gt; peerhost();\n    #$client_IP = 'localhost';\n        $client_port = $sock -&gt; peerport();\n        print \"\\n Connected to $client_IP $client_port \\n\";\n\n    #Reading from socket\n    $data;  \n    $sock -&gt;recv($data, 1024);\n    print $data;\n\n    #writing to  socket\n    $sock-&gt;autoflush(1);\n    $response = \"response: OK recvd\\n\" ;\n    $sock-&gt;send($response);\n    shutdown($sock,1);\n\n}\n\n$sock -&gt; close();\n</code></pre>\n\n<p>The server is as follows: </p>\n\n<pre><code>#!/usr/bin/perl \nuse IO::Socket;\nuse Getopt::Long;\n\n#$IP_addr = $ARGV[0];\n#$tgt_port = $ARG[1];\n\n#netcat server\n$port = 9040;\n$sock = IO::Socket::INET-&gt;new( Listen    =&gt; 1,\n                               LocalAddr =&gt; 'localhost',\n                               LocalPort =&gt; $port,\n                               Proto     =&gt; 'tcp')\n                               or die \"\\nunable to bind on localhost : $port...\";\n\nwhile ($sock){\n    print \"\\nListening on port $port ...\\n\";\n        $sock  = $sock -&gt; accept();\n    #Get the clients IP and port number \n        $client_IP = $sock-&gt;peerhost();\n        $client_port = $sock-&gt;peerport();\n        print \"\\n Connected from $client_IP $client_port \\n\";\n\n    #Reading from socket\n    $data -&gt;recv($sock, 1024);\n    print $data;\n\n    #writing to  socket\n    $sock-&gt;autoflush(1);\n    $response = \"oohlalala\" ;\n    $sock -&gt; send($response);\n    shutdown($sock, 1);\n\n}\n\n$sock -&gt; close();\n</code></pre>\n"}, {"tags": ["perl", "pass-by-reference"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519071642, "post_id": 48854217, "comment_id": 84751024, "body": "Your &quot;more concise&quot; version is also much more unreadable. Doing that to your code has no advantages at all, so don&#39;t."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519118786, "post_id": 48854217, "comment_id": 84767670, "body": "@Borodin, thanks. I will have this point in mind for the future."}], "answers": [{"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1518978166, "post_id": 48854440, "comment_id": 84713514, "body": "Thanks for the explanation. I really don&#39;t want to use dependencies."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 1, "creation_date": 1518978211, "post_id": 48854440, "comment_id": 84713533, "body": "<code>List::Util</code> is a core module"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 1, "creation_date": 1518978450, "post_id": 48854440, "comment_id": 84713624, "body": "Yeah, right, it&#39;s in the core since 5.007003. Thanks again!"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1518974363, "creation_date": 1518974363, "answer_id": 48854440, "question_id": 48854217, "link": "https://stackoverflow.com/questions/48854217/accessing-array-when-passed-to-subroutine-as-reference-in-perl/48854440#48854440", "title": "Accessing array when passed to subroutine as reference in Perl", "body": "<p>Prefix dereference operators as in <code>@$arr</code> or <code>@$_[0]</code> bind very tightly \u2013 so the latter is parsed as <code>@{ $_ }[0]</code>. This is an <em>array slice</em>, which uses <code>$_</code> as an array reference. This is unrelated to the <code>@_</code> array. A slice of one element would usually be written as a scalar access <code>${ $_ }[0]</code> or <code>$_-&gt;[0]</code>.</p>\n\n<p>Because prefix dereference operators parse confusingly, I recommend the postfix dereference syntax that is available since Perl 5.24. Then <code>@{ $_[0] }</code> can be written as <code>$_[0]-&gt;@*</code>.</p>\n\n<p>Note that code should be <em>clear</em>, which is not necessarily the same as <em>short</em>. Naming your arguments instead of accessing the <code>@_</code> array directly is much more maintainable. I only access <code>@_</code> directly if there's only one argument (e.g. in an accessor method <code>sub foo { shift-&gt;{foo} }</code>) or when I benchmarked the code and have determined that avoiding a copy will save me half a microsecond that I really need. (Doesn't happen very often.)</p>\n\n<p>If the goal of your function is a boolean check rather than selecting all matching elements, I'd write it like this:</p>\n\n<pre><code>use List::Util 'any';\n\nsub array_contains {\n  my ($arr, $search, $is_strict) = @_;\n  return any { $_ eq $search } @$arr if $is_strict;\n  return any { -1 != index $_, $search } @$arr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 4, "last_activity_date": 1518974792, "last_edit_date": 1518974792, "creation_date": 1518974430, "answer_id": 48854452, "question_id": 48854217, "link": "https://stackoverflow.com/questions/48854217/accessing-array-when-passed-to-subroutine-as-reference-in-perl/48854452#48854452", "title": "Accessing array when passed to subroutine as reference in Perl", "body": "<p>The way to think about this is that the dereferencing \"operator\" has higher \"precedence\" than the array indexing (using quotes here because dereferencing isn't officially part of Perl's <a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow noreferrer\">operator precedence table</a>).</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $foo = ['arrayref elem 0','arrayref elem 1'];\nmy @foo = (['array of arrayrefs elem 0',' one']);\n\nprint  @$foo[0] , \"\\n\";  # prints \"arrayref elem 0\"\n\n# is the same as\nprint @{$foo}[0], \"\\n\";  # prints \"arrayref elem 0\"\n\n# is NOT the same as\nprint @{$foo[0]}, \"\\n\";  # prints \"array of arrayrefs elem 0 one\"\n</code></pre>\n\n<p>That is, in the first two examples, first the array reference stored in <code>$foo</code> is dereferenced as an array, and <em>then</em> that array is indexed with <code>[0]</code> (although that's using <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slice</a> syntax, <code>$$foo[0]</code> and <code>${$foo}[0]</code> would make more sense here). Only in the last example is the array <code>@foo</code> element <code>[0]</code> accessed <em>first</em>, and <em>then</em> that element is dereferenced as an array, resulting in all the elements of that array being printed. The behavior is the same for <code>$_</code>/<code>@_</code>.</p>\n\n<p>See also <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">Using References in perlref</a>: the <code>@{...}</code> style of dereferencing always works, while the braces can <em>only</em> be omitted in simple cases, such as your <code>@$arr_ref</code>.</p>\n\n<p>If you have Perl 5.24 or newer, you can make use of the <a href=\"http://perldoc.perl.org/perlref.html#Postfix-Dereference-Syntax\" rel=\"nofollow noreferrer\">Postfix Dereference Syntax</a> (it was <a href=\"https://metacpan.org/pod/experimental\" rel=\"nofollow noreferrer\">experimental</a> in 5.20 and 5.22):</p>\n\n<pre><code>use 5.024;\nmy @bar = (['Hello,',' World!']);\nprint $bar[0]-&gt;@*, \"\\n\";  # prints \"Hello, World!\"\n</code></pre>\n"}], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 48854452, "answer_count": 2, "score": 1, "last_activity_date": 1518974792, "creation_date": 1518972991, "question_id": 48854217, "link": "https://stackoverflow.com/questions/48854217/accessing-array-when-passed-to-subroutine-as-reference-in-perl", "title": "Accessing array when passed to subroutine as reference in Perl", "body": "<p>I have misunderstanding, in using curly brackets in Perl with references. \nI've built a basic function to check if array contains a value.</p>\n\n<p><strong>Example 1:</strong></p>\n\n<pre><code>sub array_contains\n{\n    my ($arr_ref, $search, $strict) = @_;\n    if ($strict) {\n        return (grep {$_ eq $search} @$arr_ref);\n    } else {\n        return grep {index($_, $search) != -1} @$arr_ref;\n    }\n}\n</code></pre>\n\n<p>Later, I wanted to make it look more concise.</p>\n\n<p><strong>Example 2:</strong></p>\n\n<pre><code>sub array_contains\n{\n    return (!$_[2] ? \n       (grep {$_ eq $_[1]} @{$_[0]}) : \n       (grep {index($_, $_[1]) != -1} @{$_[0]})\n    );\n}\n</code></pre>\n\n<p>Then, it took me some time to realize that I can't use <code>@$_[0]</code> for some reason, like in the first example, and have to go with <code>@{$_[0]}</code>. </p>\n\n<hr>\n\n<p>Could <em>Perl</em> experts please explain, why does it have to be on the second example <code>@{$_[0]}</code> and can't be <code>@$_[0]</code>, just like in the first example, where I used <code>@$arr_ref</code>. Does it have to do anything with assigning <code>@_</code> to the locally scoped variables?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1518876313, "post_id": 48842045, "comment_id": 84688238, "body": "Since <code>$_</code> is inside the foreach loop, it is no more a line of your file but a value of your array. In short <code>$_ =~ $line</code> is the same than <code>$line =~ $line</code>. Instead write: <code>while ($line = &lt;$pipe&gt;) { foreach  ( @luns ) { if ($line =~ $_) {</code>"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1518876713, "post_id": 48842045, "comment_id": 84688373, "body": "It&#39;s also possible to use the condition <code>index($line, $_) != -1</code> in place of <code>$line =~ $_</code>."}, {"owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1518877604, "post_id": 48842045, "comment_id": 84688703, "body": "@Casimir et Hippolyte see my update."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1518956519, "post_id": 48842927, "comment_id": 84706554, "body": "<i>&quot;You can&#39;t do it with only two nested loops because the records in your file aren&#39;t sorted&quot;</i> However, the contents of <code>@luns</code> <i>are</i> sorted, so the output will also be sorted if you iterate over the array in the outermost loop. There must be a way of scanning the whole of the input data for each LUN, and the output from the <code>ldm</code> command should be small enough to read it into an array."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1518950019, "last_edit_date": 1518950019, "creation_date": 1518881666, "answer_id": 48842927, "question_id": 48842045, "link": "https://stackoverflow.com/questions/48842045/output-is-not-in-numerical-order/48842927#48842927", "title": "Output is not in numerical order", "body": "<p>You can't do it with only two nested loops because the records in your file aren't sorted. To solve the problem, you have to store the matching lines in an array and to sort this array. A trick to do that easily consists to concatenate the number at the beginning of each line. Then  you only have to use a string comparison to sort the lines:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @luns = qw/\n393645\n393646\n393730\n393731\n393732\n393733\n414632\n433944\n/;\n\nmy @result;\n\nwhile (my $line = &lt;DATA&gt;) {\n    for (@luns) {\n        push @result, sprintf(\"%07d%s\", $_, $line) if ($line =~ $_);\n    }\n}\n\n@result = map { substr $_, 7 } sort @result;\n\nprint join '', @result;\n\n__DATA__\nprimary-vds0     primary                                                  \n/dev/dsk/c0txxxxxx393731d0s6\n/dev/dsk/c0txxxxxx414632d0s6\n/dev/dsk/c0txxxxxx393732d0s6\n/dev/dsk/c0txxxxxx393733d0s6\n/dev/dsk/c0txxxxxx393645d0s6\n/dev/dsk/c0txxxxxx393646d0s6\n/dev/dsk/c0txxxxxx393730d0s6\n/dev/dsk/c0txxxxxx433944d0s6\n</code></pre>\n\n<p>Depending of the numbers sizes, you have to eventually change the number of leading zeros in the formatted string and the start offset in the <code>substr</code> function.</p>\n\n<hr>\n\n<p>You can also do the same but this time with a numerical comparison:</p>\n\n<pre><code>my @result;\n\nwhile (my $line = &lt;DATA&gt;) {\n    for (@luns) {\n        push @result, [ $_, $line ] if ($line =~ $_);\n    }\n}\n\n@result = map { $_-&gt;[1] } sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] } @result;\n\nprint join '', @result;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1518953169, "last_edit_date": 1518953169, "creation_date": 1518952784, "answer_id": 48851056, "question_id": 48842045, "link": "https://stackoverflow.com/questions/48842045/output-is-not-in-numerical-order/48851056#48851056", "title": "Output is not in numerical order", "body": "<p>The simplest approach is to read all of the output from the command into memory. That way it can be searched multiple times to see if any of the <code>@luns</code> array elements appear in the output</p>\n\n<p>If <code>@luns</code> is pre-sorted then the output is in the same order. I've added a <code>sort</code> call to ensure that they are, but if the numbers are not always six digits long then you must also pad them to the correct length using leading zeroes; otherwise shorter LUNs that are substrings of longer ones will raise a false positive</p>\n\n<p>Here, I've added a test to make sure that, if a LUN appears in the command output then it cannot be preceded or followed by another digit. That applies to your sample data but I can't be sure whether it will be generally true</p>\n\n<p>If you have a later version of <code>List::Util</code> then you can use <code>any</code> in place of <code>first</code></p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse List::Util 'first';\n\nmy @luns = sort { $a &lt;=&gt;  $b } qw/\n    393645\n    393646\n    393730\n    393731\n    393732\n    393733\n    414632\n    433944\n/;\n\n\nmy @data = &lt;DATA&gt;;\nchomp @data;\n\nfor my $lun ( @luns ) {\n\n    say $lun if first { /(?&lt;!\\d)$lun(?!\\d)/ } @data;\n}\n\n\n__DATA__\nprimary-vds0     primary                                                  \n/dev/dsk/c0txxxxxx393731d0s6\n/dev/dsk/c0txxxxxx414632d0s6\n/dev/dsk/c0txxxxxx393732d0s6\n/dev/dsk/c0txxxxxx393733d0s6\n/dev/dsk/c0txxxxxx393645d0s6\n/dev/dsk/c0txxxxxx393646d0s6\n/dev/dsk/c0txxxxxx393730d0s6\n/dev/dsk/c0txxxxxx433944d0s6\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>393645\n393646\n393730\n393731\n393732\n393733\n414632\n433944\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518953169, "creation_date": 1518875610, "last_edit_date": 1518950963, "question_id": 48842045, "link": "https://stackoverflow.com/questions/48842045/output-is-not-in-numerical-order", "title": "Output is not in numerical order", "body": "<p>My Perl code is not  returning the output in numerical order from the array.</p>\n\n<p>I have this array of numbers</p>\n\n<pre><code>my @luns = qw/\n    393645\n    393646\n    393730\n    393731\n    393732\n    393733\n    414632\n    433944\n/;\n</code></pre>\n\n<p>I want to execute a command and read the output through a pipe in Perl so I can iterate over the <code>@luns</code> array to search for specific values.</p>\n\n<p>Here is the output of the command which is read through the pipe</p>\n\n<pre><code>primary-vds0     primary                                                  \n/dev/dsk/c0txxxxxx393731d0s6\n/dev/dsk/c0txxxxxx414632d0s6\n/dev/dsk/c0txxxxxx393732d0s6\n/dev/dsk/c0txxxxxx393733d0s6\n/dev/dsk/c0txxxxxx393645d0s6\n/dev/dsk/c0txxxxxx393646d0s6\n/dev/dsk/c0txxxxxx393730d0s6\n/dev/dsk/c0txxxxxx433944d0s6\n</code></pre>\n\n<p>Here is my script.</p>\n\n<pre><code>#!/bin/perl -w\nuse strict;\n\nmy @luns = qw/\n    393645\n    393646\n    393730\n    393731\n    393732\n    393733\n    414632\n    433944\n/;\n\nopen(my $pipe, \"ldm ls-services |\") or die \"Cannot open process: $!\";\n\nmy $line;\n\nwhile ( &lt;$pipe&gt; ) {\n\n    foreach  $line ( @luns ) {\n\n        if ( $_ =~ $line ) {\n\n            print $_;\n        }\n    }\n}\n</code></pre>\n\n<h3>UPDATE</h3>\n\n<p>I have tried the suggested comment but it's not returning numerically.</p>\n\n<pre><code>while ( $line = &lt;$pipe&gt; ) {\n\n    foreach ( @luns ) {\n\n        if ($line =~ $_) {\n\n            print \"$_\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>OUTPUT from comment is:</p>\n\n<pre><code>393731\n414632\n393732\n393733\n393645\n393646\n393730\n433944\n</code></pre>\n"}, {"tags": ["perl", "freetds", "unixodbc"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1518869308, "post_id": 48839861, "comment_id": 84686243, "body": "The <code>Driver</code> entry in your config files is <code>&#47;usr&#47;local&#47;lib&#47;libtdsodbc.so</code>, but <code>DBI</code> is saying that it can&#39;t find it. Are you certain the file is there? Does your perl process have sufficient privileges to open it? <code>.so</code> files have traditionally had privileges of 0755, but 0644 should be adequate."}, {"owner": {"reputation": 41, "user_id": 5935225, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gVsL-U2jq7E/AAAAAAAAAAI/AAAAAAAAARg/KFDe8LEd0xY/photo.jpg?sz=128", "display_name": "Binayak Chatterjee", "link": "https://stackoverflow.com/users/5935225/binayak-chatterjee"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1518877111, "post_id": 48839861, "comment_id": 84688527, "body": "Yes it has a 755 permission set"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1518921843, "post_id": 48839861, "comment_id": 84699839, "body": "<a href=\"https://stackoverflow.com/questions/12031897/missing-libtdsodbc-so-in-freetds-dev-mssql-on-ubuntu\" title=\"missing libtdsodbc so in freetds dev mssql on ubuntu\">stackoverflow.com/questions/12031897/&hellip;</a>"}], "owner": {"reputation": 41, "user_id": 5935225, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gVsL-U2jq7E/AAAAAAAAAAI/AAAAAAAAARg/KFDe8LEd0xY/photo.jpg?sz=128", "display_name": "Binayak Chatterjee", "link": "https://stackoverflow.com/users/5935225/binayak-chatterjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1459, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518859903, "creation_date": 1518859903, "question_id": 48839861, "link": "https://stackoverflow.com/questions/48839861/isql-and-tsql-is-connecting-to-sql-server-but-when-connecting-with-perl-odbc-it", "title": "isql and tsql is connecting to sql server but when connecting with perl ODBC it&#39;s getting failed", "body": "<p>I am trying to run connect to a MSSQL server from a RHEL 5.5 server with FreeTDS and unixODBC.</p>\n\n<p>Using tsql i can connect to the server with</p>\n\n<pre><code>tsql -S mssqltest -U &lt;username&gt; -P &lt;password&gt;\n</code></pre>\n\n<p>It's getting connected successfully</p>\n\n<pre><code>isql -v mssqltest 'username' 'password' -b -q\n</code></pre>\n\n<p>Also connects without any problem</p>\n\n<p>But in perl I get a error message as follows</p>\n\n<pre><code>DBI connect('mssqltest',&lt;username&gt;,...) failed: [unixODBC][Driver Manager]Can't open lib '/usr/local/lib/libtdsodbc.so' : file not found (SQL-01000) at test.pl line 14\nCan't connect to DBI:ODBC:mssqltest: [unixODBC][Driver Manager]Can't open lib '/usr/local/lib/libtdsodbc.so' : file not found (SQL-01000) at test.pl line 14.\n</code></pre>\n\n<p>I tried using FreeTDS as ODBC Driver that also gives similar error also I tried using servername instead of server_ip, but the error continues</p>\n\n<pre><code>DBI connect('Driver=FreeTDS;Server=&lt;server_ip&gt;',&lt;username&gt;,...) failed: [unixODBC][Driver Manager]Can't open lib '/usr/local/lib/libtdsodbc.so' : file not found (SQL-01000) at test.pl line 14\nCan't connect to DBI:ODBC:Driver=FreeTDS;Server=&lt;server_ip&gt;: [unixODBC][Driver Manager]Can't open lib '/usr/local/lib/libtdsodbc.so' : file not found (SQL-01000) at test.pl line 14.\n</code></pre>\n\n<p>my perl code</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nuse DBI;\n\n# Replace datasource_name with the name of your data source.\n# Replace database_username and database_password\n# with the SQL Server database username and password.\nmy $data_source = q/DBI:ODBC:mssqltest/;\nmy $user = q/&lt;username&gt;/;\nmy $password = q/&lt;password&gt;/;\n\n# Connect to the data source and get a handle for that connection.\nmy $dbh = DBI-&gt;connect($data_source, $user, $password)\n    or die \"Can't connect to $data_source: $DBI::errstr\";\n\n# This query generates a result set with one record in it.\nmy $sql = \"SELECT TOP 3 * FROM tablename\";\n\n# Prepare the statement.\nmy $sth = $dbh-&gt;prepare($sql)\n    or die \"Can't prepare statement: $DBI::errstr\";\n\n# Execute the statement.\n$sth-&gt;execute();\n\n# Print the column name.\nprint \"$sth-&gt;{NAME}-&gt;[0]\\n\";\n\n# Fetch and display the result set value.\nwhile ( my @row = $sth-&gt;fetchrow_array ) {\n   print \"@row\\n\";\n}\n\n# Disconnect the database from the database handle.\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>My config files are:</p>\n\n<p>FreTDS/odbc.ini</p>\n\n<pre><code>;\n;  odbc.ini\n;\n[ODBC Data Sources]\nJDBC = Sybase JDBC Server\n\n[JDBC]\nDriver          = /usr/local/lib/libtdsodbc.so\nDescription     = Sybase JDBC Server\nTrace           = No\nServername      = JDBC\nDatabase        = pubs2\nUID             = guest\n\n[Default]\nDriver          = /usr/local/lib/libtdsodbc.so\n</code></pre>\n\n<p>odbc.ini</p>\n\n<pre><code>[ODBC Data Sources]\nTS = FreeTDS\n\n[TS]\nDriver = FreeTDS\nDescription = ODBC to SQLServer via FreeTDS\nTrace = No\nServername = sql-server\nDatabase = RKDB\n\n[mssqltest]\nDescription     = MS SQL connection to mssqltest database\nDriver          = FreeTDS\nDatabase        = RKDB\nServer          = &lt;server_ip&gt;\nUserName        = &lt;username&gt;\nPassword        = &lt;password&gt;\nTrace           = Yes\nPort            = 1754\n</code></pre>\n\n<p>obcinst.ini</p>\n\n<pre><code>[FreeTDS]\nDescription=TDS driver (Sybase/MS SQL)\nDriver=/usr/local/lib/libtdsodbc.so\nUsageCount=2\n</code></pre>\n\n<p>freetds-dev.0.99.761/freetds.conf</p>\n\n<pre><code>#   $Id: freetds.conf,v 1.12 2007-12-25 06:02:36 jklowden Exp $\n#\n# This file is installed by FreeTDS if no file by the same\n# name is found in the installation directory.\n#\n# For information about the layout of this file and its settings,\n# see the freetds.conf manpage \"man freetds.conf\".\n\n# Global settings are overridden by those in a database\n# server specific section\n[global]\n        # TDS protocol version\n        tds version = auto\n\n        # Whether to write a TDSDUMP file for diagnostic purposes\n        # (setting this to /tmp is insecure on a multi-user system)\n;       dump file = /tmp/freetds.log\n;       debug flags = 0xffff\n\n        # Command and connection timeouts\n;       timeout = 10\n;       connect timeout = 10\n\n        # If you get out-of-memory errors, it may mean that your client\n        # is trying to allocate a huge buffer for a TEXT field.\n        # Try setting 'text size' to a more reasonable limit\n        text size = 64512\n\n# A typical Sybase server\n[egServer50]\n        host = symachine.domain.com\n        port = 5000\n        tds version = 5.0\n\n# A typical Microsoft server\n[egServer70]\n        host = ntmachine.domain.com\n        port = 1433\n        tds version = 7.0\n\n[mssqltest]\n        host = &lt;server_ip&gt;\n        port = 1754\n        tds version = 8.0\n</code></pre>\n\n<p>/usr/local/etc/freetds.conf</p>\n\n<pre><code>#   $Id: freetds.conf,v 1.12 2007-12-25 06:02:36 jklowden Exp $\n#\n# This file is installed by FreeTDS if no file by the same\n# name is found in the installation directory.\n#\n# For information about the layout of this file and its settings,\n# see the freetds.conf manpage \"man freetds.conf\".\n\n# Global settings are overridden by those in a database\n# server specific section\n[global]\n        # TDS protocol version\n        tds version = auto\n\n        # Whether to write a TDSDUMP file for diagnostic purposes\n        # (setting this to /tmp is insecure on a multi-user system)\n;       dump file = /tmp/freetds.log\n;       debug flags = 0xffff\n\n        # Command and connection timeouts\n;       timeout = 10\n;       connect timeout = 10\n\n        # If you get out-of-memory errors, it may mean that your client\n        # is trying to allocate a huge buffer for a TEXT field.\n        # Try setting 'text size' to a more reasonable limit\n        text size = 64512\n\n# A typical Sybase server\n[egServer50]\n        host = symachine.domain.com\n        port = 5000\n        tds version = 5.0\n\n# A typical Microsoft server\n[sql-server]\n        host = TH-SSRS-DB\n   InstanceName = RKSSRSDB\n        #port = 1754\n        tds version = 8.0\n\nclient charset = UTF-8\n\n[mssqltest]\n        host = &lt;server_ip&gt;\n        port = 1754\n        tds version = 8.0\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["mysql", "perl", "email", "cgi", "emoji"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518844723, "post_id": 48838117, "comment_id": 84680834, "body": "That&#39;s not a valid subject. You need to RFC1342 encode that."}, {"owner": {"reputation": 63, "user_id": 1807873, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a44634cf95f8d82afd0e6b1c7a4f43a3?s=128&d=identicon&r=PG", "display_name": "topedge", "link": "https://stackoverflow.com/users/1807873/topedge"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518857021, "post_id": 48838117, "comment_id": 84683180, "body": "Please explain how I would do that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1518858550, "post_id": 48838117, "comment_id": 84683487, "body": "@tadman while that might be true, it&#39;s not what&#39;s going wrong here. Not yet, at least."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1518858703, "post_id": 48838117, "comment_id": 84683523, "body": "Can you please <a href=\"https://stackoverflow.com/posts/48838117/edit\">edit</a> and give more details about what you are trying to do? I think you are trying to send an email, but I&#39;m not sure. Please include the top of your program (where it says <code>use strict</code> and <code>use warnings</code>), and at least the part with <code>open MAIL</code> (which should really be <code>open my $fh, ...</code>), both with a few lines around them. It would also be interesting to see the <code>SHOW CREATE TABLE</code> of the database table you are using, and possibly an example row. Encoding is not trivial if you are not familiar with it, and many things can go wrong."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518873802, "post_id": 48838117, "comment_id": 84687453, "body": "@tadman: That is complete nonsense. RFC-1342 is titled <i>&quot;Representation of Non-ASCII Text in Internet Message Headers&quot;</i> but the OP&#39;s issue has nothing to do with the internet at all. This is purely about static character encoding, and the solution lies only in making sure that every component of the dialogue is working with the same encoding. If you were trying to impress someone then you have failed badly."}, {"owner": {"reputation": 63, "user_id": 1807873, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a44634cf95f8d82afd0e6b1c7a4f43a3?s=128&d=identicon&r=PG", "display_name": "topedge", "link": "https://stackoverflow.com/users/1807873/topedge"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518888494, "post_id": 48838117, "comment_id": 84692250, "body": "@tadman Sorry, yes I am trying to email the emoji in the subject line.  It will email perfectly as an emoji if I hard code it in to the subject like so:  <code>&quot;Subject: \\xf0\\x9f\\x98\\x80\\n&quot;;</code> but when I try to pass the emoji in a variable from the database it is received in my email account as simply \\xf0\\x9f\\x98\\x80"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519068793, "post_id": 48838117, "comment_id": 84749787, "body": "@Borodin This is an email message, so RFC1342 absolutely applies. You can&#39;t slam arbitrary UTF-8 in your &quot;Subject&quot; line. It must be 7-bit ASCII with the proper <code>=utf8=...</code> encoding or most email clients and many email servers will flat-out reject it. Solving the UTF8 problem is only half the issue."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1519129603, "post_id": 48838117, "comment_id": 84775074, "body": "@tadman: Ah, I misunderstood the RFC. <i>Internet Message</i> says HTTP, SMTP etc. messages and not email messages. Also, subsequent page headers refer to <i>Non-ASCII Mail Headers</i> which is a different thing. Note that RFC-1342 has been obsoleted twice, and the latest document seems to be <a href=\"https://tools.ietf.org/html/rfc2047\" rel=\"nofollow noreferrer\">RFC-2047</a>. Finally, a lot depends on what command-line tool is at the other end of the <code>MAIL</code> file handle what must be sent to it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519146806, "post_id": 48838117, "comment_id": 84786676, "body": "@Borodin It&#39;s referred to as RFC1342 encoding, as the basic principle hasn&#39;t changed, but as with most, like the venerable RFC822, now RFC5322, it&#39;s understood that it means &quot;latest revision of X&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519129825, "post_id": 48840886, "comment_id": 84775216, "body": "@topedge: Please would you comment on whether my answer has been useful and how you applied it. I doubt that this is the complete solution."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1565980709, "post_id": 48840886, "comment_id": 101525254, "body": "It was useful to me. However, I don&#39;t understand why a MySQL search for &quot;dog&quot; doesn&#39;t match things like &quot;d&#246;g&quot;."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1518873426, "last_edit_date": 1518873426, "creation_date": 1518867806, "answer_id": 48840886, "question_id": 48838117, "link": "https://stackoverflow.com/questions/48838117/cgi-script-having-trouble-sending-emojis-characters-from-database/48840886#48840886", "title": "CGI script having trouble sending emojis characters from database", "body": "<p>It seems most likely that you have added the value to the database wrongly.</p>\n\n<p>If you use Perl code and write the string <code>'\\xf0\\x9f\\x98\\x80'</code> to the database (note the single quotes) then you will get exactly the symptoms you describe. Your database will contain the sixteen-character ASCII string <code>\\xf0\\x9f\\x98\\x80</code> and it will be displayed as such.</p>\n\n<p>You shouldn't be involved with the UTF-8  encoded bytes; it is far better to specify the Unicode code point either by name or number</p>\n\n<p>All of these produce the same Perl UTF-8-encoded string</p>\n\n<pre><code>$s = \"\\N{U+1F600}\";\n$s = \"\\N{GRINNING FACE}\";\n$s = \"\\x{1F600}\";\n</code></pre>\n\n<p>The corresponding  encoded bytes are irrelevant to the programmer, but if you must you can use the <code>Encode</code> module like this</p>\n\n<pre><code>use Encode 'decode_utf8';\n\n$s = decode_utf8 \"\\xf0\\x9f\\x98\\x80\";\n</code></pre>\n\n<p>Another way is to enter the character directly into your code. You will need <code>use utf8</code> to indicate to the compiler that the source contains non-ASCII UTF-8-encoded characters, like this</p>\n\n<pre><code>use utf8;\n\n$s = \"\ud83d\ude00\";\n</code></pre>\n\n<p>All of these assignments to <code>$s</code> will produce exactly the same result, and the values will compare as being equal using <code>eq</code></p>\n\n<p>On the database side you need a MySQL column with a <em>four-byte UTF-8 character set</em>, for instance</p>\n\n<pre><code>column VARCHAR(50) CHARACTER SET utf8mb4\n</code></pre>\n\n<p>Note that the character set <em>must</em> be <code>utf8mb4</code> as if you use the earlier <code>utf8</code> then you would be restricted to three-byte encoding, whereas emoji characters are all four bytes</p>\n"}], "owner": {"reputation": 63, "user_id": 1807873, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a44634cf95f8d82afd0e6b1c7a4f43a3?s=128&d=identicon&r=PG", "display_name": "topedge", "link": "https://stackoverflow.com/users/1807873/topedge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 48840886, "answer_count": 1, "score": -2, "last_activity_date": 1518873426, "creation_date": 1518844539, "last_edit_date": 1518866226, "question_id": 48838117, "link": "https://stackoverflow.com/questions/48838117/cgi-script-having-trouble-sending-emojis-characters-from-database", "title": "CGI script having trouble sending emojis characters from database", "body": "<p>I am storing emojis in a  MySQL database expressed in UTF8 Bytes, like <code>\"\\xf0\\x9f\\x98\\x80\"</code>, which is the Unicode character <code>U+1F600 GRINNING FACE</code></p>\n\n<p>It is fine if I copy and paste it in and test it like this</p>\n\n<pre><code>print MAIL \"Subject: \\xf0\\x9f\\x98\\x80\\n\";\n</code></pre>\n\n<p>It works and sends me the emoji.</p>\n\n<p>But if I tell the script to get it from the database and plug it in like this:</p>\n\n<pre><code>print MAIL \"Subject: $subject\\n\";\n</code></pre>\n\n<p>It will give me the subject: \\xf0\\x9f\\x98\\x80</p>\n\n<p>What do I need to do?  I thought if I was storing it in bytes it would see it as plain text and it would work.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1518837818, "post_id": 48837534, "comment_id": 84679846, "body": "Have you tried removing the <code>-i.old</code> from the first line?"}, {"owner": {"reputation": 3418, "user_id": 738762, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0ef9a1ef193431ba6a0e2fc5c71ab22d?s=128&d=identicon&r=PG", "display_name": "nomen", "link": "https://stackoverflow.com/users/738762/nomen"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1518841561, "post_id": 48837534, "comment_id": 84680429, "body": "@GrantMcLean: yes, per your answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1518940101, "post_id": 48837534, "comment_id": 84702654, "body": "I copy-pasted the code in your update and it works with the sample text you provide (copy-pasted into a file). Perhaps other bits in your real input change how the regex works?"}], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1518838571, "creation_date": 1518838571, "answer_id": 48837641, "question_id": 48837534, "link": "https://stackoverflow.com/questions/48837534/pathtiny-and-regular-expression-substitution-produces-empty-file/48837641#48837641", "title": "Path::Tiny and regular expression substitution produces empty file", "body": "<p>The <a href=\"http://perldoc.perl.org/perlrun.html#*-i*[_extension_]\" rel=\"nofollow noreferrer\"><code>-i</code> command line option</a> on the first line of the script is probably causing this problem.  Try deleting that.</p>\n\n<p>When invoked with <code>perl -i</code>, Perl wraps some code around your script to loop over each file named on the command-line; read each line into <code>$_</code> in turn; invoke your script (once for each line); collect whatever output your script prints to STDOUT and write it into a temporary file; then after the last line, rename the temporary file over the top of the original file.  This is called an \"in-place edit\".</p>\n\n<p>This is particularly handy for 1-liners, because you don't need to write the boilerplate code to read the input from a file and write the output to a file - you just write the processing code.  In your case, you <em>have</em> written that boilerplate (using Path::Tiny) so both Perl's <code>-i</code> implementation <em>and</em> your script are reading the input file and writing the output file.  Since your script does not output anything to STDOUT, <code>-i</code> will end up producing an empty file.</p>\n"}, {"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1518852544, "last_edit_date": 1518852544, "creation_date": 1518838712, "answer_id": 48837652, "question_id": 48837534, "link": "https://stackoverflow.com/questions/48837534/pathtiny-and-regular-expression-substitution-produces-empty-file/48837652#48837652", "title": "Path::Tiny and regular expression substitution produces empty file", "body": "<p>You don't want that <code>-i</code> flag and Path::Tiny at the same time. <code>-i</code> is putting perl into a mode where it's trying to open and replace the file <em>for</em> you. It's not compatible with opening the file and rewriting it yourself.</p>\n\n<p>One option is simply to remove the <code>-i</code> flag; your code should work as-is (but it won't produce a backup file, and the file replace won't be atomic).</p>\n\n<p>The other is to keep the <code>-i</code> flag, but replace the body of your code with</p>\n\n<pre><code>use open ':encoding(UTF-8)';\nwhile (&lt;&gt;) {\n    s/chapter/addchap/g;\n    print;\n}\n</code></pre>\n\n<p>(eliminating all of the Path::Tiny stuff). Perl will add the rest implicitly.</p>\n\n<p>This is equivalent to the one-liner</p>\n\n<pre><code>perl -CSD -i.old -pe 's/chapter/addchap/g' somefile\n</code></pre>\n"}], "owner": {"reputation": 3418, "user_id": 738762, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0ef9a1ef193431ba6a0e2fc5c71ab22d?s=128&d=identicon&r=PG", "display_name": "nomen", "link": "https://stackoverflow.com/users/738762/nomen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1518852544, "creation_date": 1518837315, "last_edit_date": 1518846326, "question_id": 48837534, "link": "https://stackoverflow.com/questions/48837534/pathtiny-and-regular-expression-substitution-produces-empty-file", "title": "Path::Tiny and regular expression substitution produces empty file", "body": "<p>I am having the darnedest time with a bug.  I recently asked <a href=\"https://stackoverflow.com/questions/48509953/perl-regular-expression-for-extracting-multi-line-latex-chapter-name\">Perl Regular Expression for extracting multi-line LaTeX chapter name</a>, and followed the advice to use a Perl regular expression tester until I'm satisfied with my regular expression.  I committed my code and was happy.</p>\n\n<p>But now, when I run the program:</p>\n\n<pre><code>#!/usr/bin/perl -i.old     # In-place edit, backup as '.old'\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\n\nmy $filename = shift or die \"Usage: $0 FILENAME\";\nmy $content = path($filename)-&gt;slurp_utf8;\n\n$content =~ s/chapter/addchap/g;\n\npath($filename)-&gt;spew_utf8($content);\n</code></pre>\n\n<p>I end up with an empty file.  It is very strange -- variations of this substitution (like <code>s/\\\\chapter/\\\\addchap/g;</code>) fail with an empty file, but dissimilar substitutions, like <code>$content =~ s/ //g;</code> don't.  Even stranger, the <code>perl -i</code> flag isn't being respected either.  What the heck is going on?</p>\n\n<p>Here is some sample input:</p>\n\n<pre><code>\\chapter{\\texorpdfstring{{I} {Into the\nPrimitive}}{I Into the Primitive}}\n\nBuck did not read the newspapers, or he would have known that trouble\nwas brewing, not alone for himself,\n</code></pre>\n\n<hr />\n\n<p>I updated my code, per the answers, but I am still getting empty files.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\n\nmy $filename = shift or die \"Usage: $0 FILENAME\";\nmy $content = path($filename)-&gt;slurp_utf8;\n\n$content =~ s/\\\\chapter/\\\\addchap/gs;\n\npath($filename)-&gt;spew_utf8($content);\n</code></pre>\n\n<p>The thing I find really confusing is that some substitutions \"work\", like:</p>\n\n<pre><code>$content =~ s/the/thee/g;\n</code></pre>\n\n<p>but even</p>\n\n<pre><code>$content =~ s/ch//g;\n</code></pre>\n\n<p>fails with an empty file.</p>\n"}, {"tags": ["perl", "terminal"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1518830841, "post_id": 48837015, "comment_id": 84678881, "body": "It works for me. Is your <code>$TERM</code> environment variable set correctly?"}, {"owner": {"reputation": 172, "user_id": 1936237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2710ac7a11ca4fec1547f82ccf8c9f5f?s=128&d=identicon&r=PG&f=1", "display_name": "k.stm", "link": "https://stackoverflow.com/users/1936237/k-stm"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1518830984, "post_id": 48837015, "comment_id": 84678895, "body": "@KeithThompson Yes, it\u2019s set to <code>rxvt-unicode-256color</code> which I believe should be correct for <code>rxvt-unicode</code>. So this probably is indeed a Linux question, right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1518831617, "post_id": 48837015, "comment_id": 84678972, "body": "&quot;This package is just a front end to some other packages. It&#39;s a stub to set up a common interface to the various ReadLine implementations found on CPAN (under the C&lt;Term::ReadLine::*&gt; namespace).&quot;  You&#39;re probably using a different backend then before. Do you have Term::ReadLine::Gnu installed?"}, {"owner": {"reputation": 172, "user_id": 1936237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2710ac7a11ca4fec1547f82ccf8c9f5f?s=128&d=identicon&r=PG&f=1", "display_name": "k.stm", "link": "https://stackoverflow.com/users/1936237/k-stm"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518831920, "post_id": 48837015, "comment_id": 84679022, "body": "@ikegami That was it. If you make that comment to an answer, I\u2019ll accept it. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1518834858, "last_edit_date": 1518834858, "creation_date": 1518834357, "answer_id": 48837294, "question_id": 48837015, "link": "https://stackoverflow.com/questions/48837015/in-perl-5-termreadline-does-not-accept-arrow-keys/48837294#48837294", "title": "In Perl 5, Term::Readline does not accept arrow keys", "body": "<p>You might need to install <code>Term::ReadLine::Perl</code> or <code>Term::ReadLine::Gnu</code> as well. Try something like:</p>\n\n<pre><code>sudo cpan Term::ReadLine::Gnu\nsudo cpanm Term::ReadLine::Perl\nsudo apt install libterm-readline-gnu-perl    # if ubuntu or\nsudo apt install libterm-readline-perl-perl   #\nsudo yum install perl-Term-ReadLine-Gnu       # if centos, rhel, fedora\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 1936237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2710ac7a11ca4fec1547f82ccf8c9f5f?s=128&d=identicon&r=PG&f=1", "display_name": "k.stm", "link": "https://stackoverflow.com/users/1936237/k-stm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 48837294, "answer_count": 1, "score": 2, "last_activity_date": 1518834858, "creation_date": 1518830400, "question_id": 48837015, "link": "https://stackoverflow.com/questions/48837015/in-perl-5-termreadline-does-not-accept-arrow-keys", "title": "In Perl 5, Term::Readline does not accept arrow keys", "body": "<p>I\u2019m trying to diagnose and fix a bug I have with the Perl application <code>youtube-viewer</code> on Linux. I don\u2019t know any Perl and this might turn ot to be a Linux question rather than a Perl question.</p>\n\n<p>So when using <code>Term::ReadLine</code> in Perl 5, <code>readline()</code> doesn\u2019t seem to accept arrow keys in my terminal \u2013 I tried with <code>rxvt-unicode</code> and <code>xterm</code>. Here\u2019s a minimal example.</p>\n\n<pre><code>#!/usr/bin/perl\n\nrequire Term::ReadLine;\n$term = Term::ReadLine-&gt;new(\"\");\n$term-&gt;readline(\"\");\n</code></pre>\n\n<p>Running this and pressing arrow keys <code>\u2190</code> <code>\u2193</code> <code>\u2192</code> <code>\u2191</code> prints</p>\n\n<pre><code>^[[D^[[B^[[C^[[A\n</code></pre>\n\n<p>on the terminal rather than moving the cursor.</p>\n\n<p>Is this possibly a <code>Term::ReadLine</code> bug or how can I fix this? What can I do next to figure out what\u2019s wrong here?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518817612, "post_id": 48834135, "comment_id": 84675350, "body": "I confirm the behaviour makes no sense. Only unencoded slashes should have meaning, and there seems to be a problem re-encoding <code>+</code>. (It probably re-encodes to normalize the encoding to compare against the path. I haven no idea why it places encoded values in the stash, though, but that&#39;s not the issue here.)"}], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1610637566, "post_id": 48836171, "comment_id": 116200613, "body": "Thanks! This solved a related problem for me: <code>https:&#47;&#47;10.0.0.54&#47;map&#47;51.5526&#47;0.018</code> etc. etc. which needs <i>relaxed</i> placeholders. I hadn&#39;t used them before."}], "tags": [], "owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "is_accepted": false, "score": 2, "last_activity_date": 1518822790, "creation_date": 1518822790, "answer_id": 48836171, "question_id": 48834135, "link": "https://stackoverflow.com/questions/48834135/mojolicious-inconsistent-url-decoding-of-route-placeholders/48836171#48836171", "title": "Mojolicious: Inconsistent URL Decoding of Route Placeholders", "body": "<p>So there are several things going on here. First generally <code>/</code> vs <code>%2F</code> is a very fraught thing. You can read an interesting thread at <a href=\"https://groups.google.com/forum/#!topic/python-web-sig/IAPhwezOJ7I\" rel=\"nofollow noreferrer\">https://groups.google.com/forum/#!topic/python-web-sig/IAPhwezOJ7I</a> and notice that Mojolicious itself was issued a CVE over the potential for path traversal <a href=\"https://www.cvedetails.com/cve/CVE-2011-1589/\" rel=\"nofollow noreferrer\">https://www.cvedetails.com/cve/CVE-2011-1589/</a>. That said if you use wildcard placeholders you can still recover <code>/</code> in your placeholders. Finally your test is (while I'm sure functional) not using the Mojolicious test facilities which would avoid much of your architecture, leaving room for more tests. Here was my quick cleanup.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse Mojo::Base -strict;\n\nuse Mojolicious::Lite;\nuse Mojo::Util qw(url_escape url_unescape);\n\nuse Test::More;\nuse Test::Mojo;\n\nmy $cb = sub {\n    my $c = shift;\n\n    my $id_raw     = $c-&gt;stash('id');\n    my $id_decoded = url_unescape $id_raw;\n\n    $c-&gt;render( json =&gt; { raw =&gt; $id_raw, decoded =&gt; $id_decoded } );\n};\nget '/standard/:id' =&gt; $cb;\nget '/relaxed/#id'  =&gt; $cb;\nget '/wildcard/*id' =&gt; $cb;\n\n\n# Standard Placeholders:  ([^/.]+)\n# Relaxed Placeholders:   ([^/]+)\n# Wildcard Placeholders:  (.+)\n\nmy $t = Test::Mojo-&gt;new;\n\nmy @ids = (\n    \"foobar\",\n    \"a space\",\n    \"a+plus\",\n    \"a/slash\",\n);\n\nplan tests =&gt; 3;\n\nfor my $type (qw/standard relaxed wildcard/) {\n  subtest \"Type $type\" =&gt; sub {\n    plan tests =&gt; 4 * @ids;\n\n    for my $id (@ids) {\n      my $id_encoded = url_escape $id;\n      $t-&gt;get_ok(\"/$type/$id_encoded\")\n        -&gt;status_is(200)\n        -&gt;json_is('/raw',     $id_encoded, \"$type raw test for $id_encoded\")\n        -&gt;json_is('/decoded', $id,         \"$type decoded test for $id\");\n    }\n  };\n}\n</code></pre>\n\n<p>I didn't correct your tests, just ported them as written (and extended for all three placeholder types).</p>\n"}], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1518822790, "creation_date": 1518811723, "question_id": 48834135, "link": "https://stackoverflow.com/questions/48834135/mojolicious-inconsistent-url-decoding-of-route-placeholders", "title": "Mojolicious: Inconsistent URL Decoding of Route Placeholders", "body": "<p>I want to access a resource in a Restful API where the resource identifier contains special characters.  I'm therefore url_encoding the identifier, but I'm getting inconsistent automatic decoding behavior in Mojolicious for the placeholders.</p>\n\n<p>The following is a test script that tests a simple resource identifier, one that contains a space, one with a plus, and one with a slash.  I'm url_encoding each of these before sending my request, but the 2nd two fail for different reasons.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nuse Data::Dump qw(pp);\nuse Mojolicious::Lite;\nuse Mojo::UserAgent;\nuse Test::Exception;\nuse Test::More;\nuse URL::Encode qw(url_encode url_decode);\nuse WWW::Mechanize;\n\n# Case 1: Access a resource using Standard Placeholders\nget '/my/app/standard_placeholder/:id' =&gt; sub {\n    my $c = shift;\n\n    my $id_raw     = $c-&gt;stash('id');\n    my $id_decoded = url_decode($id_raw);\n\n    $c-&gt;render( json =&gt; { raw =&gt; $id_raw, decoded =&gt; $id_decoded } );\n};\n\n# Shut the server down.\nget '/my/api/shutdown' =&gt; sub {\n    exit 0;\n};\n\n# Fork for Client and Server\nif ( my $pid = fork ) {\n    note \"Waiting for the server to start\";\n    sleep 2;\n\n    run_test();\n\n    # Clean up server process and we\u2019re done\n    waitpid( $pid, 0 );\n\n} else {\n    local @ARGV = qw(daemon);\n\n    app-&gt;log( Mojo::Log-&gt;new( path =&gt; \"$0.log\", level =&gt; 'debug' ) );\n    app-&gt;start;\n}\n\nexit 0;\n\n### Client\n\nsub run_test {\n    plan tests =&gt; 2;\n\n    my $ua         = Mojo::UserAgent-&gt;new();\n    my $server_url = 'http://127.0.0.1:3000';\n\n    # Standard Placeholders:  ([^/.]+)\n    # Relaxed Placeholders:   ([^/]+)\n    # Wildcard Placeholders:  (.+)\n\n    subtest 'Standard Placeholders testing url_encoding of route identifiers' =&gt; sub {\n        my @ids = (\n            \"foobar\",    #\n            \"a space\",\n            \"a+plus\",\n            \"a/slash\",\n        );\n\n        plan tests =&gt; 3 * @ids;\n\n        for my $id (@ids) {\n            my $id_encoded = url_encode($id);\n            my $tx         = $ua-&gt;get(\"$server_url/my/app/standard_placeholder/$id_encoded\");\n\n        SKIP: {\n                is( $tx-&gt;res-&gt;code, 200, \"Fetch Resource at \" . pp($id) )\n                    or skip \"Error in response\", 2;\n\n                is( $tx-&gt;res-&gt;json-&gt;{raw},     $id_encoded, \"json-&gt;{raw} eq \" . pp($id_encoded) );\n                is( $tx-&gt;res-&gt;json-&gt;{decoded}, $id,         \"json-&gt;{decoded} eq \" . pp($id) );\n            }\n        }\n    };\n\n    subtest 'Shutdown the server' =&gt; sub {\n        plan tests =&gt; 2;\n\n        dies_ok {\n            my $mech = WWW::Mechanize-&gt;new( timeout =&gt; 3 );\n            $mech-&gt;get(\"$server_url/my/api/shutdown\");\n        }\n        'shutdown occurred';\n\n        like $@, qr{Error GETing .*?shutdown: Server closed connection without sending any data back},\n            'detected closed connection';\n    };\n}\n\n1;\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>mhall@dev19:~$ ./mojo_placeholders.pl\n# Waiting for the server to start\nServer available at http://127.0.0.1:3000\n1..2\n# Subtest: Standard Placeholders testing url_encoding of route identifiers\n    1..12\n    ok 1 - Fetch Resource at \"foobar\"\n    ok 2 - json-&gt;{raw} eq \"foobar\"\n    ok 3 - json-&gt;{decoded} eq \"foobar\"\n    ok 4 - Fetch Resource at \"a space\"\n    ok 5 - json-&gt;{raw} eq \"a+space\"\n    ok 6 - json-&gt;{decoded} eq \"a space\"\n    ok 7 - Fetch Resource at \"a+plus\"\n    not ok 8 - json-&gt;{raw} eq \"a%2Bplus\"\n    #   Failed test 'json-&gt;{raw} eq \"a%2Bplus\"'\n    #   at ./mojo_placeholders.pl line 89.\n    #          got: 'a+plus'\n    #     expected: 'a%2Bplus'\n    not ok 9 - json-&gt;{decoded} eq \"a+plus\"\n    #   Failed test 'json-&gt;{decoded} eq \"a+plus\"'\n    #   at ./mojo_placeholders.pl line 90.\n    #          got: 'a plus'\n    #     expected: 'a+plus'\n    not ok 10 - Fetch Resource at \"a/slash\"\n    #   Failed test 'Fetch Resource at \"a/slash\"'\n    #   at ./mojo_placeholders.pl line 85.\n    #          got: '404'\n    #     expected: '200'\n    ok 11 # skip Error in response\n    ok 12 # skip Error in response\n    # Looks like you failed 3 tests of 12.\nnot ok 1 - Standard Placeholders testing url_encoding of route identifiers\n#   Failed test 'Standard Placeholders testing url_encoding of route identifiers'\n#   at ./mojo_placeholders.pl line 93.\n# Subtest: Shutdown the server\n    1..2\n    ok 1 - shutdown occurred\n    ok 2 - detected closed connection\nok 2 - Shutdown the server\n# Looks like you failed 1 test of 2.\n</code></pre>\n\n<p>Any suggestions on how to approach this?</p>\n"}, {"tags": ["perl", "email", "subroutine"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518807272, "post_id": 48832799, "comment_id": 84670649, "body": "I see some grave scoping errors. Always use <code>use strict; use warnings qw( all );</code>!"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1518811874, "post_id": 48832799, "comment_id": 84672742, "body": "The code looks &quot;ok&quot; to me, but you should add strict and warnings, like ikegami suggested, and use <code>my $from</code> etc. inside the sub. to learn how to pass variables to subroutines, check <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perldoc perlsub</a>"}, {"owner": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "edited": false, "score": 0, "creation_date": 1518917403, "post_id": 48832799, "comment_id": 84699243, "body": "the code above is just a snippet of the whole script"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "edited": false, "score": 0, "creation_date": 1518917576, "post_id": 48836683, "comment_id": 84699266, "body": "does the mail sent here take the system mail configuration eg: postfix. that is configured to send authenticated mail via an exchange server. or is it necessary to add authentication data to to the subroutine?"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "edited": false, "score": 0, "creation_date": 1519229489, "post_id": 48836683, "comment_id": 84827092, "body": "Don&#39;t know about postfix. This might be what you&#39;re looking for: <a href=\"http://search.cpan.org/~rjbs/MIME-Lite-3.030/lib/MIME/Lite.pm#Change_how_messages_are_sent\" rel=\"nofollow noreferrer\">search.cpan.org/~rjbs/MIME-Lite-3.030/lib/MIME/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1518827137, "last_edit_date": 1518827137, "creation_date": 1518826821, "answer_id": 48836683, "question_id": 48832799, "link": "https://stackoverflow.com/questions/48832799/how-to-pass-a-variable-to-a-subroutine-to-send-email-in-perl/48836683#48836683", "title": "how to pass a variable to a subroutine to send email in perl", "body": "<p>So you're asking how subroutines receive parameters? It's through the <code>@_</code> array. I did a little rewrite of your sub below.</p>\n\n<p>Note: <code>use Mime::Lite;</code> should move outside the sub...it's probably best to move it all the way to the top. All <code>use</code> modules is always runned first anyway, no matter where it's at in your code, so it might as well be listed close to the top. Also, it's often useful to view all dependencies at one place. On the slight chance you absolutely don't want to load the Mime::Lite module unless send_email is called, use <code>require Mime::Lite;</code> instead of <code>use</code> inside the sub, it will then be included the first time the sub is called.</p>\n\n<p>Remember to use  <code>my</code> for local vars so you don't get trouble with others vars using the same name as your program grows (known as namespace pollution)</p>\n\n<pre><code>use MIME::Lite;\n...\nmy $output = $ssh-&gt;capture( ... );\n...\nsub send_email {\n  my($data) = @_;\n  my $subject = 'Test Email';\n  my($to,$cc,$from) = ('abcd@gmail.com',\n                       'efgh@mail.com',\n                       'webmaster@yourdomain.com');\n  my $msg = MIME::Lite-&gt;new(\n                 From     =&gt; $from,\n                 To       =&gt; $to,\n                 Cc       =&gt; $cc,\n                 Subject  =&gt; $subject,\n                 Data     =&gt; $data,\n            );\n  $msg-&gt;send;\n}\n\nsend_email($output) if $output;\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4309334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01ddf1f5b5a3c1bc1830c74e0656203?s=128&d=identicon&r=PG&f=1", "display_name": "danidar", "link": "https://stackoverflow.com/users/4309334/danidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 48836683, "answer_count": 1, "score": 1, "last_activity_date": 1518827137, "creation_date": 1518805471, "question_id": 48832799, "link": "https://stackoverflow.com/questions/48832799/how-to-pass-a-variable-to-a-subroutine-to-send-email-in-perl", "title": "how to pass a variable to a subroutine to send email in perl", "body": "<p>I want to be able to send an email if the contents of a variable are not empty </p>\n\n<p>this is my code: </p>\n\n<pre><code>my $output = $ssh-&gt;capture({stdin_data =&gt; &lt;&lt;'EOS'}, 'pfexec /usr/bin/perl');\n\nuse File::Find::Rule;\n\nmy $dir = '/dir';\n\nmy $today = time();\nmy $onehour = $today - (60*60);\nmy $oneday = $today - (24*60*60);\n\nmy @files = File::Find::Rule-&gt;file()\n                            -&gt;name(\"*.0\")\n                            -&gt;mtime(\"&gt;$oneday\")\n                            -&gt;mtime(\"&lt;$onehour\")\n                            -&gt;in( \"$dir\" );\n\nfor my $file (@files) {\n    print \"$file\\n\";\n}\n\nEOS\n\nsub send_email{\n\nuse MIME::Lite;\n\n$to = 'abcd@gmail.com';\n$cc = 'efgh@mail.com';\n$from = 'webmaster@yourdomain.com';\n$subject = 'Test Email';\n\n\n$msg = MIME::Lite-&gt;new(\n                 From     =&gt; $from,\n                 To       =&gt; $to,\n                 Cc       =&gt; $cc,\n                 Subject  =&gt; $subject,\n                 Data     =&gt; $output\n                 );\n\n$msg-&gt;send;\n\n}\nif ($output) {\n        send_email($output);\n}\n</code></pre>\n\n<p>as you can see i connect remotely to a server. find a few files and if files are found send them by email. \nI do not know how to create the subroutine so it takes the <code>$output</code> as parameter and sends it by mail. </p>\n\n<p>thanks</p>\n"}, {"tags": ["multithreading", "perl", "thread-safety"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1518832462, "post_id": 48832503, "comment_id": 84679107, "body": "<a href=\"https://benchmarksgame.alioth.debian.org/u64q/program.php?test=regexredux&amp;lang=perl&amp;id=3\" rel=\"nofollow noreferrer\">Just forking</a> might be simpler."}, {"owner": {"reputation": 3353, "user_id": 7169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2308e9d8125905e247e62bb3f2017e84?s=128&d=identicon&r=PG&f=1", "display_name": "elenst", "link": "https://stackoverflow.com/users/7169191/elenst"}, "edited": false, "score": 0, "creation_date": 1518833782, "post_id": 48832503, "comment_id": 84679298, "body": "Agree, I&#39;m leaning towards it. I&#39;ve been experimenting and it seems to be working so far. It was already so on Linux, but for Windows the implementation was different on some reason, through threads/processes as above. From some googling, it seems that forking on Windows was and still is rather frowned upon, maybe that&#39;s why the other approach was chosen. But if it turns out that the &quot;smart&quot; ways really don&#39;t work, I&#39;ll make it fork universally."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1518852347, "post_id": 48832503, "comment_id": 84682225, "body": "Now I don&#39;t understand the question at all -- why do you have that <code>Win32::Process::Create</code> there? I thought you wanted to run threads in a separate process, but if you don&#39;t want to mix them (better!) then what are you asking?  Note that fork on Win32 is servicable and there are also good modules for that.  It is much simpler to fork unless you need to exchange data in a complex way.  (Please tag people you are addressing so they get notified)"}, {"owner": {"reputation": 3353, "user_id": 7169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2308e9d8125905e247e62bb3f2017e84?s=128&d=identicon&r=PG&f=1", "display_name": "elenst", "link": "https://stackoverflow.com/users/7169191/elenst"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1518859732, "post_id": 48832503, "comment_id": 84683778, "body": "@zdim : the <i>goal</i> is to run an executable from inside the Perl in a way that the Perl code would have certain control over it later (e.g. ability to get the pid, to kill, etc.), <i>and</i> to run some concurrent flow from the Perl itself; the <i>reason</i> why <code>Win32::Process</code> is there is because it was in the code, it&#39;s not my creation; and finally, the <i>question</i> is why the code above crashes, is it essentially wrong, or is the used module not thread-safe and if so, whether it has better analogues. Forking is a known possibility, but it&#39;s questionable on Windows, so I&#39;m interested in alternatives"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1518985933, "post_id": 48832503, "comment_id": 84715955, "body": "Ah, why don&#39;t you say so :). My comments were conditional on this (phrased as questions). I looked at the docs more carefully ... I&#39;m removing some comments as they are indeed off-mark."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519098918, "post_id": 48832503, "comment_id": 84759236, "body": "I removed all but one of my comments, to not distract from the question."}, {"owner": {"reputation": 3353, "user_id": 7169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2308e9d8125905e247e62bb3f2017e84?s=128&d=identicon&r=PG&f=1", "display_name": "elenst", "link": "https://stackoverflow.com/users/7169191/elenst"}, "edited": false, "score": 0, "creation_date": 1519125056, "post_id": 48832503, "comment_id": 84772186, "body": "Okay, I&#39;ve removed my answers to the deleted comments as well."}], "answers": [{"comments": [{"owner": {"reputation": 3353, "user_id": 7169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2308e9d8125905e247e62bb3f2017e84?s=128&d=identicon&r=PG&f=1", "display_name": "elenst", "link": "https://stackoverflow.com/users/7169191/elenst"}, "edited": false, "score": 1, "creation_date": 1518989660, "post_id": 48855587, "comment_id": 84717193, "body": "Thanks. I intend to accept it because (a) it confirms the crash indeed occurs on independent reasons, and (b) I&#39;ve already switched to <code>fork</code>, and it seems to be working so far. I&#39;ll wait a bit though to see if there are other ideas. For the questions -- yes, the process <i>might</i> under some circumstances outlast the Perl program, but it can also be restarted during Perl lifetime (which is why I can&#39;t use fork <i>and</i> threads, it gets too messy when the process needs to be restarted and threads are already created, but I can use fork everywhere). Communication with the process is minimal."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 3, "last_activity_date": 1518981702, "last_edit_date": 1518981702, "creation_date": 1518981380, "answer_id": 48855587, "question_id": 48832503, "link": "https://stackoverflow.com/questions/48832503/use-of-win32-processes-and-threads-in-one-perl-module/48855587#48855587", "title": "Use of Win32 processes and threads in one Perl module", "body": "<p>It is not clear what you are trying to do. Do you intend this process you spawn to outlast your Perl program? Do you intend to communicate with the process you spawn?</p>\n\n<p>In most instances, just using plain <code>fork</code> (which is emulated on Windows, but things mostly work) is going to be better unless you want to interact with <code>$proc</code> in Windows specific ways. Also, keep in mind that normally <code>dir</code> is a <code>cmd.exe</code> builtin so <code>Win32::Process</code> will not be able to run in it unless you have a <code>dir.exe</code> or <code>dir.com</code> or <code>dir.bat</code> or similar on your <code>%PATH%</code>.</p>\n\n<p>I can replicate a crash with the following program:</p>\n\n<pre><code>#!/usr/bin/env perl\n\n$| = 1;\n\nuse v5.24; # why not?\nuse strict;\nuse warnings;\n\nuse threads;\n\nuse feature 'signatures';\nno warnings 'experimental::signatures';\n\nuse autouse Carp =&gt; qw( croak );\nuse Win32::GuiTest qw( FindWindowLike SendKeys SetForegroundWindow );\nuse Win32::Process;\nuse Win32;\n\nrun();\n\nsub run {\n    Win32::Process::Create(\n        my $proc,\n        'C:\\WINDOWS\\system32\\notepad.exe',\n        'notepad.exe',\n        0,\n        +NORMAL_PRIORITY_CLASS,\n        '.',\n    ) or croak Win32::FormatMessage(Win32::GetLastError());\n\n    my @thr = map threads-&gt;create(\\&amp;task), 1 .. 2;\n\n    threads-&gt;yield;\n\n    my @windows;\n    do {\n        @windows = FindWindowLike(0, 'Notepad');\n    } until (@windows);\n\n    wait_for_thread($_, $windows[0]) for @thr;\n\n    say 'All done.';\n\n    SetForegroundWindow($windows[0]);\n    SendKeys('%fxn');\n\n    $proc-&gt;Wait(+INFINITE);\n    return;\n}\n\nsub task {\n    my $tid = threads-&gt;tid;\n    say \"Thread $tid waiting ($_)\" for 1 .. 5;\n    threads-&gt;yield;\n    return;\n}\n\nsub wait_for_thread($thr, $window) {\n    my $msg = sprintf \"Waiting for thread %d\\n\", $thr-&gt;tid;\n    print $msg;\n\n    SetForegroundWindow($window);\n    SendKeys($msg);\n\n    $thr-&gt;join;\n    return;\n}\n</code></pre>\n\n<p>I get this in the debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FAazU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FAazU.png\" alt=\"Visual Studio Debugger\"></a></p>\n\n<p>It is likely that an interaction between <code>threads</code> and <code>Win32::Process</code> is exposing a bug*.</p>\n\n<p>On the other hand, the following version seems to work fine:</p>\n\n<pre><code>#!/usr/bin/env perl\n\n$| = 1;\n\nuse v5.24; # why not?\nuse strict;\nuse warnings;\n\nuse threads;\n\nuse feature 'signatures';\nno warnings 'experimental::signatures';\n\nuse autouse Carp =&gt; qw( croak );\nuse Win32::GuiTest qw( FindWindowLike SendKeys SetForegroundWindow );\n\nrun();\n\nsub run {\n    defined(my $cpid = fork)\n        or croak \"Failed to fork: $!\";\n\n    if (!$cpid) {\n        system 'notepad';\n        exit;\n    }\n\n    my @thr = map threads-&gt;create(\\&amp;task), 1 .. 2;\n\n    threads-&gt;yield;\n\n    my @windows;\n    do {\n        @windows = FindWindowLike(0, 'Notepad');\n    } until (@windows);\n\n    wait_for_thread($_, $windows[0]) for @thr;\n\n    say 'All done.';\n\n    SetForegroundWindow($windows[0]);\n    SendKeys('%fxn');\n\n    1 while waitpid(-1, 0) &gt; 0;\n    return;\n}\n\nsub task {\n    my $tid = threads-&gt;tid;\n    say \"Thread $tid waiting ($_)\" for 1 .. 5;\n    threads-&gt;yield;\n    return;\n}\n\nsub wait_for_thread($thr, $window) {\n    my $msg = sprintf \"Waiting for thread %d\\n\", $thr-&gt;tid;\n    print $msg;\n\n    SetForegroundWindow($window);\n    SendKeys($msg);\n\n    $thr-&gt;join;\n    return;\n}\n</code></pre>\n\n<p>As I mentioned, unless there is a specific reason to use <code>Win32::Process</code>, you are probably better off using <code>fork</code>.</p>\n\n<p>* Feel free to check with <a href=\"https://lists.perl.org/list/perl5-porters.html\" rel=\"nofollow noreferrer\">P5P</a>.</p>\n"}], "owner": {"reputation": 3353, "user_id": 7169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2308e9d8125905e247e62bb3f2017e84?s=128&d=identicon&r=PG&f=1", "display_name": "elenst", "link": "https://stackoverflow.com/users/7169191/elenst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 1, "accepted_answer_id": 48855587, "answer_count": 1, "score": 3, "last_activity_date": 1518981702, "creation_date": 1518804157, "question_id": 48832503, "link": "https://stackoverflow.com/questions/48832503/use-of-win32-processes-and-threads-in-one-perl-module", "title": "Use of Win32 processes and threads in one Perl module", "body": "<p>Perl code which I'm trying to adapt to running on Windows, among other things, needs to start a separate process and to execute some multi-thread flow (the process might either keep running or exit at some point while the multi-thread flow is being executed). </p>\n\n<p>Essentially, the logic is like this:</p>\n\n<pre><code>use Win32::Process;\nuse threads;\nuse strict;\n\nmy $proc;\nWin32::Process::Create($proc,'dir','',0,NORMAL_PRIORITY_CLASS(),\".\");\n\nmy $t1= threads-&gt;create(\\&amp;thread_proc);\nmy $t2= threads-&gt;create(\\&amp;thread_proc);\n\nsleep 2;\nprint \"Waiting for thread \".$t1-&gt;tid.\" to exit\\n\";\n$t1-&gt;join();\nprint \"Waiting for thread \".$t2-&gt;tid.\" to exit\\n\";\n$t2-&gt;join();\nprint \"All done.\\n\";\n# Cleanup would be here\n\nsub thread_proc {\n  foreach (1..5) {\n    print \"Thread \".threads-&gt;tid.\" waiting $_\\n\";\n    sleep 1;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>When execution reaches the 2nd <code>join</code>, Perl aborts (debugger claims that heap is corrupted).</p>\n\n<p>If I comment out <code>Win32::Process::Create</code> above, it works.</p>\n\n<p>Replacing <code>Win32::Process</code> with <code>Win32::Job</code> doesn't help, although it additionally produces the message</p>\n\n<pre><code>Free to wrong pool 4a47c0 not 328400 at ...\n</code></pre>\n\n<p>Wrapping up the whole thread logic into a <code>BEGIN {}</code> block seems to make the crash go away, but it's not a desirable workaround, since in the real code the thread-related logic is more complicated and can't be easily localized.</p>\n\n<p>In <a href=\"http://search.cpan.org/~jdb/Win32-Process-0.16/Process.pm\" rel=\"nofollow noreferrer\">Win32::Process</a> or <a href=\"http://search.cpan.org/~jdb/Win32-Job-0.05/Job.pm\" rel=\"nofollow noreferrer\">Win32::Job</a> documentation (or anywhere else) I couldn't find any information about these modules being thread-unsafe. </p>\n\n<p>So, the question is, whether the code is wrong or it's the generic problem with the modules, and in the latter case, is there any analogue which is known to be reasonably crash-safe?</p>\n\n<blockquote>\n  <p>Strawberry perl 5, version 24, subversion 1 (v5.24.1) built for\n  MSWin32-x64-multi-thread</p>\n</blockquote>\n"}, {"tags": ["perl", "curl", "http-headers"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1518808254, "post_id": 48831394, "comment_id": 84671118, "body": "&quot;requesting headers using <code>LWP::UserAgent</code> is not possible&quot; -- er, what?? Read the documentation. <code>$resp-&gt;header(&quot;Content-Type&quot;)</code>, etc."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1518810202, "post_id": 48831394, "comment_id": 84671968, "body": "print &lt;$s&gt;; and it should be obvious."}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1518814142, "post_id": 48831394, "comment_id": 84673865, "body": "@\u0421\u0443\u0445\u043e\u043927 <code>print Dumper($s);</code> returns <code>$VAR1 = bless( \\*Symbol::GEN0, &#39;Net::HTTP&#39; );</code>,  <code>print $s;</code> returns <code>Net::HTTP=GLOB(0xddd9f8)</code> and <code>print &lt;$s&gt;;</code> returns empty string, so I am not sure what you meant."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1518814941, "post_id": 48831394, "comment_id": 84674213, "body": "<code>302</code> should be redirect to another url. <a href=\"https://en.wikipedia.org/wiki/HTTP_302#Example\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/HTTP_302#Example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1518864705, "post_id": 48836999, "comment_id": 84685099, "body": "This works fine, it doesn&#39;t give the same result, but I can use it, except for when the page I request doesn&#39;t contain anything, it is only supposed to return a redirection link in the header but <code>is_success</code> returns 1. And btw. my code runs fine is I leave the <code>accept-encoding</code> part out."}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1518866394, "post_id": 48836999, "comment_id": 84685529, "body": "If I request the Header using <code>curl</code>, it returns <code>HTTP&#47;2 302</code> and a proper redirection link, if I request it using <code>Net::HTTP</code> it returns <code>HTTP&#47;1.1 302</code> and the link I requested, as the redirection link, and your method returns <code>Error: 404 Not Found</code> Any idea what causes that?"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1518830268, "creation_date": 1518830268, "answer_id": 48836999, "question_id": 48831394, "link": "https://stackoverflow.com/questions/48831394/correct-way-of-rewriting-curl-to-perl/48836999#48836999", "title": "Correct way of rewriting `curl ...` to perl", "body": "<p>You can get the response headers in a couple of ways with LWP. Demonstrated here:</p>\n\n<pre><code>use LWP::UserAgent;\nmy($host,$request) = ('example.com', '/my/request');\nmy @header=( [Host         =&gt; $host],\n             ['User-Agent' =&gt; 'James Bond 2.0'],\n             [Accept       =&gt; 'text/plain'],\n             [Cookie       =&gt; 'cookie=x'],\n           );\nmy $ua = LWP::UserAgent-&gt;new;\nmy $req = HTTP::Request-&gt;new(GET =&gt; \"https://$host$request\");  #dont add HTTP/1.1\n$req-&gt;header(@$_) for @header;\nmy $resp = $ua-&gt;request($req);\n\nif ($resp-&gt;is_success) {\n\n    my %h; $resp-&gt;headers-&gt;scan( sub{ $h{shift()}=shift() } );\n    printf \"Header name: %-30s  Value: %-30s\\n\", $_, $h{$_} for sort keys %h;\n\n    print \"\\n&lt;&lt;&lt;\".$resp-&gt;headers()-&gt;as_string.\"&gt;&gt;&gt;\\n\\n\"; #all header lines in one big string\n\n    print $resp-&gt;header('Content-Type'),\"\\n\\n\";  #get one specific header line\n\n    my $content = $resp-&gt;decoded_content;\n    print \"$content\\n\";\n}\n</code></pre>\n\n<p>Note: \"HTTP/1.1\" should not be a part of the string after <code>GET =&gt;</code>.</p>\n\n<p>And with calling <code>curl</code> as a sub process you don't need to call it twice. You can get both headers and content at once by using <code>-i</code> like this:</p>\n\n<pre><code>my $response = ` curl -s -i \"http://somewhere.com/path\" -H 'User-Agent: Yes' `;\nmy($headers,$content) = split /\\cM?\\cJ\\cM?\\cJ/, $response, 2;\nprint \"Headers: &lt;&lt;&lt;$headers&gt;&gt;&gt;\\n\\n\";\nprint \"Content: &lt;&lt;&lt;$content&gt;&gt;&gt;\\n\\n\";\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 48836999, "answer_count": 1, "score": 2, "last_activity_date": 1518869606, "creation_date": 1518799814, "last_edit_date": 1518869606, "question_id": 48831394, "link": "https://stackoverflow.com/questions/48831394/correct-way-of-rewriting-curl-to-perl", "title": "Correct way of rewriting `curl ...` to perl", "body": "<p>I wrote a program that requests the source and the response header of a webpage, now I need it to run cross platform. I used the external command curl (in linux) to achieve it. I get the source like this::</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\n#declaring variables here#\n\nmy $result = `curl 'https://$host$request' -H 'Host: $host' -H 'User-Agent: $useragent' -H 'Accept: $accept' -H 'Accept-Language: $acceptlanguage' --compressed -H 'Cookie: $cookie' -H 'DNT: $dnt' -H 'Connection: $connection' -H 'Upgrade-Insecure-Requests: $upgradeinsecure' -H 'Cache-Control: $cachecontrol'`;\nprint \"$result\\n\";\n</code></pre>\n\n<p>And the response header like this:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\n#declaring variables here#\n\nmy $result = `curl -I 'https://$host$request' -H 'Host: $host' -H 'User-Agent: $useragent' -H 'Accept: $accept' -H 'Accept-Language: $acceptlanguage' --compressed -H 'Cookie: $cookie' -H 'DNT: $dnt' -H 'Connection: $connection' -H 'Upgrade-Insecure-Requests: $upgradeinsecure' -H 'Cache-Control: $cachecontrol'`;\nprint \"$result\\n\";\n</code></pre>\n\n<p>These work fine, but I need to call these in perl and not as external commands.\nI wrote some code using <code>LWP::UserAgent</code> to get the source:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse LWP::UserAgent;\n\n#declaring variables here#\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $req = HTTP::Request-&gt;new(GET =&gt; \"https://$host$request HTTP/1.1\");\n$req-&gt;header('Host' =&gt; \"$host\");\n$req-&gt;header('User-Agent' =&gt; \"$useragent\");\n$req-&gt;header('Accept' =&gt; \"$accept\");\n$req-&gt;header('Accept-Language' =&gt; \"$acceptlanguage\");\n$req-&gt;header('Accept-Encoding' =&gt; \"$acceptencoding\");\n$req-&gt;header('Cookie' =&gt; \"$cookie\");\n$req-&gt;header('DNT' =&gt; \"$dnt\");\n$req-&gt;header('Connection' =&gt; \"$connection\");\n$req-&gt;header('Upgrade-Insecure-Requests' =&gt; \"$upgradeinsecure\");\n$req-&gt;header('Cache-Control' =&gt; \"$cachecontrol\");\n\nmy $resp = $ua-&gt;request($req);\nif ($resp-&gt;is_success) {\n    my $message = $resp-&gt;decoded_content;\n    print \"$message\\n\";\n}\n</code></pre>\n\n<p>This sometimes runs fine, but sometimes <code>decoded_content</code> returns nothing, I do get a response and i can print it using <code>content</code>, but its still encoded.</p>\n\n<p>And requesting response headers using <code>LWP::UserAgent</code> is not possible so I wrote the request using <code>Net::HTTP</code>:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Net::HTTP;\n\n#declaring variables here#\n\nmy $s = Net::HTTP-&gt;new(Host =&gt; \"$host\") || die $@;\n$s-&gt;write_request(GET =&gt; \"$request\", 'Host' =&gt; \"$host\", 'User-Agent' =&gt; \"$useragent\", 'Accept' =&gt; \"$accept\", 'Accept-Language' =&gt; \"$acceptlanguage\", 'Accept-Encoding' =&gt; \"$acceptencoding\", 'Cookie' =&gt; \"$cookie\", 'DNT' =&gt; \"$dnt\", 'Connection' =&gt; \"$connection\", 'Upgrade-Insecure-Requests' =&gt; \"$upgradeinsecure\", 'Cache-Control' =&gt; \"$cachecontrol\");\n\nmy @headers;\n\nwhile(my $line = &lt;$s&gt;) {\n    last unless $line =~ /\\S/;\n    push @headers, $line;\n}\nprint @headers;\n</code></pre>\n\n<p>This returns </p>\n\n<pre><code>HTTP/1.1 302 Found\nContent-Type: text/html; charset=UTF-8\nConnection: close\nContent-Length: 0\n</code></pre>\n\n<p>Is the problem with my syntax of am I using the wrong tools? I know that <code>WWW::Curl::Easy</code> can request the source and the header at the same time, but I don't know how to pass my variables to its request. Could someone tell me what the problem is or just rewrite these requests correctly using the same variables with <code>WWW:Curl::Easy</code>? I'd appreciate a solution using <code>WWW::Curl::Easy</code>. Thanks in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1520414185, "post_id": 48827278, "comment_id": 85300661, "body": "As I can see there is no any reason to prohibiting this. Perl just keep compatibility. And this is the only reason."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1520424871, "post_id": 48827278, "comment_id": 85307546, "body": "@EugenKonkov I think compatibility is a very good reason. It&#39;s unlikely Perl would have been designed like that today, even though this auto-flattening has a convenient shell-like feel to it (e.g. specifying shell command arguments like <code>foo $var</code> or <code>foo &quot;$@&quot;</code>). This can sometimes be confusing, up to having <a href=\"https://blog.gerv.net/2014/10/new-class-of-vulnerability-in-perl-web-applications/\" rel=\"nofollow noreferrer\">security implications</a>. Since flattening is still useful, other languages like Python 3.5 support <a href=\"https://www.python.org/dev/peps/pep-0448/\" rel=\"nofollow noreferrer\">explicit syntax</a> for this."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1520515606, "post_id": 48827278, "comment_id": 85353347, "body": "Yeah, I fall into this security issue once too. After that I have a question: Why in <code>key&#47;value</code> the <code>=&gt;</code> do not run its right operand in scalar context?? Often when function called such way: { a =&gt; fn() } and can return list will return even count of elements as result and this will cause runtime error. Thought this easy to fix sometimes it is not spotable (. Always in key/value context we intend scalar value. I thought to post this as feature request on <code>perlbug</code> but not sure about this idea yet."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1520516081, "post_id": 48827278, "comment_id": 85353690, "body": "@EugenKonkov There is no such thing as a key\u2013value context, just list context. The <code>=&gt;</code> is a comma that happens to parse barewords on the left as strings. For example, <code>use constant FOO =&gt; 1, 2, 3</code> defines a list constant. So <code>=&gt;</code> cannot be changed to impose scalar context without massively breaking backwards compatibility."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1520517502, "post_id": 48827278, "comment_id": 85354711, "body": "<code>use constant FOO =&gt; 1,2,3</code> we should not touch. I speak <b>only</b> about <code>key&#47;value</code>. We can easily spot <code>{}</code> when parsing and setup some private flag to point <code>key&#47;value</code> context. I saw similar hacks in source code of perl for <code>@_</code> magic to work. Then <code>use strict &#39;hash&#39;</code> and enable by default for latest releases when <code>use Modern::Perl</code>. I think every body will happy if their code would not work if has security issue."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1520517508, "post_id": 48827278, "comment_id": 85354715, "body": "It seems <a href=\"https://blog.gerv.net/2014/10/new-class-of-vulnerability-in-perl-web-applications/#comment-43476\" rel=\"nofollow noreferrer\">I am not alone</a> about this. And <code>use strict &#39;hash&#39;</code> should be considered seriously. What do you think?"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 7, "last_activity_date": 1518785695, "creation_date": 1518785695, "answer_id": 48827278, "question_id": 48827044, "link": "https://stackoverflow.com/questions/48827044/why-perl-do-not-allow-hash-array-arguments-for-subroutines/48827278#48827278", "title": "Why perl do not allow %hash, @array arguments for subroutines?", "body": "<p>Perl is a largely list-oriented language, and distinguishes between singular and plural context. A subroutine argument list is a plural context. An array or hash in plural context is a list of its values. So a call like <code>foo(@bar)</code> flattens the array into its elements. This flattening allows argument lists to be concatenated conveniently, e.g.:</p>\n\n<pre><code>@result = map { $_ * 2 } @nums, 3, 4, return_a_list(), @more_nums;\n</code></pre>\n\n<p>Note also that before Perl 5, there were no references that can be passed around. There were array <em>variables</em>, but not arrays as first-class values. Operators such as <code>push</code> operate on a array variable. With Perl 5, we have references so we can pass array references around wrapped in scalars. The array operators were re-defined to still parse array variables (or dereferencing expressions), but logically operate on references. So you can declare <code>sub mypush(\\@@)</code> which will receive an array reference as first argument (when called in a way that respects this prototype).</p>\n\n<p>Perl 6 uses an approach that is more familiar when coming from languages such as Python where arrays are first-class objects. There is less context, less flattening.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 48827278, "answer_count": 1, "score": 0, "last_activity_date": 1518785695, "creation_date": 1518784937, "question_id": 48827044, "link": "https://stackoverflow.com/questions/48827044/why-perl-do-not-allow-hash-array-arguments-for-subroutines", "title": "Why perl do not allow %hash, @array arguments for subroutines?", "body": "<p>There is no technical reason to not allow <code>@array</code> and/or <code>%hash</code> as argument to subroutine. For example: <code>push @list, 1, 2</code>, - allow that.</p>\n\n<p>We can achieve that with <a href=\"https://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">prototypes</a>:</p>\n\n<pre><code>mypop (\\@)\n</code></pre>\n\n<p>But all the same we get that array/hash as reference:</p>\n\n<pre><code>sub test (\\%\\@) {\n    my( $hash, $array ) =  @_;\n    ...\n</code></pre>\n\n<p>What is the historical reason to not allow next?</p>\n\n<pre><code>my( %hash, @array ) =  @_;\n</code></pre>\n\n<p>And what is the benefit of prohibiting this?</p>\n"}, {"tags": ["perl", "cron", "fetch", "rrdtool"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518777865, "post_id": 48824639, "comment_id": 84653552, "body": "What do you get if you have the script just do one of the &quot;rrdtool&quot; commands and none of the filtering?"}, {"owner": {"reputation": 1, "user_id": 9369060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82605fb06ac4c80867824b03562cd835?s=128&d=identicon&r=PG&f=1", "display_name": "Siri", "link": "https://stackoverflow.com/users/9369060/siri"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518780918, "post_id": 48824639, "comment_id": 84655320, "body": "1518774900: 0.0000000000e+00 1518775200: 0.0000000000e+00 1518775500: 0.0000000000e+00 1518775800: 0.0000000000e+00 1518776100: 0.0000000000e+00 1518776400: 0.0000000000e+00 1518776700: 0.0000000000e+00 1518777000: 0.0000000000e+00 1518777300: 0.0000000000e+00 1518777600: 0.0000000000e+00 1518777900: 0.0000000000e+00 1518778200: 0.0000000000e+00 1518778500: 0.0000000000e+00 1518778800: 0.0000000000e+00 1518779100: 0.0000000000e+00 1518779400: 0.0000000000e+00 1518779700: 0.0000000000e+00 1518780000: 0.0000000000e+00 1518780300: 0.0000000000e+00 1518780600: -nan"}, {"owner": {"reputation": 1, "user_id": 9369060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82605fb06ac4c80867824b03562cd835?s=128&d=identicon&r=PG&f=1", "display_name": "Siri", "link": "https://stackoverflow.com/users/9369060/siri"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518781034, "post_id": 48824639, "comment_id": 84655375, "body": "please see in the attached image."}, {"owner": {"reputation": 3289, "user_id": 2480362, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/EYdoE.jpg?s=128&g=1", "display_name": "Steve Shipway", "link": "https://stackoverflow.com/users/2480362/steve-shipway"}, "edited": false, "score": 0, "creation_date": 1518984645, "post_id": 48824639, "comment_id": 84715556, "body": "Can you confirm that when you run it from the console, and when you run it from cron, you are running as the same user?  It might be a file permissions issue - e.g. you might be using root on the console (naughty) and your own user in cron.  Check the ownership and permissions on the rrd files and their parent directories."}, {"owner": {"reputation": 1, "user_id": 9369060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82605fb06ac4c80867824b03562cd835?s=128&d=identicon&r=PG&f=1", "display_name": "Siri", "link": "https://stackoverflow.com/users/9369060/siri"}, "edited": false, "score": 0, "creation_date": 1519020710, "post_id": 48824639, "comment_id": 84723925, "body": "Thanks everyone here. Now I got the answer it maybe the first rrd file I retrieve with rrdtool fetch happens exactly every 5 minutes and the cronjob does the same with the same point in time . That&#39;s a reason why I got nan  when it comes to cronjob. The solution for this is to compromise the new rrd to be late 5 minutes compared to the first rrd."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9369060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82605fb06ac4c80867824b03562cd835?s=128&d=identicon&r=PG&f=1", "display_name": "Siri", "link": "https://stackoverflow.com/users/9369060/siri"}, "is_accepted": true, "score": 0, "last_activity_date": 1519020980, "creation_date": 1519020980, "answer_id": 48860453, "question_id": 48824639, "link": "https://stackoverflow.com/questions/48824639/cronjob-for-rrdtool-fetch/48860453#48860453", "title": "Cronjob for rrdtool fetch", "body": "<p>Thanks everyone here. Now I got the answer it maybe the first rrd file I retrieve with rrdtool fetch happens exactly every 5 minutes and the cronjob does the same with the same point in time . That's a reason why I got nan  when it comes to cronjob. The solution for this is to compromise the new rrd to be late 5 minutes compared to the first rrd.</p>\n\n<pre><code>rrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_system_4703.rrd AVERAGE |tail -3|head -n1 |cut -d\":\" -f2 |tr -d \" \" &gt;&gt; /home/zon/rrd-aggregate/agg.log\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9369060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82605fb06ac4c80867824b03562cd835?s=128&d=identicon&r=PG&f=1", "display_name": "Siri", "link": "https://stackoverflow.com/users/9369060/siri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 48860453, "answer_count": 1, "score": 0, "last_activity_date": 1519020980, "creation_date": 1518776544, "last_edit_date": 1519020791, "question_id": 48824639, "link": "https://stackoverflow.com/questions/48824639/cronjob-for-rrdtool-fetch", "title": "Cronjob for rrdtool fetch", "body": "<p>I have created bash file and it can run properly with console but not with crontab. In <code>/home/zon/rrd-aggregate/agg.log</code> it returns <code>nan</code>. But if it runs with console it shows the value from rrd correctly.</p>\n\n# aggregate.sh\n\n<pre><code>cat aggregate-rrd.sh\n\nrm -rf /home/zon/rrd-aggregate/agg.log\n\n\nrrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_system_4703.rrd AVERAGE |tail -2|head -n1 |cut -d\":\" -f2 |tr -d \" \" &gt;&gt; /home/zon/rrd-aggregate/agg.log\n\nrrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_user_4704.rrd AVERAGE |tail -2|head -n1 |cut -d\":\" -f2 |tr -d \" \" &gt;&gt; /home/zon/rrd-aggregate/agg.log\n\nrrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_nice_4702.rrd AVERAGE |tail -2|head -n1 |cut -d\":\" -f2 |tr -d \" \" &gt;&gt; /home/zon/rrd-aggregate/agg.log\n</code></pre>\n\n<p>In log file, it shows only nan.</p>\n\n<p>if i run from console it works like this.</p>\n\n<p>rrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_system_4703.rrd AVERAGE |tail -2|head -n1 |cut -d\":\" -f2 |tr -d \" \"\n1.0488333333e+00</p>\n\n<p><a href=\"https://i.stack.imgur.com/lk9pi.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>rrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_nice_4702.rrd AVERAGE</p>\n\n<p>it shows more than this , but i just put a sample here.</p>\n\n<p>1518779700: 2.2383255814e+00\n1518780000: 9.6494444444e-01\n1518780300: 2.0843398365e+00\n1518780600: -nan</p>\n\n<p><a href=\"https://i.stack.imgur.com/sao7V.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>new code looks like this line as follows:</p>\n\n<pre><code>rrdtool fetch /var/www/html/cacti/rra/iboss-el-srv_linux_cpu_system_4703.rrd AVERAGE |tail -3|head -n1 |cut -d\":\" -f2 |tr -d \" \" &gt;&gt; /home/zon/rrd-aggregate/agg.log\n</code></pre>\n"}, {"tags": ["perl", "if-statement", "replace"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1518775614, "post_id": 48824284, "comment_id": 84652095, "body": "I think you meant <code>($checked eq &#39;true&#39;)</code> - <code>==</code> is for comparing numbers"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1518775828, "post_id": 48824284, "comment_id": 84652228, "body": "<code>print $fh4</code> does not write into the database, it writes into a file instead. Is that what you really want to do? I see you are using DBI because of the <code>fetchrow_array</code> method, so there&#39;s also the <a href=\"http://p3rl.org/DBI#do\" rel=\"nofollow noreferrer\"><code>do</code> method</a> together with an SQL <code>UPDATE</code> or <code>INSERT</code> statement. If you please would amend your question with the database schema/column names, someone can write an answer with the exactly correct SQL."}, {"owner": {"reputation": 11, "user_id": 9024338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12017ea903369d8528f1b8631d69784?s=128&d=identicon&r=PG&f=1", "display_name": "HalloBallo_123", "link": "https://stackoverflow.com/users/9024338/halloballo-123"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518776106, "post_id": 48824284, "comment_id": 84652391, "body": "@ChrisTurner okay yes thanks .. but it also doesent replace &#39;true&#39;"}, {"owner": {"reputation": 11, "user_id": 9024338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12017ea903369d8528f1b8631d69784?s=128&d=identicon&r=PG&f=1", "display_name": "HalloBallo_123", "link": "https://stackoverflow.com/users/9024338/halloballo-123"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1518776114, "post_id": 48824284, "comment_id": 84652400, "body": "@daxim sorry yes it writes into a file and the database is not necessary in my question"}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 0, "last_activity_date": 1518776275, "creation_date": 1518776275, "answer_id": 48824539, "question_id": 48824284, "link": "https://stackoverflow.com/questions/48824284/perl-replace-string/48824539#48824539", "title": "Perl replace string", "body": "<pre><code>while (my ($username, $description, $checked, $record_date) = $query4-&gt;fetchrow_array) {\n    # change the \"checked\" text when it's \"true\",\n    # otherwise leave it as it is.\n    $checked = 'erledigt' if $checked eq 'true';\n    print $fh4 \"$username;$description;$checked;$record_date\\n\"; \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9024338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12017ea903369d8528f1b8631d69784?s=128&d=identicon&r=PG&f=1", "display_name": "HalloBallo_123", "link": "https://stackoverflow.com/users/9024338/halloballo-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 48824539, "answer_count": 1, "score": 0, "last_activity_date": 1519560999, "creation_date": 1518775473, "last_edit_date": 1519560999, "question_id": 48824284, "link": "https://stackoverflow.com/questions/48824284/perl-replace-string", "title": "Perl replace string", "body": "<p>Is it possible to replace in Perl with an <code>if</code>?</p>\n\n<p>I want to replace if 'true' from a database with <code>erledigt;</code></p>\n\n<pre><code>while ( my ($username, $description, $checked, $record_date) = $query4-&gt;fetchrow_array ) {\n\n    if ( $checked == 'true' ) {\n        print $fh4 'erledigt'\n    }\n    else {\n        print $fh4 ($checked)\n    }\n\n    {\n        print $fh4 \"$username;$description;$checked;$record_date\\n\";\n    }\n} \n</code></pre>\n\n<p>I get <code>erledigt</code> in every line except for <code>true</code>.</p>\n"}, {"tags": ["perl", "loops"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 3, "creation_date": 1518774981, "post_id": 48824011, "comment_id": 84651671, "body": "Always put <code>use strict; use warnings qw(all);</code> at the beginning of your scripts. Also, please copy-past your real code (that one doesn&#39;t even compile)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518774928, "post_id": 48824113, "comment_id": 84651644, "body": "I have tried that!....but the count is still showing as zero even though I have matching values in arrays"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775024, "post_id": 48824113, "comment_id": 84651693, "body": "do you declare <code>$a</code> and <code>$b</code> before using them in the loop?, if not, my <code>my</code>before  <code>foreach my $a(@array1)</code> for example"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775236, "post_id": 48824113, "comment_id": 84651829, "body": "@SIVA also why do you put capital letters in <code>my</code> <code>foreach</code> <code>if</code> ?  and why the space between <code>$</code> and <code>count</code> ?  do you <code>use strict</code> <code>use warnings</code>? you should always do this"}, {"owner": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775327, "post_id": 48824113, "comment_id": 84651893, "body": "Using Mobile stack site,it automatically makes the first letter capital after space"}, {"owner": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775412, "post_id": 48824113, "comment_id": 84651963, "body": "Yes, I do use strict and warnings"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775777, "post_id": 48824113, "comment_id": 84652194, "body": "@SIVA, edited my post, but please next time post verifiable code :/"}, {"owner": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775798, "post_id": 48824113, "comment_id": 84652206, "body": "What would happen when I add next after count++,would it come out of the loop as soon as it matches one value?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518776538, "post_id": 48824113, "comment_id": 84652682, "body": "<code>next;</code> will jump to the next element of the second loop, <code>last;</code> will end your second loop and so, jump to the next element of the first loop. if you want to end your compare on the first match, put <code>last if $count;</code> right after the second loop and also right after <code>$count++</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1518782117, "post_id": 48824113, "comment_id": 84655962, "body": "<code>$a</code> and <code>$b</code> are magic variables used by sort. They&#39;re a bad idea to use as loop iterators. Above and beyond how single letter variable names are generally bad."}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 3, "last_activity_date": 1518786193, "last_edit_date": 1518786193, "creation_date": 1518774878, "answer_id": 48824113, "question_id": 48824011, "link": "https://stackoverflow.com/questions/48824011/how-to-access-a-local-variable-with-in-a-foreach-loop-outside-of-its-scope/48824113#48824113", "title": "How to access a local variable with in a foreach loop outside of its scope?", "body": "<p><code>$count</code> is declared into the <code>foreach</code> loop, it doesn't exist outside this loop, if you want to use <code>$count</code> outside the loop, simply put <code>my $count=0</code> before the first <code>foreach</code> and remove the one into the <code>foreach</code></p>\n\n<p>here's what you want:</p>\n\n<pre><code>my @array1=('India');\nmy @array2=('India','America');\nmy $count=0;\nforeach my $country1(@array1)\n{\n   foreach my $country2(@array2)\n   {\n        if($country1 eq $country2)\n        {\n             $count++;\n        }\n\n   } \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "edited": false, "score": 0, "creation_date": 1518775358, "post_id": 48824159, "comment_id": 84651919, "body": "Tried this,still count has 0 even though there are matching values"}], "tags": [], "owner": {"reputation": 60, "user_id": 8532942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l-mD60ZgSGI/AAAAAAAAAAI/AAAAAAAAAOU/SyR71QyT57U/photo.jpg?sz=128", "display_name": "Gareth O&#39;Connor", "link": "https://stackoverflow.com/users/8532942/gareth-oconnor"}, "is_accepted": false, "score": 0, "last_activity_date": 1518782190, "last_edit_date": 1518782190, "creation_date": 1518775037, "answer_id": 48824159, "question_id": 48824011, "link": "https://stackoverflow.com/questions/48824011/how-to-access-a-local-variable-with-in-a-foreach-loop-outside-of-its-scope/48824159#48824159", "title": "How to access a local variable with in a foreach loop outside of its scope?", "body": "<p>Declare variable outside of the loops, you've also got a typo in $count:</p>\n\n<pre><code>my $count = 0;\nforeach $a (@array1) {\n   foreach $b (@array2) {\n      if ( $a eq $b ) {\n         $count++;\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9368906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5679432ef5cbb605f7e0b6990b4c7fd3?s=128&d=identicon&r=PG&f=1", "display_name": "SIVA", "link": "https://stackoverflow.com/users/9368906/siva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518786193, "creation_date": 1518774566, "last_edit_date": 1518776056, "question_id": 48824011, "link": "https://stackoverflow.com/questions/48824011/how-to-access-a-local-variable-with-in-a-foreach-loop-outside-of-its-scope", "title": "How to access a local variable with in a foreach loop outside of its scope?", "body": "<p>I have two arrays of string data type and i am comparing those using foreach loops and raising the counter when a match is found</p>\n\n<pre><code>my  @array1 = ('India');\nmy  @array2 = ('India', 'America');\nforeach my $a (@array1) {\n    foreach my $b (@array2) {\n        my $count=0;  \n        if($a eq $b) {\n             $count++;\n        }\n    }\n}\n</code></pre>\n\n<p>Now I want to use this count variable outside of its scope </p>\n\n<pre><code> if ($count &gt; 0) { \n      call_some_function();\n }\n</code></pre>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["perl", "parsing", "mechanize"], "comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 2, "creation_date": 1518772995, "post_id": 48823410, "comment_id": 84650447, "body": "soooo, what&#39;s the question?"}, {"owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1518775274, "post_id": 48823410, "comment_id": 84651859, "body": "how to loop over the pages - how to do the looping?"}, {"owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1518784210, "post_id": 48823410, "comment_id": 84657197, "body": "I use the last command ; it is like the break statement in C (as used in loops); it immediately exits the loop in question. If the LABEL is omitted, the command refers to the innermost enclosing loop. The last EXPR  allows a label name to be computed at run time, and is otherwise identical to last LABEL . The continue block, if any, is not executed: `         LINE: while (&lt;STDIN&gt;) {             last LINE if /^$/;  # exit when done with header             #...         }` I am tryin to incorporate this into my code. Thanks to Daxim"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "edited": false, "score": 0, "creation_date": 1518784236, "post_id": 48824302, "comment_id": 84657212, "body": "I use the last command ; it is like the break statement in C (as used in loops); it immediately exits the loop in question. If the LABEL is omitted, the command refers to the innermost enclosing loop. The last EXPR allows a label name to be computed at run time, and is otherwise identical to last LABEL . The continue block, if any, is not executed: ` LINE: while (&lt;STDIN&gt;) { last LINE if /^$/; # exit when done with header #... }` I am tryin to incorporate this into my code. Thanks to Daxim"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 2, "last_activity_date": 1518775535, "creation_date": 1518775535, "answer_id": 48824302, "question_id": 48823410, "link": "https://stackoverflow.com/questions/48823410/how-to-iterate-over-a-300-pages-with-a-parser-with-perlmechanize/48824302#48824302", "title": "How to iterate over a 300 pages with a parser with Perl::Mechanize?", "body": "<p>After parsing each page, check for the existence of the <strong><code>next \u203a</code></strong> link at the bottom. When you have arrived on page 292, there are no more pages, so you are done and can exit the loop with e.g. <a href=\"http://p3rl.org/last\" rel=\"nofollow noreferrer\"><code>last</code></a>.</p>\n"}], "owner": {"reputation": 77, "user_id": 9283927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c3e147aeb68ce27b10ea76e91faf625?s=128&d=identicon&r=PG&f=1", "display_name": "malaga", "link": "https://stackoverflow.com/users/9283927/malaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 48824302, "answer_count": 1, "score": 1, "last_activity_date": 1518784503, "creation_date": 1518772435, "last_edit_date": 1518784503, "question_id": 48823410, "link": "https://stackoverflow.com/questions/48823410/how-to-iterate-over-a-300-pages-with-a-parser-with-perlmechanize", "title": "How to iterate over a 300 pages with a parser with Perl::Mechanize?", "body": "<p>I have written a little parser that extracts the data out of a page.</p>\n\n<pre><code>use strict; \nuse warnings FATAL =&gt; qw#all#; \nuse LWP::UserAgent; \nuse HTML::TreeBuilder::XPath; \nuse Data::Dumper; \n\nmy $handler_relurl      = sub { q#https://europa.eu# . $_[0] }; \nmy $handler_trim        = sub { $_[0] =~ s#^\\s*(.+?)\\s*$#$1#r }; \nmy $handler_val         = sub { $_[0] =~ s#^[^:]+:\\s*##r }; \nmy $handler_split       = sub { [ split $_[0], $_[1] ] }; \nmy $handler_split_colon = sub { $handler_split-&gt;( qr#; #, $_[0] ) }; \nmy $handler_split_comma = sub { $handler_split-&gt;( qr#, #, $_[0] ) }; \n\nmy $conf = \n{ \n    url      =&gt; q#https://europa.eu/youth/volunteering/evs-organisation_en#, \n    parent   =&gt; q#//div[@class=\"vp ey_block block-is-flex\"]#, \n    children =&gt; \n    { \n        internal_url =&gt; [ q#//a/@href#, [ $handler_relurl ] ], \n        external_url =&gt; [ q#//i[@class=\"fa fa-external-link fa-lg\"]/parent::p//a/@href#, [ $handler_trim ] ], \n        title        =&gt; [ q#//h4# ], \n        topics       =&gt; [ q#//div[@class=\"org_cord\"]#, [ $handler_val, $handler_split_colon ] ], \n        location     =&gt; [ q#//i[@class=\"fa fa-location-arrow fa-lg\"]/parent::p#, [ $handler_trim ] ], \n        hand         =&gt; [ q#//i[@class=\"fa fa-hand-o-right fa-lg\"]/parent::p#, [ $handler_trim, $handler_split_comma ] ], \n        pic_number   =&gt; [ q#//p[contains(.,'PIC no')]#, [ $handler_val ] ], \n    } \n}; \n\nprint Dumper browse( $conf ); \n\nsub browse \n{ \n    my $conf = shift; \n\n    my $ref = [ ]; \n\n    my $lwp_useragent = LWP::UserAgent-&gt;new( agent =&gt; q#IE 6#, timeout =&gt; 10 ); \n    my $response = $lwp_useragent-&gt;get( $conf-&gt;{url} ); \n    die $response-&gt;status_line unless $response-&gt;is_success; \n    my $content = $response-&gt;decoded_content; \n\n    my $html_treebuilder_xpath = HTML::TreeBuilder::XPath-&gt;new_from_content( $content ); \n    my @nodes = $html_treebuilder_xpath-&gt;findnodes( $conf-&gt;{parent} ); \n    for my $node ( @nodes ) \n    { \n        push @$ref, { };  \n\n        while ( my ( $key, $val ) = each %{$conf-&gt;{children}} ) \n        { \n            my $xpath    = $val-&gt;[0]; \n            my $handlers = $val-&gt;[1] // [ ]; \n\n            $val = ($node-&gt;findvalues( qq#.$xpath# ))[0] // next; \n            $val = $_-&gt;( $val ) for @$handlers; \n            $ref-&gt;[-1]-&gt;{$key} = $val; \n        } \n    } \n\n    return $ref; \n}\n</code></pre>\n\n<p>on a first glance the issue about scraping from page to page - can be solved via different approaches:</p>\n\n<p>we have the pagination on the bottom of the page: see for example:</p>\n\n<pre><code>http://europa.eu/youth/volunteering/evs-organisation_en?country=&amp;topic=&amp;field_eyp_vp_accreditation_type=All&amp;town=&amp;name=&amp;pic=&amp;eiref=&amp;inclusion_topic=&amp;field_eyp_vp_feweropp_additional_mentoring_1=&amp;field_eyp_vp_feweropp_additional_physical_environment_1=&amp;field_eyp_vp_feweropp_additional_other_support_1=&amp;field_eyp_vp_feweropp_other_support_text=&amp;&amp;page=5\n</code></pre>\n\n<p>and</p>\n\n<pre><code>http://europa.eu/youth/volunteering/evs-organisation_en?country=&amp;topic=&amp;field_eyp_vp_accreditation_type=All&amp;town=&amp;name=&amp;pic=&amp;eiref=&amp;inclusion_topic=&amp;field_eyp_vp_feweropp_additional_mentoring_1=&amp;field_eyp_vp_feweropp_additional_physical_environment_1=&amp;field_eyp_vp_feweropp_additional_other_support_1=&amp;field_eyp_vp_feweropp_other_support_text=&amp;&amp;page=6\n</code></pre>\n\n<p>and</p>\n\n<pre><code>http://europa.eu/youth/volunteering/evs-organisation_en?country=&amp;topic=&amp;field_eyp_vp_accreditation_type=All&amp;town=&amp;name=&amp;pic=&amp;eiref=&amp;inclusion_topic=&amp;field_eyp_vp_feweropp_additional_mentoring_1=&amp;field_eyp_vp_feweropp_additional_physical_environment_1=&amp;field_eyp_vp_feweropp_additional_other_support_1=&amp;field_eyp_vp_feweropp_other_support_text=&amp;&amp;page=7\n</code></pre>\n\n<p>well we can set this url (s) as a base -</p>\n\n<p>if we have an array from which we load the urls that need to be visited - we would come across all the pages...</p>\n\n<p><strong>Note:</strong> we have more than 6000 results - and on each page 21 little entries that represent one record: so we have approx 305 Pages that we have to visit.\nwe can increment the pages (that are shown above) and count to the number of 305</p>\n\n<p>Hardcoding the total number of pages isn't practical as it could vary. we could:\n- extract the number of results from the first page, divide that by the results per page ( 21 ) and round it down.\n- extract the url from the \"last\" link at the bottom of the page, create a URI object and read the page number from the query string.</p>\n\n<p>now i think i have to Loop over all the pages.</p>\n\n<pre><code>my $url_pattern = 'https://europa.eu/youth/volunteering/evs-organisation_en&amp;page=%s'; \n\nfor my $page ( 0 .. $last ) \n{ \n    my $url = sprintf $url_pattern, $page; \n\n    ... \n}\n</code></pre>\n\n<p>or i try to incorporate paging into the $conf, perhaps an iterator which upon each call fetches the next node...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1518752248, "post_id": 48819655, "comment_id": 84643222, "body": "Always use <code>use strict; use warnings qw( all );</code>!!!"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518786210, "post_id": 48819655, "comment_id": 84658379, "body": "@ikegami, Why not just <code>use warnings;</code>?  It&#39;s shorter to type."}], "answers": [{"tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 8, "last_activity_date": 1518752246, "creation_date": 1518752246, "answer_id": 48819705, "question_id": 48819655, "link": "https://stackoverflow.com/questions/48819655/perl-and-array-issue/48819705#48819705", "title": "Perl : $_ and $array[$_] issue", "body": "<p><code>$_</code> is the actual element you're looking at. <code>$people[$_]</code> is getting the <code>$_</code>th element out of <code>@people</code>. It's intended to be used with numerical indices, so it numifies its argument. Taking a letter and \"converting\" it to a number just converts to zero since it can't parse a number out of it. So <code>$people[$_]</code> is just <code>$people[0]</code> when <code>$_</code> is not a number. If you try the same experiment where some of the list elements are actually numerical, you'll get some more interesting results.</p>\n\n<p>Try:</p>\n\n<pre><code>use strict;\nmy @people = qw{a b c 3 2 1};\nforeach (@people){\n    print $_,\"$people[$_]\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>aa\nba\nca\n33\n2c\n1b\n</code></pre>\n\n<p>Since, in the first three cases, we couldn't parse <code>a</code>, <code>b</code>, or <code>c</code> as numbers so we got the zeroth element. Then, we can actually convert <code>3</code>, <code>2</code>, and <code>1</code> to numbers, so we get elements 3, 2, and then 1.</p>\n\n<p><strong>EDIT:</strong> As mentioned in a comment by @ikegami, put <code>use warnings</code> at the top of your file in addition to <code>use strict</code> to get warned about this sort of thing.</p>\n"}], "owner": {"reputation": 385, "user_id": 9023753, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b2fd523f9da0a97d8dc639cca0e6c938?s=128&d=identicon&r=PG&f=1", "display_name": "huang cheng", "link": "https://stackoverflow.com/users/9023753/huang-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 48819705, "answer_count": 1, "score": 1, "last_activity_date": 1518752246, "creation_date": 1518751773, "last_edit_date": 1518752175, "question_id": 48819655, "link": "https://stackoverflow.com/questions/48819655/perl-and-array-issue", "title": "Perl : $_ and $array[$_] issue", "body": "<p>Below is my code , please review.   </p>\n\n<pre><code>use strict;\nmy @people = qw{a b c d e f};\nforeach (@people){\n    print $_,\"$people[$_]\\n\";\n}\n</code></pre>\n\n<p>Below is the output, </p>\n\n<pre><code>[~/perl]$ perl test.pl\naa             #why the output of $people[$_] is not same with $_?\nba\nca\nda\nea\nfa\n</code></pre>\n\n<p>Thanks for your asking.</p>\n"}, {"tags": ["regex", "string", "perl", "eval", "pcre"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "edited": false, "score": 0, "creation_date": 1518733869, "post_id": 48817350, "comment_id": 84638710, "body": "What does precompiling the regex give me?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "edited": false, "score": 0, "creation_date": 1518733921, "post_id": 48817350, "comment_id": 84638736, "body": "@Prgrm.celeritas The main value is that <code>qr&#47;&#47;</code> supplies proper quoting, which matters if you have any backslashes in the regex. Right now, you first need <code>&#39;&#39;</code>-string quoting (which is usually simple), but the result of the string will be subject to another round of regex-escape processing. For example, the regex <code>&#47;\\w+&#47;</code> would have to be written <code>&#39;\\\\w+&#39;</code>. If you actually load these regexes from a file, it doesn&#39;t matter."}, {"owner": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "edited": false, "score": 0, "creation_date": 1518734412, "post_id": 48817350, "comment_id": 84638914, "body": "I don&#39;t seem to have a problem with using just <code>\\w+</code> in a regexp string. Though the ability to add options is nice though"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "edited": false, "score": 0, "creation_date": 1518734566, "post_id": 48817350, "comment_id": 84638971, "body": "Oh, you&#39;re right! Note that you can also add pattern modifiers within a pattern, like <code>(?i:foo)</code> \u2013 just like <code>&#47;foo&#47;i</code>"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 3, "last_activity_date": 1518733773, "creation_date": 1518733773, "answer_id": 48817350, "question_id": 48817296, "link": "https://stackoverflow.com/questions/48817296/perl-deferred-interpolation-of-string/48817350#48817350", "title": "Perl deferred interpolation of string", "body": "<p>Perl resolves the interpolation when that expression is evaluated. For that, it is sufficient to use a subroutine, no <code>eval</code> needed:</p>\n\n<pre><code>...\nbucket =&gt; sub { \"remote report: $1\" },\n...\nprint $e-&gt;{bucket}-&gt;();\n</code></pre>\n\n<p>Note that you effectively eval your regexes as well. You can use pre-compiled regex objects in your hash, with the <code>qr//</code> operator:</p>\n\n<pre><code>...\nregex =&gt; qr/^some message:(.*)/i,\n...\nif ($message =~ /$e-&gt;{regex}/) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "edited": false, "score": 0, "creation_date": 1518734701, "post_id": 48817485, "comment_id": 84639030, "body": "Though this would require the capture groups to align positionally with the specifier characters correct?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "edited": false, "score": 1, "creation_date": 1518734809, "post_id": 48817485, "comment_id": 84639067, "body": "@Prgrm.celeritas Yes, just like with <code>$1..$n</code>. You actually can change the order of arguments in the format string, though. See the linked docs for more information."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 3, "last_activity_date": 1518734448, "creation_date": 1518734448, "answer_id": 48817485, "question_id": 48817296, "link": "https://stackoverflow.com/questions/48817296/perl-deferred-interpolation-of-string/48817485#48817485", "title": "Perl deferred interpolation of string", "body": "<p>You could use <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code></a>-style format strings:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $message = 'some message: I am bob';\n\nmy @buckets = (\n    {\n        regex  =&gt; qr/^some message:(.*)/,\n        bucket =&gt; 'remote report: %s',\n    },\n    # more pairs\n);\n\nforeach my $e (@buckets) {\n    if (my @matches = ($message =~ /$e-&gt;{regex}/ig)) {\n        printf($e-&gt;{bucket}, @matches);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 48817350, "answer_count": 2, "score": 1, "last_activity_date": 1518734448, "creation_date": 1518733455, "question_id": 48817296, "link": "https://stackoverflow.com/questions/48817296/perl-deferred-interpolation-of-string", "title": "Perl deferred interpolation of string", "body": "<p>I have a situation where there is a triage script that takes in a message, compares it against a list of regex's and the first one that matches sets the bucket. Some example code would look like this.</p>\n\n<pre><code>my $message = 'some message: I am bob';\n\nmy @buckets = (\n    {\n        regex =&gt; '^some message:(.*)',\n        bucket =&gt; '\"remote report: $1\"',\n    },\n    # more pairs\n);\n\nforeach my $e (@buckets) {\n    if ($message =~ /$e-&gt;{regex}/i) {\n        print eval \"$e-&gt;{bucket}\";\n    }\n}\n</code></pre>\n\n<p>This code will give <code>remote report:  I am bob</code>. I keep looking at this and feel like there has to be a better way to do this then it is done now. especially with the double quoting (<code>'\"\"'</code>) in the bucket. Is there a better way for this to be handled?</p>\n"}, {"tags": ["r", "perl", "statistics"], "comments": [{"owner": {"reputation": 523, "user_id": 5348211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBL6c.jpg?s=128&g=1", "display_name": "Mark S", "link": "https://stackoverflow.com/users/5348211/mark-s"}, "edited": false, "score": 2, "creation_date": 1518732115, "post_id": 48816293, "comment_id": 84637966, "body": "Do you really need boxplots for the summaries, or could you instead just show a table of statistics, such as those in your <code>reduce_size</code> sub? You could also modify it to produce the same values (ie, whiskers, hinges) returned by <code>boxplot.stats()</code> in R, and then list them in a table or create a custom plot based on those."}, {"owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "edited": false, "score": 2, "creation_date": 1518759150, "post_id": 48816293, "comment_id": 84644741, "body": "Why are you returning a array &quot;return @return&quot;. You should be returning array reference. &quot;return \\@return&quot;"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 523, "user_id": 5348211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBL6c.jpg?s=128&g=1", "display_name": "Mark S", "link": "https://stackoverflow.com/users/5348211/mark-s"}, "edited": false, "score": 0, "creation_date": 1518803522, "post_id": 48816293, "comment_id": 84668806, "body": "@MarkS indeed, the solution to this problem is to simply translate R&#39;s <code>fivenum</code> function"}], "answers": [{"tags": [], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "is_accepted": true, "score": 0, "last_activity_date": 1518803218, "creation_date": 1518803218, "answer_id": 48832261, "question_id": 48816293, "link": "https://stackoverflow.com/questions/48816293/reducing-data-size-to-make-a-boxplot/48832261#48832261", "title": "Reducing data size to make a boxplot", "body": "<p>The key here is to translate R's <code>fivenum</code> function:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; use warnings; use Cwd 'getcwd'; use feature 'say';\nmy $TOP_DIRECTORY = getcwd();\nlocal $SIG{__WARN__} = sub {#kill the program if there are any warnings\n    my $message = shift;\n    my $fail_filename = \"$TOP_DIRECTORY/$0.FAIL\";\n    open my $fh, '&gt;', $fail_filename or die \"Can't write $fail_filename: $!\";\n    printf $fh (\"$message @ %s\\n\", getcwd());\n    close $fh;\n    die \"$message\\n\";\n};#http://perlmaven.com/how-to-capture-and-save-warnings-in-perl\n\nuse POSIX qw(ceil floor);\n\nsub fivenum {\n    my $array = shift;\n    my @x = sort {$a &lt;=&gt; $b} @{ $array };\n    printf(\"There are %u elements.\\n\", scalar @{ $array });\n    my $n = scalar @{ $array };\n    if ($n == 0) {\n        print \"no values were entered into fivenum.\\n\";\n        die;\n    }\n    my $n4 = floor(($n+3)/2)/2;\n    my @d = (1, $n4, ($n +1)/2, $n+1-$n4, $n);#d &lt;- c(1, n4, (n + 1)/2, n + 1 - n4, n)\n    my (@floor_d, @ceiling_d);\n    foreach my $d (0..4) {\n          $floor_d[$d] = floor($d[$d]);\n        $ceiling_d[$d] =  ceil($d[$d]);\n    }\n    my @sum_array;\n    foreach my $e (0..4) {\n        if (not defined $floor_d[$e]) {\n            say \"\\$floor_d[$e] isn't defined.\";\n            die;\n        }\n        if (not defined $ceiling_d[$e]) {\n            say \"\\$ceiling_d[$e] isn't defined.\";\n            die;\n        }\n        if (!defined $x[$floor_d[$e]-1]) {\n            say \"\\$x[$floor_d[$e-1]-1] isn't defined.\";\n            die;\n        }\n        if (!defined $x[$ceiling_d[$e]-1]) {\n            say \"\\$x[$ceiling_d[$e]-1] isn't defined.\";\n            die;\n        }\n        printf(\"sum_array has %u elements.\\n\", scalar @sum_array);\n        push @sum_array, (0.5 * ($x[$floor_d[$e]-1] + $x[$ceiling_d[$e]-1]));\n    }\n    return @sum_array;\n}\n\nmy @x = qw(0.14082834  0.09748790  1.73131507  0.87636009 -1.95059594  0.73438555\n-0.03035726  1.46675970 -0.74621349 -0.72588772  0.63905160  0.61501527\n -0.98983780 -1.00447874 -0.62759469  0.66206163  1.04312009 -0.10305385\n  0.75775634  0.32566578);\n\nmy @y = fivenum(\\@x);\n\nsay join (',', @y);\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 48832261, "answer_count": 1, "score": 0, "last_activity_date": 1518803218, "creation_date": 1518728879, "last_edit_date": 1518729293, "question_id": 48816293, "link": "https://stackoverflow.com/questions/48816293/reducing-data-size-to-make-a-boxplot", "title": "Reducing data size to make a boxplot", "body": "<p>I am working with large arrays from data files using perl, and then placing them into R to make boxplots.  This works very well with small datasets.  However, I want to enter in large data sets to present to my colleagues.\nI would like a way to reduce the number of data points, and keep the boxplot looking the same (same max, min, quartiles, etc.) because perl eats up memory fast (each dataset is about 5GB of RAM) and so does R.  I'm sure there is a 10MB solution for what is currently a 120GB problem.</p>\n\n<p>Is there a way to reduce the data size so it will look the same in the boxplot <em>before</em> I put it into R?  I feel stupid, because what I have done so far only works for trivially small data sets like below:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; use warnings; use Cwd 'getcwd';\nmy $TOP_DIRECTORY = getcwd();\nlocal $SIG{__WARN__} = sub {#kill the program if there are any warnings\n    my $message = shift;\n    my $fail_filename = \"$TOP_DIRECTORY/$0.FAIL\";\n    open my $fh, '&gt;', $fail_filename or die \"Can't write $fail_filename: $!\";\n    printf $fh (\"$message @ %s\\n\", getcwd());\n    close $fh;\n    die \"$message\\n\";\n};#http://perlmaven.com/how-to-capture-and-save-warnings-in-perl\n\nsub reduce_size {#returns min, lower quartile, median, upper quartile, and max if &gt; 5 elements\n# R is not able to handle large arrays as Perl is.  This subroutine reduces the work on R, which can't handle the size\n#this does NOT work for means\n    my $x = shift;\n#   if (scalar @{ $x } &lt; 6) {\n#       return @{ $x };\n#   }\n    my @sorted = sort {$a &lt;=&gt; $b} @{ $x };\n    my $n = scalar @{ $x };\n    my @return = $sorted[0];#minimum\n    if (($n % 2) == 0) {\n        $return[1] = $sorted[$n/4 ] ;\n        $return[2] = ($sorted[$n/2 - 1] + $sorted[$n/2])/2;\n        $return[3] = $sorted[3*$n/4 ] ;\n    } else {\n        my $i = sprintf(\"%.0f\", $n/4);\n        $return[1] = ($sorted[ $i - 1] + $sorted[$i])/2;\n        $return[2] = $sorted[$n/2];\n        $i = sprintf(\"%.0f\", 3*$n/4);\n        $return[3] = ($sorted[$i-1] + $sorted[$i])/2;\n    }\n    push @return, $sorted[-1];#maximum\n    return @return;\n}\n\nmy @x = qw(-0.82312297 -0.08696213  2.23698132  0.20834949  0.73162884  0.22891093 1.04418464 -0.67952858  0.08111757);\n\nmy @y = reduce_size(\\@x);\n\nprint join (',', @y) . \"\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 6, "creation_date": 1518705955, "post_id": 48809624, "comment_id": 84623087, "body": "<i>&quot;I don&#39;t want to move to <code>if ( @{ $padSrc-&gt;{inouts} } )</code> kind of approach, as that will increase my line count&quot;</i> What kind of design principle is that? Just delete all the newlines if it worries you so much. It&#39;s a disgraceful attitude."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 5, "last_activity_date": 1518705548, "creation_date": 1518705548, "answer_id": 48809801, "question_id": 48809624, "link": "https://stackoverflow.com/questions/48809624/replacing-deprecated-definedarray-in-a-ternary-operation/48809801#48809801", "title": "Replacing deprecated &quot;defined(@array)&quot; in a ternary operation", "body": "<p><code>defined(@array)</code> has never done what it looks like it does. It always just returns whether <code>@array</code> is non-empty.</p>\n\n<pre><code>perl5.10.1 -E 'say defined(@foo)'                # \"\"\nperl5.10.1 -E '@foo=(); say defined(@foo)'       # \"\"\nperl5.10.1 -E '@foo=(42); say defined(@foo)'     # \"1\"\nperl5.10.1 -E '@foo=(undef); say defined(@foo)'  # \"1\"\n</code></pre>\n\n<p>Anywhere that you test <code>defined(@array)</code> in your code, you can replace it with\n<code>@array != 0</code> or <code>scalar(@array)</code> and your code will work exactly the same (plus or minus some deprecation warnings).</p>\n\n<p>As <code>if (condition) ...</code> or <code>(condition) ? expr1 : expr2</code> or <code>while (condition)</code> always evaluate <code>condition</code> in scalar context, the <code>scalar</code> is optional in these constructions, and you can replace, say <code>if (defined(@foo))</code> with <code>if (@foo)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1532113262, "last_edit_date": 1532113262, "creation_date": 1518706333, "answer_id": 48810029, "question_id": 48809624, "link": "https://stackoverflow.com/questions/48809624/replacing-deprecated-definedarray-in-a-ternary-operation/48810029#48810029", "title": "Replacing deprecated &quot;defined(@array)&quot; in a ternary operation", "body": "<p>That's much more concisely written this way</p>\n\n<pre><code>my @inputs = ( @{ $padSrc-&gt;{inouts} }, @{ $padSrc-&gt;{inputs} } );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1518706874, "post_id": 48810114, "comment_id": 84623759, "body": "While this isn&#39;t equivalent to the original code, this is probably what the original author of that code was <i>trying</i> to do. In any case, this solution is not wrong and elegantly concise."}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 3, "last_activity_date": 1518706575, "creation_date": 1518706575, "answer_id": 48810114, "question_id": 48809624, "link": "https://stackoverflow.com/questions/48809624/replacing-deprecated-definedarray-in-a-ternary-operation/48810114#48810114", "title": "Replacing deprecated &quot;defined(@array)&quot; in a ternary operation", "body": "<p>You do not say what Perl version you use, so the following may work (if using Perl 5.10 or later) or not (if you are stuck with older versions), and since it is not very clear why you used <code>defined</code> in the first place:</p>\n\n<pre><code> my @inputs = (\n    @{$padSrc-&gt;{inouts} // []},\n    @{$padSrc-&gt;{inputs} // []}\n);\n</code></pre>\n\n<p>or even simpler:</p>\n\n<pre><code>my @inputs = map { @{$padSrc-&gt;{$_} // []} } qw/inouts inputs/;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4486611, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KLgmu8Cs0Pw/AAAAAAAAAAI/AAAAAAAAAJs/CL2KJ9CLPRE/photo.jpg?sz=128", "display_name": "Arindam Das", "link": "https://stackoverflow.com/users/4486611/arindam-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1532113262, "creation_date": 1518705050, "last_edit_date": 1518705754, "question_id": 48809624, "link": "https://stackoverflow.com/questions/48809624/replacing-deprecated-definedarray-in-a-ternary-operation", "title": "Replacing deprecated &quot;defined(@array)&quot; in a ternary operation", "body": "<p>I have the following code which needs to be corrected, as <code>defined(@array)</code> is deprecated in the latest Perl. </p>\n\n<pre><code>my @inputs = (\n    ( defined @{$padSrc-&gt;{inouts}} ? @{$padSrc-&gt;{inouts}} : () ),\n    ( defined @{$padSrc-&gt;{inputs}} ? @{$padSrc-&gt;{inputs}} : () )\n);\n</code></pre>\n\n<p>I don't want to move to <code>if ( @{ $padSrc-&gt;{inouts} } )</code> kind of approach, as that will increase my line count.</p>\n"}, {"tags": ["perl", "web-services", "http", "lwp-useragent"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518704357, "post_id": 48809148, "comment_id": 84622003, "body": "@ikegami so you&#39;re saying the provided code is already correct? So no need to answer the question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518704390, "post_id": 48809148, "comment_id": 84622022, "body": "@Chris Turner, Ignore my (now-deleted) comment."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 8538792, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213857275086765/picture?type=large", "display_name": "David Lowndes", "link": "https://stackoverflow.com/users/8538792/david-lowndes"}, "edited": false, "score": 0, "creation_date": 1518705205, "post_id": 48809372, "comment_id": 84622566, "body": "This worked, thank you! I had originally followed the method format of <a href=\"https://stackoverflow.com/a/27502920/8538792\">this</a> answer from 2014."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 91, "user_id": 8538792, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213857275086765/picture?type=large", "display_name": "David Lowndes", "link": "https://stackoverflow.com/users/8538792/david-lowndes"}, "edited": false, "score": 2, "creation_date": 1518705369, "post_id": 48809372, "comment_id": 84622677, "body": "Fixed the linked answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1518704513, "last_edit_date": 1518704513, "creation_date": 1518704176, "answer_id": 48809372, "question_id": 48809148, "link": "https://stackoverflow.com/questions/48809148/how-to-post-a-local-file-using-perl/48809372#48809372", "title": "How to POST a local file using Perl?", "body": "<p>Refer to <a href=\"http://search.cpan.org/perldoc?HTTP::Request::Common\" rel=\"nofollow noreferrer\">HTTP::Request::Common</a> for the arguments to <code>-&gt;get</code> and <code>-&gt;post</code>.</p>\n\n<pre><code>my $req = $ua-&gt;post($url,\n    [ Content_Type =&gt; 'form-data', 'file' =&gt; [$file_path] ]\n);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>my $req = $ua-&gt;post($url,\n    Content_Type =&gt; 'form-data',\n    Content =&gt; [\n        file =&gt; [$file_path],\n    ],\n);\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8538792, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213857275086765/picture?type=large", "display_name": "David Lowndes", "link": "https://stackoverflow.com/users/8538792/david-lowndes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 1, "closed_date": 1518704865, "accepted_answer_id": 48809372, "answer_count": 1, "score": 1, "last_activity_date": 1518704513, "creation_date": 1518703472, "last_edit_date": 1518703874, "question_id": 48809148, "link": "https://stackoverflow.com/questions/48809148/how-to-post-a-local-file-using-perl", "closed_reason": "Duplicate", "title": "How to POST a local file using Perl?", "body": "<p>I have a server running a Perl webservice. This webservice generates a ~75mb .exe file.</p>\n\n<p>I wish to make a POST request to send this file data to another webserver.</p>\n\n<p>Right now I am using <code>LWP::UserAgent</code> like so:</p>\n\n<pre><code>use LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\n\n# URL to post to\nmy $url = \"http://my.website.here.com/upload\";\n\n# Location of local file\nmy $file_path = \"/path/to/file.exe\";\n\n# Make the POST request\nmy $req = $ua-&gt;post(\n    $url,\n    [ Content_Type =&gt; 'form-data', 'file' =&gt; [$file_path] ]\n);\n</code></pre>\n\n<p>Right now, however, only the file name is being sent. I can see why that would be the case, but what am I missing here?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1518703259, "post_id": 48809034, "comment_id": 84621227, "body": "Your claim at the bottom that the parent process was affected by the child&#39;s call to <code>setuid</code> isn&#39;t believable."}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518703314, "post_id": 48809034, "comment_id": 84621280, "body": "I don&#39;t understand what you mean... could you elaborate on that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1518703354, "post_id": 48809034, "comment_id": 84621311, "body": "<code>setuid</code> changes the user of a process. It doesn&#39;t affect other processes, so the solution you presented at the bottom (create a child to handle the work and call <code>setuid</code> in a child) would work. (I don&#39;t know enough about this area to know if there are other solutions.)"}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518703439, "post_id": 48809034, "comment_id": 84621370, "body": "And when I run a script within a script, what can I use in order to change the eid\\uid of the sub-script only? is there even a way to do that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518703499, "post_id": 48809034, "comment_id": 84621407, "body": "It affects <i>processes</i>, not <i>scripts</i>. Calling <code>setuid</code> in the child process as you mentioned would work (though not necessarily the only or best solution)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518703714, "post_id": 48809034, "comment_id": 84621548, "body": "See <code>$&gt;</code> in perlvar. To do it without creating a new process, I think you need to swap the UID and EUID, then you can swap them back."}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518705540, "post_id": 48809034, "comment_id": 84622793, "body": "I understand, thank you. I&#39;ve tried doing the following in the subscript:"}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518705603, "post_id": 48809034, "comment_id": 84622833, "body": "$&gt; =$User... code... $&gt;=0 seems to work, but the $&lt; stays root throughout the process and thus not really effective for me, because it&#39;s still using root&#39;s access privileges to check stuff and I need to use the other user&#39;s permission."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1518705671, "post_id": 48809034, "comment_id": 84622888, "body": "Yeah, that&#39;s definitely not going to work. That&#39;s the same as calling <code>setuid</code> twice. See <code>$&gt;</code> in perlvar. To do it without creating a new process, I think you need to swap the UID and EUID, then you can swap them back."}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518707707, "post_id": 48809034, "comment_id": 84624342, "body": "Which one do I need to make into the user I wish to use it&#39;s priv then? $&gt; or $&lt;? I&#39;m kinda confused. I tried doing: $&lt;=$User; ($&lt;,$&gt;)=($&gt;,$&lt;); ~commands~ ($&lt;,$&gt;)=($&gt;,$&lt;); but it&#39;s still using root&#39;s privileges. Sorry for all the troubles, but could you explain that please?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1518708595, "post_id": 48809034, "comment_id": 84624901, "body": "Like I said, that was just a guess. I&#39;m pretty sure there&#39;s a way, but I don&#39;t know what it is. But at least you know one solution."}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518712002, "post_id": 48809034, "comment_id": 84627245, "body": "@ikegami for now I chose to just use system to run the second script with system(), hopefully it&#39;ll work good"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1518947854, "post_id": 48809034, "comment_id": 84704273, "body": "<a href=\"https://www.perlmonks.org/?node_id=1209220\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}], "owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518703106, "creation_date": 1518703106, "question_id": 48809034, "link": "https://stackoverflow.com/questions/48809034/running-a-perl-script-with-root-changing-to-another-user-and-then-back-to-root", "title": "Running a perl script with root, changing to another user and then back to root?", "body": "<p>I've tried to search a lot around the web for this question, to no avail.</p>\n\n<p>Currently I'm building a perl script that needs to do a specific job for each line in some database. The database contains several arguements including a \"user\" field. \nThe script runs as root, and in each line iteration in the db, it will need to switch to the user provided and operate as the user, finishing the round and exiting back to root and then again, running as a different user.</p>\n\n<p><strong>So far I've tried:</strong>\n- using POSIX::setuid($User) in order to switch to the user within the same script, meaning:</p>\n\n<pre><code>while (my $line = &lt;$DB&gt;){ \n.. some code ..\nPOSIX::setuid($User); #switch to user\n... do stuff\nPOSIX::setuid(0); #return to root \n</code></pre>\n\n<p>But this solution didn't work so well, after changing once it was stuck in this user through all iterations of the loop, and couldn't return to root, which is obviously logical because it doesn't have the correct permissions. </p>\n\n<p>Since this didn't work, I thought to myself maybe I should split the job into 2 scripts. One script will run as root, whereas the other script will be called to by root in the first script and then use POSIX::setuid.\nI thought, that maybe because it's a subproc\\shell it'll just return itself back to root once the job is done on the second script, but it doesn't work as well... I'm kinda out of ideas, anything you guys think'll help?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1518704094, "post_id": 48808521, "comment_id": 84621801, "body": "Use lexical filehandles, they close when they go out of scope."}], "answers": [{"comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1518702689, "post_id": 48808824, "comment_id": 84620782, "body": "It is not so much a concern, might just be my OCD. This is what I meant with more elegant. Thank you"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1518704261, "post_id": 48808824, "comment_id": 84621918, "body": "Are those lexical filehandles or old-style handles? Because <code>@array</code> is an array of strings, not file handles so my gut feeling is that those won&#39;t close when they go out of scope."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1518705338, "post_id": 48808824, "comment_id": 84622649, "body": "@el.pescado: They use lexical array elements, so they are lexical handles. The original contents of the array are irrelevant except for building the file name string. The call to <code>open</code> overwrites each array element with the new file handle reference."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1518706719, "post_id": 48808824, "comment_id": 84623660, "body": "@Borodin Are you sure? <code>print Dumper \\@array;</code> indicates otherwise. <code>system(&quot;ls -l &#47;proc&#47;$$&#47;fd&quot;);</code> shows that files are still open."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1518706989, "post_id": 48808824, "comment_id": 84623838, "body": "OK, found it. <i>&quot;If FILEHANDLE is an <b>undefined</b> scalar variable (or array or hash element), a new filehandle is autovivified, meaning that the variable is assigned a reference to a newly allocated anonymous filehandle. Otherwise if FILEHANDLE is an expression, its value is the real filehandle. (This is considered a symbolic reference, so use strict &quot;refs&quot; should not be in effect.)&quot;</i>. <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">(perldoc open)</a> So that passing lexical value to <code>open</code> is not sufficient - it has to be undefined. This code opens <code>ABC</code>, <code>DEF</code> etc old-style file handles."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1518702518, "creation_date": 1518702518, "answer_id": 48808824, "question_id": 48808521, "link": "https://stackoverflow.com/questions/48808521/cleaner-method-to-open-and-close-filehandles-dynamically/48808824#48808824", "title": "cleaner method to open and close filehandles dynamically?", "body": "<p>I don't understand your concern, but you could make it more concise by using statement modifiers. Also, using the <code>autodie</code> pragma removes the need to check the status of each operation</p>\n\n<pre><code>use autodie;\n\nopen $_, '&gt;', \"OUTPUT_$_.txt\" for @array;\n\n...\n\nclose for @array;\n</code></pre>\n\n<p>Note that, if you wrap the code that uses the file handles in <code>@array</code> in a block <code>{ ... }</code>, then they will be closed implicitly when they go out of scope. You just need to make sure that the declaration <code>my @array</code> (a terrible identifier, by the way) is within the block</p>\n"}, {"tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 0, "last_activity_date": 1518757756, "last_edit_date": 1518757756, "creation_date": 1518705174, "answer_id": 48809662, "question_id": 48808521, "link": "https://stackoverflow.com/questions/48808521/cleaner-method-to-open-and-close-filehandles-dynamically/48809662#48809662", "title": "cleaner method to open and close filehandles dynamically?", "body": "<p>You could use <a href=\"https://stackoverflow.com/questions/1479741/why-is-three-argument-open-calls-with-autovivified-filehandles-a-perl-best-pract\">lexical filehandles</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array = qw/ABC DEF/;\n\n{\n    my %fh = map { open my $fh, \"&gt;\", \"OUTPUT_$_.txt\"; $_ =&gt; $fh } @array;\n    print $fh{ABC} \"Something...\";\n}\n# Here your filehandles in %fh will be closed already.\n</code></pre>\n"}], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 48808824, "answer_count": 2, "score": 0, "last_activity_date": 1526505128, "creation_date": 1518701507, "last_edit_date": 1526505128, "question_id": 48808521, "link": "https://stackoverflow.com/questions/48808521/cleaner-method-to-open-and-close-filehandles-dynamically", "title": "cleaner method to open and close filehandles dynamically?", "body": "<p>I have an array of entries which will be search in a large file, each entry is then written to its own output file. the array varies based on certain conditions and therefore has to be dynamic.</p>\n\n<p>Here is my example <code>array</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array = (\"ABC\",\n             \"DEF\",\n             \"GHI\",\n             \"JKL\",\n             \"MNO\",\n             \"PQR\"\n             );\n</code></pre>\n\n<p>So I created a loop to open create a filehandle for each of the entries. run my commands, then a loop again to close the filehandles.</p>\n\n<pre><code>foreach my $handle(@array) {\n        my $output = \"OUTPUT_$handle.txt\";\n           open ($handle, '&gt;', $output) or die \"unable to open file $!\";\n}\n\n#... write to files and do some other fancy stuff ...\n\nforeach $handle(@array) {\n           close $handle;\n    }\n</code></pre>\n\n<p>Which will create: <code>OUTPUT_ABC.txt</code> <code>OUTPUT_DEF.txt</code>.. etc.</p>\n\n<p>So my question: It seems to feel very awkward for me to have to loop through opening each and loop closing each handle, is there a more elegant method to open and close file handles dynamically?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1518697286, "post_id": 48806950, "comment_id": 84617010, "body": "The result doesn&#39;t match the OP&#39;s requirement, and the <code>[^\\&#47;]*</code> has no effect at all."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1518696551, "creation_date": 1518696551, "answer_id": 48806950, "question_id": 48806839, "link": "https://stackoverflow.com/questions/48806839/how-to-extract-last-occurrence-of-character-in-perl/48806950#48806950", "title": "How to extract last occurrence of character in Perl?", "body": "<p>Try</p>\n\n<pre><code>/(.*\\/)[^\\/]*/\n</code></pre>\n\n<p>and you'll have the desired pattern in <code>$1</code>.</p>\n\n<p><a href=\"https://regex101.com/r/6bocOB/1/\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1518697760, "post_id": 48807135, "comment_id": 84617342, "body": "another solution may be just <code>[^&#47;]*$</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1518698291, "post_id": 48807135, "comment_id": 84617709, "body": "@Nahuel: You mean <code>$str =~ s|&#47;[^&#47;]*$||</code>? I&#39;m sticking with my version thanks."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1518698368, "post_id": 48807135, "comment_id": 84617763, "body": "or more exactly <code>($last) = $str =~ m|[^&#47;]*$|g</code>, to get the last like pop does"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1518698617, "post_id": 48807135, "comment_id": 84617930, "body": "@Nahuel: I&#39;m not sure what you&#39;re trying to do there. That will leave <code>$last</code> set to <code>&#47;sin0=3</code> and leave <code>$str</code> untouched. The OP is asking for the contents <i>before</i> that last segment. The <code>&#47;g</code> modifier is rather odd, too."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1518697138, "creation_date": 1518697138, "answer_id": 48807135, "question_id": 48806839, "link": "https://stackoverflow.com/questions/48806839/how-to-extract-last-occurrence-of-character-in-perl/48807135#48807135", "title": "How to extract last occurrence of character in Perl?", "body": "<p>The easiest way is to use a greedy quantifier with a \"keep\" flag <code>\\K</code></p>\n\n<p>If you want to keep the value of <code>$str</code> and put the result in a new variable</p>\n\n<pre><code>my $s2 = $str =~ s|.*\\K/.*||r;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>( my $s2 = $str ) =~ s|.*\\K/.*||;\n</code></pre>\n\n<p>If you want to modify the original string, then it's just</p>\n\n<pre><code>$str =~ s|.*\\K/.*||;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1518758570, "post_id": 48807927, "comment_id": 84644583, "body": "Can you explain ($st2) = $str =~m{(.+)/};  please"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1518759450, "last_edit_date": 1518759450, "creation_date": 1518699612, "answer_id": 48807927, "question_id": 48806839, "link": "https://stackoverflow.com/questions/48806839/how-to-extract-last-occurrence-of-character-in-perl/48807927#48807927", "title": "How to extract last occurrence of character in Perl?", "body": "<p>You can try this method also</p>\n\n<pre><code>my $str = '/wave=1/sin2=1/sin1=2/sin0=3';\n\nmy ($st2) = $str =~m{(.+)/};\n\nprint $st2;\n</code></pre>\n\n<p><code>{(.+)/}</code></p>\n\n<p>Here <code>{}</code> works like delimiter <code>//</code> (Don't confused with quantifier for example<code>\\d{n}</code>)</p>\n\n<p>And <code>.</code> matches any character except new line and making this as to match 1 or more times using the <code>+</code> quantifier then it will matches till the END (Because <code>+</code> is  greedy quantifier, check the steps <a href=\"https://regex101.com/r/iz8ScK/1/debugger\" rel=\"nofollow noreferrer\">here</a>), then it will back track for the <code>/</code>, when it is find the <code>/</code> back track will terminate. And storing into the capturing group <code>()</code>, and capturing group will store into the <code>$st2</code> variable. </p>\n\n<p><a href=\"https://regex101.com/r/iz8ScK/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n"}], "owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 48807927, "answer_count": 3, "score": 0, "last_activity_date": 1518759450, "creation_date": 1518696241, "last_edit_date": 1518696938, "question_id": 48806839, "link": "https://stackoverflow.com/questions/48806839/how-to-extract-last-occurrence-of-character-in-perl", "title": "How to extract last occurrence of character in Perl?", "body": "<p>I am trying to extract a particular part of the string.</p>\n\n<p>Input String : <code>$str = /wave=1/sin2=1/sin1=2/sin0=3</code></p>\n\n<p>Output String : <code>$str = /wave=1/sin2=1/sin1=2</code></p>\n\n<p>Method 1 : </p>\n\n<p><code>@waveSplitArray = split /\\//,$str;</code></p>\n\n<p><code>$lastOccuranceOfWave = pop @waveSplitArray;</code></p>\n\n<p>How to use regex to get the desired output?</p>\n"}, {"tags": ["perl", "file", "copy"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1518695238, "post_id": 48806436, "comment_id": 84615668, "body": "You don&#39;t appear to have asked a question. We&#39;re not going to write your code for you."}, {"owner": {"reputation": 17, "user_id": 9341972, "user_type": "registered", "profile_image": "https://graph.facebook.com/1670559252990665/picture?type=large", "display_name": "Somesh Pokarne", "link": "https://stackoverflow.com/users/9341972/somesh-pokarne"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1518697088, "post_id": 48806436, "comment_id": 84616869, "body": "i added what i know"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1518701628, "post_id": 48806436, "comment_id": 84620010, "body": "<code>perl -ne &#39;(&#47;def -&gt;\\[&#47; .. &#47;]&#47;) =~ &#47;(^|^1|E0)$&#47; or print&#39; f1.txt &gt; f2.txt</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9346959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyDTl.png?s=128&g=1", "display_name": "George Bouras", "link": "https://stackoverflow.com/users/9346959/george-bouras"}, "is_accepted": false, "score": 0, "last_activity_date": 1518727912, "creation_date": 1518727912, "answer_id": 48816045, "question_id": 48806436, "link": "https://stackoverflow.com/questions/48806436/copy-few-lines-from-one-file-to-another/48816045#48816045", "title": "Copy few lines from one file to another", "body": "<p>here it is</p>\n\n<pre><code>while(&lt;DATA&gt;){\nprint $_ if /sff/ ... /ghi/\n}\n\n\n__DATA__\nabc \ndef -&gt;[\n    sff \n    l1\n    l2\n    ghi \n]\ndqq\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 9341972, "user_type": "registered", "profile_image": "https://graph.facebook.com/1670559252990665/picture?type=large", "display_name": "Somesh Pokarne", "link": "https://stackoverflow.com/users/9341972/somesh-pokarne"}, "is_accepted": false, "score": 0, "last_activity_date": 1518749842, "last_edit_date": 1592644375, "creation_date": 1518749842, "answer_id": 48819447, "question_id": 48806436, "link": "https://stackoverflow.com/questions/48806436/copy-few-lines-from-one-file-to-another/48819447#48819447", "title": "Copy few lines from one file to another", "body": "<p>my $fh1 = &quot;file1.txt&quot;;</p>\n<p>use File::Slurp;</p>\n<p>$search1 = &quot;start&quot;;</p>\n<p>$search2 = &quot;end&quot;;</p>\n<h1>open (WRITE,'&gt;&gt;',$new);</h1>\n<p>open (fh,&quot;&lt;&quot;,&quot;$fh1&quot;);</p>\n<p>while()\n{</p>\n<p>push @array,$_ if/$search1/../$search2/;</p>\n<p>}</p>\n<p>close(fh);</p>\n<p>append_file('file2.txt',@array);</p>\n"}], "owner": {"reputation": 17, "user_id": 9341972, "user_type": "registered", "profile_image": "https://graph.facebook.com/1670559252990665/picture?type=large", "display_name": "Somesh Pokarne", "link": "https://stackoverflow.com/users/9341972/somesh-pokarne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1518749842, "creation_date": 1518694981, "last_edit_date": 1518700867, "question_id": 48806436, "link": "https://stackoverflow.com/questions/48806436/copy-few-lines-from-one-file-to-another", "title": "Copy few lines from one file to another", "body": "<p>Here is my question let's say I have a file <code>file1.txt</code> with contents:</p>\n\n<pre><code>abc \ndef -&gt;[\n    sff \n    ghi \n]\ndqq\n</code></pre>\n\n<p>Now I want to copy all the line starting from <code>sff</code> to <code>ghi</code> from <code>file1.txt</code> to end of <code>file2.txt</code></p>\n\n<p>i.e. the following lines should added to <code>file2.txt</code></p>\n\n<pre><code>sff\nghi\n</code></pre>\n\n<p>This is waht i have. Suggest me instead of \"last\" what should i have use to fullfill my requirement:</p>\n\n<pre><code>My $fh=\u201dfile1.txt\u201d;\n\nmy @lines = read_file($fh);\n\nwhile ( my $line = shift @lines) {\n\n      next unless ($line =~ m/def/);\n\n      last; # this code will write till end of file i.e. dqq\n\n}\n\nappend_file('file2.txt', @lines);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3, "user_id": 9364417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ANKIT JAIN", "link": "https://stackoverflow.com/users/9364417/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1518692819, "post_id": 48805713, "comment_id": 84614166, "body": "INPUT is $whole_text=&quot;\\&quot;Ankit Stackoverflow is \\n awesome\\&quot; \\&quot;a\\&quot; asd asd \\&quot;he\\nllo\\&quot;\\n&quot;;"}, {"owner": {"reputation": 2754, "user_id": 5114911, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1698453063709112/picture?type=large", "display_name": "KyleFairns", "link": "https://stackoverflow.com/users/5114911/kylefairns"}, "edited": false, "score": 0, "creation_date": 1518693781, "post_id": 48805713, "comment_id": 84614734, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9751161/removing-newline-character-from-a-string-in-perl\">Removing newline character from a string in Perl</a>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 2754, "user_id": 5114911, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1698453063709112/picture?type=large", "display_name": "KyleFairns", "link": "https://stackoverflow.com/users/5114911/kylefairns"}, "edited": false, "score": 0, "creation_date": 1518693926, "post_id": 48805713, "comment_id": 84614831, "body": "@KyleFairns though <code>\\n</code> removal is covered in the linked answer, it does not answer the match between quotes."}, {"owner": {"reputation": 2754, "user_id": 5114911, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1698453063709112/picture?type=large", "display_name": "KyleFairns", "link": "https://stackoverflow.com/users/5114911/kylefairns"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1518694071, "post_id": 48805713, "comment_id": 84614926, "body": "@GerhardBarnard From the example given, it just seems like they want to remove all <code>\\n</code> characters. Perhaps this could be clarified by the asker?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1518694127, "post_id": 48805713, "comment_id": 84614962, "body": "<i>&quot;How to Extract the <b>string between double quotes</b> having newline embedded in between the string?</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": -1, "last_activity_date": 1519109113, "last_edit_date": 1519109113, "creation_date": 1518694342, "answer_id": 48806223, "question_id": 48805713, "link": "https://stackoverflow.com/questions/48805713/how-to-extract-the-string-between-double-quotes-having-newline-embedded-in-betwe/48806223#48806223", "title": "How to Extract the string between double quotes having newline embedded in between the string?", "body": "<p>You're using the wrong modifier on your regex. The <code>/m</code> treats the string has multiple lines where you actually want to use <code>/s</code> which changes \".\" to match any character including <code>\\n</code>.</p>\n\n<p>Changing this won't actually get you the output you want because you're repeatedly applying the transformation and it will delete any past quoted portions too. You want to also use the <code>/g</code> modifier which will find all possible matches and then only apply the regex the once.</p>\n\n<pre><code>use strict;\n\nmy $whole_text=\"\\\"Ankit Stackoverflow is \\n awesome\\\" \\\"a\\\" asd asd \\\"he\\nllo\\\"\\n\";\n\n$whole_text =~ s/(.*?)\"(.*?)\"(.*?)/$2/sg;\n</code></pre>\n\n<p>And then if you want to get rid of the <code>\\n</code> you'd also need.</p>\n\n<pre><code>$whole_text =~ s/\\n//sg;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9364417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ANKIT JAIN", "link": "https://stackoverflow.com/users/9364417/ankit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 48806223, "answer_count": 1, "score": 0, "last_activity_date": 1519109113, "creation_date": 1518692767, "last_edit_date": 1518693675, "question_id": 48805713, "link": "https://stackoverflow.com/questions/48805713/how-to-extract-the-string-between-double-quotes-having-newline-embedded-in-betwe", "title": "How to Extract the string between double quotes having newline embedded in between the string?", "body": "<p>I want to extract the text between the <code>\"</code> quotation marks and append them. While ignoring the newlines embedded in the string.</p>\n\n<p>What I have so far is something like:</p>\n\n<pre><code>$whole_text=\"\\\"Ankit Stackoverflow is \\n awesome\\\" \\\"a\\\" asd asd \\\"he\\nllo\\\"\\n\";\n\nwhile ($whole_text=~ /(.*?)\"(.*?)\"(.*?)/m)\n{ \n    $whole_text=~ s/(.*?)\"(.*?)\"(.*?)/$2/m;\n}\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>Ankit Stackoverflow is awesome and hello\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518688164, "post_id": 48803976, "comment_id": 84610977, "body": "You&#39;ve over trimmed the code - you&#39;re not populating or declaring <code>@log</code> any where"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518688233, "post_id": 48803976, "comment_id": 84611022, "body": "@Chris: <code>unshift @log</code> populates the array."}, {"owner": {"reputation": 1, "user_id": 9363904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9717667a1f329a62f4ad5821b5aa368?s=128&d=identicon&r=PG&f=1", "display_name": "Tatsuya  Satou", "link": "https://stackoverflow.com/users/9363904/tatsuya-satou"}, "edited": false, "score": 0, "creation_date": 1518688492, "post_id": 48803976, "comment_id": 84611206, "body": "Excuse me. I cut the code too much. I am declaring @log"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1518688496, "post_id": 48803976, "comment_id": 84611208, "body": "@Borodin only with the most recent message - there&#39;s no code to read in the old messages"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518688733, "post_id": 48803976, "comment_id": 84611400, "body": "@Chris: Version one of the question contains code."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1518690641, "creation_date": 1518690641, "answer_id": 48805018, "question_id": 48803976, "link": "https://stackoverflow.com/questions/48803976/posted-on-bulletin-board-will-be-overwritten/48805018#48805018", "title": "Posted on bulletin board will be overwritten", "body": "<p>You don't load the previously written messages and put them into <code>@log</code> so when you come to add the latest message and write them all out, it will only contain the one message which is why you're seeing previous messages being overwritten.</p>\n"}], "owner": {"reputation": 1, "user_id": 9363904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9717667a1f329a62f4ad5821b5aa368?s=128&d=identicon&r=PG&f=1", "display_name": "Tatsuya  Satou", "link": "https://stackoverflow.com/users/9363904/tatsuya-satou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1518690641, "creation_date": 1518687516, "last_edit_date": 1518688172, "question_id": 48803976, "link": "https://stackoverflow.com/questions/48803976/posted-on-bulletin-board-will-be-overwritten", "title": "Posted on bulletin board will be overwritten", "body": "<p>Although using unshift, posts are overwritten. Please help someone.</p>\n\n<p>What should I do?</p>\n\n<p>How many lines should I write?</p>\n\n<p>Is this harassment?</p>\n\n<p>Usability is bad.</p>\n\n<p>I've trimmed the code so far.</p>\n\n<p>I can post.</p>\n\n<pre><code>print \"Content-type: text/html; charset=Shift_JIS\\n\\n\";\n\n#form tag omitted.form processing omitted.\n\nmy %in;\nmy $alldata;\nmy $name    = $in{\"name\"};\nmy $message = $in{\"message\"};\nmy $host;\n\nif ( $message ne \"\" ) {\n    unshift @log,\"$name&lt;&gt;$message&lt;&gt;$host&lt;&gt;\\n\";\n    open(OUT, \"&gt; bbs1.txt\");\n    print OUT @log;\n    close(OUT);\n}\n\nopen(IN, \"bbs1.txt\") or $!;\nwhile( &lt;IN&gt; ) {\n    my ( $name_p, $message_p, $time_p, $zero_p ) = (split(/&lt;&gt;/))[0,1,2,4];\n    my $log_p = \"$name_p:$message_p&lt;br&gt;$time_p$zero_p\";\n    chomp $log_p;\n}    \nclose(IN);\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "perl"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1518688170, "last_edit_date": 1518688170, "creation_date": 1518686383, "answer_id": 48803658, "question_id": 48803632, "link": "https://stackoverflow.com/questions/48803632/call-python-script-and-store-return-value-in-perl/48803658#48803658", "title": "call python script and store return value in perl", "body": "<p>The Perl built-in <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> returns the return value of the program, not the STDOUT. You need to use <a href=\"http://perldoc.perl.org/functions/qx.html\" rel=\"nofollow noreferrer\"><code>qx()</code></a>.</p>\n\n<pre><code>my $path= qx(C:\\\\FindPath\\\\find_path_location.py $ID);\n</code></pre>\n\n<p>Be careful though, you cannot give multiple arguments to <code>qx</code>, as it's an <em>operator</em>, not a <em>function</em>.</p>\n"}], "owner": {"reputation": 33, "user_id": 7391072, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1243472112402966/picture?type=large", "display_name": "Himanshu Gupta", "link": "https://stackoverflow.com/users/7391072/himanshu-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "closed_date": 1518688532, "answer_count": 1, "score": 0, "last_activity_date": 1518688170, "creation_date": 1518686322, "last_edit_date": 1518686405, "question_id": 48803632, "link": "https://stackoverflow.com/questions/48803632/call-python-script-and-store-return-value-in-perl", "closed_reason": "Duplicate", "title": "call python script and store return value in perl", "body": "<p>I have a perl script in which I am calling python script through system command which is in some another location.</p>\n\n<p>Perl script part where it calls python script </p>\n\n<pre><code>$path=system(\"C:\\\\FindPath\\\\find_path_location.py\", $ID);\nprint $path;\n</code></pre>\n\n<p>The python script takes the argument $ID, does some processing and generate a path which is stored in variable path1. I want to use the value of \"path1\" in my perl script</p>\n\n<p>find_path_location.py</p>\n\n<pre><code>def main(argv=sys.argv[1:]):\n    *function execution*\n    path1 = *some path which is generated*\n    print \"{0}\".format(path1)\n    return path1\n\n\nif __name__ == '__main__':\n    startTime = time.time()\n\n    try :\n        main()\n    except Exception as e :\n         print &gt;&gt; sys.stderr, \"Error: \" + str(type(e))\n         traceback.print_exc()\n    finally :\n         endTime = time.time()\n    print \"Total Time: \" + str(round((endTime - startTime), 2)) + \" Seconds\"\n    print \"Done.\"\n</code></pre>\n\n<p>The  <strong>\"print \"{0}\".format(path1)\"</strong> is printing correct path but I am not able to get that value in perl. \nHow can I store the path value in the variable in perl??</p>\n"}, {"tags": ["perl", "docker"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10239780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d933677957899e083c45c8f5cd51df0?s=128&d=identicon&r=PG&f=1", "display_name": "gaowei_singapore", "link": "https://stackoverflow.com/users/10239780/gaowei-singapore"}, "is_accepted": false, "score": 0, "last_activity_date": 1534516910, "last_edit_date": 1534516910, "creation_date": 1534515896, "answer_id": 51897486, "question_id": 48802901, "link": "https://stackoverflow.com/questions/48802901/docker-hostname-different-from-container-name/51897486#51897486", "title": "Docker: hostname different from container name", "body": "<p>Personal opinion: you should leave the hostname alone. If you need to spawn multiple, similar containers with <code>scale: &lt;n&gt;</code>, any attempt to set the hostname would not work.</p>\n\n<p>But you can obtain the container name from inside the container via <code>docker:socket</code>, and use that for many of your other purposes, such as for the code to identify itself or other containers. </p>\n\n<p>See my example <a href=\"https://github.com/docker/compose/issues/3584#issuecomment-413877595\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534516910, "creation_date": 1518683539, "last_edit_date": 1518683923, "question_id": 48802901, "link": "https://stackoverflow.com/questions/48802901/docker-hostname-different-from-container-name", "title": "Docker: hostname different from container name", "body": "<p>I am using an docker overlay network</p>\n\n<p>I am starting a server, myserver.pl, in a container</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse POSIX qw(:sys_wait_h :errno_h :fcntl_h strftime);\nuse Getopt::Long;\nuse File::Basename;\nuse IO::Socket;\nuse IO::Select;\nSTDOUT-&gt;autoflush(1);\nuse Fcntl;\nuse Socket;\nuse Carp;\nuse FileHandle;\nuse Cwd qw{abs_path cwd};\n\nuse Sys::Hostname;\n\nour $HOST                              = hostname();\nour $PUBQDIR                           = '/x/eng/site/build/altload';\nour $PWD                               = cwd();\nour $EMPTY                             = q{};\nour $NL                                = \"\\n\";\nour $SPACE                             = q{ };\nour $ANY_RE                            = qr{.*};\nour $REDIS_OS_RE                       = qr{^br-redis$};\nour $HOST_SPLIT_RE                     = qr{[.][^:]*};\nour $bash_and_list_op                  = '&amp;&amp;';\nmy $Request_File         = $EMPTY;\n\n\n# options from command line\nmy $Opt_Class            = 'L';\n\nmy $Redis                = $EMPTY;\nmy %Published_Requests   = (); # Track published queue requests for cleanup\n\nchomp $HOST;\n$HOST =~ s/[.].*//g;\nchomp $PWD;\nmy $Pool   = $EMPTY;\n\nsub sock_initialize {\n\n    my $sock  = q{};\n    my $port  = q{};\n\n    # Get a port for our server.\n    $sock = IO::Socket::INET-&gt;new(\n        Listen    =&gt; SOMAXCONN,    # listen queue depth\n        LocalPort =&gt; 0,\n        Reuse     =&gt; 1\n    );\n\n    die \"Unable to bind a port: $!\" if !$sock;\n    $port      = $sock-&gt;sockport();\n\n    # Determine and log the dispatcher queue id\n    #my $ip = inet_ntoa( scalar gethostbyname( $HOST ));\n    my $ip = \"\";\n    my $uid = (getpwuid( $&gt; ))[2];\n    my $queue = join(\":\", $ip, $port, $$, $uid);\n\n    # Include in the published queue name:\n    #    - job class, which must be the same for all jobs we submit\n    #    - Our Hostname and Port\n    # Can't lower hostname to IP yet, it might give 127.0.0.1\n\n    print sprintf(\"Connect me at $HOST on port $port ($$), SOMAXCONN=%d\\n\", SOMAXCONN);\n\n    return $sock;\n} ## end sub sock_initialize\n\nmy $listen_sock = sock_initialize();\nwhile (1) {\n    #my $xsock = Accept();\n    my $xsock;\n    while (1) {\n        $! = 0;\n        # Accept can block.  Need to use nonblocking poll (Stevens)\n        $xsock = $listen_sock-&gt;accept;    # ACCEPT\n        last if defined $xsock;\n        next if $! == EINTR;\n        die \"accept error: $!\";\n        if ( defined $xsock ) {\n            $xsock-&gt;blocking(0);    # mark executor socket nonblocking\n            $xsock-&gt;sockopt( SO_KEEPALIVE() =&gt; 1 ) or die \"sockopt: $!\";\n        }\n    }\n\n    my $buff = \"\";\n    while (1) {\n        my $nbytes = sysread $xsock, $buff, 32768, length($buff);    # SYSCALL\n\n        if ( !defined $nbytes ) {                            # read error\n            next if $! == EINTR;\n            last if $! == EWOULDBLOCK;                       # normal\n            return;\n        }\n        last if $nbytes == 0;                            # EOF\n    }\n    print \"received $buff\\n\";\n    last;\n</code></pre>\n\n<p>by <code>docker run -v /home/:/home/ --name myhost01 --network test-net perl perl /home/myserver.pl</code></p>\n\n<p>it outputs:</p>\n\n<pre><code>Connect me at ebcf3c65c3e1 on port 39580 (1), SOMAXCONN=128\n</code></pre>\n\n<p>I can connect to this server from another container on different host (docker daemon) attached to the same overlay network via : i.e. <code>myhost01:39580</code></p>\n\n<pre><code>my $host = \"myhost01\";\nmy $port = 39850;\nmy $s = IO::Socket::INET-&gt;new (PeerAddr =&gt; $host,\n                                        PeerPort =&gt; $port,\n                                        Type     =&gt; SOCK_STREAM,\n                                        Proto    =&gt; 'tcp',\n                                        Timeout  =&gt; 1);\n</code></pre>\n\n<p>So, thats fine but i was aware of the container name beforehand so i knew to connect to it, I want the myserver.pl to advertise its hostname as <code>myhost01</code>, not <code>ebcf3c65c3e1</code> </p>\n\n<pre><code>Connect me at myhost01 on port 39580 (1), SOMAXCONN=128\n</code></pre>\n\n<p>Is there a way to set the hostname inside the container that it thinks the hostname is the same as container name and that perl's <code>Sys::Hostname:hostname()</code> or python's <code>socket.gethostname()</code> or whatever ways to get hostname would think that and not using container id such as <code>ebcf3c65c3e1</code> as hostname?</p>\n\n<p>[EDIT]\ni see the option --hostname for docker run but do i really need to supply both --name and --hostname? Is there other ways to automatically inherit container name as its hostname?</p>\n"}, {"tags": ["perl", "mime"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1518678356, "post_id": 48801344, "comment_id": 84605748, "body": "<code>base64 -d</code> on both strings returns the same output."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1518679693, "post_id": 48801344, "comment_id": 84606345, "body": "You <i>cannot</i> expect the output to be identical if you parse it into memory and write out the parsed representation (unless the format you are parsing is so strict that no variation in representation is possible). I&#39;m thinking your signature generation is broken in the first place if it operates on the MIME representation rather than on the actual contents, but I&#39;m not familiar with PKCS7."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 2, "last_activity_date": 1518682063, "last_edit_date": 1518682063, "creation_date": 1518681416, "answer_id": 48802376, "question_id": 48801344, "link": "https://stackoverflow.com/questions/48801344/perl-mime-tools-content-changed-of-a-body-part/48802376#48802376", "title": "Perl MIME-Tools: Content changed of a body-part", "body": "<p>From the <a href=\"http://search.cpan.org/~dskoll/MIME-tools-5.509/lib/MIME/Tools.pm\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>Don't plan on printing exactly what you parsed!</strong></p>\n  \n  <p>Parsing is a (slightly) lossy operation. Because of things like\n  ambiguities in base64-encoding, the following is not going to spit out\n  its input unchanged in all cases:</p>\n\n<pre><code>$entity = $parser-&gt;parse(\\*STDIN);\n$entity-&gt;print(\\*STDOUT);\n</code></pre>\n  \n  <p>If you're using MIME::Tools to process email, remember to <strong><em>save the\n  data you parse if you want to send it on unchanged</em></strong>. This is vital for\n  things like PGP-signed email.</p>\n</blockquote>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1518682063, "creation_date": 1518677169, "question_id": 48801344, "link": "https://stackoverflow.com/questions/48801344/perl-mime-tools-content-changed-of-a-body-part", "title": "Perl MIME-Tools: Content changed of a body-part", "body": "<p>I have the following sample input to a mime-parser (mytest).</p>\n\n<pre><code>Content-Type: multipart/signed; protocol=\"application/pkcs7-signature\"; micalg=sha1; boundary=\"----=_Part_abc123\"\n\n------=_Part_abc123\nContent-Type: application/text; name=test.txt\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment; filename=test.txt\n\nVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVU\nVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVU\n------=_Part_abc123\nContent-Type: application/pkcs7-signature; name=smime.p7s; smime-type=signed-data\nContent-Transfer-Encoding: binary\nContent-Disposition: attachment; filename=\"smime.p7s\"\nContent-Description: S/MIME Cryptographic Signature\n\nblabla\n------=_Part_abc123--\n</code></pre>\n\n<p>The code is this (just read it in and write it out again).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse MIME::Parser;\n\nmy $fn = \"mytest\";\nmy $parser = new MIME::Parser ();\n$parser-&gt;output_to_core (1);\n\nopen (F, $fn);\nmy $entity = $parser-&gt;parse (\\*F);\nclose (F);\n\nopen (F, \"&gt;mytestnew\");\n$entity-&gt;print (\\*F);\nclose (F);\n\nexit 1;\n</code></pre>\n\n<p>The produced output (mytestnew) is this.</p>\n\n<pre><code>Content-Type: multipart/signed; protocol=\"application/pkcs7-signature\"; micalg=sha1; boundary=\"----=_Part_abc123\"\n\n------=_Part_abc123\nContent-Type: application/text; name=test.txt\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment; filename=test.txt\n\nVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVU\nVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVUVU\n\n------=_Part_abc123\nContent-Type: application/pkcs7-signature; name=smime.p7s; smime-type=signed-data\nContent-Transfer-Encoding: binary\nContent-Disposition: attachment; filename=\"smime.p7s\"\nContent-Description: S/MIME Cryptographic Signature\n\nblabla\n------=_Part_abc123--\n</code></pre>\n\n<p>As we can see the content of the 1st part changed (see the VUVU... linebreak).</p>\n\n<p>That is a problem if the signature (2nd part) is used to verify the content. Maybe it is because the base64-encoding is not \"pretty\". But the verify of the signature does not care about that. It just sees a corrupt content and failes. \nIn my sample I cut the signature - the question is not about verifying.</p>\n\n<p>So how can I parse the content, write-out again with MIME-tools AND keep the content unchanged??</p>\n\n<p>Thanks for help!</p>\n"}, {"tags": ["bash", "shell", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 3, "creation_date": 1518662610, "post_id": 48799151, "comment_id": 84601318, "body": "What specifically are you having trouble with?  Do you have some code you would like to share?  Your problem statement seems well posed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1518665467, "post_id": 48799151, "comment_id": 84601931, "body": "Please show us that what you have tried to do.  Otherwise the question is off-topic/too broad."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": -1, "last_activity_date": 1518680197, "last_edit_date": 1518680197, "creation_date": 1518676285, "answer_id": 48801157, "question_id": 48799151, "link": "https://stackoverflow.com/questions/48799151/print-first-line-of-a-group-of-blocks-after-comparison-of-a-number/48801157#48801157", "title": "Print first line of a group of blocks after comparison of a number", "body": "<p>Here's a better example file:</p>\n\n<p>data.txt</p>\n\n<pre><code>1: 2.2473 0.0102\n35 3.21256\n33 2.17695\n32 64.6138   #target line\n\n2: 2.9864 0.0021\n32 8.42305   #target line\n33 86.9749\n34 3.44444\n\n3: 3.4679 0.0576\n33 32.5034\n32 5.55511  #target line\n\n4: 3.6459 0.0531\n33 34.7803\n32 62.301   #target line\n\n5: 3.8914 0.0039\n35 5.04095\n33 4.0436 \n32 94.7762  #target line\n34 82.839\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>use strict;  \nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\nuse List::Util qw{ first }; \n\nopen my $INFILE, '&lt;', 'data.txt';\nmy %results;\n\n{\n    local $/ = '';  #input record separator =&gt; paragraph mode\n\n    while (my $block = &lt;$INFILE&gt; ) {\n        my @lines = split /\\n/, $block;\n        my $line32 = first {/^32/} @lines;\n\n        (undef, my $ranking_num) = split ' ', $line32;\n        $results{$ranking_num} = $lines[0];\n    }\n}\n\nclose $INFILE;\nsay Dumper \\%results;\n\nmy @sorted_nums = sort{$a &lt;=&gt; $b} keys %results;\nsay Dumper \\@sorted_nums;\n\nmy $biggest_num = $sorted_nums[-1];\nsay $results{$biggest_num};\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          '8.42305' =&gt; '2: 2.9864 0.0021',\n          '5.55511' =&gt; '3: 3.4679 0.0576',\n          '62.301' =&gt; '4: 3.6459 0.0531',\n          '94.7762' =&gt; '5: 3.8914 0.0039',\n          '64.6138' =&gt; '1: 2.2473 0.0102'\n        };\n\n$VAR1 = [\n          '5.55511',\n          '8.42305',\n          '62.301',\n          '64.6138',\n          '94.7762'\n        ];\n\n5: 3.8914 0.0039\n</code></pre>\n\n<p>The comparison operator for numbers is <code>&lt;=&gt;</code>, and if the things being compared aren't numbers, then perl converts them to numbers to do the comparison.  As a result, the strings are sorted as if they were numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 5820887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00eb41094c5914cba5e223add5024efd?s=128&d=identicon&r=PG&f=1", "display_name": "alloppp", "link": "https://stackoverflow.com/users/5820887/alloppp"}, "edited": false, "score": 0, "creation_date": 1518712156, "post_id": 48803555, "comment_id": 84627350, "body": "Great! This script is the real solution!"}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": true, "score": 1, "last_activity_date": 1518686070, "creation_date": 1518686070, "answer_id": 48803555, "question_id": 48799151, "link": "https://stackoverflow.com/questions/48799151/print-first-line-of-a-group-of-blocks-after-comparison-of-a-number/48803555#48803555", "title": "Print first line of a group of blocks after comparison of a number", "body": "<p>With Perl, I'd say:</p>\n\n<pre><code>#!/usr/bin/perl\n\n$target = 32;\n\nwhile (&lt;&gt;) {\n    chop;\n    if (/^\\d+:/) {                  # treat the 1st line\n        $firstline = $_;            # keep the 1st line\n    } elsif (/^(\\d+) +([\\d.]+)/) {  # treat other lines in the block\n        if ($1 == $target &amp;&amp; $2 &gt; $max) {\n            $max = $2;              # update the highest value\n            $maxline = $firstline;  # and the 1st line of the block\n        }\n    }\n}\n\nprint $maxline, \"\\n\";\n</code></pre>\n\n<p>Note that it assumes the target numbers are not negative.\nInitialize $max with -Inf or whatever in such a case.</p>\n"}, {"tags": [], "owner": {"reputation": 2495, "user_id": 7313844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rEqq2.jpg?s=128&g=1", "display_name": "Dario", "link": "https://stackoverflow.com/users/7313844/dario"}, "is_accepted": false, "score": 0, "last_activity_date": 1518695477, "creation_date": 1518695477, "answer_id": 48806590, "question_id": 48799151, "link": "https://stackoverflow.com/questions/48799151/print-first-line-of-a-group-of-blocks-after-comparison-of-a-number/48806590#48806590", "title": "Print first line of a group of blocks after comparison of a number", "body": "<p>In pure <code>bash</code> you cannot compare floats, so you have to resort to an external program. The following <code>awk</code> one-liner solves your problem. It waits for data from standard input:</p>\n\n<pre><code>awk '/:/{h=$0}/^32/{if($1&gt;m){m=$1;mh=h}}END{print mh}'\n</code></pre>\n\n<ul>\n<li><code>h</code> keeps the latest block-beginning line, identified by the presence of <code>:</code></li>\n<li><code>m</code> keeps the maximum <code>32</code>-value read so far, silently initialized as <code>0</code></li>\n<li><code>mh</code> keeps the first line of the block where <code>m</code> was read</li>\n</ul>\n\n<p>If your input data are in a file called <code>data.txt</code></p>\n\n<pre><code>$ awk '/:/{h=$0}/^32/{if($1&gt;m){m=$1;mh=h}}END{print mh}' data.txt\n1: 2.2473 0.0102\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518735627, "post_id": 48815686, "comment_id": 84639331, "body": "It looks to me like reduce has to process each block twice."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518744668, "post_id": 48815686, "comment_id": 84641664, "body": "@7stud do you mean it calls <code>f_32</code> twice for every progression? If I understand <code>reduce</code>, the first block happens to be the greatest, so <code>f_32</code> gets called on that block for each iteration (4 in total) and the remaining blocks only call the function once."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518751721, "post_id": 48815686, "comment_id": 84643118, "body": "Yes, that&#39;s true, and as you say you would touch block1 four times.    And, if the max was in the last block (the example I was thinking of), then except for the first and last block, you would touch every block twice.  My concern is the repetition--it seems inefficient."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1518808163, "last_edit_date": 1518808163, "creation_date": 1518726319, "answer_id": 48815686, "question_id": 48799151, "link": "https://stackoverflow.com/questions/48799151/print-first-line-of-a-group-of-blocks-after-comparison-of-a-number/48815686#48815686", "title": "Print first line of a group of blocks after comparison of a number", "body": "<p>In addition to the good examples shown, here is a solution using the <code>reduce</code> function from List::Util module (which is core perl).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util 'reduce';\n\nmy $file = &lt;&lt;EOF;\n1: 2.2473 0.0102\n32 94.7762\n33 2.17695\n\n2: 2.9864 0.0021\n32 8.42305\n33 86.9749\n\n3: 3.4679 0.0576\n32 64.6138\n33 32.5034\n\n4: 3.6459 0.0531\n32 62.301\n33 34.7803\n\n5: 3.8914 0.0039\n35 5.04095\n32 5.55511\n33 4.0436 \n34 82.839\nEOF\n\n{\n    local $/ = '';\n    open my $fh, '&lt;', \\$file;\n    my $max = reduce {f_32($a) &gt; f_32($b) ? $a : $b} &lt;$fh&gt;;\n    ($max) = $max =~ /\\A(.+)/;\n    print $max;\n}\n\nsub f_32 {\n    $_[0] =~ /^32 (\\S+)/m;\n    return $1;  \n}\n</code></pre>\n\n<p><strong>Update:</strong> to allow only one function call per block, use a cache,</p>\n\n<pre><code>my %c; # cache\nmy $max = reduce {($c{$a}//=f_32($a)) &gt; ($c{$b}//=f_32($b)) ? $a : $b} &lt;$fh&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1518963296, "last_edit_date": 1518963296, "creation_date": 1518899454, "answer_id": 48845662, "question_id": 48799151, "link": "https://stackoverflow.com/questions/48799151/print-first-line-of-a-group-of-blocks-after-comparison-of-a-number/48845662#48845662", "title": "Print first line of a group of blocks after comparison of a number", "body": "<p>I was wondering how the various solutions here measured against each other. I created a new input file of 1000 records, (rather than the 5 in the original question).</p>\n\n<pre><code>1: 1.0892 4.4110\n33 17.46216\n32 32.64771\n34 112.64038\n\n2: 9.6591 9.9243\n33 116.30859\n32 38.09204\n34 117.57813\n\n3: 1.6385 3.0847\n33 45.08057\n32 3.52173\n34 145.28809\n\n4: 7.0053 9.0564\n33 24.13330\n32 169.46411\n34 92.74902\n\n5: 9.9045 4.8688\n33 130.81055\n32 4.88892\n34 54.73022\n\n6: 0.1675 1.0004\n33 11.64551\n32 124.31641\n34 186.35864\n\n7: 5.5832 8.3316\n33 113.65356\n32 23.00415\n34 85.02808\n\n8: 5.2414 9.9789\n33 37.54883\n32 102.96021\n34 30.73730\n\n...\n\n988: 1.9385 2.5787\n33 40.78369\n32 53.44849\n34 185.05249\n\n989: 2.5055 3.4680\n33 86.19995\n32 158.31909\n34 34.89380\n\n990: 2.1933 2.4203\n33 197.74780\n32 188.86108\n34 14.01978\n\n991: 4.7644 1.2238\n33 88.16528\n32 132.70264\n34 24.19434\n\n992: 8.9307 0.8044\n33 139.25781\n32 149.59106\n34 19.18945\n\n993: 4.4110 0.4428\n33 80.05981\n32 18.20068\n34 95.30640\n\n994: 2.4542 7.6740\n33 80.09033\n32 69.81812\n34 25.07324\n\n995: 9.3329 5.8911\n33 82.72095\n32 194.39697\n34 95.65430\n\n996: 0.8450 3.8217\n33 32.95288\n32 43.08472\n34 18.46924\n\n997: 2.0261 6.6580\n33 68.61572\n32 52.85645\n34 136.04736\n\n998: 2.7808 2.9456\n33 54.71191\n32 75.15869\n34 15.55786\n\n999: 0.6631 9.5544\n33 161.90186\n32 185.33325\n34 61.21216\n\n1000: 1.6800 5.0317\n33 94.12842\n32 188.36060\n34 6.04248\n</code></pre>\n\n<p>Then, I ran a benchmark against that data.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util qw/first reduce/;\nuse Benchmark qw/ cmpthese /;\n\nmy $file = 'bench_reduce.txt';\n\nmy $cache = sub {\n    local $/ = '';\n    open my $fh, '&lt;', $file;\n    my %c; # cache\n    my $max = reduce {($c{$a}//=f_32($a)) &gt; ($c{$b}//=f_32($b)) ? $a : $b} &lt;$fh&gt;;\n    ($max) = $max =~ /\\A(.+)/;\n    #print $max;\n};\n\nmy $reduce = sub {\n    local $/ = '';\n    open my $fh, '&lt;', $file;\n    my $max = reduce {f_32($a) &gt; f_32($b) ? $a : $b} &lt;$fh&gt;;\n    ($max) = $max =~ /\\A(.+)/;\n    #print $max;\n};\n\n\nsub f_32 {\n    $_[0] =~ /^32 (\\S+)/m;\n    return $1;  \n}\n\nmy $tshiono = sub {\n    my ($maxline, $firstline);\n    my $max = 0;\n    my $target = 32;\n    open my $fh, '&lt;', $file;\n    while (&lt;$fh&gt;) {\n        chop;\n        if (/^\\d+:/) {                  # treat the 1st line\n            $firstline = $_;            # keep the 1st line\n        } elsif (/^(\\d+) +([\\d.]+)/) {  # treat other lines in the block\n            if ($1 == $target &amp;&amp; $2 &gt; $max) {\n                $max = $2;              # update the highest value\n                $maxline = $firstline;  # and the 1st line of the block\n            }\n        }\n    }   \n};\n\nmy $_7stud = sub {\n    open my $INFILE, '&lt;', $file;\n    my %results;\n\n    {\n        local $/ = '';  #input record separator =&gt; paragraph mode\n\n        while (my $block = &lt;$INFILE&gt; ) {\n            my @lines = split /\\n/, $block;\n            my $line32 = first {/^32/} @lines;\n\n            (undef, my $ranking_num) = split ' ', $line32;\n            $results{$ranking_num} = $lines[0];\n        }\n    }\n\n    close $INFILE;\n\n    my @sorted_nums = sort{$a &lt;=&gt; $b} keys %results;\n\n    my $biggest_num = $sorted_nums[-1];\n\n};\n\ncmpthese  (-1,\n    {\n        w_o_cache =&gt; $reduce,\n        w_cache =&gt; $cache,\n        tshiono =&gt; $tshiono,\n        '7stud' =&gt; $_7stud\n    });\n</code></pre>\n\n<p>For 3 runs, I got:</p>\n\n<pre><code>C:\\Old_Data\\perlp&gt;perl bench_reduce.pl\n           Rate   tshiono     7stud w_o_cache   w_cache\ntshiono   132/s        --      -11%      -47%      -49%\n7stud     149/s       13%        --      -40%      -42%\nw_o_cache 249/s       89%       68%        --       -3%\nw_cache   256/s       95%       73%        3%        --\n\nC:\\Old_Data\\perlp&gt;perl bench_reduce.pl\n           Rate   tshiono     7stud w_o_cache   w_cache\ntshiono   143/s        --       -9%      -42%      -45%\n7stud     157/s       10%        --      -36%      -40%\nw_o_cache 245/s       72%       56%        --       -6%\nw_cache   260/s       82%       66%        6%        --\n\nC:\\Old_Data\\perlp&gt;perl bench_reduce.pl\n           Rate   tshiono     7stud w_o_cache   w_cache\ntshiono   143/s        --       -3%      -42%      -47%\n7stud     147/s        3%        --      -40%      -46%\nw_o_cache 245/s       71%       67%        --       -9%\nw_cache   270/s       89%       84%       10%        --\n</code></pre>\n\n<p>I am guessing tshiono's took the longest time because it is reading line by line (5000 reads) rather than chunk by chunk (1000 chunks). I was surprised though, because it basically is the same logic as the <code>reduce</code> code.</p>\n\n<p>7stud's result might be attributed to the sort he calls, whereas for my reduce solution doesn't sort. Although I can't say exactly.</p>\n"}], "owner": {"reputation": 141, "user_id": 5820887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00eb41094c5914cba5e223add5024efd?s=128&d=identicon&r=PG&f=1", "display_name": "alloppp", "link": "https://stackoverflow.com/users/5820887/alloppp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 48803555, "answer_count": 5, "score": -1, "last_activity_date": 1518963296, "creation_date": 1518661276, "question_id": 48799151, "link": "https://stackoverflow.com/questions/48799151/print-first-line-of-a-group-of-blocks-after-comparison-of-a-number", "title": "Print first line of a group of blocks after comparison of a number", "body": "<p>I have a many dataset  like this one:</p>\n\n<pre><code>1: 2.2473 0.0102\n32 94.7762\n33 2.17695\n\n2: 2.9864 0.0021\n32 8.42305\n33 86.9749\n\n3: 3.4679 0.0576\n32 64.6138\n33 32.5034\n\n4: 3.6459 0.0531\n32 62.301\n33 34.7803\n\n5: 3.8914 0.0039\n35 5.04095\n32 5.55511\n33 4.0436 \n34 82.839\n</code></pre>\n\n<p>In this example there are 5 main blocks. The first line of each block start with a number (1,2,3,4,5). The second line of a block contain another numbers, and so on ...</p>\n\n<p>I need to ignore the first line of every block, and do a comparison of the numbers located at the right of the number 32, in order to choose the highest value. After that, the first line of the block, which contain the highest value  at the right of the number 32, need to be printed.</p>\n\n<p>In this example, the line to be printed is :</p>\n\n<pre><code>   1: 2.2473 0.0102\n</code></pre>\n\n<p>I was trying to do that on bash and perl but without any success. Do you have an idea?</p>\n"}]